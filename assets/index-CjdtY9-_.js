const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-B6jkHtIc.js","assets/index-B5DZHykP.css"])))=>i.map(i=>d[i]);
(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();var Ns=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function jk(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Mk={exports:{}},Zo={},Pk={exports:{}},re={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ls=Symbol.for("react.element"),FP=Symbol.for("react.portal"),VP=Symbol.for("react.fragment"),BP=Symbol.for("react.strict_mode"),$P=Symbol.for("react.profiler"),zP=Symbol.for("react.provider"),UP=Symbol.for("react.context"),GP=Symbol.for("react.forward_ref"),HP=Symbol.for("react.suspense"),WP=Symbol.for("react.memo"),KP=Symbol.for("react.lazy"),Cg=Symbol.iterator;function YP(e){return e===null||typeof e!="object"?null:(e=Cg&&e[Cg]||e["@@iterator"],typeof e=="function"?e:null)}var Nk={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Rk=Object.assign,Ak={};function Vi(e,t,n){this.props=e,this.context=t,this.refs=Ak,this.updater=n||Nk}Vi.prototype.isReactComponent={};Vi.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Vi.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Ik(){}Ik.prototype=Vi.prototype;function sv(e,t,n){this.props=e,this.context=t,this.refs=Ak,this.updater=n||Nk}var ov=sv.prototype=new Ik;ov.constructor=sv;Rk(ov,Vi.prototype);ov.isPureReactComponent=!0;var Tg=Array.isArray,Dk=Object.prototype.hasOwnProperty,lv={current:null},Lk={key:!0,ref:!0,__self:!0,__source:!0};function Ok(e,t,n){var r,i={},a=null,s=null;if(t!=null)for(r in t.ref!==void 0&&(s=t.ref),t.key!==void 0&&(a=""+t.key),t)Dk.call(t,r)&&!Lk.hasOwnProperty(r)&&(i[r]=t[r]);var o=arguments.length-2;if(o===1)i.children=n;else if(1<o){for(var l=Array(o),u=0;u<o;u++)l[u]=arguments[u+2];i.children=l}if(e&&e.defaultProps)for(r in o=e.defaultProps,o)i[r]===void 0&&(i[r]=o[r]);return{$$typeof:ls,type:e,key:a,ref:s,props:i,_owner:lv.current}}function QP(e,t){return{$$typeof:ls,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function uv(e){return typeof e=="object"&&e!==null&&e.$$typeof===ls}function XP(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var jg=/\/+/g;function uu(e,t){return typeof e=="object"&&e!==null&&e.key!=null?XP(""+e.key):t.toString(36)}function no(e,t,n,r,i){var a=typeof e;(a==="undefined"||a==="boolean")&&(e=null);var s=!1;if(e===null)s=!0;else switch(a){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case ls:case FP:s=!0}}if(s)return s=e,i=i(s),e=r===""?"."+uu(s,0):r,Tg(i)?(n="",e!=null&&(n=e.replace(jg,"$&/")+"/"),no(i,t,n,"",function(u){return u})):i!=null&&(uv(i)&&(i=QP(i,n+(!i.key||s&&s.key===i.key?"":(""+i.key).replace(jg,"$&/")+"/")+e)),t.push(i)),1;if(s=0,r=r===""?".":r+":",Tg(e))for(var o=0;o<e.length;o++){a=e[o];var l=r+uu(a,o);s+=no(a,t,n,l,i)}else if(l=YP(e),typeof l=="function")for(e=l.call(e),o=0;!(a=e.next()).done;)a=a.value,l=r+uu(a,o++),s+=no(a,t,n,l,i);else if(a==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function Rs(e,t,n){if(e==null)return e;var r=[],i=0;return no(e,r,"","",function(a){return t.call(n,a,i++)}),r}function JP(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var st={current:null},ro={transition:null},ZP={ReactCurrentDispatcher:st,ReactCurrentBatchConfig:ro,ReactCurrentOwner:lv};function qk(){throw Error("act(...) is not supported in production builds of React.")}re.Children={map:Rs,forEach:function(e,t,n){Rs(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Rs(e,function(){t++}),t},toArray:function(e){return Rs(e,function(t){return t})||[]},only:function(e){if(!uv(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};re.Component=Vi;re.Fragment=VP;re.Profiler=$P;re.PureComponent=sv;re.StrictMode=BP;re.Suspense=HP;re.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ZP;re.act=qk;re.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=Rk({},e.props),i=e.key,a=e.ref,s=e._owner;if(t!=null){if(t.ref!==void 0&&(a=t.ref,s=lv.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var o=e.type.defaultProps;for(l in t)Dk.call(t,l)&&!Lk.hasOwnProperty(l)&&(r[l]=t[l]===void 0&&o!==void 0?o[l]:t[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){o=Array(l);for(var u=0;u<l;u++)o[u]=arguments[u+2];r.children=o}return{$$typeof:ls,type:e.type,key:i,ref:a,props:r,_owner:s}};re.createContext=function(e){return e={$$typeof:UP,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:zP,_context:e},e.Consumer=e};re.createElement=Ok;re.createFactory=function(e){var t=Ok.bind(null,e);return t.type=e,t};re.createRef=function(){return{current:null}};re.forwardRef=function(e){return{$$typeof:GP,render:e}};re.isValidElement=uv;re.lazy=function(e){return{$$typeof:KP,_payload:{_status:-1,_result:e},_init:JP}};re.memo=function(e,t){return{$$typeof:WP,type:e,compare:t===void 0?null:t}};re.startTransition=function(e){var t=ro.transition;ro.transition={};try{e()}finally{ro.transition=t}};re.unstable_act=qk;re.useCallback=function(e,t){return st.current.useCallback(e,t)};re.useContext=function(e){return st.current.useContext(e)};re.useDebugValue=function(){};re.useDeferredValue=function(e){return st.current.useDeferredValue(e)};re.useEffect=function(e,t){return st.current.useEffect(e,t)};re.useId=function(){return st.current.useId()};re.useImperativeHandle=function(e,t,n){return st.current.useImperativeHandle(e,t,n)};re.useInsertionEffect=function(e,t){return st.current.useInsertionEffect(e,t)};re.useLayoutEffect=function(e,t){return st.current.useLayoutEffect(e,t)};re.useMemo=function(e,t){return st.current.useMemo(e,t)};re.useReducer=function(e,t,n){return st.current.useReducer(e,t,n)};re.useRef=function(e){return st.current.useRef(e)};re.useState=function(e){return st.current.useState(e)};re.useSyncExternalStore=function(e,t,n){return st.current.useSyncExternalStore(e,t,n)};re.useTransition=function(){return st.current.useTransition()};re.version="18.3.1";Pk.exports=re;var S=Pk.exports;const eN=jk(S);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tN=S,nN=Symbol.for("react.element"),rN=Symbol.for("react.fragment"),iN=Object.prototype.hasOwnProperty,aN=tN.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,sN={key:!0,ref:!0,__self:!0,__source:!0};function Fk(e,t,n){var r,i={},a=null,s=null;n!==void 0&&(a=""+n),t.key!==void 0&&(a=""+t.key),t.ref!==void 0&&(s=t.ref);for(r in t)iN.call(t,r)&&!sN.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:nN,type:e,key:a,ref:s,props:i,_owner:aN.current}}Zo.Fragment=rN;Zo.jsx=Fk;Zo.jsxs=Fk;Mk.exports=Zo;var h=Mk.exports,Hp={},Vk={exports:{}},_t={},Bk={exports:{}},$k={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(A,q){var U=A.length;A.push(q);e:for(;0<U;){var z=U-1>>>1,ae=A[z];if(0<i(ae,q))A[z]=q,A[U]=ae,U=z;else break e}}function n(A){return A.length===0?null:A[0]}function r(A){if(A.length===0)return null;var q=A[0],U=A.pop();if(U!==q){A[0]=U;e:for(var z=0,ae=A.length,Te=ae>>>1;z<Te;){var oe=2*(z+1)-1,ce=A[oe],B=oe+1,de=A[B];if(0>i(ce,U))B<ae&&0>i(de,ce)?(A[z]=de,A[B]=U,z=B):(A[z]=ce,A[oe]=U,z=oe);else if(B<ae&&0>i(de,U))A[z]=de,A[B]=U,z=B;else break e}}return q}function i(A,q){var U=A.sortIndex-q.sortIndex;return U!==0?U:A.id-q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var s=Date,o=s.now();e.unstable_now=function(){return s.now()-o}}var l=[],u=[],c=1,d=null,f=3,m=!1,v=!1,p=!1,x=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(A){for(var q=n(u);q!==null;){if(q.callback===null)r(u);else if(q.startTime<=A)r(u),q.sortIndex=q.expirationTime,t(l,q);else break;q=n(u)}}function _(A){if(p=!1,w(A),!v)if(n(l)!==null)v=!0,le(E);else{var q=n(u);q!==null&&ie(_,q.startTime-A)}}function E(A,q){v=!1,p&&(p=!1,y(C),C=-1),m=!0;var U=f;try{for(w(q),d=n(l);d!==null&&(!(d.expirationTime>q)||A&&!R());){var z=d.callback;if(typeof z=="function"){d.callback=null,f=d.priorityLevel;var ae=z(d.expirationTime<=q);q=e.unstable_now(),typeof ae=="function"?d.callback=ae:d===n(l)&&r(l),w(q)}else r(l);d=n(l)}if(d!==null)var Te=!0;else{var oe=n(u);oe!==null&&ie(_,oe.startTime-q),Te=!1}return Te}finally{d=null,f=U,m=!1}}var T=!1,j=null,C=-1,M=5,P=-1;function R(){return!(e.unstable_now()-P<M)}function I(){if(j!==null){var A=e.unstable_now();P=A;var q=!0;try{q=j(!0,A)}finally{q?O():(T=!1,j=null)}}else T=!1}var O;if(typeof g=="function")O=function(){g(I)};else if(typeof MessageChannel<"u"){var K=new MessageChannel,V=K.port2;K.port1.onmessage=I,O=function(){V.postMessage(null)}}else O=function(){x(I,0)};function le(A){j=A,T||(T=!0,O())}function ie(A,q){C=x(function(){A(e.unstable_now())},q)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(A){A.callback=null},e.unstable_continueExecution=function(){v||m||(v=!0,le(E))},e.unstable_forceFrameRate=function(A){0>A||125<A?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<A?Math.floor(1e3/A):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return n(l)},e.unstable_next=function(A){switch(f){case 1:case 2:case 3:var q=3;break;default:q=f}var U=f;f=q;try{return A()}finally{f=U}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(A,q){switch(A){case 1:case 2:case 3:case 4:case 5:break;default:A=3}var U=f;f=A;try{return q()}finally{f=U}},e.unstable_scheduleCallback=function(A,q,U){var z=e.unstable_now();switch(typeof U=="object"&&U!==null?(U=U.delay,U=typeof U=="number"&&0<U?z+U:z):U=z,A){case 1:var ae=-1;break;case 2:ae=250;break;case 5:ae=1073741823;break;case 4:ae=1e4;break;default:ae=5e3}return ae=U+ae,A={id:c++,callback:q,priorityLevel:A,startTime:U,expirationTime:ae,sortIndex:-1},U>z?(A.sortIndex=U,t(u,A),n(l)===null&&A===n(u)&&(p?(y(C),C=-1):p=!0,ie(_,U-z))):(A.sortIndex=ae,t(l,A),v||m||(v=!0,le(E))),A},e.unstable_shouldYield=R,e.unstable_wrapCallback=function(A){var q=f;return function(){var U=f;f=q;try{return A.apply(this,arguments)}finally{f=U}}}})($k);Bk.exports=$k;var oN=Bk.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lN=S,xt=oN;function L(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var zk=new Set,Va={};function Vr(e,t){Pi(e,t),Pi(e+"Capture",t)}function Pi(e,t){for(Va[e]=t,e=0;e<t.length;e++)zk.add(t[e])}var kn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Wp=Object.prototype.hasOwnProperty,uN=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Mg={},Pg={};function cN(e){return Wp.call(Pg,e)?!0:Wp.call(Mg,e)?!1:uN.test(e)?Pg[e]=!0:(Mg[e]=!0,!1)}function dN(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function fN(e,t,n,r){if(t===null||typeof t>"u"||dN(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function ot(e,t,n,r,i,a,s){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=s}var Ye={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Ye[e]=new ot(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Ye[t]=new ot(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Ye[e]=new ot(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Ye[e]=new ot(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Ye[e]=new ot(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Ye[e]=new ot(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Ye[e]=new ot(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Ye[e]=new ot(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Ye[e]=new ot(e,5,!1,e.toLowerCase(),null,!1,!1)});var cv=/[\-:]([a-z])/g;function dv(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(cv,dv);Ye[t]=new ot(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(cv,dv);Ye[t]=new ot(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(cv,dv);Ye[t]=new ot(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Ye[e]=new ot(e,1,!1,e.toLowerCase(),null,!1,!1)});Ye.xlinkHref=new ot("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Ye[e]=new ot(e,1,!1,e.toLowerCase(),null,!0,!0)});function fv(e,t,n,r){var i=Ye.hasOwnProperty(t)?Ye[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(fN(t,n,i,r)&&(n=null),r||i===null?cN(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,r=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Pn=lN.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,As=Symbol.for("react.element"),oi=Symbol.for("react.portal"),li=Symbol.for("react.fragment"),hv=Symbol.for("react.strict_mode"),Kp=Symbol.for("react.profiler"),Uk=Symbol.for("react.provider"),Gk=Symbol.for("react.context"),pv=Symbol.for("react.forward_ref"),Yp=Symbol.for("react.suspense"),Qp=Symbol.for("react.suspense_list"),mv=Symbol.for("react.memo"),zn=Symbol.for("react.lazy"),Hk=Symbol.for("react.offscreen"),Ng=Symbol.iterator;function ra(e){return e===null||typeof e!="object"?null:(e=Ng&&e[Ng]||e["@@iterator"],typeof e=="function"?e:null)}var Ce=Object.assign,cu;function pa(e){if(cu===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);cu=t&&t[1]||""}return`
`+cu+e}var du=!1;function fu(e,t){if(!e||du)return"";du=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),a=r.stack.split(`
`),s=i.length-1,o=a.length-1;1<=s&&0<=o&&i[s]!==a[o];)o--;for(;1<=s&&0<=o;s--,o--)if(i[s]!==a[o]){if(s!==1||o!==1)do if(s--,o--,0>o||i[s]!==a[o]){var l=`
`+i[s].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}while(1<=s&&0<=o);break}}}finally{du=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?pa(e):""}function hN(e){switch(e.tag){case 5:return pa(e.type);case 16:return pa("Lazy");case 13:return pa("Suspense");case 19:return pa("SuspenseList");case 0:case 2:case 15:return e=fu(e.type,!1),e;case 11:return e=fu(e.type.render,!1),e;case 1:return e=fu(e.type,!0),e;default:return""}}function Xp(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case li:return"Fragment";case oi:return"Portal";case Kp:return"Profiler";case hv:return"StrictMode";case Yp:return"Suspense";case Qp:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Gk:return(e.displayName||"Context")+".Consumer";case Uk:return(e._context.displayName||"Context")+".Provider";case pv:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case mv:return t=e.displayName||null,t!==null?t:Xp(e.type)||"Memo";case zn:t=e._payload,e=e._init;try{return Xp(e(t))}catch{}}return null}function pN(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Xp(t);case 8:return t===hv?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function ar(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Wk(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function mN(e){var t=Wk(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(s){r=""+s,a.call(this,s)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(s){r=""+s},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Is(e){e._valueTracker||(e._valueTracker=mN(e))}function Kk(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Wk(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function go(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Jp(e,t){var n=t.checked;return Ce({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Rg(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=ar(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Yk(e,t){t=t.checked,t!=null&&fv(e,"checked",t,!1)}function Zp(e,t){Yk(e,t);var n=ar(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?em(e,t.type,n):t.hasOwnProperty("defaultValue")&&em(e,t.type,ar(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Ag(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function em(e,t,n){(t!=="number"||go(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var ma=Array.isArray;function ki(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+ar(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function tm(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(L(91));return Ce({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Ig(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(L(92));if(ma(n)){if(1<n.length)throw Error(L(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:ar(n)}}function Qk(e,t){var n=ar(t.value),r=ar(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function Dg(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Xk(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function nm(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Xk(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Ds,Jk=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Ds=Ds||document.createElement("div"),Ds.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Ds.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Ba(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Ta={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},vN=["Webkit","ms","Moz","O"];Object.keys(Ta).forEach(function(e){vN.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Ta[t]=Ta[e]})});function Zk(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Ta.hasOwnProperty(e)&&Ta[e]?(""+t).trim():t+"px"}function eE(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=Zk(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}var yN=Ce({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function rm(e,t){if(t){if(yN[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(L(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(L(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(L(61))}if(t.style!=null&&typeof t.style!="object")throw Error(L(62))}}function im(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var am=null;function vv(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var sm=null,Ei=null,Ci=null;function Lg(e){if(e=ds(e)){if(typeof sm!="function")throw Error(L(280));var t=e.stateNode;t&&(t=il(t),sm(e.stateNode,e.type,t))}}function tE(e){Ei?Ci?Ci.push(e):Ci=[e]:Ei=e}function nE(){if(Ei){var e=Ei,t=Ci;if(Ci=Ei=null,Lg(e),t)for(e=0;e<t.length;e++)Lg(t[e])}}function rE(e,t){return e(t)}function iE(){}var hu=!1;function aE(e,t,n){if(hu)return e(t,n);hu=!0;try{return rE(e,t,n)}finally{hu=!1,(Ei!==null||Ci!==null)&&(iE(),nE())}}function $a(e,t){var n=e.stateNode;if(n===null)return null;var r=il(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(L(231,t,typeof n));return n}var om=!1;if(kn)try{var ia={};Object.defineProperty(ia,"passive",{get:function(){om=!0}}),window.addEventListener("test",ia,ia),window.removeEventListener("test",ia,ia)}catch{om=!1}function gN(e,t,n,r,i,a,s,o,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(c){this.onError(c)}}var ja=!1,bo=null,wo=!1,lm=null,bN={onError:function(e){ja=!0,bo=e}};function wN(e,t,n,r,i,a,s,o,l){ja=!1,bo=null,gN.apply(bN,arguments)}function xN(e,t,n,r,i,a,s,o,l){if(wN.apply(this,arguments),ja){if(ja){var u=bo;ja=!1,bo=null}else throw Error(L(198));wo||(wo=!0,lm=u)}}function Br(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function sE(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Og(e){if(Br(e)!==e)throw Error(L(188))}function SN(e){var t=e.alternate;if(!t){if(t=Br(e),t===null)throw Error(L(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var a=i.alternate;if(a===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return Og(i),e;if(a===r)return Og(i),t;a=a.sibling}throw Error(L(188))}if(n.return!==r.return)n=i,r=a;else{for(var s=!1,o=i.child;o;){if(o===n){s=!0,n=i,r=a;break}if(o===r){s=!0,r=i,n=a;break}o=o.sibling}if(!s){for(o=a.child;o;){if(o===n){s=!0,n=a,r=i;break}if(o===r){s=!0,r=a,n=i;break}o=o.sibling}if(!s)throw Error(L(189))}}if(n.alternate!==r)throw Error(L(190))}if(n.tag!==3)throw Error(L(188));return n.stateNode.current===n?e:t}function oE(e){return e=SN(e),e!==null?lE(e):null}function lE(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=lE(e);if(t!==null)return t;e=e.sibling}return null}var uE=xt.unstable_scheduleCallback,qg=xt.unstable_cancelCallback,_N=xt.unstable_shouldYield,kN=xt.unstable_requestPaint,De=xt.unstable_now,EN=xt.unstable_getCurrentPriorityLevel,yv=xt.unstable_ImmediatePriority,cE=xt.unstable_UserBlockingPriority,xo=xt.unstable_NormalPriority,CN=xt.unstable_LowPriority,dE=xt.unstable_IdlePriority,el=null,nn=null;function TN(e){if(nn&&typeof nn.onCommitFiberRoot=="function")try{nn.onCommitFiberRoot(el,e,void 0,(e.current.flags&128)===128)}catch{}}var Ut=Math.clz32?Math.clz32:PN,jN=Math.log,MN=Math.LN2;function PN(e){return e>>>=0,e===0?32:31-(jN(e)/MN|0)|0}var Ls=64,Os=4194304;function va(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function So(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,s=n&268435455;if(s!==0){var o=s&~i;o!==0?r=va(o):(a&=s,a!==0&&(r=va(a)))}else s=n&~i,s!==0?r=va(s):a!==0&&(r=va(a));if(r===0)return 0;if(t!==0&&t!==r&&!(t&i)&&(i=r&-r,a=t&-t,i>=a||i===16&&(a&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Ut(t),i=1<<n,r|=e[n],t&=~i;return r}function NN(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function RN(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var s=31-Ut(a),o=1<<s,l=i[s];l===-1?(!(o&n)||o&r)&&(i[s]=NN(o,t)):l<=t&&(e.expiredLanes|=o),a&=~o}}function um(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function fE(){var e=Ls;return Ls<<=1,!(Ls&4194240)&&(Ls=64),e}function pu(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function us(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Ut(t),e[t]=n}function AN(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-Ut(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}function gv(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Ut(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var he=0;function hE(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var pE,bv,mE,vE,yE,cm=!1,qs=[],Qn=null,Xn=null,Jn=null,za=new Map,Ua=new Map,Gn=[],IN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Fg(e,t){switch(e){case"focusin":case"focusout":Qn=null;break;case"dragenter":case"dragleave":Xn=null;break;case"mouseover":case"mouseout":Jn=null;break;case"pointerover":case"pointerout":za.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ua.delete(t.pointerId)}}function aa(e,t,n,r,i,a){return e===null||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},t!==null&&(t=ds(t),t!==null&&bv(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function DN(e,t,n,r,i){switch(t){case"focusin":return Qn=aa(Qn,e,t,n,r,i),!0;case"dragenter":return Xn=aa(Xn,e,t,n,r,i),!0;case"mouseover":return Jn=aa(Jn,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return za.set(a,aa(za.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Ua.set(a,aa(Ua.get(a)||null,e,t,n,r,i)),!0}return!1}function gE(e){var t=Cr(e.target);if(t!==null){var n=Br(t);if(n!==null){if(t=n.tag,t===13){if(t=sE(n),t!==null){e.blockedOn=t,yE(e.priority,function(){mE(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function io(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=dm(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);am=r,n.target.dispatchEvent(r),am=null}else return t=ds(n),t!==null&&bv(t),e.blockedOn=n,!1;t.shift()}return!0}function Vg(e,t,n){io(e)&&n.delete(t)}function LN(){cm=!1,Qn!==null&&io(Qn)&&(Qn=null),Xn!==null&&io(Xn)&&(Xn=null),Jn!==null&&io(Jn)&&(Jn=null),za.forEach(Vg),Ua.forEach(Vg)}function sa(e,t){e.blockedOn===t&&(e.blockedOn=null,cm||(cm=!0,xt.unstable_scheduleCallback(xt.unstable_NormalPriority,LN)))}function Ga(e){function t(i){return sa(i,e)}if(0<qs.length){sa(qs[0],e);for(var n=1;n<qs.length;n++){var r=qs[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Qn!==null&&sa(Qn,e),Xn!==null&&sa(Xn,e),Jn!==null&&sa(Jn,e),za.forEach(t),Ua.forEach(t),n=0;n<Gn.length;n++)r=Gn[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Gn.length&&(n=Gn[0],n.blockedOn===null);)gE(n),n.blockedOn===null&&Gn.shift()}var Ti=Pn.ReactCurrentBatchConfig,_o=!0;function ON(e,t,n,r){var i=he,a=Ti.transition;Ti.transition=null;try{he=1,wv(e,t,n,r)}finally{he=i,Ti.transition=a}}function qN(e,t,n,r){var i=he,a=Ti.transition;Ti.transition=null;try{he=4,wv(e,t,n,r)}finally{he=i,Ti.transition=a}}function wv(e,t,n,r){if(_o){var i=dm(e,t,n,r);if(i===null)ku(e,t,r,ko,n),Fg(e,r);else if(DN(i,e,t,n,r))r.stopPropagation();else if(Fg(e,r),t&4&&-1<IN.indexOf(e)){for(;i!==null;){var a=ds(i);if(a!==null&&pE(a),a=dm(e,t,n,r),a===null&&ku(e,t,r,ko,n),a===i)break;i=a}i!==null&&r.stopPropagation()}else ku(e,t,r,null,n)}}var ko=null;function dm(e,t,n,r){if(ko=null,e=vv(r),e=Cr(e),e!==null)if(t=Br(e),t===null)e=null;else if(n=t.tag,n===13){if(e=sE(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return ko=e,null}function bE(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(EN()){case yv:return 1;case cE:return 4;case xo:case CN:return 16;case dE:return 536870912;default:return 16}default:return 16}}var Kn=null,xv=null,ao=null;function wE(){if(ao)return ao;var e,t=xv,n=t.length,r,i="value"in Kn?Kn.value:Kn.textContent,a=i.length;for(e=0;e<n&&t[e]===i[e];e++);var s=n-e;for(r=1;r<=s&&t[n-r]===i[a-r];r++);return ao=i.slice(e,1<r?1-r:void 0)}function so(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Fs(){return!0}function Bg(){return!1}function kt(e){function t(n,r,i,a,s){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=a,this.target=s,this.currentTarget=null;for(var o in e)e.hasOwnProperty(o)&&(n=e[o],this[o]=n?n(a):a[o]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?Fs:Bg,this.isPropagationStopped=Bg,this}return Ce(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Fs)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Fs)},persist:function(){},isPersistent:Fs}),t}var Bi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Sv=kt(Bi),cs=Ce({},Bi,{view:0,detail:0}),FN=kt(cs),mu,vu,oa,tl=Ce({},cs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:_v,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==oa&&(oa&&e.type==="mousemove"?(mu=e.screenX-oa.screenX,vu=e.screenY-oa.screenY):vu=mu=0,oa=e),mu)},movementY:function(e){return"movementY"in e?e.movementY:vu}}),$g=kt(tl),VN=Ce({},tl,{dataTransfer:0}),BN=kt(VN),$N=Ce({},cs,{relatedTarget:0}),yu=kt($N),zN=Ce({},Bi,{animationName:0,elapsedTime:0,pseudoElement:0}),UN=kt(zN),GN=Ce({},Bi,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),HN=kt(GN),WN=Ce({},Bi,{data:0}),zg=kt(WN),KN={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},YN={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},QN={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function XN(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=QN[e])?!!t[e]:!1}function _v(){return XN}var JN=Ce({},cs,{key:function(e){if(e.key){var t=KN[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=so(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?YN[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:_v,charCode:function(e){return e.type==="keypress"?so(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?so(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),ZN=kt(JN),eR=Ce({},tl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ug=kt(eR),tR=Ce({},cs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:_v}),nR=kt(tR),rR=Ce({},Bi,{propertyName:0,elapsedTime:0,pseudoElement:0}),iR=kt(rR),aR=Ce({},tl,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),sR=kt(aR),oR=[9,13,27,32],kv=kn&&"CompositionEvent"in window,Ma=null;kn&&"documentMode"in document&&(Ma=document.documentMode);var lR=kn&&"TextEvent"in window&&!Ma,xE=kn&&(!kv||Ma&&8<Ma&&11>=Ma),Gg=" ",Hg=!1;function SE(e,t){switch(e){case"keyup":return oR.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function _E(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ui=!1;function uR(e,t){switch(e){case"compositionend":return _E(t);case"keypress":return t.which!==32?null:(Hg=!0,Gg);case"textInput":return e=t.data,e===Gg&&Hg?null:e;default:return null}}function cR(e,t){if(ui)return e==="compositionend"||!kv&&SE(e,t)?(e=wE(),ao=xv=Kn=null,ui=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return xE&&t.locale!=="ko"?null:t.data;default:return null}}var dR={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wg(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!dR[e.type]:t==="textarea"}function kE(e,t,n,r){tE(r),t=Eo(t,"onChange"),0<t.length&&(n=new Sv("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Pa=null,Ha=null;function fR(e){DE(e,0)}function nl(e){var t=fi(e);if(Kk(t))return e}function hR(e,t){if(e==="change")return t}var EE=!1;if(kn){var gu;if(kn){var bu="oninput"in document;if(!bu){var Kg=document.createElement("div");Kg.setAttribute("oninput","return;"),bu=typeof Kg.oninput=="function"}gu=bu}else gu=!1;EE=gu&&(!document.documentMode||9<document.documentMode)}function Yg(){Pa&&(Pa.detachEvent("onpropertychange",CE),Ha=Pa=null)}function CE(e){if(e.propertyName==="value"&&nl(Ha)){var t=[];kE(t,Ha,e,vv(e)),aE(fR,t)}}function pR(e,t,n){e==="focusin"?(Yg(),Pa=t,Ha=n,Pa.attachEvent("onpropertychange",CE)):e==="focusout"&&Yg()}function mR(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return nl(Ha)}function vR(e,t){if(e==="click")return nl(t)}function yR(e,t){if(e==="input"||e==="change")return nl(t)}function gR(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ht=typeof Object.is=="function"?Object.is:gR;function Wa(e,t){if(Ht(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Wp.call(t,i)||!Ht(e[i],t[i]))return!1}return!0}function Qg(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Xg(e,t){var n=Qg(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Qg(n)}}function TE(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?TE(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function jE(){for(var e=window,t=go();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=go(e.document)}return t}function Ev(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function bR(e){var t=jE(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&TE(n.ownerDocument.documentElement,n)){if(r!==null&&Ev(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=r.end===void 0?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=Xg(n,a);var s=Xg(n,r);i&&s&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==s.node||e.focusOffset!==s.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(s.node,s.offset)):(t.setEnd(s.node,s.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var wR=kn&&"documentMode"in document&&11>=document.documentMode,ci=null,fm=null,Na=null,hm=!1;function Jg(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;hm||ci==null||ci!==go(r)||(r=ci,"selectionStart"in r&&Ev(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Na&&Wa(Na,r)||(Na=r,r=Eo(fm,"onSelect"),0<r.length&&(t=new Sv("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=ci)))}function Vs(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var di={animationend:Vs("Animation","AnimationEnd"),animationiteration:Vs("Animation","AnimationIteration"),animationstart:Vs("Animation","AnimationStart"),transitionend:Vs("Transition","TransitionEnd")},wu={},ME={};kn&&(ME=document.createElement("div").style,"AnimationEvent"in window||(delete di.animationend.animation,delete di.animationiteration.animation,delete di.animationstart.animation),"TransitionEvent"in window||delete di.transitionend.transition);function rl(e){if(wu[e])return wu[e];if(!di[e])return e;var t=di[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in ME)return wu[e]=t[n];return e}var PE=rl("animationend"),NE=rl("animationiteration"),RE=rl("animationstart"),AE=rl("transitionend"),IE=new Map,Zg="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function cr(e,t){IE.set(e,t),Vr(t,[e])}for(var xu=0;xu<Zg.length;xu++){var Su=Zg[xu],xR=Su.toLowerCase(),SR=Su[0].toUpperCase()+Su.slice(1);cr(xR,"on"+SR)}cr(PE,"onAnimationEnd");cr(NE,"onAnimationIteration");cr(RE,"onAnimationStart");cr("dblclick","onDoubleClick");cr("focusin","onFocus");cr("focusout","onBlur");cr(AE,"onTransitionEnd");Pi("onMouseEnter",["mouseout","mouseover"]);Pi("onMouseLeave",["mouseout","mouseover"]);Pi("onPointerEnter",["pointerout","pointerover"]);Pi("onPointerLeave",["pointerout","pointerover"]);Vr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Vr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Vr("onBeforeInput",["compositionend","keypress","textInput","paste"]);Vr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Vr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Vr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ya="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),_R=new Set("cancel close invalid load scroll toggle".split(" ").concat(ya));function e0(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,xN(r,t,void 0,e),e.currentTarget=null}function DE(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var s=r.length-1;0<=s;s--){var o=r[s],l=o.instance,u=o.currentTarget;if(o=o.listener,l!==a&&i.isPropagationStopped())break e;e0(i,o,u),a=l}else for(s=0;s<r.length;s++){if(o=r[s],l=o.instance,u=o.currentTarget,o=o.listener,l!==a&&i.isPropagationStopped())break e;e0(i,o,u),a=l}}}if(wo)throw e=lm,wo=!1,lm=null,e}function ye(e,t){var n=t[gm];n===void 0&&(n=t[gm]=new Set);var r=e+"__bubble";n.has(r)||(LE(t,e,2,!1),n.add(r))}function _u(e,t,n){var r=0;t&&(r|=4),LE(n,e,r,t)}var Bs="_reactListening"+Math.random().toString(36).slice(2);function Ka(e){if(!e[Bs]){e[Bs]=!0,zk.forEach(function(n){n!=="selectionchange"&&(_R.has(n)||_u(n,!1,e),_u(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Bs]||(t[Bs]=!0,_u("selectionchange",!1,t))}}function LE(e,t,n,r){switch(bE(t)){case 1:var i=ON;break;case 4:i=qN;break;default:i=wv}n=i.bind(null,t,n,e),i=void 0,!om||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function ku(e,t,n,r,i){var a=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var s=r.tag;if(s===3||s===4){var o=r.stateNode.containerInfo;if(o===i||o.nodeType===8&&o.parentNode===i)break;if(s===4)for(s=r.return;s!==null;){var l=s.tag;if((l===3||l===4)&&(l=s.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;s=s.return}for(;o!==null;){if(s=Cr(o),s===null)return;if(l=s.tag,l===5||l===6){r=a=s;continue e}o=o.parentNode}}r=r.return}aE(function(){var u=a,c=vv(n),d=[];e:{var f=IE.get(e);if(f!==void 0){var m=Sv,v=e;switch(e){case"keypress":if(so(n)===0)break e;case"keydown":case"keyup":m=ZN;break;case"focusin":v="focus",m=yu;break;case"focusout":v="blur",m=yu;break;case"beforeblur":case"afterblur":m=yu;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=$g;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=BN;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=nR;break;case PE:case NE:case RE:m=UN;break;case AE:m=iR;break;case"scroll":m=FN;break;case"wheel":m=sR;break;case"copy":case"cut":case"paste":m=HN;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=Ug}var p=(t&4)!==0,x=!p&&e==="scroll",y=p?f!==null?f+"Capture":null:f;p=[];for(var g=u,w;g!==null;){w=g;var _=w.stateNode;if(w.tag===5&&_!==null&&(w=_,y!==null&&(_=$a(g,y),_!=null&&p.push(Ya(g,_,w)))),x)break;g=g.return}0<p.length&&(f=new m(f,v,null,n,c),d.push({event:f,listeners:p}))}}if(!(t&7)){e:{if(f=e==="mouseover"||e==="pointerover",m=e==="mouseout"||e==="pointerout",f&&n!==am&&(v=n.relatedTarget||n.fromElement)&&(Cr(v)||v[En]))break e;if((m||f)&&(f=c.window===c?c:(f=c.ownerDocument)?f.defaultView||f.parentWindow:window,m?(v=n.relatedTarget||n.toElement,m=u,v=v?Cr(v):null,v!==null&&(x=Br(v),v!==x||v.tag!==5&&v.tag!==6)&&(v=null)):(m=null,v=u),m!==v)){if(p=$g,_="onMouseLeave",y="onMouseEnter",g="mouse",(e==="pointerout"||e==="pointerover")&&(p=Ug,_="onPointerLeave",y="onPointerEnter",g="pointer"),x=m==null?f:fi(m),w=v==null?f:fi(v),f=new p(_,g+"leave",m,n,c),f.target=x,f.relatedTarget=w,_=null,Cr(c)===u&&(p=new p(y,g+"enter",v,n,c),p.target=w,p.relatedTarget=x,_=p),x=_,m&&v)t:{for(p=m,y=v,g=0,w=p;w;w=ii(w))g++;for(w=0,_=y;_;_=ii(_))w++;for(;0<g-w;)p=ii(p),g--;for(;0<w-g;)y=ii(y),w--;for(;g--;){if(p===y||y!==null&&p===y.alternate)break t;p=ii(p),y=ii(y)}p=null}else p=null;m!==null&&t0(d,f,m,p,!1),v!==null&&x!==null&&t0(d,x,v,p,!0)}}e:{if(f=u?fi(u):window,m=f.nodeName&&f.nodeName.toLowerCase(),m==="select"||m==="input"&&f.type==="file")var E=hR;else if(Wg(f))if(EE)E=yR;else{E=mR;var T=pR}else(m=f.nodeName)&&m.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(E=vR);if(E&&(E=E(e,u))){kE(d,E,n,c);break e}T&&T(e,f,u),e==="focusout"&&(T=f._wrapperState)&&T.controlled&&f.type==="number"&&em(f,"number",f.value)}switch(T=u?fi(u):window,e){case"focusin":(Wg(T)||T.contentEditable==="true")&&(ci=T,fm=u,Na=null);break;case"focusout":Na=fm=ci=null;break;case"mousedown":hm=!0;break;case"contextmenu":case"mouseup":case"dragend":hm=!1,Jg(d,n,c);break;case"selectionchange":if(wR)break;case"keydown":case"keyup":Jg(d,n,c)}var j;if(kv)e:{switch(e){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else ui?SE(e,n)&&(C="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(C="onCompositionStart");C&&(xE&&n.locale!=="ko"&&(ui||C!=="onCompositionStart"?C==="onCompositionEnd"&&ui&&(j=wE()):(Kn=c,xv="value"in Kn?Kn.value:Kn.textContent,ui=!0)),T=Eo(u,C),0<T.length&&(C=new zg(C,e,null,n,c),d.push({event:C,listeners:T}),j?C.data=j:(j=_E(n),j!==null&&(C.data=j)))),(j=lR?uR(e,n):cR(e,n))&&(u=Eo(u,"onBeforeInput"),0<u.length&&(c=new zg("onBeforeInput","beforeinput",null,n,c),d.push({event:c,listeners:u}),c.data=j))}DE(d,t)})}function Ya(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Eo(e,t){for(var n=t+"Capture",r=[];e!==null;){var i=e,a=i.stateNode;i.tag===5&&a!==null&&(i=a,a=$a(e,n),a!=null&&r.unshift(Ya(e,a,i)),a=$a(e,t),a!=null&&r.push(Ya(e,a,i))),e=e.return}return r}function ii(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function t0(e,t,n,r,i){for(var a=t._reactName,s=[];n!==null&&n!==r;){var o=n,l=o.alternate,u=o.stateNode;if(l!==null&&l===r)break;o.tag===5&&u!==null&&(o=u,i?(l=$a(n,a),l!=null&&s.unshift(Ya(n,l,o))):i||(l=$a(n,a),l!=null&&s.push(Ya(n,l,o)))),n=n.return}s.length!==0&&e.push({event:t,listeners:s})}var kR=/\r\n?/g,ER=/\u0000|\uFFFD/g;function n0(e){return(typeof e=="string"?e:""+e).replace(kR,`
`).replace(ER,"")}function $s(e,t,n){if(t=n0(t),n0(e)!==t&&n)throw Error(L(425))}function Co(){}var pm=null,mm=null;function vm(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var ym=typeof setTimeout=="function"?setTimeout:void 0,CR=typeof clearTimeout=="function"?clearTimeout:void 0,r0=typeof Promise=="function"?Promise:void 0,TR=typeof queueMicrotask=="function"?queueMicrotask:typeof r0<"u"?function(e){return r0.resolve(null).then(e).catch(jR)}:ym;function jR(e){setTimeout(function(){throw e})}function Eu(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){e.removeChild(i),Ga(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Ga(t)}function Zn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function i0(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var $i=Math.random().toString(36).slice(2),en="__reactFiber$"+$i,Qa="__reactProps$"+$i,En="__reactContainer$"+$i,gm="__reactEvents$"+$i,MR="__reactListeners$"+$i,PR="__reactHandles$"+$i;function Cr(e){var t=e[en];if(t)return t;for(var n=e.parentNode;n;){if(t=n[En]||n[en]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=i0(e);e!==null;){if(n=e[en])return n;e=i0(e)}return t}e=n,n=e.parentNode}return null}function ds(e){return e=e[en]||e[En],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function fi(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(L(33))}function il(e){return e[Qa]||null}var bm=[],hi=-1;function dr(e){return{current:e}}function ge(e){0>hi||(e.current=bm[hi],bm[hi]=null,hi--)}function ve(e,t){hi++,bm[hi]=e.current,e.current=t}var sr={},nt=dr(sr),dt=dr(!1),Dr=sr;function Ni(e,t){var n=e.type.contextTypes;if(!n)return sr;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},a;for(a in n)i[a]=t[a];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function ft(e){return e=e.childContextTypes,e!=null}function To(){ge(dt),ge(nt)}function a0(e,t,n){if(nt.current!==sr)throw Error(L(168));ve(nt,t),ve(dt,n)}function OE(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(L(108,pN(e)||"Unknown",i));return Ce({},n,r)}function jo(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||sr,Dr=nt.current,ve(nt,e),ve(dt,dt.current),!0}function s0(e,t,n){var r=e.stateNode;if(!r)throw Error(L(169));n?(e=OE(e,t,Dr),r.__reactInternalMemoizedMergedChildContext=e,ge(dt),ge(nt),ve(nt,e)):ge(dt),ve(dt,n)}var mn=null,al=!1,Cu=!1;function qE(e){mn===null?mn=[e]:mn.push(e)}function NR(e){al=!0,qE(e)}function fr(){if(!Cu&&mn!==null){Cu=!0;var e=0,t=he;try{var n=mn;for(he=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}mn=null,al=!1}catch(i){throw mn!==null&&(mn=mn.slice(e+1)),uE(yv,fr),i}finally{he=t,Cu=!1}}return null}var pi=[],mi=0,Mo=null,Po=0,Pt=[],Nt=0,Lr=null,yn=1,gn="";function Sr(e,t){pi[mi++]=Po,pi[mi++]=Mo,Mo=e,Po=t}function FE(e,t,n){Pt[Nt++]=yn,Pt[Nt++]=gn,Pt[Nt++]=Lr,Lr=e;var r=yn;e=gn;var i=32-Ut(r)-1;r&=~(1<<i),n+=1;var a=32-Ut(t)+i;if(30<a){var s=i-i%5;a=(r&(1<<s)-1).toString(32),r>>=s,i-=s,yn=1<<32-Ut(t)+i|n<<i|r,gn=a+e}else yn=1<<a|n<<i|r,gn=e}function Cv(e){e.return!==null&&(Sr(e,1),FE(e,1,0))}function Tv(e){for(;e===Mo;)Mo=pi[--mi],pi[mi]=null,Po=pi[--mi],pi[mi]=null;for(;e===Lr;)Lr=Pt[--Nt],Pt[Nt]=null,gn=Pt[--Nt],Pt[Nt]=null,yn=Pt[--Nt],Pt[Nt]=null}var bt=null,gt=null,we=!1,zt=null;function VE(e,t){var n=Rt(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function o0(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,bt=e,gt=Zn(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,bt=e,gt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Lr!==null?{id:yn,overflow:gn}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Rt(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,bt=e,gt=null,!0):!1;default:return!1}}function wm(e){return(e.mode&1)!==0&&(e.flags&128)===0}function xm(e){if(we){var t=gt;if(t){var n=t;if(!o0(e,t)){if(wm(e))throw Error(L(418));t=Zn(n.nextSibling);var r=bt;t&&o0(e,t)?VE(r,n):(e.flags=e.flags&-4097|2,we=!1,bt=e)}}else{if(wm(e))throw Error(L(418));e.flags=e.flags&-4097|2,we=!1,bt=e}}}function l0(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;bt=e}function zs(e){if(e!==bt)return!1;if(!we)return l0(e),we=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!vm(e.type,e.memoizedProps)),t&&(t=gt)){if(wm(e))throw BE(),Error(L(418));for(;t;)VE(e,t),t=Zn(t.nextSibling)}if(l0(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(L(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){gt=Zn(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}gt=null}}else gt=bt?Zn(e.stateNode.nextSibling):null;return!0}function BE(){for(var e=gt;e;)e=Zn(e.nextSibling)}function Ri(){gt=bt=null,we=!1}function jv(e){zt===null?zt=[e]:zt.push(e)}var RR=Pn.ReactCurrentBatchConfig;function la(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(L(309));var r=n.stateNode}if(!r)throw Error(L(147,e));var i=r,a=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===a?t.ref:(t=function(s){var o=i.refs;s===null?delete o[a]:o[a]=s},t._stringRef=a,t)}if(typeof e!="string")throw Error(L(284));if(!n._owner)throw Error(L(290,e))}return e}function Us(e,t){throw e=Object.prototype.toString.call(t),Error(L(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function u0(e){var t=e._init;return t(e._payload)}function $E(e){function t(y,g){if(e){var w=y.deletions;w===null?(y.deletions=[g],y.flags|=16):w.push(g)}}function n(y,g){if(!e)return null;for(;g!==null;)t(y,g),g=g.sibling;return null}function r(y,g){for(y=new Map;g!==null;)g.key!==null?y.set(g.key,g):y.set(g.index,g),g=g.sibling;return y}function i(y,g){return y=rr(y,g),y.index=0,y.sibling=null,y}function a(y,g,w){return y.index=w,e?(w=y.alternate,w!==null?(w=w.index,w<g?(y.flags|=2,g):w):(y.flags|=2,g)):(y.flags|=1048576,g)}function s(y){return e&&y.alternate===null&&(y.flags|=2),y}function o(y,g,w,_){return g===null||g.tag!==6?(g=Au(w,y.mode,_),g.return=y,g):(g=i(g,w),g.return=y,g)}function l(y,g,w,_){var E=w.type;return E===li?c(y,g,w.props.children,_,w.key):g!==null&&(g.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===zn&&u0(E)===g.type)?(_=i(g,w.props),_.ref=la(y,g,w),_.return=y,_):(_=po(w.type,w.key,w.props,null,y.mode,_),_.ref=la(y,g,w),_.return=y,_)}function u(y,g,w,_){return g===null||g.tag!==4||g.stateNode.containerInfo!==w.containerInfo||g.stateNode.implementation!==w.implementation?(g=Iu(w,y.mode,_),g.return=y,g):(g=i(g,w.children||[]),g.return=y,g)}function c(y,g,w,_,E){return g===null||g.tag!==7?(g=Rr(w,y.mode,_,E),g.return=y,g):(g=i(g,w),g.return=y,g)}function d(y,g,w){if(typeof g=="string"&&g!==""||typeof g=="number")return g=Au(""+g,y.mode,w),g.return=y,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case As:return w=po(g.type,g.key,g.props,null,y.mode,w),w.ref=la(y,null,g),w.return=y,w;case oi:return g=Iu(g,y.mode,w),g.return=y,g;case zn:var _=g._init;return d(y,_(g._payload),w)}if(ma(g)||ra(g))return g=Rr(g,y.mode,w,null),g.return=y,g;Us(y,g)}return null}function f(y,g,w,_){var E=g!==null?g.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return E!==null?null:o(y,g,""+w,_);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case As:return w.key===E?l(y,g,w,_):null;case oi:return w.key===E?u(y,g,w,_):null;case zn:return E=w._init,f(y,g,E(w._payload),_)}if(ma(w)||ra(w))return E!==null?null:c(y,g,w,_,null);Us(y,w)}return null}function m(y,g,w,_,E){if(typeof _=="string"&&_!==""||typeof _=="number")return y=y.get(w)||null,o(g,y,""+_,E);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case As:return y=y.get(_.key===null?w:_.key)||null,l(g,y,_,E);case oi:return y=y.get(_.key===null?w:_.key)||null,u(g,y,_,E);case zn:var T=_._init;return m(y,g,w,T(_._payload),E)}if(ma(_)||ra(_))return y=y.get(w)||null,c(g,y,_,E,null);Us(g,_)}return null}function v(y,g,w,_){for(var E=null,T=null,j=g,C=g=0,M=null;j!==null&&C<w.length;C++){j.index>C?(M=j,j=null):M=j.sibling;var P=f(y,j,w[C],_);if(P===null){j===null&&(j=M);break}e&&j&&P.alternate===null&&t(y,j),g=a(P,g,C),T===null?E=P:T.sibling=P,T=P,j=M}if(C===w.length)return n(y,j),we&&Sr(y,C),E;if(j===null){for(;C<w.length;C++)j=d(y,w[C],_),j!==null&&(g=a(j,g,C),T===null?E=j:T.sibling=j,T=j);return we&&Sr(y,C),E}for(j=r(y,j);C<w.length;C++)M=m(j,y,C,w[C],_),M!==null&&(e&&M.alternate!==null&&j.delete(M.key===null?C:M.key),g=a(M,g,C),T===null?E=M:T.sibling=M,T=M);return e&&j.forEach(function(R){return t(y,R)}),we&&Sr(y,C),E}function p(y,g,w,_){var E=ra(w);if(typeof E!="function")throw Error(L(150));if(w=E.call(w),w==null)throw Error(L(151));for(var T=E=null,j=g,C=g=0,M=null,P=w.next();j!==null&&!P.done;C++,P=w.next()){j.index>C?(M=j,j=null):M=j.sibling;var R=f(y,j,P.value,_);if(R===null){j===null&&(j=M);break}e&&j&&R.alternate===null&&t(y,j),g=a(R,g,C),T===null?E=R:T.sibling=R,T=R,j=M}if(P.done)return n(y,j),we&&Sr(y,C),E;if(j===null){for(;!P.done;C++,P=w.next())P=d(y,P.value,_),P!==null&&(g=a(P,g,C),T===null?E=P:T.sibling=P,T=P);return we&&Sr(y,C),E}for(j=r(y,j);!P.done;C++,P=w.next())P=m(j,y,C,P.value,_),P!==null&&(e&&P.alternate!==null&&j.delete(P.key===null?C:P.key),g=a(P,g,C),T===null?E=P:T.sibling=P,T=P);return e&&j.forEach(function(I){return t(y,I)}),we&&Sr(y,C),E}function x(y,g,w,_){if(typeof w=="object"&&w!==null&&w.type===li&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case As:e:{for(var E=w.key,T=g;T!==null;){if(T.key===E){if(E=w.type,E===li){if(T.tag===7){n(y,T.sibling),g=i(T,w.props.children),g.return=y,y=g;break e}}else if(T.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===zn&&u0(E)===T.type){n(y,T.sibling),g=i(T,w.props),g.ref=la(y,T,w),g.return=y,y=g;break e}n(y,T);break}else t(y,T);T=T.sibling}w.type===li?(g=Rr(w.props.children,y.mode,_,w.key),g.return=y,y=g):(_=po(w.type,w.key,w.props,null,y.mode,_),_.ref=la(y,g,w),_.return=y,y=_)}return s(y);case oi:e:{for(T=w.key;g!==null;){if(g.key===T)if(g.tag===4&&g.stateNode.containerInfo===w.containerInfo&&g.stateNode.implementation===w.implementation){n(y,g.sibling),g=i(g,w.children||[]),g.return=y,y=g;break e}else{n(y,g);break}else t(y,g);g=g.sibling}g=Iu(w,y.mode,_),g.return=y,y=g}return s(y);case zn:return T=w._init,x(y,g,T(w._payload),_)}if(ma(w))return v(y,g,w,_);if(ra(w))return p(y,g,w,_);Us(y,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,g!==null&&g.tag===6?(n(y,g.sibling),g=i(g,w),g.return=y,y=g):(n(y,g),g=Au(w,y.mode,_),g.return=y,y=g),s(y)):n(y,g)}return x}var Ai=$E(!0),zE=$E(!1),No=dr(null),Ro=null,vi=null,Mv=null;function Pv(){Mv=vi=Ro=null}function Nv(e){var t=No.current;ge(No),e._currentValue=t}function Sm(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function ji(e,t){Ro=e,Mv=vi=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(ct=!0),e.firstContext=null)}function It(e){var t=e._currentValue;if(Mv!==e)if(e={context:e,memoizedValue:t,next:null},vi===null){if(Ro===null)throw Error(L(308));vi=e,Ro.dependencies={lanes:0,firstContext:e}}else vi=vi.next=e;return t}var Tr=null;function Rv(e){Tr===null?Tr=[e]:Tr.push(e)}function UE(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,Rv(t)):(n.next=i.next,i.next=n),t.interleaved=n,Cn(e,r)}function Cn(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Un=!1;function Av(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function GE(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function xn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function er(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,se&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Cn(e,n)}return i=r.interleaved,i===null?(t.next=t,Rv(r)):(t.next=i.next,i.next=t),r.interleaved=t,Cn(e,n)}function oo(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,gv(e,n)}}function c0(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,a=null;if(n=n.firstBaseUpdate,n!==null){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};a===null?i=a=s:a=a.next=s,n=n.next}while(n!==null);a===null?i=a=t:a=a.next=t}else i=a=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Ao(e,t,n,r){var i=e.updateQueue;Un=!1;var a=i.firstBaseUpdate,s=i.lastBaseUpdate,o=i.shared.pending;if(o!==null){i.shared.pending=null;var l=o,u=l.next;l.next=null,s===null?a=u:s.next=u,s=l;var c=e.alternate;c!==null&&(c=c.updateQueue,o=c.lastBaseUpdate,o!==s&&(o===null?c.firstBaseUpdate=u:o.next=u,c.lastBaseUpdate=l))}if(a!==null){var d=i.baseState;s=0,c=u=l=null,o=a;do{var f=o.lane,m=o.eventTime;if((r&f)===f){c!==null&&(c=c.next={eventTime:m,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var v=e,p=o;switch(f=t,m=n,p.tag){case 1:if(v=p.payload,typeof v=="function"){d=v.call(m,d,f);break e}d=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=p.payload,f=typeof v=="function"?v.call(m,d,f):v,f==null)break e;d=Ce({},d,f);break e;case 2:Un=!0}}o.callback!==null&&o.lane!==0&&(e.flags|=64,f=i.effects,f===null?i.effects=[o]:f.push(o))}else m={eventTime:m,lane:f,tag:o.tag,payload:o.payload,callback:o.callback,next:null},c===null?(u=c=m,l=d):c=c.next=m,s|=f;if(o=o.next,o===null){if(o=i.shared.pending,o===null)break;f=o,o=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);if(c===null&&(l=d),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,t=i.shared.interleaved,t!==null){i=t;do s|=i.lane,i=i.next;while(i!==t)}else a===null&&(i.shared.lanes=0);qr|=s,e.lanes=s,e.memoizedState=d}}function d0(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(L(191,i));i.call(r)}}}var fs={},rn=dr(fs),Xa=dr(fs),Ja=dr(fs);function jr(e){if(e===fs)throw Error(L(174));return e}function Iv(e,t){switch(ve(Ja,t),ve(Xa,e),ve(rn,fs),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:nm(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=nm(t,e)}ge(rn),ve(rn,t)}function Ii(){ge(rn),ge(Xa),ge(Ja)}function HE(e){jr(Ja.current);var t=jr(rn.current),n=nm(t,e.type);t!==n&&(ve(Xa,e),ve(rn,n))}function Dv(e){Xa.current===e&&(ge(rn),ge(Xa))}var _e=dr(0);function Io(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Tu=[];function Lv(){for(var e=0;e<Tu.length;e++)Tu[e]._workInProgressVersionPrimary=null;Tu.length=0}var lo=Pn.ReactCurrentDispatcher,ju=Pn.ReactCurrentBatchConfig,Or=0,Ee=null,Be=null,Ue=null,Do=!1,Ra=!1,Za=0,AR=0;function Xe(){throw Error(L(321))}function Ov(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Ht(e[n],t[n]))return!1;return!0}function qv(e,t,n,r,i,a){if(Or=a,Ee=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,lo.current=e===null||e.memoizedState===null?OR:qR,e=n(r,i),Ra){a=0;do{if(Ra=!1,Za=0,25<=a)throw Error(L(301));a+=1,Ue=Be=null,t.updateQueue=null,lo.current=FR,e=n(r,i)}while(Ra)}if(lo.current=Lo,t=Be!==null&&Be.next!==null,Or=0,Ue=Be=Ee=null,Do=!1,t)throw Error(L(300));return e}function Fv(){var e=Za!==0;return Za=0,e}function Zt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ue===null?Ee.memoizedState=Ue=e:Ue=Ue.next=e,Ue}function Dt(){if(Be===null){var e=Ee.alternate;e=e!==null?e.memoizedState:null}else e=Be.next;var t=Ue===null?Ee.memoizedState:Ue.next;if(t!==null)Ue=t,Be=e;else{if(e===null)throw Error(L(310));Be=e,e={memoizedState:Be.memoizedState,baseState:Be.baseState,baseQueue:Be.baseQueue,queue:Be.queue,next:null},Ue===null?Ee.memoizedState=Ue=e:Ue=Ue.next=e}return Ue}function es(e,t){return typeof t=="function"?t(e):t}function Mu(e){var t=Dt(),n=t.queue;if(n===null)throw Error(L(311));n.lastRenderedReducer=e;var r=Be,i=r.baseQueue,a=n.pending;if(a!==null){if(i!==null){var s=i.next;i.next=a.next,a.next=s}r.baseQueue=i=a,n.pending=null}if(i!==null){a=i.next,r=r.baseState;var o=s=null,l=null,u=a;do{var c=u.lane;if((Or&c)===c)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var d={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(o=l=d,s=r):l=l.next=d,Ee.lanes|=c,qr|=c}u=u.next}while(u!==null&&u!==a);l===null?s=r:l.next=o,Ht(r,t.memoizedState)||(ct=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=l,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do a=i.lane,Ee.lanes|=a,qr|=a,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Pu(e){var t=Dt(),n=t.queue;if(n===null)throw Error(L(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,a=t.memoizedState;if(i!==null){n.pending=null;var s=i=i.next;do a=e(a,s.action),s=s.next;while(s!==i);Ht(a,t.memoizedState)||(ct=!0),t.memoizedState=a,t.baseQueue===null&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function WE(){}function KE(e,t){var n=Ee,r=Dt(),i=t(),a=!Ht(r.memoizedState,i);if(a&&(r.memoizedState=i,ct=!0),r=r.queue,Vv(XE.bind(null,n,r,e),[e]),r.getSnapshot!==t||a||Ue!==null&&Ue.memoizedState.tag&1){if(n.flags|=2048,ts(9,QE.bind(null,n,r,i,t),void 0,null),Ge===null)throw Error(L(349));Or&30||YE(n,t,i)}return i}function YE(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Ee.updateQueue,t===null?(t={lastEffect:null,stores:null},Ee.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function QE(e,t,n,r){t.value=n,t.getSnapshot=r,JE(t)&&ZE(e)}function XE(e,t,n){return n(function(){JE(t)&&ZE(e)})}function JE(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Ht(e,n)}catch{return!0}}function ZE(e){var t=Cn(e,1);t!==null&&Gt(t,e,1,-1)}function f0(e){var t=Zt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:es,lastRenderedState:e},t.queue=e,e=e.dispatch=LR.bind(null,Ee,e),[t.memoizedState,e]}function ts(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Ee.updateQueue,t===null?(t={lastEffect:null,stores:null},Ee.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function eC(){return Dt().memoizedState}function uo(e,t,n,r){var i=Zt();Ee.flags|=e,i.memoizedState=ts(1|t,n,void 0,r===void 0?null:r)}function sl(e,t,n,r){var i=Dt();r=r===void 0?null:r;var a=void 0;if(Be!==null){var s=Be.memoizedState;if(a=s.destroy,r!==null&&Ov(r,s.deps)){i.memoizedState=ts(t,n,a,r);return}}Ee.flags|=e,i.memoizedState=ts(1|t,n,a,r)}function h0(e,t){return uo(8390656,8,e,t)}function Vv(e,t){return sl(2048,8,e,t)}function tC(e,t){return sl(4,2,e,t)}function nC(e,t){return sl(4,4,e,t)}function rC(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function iC(e,t,n){return n=n!=null?n.concat([e]):null,sl(4,4,rC.bind(null,t,e),n)}function Bv(){}function aC(e,t){var n=Dt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Ov(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function sC(e,t){var n=Dt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Ov(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function oC(e,t,n){return Or&21?(Ht(n,t)||(n=fE(),Ee.lanes|=n,qr|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,ct=!0),e.memoizedState=n)}function IR(e,t){var n=he;he=n!==0&&4>n?n:4,e(!0);var r=ju.transition;ju.transition={};try{e(!1),t()}finally{he=n,ju.transition=r}}function lC(){return Dt().memoizedState}function DR(e,t,n){var r=nr(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},uC(e))cC(t,n);else if(n=UE(e,t,n,r),n!==null){var i=at();Gt(n,e,r,i),dC(n,t,r)}}function LR(e,t,n){var r=nr(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(uC(e))cC(t,i);else{var a=e.alternate;if(e.lanes===0&&(a===null||a.lanes===0)&&(a=t.lastRenderedReducer,a!==null))try{var s=t.lastRenderedState,o=a(s,n);if(i.hasEagerState=!0,i.eagerState=o,Ht(o,s)){var l=t.interleaved;l===null?(i.next=i,Rv(t)):(i.next=l.next,l.next=i),t.interleaved=i;return}}catch{}finally{}n=UE(e,t,i,r),n!==null&&(i=at(),Gt(n,e,r,i),dC(n,t,r))}}function uC(e){var t=e.alternate;return e===Ee||t!==null&&t===Ee}function cC(e,t){Ra=Do=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function dC(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,gv(e,n)}}var Lo={readContext:It,useCallback:Xe,useContext:Xe,useEffect:Xe,useImperativeHandle:Xe,useInsertionEffect:Xe,useLayoutEffect:Xe,useMemo:Xe,useReducer:Xe,useRef:Xe,useState:Xe,useDebugValue:Xe,useDeferredValue:Xe,useTransition:Xe,useMutableSource:Xe,useSyncExternalStore:Xe,useId:Xe,unstable_isNewReconciler:!1},OR={readContext:It,useCallback:function(e,t){return Zt().memoizedState=[e,t===void 0?null:t],e},useContext:It,useEffect:h0,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,uo(4194308,4,rC.bind(null,t,e),n)},useLayoutEffect:function(e,t){return uo(4194308,4,e,t)},useInsertionEffect:function(e,t){return uo(4,2,e,t)},useMemo:function(e,t){var n=Zt();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Zt();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=DR.bind(null,Ee,e),[r.memoizedState,e]},useRef:function(e){var t=Zt();return e={current:e},t.memoizedState=e},useState:f0,useDebugValue:Bv,useDeferredValue:function(e){return Zt().memoizedState=e},useTransition:function(){var e=f0(!1),t=e[0];return e=IR.bind(null,e[1]),Zt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Ee,i=Zt();if(we){if(n===void 0)throw Error(L(407));n=n()}else{if(n=t(),Ge===null)throw Error(L(349));Or&30||YE(r,t,n)}i.memoizedState=n;var a={value:n,getSnapshot:t};return i.queue=a,h0(XE.bind(null,r,a,e),[e]),r.flags|=2048,ts(9,QE.bind(null,r,a,n,t),void 0,null),n},useId:function(){var e=Zt(),t=Ge.identifierPrefix;if(we){var n=gn,r=yn;n=(r&~(1<<32-Ut(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Za++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=AR++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},qR={readContext:It,useCallback:aC,useContext:It,useEffect:Vv,useImperativeHandle:iC,useInsertionEffect:tC,useLayoutEffect:nC,useMemo:sC,useReducer:Mu,useRef:eC,useState:function(){return Mu(es)},useDebugValue:Bv,useDeferredValue:function(e){var t=Dt();return oC(t,Be.memoizedState,e)},useTransition:function(){var e=Mu(es)[0],t=Dt().memoizedState;return[e,t]},useMutableSource:WE,useSyncExternalStore:KE,useId:lC,unstable_isNewReconciler:!1},FR={readContext:It,useCallback:aC,useContext:It,useEffect:Vv,useImperativeHandle:iC,useInsertionEffect:tC,useLayoutEffect:nC,useMemo:sC,useReducer:Pu,useRef:eC,useState:function(){return Pu(es)},useDebugValue:Bv,useDeferredValue:function(e){var t=Dt();return Be===null?t.memoizedState=e:oC(t,Be.memoizedState,e)},useTransition:function(){var e=Pu(es)[0],t=Dt().memoizedState;return[e,t]},useMutableSource:WE,useSyncExternalStore:KE,useId:lC,unstable_isNewReconciler:!1};function Bt(e,t){if(e&&e.defaultProps){t=Ce({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function _m(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Ce({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var ol={isMounted:function(e){return(e=e._reactInternals)?Br(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=at(),i=nr(e),a=xn(r,i);a.payload=t,n!=null&&(a.callback=n),t=er(e,a,i),t!==null&&(Gt(t,e,i,r),oo(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=at(),i=nr(e),a=xn(r,i);a.tag=1,a.payload=t,n!=null&&(a.callback=n),t=er(e,a,i),t!==null&&(Gt(t,e,i,r),oo(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=at(),r=nr(e),i=xn(n,r);i.tag=2,t!=null&&(i.callback=t),t=er(e,i,r),t!==null&&(Gt(t,e,r,n),oo(t,e,r))}};function p0(e,t,n,r,i,a,s){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,a,s):t.prototype&&t.prototype.isPureReactComponent?!Wa(n,r)||!Wa(i,a):!0}function fC(e,t,n){var r=!1,i=sr,a=t.contextType;return typeof a=="object"&&a!==null?a=It(a):(i=ft(t)?Dr:nt.current,r=t.contextTypes,a=(r=r!=null)?Ni(e,i):sr),t=new t(n,a),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=ol,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function m0(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ol.enqueueReplaceState(t,t.state,null)}function km(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},Av(e);var a=t.contextType;typeof a=="object"&&a!==null?i.context=It(a):(a=ft(t)?Dr:nt.current,i.context=Ni(e,a)),i.state=e.memoizedState,a=t.getDerivedStateFromProps,typeof a=="function"&&(_m(e,t,a,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&ol.enqueueReplaceState(i,i.state,null),Ao(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function Di(e,t){try{var n="",r=t;do n+=hN(r),r=r.return;while(r);var i=n}catch(a){i=`
Error generating stack: `+a.message+`
`+a.stack}return{value:e,source:t,stack:i,digest:null}}function Nu(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Em(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var VR=typeof WeakMap=="function"?WeakMap:Map;function hC(e,t,n){n=xn(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){qo||(qo=!0,Dm=r),Em(e,t)},n}function pC(e,t,n){n=xn(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){Em(e,t)}}var a=e.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(n.callback=function(){Em(e,t),typeof r!="function"&&(tr===null?tr=new Set([this]):tr.add(this));var s=t.stack;this.componentDidCatch(t.value,{componentStack:s!==null?s:""})}),n}function v0(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new VR;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=eA.bind(null,e,t,n),t.then(e,e))}function y0(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function g0(e,t,n,r,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=xn(-1,1),t.tag=2,er(n,t,1))),n.lanes|=1),e)}var BR=Pn.ReactCurrentOwner,ct=!1;function it(e,t,n,r){t.child=e===null?zE(t,null,n,r):Ai(t,e.child,n,r)}function b0(e,t,n,r,i){n=n.render;var a=t.ref;return ji(t,i),r=qv(e,t,n,r,a,i),n=Fv(),e!==null&&!ct?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Tn(e,t,i)):(we&&n&&Cv(t),t.flags|=1,it(e,t,r,i),t.child)}function w0(e,t,n,r,i){if(e===null){var a=n.type;return typeof a=="function"&&!Yv(a)&&a.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=a,mC(e,t,a,r,i)):(e=po(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(a=e.child,!(e.lanes&i)){var s=a.memoizedProps;if(n=n.compare,n=n!==null?n:Wa,n(s,r)&&e.ref===t.ref)return Tn(e,t,i)}return t.flags|=1,e=rr(a,r),e.ref=t.ref,e.return=t,t.child=e}function mC(e,t,n,r,i){if(e!==null){var a=e.memoizedProps;if(Wa(a,r)&&e.ref===t.ref)if(ct=!1,t.pendingProps=r=a,(e.lanes&i)!==0)e.flags&131072&&(ct=!0);else return t.lanes=e.lanes,Tn(e,t,i)}return Cm(e,t,n,r,i)}function vC(e,t,n){var r=t.pendingProps,i=r.children,a=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ve(gi,mt),mt|=n;else{if(!(n&1073741824))return e=a!==null?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ve(gi,mt),mt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=a!==null?a.baseLanes:n,ve(gi,mt),mt|=r}else a!==null?(r=a.baseLanes|n,t.memoizedState=null):r=n,ve(gi,mt),mt|=r;return it(e,t,i,n),t.child}function yC(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Cm(e,t,n,r,i){var a=ft(n)?Dr:nt.current;return a=Ni(t,a),ji(t,i),n=qv(e,t,n,r,a,i),r=Fv(),e!==null&&!ct?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Tn(e,t,i)):(we&&r&&Cv(t),t.flags|=1,it(e,t,n,i),t.child)}function x0(e,t,n,r,i){if(ft(n)){var a=!0;jo(t)}else a=!1;if(ji(t,i),t.stateNode===null)co(e,t),fC(t,n,r),km(t,n,r,i),r=!0;else if(e===null){var s=t.stateNode,o=t.memoizedProps;s.props=o;var l=s.context,u=n.contextType;typeof u=="object"&&u!==null?u=It(u):(u=ft(n)?Dr:nt.current,u=Ni(t,u));var c=n.getDerivedStateFromProps,d=typeof c=="function"||typeof s.getSnapshotBeforeUpdate=="function";d||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(o!==r||l!==u)&&m0(t,s,r,u),Un=!1;var f=t.memoizedState;s.state=f,Ao(t,r,s,i),l=t.memoizedState,o!==r||f!==l||dt.current||Un?(typeof c=="function"&&(_m(t,n,c,r),l=t.memoizedState),(o=Un||p0(t,n,o,r,f,l,u))?(d||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(t.flags|=4194308)):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),s.props=r,s.state=l,s.context=u,r=o):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{s=t.stateNode,GE(e,t),o=t.memoizedProps,u=t.type===t.elementType?o:Bt(t.type,o),s.props=u,d=t.pendingProps,f=s.context,l=n.contextType,typeof l=="object"&&l!==null?l=It(l):(l=ft(n)?Dr:nt.current,l=Ni(t,l));var m=n.getDerivedStateFromProps;(c=typeof m=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(o!==d||f!==l)&&m0(t,s,r,l),Un=!1,f=t.memoizedState,s.state=f,Ao(t,r,s,i);var v=t.memoizedState;o!==d||f!==v||dt.current||Un?(typeof m=="function"&&(_m(t,n,m,r),v=t.memoizedState),(u=Un||p0(t,n,u,r,f,v,l)||!1)?(c||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(r,v,l),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(r,v,l)),typeof s.componentDidUpdate=="function"&&(t.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof s.componentDidUpdate!="function"||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=v),s.props=r,s.state=v,s.context=l,r=u):(typeof s.componentDidUpdate!="function"||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),r=!1)}return Tm(e,t,n,r,a,i)}function Tm(e,t,n,r,i,a){yC(e,t);var s=(t.flags&128)!==0;if(!r&&!s)return i&&s0(t,n,!1),Tn(e,t,a);r=t.stateNode,BR.current=t;var o=s&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&s?(t.child=Ai(t,e.child,null,a),t.child=Ai(t,null,o,a)):it(e,t,o,a),t.memoizedState=r.state,i&&s0(t,n,!0),t.child}function gC(e){var t=e.stateNode;t.pendingContext?a0(e,t.pendingContext,t.pendingContext!==t.context):t.context&&a0(e,t.context,!1),Iv(e,t.containerInfo)}function S0(e,t,n,r,i){return Ri(),jv(i),t.flags|=256,it(e,t,n,r),t.child}var jm={dehydrated:null,treeContext:null,retryLane:0};function Mm(e){return{baseLanes:e,cachePool:null,transitions:null}}function bC(e,t,n){var r=t.pendingProps,i=_e.current,a=!1,s=(t.flags&128)!==0,o;if((o=s)||(o=e!==null&&e.memoizedState===null?!1:(i&2)!==0),o?(a=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),ve(_e,i&1),e===null)return xm(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(s=r.children,e=r.fallback,a?(r=t.mode,a=t.child,s={mode:"hidden",children:s},!(r&1)&&a!==null?(a.childLanes=0,a.pendingProps=s):a=cl(s,r,0,null),e=Rr(e,r,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=Mm(n),t.memoizedState=jm,e):$v(t,s));if(i=e.memoizedState,i!==null&&(o=i.dehydrated,o!==null))return $R(e,t,s,r,o,i,n);if(a){a=r.fallback,s=t.mode,i=e.child,o=i.sibling;var l={mode:"hidden",children:r.children};return!(s&1)&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=l,t.deletions=null):(r=rr(i,l),r.subtreeFlags=i.subtreeFlags&14680064),o!==null?a=rr(o,a):(a=Rr(a,s,n,null),a.flags|=2),a.return=t,r.return=t,r.sibling=a,t.child=r,r=a,a=t.child,s=e.child.memoizedState,s=s===null?Mm(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},a.memoizedState=s,a.childLanes=e.childLanes&~n,t.memoizedState=jm,r}return a=e.child,e=a.sibling,r=rr(a,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function $v(e,t){return t=cl({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Gs(e,t,n,r){return r!==null&&jv(r),Ai(t,e.child,null,n),e=$v(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function $R(e,t,n,r,i,a,s){if(n)return t.flags&256?(t.flags&=-257,r=Nu(Error(L(422))),Gs(e,t,s,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(a=r.fallback,i=t.mode,r=cl({mode:"visible",children:r.children},i,0,null),a=Rr(a,i,s,null),a.flags|=2,r.return=t,a.return=t,r.sibling=a,t.child=r,t.mode&1&&Ai(t,e.child,null,s),t.child.memoizedState=Mm(s),t.memoizedState=jm,a);if(!(t.mode&1))return Gs(e,t,s,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var o=r.dgst;return r=o,a=Error(L(419)),r=Nu(a,r,void 0),Gs(e,t,s,r)}if(o=(s&e.childLanes)!==0,ct||o){if(r=Ge,r!==null){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|s)?0:i,i!==0&&i!==a.retryLane&&(a.retryLane=i,Cn(e,i),Gt(r,e,i,-1))}return Kv(),r=Nu(Error(L(421))),Gs(e,t,s,r)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=tA.bind(null,e),i._reactRetry=t,null):(e=a.treeContext,gt=Zn(i.nextSibling),bt=t,we=!0,zt=null,e!==null&&(Pt[Nt++]=yn,Pt[Nt++]=gn,Pt[Nt++]=Lr,yn=e.id,gn=e.overflow,Lr=t),t=$v(t,r.children),t.flags|=4096,t)}function _0(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Sm(e.return,t,n)}function Ru(e,t,n,r,i){var a=e.memoizedState;a===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function wC(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(it(e,t,r.children,n),r=_e.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&_0(e,n,t);else if(e.tag===19)_0(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(ve(_e,r),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&Io(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Ru(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&Io(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Ru(t,!0,n,null,a);break;case"together":Ru(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function co(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Tn(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),qr|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(L(153));if(t.child!==null){for(e=t.child,n=rr(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=rr(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function zR(e,t,n){switch(t.tag){case 3:gC(t),Ri();break;case 5:HE(t);break;case 1:ft(t.type)&&jo(t);break;case 4:Iv(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;ve(No,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(ve(_e,_e.current&1),t.flags|=128,null):n&t.child.childLanes?bC(e,t,n):(ve(_e,_e.current&1),e=Tn(e,t,n),e!==null?e.sibling:null);ve(_e,_e.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return wC(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),ve(_e,_e.current),r)break;return null;case 22:case 23:return t.lanes=0,vC(e,t,n)}return Tn(e,t,n)}var xC,Pm,SC,_C;xC=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Pm=function(){};SC=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,jr(rn.current);var a=null;switch(n){case"input":i=Jp(e,i),r=Jp(e,r),a=[];break;case"select":i=Ce({},i,{value:void 0}),r=Ce({},r,{value:void 0}),a=[];break;case"textarea":i=tm(e,i),r=tm(e,r),a=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Co)}rm(n,r);var s;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var o=i[u];for(s in o)o.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Va.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in r){var l=r[u];if(o=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&l!==o&&(l!=null||o!=null))if(u==="style")if(o){for(s in o)!o.hasOwnProperty(s)||l&&l.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in l)l.hasOwnProperty(s)&&o[s]!==l[s]&&(n||(n={}),n[s]=l[s])}else n||(a||(a=[]),a.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,o=o?o.__html:void 0,l!=null&&o!==l&&(a=a||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(a=a||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Va.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&ye("scroll",e),a||o===l||(a=[])):(a=a||[]).push(u,l))}n&&(a=a||[]).push("style",n);var u=a;(t.updateQueue=u)&&(t.flags|=4)}};_C=function(e,t,n,r){n!==r&&(t.flags|=4)};function ua(e,t){if(!we)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Je(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function UR(e,t,n){var r=t.pendingProps;switch(Tv(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Je(t),null;case 1:return ft(t.type)&&To(),Je(t),null;case 3:return r=t.stateNode,Ii(),ge(dt),ge(nt),Lv(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(zs(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,zt!==null&&(qm(zt),zt=null))),Pm(e,t),Je(t),null;case 5:Dv(t);var i=jr(Ja.current);if(n=t.type,e!==null&&t.stateNode!=null)SC(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(L(166));return Je(t),null}if(e=jr(rn.current),zs(t)){r=t.stateNode,n=t.type;var a=t.memoizedProps;switch(r[en]=t,r[Qa]=a,e=(t.mode&1)!==0,n){case"dialog":ye("cancel",r),ye("close",r);break;case"iframe":case"object":case"embed":ye("load",r);break;case"video":case"audio":for(i=0;i<ya.length;i++)ye(ya[i],r);break;case"source":ye("error",r);break;case"img":case"image":case"link":ye("error",r),ye("load",r);break;case"details":ye("toggle",r);break;case"input":Rg(r,a),ye("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},ye("invalid",r);break;case"textarea":Ig(r,a),ye("invalid",r)}rm(n,a),i=null;for(var s in a)if(a.hasOwnProperty(s)){var o=a[s];s==="children"?typeof o=="string"?r.textContent!==o&&(a.suppressHydrationWarning!==!0&&$s(r.textContent,o,e),i=["children",o]):typeof o=="number"&&r.textContent!==""+o&&(a.suppressHydrationWarning!==!0&&$s(r.textContent,o,e),i=["children",""+o]):Va.hasOwnProperty(s)&&o!=null&&s==="onScroll"&&ye("scroll",r)}switch(n){case"input":Is(r),Ag(r,a,!0);break;case"textarea":Is(r),Dg(r);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(r.onclick=Co)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{s=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Xk(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=s.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=s.createElement(n,{is:r.is}):(e=s.createElement(n),n==="select"&&(s=e,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):e=s.createElementNS(e,n),e[en]=t,e[Qa]=r,xC(e,t,!1,!1),t.stateNode=e;e:{switch(s=im(n,r),n){case"dialog":ye("cancel",e),ye("close",e),i=r;break;case"iframe":case"object":case"embed":ye("load",e),i=r;break;case"video":case"audio":for(i=0;i<ya.length;i++)ye(ya[i],e);i=r;break;case"source":ye("error",e),i=r;break;case"img":case"image":case"link":ye("error",e),ye("load",e),i=r;break;case"details":ye("toggle",e),i=r;break;case"input":Rg(e,r),i=Jp(e,r),ye("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=Ce({},r,{value:void 0}),ye("invalid",e);break;case"textarea":Ig(e,r),i=tm(e,r),ye("invalid",e);break;default:i=r}rm(n,i),o=i;for(a in o)if(o.hasOwnProperty(a)){var l=o[a];a==="style"?eE(e,l):a==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&Jk(e,l)):a==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Ba(e,l):typeof l=="number"&&Ba(e,""+l):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(Va.hasOwnProperty(a)?l!=null&&a==="onScroll"&&ye("scroll",e):l!=null&&fv(e,a,l,s))}switch(n){case"input":Is(e),Ag(e,r,!1);break;case"textarea":Is(e),Dg(e);break;case"option":r.value!=null&&e.setAttribute("value",""+ar(r.value));break;case"select":e.multiple=!!r.multiple,a=r.value,a!=null?ki(e,!!r.multiple,a,!1):r.defaultValue!=null&&ki(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=Co)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Je(t),null;case 6:if(e&&t.stateNode!=null)_C(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(L(166));if(n=jr(Ja.current),jr(rn.current),zs(t)){if(r=t.stateNode,n=t.memoizedProps,r[en]=t,(a=r.nodeValue!==n)&&(e=bt,e!==null))switch(e.tag){case 3:$s(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&$s(r.nodeValue,n,(e.mode&1)!==0)}a&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[en]=t,t.stateNode=r}return Je(t),null;case 13:if(ge(_e),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(we&&gt!==null&&t.mode&1&&!(t.flags&128))BE(),Ri(),t.flags|=98560,a=!1;else if(a=zs(t),r!==null&&r.dehydrated!==null){if(e===null){if(!a)throw Error(L(318));if(a=t.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(L(317));a[en]=t}else Ri(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Je(t),a=!1}else zt!==null&&(qm(zt),zt=null),a=!0;if(!a)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||_e.current&1?$e===0&&($e=3):Kv())),t.updateQueue!==null&&(t.flags|=4),Je(t),null);case 4:return Ii(),Pm(e,t),e===null&&Ka(t.stateNode.containerInfo),Je(t),null;case 10:return Nv(t.type._context),Je(t),null;case 17:return ft(t.type)&&To(),Je(t),null;case 19:if(ge(_e),a=t.memoizedState,a===null)return Je(t),null;if(r=(t.flags&128)!==0,s=a.rendering,s===null)if(r)ua(a,!1);else{if($e!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(s=Io(e),s!==null){for(t.flags|=128,ua(a,!1),r=s.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)a=n,e=r,a.flags&=14680066,s=a.alternate,s===null?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=s.childLanes,a.lanes=s.lanes,a.child=s.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=s.memoizedProps,a.memoizedState=s.memoizedState,a.updateQueue=s.updateQueue,a.type=s.type,e=s.dependencies,a.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return ve(_e,_e.current&1|2),t.child}e=e.sibling}a.tail!==null&&De()>Li&&(t.flags|=128,r=!0,ua(a,!1),t.lanes=4194304)}else{if(!r)if(e=Io(s),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),ua(a,!0),a.tail===null&&a.tailMode==="hidden"&&!s.alternate&&!we)return Je(t),null}else 2*De()-a.renderingStartTime>Li&&n!==1073741824&&(t.flags|=128,r=!0,ua(a,!1),t.lanes=4194304);a.isBackwards?(s.sibling=t.child,t.child=s):(n=a.last,n!==null?n.sibling=s:t.child=s,a.last=s)}return a.tail!==null?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=De(),t.sibling=null,n=_e.current,ve(_e,r?n&1|2:n&1),t):(Je(t),null);case 22:case 23:return Wv(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?mt&1073741824&&(Je(t),t.subtreeFlags&6&&(t.flags|=8192)):Je(t),null;case 24:return null;case 25:return null}throw Error(L(156,t.tag))}function GR(e,t){switch(Tv(t),t.tag){case 1:return ft(t.type)&&To(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Ii(),ge(dt),ge(nt),Lv(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Dv(t),null;case 13:if(ge(_e),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(L(340));Ri()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return ge(_e),null;case 4:return Ii(),null;case 10:return Nv(t.type._context),null;case 22:case 23:return Wv(),null;case 24:return null;default:return null}}var Hs=!1,et=!1,HR=typeof WeakSet=="function"?WeakSet:Set,$=null;function yi(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ne(e,t,r)}else n.current=null}function Nm(e,t,n){try{n()}catch(r){Ne(e,t,r)}}var k0=!1;function WR(e,t){if(pm=_o,e=jE(),Ev(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch{n=null;break e}var s=0,o=-1,l=-1,u=0,c=0,d=e,f=null;t:for(;;){for(var m;d!==n||i!==0&&d.nodeType!==3||(o=s+i),d!==a||r!==0&&d.nodeType!==3||(l=s+r),d.nodeType===3&&(s+=d.nodeValue.length),(m=d.firstChild)!==null;)f=d,d=m;for(;;){if(d===e)break t;if(f===n&&++u===i&&(o=s),f===a&&++c===r&&(l=s),(m=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=m}n=o===-1||l===-1?null:{start:o,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(mm={focusedElem:e,selectionRange:n},_o=!1,$=t;$!==null;)if(t=$,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,$=e;else for(;$!==null;){t=$;try{var v=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var p=v.memoizedProps,x=v.memoizedState,y=t.stateNode,g=y.getSnapshotBeforeUpdate(t.elementType===t.type?p:Bt(t.type,p),x);y.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var w=t.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(L(163))}}catch(_){Ne(t,t.return,_)}if(e=t.sibling,e!==null){e.return=t.return,$=e;break}$=t.return}return v=k0,k0=!1,v}function Aa(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,a!==void 0&&Nm(t,n,a)}i=i.next}while(i!==r)}}function ll(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function Rm(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function kC(e){var t=e.alternate;t!==null&&(e.alternate=null,kC(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[en],delete t[Qa],delete t[gm],delete t[MR],delete t[PR])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function EC(e){return e.tag===5||e.tag===3||e.tag===4}function E0(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||EC(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Am(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Co));else if(r!==4&&(e=e.child,e!==null))for(Am(e,t,n),e=e.sibling;e!==null;)Am(e,t,n),e=e.sibling}function Im(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(Im(e,t,n),e=e.sibling;e!==null;)Im(e,t,n),e=e.sibling}var He=null,$t=!1;function Fn(e,t,n){for(n=n.child;n!==null;)CC(e,t,n),n=n.sibling}function CC(e,t,n){if(nn&&typeof nn.onCommitFiberUnmount=="function")try{nn.onCommitFiberUnmount(el,n)}catch{}switch(n.tag){case 5:et||yi(n,t);case 6:var r=He,i=$t;He=null,Fn(e,t,n),He=r,$t=i,He!==null&&($t?(e=He,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):He.removeChild(n.stateNode));break;case 18:He!==null&&($t?(e=He,n=n.stateNode,e.nodeType===8?Eu(e.parentNode,n):e.nodeType===1&&Eu(e,n),Ga(e)):Eu(He,n.stateNode));break;case 4:r=He,i=$t,He=n.stateNode.containerInfo,$t=!0,Fn(e,t,n),He=r,$t=i;break;case 0:case 11:case 14:case 15:if(!et&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var a=i,s=a.destroy;a=a.tag,s!==void 0&&(a&2||a&4)&&Nm(n,t,s),i=i.next}while(i!==r)}Fn(e,t,n);break;case 1:if(!et&&(yi(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){Ne(n,t,o)}Fn(e,t,n);break;case 21:Fn(e,t,n);break;case 22:n.mode&1?(et=(r=et)||n.memoizedState!==null,Fn(e,t,n),et=r):Fn(e,t,n);break;default:Fn(e,t,n)}}function C0(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new HR),t.forEach(function(r){var i=nA.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Ft(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var a=e,s=t,o=s;e:for(;o!==null;){switch(o.tag){case 5:He=o.stateNode,$t=!1;break e;case 3:He=o.stateNode.containerInfo,$t=!0;break e;case 4:He=o.stateNode.containerInfo,$t=!0;break e}o=o.return}if(He===null)throw Error(L(160));CC(a,s,i),He=null,$t=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){Ne(i,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)TC(t,e),t=t.sibling}function TC(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Ft(t,e),Jt(e),r&4){try{Aa(3,e,e.return),ll(3,e)}catch(p){Ne(e,e.return,p)}try{Aa(5,e,e.return)}catch(p){Ne(e,e.return,p)}}break;case 1:Ft(t,e),Jt(e),r&512&&n!==null&&yi(n,n.return);break;case 5:if(Ft(t,e),Jt(e),r&512&&n!==null&&yi(n,n.return),e.flags&32){var i=e.stateNode;try{Ba(i,"")}catch(p){Ne(e,e.return,p)}}if(r&4&&(i=e.stateNode,i!=null)){var a=e.memoizedProps,s=n!==null?n.memoizedProps:a,o=e.type,l=e.updateQueue;if(e.updateQueue=null,l!==null)try{o==="input"&&a.type==="radio"&&a.name!=null&&Yk(i,a),im(o,s);var u=im(o,a);for(s=0;s<l.length;s+=2){var c=l[s],d=l[s+1];c==="style"?eE(i,d):c==="dangerouslySetInnerHTML"?Jk(i,d):c==="children"?Ba(i,d):fv(i,c,d,u)}switch(o){case"input":Zp(i,a);break;case"textarea":Qk(i,a);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var m=a.value;m!=null?ki(i,!!a.multiple,m,!1):f!==!!a.multiple&&(a.defaultValue!=null?ki(i,!!a.multiple,a.defaultValue,!0):ki(i,!!a.multiple,a.multiple?[]:"",!1))}i[Qa]=a}catch(p){Ne(e,e.return,p)}}break;case 6:if(Ft(t,e),Jt(e),r&4){if(e.stateNode===null)throw Error(L(162));i=e.stateNode,a=e.memoizedProps;try{i.nodeValue=a}catch(p){Ne(e,e.return,p)}}break;case 3:if(Ft(t,e),Jt(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ga(t.containerInfo)}catch(p){Ne(e,e.return,p)}break;case 4:Ft(t,e),Jt(e);break;case 13:Ft(t,e),Jt(e),i=e.child,i.flags&8192&&(a=i.memoizedState!==null,i.stateNode.isHidden=a,!a||i.alternate!==null&&i.alternate.memoizedState!==null||(Gv=De())),r&4&&C0(e);break;case 22:if(c=n!==null&&n.memoizedState!==null,e.mode&1?(et=(u=et)||c,Ft(t,e),et=u):Ft(t,e),Jt(e),r&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!c&&e.mode&1)for($=e,c=e.child;c!==null;){for(d=$=c;$!==null;){switch(f=$,m=f.child,f.tag){case 0:case 11:case 14:case 15:Aa(4,f,f.return);break;case 1:yi(f,f.return);var v=f.stateNode;if(typeof v.componentWillUnmount=="function"){r=f,n=f.return;try{t=r,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(p){Ne(r,n,p)}}break;case 5:yi(f,f.return);break;case 22:if(f.memoizedState!==null){j0(d);continue}}m!==null?(m.return=f,$=m):j0(d)}c=c.sibling}e:for(c=null,d=e;;){if(d.tag===5){if(c===null){c=d;try{i=d.stateNode,u?(a=i.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(o=d.stateNode,l=d.memoizedProps.style,s=l!=null&&l.hasOwnProperty("display")?l.display:null,o.style.display=Zk("display",s))}catch(p){Ne(e,e.return,p)}}}else if(d.tag===6){if(c===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(p){Ne(e,e.return,p)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===e)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;d.sibling===null;){if(d.return===null||d.return===e)break e;c===d&&(c=null),d=d.return}c===d&&(c=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Ft(t,e),Jt(e),r&4&&C0(e);break;case 21:break;default:Ft(t,e),Jt(e)}}function Jt(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(EC(n)){var r=n;break e}n=n.return}throw Error(L(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Ba(i,""),r.flags&=-33);var a=E0(e);Im(e,a,i);break;case 3:case 4:var s=r.stateNode.containerInfo,o=E0(e);Am(e,o,s);break;default:throw Error(L(161))}}catch(l){Ne(e,e.return,l)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function KR(e,t,n){$=e,jC(e)}function jC(e,t,n){for(var r=(e.mode&1)!==0;$!==null;){var i=$,a=i.child;if(i.tag===22&&r){var s=i.memoizedState!==null||Hs;if(!s){var o=i.alternate,l=o!==null&&o.memoizedState!==null||et;o=Hs;var u=et;if(Hs=s,(et=l)&&!u)for($=i;$!==null;)s=$,l=s.child,s.tag===22&&s.memoizedState!==null?M0(i):l!==null?(l.return=s,$=l):M0(i);for(;a!==null;)$=a,jC(a),a=a.sibling;$=i,Hs=o,et=u}T0(e)}else i.subtreeFlags&8772&&a!==null?(a.return=i,$=a):T0(e)}}function T0(e){for(;$!==null;){var t=$;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:et||ll(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!et)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:Bt(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;a!==null&&d0(t,a,r);break;case 3:var s=t.updateQueue;if(s!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}d0(t,s,n)}break;case 5:var o=t.stateNode;if(n===null&&t.flags&4){n=o;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var d=c.dehydrated;d!==null&&Ga(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(L(163))}et||t.flags&512&&Rm(t)}catch(f){Ne(t,t.return,f)}}if(t===e){$=null;break}if(n=t.sibling,n!==null){n.return=t.return,$=n;break}$=t.return}}function j0(e){for(;$!==null;){var t=$;if(t===e){$=null;break}var n=t.sibling;if(n!==null){n.return=t.return,$=n;break}$=t.return}}function M0(e){for(;$!==null;){var t=$;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{ll(4,t)}catch(l){Ne(t,n,l)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(l){Ne(t,i,l)}}var a=t.return;try{Rm(t)}catch(l){Ne(t,a,l)}break;case 5:var s=t.return;try{Rm(t)}catch(l){Ne(t,s,l)}}}catch(l){Ne(t,t.return,l)}if(t===e){$=null;break}var o=t.sibling;if(o!==null){o.return=t.return,$=o;break}$=t.return}}var YR=Math.ceil,Oo=Pn.ReactCurrentDispatcher,zv=Pn.ReactCurrentOwner,At=Pn.ReactCurrentBatchConfig,se=0,Ge=null,qe=null,Ke=0,mt=0,gi=dr(0),$e=0,ns=null,qr=0,ul=0,Uv=0,Ia=null,ut=null,Gv=0,Li=1/0,pn=null,qo=!1,Dm=null,tr=null,Ws=!1,Yn=null,Fo=0,Da=0,Lm=null,fo=-1,ho=0;function at(){return se&6?De():fo!==-1?fo:fo=De()}function nr(e){return e.mode&1?se&2&&Ke!==0?Ke&-Ke:RR.transition!==null?(ho===0&&(ho=fE()),ho):(e=he,e!==0||(e=window.event,e=e===void 0?16:bE(e.type)),e):1}function Gt(e,t,n,r){if(50<Da)throw Da=0,Lm=null,Error(L(185));us(e,n,r),(!(se&2)||e!==Ge)&&(e===Ge&&(!(se&2)&&(ul|=n),$e===4&&Hn(e,Ke)),ht(e,r),n===1&&se===0&&!(t.mode&1)&&(Li=De()+500,al&&fr()))}function ht(e,t){var n=e.callbackNode;RN(e,t);var r=So(e,e===Ge?Ke:0);if(r===0)n!==null&&qg(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&qg(n),t===1)e.tag===0?NR(P0.bind(null,e)):qE(P0.bind(null,e)),TR(function(){!(se&6)&&fr()}),n=null;else{switch(hE(r)){case 1:n=yv;break;case 4:n=cE;break;case 16:n=xo;break;case 536870912:n=dE;break;default:n=xo}n=LC(n,MC.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function MC(e,t){if(fo=-1,ho=0,se&6)throw Error(L(327));var n=e.callbackNode;if(Mi()&&e.callbackNode!==n)return null;var r=So(e,e===Ge?Ke:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Vo(e,r);else{t=r;var i=se;se|=2;var a=NC();(Ge!==e||Ke!==t)&&(pn=null,Li=De()+500,Nr(e,t));do try{JR();break}catch(o){PC(e,o)}while(!0);Pv(),Oo.current=a,se=i,qe!==null?t=0:(Ge=null,Ke=0,t=$e)}if(t!==0){if(t===2&&(i=um(e),i!==0&&(r=i,t=Om(e,i))),t===1)throw n=ns,Nr(e,0),Hn(e,r),ht(e,De()),n;if(t===6)Hn(e,r);else{if(i=e.current.alternate,!(r&30)&&!QR(i)&&(t=Vo(e,r),t===2&&(a=um(e),a!==0&&(r=a,t=Om(e,a))),t===1))throw n=ns,Nr(e,0),Hn(e,r),ht(e,De()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(L(345));case 2:_r(e,ut,pn);break;case 3:if(Hn(e,r),(r&130023424)===r&&(t=Gv+500-De(),10<t)){if(So(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){at(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ym(_r.bind(null,e,ut,pn),t);break}_r(e,ut,pn);break;case 4:if(Hn(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var s=31-Ut(r);a=1<<s,s=t[s],s>i&&(i=s),r&=~a}if(r=i,r=De()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*YR(r/1960))-r,10<r){e.timeoutHandle=ym(_r.bind(null,e,ut,pn),r);break}_r(e,ut,pn);break;case 5:_r(e,ut,pn);break;default:throw Error(L(329))}}}return ht(e,De()),e.callbackNode===n?MC.bind(null,e):null}function Om(e,t){var n=Ia;return e.current.memoizedState.isDehydrated&&(Nr(e,t).flags|=256),e=Vo(e,t),e!==2&&(t=ut,ut=n,t!==null&&qm(t)),e}function qm(e){ut===null?ut=e:ut.push.apply(ut,e)}function QR(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!Ht(a(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Hn(e,t){for(t&=~Uv,t&=~ul,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Ut(t),r=1<<n;e[n]=-1,t&=~r}}function P0(e){if(se&6)throw Error(L(327));Mi();var t=So(e,0);if(!(t&1))return ht(e,De()),null;var n=Vo(e,t);if(e.tag!==0&&n===2){var r=um(e);r!==0&&(t=r,n=Om(e,r))}if(n===1)throw n=ns,Nr(e,0),Hn(e,t),ht(e,De()),n;if(n===6)throw Error(L(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,_r(e,ut,pn),ht(e,De()),null}function Hv(e,t){var n=se;se|=1;try{return e(t)}finally{se=n,se===0&&(Li=De()+500,al&&fr())}}function Fr(e){Yn!==null&&Yn.tag===0&&!(se&6)&&Mi();var t=se;se|=1;var n=At.transition,r=he;try{if(At.transition=null,he=1,e)return e()}finally{he=r,At.transition=n,se=t,!(se&6)&&fr()}}function Wv(){mt=gi.current,ge(gi)}function Nr(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,CR(n)),qe!==null)for(n=qe.return;n!==null;){var r=n;switch(Tv(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&To();break;case 3:Ii(),ge(dt),ge(nt),Lv();break;case 5:Dv(r);break;case 4:Ii();break;case 13:ge(_e);break;case 19:ge(_e);break;case 10:Nv(r.type._context);break;case 22:case 23:Wv()}n=n.return}if(Ge=e,qe=e=rr(e.current,null),Ke=mt=t,$e=0,ns=null,Uv=ul=qr=0,ut=Ia=null,Tr!==null){for(t=0;t<Tr.length;t++)if(n=Tr[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,a=n.pending;if(a!==null){var s=a.next;a.next=i,r.next=s}n.pending=r}Tr=null}return e}function PC(e,t){do{var n=qe;try{if(Pv(),lo.current=Lo,Do){for(var r=Ee.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Do=!1}if(Or=0,Ue=Be=Ee=null,Ra=!1,Za=0,zv.current=null,n===null||n.return===null){$e=1,ns=t,qe=null;break}e:{var a=e,s=n.return,o=n,l=t;if(t=Ke,o.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,c=o,d=c.tag;if(!(c.mode&1)&&(d===0||d===11||d===15)){var f=c.alternate;f?(c.updateQueue=f.updateQueue,c.memoizedState=f.memoizedState,c.lanes=f.lanes):(c.updateQueue=null,c.memoizedState=null)}var m=y0(s);if(m!==null){m.flags&=-257,g0(m,s,o,a,t),m.mode&1&&v0(a,u,t),t=m,l=u;var v=t.updateQueue;if(v===null){var p=new Set;p.add(l),t.updateQueue=p}else v.add(l);break e}else{if(!(t&1)){v0(a,u,t),Kv();break e}l=Error(L(426))}}else if(we&&o.mode&1){var x=y0(s);if(x!==null){!(x.flags&65536)&&(x.flags|=256),g0(x,s,o,a,t),jv(Di(l,o));break e}}a=l=Di(l,o),$e!==4&&($e=2),Ia===null?Ia=[a]:Ia.push(a),a=s;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t;var y=hC(a,l,t);c0(a,y);break e;case 1:o=l;var g=a.type,w=a.stateNode;if(!(a.flags&128)&&(typeof g.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(tr===null||!tr.has(w)))){a.flags|=65536,t&=-t,a.lanes|=t;var _=pC(a,o,t);c0(a,_);break e}}a=a.return}while(a!==null)}AC(n)}catch(E){t=E,qe===n&&n!==null&&(qe=n=n.return);continue}break}while(!0)}function NC(){var e=Oo.current;return Oo.current=Lo,e===null?Lo:e}function Kv(){($e===0||$e===3||$e===2)&&($e=4),Ge===null||!(qr&268435455)&&!(ul&268435455)||Hn(Ge,Ke)}function Vo(e,t){var n=se;se|=2;var r=NC();(Ge!==e||Ke!==t)&&(pn=null,Nr(e,t));do try{XR();break}catch(i){PC(e,i)}while(!0);if(Pv(),se=n,Oo.current=r,qe!==null)throw Error(L(261));return Ge=null,Ke=0,$e}function XR(){for(;qe!==null;)RC(qe)}function JR(){for(;qe!==null&&!_N();)RC(qe)}function RC(e){var t=DC(e.alternate,e,mt);e.memoizedProps=e.pendingProps,t===null?AC(e):qe=t,zv.current=null}function AC(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=GR(n,t),n!==null){n.flags&=32767,qe=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{$e=6,qe=null;return}}else if(n=UR(n,t,mt),n!==null){qe=n;return}if(t=t.sibling,t!==null){qe=t;return}qe=t=e}while(t!==null);$e===0&&($e=5)}function _r(e,t,n){var r=he,i=At.transition;try{At.transition=null,he=1,ZR(e,t,n,r)}finally{At.transition=i,he=r}return null}function ZR(e,t,n,r){do Mi();while(Yn!==null);if(se&6)throw Error(L(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(L(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(AN(e,a),e===Ge&&(qe=Ge=null,Ke=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Ws||(Ws=!0,LC(xo,function(){return Mi(),null})),a=(n.flags&15990)!==0,n.subtreeFlags&15990||a){a=At.transition,At.transition=null;var s=he;he=1;var o=se;se|=4,zv.current=null,WR(e,n),TC(n,e),bR(mm),_o=!!pm,mm=pm=null,e.current=n,KR(n),kN(),se=o,he=s,At.transition=a}else e.current=n;if(Ws&&(Ws=!1,Yn=e,Fo=i),a=e.pendingLanes,a===0&&(tr=null),TN(n.stateNode),ht(e,De()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(qo)throw qo=!1,e=Dm,Dm=null,e;return Fo&1&&e.tag!==0&&Mi(),a=e.pendingLanes,a&1?e===Lm?Da++:(Da=0,Lm=e):Da=0,fr(),null}function Mi(){if(Yn!==null){var e=hE(Fo),t=At.transition,n=he;try{if(At.transition=null,he=16>e?16:e,Yn===null)var r=!1;else{if(e=Yn,Yn=null,Fo=0,se&6)throw Error(L(331));var i=se;for(se|=4,$=e.current;$!==null;){var a=$,s=a.child;if($.flags&16){var o=a.deletions;if(o!==null){for(var l=0;l<o.length;l++){var u=o[l];for($=u;$!==null;){var c=$;switch(c.tag){case 0:case 11:case 15:Aa(8,c,a)}var d=c.child;if(d!==null)d.return=c,$=d;else for(;$!==null;){c=$;var f=c.sibling,m=c.return;if(kC(c),c===u){$=null;break}if(f!==null){f.return=m,$=f;break}$=m}}}var v=a.alternate;if(v!==null){var p=v.child;if(p!==null){v.child=null;do{var x=p.sibling;p.sibling=null,p=x}while(p!==null)}}$=a}}if(a.subtreeFlags&2064&&s!==null)s.return=a,$=s;else e:for(;$!==null;){if(a=$,a.flags&2048)switch(a.tag){case 0:case 11:case 15:Aa(9,a,a.return)}var y=a.sibling;if(y!==null){y.return=a.return,$=y;break e}$=a.return}}var g=e.current;for($=g;$!==null;){s=$;var w=s.child;if(s.subtreeFlags&2064&&w!==null)w.return=s,$=w;else e:for(s=g;$!==null;){if(o=$,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:ll(9,o)}}catch(E){Ne(o,o.return,E)}if(o===s){$=null;break e}var _=o.sibling;if(_!==null){_.return=o.return,$=_;break e}$=o.return}}if(se=i,fr(),nn&&typeof nn.onPostCommitFiberRoot=="function")try{nn.onPostCommitFiberRoot(el,e)}catch{}r=!0}return r}finally{he=n,At.transition=t}}return!1}function N0(e,t,n){t=Di(n,t),t=hC(e,t,1),e=er(e,t,1),t=at(),e!==null&&(us(e,1,t),ht(e,t))}function Ne(e,t,n){if(e.tag===3)N0(e,e,n);else for(;t!==null;){if(t.tag===3){N0(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(tr===null||!tr.has(r))){e=Di(n,e),e=pC(t,e,1),t=er(t,e,1),e=at(),t!==null&&(us(t,1,e),ht(t,e));break}}t=t.return}}function eA(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=at(),e.pingedLanes|=e.suspendedLanes&n,Ge===e&&(Ke&n)===n&&($e===4||$e===3&&(Ke&130023424)===Ke&&500>De()-Gv?Nr(e,0):Uv|=n),ht(e,t)}function IC(e,t){t===0&&(e.mode&1?(t=Os,Os<<=1,!(Os&130023424)&&(Os=4194304)):t=1);var n=at();e=Cn(e,t),e!==null&&(us(e,t,n),ht(e,n))}function tA(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),IC(e,n)}function nA(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(L(314))}r!==null&&r.delete(t),IC(e,n)}var DC;DC=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||dt.current)ct=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return ct=!1,zR(e,t,n);ct=!!(e.flags&131072)}else ct=!1,we&&t.flags&1048576&&FE(t,Po,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;co(e,t),e=t.pendingProps;var i=Ni(t,nt.current);ji(t,n),i=qv(null,t,r,e,i,n);var a=Fv();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,ft(r)?(a=!0,jo(t)):a=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Av(t),i.updater=ol,t.stateNode=i,i._reactInternals=t,km(t,r,e,n),t=Tm(null,t,r,!0,a,n)):(t.tag=0,we&&a&&Cv(t),it(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(co(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=iA(r),e=Bt(r,e),i){case 0:t=Cm(null,t,r,e,n);break e;case 1:t=x0(null,t,r,e,n);break e;case 11:t=b0(null,t,r,e,n);break e;case 14:t=w0(null,t,r,Bt(r.type,e),n);break e}throw Error(L(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Bt(r,i),Cm(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Bt(r,i),x0(e,t,r,i,n);case 3:e:{if(gC(t),e===null)throw Error(L(387));r=t.pendingProps,a=t.memoizedState,i=a.element,GE(e,t),Ao(t,r,null,n);var s=t.memoizedState;if(r=s.element,a.isDehydrated)if(a={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=a,t.memoizedState=a,t.flags&256){i=Di(Error(L(423)),t),t=S0(e,t,r,n,i);break e}else if(r!==i){i=Di(Error(L(424)),t),t=S0(e,t,r,n,i);break e}else for(gt=Zn(t.stateNode.containerInfo.firstChild),bt=t,we=!0,zt=null,n=zE(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ri(),r===i){t=Tn(e,t,n);break e}it(e,t,r,n)}t=t.child}return t;case 5:return HE(t),e===null&&xm(t),r=t.type,i=t.pendingProps,a=e!==null?e.memoizedProps:null,s=i.children,vm(r,i)?s=null:a!==null&&vm(r,a)&&(t.flags|=32),yC(e,t),it(e,t,s,n),t.child;case 6:return e===null&&xm(t),null;case 13:return bC(e,t,n);case 4:return Iv(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Ai(t,null,r,n):it(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Bt(r,i),b0(e,t,r,i,n);case 7:return it(e,t,t.pendingProps,n),t.child;case 8:return it(e,t,t.pendingProps.children,n),t.child;case 12:return it(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,a=t.memoizedProps,s=i.value,ve(No,r._currentValue),r._currentValue=s,a!==null)if(Ht(a.value,s)){if(a.children===i.children&&!dt.current){t=Tn(e,t,n);break e}}else for(a=t.child,a!==null&&(a.return=t);a!==null;){var o=a.dependencies;if(o!==null){s=a.child;for(var l=o.firstContext;l!==null;){if(l.context===r){if(a.tag===1){l=xn(-1,n&-n),l.tag=2;var u=a.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}a.lanes|=n,l=a.alternate,l!==null&&(l.lanes|=n),Sm(a.return,n,t),o.lanes|=n;break}l=l.next}}else if(a.tag===10)s=a.type===t.type?null:a.child;else if(a.tag===18){if(s=a.return,s===null)throw Error(L(341));s.lanes|=n,o=s.alternate,o!==null&&(o.lanes|=n),Sm(s,n,t),s=a.sibling}else s=a.child;if(s!==null)s.return=a;else for(s=a;s!==null;){if(s===t){s=null;break}if(a=s.sibling,a!==null){a.return=s.return,s=a;break}s=s.return}a=s}it(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,ji(t,n),i=It(i),r=r(i),t.flags|=1,it(e,t,r,n),t.child;case 14:return r=t.type,i=Bt(r,t.pendingProps),i=Bt(r.type,i),w0(e,t,r,i,n);case 15:return mC(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Bt(r,i),co(e,t),t.tag=1,ft(r)?(e=!0,jo(t)):e=!1,ji(t,n),fC(t,r,i),km(t,r,i,n),Tm(null,t,r,!0,e,n);case 19:return wC(e,t,n);case 22:return vC(e,t,n)}throw Error(L(156,t.tag))};function LC(e,t){return uE(e,t)}function rA(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rt(e,t,n,r){return new rA(e,t,n,r)}function Yv(e){return e=e.prototype,!(!e||!e.isReactComponent)}function iA(e){if(typeof e=="function")return Yv(e)?1:0;if(e!=null){if(e=e.$$typeof,e===pv)return 11;if(e===mv)return 14}return 2}function rr(e,t){var n=e.alternate;return n===null?(n=Rt(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function po(e,t,n,r,i,a){var s=2;if(r=e,typeof e=="function")Yv(e)&&(s=1);else if(typeof e=="string")s=5;else e:switch(e){case li:return Rr(n.children,i,a,t);case hv:s=8,i|=8;break;case Kp:return e=Rt(12,n,t,i|2),e.elementType=Kp,e.lanes=a,e;case Yp:return e=Rt(13,n,t,i),e.elementType=Yp,e.lanes=a,e;case Qp:return e=Rt(19,n,t,i),e.elementType=Qp,e.lanes=a,e;case Hk:return cl(n,i,a,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Uk:s=10;break e;case Gk:s=9;break e;case pv:s=11;break e;case mv:s=14;break e;case zn:s=16,r=null;break e}throw Error(L(130,e==null?e:typeof e,""))}return t=Rt(s,n,t,i),t.elementType=e,t.type=r,t.lanes=a,t}function Rr(e,t,n,r){return e=Rt(7,e,r,t),e.lanes=n,e}function cl(e,t,n,r){return e=Rt(22,e,r,t),e.elementType=Hk,e.lanes=n,e.stateNode={isHidden:!1},e}function Au(e,t,n){return e=Rt(6,e,null,t),e.lanes=n,e}function Iu(e,t,n){return t=Rt(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function aA(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=pu(0),this.expirationTimes=pu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=pu(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Qv(e,t,n,r,i,a,s,o,l){return e=new aA(e,t,n,o,l),t===1?(t=1,a===!0&&(t|=8)):t=0,a=Rt(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Av(a),e}function sA(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:oi,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function OC(e){if(!e)return sr;e=e._reactInternals;e:{if(Br(e)!==e||e.tag!==1)throw Error(L(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(ft(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(L(171))}if(e.tag===1){var n=e.type;if(ft(n))return OE(e,n,t)}return t}function qC(e,t,n,r,i,a,s,o,l){return e=Qv(n,r,!0,e,i,a,s,o,l),e.context=OC(null),n=e.current,r=at(),i=nr(n),a=xn(r,i),a.callback=t??null,er(n,a,i),e.current.lanes=i,us(e,i,r),ht(e,r),e}function dl(e,t,n,r){var i=t.current,a=at(),s=nr(i);return n=OC(n),t.context===null?t.context=n:t.pendingContext=n,t=xn(a,s),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=er(i,t,s),e!==null&&(Gt(e,i,s,a),oo(e,i,s)),s}function Bo(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function R0(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Xv(e,t){R0(e,t),(e=e.alternate)&&R0(e,t)}function oA(){return null}var FC=typeof reportError=="function"?reportError:function(e){console.error(e)};function Jv(e){this._internalRoot=e}fl.prototype.render=Jv.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(L(409));dl(e,t,null,null)};fl.prototype.unmount=Jv.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Fr(function(){dl(null,e,null,null)}),t[En]=null}};function fl(e){this._internalRoot=e}fl.prototype.unstable_scheduleHydration=function(e){if(e){var t=vE();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Gn.length&&t!==0&&t<Gn[n].priority;n++);Gn.splice(n,0,e),n===0&&gE(e)}};function Zv(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function hl(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function A0(){}function lA(e,t,n,r,i){if(i){if(typeof r=="function"){var a=r;r=function(){var u=Bo(s);a.call(u)}}var s=qC(t,r,e,0,null,!1,!1,"",A0);return e._reactRootContainer=s,e[En]=s.current,Ka(e.nodeType===8?e.parentNode:e),Fr(),s}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var o=r;r=function(){var u=Bo(l);o.call(u)}}var l=Qv(e,0,!1,null,null,!1,!1,"",A0);return e._reactRootContainer=l,e[En]=l.current,Ka(e.nodeType===8?e.parentNode:e),Fr(function(){dl(t,l,n,r)}),l}function pl(e,t,n,r,i){var a=n._reactRootContainer;if(a){var s=a;if(typeof i=="function"){var o=i;i=function(){var l=Bo(s);o.call(l)}}dl(t,s,e,i)}else s=lA(n,t,e,i,r);return Bo(s)}pE=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=va(t.pendingLanes);n!==0&&(gv(t,n|1),ht(t,De()),!(se&6)&&(Li=De()+500,fr()))}break;case 13:Fr(function(){var r=Cn(e,1);if(r!==null){var i=at();Gt(r,e,1,i)}}),Xv(e,1)}};bv=function(e){if(e.tag===13){var t=Cn(e,134217728);if(t!==null){var n=at();Gt(t,e,134217728,n)}Xv(e,134217728)}};mE=function(e){if(e.tag===13){var t=nr(e),n=Cn(e,t);if(n!==null){var r=at();Gt(n,e,t,r)}Xv(e,t)}};vE=function(){return he};yE=function(e,t){var n=he;try{return he=e,t()}finally{he=n}};sm=function(e,t,n){switch(t){case"input":if(Zp(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=il(r);if(!i)throw Error(L(90));Kk(r),Zp(r,i)}}}break;case"textarea":Qk(e,n);break;case"select":t=n.value,t!=null&&ki(e,!!n.multiple,t,!1)}};rE=Hv;iE=Fr;var uA={usingClientEntryPoint:!1,Events:[ds,fi,il,tE,nE,Hv]},ca={findFiberByHostInstance:Cr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},cA={bundleType:ca.bundleType,version:ca.version,rendererPackageName:ca.rendererPackageName,rendererConfig:ca.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Pn.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=oE(e),e===null?null:e.stateNode},findFiberByHostInstance:ca.findFiberByHostInstance||oA,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ks=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ks.isDisabled&&Ks.supportsFiber)try{el=Ks.inject(cA),nn=Ks}catch{}}_t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=uA;_t.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Zv(t))throw Error(L(200));return sA(e,t,null,n)};_t.createRoot=function(e,t){if(!Zv(e))throw Error(L(299));var n=!1,r="",i=FC;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=Qv(e,1,!1,null,null,n,!1,r,i),e[En]=t.current,Ka(e.nodeType===8?e.parentNode:e),new Jv(t)};_t.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(L(188)):(e=Object.keys(e).join(","),Error(L(268,e)));return e=oE(t),e=e===null?null:e.stateNode,e};_t.flushSync=function(e){return Fr(e)};_t.hydrate=function(e,t,n){if(!hl(t))throw Error(L(200));return pl(null,e,t,!0,n)};_t.hydrateRoot=function(e,t,n){if(!Zv(e))throw Error(L(405));var r=n!=null&&n.hydratedSources||null,i=!1,a="",s=FC;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(a=n.identifierPrefix),n.onRecoverableError!==void 0&&(s=n.onRecoverableError)),t=qC(t,null,e,1,n??null,i,!1,a,s),e[En]=t.current,Ka(e),r)for(e=0;e<r.length;e++)n=r[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new fl(t)};_t.render=function(e,t,n){if(!hl(t))throw Error(L(200));return pl(null,e,t,!1,n)};_t.unmountComponentAtNode=function(e){if(!hl(e))throw Error(L(40));return e._reactRootContainer?(Fr(function(){pl(null,null,e,!1,function(){e._reactRootContainer=null,e[En]=null})}),!0):!1};_t.unstable_batchedUpdates=Hv;_t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!hl(n))throw Error(L(200));if(e==null||e._reactInternals===void 0)throw Error(L(38));return pl(e,t,n,!1,r)};_t.version="18.3.1-next-f1338f8080-20240426";function VC(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(VC)}catch(e){console.error(e)}}VC(),Vk.exports=_t;var dA=Vk.exports,I0=dA;Hp.createRoot=I0.createRoot,Hp.hydrateRoot=I0.hydrateRoot;const fA="modulepreload",hA=function(e){return"/agent-director/"+e},D0={},hs=function(t,n,r){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),o=(s==null?void 0:s.nonce)||(s==null?void 0:s.getAttribute("nonce"));i=Promise.allSettled(n.map(l=>{if(l=hA(l),l in D0)return;D0[l]=!0;const u=l.endsWith(".css"),c=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${c}`))return;const d=document.createElement("link");if(d.rel=u?"stylesheet":fA,u||(d.as="script"),d.crossOrigin="",d.href=l,o&&d.setAttribute("nonce",o),document.head.appendChild(d),u)return new Promise((f,m)=>{d.addEventListener("load",f),d.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${l}`)))})}))}function a(s){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s}return i.then(s=>{for(const o of s||[])o.status==="rejected"&&a(o.reason);return t().catch(a)})},pA=()=>h.jsxs("svg",{className:"logo-mark",width:"54",height:"54",viewBox:"0 0 120 120",role:"img","aria-label":"Agent Director logo",children:[h.jsx("rect",{x:"8",y:"8",width:"104",height:"104",rx:"18",className:"logo-frame"}),h.jsx("rect",{x:"24",y:"28",width:"72",height:"16",rx:"6",className:"logo-bar logo-bar-a"}),h.jsx("rect",{x:"24",y:"52",width:"72",height:"16",rx:"6",className:"logo-bar logo-bar-b"}),h.jsx("rect",{x:"24",y:"76",width:"72",height:"16",rx:"6",className:"logo-bar logo-bar-c"}),h.jsx("circle",{cx:"96",cy:"36",r:"6",className:"logo-node logo-node-a"}),h.jsx("circle",{cx:"96",cy:"60",r:"6",className:"logo-node logo-node-b"}),h.jsx("circle",{cx:"96",cy:"84",r:"6",className:"logo-node logo-node-c"})]});function mA({trace:e,traces:t=[],selectedTraceId:n,onSelectTrace:r,onReload:i,onStartTour:a,onToggleStory:s,onOpenPalette:o,onToggleExplain:l,onShareSession:u,onThemeChange:c,onMotionChange:d,themeMode:f="studio",motionMode:m="balanced",activeSessions:v=1,shareStatus:p=null,handoffStatus:x=null,explainMode:y=!1,storyActive:g=!1,mode:w="cinema",missionCompletion:_,runHealthScore:E=100,modeHotkeys:T="C / F / Space",onCreateHandoffDigest:j}){const C=Math.max(0,Math.min(100,Math.round(E))),M=_?`${_.done}/${_.total} missions`:"Missions n/a";return h.jsxs("header",{className:"header","data-help":!0,"data-help-indicator":!0,"data-tour":"header","data-help-title":"Mission control","data-help-body":"Trace identity, status, and live controls live here. Use Story, Guide, or Explain to orient new viewers.","data-help-placement":"bottom",children:[h.jsxs("div",{className:"header-title",children:[h.jsxs("div",{className:"header-logo",children:[h.jsx(pA,{}),h.jsx("span",{children:"Agent Director"})]}),h.jsx("div",{className:"header-tagline",children:"Cinematic trace intelligence for agent runs."}),h.jsxs("div",{className:"header-meta",children:[h.jsxs("span",{className:"header-run",children:["Run: ",(e==null?void 0:e.id)??"loading"]}),t.length>0?h.jsx("select",{className:"trace-select",value:n??(e==null?void 0:e.id)??"","aria-label":"Select trace",onChange:P=>r==null?void 0:r(P.target.value),"data-help":!0,"data-help-title":"Trace selector","data-help-body":"Switch between available runs to compare different sessions.","data-help-placement":"bottom",children:t.map(P=>h.jsxs("option",{value:P.id,children:[P.name," (",P.id,")"]},P.id))}):null,h.jsx("span",{className:`status-pill status-${(e==null?void 0:e.status)??"loading"}`,children:(e==null?void 0:e.status)??"loading"}),e!=null&&e.replay?h.jsxs("span",{className:"header-replay",title:`Replay from ${e.branchPointStepId??"unknown step"}`,children:["Replay: ",e.replay.strategy]}):null,h.jsxs("span",{className:"header-wall",children:["Wall: ",(e==null?void 0:e.metadata.wallTimeMs)??0,"ms"]}),h.jsxs("span",{className:"header-presence","aria-label":"Active sessions",children:["Live: ",v]}),h.jsxs("span",{className:"header-mode-pill","aria-label":"Current mode",children:["Mode: ",w]}),h.jsxs("span",{className:"header-hotkeys","aria-label":"Mode hotkeys",children:["Keys: ",T]}),h.jsx("span",{className:"header-mission","aria-label":"Mission completion",children:M}),h.jsxs("span",{className:"header-health","aria-label":`Run health score ${C}`,children:[h.jsx("span",{className:"header-health-bar",children:h.jsx("span",{className:"header-health-fill",style:{width:`${C}%`}})}),h.jsxs("span",{children:["Health ",C]})]}),p?h.jsx("span",{className:"header-share-status",children:p}):null,x?h.jsx("span",{className:"header-share-status",children:x}):null]})]}),h.jsxs("div",{className:"header-actions",children:[h.jsxs("label",{className:"theme-picker",children:["Theme",h.jsxs("select",{className:"trace-select",value:f,"aria-label":"Select theme",onChange:P=>c==null?void 0:c(P.target.value),children:[h.jsx("option",{value:"studio",children:"Studio"}),h.jsx("option",{value:"focus",children:"Focus"}),h.jsx("option",{value:"contrast",children:"Contrast"})]})]}),h.jsxs("label",{className:"theme-picker",children:["Motion",h.jsxs("select",{className:"trace-select",value:m,"aria-label":"Select motion profile",onChange:P=>d==null?void 0:d(P.target.value),children:[h.jsx("option",{value:"cinematic",children:"Cinematic"}),h.jsx("option",{value:"balanced",children:"Balanced"}),h.jsx("option",{value:"minimal",children:"Minimal"})]})]}),h.jsx("button",{className:`ghost-button ${g?"active":""}`,type:"button",onClick:s,"aria-pressed":g,"aria-label":"Toggle story mode","data-help":!0,"data-help-title":"Story mode","data-help-body":"Auto-runs a cinematic walkthrough for demos.","data-help-placement":"bottom",children:"Story"}),h.jsx("button",{className:"ghost-button",type:"button",onClick:a,"aria-label":"Start guided tour","data-help":!0,"data-help-title":"Guided tour","data-help-body":"Walk through the interface step by step.","data-help-placement":"bottom",children:"Guide"}),h.jsx("button",{className:"ghost-button",type:"button",onClick:o,"aria-label":"Open command palette","data-help":!0,"data-help-title":"Command palette","data-help-body":"Search and trigger any action instantly.","data-help-placement":"bottom",children:"Command"}),h.jsx("button",{className:`ghost-button ${y?"active":""}`,type:"button",onClick:l,"aria-pressed":y,"aria-label":"Toggle explain mode","data-help":!0,"data-help-title":"Explain mode","data-help-body":"Hover any control to see contextual guidance.","data-help-placement":"bottom",children:"Explain"}),h.jsx("button",{className:"ghost-button",onClick:i,type:"button","aria-label":"Refresh traces",title:"Refresh traces","data-help":!0,"data-help-title":"Refresh","data-help-body":"Reload traces from the data store.","data-help-placement":"bottom",children:"Refresh"}),h.jsx("button",{className:"ghost-button",type:"button",onClick:u,"aria-label":"Copy live session link",title:"Copy live session link",children:"Share"}),h.jsx("button",{className:"ghost-button",type:"button",onClick:j,"aria-label":"Copy session handoff digest",title:"Copy session handoff digest",children:"Handoff"}),h.jsx("a",{className:"ghost-button",href:"/help.html",target:"_blank",rel:"noreferrer","data-help":!0,"data-help-title":"Help","data-help-body":"Open quick docs for first run, key flows, troubleshooting, and shortcuts.","data-help-placement":"bottom",children:"Help"}),null]})]})}function vA({insights:e,investigation:t,onSelectStep:n,onJumpToBottleneck:r,onJumpToError:i}){var f,m,v,p,x;if(!e)return null;const a=e.timing,s=e.ioWarnings??[],o=e.concurrency,l=e.retryPatterns,u=e.costByTool??{},c=e.costByModel??{},d=((f=t==null?void 0:t.hypotheses)==null?void 0:f.slice(0,2))??[];return h.jsxs("section",{className:"insight-strip","data-help":!0,"data-help-indicator":!0,"data-tour":"insights","data-help-title":"Run insights","data-help-body":"Fast diagnostics for latency, cost, errors, and concurrency. Click chips to jump into the trace.","data-help-placement":"bottom",children:[h.jsxs("div",{className:"insight-block","data-help":!0,"data-help-title":"Top latency","data-help-body":"Largest steps by duration; jump straight to the slowest.","data-help-placement":"bottom",children:[h.jsx("span",{className:"insight-label",children:"Top latency"}),h.jsxs("div",{className:"insight-items",children:[e.topLatencySteps.map(y=>h.jsxs("button",{className:"insight-chip",type:"button",title:`Jump to ${y.name}`,onClick:()=>n==null?void 0:n(y.stepId),children:[y.name," (",y.durationMs,"ms)"]},y.stepId)),e.topLatencySteps.length>0?h.jsx("button",{className:"insight-chip",type:"button",onClick:r,title:"Jump to longest step",children:"Jump to bottleneck"}):null]})]}),h.jsxs("div",{className:"insight-block","data-help":!0,"data-help-title":"Cost by type","data-help-body":"Aggregated spend by step class.","data-help-placement":"bottom",children:[h.jsx("span",{className:"insight-label",children:"Cost by type"}),h.jsx("div",{className:"insight-items",children:Object.entries(e.costByType).map(([y,g])=>h.jsxs("span",{className:"insight-chip",title:`Total cost for ${y}`,children:[y,": $",g.toFixed(3)]},y))})]}),Object.keys(u).length?h.jsxs("div",{className:"insight-block","data-help":!0,"data-help-title":"Cost by tool","data-help-body":"Top tools by total spend.","data-help-placement":"bottom",children:[h.jsx("span",{className:"insight-label",children:"Cost by tool"}),h.jsx("div",{className:"insight-items",children:Object.entries(u).sort((y,g)=>g[1]-y[1]).slice(0,3).map(([y,g])=>h.jsxs("span",{className:"insight-chip",title:`Total cost for ${y}`,children:[y,": $",g.toFixed(3)]},y))})]}):null,h.jsxs("div",{className:"insight-block","data-help":!0,"data-help-title":"Errors & retries","data-help-body":"Instant visibility into failed or retried steps.","data-help-placement":"bottom",children:[h.jsx("span",{className:"insight-label",children:"Errors / retries"}),h.jsxs("div",{className:"insight-items",children:[h.jsxs("span",{className:"insight-chip",children:["Errors: ",e.errors]}),h.jsxs("span",{className:"insight-chip",children:["Retries: ",e.retries]}),e.errors>0?h.jsx("button",{className:"insight-chip",type:"button",onClick:i,title:"Jump to first error",children:"Jump to first error"}):null,(m=l==null?void 0:l.topRetries)!=null&&m.length?h.jsxs("span",{className:"insight-chip",title:`Retry rate ${(l.retryRate*100).toFixed(1)}%`,children:["Top retries: ",l.topRetries.length]}):null]})]}),h.jsxs("div",{className:"insight-block","data-help":!0,"data-help-title":"Wall vs work","data-help-body":"Wall time vs summed work to show parallelism.","data-help-placement":"bottom",children:[h.jsx("span",{className:"insight-label",children:"Wall vs work"}),h.jsxs("div",{className:"insight-items",children:[h.jsxs("span",{className:"insight-chip",title:"Wall clock duration",children:["Wall: ",e.wallTimeMs,"ms"]}),h.jsxs("span",{className:"insight-chip",title:"Sum of step durations",children:["Work: ",e.workTimeMs,"ms"]}),e.criticalPathMs!=null?h.jsxs("span",{className:"insight-chip",title:"Longest parent-child chain",children:["Critical: ",e.criticalPathMs,"ms"]}):null]})]}),h.jsxs("div",{className:"insight-block","data-help":!0,"data-help-title":"Health","data-help-body":"Timing and I/O anomalies detected in the trace.","data-help-placement":"bottom",children:[h.jsx("span",{className:"insight-label",children:"Health"}),h.jsxs("div",{className:"insight-items",children:[a!=null&&a.degraded?h.jsx("span",{className:"insight-chip insight-warning",title:a.issues.join(" "),children:"Timing degraded"}):h.jsx("span",{className:"insight-chip",children:"Timing OK"}),s.length>0?h.jsxs("span",{className:"insight-chip insight-warning",title:s.map(y=>y.message).join(" "),children:["IO warnings: ",s.length]}):h.jsx("span",{className:"insight-chip",children:"IO OK"})]})]}),d.length?h.jsxs("div",{className:"insight-block","data-help":!0,"data-help-title":"Investigator","data-help-body":"Automated root-cause hypotheses ranked by severity and confidence.","data-help-placement":"bottom",children:[h.jsx("span",{className:"insight-label",children:"Investigator"}),h.jsxs("div",{className:"insight-items",children:[d.map(y=>h.jsxs("span",{className:"insight-chip",title:y.summary,children:[y.title," (",Math.round(y.confidence*100),"%)"]},y.id)),(p=(v=d[0])==null?void 0:v.evidenceStepIds)!=null&&p[0]?h.jsx("button",{className:"insight-chip",type:"button",onClick:()=>n==null?void 0:n(d[0].evidenceStepIds[0]),children:"Jump to evidence"}):null]})]}):null,(x=o==null?void 0:o.buckets)!=null&&x.length?h.jsxs("div",{className:"insight-block","data-help":!0,"data-help-title":"Parallelism","data-help-body":"How many steps ran concurrently over time.","data-help-placement":"bottom",children:[h.jsx("span",{className:"insight-label",children:"Parallelism"}),h.jsx("div",{className:"insight-items",children:h.jsx("div",{className:"insight-heatmap",title:`Peak concurrency: ${o.peak}`,children:o.buckets.map((y,g)=>h.jsx("span",{className:"heatmap-bar",style:{height:`${Math.max(20,y.active/Math.max(1,o.peak)*48)}px`},title:`Bucket ${g+1}: ${y.active} active`},`${y.startMs}-${y.endMs}`))})})]}):null,Object.keys(c).length?h.jsxs("div",{className:"insight-block","data-help":!0,"data-help-title":"Model cost","data-help-body":"Spend by model family.","data-help-placement":"bottom",children:[h.jsx("span",{className:"insight-label",children:"Model cost"}),h.jsx("div",{className:"insight-items",children:Object.entries(c).map(([y,g])=>h.jsxs("span",{className:"insight-chip",title:`Total cost for ${y}`,children:[y,": $",g.toFixed(3)]},y))})]}):null]})}const yA=["all","llm_call","tool_call","decision","handoff","guardrail"];function gA({query:e,typeFilter:t,onQueryChange:n,onTypeFilterChange:r}){return h.jsxs("div",{className:"search-bar",children:[h.jsx("input",{className:"search-input",placeholder:"Search steps, tools, previews...","aria-label":"Search steps",value:e,onChange:i=>n(i.target.value),"data-help":!0,"data-help-title":"Search","data-help-body":"Filter steps by name, tool, or payload preview. Great for fast recall.","data-help-placement":"bottom"}),h.jsx("select",{className:"search-select",value:t,"aria-label":"Filter by step type",onChange:i=>r(i.target.value),"data-help":!0,"data-help-title":"Type filter","data-help-body":"Narrow the timeline to a specific class of steps (LLM, tool, decision, handoff).","data-help-placement":"bottom",children:yA.map(i=>h.jsx("option",{value:i,children:i},i))})]})}function ml(e,t,n){const r=Date.parse(e),i=n.map(c=>Date.parse(c.endedAt??c.startedAt)).filter(c=>Number.isFinite(c)),a=t?Date.parse(t):i.length?Math.max(...i):r,s=Math.max(1,a-r),o=n.map(c=>{const d=Math.max(0,Date.parse(c.startedAt)-r),f=Math.max(d,Date.parse(c.endedAt??c.startedAt)-r);return{stepId:c.id,startMs:d,endMs:f}}).sort((c,d)=>c.startMs-d.startMs||c.endMs-d.endMs),l=[],u=[];for(const c of o){let d=l.findIndex(f=>f<=c.startMs);d===-1?(d=l.length,l.push(c.endMs)):l[d]=c.endMs,u.push({stepId:c.stepId,startMs:c.startMs,endMs:c.endMs,lane:d,xPct:c.startMs/s*100,wPct:Math.max(.75,(c.endMs-c.startMs)/s*100)})}return{wallTimeMs:s,intervals:u,laneCount:l.length}}function bA(e){var v;const n=e.steps.map(p=>({stepId:p.id,name:p.name,durationMs:p.durationMs??0})).sort((p,x)=>x.durationMs-p.durationMs).slice(0,3),r={},i={};for(const p of e.steps)((v=p.metrics)==null?void 0:v.costUsd)!=null&&(r[p.type]=(r[p.type]??0)+p.metrics.costUsd,p.type==="tool_call"&&(i[p.name]=(i[p.name]??0)+p.metrics.costUsd));const a=e.steps.filter(p=>p.status==="failed").length,s=e.steps.filter(p=>!!p.retryOfStepId).length,o=e.metadata.wallTimeMs,l=e.metadata.workTimeMs??e.steps.reduce((p,x)=>p+(x.durationMs??0),0),u=xA(e),c=SA(e.steps),d=_A(e.steps),f=kA(e),m=EA(e.steps);return{topLatencySteps:n,costByType:r,costByTool:i,costByModel:{[e.metadata.modelId]:e.metadata.totalCostUsd??0},errors:a,retries:s,wallTimeMs:o,workTimeMs:l,timing:u,ioWarnings:c,criticalPathMs:d,concurrency:f,retryPatterns:m}}function wA(e){var n;const t=(n=e.metrics)==null?void 0:n.costUsd;return t==null?null:`$${t.toFixed(3)}`}function vn(e){if(!e)return null;const t=Date.parse(e);return Number.isNaN(t)?null:t}function xA(e){const t=vn(e.startedAt),n=vn(e.endedAt??void 0),r=[],i=[],a=[];return t==null&&a.push("Trace start time missing or invalid."),e.steps.forEach(s=>{const o=vn(s.startedAt),l=vn(s.endedAt??s.startedAt);if(o==null||l==null){r.push(s.id);return}if(l<o){i.push(s.id);return}t!=null&&o<t&&i.push(s.id),n!=null&&l>n&&i.push(s.id)}),r.length&&a.push(`Missing timestamps on ${r.length} steps.`),i.length&&a.push(`Timestamp skew detected on ${i.length} steps.`),{degraded:!!(r.length||i.length||t==null),issues:a,missingStepIds:r,skewedStepIds:i}}function SA(e){const t=new Map;e.forEach(a=>{a.type==="tool_call"&&a.toolCallId&&t.set(a.toolCallId,a)});const n=new Set,r=new Set,i=[];return e.forEach(a=>{a.type!=="llm_call"||!a.io||((a.io.emittedToolCallIds??[]).forEach(s=>{n.add(s),t.has(s)||i.push({kind:"missing_tool_step",message:`Emitted toolCallId ${s} has no tool step.`,stepId:a.id,toolCallId:s})}),(a.io.consumedToolCallIds??[]).forEach(s=>{r.add(s),t.has(s)||i.push({kind:"missing_tool_step",message:`Consumed toolCallId ${s} has no tool step.`,stepId:a.id,toolCallId:s}),n.has(s)||i.push({kind:"consume_without_emit",message:`Consumed toolCallId ${s} without emission.`,stepId:a.id,toolCallId:s})}))}),t.forEach((a,s)=>{n.has(s)||i.push({kind:"unemitted_tool",message:`Tool step ${a.id} has toolCallId ${s} never emitted.`,stepId:a.id,toolCallId:s}),r.has(s)||i.push({kind:"unconsumed_tool",message:`Tool step ${a.id} has toolCallId ${s} never consumed.`,stepId:a.id,toolCallId:s})}),i}function _A(e){const t=new Map,n=new Map,r=[];e.forEach(s=>{if(t.set(s.id,s.durationMs??0),s.parentStepId){const o=n.get(s.parentStepId)??[];o.push(s.id),n.set(s.parentStepId,o)}else r.push(s.id)});const i=new Map,a=s=>{if(i.has(s))return i.get(s)??0;const l=(n.get(s)??[]).reduce((c,d)=>Math.max(c,a(d)),0),u=(t.get(s)??0)+l;return i.set(s,u),u};return r.length?Math.max(...r.map(s=>a(s))):0}function kA(e){const t=vn(e.startedAt);if(t==null)return{buckets:[],peak:0};const n=vn(e.endedAt??void 0)??Math.max(...e.steps.map(l=>vn(l.endedAt??l.startedAt)??t),t),r=Math.max(1,n-t),i=12,a=Math.max(1,Math.floor(r/i)),s=[];let o=0;for(let l=0;l<i;l+=1){const u=t+l*a,c=u+a;let d=0;e.steps.forEach(f=>{const m=vn(f.startedAt),v=vn(f.endedAt??f.startedAt);m==null||v==null||v>=u&&m<=c&&(d+=1)}),o=Math.max(o,d),s.push({startMs:l*a,endMs:(l+1)*a,active:d})}return{buckets:s,peak:o}}function EA(e){const t={};e.forEach(i=>{i.retryOfStepId&&(t[i.retryOfStepId]=(t[i.retryOfStepId]??0)+1)});const n=Object.values(t).reduce((i,a)=>i+a,0),r=Object.entries(t).sort((i,a)=>a[1]-i[1]).slice(0,3);return{totalRetries:n,retryRate:e.length?n/e.length:0,topRetries:r.map(([i,a])=>({stepId:i,count:a}))}}const CA={llm_call:{label:"LLM",icon:"LLM",description:"Model call"},tool_call:{label:"TOOL",icon:"TOOL",description:"Tool call"},decision:{label:"DEC",icon:"DEC",description:"Decision"},handoff:{label:"HAND",icon:"HAND",description:"Handoff"},guardrail:{label:"GUARD",icon:"GUARD",description:"Guardrail"}};function TA(e){return CA[e]}function jA({type:e,size:t="sm",showLabel:n=!1}){const r=TA(e);return h.jsxs("span",{className:`step-badge step-badge-${e} step-badge-${t}`,title:r.description,children:[h.jsx("span",{className:"step-badge-icon",children:r.icon}),n?h.jsx("span",{className:"step-badge-label",children:r.label}):null]})}function BC({step:e,interval:t,playbackState:n,selected:r,onSelect:i,variant:a="base",diffStatus:s,disabled:o=!1,laneHeight:l=140}){var _,E,T,j,C,M;const u=wA(e),c=((_=e.preview)==null?void 0:_.subtitle)??((E=e.preview)==null?void 0:E.title)??"",d=((T=e.preview)==null?void 0:T.outputPreview)??((j=e.preview)==null?void 0:j.inputPreview)??"",f=s?`step-diff-${s}`:"",m=a==="ghost"?"step-ghost":"",v=t.wPct<8?"step-compact":"",p=e.type.replace("_"," ").toUpperCase(),x=((C=e.metrics)==null?void 0:C.tokensTotal)!=null?`${e.metrics.tokensTotal} tokens`:null,y=e.durationMs!=null?`${e.durationMs}ms`:null,g=[x,y,u].filter(Boolean).join("  "),w=`Click to inspect inputs/outputs and replay from this moment.${g?` ${g}.`:""}`;return h.jsxs("button",{type:"button",className:`step-card step-${e.type} step-${n} ${r?"step-selected":""} ${f} ${m} ${v}`,"data-step-id":e.id,"aria-pressed":r,"aria-hidden":a==="ghost",disabled:o,"data-help":!0,"data-help-title":`${e.name}  ${p}`,"data-help-body":w,"data-help-placement":"top",style:{left:`${t.xPct}%`,width:`${t.wPct}%`,top:`${t.lane*l}px`},onClick:()=>{o||i(e.id)},children:[h.jsxs("div",{className:"step-card-header",children:[h.jsxs("div",{className:"step-title-group",children:[h.jsx(jA,{type:e.type}),h.jsx("span",{className:"step-title",children:e.name})]}),h.jsx("span",{className:`status-pill status-${e.status}`,children:e.status})]}),c?h.jsx("div",{className:"step-subtitle",children:c}):null,h.jsxs("div",{className:"step-metrics",children:[((M=e.metrics)==null?void 0:M.tokensTotal)!=null?h.jsxs("span",{children:[e.metrics.tokensTotal," tok"]}):null,e.durationMs!=null?h.jsxs("span",{children:[e.durationMs,"ms"]}):null,u?h.jsx("span",{children:u}):null]}),d?h.jsx("div",{className:"step-preview",children:d}):null]})}function $C(e,t){return t<e.startMs?"future":t>e.endMs?"past":"active"}const da={type:{order:[],hidden:[]},status:{order:[],hidden:[]},parent:{order:[],hidden:[]}};function ey(e,t){return t==="type"?e.type:t==="status"?e.status:e.parentStepId??"root"}function MA(e,t){const n=new Set;return e.forEach(r=>n.add(ey(r,t))),Array.from(n).sort((r,i)=>r.localeCompare(i))}function L0(e,t,n){const r=new Set(e),i=[...t.filter(s=>r.has(s))];e.forEach(s=>{i.includes(s)||i.push(s)});const a=Array.from(new Set(n.filter(s=>r.has(s))));return{order:i,hidden:a}}const PA=140,NA=132,RA=96,O0={llm_call:1,tool_call:2,decision:3,handoff:4,guardrail:5};function zC(e){return[...e].sort((t,n)=>(O0[t.type]??9)-(O0[n.type]??9))}function AA(e,t,n,r,i){const a=new Map;t.forEach(f=>{var v;const m=ey(f,n);a.has(m)||a.set(m,[]),(v=a.get(m))==null||v.push(f)});const s=Array.from(a.keys()),o=[...r.filter(f=>s.includes(f))];s.forEach(f=>{o.includes(f)||o.push(f)});const l=o.filter(f=>!i.includes(f)),u=new Map;let c=0,d=0;return l.forEach(f=>{const m=a.get(f)??[],v=ml(e.startedAt,e.endedAt,m);v.intervals.forEach(p=>{u.set(p.stepId,{...p,lane:p.lane+c})}),c+=Math.max(1,v.laneCount)}),d=Math.max(1,c),{intervalsByStepId:u,laneCount:d,visibleGroups:l}}function IA({trace:e,steps:t,selectedStepId:n,onSelectStep:r,playheadPct:i,playheadMs:a,windowRange:s,ghostTrace:o,diff:l,laneStrategy:u="type",laneGroupsOrder:c=[],hiddenLaneGroups:d=[],laneHeight:f=PA,cardHeight:m=NA,compactHeight:v=RA}){const{intervalsByStepId:p,laneCount:x}=AA(e,t,u,c,d),y=Array.from(p.values()),g=new Map(y.map(R=>[R.stepId,R])),w=zC(t),_=e.metadata.wallTimeMs||1,E=new Set((l==null?void 0:l.removedSteps)??[]),T=new Set((l==null?void 0:l.changedSteps)??[]),j=new Set(((l==null?void 0:l.changedPairs)??[]).map(R=>R.rightId)),C=new Set((l==null?void 0:l.addedSteps)??[]);let M=y;if(s){const R=s.endMs-s.startMs,I=Math.max(1e3,R*.15),O=Math.max(0,s.startMs-I),K=s.endMs+I;if(M=y.filter(V=>V.endMs>=O&&V.startMs<=K),n&&!M.some(V=>V.stepId===n)){const V=g.get(n);V&&(M=[...M,V])}}const P=new Set(M.map(R=>R.stepId));return h.jsx("div",{className:"timeline",style:{"--step-card-height":`${m}px`,"--step-compact-height":`${v}px`},children:h.jsxs("div",{className:"timeline-grid",style:{height:`${x*f}px`},"data-help":!0,"data-help-title":"Timeline lanes","data-help-body":"Each lane stacks overlapping steps; width reflects duration.","data-help-placement":"top",children:[h.jsx("div",{className:"playback-cursor",style:{left:`${i}%`}}),w.filter(R=>P.has(R.id)).filter(R=>!d.includes(ey(R,u))).map(R=>{const I=g.get(R.id);if(!I)return null;const O=$C(I,a);return h.jsx(BC,{step:R,interval:I,playbackState:O,selected:n===R.id,diffStatus:E.has(R.id)?"removed":T.has(R.id)?"changed":null,laneHeight:f,onSelect:r},R.id)}),o?h.jsx(DA,{ghostTrace:o,baseWallTimeMs:_,playheadMs:a,windowRange:s,diffAdded:C,diffChanged:j,laneHeight:f}):null]})})}function DA({ghostTrace:e,baseWallTimeMs:t,playheadMs:n,windowRange:r,diffAdded:i,diffChanged:a,laneHeight:s}){const{intervals:o,laneCount:l}=ml(e.startedAt,e.endedAt,e.steps),u=new Map(o.map(p=>[p.stepId,p])),c=e.metadata.wallTimeMs||1,d=n/t*c;let f=o;if(r){const p=r.endMs-r.startMs,x=Math.max(1e3,p*.15),y=c/t,g=Math.max(0,(r.startMs-x)*y),w=Math.min(c,(r.endMs+x)*y);f=o.filter(_=>_.endMs>=g&&_.startMs<=w)}const m=new Set(f.map(p=>p.stepId)),v=zC(e.steps);return h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"ghost-lanes",style:{height:`${l*s}px`}}),v.filter(p=>m.has(p.id)).map(p=>{const x=u.get(p.id);if(!x)return null;const y=$C(x,d),g=i.has(p.id)?"added":a.has(p.id)?"changed":null;return h.jsx(BC,{step:p,interval:x,playbackState:y,selected:!1,diffStatus:g,variant:"ghost",disabled:!0,laneHeight:s,onSelect:()=>{}},`ghost-${p.id}`)})]})}function LA({trace:e,steps:t,selectedStepId:n,onSelectStep:r,playheadMs:i,windowRange:a,timing:s,ghostTrace:o,diff:l,laneStrategy:u,laneGroupsOrder:c,hiddenLaneGroups:d,onLaneStrategyChange:f,onToggleLaneGroupVisibility:m,onMoveLaneGroup:v}){const p=e.metadata.wallTimeMs||1,x=Math.min(100,Math.max(0,i/p*100)),y=c.filter(g=>!d.includes(g)).length;return h.jsxs("section",{className:"cinema-mode","aria-label":"Cinema mode",children:[s!=null&&s.degraded?h.jsxs("div",{className:"timing-banner",title:s.issues.join(" "),children:["Timing degraded: ",s.issues[0]??"Check timestamps."]}):null,h.jsxs("div",{className:"timeline-studio-panel","data-help":!0,"data-help-title":"Timeline studio","data-help-body":"Regroup lanes by type/status/parent, hide noisy groups, and reorder emphasis.",children:[h.jsxs("label",{className:"timeline-studio-strategy",children:["Lane strategy",h.jsxs("select",{value:u,onChange:g=>f(g.target.value),children:[h.jsx("option",{value:"type",children:"Type"}),h.jsx("option",{value:"status",children:"Status"}),h.jsx("option",{value:"parent",children:"Parent branch"})]})]}),h.jsxs("div",{className:"timeline-studio-summary",children:[y,"/",c.length," groups visible"]}),h.jsx("div",{className:"timeline-studio-groups",children:c.map((g,w)=>{const _=d.includes(g);return h.jsxs("div",{className:`timeline-studio-group ${_?"is-hidden":""}`,children:[h.jsx("button",{type:"button",className:"ghost-button",onClick:()=>m(g),children:_?"Show":"Hide"}),h.jsx("span",{className:"timeline-studio-group-name",children:g}),h.jsx("button",{type:"button",className:"ghost-button",onClick:()=>v(g,"up"),disabled:w===0,children:"Up"}),h.jsx("button",{type:"button",className:"ghost-button",onClick:()=>v(g,"down"),disabled:w===c.length-1,children:"Down"})]},g)})})]}),h.jsx(IA,{trace:e,steps:t,selectedStepId:n,onSelectStep:r,playheadPct:x,playheadMs:i,windowRange:a,ghostTrace:o,diff:l,laneStrategy:u,laneGroupsOrder:c,hiddenLaneGroups:d})]})}const OA=[.5,1,1.5,2,4];function q0({playheadMs:e,wallTimeMs:t,isPlaying:n,speed:r,onToggle:i,onScrub:a,onSpeedChange:s}){const o=l=>{a(Number(l.target.value))};return h.jsxs("div",{className:"playback-controls",children:[h.jsx("button",{className:"ghost-button",type:"button",onClick:i,"aria-label":n?"Pause playback":"Play playback","data-help":!0,"data-help-title":"Playhead","data-help-body":"Start or pause the run to experience timing as it unfolded.","data-help-placement":"bottom",children:n?"Pause":"Play"}),h.jsx("input",{className:"playback-slider",type:"range",min:0,max:t,value:e,"aria-label":"Playback position",onChange:o,"data-help":!0,"data-help-title":"Scrub timeline","data-help-body":"Drag to jump to any moment in the run.","data-help-placement":"bottom"}),h.jsx("select",{className:"playback-speed",value:r,"aria-label":"Playback speed",onChange:l=>s(Number(l.target.value)),"data-help":!0,"data-help-title":"Speed","data-help-body":"Slow down to inspect or speed up to skim.","data-help-placement":"bottom",children:OA.map(l=>h.jsxs("option",{value:l,children:[l,"x"]},l))})]})}function qA(e,t,n,r=60){const{wallTimeMs:i,intervals:a}=ml(e,t,n),s=new Array(r).fill(0);if(!i)return{buckets:s,wallTimeMs:0};const o=i/r;return!Number.isFinite(o)||o<=0?{buckets:s,wallTimeMs:i}:(a.forEach(l=>{const u=Math.max(0,Math.floor(l.startMs/o)),c=Math.min(r-1,Math.floor(l.endMs/o));for(let d=u;d<=c;d+=1)s[d]+=1}),{buckets:s,wallTimeMs:i})}function FA(e,t){const n=new Blob([JSON.stringify(t,null,2)],{type:"application/json"}),r=URL.createObjectURL(n),i=document.createElement("a");i.href=r,i.download=e,document.body.appendChild(i),i.click(),i.remove(),URL.revokeObjectURL(r)}function VA(e,t,n="text/plain"){const r=new Blob([t],{type:n}),i=URL.createObjectURL(r),a=document.createElement("a");a.href=i,a.download=e,document.body.appendChild(a),a.click(),a.remove(),URL.revokeObjectURL(i)}const fa=5e3,BA=32;function vt(e,t,n){return Math.min(n,Math.max(t,e))}function si(e,t){const n=new Set;return e.forEach(r=>{n.add(vt(Math.round(r),0,t))}),Array.from(n).sort((r,i)=>r-i).slice(0,BA)}function $A(e,t){if(!e)return{bookmarksMs:[],clipStartMs:null,clipEndMs:null,segments:[]};try{const n=JSON.parse(e),r=si(Array.isArray(n.bookmarksMs)?n.bookmarksMs:[],t),i=typeof n.clipStartMs=="number"?vt(n.clipStartMs,0,t):null,a=typeof n.clipEndMs=="number"?vt(n.clipEndMs,0,t):null,s=Array.isArray(n.segments)?n.segments.filter(o=>typeof(o==null?void 0:o.id)=="string"&&typeof(o==null?void 0:o.startMs)=="number"&&typeof(o==null?void 0:o.endMs)=="number"&&typeof(o==null?void 0:o.label)=="string").map(o=>({...o,startMs:vt(o.startMs,0,t),endMs:vt(o.endMs,0,t)})):[];return{bookmarksMs:r,clipStartMs:i,clipEndMs:i!=null&&a!=null&&a<i?i:a,segments:s}}catch{return{bookmarksMs:[],clipStartMs:null,clipEndMs:null,segments:[]}}}function F0(e,t){const n=Date.parse(e);return Number.isNaN(n)?null:new Date(n+t).toISOString()}function zA({traceStart:e,traceEnd:t,steps:n,playheadMs:r,windowRange:i,windowed:a,spanMs:s,onSpanChange:o,onToggleWindowed:l,onScrub:u,persistenceKey:c,laneStrategy:d="type",visibleLaneGroups:f=[],remotePlayheads:m=[]}){const{buckets:v,wallTimeMs:p}=qA(e,t,n,64),x=Math.max(1,...v),y=vt(s,fa,Math.max(fa,p)),g=(i==null?void 0:i.startMs)??0,w=(i==null?void 0:i.endMs)??p,_=S.useMemo(()=>`agentDirector.timelineStudio.${c??e}`,[c,e]),[E,T]=S.useState([]),[j,C]=S.useState(null),[M,P]=S.useState(null),[R,I]=S.useState([]),[O,K]=S.useState("");S.useEffect(()=>{const F=$A(window.localStorage.getItem(_),p);T(F.bookmarksMs),C(F.clipStartMs),P(F.clipEndMs),I(F.segments)},[_,p]),S.useEffect(()=>{const F={bookmarksMs:si(E,p),clipStartMs:j==null?null:vt(j,0,p),clipEndMs:M==null?null:vt(M,0,p),segments:R};window.localStorage.setItem(_,JSON.stringify(F))},[E,M,j,R,_,p]);const V=p?g/p*100:0,le=p?(w-g)/p*100:100,ie=p?r/p*100:0,A=j!=null&&M!=null?Math.min(j,M):null,q=j!=null&&M!=null?Math.max(j,M):null,U=A!=null&&q!=null&&p?(q-A)/p*100:0,z=A!=null&&p?A/p*100:0,ae=A!=null&&q!=null&&q>A,Te=F=>{const te=F.currentTarget.getBoundingClientRect(),Q=(F.clientX-te.left)/te.width,Le=vt(Math.round(Q*p),0,p);u(Le)},oe=F=>{if(F.key==="ArrowLeft"){F.preventDefault(),u(vt(r-Math.max(250,Math.round(p*.02)),0,p));return}if(F.key==="ArrowRight"){F.preventDefault(),u(vt(r+Math.max(250,Math.round(p*.02)),0,p));return}if(F.key==="Home"){F.preventDefault(),u(0);return}if(F.key==="End"){F.preventDefault(),u(p);return}(F.key===" "||F.key==="Enter")&&(F.preventDefault(),u(r))},ce=()=>{T(F=>si([...F,r],p))},B=F=>{if(E.length===0)return;const te=si(E,p);if(F==="previous"){const Le=[...te].reverse().find(ne=>ne<r)??te[te.length-1];u(Le);return}const Q=te.find(Le=>Le>r)??te[0];u(Q)},de=()=>{const F=vt(r,0,p);C(F),M!=null&&M<F&&P(F)},Et=()=>{const F=vt(r,0,p);P(F),j!=null&&j>F&&C(F)},ln=()=>{C(null),P(null)},Yt=()=>{if(!ae||A==null||q==null)return;const F=O.trim()||`Scene ${R.length+1}`,te=`segment-${Math.random().toString(36).slice(2,9)}`;I(Q=>[...Q,{id:te,startMs:A,endMs:q,label:F}]),K("")},mr=F=>{I(te=>te.filter(Q=>Q.id!==F))},Kr=()=>{if(!ae||A==null||q==null)return;const F={type:"agent-director-clip",traceStart:e,traceEnd:t,clip:{startMs:A,endMs:q,startAt:F0(e,A),endAt:F0(e,q)},bookmarksMs:si(E,p).filter(te=>te>=A&&te<=q),playheadMs:r,laneContext:{strategy:d,visibleGroups:f},segments:R.filter(te=>te.endMs>=A&&te.startMs<=q),exportedAt:new Date().toISOString()};FA(`agent-director-clip-${A}-${q}.json`,F)};return h.jsxs("div",{className:"mini-timeline",children:[h.jsxs("div",{className:"mini-track",onClick:Te,role:"slider",tabIndex:0,"aria-label":"Timeline density map","aria-valuemin":0,"aria-valuemax":p,"aria-valuenow":r,"aria-valuetext":`${r} milliseconds`,onKeyDown:oe,"data-help":!0,"data-help-title":"Density map","data-help-body":"A compact view of activity density. Click to jump the playhead.","data-help-placement":"top",children:[h.jsx("div",{className:"mini-bars",children:v.map((F,te)=>h.jsx("span",{className:"mini-bar",style:{height:`${F/x*100}%`}},`bucket-${te}`))}),h.jsx("div",{className:"mini-window",style:{left:`${V}%`,width:`${le}%`,opacity:a?1:.4}}),ae?h.jsx("div",{className:"mini-clip-window",style:{left:`${z}%`,width:`${U}%`}}):null,h.jsx("div",{className:"mini-bookmark-markers","data-testid":"timeline-bookmark-markers","aria-hidden":"true",children:si(E,p).map(F=>{const te=p?F/p*100:0;return h.jsx("button",{type:"button",className:"mini-bookmark-marker",style:{left:`${te}%`},onClick:Q=>{Q.stopPropagation(),u(F)},title:`Jump to bookmark at ${F}ms`,"aria-label":`Bookmark ${F} milliseconds`},`bookmark-${F}`)})}),h.jsx("div",{className:"mini-remote-markers","aria-hidden":"true",children:m.map((F,te)=>{const Q=p?F/p*100:0;return h.jsx("span",{className:"mini-remote-marker",style:{left:`${Q}%`}},`remote-${te}`)})}),h.jsx("div",{className:"mini-segments","aria-hidden":"true",children:R.map(F=>{const te=p?F.startMs/p*100:0,Q=p?(F.endMs-F.startMs)/p*100:0;return h.jsx("span",{className:"mini-segment-bar",style:{left:`${te}%`,width:`${Math.max(1,Q)}%`},title:F.label},F.id)})}),h.jsx("div",{className:"mini-playhead",style:{left:`${ie}%`}})]}),h.jsxs("div",{className:"mini-controls",children:[h.jsx("label",{className:"mini-label",children:"Zoom"}),h.jsx("input",{type:"range",min:fa,max:Math.max(fa,p),value:y,"aria-label":"Timeline zoom",onChange:F=>{l(!0),o(Number(F.target.value))},"data-help":!0,"data-help-title":"Zoom window","data-help-body":"Tighten the window to focus on hotspots.","data-help-placement":"top"}),h.jsx("button",{className:"ghost-button",type:"button",onClick:()=>l(!a),title:"Toggle windowed playback",children:a?"Full":"Window"}),h.jsx("button",{className:"ghost-button",type:"button",title:"Reset zoom",onClick:()=>{l(!0),o(Math.min(Math.max(p*.2,fa),6e4))},children:"Reset"}),h.jsx("button",{className:"ghost-button",type:"button",onClick:ce,children:"Add bookmark"}),h.jsx("button",{className:"ghost-button",type:"button",onClick:()=>B("previous"),children:"Previous bookmark"}),h.jsx("button",{className:"ghost-button",type:"button",onClick:()=>B("next"),children:"Next bookmark"}),h.jsx("button",{className:"ghost-button",type:"button",onClick:de,children:"Set clip start"}),h.jsx("button",{className:"ghost-button",type:"button",onClick:Et,children:"Set clip end"}),h.jsx("button",{className:"ghost-button",type:"button",onClick:ln,children:"Clear clip"}),h.jsx("input",{className:"search-input mini-segment-input",placeholder:"Segment label",value:O,onChange:F=>K(F.target.value),"aria-label":"Segment label"}),h.jsx("button",{className:"ghost-button",type:"button",onClick:Yt,disabled:!ae,children:"Add segment"}),h.jsx("button",{className:"ghost-button",type:"button",onClick:Kr,disabled:!ae,children:"Export clip"})]}),R.length?h.jsx("div",{className:"mini-segment-list",children:R.map(F=>h.jsxs("div",{className:"mini-segment-item",children:[h.jsxs("span",{children:[F.label," (",F.startMs,"ms - ",F.endMs,"ms)"]}),h.jsx("button",{className:"ghost-button",type:"button",onClick:()=>mr(F.id),children:"Remove"})]},F.id))}):null]})}const UA=[{keys:"Space",action:"Play / pause"},{keys:" / ",action:"Step boundary back / forward"},{keys:"Shift +  / ",action:"Jump to start / end"},{keys:"F",action:"Toggle Flow mode"},{keys:"I",action:"Toggle Inspector"},{keys:"S",action:"Story mode"},{keys:"E",action:"Explain mode"},{keys:"T",action:"Start tour"},{keys:"Cmd/Ctrl + K",action:"Open command palette"},{keys:"?",action:"Show shortcuts"},{keys:"Esc",action:"Close modal / inspector"}];function GA({open:e,onClose:t}){const n=S.useRef(null);if(S.useEffect(()=>{var i;e&&((i=n.current)==null||i.focus())},[e]),!e)return null;const r=i=>{var l;if(i.key==="Escape"){i.preventDefault(),t();return}if(i.key!=="Tab")return;const a=Array.from(i.currentTarget.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'));if(a.length===0)return;const s=a.indexOf(document.activeElement),o=i.shiftKey?s<=0?a.length-1:s-1:(s+1)%a.length;(l=a[o])==null||l.focus(),i.preventDefault()};return h.jsx("div",{className:"modal-backdrop",role:"dialog","aria-modal":"true","aria-labelledby":"shortcuts-title",onKeyDown:r,children:h.jsxs("div",{className:"modal",tabIndex:-1,children:[h.jsxs("div",{className:"modal-header",children:[h.jsx("div",{className:"modal-title",id:"shortcuts-title",children:"Keyboard Shortcuts"}),h.jsx("button",{className:"ghost-button",type:"button",onClick:t,ref:n,"aria-label":"Close shortcuts",children:"Close"})]}),h.jsx("div",{className:"modal-body",children:UA.map(i=>h.jsxs("div",{className:"modal-row",children:[h.jsx("span",{className:"modal-keys",children:i.keys}),h.jsx("span",{className:"modal-action",children:i.action})]},i.keys))})]})})}const V0="agentDirector.palette.recent.v1",B0="agentDirector.palette.pinned.v1",HA=8,WA=12,KA=e=>e.trim().toLowerCase();function $0(e){try{const t=JSON.parse(window.localStorage.getItem(e)??"[]");return Array.isArray(t)?t.filter(n=>typeof n=="string"):[]}catch{return[]}}function z0(e,t){window.localStorage.setItem(e,JSON.stringify(t))}function YA(e){const t=new Map;return e.forEach(n=>{var i;const r=n.section;t.has(r)||t.set(r,[]),(i=t.get(r))==null||i.push(n)}),t}function U0(e,t,n){var i;if(!e.length)return 0;let r=t;for(let a=0;a<e.length;a+=1)if(r=(r+n+e.length)%e.length,!((i=e[r])!=null&&i.disabled))return r;return t}function QA({open:e,onClose:t,actions:n}){var j,C;const[r,i]=S.useState(""),[a,s]=S.useState(0),[o,l]=S.useState([]),[u,c]=S.useState([]),d=S.useRef(null),f=S.useRef(null),m=S.useMemo(()=>{const M=KA(r);return M?n.filter(P=>[P.label,P.description,P.group,P.keys].filter(Boolean).join(" ").toLowerCase().includes(M)):n},[n,r]),v=S.useMemo(()=>{const M=new Map(m.map(O=>[O.id,O])),P=u.map(O=>M.get(O)).filter(O=>!!O).map(O=>({...O,section:"Pinned"})),R=o.map(O=>M.get(O)).filter(O=>!!O).filter(O=>!P.some(K=>K.id===O.id)).map(O=>({...O,section:"Recent"})),I=m.filter(O=>!P.some(K=>K.id===O.id)).filter(O=>!R.some(K=>K.id===O.id)).map(O=>({...O,section:O.group??"General"}));return[...P,...R,...I]},[m,u,o]),p=S.useMemo(()=>YA(v),[v]),x=S.useMemo(()=>n.filter(M=>(M.group??"").toLowerCase()==="macros"||M.id.startsWith("macro-")),[n]);if(S.useEffect(()=>{if(!e)return;i(""),s(0),l($0(V0)),c($0(B0));const M=window.setTimeout(()=>{var P;return(P=d.current)==null?void 0:P.focus()},0);return()=>window.clearTimeout(M)},[e]),S.useEffect(()=>{a>=v.length&&s(0)},[a,v.length]),!e)return null;const y=M=>{l(P=>{const R=[M,...P.filter(I=>I!==M)].slice(0,HA);return z0(V0,R),R})},g=M=>{M.disabled||(y(M.id),M.onTrigger(),t())},w=M=>{c(P=>{const R=P.includes(M)?P.filter(I=>I!==M):[M,...P].slice(0,WA);return z0(B0,R),R})},_=M=>{var P,R;if(M.key==="Escape"){M.preventDefault(),t();return}if(M.key==="ArrowDown"){M.preventDefault(),s(I=>U0(v,I,1));return}if(M.key==="ArrowUp"){M.preventDefault(),s(I=>U0(v,I,-1));return}if(M.key==="Enter"){M.preventDefault();const I=v[a];I&&g(I);return}if(M.key==="Tab"){const I=Array.from(((P=f.current)==null?void 0:P.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'))??[]);if(!I.length)return;const O=I.indexOf(document.activeElement),K=M.shiftKey?O<=0?I.length-1:O-1:(O+1)%I.length;(R=I[K])==null||R.focus(),M.preventDefault()}},E=(j=v[a])!=null&&j.id?`palette-option-${(C=v[a])==null?void 0:C.id}`:void 0;let T=-1;return h.jsx("div",{className:"modal-backdrop palette-backdrop",role:"dialog","aria-modal":"true","aria-label":"Command palette",onKeyDown:_,onMouseDown:M=>{M.target===M.currentTarget&&t()},children:h.jsxs("div",{className:"palette",ref:f,children:[h.jsxs("div",{className:"palette-header",children:[h.jsxs("div",{children:[h.jsx("div",{className:"palette-title",children:"Command palette"}),h.jsx("div",{className:"palette-subtitle",children:"Search actions, modes, and playbook steps."})]}),h.jsx("button",{className:"ghost-button",type:"button",onClick:t,"aria-label":"Close command palette",children:"Close"})]}),h.jsx("input",{ref:d,className:"palette-input",value:r,onChange:M=>i(M.target.value),placeholder:"Type to filter actions","aria-label":"Search commands",role:"combobox","aria-expanded":"true","aria-controls":"command-palette-list","aria-activedescendant":E,"aria-autocomplete":"list"}),!r.trim()&&x.length>0?h.jsxs("div",{className:"palette-macros",children:[h.jsx("div",{className:"palette-group-title",children:"Quick macros"}),h.jsx("div",{className:"palette-macro-list",children:x.slice(0,3).map(M=>h.jsx("button",{className:"ghost-button palette-macro-item",type:"button",onClick:()=>g(M),children:M.label},M.id))})]}):null,h.jsxs("div",{className:"palette-list",role:"listbox",id:"command-palette-list",children:[v.length===0?h.jsx("div",{className:"palette-empty",children:"No matching commands."}):null,Array.from(p.entries()).map(([M,P])=>h.jsxs("div",{className:"palette-group",children:[h.jsx("div",{className:"palette-group-title",children:M}),h.jsx("div",{className:"palette-group-list",children:P.map(R=>{T+=1;const I=T===a,O=u.includes(R.id);return h.jsxs("button",{id:`palette-option-${R.id}`,className:`palette-item ${I?"active":""}`,type:"button",role:"option","aria-selected":I,onMouseEnter:()=>s(T),onClick:()=>g(R),disabled:R.disabled,children:[h.jsxs("div",{className:"palette-item-main",children:[h.jsx("div",{className:"palette-item-title",children:R.label}),R.description?h.jsx("div",{className:"palette-item-description",children:R.description}):null]}),h.jsxs("div",{className:"palette-item-trailing",children:[R.keys?h.jsx("div",{className:"palette-item-keys",children:R.keys}):null,h.jsx("span",{className:`palette-pin ${O?"active":""}`,role:"button",tabIndex:0,onClick:K=>{K.stopPropagation(),w(R.id)},onKeyDown:K=>{K.key!=="Enter"&&K.key!==" "||(K.preventDefault(),K.stopPropagation(),w(R.id))},"aria-label":O?`Unpin ${R.label}`:`Pin ${R.label}`,title:O?"Unpin command":"Pin command",children:O?"":""})]})]},R.id)})})]},M))]})]})})}function XA(e){return e.length?e.reduce((t,n)=>(n.durationMs??0)>(t.durationMs??0)?n:t,e[0]):null}function JA({trace:e,mode:t,playheadMs:n,selectedStepId:r,compareTrace:i,collapsed:a,onToggleCollapsed:s,onModeChange:o,onSelectStep:l,onJumpToBottleneck:u,onReplay:c,onStartTour:d,priorityQueue:f=[]}){var R;const m=e.steps??[],v=XA(m),p=r??(v==null?void 0:v.id)??((R=m[0])==null?void 0:R.id)??null,x=t==="cinema"||n>0,y=!!r,g=!!i,w=[x,y,g].filter(Boolean).length,_=[x,y,g].findIndex(I=>!I),E=_===-1?2:_,T=[0,1,2].map(I=>[x,y,g][I]?"done":I===E?"active":"next"),j=[{id:"observe",title:"Act I: Observe",summary:"Scrub the timeline to feel the pacing, bottlenecks, and tool choreography.",status:T[0],actionLabel:"Enter cinema",action:()=>o("cinema"),tasks:[{label:"Scrub the timeline",done:n>0},{label:"Stay in Cinema mode",done:t==="cinema"}]},{id:"inspect",title:"Act II: Inspect",summary:"Open the most expensive or failed step and read the payload with context.",status:T[1],actionLabel:v?"Jump to bottleneck":"Select first step",action:()=>{if(r){o("cinema");return}if(v){u();return}p&&(l(p),o("cinema"))},disabled:!p,tasks:[{label:"Open the Inspector",done:!!r},{label:"Jump to the bottleneck",done:!!(v&&r===v.id)}]},{id:"direct",title:"Act III: Direct",summary:"Replay from a decisive step, then compare flows and diffs side-by-side.",status:T[2],actionLabel:i?"Open compare":"Replay from step",action:()=>{if(i){o("compare");return}p&&c(p)},disabled:!p,tasks:[{label:"Replay from a step",done:!!i},{label:"Compare runs side-by-side",done:!!(i&&t==="compare")}]}],C=j[E],P=f.filter(I=>!I.done)[0];return a?h.jsxs("section",{className:"journey-panel journey-collapsed","aria-label":"Director journey","data-help":!0,"data-help-indicator":!0,"data-tour":"journey","data-help-title":"Director journey","data-help-body":"A guided path from observation to replay. Use it to show newcomers what to do first.","data-help-placement":"bottom",children:[h.jsxs("div",{className:"journey-collapsed-main",children:[h.jsx("div",{className:"journey-eyebrow",children:"Director journey"}),h.jsx("div",{className:"journey-collapsed-title",children:"From observe to direct"})]}),h.jsxs("div",{className:"journey-collapsed-actions",children:[h.jsxs("span",{className:"journey-progress-text",children:[w,"/3 complete"]}),P?h.jsxs("span",{className:`journey-priority-chip severity-${P.severity}`,children:["Next priority: ",P.title]}):null,C?h.jsxs("button",{className:"primary-button journey-next",type:"button",onClick:C.action,disabled:C.disabled,children:["Next: ",C.actionLabel]}):null,d?h.jsx("button",{className:"ghost-button",type:"button",onClick:d,children:"Tour"}):null,h.jsx("button",{className:"primary-button journey-expand",type:"button",onClick:s,children:"Expand"})]})]}):h.jsxs("section",{className:"journey-panel","aria-label":"Director journey","data-help":!0,"data-help-indicator":!0,"data-tour":"journey","data-help-title":"Director journey","data-help-body":"A three-act flow that teaches the story: observe, inspect, direct. Each act jumps to the right place.","data-help-placement":"bottom",children:[h.jsxs("div",{className:"journey-head",children:[h.jsxs("div",{children:[h.jsx("div",{className:"journey-eyebrow",children:"Director journey"}),h.jsx("h2",{className:"journey-title",children:"Cut a perfect take in three acts."}),h.jsx("p",{className:"journey-subtitle",children:"Trace the performance, interrogate the moment, then direct a better run."})]}),h.jsxs("div",{className:"journey-head-actions",children:[d?h.jsx("button",{className:"ghost-button",type:"button",onClick:d,children:"Start tour"}):null,h.jsx("button",{className:"ghost-button",type:"button",onClick:s,children:"Collapse"})]})]}),h.jsx("div",{className:"journey-track",children:j.map((I,O)=>{var K;return h.jsxs("div",{className:"journey-card","data-status":I.status,children:[h.jsxs("div",{className:"journey-card-top",children:[h.jsxs("span",{className:"journey-index",children:["0",O+1]}),h.jsx("span",{className:"journey-status",children:I.status})]}),h.jsx("h3",{className:"journey-card-title",children:I.title}),h.jsx("p",{className:"journey-card-body",children:I.summary}),(K=I.tasks)!=null&&K.length?h.jsx("ul",{className:"journey-tasks",children:I.tasks.map(V=>h.jsxs("li",{className:`journey-task ${V.done?"done":""}`,children:[h.jsx("span",{className:"journey-task-icon","aria-hidden":"true",children:V.done?"":""}),h.jsx("span",{children:V.label})]},V.label))}):null,h.jsx("button",{className:"primary-button journey-action",type:"button",onClick:I.action,disabled:I.disabled,children:I.actionLabel})]},I.id)})}),h.jsxs("div",{className:"journey-footer",children:[h.jsxs("div",{children:[h.jsx("div",{className:"journey-progress-label",children:"Progress"}),h.jsx("div",{className:"journey-progress",children:h.jsx("span",{className:"journey-progress-bar",style:{width:`${w/3*100}%`}})})]}),h.jsx("div",{className:"journey-footnote",children:"Tip: Use Flow to spot fan-out, Compare to validate your changes."})]}),f.length?h.jsxs("div",{className:"journey-priority-queue",children:[h.jsxs("div",{className:"journey-priority-head",children:[h.jsx("div",{className:"journey-progress-label",children:"Priority queue"}),h.jsxs("span",{children:[f.filter(I=>I.done).length,"/",f.length," resolved"]})]}),h.jsx("div",{className:"journey-priority-list",children:f.map(I=>h.jsxs("article",{className:`journey-priority-item ${I.done?"done":""}`,children:[h.jsxs("div",{className:"journey-priority-main",children:[h.jsx("span",{className:`journey-priority-chip severity-${I.severity}`,children:I.severity}),h.jsxs("div",{children:[h.jsx("div",{className:"journey-priority-title",children:I.title}),h.jsx("div",{className:"journey-priority-body",children:I.detail})]})]}),h.jsx("button",{className:"ghost-button",type:"button",onClick:I.onAction,disabled:I.done,children:I.done?"Resolved":I.actionLabel})]},I.id))})]}):null]})}const ZA=[],eI=[],tI=[],nI={};function rI(e){return e.length?e.reduce((t,n)=>(n.durationMs??0)>(t.durationMs??0)?n:t,e[0]):null}function iI({trace:e,mode:t,selectedStepId:n,onModeChange:r,onSelectStep:i,onJumpToBottleneck:a,onReplay:s,recommendations:o=ZA,persona:l="builder",annotations:u=eI,activityFeed:c=tI,onAddAnnotation:d,missionProgress:f=nI,missionCompletion:m,onResetMissions:v,narrative:p="",onAskDirector:x,onExportNarrative:y}){var ce;const g=e.steps??[],w=rI(g),_=n??(w==null?void 0:w.id)??((ce=g[0])==null?void 0:ce.id)??null,E=e.metadata.wallTimeMs??0,T=l==="executive"?"Executive lens":l==="operator"?"Operator lens":"Builder lens",[j,C]=S.useState(""),[M,P]=S.useState(""),[R,I]=S.useState(""),[O,K]=S.useState("overview"),[V,le]=S.useState([]),ie=S.useMemo(()=>c.slice(0,6),[c]),A=(m==null?void 0:m.done)??0,q=A>=3||!!f.inspect,U=A>=5||!!f.collaborate||ie.length>0,z=S.useMemo(()=>o.slice(0,3).map((B,de)=>({id:B.id,step:`${de+1}. ${B.actionLabel}  ${B.title}`})),[o]);S.useEffect(()=>{le(B=>B.filter(de=>o.some(Et=>Et.id===de)))},[o]);const ae=V.filter(B=>o.some(de=>de.id===B)).length,Te=o.length?Math.round(ae/o.length*100):0,oe=B=>{B.action(),le(de=>de.includes(B.id)?de:[...de,B.id])};return h.jsxs("aside",{className:"inspector inspector-empty","data-help":!0,"data-help-indicator":!0,"data-tour":"inspector","data-help-title":"Inspector panel","data-help-body":"Select a step to open detailed payloads, redaction controls, and replay actions.","data-help-placement":"left",children:[h.jsx("div",{className:"inspector-header",children:h.jsxs("div",{children:[h.jsx("div",{className:"inspector-title",children:"Director's notes"}),h.jsxs("div",{className:"inspector-subtitle",children:[T,". Select a step to open deep inspection."]})]})}),h.jsxs("div",{className:"director-tabs",role:"tablist","aria-label":"Director workspace tabs",children:[h.jsx("button",{className:`ghost-button ${O==="overview"?"active":""}`,type:"button",role:"tab","aria-selected":O==="overview",onClick:()=>K("overview"),children:"Overview"}),h.jsx("button",{className:`ghost-button ${O==="narrative"?"active":""}`,type:"button",role:"tab","aria-selected":O==="narrative",onClick:()=>K("narrative"),children:"Narrative"}),h.jsx("button",{className:`ghost-button ${O==="collab"?"active":""}`,type:"button",role:"tab","aria-selected":O==="collab",onClick:()=>K("collab"),children:"Collaboration"})]}),O==="overview"?h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"inspector-section",children:[h.jsx("div",{className:"inspector-section-title",children:"Run summary"}),h.jsxs("div",{className:"inspector-row",children:[h.jsx("span",{children:"Steps"}),h.jsx("span",{children:g.length})]}),h.jsxs("div",{className:"inspector-row",children:[h.jsx("span",{children:"Wall time"}),h.jsxs("span",{children:[E,"ms"]})]}),h.jsxs("div",{className:"inspector-row",children:[h.jsx("span",{children:"Status"}),h.jsx("span",{children:e.status})]})]}),h.jsxs("div",{className:"inspector-section",children:[h.jsx("div",{className:"inspector-section-title",children:"Next actions"}),h.jsxs("div",{className:"director-actions",children:[h.jsx("button",{className:"primary-button",type:"button",onClick:()=>r("cinema"),"data-help":!0,"data-help-title":"Open cinema","data-help-body":"Jump straight into the timeline.","data-help-placement":"right",children:"Open cinema"}),h.jsx("button",{className:"ghost-button",type:"button",onClick:()=>r("flow"),"data-help":!0,"data-help-title":"Open flow","data-help-body":"See the dependency graph of the run.","data-help-placement":"right",children:"Switch to flow"}),h.jsx("button",{className:"ghost-button",type:"button",onClick:()=>{if(!n){if(w){a();return}_&&i(_)}},disabled:!_||!!n,"data-help":!0,"data-help-title":"Jump to bottleneck","data-help-body":"Select the slowest step for inspection.","data-help-placement":"right",children:n?"Inspector open":w?"Jump to bottleneck":"Select first step"}),h.jsx("button",{className:"ghost-button",type:"button",onClick:()=>_&&s(_),disabled:!_||!q,title:q?void 0:"Complete core missions to unlock replay guidance.","data-help":!0,"data-help-title":"Replay","data-help-body":"Branch a replay from a decisive step.","data-help-placement":"right",children:"Replay from step"})]})]}),h.jsxs("div",{className:"inspector-section",children:[h.jsx("div",{className:"inspector-section-title",children:"Mode"}),h.jsxs("div",{className:"director-modes",children:[h.jsx("button",{className:`ghost-button ${t==="cinema"?"active":""}`,type:"button",onClick:()=>r("cinema"),"data-help":!0,"data-help-title":"Cinema mode","data-help-body":"Timeline view for pacing and sequence.","data-help-placement":"right",children:"Cinema"}),h.jsx("button",{className:`ghost-button ${t==="flow"?"active":""}`,type:"button",onClick:()=>r("flow"),"data-help":!0,"data-help-title":"Flow mode","data-help-body":"Graph view for dependencies.","data-help-placement":"right",children:"Flow"}),h.jsx("button",{className:"ghost-button",type:"button",disabled:!0,children:"Compare"})]})]}),h.jsxs("div",{className:"inspector-section",children:[h.jsx("div",{className:"inspector-section-title",children:"Adaptive missions"}),h.jsxs("div",{className:"mission-summary",children:[(m==null?void 0:m.done)??0,"/",(m==null?void 0:m.total)??0," complete",h.jsxs("span",{children:[(m==null?void 0:m.pct)??0,"%"]})]}),h.jsxs("div",{className:"mission-stage",children:["Stage: ",U?"Collaboration":q?"Analysis":"Foundation"]}),h.jsx("div",{className:"mission-grid",children:Object.entries(f).map(([B,de])=>h.jsxs("div",{className:`mission-chip ${de?"done":""}`,children:[h.jsx("span",{children:B}),h.jsx("span",{children:de?"Done":"Pending"})]},B))}),h.jsx("button",{className:"ghost-button",type:"button",onClick:v,children:"Reset missions"})]}),h.jsxs("div",{className:"inspector-section",children:[h.jsx("div",{className:"inspector-section-title",children:"Action plan"}),q?o.length===0?h.jsx("div",{className:"annotation-empty",children:"No recommendations generated yet."}):h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"mission-summary",children:[ae,"/",o.length," complete",h.jsxs("span",{children:[Te,"%"]})]}),h.jsx("div",{className:"director-recommendations",children:o.map(B=>{const de=V.includes(B.id);return h.jsxs("article",{className:`director-recommendation tone-${B.tone} ${de?"done":""}`,children:[h.jsx("div",{className:"director-recommendation-title",children:B.title}),h.jsx("p",{className:"director-recommendation-body",children:B.body}),h.jsx("button",{className:"ghost-button",type:"button",onClick:()=>oe(B),children:de?"Completed":B.actionLabel})]},B.id)})})]}):h.jsx("div",{className:"annotation-empty",children:"Complete inspect/flow/replay missions to unlock AI narrative tools."}),U?null:h.jsx("div",{className:"annotation-empty",children:"Open another live session to unlock collaboration activity feed."})]})]}):null,O==="narrative"?h.jsxs("div",{className:"inspector-section",children:[h.jsx("div",{className:"inspector-section-title",children:"AI director narrative"}),q?h.jsxs(h.Fragment,{children:[h.jsx("p",{className:"director-recommendation-body",children:p}),z.length?h.jsx("div",{className:"director-guided-plan",children:z.map(B=>h.jsx("div",{children:B.step},B.id))}):null,h.jsxs("div",{className:"director-ask-row",children:[h.jsx("input",{className:"search-input",value:M,onChange:B=>P(B.target.value),placeholder:"Ask Director (e.g. what is highest risk?)","aria-label":"Ask director question"}),h.jsx("button",{className:"ghost-button",type:"button",onClick:()=>{M.trim()&&I((x==null?void 0:x(M))??"")},children:"Ask"})]}),R?h.jsx("div",{className:"director-answer",children:R}):null,h.jsx("button",{className:"ghost-button",type:"button",onClick:y,children:"Export narrative"})]}):h.jsx("div",{className:"annotation-empty",children:"Complete inspect/flow/replay missions to unlock AI narrative tools."})]}):null,O==="collab"?h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"inspector-section",children:[h.jsx("div",{className:"inspector-section-title",children:"Shared annotations"}),h.jsx("textarea",{value:j,onChange:B=>C(B.target.value),rows:3,placeholder:n?"Add note for selected step...":"Add trace-level note...","aria-label":"Shared annotation"}),h.jsx("button",{className:"ghost-button",type:"button",onClick:()=>{const B=j.trim();B&&(d==null||d(B,n),C(""))},children:"Add annotation"}),h.jsxs("div",{className:"annotation-list",children:[u.slice(-6).reverse().map(B=>h.jsxs("article",{className:"annotation-item",children:[h.jsxs("div",{className:"annotation-meta",children:[h.jsx("span",{children:B.stepId?`step ${B.stepId}`:"trace"}),h.jsx("span",{children:B.authorSessionId})]}),h.jsx("p",{children:B.body})]},B.id)),u.length===0?h.jsx("div",{className:"annotation-empty",children:"No shared annotations yet."}):null]})]}),h.jsxs("div",{className:"inspector-section",children:[h.jsx("div",{className:"inspector-section-title",children:"Collab activity"}),U?h.jsxs("div",{className:"activity-list",children:[ie.map(B=>h.jsxs("div",{className:"activity-item",children:[h.jsx("span",{children:B.message}),h.jsx("span",{children:new Date(B.timestamp).toLocaleTimeString()})]},B.id)),ie.length===0?h.jsx("div",{className:"annotation-empty",children:"No activity yet."}):null]}):h.jsx("div",{className:"annotation-empty",children:"Open another live session to unlock collaboration activity feed."})]})]}):null]})}const Du=(e,t,n)=>Math.min(n,Math.max(t,e));function Lu(e){return Array.from((e==null?void 0:e.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'))??[]).filter(n=>!(n.hasAttribute("disabled")||n.getAttribute("aria-hidden")==="true"))}function aI({steps:e,open:t,onClose:n,onComplete:r}){const[i,a]=S.useState(0),[s,o]=S.useState(null),[l,u]=S.useState(null),c=S.useRef(null),d=S.useRef(null),f=S.useRef(null),m=S.useMemo(()=>e[i],[e,i]),v=S.useCallback(()=>{if(!t)return;const _=document.querySelector(m.target);if(!_){d.current=null,o(null);return}d.current=_;const E=_.getBoundingClientRect();o(E)},[t,m.target]),p=S.useCallback(()=>{if(!s||!c.current){u(null);return}const _=c.current.offsetWidth,E=c.current.offsetHeight,T=16;let j=Du(s.left+s.width/2-_/2,T,window.innerWidth-_-T),C=s.bottom+16;m.placement==="top"&&(C=s.top-E-16),m.placement==="left"&&(j=s.left-_-16,C=s.top+s.height/2-E/2),m.placement==="right"&&(j=s.right+16,C=s.top+s.height/2-E/2),C+E>window.innerHeight-T&&(C=s.top-E-16),C<T&&(C=s.bottom+16),j=Du(j,T,window.innerWidth-_-T),C=Du(C,T,window.innerHeight-E-T),u({top:C,left:j})},[m.placement,s]);if(S.useEffect(()=>{t&&a(0)},[t]),S.useEffect(()=>{var E,T;if(!t){(T=(E=f.current)==null?void 0:E.focus)==null||T.call(E);return}f.current=document.activeElement;const _=window.setTimeout(()=>{var C;(C=Lu(c.current)[0]??c.current)==null||C.focus()},0);return()=>window.clearTimeout(_)},[t]),S.useEffect(()=>{if(!t)return;const _=document.querySelector(m.target);_&&_.scrollIntoView({behavior:"smooth",block:"center",inline:"center"});const E=window.requestAnimationFrame(()=>v());return()=>window.cancelAnimationFrame(E)},[t,m.target,v]),S.useLayoutEffect(()=>{p()},[s,p,m.title]),S.useEffect(()=>{if(!t)return;const _=()=>{v(),p()};return window.addEventListener("resize",_),window.addEventListener("scroll",_,!0),()=>{window.removeEventListener("resize",_),window.removeEventListener("scroll",_,!0)}},[t,v,p]),S.useEffect(()=>{if(!t)return;const _=E=>{var P;if(E.key==="Escape"){E.preventDefault(),n();return}if(E.key!=="Tab")return;const T=Lu(c.current);if(!T.length)return;const j=document.activeElement,C=T.indexOf(j),M=E.shiftKey?C<=0?T.length-1:C-1:(C+1)%T.length;(P=T[M])==null||P.focus(),E.preventDefault()};return document.addEventListener("keydown",_,!0),()=>document.removeEventListener("keydown",_,!0)},[n,t]),!t||!m)return null;const x=_=>{var M;if(_.key==="Escape"){_.preventDefault(),n();return}if(_.key!=="Tab")return;const E=Lu(c.current);if(E.length===0)return;const T=document.activeElement,j=E.indexOf(T),C=_.shiftKey?j<=0?E.length-1:j-1:(j+1)%E.length;(M=E[C])==null||M.focus(),_.preventDefault()},y=`tour-title-${m.id}`,g=`tour-body-${m.id}`,w=s?{top:s.top-6,left:s.left-6,width:s.width+12,height:s.height+12}:void 0;return h.jsxs("div",{className:"tour-overlay",role:"dialog","aria-modal":"true","aria-label":"Guided tour","aria-labelledby":y,"aria-describedby":g,onKeyDown:x,children:[h.jsx("div",{className:"tour-backdrop",onClick:n}),s?h.jsx("div",{className:"tour-spotlight",style:w}):null,h.jsxs("div",{className:`tour-card ${l?"tour-card-anchored":""}`,ref:c,style:l??void 0,tabIndex:-1,children:[h.jsxs("div",{className:"tour-step",children:["Step ",i+1," of ",e.length]}),h.jsx("div",{className:"tour-title",id:y,children:m.title}),h.jsx("p",{className:"tour-body",id:g,children:m.body}),h.jsxs("div",{className:"tour-actions",children:[h.jsx("button",{className:"ghost-button",type:"button",onClick:()=>a(_=>Math.max(0,_-1)),disabled:i===0,children:"Back"}),h.jsx("button",{className:"ghost-button",type:"button",onClick:n,children:"Skip"}),i===e.length-1?h.jsx("button",{className:"primary-button",type:"button",onClick:r,children:"Finish tour"}):h.jsx("button",{className:"primary-button",type:"button",onClick:()=>a(_=>_+1),children:"Next"})]})]})]})}const G0=(e,t,n)=>Math.min(n,Math.max(t,e));function sI({enabled:e}){const[t,n]=S.useState(null),[r,i]=S.useState(null),a=S.useRef(null),s=S.useRef(null),o=S.useCallback(()=>{const u=a.current;if(!u){n(null);return}const c=u.getBoundingClientRect(),d=u.dataset.helpTitle??"Context",f=u.dataset.helpBody??"",m=u.dataset.helpPlacement??"right";n({rect:c,title:d,body:f,placement:m})},[]);S.useEffect(()=>{if(!e){a.current=null,n(null);return}const u=v=>{var x,y;const p=(y=(x=v.target)==null?void 0:x.closest)==null?void 0:y.call(x,"[data-help]");if(!p){a.current||n(null);return}a.current!==p&&(a.current=p,o())},c=v=>{var x,y;const p=(y=(x=v.target)==null?void 0:x.closest)==null?void 0:y.call(x,"[data-help]");p&&(a.current=p,o())},d=v=>{var x;const p=v.relatedTarget;(x=p==null?void 0:p.closest)!=null&&x.call(p,"[data-help]")||(a.current=null,n(null))},f=v=>{var x,y;const p=(y=(x=v.target)==null?void 0:x.closest)==null?void 0:y.call(x,"[data-help]");if(!p){a.current=null,n(null);return}a.current=p,o()},m=()=>{a.current&&o()};return window.addEventListener("mousemove",u),window.addEventListener("focusin",c),window.addEventListener("focusout",d),window.addEventListener("pointerdown",f),window.addEventListener("scroll",m,!0),window.addEventListener("resize",m),()=>{window.removeEventListener("mousemove",u),window.removeEventListener("focusin",c),window.removeEventListener("focusout",d),window.removeEventListener("pointerdown",f),window.removeEventListener("scroll",m,!0),window.removeEventListener("resize",m)}},[e,o]);const l=S.useCallback(()=>{if(!t||!s.current){i(null);return}const u=12,c=s.current.offsetWidth,d=s.current.offsetHeight,{rect:f,placement:m}=t;let v=f.right+16,p=f.top+f.height/2-d/2;m==="left"&&(v=f.left-c-16,p=f.top+f.height/2-d/2),m==="top"&&(v=f.left+f.width/2-c/2,p=f.top-d-16),m==="bottom"&&(v=f.left+f.width/2-c/2,p=f.bottom+16),v=G0(v,u,window.innerWidth-c-u),p=G0(p,u,window.innerHeight-d-u),i({left:v,top:p})},[t]);return S.useLayoutEffect(()=>{l()},[l]),!e||!t?null:h.jsxs("div",{className:"help-overlay","aria-hidden":"true",children:[h.jsx("div",{className:"help-highlight",style:{top:t.rect.top-6,left:t.rect.left-6,width:t.rect.width+12,height:t.rect.height+12}}),h.jsxs("div",{className:"help-bubble",ref:s,style:r??void 0,"data-placement":t.placement,children:[h.jsx("div",{className:"help-title",children:t.title}),h.jsx("div",{className:"help-body",children:t.body})]})]})}const oI=[{id:"builder",label:"Builder lens",body:"Focus on step payloads, execution paths, and replay control."},{id:"executive",label:"Executive lens",body:"Focus on bottlenecks, risk, and outcome-level run quality."},{id:"operator",label:"Operator lens",body:"Focus on failures, retries, and trace reliability posture."}],lI=[{id:"rapid_triage",label:"Rapid triage",body:"Jump straight to the highest-risk step and start resolution.",estimate:"2-3 min"},{id:"deep_diagnosis",label:"Deep diagnosis",body:"Open flow and guided analysis for full root-cause exploration.",estimate:"8-12 min"},{id:"team_sync",label:"Team sync",body:"Open collaborative mode and prep a handoff workflow.",estimate:"4-6 min"}];function uI({onComplete:e,onStartTour:t,onStartStory:n,persona:r="builder",onPersonaChange:i,launchPath:a="rapid_triage",onLaunchPathChange:s,onStartLaunchPath:o}){const l=()=>{t==null||t(),e()},u=()=>{n==null||n(),e()},c=d=>{s==null||s(d),o==null||o(d),e()};return h.jsx("div",{className:"intro-overlay",role:"dialog","aria-modal":"true","aria-label":"Agent Director intro",children:h.jsxs("div",{className:"intro-card",children:[h.jsx("div",{className:"intro-scan"}),h.jsx("div",{className:"intro-title",children:"Agent Director"}),h.jsx("div",{className:"intro-tagline",children:"Watch your agent think. Then direct it."}),h.jsxs("div",{className:"intro-steps",children:[h.jsxs("div",{className:"intro-step",children:[h.jsx("div",{className:"intro-step-label",children:"Observe"}),h.jsx("div",{className:"intro-step-body",children:"Scrub the timeline to feel pacing and parallelism."})]}),h.jsxs("div",{className:"intro-step",children:[h.jsx("div",{className:"intro-step-label",children:"Inspect"}),h.jsx("div",{className:"intro-step-body",children:"Open the bottleneck to read payloads and costs."})]}),h.jsxs("div",{className:"intro-step",children:[h.jsx("div",{className:"intro-step-label",children:"Direct"}),h.jsx("div",{className:"intro-step-body",children:"Replay from a decisive step and compare runs."})]})]}),h.jsx("div",{className:"intro-personas",role:"group","aria-label":"Select onboarding lens",children:oI.map(d=>h.jsxs("button",{type:"button",className:`ghost-button intro-persona ${r===d.id?"active":""}`,onClick:()=>i==null?void 0:i(d.id),"aria-pressed":r===d.id,"aria-label":d.label,children:[h.jsx("span",{className:"intro-persona-label",children:d.label}),h.jsx("span",{className:"intro-persona-body",children:d.body})]},d.id))}),h.jsx("div",{className:"intro-launch-paths",role:"group","aria-label":"Select launch path",children:lI.map(d=>h.jsxs("article",{className:`intro-path-card ${a===d.id?"active":""}`,children:[h.jsxs("button",{type:"button",className:`ghost-button intro-path-button ${a===d.id?"active":""}`,onClick:()=>s==null?void 0:s(d.id),"aria-pressed":a===d.id,"aria-label":d.label,children:[h.jsx("span",{className:"intro-path-label",children:d.label}),h.jsx("span",{className:"intro-path-estimate",children:d.estimate}),h.jsx("span",{className:"intro-path-body",children:d.body})]}),h.jsxs("button",{className:"primary-button intro-path-start",type:"button",onClick:()=>c(d.id),children:["Start ",d.label]})]},d.id))}),h.jsxs("div",{className:"intro-grid",children:[h.jsx("span",{}),h.jsx("span",{}),h.jsx("span",{}),h.jsx("span",{})]}),h.jsxs("div",{className:"intro-actions",children:[h.jsx("button",{className:"primary-button",type:"button",onClick:l,children:"Start guided tour"}),n?h.jsx("button",{className:"ghost-button",type:"button",onClick:u,children:"Play story mode"}):null,h.jsx("button",{className:"ghost-button",type:"button",onClick:e,children:"Skip intro"})]})]})})}function cI({explainMode:e,storyActive:t,onStartTour:n,onStartStory:r,onToggleExplain:i,onDismiss:a}){return h.jsxs("section",{className:"hero-ribbon","aria-label":"Director briefing","data-help":!0,"data-help-indicator":!0,"data-tour":"hero","data-help-title":"Director briefing","data-help-body":"Start the tour, play story mode, or enable explain to learn the interface instantly.","data-help-placement":"bottom",children:[h.jsxs("div",{className:"hero-ribbon-top",children:[h.jsx("span",{className:"hero-eyebrow",children:"Director briefing"}),h.jsx("button",{className:"ghost-button hero-dismiss",type:"button",onClick:a,children:"Dismiss"})]}),h.jsx("div",{className:"hero-title",children:"Observe. Inspect. Direct."}),h.jsx("div",{className:"hero-subtitle",children:"A cinematic control room for agent traces. See time, read structure, then replay with confidence."}),h.jsxs("div",{className:"hero-pills",children:[h.jsx("span",{className:"hero-pill","data-tone":"observe",children:"Observe"}),h.jsx("span",{className:"hero-pill","data-tone":"inspect",children:"Inspect"}),h.jsx("span",{className:"hero-pill","data-tone":"direct",children:"Direct"})]}),h.jsxs("div",{className:"hero-actions",children:[h.jsx("button",{className:"primary-button",type:"button",onClick:n,children:"Start guided tour"}),h.jsx("button",{className:"ghost-button",type:"button",onClick:r,disabled:t,children:t?"Story running":"Play story mode"}),h.jsxs("button",{className:`ghost-button ${e?"active":""}`,type:"button",onClick:i,"aria-pressed":e,children:["Explain ",e?"On":"Off"]})]})]})}function dI({mode:e,isPlaying:t,storyActive:n,explainMode:r,hidden:i=!1,open:a,onToggleOpen:s,onTogglePlay:o,onStartStory:l,onStopStory:u,onStartTour:c,onOpenPalette:d,onShowShortcuts:f,onToggleExplain:m,onJumpToBottleneck:v}){if(i)return null;const p=t?"Pause":"Play",x=n?"Stop story":"Story mode";return a?h.jsxs("aside",{className:"quick-actions","aria-label":"Quick actions","data-help":!0,"data-help-indicator":!0,"data-tour":"quick-actions","data-help-title":"Quick actions","data-help-body":"Launch story mode, open the command palette, or jump to the bottleneck instantly.","data-help-placement":"left",children:[h.jsxs("div",{className:"quick-actions-header",children:[h.jsxs("div",{children:[h.jsx("div",{className:"quick-actions-title",children:"Quick actions"}),h.jsx("div",{className:"quick-actions-subtitle",children:"Pin demo controls close at hand."})]}),h.jsx("button",{className:"ghost-button",type:"button",onClick:s,"aria-label":"Collapse quick actions",children:"Collapse"})]}),h.jsxs("button",{className:`quick-action ${t?"active":""}`,type:"button",onClick:o,"aria-label":p,"data-help":!0,"data-help-title":"Play or pause","data-help-body":"Start or stop playback from anywhere.","data-help-placement":"left",children:[h.jsx("span",{className:"quick-action-label",children:p}),h.jsx("span",{className:"quick-action-meta",children:e==="flow"?"Cinema":"Space"})]}),h.jsxs("button",{className:`quick-action ${n?"active":""}`,type:"button",onClick:n?u:l,"aria-label":x,"data-help":!0,"data-help-title":"Story mode","data-help-body":"Auto-runs a cinematic walkthrough of the run.","data-help-placement":"left",children:[h.jsx("span",{className:"quick-action-label",children:x}),h.jsx("span",{className:"quick-action-meta",children:"S"})]}),h.jsxs("button",{className:"quick-action",type:"button",onClick:d,"aria-label":"Open command palette","data-help":!0,"data-help-title":"Command palette","data-help-body":"Search every action and jump instantly.","data-help-placement":"left",children:[h.jsx("span",{className:"quick-action-label",children:"Command"}),h.jsx("span",{className:"quick-action-meta",children:"Cmd+K"})]}),h.jsxs("button",{className:"quick-action",type:"button",onClick:c,"aria-label":"Start guided tour","data-help":!0,"data-help-title":"Guided tour","data-help-body":"Walk the interface with a curated tour.","data-help-placement":"left",children:[h.jsx("span",{className:"quick-action-label",children:"Tour"}),h.jsx("span",{className:"quick-action-meta",children:"Guide"})]}),h.jsxs("button",{className:`quick-action ${r?"active":""}`,type:"button",onClick:m,"aria-label":"Toggle explain mode","data-help":!0,"data-help-title":"Explain mode","data-help-body":"Toggle contextual overlays for every control.","data-help-placement":"left",children:[h.jsx("span",{className:"quick-action-label",children:"Explain"}),h.jsx("span",{className:"quick-action-meta",children:r?"On":"Off"})]}),h.jsxs("button",{className:"quick-action",type:"button",onClick:v,"aria-label":"Jump to bottleneck","data-help":!0,"data-help-title":"Bottleneck jump","data-help-body":"Focus instantly on the slowest step.","data-help-placement":"left",children:[h.jsx("span",{className:"quick-action-label",children:"Bottleneck"}),h.jsx("span",{className:"quick-action-meta",children:"Latency"})]}),h.jsxs("button",{className:"quick-action",type:"button",onClick:f,"aria-label":"Show shortcuts","data-help":!0,"data-help-title":"Shortcuts","data-help-body":"See the full keyboard map.","data-help-placement":"left",children:[h.jsx("span",{className:"quick-action-label",children:"Shortcuts"}),h.jsx("span",{className:"quick-action-meta",children:"?"})]})]}):h.jsxs("button",{className:"quick-actions-toggle",type:"button",onClick:s,title:"Open quick actions","aria-expanded":"false","data-help":!0,"data-tour":"quick-actions","data-help-title":"Quick actions","data-help-body":"Open the dock to access demos, shortcuts, and instant actions.","data-help-placement":"left",children:[h.jsx("span",{className:"quick-actions-toggle-label",children:"Actions"}),h.jsx("span",{className:"quick-actions-toggle-meta",children:"Dock"})]})}function fI({active:e,label:t,step:n,total:r,onStop:i,onRestart:a}){if(!e)return null;const s=r>0?(n+1)/r*100:0;return h.jsxs("div",{className:"story-banner",role:"status","aria-live":"polite",children:[h.jsxs("div",{className:"story-banner-main",children:[h.jsx("div",{className:"story-banner-title",children:"Story mode"}),h.jsx("div",{className:"story-banner-step",children:t})]}),h.jsxs("div",{className:"story-banner-actions",children:[h.jsxs("span",{className:"story-banner-count",children:[Math.min(n+1,r),"/",r]}),h.jsx("button",{className:"ghost-button",type:"button",onClick:a,children:"Restart"}),h.jsx("button",{className:"primary-button",type:"button",onClick:i,children:"Stop"})]}),h.jsx("div",{className:"story-banner-progress",children:h.jsx("span",{style:{width:`${s}%`}})})]})}const UC=S.createContext({});function hI(e){const t=S.useRef(null);return t.current===null&&(t.current=e()),t.current}const ty=S.createContext(null),GC=S.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});function pI(e=!0){const t=S.useContext(ty);if(t===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:i}=t,a=S.useId();S.useEffect(()=>{e&&i(a)},[e]);const s=S.useCallback(()=>e&&r&&r(a),[a,r,e]);return!n&&r?[!1,s]:[!0]}const ny=typeof window<"u",mI=ny?S.useLayoutEffect:S.useEffect,wt=e=>e;let HC=wt;function ry(e){let t;return()=>(t===void 0&&(t=e()),t)}const Oi=(e,t,n)=>{const r=t-e;return r===0?1:(n-e)/r},Sn=e=>e*1e3,_n=e=>e/1e3,vI={useManualTiming:!1};function yI(e){let t=new Set,n=new Set,r=!1,i=!1;const a=new WeakSet;let s={delta:0,timestamp:0,isProcessing:!1};function o(u){a.has(u)&&(l.schedule(u),e()),u(s)}const l={schedule:(u,c=!1,d=!1)=>{const m=d&&r?t:n;return c&&a.add(u),m.has(u)||m.add(u),u},cancel:u=>{n.delete(u),a.delete(u)},process:u=>{if(s=u,r){i=!0;return}r=!0,[t,n]=[n,t],t.forEach(o),t.clear(),r=!1,i&&(i=!1,l.process(u))}};return l}const Ys=["read","resolveKeyframes","update","preRender","render","postRender"],gI=40;function WC(e,t){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},a=()=>n=!0,s=Ys.reduce((y,g)=>(y[g]=yI(a),y),{}),{read:o,resolveKeyframes:l,update:u,preRender:c,render:d,postRender:f}=s,m=()=>{const y=performance.now();n=!1,i.delta=r?1e3/60:Math.max(Math.min(y-i.timestamp,gI),1),i.timestamp=y,i.isProcessing=!0,o.process(i),l.process(i),u.process(i),c.process(i),d.process(i),f.process(i),i.isProcessing=!1,n&&t&&(r=!1,e(m))},v=()=>{n=!0,r=!0,i.isProcessing||e(m)};return{schedule:Ys.reduce((y,g)=>{const w=s[g];return y[g]=(_,E=!1,T=!1)=>(n||v(),w.schedule(_,E,T)),y},{}),cancel:y=>{for(let g=0;g<Ys.length;g++)s[Ys[g]].cancel(y)},state:i,steps:s}}const{schedule:be,cancel:or,state:We,steps:Ou}=WC(typeof requestAnimationFrame<"u"?requestAnimationFrame:wt,!0),KC=S.createContext({strict:!1}),H0={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},qi={};for(const e in H0)qi[e]={isEnabled:t=>H0[e].some(n=>!!t[n])};function bI(e){for(const t in e)qi[t]={...qi[t],...e[t]}}const wI=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function $o(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||wI.has(e)}let YC=e=>!$o(e);function xI(e){e&&(YC=t=>t.startsWith("on")?!$o(t):e(t))}try{xI(require("@emotion/is-prop-valid").default)}catch{}function SI(e,t,n){const r={};for(const i in e)i==="values"&&typeof e.values=="object"||(YC(i)||n===!0&&$o(i)||!t&&!$o(i)||e.draggable&&i.startsWith("onDrag"))&&(r[i]=e[i]);return r}function _I(e){if(typeof Proxy>"u")return e;const t=new Map,n=(...r)=>e(...r);return new Proxy(n,{get:(r,i)=>i==="create"?e:(t.has(i)||t.set(i,e(i)),t.get(i))})}const vl=S.createContext({});function rs(e){return typeof e=="string"||Array.isArray(e)}function yl(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}const iy=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],ay=["initial",...iy];function gl(e){return yl(e.animate)||ay.some(t=>rs(e[t]))}function QC(e){return!!(gl(e)||e.variants)}function kI(e,t){if(gl(e)){const{initial:n,animate:r}=e;return{initial:n===!1||rs(n)?n:void 0,animate:rs(r)?r:void 0}}return e.inherit!==!1?t:{}}function EI(e){const{initial:t,animate:n}=kI(e,S.useContext(vl));return S.useMemo(()=>({initial:t,animate:n}),[W0(t),W0(n)])}function W0(e){return Array.isArray(e)?e.join(" "):e}const CI=Symbol.for("motionComponentSymbol");function bi(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function TI(e,t,n){return S.useCallback(r=>{r&&e.onMount&&e.onMount(r),t&&(r?t.mount(r):t.unmount()),n&&(typeof n=="function"?n(r):bi(n)&&(n.current=r))},[t])}const sy=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),jI="framerAppearId",XC="data-"+sy(jI),{schedule:oy}=WC(queueMicrotask,!1),JC=S.createContext({});function MI(e,t,n,r,i){var a,s;const{visualElement:o}=S.useContext(vl),l=S.useContext(KC),u=S.useContext(ty),c=S.useContext(GC).reducedMotion,d=S.useRef(null);r=r||l.renderer,!d.current&&r&&(d.current=r(e,{visualState:t,parent:o,props:n,presenceContext:u,blockInitialAnimation:u?u.initial===!1:!1,reducedMotionConfig:c}));const f=d.current,m=S.useContext(JC);f&&!f.projection&&i&&(f.type==="html"||f.type==="svg")&&PI(d.current,n,i,m);const v=S.useRef(!1);S.useInsertionEffect(()=>{f&&v.current&&f.update(n,u)});const p=n[XC],x=S.useRef(!!p&&!(!((a=window.MotionHandoffIsComplete)===null||a===void 0)&&a.call(window,p))&&((s=window.MotionHasOptimisedAnimation)===null||s===void 0?void 0:s.call(window,p)));return mI(()=>{f&&(v.current=!0,window.MotionIsMounted=!0,f.updateFeatures(),oy.render(f.render),x.current&&f.animationState&&f.animationState.animateChanges())}),S.useEffect(()=>{f&&(!x.current&&f.animationState&&f.animationState.animateChanges(),x.current&&(queueMicrotask(()=>{var y;(y=window.MotionHandoffMarkAsComplete)===null||y===void 0||y.call(window,p)}),x.current=!1))}),f}function PI(e,t,n,r){const{layoutId:i,layout:a,drag:s,dragConstraints:o,layoutScroll:l,layoutRoot:u}=t;e.projection=new n(e.latestValues,t["data-framer-portal-id"]?void 0:ZC(e.parent)),e.projection.setOptions({layoutId:i,layout:a,alwaysMeasureLayout:!!s||o&&bi(o),visualElement:e,animationType:typeof a=="string"?a:"both",initialPromotionConfig:r,layoutScroll:l,layoutRoot:u})}function ZC(e){if(e)return e.options.allowProjection!==!1?e.projection:ZC(e.parent)}function NI({preloadedFeatures:e,createVisualElement:t,useRender:n,useVisualState:r,Component:i}){var a,s;e&&bI(e);function o(u,c){let d;const f={...S.useContext(GC),...u,layoutId:RI(u)},{isStatic:m}=f,v=EI(u),p=r(u,m);if(!m&&ny){AI();const x=II(f);d=x.MeasureLayout,v.visualElement=MI(i,p,f,t,x.ProjectionNode)}return h.jsxs(vl.Provider,{value:v,children:[d&&v.visualElement?h.jsx(d,{visualElement:v.visualElement,...f}):null,n(i,u,TI(p,v.visualElement,c),p,m,v.visualElement)]})}o.displayName=`motion.${typeof i=="string"?i:`create(${(s=(a=i.displayName)!==null&&a!==void 0?a:i.name)!==null&&s!==void 0?s:""})`}`;const l=S.forwardRef(o);return l[CI]=i,l}function RI({layoutId:e}){const t=S.useContext(UC).id;return t&&e!==void 0?t+"-"+e:e}function AI(e,t){S.useContext(KC).strict}function II(e){const{drag:t,layout:n}=qi;if(!t&&!n)return{};const r={...t,...n};return{MeasureLayout:t!=null&&t.isEnabled(e)||n!=null&&n.isEnabled(e)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const DI=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function ly(e){return typeof e!="string"||e.includes("-")?!1:!!(DI.indexOf(e)>-1||/[A-Z]/u.test(e))}function K0(e){const t=[{},{}];return e==null||e.values.forEach((n,r)=>{t[0][r]=n.get(),t[1][r]=n.getVelocity()}),t}function uy(e,t,n,r){if(typeof t=="function"){const[i,a]=K0(r);t=t(n!==void 0?n:e.custom,i,a)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[i,a]=K0(r);t=t(n!==void 0?n:e.custom,i,a)}return t}const Fm=e=>Array.isArray(e),LI=e=>!!(e&&typeof e=="object"&&e.mix&&e.toValue),OI=e=>Fm(e)?e[e.length-1]||0:e,tt=e=>!!(e&&e.getVelocity);function mo(e){const t=tt(e)?e.get():e;return LI(t)?t.toValue():t}function qI({scrapeMotionValuesFromProps:e,createRenderState:t,onUpdate:n},r,i,a){const s={latestValues:FI(r,i,a,e),renderState:t()};return n&&(s.onMount=o=>n({props:r,current:o,...s}),s.onUpdate=o=>n(o)),s}const eT=e=>(t,n)=>{const r=S.useContext(vl),i=S.useContext(ty),a=()=>qI(e,t,r,i);return n?a():hI(a)};function FI(e,t,n,r){const i={},a=r(e,{});for(const f in a)i[f]=mo(a[f]);let{initial:s,animate:o}=e;const l=gl(e),u=QC(e);t&&u&&!l&&e.inherit!==!1&&(s===void 0&&(s=t.initial),o===void 0&&(o=t.animate));let c=n?n.initial===!1:!1;c=c||s===!1;const d=c?o:s;if(d&&typeof d!="boolean"&&!yl(d)){const f=Array.isArray(d)?d:[d];for(let m=0;m<f.length;m++){const v=uy(e,f[m]);if(v){const{transitionEnd:p,transition:x,...y}=v;for(const g in y){let w=y[g];if(Array.isArray(w)){const _=c?w.length-1:0;w=w[_]}w!==null&&(i[g]=w)}for(const g in p)i[g]=p[g]}}}return i}const zi=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],$r=new Set(zi),tT=e=>t=>typeof t=="string"&&t.startsWith(e),nT=tT("--"),VI=tT("var(--"),cy=e=>VI(e)?BI.test(e.split("/*")[0].trim()):!1,BI=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,rT=(e,t)=>t&&typeof e=="number"?t.transform(e):e,jn=(e,t,n)=>n>t?t:n<e?e:n,Ui={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},is={...Ui,transform:e=>jn(0,1,e)},Qs={...Ui,default:1},ps=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),$n=ps("deg"),an=ps("%"),H=ps("px"),$I=ps("vh"),zI=ps("vw"),Y0={...an,parse:e=>an.parse(e)/100,transform:e=>an.transform(e*100)},UI={borderWidth:H,borderTopWidth:H,borderRightWidth:H,borderBottomWidth:H,borderLeftWidth:H,borderRadius:H,radius:H,borderTopLeftRadius:H,borderTopRightRadius:H,borderBottomRightRadius:H,borderBottomLeftRadius:H,width:H,maxWidth:H,height:H,maxHeight:H,top:H,right:H,bottom:H,left:H,padding:H,paddingTop:H,paddingRight:H,paddingBottom:H,paddingLeft:H,margin:H,marginTop:H,marginRight:H,marginBottom:H,marginLeft:H,backgroundPositionX:H,backgroundPositionY:H},GI={rotate:$n,rotateX:$n,rotateY:$n,rotateZ:$n,scale:Qs,scaleX:Qs,scaleY:Qs,scaleZ:Qs,skew:$n,skewX:$n,skewY:$n,distance:H,translateX:H,translateY:H,translateZ:H,x:H,y:H,z:H,perspective:H,transformPerspective:H,opacity:is,originX:Y0,originY:Y0,originZ:H},Q0={...Ui,transform:Math.round},dy={...UI,...GI,zIndex:Q0,size:H,fillOpacity:is,strokeOpacity:is,numOctaves:Q0},HI={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},WI=zi.length;function KI(e,t,n){let r="",i=!0;for(let a=0;a<WI;a++){const s=zi[a],o=e[s];if(o===void 0)continue;let l=!0;if(typeof o=="number"?l=o===(s.startsWith("scale")?1:0):l=parseFloat(o)===0,!l||n){const u=rT(o,dy[s]);if(!l){i=!1;const c=HI[s]||s;r+=`${c}(${u}) `}n&&(t[s]=u)}}return r=r.trim(),n?r=n(t,i?"":r):i&&(r="none"),r}function fy(e,t,n){const{style:r,vars:i,transformOrigin:a}=e;let s=!1,o=!1;for(const l in t){const u=t[l];if($r.has(l)){s=!0;continue}else if(nT(l)){i[l]=u;continue}else{const c=rT(u,dy[l]);l.startsWith("origin")?(o=!0,a[l]=c):r[l]=c}}if(t.transform||(s||n?r.transform=KI(t,e.transform,n):r.transform&&(r.transform="none")),o){const{originX:l="50%",originY:u="50%",originZ:c=0}=a;r.transformOrigin=`${l} ${u} ${c}`}}const YI={offset:"stroke-dashoffset",array:"stroke-dasharray"},QI={offset:"strokeDashoffset",array:"strokeDasharray"};function XI(e,t,n=1,r=0,i=!0){e.pathLength=1;const a=i?YI:QI;e[a.offset]=H.transform(-r);const s=H.transform(t),o=H.transform(n);e[a.array]=`${s} ${o}`}function X0(e,t,n){return typeof e=="string"?e:H.transform(t+n*e)}function JI(e,t,n){const r=X0(t,e.x,e.width),i=X0(n,e.y,e.height);return`${r} ${i}`}function hy(e,{attrX:t,attrY:n,attrScale:r,originX:i,originY:a,pathLength:s,pathSpacing:o=1,pathOffset:l=0,...u},c,d){if(fy(e,u,d),c){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:f,style:m,dimensions:v}=e;f.transform&&(v&&(m.transform=f.transform),delete f.transform),v&&(i!==void 0||a!==void 0||m.transform)&&(m.transformOrigin=JI(v,i!==void 0?i:.5,a!==void 0?a:.5)),t!==void 0&&(f.x=t),n!==void 0&&(f.y=n),r!==void 0&&(f.scale=r),s!==void 0&&XI(f,s,o,l,!1)}const py=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),iT=()=>({...py(),attrs:{}}),my=e=>typeof e=="string"&&e.toLowerCase()==="svg";function aT(e,{style:t,vars:n},r,i){Object.assign(e.style,t,i&&i.getProjectionStyles(r));for(const a in n)e.style.setProperty(a,n[a])}const sT=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function oT(e,t,n,r){aT(e,t,void 0,r);for(const i in t.attrs)e.setAttribute(sT.has(i)?i:sy(i),t.attrs[i])}const zo={};function ZI(e){Object.assign(zo,e)}function lT(e,{layout:t,layoutId:n}){return $r.has(e)||e.startsWith("origin")||(t||n!==void 0)&&(!!zo[e]||e==="opacity")}function vy(e,t,n){var r;const{style:i}=e,a={};for(const s in i)(tt(i[s])||t.style&&tt(t.style[s])||lT(s,e)||((r=n==null?void 0:n.getValue(s))===null||r===void 0?void 0:r.liveStyle)!==void 0)&&(a[s]=i[s]);return a}function uT(e,t,n){const r=vy(e,t,n);for(const i in e)if(tt(e[i])||tt(t[i])){const a=zi.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[a]=e[i]}return r}function eD(e,t){try{t.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{t.dimensions={x:0,y:0,width:0,height:0}}}const J0=["x","y","width","height","cx","cy","r"],tD={useVisualState:eT({scrapeMotionValuesFromProps:uT,createRenderState:iT,onUpdate:({props:e,prevProps:t,current:n,renderState:r,latestValues:i})=>{if(!n)return;let a=!!e.drag;if(!a){for(const o in i)if($r.has(o)){a=!0;break}}if(!a)return;let s=!t;if(t)for(let o=0;o<J0.length;o++){const l=J0[o];e[l]!==t[l]&&(s=!0)}s&&be.read(()=>{eD(n,r),be.render(()=>{hy(r,i,my(n.tagName),e.transformTemplate),oT(n,r)})})}})},nD={useVisualState:eT({scrapeMotionValuesFromProps:vy,createRenderState:py})};function cT(e,t,n){for(const r in t)!tt(t[r])&&!lT(r,n)&&(e[r]=t[r])}function rD({transformTemplate:e},t){return S.useMemo(()=>{const n=py();return fy(n,t,e),Object.assign({},n.vars,n.style)},[t])}function iD(e,t){const n=e.style||{},r={};return cT(r,n,e),Object.assign(r,rD(e,t)),r}function aD(e,t){const n={},r=iD(e,t);return e.drag&&e.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=r,n}function sD(e,t,n,r){const i=S.useMemo(()=>{const a=iT();return hy(a,t,my(r),e.transformTemplate),{...a.attrs,style:{...a.style}}},[t]);if(e.style){const a={};cT(a,e.style,e),i.style={...a,...i.style}}return i}function oD(e=!1){return(n,r,i,{latestValues:a},s)=>{const l=(ly(n)?sD:aD)(r,a,s,n),u=SI(r,typeof n=="string",e),c=n!==S.Fragment?{...u,...l,ref:i}:{},{children:d}=r,f=S.useMemo(()=>tt(d)?d.get():d,[d]);return S.createElement(n,{...c,children:f})}}function lD(e,t){return function(r,{forwardMotionProps:i}={forwardMotionProps:!1}){const s={...ly(r)?tD:nD,preloadedFeatures:e,useRender:oD(i),createVisualElement:t,Component:r};return NI(s)}}function dT(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}function bl(e,t,n){const r=e.getProps();return uy(r,t,n!==void 0?n:r.custom,e)}const uD=ry(()=>window.ScrollTimeline!==void 0);class cD{constructor(t){this.stop=()=>this.runAll("stop"),this.animations=t.filter(Boolean)}get finished(){return Promise.all(this.animations.map(t=>"finished"in t?t.finished:t))}getAll(t){return this.animations[0][t]}setAll(t,n){for(let r=0;r<this.animations.length;r++)this.animations[r][t]=n}attachTimeline(t,n){const r=this.animations.map(i=>{if(uD()&&i.attachTimeline)return i.attachTimeline(t);if(typeof n=="function")return n(i)});return()=>{r.forEach((i,a)=>{i&&i(),this.animations[a].stop()})}}get time(){return this.getAll("time")}set time(t){this.setAll("time",t)}get speed(){return this.getAll("speed")}set speed(t){this.setAll("speed",t)}get startTime(){return this.getAll("startTime")}get duration(){let t=0;for(let n=0;n<this.animations.length;n++)t=Math.max(t,this.animations[n].duration);return t}runAll(t){this.animations.forEach(n=>n[t]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class dD extends cD{then(t,n){return Promise.all(this.animations).then(t).catch(n)}}function yy(e,t){return e?e[t]||e.default||e:void 0}const Vm=2e4;function fT(e){let t=0;const n=50;let r=e.next(t);for(;!r.done&&t<Vm;)t+=n,r=e.next(t);return t>=Vm?1/0:t}function gy(e){return typeof e=="function"}function Z0(e,t){e.timeline=t,e.onfinish=null}const by=e=>Array.isArray(e)&&typeof e[0]=="number",fD={linearEasing:void 0};function hD(e,t){const n=ry(e);return()=>{var r;return(r=fD[t])!==null&&r!==void 0?r:n()}}const Uo=hD(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),hT=(e,t,n=10)=>{let r="";const i=Math.max(Math.round(t/n),2);for(let a=0;a<i;a++)r+=e(Oi(0,i-1,a))+", ";return`linear(${r.substring(0,r.length-2)})`};function pT(e){return!!(typeof e=="function"&&Uo()||!e||typeof e=="string"&&(e in Bm||Uo())||by(e)||Array.isArray(e)&&e.every(pT))}const ga=([e,t,n,r])=>`cubic-bezier(${e}, ${t}, ${n}, ${r})`,Bm={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:ga([0,.65,.55,1]),circOut:ga([.55,0,1,.45]),backIn:ga([.31,.01,.66,-.59]),backOut:ga([.33,1.53,.69,.99])};function mT(e,t){if(e)return typeof e=="function"&&Uo()?hT(e,t):by(e)?ga(e):Array.isArray(e)?e.map(n=>mT(n,t)||Bm.easeOut):Bm[e]}const Vt={x:!1,y:!1};function vT(){return Vt.x||Vt.y}function pD(e,t,n){var r;if(e instanceof Element)return[e];if(typeof e=="string"){let i=document;const a=(r=void 0)!==null&&r!==void 0?r:i.querySelectorAll(e);return a?Array.from(a):[]}return Array.from(e)}function yT(e,t){const n=pD(e),r=new AbortController,i={passive:!0,...t,signal:r.signal};return[n,i,()=>r.abort()]}function eb(e){return t=>{t.pointerType==="touch"||vT()||e(t)}}function mD(e,t,n={}){const[r,i,a]=yT(e,n),s=eb(o=>{const{target:l}=o,u=t(o);if(typeof u!="function"||!l)return;const c=eb(d=>{u(d),l.removeEventListener("pointerleave",c)});l.addEventListener("pointerleave",c,i)});return r.forEach(o=>{o.addEventListener("pointerenter",s,i)}),a}const gT=(e,t)=>t?e===t?!0:gT(e,t.parentElement):!1,wy=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1,vD=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function yD(e){return vD.has(e.tagName)||e.tabIndex!==-1}const ba=new WeakSet;function tb(e){return t=>{t.key==="Enter"&&e(t)}}function qu(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const gD=(e,t)=>{const n=e.currentTarget;if(!n)return;const r=tb(()=>{if(ba.has(n))return;qu(n,"down");const i=tb(()=>{qu(n,"up")}),a=()=>qu(n,"cancel");n.addEventListener("keyup",i,t),n.addEventListener("blur",a,t)});n.addEventListener("keydown",r,t),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),t)};function nb(e){return wy(e)&&!vT()}function bD(e,t,n={}){const[r,i,a]=yT(e,n),s=o=>{const l=o.currentTarget;if(!nb(o)||ba.has(l))return;ba.add(l);const u=t(o),c=(m,v)=>{window.removeEventListener("pointerup",d),window.removeEventListener("pointercancel",f),!(!nb(m)||!ba.has(l))&&(ba.delete(l),typeof u=="function"&&u(m,{success:v}))},d=m=>{c(m,n.useGlobalTarget||gT(l,m.target))},f=m=>{c(m,!1)};window.addEventListener("pointerup",d,i),window.addEventListener("pointercancel",f,i)};return r.forEach(o=>{!yD(o)&&o.getAttribute("tabindex")===null&&(o.tabIndex=0),(n.useGlobalTarget?window:o).addEventListener("pointerdown",s,i),o.addEventListener("focus",u=>gD(u,i),i)}),a}function wD(e){return e==="x"||e==="y"?Vt[e]?null:(Vt[e]=!0,()=>{Vt[e]=!1}):Vt.x||Vt.y?null:(Vt.x=Vt.y=!0,()=>{Vt.x=Vt.y=!1})}const bT=new Set(["width","height","top","left","right","bottom",...zi]);let vo;function xD(){vo=void 0}const sn={now:()=>(vo===void 0&&sn.set(We.isProcessing||vI.useManualTiming?We.timestamp:performance.now()),vo),set:e=>{vo=e,queueMicrotask(xD)}};function xy(e,t){e.indexOf(t)===-1&&e.push(t)}function Sy(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}class _y{constructor(){this.subscriptions=[]}add(t){return xy(this.subscriptions,t),()=>Sy(this.subscriptions,t)}notify(t,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](t,n,r);else for(let a=0;a<i;a++){const s=this.subscriptions[a];s&&s(t,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function wT(e,t){return t?e*(1e3/t):0}const rb=30,SD=e=>!isNaN(parseFloat(e));class _D{constructor(t,n={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,i=!0)=>{const a=sn.now();this.updatedAt!==a&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(t),this.owner=n.owner}setCurrent(t){this.current=t,this.updatedAt=sn.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=SD(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,n){this.events[t]||(this.events[t]=new _y);const r=this.events[t].add(n);return t==="change"?()=>{r(),be.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,n){this.passiveEffect=t,this.stopPassiveEffect=n}set(t,n=!0){!n||!this.passiveEffect?this.updateAndNotify(t,n):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-r}jump(t,n=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=sn.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>rb)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,rb);return wT(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(t){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=t(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function as(e,t){return new _D(e,t)}function kD(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,as(n))}function ED(e,t){const n=bl(e,t);let{transitionEnd:r={},transition:i={},...a}=n||{};a={...a,...r};for(const s in a){const o=OI(a[s]);kD(e,s,o)}}function CD(e){return!!(tt(e)&&e.add)}function $m(e,t){const n=e.getValue("willChange");if(CD(n))return n.add(t)}function xT(e){return e.props[XC]}const ST=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,TD=1e-7,jD=12;function MD(e,t,n,r,i){let a,s,o=0;do s=t+(n-t)/2,a=ST(s,r,i)-e,a>0?n=s:t=s;while(Math.abs(a)>TD&&++o<jD);return s}function ms(e,t,n,r){if(e===t&&n===r)return wt;const i=a=>MD(a,0,1,e,n);return a=>a===0||a===1?a:ST(i(a),t,r)}const _T=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,kT=e=>t=>1-e(1-t),ET=ms(.33,1.53,.69,.99),ky=kT(ET),CT=_T(ky),TT=e=>(e*=2)<1?.5*ky(e):.5*(2-Math.pow(2,-10*(e-1))),Ey=e=>1-Math.sin(Math.acos(e)),jT=kT(Ey),MT=_T(Ey),PT=e=>/^0[^.\s]+$/u.test(e);function PD(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||PT(e):!0}const La=e=>Math.round(e*1e5)/1e5,Cy=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function ND(e){return e==null}const RD=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Ty=(e,t)=>n=>!!(typeof n=="string"&&RD.test(n)&&n.startsWith(e)||t&&!ND(n)&&Object.prototype.hasOwnProperty.call(n,t)),NT=(e,t,n)=>r=>{if(typeof r!="string")return r;const[i,a,s,o]=r.match(Cy);return{[e]:parseFloat(i),[t]:parseFloat(a),[n]:parseFloat(s),alpha:o!==void 0?parseFloat(o):1}},AD=e=>jn(0,255,e),Fu={...Ui,transform:e=>Math.round(AD(e))},Mr={test:Ty("rgb","red"),parse:NT("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:r=1})=>"rgba("+Fu.transform(e)+", "+Fu.transform(t)+", "+Fu.transform(n)+", "+La(is.transform(r))+")"};function ID(e){let t="",n="",r="",i="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),r=e.substring(5,7),i=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),r=e.substring(3,4),i=e.substring(4,5),t+=t,n+=n,r+=r,i+=i),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const zm={test:Ty("#"),parse:ID,transform:Mr.transform},wi={test:Ty("hsl","hue"),parse:NT("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:r=1})=>"hsla("+Math.round(e)+", "+an.transform(La(t))+", "+an.transform(La(n))+", "+La(is.transform(r))+")"},Ze={test:e=>Mr.test(e)||zm.test(e)||wi.test(e),parse:e=>Mr.test(e)?Mr.parse(e):wi.test(e)?wi.parse(e):zm.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?Mr.transform(e):wi.transform(e)},DD=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function LD(e){var t,n;return isNaN(e)&&typeof e=="string"&&(((t=e.match(Cy))===null||t===void 0?void 0:t.length)||0)+(((n=e.match(DD))===null||n===void 0?void 0:n.length)||0)>0}const RT="number",AT="color",OD="var",qD="var(",ib="${}",FD=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function ss(e){const t=e.toString(),n=[],r={color:[],number:[],var:[]},i=[];let a=0;const o=t.replace(FD,l=>(Ze.test(l)?(r.color.push(a),i.push(AT),n.push(Ze.parse(l))):l.startsWith(qD)?(r.var.push(a),i.push(OD),n.push(l)):(r.number.push(a),i.push(RT),n.push(parseFloat(l))),++a,ib)).split(ib);return{values:n,split:o,indexes:r,types:i}}function IT(e){return ss(e).values}function DT(e){const{split:t,types:n}=ss(e),r=t.length;return i=>{let a="";for(let s=0;s<r;s++)if(a+=t[s],i[s]!==void 0){const o=n[s];o===RT?a+=La(i[s]):o===AT?a+=Ze.transform(i[s]):a+=i[s]}return a}}const VD=e=>typeof e=="number"?0:e;function BD(e){const t=IT(e);return DT(e)(t.map(VD))}const lr={test:LD,parse:IT,createTransformer:DT,getAnimatableNone:BD},$D=new Set(["brightness","contrast","saturate","opacity"]);function zD(e){const[t,n]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[r]=n.match(Cy)||[];if(!r)return e;const i=n.replace(r,"");let a=$D.has(t)?1:0;return r!==n&&(a*=100),t+"("+a+i+")"}const UD=/\b([a-z-]*)\(.*?\)/gu,Um={...lr,getAnimatableNone:e=>{const t=e.match(UD);return t?t.map(zD).join(" "):e}},GD={...dy,color:Ze,backgroundColor:Ze,outlineColor:Ze,fill:Ze,stroke:Ze,borderColor:Ze,borderTopColor:Ze,borderRightColor:Ze,borderBottomColor:Ze,borderLeftColor:Ze,filter:Um,WebkitFilter:Um},jy=e=>GD[e];function LT(e,t){let n=jy(e);return n!==Um&&(n=lr),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const HD=new Set(["auto","none","0"]);function WD(e,t,n){let r=0,i;for(;r<e.length&&!i;){const a=e[r];typeof a=="string"&&!HD.has(a)&&ss(a).values.length&&(i=e[r]),r++}if(i&&n)for(const a of t)e[a]=LT(n,i)}const ab=e=>e===Ui||e===H,sb=(e,t)=>parseFloat(e.split(", ")[t]),ob=(e,t)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const i=r.match(/^matrix3d\((.+)\)$/u);if(i)return sb(i[1],t);{const a=r.match(/^matrix\((.+)\)$/u);return a?sb(a[1],e):0}},KD=new Set(["x","y","z"]),YD=zi.filter(e=>!KD.has(e));function QD(e){const t=[];return YD.forEach(n=>{const r=e.getValue(n);r!==void 0&&(t.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),t}const Fi={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:ob(4,13),y:ob(5,14)};Fi.translateX=Fi.x;Fi.translateY=Fi.y;const Ar=new Set;let Gm=!1,Hm=!1;function OT(){if(Hm){const e=Array.from(Ar).filter(r=>r.needsMeasurement),t=new Set(e.map(r=>r.element)),n=new Map;t.forEach(r=>{const i=QD(r);i.length&&(n.set(r,i),r.render())}),e.forEach(r=>r.measureInitialState()),t.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([a,s])=>{var o;(o=r.getValue(a))===null||o===void 0||o.set(s)})}),e.forEach(r=>r.measureEndState()),e.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}Hm=!1,Gm=!1,Ar.forEach(e=>e.complete()),Ar.clear()}function qT(){Ar.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(Hm=!0)})}function XD(){qT(),OT()}class My{constructor(t,n,r,i,a,s=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...t],this.onComplete=n,this.name=r,this.motionValue=i,this.element=a,this.isAsync=s}scheduleResolve(){this.isScheduled=!0,this.isAsync?(Ar.add(this),Gm||(Gm=!0,be.read(qT),be.resolveKeyframes(OT))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:n,element:r,motionValue:i}=this;for(let a=0;a<t.length;a++)if(t[a]===null)if(a===0){const s=i==null?void 0:i.get(),o=t[t.length-1];if(s!==void 0)t[0]=s;else if(r&&n){const l=r.readValue(n,o);l!=null&&(t[0]=l)}t[0]===void 0&&(t[0]=o),i&&s===void 0&&i.set(t[0])}else t[a]=t[a-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),Ar.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,Ar.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const FT=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e),JD=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function ZD(e){const t=JD.exec(e);if(!t)return[,];const[,n,r,i]=t;return[`--${n??r}`,i]}function VT(e,t,n=1){const[r,i]=ZD(e);if(!r)return;const a=window.getComputedStyle(t).getPropertyValue(r);if(a){const s=a.trim();return FT(s)?parseFloat(s):s}return cy(i)?VT(i,t,n+1):i}const BT=e=>t=>t.test(e),eL={test:e=>e==="auto",parse:e=>e},$T=[Ui,H,an,$n,zI,$I,eL],lb=e=>$T.find(BT(e));class zT extends My{constructor(t,n,r,i,a){super(t,n,r,i,a,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let l=0;l<t.length;l++){let u=t[l];if(typeof u=="string"&&(u=u.trim(),cy(u))){const c=VT(u,n.current);c!==void 0&&(t[l]=c),l===t.length-1&&(this.finalKeyframe=u)}}if(this.resolveNoneKeyframes(),!bT.has(r)||t.length!==2)return;const[i,a]=t,s=lb(i),o=lb(a);if(s!==o)if(ab(s)&&ab(o))for(let l=0;l<t.length;l++){const u=t[l];typeof u=="string"&&(t[l]=parseFloat(u))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:n}=this,r=[];for(let i=0;i<t.length;i++)PD(t[i])&&r.push(i);r.length&&WD(t,r,n)}measureInitialState(){const{element:t,unresolvedKeyframes:n,name:r}=this;if(!t||!t.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Fi[r](t.measureViewportBox(),window.getComputedStyle(t.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&t.getValue(r,i).jump(i,!1)}measureEndState(){var t;const{element:n,name:r,unresolvedKeyframes:i}=this;if(!n||!n.current)return;const a=n.getValue(r);a&&a.jump(this.measuredOrigin,!1);const s=i.length-1,o=i[s];i[s]=Fi[r](n.measureViewportBox(),window.getComputedStyle(n.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),!((t=this.removedTransforms)===null||t===void 0)&&t.length&&this.removedTransforms.forEach(([l,u])=>{n.getValue(l).set(u)}),this.resolveNoneKeyframes()}}const ub=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(lr.test(e)||e==="0")&&!e.startsWith("url("));function tL(e){const t=e[0];if(e.length===1)return!0;for(let n=0;n<e.length;n++)if(e[n]!==t)return!0}function nL(e,t,n,r){const i=e[0];if(i===null)return!1;if(t==="display"||t==="visibility")return!0;const a=e[e.length-1],s=ub(i,t),o=ub(a,t);return!s||!o?!1:tL(e)||(n==="spring"||gy(n))&&r}const rL=e=>e!==null;function wl(e,{repeat:t,repeatType:n="loop"},r){const i=e.filter(rL),a=t&&n!=="loop"&&t%2===1?0:i.length-1;return!a||r===void 0?i[a]:r}const iL=40;class UT{constructor({autoplay:t=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:a=0,repeatType:s="loop",...o}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=sn.now(),this.options={autoplay:t,delay:n,type:r,repeat:i,repeatDelay:a,repeatType:s,...o},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>iL?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&XD(),this._resolved}onKeyframesResolved(t,n){this.resolvedAt=sn.now(),this.hasAttemptedResolve=!0;const{name:r,type:i,velocity:a,delay:s,onComplete:o,onUpdate:l,isGenerator:u}=this.options;if(!u&&!nL(t,r,i,a))if(s)this.options.duration=0;else{l&&l(wl(t,this.options,n)),o&&o(),this.resolveFinishedPromise();return}const c=this.initPlayback(t,n);c!==!1&&(this._resolved={keyframes:t,finalKeyframe:n,...c},this.onPostResolved())}onPostResolved(){}then(t,n){return this.currentFinishedPromise.then(t,n)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(t=>{this.resolveFinishedPromise=t})}}const ke=(e,t,n)=>e+(t-e)*n;function Vu(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function aL({hue:e,saturation:t,lightness:n,alpha:r}){e/=360,t/=100,n/=100;let i=0,a=0,s=0;if(!t)i=a=s=n;else{const o=n<.5?n*(1+t):n+t-n*t,l=2*n-o;i=Vu(l,o,e+1/3),a=Vu(l,o,e),s=Vu(l,o,e-1/3)}return{red:Math.round(i*255),green:Math.round(a*255),blue:Math.round(s*255),alpha:r}}function Go(e,t){return n=>n>0?t:e}const Bu=(e,t,n)=>{const r=e*e,i=n*(t*t-r)+r;return i<0?0:Math.sqrt(i)},sL=[zm,Mr,wi],oL=e=>sL.find(t=>t.test(e));function cb(e){const t=oL(e);if(!t)return!1;let n=t.parse(e);return t===wi&&(n=aL(n)),n}const db=(e,t)=>{const n=cb(e),r=cb(t);if(!n||!r)return Go(e,t);const i={...n};return a=>(i.red=Bu(n.red,r.red,a),i.green=Bu(n.green,r.green,a),i.blue=Bu(n.blue,r.blue,a),i.alpha=ke(n.alpha,r.alpha,a),Mr.transform(i))},lL=(e,t)=>n=>t(e(n)),vs=(...e)=>e.reduce(lL),Wm=new Set(["none","hidden"]);function uL(e,t){return Wm.has(e)?n=>n<=0?e:t:n=>n>=1?t:e}function cL(e,t){return n=>ke(e,t,n)}function Py(e){return typeof e=="number"?cL:typeof e=="string"?cy(e)?Go:Ze.test(e)?db:hL:Array.isArray(e)?GT:typeof e=="object"?Ze.test(e)?db:dL:Go}function GT(e,t){const n=[...e],r=n.length,i=e.map((a,s)=>Py(a)(a,t[s]));return a=>{for(let s=0;s<r;s++)n[s]=i[s](a);return n}}function dL(e,t){const n={...e,...t},r={};for(const i in n)e[i]!==void 0&&t[i]!==void 0&&(r[i]=Py(e[i])(e[i],t[i]));return i=>{for(const a in r)n[a]=r[a](i);return n}}function fL(e,t){var n;const r=[],i={color:0,var:0,number:0};for(let a=0;a<t.values.length;a++){const s=t.types[a],o=e.indexes[s][i[s]],l=(n=e.values[o])!==null&&n!==void 0?n:0;r[a]=l,i[s]++}return r}const hL=(e,t)=>{const n=lr.createTransformer(t),r=ss(e),i=ss(t);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?Wm.has(e)&&!i.values.length||Wm.has(t)&&!r.values.length?uL(e,t):vs(GT(fL(r,i),i.values),n):Go(e,t)};function HT(e,t,n){return typeof e=="number"&&typeof t=="number"&&typeof n=="number"?ke(e,t,n):Py(e)(e,t)}const pL=5;function WT(e,t,n){const r=Math.max(t-pL,0);return wT(n-e(r),t-r)}const Pe={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},$u=.001;function mL({duration:e=Pe.duration,bounce:t=Pe.bounce,velocity:n=Pe.velocity,mass:r=Pe.mass}){let i,a,s=1-t;s=jn(Pe.minDamping,Pe.maxDamping,s),e=jn(Pe.minDuration,Pe.maxDuration,_n(e)),s<1?(i=u=>{const c=u*s,d=c*e,f=c-n,m=Km(u,s),v=Math.exp(-d);return $u-f/m*v},a=u=>{const d=u*s*e,f=d*n+n,m=Math.pow(s,2)*Math.pow(u,2)*e,v=Math.exp(-d),p=Km(Math.pow(u,2),s);return(-i(u)+$u>0?-1:1)*((f-m)*v)/p}):(i=u=>{const c=Math.exp(-u*e),d=(u-n)*e+1;return-$u+c*d},a=u=>{const c=Math.exp(-u*e),d=(n-u)*(e*e);return c*d});const o=5/e,l=yL(i,a,o);if(e=Sn(e),isNaN(l))return{stiffness:Pe.stiffness,damping:Pe.damping,duration:e};{const u=Math.pow(l,2)*r;return{stiffness:u,damping:s*2*Math.sqrt(r*u),duration:e}}}const vL=12;function yL(e,t,n){let r=n;for(let i=1;i<vL;i++)r=r-e(r)/t(r);return r}function Km(e,t){return e*Math.sqrt(1-t*t)}const gL=["duration","bounce"],bL=["stiffness","damping","mass"];function fb(e,t){return t.some(n=>e[n]!==void 0)}function wL(e){let t={velocity:Pe.velocity,stiffness:Pe.stiffness,damping:Pe.damping,mass:Pe.mass,isResolvedFromDuration:!1,...e};if(!fb(e,bL)&&fb(e,gL))if(e.visualDuration){const n=e.visualDuration,r=2*Math.PI/(n*1.2),i=r*r,a=2*jn(.05,1,1-(e.bounce||0))*Math.sqrt(i);t={...t,mass:Pe.mass,stiffness:i,damping:a}}else{const n=mL(e);t={...t,...n,mass:Pe.mass},t.isResolvedFromDuration=!0}return t}function KT(e=Pe.visualDuration,t=Pe.bounce){const n=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:r,restDelta:i}=n;const a=n.keyframes[0],s=n.keyframes[n.keyframes.length-1],o={done:!1,value:a},{stiffness:l,damping:u,mass:c,duration:d,velocity:f,isResolvedFromDuration:m}=wL({...n,velocity:-_n(n.velocity||0)}),v=f||0,p=u/(2*Math.sqrt(l*c)),x=s-a,y=_n(Math.sqrt(l/c)),g=Math.abs(x)<5;r||(r=g?Pe.restSpeed.granular:Pe.restSpeed.default),i||(i=g?Pe.restDelta.granular:Pe.restDelta.default);let w;if(p<1){const E=Km(y,p);w=T=>{const j=Math.exp(-p*y*T);return s-j*((v+p*y*x)/E*Math.sin(E*T)+x*Math.cos(E*T))}}else if(p===1)w=E=>s-Math.exp(-y*E)*(x+(v+y*x)*E);else{const E=y*Math.sqrt(p*p-1);w=T=>{const j=Math.exp(-p*y*T),C=Math.min(E*T,300);return s-j*((v+p*y*x)*Math.sinh(C)+E*x*Math.cosh(C))/E}}const _={calculatedDuration:m&&d||null,next:E=>{const T=w(E);if(m)o.done=E>=d;else{let j=0;p<1&&(j=E===0?Sn(v):WT(w,E,T));const C=Math.abs(j)<=r,M=Math.abs(s-T)<=i;o.done=C&&M}return o.value=o.done?s:T,o},toString:()=>{const E=Math.min(fT(_),Vm),T=hT(j=>_.next(E*j).value,E,30);return E+"ms "+T}};return _}function hb({keyframes:e,velocity:t=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:a=500,modifyTarget:s,min:o,max:l,restDelta:u=.5,restSpeed:c}){const d=e[0],f={done:!1,value:d},m=C=>o!==void 0&&C<o||l!==void 0&&C>l,v=C=>o===void 0?l:l===void 0||Math.abs(o-C)<Math.abs(l-C)?o:l;let p=n*t;const x=d+p,y=s===void 0?x:s(x);y!==x&&(p=y-d);const g=C=>-p*Math.exp(-C/r),w=C=>y+g(C),_=C=>{const M=g(C),P=w(C);f.done=Math.abs(M)<=u,f.value=f.done?y:P};let E,T;const j=C=>{m(f.value)&&(E=C,T=KT({keyframes:[f.value,v(f.value)],velocity:WT(w,C,f.value),damping:i,stiffness:a,restDelta:u,restSpeed:c}))};return j(0),{calculatedDuration:null,next:C=>{let M=!1;return!T&&E===void 0&&(M=!0,_(C),j(C)),E!==void 0&&C>=E?T.next(C-E):(!M&&_(C),f)}}}const xL=ms(.42,0,1,1),SL=ms(0,0,.58,1),YT=ms(.42,0,.58,1),_L=e=>Array.isArray(e)&&typeof e[0]!="number",kL={linear:wt,easeIn:xL,easeInOut:YT,easeOut:SL,circIn:Ey,circInOut:MT,circOut:jT,backIn:ky,backInOut:CT,backOut:ET,anticipate:TT},pb=e=>{if(by(e)){HC(e.length===4);const[t,n,r,i]=e;return ms(t,n,r,i)}else if(typeof e=="string")return kL[e];return e};function EL(e,t,n){const r=[],i=n||HT,a=e.length-1;for(let s=0;s<a;s++){let o=i(e[s],e[s+1]);if(t){const l=Array.isArray(t)?t[s]||wt:t;o=vs(l,o)}r.push(o)}return r}function CL(e,t,{clamp:n=!0,ease:r,mixer:i}={}){const a=e.length;if(HC(a===t.length),a===1)return()=>t[0];if(a===2&&t[0]===t[1])return()=>t[1];const s=e[0]===e[1];e[0]>e[a-1]&&(e=[...e].reverse(),t=[...t].reverse());const o=EL(t,r,i),l=o.length,u=c=>{if(s&&c<e[0])return t[0];let d=0;if(l>1)for(;d<e.length-2&&!(c<e[d+1]);d++);const f=Oi(e[d],e[d+1],c);return o[d](f)};return n?c=>u(jn(e[0],e[a-1],c)):u}function TL(e,t){const n=e[e.length-1];for(let r=1;r<=t;r++){const i=Oi(0,t,r);e.push(ke(n,1,i))}}function jL(e){const t=[0];return TL(t,e.length-1),t}function ML(e,t){return e.map(n=>n*t)}function PL(e,t){return e.map(()=>t||YT).splice(0,e.length-1)}function Ho({duration:e=300,keyframes:t,times:n,ease:r="easeInOut"}){const i=_L(r)?r.map(pb):pb(r),a={done:!1,value:t[0]},s=ML(n&&n.length===t.length?n:jL(t),e),o=CL(s,t,{ease:Array.isArray(i)?i:PL(t,i)});return{calculatedDuration:e,next:l=>(a.value=o(l),a.done=l>=e,a)}}const NL=e=>{const t=({timestamp:n})=>e(n);return{start:()=>be.update(t,!0),stop:()=>or(t),now:()=>We.isProcessing?We.timestamp:sn.now()}},RL={decay:hb,inertia:hb,tween:Ho,keyframes:Ho,spring:KT},AL=e=>e/100;class Ny extends UT{constructor(t){super(t),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:l}=this.options;l&&l()};const{name:n,motionValue:r,element:i,keyframes:a}=this.options,s=(i==null?void 0:i.KeyframeResolver)||My,o=(l,u)=>this.onKeyframesResolved(l,u);this.resolver=new s(a,o,n,r,i),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(t){const{type:n="keyframes",repeat:r=0,repeatDelay:i=0,repeatType:a,velocity:s=0}=this.options,o=gy(n)?n:RL[n]||Ho;let l,u;o!==Ho&&typeof t[0]!="number"&&(l=vs(AL,HT(t[0],t[1])),t=[0,100]);const c=o({...this.options,keyframes:t});a==="mirror"&&(u=o({...this.options,keyframes:[...t].reverse(),velocity:-s})),c.calculatedDuration===null&&(c.calculatedDuration=fT(c));const{calculatedDuration:d}=c,f=d+i,m=f*(r+1)-i;return{generator:c,mirroredGenerator:u,mapPercentToKeyframes:l,calculatedDuration:d,resolvedDuration:f,totalDuration:m}}onPostResolved(){const{autoplay:t=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!t?this.pause():this.state=this.pendingPlayState}tick(t,n=!1){const{resolved:r}=this;if(!r){const{keyframes:C}=this.options;return{done:!0,value:C[C.length-1]}}const{finalKeyframe:i,generator:a,mirroredGenerator:s,mapPercentToKeyframes:o,keyframes:l,calculatedDuration:u,totalDuration:c,resolvedDuration:d}=r;if(this.startTime===null)return a.next(0);const{delay:f,repeat:m,repeatType:v,repeatDelay:p,onUpdate:x}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-c/this.speed,this.startTime)),n?this.currentTime=t:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(t-this.startTime)*this.speed;const y=this.currentTime-f*(this.speed>=0?1:-1),g=this.speed>=0?y<0:y>c;this.currentTime=Math.max(y,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=c);let w=this.currentTime,_=a;if(m){const C=Math.min(this.currentTime,c)/d;let M=Math.floor(C),P=C%1;!P&&C>=1&&(P=1),P===1&&M--,M=Math.min(M,m+1),!!(M%2)&&(v==="reverse"?(P=1-P,p&&(P-=p/d)):v==="mirror"&&(_=s)),w=jn(0,1,P)*d}const E=g?{done:!1,value:l[0]}:_.next(w);o&&(E.value=o(E.value));let{done:T}=E;!g&&u!==null&&(T=this.speed>=0?this.currentTime>=c:this.currentTime<=0);const j=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&T);return j&&i!==void 0&&(E.value=wl(l,this.options,i)),x&&x(E.value),j&&this.finish(),E}get duration(){const{resolved:t}=this;return t?_n(t.calculatedDuration):0}get time(){return _n(this.currentTime)}set time(t){t=Sn(t),this.currentTime=t,this.holdTime!==null||this.speed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.speed)}get speed(){return this.playbackSpeed}set speed(t){const n=this.playbackSpeed!==t;this.playbackSpeed=t,n&&(this.time=_n(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:t=NL,onPlay:n,startTime:r}=this.options;this.driver||(this.driver=t(a=>this.tick(a))),n&&n();const i=this.driver.now();this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=i):this.startTime=r??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var t;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(t=this.currentTime)!==null&&t!==void 0?t:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:t}=this.options;t&&t()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}}const IL=new Set(["opacity","clipPath","filter","transform"]);function DL(e,t,n,{delay:r=0,duration:i=300,repeat:a=0,repeatType:s="loop",ease:o="easeInOut",times:l}={}){const u={[t]:n};l&&(u.offset=l);const c=mT(o,i);return Array.isArray(c)&&(u.easing=c),e.animate(u,{delay:r,duration:i,easing:Array.isArray(c)?"linear":c,fill:"both",iterations:a+1,direction:s==="reverse"?"alternate":"normal"})}const LL=ry(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),Wo=10,OL=2e4;function qL(e){return gy(e.type)||e.type==="spring"||!pT(e.ease)}function FL(e,t){const n=new Ny({...t,keyframes:e,repeat:0,delay:0,isGenerator:!0});let r={done:!1,value:e[0]};const i=[];let a=0;for(;!r.done&&a<OL;)r=n.sample(a),i.push(r.value),a+=Wo;return{times:void 0,keyframes:i,duration:a-Wo,ease:"linear"}}const QT={anticipate:TT,backInOut:CT,circInOut:MT};function VL(e){return e in QT}class mb extends UT{constructor(t){super(t);const{name:n,motionValue:r,element:i,keyframes:a}=this.options;this.resolver=new zT(a,(s,o)=>this.onKeyframesResolved(s,o),n,r,i),this.resolver.scheduleResolve()}initPlayback(t,n){let{duration:r=300,times:i,ease:a,type:s,motionValue:o,name:l,startTime:u}=this.options;if(!o.owner||!o.owner.current)return!1;if(typeof a=="string"&&Uo()&&VL(a)&&(a=QT[a]),qL(this.options)){const{onComplete:d,onUpdate:f,motionValue:m,element:v,...p}=this.options,x=FL(t,p);t=x.keyframes,t.length===1&&(t[1]=t[0]),r=x.duration,i=x.times,a=x.ease,s="keyframes"}const c=DL(o.owner.current,l,t,{...this.options,duration:r,times:i,ease:a});return c.startTime=u??this.calcStartTime(),this.pendingTimeline?(Z0(c,this.pendingTimeline),this.pendingTimeline=void 0):c.onfinish=()=>{const{onComplete:d}=this.options;o.set(wl(t,this.options,n)),d&&d(),this.cancel(),this.resolveFinishedPromise()},{animation:c,duration:r,times:i,type:s,ease:a,keyframes:t}}get duration(){const{resolved:t}=this;if(!t)return 0;const{duration:n}=t;return _n(n)}get time(){const{resolved:t}=this;if(!t)return 0;const{animation:n}=t;return _n(n.currentTime||0)}set time(t){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.currentTime=Sn(t)}get speed(){const{resolved:t}=this;if(!t)return 1;const{animation:n}=t;return n.playbackRate}set speed(t){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.playbackRate=t}get state(){const{resolved:t}=this;if(!t)return"idle";const{animation:n}=t;return n.playState}get startTime(){const{resolved:t}=this;if(!t)return null;const{animation:n}=t;return n.startTime}attachTimeline(t){if(!this._resolved)this.pendingTimeline=t;else{const{resolved:n}=this;if(!n)return wt;const{animation:r}=n;Z0(r,t)}return wt}play(){if(this.isStopped)return;const{resolved:t}=this;if(!t)return;const{animation:n}=t;n.playState==="finished"&&this.updateFinishedPromise(),n.play()}pause(){const{resolved:t}=this;if(!t)return;const{animation:n}=t;n.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:t}=this;if(!t)return;const{animation:n,keyframes:r,duration:i,type:a,ease:s,times:o}=t;if(n.playState==="idle"||n.playState==="finished")return;if(this.time){const{motionValue:u,onUpdate:c,onComplete:d,element:f,...m}=this.options,v=new Ny({...m,keyframes:r,duration:i,type:a,ease:s,times:o,isGenerator:!0}),p=Sn(this.time);u.setWithVelocity(v.sample(p-Wo).value,v.sample(p).value,Wo)}const{onStop:l}=this.options;l&&l(),this.cancel()}complete(){const{resolved:t}=this;t&&t.animation.finish()}cancel(){const{resolved:t}=this;t&&t.animation.cancel()}static supports(t){const{motionValue:n,name:r,repeatDelay:i,repeatType:a,damping:s,type:o}=t;if(!n||!n.owner||!(n.owner.current instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:u}=n.owner.getProps();return LL()&&r&&IL.has(r)&&!l&&!u&&!i&&a!=="mirror"&&s!==0&&o!=="inertia"}}const BL={type:"spring",stiffness:500,damping:25,restSpeed:10},$L=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),zL={type:"keyframes",duration:.8},UL={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},GL=(e,{keyframes:t})=>t.length>2?zL:$r.has(e)?e.startsWith("scale")?$L(t[1]):BL:UL;function HL({when:e,delay:t,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:a,repeatType:s,repeatDelay:o,from:l,elapsed:u,...c}){return!!Object.keys(c).length}const Ry=(e,t,n,r={},i,a)=>s=>{const o=yy(r,e)||{},l=o.delay||r.delay||0;let{elapsed:u=0}=r;u=u-Sn(l);let c={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:t.getVelocity(),...o,delay:-u,onUpdate:f=>{t.set(f),o.onUpdate&&o.onUpdate(f)},onComplete:()=>{s(),o.onComplete&&o.onComplete()},name:e,motionValue:t,element:a?void 0:i};HL(o)||(c={...c,...GL(e,c)}),c.duration&&(c.duration=Sn(c.duration)),c.repeatDelay&&(c.repeatDelay=Sn(c.repeatDelay)),c.from!==void 0&&(c.keyframes[0]=c.from);let d=!1;if((c.type===!1||c.duration===0&&!c.repeatDelay)&&(c.duration=0,c.delay===0&&(d=!0)),d&&!a&&t.get()!==void 0){const f=wl(c.keyframes,o);if(f!==void 0)return be.update(()=>{c.onUpdate(f),c.onComplete()}),new dD([])}return!a&&mb.supports(c)?new mb(c):new Ny(c)};function WL({protectedKeys:e,needsAnimating:t},n){const r=e.hasOwnProperty(n)&&t[n]!==!0;return t[n]=!1,r}function XT(e,t,{delay:n=0,transitionOverride:r,type:i}={}){var a;let{transition:s=e.getDefaultTransition(),transitionEnd:o,...l}=t;r&&(s=r);const u=[],c=i&&e.animationState&&e.animationState.getState()[i];for(const d in l){const f=e.getValue(d,(a=e.latestValues[d])!==null&&a!==void 0?a:null),m=l[d];if(m===void 0||c&&WL(c,d))continue;const v={delay:n,...yy(s||{},d)};let p=!1;if(window.MotionHandoffAnimation){const y=xT(e);if(y){const g=window.MotionHandoffAnimation(y,d,be);g!==null&&(v.startTime=g,p=!0)}}$m(e,d),f.start(Ry(d,f,m,e.shouldReduceMotion&&bT.has(d)?{type:!1}:v,e,p));const x=f.animation;x&&u.push(x)}return o&&Promise.all(u).then(()=>{be.update(()=>{o&&ED(e,o)})}),u}function Ym(e,t,n={}){var r;const i=bl(e,t,n.type==="exit"?(r=e.presenceContext)===null||r===void 0?void 0:r.custom:void 0);let{transition:a=e.getDefaultTransition()||{}}=i||{};n.transitionOverride&&(a=n.transitionOverride);const s=i?()=>Promise.all(XT(e,i,n)):()=>Promise.resolve(),o=e.variantChildren&&e.variantChildren.size?(u=0)=>{const{delayChildren:c=0,staggerChildren:d,staggerDirection:f}=a;return KL(e,t,c+u,d,f,n)}:()=>Promise.resolve(),{when:l}=a;if(l){const[u,c]=l==="beforeChildren"?[s,o]:[o,s];return u().then(()=>c())}else return Promise.all([s(),o(n.delay)])}function KL(e,t,n=0,r=0,i=1,a){const s=[],o=(e.variantChildren.size-1)*r,l=i===1?(u=0)=>u*r:(u=0)=>o-u*r;return Array.from(e.variantChildren).sort(YL).forEach((u,c)=>{u.notify("AnimationStart",t),s.push(Ym(u,t,{...a,delay:n+l(c)}).then(()=>u.notify("AnimationComplete",t)))}),Promise.all(s)}function YL(e,t){return e.sortNodePosition(t)}function QL(e,t,n={}){e.notify("AnimationStart",t);let r;if(Array.isArray(t)){const i=t.map(a=>Ym(e,a,n));r=Promise.all(i)}else if(typeof t=="string")r=Ym(e,t,n);else{const i=typeof t=="function"?bl(e,t,n.custom):t;r=Promise.all(XT(e,i,n))}return r.then(()=>{e.notify("AnimationComplete",t)})}const XL=ay.length;function JT(e){if(!e)return;if(!e.isControllingVariants){const n=e.parent?JT(e.parent)||{}:{};return e.props.initial!==void 0&&(n.initial=e.props.initial),n}const t={};for(let n=0;n<XL;n++){const r=ay[n],i=e.props[r];(rs(i)||i===!1)&&(t[r]=i)}return t}const JL=[...iy].reverse(),ZL=iy.length;function eO(e){return t=>Promise.all(t.map(({animation:n,options:r})=>QL(e,n,r)))}function tO(e){let t=eO(e),n=vb(),r=!0;const i=l=>(u,c)=>{var d;const f=bl(e,c,l==="exit"?(d=e.presenceContext)===null||d===void 0?void 0:d.custom:void 0);if(f){const{transition:m,transitionEnd:v,...p}=f;u={...u,...p,...v}}return u};function a(l){t=l(e)}function s(l){const{props:u}=e,c=JT(e.parent)||{},d=[],f=new Set;let m={},v=1/0;for(let x=0;x<ZL;x++){const y=JL[x],g=n[y],w=u[y]!==void 0?u[y]:c[y],_=rs(w),E=y===l?g.isActive:null;E===!1&&(v=x);let T=w===c[y]&&w!==u[y]&&_;if(T&&r&&e.manuallyAnimateOnMount&&(T=!1),g.protectedKeys={...m},!g.isActive&&E===null||!w&&!g.prevProp||yl(w)||typeof w=="boolean")continue;const j=nO(g.prevProp,w);let C=j||y===l&&g.isActive&&!T&&_||x>v&&_,M=!1;const P=Array.isArray(w)?w:[w];let R=P.reduce(i(y),{});E===!1&&(R={});const{prevResolvedValues:I={}}=g,O={...I,...R},K=ie=>{C=!0,f.has(ie)&&(M=!0,f.delete(ie)),g.needsAnimating[ie]=!0;const A=e.getValue(ie);A&&(A.liveStyle=!1)};for(const ie in O){const A=R[ie],q=I[ie];if(m.hasOwnProperty(ie))continue;let U=!1;Fm(A)&&Fm(q)?U=!dT(A,q):U=A!==q,U?A!=null?K(ie):f.add(ie):A!==void 0&&f.has(ie)?K(ie):g.protectedKeys[ie]=!0}g.prevProp=w,g.prevResolvedValues=R,g.isActive&&(m={...m,...R}),r&&e.blockInitialAnimation&&(C=!1),C&&(!(T&&j)||M)&&d.push(...P.map(ie=>({animation:ie,options:{type:y}})))}if(f.size){const x={};f.forEach(y=>{const g=e.getBaseTarget(y),w=e.getValue(y);w&&(w.liveStyle=!0),x[y]=g??null}),d.push({animation:x})}let p=!!d.length;return r&&(u.initial===!1||u.initial===u.animate)&&!e.manuallyAnimateOnMount&&(p=!1),r=!1,p?t(d):Promise.resolve()}function o(l,u){var c;if(n[l].isActive===u)return Promise.resolve();(c=e.variantChildren)===null||c===void 0||c.forEach(f=>{var m;return(m=f.animationState)===null||m===void 0?void 0:m.setActive(l,u)}),n[l].isActive=u;const d=s(l);for(const f in n)n[f].protectedKeys={};return d}return{animateChanges:s,setActive:o,setAnimateFunction:a,getState:()=>n,reset:()=>{n=vb(),r=!0}}}function nO(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!dT(t,e):!1}function xr(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function vb(){return{animate:xr(!0),whileInView:xr(),whileHover:xr(),whileTap:xr(),whileDrag:xr(),whileFocus:xr(),exit:xr()}}class hr{constructor(t){this.isMounted=!1,this.node=t}update(){}}class rO extends hr{constructor(t){super(t),t.animationState||(t.animationState=tO(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();yl(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:n}=this.node.prevProps||{};t!==n&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)===null||t===void 0||t.call(this)}}let iO=0;class aO extends hr{constructor(){super(...arguments),this.id=iO++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===r)return;const i=this.node.animationState.setActive("exit",!t);n&&!t&&i.then(()=>n(this.id))}mount(){const{register:t}=this.node.presenceContext||{};t&&(this.unmount=t(this.id))}unmount(){}}const sO={animation:{Feature:rO},exit:{Feature:aO}};function os(e,t,n,r={passive:!0}){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n)}function ys(e){return{point:{x:e.pageX,y:e.pageY}}}const oO=e=>t=>wy(t)&&e(t,ys(t));function Oa(e,t,n,r){return os(e,t,oO(n),r)}const yb=(e,t)=>Math.abs(e-t);function lO(e,t){const n=yb(e.x,t.x),r=yb(e.y,t.y);return Math.sqrt(n**2+r**2)}class ZT{constructor(t,n,{transformPagePoint:r,contextWindow:i,dragSnapToOrigin:a=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const d=Uu(this.lastMoveEventInfo,this.history),f=this.startEvent!==null,m=lO(d.offset,{x:0,y:0})>=3;if(!f&&!m)return;const{point:v}=d,{timestamp:p}=We;this.history.push({...v,timestamp:p});const{onStart:x,onMove:y}=this.handlers;f||(x&&x(this.lastMoveEvent,d),this.startEvent=this.lastMoveEvent),y&&y(this.lastMoveEvent,d)},this.handlePointerMove=(d,f)=>{this.lastMoveEvent=d,this.lastMoveEventInfo=zu(f,this.transformPagePoint),be.update(this.updatePoint,!0)},this.handlePointerUp=(d,f)=>{this.end();const{onEnd:m,onSessionEnd:v,resumeAnimation:p}=this.handlers;if(this.dragSnapToOrigin&&p&&p(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const x=Uu(d.type==="pointercancel"?this.lastMoveEventInfo:zu(f,this.transformPagePoint),this.history);this.startEvent&&m&&m(d,x),v&&v(d,x)},!wy(t))return;this.dragSnapToOrigin=a,this.handlers=n,this.transformPagePoint=r,this.contextWindow=i||window;const s=ys(t),o=zu(s,this.transformPagePoint),{point:l}=o,{timestamp:u}=We;this.history=[{...l,timestamp:u}];const{onSessionStart:c}=n;c&&c(t,Uu(o,this.history)),this.removeListeners=vs(Oa(this.contextWindow,"pointermove",this.handlePointerMove),Oa(this.contextWindow,"pointerup",this.handlePointerUp),Oa(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),or(this.updatePoint)}}function zu(e,t){return t?{point:t(e.point)}:e}function gb(e,t){return{x:e.x-t.x,y:e.y-t.y}}function Uu({point:e},t){return{point:e,delta:gb(e,ej(t)),offset:gb(e,uO(t)),velocity:cO(t,.1)}}function uO(e){return e[0]}function ej(e){return e[e.length-1]}function cO(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,r=null;const i=ej(e);for(;n>=0&&(r=e[n],!(i.timestamp-r.timestamp>Sn(t)));)n--;if(!r)return{x:0,y:0};const a=_n(i.timestamp-r.timestamp);if(a===0)return{x:0,y:0};const s={x:(i.x-r.x)/a,y:(i.y-r.y)/a};return s.x===1/0&&(s.x=0),s.y===1/0&&(s.y=0),s}const tj=1e-4,dO=1-tj,fO=1+tj,nj=.01,hO=0-nj,pO=0+nj;function St(e){return e.max-e.min}function mO(e,t,n){return Math.abs(e-t)<=n}function bb(e,t,n,r=.5){e.origin=r,e.originPoint=ke(t.min,t.max,e.origin),e.scale=St(n)/St(t),e.translate=ke(n.min,n.max,e.origin)-e.originPoint,(e.scale>=dO&&e.scale<=fO||isNaN(e.scale))&&(e.scale=1),(e.translate>=hO&&e.translate<=pO||isNaN(e.translate))&&(e.translate=0)}function qa(e,t,n,r){bb(e.x,t.x,n.x,r?r.originX:void 0),bb(e.y,t.y,n.y,r?r.originY:void 0)}function wb(e,t,n){e.min=n.min+t.min,e.max=e.min+St(t)}function vO(e,t,n){wb(e.x,t.x,n.x),wb(e.y,t.y,n.y)}function xb(e,t,n){e.min=t.min-n.min,e.max=e.min+St(t)}function Fa(e,t,n){xb(e.x,t.x,n.x),xb(e.y,t.y,n.y)}function yO(e,{min:t,max:n},r){return t!==void 0&&e<t?e=r?ke(t,e,r.min):Math.max(e,t):n!==void 0&&e>n&&(e=r?ke(n,e,r.max):Math.min(e,n)),e}function Sb(e,t,n){return{min:t!==void 0?e.min+t:void 0,max:n!==void 0?e.max+n-(e.max-e.min):void 0}}function gO(e,{top:t,left:n,bottom:r,right:i}){return{x:Sb(e.x,n,i),y:Sb(e.y,t,r)}}function _b(e,t){let n=t.min-e.min,r=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,r]=[r,n]),{min:n,max:r}}function bO(e,t){return{x:_b(e.x,t.x),y:_b(e.y,t.y)}}function wO(e,t){let n=.5;const r=St(e),i=St(t);return i>r?n=Oi(t.min,t.max-r,e.min):r>i&&(n=Oi(e.min,e.max-i,t.min)),jn(0,1,n)}function xO(e,t){const n={};return t.min!==void 0&&(n.min=t.min-e.min),t.max!==void 0&&(n.max=t.max-e.min),n}const Qm=.35;function SO(e=Qm){return e===!1?e=0:e===!0&&(e=Qm),{x:kb(e,"left","right"),y:kb(e,"top","bottom")}}function kb(e,t,n){return{min:Eb(e,t),max:Eb(e,n)}}function Eb(e,t){return typeof e=="number"?e:e[t]||0}const Cb=()=>({translate:0,scale:1,origin:0,originPoint:0}),xi=()=>({x:Cb(),y:Cb()}),Tb=()=>({min:0,max:0}),Ie=()=>({x:Tb(),y:Tb()});function Mt(e){return[e("x"),e("y")]}function rj({top:e,left:t,right:n,bottom:r}){return{x:{min:t,max:n},y:{min:e,max:r}}}function _O({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function kO(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),r=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function Gu(e){return e===void 0||e===1}function Xm({scale:e,scaleX:t,scaleY:n}){return!Gu(e)||!Gu(t)||!Gu(n)}function kr(e){return Xm(e)||ij(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function ij(e){return jb(e.x)||jb(e.y)}function jb(e){return e&&e!=="0%"}function Ko(e,t,n){const r=e-n,i=t*r;return n+i}function Mb(e,t,n,r,i){return i!==void 0&&(e=Ko(e,i,r)),Ko(e,n,r)+t}function Jm(e,t=0,n=1,r,i){e.min=Mb(e.min,t,n,r,i),e.max=Mb(e.max,t,n,r,i)}function aj(e,{x:t,y:n}){Jm(e.x,t.translate,t.scale,t.originPoint),Jm(e.y,n.translate,n.scale,n.originPoint)}const Pb=.999999999999,Nb=1.0000000000001;function EO(e,t,n,r=!1){const i=n.length;if(!i)return;t.x=t.y=1;let a,s;for(let o=0;o<i;o++){a=n[o],s=a.projectionDelta;const{visualElement:l}=a.options;l&&l.props.style&&l.props.style.display==="contents"||(r&&a.options.layoutScroll&&a.scroll&&a!==a.root&&_i(e,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),s&&(t.x*=s.x.scale,t.y*=s.y.scale,aj(e,s)),r&&kr(a.latestValues)&&_i(e,a.latestValues))}t.x<Nb&&t.x>Pb&&(t.x=1),t.y<Nb&&t.y>Pb&&(t.y=1)}function Si(e,t){e.min=e.min+t,e.max=e.max+t}function Rb(e,t,n,r,i=.5){const a=ke(e.min,e.max,i);Jm(e,t,n,a,r)}function _i(e,t){Rb(e.x,t.x,t.scaleX,t.scale,t.originX),Rb(e.y,t.y,t.scaleY,t.scale,t.originY)}function sj(e,t){return rj(kO(e.getBoundingClientRect(),t))}function CO(e,t,n){const r=sj(e,n),{scroll:i}=t;return i&&(Si(r.x,i.offset.x),Si(r.y,i.offset.y)),r}const oj=({current:e})=>e?e.ownerDocument.defaultView:null,TO=new WeakMap;class jO{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Ie(),this.visualElement=t}start(t,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const i=c=>{const{dragSnapToOrigin:d}=this.getProps();d?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(ys(c).point)},a=(c,d)=>{const{drag:f,dragPropagation:m,onDragStart:v}=this.getProps();if(f&&!m&&(this.openDragLock&&this.openDragLock(),this.openDragLock=wD(f),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Mt(x=>{let y=this.getAxisMotionValue(x).get()||0;if(an.test(y)){const{projection:g}=this.visualElement;if(g&&g.layout){const w=g.layout.layoutBox[x];w&&(y=St(w)*(parseFloat(y)/100))}}this.originPoint[x]=y}),v&&be.postRender(()=>v(c,d)),$m(this.visualElement,"transform");const{animationState:p}=this.visualElement;p&&p.setActive("whileDrag",!0)},s=(c,d)=>{const{dragPropagation:f,dragDirectionLock:m,onDirectionLock:v,onDrag:p}=this.getProps();if(!f&&!this.openDragLock)return;const{offset:x}=d;if(m&&this.currentDirection===null){this.currentDirection=MO(x),this.currentDirection!==null&&v&&v(this.currentDirection);return}this.updateAxis("x",d.point,x),this.updateAxis("y",d.point,x),this.visualElement.render(),p&&p(c,d)},o=(c,d)=>this.stop(c,d),l=()=>Mt(c=>{var d;return this.getAnimationState(c)==="paused"&&((d=this.getAxisMotionValue(c).animation)===null||d===void 0?void 0:d.play())}),{dragSnapToOrigin:u}=this.getProps();this.panSession=new ZT(t,{onSessionStart:i,onStart:a,onMove:s,onSessionEnd:o,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,contextWindow:oj(this.visualElement)})}stop(t,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:i}=n;this.startAnimation(i);const{onDragEnd:a}=this.getProps();a&&be.postRender(()=>a(t,n))}cancel(){this.isDragging=!1;const{projection:t,animationState:n}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(t,n,r){const{drag:i}=this.getProps();if(!r||!Xs(t,i,this.currentDirection))return;const a=this.getAxisMotionValue(t);let s=this.originPoint[t]+r[t];this.constraints&&this.constraints[t]&&(s=yO(s,this.constraints[t],this.elastic[t])),a.set(s)}resolveConstraints(){var t;const{dragConstraints:n,dragElastic:r}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(t=this.visualElement.projection)===null||t===void 0?void 0:t.layout,a=this.constraints;n&&bi(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&i?this.constraints=gO(i.layoutBox,n):this.constraints=!1,this.elastic=SO(r),a!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&Mt(s=>{this.constraints!==!1&&this.getAxisMotionValue(s)&&(this.constraints[s]=xO(i.layoutBox[s],this.constraints[s]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:n}=this.getProps();if(!t||!bi(t))return!1;const r=t.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const a=CO(r,i.root,this.visualElement.getTransformPagePoint());let s=bO(i.layout.layoutBox,a);if(n){const o=n(_O(s));this.hasMutatedConstraints=!!o,o&&(s=rj(o))}return s}startAnimation(t){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:a,dragSnapToOrigin:s,onDragTransitionEnd:o}=this.getProps(),l=this.constraints||{},u=Mt(c=>{if(!Xs(c,n,this.currentDirection))return;let d=l&&l[c]||{};s&&(d={min:0,max:0});const f=i?200:1e6,m=i?40:1e7,v={type:"inertia",velocity:r?t[c]:0,bounceStiffness:f,bounceDamping:m,timeConstant:750,restDelta:1,restSpeed:10,...a,...d};return this.startAxisValueAnimation(c,v)});return Promise.all(u).then(o)}startAxisValueAnimation(t,n){const r=this.getAxisMotionValue(t);return $m(this.visualElement,t),r.start(Ry(t,r,0,n,this.visualElement,!1))}stopAnimation(){Mt(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){Mt(t=>{var n;return(n=this.getAxisMotionValue(t).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(t){var n;return(n=this.getAxisMotionValue(t).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(t){const n=`_drag${t.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(t,(r.initial?r.initial[t]:void 0)||0)}snapToCursor(t){Mt(n=>{const{drag:r}=this.getProps();if(!Xs(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,a=this.getAxisMotionValue(n);if(i&&i.layout){const{min:s,max:o}=i.layout.layoutBox[n];a.set(t[n]-ke(s,o,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!bi(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};Mt(s=>{const o=this.getAxisMotionValue(s);if(o&&this.constraints!==!1){const l=o.get();i[s]=wO({min:l,max:l},this.constraints[s])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Mt(s=>{if(!Xs(s,t,null))return;const o=this.getAxisMotionValue(s),{min:l,max:u}=this.constraints[s];o.set(ke(l,u,i[s]))})}addListeners(){if(!this.visualElement.current)return;TO.set(this.visualElement,this);const t=this.visualElement.current,n=Oa(t,"pointerdown",l=>{const{drag:u,dragListener:c=!0}=this.getProps();u&&c&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();bi(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,a=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),be.read(r);const s=os(window,"resize",()=>this.scalePositionWithinConstraints()),o=i.addEventListener("didUpdate",({delta:l,hasLayoutChanged:u})=>{this.isDragging&&u&&(Mt(c=>{const d=this.getAxisMotionValue(c);d&&(this.originPoint[c]+=l[c].translate,d.set(d.get()+l[c].translate))}),this.visualElement.render())});return()=>{s(),n(),a(),o&&o()}}getProps(){const t=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:a=!1,dragElastic:s=Qm,dragMomentum:o=!0}=t;return{...t,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:a,dragElastic:s,dragMomentum:o}}}function Xs(e,t,n){return(t===!0||t===e)&&(n===null||n===e)}function MO(e,t=10){let n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}class PO extends hr{constructor(t){super(t),this.removeGroupControls=wt,this.removeListeners=wt,this.controls=new jO(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||wt}unmount(){this.removeGroupControls(),this.removeListeners()}}const Ab=e=>(t,n)=>{e&&be.postRender(()=>e(t,n))};class NO extends hr{constructor(){super(...arguments),this.removePointerDownListener=wt}onPointerDown(t){this.session=new ZT(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:oj(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:Ab(t),onStart:Ab(n),onMove:r,onEnd:(a,s)=>{delete this.session,i&&be.postRender(()=>i(a,s))}}}mount(){this.removePointerDownListener=Oa(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const yo={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Ib(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const ha={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(H.test(e))e=parseFloat(e);else return e;const n=Ib(e,t.target.x),r=Ib(e,t.target.y);return`${n}% ${r}%`}},RO={correct:(e,{treeScale:t,projectionDelta:n})=>{const r=e,i=lr.parse(e);if(i.length>5)return r;const a=lr.createTransformer(e),s=typeof i[0]!="number"?1:0,o=n.x.scale*t.x,l=n.y.scale*t.y;i[0+s]/=o,i[1+s]/=l;const u=ke(o,l,.5);return typeof i[2+s]=="number"&&(i[2+s]/=u),typeof i[3+s]=="number"&&(i[3+s]/=u),a(i)}};class AO extends S.Component{componentDidMount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:a}=t;ZI(IO),a&&(n.group&&n.group.add(a),r&&r.register&&i&&r.register(a),a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,onExitComplete:()=>this.safeToRemove()})),yo.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:n,visualElement:r,drag:i,isPresent:a}=this.props,s=r.projection;return s&&(s.isPresent=a,i||t.layoutDependency!==n||n===void 0?s.willUpdate():this.safeToRemove(),t.isPresent!==a&&(a?s.promote():s.relegate()||be.postRender(()=>{const o=s.getStack();(!o||!o.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),oy.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=t;i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function lj(e){const[t,n]=pI(),r=S.useContext(UC);return h.jsx(AO,{...e,layoutGroup:r,switchLayoutGroup:S.useContext(JC),isPresent:t,safeToRemove:n})}const IO={borderRadius:{...ha,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:ha,borderTopRightRadius:ha,borderBottomLeftRadius:ha,borderBottomRightRadius:ha,boxShadow:RO};function DO(e,t,n){const r=tt(e)?e:as(e);return r.start(Ry("",r,t,n)),r.animation}function LO(e){return e instanceof SVGElement&&e.tagName!=="svg"}const OO=(e,t)=>e.depth-t.depth;class qO{constructor(){this.children=[],this.isDirty=!1}add(t){xy(this.children,t),this.isDirty=!0}remove(t){Sy(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(OO),this.isDirty=!1,this.children.forEach(t)}}function FO(e,t){const n=sn.now(),r=({timestamp:i})=>{const a=i-n;a>=t&&(or(r),e(a-t))};return be.read(r,!0),()=>or(r)}const uj=["TopLeft","TopRight","BottomLeft","BottomRight"],VO=uj.length,Db=e=>typeof e=="string"?parseFloat(e):e,Lb=e=>typeof e=="number"||H.test(e);function BO(e,t,n,r,i,a){i?(e.opacity=ke(0,n.opacity!==void 0?n.opacity:1,$O(r)),e.opacityExit=ke(t.opacity!==void 0?t.opacity:1,0,zO(r))):a&&(e.opacity=ke(t.opacity!==void 0?t.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let s=0;s<VO;s++){const o=`border${uj[s]}Radius`;let l=Ob(t,o),u=Ob(n,o);if(l===void 0&&u===void 0)continue;l||(l=0),u||(u=0),l===0||u===0||Lb(l)===Lb(u)?(e[o]=Math.max(ke(Db(l),Db(u),r),0),(an.test(u)||an.test(l))&&(e[o]+="%")):e[o]=u}(t.rotate||n.rotate)&&(e.rotate=ke(t.rotate||0,n.rotate||0,r))}function Ob(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const $O=cj(0,.5,jT),zO=cj(.5,.95,wt);function cj(e,t,n){return r=>r<e?0:r>t?1:n(Oi(e,t,r))}function qb(e,t){e.min=t.min,e.max=t.max}function jt(e,t){qb(e.x,t.x),qb(e.y,t.y)}function Fb(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function Vb(e,t,n,r,i){return e-=t,e=Ko(e,1/n,r),i!==void 0&&(e=Ko(e,1/i,r)),e}function UO(e,t=0,n=1,r=.5,i,a=e,s=e){if(an.test(t)&&(t=parseFloat(t),t=ke(s.min,s.max,t/100)-s.min),typeof t!="number")return;let o=ke(a.min,a.max,r);e===a&&(o-=t),e.min=Vb(e.min,t,n,o,i),e.max=Vb(e.max,t,n,o,i)}function Bb(e,t,[n,r,i],a,s){UO(e,t[n],t[r],t[i],t.scale,a,s)}const GO=["x","scaleX","originX"],HO=["y","scaleY","originY"];function $b(e,t,n,r){Bb(e.x,t,GO,n?n.x:void 0,r?r.x:void 0),Bb(e.y,t,HO,n?n.y:void 0,r?r.y:void 0)}function zb(e){return e.translate===0&&e.scale===1}function dj(e){return zb(e.x)&&zb(e.y)}function Ub(e,t){return e.min===t.min&&e.max===t.max}function WO(e,t){return Ub(e.x,t.x)&&Ub(e.y,t.y)}function Gb(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function fj(e,t){return Gb(e.x,t.x)&&Gb(e.y,t.y)}function Hb(e){return St(e.x)/St(e.y)}function Wb(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class KO{constructor(){this.members=[]}add(t){xy(this.members,t),t.scheduleRender()}remove(t){if(Sy(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(t){const n=this.members.findIndex(i=>t===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const a=this.members[i];if(a.isPresent!==!1){r=a;break}}return r?(this.promote(r),!0):!1}promote(t,n){const r=this.lead;if(t!==r&&(this.prevLead=r,this.lead=t,t.show(),r)){r.instance&&r.scheduleRender(),t.scheduleRender(),t.resumeFrom=r,n&&(t.resumeFrom.preserveOpacity=!0),r.snapshot&&(t.snapshot=r.snapshot,t.snapshot.latestValues=r.animationValues||r.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:i}=t.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:n,resumingFrom:r}=t;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function YO(e,t,n){let r="";const i=e.x.translate/t.x,a=e.y.translate/t.y,s=(n==null?void 0:n.z)||0;if((i||a||s)&&(r=`translate3d(${i}px, ${a}px, ${s}px) `),(t.x!==1||t.y!==1)&&(r+=`scale(${1/t.x}, ${1/t.y}) `),n){const{transformPerspective:u,rotate:c,rotateX:d,rotateY:f,skewX:m,skewY:v}=n;u&&(r=`perspective(${u}px) ${r}`),c&&(r+=`rotate(${c}deg) `),d&&(r+=`rotateX(${d}deg) `),f&&(r+=`rotateY(${f}deg) `),m&&(r+=`skewX(${m}deg) `),v&&(r+=`skewY(${v}deg) `)}const o=e.x.scale*t.x,l=e.y.scale*t.y;return(o!==1||l!==1)&&(r+=`scale(${o}, ${l})`),r||"none"}const Er={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},wa=typeof window<"u"&&window.MotionDebug!==void 0,Hu=["","X","Y","Z"],QO={visibility:"hidden"},Kb=1e3;let XO=0;function Wu(e,t,n,r){const{latestValues:i}=t;i[e]&&(n[e]=i[e],t.setStaticValue(e,0),r&&(r[e]=0))}function hj(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const n=xT(t);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:a}=e.options;window.MotionCancelOptimisedAnimation(n,"transform",be,!(i||a))}const{parent:r}=e;r&&!r.hasCheckedOptimisedAppear&&hj(r)}function pj({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(s={},o=t==null?void 0:t()){this.id=XO++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,wa&&(Er.totalNodes=Er.resolvedTargetDeltas=Er.recalculatedProjection=0),this.nodes.forEach(e2),this.nodes.forEach(a2),this.nodes.forEach(s2),this.nodes.forEach(t2),wa&&window.MotionDebug.record(Er)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=s,this.root=o?o.root||o:this,this.path=o?[...o.path,o]:[],this.parent=o,this.depth=o?o.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new qO)}addEventListener(s,o){return this.eventHandlers.has(s)||this.eventHandlers.set(s,new _y),this.eventHandlers.get(s).add(o)}notifyListeners(s,...o){const l=this.eventHandlers.get(s);l&&l.notify(...o)}hasListeners(s){return this.eventHandlers.has(s)}mount(s,o=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=LO(s),this.instance=s;const{layoutId:l,layout:u,visualElement:c}=this.options;if(c&&!c.current&&c.mount(s),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),o&&(u||l)&&(this.isLayoutDirty=!0),e){let d;const f=()=>this.root.updateBlockedByResize=!1;e(s,()=>{this.root.updateBlockedByResize=!0,d&&d(),d=FO(f,250),yo.hasAnimatedSinceResize&&(yo.hasAnimatedSinceResize=!1,this.nodes.forEach(Qb))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&c&&(l||u)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:f,hasRelativeTargetChanged:m,layout:v})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const p=this.options.transition||c.getDefaultTransition()||d2,{onLayoutAnimationStart:x,onLayoutAnimationComplete:y}=c.getProps(),g=!this.targetLayout||!fj(this.targetLayout,v)||m,w=!f&&m;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||w||f&&(g||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(d,w);const _={...yy(p,"layout"),onPlay:x,onComplete:y};(c.shouldReduceMotion||this.options.layoutRoot)&&(_.delay=0,_.type=!1),this.startAnimation(_)}else f||Qb(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=v})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const s=this.getStack();s&&s.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,or(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(o2),this.animationId++)}getTransformTemplate(){const{visualElement:s}=this.options;return s&&s.getProps().transformTemplate}willUpdate(s=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&hj(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let c=0;c<this.path.length;c++){const d=this.path[c];d.shouldResetTransform=!0,d.updateScroll("snapshot"),d.options.layoutRoot&&d.willUpdate(!1)}const{layoutId:o,layout:l}=this.options;if(o===void 0&&!l)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),s&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Yb);return}this.isUpdating||this.nodes.forEach(r2),this.isUpdating=!1,this.nodes.forEach(i2),this.nodes.forEach(JO),this.nodes.forEach(ZO),this.clearAllSnapshots();const o=sn.now();We.delta=jn(0,1e3/60,o-We.timestamp),We.timestamp=o,We.isProcessing=!0,Ou.update.process(We),Ou.preRender.process(We),Ou.render.process(We),We.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,oy.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(n2),this.sharedNodes.forEach(l2)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,be.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){be.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const s=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Ie(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:o}=this.options;o&&o.notify("LayoutMeasure",this.layout.layoutBox,s?s.layoutBox:void 0)}updateScroll(s="measure"){let o=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===s&&(o=!1),o){const l=r(this.instance);this.scroll={animationId:this.root.animationId,phase:s,isRoot:l,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!i)return;const s=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,o=this.projectionDelta&&!dj(this.projectionDelta),l=this.getTransformTemplate(),u=l?l(this.latestValues,""):void 0,c=u!==this.prevTransformTemplateValue;s&&(o||kr(this.latestValues)||c)&&(i(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(s=!0){const o=this.measurePageBox();let l=this.removeElementScroll(o);return s&&(l=this.removeTransform(l)),f2(l),{animationId:this.root.animationId,measuredBox:o,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var s;const{visualElement:o}=this.options;if(!o)return Ie();const l=o.measureViewportBox();if(!(((s=this.scroll)===null||s===void 0?void 0:s.wasRoot)||this.path.some(h2))){const{scroll:c}=this.root;c&&(Si(l.x,c.offset.x),Si(l.y,c.offset.y))}return l}removeElementScroll(s){var o;const l=Ie();if(jt(l,s),!((o=this.scroll)===null||o===void 0)&&o.wasRoot)return l;for(let u=0;u<this.path.length;u++){const c=this.path[u],{scroll:d,options:f}=c;c!==this.root&&d&&f.layoutScroll&&(d.wasRoot&&jt(l,s),Si(l.x,d.offset.x),Si(l.y,d.offset.y))}return l}applyTransform(s,o=!1){const l=Ie();jt(l,s);for(let u=0;u<this.path.length;u++){const c=this.path[u];!o&&c.options.layoutScroll&&c.scroll&&c!==c.root&&_i(l,{x:-c.scroll.offset.x,y:-c.scroll.offset.y}),kr(c.latestValues)&&_i(l,c.latestValues)}return kr(this.latestValues)&&_i(l,this.latestValues),l}removeTransform(s){const o=Ie();jt(o,s);for(let l=0;l<this.path.length;l++){const u=this.path[l];if(!u.instance||!kr(u.latestValues))continue;Xm(u.latestValues)&&u.updateSnapshot();const c=Ie(),d=u.measurePageBox();jt(c,d),$b(o,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,c)}return kr(this.latestValues)&&$b(o,this.latestValues),o}setTargetDelta(s){this.targetDelta=s,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(s){this.options={...this.options,...s,crossfade:s.crossfade!==void 0?s.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==We.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(s=!1){var o;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==l;if(!(s||u&&this.isSharedProjectionDirty||this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:d,layoutId:f}=this.options;if(!(!this.layout||!(d||f))){if(this.resolvedRelativeTargetAt=We.timestamp,!this.targetDelta&&!this.relativeTarget){const m=this.getClosestProjectingParent();m&&m.layout&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ie(),this.relativeTargetOrigin=Ie(),Fa(this.relativeTargetOrigin,this.layout.layoutBox,m.layout.layoutBox),jt(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=Ie(),this.targetWithTransforms=Ie()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),vO(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):jt(this.target,this.layout.layoutBox),aj(this.target,this.targetDelta)):jt(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const m=this.getClosestProjectingParent();m&&!!m.resumingFrom==!!this.resumingFrom&&!m.options.layoutScroll&&m.target&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ie(),this.relativeTargetOrigin=Ie(),Fa(this.relativeTargetOrigin,this.target,m.target),jt(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}wa&&Er.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||Xm(this.parent.latestValues)||ij(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var s;const o=this.getLead(),l=!!this.resumingFrom||this!==o;let u=!0;if((this.isProjectionDirty||!((s=this.parent)===null||s===void 0)&&s.isProjectionDirty)&&(u=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===We.timestamp&&(u=!1),u)return;const{layout:c,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(c||d))return;jt(this.layoutCorrected,this.layout.layoutBox);const f=this.treeScale.x,m=this.treeScale.y;EO(this.layoutCorrected,this.treeScale,this.path,l),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=Ie());const{target:v}=o;if(!v){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(Fb(this.prevProjectionDelta.x,this.projectionDelta.x),Fb(this.prevProjectionDelta.y,this.projectionDelta.y)),qa(this.projectionDelta,this.layoutCorrected,v,this.latestValues),(this.treeScale.x!==f||this.treeScale.y!==m||!Wb(this.projectionDelta.x,this.prevProjectionDelta.x)||!Wb(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",v)),wa&&Er.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(s=!0){var o;if((o=this.options.visualElement)===null||o===void 0||o.scheduleRender(),s){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=xi(),this.projectionDelta=xi(),this.projectionDeltaWithTransform=xi()}setAnimationOrigin(s,o=!1){const l=this.snapshot,u=l?l.latestValues:{},c={...this.latestValues},d=xi();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!o;const f=Ie(),m=l?l.source:void 0,v=this.layout?this.layout.source:void 0,p=m!==v,x=this.getStack(),y=!x||x.members.length<=1,g=!!(p&&!y&&this.options.crossfade===!0&&!this.path.some(c2));this.animationProgress=0;let w;this.mixTargetDelta=_=>{const E=_/1e3;Xb(d.x,s.x,E),Xb(d.y,s.y,E),this.setTargetDelta(d),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Fa(f,this.layout.layoutBox,this.relativeParent.layout.layoutBox),u2(this.relativeTarget,this.relativeTargetOrigin,f,E),w&&WO(this.relativeTarget,w)&&(this.isProjectionDirty=!1),w||(w=Ie()),jt(w,this.relativeTarget)),p&&(this.animationValues=c,BO(c,u,this.latestValues,E,g,y)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=E},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(s){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(or(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=be.update(()=>{yo.hasAnimatedSinceResize=!0,this.currentAnimation=DO(0,Kb,{...s,onUpdate:o=>{this.mixTargetDelta(o),s.onUpdate&&s.onUpdate(o)},onComplete:()=>{s.onComplete&&s.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const s=this.getStack();s&&s.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Kb),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const s=this.getLead();let{targetWithTransforms:o,target:l,layout:u,latestValues:c}=s;if(!(!o||!l||!u)){if(this!==s&&this.layout&&u&&mj(this.options.animationType,this.layout.layoutBox,u.layoutBox)){l=this.target||Ie();const d=St(this.layout.layoutBox.x);l.x.min=s.target.x.min,l.x.max=l.x.min+d;const f=St(this.layout.layoutBox.y);l.y.min=s.target.y.min,l.y.max=l.y.min+f}jt(o,l),_i(o,c),qa(this.projectionDeltaWithTransform,this.layoutCorrected,o,c)}}registerSharedNode(s,o){this.sharedNodes.has(s)||this.sharedNodes.set(s,new KO),this.sharedNodes.get(s).add(o);const u=o.options.initialPromotionConfig;o.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(o):void 0})}isLead(){const s=this.getStack();return s?s.lead===this:!0}getLead(){var s;const{layoutId:o}=this.options;return o?((s=this.getStack())===null||s===void 0?void 0:s.lead)||this:this}getPrevLead(){var s;const{layoutId:o}=this.options;return o?(s=this.getStack())===null||s===void 0?void 0:s.prevLead:void 0}getStack(){const{layoutId:s}=this.options;if(s)return this.root.sharedNodes.get(s)}promote({needsReset:s,transition:o,preserveFollowOpacity:l}={}){const u=this.getStack();u&&u.promote(this,l),s&&(this.projectionDelta=void 0,this.needsReset=!0),o&&this.setOptions({transition:o})}relegate(){const s=this.getStack();return s?s.relegate(this):!1}resetSkewAndRotation(){const{visualElement:s}=this.options;if(!s)return;let o=!1;const{latestValues:l}=s;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(o=!0),!o)return;const u={};l.z&&Wu("z",s,u,this.animationValues);for(let c=0;c<Hu.length;c++)Wu(`rotate${Hu[c]}`,s,u,this.animationValues),Wu(`skew${Hu[c]}`,s,u,this.animationValues);s.render();for(const c in u)s.setStaticValue(c,u[c]),this.animationValues&&(this.animationValues[c]=u[c]);s.scheduleRender()}getProjectionStyles(s){var o,l;if(!this.instance||this.isSVG)return;if(!this.isVisible)return QO;const u={visibility:""},c=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,u.opacity="",u.pointerEvents=mo(s==null?void 0:s.pointerEvents)||"",u.transform=c?c(this.latestValues,""):"none",u;const d=this.getLead();if(!this.projectionDelta||!this.layout||!d.target){const p={};return this.options.layoutId&&(p.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,p.pointerEvents=mo(s==null?void 0:s.pointerEvents)||""),this.hasProjected&&!kr(this.latestValues)&&(p.transform=c?c({},""):"none",this.hasProjected=!1),p}const f=d.animationValues||d.latestValues;this.applyTransformsToTarget(),u.transform=YO(this.projectionDeltaWithTransform,this.treeScale,f),c&&(u.transform=c(f,u.transform));const{x:m,y:v}=this.projectionDelta;u.transformOrigin=`${m.origin*100}% ${v.origin*100}% 0`,d.animationValues?u.opacity=d===this?(l=(o=f.opacity)!==null&&o!==void 0?o:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:f.opacityExit:u.opacity=d===this?f.opacity!==void 0?f.opacity:"":f.opacityExit!==void 0?f.opacityExit:0;for(const p in zo){if(f[p]===void 0)continue;const{correct:x,applyTo:y}=zo[p],g=u.transform==="none"?f[p]:x(f[p],d);if(y){const w=y.length;for(let _=0;_<w;_++)u[y[_]]=g}else u[p]=g}return this.options.layoutId&&(u.pointerEvents=d===this?mo(s==null?void 0:s.pointerEvents)||"":"none"),u}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(s=>{var o;return(o=s.currentAnimation)===null||o===void 0?void 0:o.stop()}),this.root.nodes.forEach(Yb),this.root.sharedNodes.clear()}}}function JO(e){e.updateLayout()}function ZO(e){var t;const n=((t=e.resumeFrom)===null||t===void 0?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&n&&e.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=e.layout,{animationType:a}=e.options,s=n.source!==e.layout.source;a==="size"?Mt(d=>{const f=s?n.measuredBox[d]:n.layoutBox[d],m=St(f);f.min=r[d].min,f.max=f.min+m}):mj(a,n.layoutBox,r)&&Mt(d=>{const f=s?n.measuredBox[d]:n.layoutBox[d],m=St(r[d]);f.max=f.min+m,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[d].max=e.relativeTarget[d].min+m)});const o=xi();qa(o,r,n.layoutBox);const l=xi();s?qa(l,e.applyTransform(i,!0),n.measuredBox):qa(l,r,n.layoutBox);const u=!dj(o);let c=!1;if(!e.resumeFrom){const d=e.getClosestProjectingParent();if(d&&!d.resumeFrom){const{snapshot:f,layout:m}=d;if(f&&m){const v=Ie();Fa(v,n.layoutBox,f.layoutBox);const p=Ie();Fa(p,r,m.layoutBox),fj(v,p)||(c=!0),d.options.layoutRoot&&(e.relativeTarget=p,e.relativeTargetOrigin=v,e.relativeParent=d)}}}e.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:l,layoutDelta:o,hasLayoutChanged:u,hasRelativeTargetChanged:c})}else if(e.isLead()){const{onExitComplete:r}=e.options;r&&r()}e.options.transition=void 0}function e2(e){wa&&Er.totalNodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function t2(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function n2(e){e.clearSnapshot()}function Yb(e){e.clearMeasurements()}function r2(e){e.isLayoutDirty=!1}function i2(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function Qb(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function a2(e){e.resolveTargetDelta()}function s2(e){e.calcProjection()}function o2(e){e.resetSkewAndRotation()}function l2(e){e.removeLeadSnapshot()}function Xb(e,t,n){e.translate=ke(t.translate,0,n),e.scale=ke(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function Jb(e,t,n,r){e.min=ke(t.min,n.min,r),e.max=ke(t.max,n.max,r)}function u2(e,t,n,r){Jb(e.x,t.x,n.x,r),Jb(e.y,t.y,n.y,r)}function c2(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const d2={duration:.45,ease:[.4,0,.1,1]},Zb=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),ew=Zb("applewebkit/")&&!Zb("chrome/")?Math.round:wt;function tw(e){e.min=ew(e.min),e.max=ew(e.max)}function f2(e){tw(e.x),tw(e.y)}function mj(e,t,n){return e==="position"||e==="preserve-aspect"&&!mO(Hb(t),Hb(n),.2)}function h2(e){var t;return e!==e.root&&((t=e.scroll)===null||t===void 0?void 0:t.wasRoot)}const p2=pj({attachResizeListener:(e,t)=>os(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Ku={current:void 0},vj=pj({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!Ku.current){const e=new p2({});e.mount(window),e.setOptions({layoutScroll:!0}),Ku.current=e}return Ku.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),m2={pan:{Feature:NO},drag:{Feature:PO,ProjectionNode:vj,MeasureLayout:lj}};function nw(e,t,n){const{props:r}=e;e.animationState&&r.whileHover&&e.animationState.setActive("whileHover",n==="Start");const i="onHover"+n,a=r[i];a&&be.postRender(()=>a(t,ys(t)))}class v2 extends hr{mount(){const{current:t}=this.node;t&&(this.unmount=mD(t,n=>(nw(this.node,n,"Start"),r=>nw(this.node,r,"End"))))}unmount(){}}class y2 extends hr{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=vs(os(this.node.current,"focus",()=>this.onFocus()),os(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function rw(e,t,n){const{props:r}=e;e.animationState&&r.whileTap&&e.animationState.setActive("whileTap",n==="Start");const i="onTap"+(n==="End"?"":n),a=r[i];a&&be.postRender(()=>a(t,ys(t)))}class g2 extends hr{mount(){const{current:t}=this.node;t&&(this.unmount=bD(t,n=>(rw(this.node,n,"Start"),(r,{success:i})=>rw(this.node,r,i?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Zm=new WeakMap,Yu=new WeakMap,b2=e=>{const t=Zm.get(e.target);t&&t(e)},w2=e=>{e.forEach(b2)};function x2({root:e,...t}){const n=e||document;Yu.has(n)||Yu.set(n,{});const r=Yu.get(n),i=JSON.stringify(t);return r[i]||(r[i]=new IntersectionObserver(w2,{root:e,...t})),r[i]}function S2(e,t,n){const r=x2(t);return Zm.set(e,n),r.observe(e),()=>{Zm.delete(e),r.unobserve(e)}}const _2={some:0,all:1};class k2 extends hr{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:a}=t,s={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:_2[i]},o=l=>{const{isIntersecting:u}=l;if(this.isInView===u||(this.isInView=u,a&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:c,onViewportLeave:d}=this.node.getProps(),f=u?c:d;f&&f(l)};return S2(this.node.current,s,o)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:n}=this.node;["amount","margin","root"].some(E2(t,n))&&this.startObserver()}unmount(){}}function E2({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}const C2={inView:{Feature:k2},tap:{Feature:g2},focus:{Feature:y2},hover:{Feature:v2}},T2={layout:{ProjectionNode:vj,MeasureLayout:lj}},ev={current:null},yj={current:!1};function j2(){if(yj.current=!0,!!ny)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>ev.current=e.matches;e.addListener(t),t()}else ev.current=!1}const M2=[...$T,Ze,lr],P2=e=>M2.find(BT(e)),iw=new WeakMap;function N2(e,t,n){for(const r in t){const i=t[r],a=n[r];if(tt(i))e.addValue(r,i);else if(tt(a))e.addValue(r,as(i,{owner:e}));else if(a!==i)if(e.hasValue(r)){const s=e.getValue(r);s.liveStyle===!0?s.jump(i):s.hasAnimated||s.set(i)}else{const s=e.getStaticValue(r);e.addValue(r,as(s!==void 0?s:i,{owner:e}))}}for(const r in n)t[r]===void 0&&e.removeValue(r);return t}const aw=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class R2{scrapeMotionValuesFromProps(t,n,r){return{}}constructor({parent:t,props:n,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:a,visualState:s},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=My,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const m=sn.now();this.renderScheduledAt<m&&(this.renderScheduledAt=m,be.render(this.render,!1,!0))};const{latestValues:l,renderState:u,onUpdate:c}=s;this.onUpdate=c,this.latestValues=l,this.baseTarget={...l},this.initialValues=n.initial?{...l}:{},this.renderState=u,this.parent=t,this.props=n,this.presenceContext=r,this.depth=t?t.depth+1:0,this.reducedMotionConfig=i,this.options=o,this.blockInitialAnimation=!!a,this.isControllingVariants=gl(n),this.isVariantNode=QC(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:d,...f}=this.scrapeMotionValuesFromProps(n,{},this);for(const m in f){const v=f[m];l[m]!==void 0&&tt(v)&&v.set(l[m],!1)}}mount(t){this.current=t,iw.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),yj.current||j2(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:ev.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){iw.delete(this.current),this.projection&&this.projection.unmount(),or(this.notifyUpdate),or(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const n=this.features[t];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(t,n){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const r=$r.has(t),i=n.on("change",o=>{this.latestValues[t]=o,this.props.onUpdate&&be.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),a=n.on("renderRequest",this.scheduleRender);let s;window.MotionCheckAppearSync&&(s=window.MotionCheckAppearSync(this,t,n)),this.valueSubscriptions.set(t,()=>{i(),a(),s&&s(),n.owner&&n.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in qi){const n=qi[t];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[t]&&i&&r(this.props)&&(this.features[t]=new i(this)),this.features[t]){const a=this.features[t];a.isMounted?a.update():(a.mount(),a.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Ie()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,n){this.latestValues[t]=n}update(t,n){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<aw.length;r++){const i=aw[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const a="on"+i,s=t[a];s&&(this.propEventSubscriptions[i]=this.on(i,s))}this.prevMotionValues=N2(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(t),()=>n.variantChildren.delete(t)}addValue(t,n){const r=this.values.get(t);n!==r&&(r&&this.removeValue(t),this.bindToMotionValue(t,n),this.values.set(t,n),this.latestValues[t]=n.get())}removeValue(t){this.values.delete(t);const n=this.valueSubscriptions.get(t);n&&(n(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,n){if(this.props.values&&this.props.values[t])return this.props.values[t];let r=this.values.get(t);return r===void 0&&n!==void 0&&(r=as(n===null?void 0:n,{owner:this}),this.addValue(t,r)),r}readValue(t,n){var r;let i=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:(r=this.getBaseTargetFromProps(this.props,t))!==null&&r!==void 0?r:this.readValueFromInstance(this.current,t,this.options);return i!=null&&(typeof i=="string"&&(FT(i)||PT(i))?i=parseFloat(i):!P2(i)&&lr.test(n)&&(i=LT(t,n)),this.setBaseTarget(t,tt(i)?i.get():i)),tt(i)?i.get():i}setBaseTarget(t,n){this.baseTarget[t]=n}getBaseTarget(t){var n;const{initial:r}=this.props;let i;if(typeof r=="string"||typeof r=="object"){const s=uy(this.props,r,(n=this.presenceContext)===null||n===void 0?void 0:n.custom);s&&(i=s[t])}if(r&&i!==void 0)return i;const a=this.getBaseTargetFromProps(this.props,t);return a!==void 0&&!tt(a)?a:this.initialValues[t]!==void 0&&i===void 0?void 0:this.baseTarget[t]}on(t,n){return this.events[t]||(this.events[t]=new _y),this.events[t].add(n)}notify(t,...n){this.events[t]&&this.events[t].notify(...n)}}class gj extends R2{constructor(){super(...arguments),this.KeyframeResolver=zT}sortInstanceNodePosition(t,n){return t.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(t,n){return t.style?t.style[n]:void 0}removeValueFromRenderState(t,{vars:n,style:r}){delete n[t],delete r[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;tt(t)&&(this.childSubscription=t.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function A2(e){return window.getComputedStyle(e)}class I2 extends gj{constructor(){super(...arguments),this.type="html",this.renderInstance=aT}readValueFromInstance(t,n){if($r.has(n)){const r=jy(n);return r&&r.default||0}else{const r=A2(t),i=(nT(n)?r.getPropertyValue(n):r[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(t,{transformPagePoint:n}){return sj(t,n)}build(t,n,r){fy(t,n,r.transformTemplate)}scrapeMotionValuesFromProps(t,n,r){return vy(t,n,r)}}class D2 extends gj{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Ie}getBaseTargetFromProps(t,n){return t[n]}readValueFromInstance(t,n){if($r.has(n)){const r=jy(n);return r&&r.default||0}return n=sT.has(n)?n:sy(n),t.getAttribute(n)}scrapeMotionValuesFromProps(t,n,r){return uT(t,n,r)}build(t,n,r){hy(t,n,this.isSVGTag,r.transformTemplate)}renderInstance(t,n,r,i){oT(t,n,r,i)}mount(t){this.isSVGTag=my(t.tagName),super.mount(t)}}const L2=(e,t)=>ly(e)?new D2(t):new I2(t,{allowProjection:e!==S.Fragment}),O2=lD({...sO,...C2,...m2,...T2},L2),q2=_I(O2);function F2({steps:e,fromRects:t,toRects:n,onComplete:r}){return S.useEffect(()=>{const i=window.setTimeout(r,550);return()=>window.clearTimeout(i)},[r]),h.jsx("div",{className:"morph-layer",children:e.map(i=>{var o;const a=t[i.id],s=n[i.id];return!a||!s?null:h.jsxs(q2.div,{className:`morph-card step-${i.type}`,initial:{left:a.left,top:a.top,width:a.width,height:a.height},animate:{left:s.left,top:s.top,width:s.width,height:s.height},transition:{duration:.5,ease:"easeInOut"},children:[h.jsx("div",{className:"morph-card-title",children:i.name}),h.jsx("div",{className:"morph-card-subtitle",children:((o=i.preview)==null?void 0:o.title)??i.type})]},i.id)})})}function V2({morph:e,onComplete:t,children:n}){return h.jsxs("div",{className:"morph-orchestrator",children:[n,e?h.jsx(F2,{steps:e.steps,fromRects:e.fromRects,toRects:e.toRects,onComplete:t}):null]})}const B2="demo-trace-overlap-001",$2="Overlap + ToolCallId Demo",z2="2026-01-27T10:00:00.000Z",U2="2026-01-27T10:00:05.000Z",G2="completed",H2={source:"openai_agents",agentName:"DemoAgent",modelId:"gpt-4o-2024-11-20",wallTimeMs:5e3,workTimeMs:7200,totalTokens:1400,totalCostUsd:.018},W2=[{id:"s1",index:0,type:"llm_call",name:"plan",startedAt:"2026-01-27T10:00:00.000Z",endedAt:"2026-01-27T10:00:01.000Z",durationMs:1e3,childStepIds:[],metrics:{tokensTotal:300,costUsd:.004},preview:{title:"LLM: plan",subtitle:"gpt-4o",outputPreview:"I'll fetch two sources..."},status:"completed"},{id:"s2",index:1,type:"llm_call",name:"call_tools",startedAt:"2026-01-27T10:00:01.000Z",endedAt:"2026-01-27T10:00:01.200Z",durationMs:200,childStepIds:[],metrics:{tokensTotal:120,costUsd:.002},preview:{title:"LLM: call tools",outputPreview:"Calling web_search + database_query"},io:{emittedToolCallIds:["tc-001","tc-002"]},status:"completed"},{id:"s3",index:2,type:"tool_call",name:"web_search",toolCallId:"tc-001",startedAt:"2026-01-27T10:00:01.200Z",endedAt:"2026-01-27T10:00:03.200Z",durationMs:2e3,childStepIds:[],metrics:{costUsd:0},preview:{title:"Tool: web_search",inputPreview:'{"q":"EU AI Act"}',outputPreview:"[3 results...]"},status:"completed"},{id:"s4",index:3,type:"tool_call",name:"database_query",toolCallId:"tc-002",startedAt:"2026-01-27T10:00:01.500Z",endedAt:"2026-01-27T10:00:02.700Z",durationMs:1200,childStepIds:[],preview:{title:"Tool: database_query",inputPreview:'{"sql":"SELECT..."}',outputPreview:'{"rows":42}'},status:"completed"},{id:"s5",index:4,type:"llm_call",name:"analyze",startedAt:"2026-01-27T10:00:03.200Z",endedAt:"2026-01-27T10:00:04.600Z",durationMs:1400,childStepIds:[],metrics:{tokensTotal:700,costUsd:.012},preview:{title:"LLM: analyze",outputPreview:"Synthesis based on tool outputs..."},io:{consumedToolCallIds:["tc-001","tc-002"]},status:"completed"}],xl={id:B2,name:$2,startedAt:z2,endedAt:U2,status:G2,metadata:H2,steps:W2};function bj(e,t){const n=K2(e,t),r=new Set(n.map(d=>d.leftId)),i=new Set(n.map(d=>d.rightId)),a=t.steps.filter(d=>!i.has(d.id)).map(d=>d.id),s=e.steps.filter(d=>!r.has(d.id)).map(d=>d.id),o=n.filter(d=>{const f=e.steps.find(v=>v.id===d.leftId),m=t.steps.find(v=>v.id===d.rightId);return!f||!m?!1:sw(f)!==sw(m)}),l=o.map(d=>d.leftId),u=(t.metadata.totalCostUsd??0)-(e.metadata.totalCostUsd??0),c=t.metadata.wallTimeMs-e.metadata.wallTimeMs;return{addedSteps:a,removedSteps:s,changedSteps:l,changedPairs:o,alignedSteps:n,costDeltaUsd:u,wallTimeDeltaMs:c}}function K2(e,t){const n=[],r=new Set(e.steps.map(c=>c.id)),i=new Set(t.steps.map(c=>c.id));Array.from(r).forEach(c=>{i.has(c)&&(n.push({leftId:c,rightId:c}),r.delete(c),i.delete(c))});const a=new Map;t.steps.forEach(c=>{c.toolCallId&&a.set(c.toolCallId,c.id)}),e.steps.forEach(c=>{if(!c.toolCallId)return;const d=a.get(c.toolCallId);d&&i.has(d)&&(n.push({leftId:c.id,rightId:d}),r.delete(c.id),i.delete(d))});const s=uw(e),o=uw(t),l=Y2(e,t),u={};return i.forEach(c=>{const d=o.get(c);if(!d)return;const f=ow(d.step);f&&(u[f]||(u[f]=[]),u[f].push(c))}),Object.values(u).forEach(c=>{c.sort((d,f)=>{var m,v;return(((m=o.get(d))==null?void 0:m.startMs)??0)-(((v=o.get(f))==null?void 0:v.startMs)??0)})}),Array.from(r).forEach(c=>{var v;const d=s.get(c);if(!d)return;const f=ow(d.step);if(!f||!((v=u[f])!=null&&v.length))return;const m=Q2(d,u[f],o,l);m&&(n.push({leftId:c,rightId:m}),r.delete(c),i.delete(m),u[f]=u[f].filter(p=>p!==m))}),n}function sw(e){var r,i;const t=((r=e.preview)==null?void 0:r.outputPreview)??null,n=((i=e.metrics)==null?void 0:i.costUsd)??null;return`${e.status}|${t??""}|${n??""}`}function ow(e){return e.type?`${e.type}:${e.name??""}`:null}function lw(e){if(!e)return null;const t=Date.parse(e);return Number.isNaN(t)?null:t}function uw(e){const t=lw(e.startedAt),n=new Map;return e.steps.forEach(r=>{const i=lw(r.startedAt),a=t!=null&&i!=null?i-t:null;n.set(r.id,{step:r,startMs:a})}),n}function Y2(e,t){const n=Math.max(e.metadata.wallTimeMs,t.metadata.wallTimeMs,1);return Math.max(1e3,Math.min(5e3,Math.round(n*.1)))}function Q2(e,t,n,r){const i=e.startMs;if(i==null)return null;let a=null,s=r+1;return t.forEach(o=>{const l=n.get(o);if(!l||l.startMs==null)return;const u=Math.abs(l.startMs-i);u<s&&(s=u,a=o)}),s<=r?a:null}const X2=new Map,J2=new Map,Ir=new Map;async function Z2(){return[xl]}async function wj(e){return{trace:xl}}const eq={s1:{role:"assistant",content:"I'll analyze the user's request and create a plan to fetch information from two sources: a web search for current EU AI Act updates and a database query for historical compliance data.",model:"gpt-4o-2024-11-20",usage:{prompt_tokens:150,completion_tokens:150,total_tokens:300},reasoning:"The user wants comprehensive information about AI regulations. I'll use parallel tool calls to maximize efficiency."},s2:{role:"assistant",content:null,tool_calls:[{id:"tc-001",type:"function",function:{name:"web_search",arguments:'{"q":"EU AI Act latest updates 2026"}'}},{id:"tc-002",type:"function",function:{name:"database_query",arguments:`{"sql":"SELECT * FROM compliance_records WHERE region='EU' ORDER BY date DESC LIMIT 10"}`}}],model:"gpt-4o-2024-11-20",usage:{prompt_tokens:80,completion_tokens:40,total_tokens:120}},s3:{tool_call_id:"tc-001",tool_name:"web_search",input:{q:"EU AI Act latest updates 2026"},output:{results:[{title:"EU AI Act Implementation Timeline",url:"https://example.com/ai-act",snippet:"The EU AI Act enters full force in 2026..."},{title:"High-Risk AI Systems Classification",url:"https://example.com/classification",snippet:"New guidance on high-risk categorization..."},{title:"Compliance Deadlines Approaching",url:"https://example.com/deadlines",snippet:"Organizations must comply by August 2026..."}],total_results:3,search_time_ms:1850},status:"success"},s4:{tool_call_id:"tc-002",tool_name:"database_query",input:{sql:"SELECT * FROM compliance_records WHERE region='EU' ORDER BY date DESC LIMIT 10"},output:{rows:[{id:1,company:"TechCorp",status:"compliant",date:"2026-01-15"},{id:2,company:"AIStartup",status:"in_progress",date:"2026-01-10"},{id:3,company:"DataCo",status:"compliant",date:"2026-01-05"}],row_count:42,query_time_ms:1100},status:"success"},s5:{role:"assistant",content:`Based on my analysis of the web search results and database records:

**Key Findings:**
1. The EU AI Act is now in full effect as of 2026
2. High-risk AI systems require specific compliance measures
3. 42 organizations in our database have compliance records

**Recommendations:**
- Review classification of AI systems
- Ensure documentation is complete
- Schedule compliance audit before August deadline`,model:"gpt-4o-2024-11-20",usage:{prompt_tokens:450,completion_tokens:250,total_tokens:700},reasoning:"Synthesized information from both the web search (3 relevant articles) and database query (42 compliance records) to provide actionable insights."}};function tq(e,t){const n=xl.steps.find(a=>a.id===e);if(!n)return null;const r=eq[e];if(!r)return null;const i=t?nq(r):r;return{...n,data:i}}function nq(e){var n,r;const t=JSON.parse(JSON.stringify(e));return(n=t.input)!=null&&n.sql&&(t.input.sql="[REDACTED]"),(r=t.output)!=null&&r.rows&&(t.output.rows=t.output.rows.map(i=>({...i,company:"[REDACTED]"}))),t.tool_calls&&(t.tool_calls=t.tool_calls.map(i=>({...i,function:{...i.function,arguments:"[REDACTED]"}}))),t}async function rq(e,t,n,r=[],i=!1){return await new Promise(a=>setTimeout(a,150)),tq(t,i)}async function iq(e,t,n){await rq(e,t,"redacted",[],n)}function aq(e,t){return()=>{}}function sq(){X2.clear(),J2.clear()}async function oq(e,t){return null}async function lq(e){return null}async function Y4(e,t){return[]}async function Q4(e,t,n,r,i){return null}async function uq(){return[]}async function cq(e,t){return null}async function dq(e,t,n,r,i){return i?xj(i,t,n,r):null}function xj(e,t,n,r){var v;const i=JSON.parse(JSON.stringify(e)),a=6e4,s=Date.parse("2024-01-01T00:00:00.000Z"),o=Date.parse(e.endedAt??e.startedAt??""),u=(Number.isNaN(o)?s:o)+a,c=new Date(u);i.id=`${e.id}-replay-${u}`,i.parentTraceId=e.id,i.branchPointStepId=t,i.replay={strategy:n,modifiedStepId:t,modifications:r,createdAt:c.toISOString()};const d=p=>{if(!p)return p;const x=Date.parse(p);return Number.isNaN(x)?p:new Date(x+a).toISOString()};i.startedAt=d(i.startedAt)??i.startedAt,i.endedAt=d(i.endedAt);const f=new Set,m=((v=i.steps.find(p=>p.id===t))==null?void 0:v.index)??-1;return n==="live"?i.steps.forEach(p=>{p.index>m&&f.add(p.id)}):n==="hybrid"&&i.steps.forEach(p=>{p.index>m&&f.add(p.id)}),i.steps=i.steps.map(p=>{var y;const x={...p};if(x.startedAt=d(p.startedAt)??p.startedAt,x.endedAt=d(p.endedAt),p.id===t){const g=((y=p.preview)==null?void 0:y.outputPreview)??"";x.preview={...p.preview,outputPreview:`${g} (modified)`.trim()}}return f.has(p.id)&&(x.status="pending",x.endedAt=null,x.durationMs=void 0,x.metrics=void 0,x.preview={...p.preview,outputPreview:"[invalidated for replay]"}),x}),i}async function fq(e){return mq(e)}async function hq(e){var t;return((t=Ir.get(e))==null?void 0:t.job)??null}async function cw(e){var t;return((t=Ir.get(e))==null?void 0:t.matrix)??null}async function pq(e){{const t=Ir.get(e);if(!t)return null;const n={...t.job,status:"canceled",scenarios:t.job.scenarios.map(r=>({...r,status:"canceled",endedAt:r.endedAt??new Date().toISOString()}))};return Ir.set(e,{...t,job:n}),n}}function mq(e){const t=`demo-job-${Date.now()}-${Math.random().toString(36).slice(2,6)}`,n=xl,r=new Date().toISOString(),i=e.scenarios.map((l,u)=>({id:`demo-scn-${u+1}`,name:l.name,strategy:l.strategy,modifications:l.modifications,status:"running",startedAt:r,endedAt:null,replayTraceId:`${t}-replay-${u+1}`})),a={id:t,traceId:e.traceId,stepId:e.stepId,status:"running",createdAt:r,startedAt:r,endedAt:null,scenarioCount:i.length,completedCount:0,failedCount:0,canceledCount:0,scenarios:i},s=i.map(l=>{const u=xj(n,e.stepId,l.strategy,l.modifications);u.id=l.replayTraceId;const c=bj(n,u),d=n.metadata.totalCostUsd??0,f=u.metadata.totalCostUsd??d,m=n.metadata.errorCount??0,v=u.metadata.errorCount??m,p=n.metadata.retryCount??0,x=u.metadata.retryCount??p,y=u.steps.filter(g=>g.status==="pending").length;return{scenarioId:l.id,name:l.name,strategy:l.strategy,status:"completed",replayTraceId:l.replayTraceId,modifications:l.modifications,error:null,changedStepIds:c.changedSteps,addedStepIds:c.addedSteps,removedStepIds:c.removedSteps,metrics:{costDeltaUsd:f-d,wallTimeDeltaMs:(u.metadata.wallTimeMs??0)-(n.metadata.wallTimeMs??0),errorDelta:v-m,retryDelta:x-p,changedSteps:c.changedSteps.length,addedSteps:c.addedSteps.length,removedSteps:c.removedSteps.length,invalidatedStepCount:y}}}),o={jobId:t,traceId:e.traceId,stepId:e.stepId,rows:s,causalRanking:[]};return Ir.set(t,{job:a,matrix:o}),window.setTimeout(()=>{const l=Ir.get(t);if(!l)return;const u=new Date().toISOString(),c=l.job.scenarios.map(m=>({...m,status:"completed",endedAt:u})),d={...l.job,status:"completed",endedAt:u,completedCount:c.length,scenarios:c},f={...l.matrix,rows:l.matrix.rows.map(m=>({...m,status:"completed"}))};Ir.set(t,{job:d,matrix:f})},600),a}async function vq(e){return null}async function dw(e){return null}async function yq(e){return null}async function gq(e){return null}async function fw(e){return{session:null,conflict:!1,error:null}}async function bq(e){return null}async function wq(e){return null}async function xq(e,t){return null}async function Sq(e){return null}async function _q(e,t,n){return null}function kq(e,t,n){return()=>{}}function Eq(){const[e,t]=S.useState(null),[n,r]=S.useState(null),[i,a]=S.useState(!0),[s,o]=S.useState(null),[l,u]=S.useState([]),[c,d]=S.useState(null),f=S.useCallback(async v=>{const p=await wj(),x=(p==null?void 0:p.trace)??null;t(x),r(x?(p==null?void 0:p.insights)??bA(x):null)},[t,r]),m=S.useCallback(async()=>{var v;a(!0),o(null);try{const p=await Z2();u(p);const x=((v=p[p.length-1])==null?void 0:v.id)??null,y=c??x;if(!y){t(null),r(null);return}if(!c||c!==y){d(y);return}await f(y)}catch(p){o(p instanceof Error?p.message:"Failed to load trace")}finally{a(!1)}},[c,f]);return S.useEffect(()=>{m()},[m]),S.useEffect(()=>{c&&(a(!0),f(c).catch(v=>{o(v instanceof Error?v.message:"Failed to load trace")}).finally(()=>a(!1)))},[c,f]),S.useEffect(()=>aq(),[c,d]),{trace:e,insights:n,loading:i,error:s,reload:m,traces:l,selectedTraceId:c,setSelectedTraceId:d}}function Se(e,t){const[n,r]=S.useState(()=>{if(typeof window>"u")return t;try{const i=window.localStorage.getItem(e);return i==null?t:JSON.parse(i)}catch{return t}});return S.useEffect(()=>{try{window.localStorage.setItem(e,JSON.stringify(n))}catch{}},[e,n]),[n,r]}function Ay(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Qu,hw;function Cq(){if(hw)return Qu;hw=1;function e(){this.__data__=[],this.size=0}return Qu=e,Qu}var Xu,pw;function Gi(){if(pw)return Xu;pw=1;function e(t,n){return t===n||t!==t&&n!==n}return Xu=e,Xu}var Ju,mw;function Sl(){if(mw)return Ju;mw=1;var e=Gi();function t(n,r){for(var i=n.length;i--;)if(e(n[i][0],r))return i;return-1}return Ju=t,Ju}var Zu,vw;function Tq(){if(vw)return Zu;vw=1;var e=Sl(),t=Array.prototype,n=t.splice;function r(i){var a=this.__data__,s=e(a,i);if(s<0)return!1;var o=a.length-1;return s==o?a.pop():n.call(a,s,1),--this.size,!0}return Zu=r,Zu}var ec,yw;function jq(){if(yw)return ec;yw=1;var e=Sl();function t(n){var r=this.__data__,i=e(r,n);return i<0?void 0:r[i][1]}return ec=t,ec}var tc,gw;function Mq(){if(gw)return tc;gw=1;var e=Sl();function t(n){return e(this.__data__,n)>-1}return tc=t,tc}var nc,bw;function Pq(){if(bw)return nc;bw=1;var e=Sl();function t(n,r){var i=this.__data__,a=e(i,n);return a<0?(++this.size,i.push([n,r])):i[a][1]=r,this}return nc=t,nc}var rc,ww;function _l(){if(ww)return rc;ww=1;var e=Cq(),t=Tq(),n=jq(),r=Mq(),i=Pq();function a(s){var o=-1,l=s==null?0:s.length;for(this.clear();++o<l;){var u=s[o];this.set(u[0],u[1])}}return a.prototype.clear=e,a.prototype.delete=t,a.prototype.get=n,a.prototype.has=r,a.prototype.set=i,rc=a,rc}var ic,xw;function Nq(){if(xw)return ic;xw=1;var e=_l();function t(){this.__data__=new e,this.size=0}return ic=t,ic}var ac,Sw;function Rq(){if(Sw)return ac;Sw=1;function e(t){var n=this.__data__,r=n.delete(t);return this.size=n.size,r}return ac=e,ac}var sc,_w;function Aq(){if(_w)return sc;_w=1;function e(t){return this.__data__.get(t)}return sc=e,sc}var oc,kw;function Iq(){if(kw)return oc;kw=1;function e(t){return this.__data__.has(t)}return oc=e,oc}var lc,Ew;function Sj(){if(Ew)return lc;Ew=1;var e=typeof Ns=="object"&&Ns&&Ns.Object===Object&&Ns;return lc=e,lc}var uc,Cw;function Wt(){if(Cw)return uc;Cw=1;var e=Sj(),t=typeof self=="object"&&self&&self.Object===Object&&self,n=e||t||Function("return this")();return uc=n,uc}var cc,Tw;function Hi(){if(Tw)return cc;Tw=1;var e=Wt(),t=e.Symbol;return cc=t,cc}var dc,jw;function Dq(){if(jw)return dc;jw=1;var e=Hi(),t=Object.prototype,n=t.hasOwnProperty,r=t.toString,i=e?e.toStringTag:void 0;function a(s){var o=n.call(s,i),l=s[i];try{s[i]=void 0;var u=!0}catch{}var c=r.call(s);return u&&(o?s[i]=l:delete s[i]),c}return dc=a,dc}var fc,Mw;function Lq(){if(Mw)return fc;Mw=1;var e=Object.prototype,t=e.toString;function n(r){return t.call(r)}return fc=n,fc}var hc,Pw;function zr(){if(Pw)return hc;Pw=1;var e=Hi(),t=Dq(),n=Lq(),r="[object Null]",i="[object Undefined]",a=e?e.toStringTag:void 0;function s(o){return o==null?o===void 0?i:r:a&&a in Object(o)?t(o):n(o)}return hc=s,hc}var pc,Nw;function Lt(){if(Nw)return pc;Nw=1;function e(t){var n=typeof t;return t!=null&&(n=="object"||n=="function")}return pc=e,pc}var mc,Rw;function gs(){if(Rw)return mc;Rw=1;var e=zr(),t=Lt(),n="[object AsyncFunction]",r="[object Function]",i="[object GeneratorFunction]",a="[object Proxy]";function s(o){if(!t(o))return!1;var l=e(o);return l==r||l==i||l==n||l==a}return mc=s,mc}var vc,Aw;function Oq(){if(Aw)return vc;Aw=1;var e=Wt(),t=e["__core-js_shared__"];return vc=t,vc}var yc,Iw;function qq(){if(Iw)return yc;Iw=1;var e=Oq(),t=function(){var r=/[^.]+$/.exec(e&&e.keys&&e.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}();function n(r){return!!t&&t in r}return yc=n,yc}var gc,Dw;function _j(){if(Dw)return gc;Dw=1;var e=Function.prototype,t=e.toString;function n(r){if(r!=null){try{return t.call(r)}catch{}try{return r+""}catch{}}return""}return gc=n,gc}var bc,Lw;function Fq(){if(Lw)return bc;Lw=1;var e=gs(),t=qq(),n=Lt(),r=_j(),i=/[\\^$.*+?()[\]{}|]/g,a=/^\[object .+?Constructor\]$/,s=Function.prototype,o=Object.prototype,l=s.toString,u=o.hasOwnProperty,c=RegExp("^"+l.call(u).replace(i,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function d(f){if(!n(f)||t(f))return!1;var m=e(f)?c:a;return m.test(r(f))}return bc=d,bc}var wc,Ow;function Vq(){if(Ow)return wc;Ow=1;function e(t,n){return t==null?void 0:t[n]}return wc=e,wc}var xc,qw;function Ur(){if(qw)return xc;qw=1;var e=Fq(),t=Vq();function n(r,i){var a=t(r,i);return e(a)?a:void 0}return xc=n,xc}var Sc,Fw;function Iy(){if(Fw)return Sc;Fw=1;var e=Ur(),t=Wt(),n=e(t,"Map");return Sc=n,Sc}var _c,Vw;function kl(){if(Vw)return _c;Vw=1;var e=Ur(),t=e(Object,"create");return _c=t,_c}var kc,Bw;function Bq(){if(Bw)return kc;Bw=1;var e=kl();function t(){this.__data__=e?e(null):{},this.size=0}return kc=t,kc}var Ec,$w;function $q(){if($w)return Ec;$w=1;function e(t){var n=this.has(t)&&delete this.__data__[t];return this.size-=n?1:0,n}return Ec=e,Ec}var Cc,zw;function zq(){if(zw)return Cc;zw=1;var e=kl(),t="__lodash_hash_undefined__",n=Object.prototype,r=n.hasOwnProperty;function i(a){var s=this.__data__;if(e){var o=s[a];return o===t?void 0:o}return r.call(s,a)?s[a]:void 0}return Cc=i,Cc}var Tc,Uw;function Uq(){if(Uw)return Tc;Uw=1;var e=kl(),t=Object.prototype,n=t.hasOwnProperty;function r(i){var a=this.__data__;return e?a[i]!==void 0:n.call(a,i)}return Tc=r,Tc}var jc,Gw;function Gq(){if(Gw)return jc;Gw=1;var e=kl(),t="__lodash_hash_undefined__";function n(r,i){var a=this.__data__;return this.size+=this.has(r)?0:1,a[r]=e&&i===void 0?t:i,this}return jc=n,jc}var Mc,Hw;function Hq(){if(Hw)return Mc;Hw=1;var e=Bq(),t=$q(),n=zq(),r=Uq(),i=Gq();function a(s){var o=-1,l=s==null?0:s.length;for(this.clear();++o<l;){var u=s[o];this.set(u[0],u[1])}}return a.prototype.clear=e,a.prototype.delete=t,a.prototype.get=n,a.prototype.has=r,a.prototype.set=i,Mc=a,Mc}var Pc,Ww;function Wq(){if(Ww)return Pc;Ww=1;var e=Hq(),t=_l(),n=Iy();function r(){this.size=0,this.__data__={hash:new e,map:new(n||t),string:new e}}return Pc=r,Pc}var Nc,Kw;function Kq(){if(Kw)return Nc;Kw=1;function e(t){var n=typeof t;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?t!=="__proto__":t===null}return Nc=e,Nc}var Rc,Yw;function El(){if(Yw)return Rc;Yw=1;var e=Kq();function t(n,r){var i=n.__data__;return e(r)?i[typeof r=="string"?"string":"hash"]:i.map}return Rc=t,Rc}var Ac,Qw;function Yq(){if(Qw)return Ac;Qw=1;var e=El();function t(n){var r=e(this,n).delete(n);return this.size-=r?1:0,r}return Ac=t,Ac}var Ic,Xw;function Qq(){if(Xw)return Ic;Xw=1;var e=El();function t(n){return e(this,n).get(n)}return Ic=t,Ic}var Dc,Jw;function Xq(){if(Jw)return Dc;Jw=1;var e=El();function t(n){return e(this,n).has(n)}return Dc=t,Dc}var Lc,Zw;function Jq(){if(Zw)return Lc;Zw=1;var e=El();function t(n,r){var i=e(this,n),a=i.size;return i.set(n,r),this.size+=i.size==a?0:1,this}return Lc=t,Lc}var Oc,e1;function Dy(){if(e1)return Oc;e1=1;var e=Wq(),t=Yq(),n=Qq(),r=Xq(),i=Jq();function a(s){var o=-1,l=s==null?0:s.length;for(this.clear();++o<l;){var u=s[o];this.set(u[0],u[1])}}return a.prototype.clear=e,a.prototype.delete=t,a.prototype.get=n,a.prototype.has=r,a.prototype.set=i,Oc=a,Oc}var qc,t1;function Zq(){if(t1)return qc;t1=1;var e=_l(),t=Iy(),n=Dy(),r=200;function i(a,s){var o=this.__data__;if(o instanceof e){var l=o.__data__;if(!t||l.length<r-1)return l.push([a,s]),this.size=++o.size,this;o=this.__data__=new n(l)}return o.set(a,s),this.size=o.size,this}return qc=i,qc}var Fc,n1;function Cl(){if(n1)return Fc;n1=1;var e=_l(),t=Nq(),n=Rq(),r=Aq(),i=Iq(),a=Zq();function s(o){var l=this.__data__=new e(o);this.size=l.size}return s.prototype.clear=t,s.prototype.delete=n,s.prototype.get=r,s.prototype.has=i,s.prototype.set=a,Fc=s,Fc}var Vc,r1;function Ly(){if(r1)return Vc;r1=1;function e(t,n){for(var r=-1,i=t==null?0:t.length;++r<i&&n(t[r],r,t)!==!1;);return t}return Vc=e,Vc}var Bc,i1;function kj(){if(i1)return Bc;i1=1;var e=Ur(),t=function(){try{var n=e(Object,"defineProperty");return n({},"",{}),n}catch{}}();return Bc=t,Bc}var $c,a1;function Tl(){if(a1)return $c;a1=1;var e=kj();function t(n,r,i){r=="__proto__"&&e?e(n,r,{configurable:!0,enumerable:!0,value:i,writable:!0}):n[r]=i}return $c=t,$c}var zc,s1;function jl(){if(s1)return zc;s1=1;var e=Tl(),t=Gi(),n=Object.prototype,r=n.hasOwnProperty;function i(a,s,o){var l=a[s];(!(r.call(a,s)&&t(l,o))||o===void 0&&!(s in a))&&e(a,s,o)}return zc=i,zc}var Uc,o1;function bs(){if(o1)return Uc;o1=1;var e=jl(),t=Tl();function n(r,i,a,s){var o=!a;a||(a={});for(var l=-1,u=i.length;++l<u;){var c=i[l],d=s?s(a[c],r[c],c,a,r):void 0;d===void 0&&(d=r[c]),o?t(a,c,d):e(a,c,d)}return a}return Uc=n,Uc}var Gc,l1;function eF(){if(l1)return Gc;l1=1;function e(t,n){for(var r=-1,i=Array(t);++r<t;)i[r]=n(r);return i}return Gc=e,Gc}var Hc,u1;function on(){if(u1)return Hc;u1=1;function e(t){return t!=null&&typeof t=="object"}return Hc=e,Hc}var Wc,c1;function tF(){if(c1)return Wc;c1=1;var e=zr(),t=on(),n="[object Arguments]";function r(i){return t(i)&&e(i)==n}return Wc=r,Wc}var Kc,d1;function ws(){if(d1)return Kc;d1=1;var e=tF(),t=on(),n=Object.prototype,r=n.hasOwnProperty,i=n.propertyIsEnumerable,a=e(function(){return arguments}())?e:function(s){return t(s)&&r.call(s,"callee")&&!i.call(s,"callee")};return Kc=a,Kc}var Yc,f1;function Fe(){if(f1)return Yc;f1=1;var e=Array.isArray;return Yc=e,Yc}var xa={exports:{}},Qc,h1;function nF(){if(h1)return Qc;h1=1;function e(){return!1}return Qc=e,Qc}xa.exports;var p1;function Wi(){return p1||(p1=1,function(e,t){var n=Wt(),r=nF(),i=t&&!t.nodeType&&t,a=i&&!0&&e&&!e.nodeType&&e,s=a&&a.exports===i,o=s?n.Buffer:void 0,l=o?o.isBuffer:void 0,u=l||r;e.exports=u}(xa,xa.exports)),xa.exports}var Xc,m1;function Ml(){if(m1)return Xc;m1=1;var e=9007199254740991,t=/^(?:0|[1-9]\d*)$/;function n(r,i){var a=typeof r;return i=i??e,!!i&&(a=="number"||a!="symbol"&&t.test(r))&&r>-1&&r%1==0&&r<i}return Xc=n,Xc}var Jc,v1;function Oy(){if(v1)return Jc;v1=1;var e=9007199254740991;function t(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=e}return Jc=t,Jc}var Zc,y1;function rF(){if(y1)return Zc;y1=1;var e=zr(),t=Oy(),n=on(),r="[object Arguments]",i="[object Array]",a="[object Boolean]",s="[object Date]",o="[object Error]",l="[object Function]",u="[object Map]",c="[object Number]",d="[object Object]",f="[object RegExp]",m="[object Set]",v="[object String]",p="[object WeakMap]",x="[object ArrayBuffer]",y="[object DataView]",g="[object Float32Array]",w="[object Float64Array]",_="[object Int8Array]",E="[object Int16Array]",T="[object Int32Array]",j="[object Uint8Array]",C="[object Uint8ClampedArray]",M="[object Uint16Array]",P="[object Uint32Array]",R={};R[g]=R[w]=R[_]=R[E]=R[T]=R[j]=R[C]=R[M]=R[P]=!0,R[r]=R[i]=R[x]=R[a]=R[y]=R[s]=R[o]=R[l]=R[u]=R[c]=R[d]=R[f]=R[m]=R[v]=R[p]=!1;function I(O){return n(O)&&t(O.length)&&!!R[e(O)]}return Zc=I,Zc}var ed,g1;function Pl(){if(g1)return ed;g1=1;function e(t){return function(n){return t(n)}}return ed=e,ed}var Sa={exports:{}};Sa.exports;var b1;function qy(){return b1||(b1=1,function(e,t){var n=Sj(),r=t&&!t.nodeType&&t,i=r&&!0&&e&&!e.nodeType&&e,a=i&&i.exports===r,s=a&&n.process,o=function(){try{var l=i&&i.require&&i.require("util").types;return l||s&&s.binding&&s.binding("util")}catch{}}();e.exports=o}(Sa,Sa.exports)),Sa.exports}var td,w1;function xs(){if(w1)return td;w1=1;var e=rF(),t=Pl(),n=qy(),r=n&&n.isTypedArray,i=r?t(r):e;return td=i,td}var nd,x1;function Ej(){if(x1)return nd;x1=1;var e=eF(),t=ws(),n=Fe(),r=Wi(),i=Ml(),a=xs(),s=Object.prototype,o=s.hasOwnProperty;function l(u,c){var d=n(u),f=!d&&t(u),m=!d&&!f&&r(u),v=!d&&!f&&!m&&a(u),p=d||f||m||v,x=p?e(u.length,String):[],y=x.length;for(var g in u)(c||o.call(u,g))&&!(p&&(g=="length"||m&&(g=="offset"||g=="parent")||v&&(g=="buffer"||g=="byteLength"||g=="byteOffset")||i(g,y)))&&x.push(g);return x}return nd=l,nd}var rd,S1;function Nl(){if(S1)return rd;S1=1;var e=Object.prototype;function t(n){var r=n&&n.constructor,i=typeof r=="function"&&r.prototype||e;return n===i}return rd=t,rd}var id,_1;function Cj(){if(_1)return id;_1=1;function e(t,n){return function(r){return t(n(r))}}return id=e,id}var ad,k1;function iF(){if(k1)return ad;k1=1;var e=Cj(),t=e(Object.keys,Object);return ad=t,ad}var sd,E1;function Fy(){if(E1)return sd;E1=1;var e=Nl(),t=iF(),n=Object.prototype,r=n.hasOwnProperty;function i(a){if(!e(a))return t(a);var s=[];for(var o in Object(a))r.call(a,o)&&o!="constructor"&&s.push(o);return s}return sd=i,sd}var od,C1;function Nn(){if(C1)return od;C1=1;var e=gs(),t=Oy();function n(r){return r!=null&&t(r.length)&&!e(r)}return od=n,od}var ld,T1;function pr(){if(T1)return ld;T1=1;var e=Ej(),t=Fy(),n=Nn();function r(i){return n(i)?e(i):t(i)}return ld=r,ld}var ud,j1;function aF(){if(j1)return ud;j1=1;var e=bs(),t=pr();function n(r,i){return r&&e(i,t(i),r)}return ud=n,ud}var cd,M1;function sF(){if(M1)return cd;M1=1;function e(t){var n=[];if(t!=null)for(var r in Object(t))n.push(r);return n}return cd=e,cd}var dd,P1;function oF(){if(P1)return dd;P1=1;var e=Lt(),t=Nl(),n=sF(),r=Object.prototype,i=r.hasOwnProperty;function a(s){if(!e(s))return n(s);var o=t(s),l=[];for(var u in s)u=="constructor"&&(o||!i.call(s,u))||l.push(u);return l}return dd=a,dd}var fd,N1;function Gr(){if(N1)return fd;N1=1;var e=Ej(),t=oF(),n=Nn();function r(i){return n(i)?e(i,!0):t(i)}return fd=r,fd}var hd,R1;function lF(){if(R1)return hd;R1=1;var e=bs(),t=Gr();function n(r,i){return r&&e(i,t(i),r)}return hd=n,hd}var _a={exports:{}};_a.exports;var A1;function Tj(){return A1||(A1=1,function(e,t){var n=Wt(),r=t&&!t.nodeType&&t,i=r&&!0&&e&&!e.nodeType&&e,a=i&&i.exports===r,s=a?n.Buffer:void 0,o=s?s.allocUnsafe:void 0;function l(u,c){if(c)return u.slice();var d=u.length,f=o?o(d):new u.constructor(d);return u.copy(f),f}e.exports=l}(_a,_a.exports)),_a.exports}var pd,I1;function jj(){if(I1)return pd;I1=1;function e(t,n){var r=-1,i=t.length;for(n||(n=Array(i));++r<i;)n[r]=t[r];return n}return pd=e,pd}var md,D1;function Mj(){if(D1)return md;D1=1;function e(t,n){for(var r=-1,i=t==null?0:t.length,a=0,s=[];++r<i;){var o=t[r];n(o,r,t)&&(s[a++]=o)}return s}return md=e,md}var vd,L1;function Pj(){if(L1)return vd;L1=1;function e(){return[]}return vd=e,vd}var yd,O1;function Vy(){if(O1)return yd;O1=1;var e=Mj(),t=Pj(),n=Object.prototype,r=n.propertyIsEnumerable,i=Object.getOwnPropertySymbols,a=i?function(s){return s==null?[]:(s=Object(s),e(i(s),function(o){return r.call(s,o)}))}:t;return yd=a,yd}var gd,q1;function uF(){if(q1)return gd;q1=1;var e=bs(),t=Vy();function n(r,i){return e(r,t(r),i)}return gd=n,gd}var bd,F1;function By(){if(F1)return bd;F1=1;function e(t,n){for(var r=-1,i=n.length,a=t.length;++r<i;)t[a+r]=n[r];return t}return bd=e,bd}var wd,V1;function Rl(){if(V1)return wd;V1=1;var e=Cj(),t=e(Object.getPrototypeOf,Object);return wd=t,wd}var xd,B1;function Nj(){if(B1)return xd;B1=1;var e=By(),t=Rl(),n=Vy(),r=Pj(),i=Object.getOwnPropertySymbols,a=i?function(s){for(var o=[];s;)e(o,n(s)),s=t(s);return o}:r;return xd=a,xd}var Sd,$1;function cF(){if($1)return Sd;$1=1;var e=bs(),t=Nj();function n(r,i){return e(r,t(r),i)}return Sd=n,Sd}var _d,z1;function Rj(){if(z1)return _d;z1=1;var e=By(),t=Fe();function n(r,i,a){var s=i(r);return t(r)?s:e(s,a(r))}return _d=n,_d}var kd,U1;function Aj(){if(U1)return kd;U1=1;var e=Rj(),t=Vy(),n=pr();function r(i){return e(i,n,t)}return kd=r,kd}var Ed,G1;function dF(){if(G1)return Ed;G1=1;var e=Rj(),t=Nj(),n=Gr();function r(i){return e(i,n,t)}return Ed=r,Ed}var Cd,H1;function fF(){if(H1)return Cd;H1=1;var e=Ur(),t=Wt(),n=e(t,"DataView");return Cd=n,Cd}var Td,W1;function hF(){if(W1)return Td;W1=1;var e=Ur(),t=Wt(),n=e(t,"Promise");return Td=n,Td}var jd,K1;function Ij(){if(K1)return jd;K1=1;var e=Ur(),t=Wt(),n=e(t,"Set");return jd=n,jd}var Md,Y1;function pF(){if(Y1)return Md;Y1=1;var e=Ur(),t=Wt(),n=e(t,"WeakMap");return Md=n,Md}var Pd,Q1;function Ki(){if(Q1)return Pd;Q1=1;var e=fF(),t=Iy(),n=hF(),r=Ij(),i=pF(),a=zr(),s=_j(),o="[object Map]",l="[object Object]",u="[object Promise]",c="[object Set]",d="[object WeakMap]",f="[object DataView]",m=s(e),v=s(t),p=s(n),x=s(r),y=s(i),g=a;return(e&&g(new e(new ArrayBuffer(1)))!=f||t&&g(new t)!=o||n&&g(n.resolve())!=u||r&&g(new r)!=c||i&&g(new i)!=d)&&(g=function(w){var _=a(w),E=_==l?w.constructor:void 0,T=E?s(E):"";if(T)switch(T){case m:return f;case v:return o;case p:return u;case x:return c;case y:return d}return _}),Pd=g,Pd}var Nd,X1;function mF(){if(X1)return Nd;X1=1;var e=Object.prototype,t=e.hasOwnProperty;function n(r){var i=r.length,a=new r.constructor(i);return i&&typeof r[0]=="string"&&t.call(r,"index")&&(a.index=r.index,a.input=r.input),a}return Nd=n,Nd}var Rd,J1;function Dj(){if(J1)return Rd;J1=1;var e=Wt(),t=e.Uint8Array;return Rd=t,Rd}var Ad,Z1;function $y(){if(Z1)return Ad;Z1=1;var e=Dj();function t(n){var r=new n.constructor(n.byteLength);return new e(r).set(new e(n)),r}return Ad=t,Ad}var Id,ex;function vF(){if(ex)return Id;ex=1;var e=$y();function t(n,r){var i=r?e(n.buffer):n.buffer;return new n.constructor(i,n.byteOffset,n.byteLength)}return Id=t,Id}var Dd,tx;function yF(){if(tx)return Dd;tx=1;var e=/\w*$/;function t(n){var r=new n.constructor(n.source,e.exec(n));return r.lastIndex=n.lastIndex,r}return Dd=t,Dd}var Ld,nx;function gF(){if(nx)return Ld;nx=1;var e=Hi(),t=e?e.prototype:void 0,n=t?t.valueOf:void 0;function r(i){return n?Object(n.call(i)):{}}return Ld=r,Ld}var Od,rx;function Lj(){if(rx)return Od;rx=1;var e=$y();function t(n,r){var i=r?e(n.buffer):n.buffer;return new n.constructor(i,n.byteOffset,n.length)}return Od=t,Od}var qd,ix;function bF(){if(ix)return qd;ix=1;var e=$y(),t=vF(),n=yF(),r=gF(),i=Lj(),a="[object Boolean]",s="[object Date]",o="[object Map]",l="[object Number]",u="[object RegExp]",c="[object Set]",d="[object String]",f="[object Symbol]",m="[object ArrayBuffer]",v="[object DataView]",p="[object Float32Array]",x="[object Float64Array]",y="[object Int8Array]",g="[object Int16Array]",w="[object Int32Array]",_="[object Uint8Array]",E="[object Uint8ClampedArray]",T="[object Uint16Array]",j="[object Uint32Array]";function C(M,P,R){var I=M.constructor;switch(P){case m:return e(M);case a:case s:return new I(+M);case v:return t(M,R);case p:case x:case y:case g:case w:case _:case E:case T:case j:return i(M,R);case o:return new I;case l:case d:return new I(M);case u:return n(M);case c:return new I;case f:return r(M)}}return qd=C,qd}var Fd,ax;function Oj(){if(ax)return Fd;ax=1;var e=Lt(),t=Object.create,n=function(){function r(){}return function(i){if(!e(i))return{};if(t)return t(i);r.prototype=i;var a=new r;return r.prototype=void 0,a}}();return Fd=n,Fd}var Vd,sx;function qj(){if(sx)return Vd;sx=1;var e=Oj(),t=Rl(),n=Nl();function r(i){return typeof i.constructor=="function"&&!n(i)?e(t(i)):{}}return Vd=r,Vd}var Bd,ox;function wF(){if(ox)return Bd;ox=1;var e=Ki(),t=on(),n="[object Map]";function r(i){return t(i)&&e(i)==n}return Bd=r,Bd}var $d,lx;function xF(){if(lx)return $d;lx=1;var e=wF(),t=Pl(),n=qy(),r=n&&n.isMap,i=r?t(r):e;return $d=i,$d}var zd,ux;function SF(){if(ux)return zd;ux=1;var e=Ki(),t=on(),n="[object Set]";function r(i){return t(i)&&e(i)==n}return zd=r,zd}var Ud,cx;function _F(){if(cx)return Ud;cx=1;var e=SF(),t=Pl(),n=qy(),r=n&&n.isSet,i=r?t(r):e;return Ud=i,Ud}var Gd,dx;function Fj(){if(dx)return Gd;dx=1;var e=Cl(),t=Ly(),n=jl(),r=aF(),i=lF(),a=Tj(),s=jj(),o=uF(),l=cF(),u=Aj(),c=dF(),d=Ki(),f=mF(),m=bF(),v=qj(),p=Fe(),x=Wi(),y=xF(),g=Lt(),w=_F(),_=pr(),E=Gr(),T=1,j=2,C=4,M="[object Arguments]",P="[object Array]",R="[object Boolean]",I="[object Date]",O="[object Error]",K="[object Function]",V="[object GeneratorFunction]",le="[object Map]",ie="[object Number]",A="[object Object]",q="[object RegExp]",U="[object Set]",z="[object String]",ae="[object Symbol]",Te="[object WeakMap]",oe="[object ArrayBuffer]",ce="[object DataView]",B="[object Float32Array]",de="[object Float64Array]",Et="[object Int8Array]",ln="[object Int16Array]",Yt="[object Int32Array]",mr="[object Uint8Array]",Kr="[object Uint8ClampedArray]",F="[object Uint16Array]",te="[object Uint32Array]",Q={};Q[M]=Q[P]=Q[oe]=Q[ce]=Q[R]=Q[I]=Q[B]=Q[de]=Q[Et]=Q[ln]=Q[Yt]=Q[le]=Q[ie]=Q[A]=Q[q]=Q[U]=Q[z]=Q[ae]=Q[mr]=Q[Kr]=Q[F]=Q[te]=!0,Q[O]=Q[K]=Q[Te]=!1;function Le(ne,Oe,An,Bl,un,ze){var pe,In=Oe&T,Dn=Oe&j,$l=Oe&C;if(An&&(pe=un?An(ne,Bl,un,ze):An(ne)),pe!==void 0)return pe;if(!g(ne))return ne;var Yr=p(ne);if(Yr){if(pe=f(ne),!In)return s(ne,pe)}else{var lt=d(ne),_s=lt==K||lt==V;if(x(ne))return a(ne,In);if(lt==A||lt==M||_s&&!un){if(pe=Dn||_s?{}:v(ne),!In)return Dn?l(ne,i(pe,ne)):o(ne,r(pe,ne))}else{if(!Q[lt])return un?ne:{};pe=m(ne,lt,In)}}ze||(ze=new e);var ks=ze.get(ne);if(ks)return ks;ze.set(ne,pe),w(ne)?ne.forEach(function(Qt){pe.add(Le(Qt,Oe,An,Qt,ne,ze))}):y(ne)&&ne.forEach(function(Qt,qt){pe.set(qt,Le(Qt,Oe,An,qt,ne,ze))});var Qi=$l?Dn?c:u:Dn?E:_,vr=Yr?void 0:Qi(ne);return t(vr||ne,function(Qt,qt){vr&&(qt=Qt,Qt=ne[qt]),n(pe,qt,Le(Qt,Oe,An,qt,ne,ze))}),pe}return Gd=Le,Gd}var Hd,fx;function kF(){if(fx)return Hd;fx=1;var e=Fj(),t=4;function n(r){return e(r,t)}return Hd=n,Hd}var Wd,hx;function zy(){if(hx)return Wd;hx=1;function e(t){return function(){return t}}return Wd=e,Wd}var Kd,px;function EF(){if(px)return Kd;px=1;function e(t){return function(n,r,i){for(var a=-1,s=Object(n),o=i(n),l=o.length;l--;){var u=o[t?l:++a];if(r(s[u],u,s)===!1)break}return n}}return Kd=e,Kd}var Yd,mx;function Uy(){if(mx)return Yd;mx=1;var e=EF(),t=e();return Yd=t,Yd}var Qd,vx;function Gy(){if(vx)return Qd;vx=1;var e=Uy(),t=pr();function n(r,i){return r&&e(r,i,t)}return Qd=n,Qd}var Xd,yx;function CF(){if(yx)return Xd;yx=1;var e=Nn();function t(n,r){return function(i,a){if(i==null)return i;if(!e(i))return n(i,a);for(var s=i.length,o=r?s:-1,l=Object(i);(r?o--:++o<s)&&a(l[o],o,l)!==!1;);return i}}return Xd=t,Xd}var Jd,gx;function Al(){if(gx)return Jd;gx=1;var e=Gy(),t=CF(),n=t(e);return Jd=n,Jd}var Zd,bx;function Hr(){if(bx)return Zd;bx=1;function e(t){return t}return Zd=e,Zd}var ef,wx;function Vj(){if(wx)return ef;wx=1;var e=Hr();function t(n){return typeof n=="function"?n:e}return ef=t,ef}var tf,xx;function Bj(){if(xx)return tf;xx=1;var e=Ly(),t=Al(),n=Vj(),r=Fe();function i(a,s){var o=r(a)?e:t;return o(a,n(s))}return tf=i,tf}var nf,Sx;function $j(){return Sx||(Sx=1,nf=Bj()),nf}var rf,_x;function TF(){if(_x)return rf;_x=1;var e=Al();function t(n,r){var i=[];return e(n,function(a,s,o){r(a,s,o)&&i.push(a)}),i}return rf=t,rf}var af,kx;function jF(){if(kx)return af;kx=1;var e="__lodash_hash_undefined__";function t(n){return this.__data__.set(n,e),this}return af=t,af}var sf,Ex;function MF(){if(Ex)return sf;Ex=1;function e(t){return this.__data__.has(t)}return sf=e,sf}var of,Cx;function zj(){if(Cx)return of;Cx=1;var e=Dy(),t=jF(),n=MF();function r(i){var a=-1,s=i==null?0:i.length;for(this.__data__=new e;++a<s;)this.add(i[a])}return r.prototype.add=r.prototype.push=t,r.prototype.has=n,of=r,of}var lf,Tx;function PF(){if(Tx)return lf;Tx=1;function e(t,n){for(var r=-1,i=t==null?0:t.length;++r<i;)if(n(t[r],r,t))return!0;return!1}return lf=e,lf}var uf,jx;function Uj(){if(jx)return uf;jx=1;function e(t,n){return t.has(n)}return uf=e,uf}var cf,Mx;function Gj(){if(Mx)return cf;Mx=1;var e=zj(),t=PF(),n=Uj(),r=1,i=2;function a(s,o,l,u,c,d){var f=l&r,m=s.length,v=o.length;if(m!=v&&!(f&&v>m))return!1;var p=d.get(s),x=d.get(o);if(p&&x)return p==o&&x==s;var y=-1,g=!0,w=l&i?new e:void 0;for(d.set(s,o),d.set(o,s);++y<m;){var _=s[y],E=o[y];if(u)var T=f?u(E,_,y,o,s,d):u(_,E,y,s,o,d);if(T!==void 0){if(T)continue;g=!1;break}if(w){if(!t(o,function(j,C){if(!n(w,C)&&(_===j||c(_,j,l,u,d)))return w.push(C)})){g=!1;break}}else if(!(_===E||c(_,E,l,u,d))){g=!1;break}}return d.delete(s),d.delete(o),g}return cf=a,cf}var df,Px;function NF(){if(Px)return df;Px=1;function e(t){var n=-1,r=Array(t.size);return t.forEach(function(i,a){r[++n]=[a,i]}),r}return df=e,df}var ff,Nx;function Hy(){if(Nx)return ff;Nx=1;function e(t){var n=-1,r=Array(t.size);return t.forEach(function(i){r[++n]=i}),r}return ff=e,ff}var hf,Rx;function RF(){if(Rx)return hf;Rx=1;var e=Hi(),t=Dj(),n=Gi(),r=Gj(),i=NF(),a=Hy(),s=1,o=2,l="[object Boolean]",u="[object Date]",c="[object Error]",d="[object Map]",f="[object Number]",m="[object RegExp]",v="[object Set]",p="[object String]",x="[object Symbol]",y="[object ArrayBuffer]",g="[object DataView]",w=e?e.prototype:void 0,_=w?w.valueOf:void 0;function E(T,j,C,M,P,R,I){switch(C){case g:if(T.byteLength!=j.byteLength||T.byteOffset!=j.byteOffset)return!1;T=T.buffer,j=j.buffer;case y:return!(T.byteLength!=j.byteLength||!R(new t(T),new t(j)));case l:case u:case f:return n(+T,+j);case c:return T.name==j.name&&T.message==j.message;case m:case p:return T==j+"";case d:var O=i;case v:var K=M&s;if(O||(O=a),T.size!=j.size&&!K)return!1;var V=I.get(T);if(V)return V==j;M|=o,I.set(T,j);var le=r(O(T),O(j),M,P,R,I);return I.delete(T),le;case x:if(_)return _.call(T)==_.call(j)}return!1}return hf=E,hf}var pf,Ax;function AF(){if(Ax)return pf;Ax=1;var e=Aj(),t=1,n=Object.prototype,r=n.hasOwnProperty;function i(a,s,o,l,u,c){var d=o&t,f=e(a),m=f.length,v=e(s),p=v.length;if(m!=p&&!d)return!1;for(var x=m;x--;){var y=f[x];if(!(d?y in s:r.call(s,y)))return!1}var g=c.get(a),w=c.get(s);if(g&&w)return g==s&&w==a;var _=!0;c.set(a,s),c.set(s,a);for(var E=d;++x<m;){y=f[x];var T=a[y],j=s[y];if(l)var C=d?l(j,T,y,s,a,c):l(T,j,y,a,s,c);if(!(C===void 0?T===j||u(T,j,o,l,c):C)){_=!1;break}E||(E=y=="constructor")}if(_&&!E){var M=a.constructor,P=s.constructor;M!=P&&"constructor"in a&&"constructor"in s&&!(typeof M=="function"&&M instanceof M&&typeof P=="function"&&P instanceof P)&&(_=!1)}return c.delete(a),c.delete(s),_}return pf=i,pf}var mf,Ix;function IF(){if(Ix)return mf;Ix=1;var e=Cl(),t=Gj(),n=RF(),r=AF(),i=Ki(),a=Fe(),s=Wi(),o=xs(),l=1,u="[object Arguments]",c="[object Array]",d="[object Object]",f=Object.prototype,m=f.hasOwnProperty;function v(p,x,y,g,w,_){var E=a(p),T=a(x),j=E?c:i(p),C=T?c:i(x);j=j==u?d:j,C=C==u?d:C;var M=j==d,P=C==d,R=j==C;if(R&&s(p)){if(!s(x))return!1;E=!0,M=!1}if(R&&!M)return _||(_=new e),E||o(p)?t(p,x,y,g,w,_):n(p,x,j,y,g,w,_);if(!(y&l)){var I=M&&m.call(p,"__wrapped__"),O=P&&m.call(x,"__wrapped__");if(I||O){var K=I?p.value():p,V=O?x.value():x;return _||(_=new e),w(K,V,y,g,_)}}return R?(_||(_=new e),r(p,x,y,g,w,_)):!1}return mf=v,mf}var vf,Dx;function Hj(){if(Dx)return vf;Dx=1;var e=IF(),t=on();function n(r,i,a,s,o){return r===i?!0:r==null||i==null||!t(r)&&!t(i)?r!==r&&i!==i:e(r,i,a,s,n,o)}return vf=n,vf}var yf,Lx;function DF(){if(Lx)return yf;Lx=1;var e=Cl(),t=Hj(),n=1,r=2;function i(a,s,o,l){var u=o.length,c=u,d=!l;if(a==null)return!c;for(a=Object(a);u--;){var f=o[u];if(d&&f[2]?f[1]!==a[f[0]]:!(f[0]in a))return!1}for(;++u<c;){f=o[u];var m=f[0],v=a[m],p=f[1];if(d&&f[2]){if(v===void 0&&!(m in a))return!1}else{var x=new e;if(l)var y=l(v,p,m,a,s,x);if(!(y===void 0?t(p,v,n|r,l,x):y))return!1}}return!0}return yf=i,yf}var gf,Ox;function Wj(){if(Ox)return gf;Ox=1;var e=Lt();function t(n){return n===n&&!e(n)}return gf=t,gf}var bf,qx;function LF(){if(qx)return bf;qx=1;var e=Wj(),t=pr();function n(r){for(var i=t(r),a=i.length;a--;){var s=i[a],o=r[s];i[a]=[s,o,e(o)]}return i}return bf=n,bf}var wf,Fx;function Kj(){if(Fx)return wf;Fx=1;function e(t,n){return function(r){return r==null?!1:r[t]===n&&(n!==void 0||t in Object(r))}}return wf=e,wf}var xf,Vx;function OF(){if(Vx)return xf;Vx=1;var e=DF(),t=LF(),n=Kj();function r(i){var a=t(i);return a.length==1&&a[0][2]?n(a[0][0],a[0][1]):function(s){return s===i||e(s,i,a)}}return xf=r,xf}var Sf,Bx;function Yi(){if(Bx)return Sf;Bx=1;var e=zr(),t=on(),n="[object Symbol]";function r(i){return typeof i=="symbol"||t(i)&&e(i)==n}return Sf=r,Sf}var _f,$x;function Wy(){if($x)return _f;$x=1;var e=Fe(),t=Yi(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function i(a,s){if(e(a))return!1;var o=typeof a;return o=="number"||o=="symbol"||o=="boolean"||a==null||t(a)?!0:r.test(a)||!n.test(a)||s!=null&&a in Object(s)}return _f=i,_f}var kf,zx;function qF(){if(zx)return kf;zx=1;var e=Dy(),t="Expected a function";function n(r,i){if(typeof r!="function"||i!=null&&typeof i!="function")throw new TypeError(t);var a=function(){var s=arguments,o=i?i.apply(this,s):s[0],l=a.cache;if(l.has(o))return l.get(o);var u=r.apply(this,s);return a.cache=l.set(o,u)||l,u};return a.cache=new(n.Cache||e),a}return n.Cache=e,kf=n,kf}var Ef,Ux;function FF(){if(Ux)return Ef;Ux=1;var e=qF(),t=500;function n(r){var i=e(r,function(s){return a.size===t&&a.clear(),s}),a=i.cache;return i}return Ef=n,Ef}var Cf,Gx;function VF(){if(Gx)return Cf;Gx=1;var e=FF(),t=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,n=/\\(\\)?/g,r=e(function(i){var a=[];return i.charCodeAt(0)===46&&a.push(""),i.replace(t,function(s,o,l,u){a.push(l?u.replace(n,"$1"):o||s)}),a});return Cf=r,Cf}var Tf,Hx;function Il(){if(Hx)return Tf;Hx=1;function e(t,n){for(var r=-1,i=t==null?0:t.length,a=Array(i);++r<i;)a[r]=n(t[r],r,t);return a}return Tf=e,Tf}var jf,Wx;function BF(){if(Wx)return jf;Wx=1;var e=Hi(),t=Il(),n=Fe(),r=Yi(),i=e?e.prototype:void 0,a=i?i.toString:void 0;function s(o){if(typeof o=="string")return o;if(n(o))return t(o,s)+"";if(r(o))return a?a.call(o):"";var l=o+"";return l=="0"&&1/o==-1/0?"-0":l}return jf=s,jf}var Mf,Kx;function Yj(){if(Kx)return Mf;Kx=1;var e=BF();function t(n){return n==null?"":e(n)}return Mf=t,Mf}var Pf,Yx;function Dl(){if(Yx)return Pf;Yx=1;var e=Fe(),t=Wy(),n=VF(),r=Yj();function i(a,s){return e(a)?a:t(a,s)?[a]:n(r(a))}return Pf=i,Pf}var Nf,Qx;function Ss(){if(Qx)return Nf;Qx=1;var e=Yi();function t(n){if(typeof n=="string"||e(n))return n;var r=n+"";return r=="0"&&1/n==-1/0?"-0":r}return Nf=t,Nf}var Rf,Xx;function Ll(){if(Xx)return Rf;Xx=1;var e=Dl(),t=Ss();function n(r,i){i=e(i,r);for(var a=0,s=i.length;r!=null&&a<s;)r=r[t(i[a++])];return a&&a==s?r:void 0}return Rf=n,Rf}var Af,Jx;function $F(){if(Jx)return Af;Jx=1;var e=Ll();function t(n,r,i){var a=n==null?void 0:e(n,r);return a===void 0?i:a}return Af=t,Af}var If,Zx;function zF(){if(Zx)return If;Zx=1;function e(t,n){return t!=null&&n in Object(t)}return If=e,If}var Df,eS;function Qj(){if(eS)return Df;eS=1;var e=Dl(),t=ws(),n=Fe(),r=Ml(),i=Oy(),a=Ss();function s(o,l,u){l=e(l,o);for(var c=-1,d=l.length,f=!1;++c<d;){var m=a(l[c]);if(!(f=o!=null&&u(o,m)))break;o=o[m]}return f||++c!=d?f:(d=o==null?0:o.length,!!d&&i(d)&&r(m,d)&&(n(o)||t(o)))}return Df=s,Df}var Lf,tS;function Xj(){if(tS)return Lf;tS=1;var e=zF(),t=Qj();function n(r,i){return r!=null&&t(r,i,e)}return Lf=n,Lf}var Of,nS;function UF(){if(nS)return Of;nS=1;var e=Hj(),t=$F(),n=Xj(),r=Wy(),i=Wj(),a=Kj(),s=Ss(),o=1,l=2;function u(c,d){return r(c)&&i(d)?a(s(c),d):function(f){var m=t(f,c);return m===void 0&&m===d?n(f,c):e(d,m,o|l)}}return Of=u,Of}var qf,rS;function Jj(){if(rS)return qf;rS=1;function e(t){return function(n){return n==null?void 0:n[t]}}return qf=e,qf}var Ff,iS;function GF(){if(iS)return Ff;iS=1;var e=Ll();function t(n){return function(r){return e(r,n)}}return Ff=t,Ff}var Vf,aS;function HF(){if(aS)return Vf;aS=1;var e=Jj(),t=GF(),n=Wy(),r=Ss();function i(a){return n(a)?e(r(a)):t(a)}return Vf=i,Vf}var Bf,sS;function Rn(){if(sS)return Bf;sS=1;var e=OF(),t=UF(),n=Hr(),r=Fe(),i=HF();function a(s){return typeof s=="function"?s:s==null?n:typeof s=="object"?r(s)?t(s[0],s[1]):e(s):i(s)}return Bf=a,Bf}var $f,oS;function Zj(){if(oS)return $f;oS=1;var e=Mj(),t=TF(),n=Rn(),r=Fe();function i(a,s){var o=r(a)?e:t;return o(a,n(s,3))}return $f=i,$f}var zf,lS;function WF(){if(lS)return zf;lS=1;var e=Object.prototype,t=e.hasOwnProperty;function n(r,i){return r!=null&&t.call(r,i)}return zf=n,zf}var Uf,uS;function eM(){if(uS)return Uf;uS=1;var e=WF(),t=Qj();function n(r,i){return r!=null&&t(r,i,e)}return Uf=n,Uf}var Gf,cS;function KF(){if(cS)return Gf;cS=1;var e=Fy(),t=Ki(),n=ws(),r=Fe(),i=Nn(),a=Wi(),s=Nl(),o=xs(),l="[object Map]",u="[object Set]",c=Object.prototype,d=c.hasOwnProperty;function f(m){if(m==null)return!0;if(i(m)&&(r(m)||typeof m=="string"||typeof m.splice=="function"||a(m)||o(m)||n(m)))return!m.length;var v=t(m);if(v==l||v==u)return!m.size;if(s(m))return!e(m).length;for(var p in m)if(d.call(m,p))return!1;return!0}return Gf=f,Gf}var Hf,dS;function tM(){if(dS)return Hf;dS=1;function e(t){return t===void 0}return Hf=e,Hf}var Wf,fS;function nM(){if(fS)return Wf;fS=1;var e=Al(),t=Nn();function n(r,i){var a=-1,s=t(r)?Array(r.length):[];return e(r,function(o,l,u){s[++a]=i(o,l,u)}),s}return Wf=n,Wf}var Kf,hS;function rM(){if(hS)return Kf;hS=1;var e=Il(),t=Rn(),n=nM(),r=Fe();function i(a,s){var o=r(a)?e:n;return o(a,t(s,3))}return Kf=i,Kf}var Yf,pS;function YF(){if(pS)return Yf;pS=1;function e(t,n,r,i){var a=-1,s=t==null?0:t.length;for(i&&s&&(r=t[++a]);++a<s;)r=n(r,t[a],a,t);return r}return Yf=e,Yf}var Qf,mS;function QF(){if(mS)return Qf;mS=1;function e(t,n,r,i,a){return a(t,function(s,o,l){r=i?(i=!1,s):n(r,s,o,l)}),r}return Qf=e,Qf}var Xf,vS;function iM(){if(vS)return Xf;vS=1;var e=YF(),t=Al(),n=Rn(),r=QF(),i=Fe();function a(s,o,l){var u=i(s)?e:r,c=arguments.length<3;return u(s,n(o,4),l,c,t)}return Xf=a,Xf}var Jf,yS;function XF(){if(yS)return Jf;yS=1;var e=zr(),t=Fe(),n=on(),r="[object String]";function i(a){return typeof a=="string"||!t(a)&&n(a)&&e(a)==r}return Jf=i,Jf}var Zf,gS;function JF(){if(gS)return Zf;gS=1;var e=Jj(),t=e("length");return Zf=t,Zf}var eh,bS;function ZF(){if(bS)return eh;bS=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",i=t+n+r,a="\\ufe0e\\ufe0f",s="\\u200d",o=RegExp("["+s+e+i+a+"]");function l(u){return o.test(u)}return eh=l,eh}var th,wS;function eV(){if(wS)return th;wS=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",i=t+n+r,a="\\ufe0e\\ufe0f",s="["+e+"]",o="["+i+"]",l="\\ud83c[\\udffb-\\udfff]",u="(?:"+o+"|"+l+")",c="[^"+e+"]",d="(?:\\ud83c[\\udde6-\\uddff]){2}",f="[\\ud800-\\udbff][\\udc00-\\udfff]",m="\\u200d",v=u+"?",p="["+a+"]?",x="(?:"+m+"(?:"+[c,d,f].join("|")+")"+p+v+")*",y=p+v+x,g="(?:"+[c+o+"?",o,d,f,s].join("|")+")",w=RegExp(l+"(?="+l+")|"+g+y,"g");function _(E){for(var T=w.lastIndex=0;w.test(E);)++T;return T}return th=_,th}var nh,xS;function tV(){if(xS)return nh;xS=1;var e=JF(),t=ZF(),n=eV();function r(i){return t(i)?n(i):e(i)}return nh=r,nh}var rh,SS;function nV(){if(SS)return rh;SS=1;var e=Fy(),t=Ki(),n=Nn(),r=XF(),i=tV(),a="[object Map]",s="[object Set]";function o(l){if(l==null)return 0;if(n(l))return r(l)?i(l):l.length;var u=t(l);return u==a||u==s?l.size:e(l).length}return rh=o,rh}var ih,_S;function rV(){if(_S)return ih;_S=1;var e=Ly(),t=Oj(),n=Gy(),r=Rn(),i=Rl(),a=Fe(),s=Wi(),o=gs(),l=Lt(),u=xs();function c(d,f,m){var v=a(d),p=v||s(d)||u(d);if(f=r(f,4),m==null){var x=d&&d.constructor;p?m=v?new x:[]:l(d)?m=o(x)?t(i(d)):{}:m={}}return(p?e:n)(d,function(y,g,w){return f(m,y,g,w)}),m}return ih=c,ih}var ah,kS;function iV(){if(kS)return ah;kS=1;var e=Hi(),t=ws(),n=Fe(),r=e?e.isConcatSpreadable:void 0;function i(a){return n(a)||t(a)||!!(r&&a&&a[r])}return ah=i,ah}var sh,ES;function Ky(){if(ES)return sh;ES=1;var e=By(),t=iV();function n(r,i,a,s,o){var l=-1,u=r.length;for(a||(a=t),o||(o=[]);++l<u;){var c=r[l];i>0&&a(c)?i>1?n(c,i-1,a,s,o):e(o,c):s||(o[o.length]=c)}return o}return sh=n,sh}var oh,CS;function aV(){if(CS)return oh;CS=1;function e(t,n,r){switch(r.length){case 0:return t.call(n);case 1:return t.call(n,r[0]);case 2:return t.call(n,r[0],r[1]);case 3:return t.call(n,r[0],r[1],r[2])}return t.apply(n,r)}return oh=e,oh}var lh,TS;function aM(){if(TS)return lh;TS=1;var e=aV(),t=Math.max;function n(r,i,a){return i=t(i===void 0?r.length-1:i,0),function(){for(var s=arguments,o=-1,l=t(s.length-i,0),u=Array(l);++o<l;)u[o]=s[i+o];o=-1;for(var c=Array(i+1);++o<i;)c[o]=s[o];return c[i]=a(u),e(r,this,c)}}return lh=n,lh}var uh,jS;function sV(){if(jS)return uh;jS=1;var e=zy(),t=kj(),n=Hr(),r=t?function(i,a){return t(i,"toString",{configurable:!0,enumerable:!1,value:e(a),writable:!0})}:n;return uh=r,uh}var ch,MS;function oV(){if(MS)return ch;MS=1;var e=800,t=16,n=Date.now;function r(i){var a=0,s=0;return function(){var o=n(),l=t-(o-s);if(s=o,l>0){if(++a>=e)return arguments[0]}else a=0;return i.apply(void 0,arguments)}}return ch=r,ch}var dh,PS;function sM(){if(PS)return dh;PS=1;var e=sV(),t=oV(),n=t(e);return dh=n,dh}var fh,NS;function Ol(){if(NS)return fh;NS=1;var e=Hr(),t=aM(),n=sM();function r(i,a){return n(t(i,a,e),i+"")}return fh=r,fh}var hh,RS;function oM(){if(RS)return hh;RS=1;function e(t,n,r,i){for(var a=t.length,s=r+(i?1:-1);i?s--:++s<a;)if(n(t[s],s,t))return s;return-1}return hh=e,hh}var ph,AS;function lV(){if(AS)return ph;AS=1;function e(t){return t!==t}return ph=e,ph}var mh,IS;function uV(){if(IS)return mh;IS=1;function e(t,n,r){for(var i=r-1,a=t.length;++i<a;)if(t[i]===n)return i;return-1}return mh=e,mh}var vh,DS;function cV(){if(DS)return vh;DS=1;var e=oM(),t=lV(),n=uV();function r(i,a,s){return a===a?n(i,a,s):e(i,t,s)}return vh=r,vh}var yh,LS;function dV(){if(LS)return yh;LS=1;var e=cV();function t(n,r){var i=n==null?0:n.length;return!!i&&e(n,r,0)>-1}return yh=t,yh}var gh,OS;function fV(){if(OS)return gh;OS=1;function e(t,n,r){for(var i=-1,a=t==null?0:t.length;++i<a;)if(r(n,t[i]))return!0;return!1}return gh=e,gh}var bh,qS;function hV(){if(qS)return bh;qS=1;function e(){}return bh=e,bh}var wh,FS;function pV(){if(FS)return wh;FS=1;var e=Ij(),t=hV(),n=Hy(),r=1/0,i=e&&1/n(new e([,-0]))[1]==r?function(a){return new e(a)}:t;return wh=i,wh}var xh,VS;function mV(){if(VS)return xh;VS=1;var e=zj(),t=dV(),n=fV(),r=Uj(),i=pV(),a=Hy(),s=200;function o(l,u,c){var d=-1,f=t,m=l.length,v=!0,p=[],x=p;if(c)v=!1,f=n;else if(m>=s){var y=u?null:i(l);if(y)return a(y);v=!1,f=r,x=new e}else x=u?[]:p;e:for(;++d<m;){var g=l[d],w=u?u(g):g;if(g=c||g!==0?g:0,v&&w===w){for(var _=x.length;_--;)if(x[_]===w)continue e;u&&x.push(w),p.push(g)}else f(x,w,c)||(x!==p&&x.push(w),p.push(g))}return p}return xh=o,xh}var Sh,BS;function lM(){if(BS)return Sh;BS=1;var e=Nn(),t=on();function n(r){return t(r)&&e(r)}return Sh=n,Sh}var _h,$S;function vV(){if($S)return _h;$S=1;var e=Ky(),t=Ol(),n=mV(),r=lM(),i=t(function(a){return n(e(a,1,r,!0))});return _h=i,_h}var kh,zS;function yV(){if(zS)return kh;zS=1;var e=Il();function t(n,r){return e(r,function(i){return n[i]})}return kh=t,kh}var Eh,US;function uM(){if(US)return Eh;US=1;var e=yV(),t=pr();function n(r){return r==null?[]:e(r,t(r))}return Eh=n,Eh}var Ch,GS;function Ot(){if(GS)return Ch;GS=1;var e;if(typeof Ay=="function")try{e={clone:kF(),constant:zy(),each:$j(),filter:Zj(),has:eM(),isArray:Fe(),isEmpty:KF(),isFunction:gs(),isUndefined:tM(),keys:pr(),map:rM(),reduce:iM(),size:nV(),transform:rV(),union:vV(),values:uM()}}catch{}return e||(e=window._),Ch=e,Ch}var Th,HS;function Yy(){if(HS)return Th;HS=1;var e=Ot();Th=i;var t="\0",n="\0",r="";function i(c){this._isDirected=e.has(c,"directed")?c.directed:!0,this._isMultigraph=e.has(c,"multigraph")?c.multigraph:!1,this._isCompound=e.has(c,"compound")?c.compound:!1,this._label=void 0,this._defaultNodeLabelFn=e.constant(void 0),this._defaultEdgeLabelFn=e.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[n]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}i.prototype._nodeCount=0,i.prototype._edgeCount=0,i.prototype.isDirected=function(){return this._isDirected},i.prototype.isMultigraph=function(){return this._isMultigraph},i.prototype.isCompound=function(){return this._isCompound},i.prototype.setGraph=function(c){return this._label=c,this},i.prototype.graph=function(){return this._label},i.prototype.setDefaultNodeLabel=function(c){return e.isFunction(c)||(c=e.constant(c)),this._defaultNodeLabelFn=c,this},i.prototype.nodeCount=function(){return this._nodeCount},i.prototype.nodes=function(){return e.keys(this._nodes)},i.prototype.sources=function(){var c=this;return e.filter(this.nodes(),function(d){return e.isEmpty(c._in[d])})},i.prototype.sinks=function(){var c=this;return e.filter(this.nodes(),function(d){return e.isEmpty(c._out[d])})},i.prototype.setNodes=function(c,d){var f=arguments,m=this;return e.each(c,function(v){f.length>1?m.setNode(v,d):m.setNode(v)}),this},i.prototype.setNode=function(c,d){return e.has(this._nodes,c)?(arguments.length>1&&(this._nodes[c]=d),this):(this._nodes[c]=arguments.length>1?d:this._defaultNodeLabelFn(c),this._isCompound&&(this._parent[c]=n,this._children[c]={},this._children[n][c]=!0),this._in[c]={},this._preds[c]={},this._out[c]={},this._sucs[c]={},++this._nodeCount,this)},i.prototype.node=function(c){return this._nodes[c]},i.prototype.hasNode=function(c){return e.has(this._nodes,c)},i.prototype.removeNode=function(c){var d=this;if(e.has(this._nodes,c)){var f=function(m){d.removeEdge(d._edgeObjs[m])};delete this._nodes[c],this._isCompound&&(this._removeFromParentsChildList(c),delete this._parent[c],e.each(this.children(c),function(m){d.setParent(m)}),delete this._children[c]),e.each(e.keys(this._in[c]),f),delete this._in[c],delete this._preds[c],e.each(e.keys(this._out[c]),f),delete this._out[c],delete this._sucs[c],--this._nodeCount}return this},i.prototype.setParent=function(c,d){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(e.isUndefined(d))d=n;else{d+="";for(var f=d;!e.isUndefined(f);f=this.parent(f))if(f===c)throw new Error("Setting "+d+" as parent of "+c+" would create a cycle");this.setNode(d)}return this.setNode(c),this._removeFromParentsChildList(c),this._parent[c]=d,this._children[d][c]=!0,this},i.prototype._removeFromParentsChildList=function(c){delete this._children[this._parent[c]][c]},i.prototype.parent=function(c){if(this._isCompound){var d=this._parent[c];if(d!==n)return d}},i.prototype.children=function(c){if(e.isUndefined(c)&&(c=n),this._isCompound){var d=this._children[c];if(d)return e.keys(d)}else{if(c===n)return this.nodes();if(this.hasNode(c))return[]}},i.prototype.predecessors=function(c){var d=this._preds[c];if(d)return e.keys(d)},i.prototype.successors=function(c){var d=this._sucs[c];if(d)return e.keys(d)},i.prototype.neighbors=function(c){var d=this.predecessors(c);if(d)return e.union(d,this.successors(c))},i.prototype.isLeaf=function(c){var d;return this.isDirected()?d=this.successors(c):d=this.neighbors(c),d.length===0},i.prototype.filterNodes=function(c){var d=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});d.setGraph(this.graph());var f=this;e.each(this._nodes,function(p,x){c(x)&&d.setNode(x,p)}),e.each(this._edgeObjs,function(p){d.hasNode(p.v)&&d.hasNode(p.w)&&d.setEdge(p,f.edge(p))});var m={};function v(p){var x=f.parent(p);return x===void 0||d.hasNode(x)?(m[p]=x,x):x in m?m[x]:v(x)}return this._isCompound&&e.each(d.nodes(),function(p){d.setParent(p,v(p))}),d},i.prototype.setDefaultEdgeLabel=function(c){return e.isFunction(c)||(c=e.constant(c)),this._defaultEdgeLabelFn=c,this},i.prototype.edgeCount=function(){return this._edgeCount},i.prototype.edges=function(){return e.values(this._edgeObjs)},i.prototype.setPath=function(c,d){var f=this,m=arguments;return e.reduce(c,function(v,p){return m.length>1?f.setEdge(v,p,d):f.setEdge(v,p),p}),this},i.prototype.setEdge=function(){var c,d,f,m,v=!1,p=arguments[0];typeof p=="object"&&p!==null&&"v"in p?(c=p.v,d=p.w,f=p.name,arguments.length===2&&(m=arguments[1],v=!0)):(c=p,d=arguments[1],f=arguments[3],arguments.length>2&&(m=arguments[2],v=!0)),c=""+c,d=""+d,e.isUndefined(f)||(f=""+f);var x=o(this._isDirected,c,d,f);if(e.has(this._edgeLabels,x))return v&&(this._edgeLabels[x]=m),this;if(!e.isUndefined(f)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(c),this.setNode(d),this._edgeLabels[x]=v?m:this._defaultEdgeLabelFn(c,d,f);var y=l(this._isDirected,c,d,f);return c=y.v,d=y.w,Object.freeze(y),this._edgeObjs[x]=y,a(this._preds[d],c),a(this._sucs[c],d),this._in[d][x]=y,this._out[c][x]=y,this._edgeCount++,this},i.prototype.edge=function(c,d,f){var m=arguments.length===1?u(this._isDirected,arguments[0]):o(this._isDirected,c,d,f);return this._edgeLabels[m]},i.prototype.hasEdge=function(c,d,f){var m=arguments.length===1?u(this._isDirected,arguments[0]):o(this._isDirected,c,d,f);return e.has(this._edgeLabels,m)},i.prototype.removeEdge=function(c,d,f){var m=arguments.length===1?u(this._isDirected,arguments[0]):o(this._isDirected,c,d,f),v=this._edgeObjs[m];return v&&(c=v.v,d=v.w,delete this._edgeLabels[m],delete this._edgeObjs[m],s(this._preds[d],c),s(this._sucs[c],d),delete this._in[d][m],delete this._out[c][m],this._edgeCount--),this},i.prototype.inEdges=function(c,d){var f=this._in[c];if(f){var m=e.values(f);return d?e.filter(m,function(v){return v.v===d}):m}},i.prototype.outEdges=function(c,d){var f=this._out[c];if(f){var m=e.values(f);return d?e.filter(m,function(v){return v.w===d}):m}},i.prototype.nodeEdges=function(c,d){var f=this.inEdges(c,d);if(f)return f.concat(this.outEdges(c,d))};function a(c,d){c[d]?c[d]++:c[d]=1}function s(c,d){--c[d]||delete c[d]}function o(c,d,f,m){var v=""+d,p=""+f;if(!c&&v>p){var x=v;v=p,p=x}return v+r+p+r+(e.isUndefined(m)?t:m)}function l(c,d,f,m){var v=""+d,p=""+f;if(!c&&v>p){var x=v;v=p,p=x}var y={v,w:p};return m&&(y.name=m),y}function u(c,d){return o(c,d.v,d.w,d.name)}return Th}var jh,WS;function gV(){return WS||(WS=1,jh="2.1.8"),jh}var Mh,KS;function bV(){return KS||(KS=1,Mh={Graph:Yy(),version:gV()}),Mh}var Ph,YS;function wV(){if(YS)return Ph;YS=1;var e=Ot(),t=Yy();Ph={write:n,read:a};function n(s){var o={options:{directed:s.isDirected(),multigraph:s.isMultigraph(),compound:s.isCompound()},nodes:r(s),edges:i(s)};return e.isUndefined(s.graph())||(o.value=e.clone(s.graph())),o}function r(s){return e.map(s.nodes(),function(o){var l=s.node(o),u=s.parent(o),c={v:o};return e.isUndefined(l)||(c.value=l),e.isUndefined(u)||(c.parent=u),c})}function i(s){return e.map(s.edges(),function(o){var l=s.edge(o),u={v:o.v,w:o.w};return e.isUndefined(o.name)||(u.name=o.name),e.isUndefined(l)||(u.value=l),u})}function a(s){var o=new t(s.options).setGraph(s.value);return e.each(s.nodes,function(l){o.setNode(l.v,l.value),l.parent&&o.setParent(l.v,l.parent)}),e.each(s.edges,function(l){o.setEdge({v:l.v,w:l.w,name:l.name},l.value)}),o}return Ph}var Nh,QS;function xV(){if(QS)return Nh;QS=1;var e=Ot();Nh=t;function t(n){var r={},i=[],a;function s(o){e.has(r,o)||(r[o]=!0,a.push(o),e.each(n.successors(o),s),e.each(n.predecessors(o),s))}return e.each(n.nodes(),function(o){a=[],s(o),a.length&&i.push(a)}),i}return Nh}var Rh,XS;function cM(){if(XS)return Rh;XS=1;var e=Ot();Rh=t;function t(){this._arr=[],this._keyIndices={}}return t.prototype.size=function(){return this._arr.length},t.prototype.keys=function(){return this._arr.map(function(n){return n.key})},t.prototype.has=function(n){return e.has(this._keyIndices,n)},t.prototype.priority=function(n){var r=this._keyIndices[n];if(r!==void 0)return this._arr[r].priority},t.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key},t.prototype.add=function(n,r){var i=this._keyIndices;if(n=String(n),!e.has(i,n)){var a=this._arr,s=a.length;return i[n]=s,a.push({key:n,priority:r}),this._decrease(s),!0}return!1},t.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var n=this._arr.pop();return delete this._keyIndices[n.key],this._heapify(0),n.key},t.prototype.decrease=function(n,r){var i=this._keyIndices[n];if(r>this._arr[i].priority)throw new Error("New priority is greater than current priority. Key: "+n+" Old: "+this._arr[i].priority+" New: "+r);this._arr[i].priority=r,this._decrease(i)},t.prototype._heapify=function(n){var r=this._arr,i=2*n,a=i+1,s=n;i<r.length&&(s=r[i].priority<r[s].priority?i:s,a<r.length&&(s=r[a].priority<r[s].priority?a:s),s!==n&&(this._swap(n,s),this._heapify(s)))},t.prototype._decrease=function(n){for(var r=this._arr,i=r[n].priority,a;n!==0&&(a=n>>1,!(r[a].priority<i));)this._swap(n,a),n=a},t.prototype._swap=function(n,r){var i=this._arr,a=this._keyIndices,s=i[n],o=i[r];i[n]=o,i[r]=s,a[o.key]=n,a[s.key]=r},Rh}var Ah,JS;function dM(){if(JS)return Ah;JS=1;var e=Ot(),t=cM();Ah=r;var n=e.constant(1);function r(a,s,o,l){return i(a,String(s),o||n,l||function(u){return a.outEdges(u)})}function i(a,s,o,l){var u={},c=new t,d,f,m=function(v){var p=v.v!==d?v.v:v.w,x=u[p],y=o(v),g=f.distance+y;if(y<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+v+" Weight: "+y);g<x.distance&&(x.distance=g,x.predecessor=d,c.decrease(p,g))};for(a.nodes().forEach(function(v){var p=v===s?0:Number.POSITIVE_INFINITY;u[v]={distance:p},c.add(v,p)});c.size()>0&&(d=c.removeMin(),f=u[d],f.distance!==Number.POSITIVE_INFINITY);)l(d).forEach(m);return u}return Ah}var Ih,ZS;function SV(){if(ZS)return Ih;ZS=1;var e=dM(),t=Ot();Ih=n;function n(r,i,a){return t.transform(r.nodes(),function(s,o){s[o]=e(r,o,i,a)},{})}return Ih}var Dh,e_;function fM(){if(e_)return Dh;e_=1;var e=Ot();Dh=t;function t(n){var r=0,i=[],a={},s=[];function o(l){var u=a[l]={onStack:!0,lowlink:r,index:r++};if(i.push(l),n.successors(l).forEach(function(f){e.has(a,f)?a[f].onStack&&(u.lowlink=Math.min(u.lowlink,a[f].index)):(o(f),u.lowlink=Math.min(u.lowlink,a[f].lowlink))}),u.lowlink===u.index){var c=[],d;do d=i.pop(),a[d].onStack=!1,c.push(d);while(l!==d);s.push(c)}}return n.nodes().forEach(function(l){e.has(a,l)||o(l)}),s}return Dh}var Lh,t_;function _V(){if(t_)return Lh;t_=1;var e=Ot(),t=fM();Lh=n;function n(r){return e.filter(t(r),function(i){return i.length>1||i.length===1&&r.hasEdge(i[0],i[0])})}return Lh}var Oh,n_;function kV(){if(n_)return Oh;n_=1;var e=Ot();Oh=n;var t=e.constant(1);function n(i,a,s){return r(i,a||t,s||function(o){return i.outEdges(o)})}function r(i,a,s){var o={},l=i.nodes();return l.forEach(function(u){o[u]={},o[u][u]={distance:0},l.forEach(function(c){u!==c&&(o[u][c]={distance:Number.POSITIVE_INFINITY})}),s(u).forEach(function(c){var d=c.v===u?c.w:c.v,f=a(c);o[u][d]={distance:f,predecessor:u}})}),l.forEach(function(u){var c=o[u];l.forEach(function(d){var f=o[d];l.forEach(function(m){var v=f[u],p=c[m],x=f[m],y=v.distance+p.distance;y<x.distance&&(x.distance=y,x.predecessor=p.predecessor)})})}),o}return Oh}var qh,r_;function hM(){if(r_)return qh;r_=1;var e=Ot();qh=t,t.CycleException=n;function t(r){var i={},a={},s=[];function o(l){if(e.has(a,l))throw new n;e.has(i,l)||(a[l]=!0,i[l]=!0,e.each(r.predecessors(l),o),delete a[l],s.push(l))}if(e.each(r.sinks(),o),e.size(i)!==r.nodeCount())throw new n;return s}function n(){}return n.prototype=new Error,qh}var Fh,i_;function EV(){if(i_)return Fh;i_=1;var e=hM();Fh=t;function t(n){try{e(n)}catch(r){if(r instanceof e.CycleException)return!1;throw r}return!0}return Fh}var Vh,a_;function pM(){if(a_)return Vh;a_=1;var e=Ot();Vh=t;function t(r,i,a){e.isArray(i)||(i=[i]);var s=(r.isDirected()?r.successors:r.neighbors).bind(r),o=[],l={};return e.each(i,function(u){if(!r.hasNode(u))throw new Error("Graph does not have node: "+u);n(r,u,a==="post",l,s,o)}),o}function n(r,i,a,s,o,l){e.has(s,i)||(s[i]=!0,a||l.push(i),e.each(o(i),function(u){n(r,u,a,s,o,l)}),a&&l.push(i))}return Vh}var Bh,s_;function CV(){if(s_)return Bh;s_=1;var e=pM();Bh=t;function t(n,r){return e(n,r,"post")}return Bh}var $h,o_;function TV(){if(o_)return $h;o_=1;var e=pM();$h=t;function t(n,r){return e(n,r,"pre")}return $h}var zh,l_;function jV(){if(l_)return zh;l_=1;var e=Ot(),t=Yy(),n=cM();zh=r;function r(i,a){var s=new t,o={},l=new n,u;function c(f){var m=f.v===u?f.w:f.v,v=l.priority(m);if(v!==void 0){var p=a(f);p<v&&(o[m]=u,l.decrease(m,p))}}if(i.nodeCount()===0)return s;e.each(i.nodes(),function(f){l.add(f,Number.POSITIVE_INFINITY),s.setNode(f)}),l.decrease(i.nodes()[0],0);for(var d=!1;l.size()>0;){if(u=l.removeMin(),e.has(o,u))s.setEdge(u,o[u]);else{if(d)throw new Error("Input graph is not connected: "+i);d=!0}i.nodeEdges(u).forEach(c)}return s}return zh}var Uh,u_;function MV(){return u_||(u_=1,Uh={components:xV(),dijkstra:dM(),dijkstraAll:SV(),findCycles:_V(),floydWarshall:kV(),isAcyclic:EV(),postorder:CV(),preorder:TV(),prim:jV(),tarjan:fM(),topsort:hM()}),Uh}var Gh,c_;function PV(){if(c_)return Gh;c_=1;var e=bV();return Gh={Graph:e.Graph,json:wV(),alg:MV(),version:e.version},Gh}var Yo;if(typeof Ay=="function")try{Yo=PV()}catch{}Yo||(Yo=window.graphlib);var Kt=Yo,Hh,d_;function NV(){if(d_)return Hh;d_=1;var e=Fj(),t=1,n=4;function r(i){return e(i,t|n)}return Hh=r,Hh}var Wh,f_;function ql(){if(f_)return Wh;f_=1;var e=Gi(),t=Nn(),n=Ml(),r=Lt();function i(a,s,o){if(!r(o))return!1;var l=typeof s;return(l=="number"?t(o)&&n(s,o.length):l=="string"&&s in o)?e(o[s],a):!1}return Wh=i,Wh}var Kh,h_;function RV(){if(h_)return Kh;h_=1;var e=Ol(),t=Gi(),n=ql(),r=Gr(),i=Object.prototype,a=i.hasOwnProperty,s=e(function(o,l){o=Object(o);var u=-1,c=l.length,d=c>2?l[2]:void 0;for(d&&n(l[0],l[1],d)&&(c=1);++u<c;)for(var f=l[u],m=r(f),v=-1,p=m.length;++v<p;){var x=m[v],y=o[x];(y===void 0||t(y,i[x])&&!a.call(o,x))&&(o[x]=f[x])}return o});return Kh=s,Kh}var Yh,p_;function AV(){if(p_)return Yh;p_=1;var e=Rn(),t=Nn(),n=pr();function r(i){return function(a,s,o){var l=Object(a);if(!t(a)){var u=e(s,3);a=n(a),s=function(d){return u(l[d],d,l)}}var c=i(a,s,o);return c>-1?l[u?a[c]:c]:void 0}}return Yh=r,Yh}var Qh,m_;function IV(){if(m_)return Qh;m_=1;var e=/\s/;function t(n){for(var r=n.length;r--&&e.test(n.charAt(r)););return r}return Qh=t,Qh}var Xh,v_;function DV(){if(v_)return Xh;v_=1;var e=IV(),t=/^\s+/;function n(r){return r&&r.slice(0,e(r)+1).replace(t,"")}return Xh=n,Xh}var Jh,y_;function LV(){if(y_)return Jh;y_=1;var e=DV(),t=Lt(),n=Yi(),r=NaN,i=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,s=/^0o[0-7]+$/i,o=parseInt;function l(u){if(typeof u=="number")return u;if(n(u))return r;if(t(u)){var c=typeof u.valueOf=="function"?u.valueOf():u;u=t(c)?c+"":c}if(typeof u!="string")return u===0?u:+u;u=e(u);var d=a.test(u);return d||s.test(u)?o(u.slice(2),d?2:8):i.test(u)?r:+u}return Jh=l,Jh}var Zh,g_;function mM(){if(g_)return Zh;g_=1;var e=LV(),t=1/0,n=17976931348623157e292;function r(i){if(!i)return i===0?i:0;if(i=e(i),i===t||i===-t){var a=i<0?-1:1;return a*n}return i===i?i:0}return Zh=r,Zh}var ep,b_;function OV(){if(b_)return ep;b_=1;var e=mM();function t(n){var r=e(n),i=r%1;return r===r?i?r-i:r:0}return ep=t,ep}var tp,w_;function qV(){if(w_)return tp;w_=1;var e=oM(),t=Rn(),n=OV(),r=Math.max;function i(a,s,o){var l=a==null?0:a.length;if(!l)return-1;var u=o==null?0:n(o);return u<0&&(u=r(l+u,0)),e(a,t(s,3),u)}return tp=i,tp}var np,x_;function FV(){if(x_)return np;x_=1;var e=AV(),t=qV(),n=e(t);return np=n,np}var rp,S_;function vM(){if(S_)return rp;S_=1;var e=Ky();function t(n){var r=n==null?0:n.length;return r?e(n,1):[]}return rp=t,rp}var ip,__;function VV(){if(__)return ip;__=1;var e=Uy(),t=Vj(),n=Gr();function r(i,a){return i==null?i:e(i,t(a),n)}return ip=r,ip}var ap,k_;function BV(){if(k_)return ap;k_=1;function e(t){var n=t==null?0:t.length;return n?t[n-1]:void 0}return ap=e,ap}var sp,E_;function $V(){if(E_)return sp;E_=1;var e=Tl(),t=Gy(),n=Rn();function r(i,a){var s={};return a=n(a,3),t(i,function(o,l,u){e(s,l,a(o,l,u))}),s}return sp=r,sp}var op,C_;function Qy(){if(C_)return op;C_=1;var e=Yi();function t(n,r,i){for(var a=-1,s=n.length;++a<s;){var o=n[a],l=r(o);if(l!=null&&(u===void 0?l===l&&!e(l):i(l,u)))var u=l,c=o}return c}return op=t,op}var lp,T_;function zV(){if(T_)return lp;T_=1;function e(t,n){return t>n}return lp=e,lp}var up,j_;function UV(){if(j_)return up;j_=1;var e=Qy(),t=zV(),n=Hr();function r(i){return i&&i.length?e(i,n,t):void 0}return up=r,up}var cp,M_;function yM(){if(M_)return cp;M_=1;var e=Tl(),t=Gi();function n(r,i,a){(a!==void 0&&!t(r[i],a)||a===void 0&&!(i in r))&&e(r,i,a)}return cp=n,cp}var dp,P_;function GV(){if(P_)return dp;P_=1;var e=zr(),t=Rl(),n=on(),r="[object Object]",i=Function.prototype,a=Object.prototype,s=i.toString,o=a.hasOwnProperty,l=s.call(Object);function u(c){if(!n(c)||e(c)!=r)return!1;var d=t(c);if(d===null)return!0;var f=o.call(d,"constructor")&&d.constructor;return typeof f=="function"&&f instanceof f&&s.call(f)==l}return dp=u,dp}var fp,N_;function gM(){if(N_)return fp;N_=1;function e(t,n){if(!(n==="constructor"&&typeof t[n]=="function")&&n!="__proto__")return t[n]}return fp=e,fp}var hp,R_;function HV(){if(R_)return hp;R_=1;var e=bs(),t=Gr();function n(r){return e(r,t(r))}return hp=n,hp}var pp,A_;function WV(){if(A_)return pp;A_=1;var e=yM(),t=Tj(),n=Lj(),r=jj(),i=qj(),a=ws(),s=Fe(),o=lM(),l=Wi(),u=gs(),c=Lt(),d=GV(),f=xs(),m=gM(),v=HV();function p(x,y,g,w,_,E,T){var j=m(x,g),C=m(y,g),M=T.get(C);if(M){e(x,g,M);return}var P=E?E(j,C,g+"",x,y,T):void 0,R=P===void 0;if(R){var I=s(C),O=!I&&l(C),K=!I&&!O&&f(C);P=C,I||O||K?s(j)?P=j:o(j)?P=r(j):O?(R=!1,P=t(C,!0)):K?(R=!1,P=n(C,!0)):P=[]:d(C)||a(C)?(P=j,a(j)?P=v(j):(!c(j)||u(j))&&(P=i(C))):R=!1}R&&(T.set(C,P),_(P,C,w,E,T),T.delete(C)),e(x,g,P)}return pp=p,pp}var mp,I_;function KV(){if(I_)return mp;I_=1;var e=Cl(),t=yM(),n=Uy(),r=WV(),i=Lt(),a=Gr(),s=gM();function o(l,u,c,d,f){l!==u&&n(u,function(m,v){if(f||(f=new e),i(m))r(l,u,v,c,o,d,f);else{var p=d?d(s(l,v),m,v+"",l,u,f):void 0;p===void 0&&(p=m),t(l,v,p)}},a)}return mp=o,mp}var vp,D_;function YV(){if(D_)return vp;D_=1;var e=Ol(),t=ql();function n(r){return e(function(i,a){var s=-1,o=a.length,l=o>1?a[o-1]:void 0,u=o>2?a[2]:void 0;for(l=r.length>3&&typeof l=="function"?(o--,l):void 0,u&&t(a[0],a[1],u)&&(l=o<3?void 0:l,o=1),i=Object(i);++s<o;){var c=a[s];c&&r(i,c,s,l)}return i})}return vp=n,vp}var yp,L_;function QV(){if(L_)return yp;L_=1;var e=KV(),t=YV(),n=t(function(r,i,a){e(r,i,a)});return yp=n,yp}var gp,O_;function bM(){if(O_)return gp;O_=1;function e(t,n){return t<n}return gp=e,gp}var bp,q_;function XV(){if(q_)return bp;q_=1;var e=Qy(),t=bM(),n=Hr();function r(i){return i&&i.length?e(i,n,t):void 0}return bp=r,bp}var wp,F_;function JV(){if(F_)return wp;F_=1;var e=Qy(),t=Rn(),n=bM();function r(i,a){return i&&i.length?e(i,t(a,2),n):void 0}return wp=r,wp}var xp,V_;function ZV(){if(V_)return xp;V_=1;var e=Wt(),t=function(){return e.Date.now()};return xp=t,xp}var Sp,B_;function e3(){if(B_)return Sp;B_=1;var e=jl(),t=Dl(),n=Ml(),r=Lt(),i=Ss();function a(s,o,l,u){if(!r(s))return s;o=t(o,s);for(var c=-1,d=o.length,f=d-1,m=s;m!=null&&++c<d;){var v=i(o[c]),p=l;if(v==="__proto__"||v==="constructor"||v==="prototype")return s;if(c!=f){var x=m[v];p=u?u(x,v,m):void 0,p===void 0&&(p=r(x)?x:n(o[c+1])?[]:{})}e(m,v,p),m=m[v]}return s}return Sp=a,Sp}var _p,$_;function t3(){if($_)return _p;$_=1;var e=Ll(),t=e3(),n=Dl();function r(i,a,s){for(var o=-1,l=a.length,u={};++o<l;){var c=a[o],d=e(i,c);s(d,c)&&t(u,n(c,i),d)}return u}return _p=r,_p}var kp,z_;function n3(){if(z_)return kp;z_=1;var e=t3(),t=Xj();function n(r,i){return e(r,i,function(a,s){return t(r,s)})}return kp=n,kp}var Ep,U_;function r3(){if(U_)return Ep;U_=1;var e=vM(),t=aM(),n=sM();function r(i){return n(t(i,void 0,e),i+"")}return Ep=r,Ep}var Cp,G_;function i3(){if(G_)return Cp;G_=1;var e=n3(),t=r3(),n=t(function(r,i){return r==null?{}:e(r,i)});return Cp=n,Cp}var Tp,H_;function a3(){if(H_)return Tp;H_=1;var e=Math.ceil,t=Math.max;function n(r,i,a,s){for(var o=-1,l=t(e((i-r)/(a||1)),0),u=Array(l);l--;)u[s?l:++o]=r,r+=a;return u}return Tp=n,Tp}var jp,W_;function s3(){if(W_)return jp;W_=1;var e=a3(),t=ql(),n=mM();function r(i){return function(a,s,o){return o&&typeof o!="number"&&t(a,s,o)&&(s=o=void 0),a=n(a),s===void 0?(s=a,a=0):s=n(s),o=o===void 0?a<s?1:-1:n(o),e(a,s,o,i)}}return jp=r,jp}var Mp,K_;function o3(){if(K_)return Mp;K_=1;var e=s3(),t=e();return Mp=t,Mp}var Pp,Y_;function l3(){if(Y_)return Pp;Y_=1;function e(t,n){var r=t.length;for(t.sort(n);r--;)t[r]=t[r].value;return t}return Pp=e,Pp}var Np,Q_;function u3(){if(Q_)return Np;Q_=1;var e=Yi();function t(n,r){if(n!==r){var i=n!==void 0,a=n===null,s=n===n,o=e(n),l=r!==void 0,u=r===null,c=r===r,d=e(r);if(!u&&!d&&!o&&n>r||o&&l&&c&&!u&&!d||a&&l&&c||!i&&c||!s)return 1;if(!a&&!o&&!d&&n<r||d&&i&&s&&!a&&!o||u&&i&&s||!l&&s||!c)return-1}return 0}return Np=t,Np}var Rp,X_;function c3(){if(X_)return Rp;X_=1;var e=u3();function t(n,r,i){for(var a=-1,s=n.criteria,o=r.criteria,l=s.length,u=i.length;++a<l;){var c=e(s[a],o[a]);if(c){if(a>=u)return c;var d=i[a];return c*(d=="desc"?-1:1)}}return n.index-r.index}return Rp=t,Rp}var Ap,J_;function d3(){if(J_)return Ap;J_=1;var e=Il(),t=Ll(),n=Rn(),r=nM(),i=l3(),a=Pl(),s=c3(),o=Hr(),l=Fe();function u(c,d,f){d.length?d=e(d,function(p){return l(p)?function(x){return t(x,p.length===1?p[0]:p)}:p}):d=[o];var m=-1;d=e(d,a(n));var v=r(c,function(p,x,y){var g=e(d,function(w){return w(p)});return{criteria:g,index:++m,value:p}});return i(v,function(p,x){return s(p,x,f)})}return Ap=u,Ap}var Ip,Z_;function f3(){if(Z_)return Ip;Z_=1;var e=Ky(),t=d3(),n=Ol(),r=ql(),i=n(function(a,s){if(a==null)return[];var o=s.length;return o>1&&r(a,s[0],s[1])?s=[]:o>2&&r(s[0],s[1],s[2])&&(s=[s[0]]),t(a,e(s,1),[])});return Ip=i,Ip}var Dp,ek;function h3(){if(ek)return Dp;ek=1;var e=Yj(),t=0;function n(r){var i=++t;return e(r)+i}return Dp=n,Dp}var Lp,tk;function p3(){if(tk)return Lp;tk=1;function e(t,n,r){for(var i=-1,a=t.length,s=n.length,o={};++i<a;){var l=i<s?n[i]:void 0;r(o,t[i],l)}return o}return Lp=e,Lp}var Op,nk;function m3(){if(nk)return Op;nk=1;var e=jl(),t=p3();function n(r,i){return t(r||[],i||[],e)}return Op=n,Op}var Qo;if(typeof Ay=="function")try{Qo={cloneDeep:NV(),constant:zy(),defaults:RV(),each:$j(),filter:Zj(),find:FV(),flatten:vM(),forEach:Bj(),forIn:VV(),has:eM(),isUndefined:tM(),last:BV(),map:rM(),mapValues:$V(),max:UV(),merge:QV(),min:XV(),minBy:JV(),now:ZV(),pick:i3(),range:o3(),reduce:iM(),sortBy:f3(),uniqueId:h3(),values:uM(),zipObject:m3()}}catch{}Qo||(Qo=window._);var xe=Qo,v3=Fl;function Fl(){var e={};e._next=e._prev=e,this._sentinel=e}Fl.prototype.dequeue=function(){var e=this._sentinel,t=e._prev;if(t!==e)return wM(t),t};Fl.prototype.enqueue=function(e){var t=this._sentinel;e._prev&&e._next&&wM(e),e._next=t._next,t._next._prev=e,t._next=e,e._prev=t};Fl.prototype.toString=function(){for(var e=[],t=this._sentinel,n=t._prev;n!==t;)e.push(JSON.stringify(n,y3)),n=n._prev;return"["+e.join(", ")+"]"};function wM(e){e._prev._next=e._next,e._next._prev=e._prev,delete e._next,delete e._prev}function y3(e,t){if(e!=="_next"&&e!=="_prev")return t}var bn=xe,g3=Kt.Graph,b3=v3,w3=S3,x3=bn.constant(1);function S3(e,t){if(e.nodeCount()<=1)return[];var n=k3(e,t||x3),r=_3(n.graph,n.buckets,n.zeroIdx);return bn.flatten(bn.map(r,function(i){return e.outEdges(i.v,i.w)}),!0)}function _3(e,t,n){for(var r=[],i=t[t.length-1],a=t[0],s;e.nodeCount();){for(;s=a.dequeue();)qp(e,t,n,s);for(;s=i.dequeue();)qp(e,t,n,s);if(e.nodeCount()){for(var o=t.length-2;o>0;--o)if(s=t[o].dequeue(),s){r=r.concat(qp(e,t,n,s,!0));break}}}return r}function qp(e,t,n,r,i){var a=i?[]:void 0;return bn.forEach(e.inEdges(r.v),function(s){var o=e.edge(s),l=e.node(s.v);i&&a.push({v:s.v,w:s.w}),l.out-=o,tv(t,n,l)}),bn.forEach(e.outEdges(r.v),function(s){var o=e.edge(s),l=s.w,u=e.node(l);u.in-=o,tv(t,n,u)}),e.removeNode(r.v),a}function k3(e,t){var n=new g3,r=0,i=0;bn.forEach(e.nodes(),function(o){n.setNode(o,{v:o,in:0,out:0})}),bn.forEach(e.edges(),function(o){var l=n.edge(o.v,o.w)||0,u=t(o),c=l+u;n.setEdge(o.v,o.w,c),i=Math.max(i,n.node(o.v).out+=u),r=Math.max(r,n.node(o.w).in+=u)});var a=bn.range(i+r+3).map(function(){return new b3}),s=r+1;return bn.forEach(n.nodes(),function(o){tv(a,s,n.node(o))}),{graph:n,buckets:a,zeroIdx:s}}function tv(e,t,n){n.out?n.in?e[n.out-n.in+t].enqueue(n):e[e.length-1].enqueue(n):e[0].enqueue(n)}var Pr=xe,E3=w3,C3={run:T3,undo:M3};function T3(e){var t=e.graph().acyclicer==="greedy"?E3(e,n(e)):j3(e);Pr.forEach(t,function(r){var i=e.edge(r);e.removeEdge(r),i.forwardName=r.name,i.reversed=!0,e.setEdge(r.w,r.v,i,Pr.uniqueId("rev"))});function n(r){return function(i){return r.edge(i).weight}}}function j3(e){var t=[],n={},r={};function i(a){Pr.has(r,a)||(r[a]=!0,n[a]=!0,Pr.forEach(e.outEdges(a),function(s){Pr.has(n,s.w)?t.push(s):i(s.w)}),delete n[a])}return Pr.forEach(e.nodes(),i),t}function M3(e){Pr.forEach(e.edges(),function(t){var n=e.edge(t);if(n.reversed){e.removeEdge(t);var r=n.forwardName;delete n.reversed,delete n.forwardName,e.setEdge(t.w,t.v,n,r)}})}var ue=xe,xM=Kt.Graph,pt={addDummyNode:SM,simplify:P3,asNonCompoundGraph:N3,successorWeights:R3,predecessorWeights:A3,intersectRect:I3,buildLayerMatrix:D3,normalizeRanks:L3,removeEmptyRanks:O3,addBorderNode:q3,maxRank:_M,partition:F3,time:V3,notime:B3};function SM(e,t,n,r){var i;do i=ue.uniqueId(r);while(e.hasNode(i));return n.dummy=t,e.setNode(i,n),i}function P3(e){var t=new xM().setGraph(e.graph());return ue.forEach(e.nodes(),function(n){t.setNode(n,e.node(n))}),ue.forEach(e.edges(),function(n){var r=t.edge(n.v,n.w)||{weight:0,minlen:1},i=e.edge(n);t.setEdge(n.v,n.w,{weight:r.weight+i.weight,minlen:Math.max(r.minlen,i.minlen)})}),t}function N3(e){var t=new xM({multigraph:e.isMultigraph()}).setGraph(e.graph());return ue.forEach(e.nodes(),function(n){e.children(n).length||t.setNode(n,e.node(n))}),ue.forEach(e.edges(),function(n){t.setEdge(n,e.edge(n))}),t}function R3(e){var t=ue.map(e.nodes(),function(n){var r={};return ue.forEach(e.outEdges(n),function(i){r[i.w]=(r[i.w]||0)+e.edge(i).weight}),r});return ue.zipObject(e.nodes(),t)}function A3(e){var t=ue.map(e.nodes(),function(n){var r={};return ue.forEach(e.inEdges(n),function(i){r[i.v]=(r[i.v]||0)+e.edge(i).weight}),r});return ue.zipObject(e.nodes(),t)}function I3(e,t){var n=e.x,r=e.y,i=t.x-n,a=t.y-r,s=e.width/2,o=e.height/2;if(!i&&!a)throw new Error("Not possible to find intersection inside of the rectangle");var l,u;return Math.abs(a)*s>Math.abs(i)*o?(a<0&&(o=-o),l=o*i/a,u=o):(i<0&&(s=-s),l=s,u=s*a/i),{x:n+l,y:r+u}}function D3(e){var t=ue.map(ue.range(_M(e)+1),function(){return[]});return ue.forEach(e.nodes(),function(n){var r=e.node(n),i=r.rank;ue.isUndefined(i)||(t[i][r.order]=n)}),t}function L3(e){var t=ue.min(ue.map(e.nodes(),function(n){return e.node(n).rank}));ue.forEach(e.nodes(),function(n){var r=e.node(n);ue.has(r,"rank")&&(r.rank-=t)})}function O3(e){var t=ue.min(ue.map(e.nodes(),function(a){return e.node(a).rank})),n=[];ue.forEach(e.nodes(),function(a){var s=e.node(a).rank-t;n[s]||(n[s]=[]),n[s].push(a)});var r=0,i=e.graph().nodeRankFactor;ue.forEach(n,function(a,s){ue.isUndefined(a)&&s%i!==0?--r:r&&ue.forEach(a,function(o){e.node(o).rank+=r})})}function q3(e,t,n,r){var i={width:0,height:0};return arguments.length>=4&&(i.rank=n,i.order=r),SM(e,"border",i,t)}function _M(e){return ue.max(ue.map(e.nodes(),function(t){var n=e.node(t).rank;if(!ue.isUndefined(n))return n}))}function F3(e,t){var n={lhs:[],rhs:[]};return ue.forEach(e,function(r){t(r)?n.lhs.push(r):n.rhs.push(r)}),n}function V3(e,t){var n=ue.now();try{return t()}finally{console.log(e+" time: "+(ue.now()-n)+"ms")}}function B3(e,t){return t()}var kM=xe,$3=pt,z3={run:U3,undo:H3};function U3(e){e.graph().dummyChains=[],kM.forEach(e.edges(),function(t){G3(e,t)})}function G3(e,t){var n=t.v,r=e.node(n).rank,i=t.w,a=e.node(i).rank,s=t.name,o=e.edge(t),l=o.labelRank;if(a!==r+1){e.removeEdge(t);var u,c,d;for(d=0,++r;r<a;++d,++r)o.points=[],c={width:0,height:0,edgeLabel:o,edgeObj:t,rank:r},u=$3.addDummyNode(e,"edge",c,"_d"),r===l&&(c.width=o.width,c.height=o.height,c.dummy="edge-label",c.labelpos=o.labelpos),e.setEdge(n,u,{weight:o.weight},s),d===0&&e.graph().dummyChains.push(u),n=u;e.setEdge(n,i,{weight:o.weight},s)}}function H3(e){kM.forEach(e.graph().dummyChains,function(t){var n=e.node(t),r=n.edgeLabel,i;for(e.setEdge(n.edgeObj,r);n.dummy;)i=e.successors(t)[0],e.removeNode(t),r.points.push({x:n.x,y:n.y}),n.dummy==="edge-label"&&(r.x=n.x,r.y=n.y,r.width=n.width,r.height=n.height),t=i,n=e.node(t)})}var Js=xe,Vl={longestPath:W3,slack:K3};function W3(e){var t={};function n(r){var i=e.node(r);if(Js.has(t,r))return i.rank;t[r]=!0;var a=Js.min(Js.map(e.outEdges(r),function(s){return n(s.w)-e.edge(s).minlen}));return(a===Number.POSITIVE_INFINITY||a===void 0||a===null)&&(a=0),i.rank=a}Js.forEach(e.sources(),n)}function K3(e,t){return e.node(t.w).rank-e.node(t.v).rank-e.edge(t).minlen}var Xo=xe,Y3=Kt.Graph,Jo=Vl.slack,EM=Q3;function Q3(e){var t=new Y3({directed:!1}),n=e.nodes()[0],r=e.nodeCount();t.setNode(n,{});for(var i,a;X3(t,e)<r;)i=J3(t,e),a=t.hasNode(i.v)?Jo(e,i):-Jo(e,i),Z3(t,e,a);return t}function X3(e,t){function n(r){Xo.forEach(t.nodeEdges(r),function(i){var a=i.v,s=r===a?i.w:a;!e.hasNode(s)&&!Jo(t,i)&&(e.setNode(s,{}),e.setEdge(r,s,{}),n(s))})}return Xo.forEach(e.nodes(),n),e.nodeCount()}function J3(e,t){return Xo.minBy(t.edges(),function(n){if(e.hasNode(n.v)!==e.hasNode(n.w))return Jo(t,n)})}function Z3(e,t,n){Xo.forEach(e.nodes(),function(r){t.node(r).rank+=n})}var Mn=xe,eB=EM,tB=Vl.slack,nB=Vl.longestPath,rB=Kt.alg.preorder,iB=Kt.alg.postorder,aB=pt.simplify,sB=Wr;Wr.initLowLimValues=Jy;Wr.initCutValues=Xy;Wr.calcCutValue=CM;Wr.leaveEdge=jM;Wr.enterEdge=MM;Wr.exchangeEdges=PM;function Wr(e){e=aB(e),nB(e);var t=eB(e);Jy(t),Xy(t,e);for(var n,r;n=jM(t);)r=MM(t,e,n),PM(t,e,n,r)}function Xy(e,t){var n=iB(e,e.nodes());n=n.slice(0,n.length-1),Mn.forEach(n,function(r){oB(e,t,r)})}function oB(e,t,n){var r=e.node(n),i=r.parent;e.edge(n,i).cutvalue=CM(e,t,n)}function CM(e,t,n){var r=e.node(n),i=r.parent,a=!0,s=t.edge(n,i),o=0;return s||(a=!1,s=t.edge(i,n)),o=s.weight,Mn.forEach(t.nodeEdges(n),function(l){var u=l.v===n,c=u?l.w:l.v;if(c!==i){var d=u===a,f=t.edge(l).weight;if(o+=d?f:-f,uB(e,n,c)){var m=e.edge(n,c).cutvalue;o+=d?-m:m}}}),o}function Jy(e,t){arguments.length<2&&(t=e.nodes()[0]),TM(e,{},1,t)}function TM(e,t,n,r,i){var a=n,s=e.node(r);return t[r]=!0,Mn.forEach(e.neighbors(r),function(o){Mn.has(t,o)||(n=TM(e,t,n,o,r))}),s.low=a,s.lim=n++,i?s.parent=i:delete s.parent,n}function jM(e){return Mn.find(e.edges(),function(t){return e.edge(t).cutvalue<0})}function MM(e,t,n){var r=n.v,i=n.w;t.hasEdge(r,i)||(r=n.w,i=n.v);var a=e.node(r),s=e.node(i),o=a,l=!1;a.lim>s.lim&&(o=s,l=!0);var u=Mn.filter(t.edges(),function(c){return l===rk(e,e.node(c.v),o)&&l!==rk(e,e.node(c.w),o)});return Mn.minBy(u,function(c){return tB(t,c)})}function PM(e,t,n,r){var i=n.v,a=n.w;e.removeEdge(i,a),e.setEdge(r.v,r.w,{}),Jy(e),Xy(e,t),lB(e,t)}function lB(e,t){var n=Mn.find(e.nodes(),function(i){return!t.node(i).parent}),r=rB(e,n);r=r.slice(1),Mn.forEach(r,function(i){var a=e.node(i).parent,s=t.edge(i,a),o=!1;s||(s=t.edge(a,i),o=!0),t.node(i).rank=t.node(a).rank+(o?s.minlen:-s.minlen)})}function uB(e,t,n){return e.hasEdge(t,n)}function rk(e,t,n){return n.low<=t.lim&&t.lim<=n.lim}var cB=Vl,NM=cB.longestPath,dB=EM,fB=sB,hB=pB;function pB(e){switch(e.graph().ranker){case"network-simplex":ik(e);break;case"tight-tree":vB(e);break;case"longest-path":mB(e);break;default:ik(e)}}var mB=NM;function vB(e){NM(e),dB(e)}function ik(e){fB(e)}var nv=xe,yB=gB;function gB(e){var t=wB(e);nv.forEach(e.graph().dummyChains,function(n){for(var r=e.node(n),i=r.edgeObj,a=bB(e,t,i.v,i.w),s=a.path,o=a.lca,l=0,u=s[l],c=!0;n!==i.w;){if(r=e.node(n),c){for(;(u=s[l])!==o&&e.node(u).maxRank<r.rank;)l++;u===o&&(c=!1)}if(!c){for(;l<s.length-1&&e.node(u=s[l+1]).minRank<=r.rank;)l++;u=s[l]}e.setParent(n,u),n=e.successors(n)[0]}})}function bB(e,t,n,r){var i=[],a=[],s=Math.min(t[n].low,t[r].low),o=Math.max(t[n].lim,t[r].lim),l,u;l=n;do l=e.parent(l),i.push(l);while(l&&(t[l].low>s||o>t[l].lim));for(u=l,l=r;(l=e.parent(l))!==u;)a.push(l);return{path:i.concat(a.reverse()),lca:u}}function wB(e){var t={},n=0;function r(i){var a=n;nv.forEach(e.children(i),r),t[i]={low:a,lim:n++}}return nv.forEach(e.children(),r),t}var wn=xe,rv=pt,xB={run:SB,cleanup:EB};function SB(e){var t=rv.addDummyNode(e,"root",{},"_root"),n=_B(e),r=wn.max(wn.values(n))-1,i=2*r+1;e.graph().nestingRoot=t,wn.forEach(e.edges(),function(s){e.edge(s).minlen*=i});var a=kB(e)+1;wn.forEach(e.children(),function(s){RM(e,t,i,a,r,n,s)}),e.graph().nodeRankFactor=i}function RM(e,t,n,r,i,a,s){var o=e.children(s);if(!o.length){s!==t&&e.setEdge(t,s,{weight:0,minlen:n});return}var l=rv.addBorderNode(e,"_bt"),u=rv.addBorderNode(e,"_bb"),c=e.node(s);e.setParent(l,s),c.borderTop=l,e.setParent(u,s),c.borderBottom=u,wn.forEach(o,function(d){RM(e,t,n,r,i,a,d);var f=e.node(d),m=f.borderTop?f.borderTop:d,v=f.borderBottom?f.borderBottom:d,p=f.borderTop?r:2*r,x=m!==v?1:i-a[s]+1;e.setEdge(l,m,{weight:p,minlen:x,nestingEdge:!0}),e.setEdge(v,u,{weight:p,minlen:x,nestingEdge:!0})}),e.parent(s)||e.setEdge(t,l,{weight:0,minlen:i+a[s]})}function _B(e){var t={};function n(r,i){var a=e.children(r);a&&a.length&&wn.forEach(a,function(s){n(s,i+1)}),t[r]=i}return wn.forEach(e.children(),function(r){n(r,1)}),t}function kB(e){return wn.reduce(e.edges(),function(t,n){return t+e.edge(n).weight},0)}function EB(e){var t=e.graph();e.removeNode(t.nestingRoot),delete t.nestingRoot,wn.forEach(e.edges(),function(n){var r=e.edge(n);r.nestingEdge&&e.removeEdge(n)})}var Fp=xe,CB=pt,TB=jB;function jB(e){function t(n){var r=e.children(n),i=e.node(n);if(r.length&&Fp.forEach(r,t),Fp.has(i,"minRank")){i.borderLeft=[],i.borderRight=[];for(var a=i.minRank,s=i.maxRank+1;a<s;++a)ak(e,"borderLeft","_bl",n,i,a),ak(e,"borderRight","_br",n,i,a)}}Fp.forEach(e.children(),t)}function ak(e,t,n,r,i,a){var s={width:0,height:0,rank:a,borderType:t},o=i[t][a-1],l=CB.addDummyNode(e,"border",s,n);i[t][a]=l,e.setParent(l,r),o&&e.setEdge(o,l,{weight:1})}var tn=xe,MB={adjust:PB,undo:NB};function PB(e){var t=e.graph().rankdir.toLowerCase();(t==="lr"||t==="rl")&&AM(e)}function NB(e){var t=e.graph().rankdir.toLowerCase();(t==="bt"||t==="rl")&&RB(e),(t==="lr"||t==="rl")&&(AB(e),AM(e))}function AM(e){tn.forEach(e.nodes(),function(t){sk(e.node(t))}),tn.forEach(e.edges(),function(t){sk(e.edge(t))})}function sk(e){var t=e.width;e.width=e.height,e.height=t}function RB(e){tn.forEach(e.nodes(),function(t){Vp(e.node(t))}),tn.forEach(e.edges(),function(t){var n=e.edge(t);tn.forEach(n.points,Vp),tn.has(n,"y")&&Vp(n)})}function Vp(e){e.y=-e.y}function AB(e){tn.forEach(e.nodes(),function(t){Bp(e.node(t))}),tn.forEach(e.edges(),function(t){var n=e.edge(t);tn.forEach(n.points,Bp),tn.has(n,"x")&&Bp(n)})}function Bp(e){var t=e.x;e.x=e.y,e.y=t}var hn=xe,IB=DB;function DB(e){var t={},n=hn.filter(e.nodes(),function(o){return!e.children(o).length}),r=hn.max(hn.map(n,function(o){return e.node(o).rank})),i=hn.map(hn.range(r+1),function(){return[]});function a(o){if(!hn.has(t,o)){t[o]=!0;var l=e.node(o);i[l.rank].push(o),hn.forEach(e.successors(o),a)}}var s=hn.sortBy(n,function(o){return e.node(o).rank});return hn.forEach(s,a),i}var Vn=xe,LB=OB;function OB(e,t){for(var n=0,r=1;r<t.length;++r)n+=qB(e,t[r-1],t[r]);return n}function qB(e,t,n){for(var r=Vn.zipObject(n,Vn.map(n,function(u,c){return c})),i=Vn.flatten(Vn.map(t,function(u){return Vn.sortBy(Vn.map(e.outEdges(u),function(c){return{pos:r[c.w],weight:e.edge(c).weight}}),"pos")}),!0),a=1;a<n.length;)a<<=1;var s=2*a-1;a-=1;var o=Vn.map(new Array(s),function(){return 0}),l=0;return Vn.forEach(i.forEach(function(u){var c=u.pos+a;o[c]+=u.weight;for(var d=0;c>0;)c%2&&(d+=o[c+1]),c=c-1>>1,o[c]+=u.weight;l+=u.weight*d})),l}var ok=xe,FB=VB;function VB(e,t){return ok.map(t,function(n){var r=e.inEdges(n);if(r.length){var i=ok.reduce(r,function(a,s){var o=e.edge(s),l=e.node(s.v);return{sum:a.sum+o.weight*l.order,weight:a.weight+o.weight}},{sum:0,weight:0});return{v:n,barycenter:i.sum/i.weight,weight:i.weight}}else return{v:n}})}var yt=xe,BB=$B;function $B(e,t){var n={};yt.forEach(e,function(i,a){var s=n[i.v]={indegree:0,in:[],out:[],vs:[i.v],i:a};yt.isUndefined(i.barycenter)||(s.barycenter=i.barycenter,s.weight=i.weight)}),yt.forEach(t.edges(),function(i){var a=n[i.v],s=n[i.w];!yt.isUndefined(a)&&!yt.isUndefined(s)&&(s.indegree++,a.out.push(n[i.w]))});var r=yt.filter(n,function(i){return!i.indegree});return zB(r)}function zB(e){var t=[];function n(a){return function(s){s.merged||(yt.isUndefined(s.barycenter)||yt.isUndefined(a.barycenter)||s.barycenter>=a.barycenter)&&UB(a,s)}}function r(a){return function(s){s.in.push(a),--s.indegree===0&&e.push(s)}}for(;e.length;){var i=e.pop();t.push(i),yt.forEach(i.in.reverse(),n(i)),yt.forEach(i.out,r(i))}return yt.map(yt.filter(t,function(a){return!a.merged}),function(a){return yt.pick(a,["vs","i","barycenter","weight"])})}function UB(e,t){var n=0,r=0;e.weight&&(n+=e.barycenter*e.weight,r+=e.weight),t.weight&&(n+=t.barycenter*t.weight,r+=t.weight),e.vs=t.vs.concat(e.vs),e.barycenter=n/r,e.weight=r,e.i=Math.min(t.i,e.i),t.merged=!0}var ka=xe,GB=pt,HB=WB;function WB(e,t){var n=GB.partition(e,function(c){return ka.has(c,"barycenter")}),r=n.lhs,i=ka.sortBy(n.rhs,function(c){return-c.i}),a=[],s=0,o=0,l=0;r.sort(KB(!!t)),l=lk(a,i,l),ka.forEach(r,function(c){l+=c.vs.length,a.push(c.vs),s+=c.barycenter*c.weight,o+=c.weight,l=lk(a,i,l)});var u={vs:ka.flatten(a,!0)};return o&&(u.barycenter=s/o,u.weight=o),u}function lk(e,t,n){for(var r;t.length&&(r=ka.last(t)).i<=n;)t.pop(),e.push(r.vs),n++;return n}function KB(e){return function(t,n){return t.barycenter<n.barycenter?-1:t.barycenter>n.barycenter?1:e?n.i-t.i:t.i-n.i}}var Wn=xe,YB=FB,QB=BB,XB=HB,JB=IM;function IM(e,t,n,r){var i=e.children(t),a=e.node(t),s=a?a.borderLeft:void 0,o=a?a.borderRight:void 0,l={};s&&(i=Wn.filter(i,function(v){return v!==s&&v!==o}));var u=YB(e,i);Wn.forEach(u,function(v){if(e.children(v.v).length){var p=IM(e,v.v,n,r);l[v.v]=p,Wn.has(p,"barycenter")&&e$(v,p)}});var c=QB(u,n);ZB(c,l);var d=XB(c,r);if(s&&(d.vs=Wn.flatten([s,d.vs,o],!0),e.predecessors(s).length)){var f=e.node(e.predecessors(s)[0]),m=e.node(e.predecessors(o)[0]);Wn.has(d,"barycenter")||(d.barycenter=0,d.weight=0),d.barycenter=(d.barycenter*d.weight+f.order+m.order)/(d.weight+2),d.weight+=2}return d}function ZB(e,t){Wn.forEach(e,function(n){n.vs=Wn.flatten(n.vs.map(function(r){return t[r]?t[r].vs:r}),!0)})}function e$(e,t){Wn.isUndefined(e.barycenter)?(e.barycenter=t.barycenter,e.weight=t.weight):(e.barycenter=(e.barycenter*e.weight+t.barycenter*t.weight)/(e.weight+t.weight),e.weight+=t.weight)}var Ea=xe,t$=Kt.Graph,n$=r$;function r$(e,t,n){var r=i$(e),i=new t$({compound:!0}).setGraph({root:r}).setDefaultNodeLabel(function(a){return e.node(a)});return Ea.forEach(e.nodes(),function(a){var s=e.node(a),o=e.parent(a);(s.rank===t||s.minRank<=t&&t<=s.maxRank)&&(i.setNode(a),i.setParent(a,o||r),Ea.forEach(e[n](a),function(l){var u=l.v===a?l.w:l.v,c=i.edge(u,a),d=Ea.isUndefined(c)?0:c.weight;i.setEdge(u,a,{weight:e.edge(l).weight+d})}),Ea.has(s,"minRank")&&i.setNode(a,{borderLeft:s.borderLeft[t],borderRight:s.borderRight[t]}))}),i}function i$(e){for(var t;e.hasNode(t=Ea.uniqueId("_root")););return t}var a$=xe,s$=o$;function o$(e,t,n){var r={},i;a$.forEach(n,function(a){for(var s=e.parent(a),o,l;s;){if(o=e.parent(s),o?(l=r[o],r[o]=s):(l=i,i=s),l&&l!==s){t.setEdge(l,s);return}s=o}})}var ir=xe,l$=IB,u$=LB,c$=JB,d$=n$,f$=s$,h$=Kt.Graph,uk=pt,p$=m$;function m$(e){var t=uk.maxRank(e),n=ck(e,ir.range(1,t+1),"inEdges"),r=ck(e,ir.range(t-1,-1,-1),"outEdges"),i=l$(e);dk(e,i);for(var a=Number.POSITIVE_INFINITY,s,o=0,l=0;l<4;++o,++l){v$(o%2?n:r,o%4>=2),i=uk.buildLayerMatrix(e);var u=u$(e,i);u<a&&(l=0,s=ir.cloneDeep(i),a=u)}dk(e,s)}function ck(e,t,n){return ir.map(t,function(r){return d$(e,r,n)})}function v$(e,t){var n=new h$;ir.forEach(e,function(r){var i=r.graph().root,a=c$(r,i,n,t);ir.forEach(a.vs,function(s,o){r.node(s).order=o}),f$(r,n,a.vs)})}function dk(e,t){ir.forEach(t,function(n){ir.forEach(n,function(r,i){e.node(r).order=i})})}var Y=xe,y$=Kt.Graph,g$=pt,b$={positionX:P$};function w$(e,t){var n={};function r(i,a){var s=0,o=0,l=i.length,u=Y.last(a);return Y.forEach(a,function(c,d){var f=S$(e,c),m=f?e.node(f).order:l;(f||c===u)&&(Y.forEach(a.slice(o,d+1),function(v){Y.forEach(e.predecessors(v),function(p){var x=e.node(p),y=x.order;(y<s||m<y)&&!(x.dummy&&e.node(v).dummy)&&DM(n,p,v)})}),o=d+1,s=m)}),a}return Y.reduce(t,r),n}function x$(e,t){var n={};function r(a,s,o,l,u){var c;Y.forEach(Y.range(s,o),function(d){c=a[d],e.node(c).dummy&&Y.forEach(e.predecessors(c),function(f){var m=e.node(f);m.dummy&&(m.order<l||m.order>u)&&DM(n,f,c)})})}function i(a,s){var o=-1,l,u=0;return Y.forEach(s,function(c,d){if(e.node(c).dummy==="border"){var f=e.predecessors(c);f.length&&(l=e.node(f[0]).order,r(s,u,d,o,l),u=d,o=l)}r(s,u,s.length,l,a.length)}),s}return Y.reduce(t,i),n}function S$(e,t){if(e.node(t).dummy)return Y.find(e.predecessors(t),function(n){return e.node(n).dummy})}function DM(e,t,n){if(t>n){var r=t;t=n,n=r}var i=e[t];i||(e[t]=i={}),i[n]=!0}function _$(e,t,n){if(t>n){var r=t;t=n,n=r}return Y.has(e[t],n)}function k$(e,t,n,r){var i={},a={},s={};return Y.forEach(t,function(o){Y.forEach(o,function(l,u){i[l]=l,a[l]=l,s[l]=u})}),Y.forEach(t,function(o){var l=-1;Y.forEach(o,function(u){var c=r(u);if(c.length){c=Y.sortBy(c,function(p){return s[p]});for(var d=(c.length-1)/2,f=Math.floor(d),m=Math.ceil(d);f<=m;++f){var v=c[f];a[u]===u&&l<s[v]&&!_$(n,u,v)&&(a[v]=u,a[u]=i[u]=i[v],l=s[v])}}})}),{root:i,align:a}}function E$(e,t,n,r,i){var a={},s=C$(e,t,n,i),o=i?"borderLeft":"borderRight";function l(d,f){for(var m=s.nodes(),v=m.pop(),p={};v;)p[v]?d(v):(p[v]=!0,m.push(v),m=m.concat(f(v))),v=m.pop()}function u(d){a[d]=s.inEdges(d).reduce(function(f,m){return Math.max(f,a[m.v]+s.edge(m))},0)}function c(d){var f=s.outEdges(d).reduce(function(v,p){return Math.min(v,a[p.w]-s.edge(p))},Number.POSITIVE_INFINITY),m=e.node(d);f!==Number.POSITIVE_INFINITY&&m.borderType!==o&&(a[d]=Math.max(a[d],f))}return l(u,s.predecessors.bind(s)),l(c,s.successors.bind(s)),Y.forEach(r,function(d){a[d]=a[n[d]]}),a}function C$(e,t,n,r){var i=new y$,a=e.graph(),s=N$(a.nodesep,a.edgesep,r);return Y.forEach(t,function(o){var l;Y.forEach(o,function(u){var c=n[u];if(i.setNode(c),l){var d=n[l],f=i.edge(d,c);i.setEdge(d,c,Math.max(s(e,u,l),f||0))}l=u})}),i}function T$(e,t){return Y.minBy(Y.values(t),function(n){var r=Number.NEGATIVE_INFINITY,i=Number.POSITIVE_INFINITY;return Y.forIn(n,function(a,s){var o=R$(e,s)/2;r=Math.max(a+o,r),i=Math.min(a-o,i)}),r-i})}function j$(e,t){var n=Y.values(t),r=Y.min(n),i=Y.max(n);Y.forEach(["u","d"],function(a){Y.forEach(["l","r"],function(s){var o=a+s,l=e[o],u;if(l!==t){var c=Y.values(l);u=s==="l"?r-Y.min(c):i-Y.max(c),u&&(e[o]=Y.mapValues(l,function(d){return d+u}))}})})}function M$(e,t){return Y.mapValues(e.ul,function(n,r){if(t)return e[t.toLowerCase()][r];var i=Y.sortBy(Y.map(e,r));return(i[1]+i[2])/2})}function P$(e){var t=g$.buildLayerMatrix(e),n=Y.merge(w$(e,t),x$(e,t)),r={},i;Y.forEach(["u","d"],function(s){i=s==="u"?t:Y.values(t).reverse(),Y.forEach(["l","r"],function(o){o==="r"&&(i=Y.map(i,function(d){return Y.values(d).reverse()}));var l=(s==="u"?e.predecessors:e.successors).bind(e),u=k$(e,i,n,l),c=E$(e,i,u.root,u.align,o==="r");o==="r"&&(c=Y.mapValues(c,function(d){return-d})),r[s+o]=c})});var a=T$(e,r);return j$(r,a),M$(r,e.graph().align)}function N$(e,t,n){return function(r,i,a){var s=r.node(i),o=r.node(a),l=0,u;if(l+=s.width/2,Y.has(s,"labelpos"))switch(s.labelpos.toLowerCase()){case"l":u=-s.width/2;break;case"r":u=s.width/2;break}if(u&&(l+=n?u:-u),u=0,l+=(s.dummy?t:e)/2,l+=(o.dummy?t:e)/2,l+=o.width/2,Y.has(o,"labelpos"))switch(o.labelpos.toLowerCase()){case"l":u=o.width/2;break;case"r":u=-o.width/2;break}return u&&(l+=n?u:-u),u=0,l}}function R$(e,t){return e.node(t).width}var Ca=xe,LM=pt,A$=b$.positionX,I$=D$;function D$(e){e=LM.asNonCompoundGraph(e),L$(e),Ca.forEach(A$(e),function(t,n){e.node(n).x=t})}function L$(e){var t=LM.buildLayerMatrix(e),n=e.graph().ranksep,r=0;Ca.forEach(t,function(i){var a=Ca.max(Ca.map(i,function(s){return e.node(s).height}));Ca.forEach(i,function(s){e.node(s).y=r+a/2}),r+=a+n})}var Z=xe,fk=C3,hk=z3,O$=hB,q$=pt.normalizeRanks,F$=yB,V$=pt.removeEmptyRanks,pk=xB,B$=TB,mk=MB,$$=p$,z$=I$,ur=pt,U$=Kt.Graph,G$=H$;function H$(e,t){var n=t&&t.debugTiming?ur.time:ur.notime;n("layout",function(){var r=n("  buildLayoutGraph",function(){return r4(e)});n("  runLayout",function(){W$(r,n)}),n("  updateInputGraph",function(){K$(e,r)})})}function W$(e,t){t("    makeSpaceForEdgeLabels",function(){i4(e)}),t("    removeSelfEdges",function(){h4(e)}),t("    acyclic",function(){fk.run(e)}),t("    nestingGraph.run",function(){pk.run(e)}),t("    rank",function(){O$(ur.asNonCompoundGraph(e))}),t("    injectEdgeLabelProxies",function(){a4(e)}),t("    removeEmptyRanks",function(){V$(e)}),t("    nestingGraph.cleanup",function(){pk.cleanup(e)}),t("    normalizeRanks",function(){q$(e)}),t("    assignRankMinMax",function(){s4(e)}),t("    removeEdgeLabelProxies",function(){o4(e)}),t("    normalize.run",function(){hk.run(e)}),t("    parentDummyChains",function(){F$(e)}),t("    addBorderSegments",function(){B$(e)}),t("    order",function(){$$(e)}),t("    insertSelfEdges",function(){p4(e)}),t("    adjustCoordinateSystem",function(){mk.adjust(e)}),t("    position",function(){z$(e)}),t("    positionSelfEdges",function(){m4(e)}),t("    removeBorderNodes",function(){f4(e)}),t("    normalize.undo",function(){hk.undo(e)}),t("    fixupEdgeLabelCoords",function(){c4(e)}),t("    undoCoordinateSystem",function(){mk.undo(e)}),t("    translateGraph",function(){l4(e)}),t("    assignNodeIntersects",function(){u4(e)}),t("    reversePoints",function(){d4(e)}),t("    acyclic.undo",function(){fk.undo(e)})}function K$(e,t){Z.forEach(e.nodes(),function(n){var r=e.node(n),i=t.node(n);r&&(r.x=i.x,r.y=i.y,t.children(n).length&&(r.width=i.width,r.height=i.height))}),Z.forEach(e.edges(),function(n){var r=e.edge(n),i=t.edge(n);r.points=i.points,Z.has(i,"x")&&(r.x=i.x,r.y=i.y)}),e.graph().width=t.graph().width,e.graph().height=t.graph().height}var Y$=["nodesep","edgesep","ranksep","marginx","marginy"],Q$={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},X$=["acyclicer","ranker","rankdir","align"],J$=["width","height"],Z$={width:0,height:0},e4=["minlen","weight","width","height","labeloffset"],t4={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},n4=["labelpos"];function r4(e){var t=new U$({multigraph:!0,compound:!0}),n=zp(e.graph());return t.setGraph(Z.merge({},Q$,$p(n,Y$),Z.pick(n,X$))),Z.forEach(e.nodes(),function(r){var i=zp(e.node(r));t.setNode(r,Z.defaults($p(i,J$),Z$)),t.setParent(r,e.parent(r))}),Z.forEach(e.edges(),function(r){var i=zp(e.edge(r));t.setEdge(r,Z.merge({},t4,$p(i,e4),Z.pick(i,n4)))}),t}function i4(e){var t=e.graph();t.ranksep/=2,Z.forEach(e.edges(),function(n){var r=e.edge(n);r.minlen*=2,r.labelpos.toLowerCase()!=="c"&&(t.rankdir==="TB"||t.rankdir==="BT"?r.width+=r.labeloffset:r.height+=r.labeloffset)})}function a4(e){Z.forEach(e.edges(),function(t){var n=e.edge(t);if(n.width&&n.height){var r=e.node(t.v),i=e.node(t.w),a={rank:(i.rank-r.rank)/2+r.rank,e:t};ur.addDummyNode(e,"edge-proxy",a,"_ep")}})}function s4(e){var t=0;Z.forEach(e.nodes(),function(n){var r=e.node(n);r.borderTop&&(r.minRank=e.node(r.borderTop).rank,r.maxRank=e.node(r.borderBottom).rank,t=Z.max(t,r.maxRank))}),e.graph().maxRank=t}function o4(e){Z.forEach(e.nodes(),function(t){var n=e.node(t);n.dummy==="edge-proxy"&&(e.edge(n.e).labelRank=n.rank,e.removeNode(t))})}function l4(e){var t=Number.POSITIVE_INFINITY,n=0,r=Number.POSITIVE_INFINITY,i=0,a=e.graph(),s=a.marginx||0,o=a.marginy||0;function l(u){var c=u.x,d=u.y,f=u.width,m=u.height;t=Math.min(t,c-f/2),n=Math.max(n,c+f/2),r=Math.min(r,d-m/2),i=Math.max(i,d+m/2)}Z.forEach(e.nodes(),function(u){l(e.node(u))}),Z.forEach(e.edges(),function(u){var c=e.edge(u);Z.has(c,"x")&&l(c)}),t-=s,r-=o,Z.forEach(e.nodes(),function(u){var c=e.node(u);c.x-=t,c.y-=r}),Z.forEach(e.edges(),function(u){var c=e.edge(u);Z.forEach(c.points,function(d){d.x-=t,d.y-=r}),Z.has(c,"x")&&(c.x-=t),Z.has(c,"y")&&(c.y-=r)}),a.width=n-t+s,a.height=i-r+o}function u4(e){Z.forEach(e.edges(),function(t){var n=e.edge(t),r=e.node(t.v),i=e.node(t.w),a,s;n.points?(a=n.points[0],s=n.points[n.points.length-1]):(n.points=[],a=i,s=r),n.points.unshift(ur.intersectRect(r,a)),n.points.push(ur.intersectRect(i,s))})}function c4(e){Z.forEach(e.edges(),function(t){var n=e.edge(t);if(Z.has(n,"x"))switch((n.labelpos==="l"||n.labelpos==="r")&&(n.width-=n.labeloffset),n.labelpos){case"l":n.x-=n.width/2+n.labeloffset;break;case"r":n.x+=n.width/2+n.labeloffset;break}})}function d4(e){Z.forEach(e.edges(),function(t){var n=e.edge(t);n.reversed&&n.points.reverse()})}function f4(e){Z.forEach(e.nodes(),function(t){if(e.children(t).length){var n=e.node(t),r=e.node(n.borderTop),i=e.node(n.borderBottom),a=e.node(Z.last(n.borderLeft)),s=e.node(Z.last(n.borderRight));n.width=Math.abs(s.x-a.x),n.height=Math.abs(i.y-r.y),n.x=a.x+n.width/2,n.y=r.y+n.height/2}}),Z.forEach(e.nodes(),function(t){e.node(t).dummy==="border"&&e.removeNode(t)})}function h4(e){Z.forEach(e.edges(),function(t){if(t.v===t.w){var n=e.node(t.v);n.selfEdges||(n.selfEdges=[]),n.selfEdges.push({e:t,label:e.edge(t)}),e.removeEdge(t)}})}function p4(e){var t=ur.buildLayerMatrix(e);Z.forEach(t,function(n){var r=0;Z.forEach(n,function(i,a){var s=e.node(i);s.order=a+r,Z.forEach(s.selfEdges,function(o){ur.addDummyNode(e,"selfedge",{width:o.label.width,height:o.label.height,rank:s.rank,order:a+ ++r,e:o.e,label:o.label},"_se")}),delete s.selfEdges})})}function m4(e){Z.forEach(e.nodes(),function(t){var n=e.node(t);if(n.dummy==="selfedge"){var r=e.node(n.e.v),i=r.x+r.width/2,a=r.y,s=n.x-i,o=r.height/2;e.setEdge(n.e,n.label),e.removeNode(t),n.label.points=[{x:i+2*s/3,y:a-o},{x:i+5*s/6,y:a-o},{x:i+s,y:a},{x:i+5*s/6,y:a+o},{x:i+2*s/3,y:a+o}],n.label.x=n.x,n.label.y=n.y}})}function $p(e,t){return Z.mapValues(Z.pick(e,t),Number)}function zp(e){var t={};return Z.forEach(e,function(n,r){t[r.toLowerCase()]=n}),t}var Zs=xe,v4=pt,y4=Kt.Graph,g4={debugOrdering:b4};function b4(e){var t=v4.buildLayerMatrix(e),n=new y4({compound:!0,multigraph:!0}).setGraph({});return Zs.forEach(e.nodes(),function(r){n.setNode(r,{label:r}),n.setParent(r,"layer"+e.node(r).rank)}),Zs.forEach(e.edges(),function(r){n.setEdge(r.v,r.w,{},r.name)}),Zs.forEach(t,function(r,i){var a="layer"+i;n.setNode(a,{rank:"same"}),Zs.reduce(r,function(s,o){return n.setEdge(s,o,{style:"invis"}),o})}),n}var w4="0.8.5",x4={graphlib:Kt,layout:G$,debug:g4,util:{time:pt.time,notime:pt.notime},version:w4};const vk=jk(x4),yk=new Map;function S4(e,t){const n=e.map(i=>i.id).join("|"),r=t.map(i=>`${i.source}->${i.target}`).join("|");return`${e.length}:${t.length}:${n}:${r}`}function _4(e,t,n){if(n){const r=S4(e,t),i=yk.get(n);if(i&&i.signature===r)return i.layout;const a=gk(e,t);return yk.set(n,{signature:r,layout:a}),a}return gk(e,t)}function gk(e,t){if(e.length>2500){const r=Math.ceil(Math.sqrt(e.length));return e.map((i,a)=>{const s=Math.floor(a/r),o=a%r;return{id:i.id,position:{x:o*260,y:s*160}}})}const n=new vk.graphlib.Graph;return n.setGraph({rankdir:"LR",nodesep:48,ranksep:80}),n.setDefaultEdgeLabel(()=>({})),e.forEach(r=>{n.setNode(r.id,{width:220,height:120})}),t.forEach(r=>{n.setEdge(r.source,r.target)}),vk.layout(n),e.map(r=>{const i=n.node(r.id);return{id:r.id,position:{x:i.x-i.width/2,y:i.y-i.height/2}}})}function k4(e){const t=new Map;for(const r of e)r.type==="tool_call"&&r.toolCallId&&t.set(r.toolCallId,r.id);const n=[];for(const r of e)if(!(r.type!=="llm_call"||!r.io)){for(const i of r.io.emittedToolCallIds??[]){const a=t.get(i);a&&n.push({id:`io_emit_${r.id}_${a}`,source:r.id,target:a,kind:"io",toolCallId:i})}for(const i of r.io.consumedToolCallIds??[]){const a=t.get(i);a&&n.push({id:`io_consume_${a}_${r.id}`,source:a,target:r.id,kind:"io",toolCallId:i})}}return n}function E4(e,t,n){const{intervals:r}=ml(e,t,n),i=new Set;return r.forEach(a=>{i.add(a.startMs),i.add(a.endMs)}),Array.from(i).sort((a,s)=>a-s)}function C4(e,t,n){if(!e.length)return null;if(n===1){for(const r of e)if(r>t+1)return r;return e[e.length-1]}for(let r=e.length-1;r>=0;r-=1){const i=e[r];if(i<t-1)return i}return e[0]}const T4=300,j4=2e3,M4=1.5;function P4(e){const t=T4*Math.pow(M4,Math.max(0,e));return Math.min(j4,Math.round(t))}function Bn(e,t){if(!e)return t;try{return JSON.parse(e)}catch{return t}}function bk(e,t){const n=new Map;return[...e,...t].forEach(r=>{const i=n.get(r.id);(!i||r.updatedAt>=i.updatedAt)&&n.set(r.id,r)}),Array.from(n.values()).sort((r,i)=>r.createdAt-i.createdAt)}function wk(e,t=50){return[...e].sort((n,r)=>r.timestamp-n.timestamp).slice(0,t)}const eo=["latency storm","cache divergence","tool timeout chain","stale prompt vector","schema mismatch surge"],xk=[{id:"seasonal-incident-sprint",title:"Resolve 3 raid objectives",goal:3,rewardCredits:120},{id:"boss-shutdown",title:"Defeat one boss encounter",goal:1,rewardCredits:200},{id:"guild-push",title:"Complete 2 guild operations",goal:2,rewardCredits:160},{id:"timeline-weaver",title:"Merge 2 timeline forks",goal:2,rewardCredits:150}],N4={stability_patch:{credits:20,materials:12},precision_lens:{credits:28,materials:16},overclock_core:{credits:42,materials:24}};function Re(e,t,n){return Math.min(n,Math.max(t,e))}function R4(e){let t=0;for(let n=0;n<e.length;n+=1)t=(t*31+e.charCodeAt(n))%1e5;return t}function OM(e,t,n){const r=eo[(e+t)%eo.length],i=eo[(e+t+2)%eo.length];return{id:`mission-${t}-${(e+t)%997}`,title:`Scenario Depth ${t}`,difficulty:Re(1+Math.floor(t/2),1,10),hazards:[r,i,...n.slice(-1)],rewardCredits:60+t*15}}function A4(){return[{id:"node-alpha",title:"Signal Fracture",body:"Telemetry divergence emerges across parallel tool paths.",choices:[{id:"alpha-risk",label:"Push aggressive branch optimization",nextNodeId:"node-beta",tensionDelta:12,mutator:"risk-surge"},{id:"alpha-safe",label:"Stabilize and preserve deterministic flow",nextNodeId:"node-beta",tensionDelta:-5,mutator:"stability-first"}]},{id:"node-beta",title:"Protocol Fork",body:"The team must choose speed versus interpretability under pressure.",choices:[{id:"beta-speed",label:"Favor speed and absorb uncertainty",nextNodeId:"node-gamma",tensionDelta:8,mutator:"throughput-boost"},{id:"beta-clarity",label:"Favor clarity and route through guardrails",nextNodeId:"node-gamma",tensionDelta:-3,mutator:"clarity-path"}]},{id:"node-gamma",title:"Final Directive",body:"Command has one move left before the run locks in.",choices:[{id:"gamma-strike",label:"Launch decisive strike sequence",nextNodeId:"node-alpha",tensionDelta:10,mutator:"strike-loop"},{id:"gamma-reset",label:"Reset tempo and rebuild confidence",nextNodeId:"node-alpha",tensionDelta:-6,mutator:"tempo-reset"}]}]}function qM(e,t){return{...xk[(e+t)%xk.length],progress:0,completed:!1}}function FM(e,t){const n=[...e,t];return Array.from(new Set(n)).slice(-6)}function iv(e,t,n){return{...e,campaign:{...e.campaign,depth:t,mutators:n,currentMission:OM(e.seed,t,n)}}}function Sk(e){const t=R4(e),n=["baseline"];return{seed:t,raid:{party:["director"],roles:{director:"strategist"},objectives:[{id:"obj-root-cause",label:"Identify root cause chain",progress:0,target:100,completed:!1},{id:"obj-recover",label:"Recover operational stability",progress:0,target:100,completed:!1},{id:"obj-harden",label:"Harden replay strategy",progress:0,target:100,completed:!1}],completed:!1},campaign:{depth:1,lives:3,completedMissionIds:[],mutators:n,currentMission:OM(t,1,n)},narrative:{currentNodeId:"node-alpha",nodes:A4(),history:[],tension:35},skills:{points:6,nodes:[{id:"skill-focus",label:"Focus Matrix",cost:2,requires:[],unlocked:!1},{id:"skill-resilience",label:"Resilience Mesh",cost:2,requires:[],unlocked:!1},{id:"skill-surge",label:"Surge Compiler",cost:3,requires:["skill-focus"],unlocked:!1},{id:"skill-echo",label:"Echo Anticipator",cost:3,requires:["skill-resilience"],unlocked:!1}],loadout:{capacity:3,equipped:[]}},pvp:{round:0,stability:72,sabotage:28,fog:40,winner:null},time:{activeForkId:"primary",forks:[{id:"primary",label:"Primary timeline",playheadMs:0,history:[0]}]},boss:{name:"The Causality Hydra",phase:1,hp:320,maxHp:320,enraged:!1},director:{risk:30,hint:"Start with the bottleneck path and branch cautiously.",recommendedModifier:"stability_patch",lastOutcome:"mixed"},economy:{credits:140,materials:90,crafted:[]},guild:{name:"Trace Guild",members:4,operationsScore:0,eventsCompleted:0},cinematic:{queue:[]},liveops:{season:`Season-${2026+t%2}`,week:1,challenge:qM(t,1)},safety:{mutedPlayerIds:[],blockedPlayerIds:[],reports:[]}}}function X4(e,t,n){if(!t.trim())return e;const r=e.raid.party.includes(t)?e.raid.party:[...e.raid.party,t];return{...e,raid:{...e.raid,party:r,roles:{...e.raid.roles,[t]:n}}}}function J4(e,t,n){const r=e.raid.objectives.map(s=>{if(s.id!==t)return s;const o=Re(s.progress+n,0,s.target);return{...s,progress:o,completed:o>=s.target}}),i=r.every(s=>s.completed),a=i&&!e.raid.completed?180:0;return{...e,raid:{...e.raid,objectives:r,completed:i},economy:{...e.economy,credits:e.economy.credits+a}}}function Z4(e,t){const n=e.campaign.currentMission;if(t){const a=e.campaign.depth+1,s=iv(e,a,e.campaign.mutators);return{...s,campaign:{...s.campaign,completedMissionIds:[...s.campaign.completedMissionIds,n.id]},economy:{...s.economy,credits:s.economy.credits+n.rewardCredits,materials:s.economy.materials+14},director:{...s.director,lastOutcome:"success"}}}const r=Re(e.campaign.lives-1,0,3),i=iv(e,e.campaign.depth,FM(e.campaign.mutators,"failure-loop"));return{...i,campaign:{...i.campaign,lives:r},director:{...i.director,lastOutcome:"failure"}}}function ez(e,t){const n=e.narrative.nodes.find(o=>o.id===e.narrative.currentNodeId),r=n==null?void 0:n.choices.find(o=>o.id===t);if(!n||!r)return e;const i=Re(e.narrative.tension+r.tensionDelta,0,100),a=FM(e.campaign.mutators,r.mutator),s=iv(e,e.campaign.depth,a);return{...s,narrative:{...s.narrative,currentNodeId:r.nextNodeId,history:[...s.narrative.history,{nodeId:n.id,choiceId:r.id}],tension:i}}}function tz(e,t){const n=e.skills.nodes.find(a=>a.id===t);if(!n||n.unlocked)return e;const r=new Set(e.skills.nodes.filter(a=>a.unlocked).map(a=>a.id));return!n.requires.every(a=>r.has(a))||e.skills.points<n.cost?e:{...e,skills:{...e.skills,points:e.skills.points-n.cost,nodes:e.skills.nodes.map(a=>a.id===t?{...a,unlocked:!0}:a)}}}function nz(e,t){const n=e.skills.nodes.find(r=>r.id===t);return!(n!=null&&n.unlocked)||e.skills.loadout.equipped.includes(t)||e.skills.loadout.equipped.length>=e.skills.loadout.capacity?e:{...e,skills:{...e.skills,loadout:{...e.skills.loadout,equipped:[...e.skills.loadout.equipped,t]}}}}function rz(e,t){const n={...e.pvp};return t==="sabotage"?(n.sabotage=Re(n.sabotage+13,0,100),n.stability=Re(n.stability-11,0,100),n.fog=Re(n.fog+9,0,100)):t==="stabilize"?(n.stability=Re(n.stability+14,0,100),n.sabotage=Re(n.sabotage-8,0,100),n.fog=Re(n.fog-6,0,100)):(n.fog=Re(n.fog-16,0,100),n.stability=Re(n.stability+3,0,100),n.sabotage=Re(n.sabotage-4,0,100)),n.round+=1,n.stability<=0?n.winner="saboteur":n.sabotage<=0?n.winner="operator":n.round>=10&&(n.winner=n.stability>=n.sabotage?"operator":"saboteur"),{...e,pvp:n}}function iz(e,t,n){const r=`fork-${e.time.forks.length+1}`,i={id:r,label:t.trim()||r,playheadMs:Re(n,0,36e5),history:[Re(n,0,36e5)]};return{...e,time:{...e.time,activeForkId:r,forks:[...e.time.forks,i]}}}function az(e,t){const n=e.time.activeForkId,r=e.time.forks.map(i=>{if(i.id!==n)return i;const a=Re(i.playheadMs-Math.abs(t),0,36e5);return{...i,playheadMs:a,history:[...i.history,a]}});return{...e,time:{...e.time,forks:r}}}function sz(e,t){if(t==="primary")return e;const n=e.time.forks.find(a=>a.id===t),r=e.time.forks.find(a=>a.id==="primary");if(!n||!r)return e;const i={...r,playheadMs:n.playheadMs,history:[...r.history,n.playheadMs]};return{...e,time:{activeForkId:"primary",forks:[i,...e.time.forks.filter(a=>a.id!=="primary"&&a.id!==t)]}}}function oz(e,t){const n=t==="exploit"?42:t==="strike"?24:8,r=Re(e.boss.hp-n,0,e.boss.maxHp),i=r/e.boss.maxHp,a=i<=.33?3:i<=.66?2:1;return{...e,boss:{...e.boss,hp:r,phase:a,enraged:a===3||r<=e.boss.maxHp*.2}}}function lz(e,t){const n=t.failures*12+t.retries*4+(t.latencyMs>1400?8:0),r=Re(e.director.risk+n,0,100),i=t.failures>0?"Prioritize failure triage and run a stabilizing replay branch.":t.latencyMs>1400?"Latency pressure detected. Reduce fan-out and tighten tool boundaries.":"Momentum is stable. Push a high-confidence optimization branch.",a=t.failures>1?"stability_patch":t.latencyMs>1400?"precision_lens":"overclock_core",s=t.failures>0?"failure":"success";return{...e,director:{risk:r,hint:i,recommendedModifier:a,lastOutcome:s}}}function uz(e,t){const n=N4[t];if(!n||e.economy.credits<n.credits||e.economy.materials<n.materials)return e;const r=e.economy.crafted.includes(t)?e.economy.crafted:[...e.economy.crafted,t];let i={...e,economy:{...e.economy,credits:e.economy.credits-n.credits,materials:e.economy.materials-n.materials,crafted:r}};return t==="stability_patch"&&(i={...i,pvp:{...i.pvp,stability:Re(i.pvp.stability+8,0,100)}}),t==="precision_lens"&&(i={...i,raid:{...i.raid,objectives:i.raid.objectives.map((a,s)=>s===0?{...a,progress:Re(a.progress+10,0,a.target),completed:Re(a.progress+10,0,a.target)>=a.target}:a)}}),t==="overclock_core"&&(i={...i,boss:{...i.boss,hp:Re(i.boss.hp-16,0,i.boss.maxHp)}}),i}function cz(e,t){const n=Math.round(t);return{...e,guild:{...e.guild,operationsScore:e.guild.operationsScore+n,eventsCompleted:e.guild.eventsCompleted+(n>0?1:0)},economy:{...e.economy,credits:e.economy.credits+Math.max(0,n*3)}}}function dz(e,t,n,r){const i={id:`event-${e.cinematic.queue.length+1}-${e.seed%1e3}`,type:t,message:n,intensity:r,at:Date.now()};return{...e,cinematic:{queue:[i,...e.cinematic.queue].slice(0,12)}}}function fz(e){const t=e.liveops.week+1,n=qM(e.seed,t);return{...e,liveops:{...e.liveops,week:t,challenge:n}}}function Zy(e){return e.trim().toLowerCase()}function eg(e){return e.safety??{mutedPlayerIds:[],blockedPlayerIds:[],reports:[]}}function hz(e,t,n){const r=Zy(t),i=n.trim();if(!r||!i)return e;const a=eg(e),s={id:`report-${a.reports.length+1}-${e.seed%1e3}`,targetPlayerId:r,reason:i,createdAt:Date.now()};return{...e,safety:{...a,reports:[s,...a.reports].slice(0,40)}}}function pz(e,t){const n=Zy(t),r=eg(e);return!n||r.mutedPlayerIds.includes(n)?e:{...e,safety:{...r,mutedPlayerIds:[...r.mutedPlayerIds,n]}}}function mz(e,t){const n=Zy(t),r=eg(e);return!n||r.blockedPlayerIds.includes(n)?e:{...e,safety:{...r,blockedPlayerIds:[...r.blockedPlayerIds,n],mutedPlayerIds:r.mutedPlayerIds.includes(n)?r.mutedPlayerIds:[...r.mutedPlayerIds,n]}}}const _k=220,kk=120,av="agentDirector.presence.v1",I4=2e4,D4=5e3,ai="agentDirector.collab.cursors.v1",Up="agentDirector.collab.annotations.v1",Gp="agentDirector.collab.activity.v1",L4=S.lazy(()=>hs(()=>import("./index-B6jkHtIc.js"),__vite__mapDeps([0,1]))),O4=S.lazy(()=>hs(()=>import("./index-CQYjl5XD.js"),[])),q4=S.lazy(()=>hs(()=>import("./index-BD9Sh2bW.js"),[])),F4=S.lazy(()=>hs(()=>import("./index-CbcsUi-R.js"),[])),V4=S.lazy(()=>hs(()=>import("./index-D0J89hp-.js"),[]));function to(){return`scenario-${Math.random().toString(36).slice(2,9)}`}function B4(e){return e.filter(t=>t.parentStepId).map(t=>({source:t.parentStepId,target:t.id}))}function $4(e){const t=[...e].sort((n,r)=>n.index-r.index);return t.slice(1).map((n,r)=>({source:t[r].id,target:n.id}))}function z4(e){const t={},n=e.getBoundingClientRect();return e.querySelectorAll(".step-card").forEach(i=>{const a=i.dataset.stepId;if(!a)return;const s=i.getBoundingClientRect();t[a]={left:s.left-n.left,top:s.top-n.top,width:s.width,height:s.height}}),t}function U4(e,t,n){const r=[...B4(e),...$4(e),...k4(e).map(v=>({source:v.source,target:v.target}))],i=_4(e,r,n),a=t.getBoundingClientRect(),s=Math.min(...i.map(v=>v.position.x)),o=Math.min(...i.map(v=>v.position.y)),l=Math.max(...i.map(v=>v.position.x)),u=Math.max(...i.map(v=>v.position.y)),c=l-s+_k,d=u-o+kk,f=Math.max(32,(a.width-c)/2),m=Math.max(24,(a.height-d)/2);return i.reduce((v,p)=>(v[p.id]={left:p.position.x-s+f,top:p.position.y-o+m,width:_k,height:kk},v),{})}function Ek(e,t,n){const r=t.trim().toLowerCase();return e.filter(i=>{var s,o,l;return n!=="all"&&i.type!==n?!1:r?[i.name,(s=i.preview)==null?void 0:s.title,(o=i.preview)==null?void 0:o.outputPreview,(l=i.preview)==null?void 0:l.inputPreview].filter(Boolean).join(" ").toLowerCase().includes(r):!0})}function G4(e,t,n){var u;const r=e.profiles[t]??e.profiles[((u=e.players[0])==null?void 0:u.player_id)??""]??Object.values(e.profiles)[0],i=e.players.reduce((c,d)=>(c[d.player_id]=d.role,c),{}),a=Object.entries(e.narrative.nodes).map(([c,d])=>({id:c,title:d.title,body:d.title,choices:d.choices.map(f=>({id:f.id,label:f.id,nextNodeId:f.next,tensionDelta:f.tension,mutator:f.modifier}))})),s=e.pvp.winner??null,l=e.telemetry.failures>0?"failure":s?"success":"mixed";return{seed:e.seed,raid:{party:e.players.map(c=>c.player_id),roles:i,objectives:e.raid.objectives.map(c=>({id:c.id,label:c.label,progress:c.progress,target:c.target,completed:c.completed})),completed:e.raid.completed},campaign:{depth:e.campaign.depth,lives:e.campaign.lives,currentMission:{id:e.campaign.current_mission.id,title:e.campaign.current_mission.title,difficulty:e.campaign.current_mission.difficulty,hazards:e.campaign.current_mission.hazards,rewardCredits:e.campaign.current_mission.reward_tokens},completedMissionIds:e.campaign.completed_missions,mutators:[...e.campaign.modifiers,...e.campaign.unlocked_modifiers]},narrative:{currentNodeId:e.narrative.current_node_id,nodes:a.length>0?a:n.narrative.nodes,history:e.narrative.history.map(c=>({nodeId:c.node_id,choiceId:c.choice_id})),tension:e.narrative.tension},skills:{points:(r==null?void 0:r.skill_points)??n.skills.points,nodes:n.skills.nodes.map(c=>({...c,unlocked:!!(r!=null&&r.unlocked_skills.includes(c.id))})),loadout:{capacity:(r==null?void 0:r.loadout_capacity)??n.skills.loadout.capacity,equipped:(r==null?void 0:r.loadout)??[]}},pvp:{round:e.pvp.round,stability:e.pvp.operator_stability,sabotage:e.pvp.sabotage_pressure,fog:e.pvp.fog,winner:s},time:{activeForkId:e.time.active_fork_id,forks:e.time.forks.map(c=>({id:c.id,label:c.label,playheadMs:c.playhead_ms,history:c.history}))},boss:{name:e.boss.name,phase:e.boss.phase,hp:e.boss.hp,maxHp:e.boss.max_hp,enraged:e.boss.enraged},director:{risk:e.director.risk,hint:e.director.hint,recommendedModifier:e.director.hazard_bias,lastOutcome:l},economy:{credits:e.economy.tokens,materials:e.economy.materials,crafted:e.economy.crafted},guild:{name:e.guild.guild_id??"Trace Guild",members:e.players.length,operationsScore:e.guild.operations_score,eventsCompleted:e.guild.events_completed},cinematic:{queue:e.cinematic.events.map(c=>({id:c.id,type:c.type==="critical"||c.type==="success"||c.type==="warning"||c.type==="twist"?c.type:"warning",message:c.message,intensity:c.intensity||1,at:Date.parse(c.at)||Date.now()}))},liveops:{season:e.liveops.season,week:e.liveops.week,challenge:{id:e.liveops.challenge.id,title:e.liveops.challenge.title,goal:e.liveops.challenge.goal,progress:e.liveops.challenge.progress,rewardCredits:e.liveops.challenge.reward,completed:e.liveops.challenge.completed}},safety:n.safety}}function H4(){const e=window.sessionStorage.getItem("agentDirector.sessionId");if(e)return e;const t=`session-${Math.random().toString(36).slice(2,10)}`;return window.sessionStorage.setItem("agentDirector.sessionId",t),t}function Ck(){try{const e=window.localStorage.getItem(av);if(!e)return{};const t=JSON.parse(e),n={};return Object.entries(t).forEach(([r,i])=>{typeof i=="number"&&(n[r]=i)}),n}catch{return{}}}function Tk(e,t=Date.now()){return Object.fromEntries(Object.entries(e).filter(([,n])=>t-n<I4))}function W4(){var kg,Eg;const{trace:e,insights:t,loading:n,error:r,reload:i,traces:a,selectedTraceId:s,setSelectedTraceId:o}=Eq(),[l,u]=Se("agentDirector.mode","cinema"),[c,d]=S.useState(""),f=S.useDeferredValue(c),[m,v]=S.useState("all"),[p,x]=S.useState(""),[y,g]=S.useState(null),[w,_]=S.useState(null),[E,T]=S.useState(null),[j,C]=S.useState([]),[M,P]=S.useState(""),[R,I]=S.useState(null),[O,K]=S.useState(!1),[V,le]=S.useState(null),[ie,A]=Se("agentDirector.safeExport",!1),[q,U]=Se("agentDirector.syncPlayback",!0),[z,ae]=S.useState(null),[Te,oe]=S.useState(!1),[ce,B]=S.useState(0),[de,Et]=Se("agentDirector.speed",1),[ln,Yt]=Se("agentDirector.windowed",!1),[mr,Kr]=S.useState(2e4),[F,te]=S.useState(!1),[Q,Le]=S.useState(!1),[ne,Oe]=Se("agentDirector.overlayEnabled",!1),[An,Bl]=Se("agentDirector.onboarded",!1),[,un]=Se("agentDirector.tourCompleted",!1),[ze,pe]=Se("agentDirector.explainMode",!0),[In,Dn]=Se("agentDirector.heroDismissed",!1),[$l,Yr]=Se("agentDirector.dockOpen",!1),[lt,_s]=Se("agentDirector.introPersona","builder"),[ks,Qi]=Se("agentDirector.launchPath","rapid_triage"),[vr,Qt]=Se("agentDirector.themeMode","studio"),[qt,VM]=Se("agentDirector.motionMode","balanced"),[Ve,tg]=Se("agentDirector.timelineLaneStrategy","type"),[ng,Qr]=Se("agentDirector.timelineStudioConfig",da),[Es,rt]=Se("agentDirector.missions",{playback:!1,flow:!1,inspect:!1,matrix:!1,replay:!1,annotate:!1,collaborate:!1}),rg=!1,[ig,ag]=Se("agentDirector.introDismissed",rg),[zl,Qe]=S.useState(!1),[fe,Cs]=S.useState(null),[Ts,Ul]=S.useState([]),[Gl,Hl]=S.useState(null),[BM,sg]=S.useState(null),[Wl,Kl]=S.useState(""),[$M,Xr]=S.useState([{id:to(),name:"Prompt tighter",strategy:"hybrid",modificationsText:'{"prompt":"Return concise response"}'},{id:to(),name:"Recorded baseline",strategy:"recorded",modificationsText:"{}"}]),[Xi,Yl]=S.useState(null),[Ct,og]=S.useState(null),[zM,js]=S.useState(!1),[UM,Ji]=S.useState(null),[GM,Zi]=Se("agentDirector.gameplayState.v1",Sk("bootstrap")),[lg,ug]=Se("agentDirector.gameplayTraceId.v1",""),[yr]=Se("agentDirector.gameplayPlayerId.v1",`player-${Math.random().toString(36).slice(2,8)}`),[gr,Jr]=Se("agentDirector.gameplaySessionId.v1",""),[Ae,Ln]=S.useState(null),[HM,je]=S.useState(null),[WM,Zr]=S.useState(null),[Ql,cg]=S.useState(1),[KM,Xl]=S.useState(null),[YM,Jl]=S.useState(null),[dg,Zl]=S.useState({}),[fg,eu]=S.useState([]),[QM,tu]=S.useState([]),[ea,nu]=S.useState(800),[XM,JM]=S.useState(0),ru=S.useRef(null),hg=S.useRef(null),ei=S.useRef(H4()),pg=S.useRef(0),mg=S.useRef(0),iu=S.useRef(!1),On=S.useMemo(()=>{if(!e)return[];const b=performance.now(),k=Ek(e.steps,f,m);return mg.current=performance.now()-b,k},[e,f,m]),au=S.useMemo(()=>On.slice(0,Math.min(On.length,ea)),[ea,On]),vg=S.useMemo(()=>{if(!y)return au;const b=new Set(y.matchedStepIds);return au.filter(k=>b.has(k.id))},[au,y]),ZM=S.useMemo(()=>z?Ek(z.steps,f,m).slice(0,Math.min(z.steps.length,ea)):[],[z,f,m,ea]),yg=S.useMemo(()=>e?E4(e.startedAt,e.endedAt,e.steps):[],[e]),eP=S.useMemo(()=>!e||!z?null:bj(e,z),[e,z]),gg=S.useMemo(()=>e?e.steps.find(b=>b.id===V)??null:null,[e,V]),ta=S.useMemo(()=>e?MA(e.steps,Ve):[],[e,Ve]),ti=S.useMemo(()=>{const b=ng[Ve]??da[Ve];return L0(ta,b.order,b.hidden)},[ta,Ve,ng]),tP=S.useMemo(()=>ti.order.filter(b=>!ti.hidden.includes(b)),[ti.hidden,ti.order]),Ms=S.useMemo(()=>{const b=ei.current;return Object.values(dg).filter(k=>k.sessionId!==b).filter(k=>k.traceId===((e==null?void 0:e.id)??"none")).sort((k,N)=>N.updatedAt-k.updatedAt)},[dg,e==null?void 0:e.id]),nP=S.useMemo(()=>Ms.map(b=>b.playheadMs),[Ms]),rP=S.useMemo(()=>fg.filter(b=>b.traceId===(e==null?void 0:e.id)),[fg,e==null?void 0:e.id]),bg=S.useMemo(()=>{const b=Object.keys(Es).length,k=Object.values(Es).filter(Boolean).length;return{done:k,total:b,pct:b>0?Math.round(k/b*100):0}},[Es]),su=S.useMemo(()=>{var W;if(!e)return 100;const b=100,k=Math.min(60,((t==null?void 0:t.errors)??0)*16),N=Math.min(24,((t==null?void 0:t.retries)??0)*6),D=e.metadata.wallTimeMs>6e4?12:e.metadata.wallTimeMs>3e4?6:0,G=(W=t==null?void 0:t.timing)!=null&&W.degraded?8:0;return Math.max(0,Math.min(100,Math.round(b-k-N-D-G)))},[t==null?void 0:t.errors,t==null?void 0:t.retries,(kg=t==null?void 0:t.timing)==null?void 0:kg.degraded,e]),iP=S.useMemo(()=>l==="flow"?"F / C / Space":l==="compare"?"C / Space /  ":l==="matrix"?"G / C / Cmd+K":l==="gameplay"?"G / S / Cmd+K":"C / F / Space",[l]);S.useEffect(()=>{e&&e.id!==lg&&(Zi(Sk(e.id)),ug(e.id))},[lg,Zi,ug,e]),S.useEffect(()=>{let b=!1;if(!gr){Ln(null);return}return dw().then(k=>{b||(Ln(k),k||je("Gameplay session not found."))}),()=>{b=!0}},[gr]),S.useEffect(()=>{if(!gr)return;const b=kq();return()=>b()},[gr]),S.useEffect(()=>{Ae&&Zi(b=>G4(Ae,yr,b))},[yr,Ae,Zi]),S.useEffect(()=>{let b=!1;if(!(Ae==null?void 0:Ae.guild.guild_id)){Zr(null);return}return wq().then(N=>{b||Zr(N)}),()=>{b=!0}},[Ae==null?void 0:Ae.guild.guild_id]),S.useEffect(()=>{g(null),_(null)},[e==null?void 0:e.id]),S.useEffect(()=>{JM(Math.round(mg.current))},[On]),S.useEffect(()=>{if(!e)return;const b=On.length;if(b<=1200){nu(b);return}nu(800);const k=window.setInterval(()=>{nu(N=>N>=b?(window.clearInterval(k),b):Math.min(b,N+1e3))},70);return()=>window.clearInterval(k)},[On.length,e]),S.useEffect(()=>{let b=!1;if(!(e!=null&&e.id)){T(null);return}return lq(e.id).then(k=>{b||T(k)}),()=>{b=!0}},[e==null?void 0:e.id]),S.useEffect(()=>{let b=!1;return uq().then(k=>{b||(C(k),!M&&k.length>0&&P(k[0].id))}),()=>{b=!0}},[M]),S.useEffect(()=>{hg.current=z},[z]),S.useEffect(()=>(document.body.dataset.theme=vr,()=>{delete document.body.dataset.theme}),[vr]),S.useEffect(()=>(document.body.dataset.motion=qt,()=>{delete document.body.dataset.motion}),[qt]),S.useEffect(()=>{const b=ei.current,k=(J=!1)=>{const Me=Date.now(),fn=Tk(Ck(),Me);J?delete fn[b]:fn[b]=Me,window.localStorage.setItem(av,JSON.stringify(fn)),cg(Math.max(1,Object.keys(fn).length))},N=()=>{const J=Tk(Ck(),Date.now());cg(Math.max(1,Object.keys(J).length))};k();const D=window.setInterval(()=>k(),D4),G=J=>{J.key===av&&N()},W=()=>{document.visibilityState==="visible"&&k()},ee=()=>k(!0);return window.addEventListener("storage",G),document.addEventListener("visibilitychange",W),window.addEventListener("beforeunload",ee),()=>{window.clearInterval(D),k(!0),window.removeEventListener("storage",G),document.removeEventListener("visibilitychange",W),window.removeEventListener("beforeunload",ee)}},[]),S.useEffect(()=>{l==="compare"&&Yr(!1)},[l,Yr]),S.useEffect(()=>{ta.length!==0&&Qr(b=>{const k=b[Ve]??da[Ve],N=L0(ta,k.order,k.hidden);return N.order.join("|")===k.order.join("|")&&N.hidden.join("|")===k.hidden.join("|")?b:{...b,[Ve]:N}})},[ta,Ve,Qr]),S.useEffect(()=>{Zl(Bn(window.localStorage.getItem(ai),{})),eu(Bn(window.localStorage.getItem(Up),[])),tu(Bn(window.localStorage.getItem(Gp),[]))},[]),S.useEffect(()=>{const b=Date.now();if(b-pg.current<120&&Te)return;pg.current=b;const k=ei.current,N={sessionId:k,traceId:(e==null?void 0:e.id)??"none",mode:l,playheadMs:Math.round(ce),selectedStepId:V,updatedAt:b},G={...Bn(window.localStorage.getItem(ai),{}),[k]:N};window.localStorage.setItem(ai,JSON.stringify(G)),Zl(G)},[Te,l,ce,V,e==null?void 0:e.id]),S.useEffect(()=>{const b=ei.current;return()=>{const k=Bn(window.localStorage.getItem(ai),{});if(!k[b])return;const N={...k};delete N[b],window.localStorage.setItem(ai,JSON.stringify(N))}},[]),S.useEffect(()=>{const b=k=>{if(k.key===ai&&Zl(Bn(k.newValue,{})),k.key===Up){const N=Bn(k.newValue,[]);eu(D=>bk(D,N))}k.key===Gp&&tu(wk(Bn(k.newValue,[])))};return window.addEventListener("storage",b),()=>window.removeEventListener("storage",b)},[]);const X=S.useCallback(b=>{const k={id:`activity-${Math.random().toString(36).slice(2,9)}`,sessionId:ei.current,message:b,timestamp:Date.now()};tu(N=>{const D=wk([k,...N]);return window.localStorage.setItem(Gp,JSON.stringify(D)),D})},[]),cn=S.useCallback(async b=>{if(!e)return;const k=await dq(e.id,b,"hybrid",{note:"UI replay"},e);k&&(ae(k),Oe(!0),u("flow"),rt(N=>N.replay?N:{...N,replay:!0}),X(`Created replay from ${b}`))},[X,rt,e,ae,u,Oe]),aP=S.useCallback(async()=>{if(!e)return;if(!p.trim()){g(null),_(null);return}const b=await oq(e.id,p.trim());if(!b){_("TraceQL query failed"),g(null);return}g(b),_(null);const k=b.matchedStepIds[0];k&&(le(k),l!=="cinema"&&u("cinema"))},[l,u,e,p]),sP=S.useCallback(async()=>{if(!e||!M)return;K(!0);const b=await cq(M,e.id);K(!1),b&&I(b.result)},[M,e]),Tt=S.useCallback(()=>{if(!e)return;const b=[...e.steps].sort((k,N)=>(N.durationMs??0)-(k.durationMs??0))[0];b&&(le(b.id),u("cinema"))},[e,u]),wg=S.useCallback(()=>{if(!e||e.steps.length===0)return null;const b=[...e.steps].sort((k,N)=>(N.durationMs??0)-(k.durationMs??0))[0];return(b==null?void 0:b.id)??null},[e]),br=S.useCallback(()=>{if(!e)return;const b=e.steps.find(k=>k.status==="failed");b&&(le(b.id),u("cinema"))},[e,u]),ou=S.useCallback(async()=>{if(!e)return;const b=new URL(window.location.href);b.searchParams.set("trace",s??e.id),b.searchParams.set("mode",l),V?b.searchParams.set("step",V):b.searchParams.delete("step");try{await navigator.clipboard.writeText(b.toString()),Xl("Live link copied")}catch{window.prompt("Copy live session link",b.toString()),Xl("Live link ready")}window.setTimeout(()=>Xl(null),1800)},[l,V,s,e]),oP=S.useCallback(b=>{tg(b),X(`Switched lane strategy to ${b}`)},[X,tg]),lP=S.useCallback(b=>{Qr(k=>{const N=k[Ve]??da[Ve],D=N.hidden.includes(b)?N.hidden.filter(G=>G!==b):[...N.hidden,b];return{...k,[Ve]:{...N,hidden:D}}}),X(`Toggled lane visibility for ${b}`)},[X,Ve,Qr]),uP=S.useCallback(async b=>{if(!e)return;const k=await vq({traceId:e.id,name:b.trim()||"Night Ops"});if(!k){je("Failed to create gameplay session.");return}Ln(k),Jr(k.id),je(null),X(`Created gameplay session ${k.id}`)},[X,yr,Jr,e]),cP=S.useCallback(async(b,k,N)=>{if(!b.trim()){je("Session id is required.");return}const D=await yq({sessionId:b.trim(),playerId:k.trim()});if(!D){je("Failed to join gameplay session.");return}Ln(D),Jr(D.id),je(null),X(`Joined gameplay session ${D.id} as ${k}`)},[X,Jr]),dP=S.useCallback(async()=>{if(!gr)return;if(!await gq()){je("Failed to leave gameplay session.");return}Ln(null),Jr(""),je(null),X(`Left gameplay session ${gr}`)},[X,yr,gr,Jr]),fP=S.useCallback(async(b,k)=>{if(!(Ae!=null&&Ae.id))return;const N=await fw({sessionId:Ae.id,expectedVersion:Ae.version});if(N.session){Ln(N.session),je(null),X(`Gameplay action: ${b}`);return}if(N.conflict){const D=await dw(Ae.id);D&&Ln(D),je("Session changed by another player. Synced latest state.");return}je(N.error??"Gameplay action failed.")},[X,yr,Ae]),hP=S.useCallback(async(b,k)=>{if(!b.trim()||!k.trim()){je("Guild id and name are required.");return}const N=await bq({guildId:b.trim(),name:k.trim()});if(!N){je("Failed to create guild.");return}if(Zr(N),Ae){const D=await fw({sessionId:Ae.id,payload:{guild_id:N.id},expectedVersion:Ae.version});D.session&&Ln(D.session)}je(null),X(`Created guild ${N.id}`)},[X,yr,Ae]),pP=S.useCallback(async(b,k)=>{if(!b.trim()||!k.trim()){je("Guild id and player id are required.");return}const N=await xq(b.trim(),k.trim());if(!N){je("Failed to join guild.");return}Zr(N),je(null),X(`Joined guild ${N.id} as ${k}`)},[X]),mP=S.useCallback(async(b,k,N)=>{if(!b.trim()||!k.trim()||!N.trim()){je("Guild id, title, and schedule are required.");return}const D=await Sq({guildId:b.trim(),title:k.trim(),scheduledAt:N.trim()});if(!D){je("Failed to schedule guild event.");return}Zr(D.guild),je(null),X(`Scheduled guild event ${D.event.id}`)},[X]),vP=S.useCallback(async(b,k,N)=>{const D=await _q();if(!D){je("Failed to complete guild event.");return}Zr(D),je(null),X(`Completed guild event ${k}`)},[X]),yP=S.useCallback((b,k)=>{Qr(N=>{const D=N[Ve]??da[Ve],G=[...D.order],W=G.indexOf(b);if(W===-1)return N;const ee=k==="up"?W-1:W+1;if(ee<0||ee>=G.length)return N;const[J]=G.splice(W,1);return G.splice(ee,0,J),{...N,[Ve]:{...D,order:G}}}),X(`Moved lane group ${b} ${k}`)},[X,Ve,Qr]),gP=S.useCallback(()=>{rt({playback:!1,flow:!1,inspect:!1,matrix:!1,replay:!1,annotate:!1,collaborate:!1}),X("Reset onboarding missions")},[X,rt]),bP=S.useCallback((b,k)=>{if(!e||!b.trim())return;const N=Date.now(),D={id:`annotation-${Math.random().toString(36).slice(2,9)}`,traceId:e.id,stepId:k,body:b.trim(),authorSessionId:ei.current,createdAt:N,updatedAt:N};eu(G=>{const W=bk(G,[D]);return window.localStorage.setItem(Up,JSON.stringify(W)),W}),rt(G=>G.annotate?G:{...G,annotate:!0}),X(k?`Added annotation on step ${k}`:"Added trace annotation")},[X,rt,e]),wP=S.useCallback((b,k)=>{Xr(N=>N.map(D=>D.id===b?{...D,...k}:D))},[]),xP=S.useCallback(b=>{Xr(b)},[]),SP=S.useCallback(()=>{Xr(b=>[...b,{id:to(),name:`Scenario ${b.length+1}`,strategy:"hybrid",modificationsText:"{}"}])},[]),_P=S.useCallback(b=>{Xr(k=>k.length<=1?k:k.filter(N=>N.id!==b))},[]),kP=S.useCallback(b=>{Xr(k=>{const N=k.findIndex(ee=>ee.id===b);if(N===-1)return k;const D=k[N],G={...D,id:to(),name:`${D.name} copy`},W=[...k];return W.splice(N+1,0,G),W})},[]),EP=S.useCallback((b,k)=>{Xr(N=>{const D=N.findIndex(J=>J.id===b);if(D===-1)return N;const G=k==="up"?D-1:D+1;if(G<0||G>=N.length)return N;const W=[...N],[ee]=W.splice(D,1);return W.splice(G,0,ee),W})},[]),CP=S.useCallback(async b=>{var N;if(!e)return;const k=Wl||V||((N=e.steps[0])==null?void 0:N.id);if(!k){Ji("Select an anchor step before running the matrix.");return}try{js(!0),Ji(null);const D=await fq({traceId:e.id,stepId:k,scenarios:b});if(!D)throw new Error("Failed to create replay job.");Yl(D);let G=D;for(let ee=0;ee<30&&!(G.status!=="queued"&&G.status!=="running");ee+=1){const J=P4(ee);await new Promise(fn=>window.setTimeout(fn,J));const Me=await hq(D.id);if(!Me)break;G=Me,Yl(Me)}const W=await cw(D.id);if(!W)throw new Error("Replay job finished but matrix summary is unavailable.");og(W),u("matrix"),X(`Ran matrix with ${b.length} scenario(s) from ${k}`)}catch(D){Ji(D instanceof Error?D.message:"Failed to run replay matrix.")}finally{js(!1)}},[X,Wl,V,e,u]),TP=S.useCallback(async()=>{if(Xi){js(!0);try{const b=await pq(Xi.id);if(!b){Ji("Failed to cancel replay job.");return}Yl(b);const k=await cw(b.id);k&&og(k),X(`Canceled matrix job ${Xi.id}`)}finally{js(!1)}}},[X,Xi]),jP=S.useCallback(async b=>{const k=await wj();if(!(k!=null&&k.trace)){Ji("Could not load replay trace for compare view.");return}ae(k.trace),Oe(!0),u("compare"),X(`Opened matrix compare trace ${b}`)},[X,u,Oe]),me=S.useCallback(b=>{if(!(b===l||!e)){if((b==="flow"||b==="matrix"||b==="gameplay")&&oe(!1),b==="flow"&&l==="cinema"&&ru.current){const k=ru.current,N=z4(k),D=U4(e.steps,k,e.id);sg({steps:e.steps,fromRects:N,toRects:D}),X("Morphed cinema to flow");return}u(b),X(`Switched mode to ${b}`)}},[X,l,e,oe,u]),na=S.useCallback(async b=>{if(Qi(b),b==="rapid_triage"){pe(!0),me("cinema"),br(),e!=null&&e.steps.some(k=>k.status==="failed")||Tt(),X("Started rapid triage launch path");return}if(b==="deep_diagnosis"){pe(!0),me("flow"),Qe(!0),X("Started deep diagnosis launch path");return}U(!0),me("matrix"),await ou(),X("Started team sync launch path")},[X,me,Tt,br,pe,Qi,U,ou,e]),lu=S.useCallback(()=>{l==="flow"&&me("cinema"),oe(b=>!b)},[l,me]),qn=S.useCallback(()=>{Cs(null),Ul([]),Hl(null),oe(!1)},[oe]),xg=S.useCallback(b=>[{id:"setup",label:"Opening the reel",duration:1100,action:()=>{pe(!0),oe(!1),B(0),le(null),Oe(!1),Et(1),e&&e.steps.length<500&&Yt(!1),me("cinema")}},{id:"pace",label:"Pacing the timeline",duration:2200,action:()=>{me("cinema"),oe(!0),Et(1.1)}},{id:"bottleneck",label:"Freeze on the bottleneck",duration:1600,action:()=>{oe(!1),Tt()}},{id:"inspect",label:"Inspect the moment",duration:1600,action:()=>{b&&le(b)}},{id:"flow",label:"Morph into flow",duration:2100,action:()=>{me("flow")}},{id:"replay",label:"Directors Cut replay",duration:2200,action:async()=>{if(!e)return;!hg.current&&b&&await cn(b),Oe(!0),u("compare")}},{id:"compare",label:"Compare the cut",duration:2e3,action:()=>{oe(!0),Et(1)}},{id:"finale",label:"Final frame",duration:1100,action:()=>{oe(!1)}}],[me,cn,Tt,pe,oe,u,Oe,B,le,Et,Yt,e]),ni=S.useCallback(()=>{var k;if(!e)return;const b=V??wg()??((k=e.steps[0])==null?void 0:k.id)??null;Ul(xg(b)),Cs({active:!0,step:0}),Hl(e.id),Qe(!1),te(!1),Le(!1)},[xg,wg,V,e,Le,te,Ul,Cs,Hl,Qe]),ri=S.useCallback(()=>{if(fe!=null&&fe.active){qn();return}ni()},[ni,qn,fe==null?void 0:fe.active]),MP=S.useMemo(()=>{const k=[{id:"header",title:"Mission control",body:`Confirm run status and metadata. ${{builder:"Focus on payload flow, tool-call sequencing, and replay-ready steps.",executive:"Focus on bottlenecks, risk signals, and run-level outcome changes.",operator:"Focus on failure patterns, retries, and runtime reliability posture."}[lt]}`,target:'[data-tour="header"]',placement:"bottom"}];return In||k.push({id:"hero",title:"Director briefing",body:"Choose Tour, Story mode, or Explain to ramp up quickly.",target:'[data-tour="hero"]',placement:"bottom"}),k.push({id:"insights",title:"Fast diagnosis",body:lt==="executive"?"Jump straight to bottlenecks and high-cost segments for fast executive readouts.":lt==="operator"?"Jump to failures and retries first, then inspect impacted steps.":"Jump straight to bottlenecks, errors, and high-cost steps with one click.",target:'[data-tour="insights"]',placement:"bottom"},{id:"journey",title:"Director journey",body:"A narrative path that teaches how to watch, inspect, and direct a better run.",target:'[data-tour="journey"]',placement:"bottom"},{id:"toolbar",title:"Filters + modes",body:"Search, filter, and switch between Cinema, Flow, and Compare as the story evolves.",target:'[data-tour="toolbar"]',placement:"bottom"},{id:"quick-actions",title:"Quick actions",body:"Launch Story Mode, open the command palette, or jump to bottlenecks instantly.",target:'[data-tour="quick-actions"]',placement:"left"},{id:"stage",title:"Cinema stage",body:"The timeline shows every step as a scene. Scrub to see pacing and concurrency.",target:'[data-tour="stage"]',placement:"top"},{id:"inspector",title:"Inspector",body:lt==="executive"?"Open key moments to validate outcome impact and communication-ready summaries.":"Open any step to read payloads, apply redaction, and replay from that moment.",target:'[data-tour="inspector"]',placement:"left"},{id:"compare",title:"Compare runs",body:z?"Compare is live. Review deltas in cost, steps, and wall time side by side.":"Replay from a step to unlock compare mode and validate improvements.",target:'[data-tour="compare"]',placement:"top"}),k},[z,In,lt]),PP=S.useCallback(()=>{sg(null),u("flow")},[u]),Xt=S.useMemo(()=>{var D,G,W,ee;if(!e)return[];const b=[],k=[...e.steps].sort((J,Me)=>(Me.durationMs??0)-(J.durationMs??0))[0],N=e.steps.find(J=>J.status==="failed");if(N&&V!==N.id&&b.push({id:"jump-error",title:"Investigate first failure",body:`${N.name} failed and should be inspected before optimization work.`,actionLabel:"Open failed step",tone:"warning",action:br}),k&&V!==k.id&&b.push({id:"jump-bottleneck",title:"Tackle latency bottleneck",body:`${k.name} is the slowest scene in this run and the best optimization target.`,actionLabel:"Open bottleneck",tone:"priority",action:Tt}),(D=E==null?void 0:E.hypotheses)!=null&&D[0]){const J=E.hypotheses[0];b.push({id:"investigate-hypothesis",title:J.title,body:J.summary,actionLabel:"Inspect evidence",tone:"info",action:()=>{const Me=J.evidenceStepIds[0];Me&&(le(Me),l!=="cinema"&&u("cinema"))}})}if(l!=="matrix"&&b.push({id:"matrix-experiment",title:"Run scenario matrix",body:"Compare prompt and strategy alternatives from one anchor step to rank causal impact.",actionLabel:"Open matrix",tone:"info",action:()=>{var J;Kl(V??((J=e.steps[0])==null?void 0:J.id)??""),u("matrix")}}),!z&&(V||(G=e.steps[0])!=null&&G.id)){const J=V??((W=e.steps[0])==null?void 0:W.id)??null;J&&b.push({id:"run-replay",title:"Create director replay",body:"Branch a replay trace and validate whether your change improves the run.",actionLabel:"Replay from step",tone:"info",action:()=>{cn(J)}})}if((ee=Ct==null?void 0:Ct.causalRanking)!=null&&ee.length){const J=Ct.causalRanking[0];b.push({id:"causal-factor",title:`Top causal factor: ${J.factor}`,body:`Confidence ${(J.confidence*100).toFixed(0)}% across ${J.evidence.samples} sample(s).`,actionLabel:"View matrix",tone:"priority",action:()=>u("matrix")})}return b.slice(0,4)},[z,cn,E,Tt,br,l,Ct,V,e,u]),NP=S.useMemo(()=>Xt.map((b,k)=>{const N=b.tone==="warning"?"high":b.tone==="priority"?"medium":"low";return{id:`priority-${b.id}`,title:b.title,detail:b.body,severity:N,actionLabel:b.actionLabel,onAction:b.action,done:k===0?b.id==="jump-error"&&!!V||b.id==="jump-bottleneck"&&!!V:!1}}),[Xt,V]),wr=S.useMemo(()=>{var W,ee;if(!e)return"No trace loaded.";const b=[...e.steps].sort((J,Me)=>(Me.durationMs??0)-(J.durationMs??0))[0],k=e.steps.filter(J=>J.status==="failed").length,N=(W=E==null?void 0:E.hypotheses)==null?void 0:W[0],D=(ee=Ct==null?void 0:Ct.causalRanking)==null?void 0:ee[0];return[`Run ${e.id} completed with ${e.steps.length} steps across ${e.metadata.wallTimeMs}ms.`,b?`Primary latency driver: ${b.name} (${b.durationMs??0}ms).`:null,k>0?`Observed ${k} failed step(s), indicating reliability risk.`:"No failed steps observed.",N?`Top investigation hypothesis: ${N.title} (${N.severity}).`:null,D?`Highest ranked causal factor from matrix: ${D.factor} (${(D.confidence*100).toFixed(0)}% confidence).`:null,"Recommended plan: inspect bottleneck evidence, validate with replay matrix, and lock in mitigations."].filter(Boolean).join(" ")},[E,Ct==null?void 0:Ct.causalRanking,e]),RP=S.useCallback(b=>{var N,D;const k=b.toLowerCase();if(!e)return"No trace is loaded yet.";if(k.includes("bottleneck")||k.includes("slow")){const G=[...e.steps].sort((W,ee)=>(ee.durationMs??0)-(W.durationMs??0))[0];return G?`The primary bottleneck is ${G.name} at ${G.durationMs??0}ms. Prioritize this step for optimization and replay validation.`:"No bottleneck could be determined from current trace data."}if(k.includes("risk")||k.includes("failure")||k.includes("error")){const G=e.steps.filter(W=>W.status==="failed");return G.length?`Risk is concentrated in ${G.length} failed step(s), starting at ${((N=G[0])==null?void 0:N.name)??"unknown"}.`:"Failure risk appears low for this run; no failed steps were observed."}return k.includes("cost")?`Recorded run cost is ${(e.metadata.totalCostUsd??0).toFixed(4)} USD. Use matrix scenarios to evaluate cheaper prompt/strategy options.`:k.includes("next")||k.includes("action")?Xt.length?`Next action: ${((D=Xt[0])==null?void 0:D.title)??"Open matrix"}.`:"Next action: open Cinema mode, inspect bottleneck, then run the matrix.":wr},[wr,Xt,e]),AP=S.useCallback(()=>{if(!e)return;const b=`# Director Narrative

${wr}

## Recommended Actions
${Xt.map(k=>`- ${k.title}: ${k.body}`).join(`
`)}`;VA(`agent-director-narrative-${e.id}.md`,b,"text/markdown")},[wr,Xt,e]),Ps=S.useCallback(async()=>{if(!e)return;const b=Xt[0],k=e.steps.filter(G=>G.status==="failed").length,D=[`Session handoff (${new Date().toISOString()})`,`Trace: ${e.id}`,`Mode: ${l}`,`Selected step: ${V??"none"}`,`Run health: ${su}/100`,`Failures: ${k}`,`Wall time: ${e.metadata.wallTimeMs}ms`,`Top recommendation: ${b?`${b.title} -> ${b.actionLabel}`:"None"}`,`Narrative: ${wr}`].join(`
`);try{await navigator.clipboard.writeText(D),Jl("Handoff digest copied")}catch{window.prompt("Copy handoff digest",D),Jl("Handoff digest ready")}window.setTimeout(()=>Jl(null),2200)},[wr,Xt,l,su,V,e]);S.useEffect(()=>{var N;if(!e)return;sq(),B(0),oe(!1);const b=Math.min(Math.max((e.metadata.wallTimeMs||1)*.2,5e3),6e4);Kr(b),e.steps.length>500&&Yt(!0),z||Oe(!1),l==="compare"&&!z&&u("cinema");const k=V&&e.steps.some(D=>D.id===V)?V:((N=e.steps[0])==null?void 0:N.id)??"";Kl(D=>D&&e.steps.some(G=>G.id===D)?D:k)},[e,z,l,V,u,Yt,Oe]),S.useEffect(()=>(document.body.classList.toggle("explain-mode",ze),()=>{document.body.classList.remove("explain-mode")}),[ze]),S.useEffect(()=>(document.body.classList.toggle("story-mode",!!(fe!=null&&fe.active)),()=>{document.body.classList.remove("story-mode")}),[fe==null?void 0:fe.active]),S.useEffect(()=>{if(!(fe!=null&&fe.active))return;const b=Ts[fe.step];if(!b){qn();return}Promise.resolve(b.action());const k=window.setTimeout(()=>{Cs(N=>N&&N.active?{...N,step:N.step+1}:N)},b.duration);return()=>window.clearTimeout(k)},[Ts,qn,fe]),S.useEffect(()=>{fe!=null&&fe.active&&(!e||!Gl||e.id!==Gl&&qn())},[fe==null?void 0:fe.active,e,Gl,qn]),S.useEffect(()=>{ce>0&&rt(b=>b.playback?b:{...b,playback:!0})},[ce,rt]),S.useEffect(()=>{l==="flow"&&rt(b=>b.flow?b:{...b,flow:!0}),l==="matrix"&&rt(b=>b.matrix?b:{...b,matrix:!0})},[l,rt]),S.useEffect(()=>{V&&rt(b=>b.inspect?b:{...b,inspect:!0})},[V,rt]),S.useEffect(()=>{Ql>1&&rt(b=>b.collaborate?b:{...b,collaborate:!0})},[Ql,rt]),S.useEffect(()=>{if(!q||Te||iu.current)return;const b=Ms[0];if(!b||b.traceId!==(e==null?void 0:e.id))return;const k=Math.abs(b.playheadMs-ce),N=b.mode!==l,D=(b.selectedStepId??null)!==(V??null);k<600&&!N&&!D||(iu.current=!0,B(b.playheadMs),(b.mode==="cinema"||b.mode==="flow"||b.mode==="compare"||b.mode==="matrix"||b.mode==="gameplay")&&u(b.mode),le(b.selectedStepId??null),window.setTimeout(()=>{iu.current=!1},180))},[Te,l,ce,Ms,V,u,q,e==null?void 0:e.id]),S.useEffect(()=>{if(!e)return;const k=Date.parse(e.startedAt)+ce;let N=0,D=Number.POSITIVE_INFINITY;e.steps.forEach((W,ee)=>{const J=Date.parse(W.startedAt),Me=Date.parse(W.endedAt??W.startedAt);if(k>=J&&k<=Me){N=ee,D=0;return}const fn=Math.min(Math.abs(k-J),Math.abs(k-Me));fn<D&&(D=fn,N=ee)}),[N,N-1,N+1].filter(W=>W>=0&&W<e.steps.length).forEach(W=>{const ee=e.steps[W];ee&&iq(e.id,ee.id,ie)})},[e,ce,ie]),S.useEffect(()=>{if(!e||!Te||l!=="cinema"&&l!=="compare")return;const b=(z==null?void 0:z.metadata.wallTimeMs)??0,k=l==="compare"?Math.max(e.metadata.wallTimeMs||1,b||1):e.metadata.wallTimeMs||1;let N=0,D=performance.now();const G=W=>{const ee=(W-D)*de;D=W,B(J=>{const Me=J+ee;return Me>=k?(oe(!1),k):Me}),N=requestAnimationFrame(G)};return N=requestAnimationFrame(G),()=>cancelAnimationFrame(N)},[e,z,Te,de,l]),S.useEffect(()=>{const b=k=>{var W;const N=k.target,D=(W=N==null?void 0:N.tagName)==null?void 0:W.toLowerCase();if(!(D==="input"||D==="textarea"||D==="select"||N!=null&&N.isContentEditable)){if((k.metaKey||k.ctrlKey)&&k.key.toLowerCase()==="k"){k.preventDefault(),Le(ee=>!ee);return}if(k.key==="?"||k.key==="/"&&k.shiftKey){k.preventDefault(),te(!0);return}if(k.key.toLowerCase()==="s"){k.preventDefault(),ri();return}if(k.key.toLowerCase()==="e"){k.preventDefault(),pe(ee=>!ee);return}if(k.key.toLowerCase()==="t"){k.preventDefault(),Qe(!0);return}if(k.key==="Escape"){if(zl){Qe(!1),un(!0);return}te(!1),Le(!1),le(null);return}if(k.key===" "){k.preventDefault(),(l==="cinema"||l==="compare")&&oe(ee=>!ee);return}if(k.key.toLowerCase()==="f"){k.preventDefault(),l==="flow"?u("cinema"):l==="cinema"&&me("flow");return}if(k.key.toLowerCase()==="c"){k.preventDefault(),l!=="cinema"&&u("cinema");return}if(k.key.toLowerCase()==="g"){k.preventDefault(),me("gameplay");return}if(k.key.toLowerCase()==="i"){k.preventDefault(),V?le(null):e!=null&&e.steps.length&&le(e.steps[0].id);return}if(k.key==="ArrowLeft"||k.key==="ArrowRight"){if(k.preventDefault(),!e)return;const ee=e.metadata.wallTimeMs||1;if(k.shiftKey){B(k.key==="ArrowLeft"?0:ee),oe(!1),u("cinema");return}const J=k.key==="ArrowRight"?1:-1,Me=C4(yg,ce,J);Me!=null&&(B(Me),oe(!1),u("cinema"))}}};return window.addEventListener("keydown",b),()=>window.removeEventListener("keydown",b)},[l,V,e,ce,yg,me,u,pe,Le,Qe,un,zl,ri]);const Sg=S.useMemo(()=>{if(!e||!ln||c)return null;const b=e.metadata.wallTimeMs||1,k=Math.min(Math.max(mr,5e3),b);let N=Math.max(0,ce-k/2);const D=Math.min(b,N+k);return D-N<k&&(N=Math.max(0,D-k)),{startMs:N,endMs:D}},[e,ln,ce,c,mr]),dn=!!(fe!=null&&fe.active),_g=(fe==null?void 0:fe.step)??0,IP=((Eg=Ts[_g])==null?void 0:Eg.label)??"Wrapping up",DP=Ts.length,LP=c!==f,OP=`${Math.min(On.length,ea)}/${On.length}`,qP=S.useMemo(()=>[{id:"macro-rapid-triage",label:"Run rapid triage launch path",description:"Jump to the highest-risk step and start mitigation.",group:"Macros",onTrigger:()=>{na("rapid_triage")}},{id:"macro-deep-diagnosis",label:"Run deep diagnosis launch path",description:"Open flow analysis and guided tour.",group:"Macros",onTrigger:()=>{na("deep_diagnosis")}},{id:"macro-team-sync",label:"Run team sync launch path",description:"Enable sync mode and generate shareable context.",group:"Macros",onTrigger:()=>{na("team_sync")}},{id:"story-toggle",label:dn?"Stop story mode":"Start story mode",description:"Auto-runs a cinematic walkthrough.",group:"Story",keys:"S",onTrigger:ri},{id:"tour-start",label:"Start guided tour",description:"Walk the interface step by step.",group:"Onboarding",keys:"T",onTrigger:()=>Qe(!0)},{id:"explain-toggle",label:ze?"Disable explain mode":"Enable explain mode",description:"Toggle contextual overlays.",group:"Onboarding",keys:"E",onTrigger:()=>pe(b=>!b)},{id:"shortcuts",label:"Show shortcuts",description:"Open the keyboard map.",group:"Onboarding",keys:"?",onTrigger:()=>te(!0)},{id:"playback-toggle",label:Te?"Pause playback":"Play playback",description:"Start or stop the run.",group:"Playback",keys:"Space",onTrigger:lu},{id:"mode-cinema",label:"Switch to Cinema",description:"Timeline playback view.",group:"Modes",keys:"C",onTrigger:()=>me("cinema")},{id:"mode-flow",label:"Switch to Flow",description:"Graph dependency view.",group:"Modes",keys:"F",onTrigger:()=>me("flow")},{id:"mode-compare",label:"Open Compare",description:"Side-by-side diff view.",group:"Modes",onTrigger:()=>me("compare"),disabled:!z},{id:"mode-matrix",label:"Open Matrix",description:"Counterfactual replay matrix view.",group:"Modes",onTrigger:()=>me("matrix")},{id:"mode-gameplay",label:"Open Gameplay",description:"World-class gameplay mechanics control center.",group:"Modes",keys:"G",onTrigger:()=>me("gameplay")},{id:"jump-bottleneck",label:"Jump to bottleneck",description:"Select the slowest step.",group:"Navigation",onTrigger:Tt},{id:"jump-error",label:"Jump to error",description:"Select the first failed step.",group:"Navigation",onTrigger:br},{id:"replay-step",label:"Replay from selected step",description:"Branch a Directors Cut.",group:"Tools",onTrigger:()=>V&&cn(V),disabled:!V},{id:"overlay-toggle",label:ne?"Hide overlay":"Show overlay",description:"Ghost diff in Cinema/Flow.",group:"Tools",onTrigger:()=>Oe(b=>!b),disabled:!z},{id:"safe-export",label:ie?"Disable safe export":"Enable safe export",description:"Redact sensitive payloads.",group:"Safety",onTrigger:()=>A(b=>!b)},{id:"reload",label:"Reload traces",description:"Refresh trace data.",group:"Meta",onTrigger:i},{id:"handoff-digest",label:"Copy handoff digest",description:"Capture mode, risk summary, and next actions for teammates.",group:"Meta",keys:"H",onTrigger:()=>{Ps()}}],[Ps,dn,ri,ze,Te,lu,me,z,Tt,br,V,cn,ne,ie,i,pe,Oe,A,te,Qe,na]);return n?h.jsx("div",{className:"loading",children:"Loading trace..."}):!r&&!e&&a.length===0?h.jsxs("div",{className:"error",children:[h.jsx("h2",{children:"No traces yet"}),h.jsx("p",{children:"Ingest your first trace, then reload to begin the Observe  Inspect  Direct workflow."}),h.jsxs("div",{className:"error-actions",children:[h.jsx("button",{className:"primary-button",type:"button",onClick:i,children:"Retry"}),h.jsx("a",{className:"ghost-button",href:"/help.html",target:"_blank",rel:"noreferrer",children:"Open help"})]})]}):r||!e?h.jsxs("div",{className:"error",children:[h.jsx("p",{children:r??"Failed to load trace."}),h.jsxs("div",{className:"error-actions",children:[h.jsx("button",{className:"primary-button",type:"button",onClick:i,children:"Retry"}),h.jsx("a",{className:"ghost-button",href:"/help.html",target:"_blank",rel:"noreferrer",children:"Open help"})]})]}):h.jsxs("div",{className:`app theme-${vr} ${ze?"explain-mode":""} ${l==="compare"?"mode-compare":""} ${l==="matrix"?"mode-matrix":""} ${l==="gameplay"?"mode-gameplay":""}`,children:[h.jsx(mA,{trace:e,traces:a,selectedTraceId:s,onSelectTrace:o,onReload:i,onStartTour:()=>Qe(!0),onToggleStory:ri,onOpenPalette:()=>Le(!0),onToggleExplain:()=>pe(b=>!b),onShareSession:ou,onCreateHandoffDigest:()=>void Ps(),onThemeChange:Qt,onMotionChange:VM,themeMode:vr,motionMode:qt,activeSessions:Ql,shareStatus:KM,handoffStatus:YM,explainMode:ze,storyActive:dn,mode:l,missionCompletion:bg,runHealthScore:su,modeHotkeys:iP}),!ig&&!rg?h.jsx(uI,{onComplete:()=>ag(!0),onStartTour:()=>{ag(!0),Qe(!0)},onStartStory:ni,persona:lt,onPersonaChange:_s,launchPath:ks,onLaunchPathChange:Qi,onStartLaunchPath:b=>void na(b)}):null,ig&&!In?h.jsx(cI,{explainMode:ze,storyActive:dn,onStartTour:()=>{Dn(!0),Qe(!0)},onStartStory:()=>{Dn(!0),ni()},onToggleExplain:()=>pe(b=>!b),onDismiss:()=>Dn(!0)}):null,h.jsx(aI,{steps:MP,open:zl,onClose:()=>{Qe(!1),un(!0)},onComplete:()=>{Qe(!1),un(!0)}}),h.jsx(sI,{enabled:ze}),h.jsx(fI,{active:dn,label:IP,step:_g,total:DP,onStop:qn,onRestart:ni}),h.jsx(vA,{insights:t,investigation:E,onSelectStep:b=>{le(b),l!=="cinema"&&u("cinema")},onJumpToError:br,onJumpToBottleneck:Tt}),h.jsx(JA,{trace:e,mode:l==="matrix"||l==="gameplay"?"cinema":l,playheadMs:ce,selectedStepId:V,compareTrace:z,collapsed:An,onToggleCollapsed:()=>Bl(b=>!b),onModeChange:me,onSelectStep:b=>{le(b),l!=="cinema"&&u("cinema")},onJumpToBottleneck:Tt,onReplay:cn,onStartTour:()=>Qe(!0),priorityQueue:NP}),h.jsxs("div",{className:"toolbar","data-help":!0,"data-help-indicator":!0,"data-tour":"toolbar","data-help-title":"Search + filters","data-help-body":"Filter by step type, enable Safe export, and jump between Cinema, Flow, Compare, and Matrix.","data-help-placement":"bottom",children:[h.jsx(gA,{query:c,typeFilter:m,onQueryChange:d,onTypeFilterChange:v}),h.jsxs("div",{className:"toolbar-actions",children:[h.jsx("input",{className:"search-input",value:p,onChange:b=>x(b.target.value),placeholder:"TraceQL (example: type=tool_call and duration_ms>800)","aria-label":"TraceQL query"}),h.jsx("button",{className:"ghost-button",type:"button",onClick:()=>void aP(),children:"Run TraceQL"}),y?h.jsxs("span",{className:"status-badge",children:[y.matchCount," match(es)"]}):null,LP?h.jsx("span",{className:"status-badge",children:"Filtering..."}):null,h.jsxs("span",{className:"status-badge",children:["Hydration ",OP]}),h.jsxs("span",{className:"status-badge",children:["Filter ",XM,"ms"]}),y?h.jsx("button",{className:"ghost-button",type:"button",onClick:()=>{x(""),g(null),_(null)},children:"Clear TraceQL"}):null,w?h.jsx("span",{className:"status-badge warn",children:w}):null,h.jsxs("select",{className:"search-select",value:M,onChange:b=>P(b.target.value),"aria-label":"Extension selector",children:[h.jsx("option",{value:"",children:"Select extension"}),j.map(b=>h.jsx("option",{value:b.id,children:b.name},b.id))]}),h.jsx("button",{className:"ghost-button",type:"button",onClick:()=>void sP(),disabled:!e||!M||O,children:O?"Running extension...":"Run extension"}),h.jsx("button",{className:`ghost-button ${l==="cinema"?"active":""}`,type:"button","aria-pressed":l==="cinema",title:"Timeline playback",onClick:()=>me("cinema"),"data-help":!0,"data-help-title":"Cinema mode","data-help-body":"Timeline view with step cards ordered by time.","data-help-placement":"bottom",children:"Cinema"}),h.jsx("button",{className:`ghost-button ${l==="flow"?"active":""}`,type:"button","aria-pressed":l==="flow",title:"Graph view",onClick:()=>me("flow"),"data-help":!0,"data-help-title":"Flow mode","data-help-body":"Dependency graph of steps and tool calls.","data-help-placement":"bottom",children:"Flow"}),h.jsx("button",{className:`ghost-button ${l==="compare"?"active":""}`,type:"button","aria-pressed":l==="compare",title:z?"Side-by-side compare":"Run a replay to enable compare",onClick:()=>me("compare"),disabled:!z,"data-tour":"compare","data-help":!0,"data-help-title":"Compare mode","data-help-body":"Side-by-side view after a replay. Enabled once you replay.","data-help-placement":"bottom",children:"Compare"}),h.jsx("button",{className:`ghost-button ${l==="matrix"?"active":""}`,type:"button","aria-pressed":l==="matrix",title:"Counterfactual replay matrix",onClick:()=>me("matrix"),"data-help":!0,"data-help-title":"Matrix mode","data-help-body":"Run multiple replay scenarios and rank likely causal factors.","data-help-placement":"bottom",children:"Matrix"}),h.jsx("button",{className:`ghost-button ${l==="gameplay"?"active":""}`,type:"button","aria-pressed":l==="gameplay",title:"Gameplay mechanics command center",onClick:()=>me("gameplay"),"data-help":!0,"data-help-title":"Gameplay mode","data-help-body":"Command raids, campaign, pvp, time forks, boss runs, economy, and liveops.","data-help-placement":"bottom",children:"Gameplay"}),h.jsxs("label",{className:"toggle",title:"Redact payloads and disable raw views for safe sharing","data-help":!0,"data-help-title":"Safe export","data-help-body":"Redacts secrets and disables raw payload views for safe sharing.","data-help-placement":"bottom",children:[h.jsx("input",{type:"checkbox",checked:ie,onChange:()=>A(b=>!b)}),"Safe export"]}),e.steps.length>200||ln?h.jsxs("label",{className:"toggle",title:"Window steps around the playhead for large traces","data-help":!0,"data-help-title":"Windowed mode","data-help-body":"Limits rendering to a playhead window for large traces.","data-help-placement":"bottom",children:[h.jsx("input",{type:"checkbox",checked:ln,onChange:()=>Yt(b=>!b)}),"Windowed"]}):null,z?h.jsxs("label",{className:"toggle",title:"Show ghost overlay of replay in Cinema/Flow","data-help":!0,"data-help-title":"Overlay replay","data-help-body":"Layer the replay over the base run to spot differences.","data-help-placement":"bottom",children:[h.jsx("input",{type:"checkbox",checked:ne,onChange:()=>Oe(b=>!b)}),"Overlay"]}):null,h.jsxs("label",{className:"toggle",title:"Follow active collaborator cursor and mode updates",children:[h.jsx("input",{type:"checkbox",checked:q,onChange:()=>U(b=>!b)}),"Sync playback"]})]})]}),R?h.jsxs("div",{className:"inspector-section",children:[h.jsx("div",{className:"inspector-section-title",children:"Extension output"}),h.jsx("pre",{className:"inspector-json",children:JSON.stringify(R,null,2)})]}):null,l==="cinema"?h.jsxs("div",{className:"playback-stack","data-tour":"playback",children:[h.jsx("div",{"data-help":!0,"data-help-title":"Playback controls","data-help-body":"Play, pause, scrub, and adjust speed to feel the rhythm of the run.","data-help-placement":"bottom",children:h.jsx(q0,{playheadMs:ce,wallTimeMs:e.metadata.wallTimeMs||1,isPlaying:Te,speed:de,onToggle:()=>oe(b=>!b),onScrub:b=>B(b),onSpeedChange:Et})}),h.jsx("div",{"data-help":!0,"data-help-title":"Density map","data-help-body":"Zoom into hotspots and keep long traces readable with windowing.","data-help-placement":"bottom",children:h.jsx(zA,{traceStart:e.startedAt,traceEnd:e.endedAt,steps:e.steps,playheadMs:ce,windowRange:Sg,windowed:ln,spanMs:mr,onSpanChange:Kr,onToggleWindowed:Yt,onScrub:b=>B(b),persistenceKey:e.id,laneStrategy:Ve,visibleLaneGroups:tP,remotePlayheads:nP})})]}):null,l==="compare"&&z?h.jsx("div",{"data-help":!0,"data-help-title":"Compare playback","data-help-body":"Sync both runs to evaluate improvements at identical timestamps.","data-help-placement":"bottom",children:h.jsx(q0,{playheadMs:ce,wallTimeMs:Math.max(e.metadata.wallTimeMs||1,z.metadata.wallTimeMs||1),isPlaying:Te,speed:de,onToggle:()=>oe(b=>!b),onScrub:b=>B(b),onSpeedChange:Et})}):null,h.jsxs("main",{className:`stage ${l==="compare"?"stage-compare":""} motion-fade-in`,role:"main",children:[h.jsx("div",{className:"main motion-slide-up",ref:ru,"data-help":!0,"data-help-indicator":!0,"data-tour":"stage","data-help-title":"Trace stage","data-help-body":"Every step becomes a scene. Hover or click to open deep inspection.","data-help-placement":"top",children:h.jsx(V2,{morph:BM,onComplete:PP,children:h.jsxs(S.Suspense,{fallback:h.jsx("div",{className:"loading",children:"Loading view..."}),children:[l==="cinema"?h.jsx(LA,{trace:e,steps:vg,selectedStepId:V,onSelectStep:b=>le(b),playheadMs:ce,windowRange:Sg,timing:t==null?void 0:t.timing,ghostTrace:ne?z:null,diff:eP,laneStrategy:Ve,laneGroupsOrder:ti.order,hiddenLaneGroups:ti.hidden,onLaneStrategyChange:oP,onToggleLaneGroupVisibility:lP,onMoveLaneGroup:yP}):null,l==="flow"?h.jsx(L4,{steps:vg,selectedStepId:V,onSelectStep:b=>le(b),baseTrace:e,compareTrace:z,compareSteps:ZM,overlayEnabled:ne,onToggleOverlay:()=>Oe(b=>!b)}):null,l==="compare"&&z?h.jsx(O4,{baseTrace:e,compareTrace:z,playheadMs:ce,safeExport:ie,onExit:()=>{u("cinema"),ae(null)}}):null,l==="matrix"?h.jsx(F4,{steps:e.steps,anchorStepId:Wl,onAnchorStepChange:Kl,scenarios:$M,onScenarioChange:wP,onDuplicateScenario:kP,onMoveScenario:EP,onAddScenario:SP,onRemoveScenario:_P,onRun:CP,onCancel:TP,onReplaceScenarios:xP,loading:zM,error:UM,job:Xi,matrix:Ct,safeExport:ie,onOpenCompare:jP}):null,l==="gameplay"?h.jsx(V4,{state:GM,playheadMs:ce,onUpdate:b=>Zi(k=>b(k)),session:Ae,playerId:yr,sessionError:HM,onCreateSession:uP,onJoinSession:cP,onLeaveSession:dP,onDispatchAction:fP,guild:WM,onCreateGuild:hP,onJoinGuild:pP,onScheduleGuildEvent:mP,onCompleteGuildEvent:vP}):null]})})}),h.jsx(S.Suspense,{fallback:h.jsx("div",{className:"loading",children:"Loading panel..."}),children:l==="compare"||l==="matrix"||l==="gameplay"?null:gg?h.jsx(q4,{traceId:e.id,step:gg,safeExport:ie,onClose:()=>le(null),onReplay:cn}):h.jsx(iI,{trace:e,mode:l,selectedStepId:V,onModeChange:me,onSelectStep:b=>le(b),onJumpToBottleneck:Tt,onReplay:cn,recommendations:Xt,persona:lt,annotations:rP,activityFeed:QM,onAddAnnotation:bP,missionProgress:Es,missionCompletion:bg,onResetMissions:gP,narrative:wr,onAskDirector:RP,onExportNarrative:AP})})]}),h.jsxs("div",{className:"mobile-quick-rail","aria-label":"Mobile quick actions",children:[h.jsx("button",{className:`ghost-button ${dn?"active":""}`,type:"button",onClick:ri,"aria-label":dn?"Stop story mode":"Start story mode",children:dn?"Stop Story":"Story"}),h.jsx("button",{className:"ghost-button",type:"button",onClick:()=>Qe(!0),"aria-label":"Start guided tour",children:"Guide"}),h.jsx("button",{className:"ghost-button",type:"button",onClick:()=>Le(!0),"aria-label":"Open command palette",children:"Command"}),h.jsx("button",{className:"ghost-button",type:"button",onClick:()=>void Ps(),"aria-label":"Copy handoff digest",children:"Handoff"})]}),h.jsx(dI,{mode:l==="matrix"||l==="gameplay"?"cinema":l,isPlaying:Te,storyActive:dn,explainMode:ze,hidden:l==="compare",open:$l,onToggleOpen:()=>Yr(b=>!b),onTogglePlay:lu,onStartStory:ni,onStopStory:qn,onStartTour:()=>Qe(!0),onOpenPalette:()=>Le(!0),onShowShortcuts:()=>te(!0),onToggleExplain:()=>pe(b=>!b),onJumpToBottleneck:Tt}),h.jsx(QA,{open:Q,onClose:()=>Le(!1),actions:qP}),h.jsx(GA,{open:F,onClose:()=>te(!1)})]})}Hp.createRoot(document.getElementById("root")).render(h.jsx(eN.StrictMode,{children:h.jsx(W4,{})}));export{lz as A,uz as B,cz as C,dz as D,fz as E,eN as R,jA as S,IA as T,_4 as a,k4 as b,FA as c,bj as d,Q4 as e,Y4 as f,jk as g,rq as h,VA as i,h as j,X4 as k,mz as l,pz as m,hz as n,J4 as o,Z4 as p,ez as q,S as r,wA as s,nz as t,tz as u,rz as v,iz as w,az as x,sz as y,oz as z};
