(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var Sa=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Gy(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Fk={exports:{}},fu={},Vk={exports:{}},he={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jo=Symbol.for("react.element"),k2=Symbol.for("react.portal"),T2=Symbol.for("react.fragment"),N2=Symbol.for("react.strict_mode"),M2=Symbol.for("react.profiler"),A2=Symbol.for("react.provider"),R2=Symbol.for("react.context"),P2=Symbol.for("react.forward_ref"),I2=Symbol.for("react.suspense"),j2=Symbol.for("react.memo"),D2=Symbol.for("react.lazy"),ix=Symbol.iterator;function L2(e){return e===null||typeof e!="object"?null:(e=ix&&e[ix]||e["@@iterator"],typeof e=="function"?e:null)}var Bk={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},zk=Object.assign,Uk={};function xs(e,t,n){this.props=e,this.context=t,this.refs=Uk,this.updater=n||Bk}xs.prototype.isReactComponent={};xs.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};xs.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Hk(){}Hk.prototype=xs.prototype;function Wy(e,t,n){this.props=e,this.context=t,this.refs=Uk,this.updater=n||Bk}var Ky=Wy.prototype=new Hk;Ky.constructor=Wy;zk(Ky,xs.prototype);Ky.isPureReactComponent=!0;var sx=Array.isArray,Gk=Object.prototype.hasOwnProperty,Yy={current:null},Wk={key:!0,ref:!0,__self:!0,__source:!0};function Kk(e,t,n){var r,i={},s=null,o=null;if(t!=null)for(r in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(s=""+t.key),t)Gk.call(t,r)&&!Wk.hasOwnProperty(r)&&(i[r]=t[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}if(e&&e.defaultProps)for(r in a=e.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:Jo,type:e,key:s,ref:o,props:i,_owner:Yy.current}}function O2(e,t){return{$$typeof:Jo,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Xy(e){return typeof e=="object"&&e!==null&&e.$$typeof===Jo}function q2(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var ox=/\/+/g;function bc(e,t){return typeof e=="object"&&e!==null&&e.key!=null?q2(""+e.key):t.toString(36)}function tl(e,t,n,r,i){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case Jo:case k2:o=!0}}if(o)return o=e,i=i(o),e=r===""?"."+bc(o,0):r,sx(i)?(n="",e!=null&&(n=e.replace(ox,"$&/")+"/"),tl(i,t,n,"",function(u){return u})):i!=null&&(Xy(i)&&(i=O2(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(ox,"$&/")+"/")+e)),t.push(i)),1;if(o=0,r=r===""?".":r+":",sx(e))for(var a=0;a<e.length;a++){s=e[a];var l=r+bc(s,a);o+=tl(s,t,n,l,i)}else if(l=L2(e),typeof l=="function")for(e=l.call(e),a=0;!(s=e.next()).done;)s=s.value,l=r+bc(s,a++),o+=tl(s,t,n,l,i);else if(s==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function _a(e,t,n){if(e==null)return e;var r=[],i=0;return tl(e,r,"","",function(s){return t.call(n,s,i++)}),r}function $2(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var bt={current:null},nl={transition:null},F2={ReactCurrentDispatcher:bt,ReactCurrentBatchConfig:nl,ReactCurrentOwner:Yy};function Yk(){throw Error("act(...) is not supported in production builds of React.")}he.Children={map:_a,forEach:function(e,t,n){_a(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return _a(e,function(){t++}),t},toArray:function(e){return _a(e,function(t){return t})||[]},only:function(e){if(!Xy(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};he.Component=xs;he.Fragment=T2;he.Profiler=M2;he.PureComponent=Wy;he.StrictMode=N2;he.Suspense=I2;he.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=F2;he.act=Yk;he.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=zk({},e.props),i=e.key,s=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,o=Yy.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(l in t)Gk.call(t,l)&&!Wk.hasOwnProperty(l)&&(r[l]=t[l]===void 0&&a!==void 0?a[l]:t[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:Jo,type:e.type,key:i,ref:s,props:r,_owner:o}};he.createContext=function(e){return e={$$typeof:R2,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:A2,_context:e},e.Consumer=e};he.createElement=Kk;he.createFactory=function(e){var t=Kk.bind(null,e);return t.type=e,t};he.createRef=function(){return{current:null}};he.forwardRef=function(e){return{$$typeof:P2,render:e}};he.isValidElement=Xy;he.lazy=function(e){return{$$typeof:D2,_payload:{_status:-1,_result:e},_init:$2}};he.memo=function(e,t){return{$$typeof:j2,type:e,compare:t===void 0?null:t}};he.startTransition=function(e){var t=nl.transition;nl.transition={};try{e()}finally{nl.transition=t}};he.unstable_act=Yk;he.useCallback=function(e,t){return bt.current.useCallback(e,t)};he.useContext=function(e){return bt.current.useContext(e)};he.useDebugValue=function(){};he.useDeferredValue=function(e){return bt.current.useDeferredValue(e)};he.useEffect=function(e,t){return bt.current.useEffect(e,t)};he.useId=function(){return bt.current.useId()};he.useImperativeHandle=function(e,t,n){return bt.current.useImperativeHandle(e,t,n)};he.useInsertionEffect=function(e,t){return bt.current.useInsertionEffect(e,t)};he.useLayoutEffect=function(e,t){return bt.current.useLayoutEffect(e,t)};he.useMemo=function(e,t){return bt.current.useMemo(e,t)};he.useReducer=function(e,t,n){return bt.current.useReducer(e,t,n)};he.useRef=function(e){return bt.current.useRef(e)};he.useState=function(e){return bt.current.useState(e)};he.useSyncExternalStore=function(e,t,n){return bt.current.useSyncExternalStore(e,t,n)};he.useTransition=function(){return bt.current.useTransition()};he.version="18.3.1";Vk.exports=he;var S=Vk.exports;const q=Gy(S);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var V2=S,B2=Symbol.for("react.element"),z2=Symbol.for("react.fragment"),U2=Object.prototype.hasOwnProperty,H2=V2.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,G2={key:!0,ref:!0,__self:!0,__source:!0};function Xk(e,t,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)U2.call(t,r)&&!G2.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:B2,type:e,key:s,ref:o,props:i,_owner:H2.current}}fu.Fragment=z2;fu.jsx=Xk;fu.jsxs=Xk;Fk.exports=fu;var y=Fk.exports,mg={},Zk={exports:{}},$t={},Qk={exports:{}},Jk={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(A,N){var j=A.length;A.push(N);e:for(;0<j;){var $=j-1>>>1,V=A[$];if(0<i(V,N))A[$]=N,A[j]=V,j=$;else break e}}function n(A){return A.length===0?null:A[0]}function r(A){if(A.length===0)return null;var N=A[0],j=A.pop();if(j!==N){A[0]=j;e:for(var $=0,V=A.length,O=V>>>1;$<O;){var G=2*($+1)-1,Y=A[G],ee=G+1,se=A[ee];if(0>i(Y,j))ee<V&&0>i(se,Y)?(A[$]=se,A[ee]=j,$=ee):(A[$]=Y,A[G]=j,$=G);else if(ee<V&&0>i(se,j))A[$]=se,A[ee]=j,$=ee;else break e}}return N}function i(A,N){var j=A.sortIndex-N.sortIndex;return j!==0?j:A.id-N.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();e.unstable_now=function(){return o.now()-a}}var l=[],u=[],c=1,d=null,f=3,h=!1,g=!1,p=!1,x=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(A){for(var N=n(u);N!==null;){if(N.callback===null)r(u);else if(N.startTime<=A)r(u),N.sortIndex=N.expirationTime,t(l,N);else break;N=n(u)}}function b(A){if(p=!1,w(A),!g)if(n(l)!==null)g=!0,P(_);else{var N=n(u);N!==null&&L(b,N.startTime-A)}}function _(A,N){g=!1,p&&(p=!1,m(T),T=-1),h=!0;var j=f;try{for(w(N),d=n(l);d!==null&&(!(d.expirationTime>N)||A&&!I());){var $=d.callback;if(typeof $=="function"){d.callback=null,f=d.priorityLevel;var V=$(d.expirationTime<=N);N=e.unstable_now(),typeof V=="function"?d.callback=V:d===n(l)&&r(l),w(N)}else r(l);d=n(l)}if(d!==null)var O=!0;else{var G=n(u);G!==null&&L(b,G.startTime-N),O=!1}return O}finally{d=null,f=j,h=!1}}var C=!1,k=null,T=-1,M=5,R=-1;function I(){return!(e.unstable_now()-R<M)}function B(){if(k!==null){var A=e.unstable_now();R=A;var N=!0;try{N=k(!0,A)}finally{N?F():(C=!1,k=null)}}else C=!1}var F;if(typeof v=="function")F=function(){v(B)};else if(typeof MessageChannel<"u"){var E=new MessageChannel,D=E.port2;E.port1.onmessage=B,F=function(){D.postMessage(null)}}else F=function(){x(B,0)};function P(A){k=A,C||(C=!0,F())}function L(A,N){T=x(function(){A(e.unstable_now())},N)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(A){A.callback=null},e.unstable_continueExecution=function(){g||h||(g=!0,P(_))},e.unstable_forceFrameRate=function(A){0>A||125<A?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<A?Math.floor(1e3/A):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return n(l)},e.unstable_next=function(A){switch(f){case 1:case 2:case 3:var N=3;break;default:N=f}var j=f;f=N;try{return A()}finally{f=j}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(A,N){switch(A){case 1:case 2:case 3:case 4:case 5:break;default:A=3}var j=f;f=A;try{return N()}finally{f=j}},e.unstable_scheduleCallback=function(A,N,j){var $=e.unstable_now();switch(typeof j=="object"&&j!==null?(j=j.delay,j=typeof j=="number"&&0<j?$+j:$):j=$,A){case 1:var V=-1;break;case 2:V=250;break;case 5:V=1073741823;break;case 4:V=1e4;break;default:V=5e3}return V=j+V,A={id:c++,callback:N,priorityLevel:A,startTime:j,expirationTime:V,sortIndex:-1},j>$?(A.sortIndex=j,t(u,A),n(l)===null&&A===n(u)&&(p?(m(T),T=-1):p=!0,L(b,j-$))):(A.sortIndex=V,t(l,A),g||h||(g=!0,P(_))),A},e.unstable_shouldYield=I,e.unstable_wrapCallback=function(A){var N=f;return function(){var j=f;f=N;try{return A.apply(this,arguments)}finally{f=j}}}})(Jk);Qk.exports=Jk;var W2=Qk.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var K2=S,Lt=W2;function W(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var eT=new Set,_o={};function gi(e,t){ss(e,t),ss(e+"Capture",t)}function ss(e,t){for(_o[e]=t,e=0;e<t.length;e++)eT.add(t[e])}var Kn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),gg=Object.prototype.hasOwnProperty,Y2=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ax={},lx={};function X2(e){return gg.call(lx,e)?!0:gg.call(ax,e)?!1:Y2.test(e)?lx[e]=!0:(ax[e]=!0,!1)}function Z2(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Q2(e,t,n,r){if(t===null||typeof t>"u"||Z2(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function St(e,t,n,r,i,s,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var st={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){st[e]=new St(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];st[t]=new St(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){st[e]=new St(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){st[e]=new St(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){st[e]=new St(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){st[e]=new St(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){st[e]=new St(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){st[e]=new St(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){st[e]=new St(e,5,!1,e.toLowerCase(),null,!1,!1)});var Zy=/[\-:]([a-z])/g;function Qy(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Zy,Qy);st[t]=new St(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Zy,Qy);st[t]=new St(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Zy,Qy);st[t]=new St(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){st[e]=new St(e,1,!1,e.toLowerCase(),null,!1,!1)});st.xlinkHref=new St("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){st[e]=new St(e,1,!1,e.toLowerCase(),null,!0,!0)});function Jy(e,t,n,r){var i=st.hasOwnProperty(t)?st[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Q2(t,n,i,r)&&(n=null),r||i===null?X2(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,r=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var nr=K2.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ea=Symbol.for("react.element"),Pi=Symbol.for("react.portal"),Ii=Symbol.for("react.fragment"),ev=Symbol.for("react.strict_mode"),yg=Symbol.for("react.profiler"),tT=Symbol.for("react.provider"),nT=Symbol.for("react.context"),tv=Symbol.for("react.forward_ref"),vg=Symbol.for("react.suspense"),xg=Symbol.for("react.suspense_list"),nv=Symbol.for("react.memo"),dr=Symbol.for("react.lazy"),rT=Symbol.for("react.offscreen"),ux=Symbol.iterator;function Rs(e){return e===null||typeof e!="object"?null:(e=ux&&e[ux]||e["@@iterator"],typeof e=="function"?e:null)}var Ie=Object.assign,Sc;function Ws(e){if(Sc===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Sc=t&&t[1]||""}return`
`+Sc+e}var _c=!1;function Ec(e,t){if(!e||_c)return"";_c=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}while(1<=o&&0<=a);break}}}finally{_c=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Ws(e):""}function J2(e){switch(e.tag){case 5:return Ws(e.type);case 16:return Ws("Lazy");case 13:return Ws("Suspense");case 19:return Ws("SuspenseList");case 0:case 2:case 15:return e=Ec(e.type,!1),e;case 11:return e=Ec(e.type.render,!1),e;case 1:return e=Ec(e.type,!0),e;default:return""}}function wg(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Ii:return"Fragment";case Pi:return"Portal";case yg:return"Profiler";case ev:return"StrictMode";case vg:return"Suspense";case xg:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case nT:return(e.displayName||"Context")+".Consumer";case tT:return(e._context.displayName||"Context")+".Provider";case tv:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case nv:return t=e.displayName||null,t!==null?t:wg(e.type)||"Memo";case dr:t=e._payload,e=e._init;try{return wg(e(t))}catch{}}return null}function eI(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return wg(t);case 8:return t===ev?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Rr(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function iT(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function tI(e){var t=iT(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Ca(e){e._valueTracker||(e._valueTracker=tI(e))}function sT(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=iT(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function bl(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function bg(e,t){var n=t.checked;return Ie({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function cx(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=Rr(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function oT(e,t){t=t.checked,t!=null&&Jy(e,"checked",t,!1)}function Sg(e,t){oT(e,t);var n=Rr(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?_g(e,t.type,n):t.hasOwnProperty("defaultValue")&&_g(e,t.type,Rr(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function dx(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function _g(e,t,n){(t!=="number"||bl(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Ks=Array.isArray;function Xi(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Rr(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function Eg(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(W(91));return Ie({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function fx(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(W(92));if(Ks(n)){if(1<n.length)throw Error(W(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Rr(n)}}function aT(e,t){var n=Rr(t.value),r=Rr(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function hx(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function lT(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Cg(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?lT(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var ka,uT=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(ka=ka||document.createElement("div"),ka.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ka.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Eo(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var uo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},nI=["Webkit","ms","Moz","O"];Object.keys(uo).forEach(function(e){nI.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),uo[t]=uo[e]})});function cT(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||uo.hasOwnProperty(e)&&uo[e]?(""+t).trim():t+"px"}function dT(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=cT(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}var rI=Ie({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function kg(e,t){if(t){if(rI[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(W(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(W(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(W(61))}if(t.style!=null&&typeof t.style!="object")throw Error(W(62))}}function Tg(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ng=null;function rv(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Mg=null,Zi=null,Qi=null;function px(e){if(e=na(e)){if(typeof Mg!="function")throw Error(W(280));var t=e.stateNode;t&&(t=yu(t),Mg(e.stateNode,e.type,t))}}function fT(e){Zi?Qi?Qi.push(e):Qi=[e]:Zi=e}function hT(){if(Zi){var e=Zi,t=Qi;if(Qi=Zi=null,px(e),t)for(e=0;e<t.length;e++)px(t[e])}}function pT(e,t){return e(t)}function mT(){}var Cc=!1;function gT(e,t,n){if(Cc)return e(t,n);Cc=!0;try{return pT(e,t,n)}finally{Cc=!1,(Zi!==null||Qi!==null)&&(mT(),hT())}}function Co(e,t){var n=e.stateNode;if(n===null)return null;var r=yu(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(W(231,t,typeof n));return n}var Ag=!1;if(Kn)try{var Ps={};Object.defineProperty(Ps,"passive",{get:function(){Ag=!0}}),window.addEventListener("test",Ps,Ps),window.removeEventListener("test",Ps,Ps)}catch{Ag=!1}function iI(e,t,n,r,i,s,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(c){this.onError(c)}}var co=!1,Sl=null,_l=!1,Rg=null,sI={onError:function(e){co=!0,Sl=e}};function oI(e,t,n,r,i,s,o,a,l){co=!1,Sl=null,iI.apply(sI,arguments)}function aI(e,t,n,r,i,s,o,a,l){if(oI.apply(this,arguments),co){if(co){var u=Sl;co=!1,Sl=null}else throw Error(W(198));_l||(_l=!0,Rg=u)}}function yi(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function yT(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function mx(e){if(yi(e)!==e)throw Error(W(188))}function lI(e){var t=e.alternate;if(!t){if(t=yi(e),t===null)throw Error(W(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return mx(i),e;if(s===r)return mx(i),t;s=s.sibling}throw Error(W(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(W(189))}}if(n.alternate!==r)throw Error(W(190))}if(n.tag!==3)throw Error(W(188));return n.stateNode.current===n?e:t}function vT(e){return e=lI(e),e!==null?xT(e):null}function xT(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=xT(e);if(t!==null)return t;e=e.sibling}return null}var wT=Lt.unstable_scheduleCallback,gx=Lt.unstable_cancelCallback,uI=Lt.unstable_shouldYield,cI=Lt.unstable_requestPaint,Ve=Lt.unstable_now,dI=Lt.unstable_getCurrentPriorityLevel,iv=Lt.unstable_ImmediatePriority,bT=Lt.unstable_UserBlockingPriority,El=Lt.unstable_NormalPriority,fI=Lt.unstable_LowPriority,ST=Lt.unstable_IdlePriority,hu=null,Tn=null;function hI(e){if(Tn&&typeof Tn.onCommitFiberRoot=="function")try{Tn.onCommitFiberRoot(hu,e,void 0,(e.current.flags&128)===128)}catch{}}var hn=Math.clz32?Math.clz32:gI,pI=Math.log,mI=Math.LN2;function gI(e){return e>>>=0,e===0?32:31-(pI(e)/mI|0)|0}var Ta=64,Na=4194304;function Ys(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Cl(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=Ys(a):(s&=o,s!==0&&(r=Ys(s)))}else o=n&~i,o!==0?r=Ys(o):s!==0&&(r=Ys(s));if(r===0)return 0;if(t!==0&&t!==r&&!(t&i)&&(i=r&-r,s=t&-t,i>=s||i===16&&(s&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-hn(t),i=1<<n,r|=e[n],t&=~i;return r}function yI(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function vI(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-hn(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=yI(a,t)):l<=t&&(e.expiredLanes|=a),s&=~a}}function Pg(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function _T(){var e=Ta;return Ta<<=1,!(Ta&4194240)&&(Ta=64),e}function kc(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function ea(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-hn(t),e[t]=n}function xI(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-hn(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}function sv(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-hn(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var ye=0;function ET(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var CT,ov,kT,TT,NT,Ig=!1,Ma=[],br=null,Sr=null,_r=null,ko=new Map,To=new Map,mr=[],wI="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function yx(e,t){switch(e){case"focusin":case"focusout":br=null;break;case"dragenter":case"dragleave":Sr=null;break;case"mouseover":case"mouseout":_r=null;break;case"pointerover":case"pointerout":ko.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":To.delete(t.pointerId)}}function Is(e,t,n,r,i,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},t!==null&&(t=na(t),t!==null&&ov(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function bI(e,t,n,r,i){switch(t){case"focusin":return br=Is(br,e,t,n,r,i),!0;case"dragenter":return Sr=Is(Sr,e,t,n,r,i),!0;case"mouseover":return _r=Is(_r,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return ko.set(s,Is(ko.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,To.set(s,Is(To.get(s)||null,e,t,n,r,i)),!0}return!1}function MT(e){var t=Xr(e.target);if(t!==null){var n=yi(t);if(n!==null){if(t=n.tag,t===13){if(t=yT(n),t!==null){e.blockedOn=t,NT(e.priority,function(){kT(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function rl(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=jg(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Ng=r,n.target.dispatchEvent(r),Ng=null}else return t=na(n),t!==null&&ov(t),e.blockedOn=n,!1;t.shift()}return!0}function vx(e,t,n){rl(e)&&n.delete(t)}function SI(){Ig=!1,br!==null&&rl(br)&&(br=null),Sr!==null&&rl(Sr)&&(Sr=null),_r!==null&&rl(_r)&&(_r=null),ko.forEach(vx),To.forEach(vx)}function js(e,t){e.blockedOn===t&&(e.blockedOn=null,Ig||(Ig=!0,Lt.unstable_scheduleCallback(Lt.unstable_NormalPriority,SI)))}function No(e){function t(i){return js(i,e)}if(0<Ma.length){js(Ma[0],e);for(var n=1;n<Ma.length;n++){var r=Ma[n];r.blockedOn===e&&(r.blockedOn=null)}}for(br!==null&&js(br,e),Sr!==null&&js(Sr,e),_r!==null&&js(_r,e),ko.forEach(t),To.forEach(t),n=0;n<mr.length;n++)r=mr[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<mr.length&&(n=mr[0],n.blockedOn===null);)MT(n),n.blockedOn===null&&mr.shift()}var Ji=nr.ReactCurrentBatchConfig,kl=!0;function _I(e,t,n,r){var i=ye,s=Ji.transition;Ji.transition=null;try{ye=1,av(e,t,n,r)}finally{ye=i,Ji.transition=s}}function EI(e,t,n,r){var i=ye,s=Ji.transition;Ji.transition=null;try{ye=4,av(e,t,n,r)}finally{ye=i,Ji.transition=s}}function av(e,t,n,r){if(kl){var i=jg(e,t,n,r);if(i===null)Lc(e,t,r,Tl,n),yx(e,r);else if(bI(i,e,t,n,r))r.stopPropagation();else if(yx(e,r),t&4&&-1<wI.indexOf(e)){for(;i!==null;){var s=na(i);if(s!==null&&CT(s),s=jg(e,t,n,r),s===null&&Lc(e,t,r,Tl,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Lc(e,t,r,null,n)}}var Tl=null;function jg(e,t,n,r){if(Tl=null,e=rv(r),e=Xr(e),e!==null)if(t=yi(e),t===null)e=null;else if(n=t.tag,n===13){if(e=yT(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Tl=e,null}function AT(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(dI()){case iv:return 1;case bT:return 4;case El:case fI:return 16;case ST:return 536870912;default:return 16}default:return 16}}var xr=null,lv=null,il=null;function RT(){if(il)return il;var e,t=lv,n=t.length,r,i="value"in xr?xr.value:xr.textContent,s=i.length;for(e=0;e<n&&t[e]===i[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===i[s-r];r++);return il=i.slice(e,1<r?1-r:void 0)}function sl(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Aa(){return!0}function xx(){return!1}function Ft(e){function t(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(n=e[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Aa:xx,this.isPropagationStopped=xx,this}return Ie(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Aa)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Aa)},persist:function(){},isPersistent:Aa}),t}var ws={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},uv=Ft(ws),ta=Ie({},ws,{view:0,detail:0}),CI=Ft(ta),Tc,Nc,Ds,pu=Ie({},ta,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:cv,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ds&&(Ds&&e.type==="mousemove"?(Tc=e.screenX-Ds.screenX,Nc=e.screenY-Ds.screenY):Nc=Tc=0,Ds=e),Tc)},movementY:function(e){return"movementY"in e?e.movementY:Nc}}),wx=Ft(pu),kI=Ie({},pu,{dataTransfer:0}),TI=Ft(kI),NI=Ie({},ta,{relatedTarget:0}),Mc=Ft(NI),MI=Ie({},ws,{animationName:0,elapsedTime:0,pseudoElement:0}),AI=Ft(MI),RI=Ie({},ws,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),PI=Ft(RI),II=Ie({},ws,{data:0}),bx=Ft(II),jI={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},DI={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},LI={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function OI(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=LI[e])?!!t[e]:!1}function cv(){return OI}var qI=Ie({},ta,{key:function(e){if(e.key){var t=jI[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=sl(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?DI[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:cv,charCode:function(e){return e.type==="keypress"?sl(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?sl(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),$I=Ft(qI),FI=Ie({},pu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Sx=Ft(FI),VI=Ie({},ta,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:cv}),BI=Ft(VI),zI=Ie({},ws,{propertyName:0,elapsedTime:0,pseudoElement:0}),UI=Ft(zI),HI=Ie({},pu,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),GI=Ft(HI),WI=[9,13,27,32],dv=Kn&&"CompositionEvent"in window,fo=null;Kn&&"documentMode"in document&&(fo=document.documentMode);var KI=Kn&&"TextEvent"in window&&!fo,PT=Kn&&(!dv||fo&&8<fo&&11>=fo),_x=" ",Ex=!1;function IT(e,t){switch(e){case"keyup":return WI.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function jT(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ji=!1;function YI(e,t){switch(e){case"compositionend":return jT(t);case"keypress":return t.which!==32?null:(Ex=!0,_x);case"textInput":return e=t.data,e===_x&&Ex?null:e;default:return null}}function XI(e,t){if(ji)return e==="compositionend"||!dv&&IT(e,t)?(e=RT(),il=lv=xr=null,ji=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return PT&&t.locale!=="ko"?null:t.data;default:return null}}var ZI={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Cx(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!ZI[e.type]:t==="textarea"}function DT(e,t,n,r){fT(r),t=Nl(t,"onChange"),0<t.length&&(n=new uv("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var ho=null,Mo=null;function QI(e){GT(e,0)}function mu(e){var t=Oi(e);if(sT(t))return e}function JI(e,t){if(e==="change")return t}var LT=!1;if(Kn){var Ac;if(Kn){var Rc="oninput"in document;if(!Rc){var kx=document.createElement("div");kx.setAttribute("oninput","return;"),Rc=typeof kx.oninput=="function"}Ac=Rc}else Ac=!1;LT=Ac&&(!document.documentMode||9<document.documentMode)}function Tx(){ho&&(ho.detachEvent("onpropertychange",OT),Mo=ho=null)}function OT(e){if(e.propertyName==="value"&&mu(Mo)){var t=[];DT(t,Mo,e,rv(e)),gT(QI,t)}}function ej(e,t,n){e==="focusin"?(Tx(),ho=t,Mo=n,ho.attachEvent("onpropertychange",OT)):e==="focusout"&&Tx()}function tj(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return mu(Mo)}function nj(e,t){if(e==="click")return mu(t)}function rj(e,t){if(e==="input"||e==="change")return mu(t)}function ij(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var gn=typeof Object.is=="function"?Object.is:ij;function Ao(e,t){if(gn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!gg.call(t,i)||!gn(e[i],t[i]))return!1}return!0}function Nx(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Mx(e,t){var n=Nx(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Nx(n)}}function qT(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?qT(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function $T(){for(var e=window,t=bl();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=bl(e.document)}return t}function fv(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function sj(e){var t=$T(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&qT(n.ownerDocument.documentElement,n)){if(r!==null&&fv(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=Mx(n,s);var o=Mx(n,r);i&&o&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var oj=Kn&&"documentMode"in document&&11>=document.documentMode,Di=null,Dg=null,po=null,Lg=!1;function Ax(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Lg||Di==null||Di!==bl(r)||(r=Di,"selectionStart"in r&&fv(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),po&&Ao(po,r)||(po=r,r=Nl(Dg,"onSelect"),0<r.length&&(t=new uv("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Di)))}function Ra(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Li={animationend:Ra("Animation","AnimationEnd"),animationiteration:Ra("Animation","AnimationIteration"),animationstart:Ra("Animation","AnimationStart"),transitionend:Ra("Transition","TransitionEnd")},Pc={},FT={};Kn&&(FT=document.createElement("div").style,"AnimationEvent"in window||(delete Li.animationend.animation,delete Li.animationiteration.animation,delete Li.animationstart.animation),"TransitionEvent"in window||delete Li.transitionend.transition);function gu(e){if(Pc[e])return Pc[e];if(!Li[e])return e;var t=Li[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in FT)return Pc[e]=t[n];return e}var VT=gu("animationend"),BT=gu("animationiteration"),zT=gu("animationstart"),UT=gu("transitionend"),HT=new Map,Rx="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Lr(e,t){HT.set(e,t),gi(t,[e])}for(var Ic=0;Ic<Rx.length;Ic++){var jc=Rx[Ic],aj=jc.toLowerCase(),lj=jc[0].toUpperCase()+jc.slice(1);Lr(aj,"on"+lj)}Lr(VT,"onAnimationEnd");Lr(BT,"onAnimationIteration");Lr(zT,"onAnimationStart");Lr("dblclick","onDoubleClick");Lr("focusin","onFocus");Lr("focusout","onBlur");Lr(UT,"onTransitionEnd");ss("onMouseEnter",["mouseout","mouseover"]);ss("onMouseLeave",["mouseout","mouseover"]);ss("onPointerEnter",["pointerout","pointerover"]);ss("onPointerLeave",["pointerout","pointerover"]);gi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));gi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));gi("onBeforeInput",["compositionend","keypress","textInput","paste"]);gi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));gi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));gi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Xs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),uj=new Set("cancel close invalid load scroll toggle".split(" ").concat(Xs));function Px(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,aI(r,t,void 0,e),e.currentTarget=null}function GT(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;Px(i,a,u),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;Px(i,a,u),s=l}}}if(_l)throw e=Rg,_l=!1,Rg=null,e}function Ce(e,t){var n=t[Vg];n===void 0&&(n=t[Vg]=new Set);var r=e+"__bubble";n.has(r)||(WT(t,e,2,!1),n.add(r))}function Dc(e,t,n){var r=0;t&&(r|=4),WT(n,e,r,t)}var Pa="_reactListening"+Math.random().toString(36).slice(2);function Ro(e){if(!e[Pa]){e[Pa]=!0,eT.forEach(function(n){n!=="selectionchange"&&(uj.has(n)||Dc(n,!1,e),Dc(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Pa]||(t[Pa]=!0,Dc("selectionchange",!1,t))}}function WT(e,t,n,r){switch(AT(t)){case 1:var i=_I;break;case 4:i=EI;break;default:i=av}n=i.bind(null,t,n,e),i=void 0,!Ag||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Lc(e,t,n,r,i){var s=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Xr(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}gT(function(){var u=s,c=rv(n),d=[];e:{var f=HT.get(e);if(f!==void 0){var h=uv,g=e;switch(e){case"keypress":if(sl(n)===0)break e;case"keydown":case"keyup":h=$I;break;case"focusin":g="focus",h=Mc;break;case"focusout":g="blur",h=Mc;break;case"beforeblur":case"afterblur":h=Mc;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=wx;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=TI;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=BI;break;case VT:case BT:case zT:h=AI;break;case UT:h=UI;break;case"scroll":h=CI;break;case"wheel":h=GI;break;case"copy":case"cut":case"paste":h=PI;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=Sx}var p=(t&4)!==0,x=!p&&e==="scroll",m=p?f!==null?f+"Capture":null:f;p=[];for(var v=u,w;v!==null;){w=v;var b=w.stateNode;if(w.tag===5&&b!==null&&(w=b,m!==null&&(b=Co(v,m),b!=null&&p.push(Po(v,b,w)))),x)break;v=v.return}0<p.length&&(f=new h(f,g,null,n,c),d.push({event:f,listeners:p}))}}if(!(t&7)){e:{if(f=e==="mouseover"||e==="pointerover",h=e==="mouseout"||e==="pointerout",f&&n!==Ng&&(g=n.relatedTarget||n.fromElement)&&(Xr(g)||g[Yn]))break e;if((h||f)&&(f=c.window===c?c:(f=c.ownerDocument)?f.defaultView||f.parentWindow:window,h?(g=n.relatedTarget||n.toElement,h=u,g=g?Xr(g):null,g!==null&&(x=yi(g),g!==x||g.tag!==5&&g.tag!==6)&&(g=null)):(h=null,g=u),h!==g)){if(p=wx,b="onMouseLeave",m="onMouseEnter",v="mouse",(e==="pointerout"||e==="pointerover")&&(p=Sx,b="onPointerLeave",m="onPointerEnter",v="pointer"),x=h==null?f:Oi(h),w=g==null?f:Oi(g),f=new p(b,v+"leave",h,n,c),f.target=x,f.relatedTarget=w,b=null,Xr(c)===u&&(p=new p(m,v+"enter",g,n,c),p.target=w,p.relatedTarget=x,b=p),x=b,h&&g)t:{for(p=h,m=g,v=0,w=p;w;w=Ti(w))v++;for(w=0,b=m;b;b=Ti(b))w++;for(;0<v-w;)p=Ti(p),v--;for(;0<w-v;)m=Ti(m),w--;for(;v--;){if(p===m||m!==null&&p===m.alternate)break t;p=Ti(p),m=Ti(m)}p=null}else p=null;h!==null&&Ix(d,f,h,p,!1),g!==null&&x!==null&&Ix(d,x,g,p,!0)}}e:{if(f=u?Oi(u):window,h=f.nodeName&&f.nodeName.toLowerCase(),h==="select"||h==="input"&&f.type==="file")var _=JI;else if(Cx(f))if(LT)_=rj;else{_=tj;var C=ej}else(h=f.nodeName)&&h.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(_=nj);if(_&&(_=_(e,u))){DT(d,_,n,c);break e}C&&C(e,f,u),e==="focusout"&&(C=f._wrapperState)&&C.controlled&&f.type==="number"&&_g(f,"number",f.value)}switch(C=u?Oi(u):window,e){case"focusin":(Cx(C)||C.contentEditable==="true")&&(Di=C,Dg=u,po=null);break;case"focusout":po=Dg=Di=null;break;case"mousedown":Lg=!0;break;case"contextmenu":case"mouseup":case"dragend":Lg=!1,Ax(d,n,c);break;case"selectionchange":if(oj)break;case"keydown":case"keyup":Ax(d,n,c)}var k;if(dv)e:{switch(e){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else ji?IT(e,n)&&(T="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(T="onCompositionStart");T&&(PT&&n.locale!=="ko"&&(ji||T!=="onCompositionStart"?T==="onCompositionEnd"&&ji&&(k=RT()):(xr=c,lv="value"in xr?xr.value:xr.textContent,ji=!0)),C=Nl(u,T),0<C.length&&(T=new bx(T,e,null,n,c),d.push({event:T,listeners:C}),k?T.data=k:(k=jT(n),k!==null&&(T.data=k)))),(k=KI?YI(e,n):XI(e,n))&&(u=Nl(u,"onBeforeInput"),0<u.length&&(c=new bx("onBeforeInput","beforeinput",null,n,c),d.push({event:c,listeners:u}),c.data=k))}GT(d,t)})}function Po(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Nl(e,t){for(var n=t+"Capture",r=[];e!==null;){var i=e,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Co(e,n),s!=null&&r.unshift(Po(e,s,i)),s=Co(e,t),s!=null&&r.push(Po(e,s,i))),e=e.return}return r}function Ti(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Ix(e,t,n,r,i){for(var s=t._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&u!==null&&(a=u,i?(l=Co(n,s),l!=null&&o.unshift(Po(n,l,a))):i||(l=Co(n,s),l!=null&&o.push(Po(n,l,a)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var cj=/\r\n?/g,dj=/\u0000|\uFFFD/g;function jx(e){return(typeof e=="string"?e:""+e).replace(cj,`
`).replace(dj,"")}function Ia(e,t,n){if(t=jx(t),jx(e)!==t&&n)throw Error(W(425))}function Ml(){}var Og=null,qg=null;function $g(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Fg=typeof setTimeout=="function"?setTimeout:void 0,fj=typeof clearTimeout=="function"?clearTimeout:void 0,Dx=typeof Promise=="function"?Promise:void 0,hj=typeof queueMicrotask=="function"?queueMicrotask:typeof Dx<"u"?function(e){return Dx.resolve(null).then(e).catch(pj)}:Fg;function pj(e){setTimeout(function(){throw e})}function Oc(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){e.removeChild(i),No(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);No(t)}function Er(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Lx(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var bs=Math.random().toString(36).slice(2),Cn="__reactFiber$"+bs,Io="__reactProps$"+bs,Yn="__reactContainer$"+bs,Vg="__reactEvents$"+bs,mj="__reactListeners$"+bs,gj="__reactHandles$"+bs;function Xr(e){var t=e[Cn];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Yn]||n[Cn]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Lx(e);e!==null;){if(n=e[Cn])return n;e=Lx(e)}return t}e=n,n=e.parentNode}return null}function na(e){return e=e[Cn]||e[Yn],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Oi(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(W(33))}function yu(e){return e[Io]||null}var Bg=[],qi=-1;function Or(e){return{current:e}}function ke(e){0>qi||(e.current=Bg[qi],Bg[qi]=null,qi--)}function _e(e,t){qi++,Bg[qi]=e.current,e.current=t}var Pr={},mt=Or(Pr),kt=Or(!1),ui=Pr;function os(e,t){var n=e.type.contextTypes;if(!n)return Pr;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=t[s];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Tt(e){return e=e.childContextTypes,e!=null}function Al(){ke(kt),ke(mt)}function Ox(e,t,n){if(mt.current!==Pr)throw Error(W(168));_e(mt,t),_e(kt,n)}function KT(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(W(108,eI(e)||"Unknown",i));return Ie({},n,r)}function Rl(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Pr,ui=mt.current,_e(mt,e),_e(kt,kt.current),!0}function qx(e,t,n){var r=e.stateNode;if(!r)throw Error(W(169));n?(e=KT(e,t,ui),r.__reactInternalMemoizedMergedChildContext=e,ke(kt),ke(mt),_e(mt,e)):ke(kt),_e(kt,n)}var On=null,vu=!1,qc=!1;function YT(e){On===null?On=[e]:On.push(e)}function yj(e){vu=!0,YT(e)}function qr(){if(!qc&&On!==null){qc=!0;var e=0,t=ye;try{var n=On;for(ye=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}On=null,vu=!1}catch(i){throw On!==null&&(On=On.slice(e+1)),wT(iv,qr),i}finally{ye=t,qc=!1}}return null}var $i=[],Fi=0,Pl=null,Il=0,Ht=[],Gt=0,ci=null,$n=1,Fn="";function Hr(e,t){$i[Fi++]=Il,$i[Fi++]=Pl,Pl=e,Il=t}function XT(e,t,n){Ht[Gt++]=$n,Ht[Gt++]=Fn,Ht[Gt++]=ci,ci=e;var r=$n;e=Fn;var i=32-hn(r)-1;r&=~(1<<i),n+=1;var s=32-hn(t)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,$n=1<<32-hn(t)+i|n<<i|r,Fn=s+e}else $n=1<<s|n<<i|r,Fn=e}function hv(e){e.return!==null&&(Hr(e,1),XT(e,1,0))}function pv(e){for(;e===Pl;)Pl=$i[--Fi],$i[Fi]=null,Il=$i[--Fi],$i[Fi]=null;for(;e===ci;)ci=Ht[--Gt],Ht[Gt]=null,Fn=Ht[--Gt],Ht[Gt]=null,$n=Ht[--Gt],Ht[Gt]=null}var jt=null,It=null,Ne=!1,dn=null;function ZT(e,t){var n=Kt(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function $x(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,jt=e,It=Er(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,jt=e,It=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=ci!==null?{id:$n,overflow:Fn}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Kt(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,jt=e,It=null,!0):!1;default:return!1}}function zg(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Ug(e){if(Ne){var t=It;if(t){var n=t;if(!$x(e,t)){if(zg(e))throw Error(W(418));t=Er(n.nextSibling);var r=jt;t&&$x(e,t)?ZT(r,n):(e.flags=e.flags&-4097|2,Ne=!1,jt=e)}}else{if(zg(e))throw Error(W(418));e.flags=e.flags&-4097|2,Ne=!1,jt=e}}}function Fx(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;jt=e}function ja(e){if(e!==jt)return!1;if(!Ne)return Fx(e),Ne=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!$g(e.type,e.memoizedProps)),t&&(t=It)){if(zg(e))throw QT(),Error(W(418));for(;t;)ZT(e,t),t=Er(t.nextSibling)}if(Fx(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(W(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){It=Er(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}It=null}}else It=jt?Er(e.stateNode.nextSibling):null;return!0}function QT(){for(var e=It;e;)e=Er(e.nextSibling)}function as(){It=jt=null,Ne=!1}function mv(e){dn===null?dn=[e]:dn.push(e)}var vj=nr.ReactCurrentBatchConfig;function Ls(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(W(309));var r=n.stateNode}if(!r)throw Error(W(147,e));var i=r,s=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},t._stringRef=s,t)}if(typeof e!="string")throw Error(W(284));if(!n._owner)throw Error(W(290,e))}return e}function Da(e,t){throw e=Object.prototype.toString.call(t),Error(W(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Vx(e){var t=e._init;return t(e._payload)}function JT(e){function t(m,v){if(e){var w=m.deletions;w===null?(m.deletions=[v],m.flags|=16):w.push(v)}}function n(m,v){if(!e)return null;for(;v!==null;)t(m,v),v=v.sibling;return null}function r(m,v){for(m=new Map;v!==null;)v.key!==null?m.set(v.key,v):m.set(v.index,v),v=v.sibling;return m}function i(m,v){return m=Nr(m,v),m.index=0,m.sibling=null,m}function s(m,v,w){return m.index=w,e?(w=m.alternate,w!==null?(w=w.index,w<v?(m.flags|=2,v):w):(m.flags|=2,v)):(m.flags|=1048576,v)}function o(m){return e&&m.alternate===null&&(m.flags|=2),m}function a(m,v,w,b){return v===null||v.tag!==6?(v=Hc(w,m.mode,b),v.return=m,v):(v=i(v,w),v.return=m,v)}function l(m,v,w,b){var _=w.type;return _===Ii?c(m,v,w.props.children,b,w.key):v!==null&&(v.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===dr&&Vx(_)===v.type)?(b=i(v,w.props),b.ref=Ls(m,v,w),b.return=m,b):(b=fl(w.type,w.key,w.props,null,m.mode,b),b.ref=Ls(m,v,w),b.return=m,b)}function u(m,v,w,b){return v===null||v.tag!==4||v.stateNode.containerInfo!==w.containerInfo||v.stateNode.implementation!==w.implementation?(v=Gc(w,m.mode,b),v.return=m,v):(v=i(v,w.children||[]),v.return=m,v)}function c(m,v,w,b,_){return v===null||v.tag!==7?(v=ii(w,m.mode,b,_),v.return=m,v):(v=i(v,w),v.return=m,v)}function d(m,v,w){if(typeof v=="string"&&v!==""||typeof v=="number")return v=Hc(""+v,m.mode,w),v.return=m,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Ea:return w=fl(v.type,v.key,v.props,null,m.mode,w),w.ref=Ls(m,null,v),w.return=m,w;case Pi:return v=Gc(v,m.mode,w),v.return=m,v;case dr:var b=v._init;return d(m,b(v._payload),w)}if(Ks(v)||Rs(v))return v=ii(v,m.mode,w,null),v.return=m,v;Da(m,v)}return null}function f(m,v,w,b){var _=v!==null?v.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return _!==null?null:a(m,v,""+w,b);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Ea:return w.key===_?l(m,v,w,b):null;case Pi:return w.key===_?u(m,v,w,b):null;case dr:return _=w._init,f(m,v,_(w._payload),b)}if(Ks(w)||Rs(w))return _!==null?null:c(m,v,w,b,null);Da(m,w)}return null}function h(m,v,w,b,_){if(typeof b=="string"&&b!==""||typeof b=="number")return m=m.get(w)||null,a(v,m,""+b,_);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Ea:return m=m.get(b.key===null?w:b.key)||null,l(v,m,b,_);case Pi:return m=m.get(b.key===null?w:b.key)||null,u(v,m,b,_);case dr:var C=b._init;return h(m,v,w,C(b._payload),_)}if(Ks(b)||Rs(b))return m=m.get(w)||null,c(v,m,b,_,null);Da(v,b)}return null}function g(m,v,w,b){for(var _=null,C=null,k=v,T=v=0,M=null;k!==null&&T<w.length;T++){k.index>T?(M=k,k=null):M=k.sibling;var R=f(m,k,w[T],b);if(R===null){k===null&&(k=M);break}e&&k&&R.alternate===null&&t(m,k),v=s(R,v,T),C===null?_=R:C.sibling=R,C=R,k=M}if(T===w.length)return n(m,k),Ne&&Hr(m,T),_;if(k===null){for(;T<w.length;T++)k=d(m,w[T],b),k!==null&&(v=s(k,v,T),C===null?_=k:C.sibling=k,C=k);return Ne&&Hr(m,T),_}for(k=r(m,k);T<w.length;T++)M=h(k,m,T,w[T],b),M!==null&&(e&&M.alternate!==null&&k.delete(M.key===null?T:M.key),v=s(M,v,T),C===null?_=M:C.sibling=M,C=M);return e&&k.forEach(function(I){return t(m,I)}),Ne&&Hr(m,T),_}function p(m,v,w,b){var _=Rs(w);if(typeof _!="function")throw Error(W(150));if(w=_.call(w),w==null)throw Error(W(151));for(var C=_=null,k=v,T=v=0,M=null,R=w.next();k!==null&&!R.done;T++,R=w.next()){k.index>T?(M=k,k=null):M=k.sibling;var I=f(m,k,R.value,b);if(I===null){k===null&&(k=M);break}e&&k&&I.alternate===null&&t(m,k),v=s(I,v,T),C===null?_=I:C.sibling=I,C=I,k=M}if(R.done)return n(m,k),Ne&&Hr(m,T),_;if(k===null){for(;!R.done;T++,R=w.next())R=d(m,R.value,b),R!==null&&(v=s(R,v,T),C===null?_=R:C.sibling=R,C=R);return Ne&&Hr(m,T),_}for(k=r(m,k);!R.done;T++,R=w.next())R=h(k,m,T,R.value,b),R!==null&&(e&&R.alternate!==null&&k.delete(R.key===null?T:R.key),v=s(R,v,T),C===null?_=R:C.sibling=R,C=R);return e&&k.forEach(function(B){return t(m,B)}),Ne&&Hr(m,T),_}function x(m,v,w,b){if(typeof w=="object"&&w!==null&&w.type===Ii&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case Ea:e:{for(var _=w.key,C=v;C!==null;){if(C.key===_){if(_=w.type,_===Ii){if(C.tag===7){n(m,C.sibling),v=i(C,w.props.children),v.return=m,m=v;break e}}else if(C.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===dr&&Vx(_)===C.type){n(m,C.sibling),v=i(C,w.props),v.ref=Ls(m,C,w),v.return=m,m=v;break e}n(m,C);break}else t(m,C);C=C.sibling}w.type===Ii?(v=ii(w.props.children,m.mode,b,w.key),v.return=m,m=v):(b=fl(w.type,w.key,w.props,null,m.mode,b),b.ref=Ls(m,v,w),b.return=m,m=b)}return o(m);case Pi:e:{for(C=w.key;v!==null;){if(v.key===C)if(v.tag===4&&v.stateNode.containerInfo===w.containerInfo&&v.stateNode.implementation===w.implementation){n(m,v.sibling),v=i(v,w.children||[]),v.return=m,m=v;break e}else{n(m,v);break}else t(m,v);v=v.sibling}v=Gc(w,m.mode,b),v.return=m,m=v}return o(m);case dr:return C=w._init,x(m,v,C(w._payload),b)}if(Ks(w))return g(m,v,w,b);if(Rs(w))return p(m,v,w,b);Da(m,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,v!==null&&v.tag===6?(n(m,v.sibling),v=i(v,w),v.return=m,m=v):(n(m,v),v=Hc(w,m.mode,b),v.return=m,m=v),o(m)):n(m,v)}return x}var ls=JT(!0),eN=JT(!1),jl=Or(null),Dl=null,Vi=null,gv=null;function yv(){gv=Vi=Dl=null}function vv(e){var t=jl.current;ke(jl),e._currentValue=t}function Hg(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function es(e,t){Dl=e,gv=Vi=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Et=!0),e.firstContext=null)}function Zt(e){var t=e._currentValue;if(gv!==e)if(e={context:e,memoizedValue:t,next:null},Vi===null){if(Dl===null)throw Error(W(308));Vi=e,Dl.dependencies={lanes:0,firstContext:e}}else Vi=Vi.next=e;return t}var Zr=null;function xv(e){Zr===null?Zr=[e]:Zr.push(e)}function tN(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,xv(t)):(n.next=i.next,i.next=n),t.interleaved=n,Xn(e,r)}function Xn(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var fr=!1;function wv(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function nN(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Un(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Cr(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,me&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Xn(e,n)}return i=r.interleaved,i===null?(t.next=t,xv(r)):(t.next=i.next,i.next=t),r.interleaved=t,Xn(e,n)}function ol(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,sv(e,n)}}function Bx(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=t:s=s.next=t}else i=s=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Ll(e,t,n,r){var i=e.updateQueue;fr=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?s=u:o.next=u,o=l;var c=e.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==o&&(a===null?c.firstBaseUpdate=u:a.next=u,c.lastBaseUpdate=l))}if(s!==null){var d=i.baseState;o=0,c=u=l=null,a=s;do{var f=a.lane,h=a.eventTime;if((r&f)===f){c!==null&&(c=c.next={eventTime:h,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var g=e,p=a;switch(f=t,h=n,p.tag){case 1:if(g=p.payload,typeof g=="function"){d=g.call(h,d,f);break e}d=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=p.payload,f=typeof g=="function"?g.call(h,d,f):g,f==null)break e;d=Ie({},d,f);break e;case 2:fr=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,f=i.effects,f===null?i.effects=[a]:f.push(a))}else h={eventTime:h,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(u=c=h,l=d):c=c.next=h,o|=f;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;f=a,a=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);if(c===null&&(l=d),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,t=i.shared.interleaved,t!==null){i=t;do o|=i.lane,i=i.next;while(i!==t)}else s===null&&(i.shared.lanes=0);fi|=o,e.lanes=o,e.memoizedState=d}}function zx(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(W(191,i));i.call(r)}}}var ra={},Nn=Or(ra),jo=Or(ra),Do=Or(ra);function Qr(e){if(e===ra)throw Error(W(174));return e}function bv(e,t){switch(_e(Do,t),_e(jo,e),_e(Nn,ra),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Cg(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Cg(t,e)}ke(Nn),_e(Nn,t)}function us(){ke(Nn),ke(jo),ke(Do)}function rN(e){Qr(Do.current);var t=Qr(Nn.current),n=Cg(t,e.type);t!==n&&(_e(jo,e),_e(Nn,n))}function Sv(e){jo.current===e&&(ke(Nn),ke(jo))}var Ae=Or(0);function Ol(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var $c=[];function _v(){for(var e=0;e<$c.length;e++)$c[e]._workInProgressVersionPrimary=null;$c.length=0}var al=nr.ReactCurrentDispatcher,Fc=nr.ReactCurrentBatchConfig,di=0,Pe=null,Ke=null,Qe=null,ql=!1,mo=!1,Lo=0,xj=0;function ct(){throw Error(W(321))}function Ev(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!gn(e[n],t[n]))return!1;return!0}function Cv(e,t,n,r,i,s){if(di=s,Pe=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,al.current=e===null||e.memoizedState===null?_j:Ej,e=n(r,i),mo){s=0;do{if(mo=!1,Lo=0,25<=s)throw Error(W(301));s+=1,Qe=Ke=null,t.updateQueue=null,al.current=Cj,e=n(r,i)}while(mo)}if(al.current=$l,t=Ke!==null&&Ke.next!==null,di=0,Qe=Ke=Pe=null,ql=!1,t)throw Error(W(300));return e}function kv(){var e=Lo!==0;return Lo=0,e}function En(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Qe===null?Pe.memoizedState=Qe=e:Qe=Qe.next=e,Qe}function Qt(){if(Ke===null){var e=Pe.alternate;e=e!==null?e.memoizedState:null}else e=Ke.next;var t=Qe===null?Pe.memoizedState:Qe.next;if(t!==null)Qe=t,Ke=e;else{if(e===null)throw Error(W(310));Ke=e,e={memoizedState:Ke.memoizedState,baseState:Ke.baseState,baseQueue:Ke.baseQueue,queue:Ke.queue,next:null},Qe===null?Pe.memoizedState=Qe=e:Qe=Qe.next=e}return Qe}function Oo(e,t){return typeof t=="function"?t(e):t}function Vc(e){var t=Qt(),n=t.queue;if(n===null)throw Error(W(311));n.lastRenderedReducer=e;var r=Ke,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,u=s;do{var c=u.lane;if((di&c)===c)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var d={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=d,o=r):l=l.next=d,Pe.lanes|=c,fi|=c}u=u.next}while(u!==null&&u!==s);l===null?o=r:l.next=a,gn(r,t.memoizedState)||(Et=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=l,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do s=i.lane,Pe.lanes|=s,fi|=s,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Bc(e){var t=Qt(),n=t.queue;if(n===null)throw Error(W(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=e(s,o.action),o=o.next;while(o!==i);gn(s,t.memoizedState)||(Et=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function iN(){}function sN(e,t){var n=Pe,r=Qt(),i=t(),s=!gn(r.memoizedState,i);if(s&&(r.memoizedState=i,Et=!0),r=r.queue,Tv(lN.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||Qe!==null&&Qe.memoizedState.tag&1){if(n.flags|=2048,qo(9,aN.bind(null,n,r,i,t),void 0,null),Je===null)throw Error(W(349));di&30||oN(n,t,i)}return i}function oN(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Pe.updateQueue,t===null?(t={lastEffect:null,stores:null},Pe.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function aN(e,t,n,r){t.value=n,t.getSnapshot=r,uN(t)&&cN(e)}function lN(e,t,n){return n(function(){uN(t)&&cN(e)})}function uN(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!gn(e,n)}catch{return!0}}function cN(e){var t=Xn(e,1);t!==null&&pn(t,e,1,-1)}function Ux(e){var t=En();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Oo,lastRenderedState:e},t.queue=e,e=e.dispatch=Sj.bind(null,Pe,e),[t.memoizedState,e]}function qo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Pe.updateQueue,t===null?(t={lastEffect:null,stores:null},Pe.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function dN(){return Qt().memoizedState}function ll(e,t,n,r){var i=En();Pe.flags|=e,i.memoizedState=qo(1|t,n,void 0,r===void 0?null:r)}function xu(e,t,n,r){var i=Qt();r=r===void 0?null:r;var s=void 0;if(Ke!==null){var o=Ke.memoizedState;if(s=o.destroy,r!==null&&Ev(r,o.deps)){i.memoizedState=qo(t,n,s,r);return}}Pe.flags|=e,i.memoizedState=qo(1|t,n,s,r)}function Hx(e,t){return ll(8390656,8,e,t)}function Tv(e,t){return xu(2048,8,e,t)}function fN(e,t){return xu(4,2,e,t)}function hN(e,t){return xu(4,4,e,t)}function pN(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function mN(e,t,n){return n=n!=null?n.concat([e]):null,xu(4,4,pN.bind(null,t,e),n)}function Nv(){}function gN(e,t){var n=Qt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Ev(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function yN(e,t){var n=Qt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Ev(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function vN(e,t,n){return di&21?(gn(n,t)||(n=_T(),Pe.lanes|=n,fi|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Et=!0),e.memoizedState=n)}function wj(e,t){var n=ye;ye=n!==0&&4>n?n:4,e(!0);var r=Fc.transition;Fc.transition={};try{e(!1),t()}finally{ye=n,Fc.transition=r}}function xN(){return Qt().memoizedState}function bj(e,t,n){var r=Tr(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},wN(e))bN(t,n);else if(n=tN(e,t,n,r),n!==null){var i=wt();pn(n,e,r,i),SN(n,t,r)}}function Sj(e,t,n){var r=Tr(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(wN(e))bN(t,i);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var o=t.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,gn(a,o)){var l=t.interleaved;l===null?(i.next=i,xv(t)):(i.next=l.next,l.next=i),t.interleaved=i;return}}catch{}finally{}n=tN(e,t,i,r),n!==null&&(i=wt(),pn(n,e,r,i),SN(n,t,r))}}function wN(e){var t=e.alternate;return e===Pe||t!==null&&t===Pe}function bN(e,t){mo=ql=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function SN(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,sv(e,n)}}var $l={readContext:Zt,useCallback:ct,useContext:ct,useEffect:ct,useImperativeHandle:ct,useInsertionEffect:ct,useLayoutEffect:ct,useMemo:ct,useReducer:ct,useRef:ct,useState:ct,useDebugValue:ct,useDeferredValue:ct,useTransition:ct,useMutableSource:ct,useSyncExternalStore:ct,useId:ct,unstable_isNewReconciler:!1},_j={readContext:Zt,useCallback:function(e,t){return En().memoizedState=[e,t===void 0?null:t],e},useContext:Zt,useEffect:Hx,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,ll(4194308,4,pN.bind(null,t,e),n)},useLayoutEffect:function(e,t){return ll(4194308,4,e,t)},useInsertionEffect:function(e,t){return ll(4,2,e,t)},useMemo:function(e,t){var n=En();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=En();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=bj.bind(null,Pe,e),[r.memoizedState,e]},useRef:function(e){var t=En();return e={current:e},t.memoizedState=e},useState:Ux,useDebugValue:Nv,useDeferredValue:function(e){return En().memoizedState=e},useTransition:function(){var e=Ux(!1),t=e[0];return e=wj.bind(null,e[1]),En().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Pe,i=En();if(Ne){if(n===void 0)throw Error(W(407));n=n()}else{if(n=t(),Je===null)throw Error(W(349));di&30||oN(r,t,n)}i.memoizedState=n;var s={value:n,getSnapshot:t};return i.queue=s,Hx(lN.bind(null,r,s,e),[e]),r.flags|=2048,qo(9,aN.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=En(),t=Je.identifierPrefix;if(Ne){var n=Fn,r=$n;n=(r&~(1<<32-hn(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Lo++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=xj++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Ej={readContext:Zt,useCallback:gN,useContext:Zt,useEffect:Tv,useImperativeHandle:mN,useInsertionEffect:fN,useLayoutEffect:hN,useMemo:yN,useReducer:Vc,useRef:dN,useState:function(){return Vc(Oo)},useDebugValue:Nv,useDeferredValue:function(e){var t=Qt();return vN(t,Ke.memoizedState,e)},useTransition:function(){var e=Vc(Oo)[0],t=Qt().memoizedState;return[e,t]},useMutableSource:iN,useSyncExternalStore:sN,useId:xN,unstable_isNewReconciler:!1},Cj={readContext:Zt,useCallback:gN,useContext:Zt,useEffect:Tv,useImperativeHandle:mN,useInsertionEffect:fN,useLayoutEffect:hN,useMemo:yN,useReducer:Bc,useRef:dN,useState:function(){return Bc(Oo)},useDebugValue:Nv,useDeferredValue:function(e){var t=Qt();return Ke===null?t.memoizedState=e:vN(t,Ke.memoizedState,e)},useTransition:function(){var e=Bc(Oo)[0],t=Qt().memoizedState;return[e,t]},useMutableSource:iN,useSyncExternalStore:sN,useId:xN,unstable_isNewReconciler:!1};function ln(e,t){if(e&&e.defaultProps){t=Ie({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Gg(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Ie({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var wu={isMounted:function(e){return(e=e._reactInternals)?yi(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=wt(),i=Tr(e),s=Un(r,i);s.payload=t,n!=null&&(s.callback=n),t=Cr(e,s,i),t!==null&&(pn(t,e,i,r),ol(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=wt(),i=Tr(e),s=Un(r,i);s.tag=1,s.payload=t,n!=null&&(s.callback=n),t=Cr(e,s,i),t!==null&&(pn(t,e,i,r),ol(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=wt(),r=Tr(e),i=Un(n,r);i.tag=2,t!=null&&(i.callback=t),t=Cr(e,i,r),t!==null&&(pn(t,e,r,n),ol(t,e,r))}};function Gx(e,t,n,r,i,s,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,s,o):t.prototype&&t.prototype.isPureReactComponent?!Ao(n,r)||!Ao(i,s):!0}function _N(e,t,n){var r=!1,i=Pr,s=t.contextType;return typeof s=="object"&&s!==null?s=Zt(s):(i=Tt(t)?ui:mt.current,r=t.contextTypes,s=(r=r!=null)?os(e,i):Pr),t=new t(n,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=wu,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function Wx(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&wu.enqueueReplaceState(t,t.state,null)}function Wg(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},wv(e);var s=t.contextType;typeof s=="object"&&s!==null?i.context=Zt(s):(s=Tt(t)?ui:mt.current,i.context=os(e,s)),i.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(Gg(e,t,s,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&wu.enqueueReplaceState(i,i.state,null),Ll(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function cs(e,t){try{var n="",r=t;do n+=J2(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:t,stack:i,digest:null}}function zc(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Kg(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var kj=typeof WeakMap=="function"?WeakMap:Map;function EN(e,t,n){n=Un(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Vl||(Vl=!0,iy=r),Kg(e,t)},n}function CN(e,t,n){n=Un(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){Kg(e,t)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Kg(e,t),typeof r!="function"&&(kr===null?kr=new Set([this]):kr.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function Kx(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new kj;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Fj.bind(null,e,t,n),t.then(e,e))}function Yx(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Xx(e,t,n,r,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Un(-1,1),t.tag=2,Cr(n,t,1))),n.lanes|=1),e)}var Tj=nr.ReactCurrentOwner,Et=!1;function xt(e,t,n,r){t.child=e===null?eN(t,null,n,r):ls(t,e.child,n,r)}function Zx(e,t,n,r,i){n=n.render;var s=t.ref;return es(t,i),r=Cv(e,t,n,r,s,i),n=kv(),e!==null&&!Et?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Zn(e,t,i)):(Ne&&n&&hv(t),t.flags|=1,xt(e,t,r,i),t.child)}function Qx(e,t,n,r,i){if(e===null){var s=n.type;return typeof s=="function"&&!Lv(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=s,kN(e,t,s,r,i)):(e=fl(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!(e.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Ao,n(o,r)&&e.ref===t.ref)return Zn(e,t,i)}return t.flags|=1,e=Nr(s,r),e.ref=t.ref,e.return=t,t.child=e}function kN(e,t,n,r,i){if(e!==null){var s=e.memoizedProps;if(Ao(s,r)&&e.ref===t.ref)if(Et=!1,t.pendingProps=r=s,(e.lanes&i)!==0)e.flags&131072&&(Et=!0);else return t.lanes=e.lanes,Zn(e,t,i)}return Yg(e,t,n,r,i)}function TN(e,t,n){var r=t.pendingProps,i=r.children,s=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},_e(zi,Rt),Rt|=n;else{if(!(n&1073741824))return e=s!==null?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,_e(zi,Rt),Rt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,_e(zi,Rt),Rt|=r}else s!==null?(r=s.baseLanes|n,t.memoizedState=null):r=n,_e(zi,Rt),Rt|=r;return xt(e,t,i,n),t.child}function NN(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Yg(e,t,n,r,i){var s=Tt(n)?ui:mt.current;return s=os(t,s),es(t,i),n=Cv(e,t,n,r,s,i),r=kv(),e!==null&&!Et?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Zn(e,t,i)):(Ne&&r&&hv(t),t.flags|=1,xt(e,t,n,i),t.child)}function Jx(e,t,n,r,i){if(Tt(n)){var s=!0;Rl(t)}else s=!1;if(es(t,i),t.stateNode===null)ul(e,t),_N(t,n,r),Wg(t,n,r,i),r=!0;else if(e===null){var o=t.stateNode,a=t.memoizedProps;o.props=a;var l=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=Zt(u):(u=Tt(n)?ui:mt.current,u=os(t,u));var c=n.getDerivedStateFromProps,d=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==u)&&Wx(t,o,r,u),fr=!1;var f=t.memoizedState;o.state=f,Ll(t,r,o,i),l=t.memoizedState,a!==r||f!==l||kt.current||fr?(typeof c=="function"&&(Gg(t,n,c,r),l=t.memoizedState),(a=fr||Gx(t,n,a,r,f,l,u))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),o.props=r,o.state=l,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,nN(e,t),a=t.memoizedProps,u=t.type===t.elementType?a:ln(t.type,a),o.props=u,d=t.pendingProps,f=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Zt(l):(l=Tt(n)?ui:mt.current,l=os(t,l));var h=n.getDerivedStateFromProps;(c=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||f!==l)&&Wx(t,o,r,l),fr=!1,f=t.memoizedState,o.state=f,Ll(t,r,o,i);var g=t.memoizedState;a!==d||f!==g||kt.current||fr?(typeof h=="function"&&(Gg(t,n,h,r),g=t.memoizedState),(u=fr||Gx(t,n,u,r,f,g,l)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,g,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,g,l)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=g),o.props=r,o.state=g,o.context=l,r=u):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),r=!1)}return Xg(e,t,n,r,s,i)}function Xg(e,t,n,r,i,s){NN(e,t);var o=(t.flags&128)!==0;if(!r&&!o)return i&&qx(t,n,!1),Zn(e,t,s);r=t.stateNode,Tj.current=t;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&o?(t.child=ls(t,e.child,null,s),t.child=ls(t,null,a,s)):xt(e,t,a,s),t.memoizedState=r.state,i&&qx(t,n,!0),t.child}function MN(e){var t=e.stateNode;t.pendingContext?Ox(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Ox(e,t.context,!1),bv(e,t.containerInfo)}function ew(e,t,n,r,i){return as(),mv(i),t.flags|=256,xt(e,t,n,r),t.child}var Zg={dehydrated:null,treeContext:null,retryLane:0};function Qg(e){return{baseLanes:e,cachePool:null,transitions:null}}function AN(e,t,n){var r=t.pendingProps,i=Ae.current,s=!1,o=(t.flags&128)!==0,a;if((a=o)||(a=e!==null&&e.memoizedState===null?!1:(i&2)!==0),a?(s=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),_e(Ae,i&1),e===null)return Ug(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=r.children,e=r.fallback,s?(r=t.mode,s=t.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=_u(o,r,0,null),e=ii(e,r,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Qg(n),t.memoizedState=Zg,e):Mv(t,o));if(i=e.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return Nj(e,t,o,r,a,i,n);if(s){s=r.fallback,o=t.mode,i=e.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=l,t.deletions=null):(r=Nr(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=Nr(a,s):(s=ii(s,o,n,null),s.flags|=2),s.return=t,r.return=t,r.sibling=s,t.child=r,r=s,s=t.child,o=e.child.memoizedState,o=o===null?Qg(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=e.childLanes&~n,t.memoizedState=Zg,r}return s=e.child,e=s.sibling,r=Nr(s,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Mv(e,t){return t=_u({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function La(e,t,n,r){return r!==null&&mv(r),ls(t,e.child,null,n),e=Mv(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Nj(e,t,n,r,i,s,o){if(n)return t.flags&256?(t.flags&=-257,r=zc(Error(W(422))),La(e,t,o,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(s=r.fallback,i=t.mode,r=_u({mode:"visible",children:r.children},i,0,null),s=ii(s,i,o,null),s.flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,t.mode&1&&ls(t,e.child,null,o),t.child.memoizedState=Qg(o),t.memoizedState=Zg,s);if(!(t.mode&1))return La(e,t,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(W(419)),r=zc(s,r,void 0),La(e,t,o,r)}if(a=(o&e.childLanes)!==0,Et||a){if(r=Je,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Xn(e,i),pn(r,e,i,-1))}return Dv(),r=zc(Error(W(421))),La(e,t,o,r)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=Vj.bind(null,e),i._reactRetry=t,null):(e=s.treeContext,It=Er(i.nextSibling),jt=t,Ne=!0,dn=null,e!==null&&(Ht[Gt++]=$n,Ht[Gt++]=Fn,Ht[Gt++]=ci,$n=e.id,Fn=e.overflow,ci=t),t=Mv(t,r.children),t.flags|=4096,t)}function tw(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Hg(e.return,t,n)}function Uc(e,t,n,r,i){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function RN(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(xt(e,t,r.children,n),r=Ae.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&tw(e,n,t);else if(e.tag===19)tw(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(_e(Ae,r),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&Ol(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Uc(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&Ol(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Uc(t,!0,n,null,s);break;case"together":Uc(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function ul(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Zn(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),fi|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(W(153));if(t.child!==null){for(e=t.child,n=Nr(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Nr(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Mj(e,t,n){switch(t.tag){case 3:MN(t),as();break;case 5:rN(t);break;case 1:Tt(t.type)&&Rl(t);break;case 4:bv(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;_e(jl,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(_e(Ae,Ae.current&1),t.flags|=128,null):n&t.child.childLanes?AN(e,t,n):(_e(Ae,Ae.current&1),e=Zn(e,t,n),e!==null?e.sibling:null);_e(Ae,Ae.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return RN(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),_e(Ae,Ae.current),r)break;return null;case 22:case 23:return t.lanes=0,TN(e,t,n)}return Zn(e,t,n)}var PN,Jg,IN,jN;PN=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Jg=function(){};IN=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Qr(Nn.current);var s=null;switch(n){case"input":i=bg(e,i),r=bg(e,r),s=[];break;case"select":i=Ie({},i,{value:void 0}),r=Ie({},r,{value:void 0}),s=[];break;case"textarea":i=Eg(e,i),r=Eg(e,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Ml)}kg(n,r);var o;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var a=i[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(_o.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var l=r[u];if(a=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(_o.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&Ce("scroll",e),s||a===l||(s=[])):(s=s||[]).push(u,l))}n&&(s=s||[]).push("style",n);var u=s;(t.updateQueue=u)&&(t.flags|=4)}};jN=function(e,t,n,r){n!==r&&(t.flags|=4)};function Os(e,t){if(!Ne)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function dt(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Aj(e,t,n){var r=t.pendingProps;switch(pv(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return dt(t),null;case 1:return Tt(t.type)&&Al(),dt(t),null;case 3:return r=t.stateNode,us(),ke(kt),ke(mt),_v(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(ja(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,dn!==null&&(ay(dn),dn=null))),Jg(e,t),dt(t),null;case 5:Sv(t);var i=Qr(Do.current);if(n=t.type,e!==null&&t.stateNode!=null)IN(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(W(166));return dt(t),null}if(e=Qr(Nn.current),ja(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[Cn]=t,r[Io]=s,e=(t.mode&1)!==0,n){case"dialog":Ce("cancel",r),Ce("close",r);break;case"iframe":case"object":case"embed":Ce("load",r);break;case"video":case"audio":for(i=0;i<Xs.length;i++)Ce(Xs[i],r);break;case"source":Ce("error",r);break;case"img":case"image":case"link":Ce("error",r),Ce("load",r);break;case"details":Ce("toggle",r);break;case"input":cx(r,s),Ce("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Ce("invalid",r);break;case"textarea":fx(r,s),Ce("invalid",r)}kg(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&Ia(r.textContent,a,e),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Ia(r.textContent,a,e),i=["children",""+a]):_o.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Ce("scroll",r)}switch(n){case"input":Ca(r),dx(r,s,!0);break;case"textarea":Ca(r),hx(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Ml)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=lT(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),n==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[Cn]=t,e[Io]=r,PN(e,t,!1,!1),t.stateNode=e;e:{switch(o=Tg(n,r),n){case"dialog":Ce("cancel",e),Ce("close",e),i=r;break;case"iframe":case"object":case"embed":Ce("load",e),i=r;break;case"video":case"audio":for(i=0;i<Xs.length;i++)Ce(Xs[i],e);i=r;break;case"source":Ce("error",e),i=r;break;case"img":case"image":case"link":Ce("error",e),Ce("load",e),i=r;break;case"details":Ce("toggle",e),i=r;break;case"input":cx(e,r),i=bg(e,r),Ce("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=Ie({},r,{value:void 0}),Ce("invalid",e);break;case"textarea":fx(e,r),i=Eg(e,r),Ce("invalid",e);break;default:i=r}kg(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?dT(e,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&uT(e,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Eo(e,l):typeof l=="number"&&Eo(e,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(_o.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Ce("scroll",e):l!=null&&Jy(e,s,l,o))}switch(n){case"input":Ca(e),dx(e,r,!1);break;case"textarea":Ca(e),hx(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Rr(r.value));break;case"select":e.multiple=!!r.multiple,s=r.value,s!=null?Xi(e,!!r.multiple,s,!1):r.defaultValue!=null&&Xi(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=Ml)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return dt(t),null;case 6:if(e&&t.stateNode!=null)jN(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(W(166));if(n=Qr(Do.current),Qr(Nn.current),ja(t)){if(r=t.stateNode,n=t.memoizedProps,r[Cn]=t,(s=r.nodeValue!==n)&&(e=jt,e!==null))switch(e.tag){case 3:Ia(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Ia(r.nodeValue,n,(e.mode&1)!==0)}s&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Cn]=t,t.stateNode=r}return dt(t),null;case 13:if(ke(Ae),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ne&&It!==null&&t.mode&1&&!(t.flags&128))QT(),as(),t.flags|=98560,s=!1;else if(s=ja(t),r!==null&&r.dehydrated!==null){if(e===null){if(!s)throw Error(W(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(W(317));s[Cn]=t}else as(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;dt(t),s=!1}else dn!==null&&(ay(dn),dn=null),s=!0;if(!s)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Ae.current&1?Ye===0&&(Ye=3):Dv())),t.updateQueue!==null&&(t.flags|=4),dt(t),null);case 4:return us(),Jg(e,t),e===null&&Ro(t.stateNode.containerInfo),dt(t),null;case 10:return vv(t.type._context),dt(t),null;case 17:return Tt(t.type)&&Al(),dt(t),null;case 19:if(ke(Ae),s=t.memoizedState,s===null)return dt(t),null;if(r=(t.flags&128)!==0,o=s.rendering,o===null)if(r)Os(s,!1);else{if(Ye!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=Ol(e),o!==null){for(t.flags|=128,Os(s,!1),r=o.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)s=n,e=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,e=o.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return _e(Ae,Ae.current&1|2),t.child}e=e.sibling}s.tail!==null&&Ve()>ds&&(t.flags|=128,r=!0,Os(s,!1),t.lanes=4194304)}else{if(!r)if(e=Ol(o),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Os(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Ne)return dt(t),null}else 2*Ve()-s.renderingStartTime>ds&&n!==1073741824&&(t.flags|=128,r=!0,Os(s,!1),t.lanes=4194304);s.isBackwards?(o.sibling=t.child,t.child=o):(n=s.last,n!==null?n.sibling=o:t.child=o,s.last=o)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=Ve(),t.sibling=null,n=Ae.current,_e(Ae,r?n&1|2:n&1),t):(dt(t),null);case 22:case 23:return jv(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Rt&1073741824&&(dt(t),t.subtreeFlags&6&&(t.flags|=8192)):dt(t),null;case 24:return null;case 25:return null}throw Error(W(156,t.tag))}function Rj(e,t){switch(pv(t),t.tag){case 1:return Tt(t.type)&&Al(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return us(),ke(kt),ke(mt),_v(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Sv(t),null;case 13:if(ke(Ae),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(W(340));as()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return ke(Ae),null;case 4:return us(),null;case 10:return vv(t.type._context),null;case 22:case 23:return jv(),null;case 24:return null;default:return null}}var Oa=!1,ht=!1,Pj=typeof WeakSet=="function"?WeakSet:Set,J=null;function Bi(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){De(e,t,r)}else n.current=null}function ey(e,t,n){try{n()}catch(r){De(e,t,r)}}var nw=!1;function Ij(e,t){if(Og=kl,e=$T(),fv(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,u=0,c=0,d=e,f=null;t:for(;;){for(var h;d!==n||i!==0&&d.nodeType!==3||(a=o+i),d!==s||r!==0&&d.nodeType!==3||(l=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(h=d.firstChild)!==null;)f=d,d=h;for(;;){if(d===e)break t;if(f===n&&++u===i&&(a=o),f===s&&++c===r&&(l=o),(h=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=h}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(qg={focusedElem:e,selectionRange:n},kl=!1,J=t;J!==null;)if(t=J,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,J=e;else for(;J!==null;){t=J;try{var g=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var p=g.memoizedProps,x=g.memoizedState,m=t.stateNode,v=m.getSnapshotBeforeUpdate(t.elementType===t.type?p:ln(t.type,p),x);m.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var w=t.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(W(163))}}catch(b){De(t,t.return,b)}if(e=t.sibling,e!==null){e.return=t.return,J=e;break}J=t.return}return g=nw,nw=!1,g}function go(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,s!==void 0&&ey(t,n,s)}i=i.next}while(i!==r)}}function bu(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function ty(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function DN(e){var t=e.alternate;t!==null&&(e.alternate=null,DN(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Cn],delete t[Io],delete t[Vg],delete t[mj],delete t[gj])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function LN(e){return e.tag===5||e.tag===3||e.tag===4}function rw(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||LN(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function ny(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Ml));else if(r!==4&&(e=e.child,e!==null))for(ny(e,t,n),e=e.sibling;e!==null;)ny(e,t,n),e=e.sibling}function ry(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(ry(e,t,n),e=e.sibling;e!==null;)ry(e,t,n),e=e.sibling}var nt=null,un=!1;function ar(e,t,n){for(n=n.child;n!==null;)ON(e,t,n),n=n.sibling}function ON(e,t,n){if(Tn&&typeof Tn.onCommitFiberUnmount=="function")try{Tn.onCommitFiberUnmount(hu,n)}catch{}switch(n.tag){case 5:ht||Bi(n,t);case 6:var r=nt,i=un;nt=null,ar(e,t,n),nt=r,un=i,nt!==null&&(un?(e=nt,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):nt.removeChild(n.stateNode));break;case 18:nt!==null&&(un?(e=nt,n=n.stateNode,e.nodeType===8?Oc(e.parentNode,n):e.nodeType===1&&Oc(e,n),No(e)):Oc(nt,n.stateNode));break;case 4:r=nt,i=un,nt=n.stateNode.containerInfo,un=!0,ar(e,t,n),nt=r,un=i;break;case 0:case 11:case 14:case 15:if(!ht&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&ey(n,t,o),i=i.next}while(i!==r)}ar(e,t,n);break;case 1:if(!ht&&(Bi(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){De(n,t,a)}ar(e,t,n);break;case 21:ar(e,t,n);break;case 22:n.mode&1?(ht=(r=ht)||n.memoizedState!==null,ar(e,t,n),ht=r):ar(e,t,n);break;default:ar(e,t,n)}}function iw(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new Pj),t.forEach(function(r){var i=Bj.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function sn(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=e,o=t,a=o;e:for(;a!==null;){switch(a.tag){case 5:nt=a.stateNode,un=!1;break e;case 3:nt=a.stateNode.containerInfo,un=!0;break e;case 4:nt=a.stateNode.containerInfo,un=!0;break e}a=a.return}if(nt===null)throw Error(W(160));ON(s,o,i),nt=null,un=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){De(i,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)qN(t,e),t=t.sibling}function qN(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(sn(t,e),_n(e),r&4){try{go(3,e,e.return),bu(3,e)}catch(p){De(e,e.return,p)}try{go(5,e,e.return)}catch(p){De(e,e.return,p)}}break;case 1:sn(t,e),_n(e),r&512&&n!==null&&Bi(n,n.return);break;case 5:if(sn(t,e),_n(e),r&512&&n!==null&&Bi(n,n.return),e.flags&32){var i=e.stateNode;try{Eo(i,"")}catch(p){De(e,e.return,p)}}if(r&4&&(i=e.stateNode,i!=null)){var s=e.memoizedProps,o=n!==null?n.memoizedProps:s,a=e.type,l=e.updateQueue;if(e.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&oT(i,s),Tg(a,o);var u=Tg(a,s);for(o=0;o<l.length;o+=2){var c=l[o],d=l[o+1];c==="style"?dT(i,d):c==="dangerouslySetInnerHTML"?uT(i,d):c==="children"?Eo(i,d):Jy(i,c,d,u)}switch(a){case"input":Sg(i,s);break;case"textarea":aT(i,s);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var h=s.value;h!=null?Xi(i,!!s.multiple,h,!1):f!==!!s.multiple&&(s.defaultValue!=null?Xi(i,!!s.multiple,s.defaultValue,!0):Xi(i,!!s.multiple,s.multiple?[]:"",!1))}i[Io]=s}catch(p){De(e,e.return,p)}}break;case 6:if(sn(t,e),_n(e),r&4){if(e.stateNode===null)throw Error(W(162));i=e.stateNode,s=e.memoizedProps;try{i.nodeValue=s}catch(p){De(e,e.return,p)}}break;case 3:if(sn(t,e),_n(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{No(t.containerInfo)}catch(p){De(e,e.return,p)}break;case 4:sn(t,e),_n(e);break;case 13:sn(t,e),_n(e),i=e.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Pv=Ve())),r&4&&iw(e);break;case 22:if(c=n!==null&&n.memoizedState!==null,e.mode&1?(ht=(u=ht)||c,sn(t,e),ht=u):sn(t,e),_n(e),r&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!c&&e.mode&1)for(J=e,c=e.child;c!==null;){for(d=J=c;J!==null;){switch(f=J,h=f.child,f.tag){case 0:case 11:case 14:case 15:go(4,f,f.return);break;case 1:Bi(f,f.return);var g=f.stateNode;if(typeof g.componentWillUnmount=="function"){r=f,n=f.return;try{t=r,g.props=t.memoizedProps,g.state=t.memoizedState,g.componentWillUnmount()}catch(p){De(r,n,p)}}break;case 5:Bi(f,f.return);break;case 22:if(f.memoizedState!==null){ow(d);continue}}h!==null?(h.return=f,J=h):ow(d)}c=c.sibling}e:for(c=null,d=e;;){if(d.tag===5){if(c===null){c=d;try{i=d.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=cT("display",o))}catch(p){De(e,e.return,p)}}}else if(d.tag===6){if(c===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(p){De(e,e.return,p)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===e)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;d.sibling===null;){if(d.return===null||d.return===e)break e;c===d&&(c=null),d=d.return}c===d&&(c=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:sn(t,e),_n(e),r&4&&iw(e);break;case 21:break;default:sn(t,e),_n(e)}}function _n(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(LN(n)){var r=n;break e}n=n.return}throw Error(W(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Eo(i,""),r.flags&=-33);var s=rw(e);ry(e,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=rw(e);ny(e,a,o);break;default:throw Error(W(161))}}catch(l){De(e,e.return,l)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function jj(e,t,n){J=e,$N(e)}function $N(e,t,n){for(var r=(e.mode&1)!==0;J!==null;){var i=J,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Oa;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||ht;a=Oa;var u=ht;if(Oa=o,(ht=l)&&!u)for(J=i;J!==null;)o=J,l=o.child,o.tag===22&&o.memoizedState!==null?aw(i):l!==null?(l.return=o,J=l):aw(i);for(;s!==null;)J=s,$N(s),s=s.sibling;J=i,Oa=a,ht=u}sw(e)}else i.subtreeFlags&8772&&s!==null?(s.return=i,J=s):sw(e)}}function sw(e){for(;J!==null;){var t=J;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:ht||bu(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!ht)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:ln(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&zx(t,s,r);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}zx(t,o,n)}break;case 5:var a=t.stateNode;if(n===null&&t.flags&4){n=a;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var d=c.dehydrated;d!==null&&No(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(W(163))}ht||t.flags&512&&ty(t)}catch(f){De(t,t.return,f)}}if(t===e){J=null;break}if(n=t.sibling,n!==null){n.return=t.return,J=n;break}J=t.return}}function ow(e){for(;J!==null;){var t=J;if(t===e){J=null;break}var n=t.sibling;if(n!==null){n.return=t.return,J=n;break}J=t.return}}function aw(e){for(;J!==null;){var t=J;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{bu(4,t)}catch(l){De(t,n,l)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(l){De(t,i,l)}}var s=t.return;try{ty(t)}catch(l){De(t,s,l)}break;case 5:var o=t.return;try{ty(t)}catch(l){De(t,o,l)}}}catch(l){De(t,t.return,l)}if(t===e){J=null;break}var a=t.sibling;if(a!==null){a.return=t.return,J=a;break}J=t.return}}var Dj=Math.ceil,Fl=nr.ReactCurrentDispatcher,Av=nr.ReactCurrentOwner,Xt=nr.ReactCurrentBatchConfig,me=0,Je=null,Ue=null,it=0,Rt=0,zi=Or(0),Ye=0,$o=null,fi=0,Su=0,Rv=0,yo=null,_t=null,Pv=0,ds=1/0,Ln=null,Vl=!1,iy=null,kr=null,qa=!1,wr=null,Bl=0,vo=0,sy=null,cl=-1,dl=0;function wt(){return me&6?Ve():cl!==-1?cl:cl=Ve()}function Tr(e){return e.mode&1?me&2&&it!==0?it&-it:vj.transition!==null?(dl===0&&(dl=_T()),dl):(e=ye,e!==0||(e=window.event,e=e===void 0?16:AT(e.type)),e):1}function pn(e,t,n,r){if(50<vo)throw vo=0,sy=null,Error(W(185));ea(e,n,r),(!(me&2)||e!==Je)&&(e===Je&&(!(me&2)&&(Su|=n),Ye===4&&gr(e,it)),Nt(e,r),n===1&&me===0&&!(t.mode&1)&&(ds=Ve()+500,vu&&qr()))}function Nt(e,t){var n=e.callbackNode;vI(e,t);var r=Cl(e,e===Je?it:0);if(r===0)n!==null&&gx(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&gx(n),t===1)e.tag===0?yj(lw.bind(null,e)):YT(lw.bind(null,e)),hj(function(){!(me&6)&&qr()}),n=null;else{switch(ET(r)){case 1:n=iv;break;case 4:n=bT;break;case 16:n=El;break;case 536870912:n=ST;break;default:n=El}n=WN(n,FN.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function FN(e,t){if(cl=-1,dl=0,me&6)throw Error(W(327));var n=e.callbackNode;if(ts()&&e.callbackNode!==n)return null;var r=Cl(e,e===Je?it:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=zl(e,r);else{t=r;var i=me;me|=2;var s=BN();(Je!==e||it!==t)&&(Ln=null,ds=Ve()+500,ri(e,t));do try{qj();break}catch(a){VN(e,a)}while(!0);yv(),Fl.current=s,me=i,Ue!==null?t=0:(Je=null,it=0,t=Ye)}if(t!==0){if(t===2&&(i=Pg(e),i!==0&&(r=i,t=oy(e,i))),t===1)throw n=$o,ri(e,0),gr(e,r),Nt(e,Ve()),n;if(t===6)gr(e,r);else{if(i=e.current.alternate,!(r&30)&&!Lj(i)&&(t=zl(e,r),t===2&&(s=Pg(e),s!==0&&(r=s,t=oy(e,s))),t===1))throw n=$o,ri(e,0),gr(e,r),Nt(e,Ve()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(W(345));case 2:Gr(e,_t,Ln);break;case 3:if(gr(e,r),(r&130023424)===r&&(t=Pv+500-Ve(),10<t)){if(Cl(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){wt(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=Fg(Gr.bind(null,e,_t,Ln),t);break}Gr(e,_t,Ln);break;case 4:if(gr(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var o=31-hn(r);s=1<<o,o=t[o],o>i&&(i=o),r&=~s}if(r=i,r=Ve()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Dj(r/1960))-r,10<r){e.timeoutHandle=Fg(Gr.bind(null,e,_t,Ln),r);break}Gr(e,_t,Ln);break;case 5:Gr(e,_t,Ln);break;default:throw Error(W(329))}}}return Nt(e,Ve()),e.callbackNode===n?FN.bind(null,e):null}function oy(e,t){var n=yo;return e.current.memoizedState.isDehydrated&&(ri(e,t).flags|=256),e=zl(e,t),e!==2&&(t=_t,_t=n,t!==null&&ay(t)),e}function ay(e){_t===null?_t=e:_t.push.apply(_t,e)}function Lj(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!gn(s(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function gr(e,t){for(t&=~Rv,t&=~Su,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-hn(t),r=1<<n;e[n]=-1,t&=~r}}function lw(e){if(me&6)throw Error(W(327));ts();var t=Cl(e,0);if(!(t&1))return Nt(e,Ve()),null;var n=zl(e,t);if(e.tag!==0&&n===2){var r=Pg(e);r!==0&&(t=r,n=oy(e,r))}if(n===1)throw n=$o,ri(e,0),gr(e,t),Nt(e,Ve()),n;if(n===6)throw Error(W(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Gr(e,_t,Ln),Nt(e,Ve()),null}function Iv(e,t){var n=me;me|=1;try{return e(t)}finally{me=n,me===0&&(ds=Ve()+500,vu&&qr())}}function hi(e){wr!==null&&wr.tag===0&&!(me&6)&&ts();var t=me;me|=1;var n=Xt.transition,r=ye;try{if(Xt.transition=null,ye=1,e)return e()}finally{ye=r,Xt.transition=n,me=t,!(me&6)&&qr()}}function jv(){Rt=zi.current,ke(zi)}function ri(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,fj(n)),Ue!==null)for(n=Ue.return;n!==null;){var r=n;switch(pv(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Al();break;case 3:us(),ke(kt),ke(mt),_v();break;case 5:Sv(r);break;case 4:us();break;case 13:ke(Ae);break;case 19:ke(Ae);break;case 10:vv(r.type._context);break;case 22:case 23:jv()}n=n.return}if(Je=e,Ue=e=Nr(e.current,null),it=Rt=t,Ye=0,$o=null,Rv=Su=fi=0,_t=yo=null,Zr!==null){for(t=0;t<Zr.length;t++)if(n=Zr[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}Zr=null}return e}function VN(e,t){do{var n=Ue;try{if(yv(),al.current=$l,ql){for(var r=Pe.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}ql=!1}if(di=0,Qe=Ke=Pe=null,mo=!1,Lo=0,Av.current=null,n===null||n.return===null){Ye=1,$o=t,Ue=null;break}e:{var s=e,o=n.return,a=n,l=t;if(t=it,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,c=a,d=c.tag;if(!(c.mode&1)&&(d===0||d===11||d===15)){var f=c.alternate;f?(c.updateQueue=f.updateQueue,c.memoizedState=f.memoizedState,c.lanes=f.lanes):(c.updateQueue=null,c.memoizedState=null)}var h=Yx(o);if(h!==null){h.flags&=-257,Xx(h,o,a,s,t),h.mode&1&&Kx(s,u,t),t=h,l=u;var g=t.updateQueue;if(g===null){var p=new Set;p.add(l),t.updateQueue=p}else g.add(l);break e}else{if(!(t&1)){Kx(s,u,t),Dv();break e}l=Error(W(426))}}else if(Ne&&a.mode&1){var x=Yx(o);if(x!==null){!(x.flags&65536)&&(x.flags|=256),Xx(x,o,a,s,t),mv(cs(l,a));break e}}s=l=cs(l,a),Ye!==4&&(Ye=2),yo===null?yo=[s]:yo.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var m=EN(s,l,t);Bx(s,m);break e;case 1:a=l;var v=s.type,w=s.stateNode;if(!(s.flags&128)&&(typeof v.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(kr===null||!kr.has(w)))){s.flags|=65536,t&=-t,s.lanes|=t;var b=CN(s,a,t);Bx(s,b);break e}}s=s.return}while(s!==null)}UN(n)}catch(_){t=_,Ue===n&&n!==null&&(Ue=n=n.return);continue}break}while(!0)}function BN(){var e=Fl.current;return Fl.current=$l,e===null?$l:e}function Dv(){(Ye===0||Ye===3||Ye===2)&&(Ye=4),Je===null||!(fi&268435455)&&!(Su&268435455)||gr(Je,it)}function zl(e,t){var n=me;me|=2;var r=BN();(Je!==e||it!==t)&&(Ln=null,ri(e,t));do try{Oj();break}catch(i){VN(e,i)}while(!0);if(yv(),me=n,Fl.current=r,Ue!==null)throw Error(W(261));return Je=null,it=0,Ye}function Oj(){for(;Ue!==null;)zN(Ue)}function qj(){for(;Ue!==null&&!uI();)zN(Ue)}function zN(e){var t=GN(e.alternate,e,Rt);e.memoizedProps=e.pendingProps,t===null?UN(e):Ue=t,Av.current=null}function UN(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=Rj(n,t),n!==null){n.flags&=32767,Ue=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Ye=6,Ue=null;return}}else if(n=Aj(n,t,Rt),n!==null){Ue=n;return}if(t=t.sibling,t!==null){Ue=t;return}Ue=t=e}while(t!==null);Ye===0&&(Ye=5)}function Gr(e,t,n){var r=ye,i=Xt.transition;try{Xt.transition=null,ye=1,$j(e,t,n,r)}finally{Xt.transition=i,ye=r}return null}function $j(e,t,n,r){do ts();while(wr!==null);if(me&6)throw Error(W(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(W(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(xI(e,s),e===Je&&(Ue=Je=null,it=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||qa||(qa=!0,WN(El,function(){return ts(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Xt.transition,Xt.transition=null;var o=ye;ye=1;var a=me;me|=4,Av.current=null,Ij(e,n),qN(n,e),sj(qg),kl=!!Og,qg=Og=null,e.current=n,jj(n),cI(),me=a,ye=o,Xt.transition=s}else e.current=n;if(qa&&(qa=!1,wr=e,Bl=i),s=e.pendingLanes,s===0&&(kr=null),hI(n.stateNode),Nt(e,Ve()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Vl)throw Vl=!1,e=iy,iy=null,e;return Bl&1&&e.tag!==0&&ts(),s=e.pendingLanes,s&1?e===sy?vo++:(vo=0,sy=e):vo=0,qr(),null}function ts(){if(wr!==null){var e=ET(Bl),t=Xt.transition,n=ye;try{if(Xt.transition=null,ye=16>e?16:e,wr===null)var r=!1;else{if(e=wr,wr=null,Bl=0,me&6)throw Error(W(331));var i=me;for(me|=4,J=e.current;J!==null;){var s=J,o=s.child;if(J.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(J=u;J!==null;){var c=J;switch(c.tag){case 0:case 11:case 15:go(8,c,s)}var d=c.child;if(d!==null)d.return=c,J=d;else for(;J!==null;){c=J;var f=c.sibling,h=c.return;if(DN(c),c===u){J=null;break}if(f!==null){f.return=h,J=f;break}J=h}}}var g=s.alternate;if(g!==null){var p=g.child;if(p!==null){g.child=null;do{var x=p.sibling;p.sibling=null,p=x}while(p!==null)}}J=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,J=o;else e:for(;J!==null;){if(s=J,s.flags&2048)switch(s.tag){case 0:case 11:case 15:go(9,s,s.return)}var m=s.sibling;if(m!==null){m.return=s.return,J=m;break e}J=s.return}}var v=e.current;for(J=v;J!==null;){o=J;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,J=w;else e:for(o=v;J!==null;){if(a=J,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:bu(9,a)}}catch(_){De(a,a.return,_)}if(a===o){J=null;break e}var b=a.sibling;if(b!==null){b.return=a.return,J=b;break e}J=a.return}}if(me=i,qr(),Tn&&typeof Tn.onPostCommitFiberRoot=="function")try{Tn.onPostCommitFiberRoot(hu,e)}catch{}r=!0}return r}finally{ye=n,Xt.transition=t}}return!1}function uw(e,t,n){t=cs(n,t),t=EN(e,t,1),e=Cr(e,t,1),t=wt(),e!==null&&(ea(e,1,t),Nt(e,t))}function De(e,t,n){if(e.tag===3)uw(e,e,n);else for(;t!==null;){if(t.tag===3){uw(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(kr===null||!kr.has(r))){e=cs(n,e),e=CN(t,e,1),t=Cr(t,e,1),e=wt(),t!==null&&(ea(t,1,e),Nt(t,e));break}}t=t.return}}function Fj(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=wt(),e.pingedLanes|=e.suspendedLanes&n,Je===e&&(it&n)===n&&(Ye===4||Ye===3&&(it&130023424)===it&&500>Ve()-Pv?ri(e,0):Rv|=n),Nt(e,t)}function HN(e,t){t===0&&(e.mode&1?(t=Na,Na<<=1,!(Na&130023424)&&(Na=4194304)):t=1);var n=wt();e=Xn(e,t),e!==null&&(ea(e,t,n),Nt(e,n))}function Vj(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),HN(e,n)}function Bj(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(W(314))}r!==null&&r.delete(t),HN(e,n)}var GN;GN=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||kt.current)Et=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Et=!1,Mj(e,t,n);Et=!!(e.flags&131072)}else Et=!1,Ne&&t.flags&1048576&&XT(t,Il,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;ul(e,t),e=t.pendingProps;var i=os(t,mt.current);es(t,n),i=Cv(null,t,r,e,i,n);var s=kv();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Tt(r)?(s=!0,Rl(t)):s=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,wv(t),i.updater=wu,t.stateNode=i,i._reactInternals=t,Wg(t,r,e,n),t=Xg(null,t,r,!0,s,n)):(t.tag=0,Ne&&s&&hv(t),xt(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(ul(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=Uj(r),e=ln(r,e),i){case 0:t=Yg(null,t,r,e,n);break e;case 1:t=Jx(null,t,r,e,n);break e;case 11:t=Zx(null,t,r,e,n);break e;case 14:t=Qx(null,t,r,ln(r.type,e),n);break e}throw Error(W(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ln(r,i),Yg(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ln(r,i),Jx(e,t,r,i,n);case 3:e:{if(MN(t),e===null)throw Error(W(387));r=t.pendingProps,s=t.memoizedState,i=s.element,nN(e,t),Ll(t,r,null,n);var o=t.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){i=cs(Error(W(423)),t),t=ew(e,t,r,n,i);break e}else if(r!==i){i=cs(Error(W(424)),t),t=ew(e,t,r,n,i);break e}else for(It=Er(t.stateNode.containerInfo.firstChild),jt=t,Ne=!0,dn=null,n=eN(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(as(),r===i){t=Zn(e,t,n);break e}xt(e,t,r,n)}t=t.child}return t;case 5:return rN(t),e===null&&Ug(t),r=t.type,i=t.pendingProps,s=e!==null?e.memoizedProps:null,o=i.children,$g(r,i)?o=null:s!==null&&$g(r,s)&&(t.flags|=32),NN(e,t),xt(e,t,o,n),t.child;case 6:return e===null&&Ug(t),null;case 13:return AN(e,t,n);case 4:return bv(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=ls(t,null,r,n):xt(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ln(r,i),Zx(e,t,r,i,n);case 7:return xt(e,t,t.pendingProps,n),t.child;case 8:return xt(e,t,t.pendingProps.children,n),t.child;case 12:return xt(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,s=t.memoizedProps,o=i.value,_e(jl,r._currentValue),r._currentValue=o,s!==null)if(gn(s.value,o)){if(s.children===i.children&&!kt.current){t=Zn(e,t,n);break e}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=Un(-1,n&-n),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),Hg(s.return,n,t),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===t.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(W(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Hg(o,n,t),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===t){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}xt(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,es(t,n),i=Zt(i),r=r(i),t.flags|=1,xt(e,t,r,n),t.child;case 14:return r=t.type,i=ln(r,t.pendingProps),i=ln(r.type,i),Qx(e,t,r,i,n);case 15:return kN(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ln(r,i),ul(e,t),t.tag=1,Tt(r)?(e=!0,Rl(t)):e=!1,es(t,n),_N(t,r,i),Wg(t,r,i,n),Xg(null,t,r,!0,e,n);case 19:return RN(e,t,n);case 22:return TN(e,t,n)}throw Error(W(156,t.tag))};function WN(e,t){return wT(e,t)}function zj(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Kt(e,t,n,r){return new zj(e,t,n,r)}function Lv(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Uj(e){if(typeof e=="function")return Lv(e)?1:0;if(e!=null){if(e=e.$$typeof,e===tv)return 11;if(e===nv)return 14}return 2}function Nr(e,t){var n=e.alternate;return n===null?(n=Kt(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function fl(e,t,n,r,i,s){var o=2;if(r=e,typeof e=="function")Lv(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case Ii:return ii(n.children,i,s,t);case ev:o=8,i|=8;break;case yg:return e=Kt(12,n,t,i|2),e.elementType=yg,e.lanes=s,e;case vg:return e=Kt(13,n,t,i),e.elementType=vg,e.lanes=s,e;case xg:return e=Kt(19,n,t,i),e.elementType=xg,e.lanes=s,e;case rT:return _u(n,i,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case tT:o=10;break e;case nT:o=9;break e;case tv:o=11;break e;case nv:o=14;break e;case dr:o=16,r=null;break e}throw Error(W(130,e==null?e:typeof e,""))}return t=Kt(o,n,t,i),t.elementType=e,t.type=r,t.lanes=s,t}function ii(e,t,n,r){return e=Kt(7,e,r,t),e.lanes=n,e}function _u(e,t,n,r){return e=Kt(22,e,r,t),e.elementType=rT,e.lanes=n,e.stateNode={isHidden:!1},e}function Hc(e,t,n){return e=Kt(6,e,null,t),e.lanes=n,e}function Gc(e,t,n){return t=Kt(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Hj(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=kc(0),this.expirationTimes=kc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=kc(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Ov(e,t,n,r,i,s,o,a,l){return e=new Hj(e,t,n,a,l),t===1?(t=1,s===!0&&(t|=8)):t=0,s=Kt(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},wv(s),e}function Gj(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Pi,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function KN(e){if(!e)return Pr;e=e._reactInternals;e:{if(yi(e)!==e||e.tag!==1)throw Error(W(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Tt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(W(171))}if(e.tag===1){var n=e.type;if(Tt(n))return KT(e,n,t)}return t}function YN(e,t,n,r,i,s,o,a,l){return e=Ov(n,r,!0,e,i,s,o,a,l),e.context=KN(null),n=e.current,r=wt(),i=Tr(n),s=Un(r,i),s.callback=t??null,Cr(n,s,i),e.current.lanes=i,ea(e,i,r),Nt(e,r),e}function Eu(e,t,n,r){var i=t.current,s=wt(),o=Tr(i);return n=KN(n),t.context===null?t.context=n:t.pendingContext=n,t=Un(s,o),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Cr(i,t,o),e!==null&&(pn(e,i,o,s),ol(e,i,o)),o}function Ul(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function cw(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function qv(e,t){cw(e,t),(e=e.alternate)&&cw(e,t)}function Wj(){return null}var XN=typeof reportError=="function"?reportError:function(e){console.error(e)};function $v(e){this._internalRoot=e}Cu.prototype.render=$v.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(W(409));Eu(e,t,null,null)};Cu.prototype.unmount=$v.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;hi(function(){Eu(null,e,null,null)}),t[Yn]=null}};function Cu(e){this._internalRoot=e}Cu.prototype.unstable_scheduleHydration=function(e){if(e){var t=TT();e={blockedOn:null,target:e,priority:t};for(var n=0;n<mr.length&&t!==0&&t<mr[n].priority;n++);mr.splice(n,0,e),n===0&&MT(e)}};function Fv(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function ku(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function dw(){}function Kj(e,t,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var u=Ul(o);s.call(u)}}var o=YN(t,r,e,0,null,!1,!1,"",dw);return e._reactRootContainer=o,e[Yn]=o.current,Ro(e.nodeType===8?e.parentNode:e),hi(),o}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var u=Ul(l);a.call(u)}}var l=Ov(e,0,!1,null,null,!1,!1,"",dw);return e._reactRootContainer=l,e[Yn]=l.current,Ro(e.nodeType===8?e.parentNode:e),hi(function(){Eu(t,l,n,r)}),l}function Tu(e,t,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=Ul(o);a.call(l)}}Eu(t,o,e,i)}else o=Kj(n,t,e,i,r);return Ul(o)}CT=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Ys(t.pendingLanes);n!==0&&(sv(t,n|1),Nt(t,Ve()),!(me&6)&&(ds=Ve()+500,qr()))}break;case 13:hi(function(){var r=Xn(e,1);if(r!==null){var i=wt();pn(r,e,1,i)}}),qv(e,1)}};ov=function(e){if(e.tag===13){var t=Xn(e,134217728);if(t!==null){var n=wt();pn(t,e,134217728,n)}qv(e,134217728)}};kT=function(e){if(e.tag===13){var t=Tr(e),n=Xn(e,t);if(n!==null){var r=wt();pn(n,e,t,r)}qv(e,t)}};TT=function(){return ye};NT=function(e,t){var n=ye;try{return ye=e,t()}finally{ye=n}};Mg=function(e,t,n){switch(t){case"input":if(Sg(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=yu(r);if(!i)throw Error(W(90));sT(r),Sg(r,i)}}}break;case"textarea":aT(e,n);break;case"select":t=n.value,t!=null&&Xi(e,!!n.multiple,t,!1)}};pT=Iv;mT=hi;var Yj={usingClientEntryPoint:!1,Events:[na,Oi,yu,fT,hT,Iv]},qs={findFiberByHostInstance:Xr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Xj={bundleType:qs.bundleType,version:qs.version,rendererPackageName:qs.rendererPackageName,rendererConfig:qs.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:nr.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=vT(e),e===null?null:e.stateNode},findFiberByHostInstance:qs.findFiberByHostInstance||Wj,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var $a=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!$a.isDisabled&&$a.supportsFiber)try{hu=$a.inject(Xj),Tn=$a}catch{}}$t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Yj;$t.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Fv(t))throw Error(W(200));return Gj(e,t,null,n)};$t.createRoot=function(e,t){if(!Fv(e))throw Error(W(299));var n=!1,r="",i=XN;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=Ov(e,1,!1,null,null,n,!1,r,i),e[Yn]=t.current,Ro(e.nodeType===8?e.parentNode:e),new $v(t)};$t.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(W(188)):(e=Object.keys(e).join(","),Error(W(268,e)));return e=vT(t),e=e===null?null:e.stateNode,e};$t.flushSync=function(e){return hi(e)};$t.hydrate=function(e,t,n){if(!ku(t))throw Error(W(200));return Tu(null,e,t,!0,n)};$t.hydrateRoot=function(e,t,n){if(!Fv(e))throw Error(W(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=XN;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=YN(t,null,e,1,n??null,i,!1,s,o),e[Yn]=t.current,Ro(e),r)for(e=0;e<r.length;e++)n=r[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Cu(t)};$t.render=function(e,t,n){if(!ku(t))throw Error(W(200));return Tu(null,e,t,!1,n)};$t.unmountComponentAtNode=function(e){if(!ku(e))throw Error(W(40));return e._reactRootContainer?(hi(function(){Tu(null,null,e,!1,function(){e._reactRootContainer=null,e[Yn]=null})}),!0):!1};$t.unstable_batchedUpdates=Iv;$t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!ku(n))throw Error(W(200));if(e==null||e._reactInternals===void 0)throw Error(W(38));return Tu(e,t,n,!1,r)};$t.version="18.3.1-next-f1338f8080-20240426";function ZN(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(ZN)}catch(e){console.error(e)}}ZN(),Zk.exports=$t;var Zj=Zk.exports,fw=Zj;mg.createRoot=fw.createRoot,mg.hydrateRoot=fw.hydrateRoot;const Qj=()=>y.jsxs("svg",{className:"logo-mark",width:"54",height:"54",viewBox:"0 0 120 120",role:"img","aria-label":"Agent Director logo",children:[y.jsx("rect",{x:"8",y:"8",width:"104",height:"104",rx:"18",className:"logo-frame"}),y.jsx("rect",{x:"24",y:"28",width:"72",height:"16",rx:"6",className:"logo-bar logo-bar-a"}),y.jsx("rect",{x:"24",y:"52",width:"72",height:"16",rx:"6",className:"logo-bar logo-bar-b"}),y.jsx("rect",{x:"24",y:"76",width:"72",height:"16",rx:"6",className:"logo-bar logo-bar-c"}),y.jsx("circle",{cx:"96",cy:"36",r:"6",className:"logo-node logo-node-a"}),y.jsx("circle",{cx:"96",cy:"60",r:"6",className:"logo-node logo-node-b"}),y.jsx("circle",{cx:"96",cy:"84",r:"6",className:"logo-node logo-node-c"})]});function Jj({trace:e,traces:t=[],selectedTraceId:n,onSelectTrace:r,onReload:i,onStartTour:s,onToggleStory:o,onOpenPalette:a,onToggleExplain:l,explainMode:u=!1,storyActive:c=!1}){return y.jsxs("header",{className:"header","data-help":!0,"data-help-indicator":!0,"data-tour":"header","data-help-title":"Mission control","data-help-body":"Trace identity, status, and live controls live here. Use Story, Guide, or Explain to orient new viewers.","data-help-placement":"bottom",children:[y.jsxs("div",{className:"header-title",children:[y.jsxs("div",{className:"header-logo",children:[y.jsx(Qj,{}),y.jsx("span",{children:"Agent Director"})]}),y.jsx("div",{className:"header-tagline",children:"Cinematic trace intelligence for agent runs."}),y.jsxs("div",{className:"header-meta",children:[y.jsxs("span",{className:"header-run",children:["Run: ",(e==null?void 0:e.id)??"loading"]}),t.length>0?y.jsx("select",{className:"trace-select",value:n??(e==null?void 0:e.id)??"","aria-label":"Select trace",onChange:d=>r==null?void 0:r(d.target.value),"data-help":!0,"data-help-title":"Trace selector","data-help-body":"Switch between available runs to compare different sessions.","data-help-placement":"bottom",children:t.map(d=>y.jsxs("option",{value:d.id,children:[d.name," (",d.id,")"]},d.id))}):null,y.jsx("span",{className:`status-pill status-${(e==null?void 0:e.status)??"loading"}`,children:(e==null?void 0:e.status)??"loading"}),e!=null&&e.replay?y.jsxs("span",{className:"header-replay",title:`Replay from ${e.branchPointStepId??"unknown step"}`,children:["Replay: ",e.replay.strategy]}):null,y.jsxs("span",{className:"header-wall",children:["Wall: ",(e==null?void 0:e.metadata.wallTimeMs)??0,"ms"]})]})]}),y.jsxs("div",{className:"header-actions",children:[y.jsx("button",{className:`ghost-button ${c?"active":""}`,type:"button",onClick:o,"aria-pressed":c,"aria-label":"Toggle story mode","data-help":!0,"data-help-title":"Story mode","data-help-body":"Auto-runs a cinematic walkthrough for demos.","data-help-placement":"bottom",children:"Story"}),y.jsx("button",{className:"ghost-button",type:"button",onClick:s,"aria-label":"Start guided tour","data-help":!0,"data-help-title":"Guided tour","data-help-body":"Walk through the interface step by step.","data-help-placement":"bottom",children:"Guide"}),y.jsx("button",{className:"ghost-button",type:"button",onClick:a,"aria-label":"Open command palette","data-help":!0,"data-help-title":"Command palette","data-help-body":"Search and trigger any action instantly.","data-help-placement":"bottom",children:"Command"}),y.jsx("button",{className:`ghost-button ${u?"active":""}`,type:"button",onClick:l,"aria-pressed":u,"aria-label":"Toggle explain mode","data-help":!0,"data-help-title":"Explain mode","data-help-body":"Hover any control to see contextual guidance.","data-help-placement":"bottom",children:"Explain"}),y.jsx("button",{className:"ghost-button",onClick:i,type:"button","aria-label":"Refresh traces",title:"Refresh traces","data-help":!0,"data-help-title":"Refresh","data-help-body":"Reload traces from the data store.","data-help-placement":"bottom",children:"Refresh"}),null]})]})}function eD({insights:e,onSelectStep:t,onJumpToBottleneck:n,onJumpToError:r}){var c,d;if(!e)return null;const i=e.timing,s=e.ioWarnings??[],o=e.concurrency,a=e.retryPatterns,l=e.costByTool??{},u=e.costByModel??{};return y.jsxs("section",{className:"insight-strip","data-help":!0,"data-help-indicator":!0,"data-tour":"insights","data-help-title":"Run insights","data-help-body":"Fast diagnostics for latency, cost, errors, and concurrency. Click chips to jump into the trace.","data-help-placement":"bottom",children:[y.jsxs("div",{className:"insight-block","data-help":!0,"data-help-title":"Top latency","data-help-body":"Largest steps by duration; jump straight to the slowest.","data-help-placement":"bottom",children:[y.jsx("span",{className:"insight-label",children:"Top latency"}),y.jsxs("div",{className:"insight-items",children:[e.topLatencySteps.map(f=>y.jsxs("button",{className:"insight-chip",type:"button",title:`Jump to ${f.name}`,onClick:()=>t==null?void 0:t(f.stepId),children:[f.name," (",f.durationMs,"ms)"]},f.stepId)),e.topLatencySteps.length>0?y.jsx("button",{className:"insight-chip",type:"button",onClick:n,title:"Jump to longest step",children:"Jump to bottleneck"}):null]})]}),y.jsxs("div",{className:"insight-block","data-help":!0,"data-help-title":"Cost by type","data-help-body":"Aggregated spend by step class.","data-help-placement":"bottom",children:[y.jsx("span",{className:"insight-label",children:"Cost by type"}),y.jsx("div",{className:"insight-items",children:Object.entries(e.costByType).map(([f,h])=>y.jsxs("span",{className:"insight-chip",title:`Total cost for ${f}`,children:[f,": $",h.toFixed(3)]},f))})]}),Object.keys(l).length?y.jsxs("div",{className:"insight-block","data-help":!0,"data-help-title":"Cost by tool","data-help-body":"Top tools by total spend.","data-help-placement":"bottom",children:[y.jsx("span",{className:"insight-label",children:"Cost by tool"}),y.jsx("div",{className:"insight-items",children:Object.entries(l).sort((f,h)=>h[1]-f[1]).slice(0,3).map(([f,h])=>y.jsxs("span",{className:"insight-chip",title:`Total cost for ${f}`,children:[f,": $",h.toFixed(3)]},f))})]}):null,y.jsxs("div",{className:"insight-block","data-help":!0,"data-help-title":"Errors & retries","data-help-body":"Instant visibility into failed or retried steps.","data-help-placement":"bottom",children:[y.jsx("span",{className:"insight-label",children:"Errors / retries"}),y.jsxs("div",{className:"insight-items",children:[y.jsxs("span",{className:"insight-chip",children:["Errors: ",e.errors]}),y.jsxs("span",{className:"insight-chip",children:["Retries: ",e.retries]}),e.errors>0?y.jsx("button",{className:"insight-chip",type:"button",onClick:r,title:"Jump to first error",children:"Jump to first error"}):null,(c=a==null?void 0:a.topRetries)!=null&&c.length?y.jsxs("span",{className:"insight-chip",title:`Retry rate ${(a.retryRate*100).toFixed(1)}%`,children:["Top retries: ",a.topRetries.length]}):null]})]}),y.jsxs("div",{className:"insight-block","data-help":!0,"data-help-title":"Wall vs work","data-help-body":"Wall time vs summed work to show parallelism.","data-help-placement":"bottom",children:[y.jsx("span",{className:"insight-label",children:"Wall vs work"}),y.jsxs("div",{className:"insight-items",children:[y.jsxs("span",{className:"insight-chip",title:"Wall clock duration",children:["Wall: ",e.wallTimeMs,"ms"]}),y.jsxs("span",{className:"insight-chip",title:"Sum of step durations",children:["Work: ",e.workTimeMs,"ms"]}),e.criticalPathMs!=null?y.jsxs("span",{className:"insight-chip",title:"Longest parent-child chain",children:["Critical: ",e.criticalPathMs,"ms"]}):null]})]}),y.jsxs("div",{className:"insight-block","data-help":!0,"data-help-title":"Health","data-help-body":"Timing and I/O anomalies detected in the trace.","data-help-placement":"bottom",children:[y.jsx("span",{className:"insight-label",children:"Health"}),y.jsxs("div",{className:"insight-items",children:[i!=null&&i.degraded?y.jsx("span",{className:"insight-chip insight-warning",title:i.issues.join(" "),children:"Timing degraded"}):y.jsx("span",{className:"insight-chip",children:"Timing OK"}),s.length>0?y.jsxs("span",{className:"insight-chip insight-warning",title:s.map(f=>f.message).join(" "),children:["IO warnings: ",s.length]}):y.jsx("span",{className:"insight-chip",children:"IO OK"})]})]}),(d=o==null?void 0:o.buckets)!=null&&d.length?y.jsxs("div",{className:"insight-block","data-help":!0,"data-help-title":"Parallelism","data-help-body":"How many steps ran concurrently over time.","data-help-placement":"bottom",children:[y.jsx("span",{className:"insight-label",children:"Parallelism"}),y.jsx("div",{className:"insight-items",children:y.jsx("div",{className:"insight-heatmap",title:`Peak concurrency: ${o.peak}`,children:o.buckets.map((f,h)=>y.jsx("span",{className:"heatmap-bar",style:{height:`${Math.max(20,f.active/Math.max(1,o.peak)*48)}px`},title:`Bucket ${h+1}: ${f.active} active`},`${f.startMs}-${f.endMs}`))})})]}):null,Object.keys(u).length?y.jsxs("div",{className:"insight-block","data-help":!0,"data-help-title":"Model cost","data-help-body":"Spend by model family.","data-help-placement":"bottom",children:[y.jsx("span",{className:"insight-label",children:"Model cost"}),y.jsx("div",{className:"insight-items",children:Object.entries(u).map(([f,h])=>y.jsxs("span",{className:"insight-chip",title:`Total cost for ${f}`,children:[f,": $",h.toFixed(3)]},f))})]}):null]})}const tD=["all","llm_call","tool_call","decision","handoff","guardrail"];function nD({query:e,typeFilter:t,onQueryChange:n,onTypeFilterChange:r}){return y.jsxs("div",{className:"search-bar",children:[y.jsx("input",{className:"search-input",placeholder:"Search steps, tools, previews...","aria-label":"Search steps",value:e,onChange:i=>n(i.target.value),"data-help":!0,"data-help-title":"Search","data-help-body":"Filter steps by name, tool, or payload preview. Great for fast recall.","data-help-placement":"bottom"}),y.jsx("select",{className:"search-select",value:t,"aria-label":"Filter by step type",onChange:i=>r(i.target.value),"data-help":!0,"data-help-title":"Type filter","data-help-body":"Narrow the timeline to a specific class of steps (LLM, tool, decision, handoff).","data-help-placement":"bottom",children:tD.map(i=>y.jsx("option",{value:i,children:i},i))})]})}function Nu(e,t,n){const r=Date.parse(e),i=n.map(c=>Date.parse(c.endedAt??c.startedAt)).filter(c=>Number.isFinite(c)),s=t?Date.parse(t):i.length?Math.max(...i):r,o=Math.max(1,s-r),a=n.map(c=>{const d=Math.max(0,Date.parse(c.startedAt)-r),f=Math.max(d,Date.parse(c.endedAt??c.startedAt)-r);return{stepId:c.id,startMs:d,endMs:f}}).sort((c,d)=>c.startMs-d.startMs||c.endMs-d.endMs),l=[],u=[];for(const c of a){let d=l.findIndex(f=>f<=c.startMs);d===-1?(d=l.length,l.push(c.endMs)):l[d]=c.endMs,u.push({stepId:c.stepId,startMs:c.startMs,endMs:c.endMs,lane:d,xPct:c.startMs/o*100,wPct:Math.max(.75,(c.endMs-c.startMs)/o*100)})}return{wallTimeMs:o,intervals:u,laneCount:l.length}}function rD(e){var g;const n=e.steps.map(p=>({stepId:p.id,name:p.name,durationMs:p.durationMs??0})).sort((p,x)=>x.durationMs-p.durationMs).slice(0,3),r={},i={};for(const p of e.steps)((g=p.metrics)==null?void 0:g.costUsd)!=null&&(r[p.type]=(r[p.type]??0)+p.metrics.costUsd,p.type==="tool_call"&&(i[p.name]=(i[p.name]??0)+p.metrics.costUsd));const s=e.steps.filter(p=>p.status==="failed").length,o=e.steps.filter(p=>!!p.retryOfStepId).length,a=e.metadata.wallTimeMs,l=e.metadata.workTimeMs??e.steps.reduce((p,x)=>p+(x.durationMs??0),0),u=iD(e),c=sD(e.steps),d=oD(e.steps),f=aD(e),h=lD(e.steps);return{topLatencySteps:n,costByType:r,costByTool:i,costByModel:{[e.metadata.modelId]:e.metadata.totalCostUsd??0},errors:s,retries:o,wallTimeMs:a,workTimeMs:l,timing:u,ioWarnings:c,criticalPathMs:d,concurrency:f,retryPatterns:h}}function QN(e){var n;const t=(n=e.metrics)==null?void 0:n.costUsd;return t==null?null:`$${t.toFixed(3)}`}function qn(e){if(!e)return null;const t=Date.parse(e);return Number.isNaN(t)?null:t}function iD(e){const t=qn(e.startedAt),n=qn(e.endedAt??void 0),r=[],i=[],s=[];return t==null&&s.push("Trace start time missing or invalid."),e.steps.forEach(o=>{const a=qn(o.startedAt),l=qn(o.endedAt??o.startedAt);if(a==null||l==null){r.push(o.id);return}if(l<a){i.push(o.id);return}t!=null&&a<t&&i.push(o.id),n!=null&&l>n&&i.push(o.id)}),r.length&&s.push(`Missing timestamps on ${r.length} steps.`),i.length&&s.push(`Timestamp skew detected on ${i.length} steps.`),{degraded:!!(r.length||i.length||t==null),issues:s,missingStepIds:r,skewedStepIds:i}}function sD(e){const t=new Map;e.forEach(s=>{s.type==="tool_call"&&s.toolCallId&&t.set(s.toolCallId,s)});const n=new Set,r=new Set,i=[];return e.forEach(s=>{s.type!=="llm_call"||!s.io||((s.io.emittedToolCallIds??[]).forEach(o=>{n.add(o),t.has(o)||i.push({kind:"missing_tool_step",message:`Emitted toolCallId ${o} has no tool step.`,stepId:s.id,toolCallId:o})}),(s.io.consumedToolCallIds??[]).forEach(o=>{r.add(o),t.has(o)||i.push({kind:"missing_tool_step",message:`Consumed toolCallId ${o} has no tool step.`,stepId:s.id,toolCallId:o}),n.has(o)||i.push({kind:"consume_without_emit",message:`Consumed toolCallId ${o} without emission.`,stepId:s.id,toolCallId:o})}))}),t.forEach((s,o)=>{n.has(o)||i.push({kind:"unemitted_tool",message:`Tool step ${s.id} has toolCallId ${o} never emitted.`,stepId:s.id,toolCallId:o}),r.has(o)||i.push({kind:"unconsumed_tool",message:`Tool step ${s.id} has toolCallId ${o} never consumed.`,stepId:s.id,toolCallId:o})}),i}function oD(e){const t=new Map,n=new Map,r=[];e.forEach(o=>{if(t.set(o.id,o.durationMs??0),o.parentStepId){const a=n.get(o.parentStepId)??[];a.push(o.id),n.set(o.parentStepId,a)}else r.push(o.id)});const i=new Map,s=o=>{if(i.has(o))return i.get(o)??0;const l=(n.get(o)??[]).reduce((c,d)=>Math.max(c,s(d)),0),u=(t.get(o)??0)+l;return i.set(o,u),u};return r.length?Math.max(...r.map(o=>s(o))):0}function aD(e){const t=qn(e.startedAt);if(t==null)return{buckets:[],peak:0};const n=qn(e.endedAt??void 0)??Math.max(...e.steps.map(l=>qn(l.endedAt??l.startedAt)??t),t),r=Math.max(1,n-t),i=12,s=Math.max(1,Math.floor(r/i)),o=[];let a=0;for(let l=0;l<i;l+=1){const u=t+l*s,c=u+s;let d=0;e.steps.forEach(f=>{const h=qn(f.startedAt),g=qn(f.endedAt??f.startedAt);h==null||g==null||g>=u&&h<=c&&(d+=1)}),a=Math.max(a,d),o.push({startMs:l*s,endMs:(l+1)*s,active:d})}return{buckets:o,peak:a}}function lD(e){const t={};e.forEach(i=>{i.retryOfStepId&&(t[i.retryOfStepId]=(t[i.retryOfStepId]??0)+1)});const n=Object.values(t).reduce((i,s)=>i+s,0),r=Object.entries(t).sort((i,s)=>s[1]-i[1]).slice(0,3);return{totalRetries:n,retryRate:e.length?n/e.length:0,topRetries:r.map(([i,s])=>({stepId:i,count:s}))}}const uD={llm_call:{label:"LLM",icon:"LLM",description:"Model call"},tool_call:{label:"TOOL",icon:"TOOL",description:"Tool call"},decision:{label:"DEC",icon:"DEC",description:"Decision"},handoff:{label:"HAND",icon:"HAND",description:"Handoff"},guardrail:{label:"GUARD",icon:"GUARD",description:"Guardrail"}};function cD(e){return uD[e]}function Vv({type:e,size:t="sm",showLabel:n=!1}){const r=cD(e);return y.jsxs("span",{className:`step-badge step-badge-${e} step-badge-${t}`,title:r.description,children:[y.jsx("span",{className:"step-badge-icon",children:r.icon}),n?y.jsx("span",{className:"step-badge-label",children:r.label}):null]})}function JN({step:e,interval:t,playbackState:n,selected:r,onSelect:i,variant:s="base",diffStatus:o,disabled:a=!1,laneHeight:l=140}){var b,_,C,k,T,M;const u=QN(e),c=((b=e.preview)==null?void 0:b.subtitle)??((_=e.preview)==null?void 0:_.title)??"",d=((C=e.preview)==null?void 0:C.outputPreview)??((k=e.preview)==null?void 0:k.inputPreview)??"",f=o?`step-diff-${o}`:"",h=s==="ghost"?"step-ghost":"",g=t.wPct<8?"step-compact":"",p=e.type.replace("_"," ").toUpperCase(),x=((T=e.metrics)==null?void 0:T.tokensTotal)!=null?`${e.metrics.tokensTotal} tokens`:null,m=e.durationMs!=null?`${e.durationMs}ms`:null,v=[x,m,u].filter(Boolean).join("  "),w=`Click to inspect inputs/outputs and replay from this moment.${v?` ${v}.`:""}`;return y.jsxs("button",{type:"button",className:`step-card step-${e.type} step-${n} ${r?"step-selected":""} ${f} ${h} ${g}`,"data-step-id":e.id,"aria-label":`${e.name} (${e.type})`,"aria-pressed":r,"aria-hidden":s==="ghost",disabled:a,"data-help":!0,"data-help-title":`${e.name}  ${p}`,"data-help-body":w,"data-help-placement":"top",style:{left:`${t.xPct}%`,width:`${t.wPct}%`,top:`${t.lane*l}px`},onClick:()=>{a||i(e.id)},children:[y.jsxs("div",{className:"step-card-header",children:[y.jsxs("div",{className:"step-title-group",children:[y.jsx(Vv,{type:e.type}),y.jsx("span",{className:"step-title",children:e.name})]}),y.jsx("span",{className:`status-pill status-${e.status}`,children:e.status})]}),c?y.jsx("div",{className:"step-subtitle",children:c}):null,y.jsxs("div",{className:"step-metrics",children:[((M=e.metrics)==null?void 0:M.tokensTotal)!=null?y.jsxs("span",{children:[e.metrics.tokensTotal," tok"]}):null,e.durationMs!=null?y.jsxs("span",{children:[e.durationMs,"ms"]}):null,u?y.jsx("span",{children:u}):null]}),d?y.jsx("div",{className:"step-preview",children:d}):null]})}function eM(e,t){return t<e.startMs?"future":t>e.endMs?"past":"active"}const dD=140,fD=132,hD=96,hw={llm_call:1,tool_call:2,decision:3,handoff:4,guardrail:5};function tM(e){return[...e].sort((t,n)=>(hw[t.type]??9)-(hw[n.type]??9))}function ly({trace:e,steps:t,selectedStepId:n,onSelectStep:r,playheadPct:i,playheadMs:s,windowRange:o,ghostTrace:a,diff:l,laneHeight:u=dD,cardHeight:c=fD,compactHeight:d=hD}){const{intervals:f,laneCount:h}=Nu(e.startedAt,e.endedAt,t),g=new Map(f.map(k=>[k.stepId,k])),p=tM(t),x=e.metadata.wallTimeMs||1,m=new Set((l==null?void 0:l.removedSteps)??[]),v=new Set((l==null?void 0:l.changedSteps)??[]),w=new Set(((l==null?void 0:l.changedPairs)??[]).map(k=>k.rightId)),b=new Set((l==null?void 0:l.addedSteps)??[]);let _=f;if(o){const k=o.endMs-o.startMs,T=Math.max(1e3,k*.15),M=Math.max(0,o.startMs-T),R=o.endMs+T;if(_=f.filter(I=>I.endMs>=M&&I.startMs<=R),n&&!_.some(I=>I.stepId===n)){const I=g.get(n);I&&(_=[..._,I])}}const C=new Set(_.map(k=>k.stepId));return y.jsx("div",{className:"timeline",style:{"--step-card-height":`${c}px`,"--step-compact-height":`${d}px`},children:y.jsxs("div",{className:"timeline-grid",style:{height:`${h*u}px`},"data-help":!0,"data-help-title":"Timeline lanes","data-help-body":"Each lane stacks overlapping steps; width reflects duration.","data-help-placement":"top",children:[y.jsx("div",{className:"playback-cursor",style:{left:`${i}%`}}),p.filter(k=>C.has(k.id)).map(k=>{const T=g.get(k.id);if(!T)return null;const M=eM(T,s);return y.jsx(JN,{step:k,interval:T,playbackState:M,selected:n===k.id,diffStatus:m.has(k.id)?"removed":v.has(k.id)?"changed":null,laneHeight:u,onSelect:r},k.id)}),a?y.jsx(pD,{ghostTrace:a,baseWallTimeMs:x,playheadMs:s,windowRange:o,diffAdded:b,diffChanged:w,laneHeight:u}):null]})})}function pD({ghostTrace:e,baseWallTimeMs:t,playheadMs:n,windowRange:r,diffAdded:i,diffChanged:s,laneHeight:o}){const{intervals:a,laneCount:l}=Nu(e.startedAt,e.endedAt,e.steps),u=new Map(a.map(p=>[p.stepId,p])),c=e.metadata.wallTimeMs||1,d=n/t*c;let f=a;if(r){const p=r.endMs-r.startMs,x=Math.max(1e3,p*.15),m=c/t,v=Math.max(0,(r.startMs-x)*m),w=Math.min(c,(r.endMs+x)*m);f=a.filter(b=>b.endMs>=v&&b.startMs<=w)}const h=new Set(f.map(p=>p.stepId)),g=tM(e.steps);return y.jsxs(y.Fragment,{children:[y.jsx("div",{className:"ghost-lanes",style:{height:`${l*o}px`}}),g.filter(p=>h.has(p.id)).map(p=>{const x=u.get(p.id);if(!x)return null;const m=eM(x,d),v=i.has(p.id)?"added":s.has(p.id)?"changed":null;return y.jsx(JN,{step:p,interval:x,playbackState:m,selected:!1,diffStatus:v,variant:"ghost",disabled:!0,laneHeight:o,onSelect:()=>{}},`ghost-${p.id}`)})]})}function mD({trace:e,steps:t,selectedStepId:n,onSelectStep:r,playheadMs:i,windowRange:s,timing:o,ghostTrace:a,diff:l}){const u=e.metadata.wallTimeMs||1,c=Math.min(100,Math.max(0,i/u*100));return y.jsxs("section",{className:"cinema-mode","aria-label":"Cinema mode",children:[o!=null&&o.degraded?y.jsxs("div",{className:"timing-banner",title:o.issues.join(" "),children:["Timing degraded: ",o.issues[0]??"Check timestamps."]}):null,y.jsx(ly,{trace:e,steps:t,selectedStepId:n,onSelectStep:r,playheadPct:c,playheadMs:i,windowRange:s,ghostTrace:a,diff:l})]})}const gD=[.5,1,1.5,2,4];function pw({playheadMs:e,wallTimeMs:t,isPlaying:n,speed:r,onToggle:i,onScrub:s,onSpeedChange:o}){const a=l=>{s(Number(l.target.value))};return y.jsxs("div",{className:"playback-controls",children:[y.jsx("button",{className:"ghost-button",type:"button",onClick:i,"aria-label":n?"Pause playback":"Play playback","data-help":!0,"data-help-title":"Playhead","data-help-body":"Start or pause the run to experience timing as it unfolded.","data-help-placement":"bottom",children:n?"Pause":"Play"}),y.jsx("input",{className:"playback-slider",type:"range",min:0,max:t,value:e,"aria-label":"Playback position",onChange:a,"data-help":!0,"data-help-title":"Scrub timeline","data-help-body":"Drag to jump to any moment in the run.","data-help-placement":"bottom"}),y.jsx("select",{className:"playback-speed",value:r,"aria-label":"Playback speed",onChange:l=>o(Number(l.target.value)),"data-help":!0,"data-help-title":"Speed","data-help-body":"Slow down to inspect or speed up to skim.","data-help-placement":"bottom",children:gD.map(l=>y.jsxs("option",{value:l,children:[l,"x"]},l))})]})}function yD(e,t,n,r=60){const{wallTimeMs:i,intervals:s}=Nu(e,t,n),o=new Array(r).fill(0);if(!i)return{buckets:o,wallTimeMs:0};const a=i/r;return!Number.isFinite(a)||a<=0?{buckets:o,wallTimeMs:i}:(s.forEach(l=>{const u=Math.max(0,Math.floor(l.startMs/a)),c=Math.min(r-1,Math.floor(l.endMs/a));for(let d=u;d<=c;d+=1)o[d]+=1}),{buckets:o,wallTimeMs:i})}const $s=5e3;function mw(e,t,n){return Math.min(n,Math.max(t,e))}function vD({traceStart:e,traceEnd:t,steps:n,playheadMs:r,windowRange:i,windowed:s,spanMs:o,onSpanChange:a,onToggleWindowed:l,onScrub:u}){const{buckets:c,wallTimeMs:d}=yD(e,t,n,64),f=Math.max(1,...c),h=mw(o,$s,Math.max($s,d)),g=(i==null?void 0:i.startMs)??0,p=(i==null?void 0:i.endMs)??d,x=d?g/d*100:0,m=d?(p-g)/d*100:100,v=d?r/d*100:0,w=b=>{const _=b.currentTarget.getBoundingClientRect(),C=(b.clientX-_.left)/_.width,k=mw(Math.round(C*d),0,d);u(k)};return y.jsxs("div",{className:"mini-timeline",children:[y.jsxs("div",{className:"mini-track",onClick:w,role:"presentation","data-help":!0,"data-help-title":"Density map","data-help-body":"A compact view of activity density. Click to jump the playhead.","data-help-placement":"top",children:[y.jsx("div",{className:"mini-bars",children:c.map((b,_)=>y.jsx("span",{className:"mini-bar",style:{height:`${b/f*100}%`}},`bucket-${_}`))}),y.jsx("div",{className:"mini-window",style:{left:`${x}%`,width:`${m}%`,opacity:s?1:.4}}),y.jsx("div",{className:"mini-playhead",style:{left:`${v}%`}})]}),y.jsxs("div",{className:"mini-controls",children:[y.jsx("label",{className:"mini-label",children:"Zoom"}),y.jsx("input",{type:"range",min:$s,max:Math.max($s,d),value:h,"aria-label":"Timeline zoom",onChange:b=>{l(!0),a(Number(b.target.value))},"data-help":!0,"data-help-title":"Zoom window","data-help-body":"Tighten the window to focus on hotspots.","data-help-placement":"top"}),y.jsx("button",{className:"ghost-button",type:"button",onClick:()=>l(!s),title:"Toggle windowed playback",children:s?"Full":"Window"}),y.jsx("button",{className:"ghost-button",type:"button",title:"Reset zoom",onClick:()=>{l(!0),a(Math.min(Math.max(d*.2,$s),6e4))},children:"Reset"})]})]})}const xD=[{keys:"Space",action:"Play / pause"},{keys:" / ",action:"Step boundary back / forward"},{keys:"Shift +  / ",action:"Jump to start / end"},{keys:"F",action:"Toggle Flow mode"},{keys:"I",action:"Toggle Inspector"},{keys:"S",action:"Story mode"},{keys:"E",action:"Explain mode"},{keys:"T",action:"Start tour"},{keys:"Cmd/Ctrl + K",action:"Open command palette"},{keys:"?",action:"Show shortcuts"},{keys:"Esc",action:"Close modal / inspector"}];function wD({open:e,onClose:t}){const n=S.useRef(null);if(S.useEffect(()=>{var i;e&&((i=n.current)==null||i.focus())},[e]),!e)return null;const r=i=>{var l;if(i.key==="Escape"){i.preventDefault(),t();return}if(i.key!=="Tab")return;const s=Array.from(i.currentTarget.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'));if(s.length===0)return;const o=s.indexOf(document.activeElement),a=i.shiftKey?o<=0?s.length-1:o-1:(o+1)%s.length;(l=s[a])==null||l.focus(),i.preventDefault()};return y.jsx("div",{className:"modal-backdrop",role:"dialog","aria-modal":"true","aria-labelledby":"shortcuts-title",onKeyDown:r,children:y.jsxs("div",{className:"modal",tabIndex:-1,children:[y.jsxs("div",{className:"modal-header",children:[y.jsx("div",{className:"modal-title",id:"shortcuts-title",children:"Keyboard Shortcuts"}),y.jsx("button",{className:"ghost-button",type:"button",onClick:t,ref:n,"aria-label":"Close shortcuts",children:"Close"})]}),y.jsx("div",{className:"modal-body",children:xD.map(i=>y.jsxs("div",{className:"modal-row",children:[y.jsx("span",{className:"modal-keys",children:i.keys}),y.jsx("span",{className:"modal-action",children:i.action})]},i.keys))})]})})}const bD=e=>e.trim().toLowerCase();function SD(e){const t=new Map;return e.forEach(n=>{var i;const r=n.group??"General";t.has(r)||t.set(r,[]),(i=t.get(r))==null||i.push(n)}),t}function gw(e,t,n){var i;if(!e.length)return 0;let r=t;for(let s=0;s<e.length;s+=1)if(r=(r+n+e.length)%e.length,!((i=e[r])!=null&&i.disabled))return r;return t}function _D({open:e,onClose:t,actions:n}){var p,x;const[r,i]=S.useState(""),[s,o]=S.useState(0),a=S.useRef(null),l=S.useRef(null),u=S.useMemo(()=>{const m=bD(r);return m?n.filter(v=>[v.label,v.description,v.group,v.keys].filter(Boolean).join(" ").toLowerCase().includes(m)):n},[n,r]),c=S.useMemo(()=>SD(u),[u]);if(S.useEffect(()=>{if(!e)return;i(""),o(0);const m=window.setTimeout(()=>{var v;return(v=a.current)==null?void 0:v.focus()},0);return()=>window.clearTimeout(m)},[e]),S.useEffect(()=>{s>=u.length&&o(0)},[s,u.length]),!e)return null;const d=m=>{m.disabled||(m.onTrigger(),t())},f=m=>{var v,w;if(m.key==="Escape"){m.preventDefault(),t();return}if(m.key==="ArrowDown"){m.preventDefault(),o(b=>gw(u,b,1));return}if(m.key==="ArrowUp"){m.preventDefault(),o(b=>gw(u,b,-1));return}if(m.key==="Enter"){m.preventDefault();const b=u[s];b&&d(b);return}if(m.key==="Tab"){const b=Array.from(((v=l.current)==null?void 0:v.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'))??[]);if(!b.length)return;const _=b.indexOf(document.activeElement),C=m.shiftKey?_<=0?b.length-1:_-1:(_+1)%b.length;(w=b[C])==null||w.focus(),m.preventDefault()}},h=(p=u[s])!=null&&p.id?`palette-option-${(x=u[s])==null?void 0:x.id}`:void 0;let g=-1;return y.jsx("div",{className:"modal-backdrop palette-backdrop",role:"dialog","aria-modal":"true","aria-label":"Command palette",onKeyDown:f,onMouseDown:m=>{m.target===m.currentTarget&&t()},children:y.jsxs("div",{className:"palette",ref:l,children:[y.jsxs("div",{className:"palette-header",children:[y.jsxs("div",{children:[y.jsx("div",{className:"palette-title",children:"Command palette"}),y.jsx("div",{className:"palette-subtitle",children:"Search actions, modes, and playbook steps."})]}),y.jsx("button",{className:"ghost-button",type:"button",onClick:t,"aria-label":"Close command palette",children:"Close"})]}),y.jsx("input",{ref:a,className:"palette-input",value:r,onChange:m=>i(m.target.value),placeholder:"Type to filter actions","aria-label":"Search commands",role:"combobox","aria-expanded":"true","aria-controls":"command-palette-list","aria-activedescendant":h,"aria-autocomplete":"list"}),y.jsxs("div",{className:"palette-list",role:"listbox",id:"command-palette-list",children:[u.length===0?y.jsx("div",{className:"palette-empty",children:"No matching commands."}):null,Array.from(c.entries()).map(([m,v])=>y.jsxs("div",{className:"palette-group",children:[y.jsx("div",{className:"palette-group-title",children:m}),y.jsx("div",{className:"palette-group-list",children:v.map(w=>{g+=1;const b=g===s;return y.jsxs("button",{id:`palette-option-${w.id}`,className:`palette-item ${b?"active":""}`,type:"button",role:"option","aria-selected":b,onMouseEnter:()=>o(g),onClick:()=>d(w),disabled:w.disabled,children:[y.jsxs("div",{className:"palette-item-main",children:[y.jsx("div",{className:"palette-item-title",children:w.label}),w.description?y.jsx("div",{className:"palette-item-description",children:w.description}):null]}),w.keys?y.jsx("div",{className:"palette-item-keys",children:w.keys}):null]},w.id)})})]},m))]})]})})}function ED(e){return e.length?e.reduce((t,n)=>(n.durationMs??0)>(t.durationMs??0)?n:t,e[0]):null}function CD({trace:e,mode:t,playheadMs:n,selectedStepId:r,compareTrace:i,collapsed:s,onToggleCollapsed:o,onModeChange:a,onSelectStep:l,onJumpToBottleneck:u,onReplay:c,onStartTour:d}){var T;const f=e.steps??[],h=ED(f),g=r??(h==null?void 0:h.id)??((T=f[0])==null?void 0:T.id)??null,p=t==="cinema"||n>0,x=!!r,m=!!i,v=[p,x,m].filter(Boolean).length,w=[p,x,m].findIndex(M=>!M),b=w===-1?2:w,_=[0,1,2].map(M=>[p,x,m][M]?"done":M===b?"active":"next"),C=[{id:"observe",title:"Act I: Observe",summary:"Scrub the timeline to feel the pacing, bottlenecks, and tool choreography.",status:_[0],actionLabel:"Enter cinema",action:()=>a("cinema"),tasks:[{label:"Scrub the timeline",done:n>0},{label:"Stay in Cinema mode",done:t==="cinema"}]},{id:"inspect",title:"Act II: Inspect",summary:"Open the most expensive or failed step and read the payload with context.",status:_[1],actionLabel:h?"Jump to bottleneck":"Select first step",action:()=>{if(r){a("cinema");return}if(h){u();return}g&&(l(g),a("cinema"))},disabled:!g,tasks:[{label:"Open the Inspector",done:!!r},{label:"Jump to the bottleneck",done:!!(h&&r===h.id)}]},{id:"direct",title:"Act III: Direct",summary:"Replay from a decisive step, then compare flows and diffs side-by-side.",status:_[2],actionLabel:i?"Open compare":"Replay from step",action:()=>{if(i){a("compare");return}g&&c(g)},disabled:!g,tasks:[{label:"Replay from a step",done:!!i},{label:"Compare runs side-by-side",done:!!(i&&t==="compare")}]}],k=C[b];return s?y.jsxs("section",{className:"journey-panel journey-collapsed","aria-label":"Director journey","data-help":!0,"data-help-indicator":!0,"data-tour":"journey","data-help-title":"Director journey","data-help-body":"A guided path from observation to replay. Use it to show newcomers what to do first.","data-help-placement":"bottom",children:[y.jsxs("div",{className:"journey-collapsed-main",children:[y.jsx("div",{className:"journey-eyebrow",children:"Director journey"}),y.jsx("div",{className:"journey-collapsed-title",children:"From observe to direct"})]}),y.jsxs("div",{className:"journey-collapsed-actions",children:[y.jsxs("span",{className:"journey-progress-text",children:[v,"/3 complete"]}),k?y.jsxs("button",{className:"primary-button journey-next",type:"button",onClick:k.action,disabled:k.disabled,children:["Next: ",k.actionLabel]}):null,d?y.jsx("button",{className:"ghost-button",type:"button",onClick:d,children:"Tour"}):null,y.jsx("button",{className:"primary-button journey-expand",type:"button",onClick:o,children:"Expand"})]})]}):y.jsxs("section",{className:"journey-panel","aria-label":"Director journey","data-help":!0,"data-help-indicator":!0,"data-tour":"journey","data-help-title":"Director journey","data-help-body":"A three-act flow that teaches the story: observe, inspect, direct. Each act jumps to the right place.","data-help-placement":"bottom",children:[y.jsxs("div",{className:"journey-head",children:[y.jsxs("div",{children:[y.jsx("div",{className:"journey-eyebrow",children:"Director journey"}),y.jsx("h2",{className:"journey-title",children:"Cut a perfect take in three acts."}),y.jsx("p",{className:"journey-subtitle",children:"Trace the performance, interrogate the moment, then direct a better run."})]}),y.jsxs("div",{className:"journey-head-actions",children:[d?y.jsx("button",{className:"ghost-button",type:"button",onClick:d,children:"Start tour"}):null,y.jsx("button",{className:"ghost-button",type:"button",onClick:o,children:"Collapse"})]})]}),y.jsx("div",{className:"journey-track",children:C.map((M,R)=>{var I;return y.jsxs("div",{className:"journey-card","data-status":M.status,children:[y.jsxs("div",{className:"journey-card-top",children:[y.jsxs("span",{className:"journey-index",children:["0",R+1]}),y.jsx("span",{className:"journey-status",children:M.status})]}),y.jsx("h3",{className:"journey-card-title",children:M.title}),y.jsx("p",{className:"journey-card-body",children:M.summary}),(I=M.tasks)!=null&&I.length?y.jsx("ul",{className:"journey-tasks",children:M.tasks.map(B=>y.jsxs("li",{className:`journey-task ${B.done?"done":""}`,children:[y.jsx("span",{className:"journey-task-icon","aria-hidden":"true",children:B.done?"":""}),y.jsx("span",{children:B.label})]},B.label))}):null,y.jsx("button",{className:"primary-button journey-action",type:"button",onClick:M.action,disabled:M.disabled,children:M.actionLabel})]},M.id)})}),y.jsxs("div",{className:"journey-footer",children:[y.jsxs("div",{children:[y.jsx("div",{className:"journey-progress-label",children:"Progress"}),y.jsx("div",{className:"journey-progress",children:y.jsx("span",{className:"journey-progress-bar",style:{width:`${v/3*100}%`}})})]}),y.jsx("div",{className:"journey-footnote",children:"Tip: Use Flow to spot fan-out, Compare to validate your changes."})]})]})}function kD(e){return e.length?e.reduce((t,n)=>(n.durationMs??0)>(t.durationMs??0)?n:t,e[0]):null}function TD({trace:e,mode:t,selectedStepId:n,onModeChange:r,onSelectStep:i,onJumpToBottleneck:s,onReplay:o}){var d;const a=e.steps??[],l=kD(a),u=n??(l==null?void 0:l.id)??((d=a[0])==null?void 0:d.id)??null,c=e.metadata.wallTimeMs??0;return y.jsxs("aside",{className:"inspector inspector-empty","data-help":!0,"data-help-indicator":!0,"data-tour":"inspector","data-help-title":"Inspector panel","data-help-body":"Select a step to open detailed payloads, redaction controls, and replay actions.","data-help-placement":"left",children:[y.jsx("div",{className:"inspector-header",children:y.jsxs("div",{children:[y.jsx("div",{className:"inspector-title",children:"Director's notes"}),y.jsx("div",{className:"inspector-subtitle",children:"Select a step to open deep inspection."})]})}),y.jsxs("div",{className:"inspector-section",children:[y.jsx("div",{className:"inspector-section-title",children:"Run summary"}),y.jsxs("div",{className:"inspector-row",children:[y.jsx("span",{children:"Steps"}),y.jsx("span",{children:a.length})]}),y.jsxs("div",{className:"inspector-row",children:[y.jsx("span",{children:"Wall time"}),y.jsxs("span",{children:[c,"ms"]})]}),y.jsxs("div",{className:"inspector-row",children:[y.jsx("span",{children:"Status"}),y.jsx("span",{children:e.status})]})]}),y.jsxs("div",{className:"inspector-section",children:[y.jsx("div",{className:"inspector-section-title",children:"Next actions"}),y.jsxs("div",{className:"director-actions",children:[y.jsx("button",{className:"primary-button",type:"button",onClick:()=>r("cinema"),"data-help":!0,"data-help-title":"Open cinema","data-help-body":"Jump straight into the timeline.","data-help-placement":"right",children:"Open cinema"}),y.jsx("button",{className:"ghost-button",type:"button",onClick:()=>r("flow"),"data-help":!0,"data-help-title":"Open flow","data-help-body":"See the dependency graph of the run.","data-help-placement":"right",children:"Switch to flow"}),y.jsx("button",{className:"ghost-button",type:"button",onClick:()=>{if(!n){if(l){s();return}u&&i(u)}},disabled:!u||!!n,"data-help":!0,"data-help-title":"Jump to bottleneck","data-help-body":"Select the slowest step for inspection.","data-help-placement":"right",children:n?"Inspector open":l?"Jump to bottleneck":"Select first step"}),y.jsx("button",{className:"ghost-button",type:"button",onClick:()=>u&&o(u),disabled:!u,"data-help":!0,"data-help-title":"Replay","data-help-body":"Branch a replay from a decisive step.","data-help-placement":"right",children:"Replay from step"})]})]}),y.jsxs("div",{className:"inspector-section",children:[y.jsx("div",{className:"inspector-section-title",children:"Mode"}),y.jsxs("div",{className:"director-modes",children:[y.jsx("button",{className:`ghost-button ${t==="cinema"?"active":""}`,type:"button",onClick:()=>r("cinema"),"data-help":!0,"data-help-title":"Cinema mode","data-help-body":"Timeline view for pacing and sequence.","data-help-placement":"right",children:"Cinema"}),y.jsx("button",{className:`ghost-button ${t==="flow"?"active":""}`,type:"button",onClick:()=>r("flow"),"data-help":!0,"data-help-title":"Flow mode","data-help-body":"Graph view for dependencies.","data-help-placement":"right",children:"Flow"}),y.jsx("button",{className:"ghost-button",type:"button",disabled:!0,children:"Compare"})]})]})]})}const Wc=(e,t,n)=>Math.min(n,Math.max(t,e));function ND({steps:e,open:t,onClose:n,onComplete:r}){const[i,s]=S.useState(0),[o,a]=S.useState(null),[l,u]=S.useState(null),c=S.useRef(null),d=S.useRef(null),f=S.useMemo(()=>e[i],[e,i]),h=S.useCallback(()=>{if(!t)return;const x=document.querySelector(f.target);if(!x){d.current=null,a(null);return}d.current=x;const m=x.getBoundingClientRect();a(m)},[t,f.target]),g=S.useCallback(()=>{if(!o||!c.current){u(null);return}const x=c.current.offsetWidth,m=c.current.offsetHeight,v=16;let w=Wc(o.left+o.width/2-x/2,v,window.innerWidth-x-v),b=o.bottom+16;f.placement==="top"&&(b=o.top-m-16),f.placement==="left"&&(w=o.left-x-16,b=o.top+o.height/2-m/2),f.placement==="right"&&(w=o.right+16,b=o.top+o.height/2-m/2),b+m>window.innerHeight-v&&(b=o.top-m-16),b<v&&(b=o.bottom+16),w=Wc(w,v,window.innerWidth-x-v),b=Wc(b,v,window.innerHeight-m-v),u({top:b,left:w})},[f.placement,o]);if(S.useEffect(()=>{t&&s(0)},[t]),S.useEffect(()=>{if(!t)return;const x=document.querySelector(f.target);x&&x.scrollIntoView({behavior:"smooth",block:"center",inline:"center"});const m=window.requestAnimationFrame(()=>h());return()=>window.cancelAnimationFrame(m)},[t,f.target,h]),S.useLayoutEffect(()=>{g()},[o,g,f.title]),S.useEffect(()=>{if(!t)return;const x=()=>{h(),g()};return window.addEventListener("resize",x),window.addEventListener("scroll",x,!0),()=>{window.removeEventListener("resize",x),window.removeEventListener("scroll",x,!0)}},[t,h,g]),!t||!f)return null;const p=o?{top:o.top-6,left:o.left-6,width:o.width+12,height:o.height+12}:void 0;return y.jsxs("div",{className:"tour-overlay",role:"dialog","aria-modal":"true","aria-label":"Guided tour",children:[y.jsx("div",{className:"tour-backdrop",onClick:n}),o?y.jsx("div",{className:"tour-spotlight",style:p}):null,y.jsxs("div",{className:`tour-card ${l?"tour-card-anchored":""}`,ref:c,style:l??void 0,children:[y.jsxs("div",{className:"tour-step",children:["Step ",i+1," of ",e.length]}),y.jsx("div",{className:"tour-title",children:f.title}),y.jsx("p",{className:"tour-body",children:f.body}),y.jsxs("div",{className:"tour-actions",children:[y.jsx("button",{className:"ghost-button",type:"button",onClick:()=>s(x=>Math.max(0,x-1)),disabled:i===0,children:"Back"}),y.jsx("button",{className:"ghost-button",type:"button",onClick:n,children:"Skip"}),i===e.length-1?y.jsx("button",{className:"primary-button",type:"button",onClick:r,children:"Finish tour"}):y.jsx("button",{className:"primary-button",type:"button",onClick:()=>s(x=>x+1),children:"Next"})]})]})]})}const yw=(e,t,n)=>Math.min(n,Math.max(t,e));function MD({enabled:e}){const[t,n]=S.useState(null),[r,i]=S.useState(null),s=S.useRef(null),o=S.useRef(null),a=S.useCallback(()=>{const u=s.current;if(!u){n(null);return}const c=u.getBoundingClientRect(),d=u.dataset.helpTitle??"Context",f=u.dataset.helpBody??"",h=u.dataset.helpPlacement??"right";n({rect:c,title:d,body:f,placement:h})},[]);S.useEffect(()=>{if(!e){s.current=null,n(null);return}const u=g=>{var x,m;const p=(m=(x=g.target)==null?void 0:x.closest)==null?void 0:m.call(x,"[data-help]");if(!p){s.current||n(null);return}s.current!==p&&(s.current=p,a())},c=g=>{var x,m;const p=(m=(x=g.target)==null?void 0:x.closest)==null?void 0:m.call(x,"[data-help]");p&&(s.current=p,a())},d=g=>{var x;const p=g.relatedTarget;(x=p==null?void 0:p.closest)!=null&&x.call(p,"[data-help]")||(s.current=null,n(null))},f=g=>{var x,m;const p=(m=(x=g.target)==null?void 0:x.closest)==null?void 0:m.call(x,"[data-help]");if(!p){s.current=null,n(null);return}s.current=p,a()},h=()=>{s.current&&a()};return window.addEventListener("mousemove",u),window.addEventListener("focusin",c),window.addEventListener("focusout",d),window.addEventListener("pointerdown",f),window.addEventListener("scroll",h,!0),window.addEventListener("resize",h),()=>{window.removeEventListener("mousemove",u),window.removeEventListener("focusin",c),window.removeEventListener("focusout",d),window.removeEventListener("pointerdown",f),window.removeEventListener("scroll",h,!0),window.removeEventListener("resize",h)}},[e,a]);const l=S.useCallback(()=>{if(!t||!o.current){i(null);return}const u=12,c=o.current.offsetWidth,d=o.current.offsetHeight,{rect:f,placement:h}=t;let g=f.right+16,p=f.top+f.height/2-d/2;h==="left"&&(g=f.left-c-16,p=f.top+f.height/2-d/2),h==="top"&&(g=f.left+f.width/2-c/2,p=f.top-d-16),h==="bottom"&&(g=f.left+f.width/2-c/2,p=f.bottom+16),g=yw(g,u,window.innerWidth-c-u),p=yw(p,u,window.innerHeight-d-u),i({left:g,top:p})},[t]);return S.useLayoutEffect(()=>{l()},[l]),!e||!t?null:y.jsxs("div",{className:"help-overlay","aria-hidden":"true",children:[y.jsx("div",{className:"help-highlight",style:{top:t.rect.top-6,left:t.rect.left-6,width:t.rect.width+12,height:t.rect.height+12}}),y.jsxs("div",{className:"help-bubble",ref:o,style:r??void 0,"data-placement":t.placement,children:[y.jsx("div",{className:"help-title",children:t.title}),y.jsx("div",{className:"help-body",children:t.body})]})]})}const AD=2800;function RD({onComplete:e,onStartTour:t,onStartStory:n}){S.useEffect(()=>{const s=window.setTimeout(()=>e(),AD);return()=>window.clearTimeout(s)},[e]);const r=()=>{t==null||t(),e()},i=()=>{n==null||n(),e()};return y.jsx("div",{className:"intro-overlay",role:"dialog","aria-modal":"true","aria-label":"Agent Director intro",children:y.jsxs("div",{className:"intro-card",children:[y.jsx("div",{className:"intro-scan"}),y.jsx("div",{className:"intro-title",children:"Agent Director"}),y.jsx("div",{className:"intro-tagline",children:"Watch your agent think. Then direct it."}),y.jsxs("div",{className:"intro-steps",children:[y.jsxs("div",{className:"intro-step",children:[y.jsx("div",{className:"intro-step-label",children:"Observe"}),y.jsx("div",{className:"intro-step-body",children:"Scrub the timeline to feel pacing and parallelism."})]}),y.jsxs("div",{className:"intro-step",children:[y.jsx("div",{className:"intro-step-label",children:"Inspect"}),y.jsx("div",{className:"intro-step-body",children:"Open the bottleneck to read payloads and costs."})]}),y.jsxs("div",{className:"intro-step",children:[y.jsx("div",{className:"intro-step-label",children:"Direct"}),y.jsx("div",{className:"intro-step-body",children:"Replay from a decisive step and compare runs."})]})]}),y.jsxs("div",{className:"intro-grid",children:[y.jsx("span",{}),y.jsx("span",{}),y.jsx("span",{}),y.jsx("span",{})]}),y.jsxs("div",{className:"intro-actions",children:[y.jsx("button",{className:"primary-button",type:"button",onClick:r,children:"Start guided tour"}),n?y.jsx("button",{className:"ghost-button",type:"button",onClick:i,children:"Play story mode"}):null,y.jsx("button",{className:"ghost-button",type:"button",onClick:e,children:"Skip intro"})]})]})})}function PD({explainMode:e,storyActive:t,onStartTour:n,onStartStory:r,onToggleExplain:i,onDismiss:s}){return y.jsxs("section",{className:"hero-ribbon","aria-label":"Director briefing","data-help":!0,"data-help-indicator":!0,"data-tour":"hero","data-help-title":"Director briefing","data-help-body":"Start the tour, play story mode, or enable explain to learn the interface instantly.","data-help-placement":"bottom",children:[y.jsxs("div",{className:"hero-ribbon-top",children:[y.jsx("span",{className:"hero-eyebrow",children:"Director briefing"}),y.jsx("button",{className:"ghost-button hero-dismiss",type:"button",onClick:s,children:"Dismiss"})]}),y.jsx("div",{className:"hero-title",children:"Observe. Inspect. Direct."}),y.jsx("div",{className:"hero-subtitle",children:"A cinematic control room for agent traces. See time, read structure, then replay with confidence."}),y.jsxs("div",{className:"hero-pills",children:[y.jsx("span",{className:"hero-pill","data-tone":"observe",children:"Observe"}),y.jsx("span",{className:"hero-pill","data-tone":"inspect",children:"Inspect"}),y.jsx("span",{className:"hero-pill","data-tone":"direct",children:"Direct"})]}),y.jsxs("div",{className:"hero-actions",children:[y.jsx("button",{className:"primary-button",type:"button",onClick:n,children:"Start guided tour"}),y.jsx("button",{className:"ghost-button",type:"button",onClick:r,disabled:t,children:t?"Story running":"Play story mode"}),y.jsxs("button",{className:`ghost-button ${e?"active":""}`,type:"button",onClick:i,"aria-pressed":e,children:["Explain ",e?"On":"Off"]})]})]})}function ID({mode:e,isPlaying:t,storyActive:n,explainMode:r,hidden:i=!1,open:s,onToggleOpen:o,onTogglePlay:a,onStartStory:l,onStopStory:u,onStartTour:c,onOpenPalette:d,onShowShortcuts:f,onToggleExplain:h,onJumpToBottleneck:g}){if(i)return null;const p=t?"Pause":"Play",x=n?"Stop story":"Story mode";return s?y.jsxs("aside",{className:"quick-actions","aria-label":"Quick actions","data-help":!0,"data-help-indicator":!0,"data-tour":"quick-actions","data-help-title":"Quick actions","data-help-body":"Launch story mode, open the command palette, or jump to the bottleneck instantly.","data-help-placement":"left",children:[y.jsxs("div",{className:"quick-actions-header",children:[y.jsxs("div",{children:[y.jsx("div",{className:"quick-actions-title",children:"Quick actions"}),y.jsx("div",{className:"quick-actions-subtitle",children:"Pin demo controls close at hand."})]}),y.jsx("button",{className:"ghost-button",type:"button",onClick:o,"aria-label":"Collapse quick actions",children:"Collapse"})]}),y.jsxs("button",{className:`quick-action ${t?"active":""}`,type:"button",onClick:a,"aria-label":p,"data-help":!0,"data-help-title":"Play or pause","data-help-body":"Start or stop playback from anywhere.","data-help-placement":"left",children:[y.jsx("span",{className:"quick-action-label",children:p}),y.jsx("span",{className:"quick-action-meta",children:e==="flow"?"Cinema":"Space"})]}),y.jsxs("button",{className:`quick-action ${n?"active":""}`,type:"button",onClick:n?u:l,"aria-label":x,"data-help":!0,"data-help-title":"Story mode","data-help-body":"Auto-runs a cinematic walkthrough of the run.","data-help-placement":"left",children:[y.jsx("span",{className:"quick-action-label",children:x}),y.jsx("span",{className:"quick-action-meta",children:"S"})]}),y.jsxs("button",{className:"quick-action",type:"button",onClick:d,"aria-label":"Open command palette","data-help":!0,"data-help-title":"Command palette","data-help-body":"Search every action and jump instantly.","data-help-placement":"left",children:[y.jsx("span",{className:"quick-action-label",children:"Command"}),y.jsx("span",{className:"quick-action-meta",children:"Cmd+K"})]}),y.jsxs("button",{className:"quick-action",type:"button",onClick:c,"aria-label":"Start guided tour","data-help":!0,"data-help-title":"Guided tour","data-help-body":"Walk the interface with a curated tour.","data-help-placement":"left",children:[y.jsx("span",{className:"quick-action-label",children:"Tour"}),y.jsx("span",{className:"quick-action-meta",children:"Guide"})]}),y.jsxs("button",{className:`quick-action ${r?"active":""}`,type:"button",onClick:h,"aria-label":"Toggle explain mode","data-help":!0,"data-help-title":"Explain mode","data-help-body":"Toggle contextual overlays for every control.","data-help-placement":"left",children:[y.jsx("span",{className:"quick-action-label",children:"Explain"}),y.jsx("span",{className:"quick-action-meta",children:r?"On":"Off"})]}),y.jsxs("button",{className:"quick-action",type:"button",onClick:g,"aria-label":"Jump to bottleneck","data-help":!0,"data-help-title":"Bottleneck jump","data-help-body":"Focus instantly on the slowest step.","data-help-placement":"left",children:[y.jsx("span",{className:"quick-action-label",children:"Bottleneck"}),y.jsx("span",{className:"quick-action-meta",children:"Latency"})]}),y.jsxs("button",{className:"quick-action",type:"button",onClick:f,"aria-label":"Show shortcuts","data-help":!0,"data-help-title":"Shortcuts","data-help-body":"See the full keyboard map.","data-help-placement":"left",children:[y.jsx("span",{className:"quick-action-label",children:"Shortcuts"}),y.jsx("span",{className:"quick-action-meta",children:"?"})]})]}):y.jsxs("button",{className:"quick-actions-toggle",type:"button",onClick:o,"aria-label":"Open quick actions","aria-expanded":"false","data-help":!0,"data-tour":"quick-actions","data-help-title":"Quick actions","data-help-body":"Open the dock to access demos, shortcuts, and instant actions.","data-help-placement":"left",children:[y.jsx("span",{className:"quick-actions-toggle-label",children:"Actions"}),y.jsx("span",{className:"quick-actions-toggle-meta",children:"Dock"})]})}function jD({active:e,label:t,step:n,total:r,onStop:i,onRestart:s}){if(!e)return null;const o=r>0?(n+1)/r*100:0;return y.jsxs("div",{className:"story-banner",role:"status","aria-live":"polite",children:[y.jsxs("div",{className:"story-banner-main",children:[y.jsx("div",{className:"story-banner-title",children:"Story mode"}),y.jsx("div",{className:"story-banner-step",children:t})]}),y.jsxs("div",{className:"story-banner-actions",children:[y.jsxs("span",{className:"story-banner-count",children:[Math.min(n+1,r),"/",r]}),y.jsx("button",{className:"ghost-button",type:"button",onClick:s,children:"Restart"}),y.jsx("button",{className:"primary-button",type:"button",onClick:i,children:"Stop"})]}),y.jsx("div",{className:"story-banner-progress",children:y.jsx("span",{style:{width:`${o}%`}})})]})}function ot(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let n=0,r;n<e.length;n++)(r=ot(e[n]))!==""&&(t+=(t&&" ")+r);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}var nM={exports:{}},rM={},iM={exports:{}},sM={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fs=S;function DD(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var LD=typeof Object.is=="function"?Object.is:DD,OD=fs.useState,qD=fs.useEffect,$D=fs.useLayoutEffect,FD=fs.useDebugValue;function VD(e,t){var n=t(),r=OD({inst:{value:n,getSnapshot:t}}),i=r[0].inst,s=r[1];return $D(function(){i.value=n,i.getSnapshot=t,Kc(i)&&s({inst:i})},[e,n,t]),qD(function(){return Kc(i)&&s({inst:i}),e(function(){Kc(i)&&s({inst:i})})},[e]),FD(n),n}function Kc(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!LD(e,n)}catch{return!0}}function BD(e,t){return t()}var zD=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?BD:VD;sM.useSyncExternalStore=fs.useSyncExternalStore!==void 0?fs.useSyncExternalStore:zD;iM.exports=sM;var UD=iM.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mu=S,HD=UD;function GD(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var WD=typeof Object.is=="function"?Object.is:GD,KD=HD.useSyncExternalStore,YD=Mu.useRef,XD=Mu.useEffect,ZD=Mu.useMemo,QD=Mu.useDebugValue;rM.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var s=YD(null);if(s.current===null){var o={hasValue:!1,value:null};s.current=o}else o=s.current;s=ZD(function(){function l(h){if(!u){if(u=!0,c=h,h=r(h),i!==void 0&&o.hasValue){var g=o.value;if(i(g,h))return d=g}return d=h}if(g=d,WD(c,h))return g;var p=r(h);return i!==void 0&&i(g,p)?(c=h,g):(c=h,d=p)}var u=!1,c,d,f=n===void 0?null:n;return[function(){return l(t())},f===null?void 0:function(){return l(f())}]},[t,n,r,i]);var a=KD(e,s[0],s[1]);return XD(function(){o.hasValue=!0,o.value=a},[a]),QD(a),a};nM.exports=rM;var JD=nM.exports;const eL=Gy(JD),tL={},vw=e=>{let t;const n=new Set,r=(c,d)=>{const f=typeof c=="function"?c(t):c;if(!Object.is(f,t)){const h=t;t=d??(typeof f!="object"||f===null)?f:Object.assign({},t,f),n.forEach(g=>g(t,h))}},i=()=>t,l={setState:r,getState:i,getInitialState:()=>u,subscribe:c=>(n.add(c),()=>n.delete(c)),destroy:()=>{(tL?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},u=t=e(r,i,l);return l},nL=e=>e?vw(e):vw,{useDebugValue:rL}=q,{useSyncExternalStoreWithSelector:iL}=eL,sL=e=>e;function oM(e,t=sL,n){const r=iL(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return rL(r),r}const xw=(e,t)=>{const n=nL(e),r=(i,s=t)=>oM(n,i,s);return Object.assign(r,n),r},oL=(e,t)=>e?xw(e,t):xw;function et(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[r,i]of e)if(!Object.is(i,t.get(r)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const r of n)if(!Object.prototype.hasOwnProperty.call(t,r)||!Object.is(e[r],t[r]))return!1;return!0}var aL={value:()=>{}};function Au(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new hl(n)}function hl(e){this._=e}function lL(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}hl.prototype=Au.prototype={constructor:hl,on:function(e,t){var n=this._,r=lL(e+"",n),i,s=-1,o=r.length;if(arguments.length<2){for(;++s<o;)if((i=(e=r[s]).type)&&(i=uL(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<o;)if(i=(e=r[s]).type)n[i]=ww(n[i],e.name,t);else if(t==null)for(i in n)n[i]=ww(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new hl(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,s;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],r=0,i=s.length;r<i;++r)s[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,s=r.length;i<s;++i)r[i].value.apply(t,n)}};function uL(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function ww(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=aL,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var uy="http://www.w3.org/1999/xhtml";const bw={svg:"http://www.w3.org/2000/svg",xhtml:uy,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Ru(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),bw.hasOwnProperty(t)?{space:bw[t],local:e}:e}function cL(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===uy&&t.documentElement.namespaceURI===uy?t.createElement(e):t.createElementNS(n,e)}}function dL(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function aM(e){var t=Ru(e);return(t.local?dL:cL)(t)}function fL(){}function Bv(e){return e==null?fL:function(){return this.querySelector(e)}}function hL(e){typeof e!="function"&&(e=Bv(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=new Array(o),l,u,c=0;c<o;++c)(l=s[c])&&(u=e.call(l,l.__data__,c,s))&&("__data__"in l&&(u.__data__=l.__data__),a[c]=u);return new Ot(r,this._parents)}function pL(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function mL(){return[]}function lM(e){return e==null?mL:function(){return this.querySelectorAll(e)}}function gL(e){return function(){return pL(e.apply(this,arguments))}}function yL(e){typeof e=="function"?e=gL(e):e=lM(e);for(var t=this._groups,n=t.length,r=[],i=[],s=0;s<n;++s)for(var o=t[s],a=o.length,l,u=0;u<a;++u)(l=o[u])&&(r.push(e.call(l,l.__data__,u,o)),i.push(l));return new Ot(r,i)}function uM(e){return function(){return this.matches(e)}}function cM(e){return function(t){return t.matches(e)}}var vL=Array.prototype.find;function xL(e){return function(){return vL.call(this.children,e)}}function wL(){return this.firstElementChild}function bL(e){return this.select(e==null?wL:xL(typeof e=="function"?e:cM(e)))}var SL=Array.prototype.filter;function _L(){return Array.from(this.children)}function EL(e){return function(){return SL.call(this.children,e)}}function CL(e){return this.selectAll(e==null?_L:EL(typeof e=="function"?e:cM(e)))}function kL(e){typeof e!="function"&&(e=uM(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=[],l,u=0;u<o;++u)(l=s[u])&&e.call(l,l.__data__,u,s)&&a.push(l);return new Ot(r,this._parents)}function dM(e){return new Array(e.length)}function TL(){return new Ot(this._enter||this._groups.map(dM),this._parents)}function Hl(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Hl.prototype={constructor:Hl,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function NL(e){return function(){return e}}function ML(e,t,n,r,i,s){for(var o=0,a,l=t.length,u=s.length;o<u;++o)(a=t[o])?(a.__data__=s[o],r[o]=a):n[o]=new Hl(e,s[o]);for(;o<l;++o)(a=t[o])&&(i[o]=a)}function AL(e,t,n,r,i,s,o){var a,l,u=new Map,c=t.length,d=s.length,f=new Array(c),h;for(a=0;a<c;++a)(l=t[a])&&(f[a]=h=o.call(l,l.__data__,a,t)+"",u.has(h)?i[a]=l:u.set(h,l));for(a=0;a<d;++a)h=o.call(e,s[a],a,s)+"",(l=u.get(h))?(r[a]=l,l.__data__=s[a],u.delete(h)):n[a]=new Hl(e,s[a]);for(a=0;a<c;++a)(l=t[a])&&u.get(f[a])===l&&(i[a]=l)}function RL(e){return e.__data__}function PL(e,t){if(!arguments.length)return Array.from(this,RL);var n=t?AL:ML,r=this._parents,i=this._groups;typeof e!="function"&&(e=NL(e));for(var s=i.length,o=new Array(s),a=new Array(s),l=new Array(s),u=0;u<s;++u){var c=r[u],d=i[u],f=d.length,h=IL(e.call(c,c&&c.__data__,u,r)),g=h.length,p=a[u]=new Array(g),x=o[u]=new Array(g),m=l[u]=new Array(f);n(c,d,p,x,m,h,t);for(var v=0,w=0,b,_;v<g;++v)if(b=p[v]){for(v>=w&&(w=v+1);!(_=x[w])&&++w<g;);b._next=_||null}}return o=new Ot(o,r),o._enter=a,o._exit=l,o}function IL(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function jL(){return new Ot(this._exit||this._groups.map(dM),this._parents)}function DL(e,t,n){var r=this.enter(),i=this,s=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?s.remove():n(s),r&&i?r.merge(i).order():i}function LL(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,s=r.length,o=Math.min(i,s),a=new Array(i),l=0;l<o;++l)for(var u=n[l],c=r[l],d=u.length,f=a[l]=new Array(d),h,g=0;g<d;++g)(h=u[g]||c[g])&&(f[g]=h);for(;l<i;++l)a[l]=n[l];return new Ot(a,this._parents)}function OL(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,s=r[i],o;--i>=0;)(o=r[i])&&(s&&o.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(o,s),s=o);return this}function qL(e){e||(e=$L);function t(d,f){return d&&f?e(d.__data__,f.__data__):!d-!f}for(var n=this._groups,r=n.length,i=new Array(r),s=0;s<r;++s){for(var o=n[s],a=o.length,l=i[s]=new Array(a),u,c=0;c<a;++c)(u=o[c])&&(l[c]=u);l.sort(t)}return new Ot(i,this._parents).order()}function $L(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function FL(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function VL(){return Array.from(this)}function BL(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length;i<s;++i){var o=r[i];if(o)return o}return null}function zL(){let e=0;for(const t of this)++e;return e}function UL(){return!this.node()}function HL(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],s=0,o=i.length,a;s<o;++s)(a=i[s])&&e.call(a,a.__data__,s,i);return this}function GL(e){return function(){this.removeAttribute(e)}}function WL(e){return function(){this.removeAttributeNS(e.space,e.local)}}function KL(e,t){return function(){this.setAttribute(e,t)}}function YL(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function XL(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function ZL(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function QL(e,t){var n=Ru(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?WL:GL:typeof t=="function"?n.local?ZL:XL:n.local?YL:KL)(n,t))}function fM(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function JL(e){return function(){this.style.removeProperty(e)}}function eO(e,t,n){return function(){this.style.setProperty(e,t,n)}}function tO(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function nO(e,t,n){return arguments.length>1?this.each((t==null?JL:typeof t=="function"?tO:eO)(e,t,n??"")):hs(this.node(),e)}function hs(e,t){return e.style.getPropertyValue(t)||fM(e).getComputedStyle(e,null).getPropertyValue(t)}function rO(e){return function(){delete this[e]}}function iO(e,t){return function(){this[e]=t}}function sO(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function oO(e,t){return arguments.length>1?this.each((t==null?rO:typeof t=="function"?sO:iO)(e,t)):this.node()[e]}function hM(e){return e.trim().split(/^|\s+/)}function zv(e){return e.classList||new pM(e)}function pM(e){this._node=e,this._names=hM(e.getAttribute("class")||"")}pM.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function mM(e,t){for(var n=zv(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function gM(e,t){for(var n=zv(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function aO(e){return function(){mM(this,e)}}function lO(e){return function(){gM(this,e)}}function uO(e,t){return function(){(t.apply(this,arguments)?mM:gM)(this,e)}}function cO(e,t){var n=hM(e+"");if(arguments.length<2){for(var r=zv(this.node()),i=-1,s=n.length;++i<s;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?uO:t?aO:lO)(n,t))}function dO(){this.textContent=""}function fO(e){return function(){this.textContent=e}}function hO(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function pO(e){return arguments.length?this.each(e==null?dO:(typeof e=="function"?hO:fO)(e)):this.node().textContent}function mO(){this.innerHTML=""}function gO(e){return function(){this.innerHTML=e}}function yO(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function vO(e){return arguments.length?this.each(e==null?mO:(typeof e=="function"?yO:gO)(e)):this.node().innerHTML}function xO(){this.nextSibling&&this.parentNode.appendChild(this)}function wO(){return this.each(xO)}function bO(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function SO(){return this.each(bO)}function _O(e){var t=typeof e=="function"?e:aM(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function EO(){return null}function CO(e,t){var n=typeof e=="function"?e:aM(e),r=t==null?EO:typeof t=="function"?t:Bv(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function kO(){var e=this.parentNode;e&&e.removeChild(this)}function TO(){return this.each(kO)}function NO(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function MO(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function AO(e){return this.select(e?MO:NO)}function RO(e){return arguments.length?this.property("__data__",e):this.node().__data__}function PO(e){return function(t){e.call(this,t,this.__data__)}}function IO(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function jO(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,s;n<i;++n)s=t[n],(!e.type||s.type===e.type)&&s.name===e.name?this.removeEventListener(s.type,s.listener,s.options):t[++r]=s;++r?t.length=r:delete this.__on}}}function DO(e,t,n){return function(){var r=this.__on,i,s=PO(t);if(r){for(var o=0,a=r.length;o<a;++o)if((i=r[o]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=s,i.options=n),i.value=t;return}}this.addEventListener(e.type,s,n),i={type:e.type,name:e.name,value:t,listener:s,options:n},r?r.push(i):this.__on=[i]}}function LO(e,t,n){var r=IO(e+""),i,s=r.length,o;if(arguments.length<2){var a=this.node().__on;if(a){for(var l=0,u=a.length,c;l<u;++l)for(i=0,c=a[l];i<s;++i)if((o=r[i]).type===c.type&&o.name===c.name)return c.value}return}for(a=t?DO:jO,i=0;i<s;++i)this.each(a(r[i],t,n));return this}function yM(e,t,n){var r=fM(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function OO(e,t){return function(){return yM(this,e,t)}}function qO(e,t){return function(){return yM(this,e,t.apply(this,arguments))}}function $O(e,t){return this.each((typeof t=="function"?qO:OO)(e,t))}function*FO(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length,o;i<s;++i)(o=r[i])&&(yield o)}var vM=[null];function Ot(e,t){this._groups=e,this._parents=t}function ia(){return new Ot([[document.documentElement]],vM)}function VO(){return this}Ot.prototype=ia.prototype={constructor:Ot,select:hL,selectAll:yL,selectChild:bL,selectChildren:CL,filter:kL,data:PL,enter:TL,exit:jL,join:DL,merge:LL,selection:VO,order:OL,sort:qL,call:FL,nodes:VL,node:BL,size:zL,empty:UL,each:HL,attr:QL,style:nO,property:oO,classed:cO,text:pO,html:vO,raise:wO,lower:SO,append:_O,insert:CO,remove:TO,clone:AO,datum:RO,on:LO,dispatch:$O,[Symbol.iterator]:FO};function Wt(e){return typeof e=="string"?new Ot([[document.querySelector(e)]],[document.documentElement]):new Ot([[e]],vM)}function BO(e){let t;for(;t=e.sourceEvent;)e=t;return e}function cn(e,t){if(e=BO(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}const zO={passive:!1},Fo={capture:!0,passive:!1};function Yc(e){e.stopImmediatePropagation()}function ns(e){e.preventDefault(),e.stopImmediatePropagation()}function xM(e){var t=e.document.documentElement,n=Wt(e).on("dragstart.drag",ns,Fo);"onselectstart"in t?n.on("selectstart.drag",ns,Fo):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function wM(e,t){var n=e.document.documentElement,r=Wt(e).on("dragstart.drag",null);t&&(r.on("click.drag",ns,Fo),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const Fa=e=>()=>e;function cy(e,{sourceEvent:t,subject:n,target:r,identifier:i,active:s,x:o,y:a,dx:l,dy:u,dispatch:c}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:s,enumerable:!0,configurable:!0},x:{value:o,enumerable:!0,configurable:!0},y:{value:a,enumerable:!0,configurable:!0},dx:{value:l,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:c}})}cy.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function UO(e){return!e.ctrlKey&&!e.button}function HO(){return this.parentNode}function GO(e,t){return t??{x:e.x,y:e.y}}function WO(){return navigator.maxTouchPoints||"ontouchstart"in this}function KO(){var e=UO,t=HO,n=GO,r=WO,i={},s=Au("start","drag","end"),o=0,a,l,u,c,d=0;function f(b){b.on("mousedown.drag",h).filter(r).on("touchstart.drag",x).on("touchmove.drag",m,zO).on("touchend.drag touchcancel.drag",v).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function h(b,_){if(!(c||!e.call(this,b,_))){var C=w(this,t.call(this,b,_),b,_,"mouse");C&&(Wt(b.view).on("mousemove.drag",g,Fo).on("mouseup.drag",p,Fo),xM(b.view),Yc(b),u=!1,a=b.clientX,l=b.clientY,C("start",b))}}function g(b){if(ns(b),!u){var _=b.clientX-a,C=b.clientY-l;u=_*_+C*C>d}i.mouse("drag",b)}function p(b){Wt(b.view).on("mousemove.drag mouseup.drag",null),wM(b.view,u),ns(b),i.mouse("end",b)}function x(b,_){if(e.call(this,b,_)){var C=b.changedTouches,k=t.call(this,b,_),T=C.length,M,R;for(M=0;M<T;++M)(R=w(this,k,b,_,C[M].identifier,C[M]))&&(Yc(b),R("start",b,C[M]))}}function m(b){var _=b.changedTouches,C=_.length,k,T;for(k=0;k<C;++k)(T=i[_[k].identifier])&&(ns(b),T("drag",b,_[k]))}function v(b){var _=b.changedTouches,C=_.length,k,T;for(c&&clearTimeout(c),c=setTimeout(function(){c=null},500),k=0;k<C;++k)(T=i[_[k].identifier])&&(Yc(b),T("end",b,_[k]))}function w(b,_,C,k,T,M){var R=s.copy(),I=cn(M||C,_),B,F,E;if((E=n.call(b,new cy("beforestart",{sourceEvent:C,target:f,identifier:T,active:o,x:I[0],y:I[1],dx:0,dy:0,dispatch:R}),k))!=null)return B=E.x-I[0]||0,F=E.y-I[1]||0,function D(P,L,A){var N=I,j;switch(P){case"start":i[T]=D,j=o++;break;case"end":delete i[T],--o;case"drag":I=cn(A||L,_),j=o;break}R.call(P,b,new cy(P,{sourceEvent:L,subject:E,target:f,identifier:T,active:j,x:I[0]+B,y:I[1]+F,dx:I[0]-N[0],dy:I[1]-N[1],dispatch:R}),k)}}return f.filter=function(b){return arguments.length?(e=typeof b=="function"?b:Fa(!!b),f):e},f.container=function(b){return arguments.length?(t=typeof b=="function"?b:Fa(b),f):t},f.subject=function(b){return arguments.length?(n=typeof b=="function"?b:Fa(b),f):n},f.touchable=function(b){return arguments.length?(r=typeof b=="function"?b:Fa(!!b),f):r},f.on=function(){var b=s.on.apply(s,arguments);return b===s?f:b},f.clickDistance=function(b){return arguments.length?(d=(b=+b)*b,f):Math.sqrt(d)},f}function Uv(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function bM(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function sa(){}var Vo=.7,Gl=1/Vo,rs="\\s*([+-]?\\d+)\\s*",Bo="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Mn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",YO=/^#([0-9a-f]{3,8})$/,XO=new RegExp(`^rgb\\(${rs},${rs},${rs}\\)$`),ZO=new RegExp(`^rgb\\(${Mn},${Mn},${Mn}\\)$`),QO=new RegExp(`^rgba\\(${rs},${rs},${rs},${Bo}\\)$`),JO=new RegExp(`^rgba\\(${Mn},${Mn},${Mn},${Bo}\\)$`),e3=new RegExp(`^hsl\\(${Bo},${Mn},${Mn}\\)$`),t3=new RegExp(`^hsla\\(${Bo},${Mn},${Mn},${Bo}\\)$`),Sw={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Uv(sa,zo,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:_w,formatHex:_w,formatHex8:n3,formatHsl:r3,formatRgb:Ew,toString:Ew});function _w(){return this.rgb().formatHex()}function n3(){return this.rgb().formatHex8()}function r3(){return SM(this).formatHsl()}function Ew(){return this.rgb().formatRgb()}function zo(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=YO.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Cw(t):n===3?new Ct(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Va(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Va(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=XO.exec(e))?new Ct(t[1],t[2],t[3],1):(t=ZO.exec(e))?new Ct(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=QO.exec(e))?Va(t[1],t[2],t[3],t[4]):(t=JO.exec(e))?Va(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=e3.exec(e))?Nw(t[1],t[2]/100,t[3]/100,1):(t=t3.exec(e))?Nw(t[1],t[2]/100,t[3]/100,t[4]):Sw.hasOwnProperty(e)?Cw(Sw[e]):e==="transparent"?new Ct(NaN,NaN,NaN,0):null}function Cw(e){return new Ct(e>>16&255,e>>8&255,e&255,1)}function Va(e,t,n,r){return r<=0&&(e=t=n=NaN),new Ct(e,t,n,r)}function i3(e){return e instanceof sa||(e=zo(e)),e?(e=e.rgb(),new Ct(e.r,e.g,e.b,e.opacity)):new Ct}function dy(e,t,n,r){return arguments.length===1?i3(e):new Ct(e,t,n,r??1)}function Ct(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}Uv(Ct,dy,bM(sa,{brighter(e){return e=e==null?Gl:Math.pow(Gl,e),new Ct(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Vo:Math.pow(Vo,e),new Ct(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Ct(si(this.r),si(this.g),si(this.b),Wl(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:kw,formatHex:kw,formatHex8:s3,formatRgb:Tw,toString:Tw}));function kw(){return`#${Jr(this.r)}${Jr(this.g)}${Jr(this.b)}`}function s3(){return`#${Jr(this.r)}${Jr(this.g)}${Jr(this.b)}${Jr((isNaN(this.opacity)?1:this.opacity)*255)}`}function Tw(){const e=Wl(this.opacity);return`${e===1?"rgb(":"rgba("}${si(this.r)}, ${si(this.g)}, ${si(this.b)}${e===1?")":`, ${e})`}`}function Wl(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function si(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Jr(e){return e=si(e),(e<16?"0":"")+e.toString(16)}function Nw(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new fn(e,t,n,r)}function SM(e){if(e instanceof fn)return new fn(e.h,e.s,e.l,e.opacity);if(e instanceof sa||(e=zo(e)),!e)return new fn;if(e instanceof fn)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),s=Math.max(t,n,r),o=NaN,a=s-i,l=(s+i)/2;return a?(t===s?o=(n-r)/a+(n<r)*6:n===s?o=(r-t)/a+2:o=(t-n)/a+4,a/=l<.5?s+i:2-s-i,o*=60):a=l>0&&l<1?0:o,new fn(o,a,l,e.opacity)}function o3(e,t,n,r){return arguments.length===1?SM(e):new fn(e,t,n,r??1)}function fn(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Uv(fn,o3,bM(sa,{brighter(e){return e=e==null?Gl:Math.pow(Gl,e),new fn(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Vo:Math.pow(Vo,e),new fn(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new Ct(Xc(e>=240?e-240:e+120,i,r),Xc(e,i,r),Xc(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new fn(Mw(this.h),Ba(this.s),Ba(this.l),Wl(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Wl(this.opacity);return`${e===1?"hsl(":"hsla("}${Mw(this.h)}, ${Ba(this.s)*100}%, ${Ba(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Mw(e){return e=(e||0)%360,e<0?e+360:e}function Ba(e){return Math.max(0,Math.min(1,e||0))}function Xc(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const _M=e=>()=>e;function a3(e,t){return function(n){return e+n*t}}function l3(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function u3(e){return(e=+e)==1?EM:function(t,n){return n-t?l3(t,n,e):_M(isNaN(t)?n:t)}}function EM(e,t){var n=t-e;return n?a3(e,n):_M(isNaN(e)?t:e)}const Aw=function e(t){var n=u3(t);function r(i,s){var o=n((i=dy(i)).r,(s=dy(s)).r),a=n(i.g,s.g),l=n(i.b,s.b),u=EM(i.opacity,s.opacity);return function(c){return i.r=o(c),i.g=a(c),i.b=l(c),i.opacity=u(c),i+""}}return r.gamma=e,r}(1);function hr(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var fy=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Zc=new RegExp(fy.source,"g");function c3(e){return function(){return e}}function d3(e){return function(t){return e(t)+""}}function f3(e,t){var n=fy.lastIndex=Zc.lastIndex=0,r,i,s,o=-1,a=[],l=[];for(e=e+"",t=t+"";(r=fy.exec(e))&&(i=Zc.exec(t));)(s=i.index)>n&&(s=t.slice(n,s),a[o]?a[o]+=s:a[++o]=s),(r=r[0])===(i=i[0])?a[o]?a[o]+=i:a[++o]=i:(a[++o]=null,l.push({i:o,x:hr(r,i)})),n=Zc.lastIndex;return n<t.length&&(s=t.slice(n),a[o]?a[o]+=s:a[++o]=s),a.length<2?l[0]?d3(l[0].x):c3(t):(t=l.length,function(u){for(var c=0,d;c<t;++c)a[(d=l[c]).i]=d.x(u);return a.join("")})}var Rw=180/Math.PI,hy={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function CM(e,t,n,r,i,s){var o,a,l;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(l=e*n+t*r)&&(n-=e*l,r-=t*l),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,l/=a),e*r<t*n&&(e=-e,t=-t,l=-l,o=-o),{translateX:i,translateY:s,rotate:Math.atan2(t,e)*Rw,skewX:Math.atan(l)*Rw,scaleX:o,scaleY:a}}var za;function h3(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?hy:CM(t.a,t.b,t.c,t.d,t.e,t.f)}function p3(e){return e==null||(za||(za=document.createElementNS("http://www.w3.org/2000/svg","g")),za.setAttribute("transform",e),!(e=za.transform.baseVal.consolidate()))?hy:(e=e.matrix,CM(e.a,e.b,e.c,e.d,e.e,e.f))}function kM(e,t,n,r){function i(u){return u.length?u.pop()+" ":""}function s(u,c,d,f,h,g){if(u!==d||c!==f){var p=h.push("translate(",null,t,null,n);g.push({i:p-4,x:hr(u,d)},{i:p-2,x:hr(c,f)})}else(d||f)&&h.push("translate("+d+t+f+n)}function o(u,c,d,f){u!==c?(u-c>180?c+=360:c-u>180&&(u+=360),f.push({i:d.push(i(d)+"rotate(",null,r)-2,x:hr(u,c)})):c&&d.push(i(d)+"rotate("+c+r)}function a(u,c,d,f){u!==c?f.push({i:d.push(i(d)+"skewX(",null,r)-2,x:hr(u,c)}):c&&d.push(i(d)+"skewX("+c+r)}function l(u,c,d,f,h,g){if(u!==d||c!==f){var p=h.push(i(h)+"scale(",null,",",null,")");g.push({i:p-4,x:hr(u,d)},{i:p-2,x:hr(c,f)})}else(d!==1||f!==1)&&h.push(i(h)+"scale("+d+","+f+")")}return function(u,c){var d=[],f=[];return u=e(u),c=e(c),s(u.translateX,u.translateY,c.translateX,c.translateY,d,f),o(u.rotate,c.rotate,d,f),a(u.skewX,c.skewX,d,f),l(u.scaleX,u.scaleY,c.scaleX,c.scaleY,d,f),u=c=null,function(h){for(var g=-1,p=f.length,x;++g<p;)d[(x=f[g]).i]=x.x(h);return d.join("")}}}var m3=kM(h3,"px, ","px)","deg)"),g3=kM(p3,", ",")",")"),y3=1e-12;function Pw(e){return((e=Math.exp(e))+1/e)/2}function v3(e){return((e=Math.exp(e))-1/e)/2}function x3(e){return((e=Math.exp(2*e))-1)/(e+1)}const w3=function e(t,n,r){function i(s,o){var a=s[0],l=s[1],u=s[2],c=o[0],d=o[1],f=o[2],h=c-a,g=d-l,p=h*h+g*g,x,m;if(p<y3)m=Math.log(f/u)/t,x=function(k){return[a+k*h,l+k*g,u*Math.exp(t*k*m)]};else{var v=Math.sqrt(p),w=(f*f-u*u+r*p)/(2*u*n*v),b=(f*f-u*u-r*p)/(2*f*n*v),_=Math.log(Math.sqrt(w*w+1)-w),C=Math.log(Math.sqrt(b*b+1)-b);m=(C-_)/t,x=function(k){var T=k*m,M=Pw(_),R=u/(n*v)*(M*x3(t*T+_)-v3(_));return[a+R*h,l+R*g,u*M/Pw(t*T+_)]}}return x.duration=m*1e3*t/Math.SQRT2,x}return i.rho=function(s){var o=Math.max(.001,+s),a=o*o,l=a*a;return e(o,a,l)},i}(Math.SQRT2,2,4);var ps=0,Zs=0,Fs=0,TM=1e3,Kl,Qs,Yl=0,pi=0,Pu=0,Uo=typeof performance=="object"&&performance.now?performance:Date,NM=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Hv(){return pi||(NM(b3),pi=Uo.now()+Pu)}function b3(){pi=0}function Xl(){this._call=this._time=this._next=null}Xl.prototype=MM.prototype={constructor:Xl,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?Hv():+n)+(t==null?0:+t),!this._next&&Qs!==this&&(Qs?Qs._next=this:Kl=this,Qs=this),this._call=e,this._time=n,py()},stop:function(){this._call&&(this._call=null,this._time=1/0,py())}};function MM(e,t,n){var r=new Xl;return r.restart(e,t,n),r}function S3(){Hv(),++ps;for(var e=Kl,t;e;)(t=pi-e._time)>=0&&e._call.call(void 0,t),e=e._next;--ps}function Iw(){pi=(Yl=Uo.now())+Pu,ps=Zs=0;try{S3()}finally{ps=0,E3(),pi=0}}function _3(){var e=Uo.now(),t=e-Yl;t>TM&&(Pu-=t,Yl=e)}function E3(){for(var e,t=Kl,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Kl=n);Qs=e,py(r)}function py(e){if(!ps){Zs&&(Zs=clearTimeout(Zs));var t=e-pi;t>24?(e<1/0&&(Zs=setTimeout(Iw,e-Uo.now()-Pu)),Fs&&(Fs=clearInterval(Fs))):(Fs||(Yl=Uo.now(),Fs=setInterval(_3,TM)),ps=1,NM(Iw))}}function jw(e,t,n){var r=new Xl;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}var C3=Au("start","end","cancel","interrupt"),k3=[],AM=0,Dw=1,my=2,pl=3,Lw=4,gy=5,ml=6;function Iu(e,t,n,r,i,s){var o=e.__transition;if(!o)e.__transition={};else if(n in o)return;T3(e,n,{name:t,index:r,group:i,on:C3,tween:k3,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:AM})}function Gv(e,t){var n=yn(e,t);if(n.state>AM)throw new Error("too late; already scheduled");return n}function Pn(e,t){var n=yn(e,t);if(n.state>pl)throw new Error("too late; already running");return n}function yn(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function T3(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=MM(s,0,n.time);function s(u){n.state=Dw,n.timer.restart(o,n.delay,n.time),n.delay<=u&&o(u-n.delay)}function o(u){var c,d,f,h;if(n.state!==Dw)return l();for(c in r)if(h=r[c],h.name===n.name){if(h.state===pl)return jw(o);h.state===Lw?(h.state=ml,h.timer.stop(),h.on.call("interrupt",e,e.__data__,h.index,h.group),delete r[c]):+c<t&&(h.state=ml,h.timer.stop(),h.on.call("cancel",e,e.__data__,h.index,h.group),delete r[c])}if(jw(function(){n.state===pl&&(n.state=Lw,n.timer.restart(a,n.delay,n.time),a(u))}),n.state=my,n.on.call("start",e,e.__data__,n.index,n.group),n.state===my){for(n.state=pl,i=new Array(f=n.tween.length),c=0,d=-1;c<f;++c)(h=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(i[++d]=h);i.length=d+1}}function a(u){for(var c=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(l),n.state=gy,1),d=-1,f=i.length;++d<f;)i[d].call(e,c);n.state===gy&&(n.on.call("end",e,e.__data__,n.index,n.group),l())}function l(){n.state=ml,n.timer.stop(),delete r[t];for(var u in r)return;delete e.__transition}}function gl(e,t){var n=e.__transition,r,i,s=!0,o;if(n){t=t==null?null:t+"";for(o in n){if((r=n[o]).name!==t){s=!1;continue}i=r.state>my&&r.state<gy,r.state=ml,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[o]}s&&delete e.__transition}}function N3(e){return this.each(function(){gl(this,e)})}function M3(e,t){var n,r;return function(){var i=Pn(this,e),s=i.tween;if(s!==n){r=n=s;for(var o=0,a=r.length;o<a;++o)if(r[o].name===t){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function A3(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var s=Pn(this,e),o=s.tween;if(o!==r){i=(r=o).slice();for(var a={name:t,value:n},l=0,u=i.length;l<u;++l)if(i[l].name===t){i[l]=a;break}l===u&&i.push(a)}s.tween=i}}function R3(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=yn(this.node(),n).tween,i=0,s=r.length,o;i<s;++i)if((o=r[i]).name===e)return o.value;return null}return this.each((t==null?M3:A3)(n,e,t))}function Wv(e,t,n){var r=e._id;return e.each(function(){var i=Pn(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return yn(i,r).value[t]}}function RM(e,t){var n;return(typeof t=="number"?hr:t instanceof zo?Aw:(n=zo(t))?(t=n,Aw):f3)(e,t)}function P3(e){return function(){this.removeAttribute(e)}}function I3(e){return function(){this.removeAttributeNS(e.space,e.local)}}function j3(e,t,n){var r,i=n+"",s;return function(){var o=this.getAttribute(e);return o===i?null:o===r?s:s=t(r=o,n)}}function D3(e,t,n){var r,i=n+"",s;return function(){var o=this.getAttributeNS(e.space,e.local);return o===i?null:o===r?s:s=t(r=o,n)}}function L3(e,t,n){var r,i,s;return function(){var o,a=n(this),l;return a==null?void this.removeAttribute(e):(o=this.getAttribute(e),l=a+"",o===l?null:o===r&&l===i?s:(i=l,s=t(r=o,a)))}}function O3(e,t,n){var r,i,s;return function(){var o,a=n(this),l;return a==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),l=a+"",o===l?null:o===r&&l===i?s:(i=l,s=t(r=o,a)))}}function q3(e,t){var n=Ru(e),r=n==="transform"?g3:RM;return this.attrTween(e,typeof t=="function"?(n.local?O3:L3)(n,r,Wv(this,"attr."+e,t)):t==null?(n.local?I3:P3)(n):(n.local?D3:j3)(n,r,t))}function $3(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function F3(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function V3(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&F3(e,s)),n}return i._value=t,i}function B3(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&$3(e,s)),n}return i._value=t,i}function z3(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=Ru(e);return this.tween(n,(r.local?V3:B3)(r,t))}function U3(e,t){return function(){Gv(this,e).delay=+t.apply(this,arguments)}}function H3(e,t){return t=+t,function(){Gv(this,e).delay=t}}function G3(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?U3:H3)(t,e)):yn(this.node(),t).delay}function W3(e,t){return function(){Pn(this,e).duration=+t.apply(this,arguments)}}function K3(e,t){return t=+t,function(){Pn(this,e).duration=t}}function Y3(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?W3:K3)(t,e)):yn(this.node(),t).duration}function X3(e,t){if(typeof t!="function")throw new Error;return function(){Pn(this,e).ease=t}}function Z3(e){var t=this._id;return arguments.length?this.each(X3(t,e)):yn(this.node(),t).ease}function Q3(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;Pn(this,e).ease=n}}function J3(e){if(typeof e!="function")throw new Error;return this.each(Q3(this._id,e))}function eq(e){typeof e!="function"&&(e=uM(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=[],l,u=0;u<o;++u)(l=s[u])&&e.call(l,l.__data__,u,s)&&a.push(l);return new Qn(r,this._parents,this._name,this._id)}function tq(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,s=Math.min(r,i),o=new Array(r),a=0;a<s;++a)for(var l=t[a],u=n[a],c=l.length,d=o[a]=new Array(c),f,h=0;h<c;++h)(f=l[h]||u[h])&&(d[h]=f);for(;a<r;++a)o[a]=t[a];return new Qn(o,this._parents,this._name,this._id)}function nq(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function rq(e,t,n){var r,i,s=nq(t)?Gv:Pn;return function(){var o=s(this,e),a=o.on;a!==r&&(i=(r=a).copy()).on(t,n),o.on=i}}function iq(e,t){var n=this._id;return arguments.length<2?yn(this.node(),n).on.on(e):this.each(rq(n,e,t))}function sq(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function oq(){return this.on("end.remove",sq(this._id))}function aq(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Bv(e));for(var r=this._groups,i=r.length,s=new Array(i),o=0;o<i;++o)for(var a=r[o],l=a.length,u=s[o]=new Array(l),c,d,f=0;f<l;++f)(c=a[f])&&(d=e.call(c,c.__data__,f,a))&&("__data__"in c&&(d.__data__=c.__data__),u[f]=d,Iu(u[f],t,n,f,u,yn(c,n)));return new Qn(s,this._parents,t,n)}function lq(e){var t=this._name,n=this._id;typeof e!="function"&&(e=lM(e));for(var r=this._groups,i=r.length,s=[],o=[],a=0;a<i;++a)for(var l=r[a],u=l.length,c,d=0;d<u;++d)if(c=l[d]){for(var f=e.call(c,c.__data__,d,l),h,g=yn(c,n),p=0,x=f.length;p<x;++p)(h=f[p])&&Iu(h,t,n,p,f,g);s.push(f),o.push(c)}return new Qn(s,o,t,n)}var uq=ia.prototype.constructor;function cq(){return new uq(this._groups,this._parents)}function dq(e,t){var n,r,i;return function(){var s=hs(this,e),o=(this.style.removeProperty(e),hs(this,e));return s===o?null:s===n&&o===r?i:i=t(n=s,r=o)}}function PM(e){return function(){this.style.removeProperty(e)}}function fq(e,t,n){var r,i=n+"",s;return function(){var o=hs(this,e);return o===i?null:o===r?s:s=t(r=o,n)}}function hq(e,t,n){var r,i,s;return function(){var o=hs(this,e),a=n(this),l=a+"";return a==null&&(l=a=(this.style.removeProperty(e),hs(this,e))),o===l?null:o===r&&l===i?s:(i=l,s=t(r=o,a))}}function pq(e,t){var n,r,i,s="style."+t,o="end."+s,a;return function(){var l=Pn(this,e),u=l.on,c=l.value[s]==null?a||(a=PM(t)):void 0;(u!==n||i!==c)&&(r=(n=u).copy()).on(o,i=c),l.on=r}}function mq(e,t,n){var r=(e+="")=="transform"?m3:RM;return t==null?this.styleTween(e,dq(e,r)).on("end.style."+e,PM(e)):typeof t=="function"?this.styleTween(e,hq(e,r,Wv(this,"style."+e,t))).each(pq(this._id,e)):this.styleTween(e,fq(e,r,t),n).on("end.style."+e,null)}function gq(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function yq(e,t,n){var r,i;function s(){var o=t.apply(this,arguments);return o!==i&&(r=(i=o)&&gq(e,o,n)),r}return s._value=t,s}function vq(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,yq(e,t,n??""))}function xq(e){return function(){this.textContent=e}}function wq(e){return function(){var t=e(this);this.textContent=t??""}}function bq(e){return this.tween("text",typeof e=="function"?wq(Wv(this,"text",e)):xq(e==null?"":e+""))}function Sq(e){return function(t){this.textContent=e.call(this,t)}}function _q(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&Sq(i)),t}return r._value=e,r}function Eq(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,_q(e))}function Cq(){for(var e=this._name,t=this._id,n=IM(),r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,l,u=0;u<a;++u)if(l=o[u]){var c=yn(l,t);Iu(l,e,n,u,o,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new Qn(r,this._parents,e,n)}function kq(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(s,o){var a={value:o},l={value:function(){--i===0&&s()}};n.each(function(){var u=Pn(this,r),c=u.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(l)),u.on=t}),i===0&&s()})}var Tq=0;function Qn(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function IM(){return++Tq}var jn=ia.prototype;Qn.prototype={constructor:Qn,select:aq,selectAll:lq,selectChild:jn.selectChild,selectChildren:jn.selectChildren,filter:eq,merge:tq,selection:cq,transition:Cq,call:jn.call,nodes:jn.nodes,node:jn.node,size:jn.size,empty:jn.empty,each:jn.each,on:iq,attr:q3,attrTween:z3,style:mq,styleTween:vq,text:bq,textTween:Eq,remove:oq,tween:R3,delay:G3,duration:Y3,ease:Z3,easeVarying:J3,end:kq,[Symbol.iterator]:jn[Symbol.iterator]};function Nq(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var Mq={time:null,delay:0,duration:250,ease:Nq};function Aq(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function Rq(e){var t,n;e instanceof Qn?(t=e._id,e=e._name):(t=IM(),(n=Mq).time=Hv(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,l,u=0;u<a;++u)(l=o[u])&&Iu(l,e,t,u,o,n||Aq(l,t));return new Qn(r,this._parents,e,t)}ia.prototype.interrupt=N3;ia.prototype.transition=Rq;const Ua=e=>()=>e;function Pq(e,{sourceEvent:t,target:n,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function Vn(e,t,n){this.k=e,this.x=t,this.y=n}Vn.prototype={constructor:Vn,scale:function(e){return e===1?this:new Vn(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Vn(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Hn=new Vn(1,0,0);Vn.prototype;function Qc(e){e.stopImmediatePropagation()}function Vs(e){e.preventDefault(),e.stopImmediatePropagation()}function Iq(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function jq(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function Ow(){return this.__zoom||Hn}function Dq(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function Lq(){return navigator.maxTouchPoints||"ontouchstart"in this}function Oq(e,t,n){var r=e.invertX(t[0][0])-n[0][0],i=e.invertX(t[1][0])-n[1][0],s=e.invertY(t[0][1])-n[0][1],o=e.invertY(t[1][1])-n[1][1];return e.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),o>s?(s+o)/2:Math.min(0,s)||Math.max(0,o))}function jM(){var e=Iq,t=jq,n=Oq,r=Dq,i=Lq,s=[0,1/0],o=[[-1/0,-1/0],[1/0,1/0]],a=250,l=w3,u=Au("start","zoom","end"),c,d,f,h=500,g=150,p=0,x=10;function m(E){E.property("__zoom",Ow).on("wheel.zoom",T,{passive:!1}).on("mousedown.zoom",M).on("dblclick.zoom",R).filter(i).on("touchstart.zoom",I).on("touchmove.zoom",B).on("touchend.zoom touchcancel.zoom",F).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}m.transform=function(E,D,P,L){var A=E.selection?E.selection():E;A.property("__zoom",Ow),E!==A?_(E,D,P,L):A.interrupt().each(function(){C(this,arguments).event(L).start().zoom(null,typeof D=="function"?D.apply(this,arguments):D).end()})},m.scaleBy=function(E,D,P,L){m.scaleTo(E,function(){var A=this.__zoom.k,N=typeof D=="function"?D.apply(this,arguments):D;return A*N},P,L)},m.scaleTo=function(E,D,P,L){m.transform(E,function(){var A=t.apply(this,arguments),N=this.__zoom,j=P==null?b(A):typeof P=="function"?P.apply(this,arguments):P,$=N.invert(j),V=typeof D=="function"?D.apply(this,arguments):D;return n(w(v(N,V),j,$),A,o)},P,L)},m.translateBy=function(E,D,P,L){m.transform(E,function(){return n(this.__zoom.translate(typeof D=="function"?D.apply(this,arguments):D,typeof P=="function"?P.apply(this,arguments):P),t.apply(this,arguments),o)},null,L)},m.translateTo=function(E,D,P,L,A){m.transform(E,function(){var N=t.apply(this,arguments),j=this.__zoom,$=L==null?b(N):typeof L=="function"?L.apply(this,arguments):L;return n(Hn.translate($[0],$[1]).scale(j.k).translate(typeof D=="function"?-D.apply(this,arguments):-D,typeof P=="function"?-P.apply(this,arguments):-P),N,o)},L,A)};function v(E,D){return D=Math.max(s[0],Math.min(s[1],D)),D===E.k?E:new Vn(D,E.x,E.y)}function w(E,D,P){var L=D[0]-P[0]*E.k,A=D[1]-P[1]*E.k;return L===E.x&&A===E.y?E:new Vn(E.k,L,A)}function b(E){return[(+E[0][0]+ +E[1][0])/2,(+E[0][1]+ +E[1][1])/2]}function _(E,D,P,L){E.on("start.zoom",function(){C(this,arguments).event(L).start()}).on("interrupt.zoom end.zoom",function(){C(this,arguments).event(L).end()}).tween("zoom",function(){var A=this,N=arguments,j=C(A,N).event(L),$=t.apply(A,N),V=P==null?b($):typeof P=="function"?P.apply(A,N):P,O=Math.max($[1][0]-$[0][0],$[1][1]-$[0][1]),G=A.__zoom,Y=typeof D=="function"?D.apply(A,N):D,ee=l(G.invert(V).concat(O/G.k),Y.invert(V).concat(O/Y.k));return function(se){if(se===1)se=Y;else{var pe=ee(se),te=O/pe[2];se=new Vn(te,V[0]-pe[0]*te,V[1]-pe[1]*te)}j.zoom(null,se)}})}function C(E,D,P){return!P&&E.__zooming||new k(E,D)}function k(E,D){this.that=E,this.args=D,this.active=0,this.sourceEvent=null,this.extent=t.apply(E,D),this.taps=0}k.prototype={event:function(E){return E&&(this.sourceEvent=E),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(E,D){return this.mouse&&E!=="mouse"&&(this.mouse[1]=D.invert(this.mouse[0])),this.touch0&&E!=="touch"&&(this.touch0[1]=D.invert(this.touch0[0])),this.touch1&&E!=="touch"&&(this.touch1[1]=D.invert(this.touch1[0])),this.that.__zoom=D,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(E){var D=Wt(this.that).datum();u.call(E,this.that,new Pq(E,{sourceEvent:this.sourceEvent,target:m,transform:this.that.__zoom,dispatch:u}),D)}};function T(E,...D){if(!e.apply(this,arguments))return;var P=C(this,D).event(E),L=this.__zoom,A=Math.max(s[0],Math.min(s[1],L.k*Math.pow(2,r.apply(this,arguments)))),N=cn(E);if(P.wheel)(P.mouse[0][0]!==N[0]||P.mouse[0][1]!==N[1])&&(P.mouse[1]=L.invert(P.mouse[0]=N)),clearTimeout(P.wheel);else{if(L.k===A)return;P.mouse=[N,L.invert(N)],gl(this),P.start()}Vs(E),P.wheel=setTimeout(j,g),P.zoom("mouse",n(w(v(L,A),P.mouse[0],P.mouse[1]),P.extent,o));function j(){P.wheel=null,P.end()}}function M(E,...D){if(f||!e.apply(this,arguments))return;var P=E.currentTarget,L=C(this,D,!0).event(E),A=Wt(E.view).on("mousemove.zoom",V,!0).on("mouseup.zoom",O,!0),N=cn(E,P),j=E.clientX,$=E.clientY;xM(E.view),Qc(E),L.mouse=[N,this.__zoom.invert(N)],gl(this),L.start();function V(G){if(Vs(G),!L.moved){var Y=G.clientX-j,ee=G.clientY-$;L.moved=Y*Y+ee*ee>p}L.event(G).zoom("mouse",n(w(L.that.__zoom,L.mouse[0]=cn(G,P),L.mouse[1]),L.extent,o))}function O(G){A.on("mousemove.zoom mouseup.zoom",null),wM(G.view,L.moved),Vs(G),L.event(G).end()}}function R(E,...D){if(e.apply(this,arguments)){var P=this.__zoom,L=cn(E.changedTouches?E.changedTouches[0]:E,this),A=P.invert(L),N=P.k*(E.shiftKey?.5:2),j=n(w(v(P,N),L,A),t.apply(this,D),o);Vs(E),a>0?Wt(this).transition().duration(a).call(_,j,L,E):Wt(this).call(m.transform,j,L,E)}}function I(E,...D){if(e.apply(this,arguments)){var P=E.touches,L=P.length,A=C(this,D,E.changedTouches.length===L).event(E),N,j,$,V;for(Qc(E),j=0;j<L;++j)$=P[j],V=cn($,this),V=[V,this.__zoom.invert(V),$.identifier],A.touch0?!A.touch1&&A.touch0[2]!==V[2]&&(A.touch1=V,A.taps=0):(A.touch0=V,N=!0,A.taps=1+!!c);c&&(c=clearTimeout(c)),N&&(A.taps<2&&(d=V[0],c=setTimeout(function(){c=null},h)),gl(this),A.start())}}function B(E,...D){if(this.__zooming){var P=C(this,D).event(E),L=E.changedTouches,A=L.length,N,j,$,V;for(Vs(E),N=0;N<A;++N)j=L[N],$=cn(j,this),P.touch0&&P.touch0[2]===j.identifier?P.touch0[0]=$:P.touch1&&P.touch1[2]===j.identifier&&(P.touch1[0]=$);if(j=P.that.__zoom,P.touch1){var O=P.touch0[0],G=P.touch0[1],Y=P.touch1[0],ee=P.touch1[1],se=(se=Y[0]-O[0])*se+(se=Y[1]-O[1])*se,pe=(pe=ee[0]-G[0])*pe+(pe=ee[1]-G[1])*pe;j=v(j,Math.sqrt(se/pe)),$=[(O[0]+Y[0])/2,(O[1]+Y[1])/2],V=[(G[0]+ee[0])/2,(G[1]+ee[1])/2]}else if(P.touch0)$=P.touch0[0],V=P.touch0[1];else return;P.zoom("touch",n(w(j,$,V),P.extent,o))}}function F(E,...D){if(this.__zooming){var P=C(this,D).event(E),L=E.changedTouches,A=L.length,N,j;for(Qc(E),f&&clearTimeout(f),f=setTimeout(function(){f=null},h),N=0;N<A;++N)j=L[N],P.touch0&&P.touch0[2]===j.identifier?delete P.touch0:P.touch1&&P.touch1[2]===j.identifier&&delete P.touch1;if(P.touch1&&!P.touch0&&(P.touch0=P.touch1,delete P.touch1),P.touch0)P.touch0[1]=this.__zoom.invert(P.touch0[0]);else if(P.end(),P.taps===2&&(j=cn(j,this),Math.hypot(d[0]-j[0],d[1]-j[1])<x)){var $=Wt(this).on("dblclick.zoom");$&&$.apply(this,arguments)}}}return m.wheelDelta=function(E){return arguments.length?(r=typeof E=="function"?E:Ua(+E),m):r},m.filter=function(E){return arguments.length?(e=typeof E=="function"?E:Ua(!!E),m):e},m.touchable=function(E){return arguments.length?(i=typeof E=="function"?E:Ua(!!E),m):i},m.extent=function(E){return arguments.length?(t=typeof E=="function"?E:Ua([[+E[0][0],+E[0][1]],[+E[1][0],+E[1][1]]]),m):t},m.scaleExtent=function(E){return arguments.length?(s[0]=+E[0],s[1]=+E[1],m):[s[0],s[1]]},m.translateExtent=function(E){return arguments.length?(o[0][0]=+E[0][0],o[1][0]=+E[1][0],o[0][1]=+E[0][1],o[1][1]=+E[1][1],m):[[o[0][0],o[0][1]],[o[1][0],o[1][1]]]},m.constrain=function(E){return arguments.length?(n=E,m):n},m.duration=function(E){return arguments.length?(a=+E,m):a},m.interpolate=function(E){return arguments.length?(l=E,m):l},m.on=function(){var E=u.on.apply(u,arguments);return E===u?m:E},m.clickDistance=function(E){return arguments.length?(p=(E=+E)*E,m):Math.sqrt(p)},m.tapDistance=function(E){return arguments.length?(x=+E,m):x},m}const ju=S.createContext(null),qq=ju.Provider,Jn={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,t)=>`Couldn't create edge for ${e?"target":"source"} handle id: "${e?t.targetHandle:t.sourceHandle}", edge id: ${t.id}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},DM=Jn.error001();function Ee(e,t){const n=S.useContext(ju);if(n===null)throw new Error(DM);return oM(n,e,t)}const Xe=()=>{const e=S.useContext(ju);if(e===null)throw new Error(DM);return S.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe,destroy:e.destroy}),[e])},$q=e=>e.userSelectionActive?"none":"all";function Kv({position:e,children:t,className:n,style:r,...i}){const s=Ee($q),o=`${e}`.split("-");return q.createElement("div",{className:ot(["react-flow__panel",n,...o]),style:{...r,pointerEvents:s},...i},t)}function Fq({proOptions:e,position:t="bottom-right"}){return e!=null&&e.hideAttribution?null:q.createElement(Kv,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},q.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}const Vq=({x:e,y:t,label:n,labelStyle:r={},labelShowBg:i=!0,labelBgStyle:s={},labelBgPadding:o=[2,4],labelBgBorderRadius:a=2,children:l,className:u,...c})=>{const d=S.useRef(null),[f,h]=S.useState({x:0,y:0,width:0,height:0}),g=ot(["react-flow__edge-textwrapper",u]);return S.useEffect(()=>{if(d.current){const p=d.current.getBBox();h({x:p.x,y:p.y,width:p.width,height:p.height})}},[n]),typeof n>"u"||!n?null:q.createElement("g",{transform:`translate(${e-f.width/2} ${t-f.height/2})`,className:g,visibility:f.width?"visible":"hidden",...c},i&&q.createElement("rect",{width:f.width+2*o[0],x:-o[0],y:-o[1],height:f.height+2*o[1],className:"react-flow__edge-textbg",style:s,rx:a,ry:a}),q.createElement("text",{className:"react-flow__edge-text",y:f.height/2,dy:"0.3em",ref:d,style:r},n),l)};var Bq=S.memo(Vq);const Yv=e=>({width:e.offsetWidth,height:e.offsetHeight}),ms=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),Xv=(e={x:0,y:0},t)=>({x:ms(e.x,t[0][0],t[1][0]),y:ms(e.y,t[0][1],t[1][1])}),qw=(e,t,n)=>e<t?ms(Math.abs(e-t),1,50)/50:e>n?-ms(Math.abs(e-n),1,50)/50:0,LM=(e,t)=>{const n=qw(e.x,35,t.width-35)*20,r=qw(e.y,35,t.height-35)*20;return[n,r]},OM=e=>{var t;return((t=e.getRootNode)==null?void 0:t.call(e))||(window==null?void 0:window.document)},qM=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),Ho=({x:e,y:t,width:n,height:r})=>({x:e,y:t,x2:e+n,y2:t+r}),$M=({x:e,y:t,x2:n,y2:r})=>({x:e,y:t,width:n-e,height:r-t}),$w=e=>({...e.positionAbsolute||{x:0,y:0},width:e.width||0,height:e.height||0}),zq=(e,t)=>$M(qM(Ho(e),Ho(t))),yy=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),r=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*r)},Uq=e=>Yt(e.width)&&Yt(e.height)&&Yt(e.x)&&Yt(e.y),Yt=e=>!isNaN(e)&&isFinite(e),Le=Symbol.for("internals"),FM=["Enter"," ","Escape"],Hq=(e,t)=>{},Gq=e=>"nativeEvent"in e;function vy(e){var i,s;const t=Gq(e)?e.nativeEvent:e,n=((s=(i=t.composedPath)==null?void 0:i.call(t))==null?void 0:s[0])||e.target;return["INPUT","SELECT","TEXTAREA"].includes(n==null?void 0:n.nodeName)||(n==null?void 0:n.hasAttribute("contenteditable"))||!!(n!=null&&n.closest(".nokey"))}const VM=e=>"clientX"in e,Mr=(e,t)=>{var s,o;const n=VM(e),r=n?e.clientX:(s=e.touches)==null?void 0:s[0].clientX,i=n?e.clientY:(o=e.touches)==null?void 0:o[0].clientY;return{x:r-((t==null?void 0:t.left)??0),y:i-((t==null?void 0:t.top)??0)}},Zl=()=>{var e;return typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)==null?void 0:e.indexOf("Mac"))>=0},oa=({id:e,path:t,labelX:n,labelY:r,label:i,labelStyle:s,labelShowBg:o,labelBgStyle:a,labelBgPadding:l,labelBgBorderRadius:u,style:c,markerEnd:d,markerStart:f,interactionWidth:h=20})=>q.createElement(q.Fragment,null,q.createElement("path",{id:e,style:c,d:t,fill:"none",className:"react-flow__edge-path",markerEnd:d,markerStart:f}),h&&q.createElement("path",{d:t,fill:"none",strokeOpacity:0,strokeWidth:h,className:"react-flow__edge-interaction"}),i&&Yt(n)&&Yt(r)?q.createElement(Bq,{x:n,y:r,label:i,labelStyle:s,labelShowBg:o,labelBgStyle:a,labelBgPadding:l,labelBgBorderRadius:u}):null);oa.displayName="BaseEdge";function Bs(e,t,n){return n===void 0?n:r=>{const i=t().edges.find(s=>s.id===e);i&&n(r,{...i})}}function BM({sourceX:e,sourceY:t,targetX:n,targetY:r}){const i=Math.abs(n-e)/2,s=n<e?n+i:n-i,o=Math.abs(r-t)/2,a=r<t?r+o:r-o;return[s,a,i,o]}function zM({sourceX:e,sourceY:t,targetX:n,targetY:r,sourceControlX:i,sourceControlY:s,targetControlX:o,targetControlY:a}){const l=e*.125+i*.375+o*.375+n*.125,u=t*.125+s*.375+a*.375+r*.125,c=Math.abs(l-e),d=Math.abs(u-t);return[l,u,c,d]}var mi;(function(e){e.Strict="strict",e.Loose="loose"})(mi||(mi={}));var ei;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(ei||(ei={}));var Go;(function(e){e.Partial="partial",e.Full="full"})(Go||(Go={}));var yr;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(yr||(yr={}));var Ql;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(Ql||(Ql={}));var ne;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(ne||(ne={}));function Fw({pos:e,x1:t,y1:n,x2:r,y2:i}){return e===ne.Left||e===ne.Right?[.5*(t+r),n]:[t,.5*(n+i)]}function UM({sourceX:e,sourceY:t,sourcePosition:n=ne.Bottom,targetX:r,targetY:i,targetPosition:s=ne.Top}){const[o,a]=Fw({pos:n,x1:e,y1:t,x2:r,y2:i}),[l,u]=Fw({pos:s,x1:r,y1:i,x2:e,y2:t}),[c,d,f,h]=zM({sourceX:e,sourceY:t,targetX:r,targetY:i,sourceControlX:o,sourceControlY:a,targetControlX:l,targetControlY:u});return[`M${e},${t} C${o},${a} ${l},${u} ${r},${i}`,c,d,f,h]}const Zv=S.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,sourcePosition:i=ne.Bottom,targetPosition:s=ne.Top,label:o,labelStyle:a,labelShowBg:l,labelBgStyle:u,labelBgPadding:c,labelBgBorderRadius:d,style:f,markerEnd:h,markerStart:g,interactionWidth:p})=>{const[x,m,v]=UM({sourceX:e,sourceY:t,sourcePosition:i,targetX:n,targetY:r,targetPosition:s});return q.createElement(oa,{path:x,labelX:m,labelY:v,label:o,labelStyle:a,labelShowBg:l,labelBgStyle:u,labelBgPadding:c,labelBgBorderRadius:d,style:f,markerEnd:h,markerStart:g,interactionWidth:p})});Zv.displayName="SimpleBezierEdge";const Vw={[ne.Left]:{x:-1,y:0},[ne.Right]:{x:1,y:0},[ne.Top]:{x:0,y:-1},[ne.Bottom]:{x:0,y:1}},Wq=({source:e,sourcePosition:t=ne.Bottom,target:n})=>t===ne.Left||t===ne.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},Bw=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function Kq({source:e,sourcePosition:t=ne.Bottom,target:n,targetPosition:r=ne.Top,center:i,offset:s}){const o=Vw[t],a=Vw[r],l={x:e.x+o.x*s,y:e.y+o.y*s},u={x:n.x+a.x*s,y:n.y+a.y*s},c=Wq({source:l,sourcePosition:t,target:u}),d=c.x!==0?"x":"y",f=c[d];let h=[],g,p;const x={x:0,y:0},m={x:0,y:0},[v,w,b,_]=BM({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(o[d]*a[d]===-1){g=i.x??v,p=i.y??w;const k=[{x:g,y:l.y},{x:g,y:u.y}],T=[{x:l.x,y:p},{x:u.x,y:p}];o[d]===f?h=d==="x"?k:T:h=d==="x"?T:k}else{const k=[{x:l.x,y:u.y}],T=[{x:u.x,y:l.y}];if(d==="x"?h=o.x===f?T:k:h=o.y===f?k:T,t===r){const F=Math.abs(e[d]-n[d]);if(F<=s){const E=Math.min(s-1,s-F);o[d]===f?x[d]=(l[d]>e[d]?-1:1)*E:m[d]=(u[d]>n[d]?-1:1)*E}}if(t!==r){const F=d==="x"?"y":"x",E=o[d]===a[F],D=l[F]>u[F],P=l[F]<u[F];(o[d]===1&&(!E&&D||E&&P)||o[d]!==1&&(!E&&P||E&&D))&&(h=d==="x"?k:T)}const M={x:l.x+x.x,y:l.y+x.y},R={x:u.x+m.x,y:u.y+m.y},I=Math.max(Math.abs(M.x-h[0].x),Math.abs(R.x-h[0].x)),B=Math.max(Math.abs(M.y-h[0].y),Math.abs(R.y-h[0].y));I>=B?(g=(M.x+R.x)/2,p=h[0].y):(g=h[0].x,p=(M.y+R.y)/2)}return[[e,{x:l.x+x.x,y:l.y+x.y},...h,{x:u.x+m.x,y:u.y+m.y},n],g,p,b,_]}function Yq(e,t,n,r){const i=Math.min(Bw(e,t)/2,Bw(t,n)/2,r),{x:s,y:o}=t;if(e.x===s&&s===n.x||e.y===o&&o===n.y)return`L${s} ${o}`;if(e.y===o){const u=e.x<n.x?-1:1,c=e.y<n.y?1:-1;return`L ${s+i*u},${o}Q ${s},${o} ${s},${o+i*c}`}const a=e.x<n.x?1:-1,l=e.y<n.y?-1:1;return`L ${s},${o+i*l}Q ${s},${o} ${s+i*a},${o}`}function xy({sourceX:e,sourceY:t,sourcePosition:n=ne.Bottom,targetX:r,targetY:i,targetPosition:s=ne.Top,borderRadius:o=5,centerX:a,centerY:l,offset:u=20}){const[c,d,f,h,g]=Kq({source:{x:e,y:t},sourcePosition:n,target:{x:r,y:i},targetPosition:s,center:{x:a,y:l},offset:u});return[c.reduce((x,m,v)=>{let w="";return v>0&&v<c.length-1?w=Yq(c[v-1],m,c[v+1],o):w=`${v===0?"M":"L"}${m.x} ${m.y}`,x+=w,x},""),d,f,h,g]}const Du=S.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,label:i,labelStyle:s,labelShowBg:o,labelBgStyle:a,labelBgPadding:l,labelBgBorderRadius:u,style:c,sourcePosition:d=ne.Bottom,targetPosition:f=ne.Top,markerEnd:h,markerStart:g,pathOptions:p,interactionWidth:x})=>{const[m,v,w]=xy({sourceX:e,sourceY:t,sourcePosition:d,targetX:n,targetY:r,targetPosition:f,borderRadius:p==null?void 0:p.borderRadius,offset:p==null?void 0:p.offset});return q.createElement(oa,{path:m,labelX:v,labelY:w,label:i,labelStyle:s,labelShowBg:o,labelBgStyle:a,labelBgPadding:l,labelBgBorderRadius:u,style:c,markerEnd:h,markerStart:g,interactionWidth:x})});Du.displayName="SmoothStepEdge";const Qv=S.memo(e=>{var t;return q.createElement(Du,{...e,pathOptions:S.useMemo(()=>{var n;return{borderRadius:0,offset:(n=e.pathOptions)==null?void 0:n.offset}},[(t=e.pathOptions)==null?void 0:t.offset])})});Qv.displayName="StepEdge";function Xq({sourceX:e,sourceY:t,targetX:n,targetY:r}){const[i,s,o,a]=BM({sourceX:e,sourceY:t,targetX:n,targetY:r});return[`M ${e},${t}L ${n},${r}`,i,s,o,a]}const Jv=S.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,label:i,labelStyle:s,labelShowBg:o,labelBgStyle:a,labelBgPadding:l,labelBgBorderRadius:u,style:c,markerEnd:d,markerStart:f,interactionWidth:h})=>{const[g,p,x]=Xq({sourceX:e,sourceY:t,targetX:n,targetY:r});return q.createElement(oa,{path:g,labelX:p,labelY:x,label:i,labelStyle:s,labelShowBg:o,labelBgStyle:a,labelBgPadding:l,labelBgBorderRadius:u,style:c,markerEnd:d,markerStart:f,interactionWidth:h})});Jv.displayName="StraightEdge";function Ha(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function zw({pos:e,x1:t,y1:n,x2:r,y2:i,c:s}){switch(e){case ne.Left:return[t-Ha(t-r,s),n];case ne.Right:return[t+Ha(r-t,s),n];case ne.Top:return[t,n-Ha(n-i,s)];case ne.Bottom:return[t,n+Ha(i-n,s)]}}function HM({sourceX:e,sourceY:t,sourcePosition:n=ne.Bottom,targetX:r,targetY:i,targetPosition:s=ne.Top,curvature:o=.25}){const[a,l]=zw({pos:n,x1:e,y1:t,x2:r,y2:i,c:o}),[u,c]=zw({pos:s,x1:r,y1:i,x2:e,y2:t,c:o}),[d,f,h,g]=zM({sourceX:e,sourceY:t,targetX:r,targetY:i,sourceControlX:a,sourceControlY:l,targetControlX:u,targetControlY:c});return[`M${e},${t} C${a},${l} ${u},${c} ${r},${i}`,d,f,h,g]}const Jl=S.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,sourcePosition:i=ne.Bottom,targetPosition:s=ne.Top,label:o,labelStyle:a,labelShowBg:l,labelBgStyle:u,labelBgPadding:c,labelBgBorderRadius:d,style:f,markerEnd:h,markerStart:g,pathOptions:p,interactionWidth:x})=>{const[m,v,w]=HM({sourceX:e,sourceY:t,sourcePosition:i,targetX:n,targetY:r,targetPosition:s,curvature:p==null?void 0:p.curvature});return q.createElement(oa,{path:m,labelX:v,labelY:w,label:o,labelStyle:a,labelShowBg:l,labelBgStyle:u,labelBgPadding:c,labelBgBorderRadius:d,style:f,markerEnd:h,markerStart:g,interactionWidth:x})});Jl.displayName="BezierEdge";const e0=S.createContext(null),Zq=e0.Provider;e0.Consumer;const Qq=()=>S.useContext(e0),Jq=e=>"id"in e&&"source"in e&&"target"in e,e$=({source:e,sourceHandle:t,target:n,targetHandle:r})=>`reactflow__edge-${e}${t||""}-${n}${r||""}`,wy=(e,t)=>typeof e>"u"?"":typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(r=>`${r}=${e[r]}`).join("&")}`,t$=(e,t)=>t.some(n=>n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle)),n$=(e,t)=>{if(!e.source||!e.target)return t;let n;return Jq(e)?n={...e}:n={...e,id:e$(e)},t$(n,t)?t:t.concat(n)},by=({x:e,y:t},[n,r,i],s,[o,a])=>{const l={x:(e-n)/i,y:(t-r)/i};return s?{x:o*Math.round(l.x/o),y:a*Math.round(l.y/a)}:l},GM=({x:e,y:t},[n,r,i])=>({x:e*i+n,y:t*i+r}),oi=(e,t=[0,0])=>{if(!e)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const n=(e.width??0)*t[0],r=(e.height??0)*t[1],i={x:e.position.x-n,y:e.position.y-r};return{...i,positionAbsolute:e.positionAbsolute?{x:e.positionAbsolute.x-n,y:e.positionAbsolute.y-r}:i}},Lu=(e,t=[0,0])=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const n=e.reduce((r,i)=>{const{x:s,y:o}=oi(i,t).positionAbsolute;return qM(r,Ho({x:s,y:o,width:i.width||0,height:i.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return $M(n)},WM=(e,t,[n,r,i]=[0,0,1],s=!1,o=!1,a=[0,0])=>{const l={x:(t.x-n)/i,y:(t.y-r)/i,width:t.width/i,height:t.height/i},u=[];return e.forEach(c=>{const{width:d,height:f,selectable:h=!0,hidden:g=!1}=c;if(o&&!h||g)return!1;const{positionAbsolute:p}=oi(c,a),x={x:p.x,y:p.y,width:d||0,height:f||0},m=yy(l,x),v=typeof d>"u"||typeof f>"u"||d===null||f===null,w=s&&m>0,b=(d||0)*(f||0);(v||w||m>=b||c.dragging)&&u.push(c)}),u},KM=(e,t)=>{const n=e.map(r=>r.id);return t.filter(r=>n.includes(r.source)||n.includes(r.target))},YM=(e,t,n,r,i,s=.1)=>{const o=t/(e.width*(1+s)),a=n/(e.height*(1+s)),l=Math.min(o,a),u=ms(l,r,i),c=e.x+e.width/2,d=e.y+e.height/2,f=t/2-c*u,h=n/2-d*u;return{x:f,y:h,zoom:u}},Wr=(e,t=0)=>e.transition().duration(t);function Uw(e,t,n,r){return(t[n]||[]).reduce((i,s)=>{var o,a;return`${e.id}-${s.id}-${n}`!==r&&i.push({id:s.id||null,type:n,nodeId:e.id,x:(((o=e.positionAbsolute)==null?void 0:o.x)??0)+s.x+s.width/2,y:(((a=e.positionAbsolute)==null?void 0:a.y)??0)+s.y+s.height/2}),i},[])}function r$(e,t,n,r,i,s){const{x:o,y:a}=Mr(e),u=t.elementsFromPoint(o,a).find(g=>g.classList.contains("react-flow__handle"));if(u){const g=u.getAttribute("data-nodeid");if(g){const p=t0(void 0,u),x=u.getAttribute("data-handleid"),m=s({nodeId:g,id:x,type:p});if(m){const v=i.find(w=>w.nodeId===g&&w.type===p&&w.id===x);return{handle:{id:x,type:p,nodeId:g,x:(v==null?void 0:v.x)||n.x,y:(v==null?void 0:v.y)||n.y},validHandleResult:m}}}}let c=[],d=1/0;if(i.forEach(g=>{const p=Math.sqrt((g.x-n.x)**2+(g.y-n.y)**2);if(p<=r){const x=s(g);p<=d&&(p<d?c=[{handle:g,validHandleResult:x}]:p===d&&c.push({handle:g,validHandleResult:x}),d=p)}}),!c.length)return{handle:null,validHandleResult:XM()};if(c.length===1)return c[0];const f=c.some(({validHandleResult:g})=>g.isValid),h=c.some(({handle:g})=>g.type==="target");return c.find(({handle:g,validHandleResult:p})=>h?g.type==="target":f?p.isValid:!0)||c[0]}const i$={source:null,target:null,sourceHandle:null,targetHandle:null},XM=()=>({handleDomNode:null,isValid:!1,connection:i$,endHandle:null});function ZM(e,t,n,r,i,s,o){const a=i==="target",l=o.querySelector(`.react-flow__handle[data-id="${e==null?void 0:e.nodeId}-${e==null?void 0:e.id}-${e==null?void 0:e.type}"]`),u={...XM(),handleDomNode:l};if(l){const c=t0(void 0,l),d=l.getAttribute("data-nodeid"),f=l.getAttribute("data-handleid"),h=l.classList.contains("connectable"),g=l.classList.contains("connectableend"),p={source:a?d:n,sourceHandle:a?f:r,target:a?n:d,targetHandle:a?r:f};u.connection=p,h&&g&&(t===mi.Strict?a&&c==="source"||!a&&c==="target":d!==n||f!==r)&&(u.endHandle={nodeId:d,handleId:f,type:c},u.isValid=s(p))}return u}function s$({nodes:e,nodeId:t,handleId:n,handleType:r}){return e.reduce((i,s)=>{if(s[Le]){const{handleBounds:o}=s[Le];let a=[],l=[];o&&(a=Uw(s,o,"source",`${t}-${n}-${r}`),l=Uw(s,o,"target",`${t}-${n}-${r}`)),i.push(...a,...l)}return i},[])}function t0(e,t){return e||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function Jc(e){e==null||e.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function o$(e,t){let n=null;return t?n="valid":e&&!t&&(n="invalid"),n}function QM({event:e,handleId:t,nodeId:n,onConnect:r,isTarget:i,getState:s,setState:o,isValidConnection:a,edgeUpdaterType:l,onReconnectEnd:u}){const c=OM(e.target),{connectionMode:d,domNode:f,autoPanOnConnect:h,connectionRadius:g,onConnectStart:p,panBy:x,getNodes:m,cancelConnection:v}=s();let w=0,b;const{x:_,y:C}=Mr(e),k=c==null?void 0:c.elementFromPoint(_,C),T=t0(l,k),M=f==null?void 0:f.getBoundingClientRect();if(!M||!T)return;let R,I=Mr(e,M),B=!1,F=null,E=!1,D=null;const P=s$({nodes:m(),nodeId:n,handleId:t,handleType:T}),L=()=>{if(!h)return;const[j,$]=LM(I,M);x({x:j,y:$}),w=requestAnimationFrame(L)};o({connectionPosition:I,connectionStatus:null,connectionNodeId:n,connectionHandleId:t,connectionHandleType:T,connectionStartHandle:{nodeId:n,handleId:t,type:T},connectionEndHandle:null}),p==null||p(e,{nodeId:n,handleId:t,handleType:T});function A(j){const{transform:$}=s();I=Mr(j,M);const{handle:V,validHandleResult:O}=r$(j,c,by(I,$,!1,[1,1]),g,P,G=>ZM(G,d,n,t,i?"target":"source",a,c));if(b=V,B||(L(),B=!0),D=O.handleDomNode,F=O.connection,E=O.isValid,o({connectionPosition:b&&E?GM({x:b.x,y:b.y},$):I,connectionStatus:o$(!!b,E),connectionEndHandle:O.endHandle}),!b&&!E&&!D)return Jc(R);F.source!==F.target&&D&&(Jc(R),R=D,D.classList.add("connecting","react-flow__handle-connecting"),D.classList.toggle("valid",E),D.classList.toggle("react-flow__handle-valid",E))}function N(j){var $,V;(b||D)&&F&&E&&(r==null||r(F)),(V=($=s()).onConnectEnd)==null||V.call($,j),l&&(u==null||u(j)),Jc(R),v(),cancelAnimationFrame(w),B=!1,E=!1,F=null,D=null,c.removeEventListener("mousemove",A),c.removeEventListener("mouseup",N),c.removeEventListener("touchmove",A),c.removeEventListener("touchend",N)}c.addEventListener("mousemove",A),c.addEventListener("mouseup",N),c.addEventListener("touchmove",A),c.addEventListener("touchend",N)}const Hw=()=>!0,a$=e=>({connectionStartHandle:e.connectionStartHandle,connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName}),l$=(e,t,n)=>r=>{const{connectionStartHandle:i,connectionEndHandle:s,connectionClickStartHandle:o}=r;return{connecting:(i==null?void 0:i.nodeId)===e&&(i==null?void 0:i.handleId)===t&&(i==null?void 0:i.type)===n||(s==null?void 0:s.nodeId)===e&&(s==null?void 0:s.handleId)===t&&(s==null?void 0:s.type)===n,clickConnecting:(o==null?void 0:o.nodeId)===e&&(o==null?void 0:o.handleId)===t&&(o==null?void 0:o.type)===n}},JM=S.forwardRef(({type:e="source",position:t=ne.Top,isValidConnection:n,isConnectable:r=!0,isConnectableStart:i=!0,isConnectableEnd:s=!0,id:o,onConnect:a,children:l,className:u,onMouseDown:c,onTouchStart:d,...f},h)=>{var M,R;const g=o||null,p=e==="target",x=Xe(),m=Qq(),{connectOnClick:v,noPanClassName:w}=Ee(a$,et),{connecting:b,clickConnecting:_}=Ee(l$(m,g,e),et);m||(R=(M=x.getState()).onError)==null||R.call(M,"010",Jn.error010());const C=I=>{const{defaultEdgeOptions:B,onConnect:F,hasDefaultEdges:E}=x.getState(),D={...B,...I};if(E){const{edges:P,setEdges:L}=x.getState();L(n$(D,P))}F==null||F(D),a==null||a(D)},k=I=>{if(!m)return;const B=VM(I);i&&(B&&I.button===0||!B)&&QM({event:I,handleId:g,nodeId:m,onConnect:C,isTarget:p,getState:x.getState,setState:x.setState,isValidConnection:n||x.getState().isValidConnection||Hw}),B?c==null||c(I):d==null||d(I)},T=I=>{const{onClickConnectStart:B,onClickConnectEnd:F,connectionClickStartHandle:E,connectionMode:D,isValidConnection:P}=x.getState();if(!m||!E&&!i)return;if(!E){B==null||B(I,{nodeId:m,handleId:g,handleType:e}),x.setState({connectionClickStartHandle:{nodeId:m,type:e,handleId:g}});return}const L=OM(I.target),A=n||P||Hw,{connection:N,isValid:j}=ZM({nodeId:m,id:g,type:e},D,E.nodeId,E.handleId||null,E.type,A,L);j&&C(N),F==null||F(I),x.setState({connectionClickStartHandle:null})};return q.createElement("div",{"data-handleid":g,"data-nodeid":m,"data-handlepos":t,"data-id":`${m}-${g}-${e}`,className:ot(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",w,u,{source:!p,target:p,connectable:r,connectablestart:i,connectableend:s,connecting:_,connectionindicator:r&&(i&&!b||s&&b)}]),onMouseDown:k,onTouchStart:k,onClick:v?T:void 0,ref:h,...f},l)});JM.displayName="Handle";var eu=S.memo(JM);const eA=({data:e,isConnectable:t,targetPosition:n=ne.Top,sourcePosition:r=ne.Bottom})=>q.createElement(q.Fragment,null,q.createElement(eu,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label,q.createElement(eu,{type:"source",position:r,isConnectable:t}));eA.displayName="DefaultNode";var Sy=S.memo(eA);const tA=({data:e,isConnectable:t,sourcePosition:n=ne.Bottom})=>q.createElement(q.Fragment,null,e==null?void 0:e.label,q.createElement(eu,{type:"source",position:n,isConnectable:t}));tA.displayName="InputNode";var nA=S.memo(tA);const rA=({data:e,isConnectable:t,targetPosition:n=ne.Top})=>q.createElement(q.Fragment,null,q.createElement(eu,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label);rA.displayName="OutputNode";var iA=S.memo(rA);const n0=()=>null;n0.displayName="GroupNode";const u$=e=>({selectedNodes:e.getNodes().filter(t=>t.selected),selectedEdges:e.edges.filter(t=>t.selected).map(t=>({...t}))}),Ga=e=>e.id;function c$(e,t){return et(e.selectedNodes.map(Ga),t.selectedNodes.map(Ga))&&et(e.selectedEdges.map(Ga),t.selectedEdges.map(Ga))}const sA=S.memo(({onSelectionChange:e})=>{const t=Xe(),{selectedNodes:n,selectedEdges:r}=Ee(u$,c$);return S.useEffect(()=>{const i={nodes:n,edges:r};e==null||e(i),t.getState().onSelectionChange.forEach(s=>s(i))},[n,r,e]),null});sA.displayName="SelectionListener";const d$=e=>!!e.onSelectionChange;function f$({onSelectionChange:e}){const t=Ee(d$);return e||t?q.createElement(sA,{onSelectionChange:e}):null}const h$=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset});function Ni(e,t){S.useEffect(()=>{typeof e<"u"&&t(e)},[e])}function ce(e,t,n){S.useEffect(()=>{typeof t<"u"&&n({[e]:t})},[t])}const p$=({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,onConnect:i,onConnectStart:s,onConnectEnd:o,onClickConnectStart:a,onClickConnectEnd:l,nodesDraggable:u,nodesConnectable:c,nodesFocusable:d,edgesFocusable:f,edgesUpdatable:h,elevateNodesOnSelect:g,minZoom:p,maxZoom:x,nodeExtent:m,onNodesChange:v,onEdgesChange:w,elementsSelectable:b,connectionMode:_,snapGrid:C,snapToGrid:k,translateExtent:T,connectOnClick:M,defaultEdgeOptions:R,fitView:I,fitViewOptions:B,onNodesDelete:F,onEdgesDelete:E,onNodeDrag:D,onNodeDragStart:P,onNodeDragStop:L,onSelectionDrag:A,onSelectionDragStart:N,onSelectionDragStop:j,noPanClassName:$,nodeOrigin:V,rfId:O,autoPanOnConnect:G,autoPanOnNodeDrag:Y,onError:ee,connectionRadius:se,isValidConnection:pe,nodeDragThreshold:te})=>{const{setNodes:le,setEdges:ve,setDefaultNodesAndEdges:xe,setMinZoom:H,setMaxZoom:Q,setTranslateExtent:z,setNodeExtent:re,reset:X}=Ee(h$,et),Z=Xe();return S.useEffect(()=>{const de=r==null?void 0:r.map(be=>({...be,...R}));return xe(n,de),()=>{X()}},[]),ce("defaultEdgeOptions",R,Z.setState),ce("connectionMode",_,Z.setState),ce("onConnect",i,Z.setState),ce("onConnectStart",s,Z.setState),ce("onConnectEnd",o,Z.setState),ce("onClickConnectStart",a,Z.setState),ce("onClickConnectEnd",l,Z.setState),ce("nodesDraggable",u,Z.setState),ce("nodesConnectable",c,Z.setState),ce("nodesFocusable",d,Z.setState),ce("edgesFocusable",f,Z.setState),ce("edgesUpdatable",h,Z.setState),ce("elementsSelectable",b,Z.setState),ce("elevateNodesOnSelect",g,Z.setState),ce("snapToGrid",k,Z.setState),ce("snapGrid",C,Z.setState),ce("onNodesChange",v,Z.setState),ce("onEdgesChange",w,Z.setState),ce("connectOnClick",M,Z.setState),ce("fitViewOnInit",I,Z.setState),ce("fitViewOnInitOptions",B,Z.setState),ce("onNodesDelete",F,Z.setState),ce("onEdgesDelete",E,Z.setState),ce("onNodeDrag",D,Z.setState),ce("onNodeDragStart",P,Z.setState),ce("onNodeDragStop",L,Z.setState),ce("onSelectionDrag",A,Z.setState),ce("onSelectionDragStart",N,Z.setState),ce("onSelectionDragStop",j,Z.setState),ce("noPanClassName",$,Z.setState),ce("nodeOrigin",V,Z.setState),ce("rfId",O,Z.setState),ce("autoPanOnConnect",G,Z.setState),ce("autoPanOnNodeDrag",Y,Z.setState),ce("onError",ee,Z.setState),ce("connectionRadius",se,Z.setState),ce("isValidConnection",pe,Z.setState),ce("nodeDragThreshold",te,Z.setState),Ni(e,le),Ni(t,ve),Ni(p,H),Ni(x,Q),Ni(T,z),Ni(m,re),null},Gw={display:"none"},m$={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},oA="react-flow__node-desc",aA="react-flow__edge-desc",g$="react-flow__aria-live",y$=e=>e.ariaLiveMessage;function v$({rfId:e}){const t=Ee(y$);return q.createElement("div",{id:`${g$}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:m$},t)}function x$({rfId:e,disableKeyboardA11y:t}){return q.createElement(q.Fragment,null,q.createElement("div",{id:`${oA}-${e}`,style:Gw},"Press enter or space to select a node.",!t&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),q.createElement("div",{id:`${aA}-${e}`,style:Gw},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!t&&q.createElement(v$,{rfId:e}))}var Wo=(e=null,t={actInsideInputWithModifier:!0})=>{const[n,r]=S.useState(!1),i=S.useRef(!1),s=S.useRef(new Set([])),[o,a]=S.useMemo(()=>{if(e!==null){const u=(Array.isArray(e)?e:[e]).filter(d=>typeof d=="string").map(d=>d.split("+")),c=u.reduce((d,f)=>d.concat(...f),[]);return[u,c]}return[[],[]]},[e]);return S.useEffect(()=>{const l=typeof document<"u"?document:null,u=(t==null?void 0:t.target)||l;if(e!==null){const c=h=>{if(i.current=h.ctrlKey||h.metaKey||h.shiftKey,(!i.current||i.current&&!t.actInsideInputWithModifier)&&vy(h))return!1;const p=Kw(h.code,a);s.current.add(h[p]),Ww(o,s.current,!1)&&(h.preventDefault(),r(!0))},d=h=>{if((!i.current||i.current&&!t.actInsideInputWithModifier)&&vy(h))return!1;const p=Kw(h.code,a);Ww(o,s.current,!0)?(r(!1),s.current.clear()):s.current.delete(h[p]),h.key==="Meta"&&s.current.clear(),i.current=!1},f=()=>{s.current.clear(),r(!1)};return u==null||u.addEventListener("keydown",c),u==null||u.addEventListener("keyup",d),window.addEventListener("blur",f),()=>{u==null||u.removeEventListener("keydown",c),u==null||u.removeEventListener("keyup",d),window.removeEventListener("blur",f)}}},[e,r]),n};function Ww(e,t,n){return e.filter(r=>n||r.length===t.size).some(r=>r.every(i=>t.has(i)))}function Kw(e,t){return t.includes(e)?"code":"key"}function lA(e,t,n,r){var a,l;const i=e.parentNode||e.parentId;if(!i)return n;const s=t.get(i),o=oi(s,r);return lA(s,t,{x:(n.x??0)+o.x,y:(n.y??0)+o.y,z:(((a=s[Le])==null?void 0:a.z)??0)>(n.z??0)?((l=s[Le])==null?void 0:l.z)??0:n.z??0},r)}function uA(e,t,n){e.forEach(r=>{var s;const i=r.parentNode||r.parentId;if(i&&!e.has(i))throw new Error(`Parent node ${i} not found`);if(i||n!=null&&n[r.id]){const{x:o,y:a,z:l}=lA(r,e,{...r.position,z:((s=r[Le])==null?void 0:s.z)??0},t);r.positionAbsolute={x:o,y:a},r[Le].z=l,n!=null&&n[r.id]&&(r[Le].isParent=!0)}})}function ed(e,t,n,r){const i=new Map,s={},o=r?1e3:0;return e.forEach(a=>{var h;const l=(Yt(a.zIndex)?a.zIndex:0)+(a.selected?o:0),u=t.get(a.id),c={...a,positionAbsolute:{x:a.position.x,y:a.position.y}},d=a.parentNode||a.parentId;d&&(s[d]=!0);const f=(u==null?void 0:u.type)&&(u==null?void 0:u.type)!==a.type;Object.defineProperty(c,Le,{enumerable:!1,value:{handleBounds:f||(h=u==null?void 0:u[Le])==null?void 0:h.handleBounds,z:l}}),i.set(a.id,c)}),uA(i,n,s),i}function cA(e,t={}){const{getNodes:n,width:r,height:i,minZoom:s,maxZoom:o,d3Zoom:a,d3Selection:l,fitViewOnInitDone:u,fitViewOnInit:c,nodeOrigin:d}=e(),f=t.initial&&!u&&c;if(a&&l&&(f||!t.initial)){const g=n().filter(x=>{var v;const m=t.includeHiddenNodes?x.width&&x.height:!x.hidden;return(v=t.nodes)!=null&&v.length?m&&t.nodes.some(w=>w.id===x.id):m}),p=g.every(x=>x.width&&x.height);if(g.length>0&&p){const x=Lu(g,d),{x:m,y:v,zoom:w}=YM(x,r,i,t.minZoom??s,t.maxZoom??o,t.padding??.1),b=Hn.translate(m,v).scale(w);return typeof t.duration=="number"&&t.duration>0?a.transform(Wr(l,t.duration),b):a.transform(l,b),!0}}return!1}function w$(e,t){return e.forEach(n=>{const r=t.get(n.id);r&&t.set(r.id,{...r,[Le]:r[Le],selected:n.selected})}),new Map(t)}function b$(e,t){return t.map(n=>{const r=e.find(i=>i.id===n.id);return r&&(n.selected=r.selected),n})}function Wa({changedNodes:e,changedEdges:t,get:n,set:r}){const{nodeInternals:i,edges:s,onNodesChange:o,onEdgesChange:a,hasDefaultNodes:l,hasDefaultEdges:u}=n();e!=null&&e.length&&(l&&r({nodeInternals:w$(e,i)}),o==null||o(e)),t!=null&&t.length&&(u&&r({edges:b$(t,s)}),a==null||a(t))}const Mi=()=>{},S$={zoomIn:Mi,zoomOut:Mi,zoomTo:Mi,getZoom:()=>1,setViewport:Mi,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:Mi,fitBounds:Mi,project:e=>e,screenToFlowPosition:e=>e,flowToScreenPosition:e=>e,viewportInitialized:!1},_$=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection}),E$=()=>{const e=Xe(),{d3Zoom:t,d3Selection:n}=Ee(_$,et);return S.useMemo(()=>n&&t?{zoomIn:i=>t.scaleBy(Wr(n,i==null?void 0:i.duration),1.2),zoomOut:i=>t.scaleBy(Wr(n,i==null?void 0:i.duration),1/1.2),zoomTo:(i,s)=>t.scaleTo(Wr(n,s==null?void 0:s.duration),i),getZoom:()=>e.getState().transform[2],setViewport:(i,s)=>{const[o,a,l]=e.getState().transform,u=Hn.translate(i.x??o,i.y??a).scale(i.zoom??l);t.transform(Wr(n,s==null?void 0:s.duration),u)},getViewport:()=>{const[i,s,o]=e.getState().transform;return{x:i,y:s,zoom:o}},fitView:i=>cA(e.getState,i),setCenter:(i,s,o)=>{const{width:a,height:l,maxZoom:u}=e.getState(),c=typeof(o==null?void 0:o.zoom)<"u"?o.zoom:u,d=a/2-i*c,f=l/2-s*c,h=Hn.translate(d,f).scale(c);t.transform(Wr(n,o==null?void 0:o.duration),h)},fitBounds:(i,s)=>{const{width:o,height:a,minZoom:l,maxZoom:u}=e.getState(),{x:c,y:d,zoom:f}=YM(i,o,a,l,u,(s==null?void 0:s.padding)??.1),h=Hn.translate(c,d).scale(f);t.transform(Wr(n,s==null?void 0:s.duration),h)},project:i=>{const{transform:s,snapToGrid:o,snapGrid:a}=e.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),by(i,s,o,a)},screenToFlowPosition:i=>{const{transform:s,snapToGrid:o,snapGrid:a,domNode:l}=e.getState();if(!l)return i;const{x:u,y:c}=l.getBoundingClientRect(),d={x:i.x-u,y:i.y-c};return by(d,s,o,a)},flowToScreenPosition:i=>{const{transform:s,domNode:o}=e.getState();if(!o)return i;const{x:a,y:l}=o.getBoundingClientRect(),u=GM(i,s);return{x:u.x+a,y:u.y+l}},viewportInitialized:!0}:S$,[t,n])};function r0(){const e=E$(),t=Xe(),n=S.useCallback(()=>t.getState().getNodes().map(p=>({...p})),[]),r=S.useCallback(p=>t.getState().nodeInternals.get(p),[]),i=S.useCallback(()=>{const{edges:p=[]}=t.getState();return p.map(x=>({...x}))},[]),s=S.useCallback(p=>{const{edges:x=[]}=t.getState();return x.find(m=>m.id===p)},[]),o=S.useCallback(p=>{const{getNodes:x,setNodes:m,hasDefaultNodes:v,onNodesChange:w}=t.getState(),b=x(),_=typeof p=="function"?p(b):p;if(v)m(_);else if(w){const C=_.length===0?b.map(k=>({type:"remove",id:k.id})):_.map(k=>({item:k,type:"reset"}));w(C)}},[]),a=S.useCallback(p=>{const{edges:x=[],setEdges:m,hasDefaultEdges:v,onEdgesChange:w}=t.getState(),b=typeof p=="function"?p(x):p;if(v)m(b);else if(w){const _=b.length===0?x.map(C=>({type:"remove",id:C.id})):b.map(C=>({item:C,type:"reset"}));w(_)}},[]),l=S.useCallback(p=>{const x=Array.isArray(p)?p:[p],{getNodes:m,setNodes:v,hasDefaultNodes:w,onNodesChange:b}=t.getState();if(w){const C=[...m(),...x];v(C)}else if(b){const _=x.map(C=>({item:C,type:"add"}));b(_)}},[]),u=S.useCallback(p=>{const x=Array.isArray(p)?p:[p],{edges:m=[],setEdges:v,hasDefaultEdges:w,onEdgesChange:b}=t.getState();if(w)v([...m,...x]);else if(b){const _=x.map(C=>({item:C,type:"add"}));b(_)}},[]),c=S.useCallback(()=>{const{getNodes:p,edges:x=[],transform:m}=t.getState(),[v,w,b]=m;return{nodes:p().map(_=>({..._})),edges:x.map(_=>({..._})),viewport:{x:v,y:w,zoom:b}}},[]),d=S.useCallback(({nodes:p,edges:x})=>{const{nodeInternals:m,getNodes:v,edges:w,hasDefaultNodes:b,hasDefaultEdges:_,onNodesDelete:C,onEdgesDelete:k,onNodesChange:T,onEdgesChange:M}=t.getState(),R=(p||[]).map(D=>D.id),I=(x||[]).map(D=>D.id),B=v().reduce((D,P)=>{const L=P.parentNode||P.parentId,A=!R.includes(P.id)&&L&&D.find(j=>j.id===L);return(typeof P.deletable=="boolean"?P.deletable:!0)&&(R.includes(P.id)||A)&&D.push(P),D},[]),F=w.filter(D=>typeof D.deletable=="boolean"?D.deletable:!0),E=F.filter(D=>I.includes(D.id));if(B||E){const D=KM(B,F),P=[...E,...D],L=P.reduce((A,N)=>(A.includes(N.id)||A.push(N.id),A),[]);if((_||b)&&(_&&t.setState({edges:w.filter(A=>!L.includes(A.id))}),b&&(B.forEach(A=>{m.delete(A.id)}),t.setState({nodeInternals:new Map(m)}))),L.length>0&&(k==null||k(P),M&&M(L.map(A=>({id:A,type:"remove"})))),B.length>0&&(C==null||C(B),T)){const A=B.map(N=>({id:N.id,type:"remove"}));T(A)}}},[]),f=S.useCallback(p=>{const x=Uq(p),m=x?null:t.getState().nodeInternals.get(p.id);return!x&&!m?[null,null,x]:[x?p:$w(m),m,x]},[]),h=S.useCallback((p,x=!0,m)=>{const[v,w,b]=f(p);return v?(m||t.getState().getNodes()).filter(_=>{if(!b&&(_.id===w.id||!_.positionAbsolute))return!1;const C=$w(_),k=yy(C,v);return x&&k>0||k>=v.width*v.height}):[]},[]),g=S.useCallback((p,x,m=!0)=>{const[v]=f(p);if(!v)return!1;const w=yy(v,x);return m&&w>0||w>=v.width*v.height},[]);return S.useMemo(()=>({...e,getNodes:n,getNode:r,getEdges:i,getEdge:s,setNodes:o,setEdges:a,addNodes:l,addEdges:u,toObject:c,deleteElements:d,getIntersectingNodes:h,isNodeIntersecting:g}),[e,n,r,i,s,o,a,l,u,c,d,h,g])}const C$={actInsideInputWithModifier:!1};var k$=({deleteKeyCode:e,multiSelectionKeyCode:t})=>{const n=Xe(),{deleteElements:r}=r0(),i=Wo(e,C$),s=Wo(t);S.useEffect(()=>{if(i){const{edges:o,getNodes:a}=n.getState(),l=a().filter(c=>c.selected),u=o.filter(c=>c.selected);r({nodes:l,edges:u}),n.setState({nodesSelectionActive:!1})}},[i]),S.useEffect(()=>{n.setState({multiSelectionActive:s})},[s])};function T$(e){const t=Xe();S.useEffect(()=>{let n;const r=()=>{var s,o;if(!e.current)return;const i=Yv(e.current);(i.height===0||i.width===0)&&((o=(s=t.getState()).onError)==null||o.call(s,"004",Jn.error004())),t.setState({width:i.width||500,height:i.height||500})};return r(),window.addEventListener("resize",r),e.current&&(n=new ResizeObserver(()=>r()),n.observe(e.current)),()=>{window.removeEventListener("resize",r),n&&e.current&&n.unobserve(e.current)}},[])}const i0={position:"absolute",width:"100%",height:"100%",top:0,left:0},N$=(e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,Ka=e=>({x:e.x,y:e.y,zoom:e.k}),Ai=(e,t)=>e.target.closest(`.${t}`),Yw=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),Xw=e=>{const t=e.ctrlKey&&Zl()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t},M$=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection,d3ZoomHandler:e.d3ZoomHandler,userSelectionActive:e.userSelectionActive}),A$=({onMove:e,onMoveStart:t,onMoveEnd:n,onPaneContextMenu:r,zoomOnScroll:i=!0,zoomOnPinch:s=!0,panOnScroll:o=!1,panOnScrollSpeed:a=.5,panOnScrollMode:l=ei.Free,zoomOnDoubleClick:u=!0,elementsSelectable:c,panOnDrag:d=!0,defaultViewport:f,translateExtent:h,minZoom:g,maxZoom:p,zoomActivationKeyCode:x,preventScrolling:m=!0,children:v,noWheelClassName:w,noPanClassName:b})=>{const _=S.useRef(),C=Xe(),k=S.useRef(!1),T=S.useRef(!1),M=S.useRef(null),R=S.useRef({x:0,y:0,zoom:0}),{d3Zoom:I,d3Selection:B,d3ZoomHandler:F,userSelectionActive:E}=Ee(M$,et),D=Wo(x),P=S.useRef(0),L=S.useRef(!1),A=S.useRef();return T$(M),S.useEffect(()=>{if(M.current){const N=M.current.getBoundingClientRect(),j=jM().scaleExtent([g,p]).translateExtent(h),$=Wt(M.current).call(j),V=Hn.translate(f.x,f.y).scale(ms(f.zoom,g,p)),O=[[0,0],[N.width,N.height]],G=j.constrain()(V,O,h);j.transform($,G),j.wheelDelta(Xw),C.setState({d3Zoom:j,d3Selection:$,d3ZoomHandler:$.on("wheel.zoom"),transform:[G.x,G.y,G.k],domNode:M.current.closest(".react-flow")})}},[]),S.useEffect(()=>{B&&I&&(o&&!D&&!E?B.on("wheel.zoom",N=>{if(Ai(N,w))return!1;N.preventDefault(),N.stopImmediatePropagation();const j=B.property("__zoom").k||1;if(N.ctrlKey&&s){const pe=cn(N),te=Xw(N),le=j*Math.pow(2,te);I.scaleTo(B,le,pe,N);return}const $=N.deltaMode===1?20:1;let V=l===ei.Vertical?0:N.deltaX*$,O=l===ei.Horizontal?0:N.deltaY*$;!Zl()&&N.shiftKey&&l!==ei.Vertical&&(V=N.deltaY*$,O=0),I.translateBy(B,-(V/j)*a,-(O/j)*a,{internal:!0});const G=Ka(B.property("__zoom")),{onViewportChangeStart:Y,onViewportChange:ee,onViewportChangeEnd:se}=C.getState();clearTimeout(A.current),L.current||(L.current=!0,t==null||t(N,G),Y==null||Y(G)),L.current&&(e==null||e(N,G),ee==null||ee(G),A.current=setTimeout(()=>{n==null||n(N,G),se==null||se(G),L.current=!1},150))},{passive:!1}):typeof F<"u"&&B.on("wheel.zoom",function(N,j){if(!m&&N.type==="wheel"&&!N.ctrlKey||Ai(N,w))return null;N.preventDefault(),F.call(this,N,j)},{passive:!1}))},[E,o,l,B,I,F,D,s,m,w,t,e,n]),S.useEffect(()=>{I&&I.on("start",N=>{var V,O;if(!N.sourceEvent||N.sourceEvent.internal)return null;P.current=(V=N.sourceEvent)==null?void 0:V.button;const{onViewportChangeStart:j}=C.getState(),$=Ka(N.transform);k.current=!0,R.current=$,((O=N.sourceEvent)==null?void 0:O.type)==="mousedown"&&C.setState({paneDragging:!0}),j==null||j($),t==null||t(N.sourceEvent,$)})},[I,t]),S.useEffect(()=>{I&&(E&&!k.current?I.on("zoom",null):E||I.on("zoom",N=>{var $;const{onViewportChange:j}=C.getState();if(C.setState({transform:[N.transform.x,N.transform.y,N.transform.k]}),T.current=!!(r&&Yw(d,P.current??0)),(e||j)&&!(($=N.sourceEvent)!=null&&$.internal)){const V=Ka(N.transform);j==null||j(V),e==null||e(N.sourceEvent,V)}}))},[E,I,e,d,r]),S.useEffect(()=>{I&&I.on("end",N=>{if(!N.sourceEvent||N.sourceEvent.internal)return null;const{onViewportChangeEnd:j}=C.getState();if(k.current=!1,C.setState({paneDragging:!1}),r&&Yw(d,P.current??0)&&!T.current&&r(N.sourceEvent),T.current=!1,(n||j)&&N$(R.current,N.transform)){const $=Ka(N.transform);R.current=$,clearTimeout(_.current),_.current=setTimeout(()=>{j==null||j($),n==null||n(N.sourceEvent,$)},o?150:0)}})},[I,o,d,n,r]),S.useEffect(()=>{I&&I.filter(N=>{const j=D||i,$=s&&N.ctrlKey;if((d===!0||Array.isArray(d)&&d.includes(1))&&N.button===1&&N.type==="mousedown"&&(Ai(N,"react-flow__node")||Ai(N,"react-flow__edge")))return!0;if(!d&&!j&&!o&&!u&&!s||E||!u&&N.type==="dblclick"||Ai(N,w)&&N.type==="wheel"||Ai(N,b)&&(N.type!=="wheel"||o&&N.type==="wheel"&&!D)||!s&&N.ctrlKey&&N.type==="wheel"||!j&&!o&&!$&&N.type==="wheel"||!d&&(N.type==="mousedown"||N.type==="touchstart")||Array.isArray(d)&&!d.includes(N.button)&&N.type==="mousedown")return!1;const V=Array.isArray(d)&&d.includes(N.button)||!N.button||N.button<=1;return(!N.ctrlKey||N.type==="wheel")&&V})},[E,I,i,s,o,u,d,c,D]),q.createElement("div",{className:"react-flow__renderer",ref:M,style:i0},v)},R$=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function P$(){const{userSelectionActive:e,userSelectionRect:t}=Ee(R$,et);return e&&t?q.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}function Zw(e,t){const n=t.parentNode||t.parentId,r=e.find(i=>i.id===n);if(r){const i=t.position.x+t.width-r.width,s=t.position.y+t.height-r.height;if(i>0||s>0||t.position.x<0||t.position.y<0){if(r.style={...r.style},r.style.width=r.style.width??r.width,r.style.height=r.style.height??r.height,i>0&&(r.style.width+=i),s>0&&(r.style.height+=s),t.position.x<0){const o=Math.abs(t.position.x);r.position.x=r.position.x-o,r.style.width+=o,t.position.x=0}if(t.position.y<0){const o=Math.abs(t.position.y);r.position.y=r.position.y-o,r.style.height+=o,t.position.y=0}r.width=r.style.width,r.height=r.style.height}}}function I$(e,t){if(e.some(r=>r.type==="reset"))return e.filter(r=>r.type==="reset").map(r=>r.item);const n=e.filter(r=>r.type==="add").map(r=>r.item);return t.reduce((r,i)=>{const s=e.filter(a=>a.id===i.id);if(s.length===0)return r.push(i),r;const o={...i};for(const a of s)if(a)switch(a.type){case"select":{o.selected=a.selected;break}case"position":{typeof a.position<"u"&&(o.position=a.position),typeof a.positionAbsolute<"u"&&(o.positionAbsolute=a.positionAbsolute),typeof a.dragging<"u"&&(o.dragging=a.dragging),o.expandParent&&Zw(r,o);break}case"dimensions":{typeof a.dimensions<"u"&&(o.width=a.dimensions.width,o.height=a.dimensions.height),typeof a.updateStyle<"u"&&(o.style={...o.style||{},...a.dimensions}),typeof a.resizing=="boolean"&&(o.resizing=a.resizing),o.expandParent&&Zw(r,o);break}case"remove":return r}return r.push(o),r},n)}function j$(e,t){return I$(e,t)}const pr=(e,t)=>({id:e,type:"select",selected:t});function Ui(e,t){return e.reduce((n,r)=>{const i=t.includes(r.id);return!r.selected&&i?(r.selected=!0,n.push(pr(r.id,!0))):r.selected&&!i&&(r.selected=!1,n.push(pr(r.id,!1))),n},[])}const td=(e,t)=>n=>{n.target===t.current&&(e==null||e(n))},D$=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,dragging:e.paneDragging}),dA=S.memo(({isSelecting:e,selectionMode:t=Go.Full,panOnDrag:n,onSelectionStart:r,onSelectionEnd:i,onPaneClick:s,onPaneContextMenu:o,onPaneScroll:a,onPaneMouseEnter:l,onPaneMouseMove:u,onPaneMouseLeave:c,children:d})=>{const f=S.useRef(null),h=Xe(),g=S.useRef(0),p=S.useRef(0),x=S.useRef(),{userSelectionActive:m,elementsSelectable:v,dragging:w}=Ee(D$,et),b=()=>{h.setState({userSelectionActive:!1,userSelectionRect:null}),g.current=0,p.current=0},_=F=>{s==null||s(F),h.getState().resetSelectedElements(),h.setState({nodesSelectionActive:!1})},C=F=>{if(Array.isArray(n)&&(n!=null&&n.includes(2))){F.preventDefault();return}o==null||o(F)},k=a?F=>a(F):void 0,T=F=>{const{resetSelectedElements:E,domNode:D}=h.getState();if(x.current=D==null?void 0:D.getBoundingClientRect(),!v||!e||F.button!==0||F.target!==f.current||!x.current)return;const{x:P,y:L}=Mr(F,x.current);E(),h.setState({userSelectionRect:{width:0,height:0,startX:P,startY:L,x:P,y:L}}),r==null||r(F)},M=F=>{const{userSelectionRect:E,nodeInternals:D,edges:P,transform:L,onNodesChange:A,onEdgesChange:N,nodeOrigin:j,getNodes:$}=h.getState();if(!e||!x.current||!E)return;h.setState({userSelectionActive:!0,nodesSelectionActive:!1});const V=Mr(F,x.current),O=E.startX??0,G=E.startY??0,Y={...E,x:V.x<O?V.x:O,y:V.y<G?V.y:G,width:Math.abs(V.x-O),height:Math.abs(V.y-G)},ee=$(),se=WM(D,Y,L,t===Go.Partial,!0,j),pe=KM(se,P).map(le=>le.id),te=se.map(le=>le.id);if(g.current!==te.length){g.current=te.length;const le=Ui(ee,te);le.length&&(A==null||A(le))}if(p.current!==pe.length){p.current=pe.length;const le=Ui(P,pe);le.length&&(N==null||N(le))}h.setState({userSelectionRect:Y})},R=F=>{if(F.button!==0)return;const{userSelectionRect:E}=h.getState();!m&&E&&F.target===f.current&&(_==null||_(F)),h.setState({nodesSelectionActive:g.current>0}),b(),i==null||i(F)},I=F=>{m&&(h.setState({nodesSelectionActive:g.current>0}),i==null||i(F)),b()},B=v&&(e||m);return q.createElement("div",{className:ot(["react-flow__pane",{dragging:w,selection:e}]),onClick:B?void 0:td(_,f),onContextMenu:td(C,f),onWheel:td(k,f),onMouseEnter:B?void 0:l,onMouseDown:B?T:void 0,onMouseMove:B?M:u,onMouseUp:B?R:void 0,onMouseLeave:B?I:c,ref:f,style:i0},d,q.createElement(P$,null))});dA.displayName="Pane";function fA(e,t){const n=e.parentNode||e.parentId;if(!n)return!1;const r=t.get(n);return r?r.selected?!0:fA(r,t):!1}function Qw(e,t,n){let r=e;do{if(r!=null&&r.matches(t))return!0;if(r===n.current)return!1;r=r.parentElement}while(r);return!1}function L$(e,t,n,r){return Array.from(e.values()).filter(i=>(i.selected||i.id===r)&&(!i.parentNode||i.parentId||!fA(i,e))&&(i.draggable||t&&typeof i.draggable>"u")).map(i=>{var s,o;return{id:i.id,position:i.position||{x:0,y:0},positionAbsolute:i.positionAbsolute||{x:0,y:0},distance:{x:n.x-(((s=i.positionAbsolute)==null?void 0:s.x)??0),y:n.y-(((o=i.positionAbsolute)==null?void 0:o.y)??0)},delta:{x:0,y:0},extent:i.extent,parentNode:i.parentNode||i.parentId,parentId:i.parentNode||i.parentId,width:i.width,height:i.height,expandParent:i.expandParent}})}function O$(e,t){return!t||t==="parent"?t:[t[0],[t[1][0]-(e.width||0),t[1][1]-(e.height||0)]]}function hA(e,t,n,r,i=[0,0],s){const o=O$(e,e.extent||r);let a=o;const l=e.parentNode||e.parentId;if(e.extent==="parent"&&!e.expandParent)if(l&&e.width&&e.height){const d=n.get(l),{x:f,y:h}=oi(d,i).positionAbsolute;a=d&&Yt(f)&&Yt(h)&&Yt(d.width)&&Yt(d.height)?[[f+e.width*i[0],h+e.height*i[1]],[f+d.width-e.width+e.width*i[0],h+d.height-e.height+e.height*i[1]]]:a}else s==null||s("005",Jn.error005()),a=o;else if(e.extent&&l&&e.extent!=="parent"){const d=n.get(l),{x:f,y:h}=oi(d,i).positionAbsolute;a=[[e.extent[0][0]+f,e.extent[0][1]+h],[e.extent[1][0]+f,e.extent[1][1]+h]]}let u={x:0,y:0};if(l){const d=n.get(l);u=oi(d,i).positionAbsolute}const c=a&&a!=="parent"?Xv(t,a):t;return{position:{x:c.x-u.x,y:c.y-u.y},positionAbsolute:c}}function nd({nodeId:e,dragItems:t,nodeInternals:n}){const r=t.map(i=>({...n.get(i.id),position:i.position,positionAbsolute:i.positionAbsolute}));return[e?r.find(i=>i.id===e):r[0],r]}const Jw=(e,t,n,r)=>{const i=t.querySelectorAll(e);if(!i||!i.length)return null;const s=Array.from(i),o=t.getBoundingClientRect(),a={x:o.width*r[0],y:o.height*r[1]};return s.map(l=>{const u=l.getBoundingClientRect();return{id:l.getAttribute("data-handleid"),position:l.getAttribute("data-handlepos"),x:(u.left-o.left-a.x)/n,y:(u.top-o.top-a.y)/n,...Yv(l)}})};function zs(e,t,n){return n===void 0?n:r=>{const i=t().nodeInternals.get(e);i&&n(r,{...i})}}function _y({id:e,store:t,unselect:n=!1,nodeRef:r}){const{addSelectedNodes:i,unselectNodesAndEdges:s,multiSelectionActive:o,nodeInternals:a,onError:l}=t.getState(),u=a.get(e);if(!u){l==null||l("012",Jn.error012(e));return}t.setState({nodesSelectionActive:!1}),u.selected?(n||u.selected&&o)&&(s({nodes:[u],edges:[]}),requestAnimationFrame(()=>{var c;return(c=r==null?void 0:r.current)==null?void 0:c.blur()})):i([e])}function q$(){const e=Xe();return S.useCallback(({sourceEvent:n})=>{const{transform:r,snapGrid:i,snapToGrid:s}=e.getState(),o=n.touches?n.touches[0].clientX:n.clientX,a=n.touches?n.touches[0].clientY:n.clientY,l={x:(o-r[0])/r[2],y:(a-r[1])/r[2]};return{xSnapped:s?i[0]*Math.round(l.x/i[0]):l.x,ySnapped:s?i[1]*Math.round(l.y/i[1]):l.y,...l}},[])}function rd(e){return(t,n,r)=>e==null?void 0:e(t,r)}function pA({nodeRef:e,disabled:t=!1,noDragClassName:n,handleSelector:r,nodeId:i,isSelectable:s,selectNodesOnDrag:o}){const a=Xe(),[l,u]=S.useState(!1),c=S.useRef([]),d=S.useRef({x:null,y:null}),f=S.useRef(0),h=S.useRef(null),g=S.useRef({x:0,y:0}),p=S.useRef(null),x=S.useRef(!1),m=S.useRef(!1),v=S.useRef(!1),w=q$();return S.useEffect(()=>{if(e!=null&&e.current){const b=Wt(e.current),_=({x:T,y:M})=>{const{nodeInternals:R,onNodeDrag:I,onSelectionDrag:B,updateNodePositions:F,nodeExtent:E,snapGrid:D,snapToGrid:P,nodeOrigin:L,onError:A}=a.getState();d.current={x:T,y:M};let N=!1,j={x:0,y:0,x2:0,y2:0};if(c.current.length>1&&E){const V=Lu(c.current,L);j=Ho(V)}if(c.current=c.current.map(V=>{const O={x:T-V.distance.x,y:M-V.distance.y};P&&(O.x=D[0]*Math.round(O.x/D[0]),O.y=D[1]*Math.round(O.y/D[1]));const G=[[E[0][0],E[0][1]],[E[1][0],E[1][1]]];c.current.length>1&&E&&!V.extent&&(G[0][0]=V.positionAbsolute.x-j.x+E[0][0],G[1][0]=V.positionAbsolute.x+(V.width??0)-j.x2+E[1][0],G[0][1]=V.positionAbsolute.y-j.y+E[0][1],G[1][1]=V.positionAbsolute.y+(V.height??0)-j.y2+E[1][1]);const Y=hA(V,O,R,G,L,A);return N=N||V.position.x!==Y.position.x||V.position.y!==Y.position.y,V.position=Y.position,V.positionAbsolute=Y.positionAbsolute,V}),!N)return;F(c.current,!0,!0),u(!0);const $=i?I:rd(B);if($&&p.current){const[V,O]=nd({nodeId:i,dragItems:c.current,nodeInternals:R});$(p.current,V,O)}},C=()=>{if(!h.current)return;const[T,M]=LM(g.current,h.current);if(T!==0||M!==0){const{transform:R,panBy:I}=a.getState();d.current.x=(d.current.x??0)-T/R[2],d.current.y=(d.current.y??0)-M/R[2],I({x:T,y:M})&&_(d.current)}f.current=requestAnimationFrame(C)},k=T=>{var L;const{nodeInternals:M,multiSelectionActive:R,nodesDraggable:I,unselectNodesAndEdges:B,onNodeDragStart:F,onSelectionDragStart:E}=a.getState();m.current=!0;const D=i?F:rd(E);(!o||!s)&&!R&&i&&((L=M.get(i))!=null&&L.selected||B()),i&&s&&o&&_y({id:i,store:a,nodeRef:e});const P=w(T);if(d.current=P,c.current=L$(M,I,P,i),D&&c.current){const[A,N]=nd({nodeId:i,dragItems:c.current,nodeInternals:M});D(T.sourceEvent,A,N)}};if(t)b.on(".drag",null);else{const T=KO().on("start",M=>{const{domNode:R,nodeDragThreshold:I}=a.getState();I===0&&k(M),v.current=!1;const B=w(M);d.current=B,h.current=(R==null?void 0:R.getBoundingClientRect())||null,g.current=Mr(M.sourceEvent,h.current)}).on("drag",M=>{var F,E;const R=w(M),{autoPanOnNodeDrag:I,nodeDragThreshold:B}=a.getState();if(M.sourceEvent.type==="touchmove"&&M.sourceEvent.touches.length>1&&(v.current=!0),!v.current){if(!x.current&&m.current&&I&&(x.current=!0,C()),!m.current){const D=R.xSnapped-(((F=d==null?void 0:d.current)==null?void 0:F.x)??0),P=R.ySnapped-(((E=d==null?void 0:d.current)==null?void 0:E.y)??0);Math.sqrt(D*D+P*P)>B&&k(M)}(d.current.x!==R.xSnapped||d.current.y!==R.ySnapped)&&c.current&&m.current&&(p.current=M.sourceEvent,g.current=Mr(M.sourceEvent,h.current),_(R))}}).on("end",M=>{if(!(!m.current||v.current)&&(u(!1),x.current=!1,m.current=!1,cancelAnimationFrame(f.current),c.current)){const{updateNodePositions:R,nodeInternals:I,onNodeDragStop:B,onSelectionDragStop:F}=a.getState(),E=i?B:rd(F);if(R(c.current,!1,!1),E){const[D,P]=nd({nodeId:i,dragItems:c.current,nodeInternals:I});E(M.sourceEvent,D,P)}}}).filter(M=>{const R=M.target;return!M.button&&(!n||!Qw(R,`.${n}`,e))&&(!r||Qw(R,r,e))});return b.call(T),()=>{b.on(".drag",null)}}}},[e,t,n,r,s,a,i,o,w]),l}function mA(){const e=Xe();return S.useCallback(n=>{const{nodeInternals:r,nodeExtent:i,updateNodePositions:s,getNodes:o,snapToGrid:a,snapGrid:l,onError:u,nodesDraggable:c}=e.getState(),d=o().filter(v=>v.selected&&(v.draggable||c&&typeof v.draggable>"u")),f=a?l[0]:5,h=a?l[1]:5,g=n.isShiftPressed?4:1,p=n.x*f*g,x=n.y*h*g,m=d.map(v=>{if(v.positionAbsolute){const w={x:v.positionAbsolute.x+p,y:v.positionAbsolute.y+x};a&&(w.x=l[0]*Math.round(w.x/l[0]),w.y=l[1]*Math.round(w.y/l[1]));const{positionAbsolute:b,position:_}=hA(v,w,r,i,void 0,u);v.position=_,v.positionAbsolute=b}return v});s(m,!0,!1)},[])}const is={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var Us=e=>{const t=({id:n,type:r,data:i,xPos:s,yPos:o,xPosOrigin:a,yPosOrigin:l,selected:u,onClick:c,onMouseEnter:d,onMouseMove:f,onMouseLeave:h,onContextMenu:g,onDoubleClick:p,style:x,className:m,isDraggable:v,isSelectable:w,isConnectable:b,isFocusable:_,selectNodesOnDrag:C,sourcePosition:k,targetPosition:T,hidden:M,resizeObserver:R,dragHandle:I,zIndex:B,isParent:F,noDragClassName:E,noPanClassName:D,initialized:P,disableKeyboardA11y:L,ariaLabel:A,rfId:N,hasHandleBounds:j})=>{const $=Xe(),V=S.useRef(null),O=S.useRef(null),G=S.useRef(k),Y=S.useRef(T),ee=S.useRef(r),se=w||v||c||d||f||h,pe=mA(),te=zs(n,$.getState,d),le=zs(n,$.getState,f),ve=zs(n,$.getState,h),xe=zs(n,$.getState,g),H=zs(n,$.getState,p),Q=X=>{const{nodeDragThreshold:Z}=$.getState();if(w&&(!C||!v||Z>0)&&_y({id:n,store:$,nodeRef:V}),c){const de=$.getState().nodeInternals.get(n);de&&c(X,{...de})}},z=X=>{if(!vy(X)&&!L)if(FM.includes(X.key)&&w){const Z=X.key==="Escape";_y({id:n,store:$,unselect:Z,nodeRef:V})}else v&&u&&Object.prototype.hasOwnProperty.call(is,X.key)&&($.setState({ariaLiveMessage:`Moved selected node ${X.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~s}, y: ${~~o}`}),pe({x:is[X.key].x,y:is[X.key].y,isShiftPressed:X.shiftKey}))};S.useEffect(()=>()=>{O.current&&(R==null||R.unobserve(O.current),O.current=null)},[]),S.useEffect(()=>{if(V.current&&!M){const X=V.current;(!P||!j||O.current!==X)&&(O.current&&(R==null||R.unobserve(O.current)),R==null||R.observe(X),O.current=X)}},[M,P,j]),S.useEffect(()=>{const X=ee.current!==r,Z=G.current!==k,de=Y.current!==T;V.current&&(X||Z||de)&&(X&&(ee.current=r),Z&&(G.current=k),de&&(Y.current=T),$.getState().updateNodeDimensions([{id:n,nodeElement:V.current,forceUpdate:!0}]))},[n,r,k,T]);const re=pA({nodeRef:V,disabled:M||!v,noDragClassName:E,handleSelector:I,nodeId:n,isSelectable:w,selectNodesOnDrag:C});return M?null:q.createElement("div",{className:ot(["react-flow__node",`react-flow__node-${r}`,{[D]:v},m,{selected:u,selectable:w,parent:F,dragging:re}]),ref:V,style:{zIndex:B,transform:`translate(${a}px,${l}px)`,pointerEvents:se?"all":"none",visibility:P?"visible":"hidden",...x},"data-id":n,"data-testid":`rf__node-${n}`,onMouseEnter:te,onMouseMove:le,onMouseLeave:ve,onContextMenu:xe,onClick:Q,onDoubleClick:H,onKeyDown:_?z:void 0,tabIndex:_?0:void 0,role:_?"button":void 0,"aria-describedby":L?void 0:`${oA}-${N}`,"aria-label":A},q.createElement(Zq,{value:n},q.createElement(e,{id:n,data:i,type:r,xPos:s,yPos:o,selected:u,isConnectable:b,sourcePosition:k,targetPosition:T,dragging:re,dragHandle:I,zIndex:B})))};return t.displayName="NodeWrapper",S.memo(t)};const $$=e=>{const t=e.getNodes().filter(n=>n.selected);return{...Lu(t,e.nodeOrigin),transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`,userSelectionActive:e.userSelectionActive}};function F$({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:n}){const r=Xe(),{width:i,height:s,x:o,y:a,transformString:l,userSelectionActive:u}=Ee($$,et),c=mA(),d=S.useRef(null);if(S.useEffect(()=>{var g;n||(g=d.current)==null||g.focus({preventScroll:!0})},[n]),pA({nodeRef:d}),u||!i||!s)return null;const f=e?g=>{const p=r.getState().getNodes().filter(x=>x.selected);e(g,p)}:void 0,h=g=>{Object.prototype.hasOwnProperty.call(is,g.key)&&c({x:is[g.key].x,y:is[g.key].y,isShiftPressed:g.shiftKey})};return q.createElement("div",{className:ot(["react-flow__nodesselection","react-flow__container",t]),style:{transform:l}},q.createElement("div",{ref:d,className:"react-flow__nodesselection-rect",onContextMenu:f,tabIndex:n?void 0:-1,onKeyDown:n?void 0:h,style:{width:i,height:s,top:a,left:o}}))}var V$=S.memo(F$);const B$=e=>e.nodesSelectionActive,gA=({children:e,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:i,onPaneContextMenu:s,onPaneScroll:o,deleteKeyCode:a,onMove:l,onMoveStart:u,onMoveEnd:c,selectionKeyCode:d,selectionOnDrag:f,selectionMode:h,onSelectionStart:g,onSelectionEnd:p,multiSelectionKeyCode:x,panActivationKeyCode:m,zoomActivationKeyCode:v,elementsSelectable:w,zoomOnScroll:b,zoomOnPinch:_,panOnScroll:C,panOnScrollSpeed:k,panOnScrollMode:T,zoomOnDoubleClick:M,panOnDrag:R,defaultViewport:I,translateExtent:B,minZoom:F,maxZoom:E,preventScrolling:D,onSelectionContextMenu:P,noWheelClassName:L,noPanClassName:A,disableKeyboardA11y:N})=>{const j=Ee(B$),$=Wo(d),V=Wo(m),O=V||R,G=V||C,Y=$||f&&O!==!0;return k$({deleteKeyCode:a,multiSelectionKeyCode:x}),q.createElement(A$,{onMove:l,onMoveStart:u,onMoveEnd:c,onPaneContextMenu:s,elementsSelectable:w,zoomOnScroll:b,zoomOnPinch:_,panOnScroll:G,panOnScrollSpeed:k,panOnScrollMode:T,zoomOnDoubleClick:M,panOnDrag:!$&&O,defaultViewport:I,translateExtent:B,minZoom:F,maxZoom:E,zoomActivationKeyCode:v,preventScrolling:D,noWheelClassName:L,noPanClassName:A},q.createElement(dA,{onSelectionStart:g,onSelectionEnd:p,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:i,onPaneContextMenu:s,onPaneScroll:o,panOnDrag:O,isSelecting:!!Y,selectionMode:h},e,j&&q.createElement(V$,{onSelectionContextMenu:P,noPanClassName:A,disableKeyboardA11y:N})))};gA.displayName="FlowRenderer";var z$=S.memo(gA);function U$(e){return Ee(S.useCallback(n=>e?WM(n.nodeInternals,{x:0,y:0,width:n.width,height:n.height},n.transform,!0):n.getNodes(),[e]))}function H$(e){const t={input:Us(e.input||nA),default:Us(e.default||Sy),output:Us(e.output||iA),group:Us(e.group||n0)},n={},r=Object.keys(e).filter(i=>!["input","default","output","group"].includes(i)).reduce((i,s)=>(i[s]=Us(e[s]||Sy),i),n);return{...t,...r}}const G$=({x:e,y:t,width:n,height:r,origin:i})=>!n||!r?{x:e,y:t}:i[0]<0||i[1]<0||i[0]>1||i[1]>1?{x:e,y:t}:{x:e-n*i[0],y:t-r*i[1]},W$=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,updateNodeDimensions:e.updateNodeDimensions,onError:e.onError}),yA=e=>{const{nodesDraggable:t,nodesConnectable:n,nodesFocusable:r,elementsSelectable:i,updateNodeDimensions:s,onError:o}=Ee(W$,et),a=U$(e.onlyRenderVisibleElements),l=S.useRef(),u=S.useMemo(()=>{if(typeof ResizeObserver>"u")return null;const c=new ResizeObserver(d=>{const f=d.map(h=>({id:h.target.getAttribute("data-id"),nodeElement:h.target,forceUpdate:!0}));s(f)});return l.current=c,c},[]);return S.useEffect(()=>()=>{var c;(c=l==null?void 0:l.current)==null||c.disconnect()},[]),q.createElement("div",{className:"react-flow__nodes",style:i0},a.map(c=>{var _,C,k;let d=c.type||"default";e.nodeTypes[d]||(o==null||o("003",Jn.error003(d)),d="default");const f=e.nodeTypes[d]||e.nodeTypes.default,h=!!(c.draggable||t&&typeof c.draggable>"u"),g=!!(c.selectable||i&&typeof c.selectable>"u"),p=!!(c.connectable||n&&typeof c.connectable>"u"),x=!!(c.focusable||r&&typeof c.focusable>"u"),m=e.nodeExtent?Xv(c.positionAbsolute,e.nodeExtent):c.positionAbsolute,v=(m==null?void 0:m.x)??0,w=(m==null?void 0:m.y)??0,b=G$({x:v,y:w,width:c.width??0,height:c.height??0,origin:e.nodeOrigin});return q.createElement(f,{key:c.id,id:c.id,className:c.className,style:c.style,type:d,data:c.data,sourcePosition:c.sourcePosition||ne.Bottom,targetPosition:c.targetPosition||ne.Top,hidden:c.hidden,xPos:v,yPos:w,xPosOrigin:b.x,yPosOrigin:b.y,selectNodesOnDrag:e.selectNodesOnDrag,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,selected:!!c.selected,isDraggable:h,isSelectable:g,isConnectable:p,isFocusable:x,resizeObserver:u,dragHandle:c.dragHandle,zIndex:((_=c[Le])==null?void 0:_.z)??0,isParent:!!((C=c[Le])!=null&&C.isParent),noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,initialized:!!c.width&&!!c.height,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,ariaLabel:c.ariaLabel,hasHandleBounds:!!((k=c[Le])!=null&&k.handleBounds)})}))};yA.displayName="NodeRenderer";var K$=S.memo(yA);const Y$=(e,t,n)=>n===ne.Left?e-t:n===ne.Right?e+t:e,X$=(e,t,n)=>n===ne.Top?e-t:n===ne.Bottom?e+t:e,e1="react-flow__edgeupdater",t1=({position:e,centerX:t,centerY:n,radius:r=10,onMouseDown:i,onMouseEnter:s,onMouseOut:o,type:a})=>q.createElement("circle",{onMouseDown:i,onMouseEnter:s,onMouseOut:o,className:ot([e1,`${e1}-${a}`]),cx:Y$(t,r,e),cy:X$(n,r,e),r,stroke:"transparent",fill:"transparent"}),Z$=()=>!0;var Ri=e=>{const t=({id:n,className:r,type:i,data:s,onClick:o,onEdgeDoubleClick:a,selected:l,animated:u,label:c,labelStyle:d,labelShowBg:f,labelBgStyle:h,labelBgPadding:g,labelBgBorderRadius:p,style:x,source:m,target:v,sourceX:w,sourceY:b,targetX:_,targetY:C,sourcePosition:k,targetPosition:T,elementsSelectable:M,hidden:R,sourceHandleId:I,targetHandleId:B,onContextMenu:F,onMouseEnter:E,onMouseMove:D,onMouseLeave:P,reconnectRadius:L,onReconnect:A,onReconnectStart:N,onReconnectEnd:j,markerEnd:$,markerStart:V,rfId:O,ariaLabel:G,isFocusable:Y,isReconnectable:ee,pathOptions:se,interactionWidth:pe,disableKeyboardA11y:te})=>{const le=S.useRef(null),[ve,xe]=S.useState(!1),[H,Q]=S.useState(!1),z=Xe(),re=S.useMemo(()=>`url('#${wy(V,O)}')`,[V,O]),X=S.useMemo(()=>`url('#${wy($,O)}')`,[$,O]);if(R)return null;const Z=ze=>{var At;const{edges:Ge,addSelectedEdges:Ze,unselectNodesAndEdges:Oe,multiSelectionActive:rn}=z.getState(),Vt=Ge.find(Vr=>Vr.id===n);Vt&&(M&&(z.setState({nodesSelectionActive:!1}),Vt.selected&&rn?(Oe({nodes:[],edges:[Vt]}),(At=le.current)==null||At.blur()):Ze([n])),o&&o(ze,Vt))},de=Bs(n,z.getState,a),be=Bs(n,z.getState,F),at=Bs(n,z.getState,E),Se=Bs(n,z.getState,D),we=Bs(n,z.getState,P),Be=(ze,Ge)=>{if(ze.button!==0)return;const{edges:Ze,isValidConnection:Oe}=z.getState(),rn=Ge?v:m,Vt=(Ge?B:I)||null,At=Ge?"target":"source",Vr=Oe||Z$,Ei=Ge,Br=Ze.find(ut=>ut.id===n);Q(!0),N==null||N(ze,Br,At);const Ci=ut=>{Q(!1),j==null||j(ut,Br,At)};QM({event:ze,handleId:Vt,nodeId:rn,onConnect:ut=>A==null?void 0:A(Br,ut),isTarget:Ei,getState:z.getState,setState:z.setState,isValidConnection:Vr,edgeUpdaterType:At,onReconnectEnd:Ci})},gt=ze=>Be(ze,!0),lt=ze=>Be(ze,!1),yt=()=>xe(!0),tt=()=>xe(!1),tn=!M&&!o,nn=ze=>{var Ge;if(!te&&FM.includes(ze.key)&&M){const{unselectNodesAndEdges:Ze,addSelectedEdges:Oe,edges:rn}=z.getState();ze.key==="Escape"?((Ge=le.current)==null||Ge.blur(),Ze({edges:[rn.find(At=>At.id===n)]})):Oe([n])}};return q.createElement("g",{className:ot(["react-flow__edge",`react-flow__edge-${i}`,r,{selected:l,animated:u,inactive:tn,updating:ve}]),onClick:Z,onDoubleClick:de,onContextMenu:be,onMouseEnter:at,onMouseMove:Se,onMouseLeave:we,onKeyDown:Y?nn:void 0,tabIndex:Y?0:void 0,role:Y?"button":"img","data-testid":`rf__edge-${n}`,"aria-label":G===null?void 0:G||`Edge from ${m} to ${v}`,"aria-describedby":Y?`${aA}-${O}`:void 0,ref:le},!H&&q.createElement(e,{id:n,source:m,target:v,selected:l,animated:u,label:c,labelStyle:d,labelShowBg:f,labelBgStyle:h,labelBgPadding:g,labelBgBorderRadius:p,data:s,style:x,sourceX:w,sourceY:b,targetX:_,targetY:C,sourcePosition:k,targetPosition:T,sourceHandleId:I,targetHandleId:B,markerStart:re,markerEnd:X,pathOptions:se,interactionWidth:pe}),ee&&q.createElement(q.Fragment,null,(ee==="source"||ee===!0)&&q.createElement(t1,{position:k,centerX:w,centerY:b,radius:L,onMouseDown:gt,onMouseEnter:yt,onMouseOut:tt,type:"source"}),(ee==="target"||ee===!0)&&q.createElement(t1,{position:T,centerX:_,centerY:C,radius:L,onMouseDown:lt,onMouseEnter:yt,onMouseOut:tt,type:"target"})))};return t.displayName="EdgeWrapper",S.memo(t)};function Q$(e){const t={default:Ri(e.default||Jl),straight:Ri(e.bezier||Jv),step:Ri(e.step||Qv),smoothstep:Ri(e.step||Du),simplebezier:Ri(e.simplebezier||Zv)},n={},r=Object.keys(e).filter(i=>!["default","bezier"].includes(i)).reduce((i,s)=>(i[s]=Ri(e[s]||Jl),i),n);return{...t,...r}}function n1(e,t,n=null){const r=((n==null?void 0:n.x)||0)+t.x,i=((n==null?void 0:n.y)||0)+t.y,s=(n==null?void 0:n.width)||t.width,o=(n==null?void 0:n.height)||t.height;switch(e){case ne.Top:return{x:r+s/2,y:i};case ne.Right:return{x:r+s,y:i+o/2};case ne.Bottom:return{x:r+s/2,y:i+o};case ne.Left:return{x:r,y:i+o/2}}}function r1(e,t){return e?e.length===1||!t?e[0]:t&&e.find(n=>n.id===t)||null:null}const J$=(e,t,n,r,i,s)=>{const o=n1(n,e,t),a=n1(s,r,i);return{sourceX:o.x,sourceY:o.y,targetX:a.x,targetY:a.y}};function eF({sourcePos:e,targetPos:t,sourceWidth:n,sourceHeight:r,targetWidth:i,targetHeight:s,width:o,height:a,transform:l}){const u={x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x+n,t.x+i),y2:Math.max(e.y+r,t.y+s)};u.x===u.x2&&(u.x2+=1),u.y===u.y2&&(u.y2+=1);const c=Ho({x:(0-l[0])/l[2],y:(0-l[1])/l[2],width:o/l[2],height:a/l[2]}),d=Math.max(0,Math.min(c.x2,u.x2)-Math.max(c.x,u.x)),f=Math.max(0,Math.min(c.y2,u.y2)-Math.max(c.y,u.y));return Math.ceil(d*f)>0}function i1(e){var r,i,s,o,a;const t=((r=e==null?void 0:e[Le])==null?void 0:r.handleBounds)||null,n=t&&(e==null?void 0:e.width)&&(e==null?void 0:e.height)&&typeof((i=e==null?void 0:e.positionAbsolute)==null?void 0:i.x)<"u"&&typeof((s=e==null?void 0:e.positionAbsolute)==null?void 0:s.y)<"u";return[{x:((o=e==null?void 0:e.positionAbsolute)==null?void 0:o.x)||0,y:((a=e==null?void 0:e.positionAbsolute)==null?void 0:a.y)||0,width:(e==null?void 0:e.width)||0,height:(e==null?void 0:e.height)||0},t,!!n]}const tF=[{level:0,isMaxLevel:!0,edges:[]}];function nF(e,t,n=!1){let r=-1;const i=e.reduce((o,a)=>{var c,d;const l=Yt(a.zIndex);let u=l?a.zIndex:0;if(n){const f=t.get(a.target),h=t.get(a.source),g=a.selected||(f==null?void 0:f.selected)||(h==null?void 0:h.selected),p=Math.max(((c=h==null?void 0:h[Le])==null?void 0:c.z)||0,((d=f==null?void 0:f[Le])==null?void 0:d.z)||0,1e3);u=(l?a.zIndex:0)+(g?p:0)}return o[u]?o[u].push(a):o[u]=[a],r=u>r?u:r,o},{}),s=Object.entries(i).map(([o,a])=>{const l=+o;return{edges:a,level:l,isMaxLevel:l===r}});return s.length===0?tF:s}function rF(e,t,n){const r=Ee(S.useCallback(i=>e?i.edges.filter(s=>{const o=t.get(s.source),a=t.get(s.target);return(o==null?void 0:o.width)&&(o==null?void 0:o.height)&&(a==null?void 0:a.width)&&(a==null?void 0:a.height)&&eF({sourcePos:o.positionAbsolute||{x:0,y:0},targetPos:a.positionAbsolute||{x:0,y:0},sourceWidth:o.width,sourceHeight:o.height,targetWidth:a.width,targetHeight:a.height,width:i.width,height:i.height,transform:i.transform})}):i.edges,[e,t]));return nF(r,t,n)}const iF=({color:e="none",strokeWidth:t=1})=>q.createElement("polyline",{style:{stroke:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),sF=({color:e="none",strokeWidth:t=1})=>q.createElement("polyline",{style:{stroke:e,fill:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),s1={[Ql.Arrow]:iF,[Ql.ArrowClosed]:sF};function oF(e){const t=Xe();return S.useMemo(()=>{var i,s;return Object.prototype.hasOwnProperty.call(s1,e)?s1[e]:((s=(i=t.getState()).onError)==null||s.call(i,"009",Jn.error009(e)),null)},[e])}const aF=({id:e,type:t,color:n,width:r=12.5,height:i=12.5,markerUnits:s="strokeWidth",strokeWidth:o,orient:a="auto-start-reverse"})=>{const l=oF(t);return l?q.createElement("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${r}`,markerHeight:`${i}`,viewBox:"-10 -10 20 20",markerUnits:s,orient:a,refX:"0",refY:"0"},q.createElement(l,{color:n,strokeWidth:o})):null},lF=({defaultColor:e,rfId:t})=>n=>{const r=[];return n.edges.reduce((i,s)=>([s.markerStart,s.markerEnd].forEach(o=>{if(o&&typeof o=="object"){const a=wy(o,t);r.includes(a)||(i.push({id:a,color:o.color||e,...o}),r.push(a))}}),i),[]).sort((i,s)=>i.id.localeCompare(s.id))},vA=({defaultColor:e,rfId:t})=>{const n=Ee(S.useCallback(lF({defaultColor:e,rfId:t}),[e,t]),(r,i)=>!(r.length!==i.length||r.some((s,o)=>s.id!==i[o].id)));return q.createElement("defs",null,n.map(r=>q.createElement(aF,{id:r.id,key:r.id,type:r.type,color:r.color,width:r.width,height:r.height,markerUnits:r.markerUnits,strokeWidth:r.strokeWidth,orient:r.orient})))};vA.displayName="MarkerDefinitions";var uF=S.memo(vA);const cF=e=>({nodesConnectable:e.nodesConnectable,edgesFocusable:e.edgesFocusable,edgesUpdatable:e.edgesUpdatable,elementsSelectable:e.elementsSelectable,width:e.width,height:e.height,connectionMode:e.connectionMode,nodeInternals:e.nodeInternals,onError:e.onError}),xA=({defaultMarkerColor:e,onlyRenderVisibleElements:t,elevateEdgesOnSelect:n,rfId:r,edgeTypes:i,noPanClassName:s,onEdgeContextMenu:o,onEdgeMouseEnter:a,onEdgeMouseMove:l,onEdgeMouseLeave:u,onEdgeClick:c,onEdgeDoubleClick:d,onReconnect:f,onReconnectStart:h,onReconnectEnd:g,reconnectRadius:p,children:x,disableKeyboardA11y:m})=>{const{edgesFocusable:v,edgesUpdatable:w,elementsSelectable:b,width:_,height:C,connectionMode:k,nodeInternals:T,onError:M}=Ee(cF,et),R=rF(t,T,n);return _?q.createElement(q.Fragment,null,R.map(({level:I,edges:B,isMaxLevel:F})=>q.createElement("svg",{key:I,style:{zIndex:I},width:_,height:C,className:"react-flow__edges react-flow__container"},F&&q.createElement(uF,{defaultColor:e,rfId:r}),q.createElement("g",null,B.map(E=>{const[D,P,L]=i1(T.get(E.source)),[A,N,j]=i1(T.get(E.target));if(!L||!j)return null;let $=E.type||"default";i[$]||(M==null||M("011",Jn.error011($)),$="default");const V=i[$]||i.default,O=k===mi.Strict?N.target:(N.target??[]).concat(N.source??[]),G=r1(P.source,E.sourceHandle),Y=r1(O,E.targetHandle),ee=(G==null?void 0:G.position)||ne.Bottom,se=(Y==null?void 0:Y.position)||ne.Top,pe=!!(E.focusable||v&&typeof E.focusable>"u"),te=E.reconnectable||E.updatable,le=typeof f<"u"&&(te||w&&typeof te>"u");if(!G||!Y)return M==null||M("008",Jn.error008(G,E)),null;const{sourceX:ve,sourceY:xe,targetX:H,targetY:Q}=J$(D,G,ee,A,Y,se);return q.createElement(V,{key:E.id,id:E.id,className:ot([E.className,s]),type:$,data:E.data,selected:!!E.selected,animated:!!E.animated,hidden:!!E.hidden,label:E.label,labelStyle:E.labelStyle,labelShowBg:E.labelShowBg,labelBgStyle:E.labelBgStyle,labelBgPadding:E.labelBgPadding,labelBgBorderRadius:E.labelBgBorderRadius,style:E.style,source:E.source,target:E.target,sourceHandleId:E.sourceHandle,targetHandleId:E.targetHandle,markerEnd:E.markerEnd,markerStart:E.markerStart,sourceX:ve,sourceY:xe,targetX:H,targetY:Q,sourcePosition:ee,targetPosition:se,elementsSelectable:b,onContextMenu:o,onMouseEnter:a,onMouseMove:l,onMouseLeave:u,onClick:c,onEdgeDoubleClick:d,onReconnect:f,onReconnectStart:h,onReconnectEnd:g,reconnectRadius:p,rfId:r,ariaLabel:E.ariaLabel,isFocusable:pe,isReconnectable:le,pathOptions:"pathOptions"in E?E.pathOptions:void 0,interactionWidth:E.interactionWidth,disableKeyboardA11y:m})})))),x):null};xA.displayName="EdgeRenderer";var dF=S.memo(xA);const fF=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function hF({children:e}){const t=Ee(fF);return q.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:t}},e)}function pF(e){const t=r0(),n=S.useRef(!1);S.useEffect(()=>{!n.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),n.current=!0)},[e,t.viewportInitialized])}const mF={[ne.Left]:ne.Right,[ne.Right]:ne.Left,[ne.Top]:ne.Bottom,[ne.Bottom]:ne.Top},wA=({nodeId:e,handleType:t,style:n,type:r=yr.Bezier,CustomComponent:i,connectionStatus:s})=>{var C,k,T;const{fromNode:o,handleId:a,toX:l,toY:u,connectionMode:c}=Ee(S.useCallback(M=>({fromNode:M.nodeInternals.get(e),handleId:M.connectionHandleId,toX:(M.connectionPosition.x-M.transform[0])/M.transform[2],toY:(M.connectionPosition.y-M.transform[1])/M.transform[2],connectionMode:M.connectionMode}),[e]),et),d=(C=o==null?void 0:o[Le])==null?void 0:C.handleBounds;let f=d==null?void 0:d[t];if(c===mi.Loose&&(f=f||(d==null?void 0:d[t==="source"?"target":"source"])),!o||!f)return null;const h=a?f.find(M=>M.id===a):f[0],g=h?h.x+h.width/2:(o.width??0)/2,p=h?h.y+h.height/2:o.height??0,x=(((k=o.positionAbsolute)==null?void 0:k.x)??0)+g,m=(((T=o.positionAbsolute)==null?void 0:T.y)??0)+p,v=h==null?void 0:h.position,w=v?mF[v]:null;if(!v||!w)return null;if(i)return q.createElement(i,{connectionLineType:r,connectionLineStyle:n,fromNode:o,fromHandle:h,fromX:x,fromY:m,toX:l,toY:u,fromPosition:v,toPosition:w,connectionStatus:s});let b="";const _={sourceX:x,sourceY:m,sourcePosition:v,targetX:l,targetY:u,targetPosition:w};return r===yr.Bezier?[b]=HM(_):r===yr.Step?[b]=xy({..._,borderRadius:0}):r===yr.SmoothStep?[b]=xy(_):r===yr.SimpleBezier?[b]=UM(_):b=`M${x},${m} ${l},${u}`,q.createElement("path",{d:b,fill:"none",className:"react-flow__connection-path",style:n})};wA.displayName="ConnectionLine";const gF=e=>({nodeId:e.connectionNodeId,handleType:e.connectionHandleType,nodesConnectable:e.nodesConnectable,connectionStatus:e.connectionStatus,width:e.width,height:e.height});function yF({containerStyle:e,style:t,type:n,component:r}){const{nodeId:i,handleType:s,nodesConnectable:o,width:a,height:l,connectionStatus:u}=Ee(gF,et);return!(i&&s&&a&&o)?null:q.createElement("svg",{style:e,width:a,height:l,className:"react-flow__edges react-flow__connectionline react-flow__container"},q.createElement("g",{className:ot(["react-flow__connection",u])},q.createElement(wA,{nodeId:i,handleType:s,style:t,type:n,CustomComponent:r,connectionStatus:u})))}function o1(e,t){return S.useRef(null),Xe(),S.useMemo(()=>t(e),[e])}const bA=({nodeTypes:e,edgeTypes:t,onMove:n,onMoveStart:r,onMoveEnd:i,onInit:s,onNodeClick:o,onEdgeClick:a,onNodeDoubleClick:l,onEdgeDoubleClick:u,onNodeMouseEnter:c,onNodeMouseMove:d,onNodeMouseLeave:f,onNodeContextMenu:h,onSelectionContextMenu:g,onSelectionStart:p,onSelectionEnd:x,connectionLineType:m,connectionLineStyle:v,connectionLineComponent:w,connectionLineContainerStyle:b,selectionKeyCode:_,selectionOnDrag:C,selectionMode:k,multiSelectionKeyCode:T,panActivationKeyCode:M,zoomActivationKeyCode:R,deleteKeyCode:I,onlyRenderVisibleElements:B,elementsSelectable:F,selectNodesOnDrag:E,defaultViewport:D,translateExtent:P,minZoom:L,maxZoom:A,preventScrolling:N,defaultMarkerColor:j,zoomOnScroll:$,zoomOnPinch:V,panOnScroll:O,panOnScrollSpeed:G,panOnScrollMode:Y,zoomOnDoubleClick:ee,panOnDrag:se,onPaneClick:pe,onPaneMouseEnter:te,onPaneMouseMove:le,onPaneMouseLeave:ve,onPaneScroll:xe,onPaneContextMenu:H,onEdgeContextMenu:Q,onEdgeMouseEnter:z,onEdgeMouseMove:re,onEdgeMouseLeave:X,onReconnect:Z,onReconnectStart:de,onReconnectEnd:be,reconnectRadius:at,noDragClassName:Se,noWheelClassName:we,noPanClassName:Be,elevateEdgesOnSelect:gt,disableKeyboardA11y:lt,nodeOrigin:yt,nodeExtent:tt,rfId:tn})=>{const nn=o1(e,H$),ze=o1(t,Q$);return pF(s),q.createElement(z$,{onPaneClick:pe,onPaneMouseEnter:te,onPaneMouseMove:le,onPaneMouseLeave:ve,onPaneContextMenu:H,onPaneScroll:xe,deleteKeyCode:I,selectionKeyCode:_,selectionOnDrag:C,selectionMode:k,onSelectionStart:p,onSelectionEnd:x,multiSelectionKeyCode:T,panActivationKeyCode:M,zoomActivationKeyCode:R,elementsSelectable:F,onMove:n,onMoveStart:r,onMoveEnd:i,zoomOnScroll:$,zoomOnPinch:V,zoomOnDoubleClick:ee,panOnScroll:O,panOnScrollSpeed:G,panOnScrollMode:Y,panOnDrag:se,defaultViewport:D,translateExtent:P,minZoom:L,maxZoom:A,onSelectionContextMenu:g,preventScrolling:N,noDragClassName:Se,noWheelClassName:we,noPanClassName:Be,disableKeyboardA11y:lt},q.createElement(hF,null,q.createElement(dF,{edgeTypes:ze,onEdgeClick:a,onEdgeDoubleClick:u,onlyRenderVisibleElements:B,onEdgeContextMenu:Q,onEdgeMouseEnter:z,onEdgeMouseMove:re,onEdgeMouseLeave:X,onReconnect:Z,onReconnectStart:de,onReconnectEnd:be,reconnectRadius:at,defaultMarkerColor:j,noPanClassName:Be,elevateEdgesOnSelect:!!gt,disableKeyboardA11y:lt,rfId:tn},q.createElement(yF,{style:v,type:m,component:w,containerStyle:b})),q.createElement("div",{className:"react-flow__edgelabel-renderer"}),q.createElement(K$,{nodeTypes:nn,onNodeClick:o,onNodeDoubleClick:l,onNodeMouseEnter:c,onNodeMouseMove:d,onNodeMouseLeave:f,onNodeContextMenu:h,selectNodesOnDrag:E,onlyRenderVisibleElements:B,noPanClassName:Be,noDragClassName:Se,disableKeyboardA11y:lt,nodeOrigin:yt,nodeExtent:tt,rfId:tn})))};bA.displayName="GraphView";var vF=S.memo(bA);const Ey=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],lr={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:Ey,nodeExtent:Ey,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:mi.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:Hq,isValidConnection:void 0},xF=()=>oL((e,t)=>({...lr,setNodes:n=>{const{nodeInternals:r,nodeOrigin:i,elevateNodesOnSelect:s}=t();e({nodeInternals:ed(n,r,i,s)})},getNodes:()=>Array.from(t().nodeInternals.values()),setEdges:n=>{const{defaultEdgeOptions:r={}}=t();e({edges:n.map(i=>({...r,...i}))})},setDefaultNodesAndEdges:(n,r)=>{const i=typeof n<"u",s=typeof r<"u",o=i?ed(n,new Map,t().nodeOrigin,t().elevateNodesOnSelect):new Map;e({nodeInternals:o,edges:s?r:[],hasDefaultNodes:i,hasDefaultEdges:s})},updateNodeDimensions:n=>{const{onNodesChange:r,nodeInternals:i,fitViewOnInit:s,fitViewOnInitDone:o,fitViewOnInitOptions:a,domNode:l,nodeOrigin:u}=t(),c=l==null?void 0:l.querySelector(".react-flow__viewport");if(!c)return;const d=window.getComputedStyle(c),{m22:f}=new window.DOMMatrixReadOnly(d.transform),h=n.reduce((p,x)=>{const m=i.get(x.id);if(m!=null&&m.hidden)i.set(m.id,{...m,[Le]:{...m[Le],handleBounds:void 0}});else if(m){const v=Yv(x.nodeElement);!!(v.width&&v.height&&(m.width!==v.width||m.height!==v.height||x.forceUpdate))&&(i.set(m.id,{...m,[Le]:{...m[Le],handleBounds:{source:Jw(".source",x.nodeElement,f,u),target:Jw(".target",x.nodeElement,f,u)}},...v}),p.push({id:m.id,type:"dimensions",dimensions:v}))}return p},[]);uA(i,u);const g=o||s&&!o&&cA(t,{initial:!0,...a});e({nodeInternals:new Map(i),fitViewOnInitDone:g}),(h==null?void 0:h.length)>0&&(r==null||r(h))},updateNodePositions:(n,r=!0,i=!1)=>{const{triggerNodeChanges:s}=t(),o=n.map(a=>{const l={id:a.id,type:"position",dragging:i};return r&&(l.positionAbsolute=a.positionAbsolute,l.position=a.position),l});s(o)},triggerNodeChanges:n=>{const{onNodesChange:r,nodeInternals:i,hasDefaultNodes:s,nodeOrigin:o,getNodes:a,elevateNodesOnSelect:l}=t();if(n!=null&&n.length){if(s){const u=j$(n,a()),c=ed(u,i,o,l);e({nodeInternals:c})}r==null||r(n)}},addSelectedNodes:n=>{const{multiSelectionActive:r,edges:i,getNodes:s}=t();let o,a=null;r?o=n.map(l=>pr(l,!0)):(o=Ui(s(),n),a=Ui(i,[])),Wa({changedNodes:o,changedEdges:a,get:t,set:e})},addSelectedEdges:n=>{const{multiSelectionActive:r,edges:i,getNodes:s}=t();let o,a=null;r?o=n.map(l=>pr(l,!0)):(o=Ui(i,n),a=Ui(s(),[])),Wa({changedNodes:a,changedEdges:o,get:t,set:e})},unselectNodesAndEdges:({nodes:n,edges:r}={})=>{const{edges:i,getNodes:s}=t(),o=n||s(),a=r||i,l=o.map(c=>(c.selected=!1,pr(c.id,!1))),u=a.map(c=>pr(c.id,!1));Wa({changedNodes:l,changedEdges:u,get:t,set:e})},setMinZoom:n=>{const{d3Zoom:r,maxZoom:i}=t();r==null||r.scaleExtent([n,i]),e({minZoom:n})},setMaxZoom:n=>{const{d3Zoom:r,minZoom:i}=t();r==null||r.scaleExtent([i,n]),e({maxZoom:n})},setTranslateExtent:n=>{var r;(r=t().d3Zoom)==null||r.translateExtent(n),e({translateExtent:n})},resetSelectedElements:()=>{const{edges:n,getNodes:r}=t(),s=r().filter(a=>a.selected).map(a=>pr(a.id,!1)),o=n.filter(a=>a.selected).map(a=>pr(a.id,!1));Wa({changedNodes:s,changedEdges:o,get:t,set:e})},setNodeExtent:n=>{const{nodeInternals:r}=t();r.forEach(i=>{i.positionAbsolute=Xv(i.position,n)}),e({nodeExtent:n,nodeInternals:new Map(r)})},panBy:n=>{const{transform:r,width:i,height:s,d3Zoom:o,d3Selection:a,translateExtent:l}=t();if(!o||!a||!n.x&&!n.y)return!1;const u=Hn.translate(r[0]+n.x,r[1]+n.y).scale(r[2]),c=[[0,0],[i,s]],d=o==null?void 0:o.constrain()(u,c,l);return o.transform(a,d),r[0]!==d.x||r[1]!==d.y||r[2]!==d.k},cancelConnection:()=>e({connectionNodeId:lr.connectionNodeId,connectionHandleId:lr.connectionHandleId,connectionHandleType:lr.connectionHandleType,connectionStatus:lr.connectionStatus,connectionStartHandle:lr.connectionStartHandle,connectionEndHandle:lr.connectionEndHandle}),reset:()=>e({...lr})}),Object.is),SA=({children:e})=>{const t=S.useRef(null);return t.current||(t.current=xF()),q.createElement(qq,{value:t.current},e)};SA.displayName="ReactFlowProvider";const _A=({children:e})=>S.useContext(ju)?q.createElement(q.Fragment,null,e):q.createElement(SA,null,e);_A.displayName="ReactFlowWrapper";const wF={input:nA,default:Sy,output:iA,group:n0},bF={default:Jl,straight:Jv,step:Qv,smoothstep:Du,simplebezier:Zv},SF=[0,0],_F=[15,15],EF={x:0,y:0,zoom:1},CF={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},EA=S.forwardRef(({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,className:i,nodeTypes:s=wF,edgeTypes:o=bF,onNodeClick:a,onEdgeClick:l,onInit:u,onMove:c,onMoveStart:d,onMoveEnd:f,onConnect:h,onConnectStart:g,onConnectEnd:p,onClickConnectStart:x,onClickConnectEnd:m,onNodeMouseEnter:v,onNodeMouseMove:w,onNodeMouseLeave:b,onNodeContextMenu:_,onNodeDoubleClick:C,onNodeDragStart:k,onNodeDrag:T,onNodeDragStop:M,onNodesDelete:R,onEdgesDelete:I,onSelectionChange:B,onSelectionDragStart:F,onSelectionDrag:E,onSelectionDragStop:D,onSelectionContextMenu:P,onSelectionStart:L,onSelectionEnd:A,connectionMode:N=mi.Strict,connectionLineType:j=yr.Bezier,connectionLineStyle:$,connectionLineComponent:V,connectionLineContainerStyle:O,deleteKeyCode:G="Backspace",selectionKeyCode:Y="Shift",selectionOnDrag:ee=!1,selectionMode:se=Go.Full,panActivationKeyCode:pe="Space",multiSelectionKeyCode:te=Zl()?"Meta":"Control",zoomActivationKeyCode:le=Zl()?"Meta":"Control",snapToGrid:ve=!1,snapGrid:xe=_F,onlyRenderVisibleElements:H=!1,selectNodesOnDrag:Q=!0,nodesDraggable:z,nodesConnectable:re,nodesFocusable:X,nodeOrigin:Z=SF,edgesFocusable:de,edgesUpdatable:be,elementsSelectable:at,defaultViewport:Se=EF,minZoom:we=.5,maxZoom:Be=2,translateExtent:gt=Ey,preventScrolling:lt=!0,nodeExtent:yt,defaultMarkerColor:tt="#b1b1b7",zoomOnScroll:tn=!0,zoomOnPinch:nn=!0,panOnScroll:ze=!1,panOnScrollSpeed:Ge=.5,panOnScrollMode:Ze=ei.Free,zoomOnDoubleClick:Oe=!0,panOnDrag:rn=!0,onPaneClick:Vt,onPaneMouseEnter:At,onPaneMouseMove:Vr,onPaneMouseLeave:Ei,onPaneScroll:Br,onPaneContextMenu:Ci,children:wn,onEdgeContextMenu:ut,onEdgeDoubleClick:ga,onEdgeMouseEnter:Ms,onEdgeMouseMove:uc,onEdgeMouseLeave:cc,onEdgeUpdate:dc,onEdgeUpdateStart:fc,onEdgeUpdateEnd:hc,onReconnect:pc,onReconnectStart:mc,onReconnectEnd:qe,reconnectRadius:As=10,edgeUpdaterRadius:bn=10,onNodesChange:ya,onEdgesChange:sr,noDragClassName:zr="nodrag",noWheelClassName:gc="nowheel",noPanClassName:va="nopan",fitView:xa=!1,fitViewOptions:or,connectOnClick:wa=!0,attributionPosition:yc,proOptions:vc,defaultEdgeOptions:xc,elevateNodesOnSelect:ba=!0,elevateEdgesOnSelect:U=!1,disableKeyboardA11y:K=!1,autoPanOnConnect:oe=!0,autoPanOnNodeDrag:fe=!0,connectionRadius:Bt=20,isValidConnection:We,onError:$e,style:Sn,id:vt,nodeDragThreshold:ki,...E2},C2)=>{const wc=vt||"1";return q.createElement("div",{...E2,style:{...Sn,...CF},ref:C2,className:ot(["react-flow",i]),"data-testid":"rf__wrapper",id:vt},q.createElement(_A,null,q.createElement(vF,{onInit:u,onMove:c,onMoveStart:d,onMoveEnd:f,onNodeClick:a,onEdgeClick:l,onNodeMouseEnter:v,onNodeMouseMove:w,onNodeMouseLeave:b,onNodeContextMenu:_,onNodeDoubleClick:C,nodeTypes:s,edgeTypes:o,connectionLineType:j,connectionLineStyle:$,connectionLineComponent:V,connectionLineContainerStyle:O,selectionKeyCode:Y,selectionOnDrag:ee,selectionMode:se,deleteKeyCode:G,multiSelectionKeyCode:te,panActivationKeyCode:pe,zoomActivationKeyCode:le,onlyRenderVisibleElements:H,selectNodesOnDrag:Q,defaultViewport:Se,translateExtent:gt,minZoom:we,maxZoom:Be,preventScrolling:lt,zoomOnScroll:tn,zoomOnPinch:nn,zoomOnDoubleClick:Oe,panOnScroll:ze,panOnScrollSpeed:Ge,panOnScrollMode:Ze,panOnDrag:rn,onPaneClick:Vt,onPaneMouseEnter:At,onPaneMouseMove:Vr,onPaneMouseLeave:Ei,onPaneScroll:Br,onPaneContextMenu:Ci,onSelectionContextMenu:P,onSelectionStart:L,onSelectionEnd:A,onEdgeContextMenu:ut,onEdgeDoubleClick:ga,onEdgeMouseEnter:Ms,onEdgeMouseMove:uc,onEdgeMouseLeave:cc,onReconnect:pc??dc,onReconnectStart:mc??fc,onReconnectEnd:qe??hc,reconnectRadius:As??bn,defaultMarkerColor:tt,noDragClassName:zr,noWheelClassName:gc,noPanClassName:va,elevateEdgesOnSelect:U,rfId:wc,disableKeyboardA11y:K,nodeOrigin:Z,nodeExtent:yt}),q.createElement(p$,{nodes:e,edges:t,defaultNodes:n,defaultEdges:r,onConnect:h,onConnectStart:g,onConnectEnd:p,onClickConnectStart:x,onClickConnectEnd:m,nodesDraggable:z,nodesConnectable:re,nodesFocusable:X,edgesFocusable:de,edgesUpdatable:be,elementsSelectable:at,elevateNodesOnSelect:ba,minZoom:we,maxZoom:Be,nodeExtent:yt,onNodesChange:ya,onEdgesChange:sr,snapToGrid:ve,snapGrid:xe,connectionMode:N,translateExtent:gt,connectOnClick:wa,defaultEdgeOptions:xc,fitView:xa,fitViewOptions:or,onNodesDelete:R,onEdgesDelete:I,onNodeDragStart:k,onNodeDrag:T,onNodeDragStop:M,onSelectionDrag:E,onSelectionDragStart:F,onSelectionDragStop:D,noPanClassName:va,nodeOrigin:Z,rfId:wc,autoPanOnConnect:oe,autoPanOnNodeDrag:fe,onError:$e,connectionRadius:Bt,isValidConnection:We,nodeDragThreshold:ki}),q.createElement(f$,{onSelectionChange:B}),wn,q.createElement(Fq,{proOptions:vc,position:yc}),q.createElement(x$,{rfId:wc,disableKeyboardA11y:K})))});EA.displayName="ReactFlow";const CA=({id:e,x:t,y:n,width:r,height:i,style:s,color:o,strokeColor:a,strokeWidth:l,className:u,borderRadius:c,shapeRendering:d,onClick:f,selected:h})=>{const{background:g,backgroundColor:p}=s||{},x=o||g||p;return q.createElement("rect",{className:ot(["react-flow__minimap-node",{selected:h},u]),x:t,y:n,rx:c,ry:c,width:r,height:i,fill:x,stroke:a,strokeWidth:l,shapeRendering:d,onClick:f?m=>f(m,e):void 0})};CA.displayName="MiniMapNode";var kF=S.memo(CA);const TF=e=>e.nodeOrigin,NF=e=>e.getNodes().filter(t=>!t.hidden&&t.width&&t.height),id=e=>e instanceof Function?e:()=>e;function MF({nodeStrokeColor:e="transparent",nodeColor:t="#e2e2e2",nodeClassName:n="",nodeBorderRadius:r=5,nodeStrokeWidth:i=2,nodeComponent:s=kF,onClick:o}){const a=Ee(NF,et),l=Ee(TF),u=id(t),c=id(e),d=id(n),f=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return q.createElement(q.Fragment,null,a.map(h=>{const{x:g,y:p}=oi(h,l).positionAbsolute;return q.createElement(s,{key:h.id,x:g,y:p,width:h.width,height:h.height,style:h.style,selected:h.selected,className:d(h),color:u(h),borderRadius:r,strokeColor:c(h),strokeWidth:i,shapeRendering:f,onClick:o,id:h.id})}))}var AF=S.memo(MF);const RF=200,PF=150,IF=e=>{const t=e.getNodes(),n={x:-e.transform[0]/e.transform[2],y:-e.transform[1]/e.transform[2],width:e.width/e.transform[2],height:e.height/e.transform[2]};return{viewBB:n,boundingRect:t.length>0?zq(Lu(t,e.nodeOrigin),n):n,rfId:e.rfId}},jF="react-flow__minimap-desc";function kA({style:e,className:t,nodeStrokeColor:n="transparent",nodeColor:r="#e2e2e2",nodeClassName:i="",nodeBorderRadius:s=5,nodeStrokeWidth:o=2,nodeComponent:a,maskColor:l="rgb(240, 240, 240, 0.6)",maskStrokeColor:u="none",maskStrokeWidth:c=1,position:d="bottom-right",onClick:f,onNodeClick:h,pannable:g=!1,zoomable:p=!1,ariaLabel:x="React Flow mini map",inversePan:m=!1,zoomStep:v=10,offsetScale:w=5}){const b=Xe(),_=S.useRef(null),{boundingRect:C,viewBB:k,rfId:T}=Ee(IF,et),M=(e==null?void 0:e.width)??RF,R=(e==null?void 0:e.height)??PF,I=C.width/M,B=C.height/R,F=Math.max(I,B),E=F*M,D=F*R,P=w*F,L=C.x-(E-C.width)/2-P,A=C.y-(D-C.height)/2-P,N=E+P*2,j=D+P*2,$=`${jF}-${T}`,V=S.useRef(0);V.current=F,S.useEffect(()=>{if(_.current){const Y=Wt(_.current),ee=te=>{const{transform:le,d3Selection:ve,d3Zoom:xe}=b.getState();if(te.sourceEvent.type!=="wheel"||!ve||!xe)return;const H=-te.sourceEvent.deltaY*(te.sourceEvent.deltaMode===1?.05:te.sourceEvent.deltaMode?1:.002)*v,Q=le[2]*Math.pow(2,H);xe.scaleTo(ve,Q)},se=te=>{const{transform:le,d3Selection:ve,d3Zoom:xe,translateExtent:H,width:Q,height:z}=b.getState();if(te.sourceEvent.type!=="mousemove"||!ve||!xe)return;const re=V.current*Math.max(1,le[2])*(m?-1:1),X={x:le[0]-te.sourceEvent.movementX*re,y:le[1]-te.sourceEvent.movementY*re},Z=[[0,0],[Q,z]],de=Hn.translate(X.x,X.y).scale(le[2]),be=xe.constrain()(de,Z,H);xe.transform(ve,be)},pe=jM().on("zoom",g?se:null).on("zoom.wheel",p?ee:null);return Y.call(pe),()=>{Y.on("zoom",null)}}},[g,p,m,v]);const O=f?Y=>{const ee=cn(Y);f(Y,{x:ee[0],y:ee[1]})}:void 0,G=h?(Y,ee)=>{const se=b.getState().nodeInternals.get(ee);h(Y,se)}:void 0;return q.createElement(Kv,{position:d,style:e,className:ot(["react-flow__minimap",t]),"data-testid":"rf__minimap"},q.createElement("svg",{width:M,height:R,viewBox:`${L} ${A} ${N} ${j}`,role:"img","aria-labelledby":$,ref:_,onClick:O},x&&q.createElement("title",{id:$},x),q.createElement(AF,{onClick:G,nodeColor:r,nodeStrokeColor:n,nodeBorderRadius:s,nodeClassName:i,nodeStrokeWidth:o,nodeComponent:a}),q.createElement("path",{className:"react-flow__minimap-mask",d:`M${L-P},${A-P}h${N+P*2}v${j+P*2}h${-N-P*2}z
        M${k.x},${k.y}h${k.width}v${k.height}h${-k.width}z`,fill:l,fillRule:"evenodd",stroke:u,strokeWidth:c,pointerEvents:"none"})))}kA.displayName="MiniMap";var DF=S.memo(kA);function LF(){return q.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},q.createElement("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"}))}function OF(){return q.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},q.createElement("path",{d:"M0 0h32v4.2H0z"}))}function qF(){return q.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},q.createElement("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"}))}function $F(){return q.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},q.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"}))}function FF(){return q.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},q.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"}))}const Js=({children:e,className:t,...n})=>q.createElement("button",{type:"button",className:ot(["react-flow__controls-button",t]),...n},e);Js.displayName="ControlButton";const VF=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom}),TA=({style:e,showZoom:t=!0,showFitView:n=!0,showInteractive:r=!0,fitViewOptions:i,onZoomIn:s,onZoomOut:o,onFitView:a,onInteractiveChange:l,className:u,children:c,position:d="bottom-left"})=>{const f=Xe(),[h,g]=S.useState(!1),{isInteractive:p,minZoomReached:x,maxZoomReached:m}=Ee(VF,et),{zoomIn:v,zoomOut:w,fitView:b}=r0();if(S.useEffect(()=>{g(!0)},[]),!h)return null;const _=()=>{v(),s==null||s()},C=()=>{w(),o==null||o()},k=()=>{b(i),a==null||a()},T=()=>{f.setState({nodesDraggable:!p,nodesConnectable:!p,elementsSelectable:!p}),l==null||l(!p)};return q.createElement(Kv,{className:ot(["react-flow__controls",u]),position:d,style:e,"data-testid":"rf__controls"},t&&q.createElement(q.Fragment,null,q.createElement(Js,{onClick:_,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:m},q.createElement(LF,null)),q.createElement(Js,{onClick:C,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:x},q.createElement(OF,null))),n&&q.createElement(Js,{className:"react-flow__controls-fitview",onClick:k,title:"fit view","aria-label":"fit view"},q.createElement(qF,null)),r&&q.createElement(Js,{className:"react-flow__controls-interactive",onClick:T,title:"toggle interactivity","aria-label":"toggle interactivity"},p?q.createElement(FF,null):q.createElement($F,null)),c)};TA.displayName="Controls";var BF=S.memo(TA),mn;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(mn||(mn={}));function zF({color:e,dimensions:t,lineWidth:n}){return q.createElement("path",{stroke:e,strokeWidth:n,d:`M${t[0]/2} 0 V${t[1]} M0 ${t[1]/2} H${t[0]}`})}function UF({color:e,radius:t}){return q.createElement("circle",{cx:t,cy:t,r:t,fill:e})}const HF={[mn.Dots]:"#91919a",[mn.Lines]:"#eee",[mn.Cross]:"#e2e2e2"},GF={[mn.Dots]:1,[mn.Lines]:1,[mn.Cross]:6},WF=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function NA({id:e,variant:t=mn.Dots,gap:n=20,size:r,lineWidth:i=1,offset:s=2,color:o,style:a,className:l}){const u=S.useRef(null),{transform:c,patternId:d}=Ee(WF,et),f=o||HF[t],h=r||GF[t],g=t===mn.Dots,p=t===mn.Cross,x=Array.isArray(n)?n:[n,n],m=[x[0]*c[2]||1,x[1]*c[2]||1],v=h*c[2],w=p?[v,v]:m,b=g?[v/s,v/s]:[w[0]/s,w[1]/s];return q.createElement("svg",{className:ot(["react-flow__background",l]),style:{...a,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:u,"data-testid":"rf__background"},q.createElement("pattern",{id:d+e,x:c[0]%m[0],y:c[1]%m[1],width:m[0],height:m[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${b[0]},-${b[1]})`},g?q.createElement(UF,{color:f,radius:v/s}):q.createElement(zF,{dimensions:w,color:f,lineWidth:i})),q.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${d+e})`}))}NA.displayName="Background";var KF=S.memo(NA);function yl(e){const t=new Map;for(const r of e)r.type==="tool_call"&&r.toolCallId&&t.set(r.toolCallId,r.id);const n=[];for(const r of e)if(!(r.type!=="llm_call"||!r.io)){for(const i of r.io.emittedToolCallIds??[]){const s=t.get(i);s&&n.push({id:`io_emit_${r.id}_${s}`,source:r.id,target:s,kind:"io",toolCallId:i})}for(const i of r.io.consumedToolCallIds??[]){const s=t.get(i);s&&n.push({id:`io_consume_${s}_${r.id}`,source:s,target:r.id,kind:"io",toolCallId:i})}}return n}function s0(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var sd,a1;function YF(){if(a1)return sd;a1=1;function e(){this.__data__=[],this.size=0}return sd=e,sd}var od,l1;function Ss(){if(l1)return od;l1=1;function e(t,n){return t===n||t!==t&&n!==n}return od=e,od}var ad,u1;function Ou(){if(u1)return ad;u1=1;var e=Ss();function t(n,r){for(var i=n.length;i--;)if(e(n[i][0],r))return i;return-1}return ad=t,ad}var ld,c1;function XF(){if(c1)return ld;c1=1;var e=Ou(),t=Array.prototype,n=t.splice;function r(i){var s=this.__data__,o=e(s,i);if(o<0)return!1;var a=s.length-1;return o==a?s.pop():n.call(s,o,1),--this.size,!0}return ld=r,ld}var ud,d1;function ZF(){if(d1)return ud;d1=1;var e=Ou();function t(n){var r=this.__data__,i=e(r,n);return i<0?void 0:r[i][1]}return ud=t,ud}var cd,f1;function QF(){if(f1)return cd;f1=1;var e=Ou();function t(n){return e(this.__data__,n)>-1}return cd=t,cd}var dd,h1;function JF(){if(h1)return dd;h1=1;var e=Ou();function t(n,r){var i=this.__data__,s=e(i,n);return s<0?(++this.size,i.push([n,r])):i[s][1]=r,this}return dd=t,dd}var fd,p1;function qu(){if(p1)return fd;p1=1;var e=YF(),t=XF(),n=ZF(),r=QF(),i=JF();function s(o){var a=-1,l=o==null?0:o.length;for(this.clear();++a<l;){var u=o[a];this.set(u[0],u[1])}}return s.prototype.clear=e,s.prototype.delete=t,s.prototype.get=n,s.prototype.has=r,s.prototype.set=i,fd=s,fd}var hd,m1;function eV(){if(m1)return hd;m1=1;var e=qu();function t(){this.__data__=new e,this.size=0}return hd=t,hd}var pd,g1;function tV(){if(g1)return pd;g1=1;function e(t){var n=this.__data__,r=n.delete(t);return this.size=n.size,r}return pd=e,pd}var md,y1;function nV(){if(y1)return md;y1=1;function e(t){return this.__data__.get(t)}return md=e,md}var gd,v1;function rV(){if(v1)return gd;v1=1;function e(t){return this.__data__.has(t)}return gd=e,gd}var yd,x1;function MA(){if(x1)return yd;x1=1;var e=typeof Sa=="object"&&Sa&&Sa.Object===Object&&Sa;return yd=e,yd}var vd,w1;function vn(){if(w1)return vd;w1=1;var e=MA(),t=typeof self=="object"&&self&&self.Object===Object&&self,n=e||t||Function("return this")();return vd=n,vd}var xd,b1;function _s(){if(b1)return xd;b1=1;var e=vn(),t=e.Symbol;return xd=t,xd}var wd,S1;function iV(){if(S1)return wd;S1=1;var e=_s(),t=Object.prototype,n=t.hasOwnProperty,r=t.toString,i=e?e.toStringTag:void 0;function s(o){var a=n.call(o,i),l=o[i];try{o[i]=void 0;var u=!0}catch{}var c=r.call(o);return u&&(a?o[i]=l:delete o[i]),c}return wd=s,wd}var bd,_1;function sV(){if(_1)return bd;_1=1;var e=Object.prototype,t=e.toString;function n(r){return t.call(r)}return bd=n,bd}var Sd,E1;function vi(){if(E1)return Sd;E1=1;var e=_s(),t=iV(),n=sV(),r="[object Null]",i="[object Undefined]",s=e?e.toStringTag:void 0;function o(a){return a==null?a===void 0?i:r:s&&s in Object(a)?t(a):n(a)}return Sd=o,Sd}var _d,C1;function Jt(){if(C1)return _d;C1=1;function e(t){var n=typeof t;return t!=null&&(n=="object"||n=="function")}return _d=e,_d}var Ed,k1;function aa(){if(k1)return Ed;k1=1;var e=vi(),t=Jt(),n="[object AsyncFunction]",r="[object Function]",i="[object GeneratorFunction]",s="[object Proxy]";function o(a){if(!t(a))return!1;var l=e(a);return l==r||l==i||l==n||l==s}return Ed=o,Ed}var Cd,T1;function oV(){if(T1)return Cd;T1=1;var e=vn(),t=e["__core-js_shared__"];return Cd=t,Cd}var kd,N1;function aV(){if(N1)return kd;N1=1;var e=oV(),t=function(){var r=/[^.]+$/.exec(e&&e.keys&&e.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}();function n(r){return!!t&&t in r}return kd=n,kd}var Td,M1;function AA(){if(M1)return Td;M1=1;var e=Function.prototype,t=e.toString;function n(r){if(r!=null){try{return t.call(r)}catch{}try{return r+""}catch{}}return""}return Td=n,Td}var Nd,A1;function lV(){if(A1)return Nd;A1=1;var e=aa(),t=aV(),n=Jt(),r=AA(),i=/[\\^$.*+?()[\]{}|]/g,s=/^\[object .+?Constructor\]$/,o=Function.prototype,a=Object.prototype,l=o.toString,u=a.hasOwnProperty,c=RegExp("^"+l.call(u).replace(i,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function d(f){if(!n(f)||t(f))return!1;var h=e(f)?c:s;return h.test(r(f))}return Nd=d,Nd}var Md,R1;function uV(){if(R1)return Md;R1=1;function e(t,n){return t==null?void 0:t[n]}return Md=e,Md}var Ad,P1;function xi(){if(P1)return Ad;P1=1;var e=lV(),t=uV();function n(r,i){var s=t(r,i);return e(s)?s:void 0}return Ad=n,Ad}var Rd,I1;function o0(){if(I1)return Rd;I1=1;var e=xi(),t=vn(),n=e(t,"Map");return Rd=n,Rd}var Pd,j1;function $u(){if(j1)return Pd;j1=1;var e=xi(),t=e(Object,"create");return Pd=t,Pd}var Id,D1;function cV(){if(D1)return Id;D1=1;var e=$u();function t(){this.__data__=e?e(null):{},this.size=0}return Id=t,Id}var jd,L1;function dV(){if(L1)return jd;L1=1;function e(t){var n=this.has(t)&&delete this.__data__[t];return this.size-=n?1:0,n}return jd=e,jd}var Dd,O1;function fV(){if(O1)return Dd;O1=1;var e=$u(),t="__lodash_hash_undefined__",n=Object.prototype,r=n.hasOwnProperty;function i(s){var o=this.__data__;if(e){var a=o[s];return a===t?void 0:a}return r.call(o,s)?o[s]:void 0}return Dd=i,Dd}var Ld,q1;function hV(){if(q1)return Ld;q1=1;var e=$u(),t=Object.prototype,n=t.hasOwnProperty;function r(i){var s=this.__data__;return e?s[i]!==void 0:n.call(s,i)}return Ld=r,Ld}var Od,$1;function pV(){if($1)return Od;$1=1;var e=$u(),t="__lodash_hash_undefined__";function n(r,i){var s=this.__data__;return this.size+=this.has(r)?0:1,s[r]=e&&i===void 0?t:i,this}return Od=n,Od}var qd,F1;function mV(){if(F1)return qd;F1=1;var e=cV(),t=dV(),n=fV(),r=hV(),i=pV();function s(o){var a=-1,l=o==null?0:o.length;for(this.clear();++a<l;){var u=o[a];this.set(u[0],u[1])}}return s.prototype.clear=e,s.prototype.delete=t,s.prototype.get=n,s.prototype.has=r,s.prototype.set=i,qd=s,qd}var $d,V1;function gV(){if(V1)return $d;V1=1;var e=mV(),t=qu(),n=o0();function r(){this.size=0,this.__data__={hash:new e,map:new(n||t),string:new e}}return $d=r,$d}var Fd,B1;function yV(){if(B1)return Fd;B1=1;function e(t){var n=typeof t;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?t!=="__proto__":t===null}return Fd=e,Fd}var Vd,z1;function Fu(){if(z1)return Vd;z1=1;var e=yV();function t(n,r){var i=n.__data__;return e(r)?i[typeof r=="string"?"string":"hash"]:i.map}return Vd=t,Vd}var Bd,U1;function vV(){if(U1)return Bd;U1=1;var e=Fu();function t(n){var r=e(this,n).delete(n);return this.size-=r?1:0,r}return Bd=t,Bd}var zd,H1;function xV(){if(H1)return zd;H1=1;var e=Fu();function t(n){return e(this,n).get(n)}return zd=t,zd}var Ud,G1;function wV(){if(G1)return Ud;G1=1;var e=Fu();function t(n){return e(this,n).has(n)}return Ud=t,Ud}var Hd,W1;function bV(){if(W1)return Hd;W1=1;var e=Fu();function t(n,r){var i=e(this,n),s=i.size;return i.set(n,r),this.size+=i.size==s?0:1,this}return Hd=t,Hd}var Gd,K1;function a0(){if(K1)return Gd;K1=1;var e=gV(),t=vV(),n=xV(),r=wV(),i=bV();function s(o){var a=-1,l=o==null?0:o.length;for(this.clear();++a<l;){var u=o[a];this.set(u[0],u[1])}}return s.prototype.clear=e,s.prototype.delete=t,s.prototype.get=n,s.prototype.has=r,s.prototype.set=i,Gd=s,Gd}var Wd,Y1;function SV(){if(Y1)return Wd;Y1=1;var e=qu(),t=o0(),n=a0(),r=200;function i(s,o){var a=this.__data__;if(a instanceof e){var l=a.__data__;if(!t||l.length<r-1)return l.push([s,o]),this.size=++a.size,this;a=this.__data__=new n(l)}return a.set(s,o),this.size=a.size,this}return Wd=i,Wd}var Kd,X1;function Vu(){if(X1)return Kd;X1=1;var e=qu(),t=eV(),n=tV(),r=nV(),i=rV(),s=SV();function o(a){var l=this.__data__=new e(a);this.size=l.size}return o.prototype.clear=t,o.prototype.delete=n,o.prototype.get=r,o.prototype.has=i,o.prototype.set=s,Kd=o,Kd}var Yd,Z1;function l0(){if(Z1)return Yd;Z1=1;function e(t,n){for(var r=-1,i=t==null?0:t.length;++r<i&&n(t[r],r,t)!==!1;);return t}return Yd=e,Yd}var Xd,Q1;function RA(){if(Q1)return Xd;Q1=1;var e=xi(),t=function(){try{var n=e(Object,"defineProperty");return n({},"",{}),n}catch{}}();return Xd=t,Xd}var Zd,J1;function Bu(){if(J1)return Zd;J1=1;var e=RA();function t(n,r,i){r=="__proto__"&&e?e(n,r,{configurable:!0,enumerable:!0,value:i,writable:!0}):n[r]=i}return Zd=t,Zd}var Qd,eb;function zu(){if(eb)return Qd;eb=1;var e=Bu(),t=Ss(),n=Object.prototype,r=n.hasOwnProperty;function i(s,o,a){var l=s[o];(!(r.call(s,o)&&t(l,a))||a===void 0&&!(o in s))&&e(s,o,a)}return Qd=i,Qd}var Jd,tb;function la(){if(tb)return Jd;tb=1;var e=zu(),t=Bu();function n(r,i,s,o){var a=!s;s||(s={});for(var l=-1,u=i.length;++l<u;){var c=i[l],d=o?o(s[c],r[c],c,s,r):void 0;d===void 0&&(d=r[c]),a?t(s,c,d):e(s,c,d)}return s}return Jd=n,Jd}var ef,nb;function _V(){if(nb)return ef;nb=1;function e(t,n){for(var r=-1,i=Array(t);++r<t;)i[r]=n(r);return i}return ef=e,ef}var tf,rb;function In(){if(rb)return tf;rb=1;function e(t){return t!=null&&typeof t=="object"}return tf=e,tf}var nf,ib;function EV(){if(ib)return nf;ib=1;var e=vi(),t=In(),n="[object Arguments]";function r(i){return t(i)&&e(i)==n}return nf=r,nf}var rf,sb;function ua(){if(sb)return rf;sb=1;var e=EV(),t=In(),n=Object.prototype,r=n.hasOwnProperty,i=n.propertyIsEnumerable,s=e(function(){return arguments}())?e:function(o){return t(o)&&r.call(o,"callee")&&!i.call(o,"callee")};return rf=s,rf}var sf,ob;function He(){if(ob)return sf;ob=1;var e=Array.isArray;return sf=e,sf}var eo={exports:{}},of,ab;function CV(){if(ab)return of;ab=1;function e(){return!1}return of=e,of}eo.exports;var lb;function Es(){return lb||(lb=1,function(e,t){var n=vn(),r=CV(),i=t&&!t.nodeType&&t,s=i&&!0&&e&&!e.nodeType&&e,o=s&&s.exports===i,a=o?n.Buffer:void 0,l=a?a.isBuffer:void 0,u=l||r;e.exports=u}(eo,eo.exports)),eo.exports}var af,ub;function Uu(){if(ub)return af;ub=1;var e=9007199254740991,t=/^(?:0|[1-9]\d*)$/;function n(r,i){var s=typeof r;return i=i??e,!!i&&(s=="number"||s!="symbol"&&t.test(r))&&r>-1&&r%1==0&&r<i}return af=n,af}var lf,cb;function u0(){if(cb)return lf;cb=1;var e=9007199254740991;function t(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=e}return lf=t,lf}var uf,db;function kV(){if(db)return uf;db=1;var e=vi(),t=u0(),n=In(),r="[object Arguments]",i="[object Array]",s="[object Boolean]",o="[object Date]",a="[object Error]",l="[object Function]",u="[object Map]",c="[object Number]",d="[object Object]",f="[object RegExp]",h="[object Set]",g="[object String]",p="[object WeakMap]",x="[object ArrayBuffer]",m="[object DataView]",v="[object Float32Array]",w="[object Float64Array]",b="[object Int8Array]",_="[object Int16Array]",C="[object Int32Array]",k="[object Uint8Array]",T="[object Uint8ClampedArray]",M="[object Uint16Array]",R="[object Uint32Array]",I={};I[v]=I[w]=I[b]=I[_]=I[C]=I[k]=I[T]=I[M]=I[R]=!0,I[r]=I[i]=I[x]=I[s]=I[m]=I[o]=I[a]=I[l]=I[u]=I[c]=I[d]=I[f]=I[h]=I[g]=I[p]=!1;function B(F){return n(F)&&t(F.length)&&!!I[e(F)]}return uf=B,uf}var cf,fb;function Hu(){if(fb)return cf;fb=1;function e(t){return function(n){return t(n)}}return cf=e,cf}var to={exports:{}};to.exports;var hb;function c0(){return hb||(hb=1,function(e,t){var n=MA(),r=t&&!t.nodeType&&t,i=r&&!0&&e&&!e.nodeType&&e,s=i&&i.exports===r,o=s&&n.process,a=function(){try{var l=i&&i.require&&i.require("util").types;return l||o&&o.binding&&o.binding("util")}catch{}}();e.exports=a}(to,to.exports)),to.exports}var df,pb;function ca(){if(pb)return df;pb=1;var e=kV(),t=Hu(),n=c0(),r=n&&n.isTypedArray,i=r?t(r):e;return df=i,df}var ff,mb;function PA(){if(mb)return ff;mb=1;var e=_V(),t=ua(),n=He(),r=Es(),i=Uu(),s=ca(),o=Object.prototype,a=o.hasOwnProperty;function l(u,c){var d=n(u),f=!d&&t(u),h=!d&&!f&&r(u),g=!d&&!f&&!h&&s(u),p=d||f||h||g,x=p?e(u.length,String):[],m=x.length;for(var v in u)(c||a.call(u,v))&&!(p&&(v=="length"||h&&(v=="offset"||v=="parent")||g&&(v=="buffer"||v=="byteLength"||v=="byteOffset")||i(v,m)))&&x.push(v);return x}return ff=l,ff}var hf,gb;function Gu(){if(gb)return hf;gb=1;var e=Object.prototype;function t(n){var r=n&&n.constructor,i=typeof r=="function"&&r.prototype||e;return n===i}return hf=t,hf}var pf,yb;function IA(){if(yb)return pf;yb=1;function e(t,n){return function(r){return t(n(r))}}return pf=e,pf}var mf,vb;function TV(){if(vb)return mf;vb=1;var e=IA(),t=e(Object.keys,Object);return mf=t,mf}var gf,xb;function d0(){if(xb)return gf;xb=1;var e=Gu(),t=TV(),n=Object.prototype,r=n.hasOwnProperty;function i(s){if(!e(s))return t(s);var o=[];for(var a in Object(s))r.call(s,a)&&a!="constructor"&&o.push(a);return o}return gf=i,gf}var yf,wb;function rr(){if(wb)return yf;wb=1;var e=aa(),t=u0();function n(r){return r!=null&&t(r.length)&&!e(r)}return yf=n,yf}var vf,bb;function $r(){if(bb)return vf;bb=1;var e=PA(),t=d0(),n=rr();function r(i){return n(i)?e(i):t(i)}return vf=r,vf}var xf,Sb;function NV(){if(Sb)return xf;Sb=1;var e=la(),t=$r();function n(r,i){return r&&e(i,t(i),r)}return xf=n,xf}var wf,_b;function MV(){if(_b)return wf;_b=1;function e(t){var n=[];if(t!=null)for(var r in Object(t))n.push(r);return n}return wf=e,wf}var bf,Eb;function AV(){if(Eb)return bf;Eb=1;var e=Jt(),t=Gu(),n=MV(),r=Object.prototype,i=r.hasOwnProperty;function s(o){if(!e(o))return n(o);var a=t(o),l=[];for(var u in o)u=="constructor"&&(a||!i.call(o,u))||l.push(u);return l}return bf=s,bf}var Sf,Cb;function wi(){if(Cb)return Sf;Cb=1;var e=PA(),t=AV(),n=rr();function r(i){return n(i)?e(i,!0):t(i)}return Sf=r,Sf}var _f,kb;function RV(){if(kb)return _f;kb=1;var e=la(),t=wi();function n(r,i){return r&&e(i,t(i),r)}return _f=n,_f}var no={exports:{}};no.exports;var Tb;function jA(){return Tb||(Tb=1,function(e,t){var n=vn(),r=t&&!t.nodeType&&t,i=r&&!0&&e&&!e.nodeType&&e,s=i&&i.exports===r,o=s?n.Buffer:void 0,a=o?o.allocUnsafe:void 0;function l(u,c){if(c)return u.slice();var d=u.length,f=a?a(d):new u.constructor(d);return u.copy(f),f}e.exports=l}(no,no.exports)),no.exports}var Ef,Nb;function DA(){if(Nb)return Ef;Nb=1;function e(t,n){var r=-1,i=t.length;for(n||(n=Array(i));++r<i;)n[r]=t[r];return n}return Ef=e,Ef}var Cf,Mb;function LA(){if(Mb)return Cf;Mb=1;function e(t,n){for(var r=-1,i=t==null?0:t.length,s=0,o=[];++r<i;){var a=t[r];n(a,r,t)&&(o[s++]=a)}return o}return Cf=e,Cf}var kf,Ab;function OA(){if(Ab)return kf;Ab=1;function e(){return[]}return kf=e,kf}var Tf,Rb;function f0(){if(Rb)return Tf;Rb=1;var e=LA(),t=OA(),n=Object.prototype,r=n.propertyIsEnumerable,i=Object.getOwnPropertySymbols,s=i?function(o){return o==null?[]:(o=Object(o),e(i(o),function(a){return r.call(o,a)}))}:t;return Tf=s,Tf}var Nf,Pb;function PV(){if(Pb)return Nf;Pb=1;var e=la(),t=f0();function n(r,i){return e(r,t(r),i)}return Nf=n,Nf}var Mf,Ib;function h0(){if(Ib)return Mf;Ib=1;function e(t,n){for(var r=-1,i=n.length,s=t.length;++r<i;)t[s+r]=n[r];return t}return Mf=e,Mf}var Af,jb;function Wu(){if(jb)return Af;jb=1;var e=IA(),t=e(Object.getPrototypeOf,Object);return Af=t,Af}var Rf,Db;function qA(){if(Db)return Rf;Db=1;var e=h0(),t=Wu(),n=f0(),r=OA(),i=Object.getOwnPropertySymbols,s=i?function(o){for(var a=[];o;)e(a,n(o)),o=t(o);return a}:r;return Rf=s,Rf}var Pf,Lb;function IV(){if(Lb)return Pf;Lb=1;var e=la(),t=qA();function n(r,i){return e(r,t(r),i)}return Pf=n,Pf}var If,Ob;function $A(){if(Ob)return If;Ob=1;var e=h0(),t=He();function n(r,i,s){var o=i(r);return t(r)?o:e(o,s(r))}return If=n,If}var jf,qb;function FA(){if(qb)return jf;qb=1;var e=$A(),t=f0(),n=$r();function r(i){return e(i,n,t)}return jf=r,jf}var Df,$b;function jV(){if($b)return Df;$b=1;var e=$A(),t=qA(),n=wi();function r(i){return e(i,n,t)}return Df=r,Df}var Lf,Fb;function DV(){if(Fb)return Lf;Fb=1;var e=xi(),t=vn(),n=e(t,"DataView");return Lf=n,Lf}var Of,Vb;function LV(){if(Vb)return Of;Vb=1;var e=xi(),t=vn(),n=e(t,"Promise");return Of=n,Of}var qf,Bb;function VA(){if(Bb)return qf;Bb=1;var e=xi(),t=vn(),n=e(t,"Set");return qf=n,qf}var $f,zb;function OV(){if(zb)return $f;zb=1;var e=xi(),t=vn(),n=e(t,"WeakMap");return $f=n,$f}var Ff,Ub;function Cs(){if(Ub)return Ff;Ub=1;var e=DV(),t=o0(),n=LV(),r=VA(),i=OV(),s=vi(),o=AA(),a="[object Map]",l="[object Object]",u="[object Promise]",c="[object Set]",d="[object WeakMap]",f="[object DataView]",h=o(e),g=o(t),p=o(n),x=o(r),m=o(i),v=s;return(e&&v(new e(new ArrayBuffer(1)))!=f||t&&v(new t)!=a||n&&v(n.resolve())!=u||r&&v(new r)!=c||i&&v(new i)!=d)&&(v=function(w){var b=s(w),_=b==l?w.constructor:void 0,C=_?o(_):"";if(C)switch(C){case h:return f;case g:return a;case p:return u;case x:return c;case m:return d}return b}),Ff=v,Ff}var Vf,Hb;function qV(){if(Hb)return Vf;Hb=1;var e=Object.prototype,t=e.hasOwnProperty;function n(r){var i=r.length,s=new r.constructor(i);return i&&typeof r[0]=="string"&&t.call(r,"index")&&(s.index=r.index,s.input=r.input),s}return Vf=n,Vf}var Bf,Gb;function BA(){if(Gb)return Bf;Gb=1;var e=vn(),t=e.Uint8Array;return Bf=t,Bf}var zf,Wb;function p0(){if(Wb)return zf;Wb=1;var e=BA();function t(n){var r=new n.constructor(n.byteLength);return new e(r).set(new e(n)),r}return zf=t,zf}var Uf,Kb;function $V(){if(Kb)return Uf;Kb=1;var e=p0();function t(n,r){var i=r?e(n.buffer):n.buffer;return new n.constructor(i,n.byteOffset,n.byteLength)}return Uf=t,Uf}var Hf,Yb;function FV(){if(Yb)return Hf;Yb=1;var e=/\w*$/;function t(n){var r=new n.constructor(n.source,e.exec(n));return r.lastIndex=n.lastIndex,r}return Hf=t,Hf}var Gf,Xb;function VV(){if(Xb)return Gf;Xb=1;var e=_s(),t=e?e.prototype:void 0,n=t?t.valueOf:void 0;function r(i){return n?Object(n.call(i)):{}}return Gf=r,Gf}var Wf,Zb;function zA(){if(Zb)return Wf;Zb=1;var e=p0();function t(n,r){var i=r?e(n.buffer):n.buffer;return new n.constructor(i,n.byteOffset,n.length)}return Wf=t,Wf}var Kf,Qb;function BV(){if(Qb)return Kf;Qb=1;var e=p0(),t=$V(),n=FV(),r=VV(),i=zA(),s="[object Boolean]",o="[object Date]",a="[object Map]",l="[object Number]",u="[object RegExp]",c="[object Set]",d="[object String]",f="[object Symbol]",h="[object ArrayBuffer]",g="[object DataView]",p="[object Float32Array]",x="[object Float64Array]",m="[object Int8Array]",v="[object Int16Array]",w="[object Int32Array]",b="[object Uint8Array]",_="[object Uint8ClampedArray]",C="[object Uint16Array]",k="[object Uint32Array]";function T(M,R,I){var B=M.constructor;switch(R){case h:return e(M);case s:case o:return new B(+M);case g:return t(M,I);case p:case x:case m:case v:case w:case b:case _:case C:case k:return i(M,I);case a:return new B;case l:case d:return new B(M);case u:return n(M);case c:return new B;case f:return r(M)}}return Kf=T,Kf}var Yf,Jb;function UA(){if(Jb)return Yf;Jb=1;var e=Jt(),t=Object.create,n=function(){function r(){}return function(i){if(!e(i))return{};if(t)return t(i);r.prototype=i;var s=new r;return r.prototype=void 0,s}}();return Yf=n,Yf}var Xf,eS;function HA(){if(eS)return Xf;eS=1;var e=UA(),t=Wu(),n=Gu();function r(i){return typeof i.constructor=="function"&&!n(i)?e(t(i)):{}}return Xf=r,Xf}var Zf,tS;function zV(){if(tS)return Zf;tS=1;var e=Cs(),t=In(),n="[object Map]";function r(i){return t(i)&&e(i)==n}return Zf=r,Zf}var Qf,nS;function UV(){if(nS)return Qf;nS=1;var e=zV(),t=Hu(),n=c0(),r=n&&n.isMap,i=r?t(r):e;return Qf=i,Qf}var Jf,rS;function HV(){if(rS)return Jf;rS=1;var e=Cs(),t=In(),n="[object Set]";function r(i){return t(i)&&e(i)==n}return Jf=r,Jf}var eh,iS;function GV(){if(iS)return eh;iS=1;var e=HV(),t=Hu(),n=c0(),r=n&&n.isSet,i=r?t(r):e;return eh=i,eh}var th,sS;function GA(){if(sS)return th;sS=1;var e=Vu(),t=l0(),n=zu(),r=NV(),i=RV(),s=jA(),o=DA(),a=PV(),l=IV(),u=FA(),c=jV(),d=Cs(),f=qV(),h=BV(),g=HA(),p=He(),x=Es(),m=UV(),v=Jt(),w=GV(),b=$r(),_=wi(),C=1,k=2,T=4,M="[object Arguments]",R="[object Array]",I="[object Boolean]",B="[object Date]",F="[object Error]",E="[object Function]",D="[object GeneratorFunction]",P="[object Map]",L="[object Number]",A="[object Object]",N="[object RegExp]",j="[object Set]",$="[object String]",V="[object Symbol]",O="[object WeakMap]",G="[object ArrayBuffer]",Y="[object DataView]",ee="[object Float32Array]",se="[object Float64Array]",pe="[object Int8Array]",te="[object Int16Array]",le="[object Int32Array]",ve="[object Uint8Array]",xe="[object Uint8ClampedArray]",H="[object Uint16Array]",Q="[object Uint32Array]",z={};z[M]=z[R]=z[G]=z[Y]=z[I]=z[B]=z[ee]=z[se]=z[pe]=z[te]=z[le]=z[P]=z[L]=z[A]=z[N]=z[j]=z[$]=z[V]=z[ve]=z[xe]=z[H]=z[Q]=!0,z[F]=z[E]=z[O]=!1;function re(X,Z,de,be,at,Se){var we,Be=Z&C,gt=Z&k,lt=Z&T;if(de&&(we=at?de(X,be,at,Se):de(X)),we!==void 0)return we;if(!v(X))return X;var yt=p(X);if(yt){if(we=f(X),!Be)return o(X,we)}else{var tt=d(X),tn=tt==E||tt==D;if(x(X))return s(X,Be);if(tt==A||tt==M||tn&&!at){if(we=gt||tn?{}:g(X),!Be)return gt?l(X,i(we,X)):a(X,r(we,X))}else{if(!z[tt])return at?X:{};we=h(X,tt,Be)}}Se||(Se=new e);var nn=Se.get(X);if(nn)return nn;Se.set(X,we),w(X)?X.forEach(function(Ze){we.add(re(Ze,Z,de,Ze,X,Se))}):m(X)&&X.forEach(function(Ze,Oe){we.set(Oe,re(Ze,Z,de,Oe,X,Se))});var ze=lt?gt?c:u:gt?_:b,Ge=yt?void 0:ze(X);return t(Ge||X,function(Ze,Oe){Ge&&(Oe=Ze,Ze=X[Oe]),n(we,Oe,re(Ze,Z,de,Oe,X,Se))}),we}return th=re,th}var nh,oS;function WV(){if(oS)return nh;oS=1;var e=GA(),t=4;function n(r){return e(r,t)}return nh=n,nh}var rh,aS;function m0(){if(aS)return rh;aS=1;function e(t){return function(){return t}}return rh=e,rh}var ih,lS;function KV(){if(lS)return ih;lS=1;function e(t){return function(n,r,i){for(var s=-1,o=Object(n),a=i(n),l=a.length;l--;){var u=a[t?l:++s];if(r(o[u],u,o)===!1)break}return n}}return ih=e,ih}var sh,uS;function g0(){if(uS)return sh;uS=1;var e=KV(),t=e();return sh=t,sh}var oh,cS;function y0(){if(cS)return oh;cS=1;var e=g0(),t=$r();function n(r,i){return r&&e(r,i,t)}return oh=n,oh}var ah,dS;function YV(){if(dS)return ah;dS=1;var e=rr();function t(n,r){return function(i,s){if(i==null)return i;if(!e(i))return n(i,s);for(var o=i.length,a=r?o:-1,l=Object(i);(r?a--:++a<o)&&s(l[a],a,l)!==!1;);return i}}return ah=t,ah}var lh,fS;function Ku(){if(fS)return lh;fS=1;var e=y0(),t=YV(),n=t(e);return lh=n,lh}var uh,hS;function bi(){if(hS)return uh;hS=1;function e(t){return t}return uh=e,uh}var ch,pS;function WA(){if(pS)return ch;pS=1;var e=bi();function t(n){return typeof n=="function"?n:e}return ch=t,ch}var dh,mS;function KA(){if(mS)return dh;mS=1;var e=l0(),t=Ku(),n=WA(),r=He();function i(s,o){var a=r(s)?e:t;return a(s,n(o))}return dh=i,dh}var fh,gS;function YA(){return gS||(gS=1,fh=KA()),fh}var hh,yS;function XV(){if(yS)return hh;yS=1;var e=Ku();function t(n,r){var i=[];return e(n,function(s,o,a){r(s,o,a)&&i.push(s)}),i}return hh=t,hh}var ph,vS;function ZV(){if(vS)return ph;vS=1;var e="__lodash_hash_undefined__";function t(n){return this.__data__.set(n,e),this}return ph=t,ph}var mh,xS;function QV(){if(xS)return mh;xS=1;function e(t){return this.__data__.has(t)}return mh=e,mh}var gh,wS;function XA(){if(wS)return gh;wS=1;var e=a0(),t=ZV(),n=QV();function r(i){var s=-1,o=i==null?0:i.length;for(this.__data__=new e;++s<o;)this.add(i[s])}return r.prototype.add=r.prototype.push=t,r.prototype.has=n,gh=r,gh}var yh,bS;function JV(){if(bS)return yh;bS=1;function e(t,n){for(var r=-1,i=t==null?0:t.length;++r<i;)if(n(t[r],r,t))return!0;return!1}return yh=e,yh}var vh,SS;function ZA(){if(SS)return vh;SS=1;function e(t,n){return t.has(n)}return vh=e,vh}var xh,_S;function QA(){if(_S)return xh;_S=1;var e=XA(),t=JV(),n=ZA(),r=1,i=2;function s(o,a,l,u,c,d){var f=l&r,h=o.length,g=a.length;if(h!=g&&!(f&&g>h))return!1;var p=d.get(o),x=d.get(a);if(p&&x)return p==a&&x==o;var m=-1,v=!0,w=l&i?new e:void 0;for(d.set(o,a),d.set(a,o);++m<h;){var b=o[m],_=a[m];if(u)var C=f?u(_,b,m,a,o,d):u(b,_,m,o,a,d);if(C!==void 0){if(C)continue;v=!1;break}if(w){if(!t(a,function(k,T){if(!n(w,T)&&(b===k||c(b,k,l,u,d)))return w.push(T)})){v=!1;break}}else if(!(b===_||c(b,_,l,u,d))){v=!1;break}}return d.delete(o),d.delete(a),v}return xh=s,xh}var wh,ES;function eB(){if(ES)return wh;ES=1;function e(t){var n=-1,r=Array(t.size);return t.forEach(function(i,s){r[++n]=[s,i]}),r}return wh=e,wh}var bh,CS;function v0(){if(CS)return bh;CS=1;function e(t){var n=-1,r=Array(t.size);return t.forEach(function(i){r[++n]=i}),r}return bh=e,bh}var Sh,kS;function tB(){if(kS)return Sh;kS=1;var e=_s(),t=BA(),n=Ss(),r=QA(),i=eB(),s=v0(),o=1,a=2,l="[object Boolean]",u="[object Date]",c="[object Error]",d="[object Map]",f="[object Number]",h="[object RegExp]",g="[object Set]",p="[object String]",x="[object Symbol]",m="[object ArrayBuffer]",v="[object DataView]",w=e?e.prototype:void 0,b=w?w.valueOf:void 0;function _(C,k,T,M,R,I,B){switch(T){case v:if(C.byteLength!=k.byteLength||C.byteOffset!=k.byteOffset)return!1;C=C.buffer,k=k.buffer;case m:return!(C.byteLength!=k.byteLength||!I(new t(C),new t(k)));case l:case u:case f:return n(+C,+k);case c:return C.name==k.name&&C.message==k.message;case h:case p:return C==k+"";case d:var F=i;case g:var E=M&o;if(F||(F=s),C.size!=k.size&&!E)return!1;var D=B.get(C);if(D)return D==k;M|=a,B.set(C,k);var P=r(F(C),F(k),M,R,I,B);return B.delete(C),P;case x:if(b)return b.call(C)==b.call(k)}return!1}return Sh=_,Sh}var _h,TS;function nB(){if(TS)return _h;TS=1;var e=FA(),t=1,n=Object.prototype,r=n.hasOwnProperty;function i(s,o,a,l,u,c){var d=a&t,f=e(s),h=f.length,g=e(o),p=g.length;if(h!=p&&!d)return!1;for(var x=h;x--;){var m=f[x];if(!(d?m in o:r.call(o,m)))return!1}var v=c.get(s),w=c.get(o);if(v&&w)return v==o&&w==s;var b=!0;c.set(s,o),c.set(o,s);for(var _=d;++x<h;){m=f[x];var C=s[m],k=o[m];if(l)var T=d?l(k,C,m,o,s,c):l(C,k,m,s,o,c);if(!(T===void 0?C===k||u(C,k,a,l,c):T)){b=!1;break}_||(_=m=="constructor")}if(b&&!_){var M=s.constructor,R=o.constructor;M!=R&&"constructor"in s&&"constructor"in o&&!(typeof M=="function"&&M instanceof M&&typeof R=="function"&&R instanceof R)&&(b=!1)}return c.delete(s),c.delete(o),b}return _h=i,_h}var Eh,NS;function rB(){if(NS)return Eh;NS=1;var e=Vu(),t=QA(),n=tB(),r=nB(),i=Cs(),s=He(),o=Es(),a=ca(),l=1,u="[object Arguments]",c="[object Array]",d="[object Object]",f=Object.prototype,h=f.hasOwnProperty;function g(p,x,m,v,w,b){var _=s(p),C=s(x),k=_?c:i(p),T=C?c:i(x);k=k==u?d:k,T=T==u?d:T;var M=k==d,R=T==d,I=k==T;if(I&&o(p)){if(!o(x))return!1;_=!0,M=!1}if(I&&!M)return b||(b=new e),_||a(p)?t(p,x,m,v,w,b):n(p,x,k,m,v,w,b);if(!(m&l)){var B=M&&h.call(p,"__wrapped__"),F=R&&h.call(x,"__wrapped__");if(B||F){var E=B?p.value():p,D=F?x.value():x;return b||(b=new e),w(E,D,m,v,b)}}return I?(b||(b=new e),r(p,x,m,v,w,b)):!1}return Eh=g,Eh}var Ch,MS;function JA(){if(MS)return Ch;MS=1;var e=rB(),t=In();function n(r,i,s,o,a){return r===i?!0:r==null||i==null||!t(r)&&!t(i)?r!==r&&i!==i:e(r,i,s,o,n,a)}return Ch=n,Ch}var kh,AS;function iB(){if(AS)return kh;AS=1;var e=Vu(),t=JA(),n=1,r=2;function i(s,o,a,l){var u=a.length,c=u,d=!l;if(s==null)return!c;for(s=Object(s);u--;){var f=a[u];if(d&&f[2]?f[1]!==s[f[0]]:!(f[0]in s))return!1}for(;++u<c;){f=a[u];var h=f[0],g=s[h],p=f[1];if(d&&f[2]){if(g===void 0&&!(h in s))return!1}else{var x=new e;if(l)var m=l(g,p,h,s,o,x);if(!(m===void 0?t(p,g,n|r,l,x):m))return!1}}return!0}return kh=i,kh}var Th,RS;function eR(){if(RS)return Th;RS=1;var e=Jt();function t(n){return n===n&&!e(n)}return Th=t,Th}var Nh,PS;function sB(){if(PS)return Nh;PS=1;var e=eR(),t=$r();function n(r){for(var i=t(r),s=i.length;s--;){var o=i[s],a=r[o];i[s]=[o,a,e(a)]}return i}return Nh=n,Nh}var Mh,IS;function tR(){if(IS)return Mh;IS=1;function e(t,n){return function(r){return r==null?!1:r[t]===n&&(n!==void 0||t in Object(r))}}return Mh=e,Mh}var Ah,jS;function oB(){if(jS)return Ah;jS=1;var e=iB(),t=sB(),n=tR();function r(i){var s=t(i);return s.length==1&&s[0][2]?n(s[0][0],s[0][1]):function(o){return o===i||e(o,i,s)}}return Ah=r,Ah}var Rh,DS;function ks(){if(DS)return Rh;DS=1;var e=vi(),t=In(),n="[object Symbol]";function r(i){return typeof i=="symbol"||t(i)&&e(i)==n}return Rh=r,Rh}var Ph,LS;function x0(){if(LS)return Ph;LS=1;var e=He(),t=ks(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function i(s,o){if(e(s))return!1;var a=typeof s;return a=="number"||a=="symbol"||a=="boolean"||s==null||t(s)?!0:r.test(s)||!n.test(s)||o!=null&&s in Object(o)}return Ph=i,Ph}var Ih,OS;function aB(){if(OS)return Ih;OS=1;var e=a0(),t="Expected a function";function n(r,i){if(typeof r!="function"||i!=null&&typeof i!="function")throw new TypeError(t);var s=function(){var o=arguments,a=i?i.apply(this,o):o[0],l=s.cache;if(l.has(a))return l.get(a);var u=r.apply(this,o);return s.cache=l.set(a,u)||l,u};return s.cache=new(n.Cache||e),s}return n.Cache=e,Ih=n,Ih}var jh,qS;function lB(){if(qS)return jh;qS=1;var e=aB(),t=500;function n(r){var i=e(r,function(o){return s.size===t&&s.clear(),o}),s=i.cache;return i}return jh=n,jh}var Dh,$S;function uB(){if($S)return Dh;$S=1;var e=lB(),t=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,n=/\\(\\)?/g,r=e(function(i){var s=[];return i.charCodeAt(0)===46&&s.push(""),i.replace(t,function(o,a,l,u){s.push(l?u.replace(n,"$1"):a||o)}),s});return Dh=r,Dh}var Lh,FS;function Yu(){if(FS)return Lh;FS=1;function e(t,n){for(var r=-1,i=t==null?0:t.length,s=Array(i);++r<i;)s[r]=n(t[r],r,t);return s}return Lh=e,Lh}var Oh,VS;function cB(){if(VS)return Oh;VS=1;var e=_s(),t=Yu(),n=He(),r=ks(),i=e?e.prototype:void 0,s=i?i.toString:void 0;function o(a){if(typeof a=="string")return a;if(n(a))return t(a,o)+"";if(r(a))return s?s.call(a):"";var l=a+"";return l=="0"&&1/a==-1/0?"-0":l}return Oh=o,Oh}var qh,BS;function nR(){if(BS)return qh;BS=1;var e=cB();function t(n){return n==null?"":e(n)}return qh=t,qh}var $h,zS;function Xu(){if(zS)return $h;zS=1;var e=He(),t=x0(),n=uB(),r=nR();function i(s,o){return e(s)?s:t(s,o)?[s]:n(r(s))}return $h=i,$h}var Fh,US;function da(){if(US)return Fh;US=1;var e=ks();function t(n){if(typeof n=="string"||e(n))return n;var r=n+"";return r=="0"&&1/n==-1/0?"-0":r}return Fh=t,Fh}var Vh,HS;function Zu(){if(HS)return Vh;HS=1;var e=Xu(),t=da();function n(r,i){i=e(i,r);for(var s=0,o=i.length;r!=null&&s<o;)r=r[t(i[s++])];return s&&s==o?r:void 0}return Vh=n,Vh}var Bh,GS;function dB(){if(GS)return Bh;GS=1;var e=Zu();function t(n,r,i){var s=n==null?void 0:e(n,r);return s===void 0?i:s}return Bh=t,Bh}var zh,WS;function fB(){if(WS)return zh;WS=1;function e(t,n){return t!=null&&n in Object(t)}return zh=e,zh}var Uh,KS;function rR(){if(KS)return Uh;KS=1;var e=Xu(),t=ua(),n=He(),r=Uu(),i=u0(),s=da();function o(a,l,u){l=e(l,a);for(var c=-1,d=l.length,f=!1;++c<d;){var h=s(l[c]);if(!(f=a!=null&&u(a,h)))break;a=a[h]}return f||++c!=d?f:(d=a==null?0:a.length,!!d&&i(d)&&r(h,d)&&(n(a)||t(a)))}return Uh=o,Uh}var Hh,YS;function iR(){if(YS)return Hh;YS=1;var e=fB(),t=rR();function n(r,i){return r!=null&&t(r,i,e)}return Hh=n,Hh}var Gh,XS;function hB(){if(XS)return Gh;XS=1;var e=JA(),t=dB(),n=iR(),r=x0(),i=eR(),s=tR(),o=da(),a=1,l=2;function u(c,d){return r(c)&&i(d)?s(o(c),d):function(f){var h=t(f,c);return h===void 0&&h===d?n(f,c):e(d,h,a|l)}}return Gh=u,Gh}var Wh,ZS;function sR(){if(ZS)return Wh;ZS=1;function e(t){return function(n){return n==null?void 0:n[t]}}return Wh=e,Wh}var Kh,QS;function pB(){if(QS)return Kh;QS=1;var e=Zu();function t(n){return function(r){return e(r,n)}}return Kh=t,Kh}var Yh,JS;function mB(){if(JS)return Yh;JS=1;var e=sR(),t=pB(),n=x0(),r=da();function i(s){return n(s)?e(r(s)):t(s)}return Yh=i,Yh}var Xh,e_;function ir(){if(e_)return Xh;e_=1;var e=oB(),t=hB(),n=bi(),r=He(),i=mB();function s(o){return typeof o=="function"?o:o==null?n:typeof o=="object"?r(o)?t(o[0],o[1]):e(o):i(o)}return Xh=s,Xh}var Zh,t_;function oR(){if(t_)return Zh;t_=1;var e=LA(),t=XV(),n=ir(),r=He();function i(s,o){var a=r(s)?e:t;return a(s,n(o,3))}return Zh=i,Zh}var Qh,n_;function gB(){if(n_)return Qh;n_=1;var e=Object.prototype,t=e.hasOwnProperty;function n(r,i){return r!=null&&t.call(r,i)}return Qh=n,Qh}var Jh,r_;function aR(){if(r_)return Jh;r_=1;var e=gB(),t=rR();function n(r,i){return r!=null&&t(r,i,e)}return Jh=n,Jh}var ep,i_;function yB(){if(i_)return ep;i_=1;var e=d0(),t=Cs(),n=ua(),r=He(),i=rr(),s=Es(),o=Gu(),a=ca(),l="[object Map]",u="[object Set]",c=Object.prototype,d=c.hasOwnProperty;function f(h){if(h==null)return!0;if(i(h)&&(r(h)||typeof h=="string"||typeof h.splice=="function"||s(h)||a(h)||n(h)))return!h.length;var g=t(h);if(g==l||g==u)return!h.size;if(o(h))return!e(h).length;for(var p in h)if(d.call(h,p))return!1;return!0}return ep=f,ep}var tp,s_;function lR(){if(s_)return tp;s_=1;function e(t){return t===void 0}return tp=e,tp}var np,o_;function uR(){if(o_)return np;o_=1;var e=Ku(),t=rr();function n(r,i){var s=-1,o=t(r)?Array(r.length):[];return e(r,function(a,l,u){o[++s]=i(a,l,u)}),o}return np=n,np}var rp,a_;function cR(){if(a_)return rp;a_=1;var e=Yu(),t=ir(),n=uR(),r=He();function i(s,o){var a=r(s)?e:n;return a(s,t(o,3))}return rp=i,rp}var ip,l_;function vB(){if(l_)return ip;l_=1;function e(t,n,r,i){var s=-1,o=t==null?0:t.length;for(i&&o&&(r=t[++s]);++s<o;)r=n(r,t[s],s,t);return r}return ip=e,ip}var sp,u_;function xB(){if(u_)return sp;u_=1;function e(t,n,r,i,s){return s(t,function(o,a,l){r=i?(i=!1,o):n(r,o,a,l)}),r}return sp=e,sp}var op,c_;function dR(){if(c_)return op;c_=1;var e=vB(),t=Ku(),n=ir(),r=xB(),i=He();function s(o,a,l){var u=i(o)?e:r,c=arguments.length<3;return u(o,n(a,4),l,c,t)}return op=s,op}var ap,d_;function wB(){if(d_)return ap;d_=1;var e=vi(),t=He(),n=In(),r="[object String]";function i(s){return typeof s=="string"||!t(s)&&n(s)&&e(s)==r}return ap=i,ap}var lp,f_;function bB(){if(f_)return lp;f_=1;var e=sR(),t=e("length");return lp=t,lp}var up,h_;function SB(){if(h_)return up;h_=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",i=t+n+r,s="\\ufe0e\\ufe0f",o="\\u200d",a=RegExp("["+o+e+i+s+"]");function l(u){return a.test(u)}return up=l,up}var cp,p_;function _B(){if(p_)return cp;p_=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",i=t+n+r,s="\\ufe0e\\ufe0f",o="["+e+"]",a="["+i+"]",l="\\ud83c[\\udffb-\\udfff]",u="(?:"+a+"|"+l+")",c="[^"+e+"]",d="(?:\\ud83c[\\udde6-\\uddff]){2}",f="[\\ud800-\\udbff][\\udc00-\\udfff]",h="\\u200d",g=u+"?",p="["+s+"]?",x="(?:"+h+"(?:"+[c,d,f].join("|")+")"+p+g+")*",m=p+g+x,v="(?:"+[c+a+"?",a,d,f,o].join("|")+")",w=RegExp(l+"(?="+l+")|"+v+m,"g");function b(_){for(var C=w.lastIndex=0;w.test(_);)++C;return C}return cp=b,cp}var dp,m_;function EB(){if(m_)return dp;m_=1;var e=bB(),t=SB(),n=_B();function r(i){return t(i)?n(i):e(i)}return dp=r,dp}var fp,g_;function CB(){if(g_)return fp;g_=1;var e=d0(),t=Cs(),n=rr(),r=wB(),i=EB(),s="[object Map]",o="[object Set]";function a(l){if(l==null)return 0;if(n(l))return r(l)?i(l):l.length;var u=t(l);return u==s||u==o?l.size:e(l).length}return fp=a,fp}var hp,y_;function kB(){if(y_)return hp;y_=1;var e=l0(),t=UA(),n=y0(),r=ir(),i=Wu(),s=He(),o=Es(),a=aa(),l=Jt(),u=ca();function c(d,f,h){var g=s(d),p=g||o(d)||u(d);if(f=r(f,4),h==null){var x=d&&d.constructor;p?h=g?new x:[]:l(d)?h=a(x)?t(i(d)):{}:h={}}return(p?e:n)(d,function(m,v,w){return f(h,m,v,w)}),h}return hp=c,hp}var pp,v_;function TB(){if(v_)return pp;v_=1;var e=_s(),t=ua(),n=He(),r=e?e.isConcatSpreadable:void 0;function i(s){return n(s)||t(s)||!!(r&&s&&s[r])}return pp=i,pp}var mp,x_;function w0(){if(x_)return mp;x_=1;var e=h0(),t=TB();function n(r,i,s,o,a){var l=-1,u=r.length;for(s||(s=t),a||(a=[]);++l<u;){var c=r[l];i>0&&s(c)?i>1?n(c,i-1,s,o,a):e(a,c):o||(a[a.length]=c)}return a}return mp=n,mp}var gp,w_;function NB(){if(w_)return gp;w_=1;function e(t,n,r){switch(r.length){case 0:return t.call(n);case 1:return t.call(n,r[0]);case 2:return t.call(n,r[0],r[1]);case 3:return t.call(n,r[0],r[1],r[2])}return t.apply(n,r)}return gp=e,gp}var yp,b_;function fR(){if(b_)return yp;b_=1;var e=NB(),t=Math.max;function n(r,i,s){return i=t(i===void 0?r.length-1:i,0),function(){for(var o=arguments,a=-1,l=t(o.length-i,0),u=Array(l);++a<l;)u[a]=o[i+a];a=-1;for(var c=Array(i+1);++a<i;)c[a]=o[a];return c[i]=s(u),e(r,this,c)}}return yp=n,yp}var vp,S_;function MB(){if(S_)return vp;S_=1;var e=m0(),t=RA(),n=bi(),r=t?function(i,s){return t(i,"toString",{configurable:!0,enumerable:!1,value:e(s),writable:!0})}:n;return vp=r,vp}var xp,__;function AB(){if(__)return xp;__=1;var e=800,t=16,n=Date.now;function r(i){var s=0,o=0;return function(){var a=n(),l=t-(a-o);if(o=a,l>0){if(++s>=e)return arguments[0]}else s=0;return i.apply(void 0,arguments)}}return xp=r,xp}var wp,E_;function hR(){if(E_)return wp;E_=1;var e=MB(),t=AB(),n=t(e);return wp=n,wp}var bp,C_;function Qu(){if(C_)return bp;C_=1;var e=bi(),t=fR(),n=hR();function r(i,s){return n(t(i,s,e),i+"")}return bp=r,bp}var Sp,k_;function pR(){if(k_)return Sp;k_=1;function e(t,n,r,i){for(var s=t.length,o=r+(i?1:-1);i?o--:++o<s;)if(n(t[o],o,t))return o;return-1}return Sp=e,Sp}var _p,T_;function RB(){if(T_)return _p;T_=1;function e(t){return t!==t}return _p=e,_p}var Ep,N_;function PB(){if(N_)return Ep;N_=1;function e(t,n,r){for(var i=r-1,s=t.length;++i<s;)if(t[i]===n)return i;return-1}return Ep=e,Ep}var Cp,M_;function IB(){if(M_)return Cp;M_=1;var e=pR(),t=RB(),n=PB();function r(i,s,o){return s===s?n(i,s,o):e(i,t,o)}return Cp=r,Cp}var kp,A_;function jB(){if(A_)return kp;A_=1;var e=IB();function t(n,r){var i=n==null?0:n.length;return!!i&&e(n,r,0)>-1}return kp=t,kp}var Tp,R_;function DB(){if(R_)return Tp;R_=1;function e(t,n,r){for(var i=-1,s=t==null?0:t.length;++i<s;)if(r(n,t[i]))return!0;return!1}return Tp=e,Tp}var Np,P_;function LB(){if(P_)return Np;P_=1;function e(){}return Np=e,Np}var Mp,I_;function OB(){if(I_)return Mp;I_=1;var e=VA(),t=LB(),n=v0(),r=1/0,i=e&&1/n(new e([,-0]))[1]==r?function(s){return new e(s)}:t;return Mp=i,Mp}var Ap,j_;function qB(){if(j_)return Ap;j_=1;var e=XA(),t=jB(),n=DB(),r=ZA(),i=OB(),s=v0(),o=200;function a(l,u,c){var d=-1,f=t,h=l.length,g=!0,p=[],x=p;if(c)g=!1,f=n;else if(h>=o){var m=u?null:i(l);if(m)return s(m);g=!1,f=r,x=new e}else x=u?[]:p;e:for(;++d<h;){var v=l[d],w=u?u(v):v;if(v=c||v!==0?v:0,g&&w===w){for(var b=x.length;b--;)if(x[b]===w)continue e;u&&x.push(w),p.push(v)}else f(x,w,c)||(x!==p&&x.push(w),p.push(v))}return p}return Ap=a,Ap}var Rp,D_;function mR(){if(D_)return Rp;D_=1;var e=rr(),t=In();function n(r){return t(r)&&e(r)}return Rp=n,Rp}var Pp,L_;function $B(){if(L_)return Pp;L_=1;var e=w0(),t=Qu(),n=qB(),r=mR(),i=t(function(s){return n(e(s,1,r,!0))});return Pp=i,Pp}var Ip,O_;function FB(){if(O_)return Ip;O_=1;var e=Yu();function t(n,r){return e(r,function(i){return n[i]})}return Ip=t,Ip}var jp,q_;function gR(){if(q_)return jp;q_=1;var e=FB(),t=$r();function n(r){return r==null?[]:e(r,t(r))}return jp=n,jp}var Dp,$_;function en(){if($_)return Dp;$_=1;var e;if(typeof s0=="function")try{e={clone:WV(),constant:m0(),each:YA(),filter:oR(),has:aR(),isArray:He(),isEmpty:yB(),isFunction:aa(),isUndefined:lR(),keys:$r(),map:cR(),reduce:dR(),size:CB(),transform:kB(),union:$B(),values:gR()}}catch{}return e||(e=window._),Dp=e,Dp}var Lp,F_;function b0(){if(F_)return Lp;F_=1;var e=en();Lp=i;var t="\0",n="\0",r="";function i(c){this._isDirected=e.has(c,"directed")?c.directed:!0,this._isMultigraph=e.has(c,"multigraph")?c.multigraph:!1,this._isCompound=e.has(c,"compound")?c.compound:!1,this._label=void 0,this._defaultNodeLabelFn=e.constant(void 0),this._defaultEdgeLabelFn=e.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[n]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}i.prototype._nodeCount=0,i.prototype._edgeCount=0,i.prototype.isDirected=function(){return this._isDirected},i.prototype.isMultigraph=function(){return this._isMultigraph},i.prototype.isCompound=function(){return this._isCompound},i.prototype.setGraph=function(c){return this._label=c,this},i.prototype.graph=function(){return this._label},i.prototype.setDefaultNodeLabel=function(c){return e.isFunction(c)||(c=e.constant(c)),this._defaultNodeLabelFn=c,this},i.prototype.nodeCount=function(){return this._nodeCount},i.prototype.nodes=function(){return e.keys(this._nodes)},i.prototype.sources=function(){var c=this;return e.filter(this.nodes(),function(d){return e.isEmpty(c._in[d])})},i.prototype.sinks=function(){var c=this;return e.filter(this.nodes(),function(d){return e.isEmpty(c._out[d])})},i.prototype.setNodes=function(c,d){var f=arguments,h=this;return e.each(c,function(g){f.length>1?h.setNode(g,d):h.setNode(g)}),this},i.prototype.setNode=function(c,d){return e.has(this._nodes,c)?(arguments.length>1&&(this._nodes[c]=d),this):(this._nodes[c]=arguments.length>1?d:this._defaultNodeLabelFn(c),this._isCompound&&(this._parent[c]=n,this._children[c]={},this._children[n][c]=!0),this._in[c]={},this._preds[c]={},this._out[c]={},this._sucs[c]={},++this._nodeCount,this)},i.prototype.node=function(c){return this._nodes[c]},i.prototype.hasNode=function(c){return e.has(this._nodes,c)},i.prototype.removeNode=function(c){var d=this;if(e.has(this._nodes,c)){var f=function(h){d.removeEdge(d._edgeObjs[h])};delete this._nodes[c],this._isCompound&&(this._removeFromParentsChildList(c),delete this._parent[c],e.each(this.children(c),function(h){d.setParent(h)}),delete this._children[c]),e.each(e.keys(this._in[c]),f),delete this._in[c],delete this._preds[c],e.each(e.keys(this._out[c]),f),delete this._out[c],delete this._sucs[c],--this._nodeCount}return this},i.prototype.setParent=function(c,d){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(e.isUndefined(d))d=n;else{d+="";for(var f=d;!e.isUndefined(f);f=this.parent(f))if(f===c)throw new Error("Setting "+d+" as parent of "+c+" would create a cycle");this.setNode(d)}return this.setNode(c),this._removeFromParentsChildList(c),this._parent[c]=d,this._children[d][c]=!0,this},i.prototype._removeFromParentsChildList=function(c){delete this._children[this._parent[c]][c]},i.prototype.parent=function(c){if(this._isCompound){var d=this._parent[c];if(d!==n)return d}},i.prototype.children=function(c){if(e.isUndefined(c)&&(c=n),this._isCompound){var d=this._children[c];if(d)return e.keys(d)}else{if(c===n)return this.nodes();if(this.hasNode(c))return[]}},i.prototype.predecessors=function(c){var d=this._preds[c];if(d)return e.keys(d)},i.prototype.successors=function(c){var d=this._sucs[c];if(d)return e.keys(d)},i.prototype.neighbors=function(c){var d=this.predecessors(c);if(d)return e.union(d,this.successors(c))},i.prototype.isLeaf=function(c){var d;return this.isDirected()?d=this.successors(c):d=this.neighbors(c),d.length===0},i.prototype.filterNodes=function(c){var d=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});d.setGraph(this.graph());var f=this;e.each(this._nodes,function(p,x){c(x)&&d.setNode(x,p)}),e.each(this._edgeObjs,function(p){d.hasNode(p.v)&&d.hasNode(p.w)&&d.setEdge(p,f.edge(p))});var h={};function g(p){var x=f.parent(p);return x===void 0||d.hasNode(x)?(h[p]=x,x):x in h?h[x]:g(x)}return this._isCompound&&e.each(d.nodes(),function(p){d.setParent(p,g(p))}),d},i.prototype.setDefaultEdgeLabel=function(c){return e.isFunction(c)||(c=e.constant(c)),this._defaultEdgeLabelFn=c,this},i.prototype.edgeCount=function(){return this._edgeCount},i.prototype.edges=function(){return e.values(this._edgeObjs)},i.prototype.setPath=function(c,d){var f=this,h=arguments;return e.reduce(c,function(g,p){return h.length>1?f.setEdge(g,p,d):f.setEdge(g,p),p}),this},i.prototype.setEdge=function(){var c,d,f,h,g=!1,p=arguments[0];typeof p=="object"&&p!==null&&"v"in p?(c=p.v,d=p.w,f=p.name,arguments.length===2&&(h=arguments[1],g=!0)):(c=p,d=arguments[1],f=arguments[3],arguments.length>2&&(h=arguments[2],g=!0)),c=""+c,d=""+d,e.isUndefined(f)||(f=""+f);var x=a(this._isDirected,c,d,f);if(e.has(this._edgeLabels,x))return g&&(this._edgeLabels[x]=h),this;if(!e.isUndefined(f)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(c),this.setNode(d),this._edgeLabels[x]=g?h:this._defaultEdgeLabelFn(c,d,f);var m=l(this._isDirected,c,d,f);return c=m.v,d=m.w,Object.freeze(m),this._edgeObjs[x]=m,s(this._preds[d],c),s(this._sucs[c],d),this._in[d][x]=m,this._out[c][x]=m,this._edgeCount++,this},i.prototype.edge=function(c,d,f){var h=arguments.length===1?u(this._isDirected,arguments[0]):a(this._isDirected,c,d,f);return this._edgeLabels[h]},i.prototype.hasEdge=function(c,d,f){var h=arguments.length===1?u(this._isDirected,arguments[0]):a(this._isDirected,c,d,f);return e.has(this._edgeLabels,h)},i.prototype.removeEdge=function(c,d,f){var h=arguments.length===1?u(this._isDirected,arguments[0]):a(this._isDirected,c,d,f),g=this._edgeObjs[h];return g&&(c=g.v,d=g.w,delete this._edgeLabels[h],delete this._edgeObjs[h],o(this._preds[d],c),o(this._sucs[c],d),delete this._in[d][h],delete this._out[c][h],this._edgeCount--),this},i.prototype.inEdges=function(c,d){var f=this._in[c];if(f){var h=e.values(f);return d?e.filter(h,function(g){return g.v===d}):h}},i.prototype.outEdges=function(c,d){var f=this._out[c];if(f){var h=e.values(f);return d?e.filter(h,function(g){return g.w===d}):h}},i.prototype.nodeEdges=function(c,d){var f=this.inEdges(c,d);if(f)return f.concat(this.outEdges(c,d))};function s(c,d){c[d]?c[d]++:c[d]=1}function o(c,d){--c[d]||delete c[d]}function a(c,d,f,h){var g=""+d,p=""+f;if(!c&&g>p){var x=g;g=p,p=x}return g+r+p+r+(e.isUndefined(h)?t:h)}function l(c,d,f,h){var g=""+d,p=""+f;if(!c&&g>p){var x=g;g=p,p=x}var m={v:g,w:p};return h&&(m.name=h),m}function u(c,d){return a(c,d.v,d.w,d.name)}return Lp}var Op,V_;function VB(){return V_||(V_=1,Op="2.1.8"),Op}var qp,B_;function BB(){return B_||(B_=1,qp={Graph:b0(),version:VB()}),qp}var $p,z_;function zB(){if(z_)return $p;z_=1;var e=en(),t=b0();$p={write:n,read:s};function n(o){var a={options:{directed:o.isDirected(),multigraph:o.isMultigraph(),compound:o.isCompound()},nodes:r(o),edges:i(o)};return e.isUndefined(o.graph())||(a.value=e.clone(o.graph())),a}function r(o){return e.map(o.nodes(),function(a){var l=o.node(a),u=o.parent(a),c={v:a};return e.isUndefined(l)||(c.value=l),e.isUndefined(u)||(c.parent=u),c})}function i(o){return e.map(o.edges(),function(a){var l=o.edge(a),u={v:a.v,w:a.w};return e.isUndefined(a.name)||(u.name=a.name),e.isUndefined(l)||(u.value=l),u})}function s(o){var a=new t(o.options).setGraph(o.value);return e.each(o.nodes,function(l){a.setNode(l.v,l.value),l.parent&&a.setParent(l.v,l.parent)}),e.each(o.edges,function(l){a.setEdge({v:l.v,w:l.w,name:l.name},l.value)}),a}return $p}var Fp,U_;function UB(){if(U_)return Fp;U_=1;var e=en();Fp=t;function t(n){var r={},i=[],s;function o(a){e.has(r,a)||(r[a]=!0,s.push(a),e.each(n.successors(a),o),e.each(n.predecessors(a),o))}return e.each(n.nodes(),function(a){s=[],o(a),s.length&&i.push(s)}),i}return Fp}var Vp,H_;function yR(){if(H_)return Vp;H_=1;var e=en();Vp=t;function t(){this._arr=[],this._keyIndices={}}return t.prototype.size=function(){return this._arr.length},t.prototype.keys=function(){return this._arr.map(function(n){return n.key})},t.prototype.has=function(n){return e.has(this._keyIndices,n)},t.prototype.priority=function(n){var r=this._keyIndices[n];if(r!==void 0)return this._arr[r].priority},t.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key},t.prototype.add=function(n,r){var i=this._keyIndices;if(n=String(n),!e.has(i,n)){var s=this._arr,o=s.length;return i[n]=o,s.push({key:n,priority:r}),this._decrease(o),!0}return!1},t.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var n=this._arr.pop();return delete this._keyIndices[n.key],this._heapify(0),n.key},t.prototype.decrease=function(n,r){var i=this._keyIndices[n];if(r>this._arr[i].priority)throw new Error("New priority is greater than current priority. Key: "+n+" Old: "+this._arr[i].priority+" New: "+r);this._arr[i].priority=r,this._decrease(i)},t.prototype._heapify=function(n){var r=this._arr,i=2*n,s=i+1,o=n;i<r.length&&(o=r[i].priority<r[o].priority?i:o,s<r.length&&(o=r[s].priority<r[o].priority?s:o),o!==n&&(this._swap(n,o),this._heapify(o)))},t.prototype._decrease=function(n){for(var r=this._arr,i=r[n].priority,s;n!==0&&(s=n>>1,!(r[s].priority<i));)this._swap(n,s),n=s},t.prototype._swap=function(n,r){var i=this._arr,s=this._keyIndices,o=i[n],a=i[r];i[n]=a,i[r]=o,s[a.key]=n,s[o.key]=r},Vp}var Bp,G_;function vR(){if(G_)return Bp;G_=1;var e=en(),t=yR();Bp=r;var n=e.constant(1);function r(s,o,a,l){return i(s,String(o),a||n,l||function(u){return s.outEdges(u)})}function i(s,o,a,l){var u={},c=new t,d,f,h=function(g){var p=g.v!==d?g.v:g.w,x=u[p],m=a(g),v=f.distance+m;if(m<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+g+" Weight: "+m);v<x.distance&&(x.distance=v,x.predecessor=d,c.decrease(p,v))};for(s.nodes().forEach(function(g){var p=g===o?0:Number.POSITIVE_INFINITY;u[g]={distance:p},c.add(g,p)});c.size()>0&&(d=c.removeMin(),f=u[d],f.distance!==Number.POSITIVE_INFINITY);)l(d).forEach(h);return u}return Bp}var zp,W_;function HB(){if(W_)return zp;W_=1;var e=vR(),t=en();zp=n;function n(r,i,s){return t.transform(r.nodes(),function(o,a){o[a]=e(r,a,i,s)},{})}return zp}var Up,K_;function xR(){if(K_)return Up;K_=1;var e=en();Up=t;function t(n){var r=0,i=[],s={},o=[];function a(l){var u=s[l]={onStack:!0,lowlink:r,index:r++};if(i.push(l),n.successors(l).forEach(function(f){e.has(s,f)?s[f].onStack&&(u.lowlink=Math.min(u.lowlink,s[f].index)):(a(f),u.lowlink=Math.min(u.lowlink,s[f].lowlink))}),u.lowlink===u.index){var c=[],d;do d=i.pop(),s[d].onStack=!1,c.push(d);while(l!==d);o.push(c)}}return n.nodes().forEach(function(l){e.has(s,l)||a(l)}),o}return Up}var Hp,Y_;function GB(){if(Y_)return Hp;Y_=1;var e=en(),t=xR();Hp=n;function n(r){return e.filter(t(r),function(i){return i.length>1||i.length===1&&r.hasEdge(i[0],i[0])})}return Hp}var Gp,X_;function WB(){if(X_)return Gp;X_=1;var e=en();Gp=n;var t=e.constant(1);function n(i,s,o){return r(i,s||t,o||function(a){return i.outEdges(a)})}function r(i,s,o){var a={},l=i.nodes();return l.forEach(function(u){a[u]={},a[u][u]={distance:0},l.forEach(function(c){u!==c&&(a[u][c]={distance:Number.POSITIVE_INFINITY})}),o(u).forEach(function(c){var d=c.v===u?c.w:c.v,f=s(c);a[u][d]={distance:f,predecessor:u}})}),l.forEach(function(u){var c=a[u];l.forEach(function(d){var f=a[d];l.forEach(function(h){var g=f[u],p=c[h],x=f[h],m=g.distance+p.distance;m<x.distance&&(x.distance=m,x.predecessor=p.predecessor)})})}),a}return Gp}var Wp,Z_;function wR(){if(Z_)return Wp;Z_=1;var e=en();Wp=t,t.CycleException=n;function t(r){var i={},s={},o=[];function a(l){if(e.has(s,l))throw new n;e.has(i,l)||(s[l]=!0,i[l]=!0,e.each(r.predecessors(l),a),delete s[l],o.push(l))}if(e.each(r.sinks(),a),e.size(i)!==r.nodeCount())throw new n;return o}function n(){}return n.prototype=new Error,Wp}var Kp,Q_;function KB(){if(Q_)return Kp;Q_=1;var e=wR();Kp=t;function t(n){try{e(n)}catch(r){if(r instanceof e.CycleException)return!1;throw r}return!0}return Kp}var Yp,J_;function bR(){if(J_)return Yp;J_=1;var e=en();Yp=t;function t(r,i,s){e.isArray(i)||(i=[i]);var o=(r.isDirected()?r.successors:r.neighbors).bind(r),a=[],l={};return e.each(i,function(u){if(!r.hasNode(u))throw new Error("Graph does not have node: "+u);n(r,u,s==="post",l,o,a)}),a}function n(r,i,s,o,a,l){e.has(o,i)||(o[i]=!0,s||l.push(i),e.each(a(i),function(u){n(r,u,s,o,a,l)}),s&&l.push(i))}return Yp}var Xp,eE;function YB(){if(eE)return Xp;eE=1;var e=bR();Xp=t;function t(n,r){return e(n,r,"post")}return Xp}var Zp,tE;function XB(){if(tE)return Zp;tE=1;var e=bR();Zp=t;function t(n,r){return e(n,r,"pre")}return Zp}var Qp,nE;function ZB(){if(nE)return Qp;nE=1;var e=en(),t=b0(),n=yR();Qp=r;function r(i,s){var o=new t,a={},l=new n,u;function c(f){var h=f.v===u?f.w:f.v,g=l.priority(h);if(g!==void 0){var p=s(f);p<g&&(a[h]=u,l.decrease(h,p))}}if(i.nodeCount()===0)return o;e.each(i.nodes(),function(f){l.add(f,Number.POSITIVE_INFINITY),o.setNode(f)}),l.decrease(i.nodes()[0],0);for(var d=!1;l.size()>0;){if(u=l.removeMin(),e.has(a,u))o.setEdge(u,a[u]);else{if(d)throw new Error("Input graph is not connected: "+i);d=!0}i.nodeEdges(u).forEach(c)}return o}return Qp}var Jp,rE;function QB(){return rE||(rE=1,Jp={components:UB(),dijkstra:vR(),dijkstraAll:HB(),findCycles:GB(),floydWarshall:WB(),isAcyclic:KB(),postorder:YB(),preorder:XB(),prim:ZB(),tarjan:xR(),topsort:wR()}),Jp}var em,iE;function JB(){if(iE)return em;iE=1;var e=BB();return em={Graph:e.Graph,json:zB(),alg:QB(),version:e.version},em}var tu;if(typeof s0=="function")try{tu=JB()}catch{}tu||(tu=window.graphlib);var xn=tu,tm,sE;function e4(){if(sE)return tm;sE=1;var e=GA(),t=1,n=4;function r(i){return e(i,t|n)}return tm=r,tm}var nm,oE;function Ju(){if(oE)return nm;oE=1;var e=Ss(),t=rr(),n=Uu(),r=Jt();function i(s,o,a){if(!r(a))return!1;var l=typeof o;return(l=="number"?t(a)&&n(o,a.length):l=="string"&&o in a)?e(a[o],s):!1}return nm=i,nm}var rm,aE;function t4(){if(aE)return rm;aE=1;var e=Qu(),t=Ss(),n=Ju(),r=wi(),i=Object.prototype,s=i.hasOwnProperty,o=e(function(a,l){a=Object(a);var u=-1,c=l.length,d=c>2?l[2]:void 0;for(d&&n(l[0],l[1],d)&&(c=1);++u<c;)for(var f=l[u],h=r(f),g=-1,p=h.length;++g<p;){var x=h[g],m=a[x];(m===void 0||t(m,i[x])&&!s.call(a,x))&&(a[x]=f[x])}return a});return rm=o,rm}var im,lE;function n4(){if(lE)return im;lE=1;var e=ir(),t=rr(),n=$r();function r(i){return function(s,o,a){var l=Object(s);if(!t(s)){var u=e(o,3);s=n(s),o=function(d){return u(l[d],d,l)}}var c=i(s,o,a);return c>-1?l[u?s[c]:c]:void 0}}return im=r,im}var sm,uE;function r4(){if(uE)return sm;uE=1;var e=/\s/;function t(n){for(var r=n.length;r--&&e.test(n.charAt(r)););return r}return sm=t,sm}var om,cE;function i4(){if(cE)return om;cE=1;var e=r4(),t=/^\s+/;function n(r){return r&&r.slice(0,e(r)+1).replace(t,"")}return om=n,om}var am,dE;function s4(){if(dE)return am;dE=1;var e=i4(),t=Jt(),n=ks(),r=NaN,i=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,o=/^0o[0-7]+$/i,a=parseInt;function l(u){if(typeof u=="number")return u;if(n(u))return r;if(t(u)){var c=typeof u.valueOf=="function"?u.valueOf():u;u=t(c)?c+"":c}if(typeof u!="string")return u===0?u:+u;u=e(u);var d=s.test(u);return d||o.test(u)?a(u.slice(2),d?2:8):i.test(u)?r:+u}return am=l,am}var lm,fE;function SR(){if(fE)return lm;fE=1;var e=s4(),t=1/0,n=17976931348623157e292;function r(i){if(!i)return i===0?i:0;if(i=e(i),i===t||i===-t){var s=i<0?-1:1;return s*n}return i===i?i:0}return lm=r,lm}var um,hE;function o4(){if(hE)return um;hE=1;var e=SR();function t(n){var r=e(n),i=r%1;return r===r?i?r-i:r:0}return um=t,um}var cm,pE;function a4(){if(pE)return cm;pE=1;var e=pR(),t=ir(),n=o4(),r=Math.max;function i(s,o,a){var l=s==null?0:s.length;if(!l)return-1;var u=a==null?0:n(a);return u<0&&(u=r(l+u,0)),e(s,t(o,3),u)}return cm=i,cm}var dm,mE;function l4(){if(mE)return dm;mE=1;var e=n4(),t=a4(),n=e(t);return dm=n,dm}var fm,gE;function _R(){if(gE)return fm;gE=1;var e=w0();function t(n){var r=n==null?0:n.length;return r?e(n,1):[]}return fm=t,fm}var hm,yE;function u4(){if(yE)return hm;yE=1;var e=g0(),t=WA(),n=wi();function r(i,s){return i==null?i:e(i,t(s),n)}return hm=r,hm}var pm,vE;function c4(){if(vE)return pm;vE=1;function e(t){var n=t==null?0:t.length;return n?t[n-1]:void 0}return pm=e,pm}var mm,xE;function d4(){if(xE)return mm;xE=1;var e=Bu(),t=y0(),n=ir();function r(i,s){var o={};return s=n(s,3),t(i,function(a,l,u){e(o,l,s(a,l,u))}),o}return mm=r,mm}var gm,wE;function S0(){if(wE)return gm;wE=1;var e=ks();function t(n,r,i){for(var s=-1,o=n.length;++s<o;){var a=n[s],l=r(a);if(l!=null&&(u===void 0?l===l&&!e(l):i(l,u)))var u=l,c=a}return c}return gm=t,gm}var ym,bE;function f4(){if(bE)return ym;bE=1;function e(t,n){return t>n}return ym=e,ym}var vm,SE;function h4(){if(SE)return vm;SE=1;var e=S0(),t=f4(),n=bi();function r(i){return i&&i.length?e(i,n,t):void 0}return vm=r,vm}var xm,_E;function ER(){if(_E)return xm;_E=1;var e=Bu(),t=Ss();function n(r,i,s){(s!==void 0&&!t(r[i],s)||s===void 0&&!(i in r))&&e(r,i,s)}return xm=n,xm}var wm,EE;function p4(){if(EE)return wm;EE=1;var e=vi(),t=Wu(),n=In(),r="[object Object]",i=Function.prototype,s=Object.prototype,o=i.toString,a=s.hasOwnProperty,l=o.call(Object);function u(c){if(!n(c)||e(c)!=r)return!1;var d=t(c);if(d===null)return!0;var f=a.call(d,"constructor")&&d.constructor;return typeof f=="function"&&f instanceof f&&o.call(f)==l}return wm=u,wm}var bm,CE;function CR(){if(CE)return bm;CE=1;function e(t,n){if(!(n==="constructor"&&typeof t[n]=="function")&&n!="__proto__")return t[n]}return bm=e,bm}var Sm,kE;function m4(){if(kE)return Sm;kE=1;var e=la(),t=wi();function n(r){return e(r,t(r))}return Sm=n,Sm}var _m,TE;function g4(){if(TE)return _m;TE=1;var e=ER(),t=jA(),n=zA(),r=DA(),i=HA(),s=ua(),o=He(),a=mR(),l=Es(),u=aa(),c=Jt(),d=p4(),f=ca(),h=CR(),g=m4();function p(x,m,v,w,b,_,C){var k=h(x,v),T=h(m,v),M=C.get(T);if(M){e(x,v,M);return}var R=_?_(k,T,v+"",x,m,C):void 0,I=R===void 0;if(I){var B=o(T),F=!B&&l(T),E=!B&&!F&&f(T);R=T,B||F||E?o(k)?R=k:a(k)?R=r(k):F?(I=!1,R=t(T,!0)):E?(I=!1,R=n(T,!0)):R=[]:d(T)||s(T)?(R=k,s(k)?R=g(k):(!c(k)||u(k))&&(R=i(T))):I=!1}I&&(C.set(T,R),b(R,T,w,_,C),C.delete(T)),e(x,v,R)}return _m=p,_m}var Em,NE;function y4(){if(NE)return Em;NE=1;var e=Vu(),t=ER(),n=g0(),r=g4(),i=Jt(),s=wi(),o=CR();function a(l,u,c,d,f){l!==u&&n(u,function(h,g){if(f||(f=new e),i(h))r(l,u,g,c,a,d,f);else{var p=d?d(o(l,g),h,g+"",l,u,f):void 0;p===void 0&&(p=h),t(l,g,p)}},s)}return Em=a,Em}var Cm,ME;function v4(){if(ME)return Cm;ME=1;var e=Qu(),t=Ju();function n(r){return e(function(i,s){var o=-1,a=s.length,l=a>1?s[a-1]:void 0,u=a>2?s[2]:void 0;for(l=r.length>3&&typeof l=="function"?(a--,l):void 0,u&&t(s[0],s[1],u)&&(l=a<3?void 0:l,a=1),i=Object(i);++o<a;){var c=s[o];c&&r(i,c,o,l)}return i})}return Cm=n,Cm}var km,AE;function x4(){if(AE)return km;AE=1;var e=y4(),t=v4(),n=t(function(r,i,s){e(r,i,s)});return km=n,km}var Tm,RE;function kR(){if(RE)return Tm;RE=1;function e(t,n){return t<n}return Tm=e,Tm}var Nm,PE;function w4(){if(PE)return Nm;PE=1;var e=S0(),t=kR(),n=bi();function r(i){return i&&i.length?e(i,n,t):void 0}return Nm=r,Nm}var Mm,IE;function b4(){if(IE)return Mm;IE=1;var e=S0(),t=ir(),n=kR();function r(i,s){return i&&i.length?e(i,t(s,2),n):void 0}return Mm=r,Mm}var Am,jE;function S4(){if(jE)return Am;jE=1;var e=vn(),t=function(){return e.Date.now()};return Am=t,Am}var Rm,DE;function _4(){if(DE)return Rm;DE=1;var e=zu(),t=Xu(),n=Uu(),r=Jt(),i=da();function s(o,a,l,u){if(!r(o))return o;a=t(a,o);for(var c=-1,d=a.length,f=d-1,h=o;h!=null&&++c<d;){var g=i(a[c]),p=l;if(g==="__proto__"||g==="constructor"||g==="prototype")return o;if(c!=f){var x=h[g];p=u?u(x,g,h):void 0,p===void 0&&(p=r(x)?x:n(a[c+1])?[]:{})}e(h,g,p),h=h[g]}return o}return Rm=s,Rm}var Pm,LE;function E4(){if(LE)return Pm;LE=1;var e=Zu(),t=_4(),n=Xu();function r(i,s,o){for(var a=-1,l=s.length,u={};++a<l;){var c=s[a],d=e(i,c);o(d,c)&&t(u,n(c,i),d)}return u}return Pm=r,Pm}var Im,OE;function C4(){if(OE)return Im;OE=1;var e=E4(),t=iR();function n(r,i){return e(r,i,function(s,o){return t(r,o)})}return Im=n,Im}var jm,qE;function k4(){if(qE)return jm;qE=1;var e=_R(),t=fR(),n=hR();function r(i){return n(t(i,void 0,e),i+"")}return jm=r,jm}var Dm,$E;function T4(){if($E)return Dm;$E=1;var e=C4(),t=k4(),n=t(function(r,i){return r==null?{}:e(r,i)});return Dm=n,Dm}var Lm,FE;function N4(){if(FE)return Lm;FE=1;var e=Math.ceil,t=Math.max;function n(r,i,s,o){for(var a=-1,l=t(e((i-r)/(s||1)),0),u=Array(l);l--;)u[o?l:++a]=r,r+=s;return u}return Lm=n,Lm}var Om,VE;function M4(){if(VE)return Om;VE=1;var e=N4(),t=Ju(),n=SR();function r(i){return function(s,o,a){return a&&typeof a!="number"&&t(s,o,a)&&(o=a=void 0),s=n(s),o===void 0?(o=s,s=0):o=n(o),a=a===void 0?s<o?1:-1:n(a),e(s,o,a,i)}}return Om=r,Om}var qm,BE;function A4(){if(BE)return qm;BE=1;var e=M4(),t=e();return qm=t,qm}var $m,zE;function R4(){if(zE)return $m;zE=1;function e(t,n){var r=t.length;for(t.sort(n);r--;)t[r]=t[r].value;return t}return $m=e,$m}var Fm,UE;function P4(){if(UE)return Fm;UE=1;var e=ks();function t(n,r){if(n!==r){var i=n!==void 0,s=n===null,o=n===n,a=e(n),l=r!==void 0,u=r===null,c=r===r,d=e(r);if(!u&&!d&&!a&&n>r||a&&l&&c&&!u&&!d||s&&l&&c||!i&&c||!o)return 1;if(!s&&!a&&!d&&n<r||d&&i&&o&&!s&&!a||u&&i&&o||!l&&o||!c)return-1}return 0}return Fm=t,Fm}var Vm,HE;function I4(){if(HE)return Vm;HE=1;var e=P4();function t(n,r,i){for(var s=-1,o=n.criteria,a=r.criteria,l=o.length,u=i.length;++s<l;){var c=e(o[s],a[s]);if(c){if(s>=u)return c;var d=i[s];return c*(d=="desc"?-1:1)}}return n.index-r.index}return Vm=t,Vm}var Bm,GE;function j4(){if(GE)return Bm;GE=1;var e=Yu(),t=Zu(),n=ir(),r=uR(),i=R4(),s=Hu(),o=I4(),a=bi(),l=He();function u(c,d,f){d.length?d=e(d,function(p){return l(p)?function(x){return t(x,p.length===1?p[0]:p)}:p}):d=[a];var h=-1;d=e(d,s(n));var g=r(c,function(p,x,m){var v=e(d,function(w){return w(p)});return{criteria:v,index:++h,value:p}});return i(g,function(p,x){return o(p,x,f)})}return Bm=u,Bm}var zm,WE;function D4(){if(WE)return zm;WE=1;var e=w0(),t=j4(),n=Qu(),r=Ju(),i=n(function(s,o){if(s==null)return[];var a=o.length;return a>1&&r(s,o[0],o[1])?o=[]:a>2&&r(o[0],o[1],o[2])&&(o=[o[0]]),t(s,e(o,1),[])});return zm=i,zm}var Um,KE;function L4(){if(KE)return Um;KE=1;var e=nR(),t=0;function n(r){var i=++t;return e(r)+i}return Um=n,Um}var Hm,YE;function O4(){if(YE)return Hm;YE=1;function e(t,n,r){for(var i=-1,s=t.length,o=n.length,a={};++i<s;){var l=i<o?n[i]:void 0;r(a,t[i],l)}return a}return Hm=e,Hm}var Gm,XE;function q4(){if(XE)return Gm;XE=1;var e=zu(),t=O4();function n(r,i){return t(r||[],i||[],e)}return Gm=n,Gm}var nu;if(typeof s0=="function")try{nu={cloneDeep:e4(),constant:m0(),defaults:t4(),each:YA(),filter:oR(),find:l4(),flatten:_R(),forEach:KA(),forIn:u4(),has:aR(),isUndefined:lR(),last:c4(),map:cR(),mapValues:d4(),max:h4(),merge:x4(),min:w4(),minBy:b4(),now:S4(),pick:T4(),range:A4(),reduce:dR(),sortBy:D4(),uniqueId:L4(),values:gR(),zipObject:q4()}}catch{}nu||(nu=window._);var Me=nu,$4=ec;function ec(){var e={};e._next=e._prev=e,this._sentinel=e}ec.prototype.dequeue=function(){var e=this._sentinel,t=e._prev;if(t!==e)return TR(t),t};ec.prototype.enqueue=function(e){var t=this._sentinel;e._prev&&e._next&&TR(e),e._next=t._next,t._next._prev=e,t._next=e,e._prev=t};ec.prototype.toString=function(){for(var e=[],t=this._sentinel,n=t._prev;n!==t;)e.push(JSON.stringify(n,F4)),n=n._prev;return"["+e.join(", ")+"]"};function TR(e){e._prev._next=e._next,e._next._prev=e._prev,delete e._next,delete e._prev}function F4(e,t){if(e!=="_next"&&e!=="_prev")return t}var Bn=Me,V4=xn.Graph,B4=$4,z4=H4,U4=Bn.constant(1);function H4(e,t){if(e.nodeCount()<=1)return[];var n=W4(e,t||U4),r=G4(n.graph,n.buckets,n.zeroIdx);return Bn.flatten(Bn.map(r,function(i){return e.outEdges(i.v,i.w)}),!0)}function G4(e,t,n){for(var r=[],i=t[t.length-1],s=t[0],o;e.nodeCount();){for(;o=s.dequeue();)Wm(e,t,n,o);for(;o=i.dequeue();)Wm(e,t,n,o);if(e.nodeCount()){for(var a=t.length-2;a>0;--a)if(o=t[a].dequeue(),o){r=r.concat(Wm(e,t,n,o,!0));break}}}return r}function Wm(e,t,n,r,i){var s=i?[]:void 0;return Bn.forEach(e.inEdges(r.v),function(o){var a=e.edge(o),l=e.node(o.v);i&&s.push({v:o.v,w:o.w}),l.out-=a,Cy(t,n,l)}),Bn.forEach(e.outEdges(r.v),function(o){var a=e.edge(o),l=o.w,u=e.node(l);u.in-=a,Cy(t,n,u)}),e.removeNode(r.v),s}function W4(e,t){var n=new V4,r=0,i=0;Bn.forEach(e.nodes(),function(a){n.setNode(a,{v:a,in:0,out:0})}),Bn.forEach(e.edges(),function(a){var l=n.edge(a.v,a.w)||0,u=t(a),c=l+u;n.setEdge(a.v,a.w,c),i=Math.max(i,n.node(a.v).out+=u),r=Math.max(r,n.node(a.w).in+=u)});var s=Bn.range(i+r+3).map(function(){return new B4}),o=r+1;return Bn.forEach(n.nodes(),function(a){Cy(s,o,n.node(a))}),{graph:n,buckets:s,zeroIdx:o}}function Cy(e,t,n){n.out?n.in?e[n.out-n.in+t].enqueue(n):e[e.length-1].enqueue(n):e[0].enqueue(n)}var ti=Me,K4=z4,Y4={run:X4,undo:Q4};function X4(e){var t=e.graph().acyclicer==="greedy"?K4(e,n(e)):Z4(e);ti.forEach(t,function(r){var i=e.edge(r);e.removeEdge(r),i.forwardName=r.name,i.reversed=!0,e.setEdge(r.w,r.v,i,ti.uniqueId("rev"))});function n(r){return function(i){return r.edge(i).weight}}}function Z4(e){var t=[],n={},r={};function i(s){ti.has(r,s)||(r[s]=!0,n[s]=!0,ti.forEach(e.outEdges(s),function(o){ti.has(n,o.w)?t.push(o):i(o.w)}),delete n[s])}return ti.forEach(e.nodes(),i),t}function Q4(e){ti.forEach(e.edges(),function(t){var n=e.edge(t);if(n.reversed){e.removeEdge(t);var r=n.forwardName;delete n.reversed,delete n.forwardName,e.setEdge(t.w,t.v,n,r)}})}var ge=Me,NR=xn.Graph,Mt={addDummyNode:MR,simplify:J4,asNonCompoundGraph:ez,successorWeights:tz,predecessorWeights:nz,intersectRect:rz,buildLayerMatrix:iz,normalizeRanks:sz,removeEmptyRanks:oz,addBorderNode:az,maxRank:AR,partition:lz,time:uz,notime:cz};function MR(e,t,n,r){var i;do i=ge.uniqueId(r);while(e.hasNode(i));return n.dummy=t,e.setNode(i,n),i}function J4(e){var t=new NR().setGraph(e.graph());return ge.forEach(e.nodes(),function(n){t.setNode(n,e.node(n))}),ge.forEach(e.edges(),function(n){var r=t.edge(n.v,n.w)||{weight:0,minlen:1},i=e.edge(n);t.setEdge(n.v,n.w,{weight:r.weight+i.weight,minlen:Math.max(r.minlen,i.minlen)})}),t}function ez(e){var t=new NR({multigraph:e.isMultigraph()}).setGraph(e.graph());return ge.forEach(e.nodes(),function(n){e.children(n).length||t.setNode(n,e.node(n))}),ge.forEach(e.edges(),function(n){t.setEdge(n,e.edge(n))}),t}function tz(e){var t=ge.map(e.nodes(),function(n){var r={};return ge.forEach(e.outEdges(n),function(i){r[i.w]=(r[i.w]||0)+e.edge(i).weight}),r});return ge.zipObject(e.nodes(),t)}function nz(e){var t=ge.map(e.nodes(),function(n){var r={};return ge.forEach(e.inEdges(n),function(i){r[i.v]=(r[i.v]||0)+e.edge(i).weight}),r});return ge.zipObject(e.nodes(),t)}function rz(e,t){var n=e.x,r=e.y,i=t.x-n,s=t.y-r,o=e.width/2,a=e.height/2;if(!i&&!s)throw new Error("Not possible to find intersection inside of the rectangle");var l,u;return Math.abs(s)*o>Math.abs(i)*a?(s<0&&(a=-a),l=a*i/s,u=a):(i<0&&(o=-o),l=o,u=o*s/i),{x:n+l,y:r+u}}function iz(e){var t=ge.map(ge.range(AR(e)+1),function(){return[]});return ge.forEach(e.nodes(),function(n){var r=e.node(n),i=r.rank;ge.isUndefined(i)||(t[i][r.order]=n)}),t}function sz(e){var t=ge.min(ge.map(e.nodes(),function(n){return e.node(n).rank}));ge.forEach(e.nodes(),function(n){var r=e.node(n);ge.has(r,"rank")&&(r.rank-=t)})}function oz(e){var t=ge.min(ge.map(e.nodes(),function(s){return e.node(s).rank})),n=[];ge.forEach(e.nodes(),function(s){var o=e.node(s).rank-t;n[o]||(n[o]=[]),n[o].push(s)});var r=0,i=e.graph().nodeRankFactor;ge.forEach(n,function(s,o){ge.isUndefined(s)&&o%i!==0?--r:r&&ge.forEach(s,function(a){e.node(a).rank+=r})})}function az(e,t,n,r){var i={width:0,height:0};return arguments.length>=4&&(i.rank=n,i.order=r),MR(e,"border",i,t)}function AR(e){return ge.max(ge.map(e.nodes(),function(t){var n=e.node(t).rank;if(!ge.isUndefined(n))return n}))}function lz(e,t){var n={lhs:[],rhs:[]};return ge.forEach(e,function(r){t(r)?n.lhs.push(r):n.rhs.push(r)}),n}function uz(e,t){var n=ge.now();try{return t()}finally{console.log(e+" time: "+(ge.now()-n)+"ms")}}function cz(e,t){return t()}var RR=Me,dz=Mt,fz={run:hz,undo:mz};function hz(e){e.graph().dummyChains=[],RR.forEach(e.edges(),function(t){pz(e,t)})}function pz(e,t){var n=t.v,r=e.node(n).rank,i=t.w,s=e.node(i).rank,o=t.name,a=e.edge(t),l=a.labelRank;if(s!==r+1){e.removeEdge(t);var u,c,d;for(d=0,++r;r<s;++d,++r)a.points=[],c={width:0,height:0,edgeLabel:a,edgeObj:t,rank:r},u=dz.addDummyNode(e,"edge",c,"_d"),r===l&&(c.width=a.width,c.height=a.height,c.dummy="edge-label",c.labelpos=a.labelpos),e.setEdge(n,u,{weight:a.weight},o),d===0&&e.graph().dummyChains.push(u),n=u;e.setEdge(n,i,{weight:a.weight},o)}}function mz(e){RR.forEach(e.graph().dummyChains,function(t){var n=e.node(t),r=n.edgeLabel,i;for(e.setEdge(n.edgeObj,r);n.dummy;)i=e.successors(t)[0],e.removeNode(t),r.points.push({x:n.x,y:n.y}),n.dummy==="edge-label"&&(r.x=n.x,r.y=n.y,r.width=n.width,r.height=n.height),t=i,n=e.node(t)})}var Ya=Me,tc={longestPath:gz,slack:yz};function gz(e){var t={};function n(r){var i=e.node(r);if(Ya.has(t,r))return i.rank;t[r]=!0;var s=Ya.min(Ya.map(e.outEdges(r),function(o){return n(o.w)-e.edge(o).minlen}));return(s===Number.POSITIVE_INFINITY||s===void 0||s===null)&&(s=0),i.rank=s}Ya.forEach(e.sources(),n)}function yz(e,t){return e.node(t.w).rank-e.node(t.v).rank-e.edge(t).minlen}var ru=Me,vz=xn.Graph,iu=tc.slack,PR=xz;function xz(e){var t=new vz({directed:!1}),n=e.nodes()[0],r=e.nodeCount();t.setNode(n,{});for(var i,s;wz(t,e)<r;)i=bz(t,e),s=t.hasNode(i.v)?iu(e,i):-iu(e,i),Sz(t,e,s);return t}function wz(e,t){function n(r){ru.forEach(t.nodeEdges(r),function(i){var s=i.v,o=r===s?i.w:s;!e.hasNode(o)&&!iu(t,i)&&(e.setNode(o,{}),e.setEdge(r,o,{}),n(o))})}return ru.forEach(e.nodes(),n),e.nodeCount()}function bz(e,t){return ru.minBy(t.edges(),function(n){if(e.hasNode(n.v)!==e.hasNode(n.w))return iu(t,n)})}function Sz(e,t,n){ru.forEach(e.nodes(),function(r){t.node(r).rank+=n})}var er=Me,_z=PR,Ez=tc.slack,Cz=tc.longestPath,kz=xn.alg.preorder,Tz=xn.alg.postorder,Nz=Mt.simplify,Mz=Si;Si.initLowLimValues=E0;Si.initCutValues=_0;Si.calcCutValue=IR;Si.leaveEdge=DR;Si.enterEdge=LR;Si.exchangeEdges=OR;function Si(e){e=Nz(e),Cz(e);var t=_z(e);E0(t),_0(t,e);for(var n,r;n=DR(t);)r=LR(t,e,n),OR(t,e,n,r)}function _0(e,t){var n=Tz(e,e.nodes());n=n.slice(0,n.length-1),er.forEach(n,function(r){Az(e,t,r)})}function Az(e,t,n){var r=e.node(n),i=r.parent;e.edge(n,i).cutvalue=IR(e,t,n)}function IR(e,t,n){var r=e.node(n),i=r.parent,s=!0,o=t.edge(n,i),a=0;return o||(s=!1,o=t.edge(i,n)),a=o.weight,er.forEach(t.nodeEdges(n),function(l){var u=l.v===n,c=u?l.w:l.v;if(c!==i){var d=u===s,f=t.edge(l).weight;if(a+=d?f:-f,Pz(e,n,c)){var h=e.edge(n,c).cutvalue;a+=d?-h:h}}}),a}function E0(e,t){arguments.length<2&&(t=e.nodes()[0]),jR(e,{},1,t)}function jR(e,t,n,r,i){var s=n,o=e.node(r);return t[r]=!0,er.forEach(e.neighbors(r),function(a){er.has(t,a)||(n=jR(e,t,n,a,r))}),o.low=s,o.lim=n++,i?o.parent=i:delete o.parent,n}function DR(e){return er.find(e.edges(),function(t){return e.edge(t).cutvalue<0})}function LR(e,t,n){var r=n.v,i=n.w;t.hasEdge(r,i)||(r=n.w,i=n.v);var s=e.node(r),o=e.node(i),a=s,l=!1;s.lim>o.lim&&(a=o,l=!0);var u=er.filter(t.edges(),function(c){return l===ZE(e,e.node(c.v),a)&&l!==ZE(e,e.node(c.w),a)});return er.minBy(u,function(c){return Ez(t,c)})}function OR(e,t,n,r){var i=n.v,s=n.w;e.removeEdge(i,s),e.setEdge(r.v,r.w,{}),E0(e),_0(e,t),Rz(e,t)}function Rz(e,t){var n=er.find(e.nodes(),function(i){return!t.node(i).parent}),r=kz(e,n);r=r.slice(1),er.forEach(r,function(i){var s=e.node(i).parent,o=t.edge(i,s),a=!1;o||(o=t.edge(s,i),a=!0),t.node(i).rank=t.node(s).rank+(a?o.minlen:-o.minlen)})}function Pz(e,t,n){return e.hasEdge(t,n)}function ZE(e,t,n){return n.low<=t.lim&&t.lim<=n.lim}var Iz=tc,qR=Iz.longestPath,jz=PR,Dz=Mz,Lz=Oz;function Oz(e){switch(e.graph().ranker){case"network-simplex":QE(e);break;case"tight-tree":$z(e);break;case"longest-path":qz(e);break;default:QE(e)}}var qz=qR;function $z(e){qR(e),jz(e)}function QE(e){Dz(e)}var ky=Me,Fz=Vz;function Vz(e){var t=zz(e);ky.forEach(e.graph().dummyChains,function(n){for(var r=e.node(n),i=r.edgeObj,s=Bz(e,t,i.v,i.w),o=s.path,a=s.lca,l=0,u=o[l],c=!0;n!==i.w;){if(r=e.node(n),c){for(;(u=o[l])!==a&&e.node(u).maxRank<r.rank;)l++;u===a&&(c=!1)}if(!c){for(;l<o.length-1&&e.node(u=o[l+1]).minRank<=r.rank;)l++;u=o[l]}e.setParent(n,u),n=e.successors(n)[0]}})}function Bz(e,t,n,r){var i=[],s=[],o=Math.min(t[n].low,t[r].low),a=Math.max(t[n].lim,t[r].lim),l,u;l=n;do l=e.parent(l),i.push(l);while(l&&(t[l].low>o||a>t[l].lim));for(u=l,l=r;(l=e.parent(l))!==u;)s.push(l);return{path:i.concat(s.reverse()),lca:u}}function zz(e){var t={},n=0;function r(i){var s=n;ky.forEach(e.children(i),r),t[i]={low:s,lim:n++}}return ky.forEach(e.children(),r),t}var zn=Me,Ty=Mt,Uz={run:Hz,cleanup:Kz};function Hz(e){var t=Ty.addDummyNode(e,"root",{},"_root"),n=Gz(e),r=zn.max(zn.values(n))-1,i=2*r+1;e.graph().nestingRoot=t,zn.forEach(e.edges(),function(o){e.edge(o).minlen*=i});var s=Wz(e)+1;zn.forEach(e.children(),function(o){$R(e,t,i,s,r,n,o)}),e.graph().nodeRankFactor=i}function $R(e,t,n,r,i,s,o){var a=e.children(o);if(!a.length){o!==t&&e.setEdge(t,o,{weight:0,minlen:n});return}var l=Ty.addBorderNode(e,"_bt"),u=Ty.addBorderNode(e,"_bb"),c=e.node(o);e.setParent(l,o),c.borderTop=l,e.setParent(u,o),c.borderBottom=u,zn.forEach(a,function(d){$R(e,t,n,r,i,s,d);var f=e.node(d),h=f.borderTop?f.borderTop:d,g=f.borderBottom?f.borderBottom:d,p=f.borderTop?r:2*r,x=h!==g?1:i-s[o]+1;e.setEdge(l,h,{weight:p,minlen:x,nestingEdge:!0}),e.setEdge(g,u,{weight:p,minlen:x,nestingEdge:!0})}),e.parent(o)||e.setEdge(t,l,{weight:0,minlen:i+s[o]})}function Gz(e){var t={};function n(r,i){var s=e.children(r);s&&s.length&&zn.forEach(s,function(o){n(o,i+1)}),t[r]=i}return zn.forEach(e.children(),function(r){n(r,1)}),t}function Wz(e){return zn.reduce(e.edges(),function(t,n){return t+e.edge(n).weight},0)}function Kz(e){var t=e.graph();e.removeNode(t.nestingRoot),delete t.nestingRoot,zn.forEach(e.edges(),function(n){var r=e.edge(n);r.nestingEdge&&e.removeEdge(n)})}var Km=Me,Yz=Mt,Xz=Zz;function Zz(e){function t(n){var r=e.children(n),i=e.node(n);if(r.length&&Km.forEach(r,t),Km.has(i,"minRank")){i.borderLeft=[],i.borderRight=[];for(var s=i.minRank,o=i.maxRank+1;s<o;++s)JE(e,"borderLeft","_bl",n,i,s),JE(e,"borderRight","_br",n,i,s)}}Km.forEach(e.children(),t)}function JE(e,t,n,r,i,s){var o={width:0,height:0,rank:s,borderType:t},a=i[t][s-1],l=Yz.addDummyNode(e,"border",o,n);i[t][s]=l,e.setParent(l,r),a&&e.setEdge(a,l,{weight:1})}var kn=Me,Qz={adjust:Jz,undo:e5};function Jz(e){var t=e.graph().rankdir.toLowerCase();(t==="lr"||t==="rl")&&FR(e)}function e5(e){var t=e.graph().rankdir.toLowerCase();(t==="bt"||t==="rl")&&t5(e),(t==="lr"||t==="rl")&&(n5(e),FR(e))}function FR(e){kn.forEach(e.nodes(),function(t){eC(e.node(t))}),kn.forEach(e.edges(),function(t){eC(e.edge(t))})}function eC(e){var t=e.width;e.width=e.height,e.height=t}function t5(e){kn.forEach(e.nodes(),function(t){Ym(e.node(t))}),kn.forEach(e.edges(),function(t){var n=e.edge(t);kn.forEach(n.points,Ym),kn.has(n,"y")&&Ym(n)})}function Ym(e){e.y=-e.y}function n5(e){kn.forEach(e.nodes(),function(t){Xm(e.node(t))}),kn.forEach(e.edges(),function(t){var n=e.edge(t);kn.forEach(n.points,Xm),kn.has(n,"x")&&Xm(n)})}function Xm(e){var t=e.x;e.x=e.y,e.y=t}var Dn=Me,r5=i5;function i5(e){var t={},n=Dn.filter(e.nodes(),function(a){return!e.children(a).length}),r=Dn.max(Dn.map(n,function(a){return e.node(a).rank})),i=Dn.map(Dn.range(r+1),function(){return[]});function s(a){if(!Dn.has(t,a)){t[a]=!0;var l=e.node(a);i[l.rank].push(a),Dn.forEach(e.successors(a),s)}}var o=Dn.sortBy(n,function(a){return e.node(a).rank});return Dn.forEach(o,s),i}var ur=Me,s5=o5;function o5(e,t){for(var n=0,r=1;r<t.length;++r)n+=a5(e,t[r-1],t[r]);return n}function a5(e,t,n){for(var r=ur.zipObject(n,ur.map(n,function(u,c){return c})),i=ur.flatten(ur.map(t,function(u){return ur.sortBy(ur.map(e.outEdges(u),function(c){return{pos:r[c.w],weight:e.edge(c).weight}}),"pos")}),!0),s=1;s<n.length;)s<<=1;var o=2*s-1;s-=1;var a=ur.map(new Array(o),function(){return 0}),l=0;return ur.forEach(i.forEach(function(u){var c=u.pos+s;a[c]+=u.weight;for(var d=0;c>0;)c%2&&(d+=a[c+1]),c=c-1>>1,a[c]+=u.weight;l+=u.weight*d})),l}var tC=Me,l5=u5;function u5(e,t){return tC.map(t,function(n){var r=e.inEdges(n);if(r.length){var i=tC.reduce(r,function(s,o){var a=e.edge(o),l=e.node(o.v);return{sum:s.sum+a.weight*l.order,weight:s.weight+a.weight}},{sum:0,weight:0});return{v:n,barycenter:i.sum/i.weight,weight:i.weight}}else return{v:n}})}var Pt=Me,c5=d5;function d5(e,t){var n={};Pt.forEach(e,function(i,s){var o=n[i.v]={indegree:0,in:[],out:[],vs:[i.v],i:s};Pt.isUndefined(i.barycenter)||(o.barycenter=i.barycenter,o.weight=i.weight)}),Pt.forEach(t.edges(),function(i){var s=n[i.v],o=n[i.w];!Pt.isUndefined(s)&&!Pt.isUndefined(o)&&(o.indegree++,s.out.push(n[i.w]))});var r=Pt.filter(n,function(i){return!i.indegree});return f5(r)}function f5(e){var t=[];function n(s){return function(o){o.merged||(Pt.isUndefined(o.barycenter)||Pt.isUndefined(s.barycenter)||o.barycenter>=s.barycenter)&&h5(s,o)}}function r(s){return function(o){o.in.push(s),--o.indegree===0&&e.push(o)}}for(;e.length;){var i=e.pop();t.push(i),Pt.forEach(i.in.reverse(),n(i)),Pt.forEach(i.out,r(i))}return Pt.map(Pt.filter(t,function(s){return!s.merged}),function(s){return Pt.pick(s,["vs","i","barycenter","weight"])})}function h5(e,t){var n=0,r=0;e.weight&&(n+=e.barycenter*e.weight,r+=e.weight),t.weight&&(n+=t.barycenter*t.weight,r+=t.weight),e.vs=t.vs.concat(e.vs),e.barycenter=n/r,e.weight=r,e.i=Math.min(t.i,e.i),t.merged=!0}var ro=Me,p5=Mt,m5=g5;function g5(e,t){var n=p5.partition(e,function(c){return ro.has(c,"barycenter")}),r=n.lhs,i=ro.sortBy(n.rhs,function(c){return-c.i}),s=[],o=0,a=0,l=0;r.sort(y5(!!t)),l=nC(s,i,l),ro.forEach(r,function(c){l+=c.vs.length,s.push(c.vs),o+=c.barycenter*c.weight,a+=c.weight,l=nC(s,i,l)});var u={vs:ro.flatten(s,!0)};return a&&(u.barycenter=o/a,u.weight=a),u}function nC(e,t,n){for(var r;t.length&&(r=ro.last(t)).i<=n;)t.pop(),e.push(r.vs),n++;return n}function y5(e){return function(t,n){return t.barycenter<n.barycenter?-1:t.barycenter>n.barycenter?1:e?n.i-t.i:t.i-n.i}}var vr=Me,v5=l5,x5=c5,w5=m5,b5=VR;function VR(e,t,n,r){var i=e.children(t),s=e.node(t),o=s?s.borderLeft:void 0,a=s?s.borderRight:void 0,l={};o&&(i=vr.filter(i,function(g){return g!==o&&g!==a}));var u=v5(e,i);vr.forEach(u,function(g){if(e.children(g.v).length){var p=VR(e,g.v,n,r);l[g.v]=p,vr.has(p,"barycenter")&&_5(g,p)}});var c=x5(u,n);S5(c,l);var d=w5(c,r);if(o&&(d.vs=vr.flatten([o,d.vs,a],!0),e.predecessors(o).length)){var f=e.node(e.predecessors(o)[0]),h=e.node(e.predecessors(a)[0]);vr.has(d,"barycenter")||(d.barycenter=0,d.weight=0),d.barycenter=(d.barycenter*d.weight+f.order+h.order)/(d.weight+2),d.weight+=2}return d}function S5(e,t){vr.forEach(e,function(n){n.vs=vr.flatten(n.vs.map(function(r){return t[r]?t[r].vs:r}),!0)})}function _5(e,t){vr.isUndefined(e.barycenter)?(e.barycenter=t.barycenter,e.weight=t.weight):(e.barycenter=(e.barycenter*e.weight+t.barycenter*t.weight)/(e.weight+t.weight),e.weight+=t.weight)}var io=Me,E5=xn.Graph,C5=k5;function k5(e,t,n){var r=T5(e),i=new E5({compound:!0}).setGraph({root:r}).setDefaultNodeLabel(function(s){return e.node(s)});return io.forEach(e.nodes(),function(s){var o=e.node(s),a=e.parent(s);(o.rank===t||o.minRank<=t&&t<=o.maxRank)&&(i.setNode(s),i.setParent(s,a||r),io.forEach(e[n](s),function(l){var u=l.v===s?l.w:l.v,c=i.edge(u,s),d=io.isUndefined(c)?0:c.weight;i.setEdge(u,s,{weight:e.edge(l).weight+d})}),io.has(o,"minRank")&&i.setNode(s,{borderLeft:o.borderLeft[t],borderRight:o.borderRight[t]}))}),i}function T5(e){for(var t;e.hasNode(t=io.uniqueId("_root")););return t}var N5=Me,M5=A5;function A5(e,t,n){var r={},i;N5.forEach(n,function(s){for(var o=e.parent(s),a,l;o;){if(a=e.parent(o),a?(l=r[a],r[a]=o):(l=i,i=o),l&&l!==o){t.setEdge(l,o);return}o=a}})}var Ar=Me,R5=r5,P5=s5,I5=b5,j5=C5,D5=M5,L5=xn.Graph,rC=Mt,O5=q5;function q5(e){var t=rC.maxRank(e),n=iC(e,Ar.range(1,t+1),"inEdges"),r=iC(e,Ar.range(t-1,-1,-1),"outEdges"),i=R5(e);sC(e,i);for(var s=Number.POSITIVE_INFINITY,o,a=0,l=0;l<4;++a,++l){$5(a%2?n:r,a%4>=2),i=rC.buildLayerMatrix(e);var u=P5(e,i);u<s&&(l=0,o=Ar.cloneDeep(i),s=u)}sC(e,o)}function iC(e,t,n){return Ar.map(t,function(r){return j5(e,r,n)})}function $5(e,t){var n=new L5;Ar.forEach(e,function(r){var i=r.graph().root,s=I5(r,i,n,t);Ar.forEach(s.vs,function(o,a){r.node(o).order=a}),D5(r,n,s.vs)})}function sC(e,t){Ar.forEach(t,function(n){Ar.forEach(n,function(r,i){e.node(r).order=i})})}var ae=Me,F5=xn.Graph,V5=Mt,B5={positionX:J5};function z5(e,t){var n={};function r(i,s){var o=0,a=0,l=i.length,u=ae.last(s);return ae.forEach(s,function(c,d){var f=H5(e,c),h=f?e.node(f).order:l;(f||c===u)&&(ae.forEach(s.slice(a,d+1),function(g){ae.forEach(e.predecessors(g),function(p){var x=e.node(p),m=x.order;(m<o||h<m)&&!(x.dummy&&e.node(g).dummy)&&BR(n,p,g)})}),a=d+1,o=h)}),s}return ae.reduce(t,r),n}function U5(e,t){var n={};function r(s,o,a,l,u){var c;ae.forEach(ae.range(o,a),function(d){c=s[d],e.node(c).dummy&&ae.forEach(e.predecessors(c),function(f){var h=e.node(f);h.dummy&&(h.order<l||h.order>u)&&BR(n,f,c)})})}function i(s,o){var a=-1,l,u=0;return ae.forEach(o,function(c,d){if(e.node(c).dummy==="border"){var f=e.predecessors(c);f.length&&(l=e.node(f[0]).order,r(o,u,d,a,l),u=d,a=l)}r(o,u,o.length,l,s.length)}),o}return ae.reduce(t,i),n}function H5(e,t){if(e.node(t).dummy)return ae.find(e.predecessors(t),function(n){return e.node(n).dummy})}function BR(e,t,n){if(t>n){var r=t;t=n,n=r}var i=e[t];i||(e[t]=i={}),i[n]=!0}function G5(e,t,n){if(t>n){var r=t;t=n,n=r}return ae.has(e[t],n)}function W5(e,t,n,r){var i={},s={},o={};return ae.forEach(t,function(a){ae.forEach(a,function(l,u){i[l]=l,s[l]=l,o[l]=u})}),ae.forEach(t,function(a){var l=-1;ae.forEach(a,function(u){var c=r(u);if(c.length){c=ae.sortBy(c,function(p){return o[p]});for(var d=(c.length-1)/2,f=Math.floor(d),h=Math.ceil(d);f<=h;++f){var g=c[f];s[u]===u&&l<o[g]&&!G5(n,u,g)&&(s[g]=u,s[u]=i[u]=i[g],l=o[g])}}})}),{root:i,align:s}}function K5(e,t,n,r,i){var s={},o=Y5(e,t,n,i),a=i?"borderLeft":"borderRight";function l(d,f){for(var h=o.nodes(),g=h.pop(),p={};g;)p[g]?d(g):(p[g]=!0,h.push(g),h=h.concat(f(g))),g=h.pop()}function u(d){s[d]=o.inEdges(d).reduce(function(f,h){return Math.max(f,s[h.v]+o.edge(h))},0)}function c(d){var f=o.outEdges(d).reduce(function(g,p){return Math.min(g,s[p.w]-o.edge(p))},Number.POSITIVE_INFINITY),h=e.node(d);f!==Number.POSITIVE_INFINITY&&h.borderType!==a&&(s[d]=Math.max(s[d],f))}return l(u,o.predecessors.bind(o)),l(c,o.successors.bind(o)),ae.forEach(r,function(d){s[d]=s[n[d]]}),s}function Y5(e,t,n,r){var i=new F5,s=e.graph(),o=e6(s.nodesep,s.edgesep,r);return ae.forEach(t,function(a){var l;ae.forEach(a,function(u){var c=n[u];if(i.setNode(c),l){var d=n[l],f=i.edge(d,c);i.setEdge(d,c,Math.max(o(e,u,l),f||0))}l=u})}),i}function X5(e,t){return ae.minBy(ae.values(t),function(n){var r=Number.NEGATIVE_INFINITY,i=Number.POSITIVE_INFINITY;return ae.forIn(n,function(s,o){var a=t6(e,o)/2;r=Math.max(s+a,r),i=Math.min(s-a,i)}),r-i})}function Z5(e,t){var n=ae.values(t),r=ae.min(n),i=ae.max(n);ae.forEach(["u","d"],function(s){ae.forEach(["l","r"],function(o){var a=s+o,l=e[a],u;if(l!==t){var c=ae.values(l);u=o==="l"?r-ae.min(c):i-ae.max(c),u&&(e[a]=ae.mapValues(l,function(d){return d+u}))}})})}function Q5(e,t){return ae.mapValues(e.ul,function(n,r){if(t)return e[t.toLowerCase()][r];var i=ae.sortBy(ae.map(e,r));return(i[1]+i[2])/2})}function J5(e){var t=V5.buildLayerMatrix(e),n=ae.merge(z5(e,t),U5(e,t)),r={},i;ae.forEach(["u","d"],function(o){i=o==="u"?t:ae.values(t).reverse(),ae.forEach(["l","r"],function(a){a==="r"&&(i=ae.map(i,function(d){return ae.values(d).reverse()}));var l=(o==="u"?e.predecessors:e.successors).bind(e),u=W5(e,i,n,l),c=K5(e,i,u.root,u.align,a==="r");a==="r"&&(c=ae.mapValues(c,function(d){return-d})),r[o+a]=c})});var s=X5(e,r);return Z5(r,s),Q5(r,e.graph().align)}function e6(e,t,n){return function(r,i,s){var o=r.node(i),a=r.node(s),l=0,u;if(l+=o.width/2,ae.has(o,"labelpos"))switch(o.labelpos.toLowerCase()){case"l":u=-o.width/2;break;case"r":u=o.width/2;break}if(u&&(l+=n?u:-u),u=0,l+=(o.dummy?t:e)/2,l+=(a.dummy?t:e)/2,l+=a.width/2,ae.has(a,"labelpos"))switch(a.labelpos.toLowerCase()){case"l":u=a.width/2;break;case"r":u=-a.width/2;break}return u&&(l+=n?u:-u),u=0,l}}function t6(e,t){return e.node(t).width}var so=Me,zR=Mt,n6=B5.positionX,r6=i6;function i6(e){e=zR.asNonCompoundGraph(e),s6(e),so.forEach(n6(e),function(t,n){e.node(n).x=t})}function s6(e){var t=zR.buildLayerMatrix(e),n=e.graph().ranksep,r=0;so.forEach(t,function(i){var s=so.max(so.map(i,function(o){return e.node(o).height}));so.forEach(i,function(o){e.node(o).y=r+s/2}),r+=s+n})}var ue=Me,oC=Y4,aC=fz,o6=Lz,a6=Mt.normalizeRanks,l6=Fz,u6=Mt.removeEmptyRanks,lC=Uz,c6=Xz,uC=Qz,d6=O5,f6=r6,Ir=Mt,h6=xn.Graph,p6=m6;function m6(e,t){var n=t&&t.debugTiming?Ir.time:Ir.notime;n("layout",function(){var r=n("  buildLayoutGraph",function(){return k6(e)});n("  runLayout",function(){g6(r,n)}),n("  updateInputGraph",function(){y6(e,r)})})}function g6(e,t){t("    makeSpaceForEdgeLabels",function(){T6(e)}),t("    removeSelfEdges",function(){L6(e)}),t("    acyclic",function(){oC.run(e)}),t("    nestingGraph.run",function(){lC.run(e)}),t("    rank",function(){o6(Ir.asNonCompoundGraph(e))}),t("    injectEdgeLabelProxies",function(){N6(e)}),t("    removeEmptyRanks",function(){u6(e)}),t("    nestingGraph.cleanup",function(){lC.cleanup(e)}),t("    normalizeRanks",function(){a6(e)}),t("    assignRankMinMax",function(){M6(e)}),t("    removeEdgeLabelProxies",function(){A6(e)}),t("    normalize.run",function(){aC.run(e)}),t("    parentDummyChains",function(){l6(e)}),t("    addBorderSegments",function(){c6(e)}),t("    order",function(){d6(e)}),t("    insertSelfEdges",function(){O6(e)}),t("    adjustCoordinateSystem",function(){uC.adjust(e)}),t("    position",function(){f6(e)}),t("    positionSelfEdges",function(){q6(e)}),t("    removeBorderNodes",function(){D6(e)}),t("    normalize.undo",function(){aC.undo(e)}),t("    fixupEdgeLabelCoords",function(){I6(e)}),t("    undoCoordinateSystem",function(){uC.undo(e)}),t("    translateGraph",function(){R6(e)}),t("    assignNodeIntersects",function(){P6(e)}),t("    reversePoints",function(){j6(e)}),t("    acyclic.undo",function(){oC.undo(e)})}function y6(e,t){ue.forEach(e.nodes(),function(n){var r=e.node(n),i=t.node(n);r&&(r.x=i.x,r.y=i.y,t.children(n).length&&(r.width=i.width,r.height=i.height))}),ue.forEach(e.edges(),function(n){var r=e.edge(n),i=t.edge(n);r.points=i.points,ue.has(i,"x")&&(r.x=i.x,r.y=i.y)}),e.graph().width=t.graph().width,e.graph().height=t.graph().height}var v6=["nodesep","edgesep","ranksep","marginx","marginy"],x6={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},w6=["acyclicer","ranker","rankdir","align"],b6=["width","height"],S6={width:0,height:0},_6=["minlen","weight","width","height","labeloffset"],E6={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},C6=["labelpos"];function k6(e){var t=new h6({multigraph:!0,compound:!0}),n=Qm(e.graph());return t.setGraph(ue.merge({},x6,Zm(n,v6),ue.pick(n,w6))),ue.forEach(e.nodes(),function(r){var i=Qm(e.node(r));t.setNode(r,ue.defaults(Zm(i,b6),S6)),t.setParent(r,e.parent(r))}),ue.forEach(e.edges(),function(r){var i=Qm(e.edge(r));t.setEdge(r,ue.merge({},E6,Zm(i,_6),ue.pick(i,C6)))}),t}function T6(e){var t=e.graph();t.ranksep/=2,ue.forEach(e.edges(),function(n){var r=e.edge(n);r.minlen*=2,r.labelpos.toLowerCase()!=="c"&&(t.rankdir==="TB"||t.rankdir==="BT"?r.width+=r.labeloffset:r.height+=r.labeloffset)})}function N6(e){ue.forEach(e.edges(),function(t){var n=e.edge(t);if(n.width&&n.height){var r=e.node(t.v),i=e.node(t.w),s={rank:(i.rank-r.rank)/2+r.rank,e:t};Ir.addDummyNode(e,"edge-proxy",s,"_ep")}})}function M6(e){var t=0;ue.forEach(e.nodes(),function(n){var r=e.node(n);r.borderTop&&(r.minRank=e.node(r.borderTop).rank,r.maxRank=e.node(r.borderBottom).rank,t=ue.max(t,r.maxRank))}),e.graph().maxRank=t}function A6(e){ue.forEach(e.nodes(),function(t){var n=e.node(t);n.dummy==="edge-proxy"&&(e.edge(n.e).labelRank=n.rank,e.removeNode(t))})}function R6(e){var t=Number.POSITIVE_INFINITY,n=0,r=Number.POSITIVE_INFINITY,i=0,s=e.graph(),o=s.marginx||0,a=s.marginy||0;function l(u){var c=u.x,d=u.y,f=u.width,h=u.height;t=Math.min(t,c-f/2),n=Math.max(n,c+f/2),r=Math.min(r,d-h/2),i=Math.max(i,d+h/2)}ue.forEach(e.nodes(),function(u){l(e.node(u))}),ue.forEach(e.edges(),function(u){var c=e.edge(u);ue.has(c,"x")&&l(c)}),t-=o,r-=a,ue.forEach(e.nodes(),function(u){var c=e.node(u);c.x-=t,c.y-=r}),ue.forEach(e.edges(),function(u){var c=e.edge(u);ue.forEach(c.points,function(d){d.x-=t,d.y-=r}),ue.has(c,"x")&&(c.x-=t),ue.has(c,"y")&&(c.y-=r)}),s.width=n-t+o,s.height=i-r+a}function P6(e){ue.forEach(e.edges(),function(t){var n=e.edge(t),r=e.node(t.v),i=e.node(t.w),s,o;n.points?(s=n.points[0],o=n.points[n.points.length-1]):(n.points=[],s=i,o=r),n.points.unshift(Ir.intersectRect(r,s)),n.points.push(Ir.intersectRect(i,o))})}function I6(e){ue.forEach(e.edges(),function(t){var n=e.edge(t);if(ue.has(n,"x"))switch((n.labelpos==="l"||n.labelpos==="r")&&(n.width-=n.labeloffset),n.labelpos){case"l":n.x-=n.width/2+n.labeloffset;break;case"r":n.x+=n.width/2+n.labeloffset;break}})}function j6(e){ue.forEach(e.edges(),function(t){var n=e.edge(t);n.reversed&&n.points.reverse()})}function D6(e){ue.forEach(e.nodes(),function(t){if(e.children(t).length){var n=e.node(t),r=e.node(n.borderTop),i=e.node(n.borderBottom),s=e.node(ue.last(n.borderLeft)),o=e.node(ue.last(n.borderRight));n.width=Math.abs(o.x-s.x),n.height=Math.abs(i.y-r.y),n.x=s.x+n.width/2,n.y=r.y+n.height/2}}),ue.forEach(e.nodes(),function(t){e.node(t).dummy==="border"&&e.removeNode(t)})}function L6(e){ue.forEach(e.edges(),function(t){if(t.v===t.w){var n=e.node(t.v);n.selfEdges||(n.selfEdges=[]),n.selfEdges.push({e:t,label:e.edge(t)}),e.removeEdge(t)}})}function O6(e){var t=Ir.buildLayerMatrix(e);ue.forEach(t,function(n){var r=0;ue.forEach(n,function(i,s){var o=e.node(i);o.order=s+r,ue.forEach(o.selfEdges,function(a){Ir.addDummyNode(e,"selfedge",{width:a.label.width,height:a.label.height,rank:o.rank,order:s+ ++r,e:a.e,label:a.label},"_se")}),delete o.selfEdges})})}function q6(e){ue.forEach(e.nodes(),function(t){var n=e.node(t);if(n.dummy==="selfedge"){var r=e.node(n.e.v),i=r.x+r.width/2,s=r.y,o=n.x-i,a=r.height/2;e.setEdge(n.e,n.label),e.removeNode(t),n.label.points=[{x:i+2*o/3,y:s-a},{x:i+5*o/6,y:s-a},{x:i+o,y:s},{x:i+5*o/6,y:s+a},{x:i+2*o/3,y:s+a}],n.label.x=n.x,n.label.y=n.y}})}function Zm(e,t){return ue.mapValues(ue.pick(e,t),Number)}function Qm(e){var t={};return ue.forEach(e,function(n,r){t[r.toLowerCase()]=n}),t}var Xa=Me,$6=Mt,F6=xn.Graph,V6={debugOrdering:B6};function B6(e){var t=$6.buildLayerMatrix(e),n=new F6({compound:!0,multigraph:!0}).setGraph({});return Xa.forEach(e.nodes(),function(r){n.setNode(r,{label:r}),n.setParent(r,"layer"+e.node(r).rank)}),Xa.forEach(e.edges(),function(r){n.setEdge(r.v,r.w,{},r.name)}),Xa.forEach(t,function(r,i){var s="layer"+i;n.setNode(s,{rank:"same"}),Xa.reduce(r,function(o,a){return n.setEdge(o,a,{style:"invis"}),a})}),n}var z6="0.8.5",U6={graphlib:xn,layout:p6,debug:V6,util:{time:Mt.time,notime:Mt.notime},version:z6};const cC=Gy(U6),dC=new Map;function H6(e,t){const n=e.map(i=>i.id).join("|"),r=t.map(i=>`${i.source}->${i.target}`).join("|");return`${e.length}:${t.length}:${n}:${r}`}function Ny(e,t,n){if(n){const r=H6(e,t),i=dC.get(n);if(i&&i.signature===r)return i.layout;const s=fC(e,t);return dC.set(n,{signature:r,layout:s}),s}return fC(e,t)}function fC(e,t){if(e.length>2500){const r=Math.ceil(Math.sqrt(e.length));return e.map((i,s)=>{const o=Math.floor(s/r),a=s%r;return{id:i.id,position:{x:a*260,y:o*160}}})}const n=new cC.graphlib.Graph;return n.setGraph({rankdir:"LR",nodesep:48,ranksep:80}),n.setDefaultEdgeLabel(()=>({})),e.forEach(r=>{n.setNode(r.id,{width:220,height:120})}),t.forEach(r=>{n.setEdge(r.source,r.target)}),cC.layout(n),e.map(r=>{const i=n.node(r.id);return{id:r.id,position:{x:i.x-i.width/2,y:i.y-i.height/2}}})}function G6(e,t,n=200){const r=e.zoom||1,i=(0-e.x)/r-n,s=(0-e.y)/r-n,o=(t.width-e.x)/r+n,a=(t.height-e.y)/r+n;return{minX:i,minY:s,maxX:o,maxY:a}}function W6(e,t,n,r=200){if(n.width<=0||n.height<=0)return e;const i=G6(t,n,r);return e.filter(s=>{const o=s.x,a=s.y,l=s.x+s.width,u=s.y+s.height;return!(l<i.minX||o>i.maxX||u<i.minY||a>i.maxY)})}function nc(e,t){const n=K6(e,t),r=new Set(n.map(d=>d.leftId)),i=new Set(n.map(d=>d.rightId)),s=t.steps.filter(d=>!i.has(d.id)).map(d=>d.id),o=e.steps.filter(d=>!r.has(d.id)).map(d=>d.id),a=n.filter(d=>{const f=e.steps.find(g=>g.id===d.leftId),h=t.steps.find(g=>g.id===d.rightId);return!f||!h?!1:hC(f)!==hC(h)}),l=a.map(d=>d.leftId),u=(t.metadata.totalCostUsd??0)-(e.metadata.totalCostUsd??0),c=t.metadata.wallTimeMs-e.metadata.wallTimeMs;return{addedSteps:s,removedSteps:o,changedSteps:l,changedPairs:a,alignedSteps:n,costDeltaUsd:u,wallTimeDeltaMs:c}}function K6(e,t){const n=[],r=new Set(e.steps.map(c=>c.id)),i=new Set(t.steps.map(c=>c.id));Array.from(r).forEach(c=>{i.has(c)&&(n.push({leftId:c,rightId:c}),r.delete(c),i.delete(c))});const s=new Map;t.steps.forEach(c=>{c.toolCallId&&s.set(c.toolCallId,c.id)}),e.steps.forEach(c=>{if(!c.toolCallId)return;const d=s.get(c.toolCallId);d&&i.has(d)&&(n.push({leftId:c.id,rightId:d}),r.delete(c.id),i.delete(d))});const o=gC(e),a=gC(t),l=Y6(e,t),u={};return i.forEach(c=>{const d=a.get(c);if(!d)return;const f=pC(d.step);f&&(u[f]||(u[f]=[]),u[f].push(c))}),Object.values(u).forEach(c=>{c.sort((d,f)=>{var h,g;return(((h=a.get(d))==null?void 0:h.startMs)??0)-(((g=a.get(f))==null?void 0:g.startMs)??0)})}),Array.from(r).forEach(c=>{var g;const d=o.get(c);if(!d)return;const f=pC(d.step);if(!f||!((g=u[f])!=null&&g.length))return;const h=X6(d,u[f],a,l);h&&(n.push({leftId:c,rightId:h}),r.delete(c),i.delete(h),u[f]=u[f].filter(p=>p!==h))}),n}function hC(e){var r,i;const t=((r=e.preview)==null?void 0:r.outputPreview)??null,n=((i=e.metrics)==null?void 0:i.costUsd)??null;return`${e.status}|${t??""}|${n??""}`}function pC(e){return e.type?`${e.type}:${e.name??""}`:null}function mC(e){if(!e)return null;const t=Date.parse(e);return Number.isNaN(t)?null:t}function gC(e){const t=mC(e.startedAt),n=new Map;return e.steps.forEach(r=>{const i=mC(r.startedAt),s=t!=null&&i!=null?i-t:null;n.set(r.id,{step:r,startMs:s})}),n}function Y6(e,t){const n=Math.max(e.metadata.wallTimeMs,t.metadata.wallTimeMs,1);return Math.max(1e3,Math.min(5e3,Math.round(n*.1)))}function X6(e,t,n,r){const i=e.startMs;if(i==null)return null;let s=null,o=r+1;return t.forEach(a=>{const l=n.get(a);if(!l||l.startMs==null)return;const u=Math.abs(l.startMs-i);u<o&&(o=u,s=a)}),o<=r?s:null}function Z6({layers:e,onChange:t}){return y.jsxs("div",{className:"edge-toggles",children:[y.jsxs("label",{title:"Parent/child span edges","data-help":!0,"data-help-title":"Structure edges","data-help-body":"Shows parent-child spans to reveal hierarchy.","data-help-placement":"top",children:[y.jsx("input",{type:"checkbox",checked:e.structure,onChange:n=>t({...e,structure:n.target.checked})}),"Structure"]}),y.jsxs("label",{title:"Chronological sequence edges","data-help":!0,"data-help-title":"Sequence edges","data-help-body":"Shows chronological ordering of steps.","data-help-placement":"top",children:[y.jsx("input",{type:"checkbox",checked:e.sequence,onChange:n=>t({...e,sequence:n.target.checked})}),"Sequence"]}),y.jsxs("label",{title:"Tool call I/O binding edges","data-help":!0,"data-help-title":"I/O edges","data-help-body":"Connects tool calls to their inputs and outputs.","data-help-placement":"top",children:[y.jsx("input",{type:"checkbox",checked:e.io,onChange:n=>t({...e,io:n.target.checked})}),"I/O Binding"]})]})}function Q6({data:e}){var c,d,f,h;const t=e.step,n=QN(t),r=e.diffStatus?`diff-${e.diffStatus}`:"",i=e.ghost?"ghost-node":"",s=t.type.replace("_"," ").toUpperCase(),o=((c=t.metrics)==null?void 0:c.tokensTotal)!=null?`${t.metrics.tokensTotal} tokens`:null,a=t.durationMs!=null?`${t.durationMs}ms`:null,l=[o,a,n].filter(Boolean).join("  "),u=`Click to inspect or replay this step.${l?` ${l}.`:""}`;return y.jsxs("div",{className:`flow-node step-${t.type} ${r} ${i}`,"data-help":!0,"data-help-title":`${t.name}  ${s}`,"data-help-body":u,"data-help-placement":"right",children:[y.jsxs("div",{className:"flow-node-header",children:[y.jsxs("div",{className:"flow-node-title",children:[y.jsx(Vv,{type:t.type}),y.jsx("span",{children:t.name})]}),y.jsx("span",{className:`status-pill status-${t.status}`,children:t.status})]}),y.jsx("div",{className:"flow-node-preview",children:((d=t.preview)==null?void 0:d.outputPreview)??((f=t.preview)==null?void 0:f.inputPreview)}),y.jsxs("div",{className:"flow-node-metrics",children:[((h=t.metrics)==null?void 0:h.tokensTotal)!=null?y.jsxs("span",{children:[t.metrics.tokensTotal," tok"]}):null,t.durationMs!=null?y.jsxs("span",{children:[t.durationMs,"ms"]}):null,n?y.jsx("span",{children:n}):null]})]})}const J6={stepNode:Q6},e8={structure:!0,sequence:!1,io:!0};function Jm(e){return e.filter(t=>t.parentStepId).map(t=>({id:`structure_${t.parentStepId}_${t.id}`,source:t.parentStepId,target:t.id,kind:"structure"}))}function eg(e){const t=[...e].sort((r,i)=>r.index-i.index),n=[];for(let r=1;r<t.length;r+=1)n.push({id:`sequence_${t[r-1].id}_${t[r].id}`,source:t[r-1].id,target:t[r].id,kind:"sequence"});return n}function t8({steps:e,onSelectStep:t,selectedStepId:n,baseTrace:r,compareTrace:i,compareSteps:s=[],overlayEnabled:o,onToggleOverlay:a}){var $,V;const[l,u]=S.useState(e8),[c,d]=S.useState(e.length>500),[f,h]=S.useState({x:0,y:0,zoom:1}),g=S.useRef(null),p=S.useRef(f),x=S.useRef(null);S.useEffect(()=>{e.length<=500&&d(!1)},[e.length]),S.useEffect(()=>()=>{x.current&&cancelAnimationFrame(x.current)},[]);const m=S.useMemo(()=>{const O=Jm(e),G=eg(e),Y=yl(e),ee=[];return l.structure&&ee.push(...O),l.sequence&&ee.push(...G),l.io&&ee.push(...Y),ee},[e,l]),v=S.useMemo(()=>{const O=Jm(e),G=eg(e),Y=yl(e);return[...O,...G,...Y]},[e]),w=S.useMemo(()=>Ny(e,v.map(O=>({source:O.source,target:O.target})),r.id),[e,v,r.id]),b=S.useMemo(()=>i?nc(r,i):null,[r,i]),_=S.useMemo(()=>new Set((b==null?void 0:b.addedSteps)??[]),[b]),C=S.useMemo(()=>new Set((b==null?void 0:b.changedSteps)??[]),[b]),k=S.useMemo(()=>new Set((b==null?void 0:b.removedSteps)??[]),[b]),T=new Map(w.map(O=>[O.id,O.position])),M=e.map(O=>({id:O.id,type:"stepNode",position:T.get(O.id)??{x:0,y:0},data:{step:O,diffStatus:C.has(O.id)?"changed":k.has(O.id)?"removed":null,ghost:!1}})),R=M.map(O=>({id:O.id,x:O.position.x,y:O.position.y,width:220,height:120})),I={width:(($=g.current)==null?void 0:$.clientWidth)??0,height:((V=g.current)==null?void 0:V.clientHeight)??0},B=new Map(M.map(O=>[O.id,O]));let F=c?W6(R,f,I,300).map(O=>B.get(O.id)):[...M];const E=new Set(F.filter(Boolean).map(O=>O.id));if(n&&!E.has(n)){const O=B.get(n);O&&(E.add(O.id),F=[...F,O])}const D=m.filter(O=>E.has(O.source)&&E.has(O.target)).map(O=>({id:O.id,source:O.source,target:O.target,type:"smoothstep",animated:O.kind==="io",style:O.kind==="io"?{stroke:"var(--accent-io)",strokeWidth:2}:O.kind==="sequence"?{stroke:"var(--accent-sequence)",strokeDasharray:"6 6"}:{stroke:"var(--accent-structure)"}})),P=F.filter(Boolean).map(O=>({...O})),L=S.useMemo(()=>{if(!i)return[];const O=Jm(i.steps),G=eg(i.steps),Y=yl(i.steps);return[...O,...G,...Y]},[i]),A=S.useMemo(()=>i?Ny(i.steps,L.map(O=>({source:O.source,target:O.target})),i.id):[],[i,L]),N=S.useMemo(()=>new Map(A.map(O=>[O.id,O.position])),[A]),j=S.useMemo(()=>!i||!o?[]:s.filter(O=>_.has(O.id)).map(O=>({id:`ghost-${O.id}`,type:"stepNode",position:N.get(O.id)??{x:0,y:0},data:{step:O,diffStatus:"added",ghost:!0}})),[i,s,N,_,o]);return y.jsxs("div",{className:"flow-mode",children:[y.jsxs("div",{className:"flow-controls","data-help":!0,"data-help-title":"Flow controls","data-help-body":"Toggle edge layers and windowing for high-density graphs.","data-help-placement":"bottom",children:[y.jsx(Z6,{layers:l,onChange:u}),e.length>500?y.jsxs("label",{className:"toggle",title:"Window nodes based on viewport for large graphs","data-help":!0,"data-help-title":"Windowed flow","data-help-body":"Limits the graph to the visible region for performance.","data-help-placement":"bottom",children:[y.jsx("input",{type:"checkbox",checked:c,onChange:()=>d(O=>!O)}),"Windowed"]}):null,i?y.jsxs("button",{className:"ghost-button",type:"button",onClick:a,title:"Show or hide ghost overlay from replay","data-help":!0,"data-help-title":"Overlay diff","data-help-body":"Layer the replay on top to see what changed.","data-help-placement":"bottom",children:[o?"Hide overlay":"Show overlay"," (",(b==null?void 0:b.addedSteps.length)??0,"/",(b==null?void 0:b.removedSteps.length)??0,"/",(b==null?void 0:b.changedSteps.length)??0,")"]}):null]}),y.jsx("div",{className:"flow-canvas",ref:g,"data-help":!0,"data-help-indicator":!0,"data-help-title":"Flow canvas","data-help-body":"A spatial map of step dependencies. Click nodes to inspect.","data-help-placement":"top",children:y.jsxs(EA,{nodes:o?[...P,...j]:P,edges:D,nodeTypes:J6,onNodeClick:(O,G)=>{const Y=G.id.startsWith("ghost-")?G.id.replace("ghost-",""):G.id;t(Y)},onMove:(O,G)=>{p.current=G,!x.current&&(x.current=requestAnimationFrame(()=>{h(p.current),x.current=null}))},fitView:!0,children:[y.jsx(DF,{nodeColor:O=>{switch(O.data.step.type){case"llm_call":return"var(--accent-llm)";case"tool_call":return"var(--accent-tool)";case"decision":return"var(--accent-decision)";case"handoff":return"var(--accent-handoff)";case"guardrail":return"var(--accent-guardrail)";default:return"var(--accent-structure)"}},maskColor:"rgba(15, 17, 21, 0.6)"}),y.jsx(KF,{gap:20}),y.jsx(BF,{position:"bottom-right"})]})})]})}function n8({steps:e,onSelectStep:t,selectedStepId:n,baseTrace:r,compareTrace:i,compareSteps:s,overlayEnabled:o,onToggleOverlay:a}){return y.jsx("section",{className:"flow-mode-wrapper","aria-label":"Flow mode",children:y.jsx(t8,{steps:e,selectedStepId:n,onSelectStep:t,baseTrace:r,compareTrace:i,compareSteps:s,overlayEnabled:o,onToggleOverlay:a})})}function My(e,t){const n=new Blob([JSON.stringify(t,null,2)],{type:"application/json"}),r=URL.createObjectURL(n),i=document.createElement("a");i.href=r,i.download=e,document.body.appendChild(i),i.click(),i.remove(),URL.revokeObjectURL(r)}function r8(e,t,n="text/plain"){const r=new Blob([t],{type:n}),i=URL.createObjectURL(r),s=document.createElement("a");s.href=i,s.download=e,document.body.appendChild(s),s.click(),s.remove(),URL.revokeObjectURL(i)}function yC(e,t,n){return Math.min(n,Math.max(t,e))}function i8({baseTrace:e,compareTrace:t,playheadMs:n,onExit:r,safeExport:i}){const s=nc(e,t),o=e.metadata.wallTimeMs||1,a=t.metadata.wallTimeMs||1,l=yC(n/o*100,0,100),u=yC(n/a*100,0,100),c={generatedAt:new Date().toISOString(),base:{id:e.id,name:e.name,parentTraceId:e.parentTraceId,startedAt:e.startedAt,endedAt:e.endedAt},compare:{id:t.id,name:t.name,parentTraceId:t.parentTraceId,branchPointStepId:t.branchPointStepId,replay:t.replay,startedAt:t.startedAt,endedAt:t.endedAt},deltas:{added:s.addedSteps.length,removed:s.removedSteps.length,changed:s.changedSteps.length,costDeltaUsd:s.costDeltaUsd,wallTimeDeltaMs:s.wallTimeDeltaMs},alignment:s.alignedSteps,changedPairs:s.changedPairs,safeExport:!!i};return y.jsxs("section",{className:"compare-view","data-help":!0,"data-tour":"compare-view","data-help-title":"Compare runs","data-help-body":"Side-by-side playback showing deltas in steps, cost, and wall time after a replay.","data-help-placement":"top",children:[y.jsxs("div",{className:"compare-header",children:[y.jsxs("div",{children:[y.jsx("div",{className:"compare-title",children:"Compare Runs"}),y.jsxs("div",{className:"compare-subtitle",children:["+",s.addedSteps.length," steps, ",s.costDeltaUsd.toFixed(3)," USD, ",s.wallTimeDeltaMs,"ms"]})]}),y.jsxs("div",{className:"compare-actions",children:[y.jsx("button",{className:"ghost-button",type:"button",onClick:()=>My(`agent-director-diff-${e.id}-${t.id}.json`,c),title:"Export diff summary","data-help":!0,"data-help-title":"Export diff","data-help-body":"Download a JSON summary you can share or archive.","data-help-placement":"bottom",children:"Export diff"}),y.jsx("button",{className:"ghost-button",type:"button",onClick:r,"data-help":!0,"data-help-title":"Exit compare","data-help-body":"Return to the primary run timeline.","data-help-placement":"bottom",children:"Exit compare"})]})]}),y.jsxs("div",{className:"compare-grid",children:[y.jsxs("div",{className:"compare-pane","data-help":!0,"data-help-title":"Base run","data-help-body":"Original timeline for baseline comparison.","data-help-placement":"top",children:[y.jsx("div",{className:"compare-pane-title",children:"Base run"}),y.jsx(ly,{trace:e,steps:e.steps,selectedStepId:null,onSelectStep:()=>{},playheadPct:l,playheadMs:n,windowRange:null,laneHeight:110,cardHeight:100,compactHeight:78})]}),y.jsxs("div",{className:"compare-pane","data-help":!0,"data-help-title":"Replay run","data-help-body":"Replay timeline to validate improvements.","data-help-placement":"top",children:[y.jsx("div",{className:"compare-pane-title",children:"Replay run"}),y.jsx(ly,{trace:t,steps:t.steps,selectedStepId:null,onSelectStep:()=>{},playheadPct:u,playheadMs:n,windowRange:null,laneHeight:110,cardHeight:100,compactHeight:78})]})]})]})}const UR=/token|secret|password|api[_-]?key|authorization|bearer|session|cookie|private|ssh|credentials/i;function C0(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}function s8(e){const t=[],n=new WeakSet,r=(i,s)=>{if(Array.isArray(i)){i.forEach((o,a)=>{r(o,`${s}[${a}]`)});return}C0(i)&&(n.has(i)||(n.add(i),Object.entries(i).forEach(([o,a])=>{const l=s?`${s}.${o}`:o;UR.test(o)&&t.push(l),r(a,l)})))};return r(e,""),t}function HR(e){const t=new WeakMap,n=r=>{if(Array.isArray(r))return r.map(s=>n(s));if(!C0(r))return r;if(t.has(r))return t.get(r);const i={};return t.set(r,i),Object.entries(r).forEach(([s,o])=>{UR.test(s)?i[s]="[REDACTED]":i[s]=n(o)}),i};return n(e)}function o8(e){return C0(e)}function vC(e){return e==null||Number.isNaN(e)?"n/a":e.toString()}function a8(e){return e==null||Number.isNaN(e)?"n/a":e.toFixed(3)}function l8(e,t){return t?HR(e):e}function u8({job:e,matrix:t,safeExport:n,sensitiveKeys:r,anchorStepName:i}){const s=t.rows.map(o=>({scenarioId:o.scenarioId,name:o.name,strategy:o.strategy,status:o.status,replayTraceId:o.replayTraceId,modifications:l8(o.modifications,n),error:o.error??null,changedStepIds:o.changedStepIds,addedStepIds:o.addedStepIds,removedStepIds:o.removedStepIds,metrics:o.metrics}));return{generatedAt:new Date().toISOString(),safeExport:n,redaction:{safeExport:n,sensitiveKeys:r,policy:n?"redacted":"raw"},job:e?{id:e.id,status:e.status,createdAt:e.createdAt,startedAt:e.startedAt??null,endedAt:e.endedAt??null,scenarioCount:e.scenarioCount,completedCount:e.completedCount,failedCount:e.failedCount,canceledCount:e.canceledCount}:null,base:{traceId:t.traceId,stepId:t.stepId,anchorStepName:i??null},rows:s,causalRanking:t.causalRanking}}function c8({job:e,matrix:t,safeExport:n,anchorStepName:r}){const i=[],s=new Date().toISOString();return i.push("# Counterfactual Replay Matrix"),i.push(""),i.push(`Generated: ${s}`),i.push(`Safe export: ${n?"on":"off"}`),i.push(""),i.push("## Base trace"),i.push(`- Trace: ${t.traceId}`),i.push(`- Anchor step: ${r??t.stepId}`),i.push(""),e&&(i.push("## Job status"),i.push(`- Job: ${e.id}`),i.push(`- Status: ${e.status}`),i.push(`- Scenarios: ${e.scenarioCount} (completed ${e.completedCount}, failed ${e.failedCount}, canceled ${e.canceledCount})`),i.push("")),i.push("## Scenario outcomes"),i.push("| Scenario | Status | Wall  (ms) | Cost  (USD) | Errors  | Changed |"),i.push("| --- | --- | --- | --- | --- | --- |"),t.rows.forEach(o=>{i.push(`| ${o.name} | ${o.status} | ${vC(o.metrics.wallTimeDeltaMs)} | ${a8(o.metrics.costDeltaUsd)} | ${vC(o.metrics.errorDelta)} | ${o.metrics.changedSteps} |`)}),i.push(""),i.push("## Causal ranking"),t.causalRanking.length?t.causalRanking.slice(0,10).forEach(o=>{i.push(`- ${o.factor}: score ${o.score.toFixed(3)}, confidence ${(o.confidence*100).toFixed(0)}% (samples ${o.evidence.samples})`)}):i.push("- No causal ranking available."),i.push(""),i.push("## Redaction"),i.push(`Safe export: ${n?"enabled":"disabled"}.`),i.push(""),i.join(`
`)}const xC=["recorded","live","hybrid"],Za=25,Hs=[{id:"prompt-tighten",label:"Prompt tighten",description:"Shorten or focus the assistant response",name:"Prompt tighter",strategy:"hybrid",modifications:{prompt:"Return concise response"}},{id:"tool-timeout",label:"Tool timeout",description:"Extend tool timeout for flaky calls",name:"Tool timeout 45s",strategy:"live",modifications:{toolTimeoutMs:45e3}},{id:"recorded-baseline",label:"Recorded baseline",description:"Pure recorded replay for determinism",name:"Recorded baseline",strategy:"recorded",modifications:{}}];function wC(e){return e??Number.POSITIVE_INFINITY}function bC(){return`scenario-${Math.random().toString(36).slice(2,9)}`}function d8(e){const t=e.trim();if(!t)return{value:{}};try{const n=JSON.parse(t);return o8(n)?{value:n}:{error:"Modifications must be a JSON object."}}catch{return{error:"Modifications must be valid JSON."}}}function f8(e,t){const n=t.get(e);return n?n.name:e}function h8({steps:e,anchorStepId:t,onAnchorStepChange:n,scenarios:r,onScenarioChange:i,onAddScenario:s,onRemoveScenario:o,onReplaceScenarios:a,onRun:l,onCancel:u,loading:c,error:d,job:f,matrix:h,safeExport:g,onOpenCompare:p}){var ve,xe;const[x,m]=S.useState("wallTimeDeltaMs"),[v,w]=S.useState(!0),[b,_]=S.useState(null),[C,k]=S.useState(((ve=Hs[0])==null?void 0:ve.id)??""),[T,M]=S.useState(null),R=S.useRef(null),I=S.useMemo(()=>new Map(e.map(H=>[H.id,H])),[e]),B=S.useMemo(()=>{const H=r.map((z,re)=>z.name.trim()||`Scenario ${re+1}`),Q=new Map;return H.forEach(z=>{const re=z.toLowerCase();Q.set(re,(Q.get(re)??0)+1)}),r.map((z,re)=>{const X=H[re],Z=X.toLowerCase(),de=d8(z.modificationsText),be=[];de.error&&be.push(de.error),(Q.get(Z)??0)>1&&be.push(`Duplicate scenario name: ${X}`);const at=de.value??{},Se=de.value?s8(de.value):[];return{id:z.id,name:X,parsedModifications:at,errors:be,sensitiveKeys:Se}})},[r]),F=B.reduce((H,Q)=>H+Q.errors.length,0),E=r.length>Za?`Scenario limit exceeded (${r.length}/${Za}).`:null,D=F>0||!!E,P=E||(F>0?"Fix scenario errors before running.":null),L=!c&&r.length>0&&!D,A=S.useMemo(()=>{const Q=[...(h==null?void 0:h.rows)??[]];return Q.sort((z,re)=>{if(x==="name")return v?z.name.localeCompare(re.name):re.name.localeCompare(z.name);if(x==="changedSteps"){const de=z.metrics.changedSteps,be=re.metrics.changedSteps;return v?de-be:be-de}const X=wC(z.metrics[x]),Z=wC(re.metrics[x]);return v?X-Z:Z-X}),Q},[h==null?void 0:h.rows,x,v]),N=H=>{if(H===x){w(Q=>!Q);return}m(H),w(!0)},j=B.map((H,Q)=>{var z;return{name:H.name,strategy:((z=r[Q])==null?void 0:z.strategy)??"hybrid",modifications:H.parsedModifications}}),$=()=>{L&&l(j)},V=()=>{const H=Hs.find(Q=>Q.id===C)??Hs[0];H&&a([...r,{id:bC(),name:H.name,strategy:H.strategy,modificationsText:JSON.stringify(H.modifications,null,2)}])},O=()=>{const H={version:1,anchorStepId:t,scenarios:r.map(Q=>({name:Q.name,strategy:Q.strategy,modificationsText:Q.modificationsText}))};My(`agent-director-scenarios-${t||"matrix"}.json`,H)},G=async H=>{var z;const Q=(z=H.target.files)==null?void 0:z[0];if(Q){H.target.value="";try{const re=await Q.text(),X=JSON.parse(re),Z=Array.isArray(X.scenarios)?X.scenarios:Array.isArray(X)?X:null;if(!Z||Z.length===0){M("Scenario file must include a scenarios array.");return}if(Z.length>Za){M(`Scenario file exceeds ${Za} scenarios.`);return}const de=Z.map((be,at)=>{if(!be||typeof be!="object")throw new Error("Scenario entries must be objects.");const Se=be,we=String(Se.name??`Scenario ${at+1}`),Be=String(Se.strategy??"hybrid"),gt=xC.includes(Be)?Be:"hybrid",lt=typeof Se.modificationsText=="string"?Se.modificationsText:JSON.stringify(Se.modifications??{},null,2);return{id:bC(),name:we,strategy:gt,modificationsText:lt}});typeof X.anchorStepId=="string"&&I.has(X.anchorStepId)&&n(X.anchorStepId),a(de),M(null)}catch(re){M(re instanceof Error?re.message:"Failed to import scenario file.")}}},Y=S.useMemo(()=>{const H=B.flatMap(Q=>Q.sensitiveKeys);return Array.from(new Set(H))},[B]),ee=()=>{var z;if(!h)return;const H=((z=I.get(t))==null?void 0:z.name)??null,Q=u8({job:f,matrix:h,safeExport:g,sensitiveKeys:Y,anchorStepName:H});My(`agent-director-matrix-${h.jobId}.json`,Q)},se=()=>{var z;if(!h)return;const H=((z=I.get(t))==null?void 0:z.name)??null,Q=c8({job:f,matrix:h,safeExport:g,anchorStepName:H});r8(`agent-director-matrix-${h.jobId}.md`,Q,"text/markdown")},pe=(f==null?void 0:f.status)==="queued"||(f==null?void 0:f.status)==="running",te=b?((h==null?void 0:h.rows)??[]).find(H=>H.scenarioId===b)??null:null,le=te?g?HR(te.modifications):te.modifications:null;return y.jsxs("section",{className:"matrix-mode","data-help":!0,"data-help-title":"Matrix mode","data-help-body":"Run multiple replay scenarios from one anchor and compare outcome deltas with causal ranking.","data-help-placement":"top",children:[y.jsxs("div",{className:"matrix-panel",children:[y.jsxs("div",{className:"matrix-panel-header",children:[y.jsx("h2",{children:"Counterfactual Replay Matrix"}),y.jsx("div",{className:"matrix-job-state",children:f?y.jsxs(y.Fragment,{children:[y.jsxs("span",{className:`status-pill status-${f.status}`,children:["Job: ",f.status]}),y.jsxs("span",{children:[f.completedCount,"/",f.scenarioCount," completed"]}),f.failedCount?y.jsxs("span",{children:[f.failedCount," failed"]}):null,f.canceledCount?y.jsxs("span",{children:[f.canceledCount," canceled"]}):null]}):y.jsx("span",{children:"No job yet"})})]}),y.jsxs("div",{className:"matrix-controls",children:[y.jsxs("label",{children:["Anchor step",y.jsx("select",{value:t,onChange:H=>n(H.target.value),children:e.map(H=>y.jsxs("option",{value:H.id,children:[H.name," (",H.id,")"]},H.id))})]}),y.jsxs("label",{children:["Preset",y.jsx("select",{value:C,onChange:H=>k(H.target.value),"data-help":!0,"data-help-title":"Scenario presets","data-help-body":"Insert common experiments like prompt tweaks or recorded baselines.","data-help-placement":"bottom",children:Hs.map(H=>y.jsx("option",{value:H.id,children:H.label},H.id))})]}),y.jsx("button",{type:"button",className:"ghost-button",onClick:V,disabled:c,"data-help":!0,"data-help-title":"Add preset","data-help-body":"Append the selected preset as a new scenario.","data-help-placement":"bottom",children:"Add preset"}),y.jsxs("div",{className:"matrix-actions",children:[y.jsx("button",{type:"button",className:"primary-button",onClick:$,disabled:!L,"data-help":!0,"data-help-title":"Run matrix","data-help-body":"Execute all scenarios sequentially and gather outcome deltas.","data-help-placement":"bottom",children:c?"Running...":"Run matrix"}),y.jsx("button",{type:"button",className:"ghost-button",onClick:s,disabled:c,children:"Add scenario"}),y.jsx("button",{type:"button",className:"ghost-button",onClick:u,disabled:!pe||c,children:"Cancel job"}),y.jsx("button",{type:"button",className:"ghost-button",onClick:O,"data-help":!0,"data-help-title":"Export scenarios","data-help-body":"Download the scenario set as JSON for reuse.","data-help-placement":"bottom",children:"Export scenarios"}),y.jsx("button",{type:"button",className:"ghost-button",onClick:()=>{var H;return(H=R.current)==null?void 0:H.click()},"data-help":!0,"data-help-title":"Import scenarios","data-help-body":"Load a scenario JSON file to repopulate the builder.","data-help-placement":"bottom",children:"Import scenarios"}),y.jsx("input",{ref:R,type:"file",accept:"application/json",onChange:G,className:"matrix-file-input"}),y.jsx("button",{type:"button",className:"ghost-button",onClick:ee,disabled:!h,"data-help":!0,"data-help-title":"Export matrix","data-help-body":"Download the full matrix JSON with redaction metadata.","data-help-placement":"bottom",children:"Export matrix"}),y.jsx("button",{type:"button",className:"ghost-button",onClick:se,disabled:!h,"data-help":!0,"data-help-title":"Export summary","data-help-body":"Download a markdown summary for sharing.","data-help-placement":"bottom",children:"Export summary"})]})]}),y.jsx("div",{className:"matrix-presets",children:Hs.map(H=>y.jsxs("div",{className:"matrix-preset",children:[y.jsx("strong",{children:H.label}),y.jsx("span",{children:H.description})]},H.id))}),y.jsx("div",{className:"matrix-scenarios",children:r.map((H,Q)=>{const z=B[Q];return y.jsxs("article",{className:"matrix-scenario",children:[y.jsxs("div",{className:"matrix-scenario-head",children:[y.jsx("input",{value:H.name,onChange:re=>i(H.id,{name:re.target.value}),placeholder:"Scenario name"}),y.jsx("select",{value:H.strategy,onChange:re=>i(H.id,{strategy:re.target.value}),children:xC.map(re=>y.jsx("option",{value:re,children:re},re))})]}),y.jsx("textarea",{value:H.modificationsText,onChange:re=>i(H.id,{modificationsText:re.target.value}),rows:3,spellCheck:!1,"aria-label":`Scenario ${H.name} modifications`}),z!=null&&z.errors.length?y.jsx("div",{className:"matrix-scenario-error",children:z.errors.map(re=>y.jsx("div",{children:re},re))}):null,z!=null&&z.sensitiveKeys.length?y.jsxs("div",{className:"matrix-scenario-warning",children:["Sensitive keys: ",z.sensitiveKeys.join(", ")]}):null,y.jsx("button",{type:"button",className:"ghost-button",onClick:()=>o(H.id),disabled:r.length<=1,children:"Remove"})]},H.id)})}),P?y.jsx("div",{className:"error-banner",children:P}):null,T?y.jsx("div",{className:"error-banner",children:T}):null,d?y.jsx("div",{className:"error-banner",children:d}):null]}),y.jsxs("div",{className:"matrix-results",children:[y.jsx("div",{className:"matrix-table-wrap",children:y.jsxs("table",{className:"matrix-table",children:[y.jsx("thead",{children:y.jsxs("tr",{children:[y.jsx("th",{children:y.jsx("button",{type:"button",className:"table-sort",onClick:()=>N("name"),children:"Scenario"})}),y.jsx("th",{children:"Status"}),y.jsx("th",{children:y.jsx("button",{type:"button",className:"table-sort",onClick:()=>N("wallTimeDeltaMs"),children:"Wall  (ms)"})}),y.jsx("th",{children:y.jsx("button",{type:"button",className:"table-sort",onClick:()=>N("costDeltaUsd"),children:"Cost  (USD)"})}),y.jsx("th",{children:y.jsx("button",{type:"button",className:"table-sort",onClick:()=>N("errorDelta"),children:"Errors "})}),y.jsx("th",{children:y.jsx("button",{type:"button",className:"table-sort",onClick:()=>N("changedSteps"),children:"Changed"})}),y.jsx("th",{children:"Details"}),y.jsx("th",{children:"Compare"})]})}),y.jsx("tbody",{children:A.length===0?y.jsx("tr",{children:y.jsx("td",{colSpan:8,children:"No matrix results yet. Run a job to populate this table."})}):A.map(H=>y.jsxs("tr",{children:[y.jsx("td",{children:H.name}),y.jsx("td",{title:H.error??void 0,children:H.status}),y.jsx("td",{children:H.metrics.wallTimeDeltaMs??"n/a"}),y.jsx("td",{children:H.metrics.costDeltaUsd??"n/a"}),y.jsx("td",{children:H.metrics.errorDelta??"n/a"}),y.jsx("td",{children:H.metrics.changedSteps}),y.jsx("td",{children:y.jsx("button",{type:"button",className:"ghost-button",onClick:()=>_(H.scenarioId),children:"Details"})}),y.jsx("td",{children:y.jsx("button",{type:"button",className:"ghost-button",disabled:!H.replayTraceId,onClick:()=>H.replayTraceId&&p(H.replayTraceId),children:"Open"})})]},H.scenarioId))})]})}),y.jsxs("aside",{className:"matrix-causal",children:[y.jsx("h3",{children:"Causal ranking"}),(xe=h==null?void 0:h.causalRanking)!=null&&xe.length?y.jsx("ul",{children:h.causalRanking.slice(0,8).map(H=>y.jsxs("li",{children:[y.jsxs("div",{className:"factor-row",children:[y.jsx("strong",{children:H.factor}),y.jsxs("span",{children:["score ",H.score.toFixed(3)]})]}),y.jsxs("div",{className:"factor-meta",children:["confidence ",(H.confidence*100).toFixed(0),"%  samples ",H.evidence.samples]}),H.evidence.examples.length?y.jsx("div",{className:"factor-chips",children:H.evidence.examples.map(Q=>y.jsx("span",{className:"factor-chip",children:Q},Q))}):null]},H.factor))}):y.jsx("p",{children:"No causal ranking yet."})]}),te?y.jsxs("aside",{className:"matrix-detail",role:"dialog","aria-label":"Scenario details",children:[y.jsxs("div",{className:"matrix-detail-header",children:[y.jsxs("div",{children:[y.jsx("h3",{children:"Scenario details"}),y.jsxs("p",{className:"matrix-detail-subtitle",children:[te.name,"  ",te.status]})]}),y.jsx("button",{type:"button",className:"ghost-button",onClick:()=>_(null),children:"Close"})]}),y.jsxs("div",{className:"matrix-detail-grid",children:[y.jsxs("div",{className:"matrix-detail-block",children:[y.jsx("h4",{children:"Modifications"}),g?y.jsx("p",{className:"matrix-detail-note",children:"Safe export enabled: sensitive keys are redacted."}):null,y.jsx("pre",{children:JSON.stringify(le??{},null,2)})]}),y.jsxs("div",{className:"matrix-detail-block",children:[y.jsx("h4",{children:"Change summary"}),y.jsxs("div",{className:"matrix-detail-metrics",children:[y.jsxs("span",{children:["Changed: ",te.metrics.changedSteps]}),y.jsxs("span",{children:["Added: ",te.metrics.addedSteps]}),y.jsxs("span",{children:["Removed: ",te.metrics.removedSteps]}),y.jsxs("span",{children:["Invalidated: ",te.metrics.invalidatedStepCount]})]}),y.jsxs("div",{className:"matrix-detail-steps",children:[y.jsx("strong",{children:"Top changed steps"}),y.jsx("div",{className:"matrix-step-chips",children:te.changedStepIds.length?te.changedStepIds.slice(0,6).map(H=>y.jsx("span",{className:"matrix-step-chip",title:H,children:f8(H,I)},H)):y.jsx("span",{className:"matrix-step-chip",children:"None"})}),te.changedStepIds.length>6?y.jsxs("div",{className:"matrix-step-more",children:["+",te.changedStepIds.length-6," more steps changed"]}):null]}),te.error?y.jsx("div",{className:"matrix-detail-error",children:te.error}):null]})]})]}):null]})]})}const p8="demo-trace-overlap-001",m8="Overlap + ToolCallId Demo",g8="2026-01-27T10:00:00.000Z",y8="2026-01-27T10:00:05.000Z",v8="completed",x8={source:"openai_agents",agentName:"DemoAgent",modelId:"gpt-4o-2024-11-20",wallTimeMs:5e3,workTimeMs:7200,totalTokens:1400,totalCostUsd:.018},w8=[{id:"s1",index:0,type:"llm_call",name:"plan",startedAt:"2026-01-27T10:00:00.000Z",endedAt:"2026-01-27T10:00:01.000Z",durationMs:1e3,childStepIds:[],metrics:{tokensTotal:300,costUsd:.004},preview:{title:"LLM: plan",subtitle:"gpt-4o",outputPreview:"I'll fetch two sources..."},status:"completed"},{id:"s2",index:1,type:"llm_call",name:"call_tools",startedAt:"2026-01-27T10:00:01.000Z",endedAt:"2026-01-27T10:00:01.200Z",durationMs:200,childStepIds:[],metrics:{tokensTotal:120,costUsd:.002},preview:{title:"LLM: call tools",outputPreview:"Calling web_search + database_query"},io:{emittedToolCallIds:["tc-001","tc-002"]},status:"completed"},{id:"s3",index:2,type:"tool_call",name:"web_search",toolCallId:"tc-001",startedAt:"2026-01-27T10:00:01.200Z",endedAt:"2026-01-27T10:00:03.200Z",durationMs:2e3,childStepIds:[],metrics:{costUsd:0},preview:{title:"Tool: web_search",inputPreview:'{"q":"EU AI Act"}',outputPreview:"[3 results...]"},status:"completed"},{id:"s4",index:3,type:"tool_call",name:"database_query",toolCallId:"tc-002",startedAt:"2026-01-27T10:00:01.500Z",endedAt:"2026-01-27T10:00:02.700Z",durationMs:1200,childStepIds:[],preview:{title:"Tool: database_query",inputPreview:'{"sql":"SELECT..."}',outputPreview:'{"rows":42}'},status:"completed"},{id:"s5",index:4,type:"llm_call",name:"analyze",startedAt:"2026-01-27T10:00:03.200Z",endedAt:"2026-01-27T10:00:04.600Z",durationMs:1400,childStepIds:[],metrics:{tokensTotal:700,costUsd:.012},preview:{title:"LLM: analyze",outputPreview:"Synthesis based on tool outputs..."},io:{consumedToolCallIds:["tc-001","tc-002"]},status:"completed"}],rc={id:p8,name:m8,startedAt:g8,endedAt:y8,status:v8,metadata:x8,steps:w8},b8=new Map,S8=new Map,ai=new Map;async function _8(){return[rc]}async function GR(e){return{trace:rc}}const E8={s1:{role:"assistant",content:"I'll analyze the user's request and create a plan to fetch information from two sources: a web search for current EU AI Act updates and a database query for historical compliance data.",model:"gpt-4o-2024-11-20",usage:{prompt_tokens:150,completion_tokens:150,total_tokens:300},reasoning:"The user wants comprehensive information about AI regulations. I'll use parallel tool calls to maximize efficiency."},s2:{role:"assistant",content:null,tool_calls:[{id:"tc-001",type:"function",function:{name:"web_search",arguments:'{"q":"EU AI Act latest updates 2026"}'}},{id:"tc-002",type:"function",function:{name:"database_query",arguments:`{"sql":"SELECT * FROM compliance_records WHERE region='EU' ORDER BY date DESC LIMIT 10"}`}}],model:"gpt-4o-2024-11-20",usage:{prompt_tokens:80,completion_tokens:40,total_tokens:120}},s3:{tool_call_id:"tc-001",tool_name:"web_search",input:{q:"EU AI Act latest updates 2026"},output:{results:[{title:"EU AI Act Implementation Timeline",url:"https://example.com/ai-act",snippet:"The EU AI Act enters full force in 2026..."},{title:"High-Risk AI Systems Classification",url:"https://example.com/classification",snippet:"New guidance on high-risk categorization..."},{title:"Compliance Deadlines Approaching",url:"https://example.com/deadlines",snippet:"Organizations must comply by August 2026..."}],total_results:3,search_time_ms:1850},status:"success"},s4:{tool_call_id:"tc-002",tool_name:"database_query",input:{sql:"SELECT * FROM compliance_records WHERE region='EU' ORDER BY date DESC LIMIT 10"},output:{rows:[{id:1,company:"TechCorp",status:"compliant",date:"2026-01-15"},{id:2,company:"AIStartup",status:"in_progress",date:"2026-01-10"},{id:3,company:"DataCo",status:"compliant",date:"2026-01-05"}],row_count:42,query_time_ms:1100},status:"success"},s5:{role:"assistant",content:`Based on my analysis of the web search results and database records:

**Key Findings:**
1. The EU AI Act is now in full effect as of 2026
2. High-risk AI systems require specific compliance measures
3. 42 organizations in our database have compliance records

**Recommendations:**
- Review classification of AI systems
- Ensure documentation is complete
- Schedule compliance audit before August deadline`,model:"gpt-4o-2024-11-20",usage:{prompt_tokens:450,completion_tokens:250,total_tokens:700},reasoning:"Synthesized information from both the web search (3 relevant articles) and database query (42 compliance records) to provide actionable insights."}};function C8(e,t){const n=rc.steps.find(s=>s.id===e);if(!n)return null;const r=E8[e];if(!r)return null;const i=t?k8(r):r;return{...n,data:i}}function k8(e){var n,r;const t=JSON.parse(JSON.stringify(e));return(n=t.input)!=null&&n.sql&&(t.input.sql="[REDACTED]"),(r=t.output)!=null&&r.rows&&(t.output.rows=t.output.rows.map(i=>({...i,company:"[REDACTED]"}))),t.tool_calls&&(t.tool_calls=t.tool_calls.map(i=>({...i,function:{...i.function,arguments:"[REDACTED]"}}))),t}async function WR(e,t,n,r=[],i=!1){return await new Promise(s=>setTimeout(s,150)),C8(t,i)}async function T8(e,t,n){await WR(e,t,"redacted",[],n)}function N8(){b8.clear(),S8.clear()}async function M8(e,t,n,r,i){return i?KR(i,t,n,r):null}function KR(e,t,n,r){var g;const i=JSON.parse(JSON.stringify(e)),s=6e4,o=Date.parse("2024-01-01T00:00:00.000Z"),a=Date.parse(e.endedAt??e.startedAt??""),u=(Number.isNaN(a)?o:a)+s,c=new Date(u);i.id=`${e.id}-replay-${u}`,i.parentTraceId=e.id,i.branchPointStepId=t,i.replay={strategy:n,modifiedStepId:t,modifications:r,createdAt:c.toISOString()};const d=p=>{if(!p)return p;const x=Date.parse(p);return Number.isNaN(x)?p:new Date(x+s).toISOString()};i.startedAt=d(i.startedAt)??i.startedAt,i.endedAt=d(i.endedAt);const f=new Set,h=((g=i.steps.find(p=>p.id===t))==null?void 0:g.index)??-1;return n==="live"?i.steps.forEach(p=>{p.index>h&&f.add(p.id)}):n==="hybrid"&&i.steps.forEach(p=>{p.index>h&&f.add(p.id)}),i.steps=i.steps.map(p=>{var m;const x={...p};if(x.startedAt=d(p.startedAt)??p.startedAt,x.endedAt=d(p.endedAt),p.id===t){const v=((m=p.preview)==null?void 0:m.outputPreview)??"";x.preview={...p.preview,outputPreview:`${v} (modified)`.trim()}}return f.has(p.id)&&(x.status="pending",x.endedAt=null,x.durationMs=void 0,x.metrics=void 0,x.preview={...p.preview,outputPreview:"[invalidated for replay]"}),x}),i}async function A8(e){return I8(e)}async function R8(e){var t;return((t=ai.get(e))==null?void 0:t.job)??null}async function SC(e){var t;return((t=ai.get(e))==null?void 0:t.matrix)??null}async function P8(e){{const t=ai.get(e);if(!t)return null;const n={...t.job,status:"canceled",scenarios:t.job.scenarios.map(r=>({...r,status:"canceled",endedAt:r.endedAt??new Date().toISOString()}))};return ai.set(e,{...t,job:n}),n}}function I8(e){const t=`demo-job-${Date.now()}-${Math.random().toString(36).slice(2,6)}`,n=rc,r=new Date().toISOString(),i=e.scenarios.map((l,u)=>({id:`demo-scn-${u+1}`,name:l.name,strategy:l.strategy,modifications:l.modifications,status:"running",startedAt:r,endedAt:null,replayTraceId:`${t}-replay-${u+1}`})),s={id:t,traceId:e.traceId,stepId:e.stepId,status:"running",createdAt:r,startedAt:r,endedAt:null,scenarioCount:i.length,completedCount:0,failedCount:0,canceledCount:0,scenarios:i},o=i.map(l=>{const u=KR(n,e.stepId,l.strategy,l.modifications);u.id=l.replayTraceId;const c=nc(n,u),d=n.metadata.totalCostUsd??0,f=u.metadata.totalCostUsd??d,h=n.metadata.errorCount??0,g=u.metadata.errorCount??h,p=n.metadata.retryCount??0,x=u.metadata.retryCount??p,m=u.steps.filter(v=>v.status==="pending").length;return{scenarioId:l.id,name:l.name,strategy:l.strategy,status:"completed",replayTraceId:l.replayTraceId,modifications:l.modifications,error:null,changedStepIds:c.changedSteps,addedStepIds:c.addedSteps,removedStepIds:c.removedSteps,metrics:{costDeltaUsd:f-d,wallTimeDeltaMs:(u.metadata.wallTimeMs??0)-(n.metadata.wallTimeMs??0),errorDelta:g-h,retryDelta:x-p,changedSteps:c.changedSteps.length,addedSteps:c.addedSteps.length,removedSteps:c.removedSteps.length,invalidatedStepCount:m}}}),a={jobId:t,traceId:e.traceId,stepId:e.stepId,rows:o,causalRanking:[]};return ai.set(t,{job:s,matrix:a}),window.setTimeout(()=>{const l=ai.get(t);if(!l)return;const u=new Date().toISOString(),c=l.job.scenarios.map(h=>({...h,status:"completed",endedAt:u})),d={...l.job,status:"completed",endedAt:u,completedCount:c.length,scenarios:c},f={...l.matrix,rows:l.matrix.rows.map(h=>({...h,status:"completed"}))};ai.set(t,{job:d,matrix:f})},600),s}function j8(e){return JSON.stringify(e,null,2)}function D8({traceId:e,step:t,safeExport:n,onClose:r,onReplay:i}){var g,p;const[s,o]=S.useState(null),[a,l]=S.useState("redacted"),[u,c]=S.useState([]);if(S.useEffect(()=>{c([]),l("redacted")},[t==null?void 0:t.id,n]),S.useEffect(()=>{if(!t)return;let x=!0;return(async()=>{const v=n?"redacted":a,w=await WR(e,t.id,v,v==="redacted"?u:[],n);x&&o(w)})(),()=>{x=!1}},[e,t,a,n,u]),!t)return null;const d=s==null?void 0:s.redaction,f=(d==null?void 0:d.fieldsRedacted)??[],h=(d==null?void 0:d.revealedFields)??[];return y.jsxs("aside",{className:"inspector","data-help":!0,"data-help-indicator":!0,"data-tour":"inspector","data-help-title":"Inspector panel","data-help-body":"Deep dive into a single step: payloads, redaction, metrics, and replay.","data-help-placement":"left",children:[y.jsxs("div",{className:"inspector-header",children:[y.jsxs("div",{children:[y.jsxs("div",{className:"inspector-title",children:[y.jsx(Vv,{type:t.type,size:"md",showLabel:!0}),y.jsx("span",{children:t.name}),y.jsx("span",{className:`status-pill status-${t.status}`,children:t.status})]}),y.jsx("div",{className:"inspector-subtitle",children:t.type})]}),y.jsx("button",{className:"ghost-button",type:"button",onClick:r,"aria-label":"Close inspector",children:"Close"})]}),y.jsxs("div",{className:"inspector-section",children:[y.jsxs("div",{className:"inspector-row",children:[y.jsx("span",{children:"Status"}),y.jsx("span",{children:t.status})]}),y.jsxs("div",{className:"inspector-row",children:[y.jsx("span",{children:"Duration"}),y.jsxs("span",{children:[t.durationMs??0,"ms"]})]}),y.jsxs("div",{className:"inspector-row",children:[y.jsx("span",{children:"Tokens"}),y.jsx("span",{children:((g=t.metrics)==null?void 0:g.tokensTotal)??"-"})]}),y.jsxs("div",{className:"inspector-row",children:[y.jsx("span",{children:"Cost"}),y.jsx("span",{children:((p=t.metrics)==null?void 0:p.costUsd)!=null?`$${t.metrics.costUsd.toFixed(3)}`:"-"})]})]}),y.jsxs("div",{className:"inspector-section",children:[y.jsx("div",{className:"inspector-section-title",children:"Payload"}),y.jsxs("div",{className:"inspector-controls",children:[y.jsxs("label",{title:n?"Safe export enabled: raw view disabled.":"Toggle raw payload view.","data-help":!0,"data-help-title":"Raw payload","data-help-body":"Switch between redacted and raw payloads when Safe export is off.","data-help-placement":"top",children:[y.jsx("input",{type:"checkbox",checked:a==="raw",disabled:n,onChange:x=>l(x.target.checked?"raw":"redacted")}),"Reveal raw (dangerous)"]}),y.jsx("button",{className:"ghost-button",type:"button","aria-label":"Copy payload JSON",onClick:async()=>{s&&await navigator.clipboard.writeText(JSON.stringify(s.data,null,2))},"data-help":!0,"data-help-title":"Copy JSON","data-help-body":"Copy the payload to your clipboard.","data-help-placement":"top",children:"Copy JSON"}),u.length>0&&a==="redacted"?y.jsx("button",{className:"ghost-button",type:"button","aria-label":"Reset revealed fields",onClick:()=>c([]),"data-help":!0,"data-help-title":"Reset reveals","data-help-body":"Re-hide any fields you temporarily revealed.","data-help-placement":"top",children:"Reset reveals"}):null]}),y.jsx("pre",{className:"inspector-json",children:s?j8(s.data):"Loading..."}),f.length>0?y.jsxs("div",{className:"inspector-redaction",children:["Redacted fields:",y.jsx("ul",{children:f.map(x=>{const m=!n&&a==="redacted";return y.jsxs("li",{children:[x.path," (",x.kind,")",m?y.jsx("button",{className:"ghost-button",type:"button","aria-label":`Reveal ${x.path}`,onClick:()=>c(v=>v.includes(x.path)?v:[...v,x.path]),children:"Reveal"}):null]},x.path)})}),h.length>0?y.jsxs("div",{className:"inspector-revealed",children:["Revealed:",y.jsx("ul",{children:h.map(x=>y.jsxs("li",{children:[x.path," (",x.kind,")"]},x.path))})]}):null]}):null]}),y.jsx("div",{className:"inspector-section",children:y.jsx("button",{className:"primary-button",type:"button",onClick:()=>i(t.id),"data-help":!0,"data-help-title":"Replay","data-help-body":"Branch a new run starting from this step.","data-help-placement":"top",children:"Replay from this step"})})]})}const YR=S.createContext({});function L8(e){const t=S.useRef(null);return t.current===null&&(t.current=e()),t.current}const k0=S.createContext(null),XR=S.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});function O8(e=!0){const t=S.useContext(k0);if(t===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:i}=t,s=S.useId();S.useEffect(()=>{e&&i(s)},[e]);const o=S.useCallback(()=>e&&r&&r(s),[s,r,e]);return!n&&r?[!1,o]:[!0]}const T0=typeof window<"u",q8=T0?S.useLayoutEffect:S.useEffect,Dt=e=>e;let ZR=Dt;function N0(e){let t;return()=>(t===void 0&&(t=e()),t)}const gs=(e,t,n)=>{const r=t-e;return r===0?1:(n-e)/r},Gn=e=>e*1e3,Wn=e=>e/1e3,$8={useManualTiming:!1};function F8(e){let t=new Set,n=new Set,r=!1,i=!1;const s=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1};function a(u){s.has(u)&&(l.schedule(u),e()),u(o)}const l={schedule:(u,c=!1,d=!1)=>{const h=d&&r?t:n;return c&&s.add(u),h.has(u)||h.add(u),u},cancel:u=>{n.delete(u),s.delete(u)},process:u=>{if(o=u,r){i=!0;return}r=!0,[t,n]=[n,t],t.forEach(a),t.clear(),r=!1,i&&(i=!1,l.process(u))}};return l}const Qa=["read","resolveKeyframes","update","preRender","render","postRender"],V8=40;function QR(e,t){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=()=>n=!0,o=Qa.reduce((m,v)=>(m[v]=F8(s),m),{}),{read:a,resolveKeyframes:l,update:u,preRender:c,render:d,postRender:f}=o,h=()=>{const m=performance.now();n=!1,i.delta=r?1e3/60:Math.max(Math.min(m-i.timestamp,V8),1),i.timestamp=m,i.isProcessing=!0,a.process(i),l.process(i),u.process(i),c.process(i),d.process(i),f.process(i),i.isProcessing=!1,n&&t&&(r=!1,e(h))},g=()=>{n=!0,r=!0,i.isProcessing||e(h)};return{schedule:Qa.reduce((m,v)=>{const w=o[v];return m[v]=(b,_=!1,C=!1)=>(n||g(),w.schedule(b,_,C)),m},{}),cancel:m=>{for(let v=0;v<Qa.length;v++)o[Qa[v]].cancel(m)},state:i,steps:o}}const{schedule:Te,cancel:jr,state:rt,steps:tg}=QR(typeof requestAnimationFrame<"u"?requestAnimationFrame:Dt,!0),JR=S.createContext({strict:!1}),_C={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},ys={};for(const e in _C)ys[e]={isEnabled:t=>_C[e].some(n=>!!t[n])};function B8(e){for(const t in e)ys[t]={...ys[t],...e[t]}}const z8=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function su(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||z8.has(e)}let eP=e=>!su(e);function U8(e){e&&(eP=t=>t.startsWith("on")?!su(t):e(t))}try{U8(require("@emotion/is-prop-valid").default)}catch{}function H8(e,t,n){const r={};for(const i in e)i==="values"&&typeof e.values=="object"||(eP(i)||n===!0&&su(i)||!t&&!su(i)||e.draggable&&i.startsWith("onDrag"))&&(r[i]=e[i]);return r}function G8(e){if(typeof Proxy>"u")return e;const t=new Map,n=(...r)=>e(...r);return new Proxy(n,{get:(r,i)=>i==="create"?e:(t.has(i)||t.set(i,e(i)),t.get(i))})}const ic=S.createContext({});function Ko(e){return typeof e=="string"||Array.isArray(e)}function sc(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}const M0=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],A0=["initial",...M0];function oc(e){return sc(e.animate)||A0.some(t=>Ko(e[t]))}function tP(e){return!!(oc(e)||e.variants)}function W8(e,t){if(oc(e)){const{initial:n,animate:r}=e;return{initial:n===!1||Ko(n)?n:void 0,animate:Ko(r)?r:void 0}}return e.inherit!==!1?t:{}}function K8(e){const{initial:t,animate:n}=W8(e,S.useContext(ic));return S.useMemo(()=>({initial:t,animate:n}),[EC(t),EC(n)])}function EC(e){return Array.isArray(e)?e.join(" "):e}const Y8=Symbol.for("motionComponentSymbol");function Hi(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function X8(e,t,n){return S.useCallback(r=>{r&&e.onMount&&e.onMount(r),t&&(r?t.mount(r):t.unmount()),n&&(typeof n=="function"?n(r):Hi(n)&&(n.current=r))},[t])}const R0=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),Z8="framerAppearId",nP="data-"+R0(Z8),{schedule:P0}=QR(queueMicrotask,!1),rP=S.createContext({});function Q8(e,t,n,r,i){var s,o;const{visualElement:a}=S.useContext(ic),l=S.useContext(JR),u=S.useContext(k0),c=S.useContext(XR).reducedMotion,d=S.useRef(null);r=r||l.renderer,!d.current&&r&&(d.current=r(e,{visualState:t,parent:a,props:n,presenceContext:u,blockInitialAnimation:u?u.initial===!1:!1,reducedMotionConfig:c}));const f=d.current,h=S.useContext(rP);f&&!f.projection&&i&&(f.type==="html"||f.type==="svg")&&J8(d.current,n,i,h);const g=S.useRef(!1);S.useInsertionEffect(()=>{f&&g.current&&f.update(n,u)});const p=n[nP],x=S.useRef(!!p&&!(!((s=window.MotionHandoffIsComplete)===null||s===void 0)&&s.call(window,p))&&((o=window.MotionHasOptimisedAnimation)===null||o===void 0?void 0:o.call(window,p)));return q8(()=>{f&&(g.current=!0,window.MotionIsMounted=!0,f.updateFeatures(),P0.render(f.render),x.current&&f.animationState&&f.animationState.animateChanges())}),S.useEffect(()=>{f&&(!x.current&&f.animationState&&f.animationState.animateChanges(),x.current&&(queueMicrotask(()=>{var m;(m=window.MotionHandoffMarkAsComplete)===null||m===void 0||m.call(window,p)}),x.current=!1))}),f}function J8(e,t,n,r){const{layoutId:i,layout:s,drag:o,dragConstraints:a,layoutScroll:l,layoutRoot:u}=t;e.projection=new n(e.latestValues,t["data-framer-portal-id"]?void 0:iP(e.parent)),e.projection.setOptions({layoutId:i,layout:s,alwaysMeasureLayout:!!o||a&&Hi(a),visualElement:e,animationType:typeof s=="string"?s:"both",initialPromotionConfig:r,layoutScroll:l,layoutRoot:u})}function iP(e){if(e)return e.options.allowProjection!==!1?e.projection:iP(e.parent)}function eU({preloadedFeatures:e,createVisualElement:t,useRender:n,useVisualState:r,Component:i}){var s,o;e&&B8(e);function a(u,c){let d;const f={...S.useContext(XR),...u,layoutId:tU(u)},{isStatic:h}=f,g=K8(u),p=r(u,h);if(!h&&T0){nU();const x=rU(f);d=x.MeasureLayout,g.visualElement=Q8(i,p,f,t,x.ProjectionNode)}return y.jsxs(ic.Provider,{value:g,children:[d&&g.visualElement?y.jsx(d,{visualElement:g.visualElement,...f}):null,n(i,u,X8(p,g.visualElement,c),p,h,g.visualElement)]})}a.displayName=`motion.${typeof i=="string"?i:`create(${(o=(s=i.displayName)!==null&&s!==void 0?s:i.name)!==null&&o!==void 0?o:""})`}`;const l=S.forwardRef(a);return l[Y8]=i,l}function tU({layoutId:e}){const t=S.useContext(YR).id;return t&&e!==void 0?t+"-"+e:e}function nU(e,t){S.useContext(JR).strict}function rU(e){const{drag:t,layout:n}=ys;if(!t&&!n)return{};const r={...t,...n};return{MeasureLayout:t!=null&&t.isEnabled(e)||n!=null&&n.isEnabled(e)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const iU=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function I0(e){return typeof e!="string"||e.includes("-")?!1:!!(iU.indexOf(e)>-1||/[A-Z]/u.test(e))}function CC(e){const t=[{},{}];return e==null||e.values.forEach((n,r)=>{t[0][r]=n.get(),t[1][r]=n.getVelocity()}),t}function j0(e,t,n,r){if(typeof t=="function"){const[i,s]=CC(r);t=t(n!==void 0?n:e.custom,i,s)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[i,s]=CC(r);t=t(n!==void 0?n:e.custom,i,s)}return t}const Ay=e=>Array.isArray(e),sU=e=>!!(e&&typeof e=="object"&&e.mix&&e.toValue),oU=e=>Ay(e)?e[e.length-1]||0:e,pt=e=>!!(e&&e.getVelocity);function vl(e){const t=pt(e)?e.get():e;return sU(t)?t.toValue():t}function aU({scrapeMotionValuesFromProps:e,createRenderState:t,onUpdate:n},r,i,s){const o={latestValues:lU(r,i,s,e),renderState:t()};return n&&(o.onMount=a=>n({props:r,current:a,...o}),o.onUpdate=a=>n(a)),o}const sP=e=>(t,n)=>{const r=S.useContext(ic),i=S.useContext(k0),s=()=>aU(e,t,r,i);return n?s():L8(s)};function lU(e,t,n,r){const i={},s=r(e,{});for(const f in s)i[f]=vl(s[f]);let{initial:o,animate:a}=e;const l=oc(e),u=tP(e);t&&u&&!l&&e.inherit!==!1&&(o===void 0&&(o=t.initial),a===void 0&&(a=t.animate));let c=n?n.initial===!1:!1;c=c||o===!1;const d=c?a:o;if(d&&typeof d!="boolean"&&!sc(d)){const f=Array.isArray(d)?d:[d];for(let h=0;h<f.length;h++){const g=j0(e,f[h]);if(g){const{transitionEnd:p,transition:x,...m}=g;for(const v in m){let w=m[v];if(Array.isArray(w)){const b=c?w.length-1:0;w=w[b]}w!==null&&(i[v]=w)}for(const v in p)i[v]=p[v]}}}return i}const Ts=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],_i=new Set(Ts),oP=e=>t=>typeof t=="string"&&t.startsWith(e),aP=oP("--"),uU=oP("var(--"),D0=e=>uU(e)?cU.test(e.split("/*")[0].trim()):!1,cU=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,lP=(e,t)=>t&&typeof e=="number"?t.transform(e):e,tr=(e,t,n)=>n>t?t:n<e?e:n,Ns={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},Yo={...Ns,transform:e=>tr(0,1,e)},Ja={...Ns,default:1},fa=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),cr=fa("deg"),An=fa("%"),ie=fa("px"),dU=fa("vh"),fU=fa("vw"),kC={...An,parse:e=>An.parse(e)/100,transform:e=>An.transform(e*100)},hU={borderWidth:ie,borderTopWidth:ie,borderRightWidth:ie,borderBottomWidth:ie,borderLeftWidth:ie,borderRadius:ie,radius:ie,borderTopLeftRadius:ie,borderTopRightRadius:ie,borderBottomRightRadius:ie,borderBottomLeftRadius:ie,width:ie,maxWidth:ie,height:ie,maxHeight:ie,top:ie,right:ie,bottom:ie,left:ie,padding:ie,paddingTop:ie,paddingRight:ie,paddingBottom:ie,paddingLeft:ie,margin:ie,marginTop:ie,marginRight:ie,marginBottom:ie,marginLeft:ie,backgroundPositionX:ie,backgroundPositionY:ie},pU={rotate:cr,rotateX:cr,rotateY:cr,rotateZ:cr,scale:Ja,scaleX:Ja,scaleY:Ja,scaleZ:Ja,skew:cr,skewX:cr,skewY:cr,distance:ie,translateX:ie,translateY:ie,translateZ:ie,x:ie,y:ie,z:ie,perspective:ie,transformPerspective:ie,opacity:Yo,originX:kC,originY:kC,originZ:ie},TC={...Ns,transform:Math.round},L0={...hU,...pU,zIndex:TC,size:ie,fillOpacity:Yo,strokeOpacity:Yo,numOctaves:TC},mU={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},gU=Ts.length;function yU(e,t,n){let r="",i=!0;for(let s=0;s<gU;s++){const o=Ts[s],a=e[o];if(a===void 0)continue;let l=!0;if(typeof a=="number"?l=a===(o.startsWith("scale")?1:0):l=parseFloat(a)===0,!l||n){const u=lP(a,L0[o]);if(!l){i=!1;const c=mU[o]||o;r+=`${c}(${u}) `}n&&(t[o]=u)}}return r=r.trim(),n?r=n(t,i?"":r):i&&(r="none"),r}function O0(e,t,n){const{style:r,vars:i,transformOrigin:s}=e;let o=!1,a=!1;for(const l in t){const u=t[l];if(_i.has(l)){o=!0;continue}else if(aP(l)){i[l]=u;continue}else{const c=lP(u,L0[l]);l.startsWith("origin")?(a=!0,s[l]=c):r[l]=c}}if(t.transform||(o||n?r.transform=yU(t,e.transform,n):r.transform&&(r.transform="none")),a){const{originX:l="50%",originY:u="50%",originZ:c=0}=s;r.transformOrigin=`${l} ${u} ${c}`}}const vU={offset:"stroke-dashoffset",array:"stroke-dasharray"},xU={offset:"strokeDashoffset",array:"strokeDasharray"};function wU(e,t,n=1,r=0,i=!0){e.pathLength=1;const s=i?vU:xU;e[s.offset]=ie.transform(-r);const o=ie.transform(t),a=ie.transform(n);e[s.array]=`${o} ${a}`}function NC(e,t,n){return typeof e=="string"?e:ie.transform(t+n*e)}function bU(e,t,n){const r=NC(t,e.x,e.width),i=NC(n,e.y,e.height);return`${r} ${i}`}function q0(e,{attrX:t,attrY:n,attrScale:r,originX:i,originY:s,pathLength:o,pathSpacing:a=1,pathOffset:l=0,...u},c,d){if(O0(e,u,d),c){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:f,style:h,dimensions:g}=e;f.transform&&(g&&(h.transform=f.transform),delete f.transform),g&&(i!==void 0||s!==void 0||h.transform)&&(h.transformOrigin=bU(g,i!==void 0?i:.5,s!==void 0?s:.5)),t!==void 0&&(f.x=t),n!==void 0&&(f.y=n),r!==void 0&&(f.scale=r),o!==void 0&&wU(f,o,a,l,!1)}const $0=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),uP=()=>({...$0(),attrs:{}}),F0=e=>typeof e=="string"&&e.toLowerCase()==="svg";function cP(e,{style:t,vars:n},r,i){Object.assign(e.style,t,i&&i.getProjectionStyles(r));for(const s in n)e.style.setProperty(s,n[s])}const dP=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function fP(e,t,n,r){cP(e,t,void 0,r);for(const i in t.attrs)e.setAttribute(dP.has(i)?i:R0(i),t.attrs[i])}const ou={};function SU(e){Object.assign(ou,e)}function hP(e,{layout:t,layoutId:n}){return _i.has(e)||e.startsWith("origin")||(t||n!==void 0)&&(!!ou[e]||e==="opacity")}function V0(e,t,n){var r;const{style:i}=e,s={};for(const o in i)(pt(i[o])||t.style&&pt(t.style[o])||hP(o,e)||((r=n==null?void 0:n.getValue(o))===null||r===void 0?void 0:r.liveStyle)!==void 0)&&(s[o]=i[o]);return s}function pP(e,t,n){const r=V0(e,t,n);for(const i in e)if(pt(e[i])||pt(t[i])){const s=Ts.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[s]=e[i]}return r}function _U(e,t){try{t.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{t.dimensions={x:0,y:0,width:0,height:0}}}const MC=["x","y","width","height","cx","cy","r"],EU={useVisualState:sP({scrapeMotionValuesFromProps:pP,createRenderState:uP,onUpdate:({props:e,prevProps:t,current:n,renderState:r,latestValues:i})=>{if(!n)return;let s=!!e.drag;if(!s){for(const a in i)if(_i.has(a)){s=!0;break}}if(!s)return;let o=!t;if(t)for(let a=0;a<MC.length;a++){const l=MC[a];e[l]!==t[l]&&(o=!0)}o&&Te.read(()=>{_U(n,r),Te.render(()=>{q0(r,i,F0(n.tagName),e.transformTemplate),fP(n,r)})})}})},CU={useVisualState:sP({scrapeMotionValuesFromProps:V0,createRenderState:$0})};function mP(e,t,n){for(const r in t)!pt(t[r])&&!hP(r,n)&&(e[r]=t[r])}function kU({transformTemplate:e},t){return S.useMemo(()=>{const n=$0();return O0(n,t,e),Object.assign({},n.vars,n.style)},[t])}function TU(e,t){const n=e.style||{},r={};return mP(r,n,e),Object.assign(r,kU(e,t)),r}function NU(e,t){const n={},r=TU(e,t);return e.drag&&e.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=r,n}function MU(e,t,n,r){const i=S.useMemo(()=>{const s=uP();return q0(s,t,F0(r),e.transformTemplate),{...s.attrs,style:{...s.style}}},[t]);if(e.style){const s={};mP(s,e.style,e),i.style={...s,...i.style}}return i}function AU(e=!1){return(n,r,i,{latestValues:s},o)=>{const l=(I0(n)?MU:NU)(r,s,o,n),u=H8(r,typeof n=="string",e),c=n!==S.Fragment?{...u,...l,ref:i}:{},{children:d}=r,f=S.useMemo(()=>pt(d)?d.get():d,[d]);return S.createElement(n,{...c,children:f})}}function RU(e,t){return function(r,{forwardMotionProps:i}={forwardMotionProps:!1}){const o={...I0(r)?EU:CU,preloadedFeatures:e,useRender:AU(i),createVisualElement:t,Component:r};return eU(o)}}function gP(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}function ac(e,t,n){const r=e.getProps();return j0(r,t,n!==void 0?n:r.custom,e)}const PU=N0(()=>window.ScrollTimeline!==void 0);class IU{constructor(t){this.stop=()=>this.runAll("stop"),this.animations=t.filter(Boolean)}get finished(){return Promise.all(this.animations.map(t=>"finished"in t?t.finished:t))}getAll(t){return this.animations[0][t]}setAll(t,n){for(let r=0;r<this.animations.length;r++)this.animations[r][t]=n}attachTimeline(t,n){const r=this.animations.map(i=>{if(PU()&&i.attachTimeline)return i.attachTimeline(t);if(typeof n=="function")return n(i)});return()=>{r.forEach((i,s)=>{i&&i(),this.animations[s].stop()})}}get time(){return this.getAll("time")}set time(t){this.setAll("time",t)}get speed(){return this.getAll("speed")}set speed(t){this.setAll("speed",t)}get startTime(){return this.getAll("startTime")}get duration(){let t=0;for(let n=0;n<this.animations.length;n++)t=Math.max(t,this.animations[n].duration);return t}runAll(t){this.animations.forEach(n=>n[t]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class jU extends IU{then(t,n){return Promise.all(this.animations).then(t).catch(n)}}function B0(e,t){return e?e[t]||e.default||e:void 0}const Ry=2e4;function yP(e){let t=0;const n=50;let r=e.next(t);for(;!r.done&&t<Ry;)t+=n,r=e.next(t);return t>=Ry?1/0:t}function z0(e){return typeof e=="function"}function AC(e,t){e.timeline=t,e.onfinish=null}const U0=e=>Array.isArray(e)&&typeof e[0]=="number",DU={linearEasing:void 0};function LU(e,t){const n=N0(e);return()=>{var r;return(r=DU[t])!==null&&r!==void 0?r:n()}}const au=LU(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),vP=(e,t,n=10)=>{let r="";const i=Math.max(Math.round(t/n),2);for(let s=0;s<i;s++)r+=e(gs(0,i-1,s))+", ";return`linear(${r.substring(0,r.length-2)})`};function xP(e){return!!(typeof e=="function"&&au()||!e||typeof e=="string"&&(e in Py||au())||U0(e)||Array.isArray(e)&&e.every(xP))}const oo=([e,t,n,r])=>`cubic-bezier(${e}, ${t}, ${n}, ${r})`,Py={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:oo([0,.65,.55,1]),circOut:oo([.55,0,1,.45]),backIn:oo([.31,.01,.66,-.59]),backOut:oo([.33,1.53,.69,.99])};function wP(e,t){if(e)return typeof e=="function"&&au()?vP(e,t):U0(e)?oo(e):Array.isArray(e)?e.map(n=>wP(n,t)||Py.easeOut):Py[e]}const an={x:!1,y:!1};function bP(){return an.x||an.y}function OU(e,t,n){var r;if(e instanceof Element)return[e];if(typeof e=="string"){let i=document;const s=(r=void 0)!==null&&r!==void 0?r:i.querySelectorAll(e);return s?Array.from(s):[]}return Array.from(e)}function SP(e,t){const n=OU(e),r=new AbortController,i={passive:!0,...t,signal:r.signal};return[n,i,()=>r.abort()]}function RC(e){return t=>{t.pointerType==="touch"||bP()||e(t)}}function qU(e,t,n={}){const[r,i,s]=SP(e,n),o=RC(a=>{const{target:l}=a,u=t(a);if(typeof u!="function"||!l)return;const c=RC(d=>{u(d),l.removeEventListener("pointerleave",c)});l.addEventListener("pointerleave",c,i)});return r.forEach(a=>{a.addEventListener("pointerenter",o,i)}),s}const _P=(e,t)=>t?e===t?!0:_P(e,t.parentElement):!1,H0=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1,$U=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function FU(e){return $U.has(e.tagName)||e.tabIndex!==-1}const ao=new WeakSet;function PC(e){return t=>{t.key==="Enter"&&e(t)}}function ng(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const VU=(e,t)=>{const n=e.currentTarget;if(!n)return;const r=PC(()=>{if(ao.has(n))return;ng(n,"down");const i=PC(()=>{ng(n,"up")}),s=()=>ng(n,"cancel");n.addEventListener("keyup",i,t),n.addEventListener("blur",s,t)});n.addEventListener("keydown",r,t),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),t)};function IC(e){return H0(e)&&!bP()}function BU(e,t,n={}){const[r,i,s]=SP(e,n),o=a=>{const l=a.currentTarget;if(!IC(a)||ao.has(l))return;ao.add(l);const u=t(a),c=(h,g)=>{window.removeEventListener("pointerup",d),window.removeEventListener("pointercancel",f),!(!IC(h)||!ao.has(l))&&(ao.delete(l),typeof u=="function"&&u(h,{success:g}))},d=h=>{c(h,n.useGlobalTarget||_P(l,h.target))},f=h=>{c(h,!1)};window.addEventListener("pointerup",d,i),window.addEventListener("pointercancel",f,i)};return r.forEach(a=>{!FU(a)&&a.getAttribute("tabindex")===null&&(a.tabIndex=0),(n.useGlobalTarget?window:a).addEventListener("pointerdown",o,i),a.addEventListener("focus",u=>VU(u,i),i)}),s}function zU(e){return e==="x"||e==="y"?an[e]?null:(an[e]=!0,()=>{an[e]=!1}):an.x||an.y?null:(an.x=an.y=!0,()=>{an.x=an.y=!1})}const EP=new Set(["width","height","top","left","right","bottom",...Ts]);let xl;function UU(){xl=void 0}const Rn={now:()=>(xl===void 0&&Rn.set(rt.isProcessing||$8.useManualTiming?rt.timestamp:performance.now()),xl),set:e=>{xl=e,queueMicrotask(UU)}};function G0(e,t){e.indexOf(t)===-1&&e.push(t)}function W0(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}class K0{constructor(){this.subscriptions=[]}add(t){return G0(this.subscriptions,t),()=>W0(this.subscriptions,t)}notify(t,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](t,n,r);else for(let s=0;s<i;s++){const o=this.subscriptions[s];o&&o(t,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function CP(e,t){return t?e*(1e3/t):0}const jC=30,HU=e=>!isNaN(parseFloat(e));class GU{constructor(t,n={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,i=!0)=>{const s=Rn.now();this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(t),this.owner=n.owner}setCurrent(t){this.current=t,this.updatedAt=Rn.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=HU(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,n){this.events[t]||(this.events[t]=new K0);const r=this.events[t].add(n);return t==="change"?()=>{r(),Te.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,n){this.passiveEffect=t,this.stopPassiveEffect=n}set(t,n=!0){!n||!this.passiveEffect?this.updateAndNotify(t,n):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-r}jump(t,n=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=Rn.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>jC)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,jC);return CP(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(t){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=t(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Xo(e,t){return new GU(e,t)}function WU(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,Xo(n))}function KU(e,t){const n=ac(e,t);let{transitionEnd:r={},transition:i={},...s}=n||{};s={...s,...r};for(const o in s){const a=oU(s[o]);WU(e,o,a)}}function YU(e){return!!(pt(e)&&e.add)}function Iy(e,t){const n=e.getValue("willChange");if(YU(n))return n.add(t)}function kP(e){return e.props[nP]}const TP=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,XU=1e-7,ZU=12;function QU(e,t,n,r,i){let s,o,a=0;do o=t+(n-t)/2,s=TP(o,r,i)-e,s>0?n=o:t=o;while(Math.abs(s)>XU&&++a<ZU);return o}function ha(e,t,n,r){if(e===t&&n===r)return Dt;const i=s=>QU(s,0,1,e,n);return s=>s===0||s===1?s:TP(i(s),t,r)}const NP=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,MP=e=>t=>1-e(1-t),AP=ha(.33,1.53,.69,.99),Y0=MP(AP),RP=NP(Y0),PP=e=>(e*=2)<1?.5*Y0(e):.5*(2-Math.pow(2,-10*(e-1))),X0=e=>1-Math.sin(Math.acos(e)),IP=MP(X0),jP=NP(X0),DP=e=>/^0[^.\s]+$/u.test(e);function JU(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||DP(e):!0}const xo=e=>Math.round(e*1e5)/1e5,Z0=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function eH(e){return e==null}const tH=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Q0=(e,t)=>n=>!!(typeof n=="string"&&tH.test(n)&&n.startsWith(e)||t&&!eH(n)&&Object.prototype.hasOwnProperty.call(n,t)),LP=(e,t,n)=>r=>{if(typeof r!="string")return r;const[i,s,o,a]=r.match(Z0);return{[e]:parseFloat(i),[t]:parseFloat(s),[n]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},nH=e=>tr(0,255,e),rg={...Ns,transform:e=>Math.round(nH(e))},ni={test:Q0("rgb","red"),parse:LP("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:r=1})=>"rgba("+rg.transform(e)+", "+rg.transform(t)+", "+rg.transform(n)+", "+xo(Yo.transform(r))+")"};function rH(e){let t="",n="",r="",i="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),r=e.substring(5,7),i=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),r=e.substring(3,4),i=e.substring(4,5),t+=t,n+=n,r+=r,i+=i),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const jy={test:Q0("#"),parse:rH,transform:ni.transform},Gi={test:Q0("hsl","hue"),parse:LP("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:r=1})=>"hsla("+Math.round(e)+", "+An.transform(xo(t))+", "+An.transform(xo(n))+", "+xo(Yo.transform(r))+")"},ft={test:e=>ni.test(e)||jy.test(e)||Gi.test(e),parse:e=>ni.test(e)?ni.parse(e):Gi.test(e)?Gi.parse(e):jy.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?ni.transform(e):Gi.transform(e)},iH=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function sH(e){var t,n;return isNaN(e)&&typeof e=="string"&&(((t=e.match(Z0))===null||t===void 0?void 0:t.length)||0)+(((n=e.match(iH))===null||n===void 0?void 0:n.length)||0)>0}const OP="number",qP="color",oH="var",aH="var(",DC="${}",lH=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Zo(e){const t=e.toString(),n=[],r={color:[],number:[],var:[]},i=[];let s=0;const a=t.replace(lH,l=>(ft.test(l)?(r.color.push(s),i.push(qP),n.push(ft.parse(l))):l.startsWith(aH)?(r.var.push(s),i.push(oH),n.push(l)):(r.number.push(s),i.push(OP),n.push(parseFloat(l))),++s,DC)).split(DC);return{values:n,split:a,indexes:r,types:i}}function $P(e){return Zo(e).values}function FP(e){const{split:t,types:n}=Zo(e),r=t.length;return i=>{let s="";for(let o=0;o<r;o++)if(s+=t[o],i[o]!==void 0){const a=n[o];a===OP?s+=xo(i[o]):a===qP?s+=ft.transform(i[o]):s+=i[o]}return s}}const uH=e=>typeof e=="number"?0:e;function cH(e){const t=$P(e);return FP(e)(t.map(uH))}const Dr={test:sH,parse:$P,createTransformer:FP,getAnimatableNone:cH},dH=new Set(["brightness","contrast","saturate","opacity"]);function fH(e){const[t,n]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[r]=n.match(Z0)||[];if(!r)return e;const i=n.replace(r,"");let s=dH.has(t)?1:0;return r!==n&&(s*=100),t+"("+s+i+")"}const hH=/\b([a-z-]*)\(.*?\)/gu,Dy={...Dr,getAnimatableNone:e=>{const t=e.match(hH);return t?t.map(fH).join(" "):e}},pH={...L0,color:ft,backgroundColor:ft,outlineColor:ft,fill:ft,stroke:ft,borderColor:ft,borderTopColor:ft,borderRightColor:ft,borderBottomColor:ft,borderLeftColor:ft,filter:Dy,WebkitFilter:Dy},J0=e=>pH[e];function VP(e,t){let n=J0(e);return n!==Dy&&(n=Dr),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const mH=new Set(["auto","none","0"]);function gH(e,t,n){let r=0,i;for(;r<e.length&&!i;){const s=e[r];typeof s=="string"&&!mH.has(s)&&Zo(s).values.length&&(i=e[r]),r++}if(i&&n)for(const s of t)e[s]=VP(n,i)}const LC=e=>e===Ns||e===ie,OC=(e,t)=>parseFloat(e.split(", ")[t]),qC=(e,t)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const i=r.match(/^matrix3d\((.+)\)$/u);if(i)return OC(i[1],t);{const s=r.match(/^matrix\((.+)\)$/u);return s?OC(s[1],e):0}},yH=new Set(["x","y","z"]),vH=Ts.filter(e=>!yH.has(e));function xH(e){const t=[];return vH.forEach(n=>{const r=e.getValue(n);r!==void 0&&(t.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),t}const vs={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:qC(4,13),y:qC(5,14)};vs.translateX=vs.x;vs.translateY=vs.y;const li=new Set;let Ly=!1,Oy=!1;function BP(){if(Oy){const e=Array.from(li).filter(r=>r.needsMeasurement),t=new Set(e.map(r=>r.element)),n=new Map;t.forEach(r=>{const i=xH(r);i.length&&(n.set(r,i),r.render())}),e.forEach(r=>r.measureInitialState()),t.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([s,o])=>{var a;(a=r.getValue(s))===null||a===void 0||a.set(o)})}),e.forEach(r=>r.measureEndState()),e.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}Oy=!1,Ly=!1,li.forEach(e=>e.complete()),li.clear()}function zP(){li.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(Oy=!0)})}function wH(){zP(),BP()}class ex{constructor(t,n,r,i,s,o=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...t],this.onComplete=n,this.name=r,this.motionValue=i,this.element=s,this.isAsync=o}scheduleResolve(){this.isScheduled=!0,this.isAsync?(li.add(this),Ly||(Ly=!0,Te.read(zP),Te.resolveKeyframes(BP))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:n,element:r,motionValue:i}=this;for(let s=0;s<t.length;s++)if(t[s]===null)if(s===0){const o=i==null?void 0:i.get(),a=t[t.length-1];if(o!==void 0)t[0]=o;else if(r&&n){const l=r.readValue(n,a);l!=null&&(t[0]=l)}t[0]===void 0&&(t[0]=a),i&&o===void 0&&i.set(t[0])}else t[s]=t[s-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),li.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,li.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const UP=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e),bH=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function SH(e){const t=bH.exec(e);if(!t)return[,];const[,n,r,i]=t;return[`--${n??r}`,i]}function HP(e,t,n=1){const[r,i]=SH(e);if(!r)return;const s=window.getComputedStyle(t).getPropertyValue(r);if(s){const o=s.trim();return UP(o)?parseFloat(o):o}return D0(i)?HP(i,t,n+1):i}const GP=e=>t=>t.test(e),_H={test:e=>e==="auto",parse:e=>e},WP=[Ns,ie,An,cr,fU,dU,_H],$C=e=>WP.find(GP(e));class KP extends ex{constructor(t,n,r,i,s){super(t,n,r,i,s,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let l=0;l<t.length;l++){let u=t[l];if(typeof u=="string"&&(u=u.trim(),D0(u))){const c=HP(u,n.current);c!==void 0&&(t[l]=c),l===t.length-1&&(this.finalKeyframe=u)}}if(this.resolveNoneKeyframes(),!EP.has(r)||t.length!==2)return;const[i,s]=t,o=$C(i),a=$C(s);if(o!==a)if(LC(o)&&LC(a))for(let l=0;l<t.length;l++){const u=t[l];typeof u=="string"&&(t[l]=parseFloat(u))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:n}=this,r=[];for(let i=0;i<t.length;i++)JU(t[i])&&r.push(i);r.length&&gH(t,r,n)}measureInitialState(){const{element:t,unresolvedKeyframes:n,name:r}=this;if(!t||!t.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=vs[r](t.measureViewportBox(),window.getComputedStyle(t.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&t.getValue(r,i).jump(i,!1)}measureEndState(){var t;const{element:n,name:r,unresolvedKeyframes:i}=this;if(!n||!n.current)return;const s=n.getValue(r);s&&s.jump(this.measuredOrigin,!1);const o=i.length-1,a=i[o];i[o]=vs[r](n.measureViewportBox(),window.getComputedStyle(n.current)),a!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=a),!((t=this.removedTransforms)===null||t===void 0)&&t.length&&this.removedTransforms.forEach(([l,u])=>{n.getValue(l).set(u)}),this.resolveNoneKeyframes()}}const FC=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(Dr.test(e)||e==="0")&&!e.startsWith("url("));function EH(e){const t=e[0];if(e.length===1)return!0;for(let n=0;n<e.length;n++)if(e[n]!==t)return!0}function CH(e,t,n,r){const i=e[0];if(i===null)return!1;if(t==="display"||t==="visibility")return!0;const s=e[e.length-1],o=FC(i,t),a=FC(s,t);return!o||!a?!1:EH(e)||(n==="spring"||z0(n))&&r}const kH=e=>e!==null;function lc(e,{repeat:t,repeatType:n="loop"},r){const i=e.filter(kH),s=t&&n!=="loop"&&t%2===1?0:i.length-1;return!s||r===void 0?i[s]:r}const TH=40;class YP{constructor({autoplay:t=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:s=0,repeatType:o="loop",...a}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=Rn.now(),this.options={autoplay:t,delay:n,type:r,repeat:i,repeatDelay:s,repeatType:o,...a},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>TH?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&wH(),this._resolved}onKeyframesResolved(t,n){this.resolvedAt=Rn.now(),this.hasAttemptedResolve=!0;const{name:r,type:i,velocity:s,delay:o,onComplete:a,onUpdate:l,isGenerator:u}=this.options;if(!u&&!CH(t,r,i,s))if(o)this.options.duration=0;else{l&&l(lc(t,this.options,n)),a&&a(),this.resolveFinishedPromise();return}const c=this.initPlayback(t,n);c!==!1&&(this._resolved={keyframes:t,finalKeyframe:n,...c},this.onPostResolved())}onPostResolved(){}then(t,n){return this.currentFinishedPromise.then(t,n)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(t=>{this.resolveFinishedPromise=t})}}const Re=(e,t,n)=>e+(t-e)*n;function ig(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function NH({hue:e,saturation:t,lightness:n,alpha:r}){e/=360,t/=100,n/=100;let i=0,s=0,o=0;if(!t)i=s=o=n;else{const a=n<.5?n*(1+t):n+t-n*t,l=2*n-a;i=ig(l,a,e+1/3),s=ig(l,a,e),o=ig(l,a,e-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:r}}function lu(e,t){return n=>n>0?t:e}const sg=(e,t,n)=>{const r=e*e,i=n*(t*t-r)+r;return i<0?0:Math.sqrt(i)},MH=[jy,ni,Gi],AH=e=>MH.find(t=>t.test(e));function VC(e){const t=AH(e);if(!t)return!1;let n=t.parse(e);return t===Gi&&(n=NH(n)),n}const BC=(e,t)=>{const n=VC(e),r=VC(t);if(!n||!r)return lu(e,t);const i={...n};return s=>(i.red=sg(n.red,r.red,s),i.green=sg(n.green,r.green,s),i.blue=sg(n.blue,r.blue,s),i.alpha=Re(n.alpha,r.alpha,s),ni.transform(i))},RH=(e,t)=>n=>t(e(n)),pa=(...e)=>e.reduce(RH),qy=new Set(["none","hidden"]);function PH(e,t){return qy.has(e)?n=>n<=0?e:t:n=>n>=1?t:e}function IH(e,t){return n=>Re(e,t,n)}function tx(e){return typeof e=="number"?IH:typeof e=="string"?D0(e)?lu:ft.test(e)?BC:LH:Array.isArray(e)?XP:typeof e=="object"?ft.test(e)?BC:jH:lu}function XP(e,t){const n=[...e],r=n.length,i=e.map((s,o)=>tx(s)(s,t[o]));return s=>{for(let o=0;o<r;o++)n[o]=i[o](s);return n}}function jH(e,t){const n={...e,...t},r={};for(const i in n)e[i]!==void 0&&t[i]!==void 0&&(r[i]=tx(e[i])(e[i],t[i]));return i=>{for(const s in r)n[s]=r[s](i);return n}}function DH(e,t){var n;const r=[],i={color:0,var:0,number:0};for(let s=0;s<t.values.length;s++){const o=t.types[s],a=e.indexes[o][i[o]],l=(n=e.values[a])!==null&&n!==void 0?n:0;r[s]=l,i[o]++}return r}const LH=(e,t)=>{const n=Dr.createTransformer(t),r=Zo(e),i=Zo(t);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?qy.has(e)&&!i.values.length||qy.has(t)&&!r.values.length?PH(e,t):pa(XP(DH(r,i),i.values),n):lu(e,t)};function ZP(e,t,n){return typeof e=="number"&&typeof t=="number"&&typeof n=="number"?Re(e,t,n):tx(e)(e,t)}const OH=5;function QP(e,t,n){const r=Math.max(t-OH,0);return CP(n-e(r),t-r)}const je={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},og=.001;function qH({duration:e=je.duration,bounce:t=je.bounce,velocity:n=je.velocity,mass:r=je.mass}){let i,s,o=1-t;o=tr(je.minDamping,je.maxDamping,o),e=tr(je.minDuration,je.maxDuration,Wn(e)),o<1?(i=u=>{const c=u*o,d=c*e,f=c-n,h=$y(u,o),g=Math.exp(-d);return og-f/h*g},s=u=>{const d=u*o*e,f=d*n+n,h=Math.pow(o,2)*Math.pow(u,2)*e,g=Math.exp(-d),p=$y(Math.pow(u,2),o);return(-i(u)+og>0?-1:1)*((f-h)*g)/p}):(i=u=>{const c=Math.exp(-u*e),d=(u-n)*e+1;return-og+c*d},s=u=>{const c=Math.exp(-u*e),d=(n-u)*(e*e);return c*d});const a=5/e,l=FH(i,s,a);if(e=Gn(e),isNaN(l))return{stiffness:je.stiffness,damping:je.damping,duration:e};{const u=Math.pow(l,2)*r;return{stiffness:u,damping:o*2*Math.sqrt(r*u),duration:e}}}const $H=12;function FH(e,t,n){let r=n;for(let i=1;i<$H;i++)r=r-e(r)/t(r);return r}function $y(e,t){return e*Math.sqrt(1-t*t)}const VH=["duration","bounce"],BH=["stiffness","damping","mass"];function zC(e,t){return t.some(n=>e[n]!==void 0)}function zH(e){let t={velocity:je.velocity,stiffness:je.stiffness,damping:je.damping,mass:je.mass,isResolvedFromDuration:!1,...e};if(!zC(e,BH)&&zC(e,VH))if(e.visualDuration){const n=e.visualDuration,r=2*Math.PI/(n*1.2),i=r*r,s=2*tr(.05,1,1-(e.bounce||0))*Math.sqrt(i);t={...t,mass:je.mass,stiffness:i,damping:s}}else{const n=qH(e);t={...t,...n,mass:je.mass},t.isResolvedFromDuration=!0}return t}function JP(e=je.visualDuration,t=je.bounce){const n=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:r,restDelta:i}=n;const s=n.keyframes[0],o=n.keyframes[n.keyframes.length-1],a={done:!1,value:s},{stiffness:l,damping:u,mass:c,duration:d,velocity:f,isResolvedFromDuration:h}=zH({...n,velocity:-Wn(n.velocity||0)}),g=f||0,p=u/(2*Math.sqrt(l*c)),x=o-s,m=Wn(Math.sqrt(l/c)),v=Math.abs(x)<5;r||(r=v?je.restSpeed.granular:je.restSpeed.default),i||(i=v?je.restDelta.granular:je.restDelta.default);let w;if(p<1){const _=$y(m,p);w=C=>{const k=Math.exp(-p*m*C);return o-k*((g+p*m*x)/_*Math.sin(_*C)+x*Math.cos(_*C))}}else if(p===1)w=_=>o-Math.exp(-m*_)*(x+(g+m*x)*_);else{const _=m*Math.sqrt(p*p-1);w=C=>{const k=Math.exp(-p*m*C),T=Math.min(_*C,300);return o-k*((g+p*m*x)*Math.sinh(T)+_*x*Math.cosh(T))/_}}const b={calculatedDuration:h&&d||null,next:_=>{const C=w(_);if(h)a.done=_>=d;else{let k=0;p<1&&(k=_===0?Gn(g):QP(w,_,C));const T=Math.abs(k)<=r,M=Math.abs(o-C)<=i;a.done=T&&M}return a.value=a.done?o:C,a},toString:()=>{const _=Math.min(yP(b),Ry),C=vP(k=>b.next(_*k).value,_,30);return _+"ms "+C}};return b}function UC({keyframes:e,velocity:t=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:o,min:a,max:l,restDelta:u=.5,restSpeed:c}){const d=e[0],f={done:!1,value:d},h=T=>a!==void 0&&T<a||l!==void 0&&T>l,g=T=>a===void 0?l:l===void 0||Math.abs(a-T)<Math.abs(l-T)?a:l;let p=n*t;const x=d+p,m=o===void 0?x:o(x);m!==x&&(p=m-d);const v=T=>-p*Math.exp(-T/r),w=T=>m+v(T),b=T=>{const M=v(T),R=w(T);f.done=Math.abs(M)<=u,f.value=f.done?m:R};let _,C;const k=T=>{h(f.value)&&(_=T,C=JP({keyframes:[f.value,g(f.value)],velocity:QP(w,T,f.value),damping:i,stiffness:s,restDelta:u,restSpeed:c}))};return k(0),{calculatedDuration:null,next:T=>{let M=!1;return!C&&_===void 0&&(M=!0,b(T),k(T)),_!==void 0&&T>=_?C.next(T-_):(!M&&b(T),f)}}}const UH=ha(.42,0,1,1),HH=ha(0,0,.58,1),e2=ha(.42,0,.58,1),GH=e=>Array.isArray(e)&&typeof e[0]!="number",WH={linear:Dt,easeIn:UH,easeInOut:e2,easeOut:HH,circIn:X0,circInOut:jP,circOut:IP,backIn:Y0,backInOut:RP,backOut:AP,anticipate:PP},HC=e=>{if(U0(e)){ZR(e.length===4);const[t,n,r,i]=e;return ha(t,n,r,i)}else if(typeof e=="string")return WH[e];return e};function KH(e,t,n){const r=[],i=n||ZP,s=e.length-1;for(let o=0;o<s;o++){let a=i(e[o],e[o+1]);if(t){const l=Array.isArray(t)?t[o]||Dt:t;a=pa(l,a)}r.push(a)}return r}function YH(e,t,{clamp:n=!0,ease:r,mixer:i}={}){const s=e.length;if(ZR(s===t.length),s===1)return()=>t[0];if(s===2&&t[0]===t[1])return()=>t[1];const o=e[0]===e[1];e[0]>e[s-1]&&(e=[...e].reverse(),t=[...t].reverse());const a=KH(t,r,i),l=a.length,u=c=>{if(o&&c<e[0])return t[0];let d=0;if(l>1)for(;d<e.length-2&&!(c<e[d+1]);d++);const f=gs(e[d],e[d+1],c);return a[d](f)};return n?c=>u(tr(e[0],e[s-1],c)):u}function XH(e,t){const n=e[e.length-1];for(let r=1;r<=t;r++){const i=gs(0,t,r);e.push(Re(n,1,i))}}function ZH(e){const t=[0];return XH(t,e.length-1),t}function QH(e,t){return e.map(n=>n*t)}function JH(e,t){return e.map(()=>t||e2).splice(0,e.length-1)}function uu({duration:e=300,keyframes:t,times:n,ease:r="easeInOut"}){const i=GH(r)?r.map(HC):HC(r),s={done:!1,value:t[0]},o=QH(n&&n.length===t.length?n:ZH(t),e),a=YH(o,t,{ease:Array.isArray(i)?i:JH(t,i)});return{calculatedDuration:e,next:l=>(s.value=a(l),s.done=l>=e,s)}}const eG=e=>{const t=({timestamp:n})=>e(n);return{start:()=>Te.update(t,!0),stop:()=>jr(t),now:()=>rt.isProcessing?rt.timestamp:Rn.now()}},tG={decay:UC,inertia:UC,tween:uu,keyframes:uu,spring:JP},nG=e=>e/100;class nx extends YP{constructor(t){super(t),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:l}=this.options;l&&l()};const{name:n,motionValue:r,element:i,keyframes:s}=this.options,o=(i==null?void 0:i.KeyframeResolver)||ex,a=(l,u)=>this.onKeyframesResolved(l,u);this.resolver=new o(s,a,n,r,i),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(t){const{type:n="keyframes",repeat:r=0,repeatDelay:i=0,repeatType:s,velocity:o=0}=this.options,a=z0(n)?n:tG[n]||uu;let l,u;a!==uu&&typeof t[0]!="number"&&(l=pa(nG,ZP(t[0],t[1])),t=[0,100]);const c=a({...this.options,keyframes:t});s==="mirror"&&(u=a({...this.options,keyframes:[...t].reverse(),velocity:-o})),c.calculatedDuration===null&&(c.calculatedDuration=yP(c));const{calculatedDuration:d}=c,f=d+i,h=f*(r+1)-i;return{generator:c,mirroredGenerator:u,mapPercentToKeyframes:l,calculatedDuration:d,resolvedDuration:f,totalDuration:h}}onPostResolved(){const{autoplay:t=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!t?this.pause():this.state=this.pendingPlayState}tick(t,n=!1){const{resolved:r}=this;if(!r){const{keyframes:T}=this.options;return{done:!0,value:T[T.length-1]}}const{finalKeyframe:i,generator:s,mirroredGenerator:o,mapPercentToKeyframes:a,keyframes:l,calculatedDuration:u,totalDuration:c,resolvedDuration:d}=r;if(this.startTime===null)return s.next(0);const{delay:f,repeat:h,repeatType:g,repeatDelay:p,onUpdate:x}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-c/this.speed,this.startTime)),n?this.currentTime=t:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(t-this.startTime)*this.speed;const m=this.currentTime-f*(this.speed>=0?1:-1),v=this.speed>=0?m<0:m>c;this.currentTime=Math.max(m,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=c);let w=this.currentTime,b=s;if(h){const T=Math.min(this.currentTime,c)/d;let M=Math.floor(T),R=T%1;!R&&T>=1&&(R=1),R===1&&M--,M=Math.min(M,h+1),!!(M%2)&&(g==="reverse"?(R=1-R,p&&(R-=p/d)):g==="mirror"&&(b=o)),w=tr(0,1,R)*d}const _=v?{done:!1,value:l[0]}:b.next(w);a&&(_.value=a(_.value));let{done:C}=_;!v&&u!==null&&(C=this.speed>=0?this.currentTime>=c:this.currentTime<=0);const k=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&C);return k&&i!==void 0&&(_.value=lc(l,this.options,i)),x&&x(_.value),k&&this.finish(),_}get duration(){const{resolved:t}=this;return t?Wn(t.calculatedDuration):0}get time(){return Wn(this.currentTime)}set time(t){t=Gn(t),this.currentTime=t,this.holdTime!==null||this.speed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.speed)}get speed(){return this.playbackSpeed}set speed(t){const n=this.playbackSpeed!==t;this.playbackSpeed=t,n&&(this.time=Wn(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:t=eG,onPlay:n,startTime:r}=this.options;this.driver||(this.driver=t(s=>this.tick(s))),n&&n();const i=this.driver.now();this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=i):this.startTime=r??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var t;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(t=this.currentTime)!==null&&t!==void 0?t:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:t}=this.options;t&&t()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}}const rG=new Set(["opacity","clipPath","filter","transform"]);function iG(e,t,n,{delay:r=0,duration:i=300,repeat:s=0,repeatType:o="loop",ease:a="easeInOut",times:l}={}){const u={[t]:n};l&&(u.offset=l);const c=wP(a,i);return Array.isArray(c)&&(u.easing=c),e.animate(u,{delay:r,duration:i,easing:Array.isArray(c)?"linear":c,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"})}const sG=N0(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),cu=10,oG=2e4;function aG(e){return z0(e.type)||e.type==="spring"||!xP(e.ease)}function lG(e,t){const n=new nx({...t,keyframes:e,repeat:0,delay:0,isGenerator:!0});let r={done:!1,value:e[0]};const i=[];let s=0;for(;!r.done&&s<oG;)r=n.sample(s),i.push(r.value),s+=cu;return{times:void 0,keyframes:i,duration:s-cu,ease:"linear"}}const t2={anticipate:PP,backInOut:RP,circInOut:jP};function uG(e){return e in t2}class GC extends YP{constructor(t){super(t);const{name:n,motionValue:r,element:i,keyframes:s}=this.options;this.resolver=new KP(s,(o,a)=>this.onKeyframesResolved(o,a),n,r,i),this.resolver.scheduleResolve()}initPlayback(t,n){let{duration:r=300,times:i,ease:s,type:o,motionValue:a,name:l,startTime:u}=this.options;if(!a.owner||!a.owner.current)return!1;if(typeof s=="string"&&au()&&uG(s)&&(s=t2[s]),aG(this.options)){const{onComplete:d,onUpdate:f,motionValue:h,element:g,...p}=this.options,x=lG(t,p);t=x.keyframes,t.length===1&&(t[1]=t[0]),r=x.duration,i=x.times,s=x.ease,o="keyframes"}const c=iG(a.owner.current,l,t,{...this.options,duration:r,times:i,ease:s});return c.startTime=u??this.calcStartTime(),this.pendingTimeline?(AC(c,this.pendingTimeline),this.pendingTimeline=void 0):c.onfinish=()=>{const{onComplete:d}=this.options;a.set(lc(t,this.options,n)),d&&d(),this.cancel(),this.resolveFinishedPromise()},{animation:c,duration:r,times:i,type:o,ease:s,keyframes:t}}get duration(){const{resolved:t}=this;if(!t)return 0;const{duration:n}=t;return Wn(n)}get time(){const{resolved:t}=this;if(!t)return 0;const{animation:n}=t;return Wn(n.currentTime||0)}set time(t){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.currentTime=Gn(t)}get speed(){const{resolved:t}=this;if(!t)return 1;const{animation:n}=t;return n.playbackRate}set speed(t){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.playbackRate=t}get state(){const{resolved:t}=this;if(!t)return"idle";const{animation:n}=t;return n.playState}get startTime(){const{resolved:t}=this;if(!t)return null;const{animation:n}=t;return n.startTime}attachTimeline(t){if(!this._resolved)this.pendingTimeline=t;else{const{resolved:n}=this;if(!n)return Dt;const{animation:r}=n;AC(r,t)}return Dt}play(){if(this.isStopped)return;const{resolved:t}=this;if(!t)return;const{animation:n}=t;n.playState==="finished"&&this.updateFinishedPromise(),n.play()}pause(){const{resolved:t}=this;if(!t)return;const{animation:n}=t;n.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:t}=this;if(!t)return;const{animation:n,keyframes:r,duration:i,type:s,ease:o,times:a}=t;if(n.playState==="idle"||n.playState==="finished")return;if(this.time){const{motionValue:u,onUpdate:c,onComplete:d,element:f,...h}=this.options,g=new nx({...h,keyframes:r,duration:i,type:s,ease:o,times:a,isGenerator:!0}),p=Gn(this.time);u.setWithVelocity(g.sample(p-cu).value,g.sample(p).value,cu)}const{onStop:l}=this.options;l&&l(),this.cancel()}complete(){const{resolved:t}=this;t&&t.animation.finish()}cancel(){const{resolved:t}=this;t&&t.animation.cancel()}static supports(t){const{motionValue:n,name:r,repeatDelay:i,repeatType:s,damping:o,type:a}=t;if(!n||!n.owner||!(n.owner.current instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:u}=n.owner.getProps();return sG()&&r&&rG.has(r)&&!l&&!u&&!i&&s!=="mirror"&&o!==0&&a!=="inertia"}}const cG={type:"spring",stiffness:500,damping:25,restSpeed:10},dG=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),fG={type:"keyframes",duration:.8},hG={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},pG=(e,{keyframes:t})=>t.length>2?fG:_i.has(e)?e.startsWith("scale")?dG(t[1]):cG:hG;function mG({when:e,delay:t,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:s,repeatType:o,repeatDelay:a,from:l,elapsed:u,...c}){return!!Object.keys(c).length}const rx=(e,t,n,r={},i,s)=>o=>{const a=B0(r,e)||{},l=a.delay||r.delay||0;let{elapsed:u=0}=r;u=u-Gn(l);let c={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:t.getVelocity(),...a,delay:-u,onUpdate:f=>{t.set(f),a.onUpdate&&a.onUpdate(f)},onComplete:()=>{o(),a.onComplete&&a.onComplete()},name:e,motionValue:t,element:s?void 0:i};mG(a)||(c={...c,...pG(e,c)}),c.duration&&(c.duration=Gn(c.duration)),c.repeatDelay&&(c.repeatDelay=Gn(c.repeatDelay)),c.from!==void 0&&(c.keyframes[0]=c.from);let d=!1;if((c.type===!1||c.duration===0&&!c.repeatDelay)&&(c.duration=0,c.delay===0&&(d=!0)),d&&!s&&t.get()!==void 0){const f=lc(c.keyframes,a);if(f!==void 0)return Te.update(()=>{c.onUpdate(f),c.onComplete()}),new jU([])}return!s&&GC.supports(c)?new GC(c):new nx(c)};function gG({protectedKeys:e,needsAnimating:t},n){const r=e.hasOwnProperty(n)&&t[n]!==!0;return t[n]=!1,r}function n2(e,t,{delay:n=0,transitionOverride:r,type:i}={}){var s;let{transition:o=e.getDefaultTransition(),transitionEnd:a,...l}=t;r&&(o=r);const u=[],c=i&&e.animationState&&e.animationState.getState()[i];for(const d in l){const f=e.getValue(d,(s=e.latestValues[d])!==null&&s!==void 0?s:null),h=l[d];if(h===void 0||c&&gG(c,d))continue;const g={delay:n,...B0(o||{},d)};let p=!1;if(window.MotionHandoffAnimation){const m=kP(e);if(m){const v=window.MotionHandoffAnimation(m,d,Te);v!==null&&(g.startTime=v,p=!0)}}Iy(e,d),f.start(rx(d,f,h,e.shouldReduceMotion&&EP.has(d)?{type:!1}:g,e,p));const x=f.animation;x&&u.push(x)}return a&&Promise.all(u).then(()=>{Te.update(()=>{a&&KU(e,a)})}),u}function Fy(e,t,n={}){var r;const i=ac(e,t,n.type==="exit"?(r=e.presenceContext)===null||r===void 0?void 0:r.custom:void 0);let{transition:s=e.getDefaultTransition()||{}}=i||{};n.transitionOverride&&(s=n.transitionOverride);const o=i?()=>Promise.all(n2(e,i,n)):()=>Promise.resolve(),a=e.variantChildren&&e.variantChildren.size?(u=0)=>{const{delayChildren:c=0,staggerChildren:d,staggerDirection:f}=s;return yG(e,t,c+u,d,f,n)}:()=>Promise.resolve(),{when:l}=s;if(l){const[u,c]=l==="beforeChildren"?[o,a]:[a,o];return u().then(()=>c())}else return Promise.all([o(),a(n.delay)])}function yG(e,t,n=0,r=0,i=1,s){const o=[],a=(e.variantChildren.size-1)*r,l=i===1?(u=0)=>u*r:(u=0)=>a-u*r;return Array.from(e.variantChildren).sort(vG).forEach((u,c)=>{u.notify("AnimationStart",t),o.push(Fy(u,t,{...s,delay:n+l(c)}).then(()=>u.notify("AnimationComplete",t)))}),Promise.all(o)}function vG(e,t){return e.sortNodePosition(t)}function xG(e,t,n={}){e.notify("AnimationStart",t);let r;if(Array.isArray(t)){const i=t.map(s=>Fy(e,s,n));r=Promise.all(i)}else if(typeof t=="string")r=Fy(e,t,n);else{const i=typeof t=="function"?ac(e,t,n.custom):t;r=Promise.all(n2(e,i,n))}return r.then(()=>{e.notify("AnimationComplete",t)})}const wG=A0.length;function r2(e){if(!e)return;if(!e.isControllingVariants){const n=e.parent?r2(e.parent)||{}:{};return e.props.initial!==void 0&&(n.initial=e.props.initial),n}const t={};for(let n=0;n<wG;n++){const r=A0[n],i=e.props[r];(Ko(i)||i===!1)&&(t[r]=i)}return t}const bG=[...M0].reverse(),SG=M0.length;function _G(e){return t=>Promise.all(t.map(({animation:n,options:r})=>xG(e,n,r)))}function EG(e){let t=_G(e),n=WC(),r=!0;const i=l=>(u,c)=>{var d;const f=ac(e,c,l==="exit"?(d=e.presenceContext)===null||d===void 0?void 0:d.custom:void 0);if(f){const{transition:h,transitionEnd:g,...p}=f;u={...u,...p,...g}}return u};function s(l){t=l(e)}function o(l){const{props:u}=e,c=r2(e.parent)||{},d=[],f=new Set;let h={},g=1/0;for(let x=0;x<SG;x++){const m=bG[x],v=n[m],w=u[m]!==void 0?u[m]:c[m],b=Ko(w),_=m===l?v.isActive:null;_===!1&&(g=x);let C=w===c[m]&&w!==u[m]&&b;if(C&&r&&e.manuallyAnimateOnMount&&(C=!1),v.protectedKeys={...h},!v.isActive&&_===null||!w&&!v.prevProp||sc(w)||typeof w=="boolean")continue;const k=CG(v.prevProp,w);let T=k||m===l&&v.isActive&&!C&&b||x>g&&b,M=!1;const R=Array.isArray(w)?w:[w];let I=R.reduce(i(m),{});_===!1&&(I={});const{prevResolvedValues:B={}}=v,F={...B,...I},E=L=>{T=!0,f.has(L)&&(M=!0,f.delete(L)),v.needsAnimating[L]=!0;const A=e.getValue(L);A&&(A.liveStyle=!1)};for(const L in F){const A=I[L],N=B[L];if(h.hasOwnProperty(L))continue;let j=!1;Ay(A)&&Ay(N)?j=!gP(A,N):j=A!==N,j?A!=null?E(L):f.add(L):A!==void 0&&f.has(L)?E(L):v.protectedKeys[L]=!0}v.prevProp=w,v.prevResolvedValues=I,v.isActive&&(h={...h,...I}),r&&e.blockInitialAnimation&&(T=!1),T&&(!(C&&k)||M)&&d.push(...R.map(L=>({animation:L,options:{type:m}})))}if(f.size){const x={};f.forEach(m=>{const v=e.getBaseTarget(m),w=e.getValue(m);w&&(w.liveStyle=!0),x[m]=v??null}),d.push({animation:x})}let p=!!d.length;return r&&(u.initial===!1||u.initial===u.animate)&&!e.manuallyAnimateOnMount&&(p=!1),r=!1,p?t(d):Promise.resolve()}function a(l,u){var c;if(n[l].isActive===u)return Promise.resolve();(c=e.variantChildren)===null||c===void 0||c.forEach(f=>{var h;return(h=f.animationState)===null||h===void 0?void 0:h.setActive(l,u)}),n[l].isActive=u;const d=o(l);for(const f in n)n[f].protectedKeys={};return d}return{animateChanges:o,setActive:a,setAnimateFunction:s,getState:()=>n,reset:()=>{n=WC(),r=!0}}}function CG(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!gP(t,e):!1}function Ur(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function WC(){return{animate:Ur(!0),whileInView:Ur(),whileHover:Ur(),whileTap:Ur(),whileDrag:Ur(),whileFocus:Ur(),exit:Ur()}}class Fr{constructor(t){this.isMounted=!1,this.node=t}update(){}}class kG extends Fr{constructor(t){super(t),t.animationState||(t.animationState=EG(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();sc(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:n}=this.node.prevProps||{};t!==n&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)===null||t===void 0||t.call(this)}}let TG=0;class NG extends Fr{constructor(){super(...arguments),this.id=TG++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===r)return;const i=this.node.animationState.setActive("exit",!t);n&&!t&&i.then(()=>n(this.id))}mount(){const{register:t}=this.node.presenceContext||{};t&&(this.unmount=t(this.id))}unmount(){}}const MG={animation:{Feature:kG},exit:{Feature:NG}};function Qo(e,t,n,r={passive:!0}){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n)}function ma(e){return{point:{x:e.pageX,y:e.pageY}}}const AG=e=>t=>H0(t)&&e(t,ma(t));function wo(e,t,n,r){return Qo(e,t,AG(n),r)}const KC=(e,t)=>Math.abs(e-t);function RG(e,t){const n=KC(e.x,t.x),r=KC(e.y,t.y);return Math.sqrt(n**2+r**2)}class i2{constructor(t,n,{transformPagePoint:r,contextWindow:i,dragSnapToOrigin:s=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const d=lg(this.lastMoveEventInfo,this.history),f=this.startEvent!==null,h=RG(d.offset,{x:0,y:0})>=3;if(!f&&!h)return;const{point:g}=d,{timestamp:p}=rt;this.history.push({...g,timestamp:p});const{onStart:x,onMove:m}=this.handlers;f||(x&&x(this.lastMoveEvent,d),this.startEvent=this.lastMoveEvent),m&&m(this.lastMoveEvent,d)},this.handlePointerMove=(d,f)=>{this.lastMoveEvent=d,this.lastMoveEventInfo=ag(f,this.transformPagePoint),Te.update(this.updatePoint,!0)},this.handlePointerUp=(d,f)=>{this.end();const{onEnd:h,onSessionEnd:g,resumeAnimation:p}=this.handlers;if(this.dragSnapToOrigin&&p&&p(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const x=lg(d.type==="pointercancel"?this.lastMoveEventInfo:ag(f,this.transformPagePoint),this.history);this.startEvent&&h&&h(d,x),g&&g(d,x)},!H0(t))return;this.dragSnapToOrigin=s,this.handlers=n,this.transformPagePoint=r,this.contextWindow=i||window;const o=ma(t),a=ag(o,this.transformPagePoint),{point:l}=a,{timestamp:u}=rt;this.history=[{...l,timestamp:u}];const{onSessionStart:c}=n;c&&c(t,lg(a,this.history)),this.removeListeners=pa(wo(this.contextWindow,"pointermove",this.handlePointerMove),wo(this.contextWindow,"pointerup",this.handlePointerUp),wo(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),jr(this.updatePoint)}}function ag(e,t){return t?{point:t(e.point)}:e}function YC(e,t){return{x:e.x-t.x,y:e.y-t.y}}function lg({point:e},t){return{point:e,delta:YC(e,s2(t)),offset:YC(e,PG(t)),velocity:IG(t,.1)}}function PG(e){return e[0]}function s2(e){return e[e.length-1]}function IG(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,r=null;const i=s2(e);for(;n>=0&&(r=e[n],!(i.timestamp-r.timestamp>Gn(t)));)n--;if(!r)return{x:0,y:0};const s=Wn(i.timestamp-r.timestamp);if(s===0)return{x:0,y:0};const o={x:(i.x-r.x)/s,y:(i.y-r.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}const o2=1e-4,jG=1-o2,DG=1+o2,a2=.01,LG=0-a2,OG=0+a2;function qt(e){return e.max-e.min}function qG(e,t,n){return Math.abs(e-t)<=n}function XC(e,t,n,r=.5){e.origin=r,e.originPoint=Re(t.min,t.max,e.origin),e.scale=qt(n)/qt(t),e.translate=Re(n.min,n.max,e.origin)-e.originPoint,(e.scale>=jG&&e.scale<=DG||isNaN(e.scale))&&(e.scale=1),(e.translate>=LG&&e.translate<=OG||isNaN(e.translate))&&(e.translate=0)}function bo(e,t,n,r){XC(e.x,t.x,n.x,r?r.originX:void 0),XC(e.y,t.y,n.y,r?r.originY:void 0)}function ZC(e,t,n){e.min=n.min+t.min,e.max=e.min+qt(t)}function $G(e,t,n){ZC(e.x,t.x,n.x),ZC(e.y,t.y,n.y)}function QC(e,t,n){e.min=t.min-n.min,e.max=e.min+qt(t)}function So(e,t,n){QC(e.x,t.x,n.x),QC(e.y,t.y,n.y)}function FG(e,{min:t,max:n},r){return t!==void 0&&e<t?e=r?Re(t,e,r.min):Math.max(e,t):n!==void 0&&e>n&&(e=r?Re(n,e,r.max):Math.min(e,n)),e}function JC(e,t,n){return{min:t!==void 0?e.min+t:void 0,max:n!==void 0?e.max+n-(e.max-e.min):void 0}}function VG(e,{top:t,left:n,bottom:r,right:i}){return{x:JC(e.x,n,i),y:JC(e.y,t,r)}}function ek(e,t){let n=t.min-e.min,r=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,r]=[r,n]),{min:n,max:r}}function BG(e,t){return{x:ek(e.x,t.x),y:ek(e.y,t.y)}}function zG(e,t){let n=.5;const r=qt(e),i=qt(t);return i>r?n=gs(t.min,t.max-r,e.min):r>i&&(n=gs(e.min,e.max-i,t.min)),tr(0,1,n)}function UG(e,t){const n={};return t.min!==void 0&&(n.min=t.min-e.min),t.max!==void 0&&(n.max=t.max-e.min),n}const Vy=.35;function HG(e=Vy){return e===!1?e=0:e===!0&&(e=Vy),{x:tk(e,"left","right"),y:tk(e,"top","bottom")}}function tk(e,t,n){return{min:nk(e,t),max:nk(e,n)}}function nk(e,t){return typeof e=="number"?e:e[t]||0}const rk=()=>({translate:0,scale:1,origin:0,originPoint:0}),Wi=()=>({x:rk(),y:rk()}),ik=()=>({min:0,max:0}),Fe=()=>({x:ik(),y:ik()});function Ut(e){return[e("x"),e("y")]}function l2({top:e,left:t,right:n,bottom:r}){return{x:{min:t,max:n},y:{min:e,max:r}}}function GG({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function WG(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),r=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function ug(e){return e===void 0||e===1}function By({scale:e,scaleX:t,scaleY:n}){return!ug(e)||!ug(t)||!ug(n)}function Kr(e){return By(e)||u2(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function u2(e){return sk(e.x)||sk(e.y)}function sk(e){return e&&e!=="0%"}function du(e,t,n){const r=e-n,i=t*r;return n+i}function ok(e,t,n,r,i){return i!==void 0&&(e=du(e,i,r)),du(e,n,r)+t}function zy(e,t=0,n=1,r,i){e.min=ok(e.min,t,n,r,i),e.max=ok(e.max,t,n,r,i)}function c2(e,{x:t,y:n}){zy(e.x,t.translate,t.scale,t.originPoint),zy(e.y,n.translate,n.scale,n.originPoint)}const ak=.999999999999,lk=1.0000000000001;function KG(e,t,n,r=!1){const i=n.length;if(!i)return;t.x=t.y=1;let s,o;for(let a=0;a<i;a++){s=n[a],o=s.projectionDelta;const{visualElement:l}=s.options;l&&l.props.style&&l.props.style.display==="contents"||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&Yi(e,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(t.x*=o.x.scale,t.y*=o.y.scale,c2(e,o)),r&&Kr(s.latestValues)&&Yi(e,s.latestValues))}t.x<lk&&t.x>ak&&(t.x=1),t.y<lk&&t.y>ak&&(t.y=1)}function Ki(e,t){e.min=e.min+t,e.max=e.max+t}function uk(e,t,n,r,i=.5){const s=Re(e.min,e.max,i);zy(e,t,n,s,r)}function Yi(e,t){uk(e.x,t.x,t.scaleX,t.scale,t.originX),uk(e.y,t.y,t.scaleY,t.scale,t.originY)}function d2(e,t){return l2(WG(e.getBoundingClientRect(),t))}function YG(e,t,n){const r=d2(e,n),{scroll:i}=t;return i&&(Ki(r.x,i.offset.x),Ki(r.y,i.offset.y)),r}const f2=({current:e})=>e?e.ownerDocument.defaultView:null,XG=new WeakMap;class ZG{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Fe(),this.visualElement=t}start(t,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const i=c=>{const{dragSnapToOrigin:d}=this.getProps();d?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(ma(c).point)},s=(c,d)=>{const{drag:f,dragPropagation:h,onDragStart:g}=this.getProps();if(f&&!h&&(this.openDragLock&&this.openDragLock(),this.openDragLock=zU(f),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Ut(x=>{let m=this.getAxisMotionValue(x).get()||0;if(An.test(m)){const{projection:v}=this.visualElement;if(v&&v.layout){const w=v.layout.layoutBox[x];w&&(m=qt(w)*(parseFloat(m)/100))}}this.originPoint[x]=m}),g&&Te.postRender(()=>g(c,d)),Iy(this.visualElement,"transform");const{animationState:p}=this.visualElement;p&&p.setActive("whileDrag",!0)},o=(c,d)=>{const{dragPropagation:f,dragDirectionLock:h,onDirectionLock:g,onDrag:p}=this.getProps();if(!f&&!this.openDragLock)return;const{offset:x}=d;if(h&&this.currentDirection===null){this.currentDirection=QG(x),this.currentDirection!==null&&g&&g(this.currentDirection);return}this.updateAxis("x",d.point,x),this.updateAxis("y",d.point,x),this.visualElement.render(),p&&p(c,d)},a=(c,d)=>this.stop(c,d),l=()=>Ut(c=>{var d;return this.getAnimationState(c)==="paused"&&((d=this.getAxisMotionValue(c).animation)===null||d===void 0?void 0:d.play())}),{dragSnapToOrigin:u}=this.getProps();this.panSession=new i2(t,{onSessionStart:i,onStart:s,onMove:o,onSessionEnd:a,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,contextWindow:f2(this.visualElement)})}stop(t,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:i}=n;this.startAnimation(i);const{onDragEnd:s}=this.getProps();s&&Te.postRender(()=>s(t,n))}cancel(){this.isDragging=!1;const{projection:t,animationState:n}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(t,n,r){const{drag:i}=this.getProps();if(!r||!el(t,i,this.currentDirection))return;const s=this.getAxisMotionValue(t);let o=this.originPoint[t]+r[t];this.constraints&&this.constraints[t]&&(o=FG(o,this.constraints[t],this.elastic[t])),s.set(o)}resolveConstraints(){var t;const{dragConstraints:n,dragElastic:r}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(t=this.visualElement.projection)===null||t===void 0?void 0:t.layout,s=this.constraints;n&&Hi(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&i?this.constraints=VG(i.layoutBox,n):this.constraints=!1,this.elastic=HG(r),s!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&Ut(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=UG(i.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:n}=this.getProps();if(!t||!Hi(t))return!1;const r=t.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=YG(r,i.root,this.visualElement.getTransformPagePoint());let o=BG(i.layout.layoutBox,s);if(n){const a=n(GG(o));this.hasMutatedConstraints=!!a,a&&(o=l2(a))}return o}startAnimation(t){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},u=Ut(c=>{if(!el(c,n,this.currentDirection))return;let d=l&&l[c]||{};o&&(d={min:0,max:0});const f=i?200:1e6,h=i?40:1e7,g={type:"inertia",velocity:r?t[c]:0,bounceStiffness:f,bounceDamping:h,timeConstant:750,restDelta:1,restSpeed:10,...s,...d};return this.startAxisValueAnimation(c,g)});return Promise.all(u).then(a)}startAxisValueAnimation(t,n){const r=this.getAxisMotionValue(t);return Iy(this.visualElement,t),r.start(rx(t,r,0,n,this.visualElement,!1))}stopAnimation(){Ut(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){Ut(t=>{var n;return(n=this.getAxisMotionValue(t).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(t){var n;return(n=this.getAxisMotionValue(t).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(t){const n=`_drag${t.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(t,(r.initial?r.initial[t]:void 0)||0)}snapToCursor(t){Ut(n=>{const{drag:r}=this.getProps();if(!el(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(n);if(i&&i.layout){const{min:o,max:a}=i.layout.layoutBox[n];s.set(t[n]-Re(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!Hi(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};Ut(o=>{const a=this.getAxisMotionValue(o);if(a&&this.constraints!==!1){const l=a.get();i[o]=zG({min:l,max:l},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Ut(o=>{if(!el(o,t,null))return;const a=this.getAxisMotionValue(o),{min:l,max:u}=this.constraints[o];a.set(Re(l,u,i[o]))})}addListeners(){if(!this.visualElement.current)return;XG.set(this.visualElement,this);const t=this.visualElement.current,n=wo(t,"pointerdown",l=>{const{drag:u,dragListener:c=!0}=this.getProps();u&&c&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();Hi(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,s=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),Te.read(r);const o=Qo(window,"resize",()=>this.scalePositionWithinConstraints()),a=i.addEventListener("didUpdate",({delta:l,hasLayoutChanged:u})=>{this.isDragging&&u&&(Ut(c=>{const d=this.getAxisMotionValue(c);d&&(this.originPoint[c]+=l[c].translate,d.set(d.get()+l[c].translate))}),this.visualElement.render())});return()=>{o(),n(),s(),a&&a()}}getProps(){const t=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:o=Vy,dragMomentum:a=!0}=t;return{...t,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:s,dragElastic:o,dragMomentum:a}}}function el(e,t,n){return(t===!0||t===e)&&(n===null||n===e)}function QG(e,t=10){let n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}class JG extends Fr{constructor(t){super(t),this.removeGroupControls=Dt,this.removeListeners=Dt,this.controls=new ZG(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Dt}unmount(){this.removeGroupControls(),this.removeListeners()}}const ck=e=>(t,n)=>{e&&Te.postRender(()=>e(t,n))};class e9 extends Fr{constructor(){super(...arguments),this.removePointerDownListener=Dt}onPointerDown(t){this.session=new i2(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:f2(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:ck(t),onStart:ck(n),onMove:r,onEnd:(s,o)=>{delete this.session,i&&Te.postRender(()=>i(s,o))}}}mount(){this.removePointerDownListener=wo(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const wl={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function dk(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const Gs={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(ie.test(e))e=parseFloat(e);else return e;const n=dk(e,t.target.x),r=dk(e,t.target.y);return`${n}% ${r}%`}},t9={correct:(e,{treeScale:t,projectionDelta:n})=>{const r=e,i=Dr.parse(e);if(i.length>5)return r;const s=Dr.createTransformer(e),o=typeof i[0]!="number"?1:0,a=n.x.scale*t.x,l=n.y.scale*t.y;i[0+o]/=a,i[1+o]/=l;const u=Re(a,l,.5);return typeof i[2+o]=="number"&&(i[2+o]/=u),typeof i[3+o]=="number"&&(i[3+o]/=u),s(i)}};class n9 extends S.Component{componentDidMount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:s}=t;SU(r9),s&&(n.group&&n.group.add(s),r&&r.register&&i&&r.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),wl.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:n,visualElement:r,drag:i,isPresent:s}=this.props,o=r.projection;return o&&(o.isPresent=s,i||t.layoutDependency!==n||n===void 0?o.willUpdate():this.safeToRemove(),t.isPresent!==s&&(s?o.promote():o.relegate()||Te.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),P0.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=t;i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function h2(e){const[t,n]=O8(),r=S.useContext(YR);return y.jsx(n9,{...e,layoutGroup:r,switchLayoutGroup:S.useContext(rP),isPresent:t,safeToRemove:n})}const r9={borderRadius:{...Gs,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Gs,borderTopRightRadius:Gs,borderBottomLeftRadius:Gs,borderBottomRightRadius:Gs,boxShadow:t9};function i9(e,t,n){const r=pt(e)?e:Xo(e);return r.start(rx("",r,t,n)),r.animation}function s9(e){return e instanceof SVGElement&&e.tagName!=="svg"}const o9=(e,t)=>e.depth-t.depth;class a9{constructor(){this.children=[],this.isDirty=!1}add(t){G0(this.children,t),this.isDirty=!0}remove(t){W0(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(o9),this.isDirty=!1,this.children.forEach(t)}}function l9(e,t){const n=Rn.now(),r=({timestamp:i})=>{const s=i-n;s>=t&&(jr(r),e(s-t))};return Te.read(r,!0),()=>jr(r)}const p2=["TopLeft","TopRight","BottomLeft","BottomRight"],u9=p2.length,fk=e=>typeof e=="string"?parseFloat(e):e,hk=e=>typeof e=="number"||ie.test(e);function c9(e,t,n,r,i,s){i?(e.opacity=Re(0,n.opacity!==void 0?n.opacity:1,d9(r)),e.opacityExit=Re(t.opacity!==void 0?t.opacity:1,0,f9(r))):s&&(e.opacity=Re(t.opacity!==void 0?t.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let o=0;o<u9;o++){const a=`border${p2[o]}Radius`;let l=pk(t,a),u=pk(n,a);if(l===void 0&&u===void 0)continue;l||(l=0),u||(u=0),l===0||u===0||hk(l)===hk(u)?(e[a]=Math.max(Re(fk(l),fk(u),r),0),(An.test(u)||An.test(l))&&(e[a]+="%")):e[a]=u}(t.rotate||n.rotate)&&(e.rotate=Re(t.rotate||0,n.rotate||0,r))}function pk(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const d9=m2(0,.5,IP),f9=m2(.5,.95,Dt);function m2(e,t,n){return r=>r<e?0:r>t?1:n(gs(e,t,r))}function mk(e,t){e.min=t.min,e.max=t.max}function zt(e,t){mk(e.x,t.x),mk(e.y,t.y)}function gk(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function yk(e,t,n,r,i){return e-=t,e=du(e,1/n,r),i!==void 0&&(e=du(e,1/i,r)),e}function h9(e,t=0,n=1,r=.5,i,s=e,o=e){if(An.test(t)&&(t=parseFloat(t),t=Re(o.min,o.max,t/100)-o.min),typeof t!="number")return;let a=Re(s.min,s.max,r);e===s&&(a-=t),e.min=yk(e.min,t,n,a,i),e.max=yk(e.max,t,n,a,i)}function vk(e,t,[n,r,i],s,o){h9(e,t[n],t[r],t[i],t.scale,s,o)}const p9=["x","scaleX","originX"],m9=["y","scaleY","originY"];function xk(e,t,n,r){vk(e.x,t,p9,n?n.x:void 0,r?r.x:void 0),vk(e.y,t,m9,n?n.y:void 0,r?r.y:void 0)}function wk(e){return e.translate===0&&e.scale===1}function g2(e){return wk(e.x)&&wk(e.y)}function bk(e,t){return e.min===t.min&&e.max===t.max}function g9(e,t){return bk(e.x,t.x)&&bk(e.y,t.y)}function Sk(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function y2(e,t){return Sk(e.x,t.x)&&Sk(e.y,t.y)}function _k(e){return qt(e.x)/qt(e.y)}function Ek(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class y9{constructor(){this.members=[]}add(t){G0(this.members,t),t.scheduleRender()}remove(t){if(W0(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(t){const n=this.members.findIndex(i=>t===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const s=this.members[i];if(s.isPresent!==!1){r=s;break}}return r?(this.promote(r),!0):!1}promote(t,n){const r=this.lead;if(t!==r&&(this.prevLead=r,this.lead=t,t.show(),r)){r.instance&&r.scheduleRender(),t.scheduleRender(),t.resumeFrom=r,n&&(t.resumeFrom.preserveOpacity=!0),r.snapshot&&(t.snapshot=r.snapshot,t.snapshot.latestValues=r.animationValues||r.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:i}=t.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:n,resumingFrom:r}=t;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function v9(e,t,n){let r="";const i=e.x.translate/t.x,s=e.y.translate/t.y,o=(n==null?void 0:n.z)||0;if((i||s||o)&&(r=`translate3d(${i}px, ${s}px, ${o}px) `),(t.x!==1||t.y!==1)&&(r+=`scale(${1/t.x}, ${1/t.y}) `),n){const{transformPerspective:u,rotate:c,rotateX:d,rotateY:f,skewX:h,skewY:g}=n;u&&(r=`perspective(${u}px) ${r}`),c&&(r+=`rotate(${c}deg) `),d&&(r+=`rotateX(${d}deg) `),f&&(r+=`rotateY(${f}deg) `),h&&(r+=`skewX(${h}deg) `),g&&(r+=`skewY(${g}deg) `)}const a=e.x.scale*t.x,l=e.y.scale*t.y;return(a!==1||l!==1)&&(r+=`scale(${a}, ${l})`),r||"none"}const Yr={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},lo=typeof window<"u"&&window.MotionDebug!==void 0,cg=["","X","Y","Z"],x9={visibility:"hidden"},Ck=1e3;let w9=0;function dg(e,t,n,r){const{latestValues:i}=t;i[e]&&(n[e]=i[e],t.setStaticValue(e,0),r&&(r[e]=0))}function v2(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const n=kP(t);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:s}=e.options;window.MotionCancelOptimisedAnimation(n,"transform",Te,!(i||s))}const{parent:r}=e;r&&!r.hasCheckedOptimisedAppear&&v2(r)}function x2({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(o={},a=t==null?void 0:t()){this.id=w9++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,lo&&(Yr.totalNodes=Yr.resolvedTargetDeltas=Yr.recalculatedProjection=0),this.nodes.forEach(_9),this.nodes.forEach(N9),this.nodes.forEach(M9),this.nodes.forEach(E9),lo&&window.MotionDebug.record(Yr)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new a9)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new K0),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=s9(o),this.instance=o;const{layoutId:l,layout:u,visualElement:c}=this.options;if(c&&!c.current&&c.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(u||l)&&(this.isLayoutDirty=!0),e){let d;const f=()=>this.root.updateBlockedByResize=!1;e(o,()=>{this.root.updateBlockedByResize=!0,d&&d(),d=l9(f,250),wl.hasAnimatedSinceResize&&(wl.hasAnimatedSinceResize=!1,this.nodes.forEach(Tk))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&c&&(l||u)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:f,hasRelativeTargetChanged:h,layout:g})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const p=this.options.transition||c.getDefaultTransition()||j9,{onLayoutAnimationStart:x,onLayoutAnimationComplete:m}=c.getProps(),v=!this.targetLayout||!y2(this.targetLayout,g)||h,w=!f&&h;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||w||f&&(v||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(d,w);const b={...B0(p,"layout"),onPlay:x,onComplete:m};(c.shouldReduceMotion||this.options.layoutRoot)&&(b.delay=0,b.type=!1),this.startAnimation(b)}else f||Tk(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=g})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,jr(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(A9),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&v2(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let c=0;c<this.path.length;c++){const d=this.path[c];d.shouldResetTransform=!0,d.updateScroll("snapshot"),d.options.layoutRoot&&d.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(kk);return}this.isUpdating||this.nodes.forEach(k9),this.isUpdating=!1,this.nodes.forEach(T9),this.nodes.forEach(b9),this.nodes.forEach(S9),this.clearAllSnapshots();const a=Rn.now();rt.delta=tr(0,1e3/60,a-rt.timestamp),rt.timestamp=a,rt.isProcessing=!0,tg.update.process(rt),tg.preRender.process(rt),tg.render.process(rt),rt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,P0.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(C9),this.sharedNodes.forEach(R9)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Te.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Te.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Fe(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a){const l=r(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:l,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,a=this.projectionDelta&&!g2(this.projectionDelta),l=this.getTransformTemplate(),u=l?l(this.latestValues,""):void 0,c=u!==this.prevTransformTemplateValue;o&&(a||Kr(this.latestValues)||c)&&(i(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),D9(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var o;const{visualElement:a}=this.options;if(!a)return Fe();const l=a.measureViewportBox();if(!(((o=this.scroll)===null||o===void 0?void 0:o.wasRoot)||this.path.some(L9))){const{scroll:c}=this.root;c&&(Ki(l.x,c.offset.x),Ki(l.y,c.offset.y))}return l}removeElementScroll(o){var a;const l=Fe();if(zt(l,o),!((a=this.scroll)===null||a===void 0)&&a.wasRoot)return l;for(let u=0;u<this.path.length;u++){const c=this.path[u],{scroll:d,options:f}=c;c!==this.root&&d&&f.layoutScroll&&(d.wasRoot&&zt(l,o),Ki(l.x,d.offset.x),Ki(l.y,d.offset.y))}return l}applyTransform(o,a=!1){const l=Fe();zt(l,o);for(let u=0;u<this.path.length;u++){const c=this.path[u];!a&&c.options.layoutScroll&&c.scroll&&c!==c.root&&Yi(l,{x:-c.scroll.offset.x,y:-c.scroll.offset.y}),Kr(c.latestValues)&&Yi(l,c.latestValues)}return Kr(this.latestValues)&&Yi(l,this.latestValues),l}removeTransform(o){const a=Fe();zt(a,o);for(let l=0;l<this.path.length;l++){const u=this.path[l];if(!u.instance||!Kr(u.latestValues))continue;By(u.latestValues)&&u.updateSnapshot();const c=Fe(),d=u.measurePageBox();zt(c,d),xk(a,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,c)}return Kr(this.latestValues)&&xk(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==rt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var a;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==l;if(!(o||u&&this.isSharedProjectionDirty||this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:d,layoutId:f}=this.options;if(!(!this.layout||!(d||f))){if(this.resolvedRelativeTargetAt=rt.timestamp,!this.targetDelta&&!this.relativeTarget){const h=this.getClosestProjectingParent();h&&h.layout&&this.animationProgress!==1?(this.relativeParent=h,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Fe(),this.relativeTargetOrigin=Fe(),So(this.relativeTargetOrigin,this.layout.layoutBox,h.layout.layoutBox),zt(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=Fe(),this.targetWithTransforms=Fe()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),$G(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):zt(this.target,this.layout.layoutBox),c2(this.target,this.targetDelta)):zt(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const h=this.getClosestProjectingParent();h&&!!h.resumingFrom==!!this.resumingFrom&&!h.options.layoutScroll&&h.target&&this.animationProgress!==1?(this.relativeParent=h,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Fe(),this.relativeTargetOrigin=Fe(),So(this.relativeTargetOrigin,this.target,h.target),zt(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}lo&&Yr.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||By(this.parent.latestValues)||u2(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const a=this.getLead(),l=!!this.resumingFrom||this!==a;let u=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(u=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===rt.timestamp&&(u=!1),u)return;const{layout:c,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(c||d))return;zt(this.layoutCorrected,this.layout.layoutBox);const f=this.treeScale.x,h=this.treeScale.y;KG(this.layoutCorrected,this.treeScale,this.path,l),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox,a.targetWithTransforms=Fe());const{target:g}=a;if(!g){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(gk(this.prevProjectionDelta.x,this.projectionDelta.x),gk(this.prevProjectionDelta.y,this.projectionDelta.y)),bo(this.projectionDelta,this.layoutCorrected,g,this.latestValues),(this.treeScale.x!==f||this.treeScale.y!==h||!Ek(this.projectionDelta.x,this.prevProjectionDelta.x)||!Ek(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",g)),lo&&Yr.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var a;if((a=this.options.visualElement)===null||a===void 0||a.scheduleRender(),o){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Wi(),this.projectionDelta=Wi(),this.projectionDeltaWithTransform=Wi()}setAnimationOrigin(o,a=!1){const l=this.snapshot,u=l?l.latestValues:{},c={...this.latestValues},d=Wi();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const f=Fe(),h=l?l.source:void 0,g=this.layout?this.layout.source:void 0,p=h!==g,x=this.getStack(),m=!x||x.members.length<=1,v=!!(p&&!m&&this.options.crossfade===!0&&!this.path.some(I9));this.animationProgress=0;let w;this.mixTargetDelta=b=>{const _=b/1e3;Nk(d.x,o.x,_),Nk(d.y,o.y,_),this.setTargetDelta(d),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(So(f,this.layout.layoutBox,this.relativeParent.layout.layoutBox),P9(this.relativeTarget,this.relativeTargetOrigin,f,_),w&&g9(this.relativeTarget,w)&&(this.isProjectionDirty=!1),w||(w=Fe()),zt(w,this.relativeTarget)),p&&(this.animationValues=c,c9(c,u,this.latestValues,_,v,m)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=_},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(jr(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Te.update(()=>{wl.hasAnimatedSinceResize=!0,this.currentAnimation=i9(0,Ck,{...o,onUpdate:a=>{this.mixTargetDelta(a),o.onUpdate&&o.onUpdate(a)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Ck),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:u,latestValues:c}=o;if(!(!a||!l||!u)){if(this!==o&&this.layout&&u&&w2(this.options.animationType,this.layout.layoutBox,u.layoutBox)){l=this.target||Fe();const d=qt(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+d;const f=qt(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+f}zt(a,l),Yi(a,c),bo(this.projectionDeltaWithTransform,this.layoutCorrected,a,c)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new y9),this.sharedNodes.get(o).add(a);const u=a.options.initialPromotionConfig;a.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const u=this.getStack();u&&u.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(a=!0),!a)return;const u={};l.z&&dg("z",o,u,this.animationValues);for(let c=0;c<cg.length;c++)dg(`rotate${cg[c]}`,o,u,this.animationValues),dg(`skew${cg[c]}`,o,u,this.animationValues);o.render();for(const c in u)o.setStaticValue(c,u[c]),this.animationValues&&(this.animationValues[c]=u[c]);o.scheduleRender()}getProjectionStyles(o){var a,l;if(!this.instance||this.isSVG)return;if(!this.isVisible)return x9;const u={visibility:""},c=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,u.opacity="",u.pointerEvents=vl(o==null?void 0:o.pointerEvents)||"",u.transform=c?c(this.latestValues,""):"none",u;const d=this.getLead();if(!this.projectionDelta||!this.layout||!d.target){const p={};return this.options.layoutId&&(p.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,p.pointerEvents=vl(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!Kr(this.latestValues)&&(p.transform=c?c({},""):"none",this.hasProjected=!1),p}const f=d.animationValues||d.latestValues;this.applyTransformsToTarget(),u.transform=v9(this.projectionDeltaWithTransform,this.treeScale,f),c&&(u.transform=c(f,u.transform));const{x:h,y:g}=this.projectionDelta;u.transformOrigin=`${h.origin*100}% ${g.origin*100}% 0`,d.animationValues?u.opacity=d===this?(l=(a=f.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:f.opacityExit:u.opacity=d===this?f.opacity!==void 0?f.opacity:"":f.opacityExit!==void 0?f.opacityExit:0;for(const p in ou){if(f[p]===void 0)continue;const{correct:x,applyTo:m}=ou[p],v=u.transform==="none"?f[p]:x(f[p],d);if(m){const w=m.length;for(let b=0;b<w;b++)u[m[b]]=v}else u[p]=v}return this.options.layoutId&&(u.pointerEvents=d===this?vl(o==null?void 0:o.pointerEvents)||"":"none"),u}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach(kk),this.root.sharedNodes.clear()}}}function b9(e){e.updateLayout()}function S9(e){var t;const n=((t=e.resumeFrom)===null||t===void 0?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&n&&e.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=e.layout,{animationType:s}=e.options,o=n.source!==e.layout.source;s==="size"?Ut(d=>{const f=o?n.measuredBox[d]:n.layoutBox[d],h=qt(f);f.min=r[d].min,f.max=f.min+h}):w2(s,n.layoutBox,r)&&Ut(d=>{const f=o?n.measuredBox[d]:n.layoutBox[d],h=qt(r[d]);f.max=f.min+h,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[d].max=e.relativeTarget[d].min+h)});const a=Wi();bo(a,r,n.layoutBox);const l=Wi();o?bo(l,e.applyTransform(i,!0),n.measuredBox):bo(l,r,n.layoutBox);const u=!g2(a);let c=!1;if(!e.resumeFrom){const d=e.getClosestProjectingParent();if(d&&!d.resumeFrom){const{snapshot:f,layout:h}=d;if(f&&h){const g=Fe();So(g,n.layoutBox,f.layoutBox);const p=Fe();So(p,r,h.layoutBox),y2(g,p)||(c=!0),d.options.layoutRoot&&(e.relativeTarget=p,e.relativeTargetOrigin=g,e.relativeParent=d)}}}e.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:l,layoutDelta:a,hasLayoutChanged:u,hasRelativeTargetChanged:c})}else if(e.isLead()){const{onExitComplete:r}=e.options;r&&r()}e.options.transition=void 0}function _9(e){lo&&Yr.totalNodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function E9(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function C9(e){e.clearSnapshot()}function kk(e){e.clearMeasurements()}function k9(e){e.isLayoutDirty=!1}function T9(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function Tk(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function N9(e){e.resolveTargetDelta()}function M9(e){e.calcProjection()}function A9(e){e.resetSkewAndRotation()}function R9(e){e.removeLeadSnapshot()}function Nk(e,t,n){e.translate=Re(t.translate,0,n),e.scale=Re(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function Mk(e,t,n,r){e.min=Re(t.min,n.min,r),e.max=Re(t.max,n.max,r)}function P9(e,t,n,r){Mk(e.x,t.x,n.x,r),Mk(e.y,t.y,n.y,r)}function I9(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const j9={duration:.45,ease:[.4,0,.1,1]},Ak=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),Rk=Ak("applewebkit/")&&!Ak("chrome/")?Math.round:Dt;function Pk(e){e.min=Rk(e.min),e.max=Rk(e.max)}function D9(e){Pk(e.x),Pk(e.y)}function w2(e,t,n){return e==="position"||e==="preserve-aspect"&&!qG(_k(t),_k(n),.2)}function L9(e){var t;return e!==e.root&&((t=e.scroll)===null||t===void 0?void 0:t.wasRoot)}const O9=x2({attachResizeListener:(e,t)=>Qo(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),fg={current:void 0},b2=x2({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!fg.current){const e=new O9({});e.mount(window),e.setOptions({layoutScroll:!0}),fg.current=e}return fg.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),q9={pan:{Feature:e9},drag:{Feature:JG,ProjectionNode:b2,MeasureLayout:h2}};function Ik(e,t,n){const{props:r}=e;e.animationState&&r.whileHover&&e.animationState.setActive("whileHover",n==="Start");const i="onHover"+n,s=r[i];s&&Te.postRender(()=>s(t,ma(t)))}class $9 extends Fr{mount(){const{current:t}=this.node;t&&(this.unmount=qU(t,n=>(Ik(this.node,n,"Start"),r=>Ik(this.node,r,"End"))))}unmount(){}}class F9 extends Fr{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=pa(Qo(this.node.current,"focus",()=>this.onFocus()),Qo(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function jk(e,t,n){const{props:r}=e;e.animationState&&r.whileTap&&e.animationState.setActive("whileTap",n==="Start");const i="onTap"+(n==="End"?"":n),s=r[i];s&&Te.postRender(()=>s(t,ma(t)))}class V9 extends Fr{mount(){const{current:t}=this.node;t&&(this.unmount=BU(t,n=>(jk(this.node,n,"Start"),(r,{success:i})=>jk(this.node,r,i?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Uy=new WeakMap,hg=new WeakMap,B9=e=>{const t=Uy.get(e.target);t&&t(e)},z9=e=>{e.forEach(B9)};function U9({root:e,...t}){const n=e||document;hg.has(n)||hg.set(n,{});const r=hg.get(n),i=JSON.stringify(t);return r[i]||(r[i]=new IntersectionObserver(z9,{root:e,...t})),r[i]}function H9(e,t,n){const r=U9(t);return Uy.set(e,n),r.observe(e),()=>{Uy.delete(e),r.unobserve(e)}}const G9={some:0,all:1};class W9 extends Fr{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:s}=t,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:G9[i]},a=l=>{const{isIntersecting:u}=l;if(this.isInView===u||(this.isInView=u,s&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:c,onViewportLeave:d}=this.node.getProps(),f=u?c:d;f&&f(l)};return H9(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:n}=this.node;["amount","margin","root"].some(K9(t,n))&&this.startObserver()}unmount(){}}function K9({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}const Y9={inView:{Feature:W9},tap:{Feature:V9},focus:{Feature:F9},hover:{Feature:$9}},X9={layout:{ProjectionNode:b2,MeasureLayout:h2}},Hy={current:null},S2={current:!1};function Z9(){if(S2.current=!0,!!T0)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>Hy.current=e.matches;e.addListener(t),t()}else Hy.current=!1}const Q9=[...WP,ft,Dr],J9=e=>Q9.find(GP(e)),Dk=new WeakMap;function eW(e,t,n){for(const r in t){const i=t[r],s=n[r];if(pt(i))e.addValue(r,i);else if(pt(s))e.addValue(r,Xo(i,{owner:e}));else if(s!==i)if(e.hasValue(r)){const o=e.getValue(r);o.liveStyle===!0?o.jump(i):o.hasAnimated||o.set(i)}else{const o=e.getStaticValue(r);e.addValue(r,Xo(o!==void 0?o:i,{owner:e}))}}for(const r in n)t[r]===void 0&&e.removeValue(r);return t}const Lk=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class tW{scrapeMotionValuesFromProps(t,n,r){return{}}constructor({parent:t,props:n,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:s,visualState:o},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=ex,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const h=Rn.now();this.renderScheduledAt<h&&(this.renderScheduledAt=h,Te.render(this.render,!1,!0))};const{latestValues:l,renderState:u,onUpdate:c}=o;this.onUpdate=c,this.latestValues=l,this.baseTarget={...l},this.initialValues=n.initial?{...l}:{},this.renderState=u,this.parent=t,this.props=n,this.presenceContext=r,this.depth=t?t.depth+1:0,this.reducedMotionConfig=i,this.options=a,this.blockInitialAnimation=!!s,this.isControllingVariants=oc(n),this.isVariantNode=tP(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:d,...f}=this.scrapeMotionValuesFromProps(n,{},this);for(const h in f){const g=f[h];l[h]!==void 0&&pt(g)&&g.set(l[h],!1)}}mount(t){this.current=t,Dk.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),S2.current||Z9(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Hy.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){Dk.delete(this.current),this.projection&&this.projection.unmount(),jr(this.notifyUpdate),jr(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const n=this.features[t];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(t,n){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const r=_i.has(t),i=n.on("change",a=>{this.latestValues[t]=a,this.props.onUpdate&&Te.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),s=n.on("renderRequest",this.scheduleRender);let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,t,n)),this.valueSubscriptions.set(t,()=>{i(),s(),o&&o(),n.owner&&n.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in ys){const n=ys[t];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[t]&&i&&r(this.props)&&(this.features[t]=new i(this)),this.features[t]){const s=this.features[t];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Fe()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,n){this.latestValues[t]=n}update(t,n){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<Lk.length;r++){const i=Lk[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s="on"+i,o=t[s];o&&(this.propEventSubscriptions[i]=this.on(i,o))}this.prevMotionValues=eW(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(t),()=>n.variantChildren.delete(t)}addValue(t,n){const r=this.values.get(t);n!==r&&(r&&this.removeValue(t),this.bindToMotionValue(t,n),this.values.set(t,n),this.latestValues[t]=n.get())}removeValue(t){this.values.delete(t);const n=this.valueSubscriptions.get(t);n&&(n(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,n){if(this.props.values&&this.props.values[t])return this.props.values[t];let r=this.values.get(t);return r===void 0&&n!==void 0&&(r=Xo(n===null?void 0:n,{owner:this}),this.addValue(t,r)),r}readValue(t,n){var r;let i=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:(r=this.getBaseTargetFromProps(this.props,t))!==null&&r!==void 0?r:this.readValueFromInstance(this.current,t,this.options);return i!=null&&(typeof i=="string"&&(UP(i)||DP(i))?i=parseFloat(i):!J9(i)&&Dr.test(n)&&(i=VP(t,n)),this.setBaseTarget(t,pt(i)?i.get():i)),pt(i)?i.get():i}setBaseTarget(t,n){this.baseTarget[t]=n}getBaseTarget(t){var n;const{initial:r}=this.props;let i;if(typeof r=="string"||typeof r=="object"){const o=j0(this.props,r,(n=this.presenceContext)===null||n===void 0?void 0:n.custom);o&&(i=o[t])}if(r&&i!==void 0)return i;const s=this.getBaseTargetFromProps(this.props,t);return s!==void 0&&!pt(s)?s:this.initialValues[t]!==void 0&&i===void 0?void 0:this.baseTarget[t]}on(t,n){return this.events[t]||(this.events[t]=new K0),this.events[t].add(n)}notify(t,...n){this.events[t]&&this.events[t].notify(...n)}}class _2 extends tW{constructor(){super(...arguments),this.KeyframeResolver=KP}sortInstanceNodePosition(t,n){return t.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(t,n){return t.style?t.style[n]:void 0}removeValueFromRenderState(t,{vars:n,style:r}){delete n[t],delete r[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;pt(t)&&(this.childSubscription=t.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function nW(e){return window.getComputedStyle(e)}class rW extends _2{constructor(){super(...arguments),this.type="html",this.renderInstance=cP}readValueFromInstance(t,n){if(_i.has(n)){const r=J0(n);return r&&r.default||0}else{const r=nW(t),i=(aP(n)?r.getPropertyValue(n):r[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(t,{transformPagePoint:n}){return d2(t,n)}build(t,n,r){O0(t,n,r.transformTemplate)}scrapeMotionValuesFromProps(t,n,r){return V0(t,n,r)}}class iW extends _2{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Fe}getBaseTargetFromProps(t,n){return t[n]}readValueFromInstance(t,n){if(_i.has(n)){const r=J0(n);return r&&r.default||0}return n=dP.has(n)?n:R0(n),t.getAttribute(n)}scrapeMotionValuesFromProps(t,n,r){return pP(t,n,r)}build(t,n,r){q0(t,n,this.isSVGTag,r.transformTemplate)}renderInstance(t,n,r,i){fP(t,n,r,i)}mount(t){this.isSVGTag=F0(t.tagName),super.mount(t)}}const sW=(e,t)=>I0(e)?new iW(t):new rW(t,{allowProjection:e!==S.Fragment}),oW=RU({...MG,...Y9,...q9,...X9},sW),aW=G8(oW);function lW({steps:e,fromRects:t,toRects:n,onComplete:r}){return S.useEffect(()=>{const i=window.setTimeout(r,550);return()=>window.clearTimeout(i)},[r]),y.jsx("div",{className:"morph-layer",children:e.map(i=>{var a;const s=t[i.id],o=n[i.id];return!s||!o?null:y.jsxs(aW.div,{className:`morph-card step-${i.type}`,initial:{left:s.left,top:s.top,width:s.width,height:s.height},animate:{left:o.left,top:o.top,width:o.width,height:o.height},transition:{duration:.5,ease:"easeInOut"},children:[y.jsx("div",{className:"morph-card-title",children:i.name}),y.jsx("div",{className:"morph-card-subtitle",children:((a=i.preview)==null?void 0:a.title)??i.type})]},i.id)})})}function uW({morph:e,onComplete:t,children:n}){return y.jsxs("div",{className:"morph-orchestrator",children:[n,e?y.jsx(lW,{steps:e.steps,fromRects:e.fromRects,toRects:e.toRects,onComplete:t}):null]})}function cW(){const[e,t]=S.useState(null),[n,r]=S.useState(null),[i,s]=S.useState(!0),[o,a]=S.useState(null),[l,u]=S.useState([]),[c,d]=S.useState(null),f=S.useCallback(async g=>{const p=await GR(),x=(p==null?void 0:p.trace)??null;t(x),r(x?(p==null?void 0:p.insights)??rD(x):null)},[t,r]),h=S.useCallback(async()=>{var g;s(!0),a(null);try{const p=await _8();u(p);const x=((g=p[p.length-1])==null?void 0:g.id)??null,m=c??x;if(!m){t(null),r(null);return}if(!c||c!==m){d(m);return}await f(m)}catch(p){a(p instanceof Error?p.message:"Failed to load trace")}finally{s(!1)}},[c,f]);return S.useEffect(()=>{h()},[h]),S.useEffect(()=>{c&&(s(!0),f(c).catch(g=>{a(g instanceof Error?g.message:"Failed to load trace")}).finally(()=>s(!1)))},[c,f]),{trace:e,insights:n,loading:i,error:o,reload:h,traces:l,selectedTraceId:c,setSelectedTraceId:d}}function on(e,t){const[n,r]=S.useState(()=>{if(typeof window>"u")return t;try{const i=window.localStorage.getItem(e);return i==null?t:JSON.parse(i)}catch{return t}});return S.useEffect(()=>{try{window.localStorage.setItem(e,JSON.stringify(n))}catch{}},[e,n]),[n,r]}function dW(e,t,n){const{intervals:r}=Nu(e,t,n),i=new Set;return r.forEach(s=>{i.add(s.startMs),i.add(s.endMs)}),Array.from(i).sort((s,o)=>s-o)}function fW(e,t,n){if(!e.length)return null;if(n===1){for(const r of e)if(r>t+1)return r;return e[e.length-1]}for(let r=e.length-1;r>=0;r-=1){const i=e[r];if(i<t-1)return i}return e[0]}const hW=300,pW=2e3,mW=1.5;function gW(e){const t=hW*Math.pow(mW,Math.max(0,e));return Math.min(pW,Math.round(t))}const Ok=220,qk=120;function pg(){return`scenario-${Math.random().toString(36).slice(2,9)}`}function yW(e){return e.filter(t=>t.parentStepId).map(t=>({source:t.parentStepId,target:t.id}))}function vW(e){const t=[...e].sort((n,r)=>n.index-r.index);return t.slice(1).map((n,r)=>({source:t[r].id,target:n.id}))}function xW(e){const t={},n=e.getBoundingClientRect();return e.querySelectorAll(".step-card").forEach(i=>{const s=i.dataset.stepId;if(!s)return;const o=i.getBoundingClientRect();t[s]={left:o.left-n.left,top:o.top-n.top,width:o.width,height:o.height}}),t}function wW(e,t,n){const r=[...yW(e),...vW(e),...yl(e).map(g=>({source:g.source,target:g.target}))],i=Ny(e,r,n),s=t.getBoundingClientRect(),o=Math.min(...i.map(g=>g.position.x)),a=Math.min(...i.map(g=>g.position.y)),l=Math.max(...i.map(g=>g.position.x)),u=Math.max(...i.map(g=>g.position.y)),c=l-o+Ok,d=u-a+qk,f=Math.max(32,(s.width-c)/2),h=Math.max(24,(s.height-d)/2);return i.reduce((g,p)=>(g[p.id]={left:p.position.x-o+f,top:p.position.y-a+h,width:Ok,height:qk},g),{})}function $k(e,t,n){const r=t.trim().toLowerCase();return e.filter(i=>{var o,a,l;return n!=="all"&&i.type!==n?!1:r?[i.name,(o=i.preview)==null?void 0:o.title,(a=i.preview)==null?void 0:a.outputPreview,(l=i.preview)==null?void 0:l.inputPreview].filter(Boolean).join(" ").toLowerCase().includes(r):!0})}function bW(){var ba;const{trace:e,insights:t,loading:n,error:r,reload:i,traces:s,selectedTraceId:o,setSelectedTraceId:a}=cW(),[l,u]=on("agentDirector.mode","cinema"),[c,d]=S.useState(""),[f,h]=S.useState("all"),[g,p]=S.useState(null),[x,m]=on("agentDirector.safeExport",!1),[v,w]=S.useState(null),[b,_]=S.useState(!1),[C,k]=S.useState(0),[T,M]=on("agentDirector.speed",1),[R,I]=on("agentDirector.windowed",!1),[B,F]=S.useState(2e4),[E,D]=S.useState(!1),[P,L]=S.useState(!1),[A,N]=on("agentDirector.overlayEnabled",!1),[j,$]=on("agentDirector.onboarded",!1),[V,O]=on("agentDirector.tourCompleted",!1),[G,Y]=on("agentDirector.explainMode",!0),[ee,se]=on("agentDirector.heroDismissed",!1),[pe,te]=on("agentDirector.dockOpen",!1),le=!1,[ve,xe]=on("agentDirector.introDismissed",le),[H,Q]=S.useState(!1),[z,re]=S.useState(null),[X,Z]=S.useState([]),[de,be]=S.useState(null),[at,Se]=S.useState(null),[we,Be]=S.useState(""),[gt,lt]=S.useState([{id:pg(),name:"Prompt tighter",strategy:"hybrid",modificationsText:'{"prompt":"Return concise response"}'},{id:pg(),name:"Recorded baseline",strategy:"recorded",modificationsText:"{}"}]),[yt,tt]=S.useState(null),[tn,nn]=S.useState(null),[ze,Ge]=S.useState(!1),[Ze,Oe]=S.useState(null),rn=S.useRef(null),Vt=S.useRef(null),At=S.useMemo(()=>e?$k(e.steps,c,f):[],[e,c,f]),Vr=S.useMemo(()=>v?$k(v.steps,c,f):[],[v,c,f]),Ei=S.useMemo(()=>e?dW(e.startedAt,e.endedAt,e.steps):[],[e]),Br=S.useMemo(()=>!e||!v?null:nc(e,v),[e,v]),Ci=S.useMemo(()=>e?e.steps.find(U=>U.id===g)??null:null,[e,g]);S.useEffect(()=>{Vt.current=v},[v]),S.useEffect(()=>{l==="compare"&&te(!1)},[l,te]);const wn=S.useCallback(async U=>{if(!e)return;const K=await M8(e.id,U,"hybrid",{note:"UI replay"},e);K&&(w(K),N(!0),u("flow"))},[e,w,u,N]),ut=S.useCallback(()=>{if(!e)return;const U=[...e.steps].sort((K,oe)=>(oe.durationMs??0)-(K.durationMs??0))[0];U&&(p(U.id),u("cinema"))},[e,u]),ga=S.useCallback(()=>{if(!e||e.steps.length===0)return null;const U=[...e.steps].sort((K,oe)=>(oe.durationMs??0)-(K.durationMs??0))[0];return(U==null?void 0:U.id)??null},[e]),Ms=S.useCallback(()=>{if(!e)return;const U=e.steps.find(K=>K.status==="failed");U&&(p(U.id),u("cinema"))},[e,u]),uc=S.useCallback((U,K)=>{lt(oe=>oe.map(fe=>fe.id===U?{...fe,...K}:fe))},[]),cc=S.useCallback(U=>{lt(U)},[]),dc=S.useCallback(()=>{lt(U=>[...U,{id:pg(),name:`Scenario ${U.length+1}`,strategy:"hybrid",modificationsText:"{}"}])},[]),fc=S.useCallback(U=>{lt(K=>K.length<=1?K:K.filter(oe=>oe.id!==U))},[]),hc=S.useCallback(async U=>{var oe;if(!e)return;const K=we||g||((oe=e.steps[0])==null?void 0:oe.id);if(!K){Oe("Select an anchor step before running the matrix.");return}try{Ge(!0),Oe(null);const fe=await A8({traceId:e.id,stepId:K,scenarios:U});if(!fe)throw new Error("Failed to create replay job.");tt(fe);let Bt=fe;for(let $e=0;$e<30&&!(Bt.status!=="queued"&&Bt.status!=="running");$e+=1){const Sn=gW($e);await new Promise(ki=>window.setTimeout(ki,Sn));const vt=await R8(fe.id);if(!vt)break;Bt=vt,tt(vt)}const We=await SC(fe.id);if(!We)throw new Error("Replay job finished but matrix summary is unavailable.");nn(We),u("matrix")}catch(fe){Oe(fe instanceof Error?fe.message:"Failed to run replay matrix.")}finally{Ge(!1)}},[we,g,e,u]),pc=S.useCallback(async()=>{if(yt){Ge(!0);try{const U=await P8(yt.id);if(!U){Oe("Failed to cancel replay job.");return}tt(U);const K=await SC(U.id);K&&nn(K)}finally{Ge(!1)}}},[yt]),mc=S.useCallback(async U=>{const K=await GR();if(!(K!=null&&K.trace)){Oe("Could not load replay trace for compare view.");return}w(K.trace),N(!0),u("compare")},[u,N]),qe=S.useCallback(U=>{if(!(U===l||!e)){if((U==="flow"||U==="matrix")&&_(!1),U==="flow"&&l==="cinema"&&rn.current){const K=rn.current,oe=xW(K),fe=wW(e.steps,K,e.id);Se({steps:e.steps,fromRects:oe,toRects:fe});return}u(U)}},[l,e,_,u]),As=S.useCallback(()=>{l==="flow"&&qe("cinema"),_(U=>!U)},[l,qe]),bn=S.useCallback(()=>{re(null),Z([]),be(null),_(!1)},[_]),ya=S.useCallback(U=>[{id:"setup",label:"Opening the reel",duration:1100,action:()=>{Y(!0),_(!1),k(0),p(null),N(!1),M(1),e&&e.steps.length<500&&I(!1),qe("cinema")}},{id:"pace",label:"Pacing the timeline",duration:2200,action:()=>{qe("cinema"),_(!0),M(1.1)}},{id:"bottleneck",label:"Freeze on the bottleneck",duration:1600,action:()=>{_(!1),ut()}},{id:"inspect",label:"Inspect the moment",duration:1600,action:()=>{U&&p(U)}},{id:"flow",label:"Morph into flow",duration:2100,action:()=>{qe("flow")}},{id:"replay",label:"Directors Cut replay",duration:2200,action:async()=>{if(!e)return;!Vt.current&&U&&await wn(U),N(!0),u("compare")}},{id:"compare",label:"Compare the cut",duration:2e3,action:()=>{_(!0),M(1)}},{id:"finale",label:"Final frame",duration:1100,action:()=>{_(!1)}}],[qe,wn,ut,Y,_,u,N,k,p,M,I,e]),sr=S.useCallback(()=>{var K;if(!e)return;const U=g??ga()??((K=e.steps[0])==null?void 0:K.id)??null;Z(ya(U)),re({active:!0,step:0}),be(e.id),Q(!1),D(!1),L(!1)},[ya,ga,g,e,L,D,Z,re,be,Q]),zr=S.useCallback(()=>{if(z!=null&&z.active){bn();return}sr()},[sr,bn,z==null?void 0:z.active]),gc=S.useMemo(()=>{const U=[{id:"header",title:"Mission control",body:"Confirm the run, status, and metadata. Use Guide and Explain to orient the room instantly.",target:'[data-tour="header"]',placement:"bottom"}];return ee||U.push({id:"hero",title:"Director briefing",body:"Choose Tour, Story mode, or Explain to ramp up quickly.",target:'[data-tour="hero"]',placement:"bottom"}),U.push({id:"insights",title:"Fast diagnosis",body:"Jump straight to bottlenecks, errors, and high-cost steps with one click.",target:'[data-tour="insights"]',placement:"bottom"},{id:"journey",title:"Director journey",body:"A narrative path that teaches how to watch, inspect, and direct a better run.",target:'[data-tour="journey"]',placement:"bottom"},{id:"toolbar",title:"Filters + modes",body:"Search, filter, and switch between Cinema, Flow, and Compare as the story evolves.",target:'[data-tour="toolbar"]',placement:"bottom"},{id:"quick-actions",title:"Quick actions",body:"Launch Story Mode, open the command palette, or jump to bottlenecks instantly.",target:'[data-tour="quick-actions"]',placement:"left"},{id:"stage",title:"Cinema stage",body:"The timeline shows every step as a scene. Scrub to see pacing and concurrency.",target:'[data-tour="stage"]',placement:"top"},{id:"inspector",title:"Inspector",body:"Open any step to read payloads, apply redaction, and replay from that moment.",target:'[data-tour="inspector"]',placement:"left"},{id:"compare",title:"Compare runs",body:v?"Compare is live. Review deltas in cost, steps, and wall time side by side.":"Replay from a step to unlock compare mode and validate improvements.",target:'[data-tour="compare"]',placement:"top"}),U},[v,ee]),va=S.useCallback(()=>{Se(null),u("flow")},[u]);S.useEffect(()=>{var oe;if(!e)return;N8(),k(0),_(!1);const U=Math.min(Math.max((e.metadata.wallTimeMs||1)*.2,5e3),6e4);F(U),e.steps.length>500&&I(!0),v||N(!1),l==="compare"&&!v&&u("cinema");const K=g&&e.steps.some(fe=>fe.id===g)?g:((oe=e.steps[0])==null?void 0:oe.id)??"";Be(fe=>fe&&e.steps.some(Bt=>Bt.id===fe)?fe:K)},[e,v,l,g,u,I,N]),S.useEffect(()=>{!V&&ve&&Q(!0)},[V,ve]),S.useEffect(()=>(document.body.classList.toggle("explain-mode",G),()=>{document.body.classList.remove("explain-mode")}),[G]),S.useEffect(()=>(document.body.classList.toggle("story-mode",!!(z!=null&&z.active)),()=>{document.body.classList.remove("story-mode")}),[z==null?void 0:z.active]),S.useEffect(()=>{if(!(z!=null&&z.active))return;const U=X[z.step];if(!U){bn();return}Promise.resolve(U.action());const K=window.setTimeout(()=>{re(oe=>oe&&oe.active?{...oe,step:oe.step+1}:oe)},U.duration);return()=>window.clearTimeout(K)},[X,bn,z]),S.useEffect(()=>{z!=null&&z.active&&(!e||!de||e.id!==de&&bn())},[z==null?void 0:z.active,e,de,bn]),S.useEffect(()=>{if(!e)return;const K=Date.parse(e.startedAt)+C;let oe=0,fe=Number.POSITIVE_INFINITY;e.steps.forEach((We,$e)=>{const Sn=Date.parse(We.startedAt),vt=Date.parse(We.endedAt??We.startedAt);if(K>=Sn&&K<=vt){oe=$e,fe=0;return}const ki=Math.min(Math.abs(K-Sn),Math.abs(K-vt));ki<fe&&(fe=ki,oe=$e)}),[oe,oe-1,oe+1].filter(We=>We>=0&&We<e.steps.length).forEach(We=>{const $e=e.steps[We];$e&&T8(e.id,$e.id,x)})},[e,C,x]),S.useEffect(()=>{if(!e||!b||l!=="cinema"&&l!=="compare")return;const U=(v==null?void 0:v.metadata.wallTimeMs)??0,K=l==="compare"?Math.max(e.metadata.wallTimeMs||1,U||1):e.metadata.wallTimeMs||1;let oe=0,fe=performance.now();const Bt=We=>{const $e=(We-fe)*T;fe=We,k(Sn=>{const vt=Sn+$e;return vt>=K?(_(!1),K):vt}),oe=requestAnimationFrame(Bt)};return oe=requestAnimationFrame(Bt),()=>cancelAnimationFrame(oe)},[e,v,b,T,l]),S.useEffect(()=>{const U=K=>{var We;const oe=K.target,fe=(We=oe==null?void 0:oe.tagName)==null?void 0:We.toLowerCase();if(!(fe==="input"||fe==="textarea"||fe==="select"||oe!=null&&oe.isContentEditable)){if((K.metaKey||K.ctrlKey)&&K.key.toLowerCase()==="k"){K.preventDefault(),L($e=>!$e);return}if(K.key==="?"||K.key==="/"&&K.shiftKey){K.preventDefault(),D(!0);return}if(K.key.toLowerCase()==="s"){K.preventDefault(),zr();return}if(K.key.toLowerCase()==="e"){K.preventDefault(),Y($e=>!$e);return}if(K.key.toLowerCase()==="t"){K.preventDefault(),Q(!0);return}if(K.key==="Escape"){D(!1),L(!1),p(null);return}if(K.key===" "){K.preventDefault(),(l==="cinema"||l==="compare")&&_($e=>!$e);return}if(K.key.toLowerCase()==="f"){K.preventDefault(),l==="flow"?u("cinema"):l==="cinema"&&qe("flow");return}if(K.key.toLowerCase()==="i"){K.preventDefault(),g?p(null):e!=null&&e.steps.length&&p(e.steps[0].id);return}if(K.key==="ArrowLeft"||K.key==="ArrowRight"){if(K.preventDefault(),!e)return;const $e=e.metadata.wallTimeMs||1;if(K.shiftKey){k(K.key==="ArrowLeft"?0:$e),_(!1),u("cinema");return}const Sn=K.key==="ArrowRight"?1:-1,vt=fW(Ei,C,Sn);vt!=null&&(k(vt),_(!1),u("cinema"))}}};return window.addEventListener("keydown",U),()=>window.removeEventListener("keydown",U)},[l,g,e,C,Ei,qe,u,Y,L,Q,zr]);const xa=S.useMemo(()=>{if(!e||!R||c)return null;const U=e.metadata.wallTimeMs||1,K=Math.min(Math.max(B,5e3),U);let oe=Math.max(0,C-K/2);const fe=Math.min(U,oe+K);return fe-oe<K&&(oe=Math.max(0,fe-K)),{startMs:oe,endMs:fe}},[e,R,C,c,B]),or=!!(z!=null&&z.active),wa=(z==null?void 0:z.step)??0,yc=((ba=X[wa])==null?void 0:ba.label)??"Wrapping up",vc=X.length,xc=S.useMemo(()=>[{id:"story-toggle",label:or?"Stop story mode":"Start story mode",description:"Auto-runs a cinematic walkthrough.",group:"Story",keys:"S",onTrigger:zr},{id:"tour-start",label:"Start guided tour",description:"Walk the interface step by step.",group:"Onboarding",keys:"T",onTrigger:()=>Q(!0)},{id:"explain-toggle",label:G?"Disable explain mode":"Enable explain mode",description:"Toggle contextual overlays.",group:"Onboarding",keys:"E",onTrigger:()=>Y(U=>!U)},{id:"shortcuts",label:"Show shortcuts",description:"Open the keyboard map.",group:"Onboarding",keys:"?",onTrigger:()=>D(!0)},{id:"playback-toggle",label:b?"Pause playback":"Play playback",description:"Start or stop the run.",group:"Playback",keys:"Space",onTrigger:As},{id:"mode-cinema",label:"Switch to Cinema",description:"Timeline playback view.",group:"Modes",keys:"C",onTrigger:()=>qe("cinema")},{id:"mode-flow",label:"Switch to Flow",description:"Graph dependency view.",group:"Modes",keys:"F",onTrigger:()=>qe("flow")},{id:"mode-compare",label:"Open Compare",description:"Side-by-side diff view.",group:"Modes",onTrigger:()=>qe("compare"),disabled:!v},{id:"mode-matrix",label:"Open Matrix",description:"Counterfactual replay matrix view.",group:"Modes",onTrigger:()=>qe("matrix")},{id:"jump-bottleneck",label:"Jump to bottleneck",description:"Select the slowest step.",group:"Navigation",onTrigger:ut},{id:"jump-error",label:"Jump to error",description:"Select the first failed step.",group:"Navigation",onTrigger:Ms},{id:"replay-step",label:"Replay from selected step",description:"Branch a Directors Cut.",group:"Tools",onTrigger:()=>g&&wn(g),disabled:!g},{id:"overlay-toggle",label:A?"Hide overlay":"Show overlay",description:"Ghost diff in Cinema/Flow.",group:"Tools",onTrigger:()=>N(U=>!U),disabled:!v},{id:"safe-export",label:x?"Disable safe export":"Enable safe export",description:"Redact sensitive payloads.",group:"Safety",onTrigger:()=>m(U=>!U)},{id:"reload",label:"Reload traces",description:"Refresh trace data.",group:"Meta",onTrigger:i}],[or,zr,G,b,As,qe,v,ut,Ms,g,wn,A,x,i,Y,N,m,D,Q]);return n?y.jsx("div",{className:"loading",children:"Loading trace..."}):r||!e?y.jsxs("div",{className:"error",children:[y.jsx("p",{children:r??"Failed to load trace."}),y.jsx("button",{className:"primary-button",type:"button",onClick:i,children:"Retry"})]}):y.jsxs("div",{className:`app ${G?"explain-mode":""} ${l==="compare"?"mode-compare":""} ${l==="matrix"?"mode-matrix":""}`,children:[y.jsx(Jj,{trace:e,traces:s,selectedTraceId:o,onSelectTrace:a,onReload:i,onStartTour:()=>Q(!0),onToggleStory:zr,onOpenPalette:()=>L(!0),onToggleExplain:()=>Y(U=>!U),explainMode:G,storyActive:or}),!ve&&!le?y.jsx(RD,{onComplete:()=>xe(!0),onStartTour:()=>{xe(!0),Q(!0)},onStartStory:sr}):null,ve&&!ee?y.jsx(PD,{explainMode:G,storyActive:or,onStartTour:()=>{se(!0),Q(!0)},onStartStory:()=>{se(!0),sr()},onToggleExplain:()=>Y(U=>!U),onDismiss:()=>se(!0)}):null,y.jsx(ND,{steps:gc,open:H,onClose:()=>{Q(!1),O(!0)},onComplete:()=>{Q(!1),O(!0)}}),y.jsx(MD,{enabled:G}),y.jsx(jD,{active:or,label:yc,step:wa,total:vc,onStop:bn,onRestart:sr}),y.jsx(eD,{insights:t,onSelectStep:U=>{p(U),l!=="cinema"&&u("cinema")},onJumpToError:Ms,onJumpToBottleneck:ut}),y.jsx(CD,{trace:e,mode:l==="matrix"?"cinema":l,playheadMs:C,selectedStepId:g,compareTrace:v,collapsed:j,onToggleCollapsed:()=>$(U=>!U),onModeChange:qe,onSelectStep:U=>{p(U),l!=="cinema"&&u("cinema")},onJumpToBottleneck:ut,onReplay:wn,onStartTour:()=>Q(!0)}),y.jsxs("div",{className:"toolbar","data-help":!0,"data-help-indicator":!0,"data-tour":"toolbar","data-help-title":"Search + filters","data-help-body":"Filter by step type, enable Safe export, and jump between Cinema, Flow, Compare, and Matrix.","data-help-placement":"bottom",children:[y.jsx(nD,{query:c,typeFilter:f,onQueryChange:d,onTypeFilterChange:h}),y.jsxs("div",{className:"toolbar-actions",children:[y.jsx("button",{className:`ghost-button ${l==="cinema"?"active":""}`,type:"button","aria-pressed":l==="cinema",title:"Timeline playback",onClick:()=>qe("cinema"),"data-help":!0,"data-help-title":"Cinema mode","data-help-body":"Timeline view with step cards ordered by time.","data-help-placement":"bottom",children:"Cinema"}),y.jsx("button",{className:`ghost-button ${l==="flow"?"active":""}`,type:"button","aria-pressed":l==="flow",title:"Graph view",onClick:()=>qe("flow"),"data-help":!0,"data-help-title":"Flow mode","data-help-body":"Dependency graph of steps and tool calls.","data-help-placement":"bottom",children:"Flow"}),y.jsx("button",{className:`ghost-button ${l==="compare"?"active":""}`,type:"button","aria-pressed":l==="compare",title:v?"Side-by-side compare":"Run a replay to enable compare",onClick:()=>qe("compare"),disabled:!v,"data-tour":"compare","data-help":!0,"data-help-title":"Compare mode","data-help-body":"Side-by-side view after a replay. Enabled once you replay.","data-help-placement":"bottom",children:"Compare"}),y.jsx("button",{className:`ghost-button ${l==="matrix"?"active":""}`,type:"button","aria-pressed":l==="matrix",title:"Counterfactual replay matrix",onClick:()=>qe("matrix"),"data-help":!0,"data-help-title":"Matrix mode","data-help-body":"Run multiple replay scenarios and rank likely causal factors.","data-help-placement":"bottom",children:"Matrix"}),y.jsxs("label",{className:"toggle",title:"Redact payloads and disable raw views for safe sharing","data-help":!0,"data-help-title":"Safe export","data-help-body":"Redacts secrets and disables raw payload views for safe sharing.","data-help-placement":"bottom",children:[y.jsx("input",{type:"checkbox",checked:x,onChange:()=>m(U=>!U)}),"Safe export"]}),e.steps.length>200||R?y.jsxs("label",{className:"toggle",title:"Window steps around the playhead for large traces","data-help":!0,"data-help-title":"Windowed mode","data-help-body":"Limits rendering to a playhead window for large traces.","data-help-placement":"bottom",children:[y.jsx("input",{type:"checkbox",checked:R,onChange:()=>I(U=>!U)}),"Windowed"]}):null,v?y.jsxs("label",{className:"toggle",title:"Show ghost overlay of replay in Cinema/Flow","data-help":!0,"data-help-title":"Overlay replay","data-help-body":"Layer the replay over the base run to spot differences.","data-help-placement":"bottom",children:[y.jsx("input",{type:"checkbox",checked:A,onChange:()=>N(U=>!U)}),"Overlay"]}):null]})]}),l==="cinema"?y.jsxs("div",{className:"playback-stack","data-tour":"playback",children:[y.jsx("div",{"data-help":!0,"data-help-title":"Playback controls","data-help-body":"Play, pause, scrub, and adjust speed to feel the rhythm of the run.","data-help-placement":"bottom",children:y.jsx(pw,{playheadMs:C,wallTimeMs:e.metadata.wallTimeMs||1,isPlaying:b,speed:T,onToggle:()=>_(U=>!U),onScrub:U=>k(U),onSpeedChange:M})}),y.jsx("div",{"data-help":!0,"data-help-title":"Density map","data-help-body":"Zoom into hotspots and keep long traces readable with windowing.","data-help-placement":"bottom",children:y.jsx(vD,{traceStart:e.startedAt,traceEnd:e.endedAt,steps:e.steps,playheadMs:C,windowRange:xa,windowed:R,spanMs:B,onSpanChange:F,onToggleWindowed:I,onScrub:U=>k(U)})})]}):null,l==="compare"&&v?y.jsx("div",{"data-help":!0,"data-help-title":"Compare playback","data-help-body":"Sync both runs to evaluate improvements at identical timestamps.","data-help-placement":"bottom",children:y.jsx(pw,{playheadMs:C,wallTimeMs:Math.max(e.metadata.wallTimeMs||1,v.metadata.wallTimeMs||1),isPlaying:b,speed:T,onToggle:()=>_(U=>!U),onScrub:U=>k(U),onSpeedChange:M})}):null,y.jsxs("main",{className:`stage ${l==="compare"?"stage-compare":""}`,role:"main",children:[y.jsx("div",{className:"main",ref:rn,"data-help":!0,"data-help-indicator":!0,"data-tour":"stage","data-help-title":"Trace stage","data-help-body":"Every step becomes a scene. Hover or click to open deep inspection.","data-help-placement":"top",children:y.jsxs(uW,{morph:at,onComplete:va,children:[l==="cinema"?y.jsx(mD,{trace:e,steps:At,selectedStepId:g,onSelectStep:U=>p(U),playheadMs:C,windowRange:xa,timing:t==null?void 0:t.timing,ghostTrace:A?v:null,diff:Br}):null,l==="flow"?y.jsx(n8,{steps:At,selectedStepId:g,onSelectStep:U=>p(U),baseTrace:e,compareTrace:v,compareSteps:Vr,overlayEnabled:A,onToggleOverlay:()=>N(U=>!U)}):null,l==="compare"&&v?y.jsx(i8,{baseTrace:e,compareTrace:v,playheadMs:C,safeExport:x,onExit:()=>{u("cinema"),w(null)}}):null,l==="matrix"?y.jsx(h8,{steps:e.steps,anchorStepId:we,onAnchorStepChange:Be,scenarios:gt,onScenarioChange:uc,onAddScenario:dc,onRemoveScenario:fc,onRun:hc,onCancel:pc,onReplaceScenarios:cc,loading:ze,error:Ze,job:yt,matrix:tn,safeExport:x,onOpenCompare:mc}):null]})}),l==="compare"||l==="matrix"?null:Ci?y.jsx(D8,{traceId:e.id,step:Ci,safeExport:x,onClose:()=>p(null),onReplay:wn}):y.jsx(TD,{trace:e,mode:l,selectedStepId:g,onModeChange:qe,onSelectStep:U=>p(U),onJumpToBottleneck:ut,onReplay:wn})]}),y.jsx(ID,{mode:l==="matrix"?"cinema":l,isPlaying:b,storyActive:or,explainMode:G,hidden:l==="compare",open:pe,onToggleOpen:()=>te(U=>!U),onTogglePlay:As,onStartStory:sr,onStopStory:bn,onStartTour:()=>Q(!0),onOpenPalette:()=>L(!0),onShowShortcuts:()=>D(!0),onToggleExplain:()=>Y(U=>!U),onJumpToBottleneck:ut}),y.jsx(_D,{open:P,onClose:()=>L(!1),actions:xc}),y.jsx(wD,{open:E,onClose:()=>D(!1)})]})}mg.createRoot(document.getElementById("root")).render(y.jsx(q.StrictMode,{children:y.jsx(bW,{})}));
