import{r as t,j as e}from"./vendor-react-D4yGots9.js";import{j as He,i as Ue,k as We,l as M,m as $e,n as Xe,o as Ze,p as be,q as Ve,u as Ye,r as Ke,t as G,v as Qe,w as Ge,x as Je,y as J,z as es,A as ee,B as F,C as ye,D as ve,E as ss,F as ls,G as as,H as is,I as ns,J as ts}from"./index-DstUiFGF.js";import"./vendor-DClHNS3s.js";const Ne={en:{input_resilience_title:"16) Input + Localization + Resilience",connectivity_online:"Connectivity: online",connectivity_offline:"Connectivity: offline",locale_label:"Locale",gamepad_preset_label:"Gamepad preset",toggle_gamepad_on:"Disable gamepad controls",toggle_gamepad_off:"Enable gamepad controls",retry_sync:"Retry sync",controller_hint:"Controller maps support palette, mode cycle, playback, and speed tuning."},es:{input_resilience_title:"16) Entrada + Localizacion + Resiliencia",connectivity_online:"Conectividad: en linea",connectivity_offline:"Conectividad: sin conexion",locale_label:"Idioma",gamepad_preset_label:"Perfil de mando",toggle_gamepad_on:"Desactivar mando",toggle_gamepad_off:"Activar mando",retry_sync:"Reintentar sincronizacion",controller_hint:"El mando controla paleta, cambio de modo, reproduccion y velocidad."}};function p(l,y){var v;return((v=Ne[l])==null?void 0:v[y])??Ne.en[y]}function ds({state:l,playheadMs:y,onUpdate:v,session:r,playerId:m,sessionError:se,onCreateSession:P,onQuickMatchSession:R,onJoinSession:x,onLeaveSession:I,onDispatchAction:k,guild:j,onCreateGuild:L,onJoinGuild:O,onScheduleGuildEvent:D,onCompleteGuildEvent:A,onReconnectSession:q,social:_e,onInviteFriend:le,onAcceptFriendInvite:ae,locale:d="en",onLocaleChange:E,gamepadEnabled:ie=!0,onToggleGamepad:z,gamepadPreset:fe="standard",onGamepadPresetChange:T,isOnline:ke=!0,onRetryConnectivity:B,observability:n,analytics:c}){const[N,ne]=t.useState(""),[H,Ce]=t.useState("strategist"),[U,Se]=t.useState("alt path"),[te,we]=t.useState("Night Ops"),[ce,Me]=t.useState(""),[re,Fe]=t.useState("operator"),[C,Pe]=t.useState("guild-night-ops"),[oe,Re]=t.useState("Night Ops Guild"),[de,Ie]=t.useState("Weekly Raid Drill"),[pe,Le]=t.useState("2026-02-16T20:00:00Z"),[h,Oe]=t.useState(""),[W,De]=t.useState("Abusive behavior"),[me,Ae]=t.useState("1"),[ue,qe]=t.useState("1"),[$,Ee]=t.useState("Weekly balance update"),[X,ze]=t.useState("focus"),[Z,Te]=t.useState("obj-root-cause"),[he,V]=t.useState(""),[Be,ge]=t.useState(()=>({player_id:(m??"director").toLowerCase(),friends:[],incoming_invites:[],outgoing_invites:[],recent_teammates:[]})),xe=!!(r!=null&&r.id&&k),g=_e??Be,i=(s,a,o)=>{if(xe){k==null||k(s,a);return}v(o)},b=t.useMemo(()=>l.narrative.nodes.find(s=>s.id===l.narrative.currentNodeId),[l.narrative.currentNodeId,l.narrative.nodes]),Y=t.useMemo(()=>{var o;const s=[l.raid.completed,l.campaign.depth>=3,l.narrative.history.length>=2,l.skills.loadout.equipped.length>=2,l.pvp.round>=3||l.pvp.winner!=null,l.time.forks.length>=2||((o=l.time.forks[0])==null?void 0:o.history.length)>1,l.boss.hp<l.boss.maxHp,l.director.lastOutcome!=="mixed",l.economy.crafted.length>=1,l.guild.operationsScore>0,l.cinematic.queue.length>=1,l.liveops.week>=2],a=s.filter(Boolean).length;return{done:a,total:s.length,pct:Math.round(a/s.length*100)}},[l]),_=l.safety??{mutedPlayerIds:[],blockedPlayerIds:[],reports:[]},je=l.teamComms??{pings:[]},S=l.sandbox??{enabled:!1},w=l.progression??{xp:0,level:1,nextLevelXp:200,milestones:[]},K=l.rewards??{streakDays:0,sessionClaimed:!1,masteryClaims:[]},f=t.useMemo(()=>l.outcome.status==="win"||l.outcome.status==="loss"?4:l.raid.objectives.some(a=>a.progress>0)||l.pvp.round>0||l.time.forks.length>1?l.campaign.depth>1||l.narrative.history.length>0?3:2:1,[l]);return e.jsxs("section",{className:"gameplay-mode",children:[e.jsxs("header",{className:"gameplay-header",children:[e.jsxs("div",{children:[e.jsx("h2",{children:"Gameplay Command Center"}),e.jsx("p",{children:"World-class mechanics stack: raids, campaign, narrative, PvP, time control, boss runs, and liveops."}),e.jsx("p",{children:"v1 core loop target session length: 18-22 minutes."}),e.jsxs("div",{className:"gameplay-inline",children:[e.jsx("input",{className:"search-input",value:te,onChange:s=>we(s.target.value),placeholder:"Session name","aria-label":"Session name"}),e.jsx("button",{className:"ghost-button",type:"button",onClick:()=>P==null?void 0:P(te),children:"Create multiplayer session"}),e.jsx("button",{className:"ghost-button",type:"button",onClick:()=>R==null?void 0:R(),children:"Quick matchmake"}),e.jsx("input",{className:"search-input",value:ce,onChange:s=>Me(s.target.value),placeholder:"Session id","aria-label":"Join session id"}),e.jsxs("select",{value:re,onChange:s=>Fe(s.target.value),children:[e.jsx("option",{value:"strategist",children:"Strategist"}),e.jsx("option",{value:"operator",children:"Operator"}),e.jsx("option",{value:"analyst",children:"Analyst"}),e.jsx("option",{value:"saboteur",children:"Saboteur"})]}),e.jsx("button",{className:"ghost-button",type:"button",onClick:()=>x==null?void 0:x(ce,m??"director",re),children:"Join session"}),r!=null&&r.id?e.jsx("button",{className:"ghost-button",type:"button",onClick:()=>I==null?void 0:I(),children:"Leave session"}):null,r!=null&&r.id?e.jsx("button",{className:"ghost-button",type:"button",onClick:()=>q==null?void 0:q(),children:"Reconnect"}):null]}),e.jsxs("p",{children:["Session: ",(r==null?void 0:r.id)??"local-only"," ",m?`• Player ${m}`:""," ",r?`• Version ${r.version}`:""]}),se?e.jsx("p",{children:se}):null]}),e.jsxs("div",{className:"gameplay-completion","aria-label":"Gameplay completion",children:[e.jsxs("strong",{children:[Y.done,"/",Y.total]}),e.jsxs("span",{children:[Y.pct,"% complete"]})]})]}),e.jsxs("div",{className:"gameplay-grid",children:[e.jsxs("article",{className:"gameplay-card",children:[e.jsx("h3",{children:"0) Core Loop + Outcomes"}),e.jsxs("p",{children:["Phase ",f,"/4 • Outcome ",l.outcome.status.replace("_"," ")," • Sandbox"," ",S.enabled?"ON":"OFF"]}),e.jsx("p",{children:l.outcome.reason}),e.jsx("div",{className:"gameplay-inline",children:e.jsx("button",{className:"ghost-button",type:"button",onClick:()=>i("session.toggle_sandbox",{enabled:!S.enabled},s=>$e(s,!S.enabled)),children:S.enabled?"Disable sandbox":"Enable sandbox"})}),e.jsxs("div",{className:"gameplay-list",children:[e.jsx("div",{className:"gameplay-node",children:e.jsxs("span",{children:[f>=1?"x":"o"," Brief: inspect run and set objective"]})}),e.jsx("div",{className:"gameplay-node",children:e.jsxs("span",{children:[f>=2?"x":"o"," Execute: complete raid and mission actions"]})}),e.jsx("div",{className:"gameplay-node",children:e.jsxs("span",{children:[f>=3?"x":"o"," Adapt: choose narrative and tune loadout/liveops"]})}),e.jsx("div",{className:"gameplay-node",children:e.jsxs("span",{children:[f>=4?"x":"o"," Resolve: finish with win/loss review"]})})]}),e.jsxs("div",{className:"gameplay-list",children:[e.jsx("p",{children:"Telemetry funnels:"}),e.jsx("div",{className:"gameplay-node",children:e.jsx("span",{children:"funnel.session_start"})}),e.jsx("div",{className:"gameplay-node",children:e.jsx("span",{children:"funnel.first_objective_progress"})}),e.jsx("div",{className:"gameplay-node",children:e.jsx("span",{children:"funnel.first_mission_outcome"})}),e.jsx("div",{className:"gameplay-node",children:e.jsx("span",{children:"funnel.run_outcome"})})]})]}),e.jsxs("article",{className:"gameplay-card",children:[e.jsx("h3",{children:"1) Co-op Incident Raids"}),e.jsxs("p",{children:["Party: ",l.raid.party.length," members"]}),e.jsxs("div",{className:"gameplay-inline",children:[e.jsx("input",{className:"search-input",value:N,onChange:s=>ne(s.target.value),placeholder:"Member name","aria-label":"Raid member name"}),e.jsxs("select",{value:H,onChange:s=>Ce(s.target.value),children:[e.jsx("option",{value:"strategist",children:"Strategist"}),e.jsx("option",{value:"operator",children:"Operator"}),e.jsx("option",{value:"analyst",children:"Analyst"}),e.jsx("option",{value:"saboteur",children:"Saboteur"})]}),e.jsx("button",{className:"ghost-button",type:"button",onClick:()=>{N.trim()&&(xe?x==null||x((r==null?void 0:r.id)??"",N.trim(),H):v(s=>He(s,N.trim(),H)),ne(""))},children:"Add member"})]}),e.jsx("div",{className:"gameplay-objectives",children:l.raid.objectives.map(s=>e.jsxs("div",{className:"gameplay-objective",children:[e.jsx("span",{children:s.label}),e.jsxs("span",{children:[s.progress,"/",s.target]}),e.jsx("button",{className:"ghost-button",type:"button",onClick:()=>i("raid.objective_progress",{objective_id:s.id,delta:25},a=>Xe(a,s.id,25)),children:"+25"})]},s.id))}),e.jsxs("div",{className:"gameplay-inline",children:[e.jsxs("select",{"aria-label":"Ping intent",value:X,onChange:s=>ze(s.target.value),children:[e.jsx("option",{value:"focus",children:"Focus"}),e.jsx("option",{value:"assist",children:"Assist"}),e.jsx("option",{value:"defend",children:"Defend"}),e.jsx("option",{value:"rotate",children:"Rotate"})]}),e.jsx("input",{className:"search-input",value:Z,onChange:s=>Te(s.target.value),placeholder:"obj-root-cause","aria-label":"Ping objective id"}),e.jsx("button",{className:"ghost-button",type:"button",onClick:()=>i("comms.ping",{intent:X,target_objective_id:Z},s=>Ze(s,X,Z,m??"director")),children:"Send ping"})]}),je.pings.length>0?e.jsx("div",{className:"gameplay-list",children:je.pings.slice(0,3).map(s=>e.jsxs("div",{className:"gameplay-node",children:[e.jsx("span",{children:s.intent}),e.jsx("span",{children:s.targetObjectiveId??"team-wide"})]},s.id))}):null]}),e.jsxs("article",{className:"gameplay-card",children:[e.jsx("h3",{children:"2) Roguelike Scenario Campaign"}),e.jsxs("p",{children:["Depth ",l.campaign.depth," • Lives ",l.campaign.lives]}),e.jsxs("p",{children:[l.campaign.currentMission.title," (difficulty ",l.campaign.currentMission.difficulty,")"]}),e.jsxs("p",{children:["Mission seed ",l.campaign.currentMission.missionSeed," • Hazards ",l.campaign.currentMission.hazards.join(", ")]}),e.jsxs("p",{children:["Pack ",l.campaign.currentMission.templateId??"legacy-template"," • Archetype"," ",l.campaign.currentMission.archetype??"legacy"," • Library ",l.campaign.currentMission.launchPackSize??0," templates"]}),e.jsxs("p",{children:["Quality ",l.campaign.currentMission.qualityScore??0," • Novelty ",l.campaign.currentMission.noveltyScore??0," • Repetition penalty ",l.campaign.currentMission.repetitionPenalty??0]}),e.jsxs("p",{children:["Mission history ",l.campaign.missionHistory.length," • Distinct clears ",new Set(l.campaign.completedMissionIds).size]}),e.jsx("p",{children:l.campaign.currentMission.blueprint}),e.jsx("p",{children:"Difficulty ramp bands: D1-1, D2-3, D4-5, D6-7, D8-9, D10+."}),e.jsxs("div",{className:"gameplay-inline",children:[e.jsx("button",{className:"primary-button",type:"button",onClick:()=>i("campaign.resolve_mission",{success:!0},s=>be(s,!0)),children:"Mission success"}),e.jsx("button",{className:"ghost-button",type:"button",onClick:()=>i("campaign.resolve_mission",{success:!1},s=>be(s,!1)),children:"Mission fail"})]})]}),e.jsxs("article",{className:"gameplay-card",children:[e.jsx("h3",{children:"3) Branching Narrative Director"}),e.jsx("p",{children:b==null?void 0:b.title}),e.jsxs("p",{children:["Tension ",l.narrative.tension]}),e.jsx("div",{className:"gameplay-list",children:((b==null?void 0:b.choices)??[]).map(s=>e.jsx("button",{className:"ghost-button",type:"button",onClick:()=>i("narrative.choose",{choice_id:s.id},a=>Ve(a,s.id)),children:s.label},s.id))})]}),e.jsxs("article",{className:"gameplay-card",children:[e.jsx("h3",{children:"4) Skill Tree + Loadout"}),e.jsxs("p",{children:["Level ",w.level," • XP ",w.xp,"/",w.nextLevelXp," • Milestones"," ",w.milestones.length]}),e.jsxs("p",{children:["Points ",l.skills.points," • Equipped ",l.skills.loadout.equipped.length,"/",l.skills.loadout.capacity," • Slots C/U/P ",l.skills.loadout.slotCaps.core,"/",l.skills.loadout.slotCaps.utility,"/",l.skills.loadout.slotCaps.power]}),e.jsx("div",{className:"gameplay-list",children:l.skills.nodes.map(s=>e.jsxs("div",{className:"gameplay-node",children:[e.jsxs("span",{children:[s.label," (",s.cost,") • T",s.tier," • ",s.loadoutSlot," • L",s.minLevel]}),s.requires.length>0?e.jsxs("small",{children:["Requires ",s.requires.join(", ")]}):e.jsx("small",{children:"Starter node"}),s.requiredMilestones.length>0?e.jsxs("small",{children:["Milestones: ",s.requiredMilestones.join(", ")]}):null,(()=>{const a=Ue(l,s.id),o=We(l,s.id);return e.jsxs(e.Fragment,{children:[!s.unlocked&&!a.allowed?e.jsx("small",{children:a.reason}):null,s.unlocked&&!o.allowed?e.jsx("small",{children:o.reason}):null,e.jsx("button",{className:"ghost-button",type:"button","aria-label":`Unlock ${s.label}`,disabled:!s.unlocked&&!a.allowed,onClick:()=>i("skills.unlock",{player_id:m??"director",skill_id:s.id},u=>Ye(u,s.id)),children:s.unlocked?"Unlocked":"Unlock"}),e.jsx("button",{className:"ghost-button",type:"button","aria-label":`Equip ${s.label}`,disabled:!o.allowed,onClick:()=>i("skills.equip",{player_id:m??"director",skill_id:s.id},u=>Ke(u,s.id)),children:"Equip"})]})})()]},s.id))})]}),e.jsxs("article",{className:"gameplay-card",children:[e.jsx("h3",{children:"5) Asymmetric PvP"}),e.jsxs("p",{children:["Round ",l.pvp.round," • Stability ",l.pvp.stability," • Sabotage ",l.pvp.sabotage]}),e.jsxs("div",{className:"gameplay-inline",children:[e.jsx("button",{className:"ghost-button",type:"button",onClick:()=>i("pvp.act",{action:"sabotage"},s=>G(s,"sabotage")),children:"Sabotage"}),e.jsx("button",{className:"ghost-button",type:"button",onClick:()=>i("pvp.act",{action:"stabilize"},s=>G(s,"stabilize")),children:"Stabilize"}),e.jsx("button",{className:"ghost-button",type:"button",onClick:()=>i("pvp.act",{action:"scan"},s=>G(s,"scan")),children:"Scan"})]})]}),e.jsxs("article",{className:"gameplay-card",children:[e.jsx("h3",{children:"6) Time Manipulation"}),e.jsxs("p",{children:["Active fork: ",l.time.activeForkId]}),e.jsxs("div",{className:"gameplay-inline",children:[e.jsx("input",{className:"search-input",value:U,onChange:s=>Se(s.target.value),"aria-label":"Fork label"}),e.jsx("button",{className:"ghost-button",type:"button",onClick:()=>i("time.create_fork",{label:U,playhead_ms:y},s=>Qe(s,U,y)),children:"Create fork"}),e.jsx("button",{className:"ghost-button",type:"button",onClick:()=>i("time.rewind",{amount_ms:1e3},s=>Ge(s,1e3)),children:"Rewind 1s"}),e.jsx("button",{className:"ghost-button",type:"button",onClick:()=>i("time.merge",{fork_id:l.time.activeForkId},s=>Je(s,s.time.activeForkId)),children:"Merge"})]})]}),e.jsxs("article",{className:"gameplay-card",children:[e.jsx("h3",{children:"7) Boss Encounter Runs"}),e.jsxs("p",{children:[l.boss.name," • Phase ",l.boss.phase," • HP ",l.boss.hp,"/",l.boss.maxHp]}),e.jsx("p",{children:l.boss.phaseMechanic}),e.jsxs("p",{children:["Current vulnerability: ",l.boss.vulnerability]}),e.jsxs("div",{className:"gameplay-inline",children:[e.jsx("button",{className:"ghost-button",type:"button",onClick:()=>i("boss.act",{action:"strike"},s=>J(s,"strike")),children:"Strike"}),e.jsx("button",{className:"ghost-button",type:"button",onClick:()=>i("boss.act",{action:"shield"},s=>J(s,"shield")),children:"Shield"}),e.jsx("button",{className:"ghost-button",type:"button",onClick:()=>i("boss.act",{action:"exploit"},s=>J(s,"exploit")),children:"Exploit"})]})]}),e.jsxs("article",{className:"gameplay-card",children:[e.jsx("h3",{children:"8) Adaptive AI Dungeon Master"}),e.jsxs("p",{children:["Risk ",l.director.risk," • Outcome ",l.director.lastOutcome]}),e.jsx("p",{children:l.director.hint}),e.jsx("button",{className:"ghost-button",type:"button",onClick:()=>{var u;const s=l.pvp.sabotage>l.pvp.stability?2:0,a=Math.floor((((u=l.raid.objectives[0])==null?void 0:u.progress)??0)/40),o=900+l.pvp.fog*10;i("director.evaluate",{failures:s,retries:a,latency_ms:o},Q=>es(Q,{failures:s,retries:a,latencyMs:o}))},children:"Recompute guidance"})]}),e.jsxs("article",{className:"gameplay-card",children:[e.jsx("h3",{children:"9) Mission Economy + Crafting"}),e.jsxs("p",{children:["Credits ",l.economy.credits," • Materials ",l.economy.materials]}),e.jsxs("p",{children:["Reserve target ",l.economy.reserveTarget," • Inflation index ",l.economy.inflationIndex.toFixed(2)," (",l.economy.inflationIndex>1.7?"hot":l.economy.inflationIndex>1.2?"elevated":"stable",")"]}),e.jsxs("div",{className:"gameplay-inline",children:[e.jsx("button",{className:"ghost-button",type:"button",onClick:()=>i("economy.craft",{recipe_id:"stability_patch"},s=>ee(s,"stability_patch")),children:"Craft stability patch"}),e.jsx("button",{className:"ghost-button",type:"button",onClick:()=>i("economy.craft",{recipe_id:"precision_lens"},s=>ee(s,"precision_lens")),children:"Craft precision lens"}),e.jsx("button",{className:"ghost-button",type:"button",onClick:()=>i("economy.craft",{recipe_id:"overclock_core"},s=>ee(s,"overclock_core")),children:"Craft overclock core"})]}),e.jsxs("div",{className:"gameplay-list",children:[e.jsxs("p",{children:["Reward cadence: streak ",K.streakDays," • session ",K.sessionClaimed?"claimed":"open"," • mastery"," ",K.masteryClaims.length]}),e.jsxs("div",{className:"gameplay-inline",children:[e.jsx("button",{className:"ghost-button",type:"button",disabled:!M(l,"daily").allowed,onClick:()=>i("rewards.claim",{kind:"daily"},s=>F(s,"daily")),children:"Claim daily"}),e.jsx("button",{className:"ghost-button",type:"button",disabled:!M(l,"session").allowed,onClick:()=>i("rewards.claim",{kind:"session"},s=>F(s,"session")),children:"Claim session"}),e.jsx("button",{className:"ghost-button",type:"button",disabled:!M(l,"streak").allowed,onClick:()=>i("rewards.claim",{kind:"streak"},s=>F(s,"streak")),children:"Claim streak"}),e.jsx("button",{className:"ghost-button",type:"button",disabled:!M(l,"mastery","raid_mastery").allowed,onClick:()=>i("rewards.claim",{kind:"mastery",mastery_id:"raid_mastery"},s=>F(s,"mastery","raid_mastery")),children:"Claim raid mastery"})]})]})]}),e.jsxs("article",{className:"gameplay-card",children:[e.jsx("h3",{children:"10) Guild Operations"}),e.jsxs("p",{children:[l.guild.name," • Ops score ",l.guild.operationsScore," • Events ",l.guild.eventsCompleted]}),e.jsxs("div",{className:"gameplay-inline",children:[e.jsx("input",{className:"search-input",value:C,onChange:s=>Pe(s.target.value),placeholder:"Guild id","aria-label":"Guild id"}),e.jsx("input",{className:"search-input",value:oe,onChange:s=>Re(s.target.value),placeholder:"Guild name","aria-label":"Guild name"}),e.jsx("button",{className:"ghost-button",type:"button",onClick:()=>L==null?void 0:L(C,oe),children:"Create guild"}),e.jsx("button",{className:"ghost-button",type:"button",onClick:()=>O==null?void 0:O(C,N.trim()||m||"director"),children:"Join guild"})]}),e.jsxs("div",{className:"gameplay-inline",children:[e.jsx("input",{className:"search-input",value:de,onChange:s=>Ie(s.target.value),placeholder:"Event title","aria-label":"Guild event title"}),e.jsx("input",{className:"search-input",value:pe,onChange:s=>Le(s.target.value),placeholder:"2026-02-16T20:00:00Z","aria-label":"Guild event schedule"}),e.jsx("button",{className:"ghost-button",type:"button",onClick:()=>D==null?void 0:D(C,de,pe),children:"Schedule event"})]}),j?e.jsxs("div",{className:"gameplay-list",children:[e.jsxs("p",{children:[j.member_count," members • Score ",j.operations_score]}),j.scoreboard.slice(0,4).map(s=>e.jsxs("div",{className:"gameplay-node",children:[e.jsx("span",{children:s.player_id}),e.jsx("span",{children:s.score})]},s.player_id)),j.events.slice(-3).map(s=>e.jsxs("div",{className:"gameplay-node",children:[e.jsx("span",{children:s.title}),e.jsx("button",{className:"ghost-button",type:"button",onClick:()=>A==null?void 0:A(j.id,s.id,10),children:"Complete"})]},s.id))]}):null,e.jsxs("div",{className:"gameplay-inline",children:[e.jsx("button",{className:"ghost-button",type:"button",onClick:()=>i("guild.op",{impact:6},s=>ye(s,6)),children:"Positive op"}),e.jsx("button",{className:"ghost-button",type:"button",onClick:()=>i("guild.op",{impact:-3},s=>ye(s,-3)),children:"Risky op"})]})]}),e.jsxs("article",{className:"gameplay-card",children:[e.jsx("h3",{children:"11) Cinematic Event Engine"}),e.jsxs("p",{children:[l.cinematic.queue.length," queued events"]}),e.jsxs("div",{className:"gameplay-inline",children:[e.jsx("button",{className:"ghost-button",type:"button",onClick:()=>i("cinematic.emit",{event_type:"critical",message:"Critical cascade detected",intensity:3},s=>ve(s,"critical","Critical cascade detected",3)),children:"Critical beat"}),e.jsx("button",{className:"ghost-button",type:"button",onClick:()=>i("cinematic.emit",{event_type:"success",message:"System stabilizing",intensity:2},s=>ve(s,"success","System stabilizing",2)),children:"Success beat"})]})]}),e.jsxs("article",{className:"gameplay-card",children:[e.jsx("h3",{children:"12) Seasonal LiveOps"}),e.jsxs("p",{children:[l.liveops.season," • Week ",l.liveops.week]}),e.jsx("p",{children:l.liveops.challenge.title}),e.jsxs("p",{children:["Difficulty x",l.liveops.difficultyFactor.toFixed(2)," • Reward x",l.liveops.rewardMultiplier.toFixed(2)]}),e.jsxs("div",{className:"gameplay-inline",children:[e.jsx("button",{className:"ghost-button",type:"button",onClick:()=>i("liveops.advance_week",{},s=>ss(s)),children:"Next week"}),e.jsx("button",{className:"ghost-button",type:"button",onClick:()=>i("liveops.progress",{delta:1},s=>ls(s,1)),children:"Progress challenge"})]}),e.jsxs("div",{className:"gameplay-inline",children:[e.jsx("input",{className:"search-input",value:me,onChange:s=>Ae(s.target.value),placeholder:"Difficulty (0.6-1.6)","aria-label":"LiveOps difficulty factor"}),e.jsx("input",{className:"search-input",value:ue,onChange:s=>qe(s.target.value),placeholder:"Reward (0.5-2.0)","aria-label":"LiveOps reward multiplier"})]}),e.jsxs("div",{className:"gameplay-inline",children:[e.jsx("input",{className:"search-input",value:$,onChange:s=>Ee(s.target.value),placeholder:"Tuning note","aria-label":"LiveOps tuning note"}),e.jsx("button",{className:"ghost-button",type:"button",onClick:()=>{const s=Number.parseFloat(me),a=Number.parseFloat(ue);i("liveops.balance",{difficulty_factor:Number.isFinite(s)?s:1,reward_multiplier:Number.isFinite(a)?a:1,note:$},o=>as(o,{difficultyFactor:Number.isFinite(s)?s:1,rewardMultiplier:Number.isFinite(a)?a:1,note:$}))},children:"Apply balancing"})]}),l.liveops.tuningHistory.length>0?e.jsx("div",{className:"gameplay-list",children:l.liveops.tuningHistory.slice(0,3).map(s=>e.jsxs("div",{className:"gameplay-node",children:[e.jsxs("span",{children:[new Date(s.changedAt).toLocaleDateString()," • ",s.note]}),e.jsxs("span",{children:["D x",s.difficultyFactor.toFixed(2)," / R x",s.rewardMultiplier.toFixed(2)]})]},s.id))}):null]}),e.jsxs("article",{className:"gameplay-card",children:[e.jsx("h3",{children:"13) Safety and Moderation"}),e.jsxs("p",{children:["Muted ",_.mutedPlayerIds.length," • Blocked ",_.blockedPlayerIds.length," • Reports"," ",_.reports.length]}),e.jsxs("div",{className:"gameplay-inline",children:[e.jsx("input",{className:"search-input",value:h,onChange:s=>Oe(s.target.value),placeholder:"Player id","aria-label":"Safety player id"}),e.jsx("input",{className:"search-input",value:W,onChange:s=>De(s.target.value),placeholder:"Reason","aria-label":"Safety reason"})]}),e.jsxs("div",{className:"gameplay-inline",children:[e.jsx("button",{className:"ghost-button",type:"button",onClick:()=>i("safety.mute",{target_player_id:h},s=>is(s,h)),children:"Mute player"}),e.jsx("button",{className:"ghost-button",type:"button",onClick:()=>i("safety.block",{target_player_id:h},s=>ns(s,h)),children:"Block player"}),e.jsx("button",{className:"ghost-button",type:"button",onClick:()=>i("safety.report",{target_player_id:h,reason:W},s=>ts(s,h,W)),children:"Report player"})]}),_.reports.length>0?e.jsx("div",{className:"gameplay-list",children:_.reports.slice(0,3).map(s=>e.jsxs("div",{className:"gameplay-node",children:[e.jsx("span",{children:s.targetPlayerId}),e.jsx("span",{children:s.reason})]},s.id))}):null]}),e.jsxs("article",{className:"gameplay-card",children:[e.jsx("h3",{children:"14) Observability + Funnel Analytics"}),e.jsxs("p",{children:["Sessions ",(n==null?void 0:n.metrics.total_sessions)??0," • Running ",(n==null?void 0:n.metrics.running_sessions)??0]}),e.jsxs("p",{children:["Avg latency ",Math.round((n==null?void 0:n.metrics.avg_latency_ms)??0),"ms • P95"," ",Math.round((n==null?void 0:n.metrics.p95_latency_ms)??0),"ms"]}),e.jsxs("p",{children:["Failure rate ",((n==null?void 0:n.metrics.failure_rate_pct)??0).toFixed(2),"% • Challenge completion"," ",((n==null?void 0:n.metrics.challenge_completion_rate_pct)??0).toFixed(2),"%"]}),e.jsxs("div",{className:"gameplay-list",children:[e.jsx("p",{children:"Funnels"}),e.jsxs("div",{className:"gameplay-node",children:[e.jsx("span",{children:"Session start"}),e.jsx("span",{children:(c==null?void 0:c.funnels.session_start)??0})]}),e.jsxs("div",{className:"gameplay-node",children:[e.jsx("span",{children:"First objective progress"}),e.jsx("span",{children:(c==null?void 0:c.funnels.first_objective_progress)??0})]}),e.jsxs("div",{className:"gameplay-node",children:[e.jsx("span",{children:"First mission outcome"}),e.jsx("span",{children:(c==null?void 0:c.funnels.first_mission_outcome)??0})]}),e.jsxs("div",{className:"gameplay-node",children:[e.jsx("span",{children:"Run outcome"}),e.jsx("span",{children:(c==null?void 0:c.funnels.run_outcome)??0})]})]}),e.jsx("div",{className:"gameplay-list",children:e.jsxs("p",{children:["Retention D1 ",((c==null?void 0:c.retention.d1_pct)??0).toFixed(2),"% • D7"," ",((c==null?void 0:c.retention.d7_pct)??0).toFixed(2),"% • D30 ",((c==null?void 0:c.retention.d30_pct)??0).toFixed(2),"%"]})}),n!=null&&n.alerts.length?e.jsx("div",{className:"gameplay-list",children:n.alerts.slice(0,3).map(s=>e.jsxs("div",{className:"gameplay-node",children:[e.jsx("span",{children:s.severity.toUpperCase()}),e.jsx("span",{children:s.message})]},s.id))}):null]}),e.jsxs("article",{className:"gameplay-card",children:[e.jsx("h3",{children:"15) Friends + Invites"}),e.jsxs("p",{children:["Friends ",g.friends.length," • Incoming ",g.incoming_invites.length," • Outgoing"," ",g.outgoing_invites.length]}),e.jsxs("p",{children:["Recent teammates:"," ",g.recent_teammates.length?g.recent_teammates.slice(0,4).join(", "):"none yet"]}),e.jsxs("div",{className:"gameplay-inline",children:[e.jsx("input",{className:"search-input",value:he,onChange:s=>V(s.target.value),placeholder:"Player id","aria-label":"Friend player id"}),e.jsx("button",{className:"ghost-button",type:"button",onClick:()=>{const s=he.trim().toLowerCase();if(s){if(le){le(s),V("");return}ge(a=>{if(a.friends.includes(s)||a.outgoing_invites.some(Q=>Q.to_player_id===s))return a;const u={id:`invite-local-${a.outgoing_invites.length+1}`,from_player_id:a.player_id,to_player_id:s,status:"pending",created_at:new Date().toISOString()};return{...a,outgoing_invites:[u,...a.outgoing_invites].slice(0,10)}}),V("")}},children:"Invite friend"})]}),g.incoming_invites.length>0?e.jsx("div",{className:"gameplay-list",children:g.incoming_invites.slice(0,3).map(s=>e.jsxs("div",{className:"gameplay-node",children:[e.jsx("span",{children:s.from_player_id}),e.jsx("button",{className:"ghost-button",type:"button",onClick:()=>{if(ae){ae(s.id);return}ge(a=>({...a,incoming_invites:a.incoming_invites.filter(o=>o.id!==s.id),friends:a.friends.includes(s.from_player_id)?a.friends:[...a.friends,s.from_player_id]}))},children:"Accept"})]},s.id))}):null]}),e.jsxs("article",{className:"gameplay-card",children:[e.jsx("h3",{children:p(d,"input_resilience_title")}),e.jsx("p",{children:ke?p(d,"connectivity_online"):p(d,"connectivity_offline")}),e.jsx("p",{children:p(d,"controller_hint")}),e.jsxs("div",{className:"gameplay-inline",children:[e.jsxs("label",{children:[p(d,"locale_label"),e.jsxs("select",{"aria-label":"Gameplay locale",value:d,onChange:s=>E==null?void 0:E(s.target.value),children:[e.jsx("option",{value:"en",children:"English"}),e.jsx("option",{value:"es",children:"Espanol"})]})]}),e.jsxs("label",{children:[p(d,"gamepad_preset_label"),e.jsxs("select",{"aria-label":"Gamepad preset",value:fe,onChange:s=>T==null?void 0:T(s.target.value),children:[e.jsx("option",{value:"standard",children:"Standard"}),e.jsx("option",{value:"lefty",children:"Lefty"})]})]})]}),e.jsxs("div",{className:"gameplay-inline",children:[e.jsx("button",{className:"ghost-button",type:"button",onClick:()=>z==null?void 0:z(!ie),children:ie?p(d,"toggle_gamepad_on"):p(d,"toggle_gamepad_off")}),e.jsx("button",{className:"ghost-button",type:"button",onClick:()=>B==null?void 0:B(),children:p(d,"retry_sync")})]})]})]})]})}export{ds as default};
