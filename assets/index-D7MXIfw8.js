import{j as e}from"./vendor-react-D4yGots9.js";import{d as u,c as g,T as n}from"./index-M_xrkY0P.js";import"./vendor-DClHNS3s.js";function s(a,t,l){return Math.min(l,Math.max(t,a))}function y({baseTrace:a,compareTrace:t,playheadMs:l,onExit:i,safeExport:o}){const d=u(a,t),p=a.metadata.wallTimeMs||1,r=t.metadata.wallTimeMs||1,m=s(l/p*100,0,100),c=s(l/r*100,0,100),h={generatedAt:new Date().toISOString(),base:{id:a.id,name:a.name,parentTraceId:a.parentTraceId,startedAt:a.startedAt,endedAt:a.endedAt},compare:{id:t.id,name:t.name,parentTraceId:t.parentTraceId,branchPointStepId:t.branchPointStepId,replay:t.replay,startedAt:t.startedAt,endedAt:t.endedAt},deltas:{added:d.addedSteps.length,removed:d.removedSteps.length,changed:d.changedSteps.length,costDeltaUsd:d.costDeltaUsd,wallTimeDeltaMs:d.wallTimeDeltaMs},alignment:d.alignedSteps,changedPairs:d.changedPairs,safeExport:!!o};return e.jsxs("section",{className:"compare-view","data-help":!0,"data-tour":"compare-view","data-help-title":"Compare runs","data-help-body":"Side-by-side playback showing deltas in steps, cost, and wall time after a replay.","data-help-placement":"top",children:[e.jsxs("div",{className:"compare-header",children:[e.jsxs("div",{children:[e.jsx("div",{className:"compare-title",children:"Compare Runs"}),e.jsxs("div",{className:"compare-subtitle",children:["+",d.addedSteps.length," steps, ",d.costDeltaUsd.toFixed(3)," USD, ",d.wallTimeDeltaMs,"ms"]})]}),e.jsxs("div",{className:"compare-actions",children:[e.jsx("button",{className:"ghost-button",type:"button",onClick:()=>g(`agent-director-diff-${a.id}-${t.id}.json`,h),title:"Export diff summary","data-help":!0,"data-help-title":"Export diff","data-help-body":"Download a JSON summary you can share or archive.","data-help-placement":"bottom",children:"Export diff"}),e.jsx("button",{className:"ghost-button",type:"button",onClick:i,"data-help":!0,"data-help-title":"Exit compare","data-help-body":"Return to the primary run timeline.","data-help-placement":"bottom",children:"Exit compare"})]})]}),e.jsxs("div",{className:"compare-grid",children:[e.jsxs("div",{className:"compare-pane","data-help":!0,"data-help-title":"Base run","data-help-body":"Original timeline for baseline comparison.","data-help-placement":"top",children:[e.jsx("div",{className:"compare-pane-title",children:"Base run"}),e.jsx(n,{trace:a,steps:a.steps,selectedStepId:null,onSelectStep:()=>{},playheadPct:m,playheadMs:l,windowRange:null,laneHeight:110,cardHeight:100,compactHeight:78})]}),e.jsxs("div",{className:"compare-pane","data-help":!0,"data-help-title":"Replay run","data-help-body":"Replay timeline to validate improvements.","data-help-placement":"top",children:[e.jsx("div",{className:"compare-pane-title",children:"Replay run"}),e.jsx(n,{trace:t,steps:t.steps,selectedStepId:null,onSelectStep:()=>{},playheadPct:c,playheadMs:l,windowRange:null,laneHeight:110,cardHeight:100,compactHeight:78})]})]})]})}export{y as default};
