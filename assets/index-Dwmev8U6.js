const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-DD7Pu50G.js","assets/index-B5DZHykP.css"])))=>i.map(i=>d[i]);
(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();var Ls=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ak(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Rk={exports:{}},al={},Ik={exports:{}},re={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fs=Symbol.for("react.element"),JP=Symbol.for("react.portal"),ZP=Symbol.for("react.fragment"),eN=Symbol.for("react.strict_mode"),tN=Symbol.for("react.profiler"),nN=Symbol.for("react.provider"),rN=Symbol.for("react.context"),iN=Symbol.for("react.forward_ref"),aN=Symbol.for("react.suspense"),sN=Symbol.for("react.memo"),oN=Symbol.for("react.lazy"),Pg=Symbol.iterator;function lN(e){return e===null||typeof e!="object"?null:(e=Pg&&e[Pg]||e["@@iterator"],typeof e=="function"?e:null)}var Dk={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Ok=Object.assign,Lk={};function Ui(e,t,n){this.props=e,this.context=t,this.refs=Lk,this.updater=n||Dk}Ui.prototype.isReactComponent={};Ui.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Ui.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function qk(){}qk.prototype=Ui.prototype;function fv(e,t,n){this.props=e,this.context=t,this.refs=Lk,this.updater=n||Dk}var hv=fv.prototype=new qk;hv.constructor=fv;Ok(hv,Ui.prototype);hv.isPureReactComponent=!0;var Ng=Array.isArray,Fk=Object.prototype.hasOwnProperty,pv={current:null},Vk={key:!0,ref:!0,__self:!0,__source:!0};function $k(e,t,n){var r,i={},a=null,s=null;if(t!=null)for(r in t.ref!==void 0&&(s=t.ref),t.key!==void 0&&(a=""+t.key),t)Fk.call(t,r)&&!Vk.hasOwnProperty(r)&&(i[r]=t[r]);var o=arguments.length-2;if(o===1)i.children=n;else if(1<o){for(var l=Array(o),u=0;u<o;u++)l[u]=arguments[u+2];i.children=l}if(e&&e.defaultProps)for(r in o=e.defaultProps,o)i[r]===void 0&&(i[r]=o[r]);return{$$typeof:fs,type:e,key:a,ref:s,props:i,_owner:pv.current}}function uN(e,t){return{$$typeof:fs,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function mv(e){return typeof e=="object"&&e!==null&&e.$$typeof===fs}function cN(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Ag=/\/+/g;function mu(e,t){return typeof e=="object"&&e!==null&&e.key!=null?cN(""+e.key):t.toString(36)}function lo(e,t,n,r,i){var a=typeof e;(a==="undefined"||a==="boolean")&&(e=null);var s=!1;if(e===null)s=!0;else switch(a){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case fs:case JP:s=!0}}if(s)return s=e,i=i(s),e=r===""?"."+mu(s,0):r,Ng(i)?(n="",e!=null&&(n=e.replace(Ag,"$&/")+"/"),lo(i,t,n,"",function(u){return u})):i!=null&&(mv(i)&&(i=uN(i,n+(!i.key||s&&s.key===i.key?"":(""+i.key).replace(Ag,"$&/")+"/")+e)),t.push(i)),1;if(s=0,r=r===""?".":r+":",Ng(e))for(var o=0;o<e.length;o++){a=e[o];var l=r+mu(a,o);s+=lo(a,t,n,l,i)}else if(l=lN(e),typeof l=="function")for(e=l.call(e),o=0;!(a=e.next()).done;)a=a.value,l=r+mu(a,o++),s+=lo(a,t,n,l,i);else if(a==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function qs(e,t,n){if(e==null)return e;var r=[],i=0;return lo(e,r,"","",function(a){return t.call(n,a,i++)}),r}function dN(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var ct={current:null},uo={transition:null},fN={ReactCurrentDispatcher:ct,ReactCurrentBatchConfig:uo,ReactCurrentOwner:pv};function Bk(){throw Error("act(...) is not supported in production builds of React.")}re.Children={map:qs,forEach:function(e,t,n){qs(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return qs(e,function(){t++}),t},toArray:function(e){return qs(e,function(t){return t})||[]},only:function(e){if(!mv(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};re.Component=Ui;re.Fragment=ZP;re.Profiler=tN;re.PureComponent=fv;re.StrictMode=eN;re.Suspense=aN;re.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=fN;re.act=Bk;re.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=Ok({},e.props),i=e.key,a=e.ref,s=e._owner;if(t!=null){if(t.ref!==void 0&&(a=t.ref,s=pv.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var o=e.type.defaultProps;for(l in t)Fk.call(t,l)&&!Vk.hasOwnProperty(l)&&(r[l]=t[l]===void 0&&o!==void 0?o[l]:t[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){o=Array(l);for(var u=0;u<l;u++)o[u]=arguments[u+2];r.children=o}return{$$typeof:fs,type:e.type,key:i,ref:a,props:r,_owner:s}};re.createContext=function(e){return e={$$typeof:rN,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:nN,_context:e},e.Consumer=e};re.createElement=$k;re.createFactory=function(e){var t=$k.bind(null,e);return t.type=e,t};re.createRef=function(){return{current:null}};re.forwardRef=function(e){return{$$typeof:iN,render:e}};re.isValidElement=mv;re.lazy=function(e){return{$$typeof:oN,_payload:{_status:-1,_result:e},_init:dN}};re.memo=function(e,t){return{$$typeof:sN,type:e,compare:t===void 0?null:t}};re.startTransition=function(e){var t=uo.transition;uo.transition={};try{e()}finally{uo.transition=t}};re.unstable_act=Bk;re.useCallback=function(e,t){return ct.current.useCallback(e,t)};re.useContext=function(e){return ct.current.useContext(e)};re.useDebugValue=function(){};re.useDeferredValue=function(e){return ct.current.useDeferredValue(e)};re.useEffect=function(e,t){return ct.current.useEffect(e,t)};re.useId=function(){return ct.current.useId()};re.useImperativeHandle=function(e,t,n){return ct.current.useImperativeHandle(e,t,n)};re.useInsertionEffect=function(e,t){return ct.current.useInsertionEffect(e,t)};re.useLayoutEffect=function(e,t){return ct.current.useLayoutEffect(e,t)};re.useMemo=function(e,t){return ct.current.useMemo(e,t)};re.useReducer=function(e,t,n){return ct.current.useReducer(e,t,n)};re.useRef=function(e){return ct.current.useRef(e)};re.useState=function(e){return ct.current.useState(e)};re.useSyncExternalStore=function(e,t,n){return ct.current.useSyncExternalStore(e,t,n)};re.useTransition=function(){return ct.current.useTransition()};re.version="18.3.1";Ik.exports=re;var S=Ik.exports;const hN=Ak(S);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pN=S,mN=Symbol.for("react.element"),vN=Symbol.for("react.fragment"),yN=Object.prototype.hasOwnProperty,gN=pN.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,wN={key:!0,ref:!0,__self:!0,__source:!0};function zk(e,t,n){var r,i={},a=null,s=null;n!==void 0&&(a=""+n),t.key!==void 0&&(a=""+t.key),t.ref!==void 0&&(s=t.ref);for(r in t)yN.call(t,r)&&!wN.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:mN,type:e,key:a,ref:s,props:i,_owner:gN.current}}al.Fragment=vN;al.jsx=zk;al.jsxs=zk;Rk.exports=al;var h=Rk.exports,Jp={},Uk={exports:{}},Ct={},Gk={exports:{}},Hk={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(R,q){var G=R.length;R.push(q);e:for(;0<G;){var z=G-1>>>1,ae=R[z];if(0<i(ae,q))R[z]=q,R[G]=ae,G=z;else break e}}function n(R){return R.length===0?null:R[0]}function r(R){if(R.length===0)return null;var q=R[0],G=R.pop();if(G!==q){R[0]=G;e:for(var z=0,ae=R.length,Pe=ae>>>1;z<Pe;){var oe=2*(z+1)-1,ce=R[oe],$=oe+1,de=R[$];if(0>i(ce,G))$<ae&&0>i(de,ce)?(R[z]=de,R[$]=G,z=$):(R[z]=ce,R[oe]=G,z=oe);else if($<ae&&0>i(de,G))R[z]=de,R[$]=G,z=$;else break e}}return q}function i(R,q){var G=R.sortIndex-q.sortIndex;return G!==0?G:R.id-q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var s=Date,o=s.now();e.unstable_now=function(){return s.now()-o}}var l=[],u=[],c=1,d=null,f=3,m=!1,v=!1,p=!1,b=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(R){for(var q=n(u);q!==null;){if(q.callback===null)r(u);else if(q.startTime<=R)r(u),q.sortIndex=q.expirationTime,t(l,q);else break;q=n(u)}}function _(R){if(p=!1,x(R),!v)if(n(l)!==null)v=!0,le(E);else{var q=n(u);q!==null&&ie(_,q.startTime-R)}}function E(R,q){v=!1,p&&(p=!1,y(C),C=-1),m=!0;var G=f;try{for(x(q),d=n(l);d!==null&&(!(d.expirationTime>q)||R&&!A());){var z=d.callback;if(typeof z=="function"){d.callback=null,f=d.priorityLevel;var ae=z(d.expirationTime<=q);q=e.unstable_now(),typeof ae=="function"?d.callback=ae:d===n(l)&&r(l),x(q)}else r(l);d=n(l)}if(d!==null)var Pe=!0;else{var oe=n(u);oe!==null&&ie(_,oe.startTime-q),Pe=!1}return Pe}finally{d=null,f=G,m=!1}}var T=!1,M=null,C=-1,j=5,N=-1;function A(){return!(e.unstable_now()-N<j)}function I(){if(M!==null){var R=e.unstable_now();N=R;var q=!0;try{q=M(!0,R)}finally{q?L():(T=!1,M=null)}}else T=!1}var L;if(typeof g=="function")L=function(){g(I)};else if(typeof MessageChannel<"u"){var K=new MessageChannel,V=K.port2;K.port1.onmessage=I,L=function(){V.postMessage(null)}}else L=function(){b(I,0)};function le(R){M=R,T||(T=!0,L())}function ie(R,q){C=b(function(){R(e.unstable_now())},q)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(R){R.callback=null},e.unstable_continueExecution=function(){v||m||(v=!0,le(E))},e.unstable_forceFrameRate=function(R){0>R||125<R?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):j=0<R?Math.floor(1e3/R):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return n(l)},e.unstable_next=function(R){switch(f){case 1:case 2:case 3:var q=3;break;default:q=f}var G=f;f=q;try{return R()}finally{f=G}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(R,q){switch(R){case 1:case 2:case 3:case 4:case 5:break;default:R=3}var G=f;f=R;try{return q()}finally{f=G}},e.unstable_scheduleCallback=function(R,q,G){var z=e.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?z+G:z):G=z,R){case 1:var ae=-1;break;case 2:ae=250;break;case 5:ae=1073741823;break;case 4:ae=1e4;break;default:ae=5e3}return ae=G+ae,R={id:c++,callback:q,priorityLevel:R,startTime:G,expirationTime:ae,sortIndex:-1},G>z?(R.sortIndex=G,t(u,R),n(l)===null&&R===n(u)&&(p?(y(C),C=-1):p=!0,ie(_,G-z))):(R.sortIndex=ae,t(l,R),v||m||(v=!0,le(E))),R},e.unstable_shouldYield=A,e.unstable_wrapCallback=function(R){var q=f;return function(){var G=f;f=q;try{return R.apply(this,arguments)}finally{f=G}}}})(Hk);Gk.exports=Hk;var bN=Gk.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xN=S,kt=bN;function O(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Wk=new Set,Ua={};function zr(e,t){Ii(e,t),Ii(e+"Capture",t)}function Ii(e,t){for(Ua[e]=t,e=0;e<t.length;e++)Wk.add(t[e])}var Tn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Zp=Object.prototype.hasOwnProperty,SN=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Rg={},Ig={};function _N(e){return Zp.call(Ig,e)?!0:Zp.call(Rg,e)?!1:SN.test(e)?Ig[e]=!0:(Rg[e]=!0,!1)}function kN(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function EN(e,t,n,r){if(t===null||typeof t>"u"||kN(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function dt(e,t,n,r,i,a,s){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=s}var Je={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Je[e]=new dt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Je[t]=new dt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Je[e]=new dt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Je[e]=new dt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Je[e]=new dt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Je[e]=new dt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Je[e]=new dt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Je[e]=new dt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Je[e]=new dt(e,5,!1,e.toLowerCase(),null,!1,!1)});var vv=/[\-:]([a-z])/g;function yv(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(vv,yv);Je[t]=new dt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(vv,yv);Je[t]=new dt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(vv,yv);Je[t]=new dt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Je[e]=new dt(e,1,!1,e.toLowerCase(),null,!1,!1)});Je.xlinkHref=new dt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Je[e]=new dt(e,1,!1,e.toLowerCase(),null,!0,!0)});function gv(e,t,n,r){var i=Je.hasOwnProperty(t)?Je[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(EN(t,n,i,r)&&(n=null),r||i===null?_N(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,r=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Rn=xN.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Fs=Symbol.for("react.element"),di=Symbol.for("react.portal"),fi=Symbol.for("react.fragment"),wv=Symbol.for("react.strict_mode"),em=Symbol.for("react.profiler"),Kk=Symbol.for("react.provider"),Yk=Symbol.for("react.context"),bv=Symbol.for("react.forward_ref"),tm=Symbol.for("react.suspense"),nm=Symbol.for("react.suspense_list"),xv=Symbol.for("react.memo"),Hn=Symbol.for("react.lazy"),Qk=Symbol.for("react.offscreen"),Dg=Symbol.iterator;function oa(e){return e===null||typeof e!="object"?null:(e=Dg&&e[Dg]||e["@@iterator"],typeof e=="function"?e:null)}var je=Object.assign,vu;function ga(e){if(vu===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);vu=t&&t[1]||""}return`
`+vu+e}var yu=!1;function gu(e,t){if(!e||yu)return"";yu=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),a=r.stack.split(`
`),s=i.length-1,o=a.length-1;1<=s&&0<=o&&i[s]!==a[o];)o--;for(;1<=s&&0<=o;s--,o--)if(i[s]!==a[o]){if(s!==1||o!==1)do if(s--,o--,0>o||i[s]!==a[o]){var l=`
`+i[s].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}while(1<=s&&0<=o);break}}}finally{yu=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?ga(e):""}function CN(e){switch(e.tag){case 5:return ga(e.type);case 16:return ga("Lazy");case 13:return ga("Suspense");case 19:return ga("SuspenseList");case 0:case 2:case 15:return e=gu(e.type,!1),e;case 11:return e=gu(e.type.render,!1),e;case 1:return e=gu(e.type,!0),e;default:return""}}function rm(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case fi:return"Fragment";case di:return"Portal";case em:return"Profiler";case wv:return"StrictMode";case tm:return"Suspense";case nm:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Yk:return(e.displayName||"Context")+".Consumer";case Kk:return(e._context.displayName||"Context")+".Provider";case bv:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case xv:return t=e.displayName||null,t!==null?t:rm(e.type)||"Memo";case Hn:t=e._payload,e=e._init;try{return rm(e(t))}catch{}}return null}function TN(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return rm(t);case 8:return t===wv?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function lr(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Xk(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function MN(e){var t=Xk(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(s){r=""+s,a.call(this,s)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(s){r=""+s},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Vs(e){e._valueTracker||(e._valueTracker=MN(e))}function Jk(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Xk(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function ko(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function im(e,t){var n=t.checked;return je({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Og(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=lr(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Zk(e,t){t=t.checked,t!=null&&gv(e,"checked",t,!1)}function am(e,t){Zk(e,t);var n=lr(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?sm(e,t.type,n):t.hasOwnProperty("defaultValue")&&sm(e,t.type,lr(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Lg(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function sm(e,t,n){(t!=="number"||ko(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var wa=Array.isArray;function Mi(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+lr(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function om(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(O(91));return je({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function qg(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(O(92));if(wa(n)){if(1<n.length)throw Error(O(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:lr(n)}}function eE(e,t){var n=lr(t.value),r=lr(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function Fg(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function tE(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lm(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?tE(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var $s,nE=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for($s=$s||document.createElement("div"),$s.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=$s.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Ga(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Na={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},jN=["Webkit","ms","Moz","O"];Object.keys(Na).forEach(function(e){jN.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Na[t]=Na[e]})});function rE(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Na.hasOwnProperty(e)&&Na[e]?(""+t).trim():t+"px"}function iE(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=rE(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}var PN=je({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function um(e,t){if(t){if(PN[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(O(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(O(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(O(61))}if(t.style!=null&&typeof t.style!="object")throw Error(O(62))}}function cm(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var dm=null;function Sv(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var fm=null,ji=null,Pi=null;function Vg(e){if(e=ms(e)){if(typeof fm!="function")throw Error(O(280));var t=e.stateNode;t&&(t=cl(t),fm(e.stateNode,e.type,t))}}function aE(e){ji?Pi?Pi.push(e):Pi=[e]:ji=e}function sE(){if(ji){var e=ji,t=Pi;if(Pi=ji=null,Vg(e),t)for(e=0;e<t.length;e++)Vg(t[e])}}function oE(e,t){return e(t)}function lE(){}var wu=!1;function uE(e,t,n){if(wu)return e(t,n);wu=!0;try{return oE(e,t,n)}finally{wu=!1,(ji!==null||Pi!==null)&&(lE(),sE())}}function Ha(e,t){var n=e.stateNode;if(n===null)return null;var r=cl(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(O(231,t,typeof n));return n}var hm=!1;if(Tn)try{var la={};Object.defineProperty(la,"passive",{get:function(){hm=!0}}),window.addEventListener("test",la,la),window.removeEventListener("test",la,la)}catch{hm=!1}function NN(e,t,n,r,i,a,s,o,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(c){this.onError(c)}}var Aa=!1,Eo=null,Co=!1,pm=null,AN={onError:function(e){Aa=!0,Eo=e}};function RN(e,t,n,r,i,a,s,o,l){Aa=!1,Eo=null,NN.apply(AN,arguments)}function IN(e,t,n,r,i,a,s,o,l){if(RN.apply(this,arguments),Aa){if(Aa){var u=Eo;Aa=!1,Eo=null}else throw Error(O(198));Co||(Co=!0,pm=u)}}function Ur(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function cE(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function $g(e){if(Ur(e)!==e)throw Error(O(188))}function DN(e){var t=e.alternate;if(!t){if(t=Ur(e),t===null)throw Error(O(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var a=i.alternate;if(a===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return $g(i),e;if(a===r)return $g(i),t;a=a.sibling}throw Error(O(188))}if(n.return!==r.return)n=i,r=a;else{for(var s=!1,o=i.child;o;){if(o===n){s=!0,n=i,r=a;break}if(o===r){s=!0,r=i,n=a;break}o=o.sibling}if(!s){for(o=a.child;o;){if(o===n){s=!0,n=a,r=i;break}if(o===r){s=!0,r=a,n=i;break}o=o.sibling}if(!s)throw Error(O(189))}}if(n.alternate!==r)throw Error(O(190))}if(n.tag!==3)throw Error(O(188));return n.stateNode.current===n?e:t}function dE(e){return e=DN(e),e!==null?fE(e):null}function fE(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=fE(e);if(t!==null)return t;e=e.sibling}return null}var hE=kt.unstable_scheduleCallback,Bg=kt.unstable_cancelCallback,ON=kt.unstable_shouldYield,LN=kt.unstable_requestPaint,Le=kt.unstable_now,qN=kt.unstable_getCurrentPriorityLevel,_v=kt.unstable_ImmediatePriority,pE=kt.unstable_UserBlockingPriority,To=kt.unstable_NormalPriority,FN=kt.unstable_LowPriority,mE=kt.unstable_IdlePriority,sl=null,on=null;function VN(e){if(on&&typeof on.onCommitFiberRoot=="function")try{on.onCommitFiberRoot(sl,e,void 0,(e.current.flags&128)===128)}catch{}}var Kt=Math.clz32?Math.clz32:zN,$N=Math.log,BN=Math.LN2;function zN(e){return e>>>=0,e===0?32:31-($N(e)/BN|0)|0}var Bs=64,zs=4194304;function ba(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Mo(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,s=n&268435455;if(s!==0){var o=s&~i;o!==0?r=ba(o):(a&=s,a!==0&&(r=ba(a)))}else s=n&~i,s!==0?r=ba(s):a!==0&&(r=ba(a));if(r===0)return 0;if(t!==0&&t!==r&&!(t&i)&&(i=r&-r,a=t&-t,i>=a||i===16&&(a&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Kt(t),i=1<<n,r|=e[n],t&=~i;return r}function UN(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function GN(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var s=31-Kt(a),o=1<<s,l=i[s];l===-1?(!(o&n)||o&r)&&(i[s]=UN(o,t)):l<=t&&(e.expiredLanes|=o),a&=~o}}function mm(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function vE(){var e=Bs;return Bs<<=1,!(Bs&4194240)&&(Bs=64),e}function bu(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function hs(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Kt(t),e[t]=n}function HN(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-Kt(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}function kv(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Kt(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var he=0;function yE(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var gE,Ev,wE,bE,xE,vm=!1,Us=[],Zn=null,er=null,tr=null,Wa=new Map,Ka=new Map,Kn=[],WN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function zg(e,t){switch(e){case"focusin":case"focusout":Zn=null;break;case"dragenter":case"dragleave":er=null;break;case"mouseover":case"mouseout":tr=null;break;case"pointerover":case"pointerout":Wa.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ka.delete(t.pointerId)}}function ua(e,t,n,r,i,a){return e===null||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},t!==null&&(t=ms(t),t!==null&&Ev(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function KN(e,t,n,r,i){switch(t){case"focusin":return Zn=ua(Zn,e,t,n,r,i),!0;case"dragenter":return er=ua(er,e,t,n,r,i),!0;case"mouseover":return tr=ua(tr,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return Wa.set(a,ua(Wa.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Ka.set(a,ua(Ka.get(a)||null,e,t,n,r,i)),!0}return!1}function SE(e){var t=jr(e.target);if(t!==null){var n=Ur(t);if(n!==null){if(t=n.tag,t===13){if(t=cE(n),t!==null){e.blockedOn=t,xE(e.priority,function(){wE(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function co(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=ym(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);dm=r,n.target.dispatchEvent(r),dm=null}else return t=ms(n),t!==null&&Ev(t),e.blockedOn=n,!1;t.shift()}return!0}function Ug(e,t,n){co(e)&&n.delete(t)}function YN(){vm=!1,Zn!==null&&co(Zn)&&(Zn=null),er!==null&&co(er)&&(er=null),tr!==null&&co(tr)&&(tr=null),Wa.forEach(Ug),Ka.forEach(Ug)}function ca(e,t){e.blockedOn===t&&(e.blockedOn=null,vm||(vm=!0,kt.unstable_scheduleCallback(kt.unstable_NormalPriority,YN)))}function Ya(e){function t(i){return ca(i,e)}if(0<Us.length){ca(Us[0],e);for(var n=1;n<Us.length;n++){var r=Us[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Zn!==null&&ca(Zn,e),er!==null&&ca(er,e),tr!==null&&ca(tr,e),Wa.forEach(t),Ka.forEach(t),n=0;n<Kn.length;n++)r=Kn[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Kn.length&&(n=Kn[0],n.blockedOn===null);)SE(n),n.blockedOn===null&&Kn.shift()}var Ni=Rn.ReactCurrentBatchConfig,jo=!0;function QN(e,t,n,r){var i=he,a=Ni.transition;Ni.transition=null;try{he=1,Cv(e,t,n,r)}finally{he=i,Ni.transition=a}}function XN(e,t,n,r){var i=he,a=Ni.transition;Ni.transition=null;try{he=4,Cv(e,t,n,r)}finally{he=i,Ni.transition=a}}function Cv(e,t,n,r){if(jo){var i=ym(e,t,n,r);if(i===null)Pu(e,t,r,Po,n),zg(e,r);else if(KN(i,e,t,n,r))r.stopPropagation();else if(zg(e,r),t&4&&-1<WN.indexOf(e)){for(;i!==null;){var a=ms(i);if(a!==null&&gE(a),a=ym(e,t,n,r),a===null&&Pu(e,t,r,Po,n),a===i)break;i=a}i!==null&&r.stopPropagation()}else Pu(e,t,r,null,n)}}var Po=null;function ym(e,t,n,r){if(Po=null,e=Sv(r),e=jr(e),e!==null)if(t=Ur(e),t===null)e=null;else if(n=t.tag,n===13){if(e=cE(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Po=e,null}function _E(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(qN()){case _v:return 1;case pE:return 4;case To:case FN:return 16;case mE:return 536870912;default:return 16}default:return 16}}var Xn=null,Tv=null,fo=null;function kE(){if(fo)return fo;var e,t=Tv,n=t.length,r,i="value"in Xn?Xn.value:Xn.textContent,a=i.length;for(e=0;e<n&&t[e]===i[e];e++);var s=n-e;for(r=1;r<=s&&t[n-r]===i[a-r];r++);return fo=i.slice(e,1<r?1-r:void 0)}function ho(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Gs(){return!0}function Gg(){return!1}function Tt(e){function t(n,r,i,a,s){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=a,this.target=s,this.currentTarget=null;for(var o in e)e.hasOwnProperty(o)&&(n=e[o],this[o]=n?n(a):a[o]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?Gs:Gg,this.isPropagationStopped=Gg,this}return je(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Gs)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Gs)},persist:function(){},isPersistent:Gs}),t}var Gi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Mv=Tt(Gi),ps=je({},Gi,{view:0,detail:0}),JN=Tt(ps),xu,Su,da,ol=je({},ps,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:jv,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==da&&(da&&e.type==="mousemove"?(xu=e.screenX-da.screenX,Su=e.screenY-da.screenY):Su=xu=0,da=e),xu)},movementY:function(e){return"movementY"in e?e.movementY:Su}}),Hg=Tt(ol),ZN=je({},ol,{dataTransfer:0}),eA=Tt(ZN),tA=je({},ps,{relatedTarget:0}),_u=Tt(tA),nA=je({},Gi,{animationName:0,elapsedTime:0,pseudoElement:0}),rA=Tt(nA),iA=je({},Gi,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),aA=Tt(iA),sA=je({},Gi,{data:0}),Wg=Tt(sA),oA={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},lA={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},uA={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function cA(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=uA[e])?!!t[e]:!1}function jv(){return cA}var dA=je({},ps,{key:function(e){if(e.key){var t=oA[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=ho(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?lA[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:jv,charCode:function(e){return e.type==="keypress"?ho(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ho(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),fA=Tt(dA),hA=je({},ol,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Kg=Tt(hA),pA=je({},ps,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:jv}),mA=Tt(pA),vA=je({},Gi,{propertyName:0,elapsedTime:0,pseudoElement:0}),yA=Tt(vA),gA=je({},ol,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),wA=Tt(gA),bA=[9,13,27,32],Pv=Tn&&"CompositionEvent"in window,Ra=null;Tn&&"documentMode"in document&&(Ra=document.documentMode);var xA=Tn&&"TextEvent"in window&&!Ra,EE=Tn&&(!Pv||Ra&&8<Ra&&11>=Ra),Yg=" ",Qg=!1;function CE(e,t){switch(e){case"keyup":return bA.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function TE(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var hi=!1;function SA(e,t){switch(e){case"compositionend":return TE(t);case"keypress":return t.which!==32?null:(Qg=!0,Yg);case"textInput":return e=t.data,e===Yg&&Qg?null:e;default:return null}}function _A(e,t){if(hi)return e==="compositionend"||!Pv&&CE(e,t)?(e=kE(),fo=Tv=Xn=null,hi=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return EE&&t.locale!=="ko"?null:t.data;default:return null}}var kA={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Xg(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!kA[e.type]:t==="textarea"}function ME(e,t,n,r){aE(r),t=No(t,"onChange"),0<t.length&&(n=new Mv("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Ia=null,Qa=null;function EA(e){FE(e,0)}function ll(e){var t=vi(e);if(Jk(t))return e}function CA(e,t){if(e==="change")return t}var jE=!1;if(Tn){var ku;if(Tn){var Eu="oninput"in document;if(!Eu){var Jg=document.createElement("div");Jg.setAttribute("oninput","return;"),Eu=typeof Jg.oninput=="function"}ku=Eu}else ku=!1;jE=ku&&(!document.documentMode||9<document.documentMode)}function Zg(){Ia&&(Ia.detachEvent("onpropertychange",PE),Qa=Ia=null)}function PE(e){if(e.propertyName==="value"&&ll(Qa)){var t=[];ME(t,Qa,e,Sv(e)),uE(EA,t)}}function TA(e,t,n){e==="focusin"?(Zg(),Ia=t,Qa=n,Ia.attachEvent("onpropertychange",PE)):e==="focusout"&&Zg()}function MA(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return ll(Qa)}function jA(e,t){if(e==="click")return ll(t)}function PA(e,t){if(e==="input"||e==="change")return ll(t)}function NA(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Qt=typeof Object.is=="function"?Object.is:NA;function Xa(e,t){if(Qt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Zp.call(t,i)||!Qt(e[i],t[i]))return!1}return!0}function e0(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function t0(e,t){var n=e0(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=e0(n)}}function NE(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?NE(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function AE(){for(var e=window,t=ko();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=ko(e.document)}return t}function Nv(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function AA(e){var t=AE(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&NE(n.ownerDocument.documentElement,n)){if(r!==null&&Nv(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=r.end===void 0?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=t0(n,a);var s=t0(n,r);i&&s&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==s.node||e.focusOffset!==s.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(s.node,s.offset)):(t.setEnd(s.node,s.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var RA=Tn&&"documentMode"in document&&11>=document.documentMode,pi=null,gm=null,Da=null,wm=!1;function n0(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;wm||pi==null||pi!==ko(r)||(r=pi,"selectionStart"in r&&Nv(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Da&&Xa(Da,r)||(Da=r,r=No(gm,"onSelect"),0<r.length&&(t=new Mv("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=pi)))}function Hs(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var mi={animationend:Hs("Animation","AnimationEnd"),animationiteration:Hs("Animation","AnimationIteration"),animationstart:Hs("Animation","AnimationStart"),transitionend:Hs("Transition","TransitionEnd")},Cu={},RE={};Tn&&(RE=document.createElement("div").style,"AnimationEvent"in window||(delete mi.animationend.animation,delete mi.animationiteration.animation,delete mi.animationstart.animation),"TransitionEvent"in window||delete mi.transitionend.transition);function ul(e){if(Cu[e])return Cu[e];if(!mi[e])return e;var t=mi[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in RE)return Cu[e]=t[n];return e}var IE=ul("animationend"),DE=ul("animationiteration"),OE=ul("animationstart"),LE=ul("transitionend"),qE=new Map,r0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function hr(e,t){qE.set(e,t),zr(t,[e])}for(var Tu=0;Tu<r0.length;Tu++){var Mu=r0[Tu],IA=Mu.toLowerCase(),DA=Mu[0].toUpperCase()+Mu.slice(1);hr(IA,"on"+DA)}hr(IE,"onAnimationEnd");hr(DE,"onAnimationIteration");hr(OE,"onAnimationStart");hr("dblclick","onDoubleClick");hr("focusin","onFocus");hr("focusout","onBlur");hr(LE,"onTransitionEnd");Ii("onMouseEnter",["mouseout","mouseover"]);Ii("onMouseLeave",["mouseout","mouseover"]);Ii("onPointerEnter",["pointerout","pointerover"]);Ii("onPointerLeave",["pointerout","pointerover"]);zr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));zr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));zr("onBeforeInput",["compositionend","keypress","textInput","paste"]);zr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));zr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));zr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var xa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),OA=new Set("cancel close invalid load scroll toggle".split(" ").concat(xa));function i0(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,IN(r,t,void 0,e),e.currentTarget=null}function FE(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var s=r.length-1;0<=s;s--){var o=r[s],l=o.instance,u=o.currentTarget;if(o=o.listener,l!==a&&i.isPropagationStopped())break e;i0(i,o,u),a=l}else for(s=0;s<r.length;s++){if(o=r[s],l=o.instance,u=o.currentTarget,o=o.listener,l!==a&&i.isPropagationStopped())break e;i0(i,o,u),a=l}}}if(Co)throw e=pm,Co=!1,pm=null,e}function ge(e,t){var n=t[km];n===void 0&&(n=t[km]=new Set);var r=e+"__bubble";n.has(r)||(VE(t,e,2,!1),n.add(r))}function ju(e,t,n){var r=0;t&&(r|=4),VE(n,e,r,t)}var Ws="_reactListening"+Math.random().toString(36).slice(2);function Ja(e){if(!e[Ws]){e[Ws]=!0,Wk.forEach(function(n){n!=="selectionchange"&&(OA.has(n)||ju(n,!1,e),ju(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Ws]||(t[Ws]=!0,ju("selectionchange",!1,t))}}function VE(e,t,n,r){switch(_E(t)){case 1:var i=QN;break;case 4:i=XN;break;default:i=Cv}n=i.bind(null,t,n,e),i=void 0,!hm||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Pu(e,t,n,r,i){var a=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var s=r.tag;if(s===3||s===4){var o=r.stateNode.containerInfo;if(o===i||o.nodeType===8&&o.parentNode===i)break;if(s===4)for(s=r.return;s!==null;){var l=s.tag;if((l===3||l===4)&&(l=s.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;s=s.return}for(;o!==null;){if(s=jr(o),s===null)return;if(l=s.tag,l===5||l===6){r=a=s;continue e}o=o.parentNode}}r=r.return}uE(function(){var u=a,c=Sv(n),d=[];e:{var f=qE.get(e);if(f!==void 0){var m=Mv,v=e;switch(e){case"keypress":if(ho(n)===0)break e;case"keydown":case"keyup":m=fA;break;case"focusin":v="focus",m=_u;break;case"focusout":v="blur",m=_u;break;case"beforeblur":case"afterblur":m=_u;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=Hg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=eA;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=mA;break;case IE:case DE:case OE:m=rA;break;case LE:m=yA;break;case"scroll":m=JN;break;case"wheel":m=wA;break;case"copy":case"cut":case"paste":m=aA;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=Kg}var p=(t&4)!==0,b=!p&&e==="scroll",y=p?f!==null?f+"Capture":null:f;p=[];for(var g=u,x;g!==null;){x=g;var _=x.stateNode;if(x.tag===5&&_!==null&&(x=_,y!==null&&(_=Ha(g,y),_!=null&&p.push(Za(g,_,x)))),b)break;g=g.return}0<p.length&&(f=new m(f,v,null,n,c),d.push({event:f,listeners:p}))}}if(!(t&7)){e:{if(f=e==="mouseover"||e==="pointerover",m=e==="mouseout"||e==="pointerout",f&&n!==dm&&(v=n.relatedTarget||n.fromElement)&&(jr(v)||v[Mn]))break e;if((m||f)&&(f=c.window===c?c:(f=c.ownerDocument)?f.defaultView||f.parentWindow:window,m?(v=n.relatedTarget||n.toElement,m=u,v=v?jr(v):null,v!==null&&(b=Ur(v),v!==b||v.tag!==5&&v.tag!==6)&&(v=null)):(m=null,v=u),m!==v)){if(p=Hg,_="onMouseLeave",y="onMouseEnter",g="mouse",(e==="pointerout"||e==="pointerover")&&(p=Kg,_="onPointerLeave",y="onPointerEnter",g="pointer"),b=m==null?f:vi(m),x=v==null?f:vi(v),f=new p(_,g+"leave",m,n,c),f.target=b,f.relatedTarget=x,_=null,jr(c)===u&&(p=new p(y,g+"enter",v,n,c),p.target=x,p.relatedTarget=b,_=p),b=_,m&&v)t:{for(p=m,y=v,g=0,x=p;x;x=li(x))g++;for(x=0,_=y;_;_=li(_))x++;for(;0<g-x;)p=li(p),g--;for(;0<x-g;)y=li(y),x--;for(;g--;){if(p===y||y!==null&&p===y.alternate)break t;p=li(p),y=li(y)}p=null}else p=null;m!==null&&a0(d,f,m,p,!1),v!==null&&b!==null&&a0(d,b,v,p,!0)}}e:{if(f=u?vi(u):window,m=f.nodeName&&f.nodeName.toLowerCase(),m==="select"||m==="input"&&f.type==="file")var E=CA;else if(Xg(f))if(jE)E=PA;else{E=MA;var T=TA}else(m=f.nodeName)&&m.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(E=jA);if(E&&(E=E(e,u))){ME(d,E,n,c);break e}T&&T(e,f,u),e==="focusout"&&(T=f._wrapperState)&&T.controlled&&f.type==="number"&&sm(f,"number",f.value)}switch(T=u?vi(u):window,e){case"focusin":(Xg(T)||T.contentEditable==="true")&&(pi=T,gm=u,Da=null);break;case"focusout":Da=gm=pi=null;break;case"mousedown":wm=!0;break;case"contextmenu":case"mouseup":case"dragend":wm=!1,n0(d,n,c);break;case"selectionchange":if(RA)break;case"keydown":case"keyup":n0(d,n,c)}var M;if(Pv)e:{switch(e){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else hi?CE(e,n)&&(C="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(C="onCompositionStart");C&&(EE&&n.locale!=="ko"&&(hi||C!=="onCompositionStart"?C==="onCompositionEnd"&&hi&&(M=kE()):(Xn=c,Tv="value"in Xn?Xn.value:Xn.textContent,hi=!0)),T=No(u,C),0<T.length&&(C=new Wg(C,e,null,n,c),d.push({event:C,listeners:T}),M?C.data=M:(M=TE(n),M!==null&&(C.data=M)))),(M=xA?SA(e,n):_A(e,n))&&(u=No(u,"onBeforeInput"),0<u.length&&(c=new Wg("onBeforeInput","beforeinput",null,n,c),d.push({event:c,listeners:u}),c.data=M))}FE(d,t)})}function Za(e,t,n){return{instance:e,listener:t,currentTarget:n}}function No(e,t){for(var n=t+"Capture",r=[];e!==null;){var i=e,a=i.stateNode;i.tag===5&&a!==null&&(i=a,a=Ha(e,n),a!=null&&r.unshift(Za(e,a,i)),a=Ha(e,t),a!=null&&r.push(Za(e,a,i))),e=e.return}return r}function li(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function a0(e,t,n,r,i){for(var a=t._reactName,s=[];n!==null&&n!==r;){var o=n,l=o.alternate,u=o.stateNode;if(l!==null&&l===r)break;o.tag===5&&u!==null&&(o=u,i?(l=Ha(n,a),l!=null&&s.unshift(Za(n,l,o))):i||(l=Ha(n,a),l!=null&&s.push(Za(n,l,o)))),n=n.return}s.length!==0&&e.push({event:t,listeners:s})}var LA=/\r\n?/g,qA=/\u0000|\uFFFD/g;function s0(e){return(typeof e=="string"?e:""+e).replace(LA,`
`).replace(qA,"")}function Ks(e,t,n){if(t=s0(t),s0(e)!==t&&n)throw Error(O(425))}function Ao(){}var bm=null,xm=null;function Sm(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var _m=typeof setTimeout=="function"?setTimeout:void 0,FA=typeof clearTimeout=="function"?clearTimeout:void 0,o0=typeof Promise=="function"?Promise:void 0,VA=typeof queueMicrotask=="function"?queueMicrotask:typeof o0<"u"?function(e){return o0.resolve(null).then(e).catch($A)}:_m;function $A(e){setTimeout(function(){throw e})}function Nu(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){e.removeChild(i),Ya(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Ya(t)}function nr(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function l0(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Hi=Math.random().toString(36).slice(2),an="__reactFiber$"+Hi,es="__reactProps$"+Hi,Mn="__reactContainer$"+Hi,km="__reactEvents$"+Hi,BA="__reactListeners$"+Hi,zA="__reactHandles$"+Hi;function jr(e){var t=e[an];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Mn]||n[an]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=l0(e);e!==null;){if(n=e[an])return n;e=l0(e)}return t}e=n,n=e.parentNode}return null}function ms(e){return e=e[an]||e[Mn],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function vi(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(O(33))}function cl(e){return e[es]||null}var Em=[],yi=-1;function pr(e){return{current:e}}function be(e){0>yi||(e.current=Em[yi],Em[yi]=null,yi--)}function ye(e,t){yi++,Em[yi]=e.current,e.current=t}var ur={},at=pr(ur),pt=pr(!1),qr=ur;function Di(e,t){var n=e.type.contextTypes;if(!n)return ur;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},a;for(a in n)i[a]=t[a];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function mt(e){return e=e.childContextTypes,e!=null}function Ro(){be(pt),be(at)}function u0(e,t,n){if(at.current!==ur)throw Error(O(168));ye(at,t),ye(pt,n)}function $E(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(O(108,TN(e)||"Unknown",i));return je({},n,r)}function Io(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ur,qr=at.current,ye(at,e),ye(pt,pt.current),!0}function c0(e,t,n){var r=e.stateNode;if(!r)throw Error(O(169));n?(e=$E(e,t,qr),r.__reactInternalMemoizedMergedChildContext=e,be(pt),be(at),ye(at,e)):be(pt),ye(pt,n)}var gn=null,dl=!1,Au=!1;function BE(e){gn===null?gn=[e]:gn.push(e)}function UA(e){dl=!0,BE(e)}function mr(){if(!Au&&gn!==null){Au=!0;var e=0,t=he;try{var n=gn;for(he=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}gn=null,dl=!1}catch(i){throw gn!==null&&(gn=gn.slice(e+1)),hE(_v,mr),i}finally{he=t,Au=!1}}return null}var gi=[],wi=0,Do=null,Oo=0,Rt=[],It=0,Fr=null,bn=1,xn="";function Er(e,t){gi[wi++]=Oo,gi[wi++]=Do,Do=e,Oo=t}function zE(e,t,n){Rt[It++]=bn,Rt[It++]=xn,Rt[It++]=Fr,Fr=e;var r=bn;e=xn;var i=32-Kt(r)-1;r&=~(1<<i),n+=1;var a=32-Kt(t)+i;if(30<a){var s=i-i%5;a=(r&(1<<s)-1).toString(32),r>>=s,i-=s,bn=1<<32-Kt(t)+i|n<<i|r,xn=a+e}else bn=1<<a|n<<i|r,xn=e}function Av(e){e.return!==null&&(Er(e,1),zE(e,1,0))}function Rv(e){for(;e===Do;)Do=gi[--wi],gi[wi]=null,Oo=gi[--wi],gi[wi]=null;for(;e===Fr;)Fr=Rt[--It],Rt[It]=null,xn=Rt[--It],Rt[It]=null,bn=Rt[--It],Rt[It]=null}var St=null,xt=null,Se=!1,Wt=null;function UE(e,t){var n=Dt(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function d0(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,St=e,xt=nr(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,St=e,xt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Fr!==null?{id:bn,overflow:xn}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Dt(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,St=e,xt=null,!0):!1;default:return!1}}function Cm(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Tm(e){if(Se){var t=xt;if(t){var n=t;if(!d0(e,t)){if(Cm(e))throw Error(O(418));t=nr(n.nextSibling);var r=St;t&&d0(e,t)?UE(r,n):(e.flags=e.flags&-4097|2,Se=!1,St=e)}}else{if(Cm(e))throw Error(O(418));e.flags=e.flags&-4097|2,Se=!1,St=e}}}function f0(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;St=e}function Ys(e){if(e!==St)return!1;if(!Se)return f0(e),Se=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Sm(e.type,e.memoizedProps)),t&&(t=xt)){if(Cm(e))throw GE(),Error(O(418));for(;t;)UE(e,t),t=nr(t.nextSibling)}if(f0(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(O(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){xt=nr(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}xt=null}}else xt=St?nr(e.stateNode.nextSibling):null;return!0}function GE(){for(var e=xt;e;)e=nr(e.nextSibling)}function Oi(){xt=St=null,Se=!1}function Iv(e){Wt===null?Wt=[e]:Wt.push(e)}var GA=Rn.ReactCurrentBatchConfig;function fa(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(O(309));var r=n.stateNode}if(!r)throw Error(O(147,e));var i=r,a=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===a?t.ref:(t=function(s){var o=i.refs;s===null?delete o[a]:o[a]=s},t._stringRef=a,t)}if(typeof e!="string")throw Error(O(284));if(!n._owner)throw Error(O(290,e))}return e}function Qs(e,t){throw e=Object.prototype.toString.call(t),Error(O(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function h0(e){var t=e._init;return t(e._payload)}function HE(e){function t(y,g){if(e){var x=y.deletions;x===null?(y.deletions=[g],y.flags|=16):x.push(g)}}function n(y,g){if(!e)return null;for(;g!==null;)t(y,g),g=g.sibling;return null}function r(y,g){for(y=new Map;g!==null;)g.key!==null?y.set(g.key,g):y.set(g.index,g),g=g.sibling;return y}function i(y,g){return y=sr(y,g),y.index=0,y.sibling=null,y}function a(y,g,x){return y.index=x,e?(x=y.alternate,x!==null?(x=x.index,x<g?(y.flags|=2,g):x):(y.flags|=2,g)):(y.flags|=1048576,g)}function s(y){return e&&y.alternate===null&&(y.flags|=2),y}function o(y,g,x,_){return g===null||g.tag!==6?(g=Fu(x,y.mode,_),g.return=y,g):(g=i(g,x),g.return=y,g)}function l(y,g,x,_){var E=x.type;return E===fi?c(y,g,x.props.children,_,x.key):g!==null&&(g.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===Hn&&h0(E)===g.type)?(_=i(g,x.props),_.ref=fa(y,g,x),_.return=y,_):(_=bo(x.type,x.key,x.props,null,y.mode,_),_.ref=fa(y,g,x),_.return=y,_)}function u(y,g,x,_){return g===null||g.tag!==4||g.stateNode.containerInfo!==x.containerInfo||g.stateNode.implementation!==x.implementation?(g=Vu(x,y.mode,_),g.return=y,g):(g=i(g,x.children||[]),g.return=y,g)}function c(y,g,x,_,E){return g===null||g.tag!==7?(g=Dr(x,y.mode,_,E),g.return=y,g):(g=i(g,x),g.return=y,g)}function d(y,g,x){if(typeof g=="string"&&g!==""||typeof g=="number")return g=Fu(""+g,y.mode,x),g.return=y,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case Fs:return x=bo(g.type,g.key,g.props,null,y.mode,x),x.ref=fa(y,null,g),x.return=y,x;case di:return g=Vu(g,y.mode,x),g.return=y,g;case Hn:var _=g._init;return d(y,_(g._payload),x)}if(wa(g)||oa(g))return g=Dr(g,y.mode,x,null),g.return=y,g;Qs(y,g)}return null}function f(y,g,x,_){var E=g!==null?g.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return E!==null?null:o(y,g,""+x,_);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Fs:return x.key===E?l(y,g,x,_):null;case di:return x.key===E?u(y,g,x,_):null;case Hn:return E=x._init,f(y,g,E(x._payload),_)}if(wa(x)||oa(x))return E!==null?null:c(y,g,x,_,null);Qs(y,x)}return null}function m(y,g,x,_,E){if(typeof _=="string"&&_!==""||typeof _=="number")return y=y.get(x)||null,o(g,y,""+_,E);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Fs:return y=y.get(_.key===null?x:_.key)||null,l(g,y,_,E);case di:return y=y.get(_.key===null?x:_.key)||null,u(g,y,_,E);case Hn:var T=_._init;return m(y,g,x,T(_._payload),E)}if(wa(_)||oa(_))return y=y.get(x)||null,c(g,y,_,E,null);Qs(g,_)}return null}function v(y,g,x,_){for(var E=null,T=null,M=g,C=g=0,j=null;M!==null&&C<x.length;C++){M.index>C?(j=M,M=null):j=M.sibling;var N=f(y,M,x[C],_);if(N===null){M===null&&(M=j);break}e&&M&&N.alternate===null&&t(y,M),g=a(N,g,C),T===null?E=N:T.sibling=N,T=N,M=j}if(C===x.length)return n(y,M),Se&&Er(y,C),E;if(M===null){for(;C<x.length;C++)M=d(y,x[C],_),M!==null&&(g=a(M,g,C),T===null?E=M:T.sibling=M,T=M);return Se&&Er(y,C),E}for(M=r(y,M);C<x.length;C++)j=m(M,y,C,x[C],_),j!==null&&(e&&j.alternate!==null&&M.delete(j.key===null?C:j.key),g=a(j,g,C),T===null?E=j:T.sibling=j,T=j);return e&&M.forEach(function(A){return t(y,A)}),Se&&Er(y,C),E}function p(y,g,x,_){var E=oa(x);if(typeof E!="function")throw Error(O(150));if(x=E.call(x),x==null)throw Error(O(151));for(var T=E=null,M=g,C=g=0,j=null,N=x.next();M!==null&&!N.done;C++,N=x.next()){M.index>C?(j=M,M=null):j=M.sibling;var A=f(y,M,N.value,_);if(A===null){M===null&&(M=j);break}e&&M&&A.alternate===null&&t(y,M),g=a(A,g,C),T===null?E=A:T.sibling=A,T=A,M=j}if(N.done)return n(y,M),Se&&Er(y,C),E;if(M===null){for(;!N.done;C++,N=x.next())N=d(y,N.value,_),N!==null&&(g=a(N,g,C),T===null?E=N:T.sibling=N,T=N);return Se&&Er(y,C),E}for(M=r(y,M);!N.done;C++,N=x.next())N=m(M,y,C,N.value,_),N!==null&&(e&&N.alternate!==null&&M.delete(N.key===null?C:N.key),g=a(N,g,C),T===null?E=N:T.sibling=N,T=N);return e&&M.forEach(function(I){return t(y,I)}),Se&&Er(y,C),E}function b(y,g,x,_){if(typeof x=="object"&&x!==null&&x.type===fi&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case Fs:e:{for(var E=x.key,T=g;T!==null;){if(T.key===E){if(E=x.type,E===fi){if(T.tag===7){n(y,T.sibling),g=i(T,x.props.children),g.return=y,y=g;break e}}else if(T.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===Hn&&h0(E)===T.type){n(y,T.sibling),g=i(T,x.props),g.ref=fa(y,T,x),g.return=y,y=g;break e}n(y,T);break}else t(y,T);T=T.sibling}x.type===fi?(g=Dr(x.props.children,y.mode,_,x.key),g.return=y,y=g):(_=bo(x.type,x.key,x.props,null,y.mode,_),_.ref=fa(y,g,x),_.return=y,y=_)}return s(y);case di:e:{for(T=x.key;g!==null;){if(g.key===T)if(g.tag===4&&g.stateNode.containerInfo===x.containerInfo&&g.stateNode.implementation===x.implementation){n(y,g.sibling),g=i(g,x.children||[]),g.return=y,y=g;break e}else{n(y,g);break}else t(y,g);g=g.sibling}g=Vu(x,y.mode,_),g.return=y,y=g}return s(y);case Hn:return T=x._init,b(y,g,T(x._payload),_)}if(wa(x))return v(y,g,x,_);if(oa(x))return p(y,g,x,_);Qs(y,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,g!==null&&g.tag===6?(n(y,g.sibling),g=i(g,x),g.return=y,y=g):(n(y,g),g=Fu(x,y.mode,_),g.return=y,y=g),s(y)):n(y,g)}return b}var Li=HE(!0),WE=HE(!1),Lo=pr(null),qo=null,bi=null,Dv=null;function Ov(){Dv=bi=qo=null}function Lv(e){var t=Lo.current;be(Lo),e._currentValue=t}function Mm(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ai(e,t){qo=e,Dv=bi=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(ht=!0),e.firstContext=null)}function Lt(e){var t=e._currentValue;if(Dv!==e)if(e={context:e,memoizedValue:t,next:null},bi===null){if(qo===null)throw Error(O(308));bi=e,qo.dependencies={lanes:0,firstContext:e}}else bi=bi.next=e;return t}var Pr=null;function qv(e){Pr===null?Pr=[e]:Pr.push(e)}function KE(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,qv(t)):(n.next=i.next,i.next=n),t.interleaved=n,jn(e,r)}function jn(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Wn=!1;function Fv(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function YE(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function kn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function rr(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,se&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,jn(e,n)}return i=r.interleaved,i===null?(t.next=t,qv(r)):(t.next=i.next,i.next=t),r.interleaved=t,jn(e,n)}function po(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,kv(e,n)}}function p0(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,a=null;if(n=n.firstBaseUpdate,n!==null){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};a===null?i=a=s:a=a.next=s,n=n.next}while(n!==null);a===null?i=a=t:a=a.next=t}else i=a=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Fo(e,t,n,r){var i=e.updateQueue;Wn=!1;var a=i.firstBaseUpdate,s=i.lastBaseUpdate,o=i.shared.pending;if(o!==null){i.shared.pending=null;var l=o,u=l.next;l.next=null,s===null?a=u:s.next=u,s=l;var c=e.alternate;c!==null&&(c=c.updateQueue,o=c.lastBaseUpdate,o!==s&&(o===null?c.firstBaseUpdate=u:o.next=u,c.lastBaseUpdate=l))}if(a!==null){var d=i.baseState;s=0,c=u=l=null,o=a;do{var f=o.lane,m=o.eventTime;if((r&f)===f){c!==null&&(c=c.next={eventTime:m,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var v=e,p=o;switch(f=t,m=n,p.tag){case 1:if(v=p.payload,typeof v=="function"){d=v.call(m,d,f);break e}d=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=p.payload,f=typeof v=="function"?v.call(m,d,f):v,f==null)break e;d=je({},d,f);break e;case 2:Wn=!0}}o.callback!==null&&o.lane!==0&&(e.flags|=64,f=i.effects,f===null?i.effects=[o]:f.push(o))}else m={eventTime:m,lane:f,tag:o.tag,payload:o.payload,callback:o.callback,next:null},c===null?(u=c=m,l=d):c=c.next=m,s|=f;if(o=o.next,o===null){if(o=i.shared.pending,o===null)break;f=o,o=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);if(c===null&&(l=d),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,t=i.shared.interleaved,t!==null){i=t;do s|=i.lane,i=i.next;while(i!==t)}else a===null&&(i.shared.lanes=0);$r|=s,e.lanes=s,e.memoizedState=d}}function m0(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(O(191,i));i.call(r)}}}var vs={},ln=pr(vs),ts=pr(vs),ns=pr(vs);function Nr(e){if(e===vs)throw Error(O(174));return e}function Vv(e,t){switch(ye(ns,t),ye(ts,e),ye(ln,vs),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:lm(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=lm(t,e)}be(ln),ye(ln,t)}function qi(){be(ln),be(ts),be(ns)}function QE(e){Nr(ns.current);var t=Nr(ln.current),n=lm(t,e.type);t!==n&&(ye(ts,e),ye(ln,n))}function $v(e){ts.current===e&&(be(ln),be(ts))}var Ce=pr(0);function Vo(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Ru=[];function Bv(){for(var e=0;e<Ru.length;e++)Ru[e]._workInProgressVersionPrimary=null;Ru.length=0}var mo=Rn.ReactCurrentDispatcher,Iu=Rn.ReactCurrentBatchConfig,Vr=0,Me=null,ze=null,He=null,$o=!1,Oa=!1,rs=0,HA=0;function et(){throw Error(O(321))}function zv(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Qt(e[n],t[n]))return!1;return!0}function Uv(e,t,n,r,i,a){if(Vr=a,Me=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,mo.current=e===null||e.memoizedState===null?QA:XA,e=n(r,i),Oa){a=0;do{if(Oa=!1,rs=0,25<=a)throw Error(O(301));a+=1,He=ze=null,t.updateQueue=null,mo.current=JA,e=n(r,i)}while(Oa)}if(mo.current=Bo,t=ze!==null&&ze.next!==null,Vr=0,He=ze=Me=null,$o=!1,t)throw Error(O(300));return e}function Gv(){var e=rs!==0;return rs=0,e}function rn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return He===null?Me.memoizedState=He=e:He=He.next=e,He}function qt(){if(ze===null){var e=Me.alternate;e=e!==null?e.memoizedState:null}else e=ze.next;var t=He===null?Me.memoizedState:He.next;if(t!==null)He=t,ze=e;else{if(e===null)throw Error(O(310));ze=e,e={memoizedState:ze.memoizedState,baseState:ze.baseState,baseQueue:ze.baseQueue,queue:ze.queue,next:null},He===null?Me.memoizedState=He=e:He=He.next=e}return He}function is(e,t){return typeof t=="function"?t(e):t}function Du(e){var t=qt(),n=t.queue;if(n===null)throw Error(O(311));n.lastRenderedReducer=e;var r=ze,i=r.baseQueue,a=n.pending;if(a!==null){if(i!==null){var s=i.next;i.next=a.next,a.next=s}r.baseQueue=i=a,n.pending=null}if(i!==null){a=i.next,r=r.baseState;var o=s=null,l=null,u=a;do{var c=u.lane;if((Vr&c)===c)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var d={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(o=l=d,s=r):l=l.next=d,Me.lanes|=c,$r|=c}u=u.next}while(u!==null&&u!==a);l===null?s=r:l.next=o,Qt(r,t.memoizedState)||(ht=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=l,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do a=i.lane,Me.lanes|=a,$r|=a,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Ou(e){var t=qt(),n=t.queue;if(n===null)throw Error(O(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,a=t.memoizedState;if(i!==null){n.pending=null;var s=i=i.next;do a=e(a,s.action),s=s.next;while(s!==i);Qt(a,t.memoizedState)||(ht=!0),t.memoizedState=a,t.baseQueue===null&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function XE(){}function JE(e,t){var n=Me,r=qt(),i=t(),a=!Qt(r.memoizedState,i);if(a&&(r.memoizedState=i,ht=!0),r=r.queue,Hv(tC.bind(null,n,r,e),[e]),r.getSnapshot!==t||a||He!==null&&He.memoizedState.tag&1){if(n.flags|=2048,as(9,eC.bind(null,n,r,i,t),void 0,null),We===null)throw Error(O(349));Vr&30||ZE(n,t,i)}return i}function ZE(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Me.updateQueue,t===null?(t={lastEffect:null,stores:null},Me.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function eC(e,t,n,r){t.value=n,t.getSnapshot=r,nC(t)&&rC(e)}function tC(e,t,n){return n(function(){nC(t)&&rC(e)})}function nC(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Qt(e,n)}catch{return!0}}function rC(e){var t=jn(e,1);t!==null&&Yt(t,e,1,-1)}function v0(e){var t=rn();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:is,lastRenderedState:e},t.queue=e,e=e.dispatch=YA.bind(null,Me,e),[t.memoizedState,e]}function as(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Me.updateQueue,t===null?(t={lastEffect:null,stores:null},Me.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function iC(){return qt().memoizedState}function vo(e,t,n,r){var i=rn();Me.flags|=e,i.memoizedState=as(1|t,n,void 0,r===void 0?null:r)}function fl(e,t,n,r){var i=qt();r=r===void 0?null:r;var a=void 0;if(ze!==null){var s=ze.memoizedState;if(a=s.destroy,r!==null&&zv(r,s.deps)){i.memoizedState=as(t,n,a,r);return}}Me.flags|=e,i.memoizedState=as(1|t,n,a,r)}function y0(e,t){return vo(8390656,8,e,t)}function Hv(e,t){return fl(2048,8,e,t)}function aC(e,t){return fl(4,2,e,t)}function sC(e,t){return fl(4,4,e,t)}function oC(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function lC(e,t,n){return n=n!=null?n.concat([e]):null,fl(4,4,oC.bind(null,t,e),n)}function Wv(){}function uC(e,t){var n=qt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&zv(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function cC(e,t){var n=qt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&zv(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function dC(e,t,n){return Vr&21?(Qt(n,t)||(n=vE(),Me.lanes|=n,$r|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,ht=!0),e.memoizedState=n)}function WA(e,t){var n=he;he=n!==0&&4>n?n:4,e(!0);var r=Iu.transition;Iu.transition={};try{e(!1),t()}finally{he=n,Iu.transition=r}}function fC(){return qt().memoizedState}function KA(e,t,n){var r=ar(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},hC(e))pC(t,n);else if(n=KE(e,t,n,r),n!==null){var i=ut();Yt(n,e,r,i),mC(n,t,r)}}function YA(e,t,n){var r=ar(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(hC(e))pC(t,i);else{var a=e.alternate;if(e.lanes===0&&(a===null||a.lanes===0)&&(a=t.lastRenderedReducer,a!==null))try{var s=t.lastRenderedState,o=a(s,n);if(i.hasEagerState=!0,i.eagerState=o,Qt(o,s)){var l=t.interleaved;l===null?(i.next=i,qv(t)):(i.next=l.next,l.next=i),t.interleaved=i;return}}catch{}finally{}n=KE(e,t,i,r),n!==null&&(i=ut(),Yt(n,e,r,i),mC(n,t,r))}}function hC(e){var t=e.alternate;return e===Me||t!==null&&t===Me}function pC(e,t){Oa=$o=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function mC(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,kv(e,n)}}var Bo={readContext:Lt,useCallback:et,useContext:et,useEffect:et,useImperativeHandle:et,useInsertionEffect:et,useLayoutEffect:et,useMemo:et,useReducer:et,useRef:et,useState:et,useDebugValue:et,useDeferredValue:et,useTransition:et,useMutableSource:et,useSyncExternalStore:et,useId:et,unstable_isNewReconciler:!1},QA={readContext:Lt,useCallback:function(e,t){return rn().memoizedState=[e,t===void 0?null:t],e},useContext:Lt,useEffect:y0,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,vo(4194308,4,oC.bind(null,t,e),n)},useLayoutEffect:function(e,t){return vo(4194308,4,e,t)},useInsertionEffect:function(e,t){return vo(4,2,e,t)},useMemo:function(e,t){var n=rn();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=rn();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=KA.bind(null,Me,e),[r.memoizedState,e]},useRef:function(e){var t=rn();return e={current:e},t.memoizedState=e},useState:v0,useDebugValue:Wv,useDeferredValue:function(e){return rn().memoizedState=e},useTransition:function(){var e=v0(!1),t=e[0];return e=WA.bind(null,e[1]),rn().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Me,i=rn();if(Se){if(n===void 0)throw Error(O(407));n=n()}else{if(n=t(),We===null)throw Error(O(349));Vr&30||ZE(r,t,n)}i.memoizedState=n;var a={value:n,getSnapshot:t};return i.queue=a,y0(tC.bind(null,r,a,e),[e]),r.flags|=2048,as(9,eC.bind(null,r,a,n,t),void 0,null),n},useId:function(){var e=rn(),t=We.identifierPrefix;if(Se){var n=xn,r=bn;n=(r&~(1<<32-Kt(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=rs++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=HA++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},XA={readContext:Lt,useCallback:uC,useContext:Lt,useEffect:Hv,useImperativeHandle:lC,useInsertionEffect:aC,useLayoutEffect:sC,useMemo:cC,useReducer:Du,useRef:iC,useState:function(){return Du(is)},useDebugValue:Wv,useDeferredValue:function(e){var t=qt();return dC(t,ze.memoizedState,e)},useTransition:function(){var e=Du(is)[0],t=qt().memoizedState;return[e,t]},useMutableSource:XE,useSyncExternalStore:JE,useId:fC,unstable_isNewReconciler:!1},JA={readContext:Lt,useCallback:uC,useContext:Lt,useEffect:Hv,useImperativeHandle:lC,useInsertionEffect:aC,useLayoutEffect:sC,useMemo:cC,useReducer:Ou,useRef:iC,useState:function(){return Ou(is)},useDebugValue:Wv,useDeferredValue:function(e){var t=qt();return ze===null?t.memoizedState=e:dC(t,ze.memoizedState,e)},useTransition:function(){var e=Ou(is)[0],t=qt().memoizedState;return[e,t]},useMutableSource:XE,useSyncExternalStore:JE,useId:fC,unstable_isNewReconciler:!1};function Gt(e,t){if(e&&e.defaultProps){t=je({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function jm(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:je({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var hl={isMounted:function(e){return(e=e._reactInternals)?Ur(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ut(),i=ar(e),a=kn(r,i);a.payload=t,n!=null&&(a.callback=n),t=rr(e,a,i),t!==null&&(Yt(t,e,i,r),po(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ut(),i=ar(e),a=kn(r,i);a.tag=1,a.payload=t,n!=null&&(a.callback=n),t=rr(e,a,i),t!==null&&(Yt(t,e,i,r),po(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ut(),r=ar(e),i=kn(n,r);i.tag=2,t!=null&&(i.callback=t),t=rr(e,i,r),t!==null&&(Yt(t,e,r,n),po(t,e,r))}};function g0(e,t,n,r,i,a,s){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,a,s):t.prototype&&t.prototype.isPureReactComponent?!Xa(n,r)||!Xa(i,a):!0}function vC(e,t,n){var r=!1,i=ur,a=t.contextType;return typeof a=="object"&&a!==null?a=Lt(a):(i=mt(t)?qr:at.current,r=t.contextTypes,a=(r=r!=null)?Di(e,i):ur),t=new t(n,a),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=hl,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function w0(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&hl.enqueueReplaceState(t,t.state,null)}function Pm(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},Fv(e);var a=t.contextType;typeof a=="object"&&a!==null?i.context=Lt(a):(a=mt(t)?qr:at.current,i.context=Di(e,a)),i.state=e.memoizedState,a=t.getDerivedStateFromProps,typeof a=="function"&&(jm(e,t,a,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&hl.enqueueReplaceState(i,i.state,null),Fo(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function Fi(e,t){try{var n="",r=t;do n+=CN(r),r=r.return;while(r);var i=n}catch(a){i=`
Error generating stack: `+a.message+`
`+a.stack}return{value:e,source:t,stack:i,digest:null}}function Lu(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Nm(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var ZA=typeof WeakMap=="function"?WeakMap:Map;function yC(e,t,n){n=kn(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Uo||(Uo=!0,$m=r),Nm(e,t)},n}function gC(e,t,n){n=kn(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){Nm(e,t)}}var a=e.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(n.callback=function(){Nm(e,t),typeof r!="function"&&(ir===null?ir=new Set([this]):ir.add(this));var s=t.stack;this.componentDidCatch(t.value,{componentStack:s!==null?s:""})}),n}function b0(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new ZA;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=hR.bind(null,e,t,n),t.then(e,e))}function x0(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function S0(e,t,n,r,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=kn(-1,1),t.tag=2,rr(n,t,1))),n.lanes|=1),e)}var eR=Rn.ReactCurrentOwner,ht=!1;function lt(e,t,n,r){t.child=e===null?WE(t,null,n,r):Li(t,e.child,n,r)}function _0(e,t,n,r,i){n=n.render;var a=t.ref;return Ai(t,i),r=Uv(e,t,n,r,a,i),n=Gv(),e!==null&&!ht?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Pn(e,t,i)):(Se&&n&&Av(t),t.flags|=1,lt(e,t,r,i),t.child)}function k0(e,t,n,r,i){if(e===null){var a=n.type;return typeof a=="function"&&!ty(a)&&a.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=a,wC(e,t,a,r,i)):(e=bo(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(a=e.child,!(e.lanes&i)){var s=a.memoizedProps;if(n=n.compare,n=n!==null?n:Xa,n(s,r)&&e.ref===t.ref)return Pn(e,t,i)}return t.flags|=1,e=sr(a,r),e.ref=t.ref,e.return=t,t.child=e}function wC(e,t,n,r,i){if(e!==null){var a=e.memoizedProps;if(Xa(a,r)&&e.ref===t.ref)if(ht=!1,t.pendingProps=r=a,(e.lanes&i)!==0)e.flags&131072&&(ht=!0);else return t.lanes=e.lanes,Pn(e,t,i)}return Am(e,t,n,r,i)}function bC(e,t,n){var r=t.pendingProps,i=r.children,a=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ye(Si,gt),gt|=n;else{if(!(n&1073741824))return e=a!==null?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ye(Si,gt),gt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=a!==null?a.baseLanes:n,ye(Si,gt),gt|=r}else a!==null?(r=a.baseLanes|n,t.memoizedState=null):r=n,ye(Si,gt),gt|=r;return lt(e,t,i,n),t.child}function xC(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Am(e,t,n,r,i){var a=mt(n)?qr:at.current;return a=Di(t,a),Ai(t,i),n=Uv(e,t,n,r,a,i),r=Gv(),e!==null&&!ht?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Pn(e,t,i)):(Se&&r&&Av(t),t.flags|=1,lt(e,t,n,i),t.child)}function E0(e,t,n,r,i){if(mt(n)){var a=!0;Io(t)}else a=!1;if(Ai(t,i),t.stateNode===null)yo(e,t),vC(t,n,r),Pm(t,n,r,i),r=!0;else if(e===null){var s=t.stateNode,o=t.memoizedProps;s.props=o;var l=s.context,u=n.contextType;typeof u=="object"&&u!==null?u=Lt(u):(u=mt(n)?qr:at.current,u=Di(t,u));var c=n.getDerivedStateFromProps,d=typeof c=="function"||typeof s.getSnapshotBeforeUpdate=="function";d||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(o!==r||l!==u)&&w0(t,s,r,u),Wn=!1;var f=t.memoizedState;s.state=f,Fo(t,r,s,i),l=t.memoizedState,o!==r||f!==l||pt.current||Wn?(typeof c=="function"&&(jm(t,n,c,r),l=t.memoizedState),(o=Wn||g0(t,n,o,r,f,l,u))?(d||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(t.flags|=4194308)):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),s.props=r,s.state=l,s.context=u,r=o):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{s=t.stateNode,YE(e,t),o=t.memoizedProps,u=t.type===t.elementType?o:Gt(t.type,o),s.props=u,d=t.pendingProps,f=s.context,l=n.contextType,typeof l=="object"&&l!==null?l=Lt(l):(l=mt(n)?qr:at.current,l=Di(t,l));var m=n.getDerivedStateFromProps;(c=typeof m=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(o!==d||f!==l)&&w0(t,s,r,l),Wn=!1,f=t.memoizedState,s.state=f,Fo(t,r,s,i);var v=t.memoizedState;o!==d||f!==v||pt.current||Wn?(typeof m=="function"&&(jm(t,n,m,r),v=t.memoizedState),(u=Wn||g0(t,n,u,r,f,v,l)||!1)?(c||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(r,v,l),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(r,v,l)),typeof s.componentDidUpdate=="function"&&(t.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof s.componentDidUpdate!="function"||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=v),s.props=r,s.state=v,s.context=l,r=u):(typeof s.componentDidUpdate!="function"||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),r=!1)}return Rm(e,t,n,r,a,i)}function Rm(e,t,n,r,i,a){xC(e,t);var s=(t.flags&128)!==0;if(!r&&!s)return i&&c0(t,n,!1),Pn(e,t,a);r=t.stateNode,eR.current=t;var o=s&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&s?(t.child=Li(t,e.child,null,a),t.child=Li(t,null,o,a)):lt(e,t,o,a),t.memoizedState=r.state,i&&c0(t,n,!0),t.child}function SC(e){var t=e.stateNode;t.pendingContext?u0(e,t.pendingContext,t.pendingContext!==t.context):t.context&&u0(e,t.context,!1),Vv(e,t.containerInfo)}function C0(e,t,n,r,i){return Oi(),Iv(i),t.flags|=256,lt(e,t,n,r),t.child}var Im={dehydrated:null,treeContext:null,retryLane:0};function Dm(e){return{baseLanes:e,cachePool:null,transitions:null}}function _C(e,t,n){var r=t.pendingProps,i=Ce.current,a=!1,s=(t.flags&128)!==0,o;if((o=s)||(o=e!==null&&e.memoizedState===null?!1:(i&2)!==0),o?(a=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),ye(Ce,i&1),e===null)return Tm(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(s=r.children,e=r.fallback,a?(r=t.mode,a=t.child,s={mode:"hidden",children:s},!(r&1)&&a!==null?(a.childLanes=0,a.pendingProps=s):a=vl(s,r,0,null),e=Dr(e,r,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=Dm(n),t.memoizedState=Im,e):Kv(t,s));if(i=e.memoizedState,i!==null&&(o=i.dehydrated,o!==null))return tR(e,t,s,r,o,i,n);if(a){a=r.fallback,s=t.mode,i=e.child,o=i.sibling;var l={mode:"hidden",children:r.children};return!(s&1)&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=l,t.deletions=null):(r=sr(i,l),r.subtreeFlags=i.subtreeFlags&14680064),o!==null?a=sr(o,a):(a=Dr(a,s,n,null),a.flags|=2),a.return=t,r.return=t,r.sibling=a,t.child=r,r=a,a=t.child,s=e.child.memoizedState,s=s===null?Dm(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},a.memoizedState=s,a.childLanes=e.childLanes&~n,t.memoizedState=Im,r}return a=e.child,e=a.sibling,r=sr(a,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Kv(e,t){return t=vl({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Xs(e,t,n,r){return r!==null&&Iv(r),Li(t,e.child,null,n),e=Kv(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function tR(e,t,n,r,i,a,s){if(n)return t.flags&256?(t.flags&=-257,r=Lu(Error(O(422))),Xs(e,t,s,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(a=r.fallback,i=t.mode,r=vl({mode:"visible",children:r.children},i,0,null),a=Dr(a,i,s,null),a.flags|=2,r.return=t,a.return=t,r.sibling=a,t.child=r,t.mode&1&&Li(t,e.child,null,s),t.child.memoizedState=Dm(s),t.memoizedState=Im,a);if(!(t.mode&1))return Xs(e,t,s,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var o=r.dgst;return r=o,a=Error(O(419)),r=Lu(a,r,void 0),Xs(e,t,s,r)}if(o=(s&e.childLanes)!==0,ht||o){if(r=We,r!==null){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|s)?0:i,i!==0&&i!==a.retryLane&&(a.retryLane=i,jn(e,i),Yt(r,e,i,-1))}return ey(),r=Lu(Error(O(421))),Xs(e,t,s,r)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=pR.bind(null,e),i._reactRetry=t,null):(e=a.treeContext,xt=nr(i.nextSibling),St=t,Se=!0,Wt=null,e!==null&&(Rt[It++]=bn,Rt[It++]=xn,Rt[It++]=Fr,bn=e.id,xn=e.overflow,Fr=t),t=Kv(t,r.children),t.flags|=4096,t)}function T0(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Mm(e.return,t,n)}function qu(e,t,n,r,i){var a=e.memoizedState;a===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function kC(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(lt(e,t,r.children,n),r=Ce.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&T0(e,n,t);else if(e.tag===19)T0(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(ye(Ce,r),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&Vo(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),qu(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&Vo(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}qu(t,!0,n,null,a);break;case"together":qu(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function yo(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Pn(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),$r|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(O(153));if(t.child!==null){for(e=t.child,n=sr(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=sr(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function nR(e,t,n){switch(t.tag){case 3:SC(t),Oi();break;case 5:QE(t);break;case 1:mt(t.type)&&Io(t);break;case 4:Vv(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;ye(Lo,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(ye(Ce,Ce.current&1),t.flags|=128,null):n&t.child.childLanes?_C(e,t,n):(ye(Ce,Ce.current&1),e=Pn(e,t,n),e!==null?e.sibling:null);ye(Ce,Ce.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return kC(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),ye(Ce,Ce.current),r)break;return null;case 22:case 23:return t.lanes=0,bC(e,t,n)}return Pn(e,t,n)}var EC,Om,CC,TC;EC=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Om=function(){};CC=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Nr(ln.current);var a=null;switch(n){case"input":i=im(e,i),r=im(e,r),a=[];break;case"select":i=je({},i,{value:void 0}),r=je({},r,{value:void 0}),a=[];break;case"textarea":i=om(e,i),r=om(e,r),a=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Ao)}um(n,r);var s;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var o=i[u];for(s in o)o.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Ua.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in r){var l=r[u];if(o=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&l!==o&&(l!=null||o!=null))if(u==="style")if(o){for(s in o)!o.hasOwnProperty(s)||l&&l.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in l)l.hasOwnProperty(s)&&o[s]!==l[s]&&(n||(n={}),n[s]=l[s])}else n||(a||(a=[]),a.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,o=o?o.__html:void 0,l!=null&&o!==l&&(a=a||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(a=a||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Ua.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&ge("scroll",e),a||o===l||(a=[])):(a=a||[]).push(u,l))}n&&(a=a||[]).push("style",n);var u=a;(t.updateQueue=u)&&(t.flags|=4)}};TC=function(e,t,n,r){n!==r&&(t.flags|=4)};function ha(e,t){if(!Se)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function tt(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function rR(e,t,n){var r=t.pendingProps;switch(Rv(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return tt(t),null;case 1:return mt(t.type)&&Ro(),tt(t),null;case 3:return r=t.stateNode,qi(),be(pt),be(at),Bv(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Ys(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Wt!==null&&(Um(Wt),Wt=null))),Om(e,t),tt(t),null;case 5:$v(t);var i=Nr(ns.current);if(n=t.type,e!==null&&t.stateNode!=null)CC(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(O(166));return tt(t),null}if(e=Nr(ln.current),Ys(t)){r=t.stateNode,n=t.type;var a=t.memoizedProps;switch(r[an]=t,r[es]=a,e=(t.mode&1)!==0,n){case"dialog":ge("cancel",r),ge("close",r);break;case"iframe":case"object":case"embed":ge("load",r);break;case"video":case"audio":for(i=0;i<xa.length;i++)ge(xa[i],r);break;case"source":ge("error",r);break;case"img":case"image":case"link":ge("error",r),ge("load",r);break;case"details":ge("toggle",r);break;case"input":Og(r,a),ge("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},ge("invalid",r);break;case"textarea":qg(r,a),ge("invalid",r)}um(n,a),i=null;for(var s in a)if(a.hasOwnProperty(s)){var o=a[s];s==="children"?typeof o=="string"?r.textContent!==o&&(a.suppressHydrationWarning!==!0&&Ks(r.textContent,o,e),i=["children",o]):typeof o=="number"&&r.textContent!==""+o&&(a.suppressHydrationWarning!==!0&&Ks(r.textContent,o,e),i=["children",""+o]):Ua.hasOwnProperty(s)&&o!=null&&s==="onScroll"&&ge("scroll",r)}switch(n){case"input":Vs(r),Lg(r,a,!0);break;case"textarea":Vs(r),Fg(r);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(r.onclick=Ao)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{s=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=tE(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=s.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=s.createElement(n,{is:r.is}):(e=s.createElement(n),n==="select"&&(s=e,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):e=s.createElementNS(e,n),e[an]=t,e[es]=r,EC(e,t,!1,!1),t.stateNode=e;e:{switch(s=cm(n,r),n){case"dialog":ge("cancel",e),ge("close",e),i=r;break;case"iframe":case"object":case"embed":ge("load",e),i=r;break;case"video":case"audio":for(i=0;i<xa.length;i++)ge(xa[i],e);i=r;break;case"source":ge("error",e),i=r;break;case"img":case"image":case"link":ge("error",e),ge("load",e),i=r;break;case"details":ge("toggle",e),i=r;break;case"input":Og(e,r),i=im(e,r),ge("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=je({},r,{value:void 0}),ge("invalid",e);break;case"textarea":qg(e,r),i=om(e,r),ge("invalid",e);break;default:i=r}um(n,i),o=i;for(a in o)if(o.hasOwnProperty(a)){var l=o[a];a==="style"?iE(e,l):a==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&nE(e,l)):a==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Ga(e,l):typeof l=="number"&&Ga(e,""+l):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(Ua.hasOwnProperty(a)?l!=null&&a==="onScroll"&&ge("scroll",e):l!=null&&gv(e,a,l,s))}switch(n){case"input":Vs(e),Lg(e,r,!1);break;case"textarea":Vs(e),Fg(e);break;case"option":r.value!=null&&e.setAttribute("value",""+lr(r.value));break;case"select":e.multiple=!!r.multiple,a=r.value,a!=null?Mi(e,!!r.multiple,a,!1):r.defaultValue!=null&&Mi(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=Ao)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return tt(t),null;case 6:if(e&&t.stateNode!=null)TC(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(O(166));if(n=Nr(ns.current),Nr(ln.current),Ys(t)){if(r=t.stateNode,n=t.memoizedProps,r[an]=t,(a=r.nodeValue!==n)&&(e=St,e!==null))switch(e.tag){case 3:Ks(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Ks(r.nodeValue,n,(e.mode&1)!==0)}a&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[an]=t,t.stateNode=r}return tt(t),null;case 13:if(be(Ce),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Se&&xt!==null&&t.mode&1&&!(t.flags&128))GE(),Oi(),t.flags|=98560,a=!1;else if(a=Ys(t),r!==null&&r.dehydrated!==null){if(e===null){if(!a)throw Error(O(318));if(a=t.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(O(317));a[an]=t}else Oi(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;tt(t),a=!1}else Wt!==null&&(Um(Wt),Wt=null),a=!0;if(!a)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Ce.current&1?Ue===0&&(Ue=3):ey())),t.updateQueue!==null&&(t.flags|=4),tt(t),null);case 4:return qi(),Om(e,t),e===null&&Ja(t.stateNode.containerInfo),tt(t),null;case 10:return Lv(t.type._context),tt(t),null;case 17:return mt(t.type)&&Ro(),tt(t),null;case 19:if(be(Ce),a=t.memoizedState,a===null)return tt(t),null;if(r=(t.flags&128)!==0,s=a.rendering,s===null)if(r)ha(a,!1);else{if(Ue!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(s=Vo(e),s!==null){for(t.flags|=128,ha(a,!1),r=s.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)a=n,e=r,a.flags&=14680066,s=a.alternate,s===null?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=s.childLanes,a.lanes=s.lanes,a.child=s.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=s.memoizedProps,a.memoizedState=s.memoizedState,a.updateQueue=s.updateQueue,a.type=s.type,e=s.dependencies,a.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return ye(Ce,Ce.current&1|2),t.child}e=e.sibling}a.tail!==null&&Le()>Vi&&(t.flags|=128,r=!0,ha(a,!1),t.lanes=4194304)}else{if(!r)if(e=Vo(s),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),ha(a,!0),a.tail===null&&a.tailMode==="hidden"&&!s.alternate&&!Se)return tt(t),null}else 2*Le()-a.renderingStartTime>Vi&&n!==1073741824&&(t.flags|=128,r=!0,ha(a,!1),t.lanes=4194304);a.isBackwards?(s.sibling=t.child,t.child=s):(n=a.last,n!==null?n.sibling=s:t.child=s,a.last=s)}return a.tail!==null?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=Le(),t.sibling=null,n=Ce.current,ye(Ce,r?n&1|2:n&1),t):(tt(t),null);case 22:case 23:return Zv(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?gt&1073741824&&(tt(t),t.subtreeFlags&6&&(t.flags|=8192)):tt(t),null;case 24:return null;case 25:return null}throw Error(O(156,t.tag))}function iR(e,t){switch(Rv(t),t.tag){case 1:return mt(t.type)&&Ro(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return qi(),be(pt),be(at),Bv(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return $v(t),null;case 13:if(be(Ce),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(O(340));Oi()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return be(Ce),null;case 4:return qi(),null;case 10:return Lv(t.type._context),null;case 22:case 23:return Zv(),null;case 24:return null;default:return null}}var Js=!1,rt=!1,aR=typeof WeakSet=="function"?WeakSet:Set,B=null;function xi(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ie(e,t,r)}else n.current=null}function Lm(e,t,n){try{n()}catch(r){Ie(e,t,r)}}var M0=!1;function sR(e,t){if(bm=jo,e=AE(),Nv(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch{n=null;break e}var s=0,o=-1,l=-1,u=0,c=0,d=e,f=null;t:for(;;){for(var m;d!==n||i!==0&&d.nodeType!==3||(o=s+i),d!==a||r!==0&&d.nodeType!==3||(l=s+r),d.nodeType===3&&(s+=d.nodeValue.length),(m=d.firstChild)!==null;)f=d,d=m;for(;;){if(d===e)break t;if(f===n&&++u===i&&(o=s),f===a&&++c===r&&(l=s),(m=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=m}n=o===-1||l===-1?null:{start:o,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(xm={focusedElem:e,selectionRange:n},jo=!1,B=t;B!==null;)if(t=B,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,B=e;else for(;B!==null;){t=B;try{var v=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var p=v.memoizedProps,b=v.memoizedState,y=t.stateNode,g=y.getSnapshotBeforeUpdate(t.elementType===t.type?p:Gt(t.type,p),b);y.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var x=t.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(O(163))}}catch(_){Ie(t,t.return,_)}if(e=t.sibling,e!==null){e.return=t.return,B=e;break}B=t.return}return v=M0,M0=!1,v}function La(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,a!==void 0&&Lm(t,n,a)}i=i.next}while(i!==r)}}function pl(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function qm(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function MC(e){var t=e.alternate;t!==null&&(e.alternate=null,MC(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[an],delete t[es],delete t[km],delete t[BA],delete t[zA])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function jC(e){return e.tag===5||e.tag===3||e.tag===4}function j0(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||jC(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Fm(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Ao));else if(r!==4&&(e=e.child,e!==null))for(Fm(e,t,n),e=e.sibling;e!==null;)Fm(e,t,n),e=e.sibling}function Vm(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(Vm(e,t,n),e=e.sibling;e!==null;)Vm(e,t,n),e=e.sibling}var Ye=null,Ht=!1;function Bn(e,t,n){for(n=n.child;n!==null;)PC(e,t,n),n=n.sibling}function PC(e,t,n){if(on&&typeof on.onCommitFiberUnmount=="function")try{on.onCommitFiberUnmount(sl,n)}catch{}switch(n.tag){case 5:rt||xi(n,t);case 6:var r=Ye,i=Ht;Ye=null,Bn(e,t,n),Ye=r,Ht=i,Ye!==null&&(Ht?(e=Ye,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Ye.removeChild(n.stateNode));break;case 18:Ye!==null&&(Ht?(e=Ye,n=n.stateNode,e.nodeType===8?Nu(e.parentNode,n):e.nodeType===1&&Nu(e,n),Ya(e)):Nu(Ye,n.stateNode));break;case 4:r=Ye,i=Ht,Ye=n.stateNode.containerInfo,Ht=!0,Bn(e,t,n),Ye=r,Ht=i;break;case 0:case 11:case 14:case 15:if(!rt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var a=i,s=a.destroy;a=a.tag,s!==void 0&&(a&2||a&4)&&Lm(n,t,s),i=i.next}while(i!==r)}Bn(e,t,n);break;case 1:if(!rt&&(xi(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){Ie(n,t,o)}Bn(e,t,n);break;case 21:Bn(e,t,n);break;case 22:n.mode&1?(rt=(r=rt)||n.memoizedState!==null,Bn(e,t,n),rt=r):Bn(e,t,n);break;default:Bn(e,t,n)}}function P0(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new aR),t.forEach(function(r){var i=mR.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function zt(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var a=e,s=t,o=s;e:for(;o!==null;){switch(o.tag){case 5:Ye=o.stateNode,Ht=!1;break e;case 3:Ye=o.stateNode.containerInfo,Ht=!0;break e;case 4:Ye=o.stateNode.containerInfo,Ht=!0;break e}o=o.return}if(Ye===null)throw Error(O(160));PC(a,s,i),Ye=null,Ht=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){Ie(i,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)NC(t,e),t=t.sibling}function NC(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(zt(t,e),nn(e),r&4){try{La(3,e,e.return),pl(3,e)}catch(p){Ie(e,e.return,p)}try{La(5,e,e.return)}catch(p){Ie(e,e.return,p)}}break;case 1:zt(t,e),nn(e),r&512&&n!==null&&xi(n,n.return);break;case 5:if(zt(t,e),nn(e),r&512&&n!==null&&xi(n,n.return),e.flags&32){var i=e.stateNode;try{Ga(i,"")}catch(p){Ie(e,e.return,p)}}if(r&4&&(i=e.stateNode,i!=null)){var a=e.memoizedProps,s=n!==null?n.memoizedProps:a,o=e.type,l=e.updateQueue;if(e.updateQueue=null,l!==null)try{o==="input"&&a.type==="radio"&&a.name!=null&&Zk(i,a),cm(o,s);var u=cm(o,a);for(s=0;s<l.length;s+=2){var c=l[s],d=l[s+1];c==="style"?iE(i,d):c==="dangerouslySetInnerHTML"?nE(i,d):c==="children"?Ga(i,d):gv(i,c,d,u)}switch(o){case"input":am(i,a);break;case"textarea":eE(i,a);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var m=a.value;m!=null?Mi(i,!!a.multiple,m,!1):f!==!!a.multiple&&(a.defaultValue!=null?Mi(i,!!a.multiple,a.defaultValue,!0):Mi(i,!!a.multiple,a.multiple?[]:"",!1))}i[es]=a}catch(p){Ie(e,e.return,p)}}break;case 6:if(zt(t,e),nn(e),r&4){if(e.stateNode===null)throw Error(O(162));i=e.stateNode,a=e.memoizedProps;try{i.nodeValue=a}catch(p){Ie(e,e.return,p)}}break;case 3:if(zt(t,e),nn(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ya(t.containerInfo)}catch(p){Ie(e,e.return,p)}break;case 4:zt(t,e),nn(e);break;case 13:zt(t,e),nn(e),i=e.child,i.flags&8192&&(a=i.memoizedState!==null,i.stateNode.isHidden=a,!a||i.alternate!==null&&i.alternate.memoizedState!==null||(Xv=Le())),r&4&&P0(e);break;case 22:if(c=n!==null&&n.memoizedState!==null,e.mode&1?(rt=(u=rt)||c,zt(t,e),rt=u):zt(t,e),nn(e),r&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!c&&e.mode&1)for(B=e,c=e.child;c!==null;){for(d=B=c;B!==null;){switch(f=B,m=f.child,f.tag){case 0:case 11:case 14:case 15:La(4,f,f.return);break;case 1:xi(f,f.return);var v=f.stateNode;if(typeof v.componentWillUnmount=="function"){r=f,n=f.return;try{t=r,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(p){Ie(r,n,p)}}break;case 5:xi(f,f.return);break;case 22:if(f.memoizedState!==null){A0(d);continue}}m!==null?(m.return=f,B=m):A0(d)}c=c.sibling}e:for(c=null,d=e;;){if(d.tag===5){if(c===null){c=d;try{i=d.stateNode,u?(a=i.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(o=d.stateNode,l=d.memoizedProps.style,s=l!=null&&l.hasOwnProperty("display")?l.display:null,o.style.display=rE("display",s))}catch(p){Ie(e,e.return,p)}}}else if(d.tag===6){if(c===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(p){Ie(e,e.return,p)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===e)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;d.sibling===null;){if(d.return===null||d.return===e)break e;c===d&&(c=null),d=d.return}c===d&&(c=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:zt(t,e),nn(e),r&4&&P0(e);break;case 21:break;default:zt(t,e),nn(e)}}function nn(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(jC(n)){var r=n;break e}n=n.return}throw Error(O(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Ga(i,""),r.flags&=-33);var a=j0(e);Vm(e,a,i);break;case 3:case 4:var s=r.stateNode.containerInfo,o=j0(e);Fm(e,o,s);break;default:throw Error(O(161))}}catch(l){Ie(e,e.return,l)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function oR(e,t,n){B=e,AC(e)}function AC(e,t,n){for(var r=(e.mode&1)!==0;B!==null;){var i=B,a=i.child;if(i.tag===22&&r){var s=i.memoizedState!==null||Js;if(!s){var o=i.alternate,l=o!==null&&o.memoizedState!==null||rt;o=Js;var u=rt;if(Js=s,(rt=l)&&!u)for(B=i;B!==null;)s=B,l=s.child,s.tag===22&&s.memoizedState!==null?R0(i):l!==null?(l.return=s,B=l):R0(i);for(;a!==null;)B=a,AC(a),a=a.sibling;B=i,Js=o,rt=u}N0(e)}else i.subtreeFlags&8772&&a!==null?(a.return=i,B=a):N0(e)}}function N0(e){for(;B!==null;){var t=B;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:rt||pl(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!rt)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:Gt(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;a!==null&&m0(t,a,r);break;case 3:var s=t.updateQueue;if(s!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}m0(t,s,n)}break;case 5:var o=t.stateNode;if(n===null&&t.flags&4){n=o;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var d=c.dehydrated;d!==null&&Ya(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(O(163))}rt||t.flags&512&&qm(t)}catch(f){Ie(t,t.return,f)}}if(t===e){B=null;break}if(n=t.sibling,n!==null){n.return=t.return,B=n;break}B=t.return}}function A0(e){for(;B!==null;){var t=B;if(t===e){B=null;break}var n=t.sibling;if(n!==null){n.return=t.return,B=n;break}B=t.return}}function R0(e){for(;B!==null;){var t=B;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{pl(4,t)}catch(l){Ie(t,n,l)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(l){Ie(t,i,l)}}var a=t.return;try{qm(t)}catch(l){Ie(t,a,l)}break;case 5:var s=t.return;try{qm(t)}catch(l){Ie(t,s,l)}}}catch(l){Ie(t,t.return,l)}if(t===e){B=null;break}var o=t.sibling;if(o!==null){o.return=t.return,B=o;break}B=t.return}}var lR=Math.ceil,zo=Rn.ReactCurrentDispatcher,Yv=Rn.ReactCurrentOwner,Ot=Rn.ReactCurrentBatchConfig,se=0,We=null,Ve=null,Xe=0,gt=0,Si=pr(0),Ue=0,ss=null,$r=0,ml=0,Qv=0,qa=null,ft=null,Xv=0,Vi=1/0,yn=null,Uo=!1,$m=null,ir=null,Zs=!1,Jn=null,Go=0,Fa=0,Bm=null,go=-1,wo=0;function ut(){return se&6?Le():go!==-1?go:go=Le()}function ar(e){return e.mode&1?se&2&&Xe!==0?Xe&-Xe:GA.transition!==null?(wo===0&&(wo=vE()),wo):(e=he,e!==0||(e=window.event,e=e===void 0?16:_E(e.type)),e):1}function Yt(e,t,n,r){if(50<Fa)throw Fa=0,Bm=null,Error(O(185));hs(e,n,r),(!(se&2)||e!==We)&&(e===We&&(!(se&2)&&(ml|=n),Ue===4&&Yn(e,Xe)),vt(e,r),n===1&&se===0&&!(t.mode&1)&&(Vi=Le()+500,dl&&mr()))}function vt(e,t){var n=e.callbackNode;GN(e,t);var r=Mo(e,e===We?Xe:0);if(r===0)n!==null&&Bg(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&Bg(n),t===1)e.tag===0?UA(I0.bind(null,e)):BE(I0.bind(null,e)),VA(function(){!(se&6)&&mr()}),n=null;else{switch(yE(r)){case 1:n=_v;break;case 4:n=pE;break;case 16:n=To;break;case 536870912:n=mE;break;default:n=To}n=VC(n,RC.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function RC(e,t){if(go=-1,wo=0,se&6)throw Error(O(327));var n=e.callbackNode;if(Ri()&&e.callbackNode!==n)return null;var r=Mo(e,e===We?Xe:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Ho(e,r);else{t=r;var i=se;se|=2;var a=DC();(We!==e||Xe!==t)&&(yn=null,Vi=Le()+500,Ir(e,t));do try{dR();break}catch(o){IC(e,o)}while(!0);Ov(),zo.current=a,se=i,Ve!==null?t=0:(We=null,Xe=0,t=Ue)}if(t!==0){if(t===2&&(i=mm(e),i!==0&&(r=i,t=zm(e,i))),t===1)throw n=ss,Ir(e,0),Yn(e,r),vt(e,Le()),n;if(t===6)Yn(e,r);else{if(i=e.current.alternate,!(r&30)&&!uR(i)&&(t=Ho(e,r),t===2&&(a=mm(e),a!==0&&(r=a,t=zm(e,a))),t===1))throw n=ss,Ir(e,0),Yn(e,r),vt(e,Le()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(O(345));case 2:Cr(e,ft,yn);break;case 3:if(Yn(e,r),(r&130023424)===r&&(t=Xv+500-Le(),10<t)){if(Mo(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){ut(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=_m(Cr.bind(null,e,ft,yn),t);break}Cr(e,ft,yn);break;case 4:if(Yn(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var s=31-Kt(r);a=1<<s,s=t[s],s>i&&(i=s),r&=~a}if(r=i,r=Le()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*lR(r/1960))-r,10<r){e.timeoutHandle=_m(Cr.bind(null,e,ft,yn),r);break}Cr(e,ft,yn);break;case 5:Cr(e,ft,yn);break;default:throw Error(O(329))}}}return vt(e,Le()),e.callbackNode===n?RC.bind(null,e):null}function zm(e,t){var n=qa;return e.current.memoizedState.isDehydrated&&(Ir(e,t).flags|=256),e=Ho(e,t),e!==2&&(t=ft,ft=n,t!==null&&Um(t)),e}function Um(e){ft===null?ft=e:ft.push.apply(ft,e)}function uR(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!Qt(a(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Yn(e,t){for(t&=~Qv,t&=~ml,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Kt(t),r=1<<n;e[n]=-1,t&=~r}}function I0(e){if(se&6)throw Error(O(327));Ri();var t=Mo(e,0);if(!(t&1))return vt(e,Le()),null;var n=Ho(e,t);if(e.tag!==0&&n===2){var r=mm(e);r!==0&&(t=r,n=zm(e,r))}if(n===1)throw n=ss,Ir(e,0),Yn(e,t),vt(e,Le()),n;if(n===6)throw Error(O(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Cr(e,ft,yn),vt(e,Le()),null}function Jv(e,t){var n=se;se|=1;try{return e(t)}finally{se=n,se===0&&(Vi=Le()+500,dl&&mr())}}function Br(e){Jn!==null&&Jn.tag===0&&!(se&6)&&Ri();var t=se;se|=1;var n=Ot.transition,r=he;try{if(Ot.transition=null,he=1,e)return e()}finally{he=r,Ot.transition=n,se=t,!(se&6)&&mr()}}function Zv(){gt=Si.current,be(Si)}function Ir(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,FA(n)),Ve!==null)for(n=Ve.return;n!==null;){var r=n;switch(Rv(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Ro();break;case 3:qi(),be(pt),be(at),Bv();break;case 5:$v(r);break;case 4:qi();break;case 13:be(Ce);break;case 19:be(Ce);break;case 10:Lv(r.type._context);break;case 22:case 23:Zv()}n=n.return}if(We=e,Ve=e=sr(e.current,null),Xe=gt=t,Ue=0,ss=null,Qv=ml=$r=0,ft=qa=null,Pr!==null){for(t=0;t<Pr.length;t++)if(n=Pr[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,a=n.pending;if(a!==null){var s=a.next;a.next=i,r.next=s}n.pending=r}Pr=null}return e}function IC(e,t){do{var n=Ve;try{if(Ov(),mo.current=Bo,$o){for(var r=Me.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}$o=!1}if(Vr=0,He=ze=Me=null,Oa=!1,rs=0,Yv.current=null,n===null||n.return===null){Ue=1,ss=t,Ve=null;break}e:{var a=e,s=n.return,o=n,l=t;if(t=Xe,o.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,c=o,d=c.tag;if(!(c.mode&1)&&(d===0||d===11||d===15)){var f=c.alternate;f?(c.updateQueue=f.updateQueue,c.memoizedState=f.memoizedState,c.lanes=f.lanes):(c.updateQueue=null,c.memoizedState=null)}var m=x0(s);if(m!==null){m.flags&=-257,S0(m,s,o,a,t),m.mode&1&&b0(a,u,t),t=m,l=u;var v=t.updateQueue;if(v===null){var p=new Set;p.add(l),t.updateQueue=p}else v.add(l);break e}else{if(!(t&1)){b0(a,u,t),ey();break e}l=Error(O(426))}}else if(Se&&o.mode&1){var b=x0(s);if(b!==null){!(b.flags&65536)&&(b.flags|=256),S0(b,s,o,a,t),Iv(Fi(l,o));break e}}a=l=Fi(l,o),Ue!==4&&(Ue=2),qa===null?qa=[a]:qa.push(a),a=s;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t;var y=yC(a,l,t);p0(a,y);break e;case 1:o=l;var g=a.type,x=a.stateNode;if(!(a.flags&128)&&(typeof g.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(ir===null||!ir.has(x)))){a.flags|=65536,t&=-t,a.lanes|=t;var _=gC(a,o,t);p0(a,_);break e}}a=a.return}while(a!==null)}LC(n)}catch(E){t=E,Ve===n&&n!==null&&(Ve=n=n.return);continue}break}while(!0)}function DC(){var e=zo.current;return zo.current=Bo,e===null?Bo:e}function ey(){(Ue===0||Ue===3||Ue===2)&&(Ue=4),We===null||!($r&268435455)&&!(ml&268435455)||Yn(We,Xe)}function Ho(e,t){var n=se;se|=2;var r=DC();(We!==e||Xe!==t)&&(yn=null,Ir(e,t));do try{cR();break}catch(i){IC(e,i)}while(!0);if(Ov(),se=n,zo.current=r,Ve!==null)throw Error(O(261));return We=null,Xe=0,Ue}function cR(){for(;Ve!==null;)OC(Ve)}function dR(){for(;Ve!==null&&!ON();)OC(Ve)}function OC(e){var t=FC(e.alternate,e,gt);e.memoizedProps=e.pendingProps,t===null?LC(e):Ve=t,Yv.current=null}function LC(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=iR(n,t),n!==null){n.flags&=32767,Ve=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Ue=6,Ve=null;return}}else if(n=rR(n,t,gt),n!==null){Ve=n;return}if(t=t.sibling,t!==null){Ve=t;return}Ve=t=e}while(t!==null);Ue===0&&(Ue=5)}function Cr(e,t,n){var r=he,i=Ot.transition;try{Ot.transition=null,he=1,fR(e,t,n,r)}finally{Ot.transition=i,he=r}return null}function fR(e,t,n,r){do Ri();while(Jn!==null);if(se&6)throw Error(O(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(O(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(HN(e,a),e===We&&(Ve=We=null,Xe=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Zs||(Zs=!0,VC(To,function(){return Ri(),null})),a=(n.flags&15990)!==0,n.subtreeFlags&15990||a){a=Ot.transition,Ot.transition=null;var s=he;he=1;var o=se;se|=4,Yv.current=null,sR(e,n),NC(n,e),AA(xm),jo=!!bm,xm=bm=null,e.current=n,oR(n),LN(),se=o,he=s,Ot.transition=a}else e.current=n;if(Zs&&(Zs=!1,Jn=e,Go=i),a=e.pendingLanes,a===0&&(ir=null),VN(n.stateNode),vt(e,Le()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Uo)throw Uo=!1,e=$m,$m=null,e;return Go&1&&e.tag!==0&&Ri(),a=e.pendingLanes,a&1?e===Bm?Fa++:(Fa=0,Bm=e):Fa=0,mr(),null}function Ri(){if(Jn!==null){var e=yE(Go),t=Ot.transition,n=he;try{if(Ot.transition=null,he=16>e?16:e,Jn===null)var r=!1;else{if(e=Jn,Jn=null,Go=0,se&6)throw Error(O(331));var i=se;for(se|=4,B=e.current;B!==null;){var a=B,s=a.child;if(B.flags&16){var o=a.deletions;if(o!==null){for(var l=0;l<o.length;l++){var u=o[l];for(B=u;B!==null;){var c=B;switch(c.tag){case 0:case 11:case 15:La(8,c,a)}var d=c.child;if(d!==null)d.return=c,B=d;else for(;B!==null;){c=B;var f=c.sibling,m=c.return;if(MC(c),c===u){B=null;break}if(f!==null){f.return=m,B=f;break}B=m}}}var v=a.alternate;if(v!==null){var p=v.child;if(p!==null){v.child=null;do{var b=p.sibling;p.sibling=null,p=b}while(p!==null)}}B=a}}if(a.subtreeFlags&2064&&s!==null)s.return=a,B=s;else e:for(;B!==null;){if(a=B,a.flags&2048)switch(a.tag){case 0:case 11:case 15:La(9,a,a.return)}var y=a.sibling;if(y!==null){y.return=a.return,B=y;break e}B=a.return}}var g=e.current;for(B=g;B!==null;){s=B;var x=s.child;if(s.subtreeFlags&2064&&x!==null)x.return=s,B=x;else e:for(s=g;B!==null;){if(o=B,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:pl(9,o)}}catch(E){Ie(o,o.return,E)}if(o===s){B=null;break e}var _=o.sibling;if(_!==null){_.return=o.return,B=_;break e}B=o.return}}if(se=i,mr(),on&&typeof on.onPostCommitFiberRoot=="function")try{on.onPostCommitFiberRoot(sl,e)}catch{}r=!0}return r}finally{he=n,Ot.transition=t}}return!1}function D0(e,t,n){t=Fi(n,t),t=yC(e,t,1),e=rr(e,t,1),t=ut(),e!==null&&(hs(e,1,t),vt(e,t))}function Ie(e,t,n){if(e.tag===3)D0(e,e,n);else for(;t!==null;){if(t.tag===3){D0(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ir===null||!ir.has(r))){e=Fi(n,e),e=gC(t,e,1),t=rr(t,e,1),e=ut(),t!==null&&(hs(t,1,e),vt(t,e));break}}t=t.return}}function hR(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=ut(),e.pingedLanes|=e.suspendedLanes&n,We===e&&(Xe&n)===n&&(Ue===4||Ue===3&&(Xe&130023424)===Xe&&500>Le()-Xv?Ir(e,0):Qv|=n),vt(e,t)}function qC(e,t){t===0&&(e.mode&1?(t=zs,zs<<=1,!(zs&130023424)&&(zs=4194304)):t=1);var n=ut();e=jn(e,t),e!==null&&(hs(e,t,n),vt(e,n))}function pR(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),qC(e,n)}function mR(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(O(314))}r!==null&&r.delete(t),qC(e,n)}var FC;FC=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||pt.current)ht=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return ht=!1,nR(e,t,n);ht=!!(e.flags&131072)}else ht=!1,Se&&t.flags&1048576&&zE(t,Oo,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;yo(e,t),e=t.pendingProps;var i=Di(t,at.current);Ai(t,n),i=Uv(null,t,r,e,i,n);var a=Gv();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,mt(r)?(a=!0,Io(t)):a=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Fv(t),i.updater=hl,t.stateNode=i,i._reactInternals=t,Pm(t,r,e,n),t=Rm(null,t,r,!0,a,n)):(t.tag=0,Se&&a&&Av(t),lt(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(yo(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=yR(r),e=Gt(r,e),i){case 0:t=Am(null,t,r,e,n);break e;case 1:t=E0(null,t,r,e,n);break e;case 11:t=_0(null,t,r,e,n);break e;case 14:t=k0(null,t,r,Gt(r.type,e),n);break e}throw Error(O(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Gt(r,i),Am(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Gt(r,i),E0(e,t,r,i,n);case 3:e:{if(SC(t),e===null)throw Error(O(387));r=t.pendingProps,a=t.memoizedState,i=a.element,YE(e,t),Fo(t,r,null,n);var s=t.memoizedState;if(r=s.element,a.isDehydrated)if(a={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=a,t.memoizedState=a,t.flags&256){i=Fi(Error(O(423)),t),t=C0(e,t,r,n,i);break e}else if(r!==i){i=Fi(Error(O(424)),t),t=C0(e,t,r,n,i);break e}else for(xt=nr(t.stateNode.containerInfo.firstChild),St=t,Se=!0,Wt=null,n=WE(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Oi(),r===i){t=Pn(e,t,n);break e}lt(e,t,r,n)}t=t.child}return t;case 5:return QE(t),e===null&&Tm(t),r=t.type,i=t.pendingProps,a=e!==null?e.memoizedProps:null,s=i.children,Sm(r,i)?s=null:a!==null&&Sm(r,a)&&(t.flags|=32),xC(e,t),lt(e,t,s,n),t.child;case 6:return e===null&&Tm(t),null;case 13:return _C(e,t,n);case 4:return Vv(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Li(t,null,r,n):lt(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Gt(r,i),_0(e,t,r,i,n);case 7:return lt(e,t,t.pendingProps,n),t.child;case 8:return lt(e,t,t.pendingProps.children,n),t.child;case 12:return lt(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,a=t.memoizedProps,s=i.value,ye(Lo,r._currentValue),r._currentValue=s,a!==null)if(Qt(a.value,s)){if(a.children===i.children&&!pt.current){t=Pn(e,t,n);break e}}else for(a=t.child,a!==null&&(a.return=t);a!==null;){var o=a.dependencies;if(o!==null){s=a.child;for(var l=o.firstContext;l!==null;){if(l.context===r){if(a.tag===1){l=kn(-1,n&-n),l.tag=2;var u=a.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}a.lanes|=n,l=a.alternate,l!==null&&(l.lanes|=n),Mm(a.return,n,t),o.lanes|=n;break}l=l.next}}else if(a.tag===10)s=a.type===t.type?null:a.child;else if(a.tag===18){if(s=a.return,s===null)throw Error(O(341));s.lanes|=n,o=s.alternate,o!==null&&(o.lanes|=n),Mm(s,n,t),s=a.sibling}else s=a.child;if(s!==null)s.return=a;else for(s=a;s!==null;){if(s===t){s=null;break}if(a=s.sibling,a!==null){a.return=s.return,s=a;break}s=s.return}a=s}lt(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Ai(t,n),i=Lt(i),r=r(i),t.flags|=1,lt(e,t,r,n),t.child;case 14:return r=t.type,i=Gt(r,t.pendingProps),i=Gt(r.type,i),k0(e,t,r,i,n);case 15:return wC(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Gt(r,i),yo(e,t),t.tag=1,mt(r)?(e=!0,Io(t)):e=!1,Ai(t,n),vC(t,r,i),Pm(t,r,i,n),Rm(null,t,r,!0,e,n);case 19:return kC(e,t,n);case 22:return bC(e,t,n)}throw Error(O(156,t.tag))};function VC(e,t){return hE(e,t)}function vR(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Dt(e,t,n,r){return new vR(e,t,n,r)}function ty(e){return e=e.prototype,!(!e||!e.isReactComponent)}function yR(e){if(typeof e=="function")return ty(e)?1:0;if(e!=null){if(e=e.$$typeof,e===bv)return 11;if(e===xv)return 14}return 2}function sr(e,t){var n=e.alternate;return n===null?(n=Dt(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function bo(e,t,n,r,i,a){var s=2;if(r=e,typeof e=="function")ty(e)&&(s=1);else if(typeof e=="string")s=5;else e:switch(e){case fi:return Dr(n.children,i,a,t);case wv:s=8,i|=8;break;case em:return e=Dt(12,n,t,i|2),e.elementType=em,e.lanes=a,e;case tm:return e=Dt(13,n,t,i),e.elementType=tm,e.lanes=a,e;case nm:return e=Dt(19,n,t,i),e.elementType=nm,e.lanes=a,e;case Qk:return vl(n,i,a,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Kk:s=10;break e;case Yk:s=9;break e;case bv:s=11;break e;case xv:s=14;break e;case Hn:s=16,r=null;break e}throw Error(O(130,e==null?e:typeof e,""))}return t=Dt(s,n,t,i),t.elementType=e,t.type=r,t.lanes=a,t}function Dr(e,t,n,r){return e=Dt(7,e,r,t),e.lanes=n,e}function vl(e,t,n,r){return e=Dt(22,e,r,t),e.elementType=Qk,e.lanes=n,e.stateNode={isHidden:!1},e}function Fu(e,t,n){return e=Dt(6,e,null,t),e.lanes=n,e}function Vu(e,t,n){return t=Dt(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function gR(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=bu(0),this.expirationTimes=bu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=bu(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function ny(e,t,n,r,i,a,s,o,l){return e=new gR(e,t,n,o,l),t===1?(t=1,a===!0&&(t|=8)):t=0,a=Dt(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Fv(a),e}function wR(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:di,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function $C(e){if(!e)return ur;e=e._reactInternals;e:{if(Ur(e)!==e||e.tag!==1)throw Error(O(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(mt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(O(171))}if(e.tag===1){var n=e.type;if(mt(n))return $E(e,n,t)}return t}function BC(e,t,n,r,i,a,s,o,l){return e=ny(n,r,!0,e,i,a,s,o,l),e.context=$C(null),n=e.current,r=ut(),i=ar(n),a=kn(r,i),a.callback=t??null,rr(n,a,i),e.current.lanes=i,hs(e,i,r),vt(e,r),e}function yl(e,t,n,r){var i=t.current,a=ut(),s=ar(i);return n=$C(n),t.context===null?t.context=n:t.pendingContext=n,t=kn(a,s),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=rr(i,t,s),e!==null&&(Yt(e,i,s,a),po(e,i,s)),s}function Wo(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function O0(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function ry(e,t){O0(e,t),(e=e.alternate)&&O0(e,t)}function bR(){return null}var zC=typeof reportError=="function"?reportError:function(e){console.error(e)};function iy(e){this._internalRoot=e}gl.prototype.render=iy.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(O(409));yl(e,t,null,null)};gl.prototype.unmount=iy.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Br(function(){yl(null,e,null,null)}),t[Mn]=null}};function gl(e){this._internalRoot=e}gl.prototype.unstable_scheduleHydration=function(e){if(e){var t=bE();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Kn.length&&t!==0&&t<Kn[n].priority;n++);Kn.splice(n,0,e),n===0&&SE(e)}};function ay(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function wl(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function L0(){}function xR(e,t,n,r,i){if(i){if(typeof r=="function"){var a=r;r=function(){var u=Wo(s);a.call(u)}}var s=BC(t,r,e,0,null,!1,!1,"",L0);return e._reactRootContainer=s,e[Mn]=s.current,Ja(e.nodeType===8?e.parentNode:e),Br(),s}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var o=r;r=function(){var u=Wo(l);o.call(u)}}var l=ny(e,0,!1,null,null,!1,!1,"",L0);return e._reactRootContainer=l,e[Mn]=l.current,Ja(e.nodeType===8?e.parentNode:e),Br(function(){yl(t,l,n,r)}),l}function bl(e,t,n,r,i){var a=n._reactRootContainer;if(a){var s=a;if(typeof i=="function"){var o=i;i=function(){var l=Wo(s);o.call(l)}}yl(t,s,e,i)}else s=xR(n,t,e,i,r);return Wo(s)}gE=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ba(t.pendingLanes);n!==0&&(kv(t,n|1),vt(t,Le()),!(se&6)&&(Vi=Le()+500,mr()))}break;case 13:Br(function(){var r=jn(e,1);if(r!==null){var i=ut();Yt(r,e,1,i)}}),ry(e,1)}};Ev=function(e){if(e.tag===13){var t=jn(e,134217728);if(t!==null){var n=ut();Yt(t,e,134217728,n)}ry(e,134217728)}};wE=function(e){if(e.tag===13){var t=ar(e),n=jn(e,t);if(n!==null){var r=ut();Yt(n,e,t,r)}ry(e,t)}};bE=function(){return he};xE=function(e,t){var n=he;try{return he=e,t()}finally{he=n}};fm=function(e,t,n){switch(t){case"input":if(am(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=cl(r);if(!i)throw Error(O(90));Jk(r),am(r,i)}}}break;case"textarea":eE(e,n);break;case"select":t=n.value,t!=null&&Mi(e,!!n.multiple,t,!1)}};oE=Jv;lE=Br;var SR={usingClientEntryPoint:!1,Events:[ms,vi,cl,aE,sE,Jv]},pa={findFiberByHostInstance:jr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},_R={bundleType:pa.bundleType,version:pa.version,rendererPackageName:pa.rendererPackageName,rendererConfig:pa.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Rn.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=dE(e),e===null?null:e.stateNode},findFiberByHostInstance:pa.findFiberByHostInstance||bR,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var eo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!eo.isDisabled&&eo.supportsFiber)try{sl=eo.inject(_R),on=eo}catch{}}Ct.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=SR;Ct.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ay(t))throw Error(O(200));return wR(e,t,null,n)};Ct.createRoot=function(e,t){if(!ay(e))throw Error(O(299));var n=!1,r="",i=zC;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=ny(e,1,!1,null,null,n,!1,r,i),e[Mn]=t.current,Ja(e.nodeType===8?e.parentNode:e),new iy(t)};Ct.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(O(188)):(e=Object.keys(e).join(","),Error(O(268,e)));return e=dE(t),e=e===null?null:e.stateNode,e};Ct.flushSync=function(e){return Br(e)};Ct.hydrate=function(e,t,n){if(!wl(t))throw Error(O(200));return bl(null,e,t,!0,n)};Ct.hydrateRoot=function(e,t,n){if(!ay(e))throw Error(O(405));var r=n!=null&&n.hydratedSources||null,i=!1,a="",s=zC;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(a=n.identifierPrefix),n.onRecoverableError!==void 0&&(s=n.onRecoverableError)),t=BC(t,null,e,1,n??null,i,!1,a,s),e[Mn]=t.current,Ja(e),r)for(e=0;e<r.length;e++)n=r[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new gl(t)};Ct.render=function(e,t,n){if(!wl(t))throw Error(O(200));return bl(null,e,t,!1,n)};Ct.unmountComponentAtNode=function(e){if(!wl(e))throw Error(O(40));return e._reactRootContainer?(Br(function(){bl(null,null,e,!1,function(){e._reactRootContainer=null,e[Mn]=null})}),!0):!1};Ct.unstable_batchedUpdates=Jv;Ct.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!wl(n))throw Error(O(200));if(e==null||e._reactInternals===void 0)throw Error(O(38));return bl(e,t,n,!1,r)};Ct.version="18.3.1-next-f1338f8080-20240426";function UC(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(UC)}catch(e){console.error(e)}}UC(),Uk.exports=Ct;var kR=Uk.exports,q0=kR;Jp.createRoot=q0.createRoot,Jp.hydrateRoot=q0.hydrateRoot;const ER="modulepreload",CR=function(e){return"/agent-director/"+e},F0={},ys=function(t,n,r){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),o=(s==null?void 0:s.nonce)||(s==null?void 0:s.getAttribute("nonce"));i=Promise.allSettled(n.map(l=>{if(l=CR(l),l in F0)return;F0[l]=!0;const u=l.endsWith(".css"),c=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${c}`))return;const d=document.createElement("link");if(d.rel=u?"stylesheet":ER,u||(d.as="script"),d.crossOrigin="",d.href=l,o&&d.setAttribute("nonce",o),document.head.appendChild(d),u)return new Promise((f,m)=>{d.addEventListener("load",f),d.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${l}`)))})}))}function a(s){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s}return i.then(s=>{for(const o of s||[])o.status==="rejected"&&a(o.reason);return t().catch(a)})},TR=()=>h.jsxs("svg",{className:"logo-mark",width:"54",height:"54",viewBox:"0 0 120 120",role:"img","aria-label":"Agent Director logo",children:[h.jsx("rect",{x:"8",y:"8",width:"104",height:"104",rx:"18",className:"logo-frame"}),h.jsx("rect",{x:"24",y:"28",width:"72",height:"16",rx:"6",className:"logo-bar logo-bar-a"}),h.jsx("rect",{x:"24",y:"52",width:"72",height:"16",rx:"6",className:"logo-bar logo-bar-b"}),h.jsx("rect",{x:"24",y:"76",width:"72",height:"16",rx:"6",className:"logo-bar logo-bar-c"}),h.jsx("circle",{cx:"96",cy:"36",r:"6",className:"logo-node logo-node-a"}),h.jsx("circle",{cx:"96",cy:"60",r:"6",className:"logo-node logo-node-b"}),h.jsx("circle",{cx:"96",cy:"84",r:"6",className:"logo-node logo-node-c"})]});function MR({trace:e,traces:t=[],selectedTraceId:n,onSelectTrace:r,onReload:i,onStartTour:a,onToggleStory:s,onOpenPalette:o,onToggleExplain:l,onShareSession:u,onThemeChange:c,onMotionChange:d,themeMode:f="studio",motionMode:m="balanced",activeSessions:v=1,shareStatus:p=null,handoffStatus:b=null,explainMode:y=!1,storyActive:g=!1,mode:x="cinema",missionCompletion:_,runHealthScore:E=100,modeHotkeys:T="C / F / Space",onCreateHandoffDigest:M}){const C=Math.max(0,Math.min(100,Math.round(E))),j=_?`${_.done}/${_.total} missions`:"Missions n/a";return h.jsxs("header",{className:"header","data-help":!0,"data-help-indicator":!0,"data-tour":"header","data-help-title":"Mission control","data-help-body":"Trace identity, status, and live controls live here. Use Story, Guide, or Explain to orient new viewers.","data-help-placement":"bottom",children:[h.jsxs("div",{className:"header-title",children:[h.jsxs("div",{className:"header-logo",children:[h.jsx(TR,{}),h.jsx("span",{children:"Agent Director"})]}),h.jsx("div",{className:"header-tagline",children:"Cinematic trace intelligence for agent runs."}),h.jsxs("div",{className:"header-meta",children:[h.jsxs("span",{className:"header-run",children:["Run: ",(e==null?void 0:e.id)??"loading"]}),t.length>0?h.jsx("select",{className:"trace-select",value:n??(e==null?void 0:e.id)??"","aria-label":"Select trace",onChange:N=>r==null?void 0:r(N.target.value),"data-help":!0,"data-help-title":"Trace selector","data-help-body":"Switch between available runs to compare different sessions.","data-help-placement":"bottom",children:t.map(N=>h.jsxs("option",{value:N.id,children:[N.name," (",N.id,")"]},N.id))}):null,h.jsx("span",{className:`status-pill status-${(e==null?void 0:e.status)??"loading"}`,children:(e==null?void 0:e.status)??"loading"}),e!=null&&e.replay?h.jsxs("span",{className:"header-replay",title:`Replay from ${e.branchPointStepId??"unknown step"}`,children:["Replay: ",e.replay.strategy]}):null,h.jsxs("span",{className:"header-wall",children:["Wall: ",(e==null?void 0:e.metadata.wallTimeMs)??0,"ms"]}),h.jsxs("span",{className:"header-presence","aria-label":"Active sessions",children:["Live: ",v]}),h.jsxs("span",{className:"header-mode-pill","aria-label":"Current mode",children:["Mode: ",x]}),h.jsxs("span",{className:"header-hotkeys","aria-label":"Mode hotkeys",children:["Keys: ",T]}),h.jsx("span",{className:"header-mission","aria-label":"Mission completion",children:j}),h.jsxs("span",{className:"header-health","aria-label":`Run health score ${C}`,children:[h.jsx("span",{className:"header-health-bar",children:h.jsx("span",{className:"header-health-fill",style:{width:`${C}%`}})}),h.jsxs("span",{children:["Health ",C]})]}),p?h.jsx("span",{className:"header-share-status",children:p}):null,b?h.jsx("span",{className:"header-share-status",children:b}):null]})]}),h.jsxs("div",{className:"header-actions",children:[h.jsxs("label",{className:"theme-picker",children:["Theme",h.jsxs("select",{className:"trace-select",value:f,"aria-label":"Select theme",onChange:N=>c==null?void 0:c(N.target.value),children:[h.jsx("option",{value:"studio",children:"Studio"}),h.jsx("option",{value:"focus",children:"Focus"}),h.jsx("option",{value:"contrast",children:"Contrast"})]})]}),h.jsxs("label",{className:"theme-picker",children:["Motion",h.jsxs("select",{className:"trace-select",value:m,"aria-label":"Select motion profile",onChange:N=>d==null?void 0:d(N.target.value),children:[h.jsx("option",{value:"cinematic",children:"Cinematic"}),h.jsx("option",{value:"balanced",children:"Balanced"}),h.jsx("option",{value:"minimal",children:"Minimal"})]})]}),h.jsx("button",{className:`ghost-button ${g?"active":""}`,type:"button",onClick:s,"aria-pressed":g,"aria-label":"Toggle story mode","data-help":!0,"data-help-title":"Story mode","data-help-body":"Auto-runs a cinematic walkthrough for demos.","data-help-placement":"bottom",children:"Story"}),h.jsx("button",{className:"ghost-button",type:"button",onClick:a,"aria-label":"Start guided tour","data-help":!0,"data-help-title":"Guided tour","data-help-body":"Walk through the interface step by step.","data-help-placement":"bottom",children:"Guide"}),h.jsx("button",{className:"ghost-button",type:"button",onClick:o,"aria-label":"Open command palette","data-help":!0,"data-help-title":"Command palette","data-help-body":"Search and trigger any action instantly.","data-help-placement":"bottom",children:"Command"}),h.jsx("button",{className:`ghost-button ${y?"active":""}`,type:"button",onClick:l,"aria-pressed":y,"aria-label":"Toggle explain mode","data-help":!0,"data-help-title":"Explain mode","data-help-body":"Hover any control to see contextual guidance.","data-help-placement":"bottom",children:"Explain"}),h.jsx("button",{className:"ghost-button",onClick:i,type:"button","aria-label":"Refresh traces",title:"Refresh traces","data-help":!0,"data-help-title":"Refresh","data-help-body":"Reload traces from the data store.","data-help-placement":"bottom",children:"Refresh"}),h.jsx("button",{className:"ghost-button",type:"button",onClick:u,"aria-label":"Copy live session link",title:"Copy live session link",children:"Share"}),h.jsx("button",{className:"ghost-button",type:"button",onClick:M,"aria-label":"Copy session handoff digest",title:"Copy session handoff digest",children:"Handoff"}),h.jsx("a",{className:"ghost-button",href:"/help.html",target:"_blank",rel:"noreferrer","data-help":!0,"data-help-title":"Help","data-help-body":"Open quick docs for first run, key flows, troubleshooting, and shortcuts.","data-help-placement":"bottom",children:"Help"}),null]})]})}function jR({insights:e,investigation:t,onSelectStep:n,onJumpToBottleneck:r,onJumpToError:i}){var f,m,v,p,b;if(!e)return null;const a=e.timing,s=e.ioWarnings??[],o=e.concurrency,l=e.retryPatterns,u=e.costByTool??{},c=e.costByModel??{},d=((f=t==null?void 0:t.hypotheses)==null?void 0:f.slice(0,2))??[];return h.jsxs("section",{className:"insight-strip","data-help":!0,"data-help-indicator":!0,"data-tour":"insights","data-help-title":"Run insights","data-help-body":"Fast diagnostics for latency, cost, errors, and concurrency. Click chips to jump into the trace.","data-help-placement":"bottom",children:[h.jsxs("div",{className:"insight-block","data-help":!0,"data-help-title":"Top latency","data-help-body":"Largest steps by duration; jump straight to the slowest.","data-help-placement":"bottom",children:[h.jsx("span",{className:"insight-label",children:"Top latency"}),h.jsxs("div",{className:"insight-items",children:[e.topLatencySteps.map(y=>h.jsxs("button",{className:"insight-chip",type:"button",title:`Jump to ${y.name}`,onClick:()=>n==null?void 0:n(y.stepId),children:[y.name," (",y.durationMs,"ms)"]},y.stepId)),e.topLatencySteps.length>0?h.jsx("button",{className:"insight-chip",type:"button",onClick:r,title:"Jump to longest step",children:"Jump to bottleneck"}):null]})]}),h.jsxs("div",{className:"insight-block","data-help":!0,"data-help-title":"Cost by type","data-help-body":"Aggregated spend by step class.","data-help-placement":"bottom",children:[h.jsx("span",{className:"insight-label",children:"Cost by type"}),h.jsx("div",{className:"insight-items",children:Object.entries(e.costByType).map(([y,g])=>h.jsxs("span",{className:"insight-chip",title:`Total cost for ${y}`,children:[y,": $",g.toFixed(3)]},y))})]}),Object.keys(u).length?h.jsxs("div",{className:"insight-block","data-help":!0,"data-help-title":"Cost by tool","data-help-body":"Top tools by total spend.","data-help-placement":"bottom",children:[h.jsx("span",{className:"insight-label",children:"Cost by tool"}),h.jsx("div",{className:"insight-items",children:Object.entries(u).sort((y,g)=>g[1]-y[1]).slice(0,3).map(([y,g])=>h.jsxs("span",{className:"insight-chip",title:`Total cost for ${y}`,children:[y,": $",g.toFixed(3)]},y))})]}):null,h.jsxs("div",{className:"insight-block","data-help":!0,"data-help-title":"Errors & retries","data-help-body":"Instant visibility into failed or retried steps.","data-help-placement":"bottom",children:[h.jsx("span",{className:"insight-label",children:"Errors / retries"}),h.jsxs("div",{className:"insight-items",children:[h.jsxs("span",{className:"insight-chip",children:["Errors: ",e.errors]}),h.jsxs("span",{className:"insight-chip",children:["Retries: ",e.retries]}),e.errors>0?h.jsx("button",{className:"insight-chip",type:"button",onClick:i,title:"Jump to first error",children:"Jump to first error"}):null,(m=l==null?void 0:l.topRetries)!=null&&m.length?h.jsxs("span",{className:"insight-chip",title:`Retry rate ${(l.retryRate*100).toFixed(1)}%`,children:["Top retries: ",l.topRetries.length]}):null]})]}),h.jsxs("div",{className:"insight-block","data-help":!0,"data-help-title":"Wall vs work","data-help-body":"Wall time vs summed work to show parallelism.","data-help-placement":"bottom",children:[h.jsx("span",{className:"insight-label",children:"Wall vs work"}),h.jsxs("div",{className:"insight-items",children:[h.jsxs("span",{className:"insight-chip",title:"Wall clock duration",children:["Wall: ",e.wallTimeMs,"ms"]}),h.jsxs("span",{className:"insight-chip",title:"Sum of step durations",children:["Work: ",e.workTimeMs,"ms"]}),e.criticalPathMs!=null?h.jsxs("span",{className:"insight-chip",title:"Longest parent-child chain",children:["Critical: ",e.criticalPathMs,"ms"]}):null]})]}),h.jsxs("div",{className:"insight-block","data-help":!0,"data-help-title":"Health","data-help-body":"Timing and I/O anomalies detected in the trace.","data-help-placement":"bottom",children:[h.jsx("span",{className:"insight-label",children:"Health"}),h.jsxs("div",{className:"insight-items",children:[a!=null&&a.degraded?h.jsx("span",{className:"insight-chip insight-warning",title:a.issues.join(" "),children:"Timing degraded"}):h.jsx("span",{className:"insight-chip",children:"Timing OK"}),s.length>0?h.jsxs("span",{className:"insight-chip insight-warning",title:s.map(y=>y.message).join(" "),children:["IO warnings: ",s.length]}):h.jsx("span",{className:"insight-chip",children:"IO OK"})]})]}),d.length?h.jsxs("div",{className:"insight-block","data-help":!0,"data-help-title":"Investigator","data-help-body":"Automated root-cause hypotheses ranked by severity and confidence.","data-help-placement":"bottom",children:[h.jsx("span",{className:"insight-label",children:"Investigator"}),h.jsxs("div",{className:"insight-items",children:[d.map(y=>h.jsxs("span",{className:"insight-chip",title:y.summary,children:[y.title," (",Math.round(y.confidence*100),"%)"]},y.id)),(p=(v=d[0])==null?void 0:v.evidenceStepIds)!=null&&p[0]?h.jsx("button",{className:"insight-chip",type:"button",onClick:()=>n==null?void 0:n(d[0].evidenceStepIds[0]),children:"Jump to evidence"}):null]})]}):null,(b=o==null?void 0:o.buckets)!=null&&b.length?h.jsxs("div",{className:"insight-block","data-help":!0,"data-help-title":"Parallelism","data-help-body":"How many steps ran concurrently over time.","data-help-placement":"bottom",children:[h.jsx("span",{className:"insight-label",children:"Parallelism"}),h.jsx("div",{className:"insight-items",children:h.jsx("div",{className:"insight-heatmap",title:`Peak concurrency: ${o.peak}`,children:o.buckets.map((y,g)=>h.jsx("span",{className:"heatmap-bar",style:{height:`${Math.max(20,y.active/Math.max(1,o.peak)*48)}px`},title:`Bucket ${g+1}: ${y.active} active`},`${y.startMs}-${y.endMs}`))})})]}):null,Object.keys(c).length?h.jsxs("div",{className:"insight-block","data-help":!0,"data-help-title":"Model cost","data-help-body":"Spend by model family.","data-help-placement":"bottom",children:[h.jsx("span",{className:"insight-label",children:"Model cost"}),h.jsx("div",{className:"insight-items",children:Object.entries(c).map(([y,g])=>h.jsxs("span",{className:"insight-chip",title:`Total cost for ${y}`,children:[y,": $",g.toFixed(3)]},y))})]}):null]})}const PR=["all","llm_call","tool_call","decision","handoff","guardrail"];function NR({query:e,typeFilter:t,onQueryChange:n,onTypeFilterChange:r}){return h.jsxs("div",{className:"search-bar",children:[h.jsx("input",{className:"search-input",placeholder:"Search steps, tools, previews...","aria-label":"Search steps",value:e,onChange:i=>n(i.target.value),"data-help":!0,"data-help-title":"Search","data-help-body":"Filter steps by name, tool, or payload preview. Great for fast recall.","data-help-placement":"bottom"}),h.jsx("select",{className:"search-select",value:t,"aria-label":"Filter by step type",onChange:i=>r(i.target.value),"data-help":!0,"data-help-title":"Type filter","data-help-body":"Narrow the timeline to a specific class of steps (LLM, tool, decision, handoff).","data-help-placement":"bottom",children:PR.map(i=>h.jsx("option",{value:i,children:i},i))})]})}function xl(e,t,n){const r=Date.parse(e),i=n.map(c=>Date.parse(c.endedAt??c.startedAt)).filter(c=>Number.isFinite(c)),a=t?Date.parse(t):i.length?Math.max(...i):r,s=Math.max(1,a-r),o=n.map(c=>{const d=Math.max(0,Date.parse(c.startedAt)-r),f=Math.max(d,Date.parse(c.endedAt??c.startedAt)-r);return{stepId:c.id,startMs:d,endMs:f}}).sort((c,d)=>c.startMs-d.startMs||c.endMs-d.endMs),l=[],u=[];for(const c of o){let d=l.findIndex(f=>f<=c.startMs);d===-1?(d=l.length,l.push(c.endMs)):l[d]=c.endMs,u.push({stepId:c.stepId,startMs:c.startMs,endMs:c.endMs,lane:d,xPct:c.startMs/s*100,wPct:Math.max(.75,(c.endMs-c.startMs)/s*100)})}return{wallTimeMs:s,intervals:u,laneCount:l.length}}function AR(e){var v;const n=e.steps.map(p=>({stepId:p.id,name:p.name,durationMs:p.durationMs??0})).sort((p,b)=>b.durationMs-p.durationMs).slice(0,3),r={},i={};for(const p of e.steps)((v=p.metrics)==null?void 0:v.costUsd)!=null&&(r[p.type]=(r[p.type]??0)+p.metrics.costUsd,p.type==="tool_call"&&(i[p.name]=(i[p.name]??0)+p.metrics.costUsd));const a=e.steps.filter(p=>p.status==="failed").length,s=e.steps.filter(p=>!!p.retryOfStepId).length,o=e.metadata.wallTimeMs,l=e.metadata.workTimeMs??e.steps.reduce((p,b)=>p+(b.durationMs??0),0),u=IR(e),c=DR(e.steps),d=OR(e.steps),f=LR(e),m=qR(e.steps);return{topLatencySteps:n,costByType:r,costByTool:i,costByModel:{[e.metadata.modelId]:e.metadata.totalCostUsd??0},errors:a,retries:s,wallTimeMs:o,workTimeMs:l,timing:u,ioWarnings:c,criticalPathMs:d,concurrency:f,retryPatterns:m}}function RR(e){var n;const t=(n=e.metrics)==null?void 0:n.costUsd;return t==null?null:`$${t.toFixed(3)}`}function wn(e){if(!e)return null;const t=Date.parse(e);return Number.isNaN(t)?null:t}function IR(e){const t=wn(e.startedAt),n=wn(e.endedAt??void 0),r=[],i=[],a=[];return t==null&&a.push("Trace start time missing or invalid."),e.steps.forEach(s=>{const o=wn(s.startedAt),l=wn(s.endedAt??s.startedAt);if(o==null||l==null){r.push(s.id);return}if(l<o){i.push(s.id);return}t!=null&&o<t&&i.push(s.id),n!=null&&l>n&&i.push(s.id)}),r.length&&a.push(`Missing timestamps on ${r.length} steps.`),i.length&&a.push(`Timestamp skew detected on ${i.length} steps.`),{degraded:!!(r.length||i.length||t==null),issues:a,missingStepIds:r,skewedStepIds:i}}function DR(e){const t=new Map;e.forEach(a=>{a.type==="tool_call"&&a.toolCallId&&t.set(a.toolCallId,a)});const n=new Set,r=new Set,i=[];return e.forEach(a=>{a.type!=="llm_call"||!a.io||((a.io.emittedToolCallIds??[]).forEach(s=>{n.add(s),t.has(s)||i.push({kind:"missing_tool_step",message:`Emitted toolCallId ${s} has no tool step.`,stepId:a.id,toolCallId:s})}),(a.io.consumedToolCallIds??[]).forEach(s=>{r.add(s),t.has(s)||i.push({kind:"missing_tool_step",message:`Consumed toolCallId ${s} has no tool step.`,stepId:a.id,toolCallId:s}),n.has(s)||i.push({kind:"consume_without_emit",message:`Consumed toolCallId ${s} without emission.`,stepId:a.id,toolCallId:s})}))}),t.forEach((a,s)=>{n.has(s)||i.push({kind:"unemitted_tool",message:`Tool step ${a.id} has toolCallId ${s} never emitted.`,stepId:a.id,toolCallId:s}),r.has(s)||i.push({kind:"unconsumed_tool",message:`Tool step ${a.id} has toolCallId ${s} never consumed.`,stepId:a.id,toolCallId:s})}),i}function OR(e){const t=new Map,n=new Map,r=[];e.forEach(s=>{if(t.set(s.id,s.durationMs??0),s.parentStepId){const o=n.get(s.parentStepId)??[];o.push(s.id),n.set(s.parentStepId,o)}else r.push(s.id)});const i=new Map,a=s=>{if(i.has(s))return i.get(s)??0;const l=(n.get(s)??[]).reduce((c,d)=>Math.max(c,a(d)),0),u=(t.get(s)??0)+l;return i.set(s,u),u};return r.length?Math.max(...r.map(s=>a(s))):0}function LR(e){const t=wn(e.startedAt);if(t==null)return{buckets:[],peak:0};const n=wn(e.endedAt??void 0)??Math.max(...e.steps.map(l=>wn(l.endedAt??l.startedAt)??t),t),r=Math.max(1,n-t),i=12,a=Math.max(1,Math.floor(r/i)),s=[];let o=0;for(let l=0;l<i;l+=1){const u=t+l*a,c=u+a;let d=0;e.steps.forEach(f=>{const m=wn(f.startedAt),v=wn(f.endedAt??f.startedAt);m==null||v==null||v>=u&&m<=c&&(d+=1)}),o=Math.max(o,d),s.push({startMs:l*a,endMs:(l+1)*a,active:d})}return{buckets:s,peak:o}}function qR(e){const t={};e.forEach(i=>{i.retryOfStepId&&(t[i.retryOfStepId]=(t[i.retryOfStepId]??0)+1)});const n=Object.values(t).reduce((i,a)=>i+a,0),r=Object.entries(t).sort((i,a)=>a[1]-i[1]).slice(0,3);return{totalRetries:n,retryRate:e.length?n/e.length:0,topRetries:r.map(([i,a])=>({stepId:i,count:a}))}}const FR={llm_call:{label:"LLM",icon:"LLM",description:"Model call"},tool_call:{label:"TOOL",icon:"TOOL",description:"Tool call"},decision:{label:"DEC",icon:"DEC",description:"Decision"},handoff:{label:"HAND",icon:"HAND",description:"Handoff"},guardrail:{label:"GUARD",icon:"GUARD",description:"Guardrail"}};function VR(e){return FR[e]}function $R({type:e,size:t="sm",showLabel:n=!1}){const r=VR(e);return h.jsxs("span",{className:`step-badge step-badge-${e} step-badge-${t}`,title:r.description,children:[h.jsx("span",{className:"step-badge-icon",children:r.icon}),n?h.jsx("span",{className:"step-badge-label",children:r.label}):null]})}function GC({step:e,interval:t,playbackState:n,selected:r,onSelect:i,variant:a="base",diffStatus:s,disabled:o=!1,laneHeight:l=140}){var _,E,T,M,C,j;const u=RR(e),c=((_=e.preview)==null?void 0:_.subtitle)??((E=e.preview)==null?void 0:E.title)??"",d=((T=e.preview)==null?void 0:T.outputPreview)??((M=e.preview)==null?void 0:M.inputPreview)??"",f=s?`step-diff-${s}`:"",m=a==="ghost"?"step-ghost":"",v=t.wPct<8?"step-compact":"",p=e.type.replace("_"," ").toUpperCase(),b=((C=e.metrics)==null?void 0:C.tokensTotal)!=null?`${e.metrics.tokensTotal} tokens`:null,y=e.durationMs!=null?`${e.durationMs}ms`:null,g=[b,y,u].filter(Boolean).join("  "),x=`Click to inspect inputs/outputs and replay from this moment.${g?` ${g}.`:""}`;return h.jsxs("button",{type:"button",className:`step-card step-${e.type} step-${n} ${r?"step-selected":""} ${f} ${m} ${v}`,"data-step-id":e.id,"aria-pressed":r,"aria-hidden":a==="ghost",disabled:o,"data-help":!0,"data-help-title":`${e.name}  ${p}`,"data-help-body":x,"data-help-placement":"top",style:{left:`${t.xPct}%`,width:`${t.wPct}%`,top:`${t.lane*l}px`},onClick:()=>{o||i(e.id)},children:[h.jsxs("div",{className:"step-card-header",children:[h.jsxs("div",{className:"step-title-group",children:[h.jsx($R,{type:e.type}),h.jsx("span",{className:"step-title",children:e.name})]}),h.jsx("span",{className:`status-pill status-${e.status}`,children:e.status})]}),c?h.jsx("div",{className:"step-subtitle",children:c}):null,h.jsxs("div",{className:"step-metrics",children:[((j=e.metrics)==null?void 0:j.tokensTotal)!=null?h.jsxs("span",{children:[e.metrics.tokensTotal," tok"]}):null,e.durationMs!=null?h.jsxs("span",{children:[e.durationMs,"ms"]}):null,u?h.jsx("span",{children:u}):null]}),d?h.jsx("div",{className:"step-preview",children:d}):null]})}function HC(e,t){return t<e.startMs?"future":t>e.endMs?"past":"active"}const ma={type:{order:[],hidden:[]},status:{order:[],hidden:[]},parent:{order:[],hidden:[]}};function sy(e,t){return t==="type"?e.type:t==="status"?e.status:e.parentStepId??"root"}function BR(e,t){const n=new Set;return e.forEach(r=>n.add(sy(r,t))),Array.from(n).sort((r,i)=>r.localeCompare(i))}function V0(e,t,n){const r=new Set(e),i=[...t.filter(s=>r.has(s))];e.forEach(s=>{i.includes(s)||i.push(s)});const a=Array.from(new Set(n.filter(s=>r.has(s))));return{order:i,hidden:a}}const zR=140,UR=132,GR=96,$0={llm_call:1,tool_call:2,decision:3,handoff:4,guardrail:5};function WC(e){return[...e].sort((t,n)=>($0[t.type]??9)-($0[n.type]??9))}function HR(e,t,n,r,i){const a=new Map;t.forEach(f=>{var v;const m=sy(f,n);a.has(m)||a.set(m,[]),(v=a.get(m))==null||v.push(f)});const s=Array.from(a.keys()),o=[...r.filter(f=>s.includes(f))];s.forEach(f=>{o.includes(f)||o.push(f)});const l=o.filter(f=>!i.includes(f)),u=new Map;let c=0,d=0;return l.forEach(f=>{const m=a.get(f)??[],v=xl(e.startedAt,e.endedAt,m);v.intervals.forEach(p=>{u.set(p.stepId,{...p,lane:p.lane+c})}),c+=Math.max(1,v.laneCount)}),d=Math.max(1,c),{intervalsByStepId:u,laneCount:d,visibleGroups:l}}function WR({trace:e,steps:t,selectedStepId:n,onSelectStep:r,playheadPct:i,playheadMs:a,windowRange:s,ghostTrace:o,diff:l,laneStrategy:u="type",laneGroupsOrder:c=[],hiddenLaneGroups:d=[],laneHeight:f=zR,cardHeight:m=UR,compactHeight:v=GR}){const{intervalsByStepId:p,laneCount:b}=HR(e,t,u,c,d),y=Array.from(p.values()),g=new Map(y.map(A=>[A.stepId,A])),x=WC(t),_=e.metadata.wallTimeMs||1,E=new Set((l==null?void 0:l.removedSteps)??[]),T=new Set((l==null?void 0:l.changedSteps)??[]),M=new Set(((l==null?void 0:l.changedPairs)??[]).map(A=>A.rightId)),C=new Set((l==null?void 0:l.addedSteps)??[]);let j=y;if(s){const A=s.endMs-s.startMs,I=Math.max(1e3,A*.15),L=Math.max(0,s.startMs-I),K=s.endMs+I;if(j=y.filter(V=>V.endMs>=L&&V.startMs<=K),n&&!j.some(V=>V.stepId===n)){const V=g.get(n);V&&(j=[...j,V])}}const N=new Set(j.map(A=>A.stepId));return h.jsx("div",{className:"timeline",style:{"--step-card-height":`${m}px`,"--step-compact-height":`${v}px`},children:h.jsxs("div",{className:"timeline-grid",style:{height:`${b*f}px`},"data-help":!0,"data-help-title":"Timeline lanes","data-help-body":"Each lane stacks overlapping steps; width reflects duration.","data-help-placement":"top",children:[h.jsx("div",{className:"playback-cursor",style:{left:`${i}%`}}),x.filter(A=>N.has(A.id)).filter(A=>!d.includes(sy(A,u))).map(A=>{const I=g.get(A.id);if(!I)return null;const L=HC(I,a);return h.jsx(GC,{step:A,interval:I,playbackState:L,selected:n===A.id,diffStatus:E.has(A.id)?"removed":T.has(A.id)?"changed":null,laneHeight:f,onSelect:r},A.id)}),o?h.jsx(KR,{ghostTrace:o,baseWallTimeMs:_,playheadMs:a,windowRange:s,diffAdded:C,diffChanged:M,laneHeight:f}):null]})})}function KR({ghostTrace:e,baseWallTimeMs:t,playheadMs:n,windowRange:r,diffAdded:i,diffChanged:a,laneHeight:s}){const{intervals:o,laneCount:l}=xl(e.startedAt,e.endedAt,e.steps),u=new Map(o.map(p=>[p.stepId,p])),c=e.metadata.wallTimeMs||1,d=n/t*c;let f=o;if(r){const p=r.endMs-r.startMs,b=Math.max(1e3,p*.15),y=c/t,g=Math.max(0,(r.startMs-b)*y),x=Math.min(c,(r.endMs+b)*y);f=o.filter(_=>_.endMs>=g&&_.startMs<=x)}const m=new Set(f.map(p=>p.stepId)),v=WC(e.steps);return h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"ghost-lanes",style:{height:`${l*s}px`}}),v.filter(p=>m.has(p.id)).map(p=>{const b=u.get(p.id);if(!b)return null;const y=HC(b,d),g=i.has(p.id)?"added":a.has(p.id)?"changed":null;return h.jsx(GC,{step:p,interval:b,playbackState:y,selected:!1,diffStatus:g,variant:"ghost",disabled:!0,laneHeight:s,onSelect:()=>{}},`ghost-${p.id}`)})]})}function YR({trace:e,steps:t,selectedStepId:n,onSelectStep:r,playheadMs:i,windowRange:a,timing:s,ghostTrace:o,diff:l,laneStrategy:u,laneGroupsOrder:c,hiddenLaneGroups:d,onLaneStrategyChange:f,onToggleLaneGroupVisibility:m,onMoveLaneGroup:v}){const p=e.metadata.wallTimeMs||1,b=Math.min(100,Math.max(0,i/p*100)),y=c.filter(g=>!d.includes(g)).length;return h.jsxs("section",{className:"cinema-mode","aria-label":"Cinema mode",children:[s!=null&&s.degraded?h.jsxs("div",{className:"timing-banner",title:s.issues.join(" "),children:["Timing degraded: ",s.issues[0]??"Check timestamps."]}):null,h.jsxs("div",{className:"timeline-studio-panel","data-help":!0,"data-help-title":"Timeline studio","data-help-body":"Regroup lanes by type/status/parent, hide noisy groups, and reorder emphasis.",children:[h.jsxs("label",{className:"timeline-studio-strategy",children:["Lane strategy",h.jsxs("select",{value:u,onChange:g=>f(g.target.value),children:[h.jsx("option",{value:"type",children:"Type"}),h.jsx("option",{value:"status",children:"Status"}),h.jsx("option",{value:"parent",children:"Parent branch"})]})]}),h.jsxs("div",{className:"timeline-studio-summary",children:[y,"/",c.length," groups visible"]}),h.jsx("div",{className:"timeline-studio-groups",children:c.map((g,x)=>{const _=d.includes(g);return h.jsxs("div",{className:`timeline-studio-group ${_?"is-hidden":""}`,children:[h.jsx("button",{type:"button",className:"ghost-button",onClick:()=>m(g),children:_?"Show":"Hide"}),h.jsx("span",{className:"timeline-studio-group-name",children:g}),h.jsx("button",{type:"button",className:"ghost-button",onClick:()=>v(g,"up"),disabled:x===0,children:"Up"}),h.jsx("button",{type:"button",className:"ghost-button",onClick:()=>v(g,"down"),disabled:x===c.length-1,children:"Down"})]},g)})})]}),h.jsx(WR,{trace:e,steps:t,selectedStepId:n,onSelectStep:r,playheadPct:b,playheadMs:i,windowRange:a,ghostTrace:o,diff:l,laneStrategy:u,laneGroupsOrder:c,hiddenLaneGroups:d})]})}const QR=[.5,1,1.5,2,4];function B0({playheadMs:e,wallTimeMs:t,isPlaying:n,speed:r,onToggle:i,onScrub:a,onSpeedChange:s}){const o=l=>{a(Number(l.target.value))};return h.jsxs("div",{className:"playback-controls",children:[h.jsx("button",{className:"ghost-button",type:"button",onClick:i,"aria-label":n?"Pause playback":"Play playback","data-help":!0,"data-help-title":"Playhead","data-help-body":"Start or pause the run to experience timing as it unfolded.","data-help-placement":"bottom",children:n?"Pause":"Play"}),h.jsx("input",{className:"playback-slider",type:"range",min:0,max:t,value:e,"aria-label":"Playback position",onChange:o,"data-help":!0,"data-help-title":"Scrub timeline","data-help-body":"Drag to jump to any moment in the run.","data-help-placement":"bottom"}),h.jsx("select",{className:"playback-speed",value:r,"aria-label":"Playback speed",onChange:l=>s(Number(l.target.value)),"data-help":!0,"data-help-title":"Speed","data-help-body":"Slow down to inspect or speed up to skim.","data-help-placement":"bottom",children:QR.map(l=>h.jsxs("option",{value:l,children:[l,"x"]},l))})]})}function XR(e,t,n,r=60){const{wallTimeMs:i,intervals:a}=xl(e,t,n),s=new Array(r).fill(0);if(!i)return{buckets:s,wallTimeMs:0};const o=i/r;return!Number.isFinite(o)||o<=0?{buckets:s,wallTimeMs:i}:(a.forEach(l=>{const u=Math.max(0,Math.floor(l.startMs/o)),c=Math.min(r-1,Math.floor(l.endMs/o));for(let d=u;d<=c;d+=1)s[d]+=1}),{buckets:s,wallTimeMs:i})}function JR(e,t){const n=new Blob([JSON.stringify(t,null,2)],{type:"application/json"}),r=URL.createObjectURL(n),i=document.createElement("a");i.href=r,i.download=e,document.body.appendChild(i),i.click(),i.remove(),URL.revokeObjectURL(r)}function ZR(e,t,n="text/plain"){const r=new Blob([t],{type:n}),i=URL.createObjectURL(r),a=document.createElement("a");a.href=i,a.download=e,document.body.appendChild(a),a.click(),a.remove(),URL.revokeObjectURL(i)}const va=5e3,eI=32;function wt(e,t,n){return Math.min(n,Math.max(t,e))}function ci(e,t){const n=new Set;return e.forEach(r=>{n.add(wt(Math.round(r),0,t))}),Array.from(n).sort((r,i)=>r-i).slice(0,eI)}function tI(e,t){if(!e)return{bookmarksMs:[],clipStartMs:null,clipEndMs:null,segments:[]};try{const n=JSON.parse(e),r=ci(Array.isArray(n.bookmarksMs)?n.bookmarksMs:[],t),i=typeof n.clipStartMs=="number"?wt(n.clipStartMs,0,t):null,a=typeof n.clipEndMs=="number"?wt(n.clipEndMs,0,t):null,s=Array.isArray(n.segments)?n.segments.filter(o=>typeof(o==null?void 0:o.id)=="string"&&typeof(o==null?void 0:o.startMs)=="number"&&typeof(o==null?void 0:o.endMs)=="number"&&typeof(o==null?void 0:o.label)=="string").map(o=>({...o,startMs:wt(o.startMs,0,t),endMs:wt(o.endMs,0,t)})):[];return{bookmarksMs:r,clipStartMs:i,clipEndMs:i!=null&&a!=null&&a<i?i:a,segments:s}}catch{return{bookmarksMs:[],clipStartMs:null,clipEndMs:null,segments:[]}}}function z0(e,t){const n=Date.parse(e);return Number.isNaN(n)?null:new Date(n+t).toISOString()}function nI({traceStart:e,traceEnd:t,steps:n,playheadMs:r,windowRange:i,windowed:a,spanMs:s,onSpanChange:o,onToggleWindowed:l,onScrub:u,persistenceKey:c,laneStrategy:d="type",visibleLaneGroups:f=[],remotePlayheads:m=[]}){const{buckets:v,wallTimeMs:p}=XR(e,t,n,64),b=Math.max(1,...v),y=wt(s,va,Math.max(va,p)),g=(i==null?void 0:i.startMs)??0,x=(i==null?void 0:i.endMs)??p,_=S.useMemo(()=>`agentDirector.timelineStudio.${c??e}`,[c,e]),[E,T]=S.useState([]),[M,C]=S.useState(null),[j,N]=S.useState(null),[A,I]=S.useState([]),[L,K]=S.useState("");S.useEffect(()=>{const F=tI(window.localStorage.getItem(_),p);T(F.bookmarksMs),C(F.clipStartMs),N(F.clipEndMs),I(F.segments)},[_,p]),S.useEffect(()=>{const F={bookmarksMs:ci(E,p),clipStartMs:M==null?null:wt(M,0,p),clipEndMs:j==null?null:wt(j,0,p),segments:A};window.localStorage.setItem(_,JSON.stringify(F))},[E,j,M,A,_,p]);const V=p?g/p*100:0,le=p?(x-g)/p*100:100,ie=p?r/p*100:0,R=M!=null&&j!=null?Math.min(M,j):null,q=M!=null&&j!=null?Math.max(M,j):null,G=R!=null&&q!=null&&p?(q-R)/p*100:0,z=R!=null&&p?R/p*100:0,ae=R!=null&&q!=null&&q>R,Pe=F=>{const te=F.currentTarget.getBoundingClientRect(),Q=(F.clientX-te.left)/te.width,qe=wt(Math.round(Q*p),0,p);u(qe)},oe=F=>{if(F.key==="ArrowLeft"){F.preventDefault(),u(wt(r-Math.max(250,Math.round(p*.02)),0,p));return}if(F.key==="ArrowRight"){F.preventDefault(),u(wt(r+Math.max(250,Math.round(p*.02)),0,p));return}if(F.key==="Home"){F.preventDefault(),u(0);return}if(F.key==="End"){F.preventDefault(),u(p);return}(F.key===" "||F.key==="Enter")&&(F.preventDefault(),u(r))},ce=()=>{T(F=>ci([...F,r],p))},$=F=>{if(E.length===0)return;const te=ci(E,p);if(F==="previous"){const qe=[...te].reverse().find(ne=>ne<r)??te[te.length-1];u(qe);return}const Q=te.find(qe=>qe>r)??te[0];u(Q)},de=()=>{const F=wt(r,0,p);C(F),j!=null&&j<F&&N(F)},Mt=()=>{const F=wt(r,0,p);N(F),M!=null&&M>F&&C(F)},fn=()=>{C(null),N(null)},Zt=()=>{if(!ae||R==null||q==null)return;const F=L.trim()||`Scene ${A.length+1}`,te=`segment-${Math.random().toString(36).slice(2,9)}`;I(Q=>[...Q,{id:te,startMs:R,endMs:q,label:F}]),K("")},gr=F=>{I(te=>te.filter(Q=>Q.id!==F))},Xr=()=>{if(!ae||R==null||q==null)return;const F={type:"agent-director-clip",traceStart:e,traceEnd:t,clip:{startMs:R,endMs:q,startAt:z0(e,R),endAt:z0(e,q)},bookmarksMs:ci(E,p).filter(te=>te>=R&&te<=q),playheadMs:r,laneContext:{strategy:d,visibleGroups:f},segments:A.filter(te=>te.endMs>=R&&te.startMs<=q),exportedAt:new Date().toISOString()};JR(`agent-director-clip-${R}-${q}.json`,F)};return h.jsxs("div",{className:"mini-timeline",children:[h.jsxs("div",{className:"mini-track",onClick:Pe,role:"slider",tabIndex:0,"aria-label":"Timeline density map","aria-valuemin":0,"aria-valuemax":p,"aria-valuenow":r,"aria-valuetext":`${r} milliseconds`,onKeyDown:oe,"data-help":!0,"data-help-title":"Density map","data-help-body":"A compact view of activity density. Click to jump the playhead.","data-help-placement":"top",children:[h.jsx("div",{className:"mini-bars",children:v.map((F,te)=>h.jsx("span",{className:"mini-bar",style:{height:`${F/b*100}%`}},`bucket-${te}`))}),h.jsx("div",{className:"mini-window",style:{left:`${V}%`,width:`${le}%`,opacity:a?1:.4}}),ae?h.jsx("div",{className:"mini-clip-window",style:{left:`${z}%`,width:`${G}%`}}):null,h.jsx("div",{className:"mini-bookmark-markers","data-testid":"timeline-bookmark-markers","aria-hidden":"true",children:ci(E,p).map(F=>{const te=p?F/p*100:0;return h.jsx("button",{type:"button",className:"mini-bookmark-marker",style:{left:`${te}%`},onClick:Q=>{Q.stopPropagation(),u(F)},title:`Jump to bookmark at ${F}ms`,"aria-label":`Bookmark ${F} milliseconds`},`bookmark-${F}`)})}),h.jsx("div",{className:"mini-remote-markers","aria-hidden":"true",children:m.map((F,te)=>{const Q=p?F/p*100:0;return h.jsx("span",{className:"mini-remote-marker",style:{left:`${Q}%`}},`remote-${te}`)})}),h.jsx("div",{className:"mini-segments","aria-hidden":"true",children:A.map(F=>{const te=p?F.startMs/p*100:0,Q=p?(F.endMs-F.startMs)/p*100:0;return h.jsx("span",{className:"mini-segment-bar",style:{left:`${te}%`,width:`${Math.max(1,Q)}%`},title:F.label},F.id)})}),h.jsx("div",{className:"mini-playhead",style:{left:`${ie}%`}})]}),h.jsxs("div",{className:"mini-controls",children:[h.jsx("label",{className:"mini-label",children:"Zoom"}),h.jsx("input",{type:"range",min:va,max:Math.max(va,p),value:y,"aria-label":"Timeline zoom",onChange:F=>{l(!0),o(Number(F.target.value))},"data-help":!0,"data-help-title":"Zoom window","data-help-body":"Tighten the window to focus on hotspots.","data-help-placement":"top"}),h.jsx("button",{className:"ghost-button",type:"button",onClick:()=>l(!a),title:"Toggle windowed playback",children:a?"Full":"Window"}),h.jsx("button",{className:"ghost-button",type:"button",title:"Reset zoom",onClick:()=>{l(!0),o(Math.min(Math.max(p*.2,va),6e4))},children:"Reset"}),h.jsx("button",{className:"ghost-button",type:"button",onClick:ce,children:"Add bookmark"}),h.jsx("button",{className:"ghost-button",type:"button",onClick:()=>$("previous"),children:"Previous bookmark"}),h.jsx("button",{className:"ghost-button",type:"button",onClick:()=>$("next"),children:"Next bookmark"}),h.jsx("button",{className:"ghost-button",type:"button",onClick:de,children:"Set clip start"}),h.jsx("button",{className:"ghost-button",type:"button",onClick:Mt,children:"Set clip end"}),h.jsx("button",{className:"ghost-button",type:"button",onClick:fn,children:"Clear clip"}),h.jsx("input",{className:"search-input mini-segment-input",placeholder:"Segment label",value:L,onChange:F=>K(F.target.value),"aria-label":"Segment label"}),h.jsx("button",{className:"ghost-button",type:"button",onClick:Zt,disabled:!ae,children:"Add segment"}),h.jsx("button",{className:"ghost-button",type:"button",onClick:Xr,disabled:!ae,children:"Export clip"})]}),A.length?h.jsx("div",{className:"mini-segment-list",children:A.map(F=>h.jsxs("div",{className:"mini-segment-item",children:[h.jsxs("span",{children:[F.label," (",F.startMs,"ms - ",F.endMs,"ms)"]}),h.jsx("button",{className:"ghost-button",type:"button",onClick:()=>gr(F.id),children:"Remove"})]},F.id))}):null]})}const rI=[{keys:"Space",action:"Play / pause"},{keys:" / ",action:"Step boundary back / forward"},{keys:"Shift +  / ",action:"Jump to start / end"},{keys:"F",action:"Toggle Flow mode"},{keys:"I",action:"Toggle Inspector"},{keys:"S",action:"Story mode"},{keys:"E",action:"Explain mode"},{keys:"T",action:"Start tour"},{keys:"Cmd/Ctrl + K",action:"Open command palette"},{keys:"?",action:"Show shortcuts"},{keys:"Esc",action:"Close modal / inspector"}];function iI({open:e,onClose:t}){const n=S.useRef(null);if(S.useEffect(()=>{var i;e&&((i=n.current)==null||i.focus())},[e]),!e)return null;const r=i=>{var l;if(i.key==="Escape"){i.preventDefault(),t();return}if(i.key!=="Tab")return;const a=Array.from(i.currentTarget.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'));if(a.length===0)return;const s=a.indexOf(document.activeElement),o=i.shiftKey?s<=0?a.length-1:s-1:(s+1)%a.length;(l=a[o])==null||l.focus(),i.preventDefault()};return h.jsx("div",{className:"modal-backdrop",role:"dialog","aria-modal":"true","aria-labelledby":"shortcuts-title",onKeyDown:r,children:h.jsxs("div",{className:"modal",tabIndex:-1,children:[h.jsxs("div",{className:"modal-header",children:[h.jsx("div",{className:"modal-title",id:"shortcuts-title",children:"Keyboard Shortcuts"}),h.jsx("button",{className:"ghost-button",type:"button",onClick:t,ref:n,"aria-label":"Close shortcuts",children:"Close"})]}),h.jsx("div",{className:"modal-body",children:rI.map(i=>h.jsxs("div",{className:"modal-row",children:[h.jsx("span",{className:"modal-keys",children:i.keys}),h.jsx("span",{className:"modal-action",children:i.action})]},i.keys))})]})})}const U0="agentDirector.palette.recent.v1",G0="agentDirector.palette.pinned.v1",aI=8,sI=12,oI=e=>e.trim().toLowerCase();function H0(e){try{const t=JSON.parse(window.localStorage.getItem(e)??"[]");return Array.isArray(t)?t.filter(n=>typeof n=="string"):[]}catch{return[]}}function W0(e,t){window.localStorage.setItem(e,JSON.stringify(t))}function lI(e){const t=new Map;return e.forEach(n=>{var i;const r=n.section;t.has(r)||t.set(r,[]),(i=t.get(r))==null||i.push(n)}),t}function K0(e,t,n){var i;if(!e.length)return 0;let r=t;for(let a=0;a<e.length;a+=1)if(r=(r+n+e.length)%e.length,!((i=e[r])!=null&&i.disabled))return r;return t}function uI({open:e,onClose:t,actions:n}){var M,C;const[r,i]=S.useState(""),[a,s]=S.useState(0),[o,l]=S.useState([]),[u,c]=S.useState([]),d=S.useRef(null),f=S.useRef(null),m=S.useMemo(()=>{const j=oI(r);return j?n.filter(N=>[N.label,N.description,N.group,N.keys].filter(Boolean).join(" ").toLowerCase().includes(j)):n},[n,r]),v=S.useMemo(()=>{const j=new Map(m.map(L=>[L.id,L])),N=u.map(L=>j.get(L)).filter(L=>!!L).map(L=>({...L,section:"Pinned"})),A=o.map(L=>j.get(L)).filter(L=>!!L).filter(L=>!N.some(K=>K.id===L.id)).map(L=>({...L,section:"Recent"})),I=m.filter(L=>!N.some(K=>K.id===L.id)).filter(L=>!A.some(K=>K.id===L.id)).map(L=>({...L,section:L.group??"General"}));return[...N,...A,...I]},[m,u,o]),p=S.useMemo(()=>lI(v),[v]),b=S.useMemo(()=>n.filter(j=>(j.group??"").toLowerCase()==="macros"||j.id.startsWith("macro-")),[n]);if(S.useEffect(()=>{if(!e)return;i(""),s(0),l(H0(U0)),c(H0(G0));const j=window.setTimeout(()=>{var N;return(N=d.current)==null?void 0:N.focus()},0);return()=>window.clearTimeout(j)},[e]),S.useEffect(()=>{a>=v.length&&s(0)},[a,v.length]),!e)return null;const y=j=>{l(N=>{const A=[j,...N.filter(I=>I!==j)].slice(0,aI);return W0(U0,A),A})},g=j=>{j.disabled||(y(j.id),j.onTrigger(),t())},x=j=>{c(N=>{const A=N.includes(j)?N.filter(I=>I!==j):[j,...N].slice(0,sI);return W0(G0,A),A})},_=j=>{var N,A;if(j.key==="Escape"){j.preventDefault(),t();return}if(j.key==="ArrowDown"){j.preventDefault(),s(I=>K0(v,I,1));return}if(j.key==="ArrowUp"){j.preventDefault(),s(I=>K0(v,I,-1));return}if(j.key==="Enter"){j.preventDefault();const I=v[a];I&&g(I);return}if(j.key==="Tab"){const I=Array.from(((N=f.current)==null?void 0:N.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'))??[]);if(!I.length)return;const L=I.indexOf(document.activeElement),K=j.shiftKey?L<=0?I.length-1:L-1:(L+1)%I.length;(A=I[K])==null||A.focus(),j.preventDefault()}},E=(M=v[a])!=null&&M.id?`palette-option-${(C=v[a])==null?void 0:C.id}`:void 0;let T=-1;return h.jsx("div",{className:"modal-backdrop palette-backdrop",role:"dialog","aria-modal":"true","aria-label":"Command palette",onKeyDown:_,onMouseDown:j=>{j.target===j.currentTarget&&t()},children:h.jsxs("div",{className:"palette",ref:f,children:[h.jsxs("div",{className:"palette-header",children:[h.jsxs("div",{children:[h.jsx("div",{className:"palette-title",children:"Command palette"}),h.jsx("div",{className:"palette-subtitle",children:"Search actions, modes, and playbook steps."})]}),h.jsx("button",{className:"ghost-button",type:"button",onClick:t,"aria-label":"Close command palette",children:"Close"})]}),h.jsx("input",{ref:d,className:"palette-input",value:r,onChange:j=>i(j.target.value),placeholder:"Type to filter actions","aria-label":"Search commands",role:"combobox","aria-expanded":"true","aria-controls":"command-palette-list","aria-activedescendant":E,"aria-autocomplete":"list"}),!r.trim()&&b.length>0?h.jsxs("div",{className:"palette-macros",children:[h.jsx("div",{className:"palette-group-title",children:"Quick macros"}),h.jsx("div",{className:"palette-macro-list",children:b.slice(0,3).map(j=>h.jsx("button",{className:"ghost-button palette-macro-item",type:"button",onClick:()=>g(j),children:j.label},j.id))})]}):null,h.jsxs("div",{className:"palette-list",role:"listbox",id:"command-palette-list",children:[v.length===0?h.jsx("div",{className:"palette-empty",children:"No matching commands."}):null,Array.from(p.entries()).map(([j,N])=>h.jsxs("div",{className:"palette-group",children:[h.jsx("div",{className:"palette-group-title",children:j}),h.jsx("div",{className:"palette-group-list",children:N.map(A=>{T+=1;const I=T===a,L=u.includes(A.id);return h.jsxs("button",{id:`palette-option-${A.id}`,className:`palette-item ${I?"active":""}`,type:"button",role:"option","aria-selected":I,onMouseEnter:()=>s(T),onClick:()=>g(A),disabled:A.disabled,children:[h.jsxs("div",{className:"palette-item-main",children:[h.jsx("div",{className:"palette-item-title",children:A.label}),A.description?h.jsx("div",{className:"palette-item-description",children:A.description}):null]}),h.jsxs("div",{className:"palette-item-trailing",children:[A.keys?h.jsx("div",{className:"palette-item-keys",children:A.keys}):null,h.jsx("span",{className:`palette-pin ${L?"active":""}`,role:"button",tabIndex:0,onClick:K=>{K.stopPropagation(),x(A.id)},onKeyDown:K=>{K.key!=="Enter"&&K.key!==" "||(K.preventDefault(),K.stopPropagation(),x(A.id))},"aria-label":L?`Unpin ${A.label}`:`Pin ${A.label}`,title:L?"Unpin command":"Pin command",children:L?"":""})]})]},A.id)})})]},j))]})]})})}function cI(e){return e.length?e.reduce((t,n)=>(n.durationMs??0)>(t.durationMs??0)?n:t,e[0]):null}function dI({trace:e,mode:t,playheadMs:n,selectedStepId:r,compareTrace:i,collapsed:a,onToggleCollapsed:s,onModeChange:o,onSelectStep:l,onJumpToBottleneck:u,onReplay:c,onStartTour:d,priorityQueue:f=[]}){var A;const m=e.steps??[],v=cI(m),p=r??(v==null?void 0:v.id)??((A=m[0])==null?void 0:A.id)??null,b=t==="cinema"||n>0,y=!!r,g=!!i,x=[b,y,g].filter(Boolean).length,_=[b,y,g].findIndex(I=>!I),E=_===-1?2:_,T=[0,1,2].map(I=>[b,y,g][I]?"done":I===E?"active":"next"),M=[{id:"observe",title:"Act I: Observe",summary:"Scrub the timeline to feel the pacing, bottlenecks, and tool choreography.",status:T[0],actionLabel:"Enter cinema",action:()=>o("cinema"),tasks:[{label:"Scrub the timeline",done:n>0},{label:"Stay in Cinema mode",done:t==="cinema"}]},{id:"inspect",title:"Act II: Inspect",summary:"Open the most expensive or failed step and read the payload with context.",status:T[1],actionLabel:v?"Jump to bottleneck":"Select first step",action:()=>{if(r){o("cinema");return}if(v){u();return}p&&(l(p),o("cinema"))},disabled:!p,tasks:[{label:"Open the Inspector",done:!!r},{label:"Jump to the bottleneck",done:!!(v&&r===v.id)}]},{id:"direct",title:"Act III: Direct",summary:"Replay from a decisive step, then compare flows and diffs side-by-side.",status:T[2],actionLabel:i?"Open compare":"Replay from step",action:()=>{if(i){o("compare");return}p&&c(p)},disabled:!p,tasks:[{label:"Replay from a step",done:!!i},{label:"Compare runs side-by-side",done:!!(i&&t==="compare")}]}],C=M[E],N=f.filter(I=>!I.done)[0];return a?h.jsxs("section",{className:"journey-panel journey-collapsed","aria-label":"Director journey","data-help":!0,"data-help-indicator":!0,"data-tour":"journey","data-help-title":"Director journey","data-help-body":"A guided path from observation to replay. Use it to show newcomers what to do first.","data-help-placement":"bottom",children:[h.jsxs("div",{className:"journey-collapsed-main",children:[h.jsx("div",{className:"journey-eyebrow",children:"Director journey"}),h.jsx("div",{className:"journey-collapsed-title",children:"From observe to direct"})]}),h.jsxs("div",{className:"journey-collapsed-actions",children:[h.jsxs("span",{className:"journey-progress-text",children:[x,"/3 complete"]}),N?h.jsxs("span",{className:`journey-priority-chip severity-${N.severity}`,children:["Next priority: ",N.title]}):null,C?h.jsxs("button",{className:"primary-button journey-next",type:"button",onClick:C.action,disabled:C.disabled,children:["Next: ",C.actionLabel]}):null,d?h.jsx("button",{className:"ghost-button",type:"button",onClick:d,children:"Tour"}):null,h.jsx("button",{className:"primary-button journey-expand",type:"button",onClick:s,children:"Expand"})]})]}):h.jsxs("section",{className:"journey-panel","aria-label":"Director journey","data-help":!0,"data-help-indicator":!0,"data-tour":"journey","data-help-title":"Director journey","data-help-body":"A three-act flow that teaches the story: observe, inspect, direct. Each act jumps to the right place.","data-help-placement":"bottom",children:[h.jsxs("div",{className:"journey-head",children:[h.jsxs("div",{children:[h.jsx("div",{className:"journey-eyebrow",children:"Director journey"}),h.jsx("h2",{className:"journey-title",children:"Cut a perfect take in three acts."}),h.jsx("p",{className:"journey-subtitle",children:"Trace the performance, interrogate the moment, then direct a better run."})]}),h.jsxs("div",{className:"journey-head-actions",children:[d?h.jsx("button",{className:"ghost-button",type:"button",onClick:d,children:"Start tour"}):null,h.jsx("button",{className:"ghost-button",type:"button",onClick:s,children:"Collapse"})]})]}),h.jsx("div",{className:"journey-track",children:M.map((I,L)=>{var K;return h.jsxs("div",{className:"journey-card","data-status":I.status,children:[h.jsxs("div",{className:"journey-card-top",children:[h.jsxs("span",{className:"journey-index",children:["0",L+1]}),h.jsx("span",{className:"journey-status",children:I.status})]}),h.jsx("h3",{className:"journey-card-title",children:I.title}),h.jsx("p",{className:"journey-card-body",children:I.summary}),(K=I.tasks)!=null&&K.length?h.jsx("ul",{className:"journey-tasks",children:I.tasks.map(V=>h.jsxs("li",{className:`journey-task ${V.done?"done":""}`,children:[h.jsx("span",{className:"journey-task-icon","aria-hidden":"true",children:V.done?"":""}),h.jsx("span",{children:V.label})]},V.label))}):null,h.jsx("button",{className:"primary-button journey-action",type:"button",onClick:I.action,disabled:I.disabled,children:I.actionLabel})]},I.id)})}),h.jsxs("div",{className:"journey-footer",children:[h.jsxs("div",{children:[h.jsx("div",{className:"journey-progress-label",children:"Progress"}),h.jsx("div",{className:"journey-progress",children:h.jsx("span",{className:"journey-progress-bar",style:{width:`${x/3*100}%`}})})]}),h.jsx("div",{className:"journey-footnote",children:"Tip: Use Flow to spot fan-out, Compare to validate your changes."})]}),f.length?h.jsxs("div",{className:"journey-priority-queue",children:[h.jsxs("div",{className:"journey-priority-head",children:[h.jsx("div",{className:"journey-progress-label",children:"Priority queue"}),h.jsxs("span",{children:[f.filter(I=>I.done).length,"/",f.length," resolved"]})]}),h.jsx("div",{className:"journey-priority-list",children:f.map(I=>h.jsxs("article",{className:`journey-priority-item ${I.done?"done":""}`,children:[h.jsxs("div",{className:"journey-priority-main",children:[h.jsx("span",{className:`journey-priority-chip severity-${I.severity}`,children:I.severity}),h.jsxs("div",{children:[h.jsx("div",{className:"journey-priority-title",children:I.title}),h.jsx("div",{className:"journey-priority-body",children:I.detail})]})]}),h.jsx("button",{className:"ghost-button",type:"button",onClick:I.onAction,disabled:I.done,children:I.done?"Resolved":I.actionLabel})]},I.id))})]}):null]})}const fI=[],hI=[],pI=[],mI={};function vI(e){return e.length?e.reduce((t,n)=>(n.durationMs??0)>(t.durationMs??0)?n:t,e[0]):null}function yI({trace:e,mode:t,selectedStepId:n,onModeChange:r,onSelectStep:i,onJumpToBottleneck:a,onReplay:s,recommendations:o=fI,persona:l="builder",annotations:u=hI,activityFeed:c=pI,onAddAnnotation:d,missionProgress:f=mI,missionCompletion:m,onResetMissions:v,narrative:p="",onAskDirector:b,onExportNarrative:y}){var ce;const g=e.steps??[],x=vI(g),_=n??(x==null?void 0:x.id)??((ce=g[0])==null?void 0:ce.id)??null,E=e.metadata.wallTimeMs??0,T=l==="executive"?"Executive lens":l==="operator"?"Operator lens":"Builder lens",[M,C]=S.useState(""),[j,N]=S.useState(""),[A,I]=S.useState(""),[L,K]=S.useState("overview"),[V,le]=S.useState([]),ie=S.useMemo(()=>c.slice(0,6),[c]),R=(m==null?void 0:m.done)??0,q=R>=3||!!f.inspect,G=R>=5||!!f.collaborate||ie.length>0,z=S.useMemo(()=>o.slice(0,3).map(($,de)=>({id:$.id,step:`${de+1}. ${$.actionLabel}  ${$.title}`})),[o]);S.useEffect(()=>{le($=>$.filter(de=>o.some(Mt=>Mt.id===de)))},[o]);const ae=V.filter($=>o.some(de=>de.id===$)).length,Pe=o.length?Math.round(ae/o.length*100):0,oe=$=>{$.action(),le(de=>de.includes($.id)?de:[...de,$.id])};return h.jsxs("aside",{className:"inspector inspector-empty","data-help":!0,"data-help-indicator":!0,"data-tour":"inspector","data-help-title":"Inspector panel","data-help-body":"Select a step to open detailed payloads, redaction controls, and replay actions.","data-help-placement":"left",children:[h.jsx("div",{className:"inspector-header",children:h.jsxs("div",{children:[h.jsx("div",{className:"inspector-title",children:"Director's notes"}),h.jsxs("div",{className:"inspector-subtitle",children:[T,". Select a step to open deep inspection."]})]})}),h.jsxs("div",{className:"director-tabs",role:"tablist","aria-label":"Director workspace tabs",children:[h.jsx("button",{className:`ghost-button ${L==="overview"?"active":""}`,type:"button",role:"tab","aria-selected":L==="overview",onClick:()=>K("overview"),children:"Overview"}),h.jsx("button",{className:`ghost-button ${L==="narrative"?"active":""}`,type:"button",role:"tab","aria-selected":L==="narrative",onClick:()=>K("narrative"),children:"Narrative"}),h.jsx("button",{className:`ghost-button ${L==="collab"?"active":""}`,type:"button",role:"tab","aria-selected":L==="collab",onClick:()=>K("collab"),children:"Collaboration"})]}),L==="overview"?h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"inspector-section",children:[h.jsx("div",{className:"inspector-section-title",children:"Run summary"}),h.jsxs("div",{className:"inspector-row",children:[h.jsx("span",{children:"Steps"}),h.jsx("span",{children:g.length})]}),h.jsxs("div",{className:"inspector-row",children:[h.jsx("span",{children:"Wall time"}),h.jsxs("span",{children:[E,"ms"]})]}),h.jsxs("div",{className:"inspector-row",children:[h.jsx("span",{children:"Status"}),h.jsx("span",{children:e.status})]})]}),h.jsxs("div",{className:"inspector-section",children:[h.jsx("div",{className:"inspector-section-title",children:"Next actions"}),h.jsxs("div",{className:"director-actions",children:[h.jsx("button",{className:"primary-button",type:"button",onClick:()=>r("cinema"),"data-help":!0,"data-help-title":"Open cinema","data-help-body":"Jump straight into the timeline.","data-help-placement":"right",children:"Open cinema"}),h.jsx("button",{className:"ghost-button",type:"button",onClick:()=>r("flow"),"data-help":!0,"data-help-title":"Open flow","data-help-body":"See the dependency graph of the run.","data-help-placement":"right",children:"Switch to flow"}),h.jsx("button",{className:"ghost-button",type:"button",onClick:()=>{if(!n){if(x){a();return}_&&i(_)}},disabled:!_||!!n,"data-help":!0,"data-help-title":"Jump to bottleneck","data-help-body":"Select the slowest step for inspection.","data-help-placement":"right",children:n?"Inspector open":x?"Jump to bottleneck":"Select first step"}),h.jsx("button",{className:"ghost-button",type:"button",onClick:()=>_&&s(_),disabled:!_||!q,title:q?void 0:"Complete core missions to unlock replay guidance.","data-help":!0,"data-help-title":"Replay","data-help-body":"Branch a replay from a decisive step.","data-help-placement":"right",children:"Replay from step"})]})]}),h.jsxs("div",{className:"inspector-section",children:[h.jsx("div",{className:"inspector-section-title",children:"Mode"}),h.jsxs("div",{className:"director-modes",children:[h.jsx("button",{className:`ghost-button ${t==="cinema"?"active":""}`,type:"button",onClick:()=>r("cinema"),"data-help":!0,"data-help-title":"Cinema mode","data-help-body":"Timeline view for pacing and sequence.","data-help-placement":"right",children:"Cinema"}),h.jsx("button",{className:`ghost-button ${t==="flow"?"active":""}`,type:"button",onClick:()=>r("flow"),"data-help":!0,"data-help-title":"Flow mode","data-help-body":"Graph view for dependencies.","data-help-placement":"right",children:"Flow"}),h.jsx("button",{className:"ghost-button",type:"button",disabled:!0,children:"Compare"})]})]}),h.jsxs("div",{className:"inspector-section",children:[h.jsx("div",{className:"inspector-section-title",children:"Adaptive missions"}),h.jsxs("div",{className:"mission-summary",children:[(m==null?void 0:m.done)??0,"/",(m==null?void 0:m.total)??0," complete",h.jsxs("span",{children:[(m==null?void 0:m.pct)??0,"%"]})]}),h.jsxs("div",{className:"mission-stage",children:["Stage: ",G?"Collaboration":q?"Analysis":"Foundation"]}),h.jsx("div",{className:"mission-grid",children:Object.entries(f).map(([$,de])=>h.jsxs("div",{className:`mission-chip ${de?"done":""}`,children:[h.jsx("span",{children:$}),h.jsx("span",{children:de?"Done":"Pending"})]},$))}),h.jsx("button",{className:"ghost-button",type:"button",onClick:v,children:"Reset missions"})]}),h.jsxs("div",{className:"inspector-section",children:[h.jsx("div",{className:"inspector-section-title",children:"Action plan"}),q?o.length===0?h.jsx("div",{className:"annotation-empty",children:"No recommendations generated yet."}):h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"mission-summary",children:[ae,"/",o.length," complete",h.jsxs("span",{children:[Pe,"%"]})]}),h.jsx("div",{className:"director-recommendations",children:o.map($=>{const de=V.includes($.id);return h.jsxs("article",{className:`director-recommendation tone-${$.tone} ${de?"done":""}`,children:[h.jsx("div",{className:"director-recommendation-title",children:$.title}),h.jsx("p",{className:"director-recommendation-body",children:$.body}),h.jsx("button",{className:"ghost-button",type:"button",onClick:()=>oe($),children:de?"Completed":$.actionLabel})]},$.id)})})]}):h.jsx("div",{className:"annotation-empty",children:"Complete inspect/flow/replay missions to unlock AI narrative tools."}),G?null:h.jsx("div",{className:"annotation-empty",children:"Open another live session to unlock collaboration activity feed."})]})]}):null,L==="narrative"?h.jsxs("div",{className:"inspector-section",children:[h.jsx("div",{className:"inspector-section-title",children:"AI director narrative"}),q?h.jsxs(h.Fragment,{children:[h.jsx("p",{className:"director-recommendation-body",children:p}),z.length?h.jsx("div",{className:"director-guided-plan",children:z.map($=>h.jsx("div",{children:$.step},$.id))}):null,h.jsxs("div",{className:"director-ask-row",children:[h.jsx("input",{className:"search-input",value:j,onChange:$=>N($.target.value),placeholder:"Ask Director (e.g. what is highest risk?)","aria-label":"Ask director question"}),h.jsx("button",{className:"ghost-button",type:"button",onClick:()=>{j.trim()&&I((b==null?void 0:b(j))??"")},children:"Ask"})]}),A?h.jsx("div",{className:"director-answer",children:A}):null,h.jsx("button",{className:"ghost-button",type:"button",onClick:y,children:"Export narrative"})]}):h.jsx("div",{className:"annotation-empty",children:"Complete inspect/flow/replay missions to unlock AI narrative tools."})]}):null,L==="collab"?h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"inspector-section",children:[h.jsx("div",{className:"inspector-section-title",children:"Shared annotations"}),h.jsx("textarea",{value:M,onChange:$=>C($.target.value),rows:3,placeholder:n?"Add note for selected step...":"Add trace-level note...","aria-label":"Shared annotation"}),h.jsx("button",{className:"ghost-button",type:"button",onClick:()=>{const $=M.trim();$&&(d==null||d($,n),C(""))},children:"Add annotation"}),h.jsxs("div",{className:"annotation-list",children:[u.slice(-6).reverse().map($=>h.jsxs("article",{className:"annotation-item",children:[h.jsxs("div",{className:"annotation-meta",children:[h.jsx("span",{children:$.stepId?`step ${$.stepId}`:"trace"}),h.jsx("span",{children:$.authorSessionId})]}),h.jsx("p",{children:$.body})]},$.id)),u.length===0?h.jsx("div",{className:"annotation-empty",children:"No shared annotations yet."}):null]})]}),h.jsxs("div",{className:"inspector-section",children:[h.jsx("div",{className:"inspector-section-title",children:"Collab activity"}),G?h.jsxs("div",{className:"activity-list",children:[ie.map($=>h.jsxs("div",{className:"activity-item",children:[h.jsx("span",{children:$.message}),h.jsx("span",{children:new Date($.timestamp).toLocaleTimeString()})]},$.id)),ie.length===0?h.jsx("div",{className:"annotation-empty",children:"No activity yet."}):null]}):h.jsx("div",{className:"annotation-empty",children:"Open another live session to unlock collaboration activity feed."})]})]}):null]})}const $u=(e,t,n)=>Math.min(n,Math.max(t,e));function Bu(e){return Array.from((e==null?void 0:e.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'))??[]).filter(n=>!(n.hasAttribute("disabled")||n.getAttribute("aria-hidden")==="true"))}function gI({steps:e,open:t,onClose:n,onComplete:r}){const[i,a]=S.useState(0),[s,o]=S.useState(null),[l,u]=S.useState(null),c=S.useRef(null),d=S.useRef(null),f=S.useRef(null),m=S.useMemo(()=>e[i],[e,i]),v=S.useCallback(()=>{if(!t)return;const _=document.querySelector(m.target);if(!_){d.current=null,o(null);return}d.current=_;const E=_.getBoundingClientRect();o(E)},[t,m.target]),p=S.useCallback(()=>{if(!s||!c.current){u(null);return}const _=c.current.offsetWidth,E=c.current.offsetHeight,T=16;let M=$u(s.left+s.width/2-_/2,T,window.innerWidth-_-T),C=s.bottom+16;m.placement==="top"&&(C=s.top-E-16),m.placement==="left"&&(M=s.left-_-16,C=s.top+s.height/2-E/2),m.placement==="right"&&(M=s.right+16,C=s.top+s.height/2-E/2),C+E>window.innerHeight-T&&(C=s.top-E-16),C<T&&(C=s.bottom+16),M=$u(M,T,window.innerWidth-_-T),C=$u(C,T,window.innerHeight-E-T),u({top:C,left:M})},[m.placement,s]);if(S.useEffect(()=>{t&&a(0)},[t]),S.useEffect(()=>{var E,T;if(!t){(T=(E=f.current)==null?void 0:E.focus)==null||T.call(E);return}f.current=document.activeElement;const _=window.setTimeout(()=>{var C;(C=Bu(c.current)[0]??c.current)==null||C.focus()},0);return()=>window.clearTimeout(_)},[t]),S.useEffect(()=>{if(!t)return;const _=document.querySelector(m.target);_&&_.scrollIntoView({behavior:"smooth",block:"center",inline:"center"});const E=window.requestAnimationFrame(()=>v());return()=>window.cancelAnimationFrame(E)},[t,m.target,v]),S.useLayoutEffect(()=>{p()},[s,p,m.title]),S.useEffect(()=>{if(!t)return;const _=()=>{v(),p()};return window.addEventListener("resize",_),window.addEventListener("scroll",_,!0),()=>{window.removeEventListener("resize",_),window.removeEventListener("scroll",_,!0)}},[t,v,p]),S.useEffect(()=>{if(!t)return;const _=E=>{var N;if(E.key==="Escape"){E.preventDefault(),n();return}if(E.key!=="Tab")return;const T=Bu(c.current);if(!T.length)return;const M=document.activeElement,C=T.indexOf(M),j=E.shiftKey?C<=0?T.length-1:C-1:(C+1)%T.length;(N=T[j])==null||N.focus(),E.preventDefault()};return document.addEventListener("keydown",_,!0),()=>document.removeEventListener("keydown",_,!0)},[n,t]),!t||!m)return null;const b=_=>{var j;if(_.key==="Escape"){_.preventDefault(),n();return}if(_.key!=="Tab")return;const E=Bu(c.current);if(E.length===0)return;const T=document.activeElement,M=E.indexOf(T),C=_.shiftKey?M<=0?E.length-1:M-1:(M+1)%E.length;(j=E[C])==null||j.focus(),_.preventDefault()},y=`tour-title-${m.id}`,g=`tour-body-${m.id}`,x=s?{top:s.top-6,left:s.left-6,width:s.width+12,height:s.height+12}:void 0;return h.jsxs("div",{className:"tour-overlay",role:"dialog","aria-modal":"true","aria-label":"Guided tour","aria-labelledby":y,"aria-describedby":g,onKeyDown:b,children:[h.jsx("div",{className:"tour-backdrop",onClick:n}),s?h.jsx("div",{className:"tour-spotlight",style:x}):null,h.jsxs("div",{className:`tour-card ${l?"tour-card-anchored":""}`,ref:c,style:l??void 0,tabIndex:-1,children:[h.jsxs("div",{className:"tour-step",children:["Step ",i+1," of ",e.length]}),h.jsx("div",{className:"tour-title",id:y,children:m.title}),h.jsx("p",{className:"tour-body",id:g,children:m.body}),h.jsxs("div",{className:"tour-actions",children:[h.jsx("button",{className:"ghost-button",type:"button",onClick:()=>a(_=>Math.max(0,_-1)),disabled:i===0,children:"Back"}),h.jsx("button",{className:"ghost-button",type:"button",onClick:n,children:"Skip"}),i===e.length-1?h.jsx("button",{className:"primary-button",type:"button",onClick:r,children:"Finish tour"}):h.jsx("button",{className:"primary-button",type:"button",onClick:()=>a(_=>_+1),children:"Next"})]})]})]})}const Y0=(e,t,n)=>Math.min(n,Math.max(t,e));function wI({enabled:e}){const[t,n]=S.useState(null),[r,i]=S.useState(null),a=S.useRef(null),s=S.useRef(null),o=S.useCallback(()=>{const u=a.current;if(!u){n(null);return}const c=u.getBoundingClientRect(),d=u.dataset.helpTitle??"Context",f=u.dataset.helpBody??"",m=u.dataset.helpPlacement??"right";n({rect:c,title:d,body:f,placement:m})},[]);S.useEffect(()=>{if(!e){a.current=null,n(null);return}const u=v=>{var b,y;const p=(y=(b=v.target)==null?void 0:b.closest)==null?void 0:y.call(b,"[data-help]");if(!p){a.current||n(null);return}a.current!==p&&(a.current=p,o())},c=v=>{var b,y;const p=(y=(b=v.target)==null?void 0:b.closest)==null?void 0:y.call(b,"[data-help]");p&&(a.current=p,o())},d=v=>{var b;const p=v.relatedTarget;(b=p==null?void 0:p.closest)!=null&&b.call(p,"[data-help]")||(a.current=null,n(null))},f=v=>{var b,y;const p=(y=(b=v.target)==null?void 0:b.closest)==null?void 0:y.call(b,"[data-help]");if(!p){a.current=null,n(null);return}a.current=p,o()},m=()=>{a.current&&o()};return window.addEventListener("mousemove",u),window.addEventListener("focusin",c),window.addEventListener("focusout",d),window.addEventListener("pointerdown",f),window.addEventListener("scroll",m,!0),window.addEventListener("resize",m),()=>{window.removeEventListener("mousemove",u),window.removeEventListener("focusin",c),window.removeEventListener("focusout",d),window.removeEventListener("pointerdown",f),window.removeEventListener("scroll",m,!0),window.removeEventListener("resize",m)}},[e,o]);const l=S.useCallback(()=>{if(!t||!s.current){i(null);return}const u=12,c=s.current.offsetWidth,d=s.current.offsetHeight,{rect:f,placement:m}=t;let v=f.right+16,p=f.top+f.height/2-d/2;m==="left"&&(v=f.left-c-16,p=f.top+f.height/2-d/2),m==="top"&&(v=f.left+f.width/2-c/2,p=f.top-d-16),m==="bottom"&&(v=f.left+f.width/2-c/2,p=f.bottom+16),v=Y0(v,u,window.innerWidth-c-u),p=Y0(p,u,window.innerHeight-d-u),i({left:v,top:p})},[t]);return S.useLayoutEffect(()=>{l()},[l]),!e||!t?null:h.jsxs("div",{className:"help-overlay","aria-hidden":"true",children:[h.jsx("div",{className:"help-highlight",style:{top:t.rect.top-6,left:t.rect.left-6,width:t.rect.width+12,height:t.rect.height+12}}),h.jsxs("div",{className:"help-bubble",ref:s,style:r??void 0,"data-placement":t.placement,children:[h.jsx("div",{className:"help-title",children:t.title}),h.jsx("div",{className:"help-body",children:t.body})]})]})}const bI=[{id:"builder",label:"Builder lens",body:"Focus on step payloads, execution paths, and replay control."},{id:"executive",label:"Executive lens",body:"Focus on bottlenecks, risk, and outcome-level run quality."},{id:"operator",label:"Operator lens",body:"Focus on failures, retries, and trace reliability posture."}],xI=[{id:"rapid_triage",label:"Rapid triage",body:"Jump straight to the highest-risk step and start resolution.",estimate:"2-3 min"},{id:"deep_diagnosis",label:"Deep diagnosis",body:"Open flow and guided analysis for full root-cause exploration.",estimate:"8-12 min"},{id:"team_sync",label:"Team sync",body:"Open collaborative mode and prep a handoff workflow.",estimate:"4-6 min"}];function SI({onComplete:e,onStartTour:t,onStartStory:n,persona:r="builder",onPersonaChange:i,launchPath:a="rapid_triage",onLaunchPathChange:s,onStartLaunchPath:o}){const l=()=>{t==null||t(),e()},u=()=>{n==null||n(),e()},c=d=>{s==null||s(d),o==null||o(d),e()};return h.jsx("div",{className:"intro-overlay",role:"dialog","aria-modal":"true","aria-label":"Agent Director intro",children:h.jsxs("div",{className:"intro-card",children:[h.jsx("div",{className:"intro-scan"}),h.jsx("div",{className:"intro-title",children:"Agent Director"}),h.jsx("div",{className:"intro-tagline",children:"Watch your agent think. Then direct it."}),h.jsxs("div",{className:"intro-steps",children:[h.jsxs("div",{className:"intro-step",children:[h.jsx("div",{className:"intro-step-label",children:"Observe"}),h.jsx("div",{className:"intro-step-body",children:"Scrub the timeline to feel pacing and parallelism."})]}),h.jsxs("div",{className:"intro-step",children:[h.jsx("div",{className:"intro-step-label",children:"Inspect"}),h.jsx("div",{className:"intro-step-body",children:"Open the bottleneck to read payloads and costs."})]}),h.jsxs("div",{className:"intro-step",children:[h.jsx("div",{className:"intro-step-label",children:"Direct"}),h.jsx("div",{className:"intro-step-body",children:"Replay from a decisive step and compare runs."})]})]}),h.jsx("div",{className:"intro-personas",role:"group","aria-label":"Select onboarding lens",children:bI.map(d=>h.jsxs("button",{type:"button",className:`ghost-button intro-persona ${r===d.id?"active":""}`,onClick:()=>i==null?void 0:i(d.id),"aria-pressed":r===d.id,"aria-label":d.label,children:[h.jsx("span",{className:"intro-persona-label",children:d.label}),h.jsx("span",{className:"intro-persona-body",children:d.body})]},d.id))}),h.jsx("div",{className:"intro-launch-paths",role:"group","aria-label":"Select launch path",children:xI.map(d=>h.jsxs("article",{className:`intro-path-card ${a===d.id?"active":""}`,children:[h.jsxs("button",{type:"button",className:`ghost-button intro-path-button ${a===d.id?"active":""}`,onClick:()=>s==null?void 0:s(d.id),"aria-pressed":a===d.id,"aria-label":d.label,children:[h.jsx("span",{className:"intro-path-label",children:d.label}),h.jsx("span",{className:"intro-path-estimate",children:d.estimate}),h.jsx("span",{className:"intro-path-body",children:d.body})]}),h.jsxs("button",{className:"primary-button intro-path-start",type:"button",onClick:()=>c(d.id),children:["Start ",d.label]})]},d.id))}),h.jsxs("div",{className:"intro-grid",children:[h.jsx("span",{}),h.jsx("span",{}),h.jsx("span",{}),h.jsx("span",{})]}),h.jsxs("div",{className:"intro-actions",children:[h.jsx("button",{className:"primary-button",type:"button",onClick:l,children:"Start guided tour"}),n?h.jsx("button",{className:"ghost-button",type:"button",onClick:u,children:"Play story mode"}):null,h.jsx("button",{className:"ghost-button",type:"button",onClick:e,children:"Skip intro"})]})]})})}function _I({explainMode:e,storyActive:t,onStartTour:n,onStartStory:r,onToggleExplain:i,onDismiss:a}){return h.jsxs("section",{className:"hero-ribbon","aria-label":"Director briefing","data-help":!0,"data-help-indicator":!0,"data-tour":"hero","data-help-title":"Director briefing","data-help-body":"Start the tour, play story mode, or enable explain to learn the interface instantly.","data-help-placement":"bottom",children:[h.jsxs("div",{className:"hero-ribbon-top",children:[h.jsx("span",{className:"hero-eyebrow",children:"Director briefing"}),h.jsx("button",{className:"ghost-button hero-dismiss",type:"button",onClick:a,children:"Dismiss"})]}),h.jsx("div",{className:"hero-title",children:"Observe. Inspect. Direct."}),h.jsx("div",{className:"hero-subtitle",children:"A cinematic control room for agent traces. See time, read structure, then replay with confidence."}),h.jsxs("div",{className:"hero-pills",children:[h.jsx("span",{className:"hero-pill","data-tone":"observe",children:"Observe"}),h.jsx("span",{className:"hero-pill","data-tone":"inspect",children:"Inspect"}),h.jsx("span",{className:"hero-pill","data-tone":"direct",children:"Direct"})]}),h.jsxs("div",{className:"hero-actions",children:[h.jsx("button",{className:"primary-button",type:"button",onClick:n,children:"Start guided tour"}),h.jsx("button",{className:"ghost-button",type:"button",onClick:r,disabled:t,children:t?"Story running":"Play story mode"}),h.jsxs("button",{className:`ghost-button ${e?"active":""}`,type:"button",onClick:i,"aria-pressed":e,children:["Explain ",e?"On":"Off"]})]})]})}function kI({mode:e,isPlaying:t,storyActive:n,explainMode:r,hidden:i=!1,open:a,onToggleOpen:s,onTogglePlay:o,onStartStory:l,onStopStory:u,onStartTour:c,onOpenPalette:d,onShowShortcuts:f,onToggleExplain:m,onJumpToBottleneck:v}){if(i)return null;const p=t?"Pause":"Play",b=n?"Stop story":"Story mode";return a?h.jsxs("aside",{className:"quick-actions","aria-label":"Quick actions","data-help":!0,"data-help-indicator":!0,"data-tour":"quick-actions","data-help-title":"Quick actions","data-help-body":"Launch story mode, open the command palette, or jump to the bottleneck instantly.","data-help-placement":"left",children:[h.jsxs("div",{className:"quick-actions-header",children:[h.jsxs("div",{children:[h.jsx("div",{className:"quick-actions-title",children:"Quick actions"}),h.jsx("div",{className:"quick-actions-subtitle",children:"Pin demo controls close at hand."})]}),h.jsx("button",{className:"ghost-button",type:"button",onClick:s,"aria-label":"Collapse quick actions",children:"Collapse"})]}),h.jsxs("button",{className:`quick-action ${t?"active":""}`,type:"button",onClick:o,"aria-label":p,"data-help":!0,"data-help-title":"Play or pause","data-help-body":"Start or stop playback from anywhere.","data-help-placement":"left",children:[h.jsx("span",{className:"quick-action-label",children:p}),h.jsx("span",{className:"quick-action-meta",children:e==="flow"?"Cinema":"Space"})]}),h.jsxs("button",{className:`quick-action ${n?"active":""}`,type:"button",onClick:n?u:l,"aria-label":b,"data-help":!0,"data-help-title":"Story mode","data-help-body":"Auto-runs a cinematic walkthrough of the run.","data-help-placement":"left",children:[h.jsx("span",{className:"quick-action-label",children:b}),h.jsx("span",{className:"quick-action-meta",children:"S"})]}),h.jsxs("button",{className:"quick-action",type:"button",onClick:d,"aria-label":"Open command palette","data-help":!0,"data-help-title":"Command palette","data-help-body":"Search every action and jump instantly.","data-help-placement":"left",children:[h.jsx("span",{className:"quick-action-label",children:"Command"}),h.jsx("span",{className:"quick-action-meta",children:"Cmd+K"})]}),h.jsxs("button",{className:"quick-action",type:"button",onClick:c,"aria-label":"Start guided tour","data-help":!0,"data-help-title":"Guided tour","data-help-body":"Walk the interface with a curated tour.","data-help-placement":"left",children:[h.jsx("span",{className:"quick-action-label",children:"Tour"}),h.jsx("span",{className:"quick-action-meta",children:"Guide"})]}),h.jsxs("button",{className:`quick-action ${r?"active":""}`,type:"button",onClick:m,"aria-label":"Toggle explain mode","data-help":!0,"data-help-title":"Explain mode","data-help-body":"Toggle contextual overlays for every control.","data-help-placement":"left",children:[h.jsx("span",{className:"quick-action-label",children:"Explain"}),h.jsx("span",{className:"quick-action-meta",children:r?"On":"Off"})]}),h.jsxs("button",{className:"quick-action",type:"button",onClick:v,"aria-label":"Jump to bottleneck","data-help":!0,"data-help-title":"Bottleneck jump","data-help-body":"Focus instantly on the slowest step.","data-help-placement":"left",children:[h.jsx("span",{className:"quick-action-label",children:"Bottleneck"}),h.jsx("span",{className:"quick-action-meta",children:"Latency"})]}),h.jsxs("button",{className:"quick-action",type:"button",onClick:f,"aria-label":"Show shortcuts","data-help":!0,"data-help-title":"Shortcuts","data-help-body":"See the full keyboard map.","data-help-placement":"left",children:[h.jsx("span",{className:"quick-action-label",children:"Shortcuts"}),h.jsx("span",{className:"quick-action-meta",children:"?"})]})]}):h.jsxs("button",{className:"quick-actions-toggle",type:"button",onClick:s,title:"Open quick actions","aria-expanded":"false","data-help":!0,"data-tour":"quick-actions","data-help-title":"Quick actions","data-help-body":"Open the dock to access demos, shortcuts, and instant actions.","data-help-placement":"left",children:[h.jsx("span",{className:"quick-actions-toggle-label",children:"Actions"}),h.jsx("span",{className:"quick-actions-toggle-meta",children:"Dock"})]})}function EI({active:e,label:t,step:n,total:r,onStop:i,onRestart:a}){if(!e)return null;const s=r>0?(n+1)/r*100:0;return h.jsxs("div",{className:"story-banner",role:"status","aria-live":"polite",children:[h.jsxs("div",{className:"story-banner-main",children:[h.jsx("div",{className:"story-banner-title",children:"Story mode"}),h.jsx("div",{className:"story-banner-step",children:t})]}),h.jsxs("div",{className:"story-banner-actions",children:[h.jsxs("span",{className:"story-banner-count",children:[Math.min(n+1,r),"/",r]}),h.jsx("button",{className:"ghost-button",type:"button",onClick:a,children:"Restart"}),h.jsx("button",{className:"primary-button",type:"button",onClick:i,children:"Stop"})]}),h.jsx("div",{className:"story-banner-progress",children:h.jsx("span",{style:{width:`${s}%`}})})]})}const KC=S.createContext({});function CI(e){const t=S.useRef(null);return t.current===null&&(t.current=e()),t.current}const oy=S.createContext(null),YC=S.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});function TI(e=!0){const t=S.useContext(oy);if(t===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:i}=t,a=S.useId();S.useEffect(()=>{e&&i(a)},[e]);const s=S.useCallback(()=>e&&r&&r(a),[a,r,e]);return!n&&r?[!1,s]:[!0]}const ly=typeof window<"u",MI=ly?S.useLayoutEffect:S.useEffect,_t=e=>e;let QC=_t;function uy(e){let t;return()=>(t===void 0&&(t=e()),t)}const $i=(e,t,n)=>{const r=t-e;return r===0?1:(n-e)/r},En=e=>e*1e3,Cn=e=>e/1e3,jI={useManualTiming:!1};function PI(e){let t=new Set,n=new Set,r=!1,i=!1;const a=new WeakSet;let s={delta:0,timestamp:0,isProcessing:!1};function o(u){a.has(u)&&(l.schedule(u),e()),u(s)}const l={schedule:(u,c=!1,d=!1)=>{const m=d&&r?t:n;return c&&a.add(u),m.has(u)||m.add(u),u},cancel:u=>{n.delete(u),a.delete(u)},process:u=>{if(s=u,r){i=!0;return}r=!0,[t,n]=[n,t],t.forEach(o),t.clear(),r=!1,i&&(i=!1,l.process(u))}};return l}const to=["read","resolveKeyframes","update","preRender","render","postRender"],NI=40;function XC(e,t){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},a=()=>n=!0,s=to.reduce((y,g)=>(y[g]=PI(a),y),{}),{read:o,resolveKeyframes:l,update:u,preRender:c,render:d,postRender:f}=s,m=()=>{const y=performance.now();n=!1,i.delta=r?1e3/60:Math.max(Math.min(y-i.timestamp,NI),1),i.timestamp=y,i.isProcessing=!0,o.process(i),l.process(i),u.process(i),c.process(i),d.process(i),f.process(i),i.isProcessing=!1,n&&t&&(r=!1,e(m))},v=()=>{n=!0,r=!0,i.isProcessing||e(m)};return{schedule:to.reduce((y,g)=>{const x=s[g];return y[g]=(_,E=!1,T=!1)=>(n||v(),x.schedule(_,E,T)),y},{}),cancel:y=>{for(let g=0;g<to.length;g++)s[to[g]].cancel(y)},state:i,steps:s}}const{schedule:xe,cancel:cr,state:Qe,steps:zu}=XC(typeof requestAnimationFrame<"u"?requestAnimationFrame:_t,!0),JC=S.createContext({strict:!1}),Q0={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Bi={};for(const e in Q0)Bi[e]={isEnabled:t=>Q0[e].some(n=>!!t[n])};function AI(e){for(const t in e)Bi[t]={...Bi[t],...e[t]}}const RI=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Ko(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||RI.has(e)}let ZC=e=>!Ko(e);function II(e){e&&(ZC=t=>t.startsWith("on")?!Ko(t):e(t))}try{II(require("@emotion/is-prop-valid").default)}catch{}function DI(e,t,n){const r={};for(const i in e)i==="values"&&typeof e.values=="object"||(ZC(i)||n===!0&&Ko(i)||!t&&!Ko(i)||e.draggable&&i.startsWith("onDrag"))&&(r[i]=e[i]);return r}function OI(e){if(typeof Proxy>"u")return e;const t=new Map,n=(...r)=>e(...r);return new Proxy(n,{get:(r,i)=>i==="create"?e:(t.has(i)||t.set(i,e(i)),t.get(i))})}const Sl=S.createContext({});function os(e){return typeof e=="string"||Array.isArray(e)}function _l(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}const cy=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],dy=["initial",...cy];function kl(e){return _l(e.animate)||dy.some(t=>os(e[t]))}function eT(e){return!!(kl(e)||e.variants)}function LI(e,t){if(kl(e)){const{initial:n,animate:r}=e;return{initial:n===!1||os(n)?n:void 0,animate:os(r)?r:void 0}}return e.inherit!==!1?t:{}}function qI(e){const{initial:t,animate:n}=LI(e,S.useContext(Sl));return S.useMemo(()=>({initial:t,animate:n}),[X0(t),X0(n)])}function X0(e){return Array.isArray(e)?e.join(" "):e}const FI=Symbol.for("motionComponentSymbol");function _i(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function VI(e,t,n){return S.useCallback(r=>{r&&e.onMount&&e.onMount(r),t&&(r?t.mount(r):t.unmount()),n&&(typeof n=="function"?n(r):_i(n)&&(n.current=r))},[t])}const fy=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),$I="framerAppearId",tT="data-"+fy($I),{schedule:hy}=XC(queueMicrotask,!1),nT=S.createContext({});function BI(e,t,n,r,i){var a,s;const{visualElement:o}=S.useContext(Sl),l=S.useContext(JC),u=S.useContext(oy),c=S.useContext(YC).reducedMotion,d=S.useRef(null);r=r||l.renderer,!d.current&&r&&(d.current=r(e,{visualState:t,parent:o,props:n,presenceContext:u,blockInitialAnimation:u?u.initial===!1:!1,reducedMotionConfig:c}));const f=d.current,m=S.useContext(nT);f&&!f.projection&&i&&(f.type==="html"||f.type==="svg")&&zI(d.current,n,i,m);const v=S.useRef(!1);S.useInsertionEffect(()=>{f&&v.current&&f.update(n,u)});const p=n[tT],b=S.useRef(!!p&&!(!((a=window.MotionHandoffIsComplete)===null||a===void 0)&&a.call(window,p))&&((s=window.MotionHasOptimisedAnimation)===null||s===void 0?void 0:s.call(window,p)));return MI(()=>{f&&(v.current=!0,window.MotionIsMounted=!0,f.updateFeatures(),hy.render(f.render),b.current&&f.animationState&&f.animationState.animateChanges())}),S.useEffect(()=>{f&&(!b.current&&f.animationState&&f.animationState.animateChanges(),b.current&&(queueMicrotask(()=>{var y;(y=window.MotionHandoffMarkAsComplete)===null||y===void 0||y.call(window,p)}),b.current=!1))}),f}function zI(e,t,n,r){const{layoutId:i,layout:a,drag:s,dragConstraints:o,layoutScroll:l,layoutRoot:u}=t;e.projection=new n(e.latestValues,t["data-framer-portal-id"]?void 0:rT(e.parent)),e.projection.setOptions({layoutId:i,layout:a,alwaysMeasureLayout:!!s||o&&_i(o),visualElement:e,animationType:typeof a=="string"?a:"both",initialPromotionConfig:r,layoutScroll:l,layoutRoot:u})}function rT(e){if(e)return e.options.allowProjection!==!1?e.projection:rT(e.parent)}function UI({preloadedFeatures:e,createVisualElement:t,useRender:n,useVisualState:r,Component:i}){var a,s;e&&AI(e);function o(u,c){let d;const f={...S.useContext(YC),...u,layoutId:GI(u)},{isStatic:m}=f,v=qI(u),p=r(u,m);if(!m&&ly){HI();const b=WI(f);d=b.MeasureLayout,v.visualElement=BI(i,p,f,t,b.ProjectionNode)}return h.jsxs(Sl.Provider,{value:v,children:[d&&v.visualElement?h.jsx(d,{visualElement:v.visualElement,...f}):null,n(i,u,VI(p,v.visualElement,c),p,m,v.visualElement)]})}o.displayName=`motion.${typeof i=="string"?i:`create(${(s=(a=i.displayName)!==null&&a!==void 0?a:i.name)!==null&&s!==void 0?s:""})`}`;const l=S.forwardRef(o);return l[FI]=i,l}function GI({layoutId:e}){const t=S.useContext(KC).id;return t&&e!==void 0?t+"-"+e:e}function HI(e,t){S.useContext(JC).strict}function WI(e){const{drag:t,layout:n}=Bi;if(!t&&!n)return{};const r={...t,...n};return{MeasureLayout:t!=null&&t.isEnabled(e)||n!=null&&n.isEnabled(e)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const KI=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function py(e){return typeof e!="string"||e.includes("-")?!1:!!(KI.indexOf(e)>-1||/[A-Z]/u.test(e))}function J0(e){const t=[{},{}];return e==null||e.values.forEach((n,r)=>{t[0][r]=n.get(),t[1][r]=n.getVelocity()}),t}function my(e,t,n,r){if(typeof t=="function"){const[i,a]=J0(r);t=t(n!==void 0?n:e.custom,i,a)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[i,a]=J0(r);t=t(n!==void 0?n:e.custom,i,a)}return t}const Gm=e=>Array.isArray(e),YI=e=>!!(e&&typeof e=="object"&&e.mix&&e.toValue),QI=e=>Gm(e)?e[e.length-1]||0:e,it=e=>!!(e&&e.getVelocity);function xo(e){const t=it(e)?e.get():e;return YI(t)?t.toValue():t}function XI({scrapeMotionValuesFromProps:e,createRenderState:t,onUpdate:n},r,i,a){const s={latestValues:JI(r,i,a,e),renderState:t()};return n&&(s.onMount=o=>n({props:r,current:o,...s}),s.onUpdate=o=>n(o)),s}const iT=e=>(t,n)=>{const r=S.useContext(Sl),i=S.useContext(oy),a=()=>XI(e,t,r,i);return n?a():CI(a)};function JI(e,t,n,r){const i={},a=r(e,{});for(const f in a)i[f]=xo(a[f]);let{initial:s,animate:o}=e;const l=kl(e),u=eT(e);t&&u&&!l&&e.inherit!==!1&&(s===void 0&&(s=t.initial),o===void 0&&(o=t.animate));let c=n?n.initial===!1:!1;c=c||s===!1;const d=c?o:s;if(d&&typeof d!="boolean"&&!_l(d)){const f=Array.isArray(d)?d:[d];for(let m=0;m<f.length;m++){const v=my(e,f[m]);if(v){const{transitionEnd:p,transition:b,...y}=v;for(const g in y){let x=y[g];if(Array.isArray(x)){const _=c?x.length-1:0;x=x[_]}x!==null&&(i[g]=x)}for(const g in p)i[g]=p[g]}}}return i}const Wi=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Gr=new Set(Wi),aT=e=>t=>typeof t=="string"&&t.startsWith(e),sT=aT("--"),ZI=aT("var(--"),vy=e=>ZI(e)?eD.test(e.split("/*")[0].trim()):!1,eD=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,oT=(e,t)=>t&&typeof e=="number"?t.transform(e):e,Nn=(e,t,n)=>n>t?t:n<e?e:n,Ki={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},ls={...Ki,transform:e=>Nn(0,1,e)},no={...Ki,default:1},gs=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),Gn=gs("deg"),un=gs("%"),H=gs("px"),tD=gs("vh"),nD=gs("vw"),Z0={...un,parse:e=>un.parse(e)/100,transform:e=>un.transform(e*100)},rD={borderWidth:H,borderTopWidth:H,borderRightWidth:H,borderBottomWidth:H,borderLeftWidth:H,borderRadius:H,radius:H,borderTopLeftRadius:H,borderTopRightRadius:H,borderBottomRightRadius:H,borderBottomLeftRadius:H,width:H,maxWidth:H,height:H,maxHeight:H,top:H,right:H,bottom:H,left:H,padding:H,paddingTop:H,paddingRight:H,paddingBottom:H,paddingLeft:H,margin:H,marginTop:H,marginRight:H,marginBottom:H,marginLeft:H,backgroundPositionX:H,backgroundPositionY:H},iD={rotate:Gn,rotateX:Gn,rotateY:Gn,rotateZ:Gn,scale:no,scaleX:no,scaleY:no,scaleZ:no,skew:Gn,skewX:Gn,skewY:Gn,distance:H,translateX:H,translateY:H,translateZ:H,x:H,y:H,z:H,perspective:H,transformPerspective:H,opacity:ls,originX:Z0,originY:Z0,originZ:H},ew={...Ki,transform:Math.round},yy={...rD,...iD,zIndex:ew,size:H,fillOpacity:ls,strokeOpacity:ls,numOctaves:ew},aD={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},sD=Wi.length;function oD(e,t,n){let r="",i=!0;for(let a=0;a<sD;a++){const s=Wi[a],o=e[s];if(o===void 0)continue;let l=!0;if(typeof o=="number"?l=o===(s.startsWith("scale")?1:0):l=parseFloat(o)===0,!l||n){const u=oT(o,yy[s]);if(!l){i=!1;const c=aD[s]||s;r+=`${c}(${u}) `}n&&(t[s]=u)}}return r=r.trim(),n?r=n(t,i?"":r):i&&(r="none"),r}function gy(e,t,n){const{style:r,vars:i,transformOrigin:a}=e;let s=!1,o=!1;for(const l in t){const u=t[l];if(Gr.has(l)){s=!0;continue}else if(sT(l)){i[l]=u;continue}else{const c=oT(u,yy[l]);l.startsWith("origin")?(o=!0,a[l]=c):r[l]=c}}if(t.transform||(s||n?r.transform=oD(t,e.transform,n):r.transform&&(r.transform="none")),o){const{originX:l="50%",originY:u="50%",originZ:c=0}=a;r.transformOrigin=`${l} ${u} ${c}`}}const lD={offset:"stroke-dashoffset",array:"stroke-dasharray"},uD={offset:"strokeDashoffset",array:"strokeDasharray"};function cD(e,t,n=1,r=0,i=!0){e.pathLength=1;const a=i?lD:uD;e[a.offset]=H.transform(-r);const s=H.transform(t),o=H.transform(n);e[a.array]=`${s} ${o}`}function tw(e,t,n){return typeof e=="string"?e:H.transform(t+n*e)}function dD(e,t,n){const r=tw(t,e.x,e.width),i=tw(n,e.y,e.height);return`${r} ${i}`}function wy(e,{attrX:t,attrY:n,attrScale:r,originX:i,originY:a,pathLength:s,pathSpacing:o=1,pathOffset:l=0,...u},c,d){if(gy(e,u,d),c){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:f,style:m,dimensions:v}=e;f.transform&&(v&&(m.transform=f.transform),delete f.transform),v&&(i!==void 0||a!==void 0||m.transform)&&(m.transformOrigin=dD(v,i!==void 0?i:.5,a!==void 0?a:.5)),t!==void 0&&(f.x=t),n!==void 0&&(f.y=n),r!==void 0&&(f.scale=r),s!==void 0&&cD(f,s,o,l,!1)}const by=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),lT=()=>({...by(),attrs:{}}),xy=e=>typeof e=="string"&&e.toLowerCase()==="svg";function uT(e,{style:t,vars:n},r,i){Object.assign(e.style,t,i&&i.getProjectionStyles(r));for(const a in n)e.style.setProperty(a,n[a])}const cT=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function dT(e,t,n,r){uT(e,t,void 0,r);for(const i in t.attrs)e.setAttribute(cT.has(i)?i:fy(i),t.attrs[i])}const Yo={};function fD(e){Object.assign(Yo,e)}function fT(e,{layout:t,layoutId:n}){return Gr.has(e)||e.startsWith("origin")||(t||n!==void 0)&&(!!Yo[e]||e==="opacity")}function Sy(e,t,n){var r;const{style:i}=e,a={};for(const s in i)(it(i[s])||t.style&&it(t.style[s])||fT(s,e)||((r=n==null?void 0:n.getValue(s))===null||r===void 0?void 0:r.liveStyle)!==void 0)&&(a[s]=i[s]);return a}function hT(e,t,n){const r=Sy(e,t,n);for(const i in e)if(it(e[i])||it(t[i])){const a=Wi.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[a]=e[i]}return r}function hD(e,t){try{t.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{t.dimensions={x:0,y:0,width:0,height:0}}}const nw=["x","y","width","height","cx","cy","r"],pD={useVisualState:iT({scrapeMotionValuesFromProps:hT,createRenderState:lT,onUpdate:({props:e,prevProps:t,current:n,renderState:r,latestValues:i})=>{if(!n)return;let a=!!e.drag;if(!a){for(const o in i)if(Gr.has(o)){a=!0;break}}if(!a)return;let s=!t;if(t)for(let o=0;o<nw.length;o++){const l=nw[o];e[l]!==t[l]&&(s=!0)}s&&xe.read(()=>{hD(n,r),xe.render(()=>{wy(r,i,xy(n.tagName),e.transformTemplate),dT(n,r)})})}})},mD={useVisualState:iT({scrapeMotionValuesFromProps:Sy,createRenderState:by})};function pT(e,t,n){for(const r in t)!it(t[r])&&!fT(r,n)&&(e[r]=t[r])}function vD({transformTemplate:e},t){return S.useMemo(()=>{const n=by();return gy(n,t,e),Object.assign({},n.vars,n.style)},[t])}function yD(e,t){const n=e.style||{},r={};return pT(r,n,e),Object.assign(r,vD(e,t)),r}function gD(e,t){const n={},r=yD(e,t);return e.drag&&e.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=r,n}function wD(e,t,n,r){const i=S.useMemo(()=>{const a=lT();return wy(a,t,xy(r),e.transformTemplate),{...a.attrs,style:{...a.style}}},[t]);if(e.style){const a={};pT(a,e.style,e),i.style={...a,...i.style}}return i}function bD(e=!1){return(n,r,i,{latestValues:a},s)=>{const l=(py(n)?wD:gD)(r,a,s,n),u=DI(r,typeof n=="string",e),c=n!==S.Fragment?{...u,...l,ref:i}:{},{children:d}=r,f=S.useMemo(()=>it(d)?d.get():d,[d]);return S.createElement(n,{...c,children:f})}}function xD(e,t){return function(r,{forwardMotionProps:i}={forwardMotionProps:!1}){const s={...py(r)?pD:mD,preloadedFeatures:e,useRender:bD(i),createVisualElement:t,Component:r};return UI(s)}}function mT(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}function El(e,t,n){const r=e.getProps();return my(r,t,n!==void 0?n:r.custom,e)}const SD=uy(()=>window.ScrollTimeline!==void 0);class _D{constructor(t){this.stop=()=>this.runAll("stop"),this.animations=t.filter(Boolean)}get finished(){return Promise.all(this.animations.map(t=>"finished"in t?t.finished:t))}getAll(t){return this.animations[0][t]}setAll(t,n){for(let r=0;r<this.animations.length;r++)this.animations[r][t]=n}attachTimeline(t,n){const r=this.animations.map(i=>{if(SD()&&i.attachTimeline)return i.attachTimeline(t);if(typeof n=="function")return n(i)});return()=>{r.forEach((i,a)=>{i&&i(),this.animations[a].stop()})}}get time(){return this.getAll("time")}set time(t){this.setAll("time",t)}get speed(){return this.getAll("speed")}set speed(t){this.setAll("speed",t)}get startTime(){return this.getAll("startTime")}get duration(){let t=0;for(let n=0;n<this.animations.length;n++)t=Math.max(t,this.animations[n].duration);return t}runAll(t){this.animations.forEach(n=>n[t]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class kD extends _D{then(t,n){return Promise.all(this.animations).then(t).catch(n)}}function _y(e,t){return e?e[t]||e.default||e:void 0}const Hm=2e4;function vT(e){let t=0;const n=50;let r=e.next(t);for(;!r.done&&t<Hm;)t+=n,r=e.next(t);return t>=Hm?1/0:t}function ky(e){return typeof e=="function"}function rw(e,t){e.timeline=t,e.onfinish=null}const Ey=e=>Array.isArray(e)&&typeof e[0]=="number",ED={linearEasing:void 0};function CD(e,t){const n=uy(e);return()=>{var r;return(r=ED[t])!==null&&r!==void 0?r:n()}}const Qo=CD(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),yT=(e,t,n=10)=>{let r="";const i=Math.max(Math.round(t/n),2);for(let a=0;a<i;a++)r+=e($i(0,i-1,a))+", ";return`linear(${r.substring(0,r.length-2)})`};function gT(e){return!!(typeof e=="function"&&Qo()||!e||typeof e=="string"&&(e in Wm||Qo())||Ey(e)||Array.isArray(e)&&e.every(gT))}const Sa=([e,t,n,r])=>`cubic-bezier(${e}, ${t}, ${n}, ${r})`,Wm={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Sa([0,.65,.55,1]),circOut:Sa([.55,0,1,.45]),backIn:Sa([.31,.01,.66,-.59]),backOut:Sa([.33,1.53,.69,.99])};function wT(e,t){if(e)return typeof e=="function"&&Qo()?yT(e,t):Ey(e)?Sa(e):Array.isArray(e)?e.map(n=>wT(n,t)||Wm.easeOut):Wm[e]}const Ut={x:!1,y:!1};function bT(){return Ut.x||Ut.y}function TD(e,t,n){var r;if(e instanceof Element)return[e];if(typeof e=="string"){let i=document;const a=(r=void 0)!==null&&r!==void 0?r:i.querySelectorAll(e);return a?Array.from(a):[]}return Array.from(e)}function xT(e,t){const n=TD(e),r=new AbortController,i={passive:!0,...t,signal:r.signal};return[n,i,()=>r.abort()]}function iw(e){return t=>{t.pointerType==="touch"||bT()||e(t)}}function MD(e,t,n={}){const[r,i,a]=xT(e,n),s=iw(o=>{const{target:l}=o,u=t(o);if(typeof u!="function"||!l)return;const c=iw(d=>{u(d),l.removeEventListener("pointerleave",c)});l.addEventListener("pointerleave",c,i)});return r.forEach(o=>{o.addEventListener("pointerenter",s,i)}),a}const ST=(e,t)=>t?e===t?!0:ST(e,t.parentElement):!1,Cy=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1,jD=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function PD(e){return jD.has(e.tagName)||e.tabIndex!==-1}const _a=new WeakSet;function aw(e){return t=>{t.key==="Enter"&&e(t)}}function Uu(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const ND=(e,t)=>{const n=e.currentTarget;if(!n)return;const r=aw(()=>{if(_a.has(n))return;Uu(n,"down");const i=aw(()=>{Uu(n,"up")}),a=()=>Uu(n,"cancel");n.addEventListener("keyup",i,t),n.addEventListener("blur",a,t)});n.addEventListener("keydown",r,t),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),t)};function sw(e){return Cy(e)&&!bT()}function AD(e,t,n={}){const[r,i,a]=xT(e,n),s=o=>{const l=o.currentTarget;if(!sw(o)||_a.has(l))return;_a.add(l);const u=t(o),c=(m,v)=>{window.removeEventListener("pointerup",d),window.removeEventListener("pointercancel",f),!(!sw(m)||!_a.has(l))&&(_a.delete(l),typeof u=="function"&&u(m,{success:v}))},d=m=>{c(m,n.useGlobalTarget||ST(l,m.target))},f=m=>{c(m,!1)};window.addEventListener("pointerup",d,i),window.addEventListener("pointercancel",f,i)};return r.forEach(o=>{!PD(o)&&o.getAttribute("tabindex")===null&&(o.tabIndex=0),(n.useGlobalTarget?window:o).addEventListener("pointerdown",s,i),o.addEventListener("focus",u=>ND(u,i),i)}),a}function RD(e){return e==="x"||e==="y"?Ut[e]?null:(Ut[e]=!0,()=>{Ut[e]=!1}):Ut.x||Ut.y?null:(Ut.x=Ut.y=!0,()=>{Ut.x=Ut.y=!1})}const _T=new Set(["width","height","top","left","right","bottom",...Wi]);let So;function ID(){So=void 0}const cn={now:()=>(So===void 0&&cn.set(Qe.isProcessing||jI.useManualTiming?Qe.timestamp:performance.now()),So),set:e=>{So=e,queueMicrotask(ID)}};function Ty(e,t){e.indexOf(t)===-1&&e.push(t)}function My(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}class jy{constructor(){this.subscriptions=[]}add(t){return Ty(this.subscriptions,t),()=>My(this.subscriptions,t)}notify(t,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](t,n,r);else for(let a=0;a<i;a++){const s=this.subscriptions[a];s&&s(t,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function kT(e,t){return t?e*(1e3/t):0}const ow=30,DD=e=>!isNaN(parseFloat(e));class OD{constructor(t,n={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,i=!0)=>{const a=cn.now();this.updatedAt!==a&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(t),this.owner=n.owner}setCurrent(t){this.current=t,this.updatedAt=cn.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=DD(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,n){this.events[t]||(this.events[t]=new jy);const r=this.events[t].add(n);return t==="change"?()=>{r(),xe.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,n){this.passiveEffect=t,this.stopPassiveEffect=n}set(t,n=!0){!n||!this.passiveEffect?this.updateAndNotify(t,n):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-r}jump(t,n=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=cn.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>ow)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,ow);return kT(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(t){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=t(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function us(e,t){return new OD(e,t)}function LD(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,us(n))}function qD(e,t){const n=El(e,t);let{transitionEnd:r={},transition:i={},...a}=n||{};a={...a,...r};for(const s in a){const o=QI(a[s]);LD(e,s,o)}}function FD(e){return!!(it(e)&&e.add)}function Km(e,t){const n=e.getValue("willChange");if(FD(n))return n.add(t)}function ET(e){return e.props[tT]}const CT=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,VD=1e-7,$D=12;function BD(e,t,n,r,i){let a,s,o=0;do s=t+(n-t)/2,a=CT(s,r,i)-e,a>0?n=s:t=s;while(Math.abs(a)>VD&&++o<$D);return s}function ws(e,t,n,r){if(e===t&&n===r)return _t;const i=a=>BD(a,0,1,e,n);return a=>a===0||a===1?a:CT(i(a),t,r)}const TT=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,MT=e=>t=>1-e(1-t),jT=ws(.33,1.53,.69,.99),Py=MT(jT),PT=TT(Py),NT=e=>(e*=2)<1?.5*Py(e):.5*(2-Math.pow(2,-10*(e-1))),Ny=e=>1-Math.sin(Math.acos(e)),AT=MT(Ny),RT=TT(Ny),IT=e=>/^0[^.\s]+$/u.test(e);function zD(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||IT(e):!0}const Va=e=>Math.round(e*1e5)/1e5,Ay=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function UD(e){return e==null}const GD=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Ry=(e,t)=>n=>!!(typeof n=="string"&&GD.test(n)&&n.startsWith(e)||t&&!UD(n)&&Object.prototype.hasOwnProperty.call(n,t)),DT=(e,t,n)=>r=>{if(typeof r!="string")return r;const[i,a,s,o]=r.match(Ay);return{[e]:parseFloat(i),[t]:parseFloat(a),[n]:parseFloat(s),alpha:o!==void 0?parseFloat(o):1}},HD=e=>Nn(0,255,e),Gu={...Ki,transform:e=>Math.round(HD(e))},Ar={test:Ry("rgb","red"),parse:DT("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:r=1})=>"rgba("+Gu.transform(e)+", "+Gu.transform(t)+", "+Gu.transform(n)+", "+Va(ls.transform(r))+")"};function WD(e){let t="",n="",r="",i="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),r=e.substring(5,7),i=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),r=e.substring(3,4),i=e.substring(4,5),t+=t,n+=n,r+=r,i+=i),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const Ym={test:Ry("#"),parse:WD,transform:Ar.transform},ki={test:Ry("hsl","hue"),parse:DT("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:r=1})=>"hsla("+Math.round(e)+", "+un.transform(Va(t))+", "+un.transform(Va(n))+", "+Va(ls.transform(r))+")"},nt={test:e=>Ar.test(e)||Ym.test(e)||ki.test(e),parse:e=>Ar.test(e)?Ar.parse(e):ki.test(e)?ki.parse(e):Ym.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?Ar.transform(e):ki.transform(e)},KD=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function YD(e){var t,n;return isNaN(e)&&typeof e=="string"&&(((t=e.match(Ay))===null||t===void 0?void 0:t.length)||0)+(((n=e.match(KD))===null||n===void 0?void 0:n.length)||0)>0}const OT="number",LT="color",QD="var",XD="var(",lw="${}",JD=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function cs(e){const t=e.toString(),n=[],r={color:[],number:[],var:[]},i=[];let a=0;const o=t.replace(JD,l=>(nt.test(l)?(r.color.push(a),i.push(LT),n.push(nt.parse(l))):l.startsWith(XD)?(r.var.push(a),i.push(QD),n.push(l)):(r.number.push(a),i.push(OT),n.push(parseFloat(l))),++a,lw)).split(lw);return{values:n,split:o,indexes:r,types:i}}function qT(e){return cs(e).values}function FT(e){const{split:t,types:n}=cs(e),r=t.length;return i=>{let a="";for(let s=0;s<r;s++)if(a+=t[s],i[s]!==void 0){const o=n[s];o===OT?a+=Va(i[s]):o===LT?a+=nt.transform(i[s]):a+=i[s]}return a}}const ZD=e=>typeof e=="number"?0:e;function eO(e){const t=qT(e);return FT(e)(t.map(ZD))}const dr={test:YD,parse:qT,createTransformer:FT,getAnimatableNone:eO},tO=new Set(["brightness","contrast","saturate","opacity"]);function nO(e){const[t,n]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[r]=n.match(Ay)||[];if(!r)return e;const i=n.replace(r,"");let a=tO.has(t)?1:0;return r!==n&&(a*=100),t+"("+a+i+")"}const rO=/\b([a-z-]*)\(.*?\)/gu,Qm={...dr,getAnimatableNone:e=>{const t=e.match(rO);return t?t.map(nO).join(" "):e}},iO={...yy,color:nt,backgroundColor:nt,outlineColor:nt,fill:nt,stroke:nt,borderColor:nt,borderTopColor:nt,borderRightColor:nt,borderBottomColor:nt,borderLeftColor:nt,filter:Qm,WebkitFilter:Qm},Iy=e=>iO[e];function VT(e,t){let n=Iy(e);return n!==Qm&&(n=dr),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const aO=new Set(["auto","none","0"]);function sO(e,t,n){let r=0,i;for(;r<e.length&&!i;){const a=e[r];typeof a=="string"&&!aO.has(a)&&cs(a).values.length&&(i=e[r]),r++}if(i&&n)for(const a of t)e[a]=VT(n,i)}const uw=e=>e===Ki||e===H,cw=(e,t)=>parseFloat(e.split(", ")[t]),dw=(e,t)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const i=r.match(/^matrix3d\((.+)\)$/u);if(i)return cw(i[1],t);{const a=r.match(/^matrix\((.+)\)$/u);return a?cw(a[1],e):0}},oO=new Set(["x","y","z"]),lO=Wi.filter(e=>!oO.has(e));function uO(e){const t=[];return lO.forEach(n=>{const r=e.getValue(n);r!==void 0&&(t.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),t}const zi={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:dw(4,13),y:dw(5,14)};zi.translateX=zi.x;zi.translateY=zi.y;const Or=new Set;let Xm=!1,Jm=!1;function $T(){if(Jm){const e=Array.from(Or).filter(r=>r.needsMeasurement),t=new Set(e.map(r=>r.element)),n=new Map;t.forEach(r=>{const i=uO(r);i.length&&(n.set(r,i),r.render())}),e.forEach(r=>r.measureInitialState()),t.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([a,s])=>{var o;(o=r.getValue(a))===null||o===void 0||o.set(s)})}),e.forEach(r=>r.measureEndState()),e.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}Jm=!1,Xm=!1,Or.forEach(e=>e.complete()),Or.clear()}function BT(){Or.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(Jm=!0)})}function cO(){BT(),$T()}class Dy{constructor(t,n,r,i,a,s=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...t],this.onComplete=n,this.name=r,this.motionValue=i,this.element=a,this.isAsync=s}scheduleResolve(){this.isScheduled=!0,this.isAsync?(Or.add(this),Xm||(Xm=!0,xe.read(BT),xe.resolveKeyframes($T))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:n,element:r,motionValue:i}=this;for(let a=0;a<t.length;a++)if(t[a]===null)if(a===0){const s=i==null?void 0:i.get(),o=t[t.length-1];if(s!==void 0)t[0]=s;else if(r&&n){const l=r.readValue(n,o);l!=null&&(t[0]=l)}t[0]===void 0&&(t[0]=o),i&&s===void 0&&i.set(t[0])}else t[a]=t[a-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),Or.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,Or.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const zT=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e),dO=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function fO(e){const t=dO.exec(e);if(!t)return[,];const[,n,r,i]=t;return[`--${n??r}`,i]}function UT(e,t,n=1){const[r,i]=fO(e);if(!r)return;const a=window.getComputedStyle(t).getPropertyValue(r);if(a){const s=a.trim();return zT(s)?parseFloat(s):s}return vy(i)?UT(i,t,n+1):i}const GT=e=>t=>t.test(e),hO={test:e=>e==="auto",parse:e=>e},HT=[Ki,H,un,Gn,nD,tD,hO],fw=e=>HT.find(GT(e));class WT extends Dy{constructor(t,n,r,i,a){super(t,n,r,i,a,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let l=0;l<t.length;l++){let u=t[l];if(typeof u=="string"&&(u=u.trim(),vy(u))){const c=UT(u,n.current);c!==void 0&&(t[l]=c),l===t.length-1&&(this.finalKeyframe=u)}}if(this.resolveNoneKeyframes(),!_T.has(r)||t.length!==2)return;const[i,a]=t,s=fw(i),o=fw(a);if(s!==o)if(uw(s)&&uw(o))for(let l=0;l<t.length;l++){const u=t[l];typeof u=="string"&&(t[l]=parseFloat(u))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:n}=this,r=[];for(let i=0;i<t.length;i++)zD(t[i])&&r.push(i);r.length&&sO(t,r,n)}measureInitialState(){const{element:t,unresolvedKeyframes:n,name:r}=this;if(!t||!t.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=zi[r](t.measureViewportBox(),window.getComputedStyle(t.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&t.getValue(r,i).jump(i,!1)}measureEndState(){var t;const{element:n,name:r,unresolvedKeyframes:i}=this;if(!n||!n.current)return;const a=n.getValue(r);a&&a.jump(this.measuredOrigin,!1);const s=i.length-1,o=i[s];i[s]=zi[r](n.measureViewportBox(),window.getComputedStyle(n.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),!((t=this.removedTransforms)===null||t===void 0)&&t.length&&this.removedTransforms.forEach(([l,u])=>{n.getValue(l).set(u)}),this.resolveNoneKeyframes()}}const hw=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(dr.test(e)||e==="0")&&!e.startsWith("url("));function pO(e){const t=e[0];if(e.length===1)return!0;for(let n=0;n<e.length;n++)if(e[n]!==t)return!0}function mO(e,t,n,r){const i=e[0];if(i===null)return!1;if(t==="display"||t==="visibility")return!0;const a=e[e.length-1],s=hw(i,t),o=hw(a,t);return!s||!o?!1:pO(e)||(n==="spring"||ky(n))&&r}const vO=e=>e!==null;function Cl(e,{repeat:t,repeatType:n="loop"},r){const i=e.filter(vO),a=t&&n!=="loop"&&t%2===1?0:i.length-1;return!a||r===void 0?i[a]:r}const yO=40;class KT{constructor({autoplay:t=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:a=0,repeatType:s="loop",...o}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=cn.now(),this.options={autoplay:t,delay:n,type:r,repeat:i,repeatDelay:a,repeatType:s,...o},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>yO?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&cO(),this._resolved}onKeyframesResolved(t,n){this.resolvedAt=cn.now(),this.hasAttemptedResolve=!0;const{name:r,type:i,velocity:a,delay:s,onComplete:o,onUpdate:l,isGenerator:u}=this.options;if(!u&&!mO(t,r,i,a))if(s)this.options.duration=0;else{l&&l(Cl(t,this.options,n)),o&&o(),this.resolveFinishedPromise();return}const c=this.initPlayback(t,n);c!==!1&&(this._resolved={keyframes:t,finalKeyframe:n,...c},this.onPostResolved())}onPostResolved(){}then(t,n){return this.currentFinishedPromise.then(t,n)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(t=>{this.resolveFinishedPromise=t})}}const Te=(e,t,n)=>e+(t-e)*n;function Hu(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function gO({hue:e,saturation:t,lightness:n,alpha:r}){e/=360,t/=100,n/=100;let i=0,a=0,s=0;if(!t)i=a=s=n;else{const o=n<.5?n*(1+t):n+t-n*t,l=2*n-o;i=Hu(l,o,e+1/3),a=Hu(l,o,e),s=Hu(l,o,e-1/3)}return{red:Math.round(i*255),green:Math.round(a*255),blue:Math.round(s*255),alpha:r}}function Xo(e,t){return n=>n>0?t:e}const Wu=(e,t,n)=>{const r=e*e,i=n*(t*t-r)+r;return i<0?0:Math.sqrt(i)},wO=[Ym,Ar,ki],bO=e=>wO.find(t=>t.test(e));function pw(e){const t=bO(e);if(!t)return!1;let n=t.parse(e);return t===ki&&(n=gO(n)),n}const mw=(e,t)=>{const n=pw(e),r=pw(t);if(!n||!r)return Xo(e,t);const i={...n};return a=>(i.red=Wu(n.red,r.red,a),i.green=Wu(n.green,r.green,a),i.blue=Wu(n.blue,r.blue,a),i.alpha=Te(n.alpha,r.alpha,a),Ar.transform(i))},xO=(e,t)=>n=>t(e(n)),bs=(...e)=>e.reduce(xO),Zm=new Set(["none","hidden"]);function SO(e,t){return Zm.has(e)?n=>n<=0?e:t:n=>n>=1?t:e}function _O(e,t){return n=>Te(e,t,n)}function Oy(e){return typeof e=="number"?_O:typeof e=="string"?vy(e)?Xo:nt.test(e)?mw:CO:Array.isArray(e)?YT:typeof e=="object"?nt.test(e)?mw:kO:Xo}function YT(e,t){const n=[...e],r=n.length,i=e.map((a,s)=>Oy(a)(a,t[s]));return a=>{for(let s=0;s<r;s++)n[s]=i[s](a);return n}}function kO(e,t){const n={...e,...t},r={};for(const i in n)e[i]!==void 0&&t[i]!==void 0&&(r[i]=Oy(e[i])(e[i],t[i]));return i=>{for(const a in r)n[a]=r[a](i);return n}}function EO(e,t){var n;const r=[],i={color:0,var:0,number:0};for(let a=0;a<t.values.length;a++){const s=t.types[a],o=e.indexes[s][i[s]],l=(n=e.values[o])!==null&&n!==void 0?n:0;r[a]=l,i[s]++}return r}const CO=(e,t)=>{const n=dr.createTransformer(t),r=cs(e),i=cs(t);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?Zm.has(e)&&!i.values.length||Zm.has(t)&&!r.values.length?SO(e,t):bs(YT(EO(r,i),i.values),n):Xo(e,t)};function QT(e,t,n){return typeof e=="number"&&typeof t=="number"&&typeof n=="number"?Te(e,t,n):Oy(e)(e,t)}const TO=5;function XT(e,t,n){const r=Math.max(t-TO,0);return kT(n-e(r),t-r)}const Re={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Ku=.001;function MO({duration:e=Re.duration,bounce:t=Re.bounce,velocity:n=Re.velocity,mass:r=Re.mass}){let i,a,s=1-t;s=Nn(Re.minDamping,Re.maxDamping,s),e=Nn(Re.minDuration,Re.maxDuration,Cn(e)),s<1?(i=u=>{const c=u*s,d=c*e,f=c-n,m=ev(u,s),v=Math.exp(-d);return Ku-f/m*v},a=u=>{const d=u*s*e,f=d*n+n,m=Math.pow(s,2)*Math.pow(u,2)*e,v=Math.exp(-d),p=ev(Math.pow(u,2),s);return(-i(u)+Ku>0?-1:1)*((f-m)*v)/p}):(i=u=>{const c=Math.exp(-u*e),d=(u-n)*e+1;return-Ku+c*d},a=u=>{const c=Math.exp(-u*e),d=(n-u)*(e*e);return c*d});const o=5/e,l=PO(i,a,o);if(e=En(e),isNaN(l))return{stiffness:Re.stiffness,damping:Re.damping,duration:e};{const u=Math.pow(l,2)*r;return{stiffness:u,damping:s*2*Math.sqrt(r*u),duration:e}}}const jO=12;function PO(e,t,n){let r=n;for(let i=1;i<jO;i++)r=r-e(r)/t(r);return r}function ev(e,t){return e*Math.sqrt(1-t*t)}const NO=["duration","bounce"],AO=["stiffness","damping","mass"];function vw(e,t){return t.some(n=>e[n]!==void 0)}function RO(e){let t={velocity:Re.velocity,stiffness:Re.stiffness,damping:Re.damping,mass:Re.mass,isResolvedFromDuration:!1,...e};if(!vw(e,AO)&&vw(e,NO))if(e.visualDuration){const n=e.visualDuration,r=2*Math.PI/(n*1.2),i=r*r,a=2*Nn(.05,1,1-(e.bounce||0))*Math.sqrt(i);t={...t,mass:Re.mass,stiffness:i,damping:a}}else{const n=MO(e);t={...t,...n,mass:Re.mass},t.isResolvedFromDuration=!0}return t}function JT(e=Re.visualDuration,t=Re.bounce){const n=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:r,restDelta:i}=n;const a=n.keyframes[0],s=n.keyframes[n.keyframes.length-1],o={done:!1,value:a},{stiffness:l,damping:u,mass:c,duration:d,velocity:f,isResolvedFromDuration:m}=RO({...n,velocity:-Cn(n.velocity||0)}),v=f||0,p=u/(2*Math.sqrt(l*c)),b=s-a,y=Cn(Math.sqrt(l/c)),g=Math.abs(b)<5;r||(r=g?Re.restSpeed.granular:Re.restSpeed.default),i||(i=g?Re.restDelta.granular:Re.restDelta.default);let x;if(p<1){const E=ev(y,p);x=T=>{const M=Math.exp(-p*y*T);return s-M*((v+p*y*b)/E*Math.sin(E*T)+b*Math.cos(E*T))}}else if(p===1)x=E=>s-Math.exp(-y*E)*(b+(v+y*b)*E);else{const E=y*Math.sqrt(p*p-1);x=T=>{const M=Math.exp(-p*y*T),C=Math.min(E*T,300);return s-M*((v+p*y*b)*Math.sinh(C)+E*b*Math.cosh(C))/E}}const _={calculatedDuration:m&&d||null,next:E=>{const T=x(E);if(m)o.done=E>=d;else{let M=0;p<1&&(M=E===0?En(v):XT(x,E,T));const C=Math.abs(M)<=r,j=Math.abs(s-T)<=i;o.done=C&&j}return o.value=o.done?s:T,o},toString:()=>{const E=Math.min(vT(_),Hm),T=yT(M=>_.next(E*M).value,E,30);return E+"ms "+T}};return _}function yw({keyframes:e,velocity:t=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:a=500,modifyTarget:s,min:o,max:l,restDelta:u=.5,restSpeed:c}){const d=e[0],f={done:!1,value:d},m=C=>o!==void 0&&C<o||l!==void 0&&C>l,v=C=>o===void 0?l:l===void 0||Math.abs(o-C)<Math.abs(l-C)?o:l;let p=n*t;const b=d+p,y=s===void 0?b:s(b);y!==b&&(p=y-d);const g=C=>-p*Math.exp(-C/r),x=C=>y+g(C),_=C=>{const j=g(C),N=x(C);f.done=Math.abs(j)<=u,f.value=f.done?y:N};let E,T;const M=C=>{m(f.value)&&(E=C,T=JT({keyframes:[f.value,v(f.value)],velocity:XT(x,C,f.value),damping:i,stiffness:a,restDelta:u,restSpeed:c}))};return M(0),{calculatedDuration:null,next:C=>{let j=!1;return!T&&E===void 0&&(j=!0,_(C),M(C)),E!==void 0&&C>=E?T.next(C-E):(!j&&_(C),f)}}}const IO=ws(.42,0,1,1),DO=ws(0,0,.58,1),ZT=ws(.42,0,.58,1),OO=e=>Array.isArray(e)&&typeof e[0]!="number",LO={linear:_t,easeIn:IO,easeInOut:ZT,easeOut:DO,circIn:Ny,circInOut:RT,circOut:AT,backIn:Py,backInOut:PT,backOut:jT,anticipate:NT},gw=e=>{if(Ey(e)){QC(e.length===4);const[t,n,r,i]=e;return ws(t,n,r,i)}else if(typeof e=="string")return LO[e];return e};function qO(e,t,n){const r=[],i=n||QT,a=e.length-1;for(let s=0;s<a;s++){let o=i(e[s],e[s+1]);if(t){const l=Array.isArray(t)?t[s]||_t:t;o=bs(l,o)}r.push(o)}return r}function FO(e,t,{clamp:n=!0,ease:r,mixer:i}={}){const a=e.length;if(QC(a===t.length),a===1)return()=>t[0];if(a===2&&t[0]===t[1])return()=>t[1];const s=e[0]===e[1];e[0]>e[a-1]&&(e=[...e].reverse(),t=[...t].reverse());const o=qO(t,r,i),l=o.length,u=c=>{if(s&&c<e[0])return t[0];let d=0;if(l>1)for(;d<e.length-2&&!(c<e[d+1]);d++);const f=$i(e[d],e[d+1],c);return o[d](f)};return n?c=>u(Nn(e[0],e[a-1],c)):u}function VO(e,t){const n=e[e.length-1];for(let r=1;r<=t;r++){const i=$i(0,t,r);e.push(Te(n,1,i))}}function $O(e){const t=[0];return VO(t,e.length-1),t}function BO(e,t){return e.map(n=>n*t)}function zO(e,t){return e.map(()=>t||ZT).splice(0,e.length-1)}function Jo({duration:e=300,keyframes:t,times:n,ease:r="easeInOut"}){const i=OO(r)?r.map(gw):gw(r),a={done:!1,value:t[0]},s=BO(n&&n.length===t.length?n:$O(t),e),o=FO(s,t,{ease:Array.isArray(i)?i:zO(t,i)});return{calculatedDuration:e,next:l=>(a.value=o(l),a.done=l>=e,a)}}const UO=e=>{const t=({timestamp:n})=>e(n);return{start:()=>xe.update(t,!0),stop:()=>cr(t),now:()=>Qe.isProcessing?Qe.timestamp:cn.now()}},GO={decay:yw,inertia:yw,tween:Jo,keyframes:Jo,spring:JT},HO=e=>e/100;class Ly extends KT{constructor(t){super(t),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:l}=this.options;l&&l()};const{name:n,motionValue:r,element:i,keyframes:a}=this.options,s=(i==null?void 0:i.KeyframeResolver)||Dy,o=(l,u)=>this.onKeyframesResolved(l,u);this.resolver=new s(a,o,n,r,i),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(t){const{type:n="keyframes",repeat:r=0,repeatDelay:i=0,repeatType:a,velocity:s=0}=this.options,o=ky(n)?n:GO[n]||Jo;let l,u;o!==Jo&&typeof t[0]!="number"&&(l=bs(HO,QT(t[0],t[1])),t=[0,100]);const c=o({...this.options,keyframes:t});a==="mirror"&&(u=o({...this.options,keyframes:[...t].reverse(),velocity:-s})),c.calculatedDuration===null&&(c.calculatedDuration=vT(c));const{calculatedDuration:d}=c,f=d+i,m=f*(r+1)-i;return{generator:c,mirroredGenerator:u,mapPercentToKeyframes:l,calculatedDuration:d,resolvedDuration:f,totalDuration:m}}onPostResolved(){const{autoplay:t=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!t?this.pause():this.state=this.pendingPlayState}tick(t,n=!1){const{resolved:r}=this;if(!r){const{keyframes:C}=this.options;return{done:!0,value:C[C.length-1]}}const{finalKeyframe:i,generator:a,mirroredGenerator:s,mapPercentToKeyframes:o,keyframes:l,calculatedDuration:u,totalDuration:c,resolvedDuration:d}=r;if(this.startTime===null)return a.next(0);const{delay:f,repeat:m,repeatType:v,repeatDelay:p,onUpdate:b}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-c/this.speed,this.startTime)),n?this.currentTime=t:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(t-this.startTime)*this.speed;const y=this.currentTime-f*(this.speed>=0?1:-1),g=this.speed>=0?y<0:y>c;this.currentTime=Math.max(y,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=c);let x=this.currentTime,_=a;if(m){const C=Math.min(this.currentTime,c)/d;let j=Math.floor(C),N=C%1;!N&&C>=1&&(N=1),N===1&&j--,j=Math.min(j,m+1),!!(j%2)&&(v==="reverse"?(N=1-N,p&&(N-=p/d)):v==="mirror"&&(_=s)),x=Nn(0,1,N)*d}const E=g?{done:!1,value:l[0]}:_.next(x);o&&(E.value=o(E.value));let{done:T}=E;!g&&u!==null&&(T=this.speed>=0?this.currentTime>=c:this.currentTime<=0);const M=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&T);return M&&i!==void 0&&(E.value=Cl(l,this.options,i)),b&&b(E.value),M&&this.finish(),E}get duration(){const{resolved:t}=this;return t?Cn(t.calculatedDuration):0}get time(){return Cn(this.currentTime)}set time(t){t=En(t),this.currentTime=t,this.holdTime!==null||this.speed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.speed)}get speed(){return this.playbackSpeed}set speed(t){const n=this.playbackSpeed!==t;this.playbackSpeed=t,n&&(this.time=Cn(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:t=UO,onPlay:n,startTime:r}=this.options;this.driver||(this.driver=t(a=>this.tick(a))),n&&n();const i=this.driver.now();this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=i):this.startTime=r??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var t;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(t=this.currentTime)!==null&&t!==void 0?t:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:t}=this.options;t&&t()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}}const WO=new Set(["opacity","clipPath","filter","transform"]);function KO(e,t,n,{delay:r=0,duration:i=300,repeat:a=0,repeatType:s="loop",ease:o="easeInOut",times:l}={}){const u={[t]:n};l&&(u.offset=l);const c=wT(o,i);return Array.isArray(c)&&(u.easing=c),e.animate(u,{delay:r,duration:i,easing:Array.isArray(c)?"linear":c,fill:"both",iterations:a+1,direction:s==="reverse"?"alternate":"normal"})}const YO=uy(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),Zo=10,QO=2e4;function XO(e){return ky(e.type)||e.type==="spring"||!gT(e.ease)}function JO(e,t){const n=new Ly({...t,keyframes:e,repeat:0,delay:0,isGenerator:!0});let r={done:!1,value:e[0]};const i=[];let a=0;for(;!r.done&&a<QO;)r=n.sample(a),i.push(r.value),a+=Zo;return{times:void 0,keyframes:i,duration:a-Zo,ease:"linear"}}const eM={anticipate:NT,backInOut:PT,circInOut:RT};function ZO(e){return e in eM}class ww extends KT{constructor(t){super(t);const{name:n,motionValue:r,element:i,keyframes:a}=this.options;this.resolver=new WT(a,(s,o)=>this.onKeyframesResolved(s,o),n,r,i),this.resolver.scheduleResolve()}initPlayback(t,n){let{duration:r=300,times:i,ease:a,type:s,motionValue:o,name:l,startTime:u}=this.options;if(!o.owner||!o.owner.current)return!1;if(typeof a=="string"&&Qo()&&ZO(a)&&(a=eM[a]),XO(this.options)){const{onComplete:d,onUpdate:f,motionValue:m,element:v,...p}=this.options,b=JO(t,p);t=b.keyframes,t.length===1&&(t[1]=t[0]),r=b.duration,i=b.times,a=b.ease,s="keyframes"}const c=KO(o.owner.current,l,t,{...this.options,duration:r,times:i,ease:a});return c.startTime=u??this.calcStartTime(),this.pendingTimeline?(rw(c,this.pendingTimeline),this.pendingTimeline=void 0):c.onfinish=()=>{const{onComplete:d}=this.options;o.set(Cl(t,this.options,n)),d&&d(),this.cancel(),this.resolveFinishedPromise()},{animation:c,duration:r,times:i,type:s,ease:a,keyframes:t}}get duration(){const{resolved:t}=this;if(!t)return 0;const{duration:n}=t;return Cn(n)}get time(){const{resolved:t}=this;if(!t)return 0;const{animation:n}=t;return Cn(n.currentTime||0)}set time(t){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.currentTime=En(t)}get speed(){const{resolved:t}=this;if(!t)return 1;const{animation:n}=t;return n.playbackRate}set speed(t){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.playbackRate=t}get state(){const{resolved:t}=this;if(!t)return"idle";const{animation:n}=t;return n.playState}get startTime(){const{resolved:t}=this;if(!t)return null;const{animation:n}=t;return n.startTime}attachTimeline(t){if(!this._resolved)this.pendingTimeline=t;else{const{resolved:n}=this;if(!n)return _t;const{animation:r}=n;rw(r,t)}return _t}play(){if(this.isStopped)return;const{resolved:t}=this;if(!t)return;const{animation:n}=t;n.playState==="finished"&&this.updateFinishedPromise(),n.play()}pause(){const{resolved:t}=this;if(!t)return;const{animation:n}=t;n.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:t}=this;if(!t)return;const{animation:n,keyframes:r,duration:i,type:a,ease:s,times:o}=t;if(n.playState==="idle"||n.playState==="finished")return;if(this.time){const{motionValue:u,onUpdate:c,onComplete:d,element:f,...m}=this.options,v=new Ly({...m,keyframes:r,duration:i,type:a,ease:s,times:o,isGenerator:!0}),p=En(this.time);u.setWithVelocity(v.sample(p-Zo).value,v.sample(p).value,Zo)}const{onStop:l}=this.options;l&&l(),this.cancel()}complete(){const{resolved:t}=this;t&&t.animation.finish()}cancel(){const{resolved:t}=this;t&&t.animation.cancel()}static supports(t){const{motionValue:n,name:r,repeatDelay:i,repeatType:a,damping:s,type:o}=t;if(!n||!n.owner||!(n.owner.current instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:u}=n.owner.getProps();return YO()&&r&&WO.has(r)&&!l&&!u&&!i&&a!=="mirror"&&s!==0&&o!=="inertia"}}const e2={type:"spring",stiffness:500,damping:25,restSpeed:10},t2=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),n2={type:"keyframes",duration:.8},r2={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},i2=(e,{keyframes:t})=>t.length>2?n2:Gr.has(e)?e.startsWith("scale")?t2(t[1]):e2:r2;function a2({when:e,delay:t,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:a,repeatType:s,repeatDelay:o,from:l,elapsed:u,...c}){return!!Object.keys(c).length}const qy=(e,t,n,r={},i,a)=>s=>{const o=_y(r,e)||{},l=o.delay||r.delay||0;let{elapsed:u=0}=r;u=u-En(l);let c={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:t.getVelocity(),...o,delay:-u,onUpdate:f=>{t.set(f),o.onUpdate&&o.onUpdate(f)},onComplete:()=>{s(),o.onComplete&&o.onComplete()},name:e,motionValue:t,element:a?void 0:i};a2(o)||(c={...c,...i2(e,c)}),c.duration&&(c.duration=En(c.duration)),c.repeatDelay&&(c.repeatDelay=En(c.repeatDelay)),c.from!==void 0&&(c.keyframes[0]=c.from);let d=!1;if((c.type===!1||c.duration===0&&!c.repeatDelay)&&(c.duration=0,c.delay===0&&(d=!0)),d&&!a&&t.get()!==void 0){const f=Cl(c.keyframes,o);if(f!==void 0)return xe.update(()=>{c.onUpdate(f),c.onComplete()}),new kD([])}return!a&&ww.supports(c)?new ww(c):new Ly(c)};function s2({protectedKeys:e,needsAnimating:t},n){const r=e.hasOwnProperty(n)&&t[n]!==!0;return t[n]=!1,r}function tM(e,t,{delay:n=0,transitionOverride:r,type:i}={}){var a;let{transition:s=e.getDefaultTransition(),transitionEnd:o,...l}=t;r&&(s=r);const u=[],c=i&&e.animationState&&e.animationState.getState()[i];for(const d in l){const f=e.getValue(d,(a=e.latestValues[d])!==null&&a!==void 0?a:null),m=l[d];if(m===void 0||c&&s2(c,d))continue;const v={delay:n,..._y(s||{},d)};let p=!1;if(window.MotionHandoffAnimation){const y=ET(e);if(y){const g=window.MotionHandoffAnimation(y,d,xe);g!==null&&(v.startTime=g,p=!0)}}Km(e,d),f.start(qy(d,f,m,e.shouldReduceMotion&&_T.has(d)?{type:!1}:v,e,p));const b=f.animation;b&&u.push(b)}return o&&Promise.all(u).then(()=>{xe.update(()=>{o&&qD(e,o)})}),u}function tv(e,t,n={}){var r;const i=El(e,t,n.type==="exit"?(r=e.presenceContext)===null||r===void 0?void 0:r.custom:void 0);let{transition:a=e.getDefaultTransition()||{}}=i||{};n.transitionOverride&&(a=n.transitionOverride);const s=i?()=>Promise.all(tM(e,i,n)):()=>Promise.resolve(),o=e.variantChildren&&e.variantChildren.size?(u=0)=>{const{delayChildren:c=0,staggerChildren:d,staggerDirection:f}=a;return o2(e,t,c+u,d,f,n)}:()=>Promise.resolve(),{when:l}=a;if(l){const[u,c]=l==="beforeChildren"?[s,o]:[o,s];return u().then(()=>c())}else return Promise.all([s(),o(n.delay)])}function o2(e,t,n=0,r=0,i=1,a){const s=[],o=(e.variantChildren.size-1)*r,l=i===1?(u=0)=>u*r:(u=0)=>o-u*r;return Array.from(e.variantChildren).sort(l2).forEach((u,c)=>{u.notify("AnimationStart",t),s.push(tv(u,t,{...a,delay:n+l(c)}).then(()=>u.notify("AnimationComplete",t)))}),Promise.all(s)}function l2(e,t){return e.sortNodePosition(t)}function u2(e,t,n={}){e.notify("AnimationStart",t);let r;if(Array.isArray(t)){const i=t.map(a=>tv(e,a,n));r=Promise.all(i)}else if(typeof t=="string")r=tv(e,t,n);else{const i=typeof t=="function"?El(e,t,n.custom):t;r=Promise.all(tM(e,i,n))}return r.then(()=>{e.notify("AnimationComplete",t)})}const c2=dy.length;function nM(e){if(!e)return;if(!e.isControllingVariants){const n=e.parent?nM(e.parent)||{}:{};return e.props.initial!==void 0&&(n.initial=e.props.initial),n}const t={};for(let n=0;n<c2;n++){const r=dy[n],i=e.props[r];(os(i)||i===!1)&&(t[r]=i)}return t}const d2=[...cy].reverse(),f2=cy.length;function h2(e){return t=>Promise.all(t.map(({animation:n,options:r})=>u2(e,n,r)))}function p2(e){let t=h2(e),n=bw(),r=!0;const i=l=>(u,c)=>{var d;const f=El(e,c,l==="exit"?(d=e.presenceContext)===null||d===void 0?void 0:d.custom:void 0);if(f){const{transition:m,transitionEnd:v,...p}=f;u={...u,...p,...v}}return u};function a(l){t=l(e)}function s(l){const{props:u}=e,c=nM(e.parent)||{},d=[],f=new Set;let m={},v=1/0;for(let b=0;b<f2;b++){const y=d2[b],g=n[y],x=u[y]!==void 0?u[y]:c[y],_=os(x),E=y===l?g.isActive:null;E===!1&&(v=b);let T=x===c[y]&&x!==u[y]&&_;if(T&&r&&e.manuallyAnimateOnMount&&(T=!1),g.protectedKeys={...m},!g.isActive&&E===null||!x&&!g.prevProp||_l(x)||typeof x=="boolean")continue;const M=m2(g.prevProp,x);let C=M||y===l&&g.isActive&&!T&&_||b>v&&_,j=!1;const N=Array.isArray(x)?x:[x];let A=N.reduce(i(y),{});E===!1&&(A={});const{prevResolvedValues:I={}}=g,L={...I,...A},K=ie=>{C=!0,f.has(ie)&&(j=!0,f.delete(ie)),g.needsAnimating[ie]=!0;const R=e.getValue(ie);R&&(R.liveStyle=!1)};for(const ie in L){const R=A[ie],q=I[ie];if(m.hasOwnProperty(ie))continue;let G=!1;Gm(R)&&Gm(q)?G=!mT(R,q):G=R!==q,G?R!=null?K(ie):f.add(ie):R!==void 0&&f.has(ie)?K(ie):g.protectedKeys[ie]=!0}g.prevProp=x,g.prevResolvedValues=A,g.isActive&&(m={...m,...A}),r&&e.blockInitialAnimation&&(C=!1),C&&(!(T&&M)||j)&&d.push(...N.map(ie=>({animation:ie,options:{type:y}})))}if(f.size){const b={};f.forEach(y=>{const g=e.getBaseTarget(y),x=e.getValue(y);x&&(x.liveStyle=!0),b[y]=g??null}),d.push({animation:b})}let p=!!d.length;return r&&(u.initial===!1||u.initial===u.animate)&&!e.manuallyAnimateOnMount&&(p=!1),r=!1,p?t(d):Promise.resolve()}function o(l,u){var c;if(n[l].isActive===u)return Promise.resolve();(c=e.variantChildren)===null||c===void 0||c.forEach(f=>{var m;return(m=f.animationState)===null||m===void 0?void 0:m.setActive(l,u)}),n[l].isActive=u;const d=s(l);for(const f in n)n[f].protectedKeys={};return d}return{animateChanges:s,setActive:o,setAnimateFunction:a,getState:()=>n,reset:()=>{n=bw(),r=!0}}}function m2(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!mT(t,e):!1}function kr(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function bw(){return{animate:kr(!0),whileInView:kr(),whileHover:kr(),whileTap:kr(),whileDrag:kr(),whileFocus:kr(),exit:kr()}}class vr{constructor(t){this.isMounted=!1,this.node=t}update(){}}class v2 extends vr{constructor(t){super(t),t.animationState||(t.animationState=p2(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();_l(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:n}=this.node.prevProps||{};t!==n&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)===null||t===void 0||t.call(this)}}let y2=0;class g2 extends vr{constructor(){super(...arguments),this.id=y2++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===r)return;const i=this.node.animationState.setActive("exit",!t);n&&!t&&i.then(()=>n(this.id))}mount(){const{register:t}=this.node.presenceContext||{};t&&(this.unmount=t(this.id))}unmount(){}}const w2={animation:{Feature:v2},exit:{Feature:g2}};function ds(e,t,n,r={passive:!0}){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n)}function xs(e){return{point:{x:e.pageX,y:e.pageY}}}const b2=e=>t=>Cy(t)&&e(t,xs(t));function $a(e,t,n,r){return ds(e,t,b2(n),r)}const xw=(e,t)=>Math.abs(e-t);function x2(e,t){const n=xw(e.x,t.x),r=xw(e.y,t.y);return Math.sqrt(n**2+r**2)}class rM{constructor(t,n,{transformPagePoint:r,contextWindow:i,dragSnapToOrigin:a=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const d=Qu(this.lastMoveEventInfo,this.history),f=this.startEvent!==null,m=x2(d.offset,{x:0,y:0})>=3;if(!f&&!m)return;const{point:v}=d,{timestamp:p}=Qe;this.history.push({...v,timestamp:p});const{onStart:b,onMove:y}=this.handlers;f||(b&&b(this.lastMoveEvent,d),this.startEvent=this.lastMoveEvent),y&&y(this.lastMoveEvent,d)},this.handlePointerMove=(d,f)=>{this.lastMoveEvent=d,this.lastMoveEventInfo=Yu(f,this.transformPagePoint),xe.update(this.updatePoint,!0)},this.handlePointerUp=(d,f)=>{this.end();const{onEnd:m,onSessionEnd:v,resumeAnimation:p}=this.handlers;if(this.dragSnapToOrigin&&p&&p(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const b=Qu(d.type==="pointercancel"?this.lastMoveEventInfo:Yu(f,this.transformPagePoint),this.history);this.startEvent&&m&&m(d,b),v&&v(d,b)},!Cy(t))return;this.dragSnapToOrigin=a,this.handlers=n,this.transformPagePoint=r,this.contextWindow=i||window;const s=xs(t),o=Yu(s,this.transformPagePoint),{point:l}=o,{timestamp:u}=Qe;this.history=[{...l,timestamp:u}];const{onSessionStart:c}=n;c&&c(t,Qu(o,this.history)),this.removeListeners=bs($a(this.contextWindow,"pointermove",this.handlePointerMove),$a(this.contextWindow,"pointerup",this.handlePointerUp),$a(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),cr(this.updatePoint)}}function Yu(e,t){return t?{point:t(e.point)}:e}function Sw(e,t){return{x:e.x-t.x,y:e.y-t.y}}function Qu({point:e},t){return{point:e,delta:Sw(e,iM(t)),offset:Sw(e,S2(t)),velocity:_2(t,.1)}}function S2(e){return e[0]}function iM(e){return e[e.length-1]}function _2(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,r=null;const i=iM(e);for(;n>=0&&(r=e[n],!(i.timestamp-r.timestamp>En(t)));)n--;if(!r)return{x:0,y:0};const a=Cn(i.timestamp-r.timestamp);if(a===0)return{x:0,y:0};const s={x:(i.x-r.x)/a,y:(i.y-r.y)/a};return s.x===1/0&&(s.x=0),s.y===1/0&&(s.y=0),s}const aM=1e-4,k2=1-aM,E2=1+aM,sM=.01,C2=0-sM,T2=0+sM;function Et(e){return e.max-e.min}function M2(e,t,n){return Math.abs(e-t)<=n}function _w(e,t,n,r=.5){e.origin=r,e.originPoint=Te(t.min,t.max,e.origin),e.scale=Et(n)/Et(t),e.translate=Te(n.min,n.max,e.origin)-e.originPoint,(e.scale>=k2&&e.scale<=E2||isNaN(e.scale))&&(e.scale=1),(e.translate>=C2&&e.translate<=T2||isNaN(e.translate))&&(e.translate=0)}function Ba(e,t,n,r){_w(e.x,t.x,n.x,r?r.originX:void 0),_w(e.y,t.y,n.y,r?r.originY:void 0)}function kw(e,t,n){e.min=n.min+t.min,e.max=e.min+Et(t)}function j2(e,t,n){kw(e.x,t.x,n.x),kw(e.y,t.y,n.y)}function Ew(e,t,n){e.min=t.min-n.min,e.max=e.min+Et(t)}function za(e,t,n){Ew(e.x,t.x,n.x),Ew(e.y,t.y,n.y)}function P2(e,{min:t,max:n},r){return t!==void 0&&e<t?e=r?Te(t,e,r.min):Math.max(e,t):n!==void 0&&e>n&&(e=r?Te(n,e,r.max):Math.min(e,n)),e}function Cw(e,t,n){return{min:t!==void 0?e.min+t:void 0,max:n!==void 0?e.max+n-(e.max-e.min):void 0}}function N2(e,{top:t,left:n,bottom:r,right:i}){return{x:Cw(e.x,n,i),y:Cw(e.y,t,r)}}function Tw(e,t){let n=t.min-e.min,r=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,r]=[r,n]),{min:n,max:r}}function A2(e,t){return{x:Tw(e.x,t.x),y:Tw(e.y,t.y)}}function R2(e,t){let n=.5;const r=Et(e),i=Et(t);return i>r?n=$i(t.min,t.max-r,e.min):r>i&&(n=$i(e.min,e.max-i,t.min)),Nn(0,1,n)}function I2(e,t){const n={};return t.min!==void 0&&(n.min=t.min-e.min),t.max!==void 0&&(n.max=t.max-e.min),n}const nv=.35;function D2(e=nv){return e===!1?e=0:e===!0&&(e=nv),{x:Mw(e,"left","right"),y:Mw(e,"top","bottom")}}function Mw(e,t,n){return{min:jw(e,t),max:jw(e,n)}}function jw(e,t){return typeof e=="number"?e:e[t]||0}const Pw=()=>({translate:0,scale:1,origin:0,originPoint:0}),Ei=()=>({x:Pw(),y:Pw()}),Nw=()=>({min:0,max:0}),Oe=()=>({x:Nw(),y:Nw()});function At(e){return[e("x"),e("y")]}function oM({top:e,left:t,right:n,bottom:r}){return{x:{min:t,max:n},y:{min:e,max:r}}}function O2({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function L2(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),r=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function Xu(e){return e===void 0||e===1}function rv({scale:e,scaleX:t,scaleY:n}){return!Xu(e)||!Xu(t)||!Xu(n)}function Tr(e){return rv(e)||lM(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function lM(e){return Aw(e.x)||Aw(e.y)}function Aw(e){return e&&e!=="0%"}function el(e,t,n){const r=e-n,i=t*r;return n+i}function Rw(e,t,n,r,i){return i!==void 0&&(e=el(e,i,r)),el(e,n,r)+t}function iv(e,t=0,n=1,r,i){e.min=Rw(e.min,t,n,r,i),e.max=Rw(e.max,t,n,r,i)}function uM(e,{x:t,y:n}){iv(e.x,t.translate,t.scale,t.originPoint),iv(e.y,n.translate,n.scale,n.originPoint)}const Iw=.999999999999,Dw=1.0000000000001;function q2(e,t,n,r=!1){const i=n.length;if(!i)return;t.x=t.y=1;let a,s;for(let o=0;o<i;o++){a=n[o],s=a.projectionDelta;const{visualElement:l}=a.options;l&&l.props.style&&l.props.style.display==="contents"||(r&&a.options.layoutScroll&&a.scroll&&a!==a.root&&Ti(e,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),s&&(t.x*=s.x.scale,t.y*=s.y.scale,uM(e,s)),r&&Tr(a.latestValues)&&Ti(e,a.latestValues))}t.x<Dw&&t.x>Iw&&(t.x=1),t.y<Dw&&t.y>Iw&&(t.y=1)}function Ci(e,t){e.min=e.min+t,e.max=e.max+t}function Ow(e,t,n,r,i=.5){const a=Te(e.min,e.max,i);iv(e,t,n,a,r)}function Ti(e,t){Ow(e.x,t.x,t.scaleX,t.scale,t.originX),Ow(e.y,t.y,t.scaleY,t.scale,t.originY)}function cM(e,t){return oM(L2(e.getBoundingClientRect(),t))}function F2(e,t,n){const r=cM(e,n),{scroll:i}=t;return i&&(Ci(r.x,i.offset.x),Ci(r.y,i.offset.y)),r}const dM=({current:e})=>e?e.ownerDocument.defaultView:null,V2=new WeakMap;class $2{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Oe(),this.visualElement=t}start(t,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const i=c=>{const{dragSnapToOrigin:d}=this.getProps();d?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(xs(c).point)},a=(c,d)=>{const{drag:f,dragPropagation:m,onDragStart:v}=this.getProps();if(f&&!m&&(this.openDragLock&&this.openDragLock(),this.openDragLock=RD(f),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),At(b=>{let y=this.getAxisMotionValue(b).get()||0;if(un.test(y)){const{projection:g}=this.visualElement;if(g&&g.layout){const x=g.layout.layoutBox[b];x&&(y=Et(x)*(parseFloat(y)/100))}}this.originPoint[b]=y}),v&&xe.postRender(()=>v(c,d)),Km(this.visualElement,"transform");const{animationState:p}=this.visualElement;p&&p.setActive("whileDrag",!0)},s=(c,d)=>{const{dragPropagation:f,dragDirectionLock:m,onDirectionLock:v,onDrag:p}=this.getProps();if(!f&&!this.openDragLock)return;const{offset:b}=d;if(m&&this.currentDirection===null){this.currentDirection=B2(b),this.currentDirection!==null&&v&&v(this.currentDirection);return}this.updateAxis("x",d.point,b),this.updateAxis("y",d.point,b),this.visualElement.render(),p&&p(c,d)},o=(c,d)=>this.stop(c,d),l=()=>At(c=>{var d;return this.getAnimationState(c)==="paused"&&((d=this.getAxisMotionValue(c).animation)===null||d===void 0?void 0:d.play())}),{dragSnapToOrigin:u}=this.getProps();this.panSession=new rM(t,{onSessionStart:i,onStart:a,onMove:s,onSessionEnd:o,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,contextWindow:dM(this.visualElement)})}stop(t,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:i}=n;this.startAnimation(i);const{onDragEnd:a}=this.getProps();a&&xe.postRender(()=>a(t,n))}cancel(){this.isDragging=!1;const{projection:t,animationState:n}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(t,n,r){const{drag:i}=this.getProps();if(!r||!ro(t,i,this.currentDirection))return;const a=this.getAxisMotionValue(t);let s=this.originPoint[t]+r[t];this.constraints&&this.constraints[t]&&(s=P2(s,this.constraints[t],this.elastic[t])),a.set(s)}resolveConstraints(){var t;const{dragConstraints:n,dragElastic:r}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(t=this.visualElement.projection)===null||t===void 0?void 0:t.layout,a=this.constraints;n&&_i(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&i?this.constraints=N2(i.layoutBox,n):this.constraints=!1,this.elastic=D2(r),a!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&At(s=>{this.constraints!==!1&&this.getAxisMotionValue(s)&&(this.constraints[s]=I2(i.layoutBox[s],this.constraints[s]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:n}=this.getProps();if(!t||!_i(t))return!1;const r=t.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const a=F2(r,i.root,this.visualElement.getTransformPagePoint());let s=A2(i.layout.layoutBox,a);if(n){const o=n(O2(s));this.hasMutatedConstraints=!!o,o&&(s=oM(o))}return s}startAnimation(t){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:a,dragSnapToOrigin:s,onDragTransitionEnd:o}=this.getProps(),l=this.constraints||{},u=At(c=>{if(!ro(c,n,this.currentDirection))return;let d=l&&l[c]||{};s&&(d={min:0,max:0});const f=i?200:1e6,m=i?40:1e7,v={type:"inertia",velocity:r?t[c]:0,bounceStiffness:f,bounceDamping:m,timeConstant:750,restDelta:1,restSpeed:10,...a,...d};return this.startAxisValueAnimation(c,v)});return Promise.all(u).then(o)}startAxisValueAnimation(t,n){const r=this.getAxisMotionValue(t);return Km(this.visualElement,t),r.start(qy(t,r,0,n,this.visualElement,!1))}stopAnimation(){At(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){At(t=>{var n;return(n=this.getAxisMotionValue(t).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(t){var n;return(n=this.getAxisMotionValue(t).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(t){const n=`_drag${t.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(t,(r.initial?r.initial[t]:void 0)||0)}snapToCursor(t){At(n=>{const{drag:r}=this.getProps();if(!ro(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,a=this.getAxisMotionValue(n);if(i&&i.layout){const{min:s,max:o}=i.layout.layoutBox[n];a.set(t[n]-Te(s,o,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!_i(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};At(s=>{const o=this.getAxisMotionValue(s);if(o&&this.constraints!==!1){const l=o.get();i[s]=R2({min:l,max:l},this.constraints[s])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),At(s=>{if(!ro(s,t,null))return;const o=this.getAxisMotionValue(s),{min:l,max:u}=this.constraints[s];o.set(Te(l,u,i[s]))})}addListeners(){if(!this.visualElement.current)return;V2.set(this.visualElement,this);const t=this.visualElement.current,n=$a(t,"pointerdown",l=>{const{drag:u,dragListener:c=!0}=this.getProps();u&&c&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();_i(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,a=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),xe.read(r);const s=ds(window,"resize",()=>this.scalePositionWithinConstraints()),o=i.addEventListener("didUpdate",({delta:l,hasLayoutChanged:u})=>{this.isDragging&&u&&(At(c=>{const d=this.getAxisMotionValue(c);d&&(this.originPoint[c]+=l[c].translate,d.set(d.get()+l[c].translate))}),this.visualElement.render())});return()=>{s(),n(),a(),o&&o()}}getProps(){const t=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:a=!1,dragElastic:s=nv,dragMomentum:o=!0}=t;return{...t,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:a,dragElastic:s,dragMomentum:o}}}function ro(e,t,n){return(t===!0||t===e)&&(n===null||n===e)}function B2(e,t=10){let n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}class z2 extends vr{constructor(t){super(t),this.removeGroupControls=_t,this.removeListeners=_t,this.controls=new $2(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||_t}unmount(){this.removeGroupControls(),this.removeListeners()}}const Lw=e=>(t,n)=>{e&&xe.postRender(()=>e(t,n))};class U2 extends vr{constructor(){super(...arguments),this.removePointerDownListener=_t}onPointerDown(t){this.session=new rM(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:dM(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:Lw(t),onStart:Lw(n),onMove:r,onEnd:(a,s)=>{delete this.session,i&&xe.postRender(()=>i(a,s))}}}mount(){this.removePointerDownListener=$a(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const _o={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function qw(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const ya={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(H.test(e))e=parseFloat(e);else return e;const n=qw(e,t.target.x),r=qw(e,t.target.y);return`${n}% ${r}%`}},G2={correct:(e,{treeScale:t,projectionDelta:n})=>{const r=e,i=dr.parse(e);if(i.length>5)return r;const a=dr.createTransformer(e),s=typeof i[0]!="number"?1:0,o=n.x.scale*t.x,l=n.y.scale*t.y;i[0+s]/=o,i[1+s]/=l;const u=Te(o,l,.5);return typeof i[2+s]=="number"&&(i[2+s]/=u),typeof i[3+s]=="number"&&(i[3+s]/=u),a(i)}};class H2 extends S.Component{componentDidMount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:a}=t;fD(W2),a&&(n.group&&n.group.add(a),r&&r.register&&i&&r.register(a),a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,onExitComplete:()=>this.safeToRemove()})),_o.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:n,visualElement:r,drag:i,isPresent:a}=this.props,s=r.projection;return s&&(s.isPresent=a,i||t.layoutDependency!==n||n===void 0?s.willUpdate():this.safeToRemove(),t.isPresent!==a&&(a?s.promote():s.relegate()||xe.postRender(()=>{const o=s.getStack();(!o||!o.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),hy.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=t;i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function fM(e){const[t,n]=TI(),r=S.useContext(KC);return h.jsx(H2,{...e,layoutGroup:r,switchLayoutGroup:S.useContext(nT),isPresent:t,safeToRemove:n})}const W2={borderRadius:{...ya,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:ya,borderTopRightRadius:ya,borderBottomLeftRadius:ya,borderBottomRightRadius:ya,boxShadow:G2};function K2(e,t,n){const r=it(e)?e:us(e);return r.start(qy("",r,t,n)),r.animation}function Y2(e){return e instanceof SVGElement&&e.tagName!=="svg"}const Q2=(e,t)=>e.depth-t.depth;class X2{constructor(){this.children=[],this.isDirty=!1}add(t){Ty(this.children,t),this.isDirty=!0}remove(t){My(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(Q2),this.isDirty=!1,this.children.forEach(t)}}function J2(e,t){const n=cn.now(),r=({timestamp:i})=>{const a=i-n;a>=t&&(cr(r),e(a-t))};return xe.read(r,!0),()=>cr(r)}const hM=["TopLeft","TopRight","BottomLeft","BottomRight"],Z2=hM.length,Fw=e=>typeof e=="string"?parseFloat(e):e,Vw=e=>typeof e=="number"||H.test(e);function eL(e,t,n,r,i,a){i?(e.opacity=Te(0,n.opacity!==void 0?n.opacity:1,tL(r)),e.opacityExit=Te(t.opacity!==void 0?t.opacity:1,0,nL(r))):a&&(e.opacity=Te(t.opacity!==void 0?t.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let s=0;s<Z2;s++){const o=`border${hM[s]}Radius`;let l=$w(t,o),u=$w(n,o);if(l===void 0&&u===void 0)continue;l||(l=0),u||(u=0),l===0||u===0||Vw(l)===Vw(u)?(e[o]=Math.max(Te(Fw(l),Fw(u),r),0),(un.test(u)||un.test(l))&&(e[o]+="%")):e[o]=u}(t.rotate||n.rotate)&&(e.rotate=Te(t.rotate||0,n.rotate||0,r))}function $w(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const tL=pM(0,.5,AT),nL=pM(.5,.95,_t);function pM(e,t,n){return r=>r<e?0:r>t?1:n($i(e,t,r))}function Bw(e,t){e.min=t.min,e.max=t.max}function Nt(e,t){Bw(e.x,t.x),Bw(e.y,t.y)}function zw(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function Uw(e,t,n,r,i){return e-=t,e=el(e,1/n,r),i!==void 0&&(e=el(e,1/i,r)),e}function rL(e,t=0,n=1,r=.5,i,a=e,s=e){if(un.test(t)&&(t=parseFloat(t),t=Te(s.min,s.max,t/100)-s.min),typeof t!="number")return;let o=Te(a.min,a.max,r);e===a&&(o-=t),e.min=Uw(e.min,t,n,o,i),e.max=Uw(e.max,t,n,o,i)}function Gw(e,t,[n,r,i],a,s){rL(e,t[n],t[r],t[i],t.scale,a,s)}const iL=["x","scaleX","originX"],aL=["y","scaleY","originY"];function Hw(e,t,n,r){Gw(e.x,t,iL,n?n.x:void 0,r?r.x:void 0),Gw(e.y,t,aL,n?n.y:void 0,r?r.y:void 0)}function Ww(e){return e.translate===0&&e.scale===1}function mM(e){return Ww(e.x)&&Ww(e.y)}function Kw(e,t){return e.min===t.min&&e.max===t.max}function sL(e,t){return Kw(e.x,t.x)&&Kw(e.y,t.y)}function Yw(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function vM(e,t){return Yw(e.x,t.x)&&Yw(e.y,t.y)}function Qw(e){return Et(e.x)/Et(e.y)}function Xw(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class oL{constructor(){this.members=[]}add(t){Ty(this.members,t),t.scheduleRender()}remove(t){if(My(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(t){const n=this.members.findIndex(i=>t===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const a=this.members[i];if(a.isPresent!==!1){r=a;break}}return r?(this.promote(r),!0):!1}promote(t,n){const r=this.lead;if(t!==r&&(this.prevLead=r,this.lead=t,t.show(),r)){r.instance&&r.scheduleRender(),t.scheduleRender(),t.resumeFrom=r,n&&(t.resumeFrom.preserveOpacity=!0),r.snapshot&&(t.snapshot=r.snapshot,t.snapshot.latestValues=r.animationValues||r.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:i}=t.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:n,resumingFrom:r}=t;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function lL(e,t,n){let r="";const i=e.x.translate/t.x,a=e.y.translate/t.y,s=(n==null?void 0:n.z)||0;if((i||a||s)&&(r=`translate3d(${i}px, ${a}px, ${s}px) `),(t.x!==1||t.y!==1)&&(r+=`scale(${1/t.x}, ${1/t.y}) `),n){const{transformPerspective:u,rotate:c,rotateX:d,rotateY:f,skewX:m,skewY:v}=n;u&&(r=`perspective(${u}px) ${r}`),c&&(r+=`rotate(${c}deg) `),d&&(r+=`rotateX(${d}deg) `),f&&(r+=`rotateY(${f}deg) `),m&&(r+=`skewX(${m}deg) `),v&&(r+=`skewY(${v}deg) `)}const o=e.x.scale*t.x,l=e.y.scale*t.y;return(o!==1||l!==1)&&(r+=`scale(${o}, ${l})`),r||"none"}const Mr={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},ka=typeof window<"u"&&window.MotionDebug!==void 0,Ju=["","X","Y","Z"],uL={visibility:"hidden"},Jw=1e3;let cL=0;function Zu(e,t,n,r){const{latestValues:i}=t;i[e]&&(n[e]=i[e],t.setStaticValue(e,0),r&&(r[e]=0))}function yM(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const n=ET(t);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:a}=e.options;window.MotionCancelOptimisedAnimation(n,"transform",xe,!(i||a))}const{parent:r}=e;r&&!r.hasCheckedOptimisedAppear&&yM(r)}function gM({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(s={},o=t==null?void 0:t()){this.id=cL++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,ka&&(Mr.totalNodes=Mr.resolvedTargetDeltas=Mr.recalculatedProjection=0),this.nodes.forEach(hL),this.nodes.forEach(gL),this.nodes.forEach(wL),this.nodes.forEach(pL),ka&&window.MotionDebug.record(Mr)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=s,this.root=o?o.root||o:this,this.path=o?[...o.path,o]:[],this.parent=o,this.depth=o?o.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new X2)}addEventListener(s,o){return this.eventHandlers.has(s)||this.eventHandlers.set(s,new jy),this.eventHandlers.get(s).add(o)}notifyListeners(s,...o){const l=this.eventHandlers.get(s);l&&l.notify(...o)}hasListeners(s){return this.eventHandlers.has(s)}mount(s,o=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=Y2(s),this.instance=s;const{layoutId:l,layout:u,visualElement:c}=this.options;if(c&&!c.current&&c.mount(s),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),o&&(u||l)&&(this.isLayoutDirty=!0),e){let d;const f=()=>this.root.updateBlockedByResize=!1;e(s,()=>{this.root.updateBlockedByResize=!0,d&&d(),d=J2(f,250),_o.hasAnimatedSinceResize&&(_o.hasAnimatedSinceResize=!1,this.nodes.forEach(eb))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&c&&(l||u)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:f,hasRelativeTargetChanged:m,layout:v})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const p=this.options.transition||c.getDefaultTransition()||kL,{onLayoutAnimationStart:b,onLayoutAnimationComplete:y}=c.getProps(),g=!this.targetLayout||!vM(this.targetLayout,v)||m,x=!f&&m;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||x||f&&(g||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(d,x);const _={..._y(p,"layout"),onPlay:b,onComplete:y};(c.shouldReduceMotion||this.options.layoutRoot)&&(_.delay=0,_.type=!1),this.startAnimation(_)}else f||eb(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=v})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const s=this.getStack();s&&s.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,cr(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(bL),this.animationId++)}getTransformTemplate(){const{visualElement:s}=this.options;return s&&s.getProps().transformTemplate}willUpdate(s=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&yM(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let c=0;c<this.path.length;c++){const d=this.path[c];d.shouldResetTransform=!0,d.updateScroll("snapshot"),d.options.layoutRoot&&d.willUpdate(!1)}const{layoutId:o,layout:l}=this.options;if(o===void 0&&!l)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),s&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Zw);return}this.isUpdating||this.nodes.forEach(vL),this.isUpdating=!1,this.nodes.forEach(yL),this.nodes.forEach(dL),this.nodes.forEach(fL),this.clearAllSnapshots();const o=cn.now();Qe.delta=Nn(0,1e3/60,o-Qe.timestamp),Qe.timestamp=o,Qe.isProcessing=!0,zu.update.process(Qe),zu.preRender.process(Qe),zu.render.process(Qe),Qe.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,hy.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(mL),this.sharedNodes.forEach(xL)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,xe.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){xe.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const s=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Oe(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:o}=this.options;o&&o.notify("LayoutMeasure",this.layout.layoutBox,s?s.layoutBox:void 0)}updateScroll(s="measure"){let o=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===s&&(o=!1),o){const l=r(this.instance);this.scroll={animationId:this.root.animationId,phase:s,isRoot:l,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!i)return;const s=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,o=this.projectionDelta&&!mM(this.projectionDelta),l=this.getTransformTemplate(),u=l?l(this.latestValues,""):void 0,c=u!==this.prevTransformTemplateValue;s&&(o||Tr(this.latestValues)||c)&&(i(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(s=!0){const o=this.measurePageBox();let l=this.removeElementScroll(o);return s&&(l=this.removeTransform(l)),EL(l),{animationId:this.root.animationId,measuredBox:o,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var s;const{visualElement:o}=this.options;if(!o)return Oe();const l=o.measureViewportBox();if(!(((s=this.scroll)===null||s===void 0?void 0:s.wasRoot)||this.path.some(CL))){const{scroll:c}=this.root;c&&(Ci(l.x,c.offset.x),Ci(l.y,c.offset.y))}return l}removeElementScroll(s){var o;const l=Oe();if(Nt(l,s),!((o=this.scroll)===null||o===void 0)&&o.wasRoot)return l;for(let u=0;u<this.path.length;u++){const c=this.path[u],{scroll:d,options:f}=c;c!==this.root&&d&&f.layoutScroll&&(d.wasRoot&&Nt(l,s),Ci(l.x,d.offset.x),Ci(l.y,d.offset.y))}return l}applyTransform(s,o=!1){const l=Oe();Nt(l,s);for(let u=0;u<this.path.length;u++){const c=this.path[u];!o&&c.options.layoutScroll&&c.scroll&&c!==c.root&&Ti(l,{x:-c.scroll.offset.x,y:-c.scroll.offset.y}),Tr(c.latestValues)&&Ti(l,c.latestValues)}return Tr(this.latestValues)&&Ti(l,this.latestValues),l}removeTransform(s){const o=Oe();Nt(o,s);for(let l=0;l<this.path.length;l++){const u=this.path[l];if(!u.instance||!Tr(u.latestValues))continue;rv(u.latestValues)&&u.updateSnapshot();const c=Oe(),d=u.measurePageBox();Nt(c,d),Hw(o,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,c)}return Tr(this.latestValues)&&Hw(o,this.latestValues),o}setTargetDelta(s){this.targetDelta=s,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(s){this.options={...this.options,...s,crossfade:s.crossfade!==void 0?s.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Qe.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(s=!1){var o;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==l;if(!(s||u&&this.isSharedProjectionDirty||this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:d,layoutId:f}=this.options;if(!(!this.layout||!(d||f))){if(this.resolvedRelativeTargetAt=Qe.timestamp,!this.targetDelta&&!this.relativeTarget){const m=this.getClosestProjectingParent();m&&m.layout&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Oe(),this.relativeTargetOrigin=Oe(),za(this.relativeTargetOrigin,this.layout.layoutBox,m.layout.layoutBox),Nt(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=Oe(),this.targetWithTransforms=Oe()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),j2(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Nt(this.target,this.layout.layoutBox),uM(this.target,this.targetDelta)):Nt(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const m=this.getClosestProjectingParent();m&&!!m.resumingFrom==!!this.resumingFrom&&!m.options.layoutScroll&&m.target&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Oe(),this.relativeTargetOrigin=Oe(),za(this.relativeTargetOrigin,this.target,m.target),Nt(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}ka&&Mr.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||rv(this.parent.latestValues)||lM(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var s;const o=this.getLead(),l=!!this.resumingFrom||this!==o;let u=!0;if((this.isProjectionDirty||!((s=this.parent)===null||s===void 0)&&s.isProjectionDirty)&&(u=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===Qe.timestamp&&(u=!1),u)return;const{layout:c,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(c||d))return;Nt(this.layoutCorrected,this.layout.layoutBox);const f=this.treeScale.x,m=this.treeScale.y;q2(this.layoutCorrected,this.treeScale,this.path,l),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=Oe());const{target:v}=o;if(!v){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(zw(this.prevProjectionDelta.x,this.projectionDelta.x),zw(this.prevProjectionDelta.y,this.projectionDelta.y)),Ba(this.projectionDelta,this.layoutCorrected,v,this.latestValues),(this.treeScale.x!==f||this.treeScale.y!==m||!Xw(this.projectionDelta.x,this.prevProjectionDelta.x)||!Xw(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",v)),ka&&Mr.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(s=!0){var o;if((o=this.options.visualElement)===null||o===void 0||o.scheduleRender(),s){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Ei(),this.projectionDelta=Ei(),this.projectionDeltaWithTransform=Ei()}setAnimationOrigin(s,o=!1){const l=this.snapshot,u=l?l.latestValues:{},c={...this.latestValues},d=Ei();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!o;const f=Oe(),m=l?l.source:void 0,v=this.layout?this.layout.source:void 0,p=m!==v,b=this.getStack(),y=!b||b.members.length<=1,g=!!(p&&!y&&this.options.crossfade===!0&&!this.path.some(_L));this.animationProgress=0;let x;this.mixTargetDelta=_=>{const E=_/1e3;tb(d.x,s.x,E),tb(d.y,s.y,E),this.setTargetDelta(d),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(za(f,this.layout.layoutBox,this.relativeParent.layout.layoutBox),SL(this.relativeTarget,this.relativeTargetOrigin,f,E),x&&sL(this.relativeTarget,x)&&(this.isProjectionDirty=!1),x||(x=Oe()),Nt(x,this.relativeTarget)),p&&(this.animationValues=c,eL(c,u,this.latestValues,E,g,y)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=E},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(s){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(cr(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=xe.update(()=>{_o.hasAnimatedSinceResize=!0,this.currentAnimation=K2(0,Jw,{...s,onUpdate:o=>{this.mixTargetDelta(o),s.onUpdate&&s.onUpdate(o)},onComplete:()=>{s.onComplete&&s.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const s=this.getStack();s&&s.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Jw),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const s=this.getLead();let{targetWithTransforms:o,target:l,layout:u,latestValues:c}=s;if(!(!o||!l||!u)){if(this!==s&&this.layout&&u&&wM(this.options.animationType,this.layout.layoutBox,u.layoutBox)){l=this.target||Oe();const d=Et(this.layout.layoutBox.x);l.x.min=s.target.x.min,l.x.max=l.x.min+d;const f=Et(this.layout.layoutBox.y);l.y.min=s.target.y.min,l.y.max=l.y.min+f}Nt(o,l),Ti(o,c),Ba(this.projectionDeltaWithTransform,this.layoutCorrected,o,c)}}registerSharedNode(s,o){this.sharedNodes.has(s)||this.sharedNodes.set(s,new oL),this.sharedNodes.get(s).add(o);const u=o.options.initialPromotionConfig;o.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(o):void 0})}isLead(){const s=this.getStack();return s?s.lead===this:!0}getLead(){var s;const{layoutId:o}=this.options;return o?((s=this.getStack())===null||s===void 0?void 0:s.lead)||this:this}getPrevLead(){var s;const{layoutId:o}=this.options;return o?(s=this.getStack())===null||s===void 0?void 0:s.prevLead:void 0}getStack(){const{layoutId:s}=this.options;if(s)return this.root.sharedNodes.get(s)}promote({needsReset:s,transition:o,preserveFollowOpacity:l}={}){const u=this.getStack();u&&u.promote(this,l),s&&(this.projectionDelta=void 0,this.needsReset=!0),o&&this.setOptions({transition:o})}relegate(){const s=this.getStack();return s?s.relegate(this):!1}resetSkewAndRotation(){const{visualElement:s}=this.options;if(!s)return;let o=!1;const{latestValues:l}=s;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(o=!0),!o)return;const u={};l.z&&Zu("z",s,u,this.animationValues);for(let c=0;c<Ju.length;c++)Zu(`rotate${Ju[c]}`,s,u,this.animationValues),Zu(`skew${Ju[c]}`,s,u,this.animationValues);s.render();for(const c in u)s.setStaticValue(c,u[c]),this.animationValues&&(this.animationValues[c]=u[c]);s.scheduleRender()}getProjectionStyles(s){var o,l;if(!this.instance||this.isSVG)return;if(!this.isVisible)return uL;const u={visibility:""},c=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,u.opacity="",u.pointerEvents=xo(s==null?void 0:s.pointerEvents)||"",u.transform=c?c(this.latestValues,""):"none",u;const d=this.getLead();if(!this.projectionDelta||!this.layout||!d.target){const p={};return this.options.layoutId&&(p.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,p.pointerEvents=xo(s==null?void 0:s.pointerEvents)||""),this.hasProjected&&!Tr(this.latestValues)&&(p.transform=c?c({},""):"none",this.hasProjected=!1),p}const f=d.animationValues||d.latestValues;this.applyTransformsToTarget(),u.transform=lL(this.projectionDeltaWithTransform,this.treeScale,f),c&&(u.transform=c(f,u.transform));const{x:m,y:v}=this.projectionDelta;u.transformOrigin=`${m.origin*100}% ${v.origin*100}% 0`,d.animationValues?u.opacity=d===this?(l=(o=f.opacity)!==null&&o!==void 0?o:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:f.opacityExit:u.opacity=d===this?f.opacity!==void 0?f.opacity:"":f.opacityExit!==void 0?f.opacityExit:0;for(const p in Yo){if(f[p]===void 0)continue;const{correct:b,applyTo:y}=Yo[p],g=u.transform==="none"?f[p]:b(f[p],d);if(y){const x=y.length;for(let _=0;_<x;_++)u[y[_]]=g}else u[p]=g}return this.options.layoutId&&(u.pointerEvents=d===this?xo(s==null?void 0:s.pointerEvents)||"":"none"),u}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(s=>{var o;return(o=s.currentAnimation)===null||o===void 0?void 0:o.stop()}),this.root.nodes.forEach(Zw),this.root.sharedNodes.clear()}}}function dL(e){e.updateLayout()}function fL(e){var t;const n=((t=e.resumeFrom)===null||t===void 0?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&n&&e.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=e.layout,{animationType:a}=e.options,s=n.source!==e.layout.source;a==="size"?At(d=>{const f=s?n.measuredBox[d]:n.layoutBox[d],m=Et(f);f.min=r[d].min,f.max=f.min+m}):wM(a,n.layoutBox,r)&&At(d=>{const f=s?n.measuredBox[d]:n.layoutBox[d],m=Et(r[d]);f.max=f.min+m,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[d].max=e.relativeTarget[d].min+m)});const o=Ei();Ba(o,r,n.layoutBox);const l=Ei();s?Ba(l,e.applyTransform(i,!0),n.measuredBox):Ba(l,r,n.layoutBox);const u=!mM(o);let c=!1;if(!e.resumeFrom){const d=e.getClosestProjectingParent();if(d&&!d.resumeFrom){const{snapshot:f,layout:m}=d;if(f&&m){const v=Oe();za(v,n.layoutBox,f.layoutBox);const p=Oe();za(p,r,m.layoutBox),vM(v,p)||(c=!0),d.options.layoutRoot&&(e.relativeTarget=p,e.relativeTargetOrigin=v,e.relativeParent=d)}}}e.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:l,layoutDelta:o,hasLayoutChanged:u,hasRelativeTargetChanged:c})}else if(e.isLead()){const{onExitComplete:r}=e.options;r&&r()}e.options.transition=void 0}function hL(e){ka&&Mr.totalNodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function pL(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function mL(e){e.clearSnapshot()}function Zw(e){e.clearMeasurements()}function vL(e){e.isLayoutDirty=!1}function yL(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function eb(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function gL(e){e.resolveTargetDelta()}function wL(e){e.calcProjection()}function bL(e){e.resetSkewAndRotation()}function xL(e){e.removeLeadSnapshot()}function tb(e,t,n){e.translate=Te(t.translate,0,n),e.scale=Te(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function nb(e,t,n,r){e.min=Te(t.min,n.min,r),e.max=Te(t.max,n.max,r)}function SL(e,t,n,r){nb(e.x,t.x,n.x,r),nb(e.y,t.y,n.y,r)}function _L(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const kL={duration:.45,ease:[.4,0,.1,1]},rb=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),ib=rb("applewebkit/")&&!rb("chrome/")?Math.round:_t;function ab(e){e.min=ib(e.min),e.max=ib(e.max)}function EL(e){ab(e.x),ab(e.y)}function wM(e,t,n){return e==="position"||e==="preserve-aspect"&&!M2(Qw(t),Qw(n),.2)}function CL(e){var t;return e!==e.root&&((t=e.scroll)===null||t===void 0?void 0:t.wasRoot)}const TL=gM({attachResizeListener:(e,t)=>ds(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),ec={current:void 0},bM=gM({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!ec.current){const e=new TL({});e.mount(window),e.setOptions({layoutScroll:!0}),ec.current=e}return ec.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),ML={pan:{Feature:U2},drag:{Feature:z2,ProjectionNode:bM,MeasureLayout:fM}};function sb(e,t,n){const{props:r}=e;e.animationState&&r.whileHover&&e.animationState.setActive("whileHover",n==="Start");const i="onHover"+n,a=r[i];a&&xe.postRender(()=>a(t,xs(t)))}class jL extends vr{mount(){const{current:t}=this.node;t&&(this.unmount=MD(t,n=>(sb(this.node,n,"Start"),r=>sb(this.node,r,"End"))))}unmount(){}}class PL extends vr{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=bs(ds(this.node.current,"focus",()=>this.onFocus()),ds(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function ob(e,t,n){const{props:r}=e;e.animationState&&r.whileTap&&e.animationState.setActive("whileTap",n==="Start");const i="onTap"+(n==="End"?"":n),a=r[i];a&&xe.postRender(()=>a(t,xs(t)))}class NL extends vr{mount(){const{current:t}=this.node;t&&(this.unmount=AD(t,n=>(ob(this.node,n,"Start"),(r,{success:i})=>ob(this.node,r,i?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const av=new WeakMap,tc=new WeakMap,AL=e=>{const t=av.get(e.target);t&&t(e)},RL=e=>{e.forEach(AL)};function IL({root:e,...t}){const n=e||document;tc.has(n)||tc.set(n,{});const r=tc.get(n),i=JSON.stringify(t);return r[i]||(r[i]=new IntersectionObserver(RL,{root:e,...t})),r[i]}function DL(e,t,n){const r=IL(t);return av.set(e,n),r.observe(e),()=>{av.delete(e),r.unobserve(e)}}const OL={some:0,all:1};class LL extends vr{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:a}=t,s={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:OL[i]},o=l=>{const{isIntersecting:u}=l;if(this.isInView===u||(this.isInView=u,a&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:c,onViewportLeave:d}=this.node.getProps(),f=u?c:d;f&&f(l)};return DL(this.node.current,s,o)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:n}=this.node;["amount","margin","root"].some(qL(t,n))&&this.startObserver()}unmount(){}}function qL({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}const FL={inView:{Feature:LL},tap:{Feature:NL},focus:{Feature:PL},hover:{Feature:jL}},VL={layout:{ProjectionNode:bM,MeasureLayout:fM}},sv={current:null},xM={current:!1};function $L(){if(xM.current=!0,!!ly)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>sv.current=e.matches;e.addListener(t),t()}else sv.current=!1}const BL=[...HT,nt,dr],zL=e=>BL.find(GT(e)),lb=new WeakMap;function UL(e,t,n){for(const r in t){const i=t[r],a=n[r];if(it(i))e.addValue(r,i);else if(it(a))e.addValue(r,us(i,{owner:e}));else if(a!==i)if(e.hasValue(r)){const s=e.getValue(r);s.liveStyle===!0?s.jump(i):s.hasAnimated||s.set(i)}else{const s=e.getStaticValue(r);e.addValue(r,us(s!==void 0?s:i,{owner:e}))}}for(const r in n)t[r]===void 0&&e.removeValue(r);return t}const ub=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class GL{scrapeMotionValuesFromProps(t,n,r){return{}}constructor({parent:t,props:n,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:a,visualState:s},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Dy,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const m=cn.now();this.renderScheduledAt<m&&(this.renderScheduledAt=m,xe.render(this.render,!1,!0))};const{latestValues:l,renderState:u,onUpdate:c}=s;this.onUpdate=c,this.latestValues=l,this.baseTarget={...l},this.initialValues=n.initial?{...l}:{},this.renderState=u,this.parent=t,this.props=n,this.presenceContext=r,this.depth=t?t.depth+1:0,this.reducedMotionConfig=i,this.options=o,this.blockInitialAnimation=!!a,this.isControllingVariants=kl(n),this.isVariantNode=eT(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:d,...f}=this.scrapeMotionValuesFromProps(n,{},this);for(const m in f){const v=f[m];l[m]!==void 0&&it(v)&&v.set(l[m],!1)}}mount(t){this.current=t,lb.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),xM.current||$L(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:sv.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){lb.delete(this.current),this.projection&&this.projection.unmount(),cr(this.notifyUpdate),cr(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const n=this.features[t];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(t,n){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const r=Gr.has(t),i=n.on("change",o=>{this.latestValues[t]=o,this.props.onUpdate&&xe.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),a=n.on("renderRequest",this.scheduleRender);let s;window.MotionCheckAppearSync&&(s=window.MotionCheckAppearSync(this,t,n)),this.valueSubscriptions.set(t,()=>{i(),a(),s&&s(),n.owner&&n.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in Bi){const n=Bi[t];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[t]&&i&&r(this.props)&&(this.features[t]=new i(this)),this.features[t]){const a=this.features[t];a.isMounted?a.update():(a.mount(),a.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Oe()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,n){this.latestValues[t]=n}update(t,n){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<ub.length;r++){const i=ub[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const a="on"+i,s=t[a];s&&(this.propEventSubscriptions[i]=this.on(i,s))}this.prevMotionValues=UL(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(t),()=>n.variantChildren.delete(t)}addValue(t,n){const r=this.values.get(t);n!==r&&(r&&this.removeValue(t),this.bindToMotionValue(t,n),this.values.set(t,n),this.latestValues[t]=n.get())}removeValue(t){this.values.delete(t);const n=this.valueSubscriptions.get(t);n&&(n(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,n){if(this.props.values&&this.props.values[t])return this.props.values[t];let r=this.values.get(t);return r===void 0&&n!==void 0&&(r=us(n===null?void 0:n,{owner:this}),this.addValue(t,r)),r}readValue(t,n){var r;let i=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:(r=this.getBaseTargetFromProps(this.props,t))!==null&&r!==void 0?r:this.readValueFromInstance(this.current,t,this.options);return i!=null&&(typeof i=="string"&&(zT(i)||IT(i))?i=parseFloat(i):!zL(i)&&dr.test(n)&&(i=VT(t,n)),this.setBaseTarget(t,it(i)?i.get():i)),it(i)?i.get():i}setBaseTarget(t,n){this.baseTarget[t]=n}getBaseTarget(t){var n;const{initial:r}=this.props;let i;if(typeof r=="string"||typeof r=="object"){const s=my(this.props,r,(n=this.presenceContext)===null||n===void 0?void 0:n.custom);s&&(i=s[t])}if(r&&i!==void 0)return i;const a=this.getBaseTargetFromProps(this.props,t);return a!==void 0&&!it(a)?a:this.initialValues[t]!==void 0&&i===void 0?void 0:this.baseTarget[t]}on(t,n){return this.events[t]||(this.events[t]=new jy),this.events[t].add(n)}notify(t,...n){this.events[t]&&this.events[t].notify(...n)}}class SM extends GL{constructor(){super(...arguments),this.KeyframeResolver=WT}sortInstanceNodePosition(t,n){return t.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(t,n){return t.style?t.style[n]:void 0}removeValueFromRenderState(t,{vars:n,style:r}){delete n[t],delete r[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;it(t)&&(this.childSubscription=t.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function HL(e){return window.getComputedStyle(e)}class WL extends SM{constructor(){super(...arguments),this.type="html",this.renderInstance=uT}readValueFromInstance(t,n){if(Gr.has(n)){const r=Iy(n);return r&&r.default||0}else{const r=HL(t),i=(sT(n)?r.getPropertyValue(n):r[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(t,{transformPagePoint:n}){return cM(t,n)}build(t,n,r){gy(t,n,r.transformTemplate)}scrapeMotionValuesFromProps(t,n,r){return Sy(t,n,r)}}class KL extends SM{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Oe}getBaseTargetFromProps(t,n){return t[n]}readValueFromInstance(t,n){if(Gr.has(n)){const r=Iy(n);return r&&r.default||0}return n=cT.has(n)?n:fy(n),t.getAttribute(n)}scrapeMotionValuesFromProps(t,n,r){return hT(t,n,r)}build(t,n,r){wy(t,n,this.isSVGTag,r.transformTemplate)}renderInstance(t,n,r,i){dT(t,n,r,i)}mount(t){this.isSVGTag=xy(t.tagName),super.mount(t)}}const YL=(e,t)=>py(e)?new KL(t):new WL(t,{allowProjection:e!==S.Fragment}),QL=xD({...w2,...FL,...ML,...VL},YL),XL=OI(QL);function JL({steps:e,fromRects:t,toRects:n,onComplete:r}){return S.useEffect(()=>{const i=window.setTimeout(r,550);return()=>window.clearTimeout(i)},[r]),h.jsx("div",{className:"morph-layer",children:e.map(i=>{var o;const a=t[i.id],s=n[i.id];return!a||!s?null:h.jsxs(XL.div,{className:`morph-card step-${i.type}`,initial:{left:a.left,top:a.top,width:a.width,height:a.height},animate:{left:s.left,top:s.top,width:s.width,height:s.height},transition:{duration:.5,ease:"easeInOut"},children:[h.jsx("div",{className:"morph-card-title",children:i.name}),h.jsx("div",{className:"morph-card-subtitle",children:((o=i.preview)==null?void 0:o.title)??i.type})]},i.id)})})}function ZL({morph:e,onComplete:t,children:n}){return h.jsxs("div",{className:"morph-orchestrator",children:[n,e?h.jsx(JL,{steps:e.steps,fromRects:e.fromRects,toRects:e.toRects,onComplete:t}):null]})}const eq="demo-trace-overlap-001",tq="Overlap + ToolCallId Demo",nq="2026-01-27T10:00:00.000Z",rq="2026-01-27T10:00:05.000Z",iq="completed",aq={source:"openai_agents",agentName:"DemoAgent",modelId:"gpt-4o-2024-11-20",wallTimeMs:5e3,workTimeMs:7200,totalTokens:1400,totalCostUsd:.018},sq=[{id:"s1",index:0,type:"llm_call",name:"plan",startedAt:"2026-01-27T10:00:00.000Z",endedAt:"2026-01-27T10:00:01.000Z",durationMs:1e3,childStepIds:[],metrics:{tokensTotal:300,costUsd:.004},preview:{title:"LLM: plan",subtitle:"gpt-4o",outputPreview:"I'll fetch two sources..."},status:"completed"},{id:"s2",index:1,type:"llm_call",name:"call_tools",startedAt:"2026-01-27T10:00:01.000Z",endedAt:"2026-01-27T10:00:01.200Z",durationMs:200,childStepIds:[],metrics:{tokensTotal:120,costUsd:.002},preview:{title:"LLM: call tools",outputPreview:"Calling web_search + database_query"},io:{emittedToolCallIds:["tc-001","tc-002"]},status:"completed"},{id:"s3",index:2,type:"tool_call",name:"web_search",toolCallId:"tc-001",startedAt:"2026-01-27T10:00:01.200Z",endedAt:"2026-01-27T10:00:03.200Z",durationMs:2e3,childStepIds:[],metrics:{costUsd:0},preview:{title:"Tool: web_search",inputPreview:'{"q":"EU AI Act"}',outputPreview:"[3 results...]"},status:"completed"},{id:"s4",index:3,type:"tool_call",name:"database_query",toolCallId:"tc-002",startedAt:"2026-01-27T10:00:01.500Z",endedAt:"2026-01-27T10:00:02.700Z",durationMs:1200,childStepIds:[],preview:{title:"Tool: database_query",inputPreview:'{"sql":"SELECT..."}',outputPreview:'{"rows":42}'},status:"completed"},{id:"s5",index:4,type:"llm_call",name:"analyze",startedAt:"2026-01-27T10:00:03.200Z",endedAt:"2026-01-27T10:00:04.600Z",durationMs:1400,childStepIds:[],metrics:{tokensTotal:700,costUsd:.012},preview:{title:"LLM: analyze",outputPreview:"Synthesis based on tool outputs..."},io:{consumedToolCallIds:["tc-001","tc-002"]},status:"completed"}],Tl={id:eq,name:tq,startedAt:nq,endedAt:rq,status:iq,metadata:aq,steps:sq};function _M(e,t){const n=oq(e,t),r=new Set(n.map(d=>d.leftId)),i=new Set(n.map(d=>d.rightId)),a=t.steps.filter(d=>!i.has(d.id)).map(d=>d.id),s=e.steps.filter(d=>!r.has(d.id)).map(d=>d.id),o=n.filter(d=>{const f=e.steps.find(v=>v.id===d.leftId),m=t.steps.find(v=>v.id===d.rightId);return!f||!m?!1:cb(f)!==cb(m)}),l=o.map(d=>d.leftId),u=(t.metadata.totalCostUsd??0)-(e.metadata.totalCostUsd??0),c=t.metadata.wallTimeMs-e.metadata.wallTimeMs;return{addedSteps:a,removedSteps:s,changedSteps:l,changedPairs:o,alignedSteps:n,costDeltaUsd:u,wallTimeDeltaMs:c}}function oq(e,t){const n=[],r=new Set(e.steps.map(c=>c.id)),i=new Set(t.steps.map(c=>c.id));Array.from(r).forEach(c=>{i.has(c)&&(n.push({leftId:c,rightId:c}),r.delete(c),i.delete(c))});const a=new Map;t.steps.forEach(c=>{c.toolCallId&&a.set(c.toolCallId,c.id)}),e.steps.forEach(c=>{if(!c.toolCallId)return;const d=a.get(c.toolCallId);d&&i.has(d)&&(n.push({leftId:c.id,rightId:d}),r.delete(c.id),i.delete(d))});const s=hb(e),o=hb(t),l=lq(e,t),u={};return i.forEach(c=>{const d=o.get(c);if(!d)return;const f=db(d.step);f&&(u[f]||(u[f]=[]),u[f].push(c))}),Object.values(u).forEach(c=>{c.sort((d,f)=>{var m,v;return(((m=o.get(d))==null?void 0:m.startMs)??0)-(((v=o.get(f))==null?void 0:v.startMs)??0)})}),Array.from(r).forEach(c=>{var v;const d=s.get(c);if(!d)return;const f=db(d.step);if(!f||!((v=u[f])!=null&&v.length))return;const m=uq(d,u[f],o,l);m&&(n.push({leftId:c,rightId:m}),r.delete(c),i.delete(m),u[f]=u[f].filter(p=>p!==m))}),n}function cb(e){var r,i;const t=((r=e.preview)==null?void 0:r.outputPreview)??null,n=((i=e.metrics)==null?void 0:i.costUsd)??null;return`${e.status}|${t??""}|${n??""}`}function db(e){return e.type?`${e.type}:${e.name??""}`:null}function fb(e){if(!e)return null;const t=Date.parse(e);return Number.isNaN(t)?null:t}function hb(e){const t=fb(e.startedAt),n=new Map;return e.steps.forEach(r=>{const i=fb(r.startedAt),a=t!=null&&i!=null?i-t:null;n.set(r.id,{step:r,startMs:a})}),n}function lq(e,t){const n=Math.max(e.metadata.wallTimeMs,t.metadata.wallTimeMs,1);return Math.max(1e3,Math.min(5e3,Math.round(n*.1)))}function uq(e,t,n,r){const i=e.startMs;if(i==null)return null;let a=null,s=r+1;return t.forEach(o=>{const l=n.get(o);if(!l||l.startMs==null)return;const u=Math.abs(l.startMs-i);u<s&&(s=u,a=o)}),s<=r?a:null}const cq=new Map,dq=new Map,Lr=new Map;async function fq(){return[Tl]}async function kM(e){return{trace:Tl}}const hq={s1:{role:"assistant",content:"I'll analyze the user's request and create a plan to fetch information from two sources: a web search for current EU AI Act updates and a database query for historical compliance data.",model:"gpt-4o-2024-11-20",usage:{prompt_tokens:150,completion_tokens:150,total_tokens:300},reasoning:"The user wants comprehensive information about AI regulations. I'll use parallel tool calls to maximize efficiency."},s2:{role:"assistant",content:null,tool_calls:[{id:"tc-001",type:"function",function:{name:"web_search",arguments:'{"q":"EU AI Act latest updates 2026"}'}},{id:"tc-002",type:"function",function:{name:"database_query",arguments:`{"sql":"SELECT * FROM compliance_records WHERE region='EU' ORDER BY date DESC LIMIT 10"}`}}],model:"gpt-4o-2024-11-20",usage:{prompt_tokens:80,completion_tokens:40,total_tokens:120}},s3:{tool_call_id:"tc-001",tool_name:"web_search",input:{q:"EU AI Act latest updates 2026"},output:{results:[{title:"EU AI Act Implementation Timeline",url:"https://example.com/ai-act",snippet:"The EU AI Act enters full force in 2026..."},{title:"High-Risk AI Systems Classification",url:"https://example.com/classification",snippet:"New guidance on high-risk categorization..."},{title:"Compliance Deadlines Approaching",url:"https://example.com/deadlines",snippet:"Organizations must comply by August 2026..."}],total_results:3,search_time_ms:1850},status:"success"},s4:{tool_call_id:"tc-002",tool_name:"database_query",input:{sql:"SELECT * FROM compliance_records WHERE region='EU' ORDER BY date DESC LIMIT 10"},output:{rows:[{id:1,company:"TechCorp",status:"compliant",date:"2026-01-15"},{id:2,company:"AIStartup",status:"in_progress",date:"2026-01-10"},{id:3,company:"DataCo",status:"compliant",date:"2026-01-05"}],row_count:42,query_time_ms:1100},status:"success"},s5:{role:"assistant",content:`Based on my analysis of the web search results and database records:

**Key Findings:**
1. The EU AI Act is now in full effect as of 2026
2. High-risk AI systems require specific compliance measures
3. 42 organizations in our database have compliance records

**Recommendations:**
- Review classification of AI systems
- Ensure documentation is complete
- Schedule compliance audit before August deadline`,model:"gpt-4o-2024-11-20",usage:{prompt_tokens:450,completion_tokens:250,total_tokens:700},reasoning:"Synthesized information from both the web search (3 relevant articles) and database query (42 compliance records) to provide actionable insights."}};function pq(e,t){const n=Tl.steps.find(a=>a.id===e);if(!n)return null;const r=hq[e];if(!r)return null;const i=t?mq(r):r;return{...n,data:i}}function mq(e){var n,r;const t=JSON.parse(JSON.stringify(e));return(n=t.input)!=null&&n.sql&&(t.input.sql="[REDACTED]"),(r=t.output)!=null&&r.rows&&(t.output.rows=t.output.rows.map(i=>({...i,company:"[REDACTED]"}))),t.tool_calls&&(t.tool_calls=t.tool_calls.map(i=>({...i,function:{...i.function,arguments:"[REDACTED]"}}))),t}async function vq(e,t,n,r=[],i=!1){return await new Promise(a=>setTimeout(a,150)),pq(t,i)}async function yq(e,t,n){await vq(e,t,"redacted",[],n)}function gq(e,t){return()=>{}}function wq(){cq.clear(),dq.clear()}async function bq(e,t){return null}async function xq(e){return null}async function pz(e,t){return[]}async function mz(e,t,n,r,i){return null}async function Sq(){return[]}async function _q(e,t){return null}async function kq(e,t,n,r,i){return i?EM(i,t,n,r):null}function EM(e,t,n,r){var v;const i=JSON.parse(JSON.stringify(e)),a=6e4,s=Date.parse("2024-01-01T00:00:00.000Z"),o=Date.parse(e.endedAt??e.startedAt??""),u=(Number.isNaN(o)?s:o)+a,c=new Date(u);i.id=`${e.id}-replay-${u}`,i.parentTraceId=e.id,i.branchPointStepId=t,i.replay={strategy:n,modifiedStepId:t,modifications:r,createdAt:c.toISOString()};const d=p=>{if(!p)return p;const b=Date.parse(p);return Number.isNaN(b)?p:new Date(b+a).toISOString()};i.startedAt=d(i.startedAt)??i.startedAt,i.endedAt=d(i.endedAt);const f=new Set,m=((v=i.steps.find(p=>p.id===t))==null?void 0:v.index)??-1;return n==="live"?i.steps.forEach(p=>{p.index>m&&f.add(p.id)}):n==="hybrid"&&i.steps.forEach(p=>{p.index>m&&f.add(p.id)}),i.steps=i.steps.map(p=>{var y;const b={...p};if(b.startedAt=d(p.startedAt)??p.startedAt,b.endedAt=d(p.endedAt),p.id===t){const g=((y=p.preview)==null?void 0:y.outputPreview)??"";b.preview={...p.preview,outputPreview:`${g} (modified)`.trim()}}return f.has(p.id)&&(b.status="pending",b.endedAt=null,b.durationMs=void 0,b.metrics=void 0,b.preview={...p.preview,outputPreview:"[invalidated for replay]"}),b}),i}async function Eq(e){return Mq(e)}async function Cq(e){var t;return((t=Lr.get(e))==null?void 0:t.job)??null}async function pb(e){var t;return((t=Lr.get(e))==null?void 0:t.matrix)??null}async function Tq(e){{const t=Lr.get(e);if(!t)return null;const n={...t.job,status:"canceled",scenarios:t.job.scenarios.map(r=>({...r,status:"canceled",endedAt:r.endedAt??new Date().toISOString()}))};return Lr.set(e,{...t,job:n}),n}}function Mq(e){const t=`demo-job-${Date.now()}-${Math.random().toString(36).slice(2,6)}`,n=Tl,r=new Date().toISOString(),i=e.scenarios.map((l,u)=>({id:`demo-scn-${u+1}`,name:l.name,strategy:l.strategy,modifications:l.modifications,status:"running",startedAt:r,endedAt:null,replayTraceId:`${t}-replay-${u+1}`})),a={id:t,traceId:e.traceId,stepId:e.stepId,status:"running",createdAt:r,startedAt:r,endedAt:null,scenarioCount:i.length,completedCount:0,failedCount:0,canceledCount:0,scenarios:i},s=i.map(l=>{const u=EM(n,e.stepId,l.strategy,l.modifications);u.id=l.replayTraceId;const c=_M(n,u),d=n.metadata.totalCostUsd??0,f=u.metadata.totalCostUsd??d,m=n.metadata.errorCount??0,v=u.metadata.errorCount??m,p=n.metadata.retryCount??0,b=u.metadata.retryCount??p,y=u.steps.filter(g=>g.status==="pending").length;return{scenarioId:l.id,name:l.name,strategy:l.strategy,status:"completed",replayTraceId:l.replayTraceId,modifications:l.modifications,error:null,changedStepIds:c.changedSteps,addedStepIds:c.addedSteps,removedStepIds:c.removedSteps,metrics:{costDeltaUsd:f-d,wallTimeDeltaMs:(u.metadata.wallTimeMs??0)-(n.metadata.wallTimeMs??0),errorDelta:v-m,retryDelta:b-p,changedSteps:c.changedSteps.length,addedSteps:c.addedSteps.length,removedSteps:c.removedSteps.length,invalidatedStepCount:y}}}),o={jobId:t,traceId:e.traceId,stepId:e.stepId,rows:s,causalRanking:[]};return Lr.set(t,{job:a,matrix:o}),window.setTimeout(()=>{const l=Lr.get(t);if(!l)return;const u=new Date().toISOString(),c=l.job.scenarios.map(m=>({...m,status:"completed",endedAt:u})),d={...l.job,status:"completed",endedAt:u,completedCount:c.length,scenarios:c},f={...l.matrix,rows:l.matrix.rows.map(m=>({...m,status:"completed"}))};Lr.set(t,{job:d,matrix:f})},600),a}async function jq(e){return null}async function mb(e){return null}async function Pq(e){return null}async function Nq(e){return null}async function vb(e){return{session:null,conflict:!1,error:null}}async function Aq(e){return null}async function Rq(e){return null}async function Iq(e,t){return null}async function Dq(e){return null}async function Oq(e,t,n){return null}async function Lq(){return null}async function qq(){return null}function Fq(e,t,n){return()=>{}}function Vq(){const[e,t]=S.useState(null),[n,r]=S.useState(null),[i,a]=S.useState(!0),[s,o]=S.useState(null),[l,u]=S.useState([]),[c,d]=S.useState(null),f=S.useCallback(async v=>{const p=await kM(),b=(p==null?void 0:p.trace)??null;t(b),r(b?(p==null?void 0:p.insights)??AR(b):null)},[t,r]),m=S.useCallback(async()=>{var v;a(!0),o(null);try{const p=await fq();u(p);const b=((v=p[p.length-1])==null?void 0:v.id)??null,y=c??b;if(!y){t(null),r(null);return}if(!c||c!==y){d(y);return}await f(y)}catch(p){o(p instanceof Error?p.message:"Failed to load trace")}finally{a(!1)}},[c,f]);return S.useEffect(()=>{m()},[m]),S.useEffect(()=>{c&&(a(!0),f(c).catch(v=>{o(v instanceof Error?v.message:"Failed to load trace")}).finally(()=>a(!1)))},[c,f]),S.useEffect(()=>gq(),[c,d]),{trace:e,insights:n,loading:i,error:s,reload:m,traces:l,selectedTraceId:c,setSelectedTraceId:d}}function Ee(e,t){const[n,r]=S.useState(()=>{if(typeof window>"u")return t;try{const i=window.localStorage.getItem(e);return i==null?t:JSON.parse(i)}catch{return t}});return S.useEffect(()=>{try{window.localStorage.setItem(e,JSON.stringify(n))}catch{}},[e,n]),[n,r]}function Fy(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var nc,yb;function $q(){if(yb)return nc;yb=1;function e(){this.__data__=[],this.size=0}return nc=e,nc}var rc,gb;function Yi(){if(gb)return rc;gb=1;function e(t,n){return t===n||t!==t&&n!==n}return rc=e,rc}var ic,wb;function Ml(){if(wb)return ic;wb=1;var e=Yi();function t(n,r){for(var i=n.length;i--;)if(e(n[i][0],r))return i;return-1}return ic=t,ic}var ac,bb;function Bq(){if(bb)return ac;bb=1;var e=Ml(),t=Array.prototype,n=t.splice;function r(i){var a=this.__data__,s=e(a,i);if(s<0)return!1;var o=a.length-1;return s==o?a.pop():n.call(a,s,1),--this.size,!0}return ac=r,ac}var sc,xb;function zq(){if(xb)return sc;xb=1;var e=Ml();function t(n){var r=this.__data__,i=e(r,n);return i<0?void 0:r[i][1]}return sc=t,sc}var oc,Sb;function Uq(){if(Sb)return oc;Sb=1;var e=Ml();function t(n){return e(this.__data__,n)>-1}return oc=t,oc}var lc,_b;function Gq(){if(_b)return lc;_b=1;var e=Ml();function t(n,r){var i=this.__data__,a=e(i,n);return a<0?(++this.size,i.push([n,r])):i[a][1]=r,this}return lc=t,lc}var uc,kb;function jl(){if(kb)return uc;kb=1;var e=$q(),t=Bq(),n=zq(),r=Uq(),i=Gq();function a(s){var o=-1,l=s==null?0:s.length;for(this.clear();++o<l;){var u=s[o];this.set(u[0],u[1])}}return a.prototype.clear=e,a.prototype.delete=t,a.prototype.get=n,a.prototype.has=r,a.prototype.set=i,uc=a,uc}var cc,Eb;function Hq(){if(Eb)return cc;Eb=1;var e=jl();function t(){this.__data__=new e,this.size=0}return cc=t,cc}var dc,Cb;function Wq(){if(Cb)return dc;Cb=1;function e(t){var n=this.__data__,r=n.delete(t);return this.size=n.size,r}return dc=e,dc}var fc,Tb;function Kq(){if(Tb)return fc;Tb=1;function e(t){return this.__data__.get(t)}return fc=e,fc}var hc,Mb;function Yq(){if(Mb)return hc;Mb=1;function e(t){return this.__data__.has(t)}return hc=e,hc}var pc,jb;function CM(){if(jb)return pc;jb=1;var e=typeof Ls=="object"&&Ls&&Ls.Object===Object&&Ls;return pc=e,pc}var mc,Pb;function Xt(){if(Pb)return mc;Pb=1;var e=CM(),t=typeof self=="object"&&self&&self.Object===Object&&self,n=e||t||Function("return this")();return mc=n,mc}var vc,Nb;function Qi(){if(Nb)return vc;Nb=1;var e=Xt(),t=e.Symbol;return vc=t,vc}var yc,Ab;function Qq(){if(Ab)return yc;Ab=1;var e=Qi(),t=Object.prototype,n=t.hasOwnProperty,r=t.toString,i=e?e.toStringTag:void 0;function a(s){var o=n.call(s,i),l=s[i];try{s[i]=void 0;var u=!0}catch{}var c=r.call(s);return u&&(o?s[i]=l:delete s[i]),c}return yc=a,yc}var gc,Rb;function Xq(){if(Rb)return gc;Rb=1;var e=Object.prototype,t=e.toString;function n(r){return t.call(r)}return gc=n,gc}var wc,Ib;function Hr(){if(Ib)return wc;Ib=1;var e=Qi(),t=Qq(),n=Xq(),r="[object Null]",i="[object Undefined]",a=e?e.toStringTag:void 0;function s(o){return o==null?o===void 0?i:r:a&&a in Object(o)?t(o):n(o)}return wc=s,wc}var bc,Db;function Ft(){if(Db)return bc;Db=1;function e(t){var n=typeof t;return t!=null&&(n=="object"||n=="function")}return bc=e,bc}var xc,Ob;function Ss(){if(Ob)return xc;Ob=1;var e=Hr(),t=Ft(),n="[object AsyncFunction]",r="[object Function]",i="[object GeneratorFunction]",a="[object Proxy]";function s(o){if(!t(o))return!1;var l=e(o);return l==r||l==i||l==n||l==a}return xc=s,xc}var Sc,Lb;function Jq(){if(Lb)return Sc;Lb=1;var e=Xt(),t=e["__core-js_shared__"];return Sc=t,Sc}var _c,qb;function Zq(){if(qb)return _c;qb=1;var e=Jq(),t=function(){var r=/[^.]+$/.exec(e&&e.keys&&e.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}();function n(r){return!!t&&t in r}return _c=n,_c}var kc,Fb;function TM(){if(Fb)return kc;Fb=1;var e=Function.prototype,t=e.toString;function n(r){if(r!=null){try{return t.call(r)}catch{}try{return r+""}catch{}}return""}return kc=n,kc}var Ec,Vb;function eF(){if(Vb)return Ec;Vb=1;var e=Ss(),t=Zq(),n=Ft(),r=TM(),i=/[\\^$.*+?()[\]{}|]/g,a=/^\[object .+?Constructor\]$/,s=Function.prototype,o=Object.prototype,l=s.toString,u=o.hasOwnProperty,c=RegExp("^"+l.call(u).replace(i,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function d(f){if(!n(f)||t(f))return!1;var m=e(f)?c:a;return m.test(r(f))}return Ec=d,Ec}var Cc,$b;function tF(){if($b)return Cc;$b=1;function e(t,n){return t==null?void 0:t[n]}return Cc=e,Cc}var Tc,Bb;function Wr(){if(Bb)return Tc;Bb=1;var e=eF(),t=tF();function n(r,i){var a=t(r,i);return e(a)?a:void 0}return Tc=n,Tc}var Mc,zb;function Vy(){if(zb)return Mc;zb=1;var e=Wr(),t=Xt(),n=e(t,"Map");return Mc=n,Mc}var jc,Ub;function Pl(){if(Ub)return jc;Ub=1;var e=Wr(),t=e(Object,"create");return jc=t,jc}var Pc,Gb;function nF(){if(Gb)return Pc;Gb=1;var e=Pl();function t(){this.__data__=e?e(null):{},this.size=0}return Pc=t,Pc}var Nc,Hb;function rF(){if(Hb)return Nc;Hb=1;function e(t){var n=this.has(t)&&delete this.__data__[t];return this.size-=n?1:0,n}return Nc=e,Nc}var Ac,Wb;function iF(){if(Wb)return Ac;Wb=1;var e=Pl(),t="__lodash_hash_undefined__",n=Object.prototype,r=n.hasOwnProperty;function i(a){var s=this.__data__;if(e){var o=s[a];return o===t?void 0:o}return r.call(s,a)?s[a]:void 0}return Ac=i,Ac}var Rc,Kb;function aF(){if(Kb)return Rc;Kb=1;var e=Pl(),t=Object.prototype,n=t.hasOwnProperty;function r(i){var a=this.__data__;return e?a[i]!==void 0:n.call(a,i)}return Rc=r,Rc}var Ic,Yb;function sF(){if(Yb)return Ic;Yb=1;var e=Pl(),t="__lodash_hash_undefined__";function n(r,i){var a=this.__data__;return this.size+=this.has(r)?0:1,a[r]=e&&i===void 0?t:i,this}return Ic=n,Ic}var Dc,Qb;function oF(){if(Qb)return Dc;Qb=1;var e=nF(),t=rF(),n=iF(),r=aF(),i=sF();function a(s){var o=-1,l=s==null?0:s.length;for(this.clear();++o<l;){var u=s[o];this.set(u[0],u[1])}}return a.prototype.clear=e,a.prototype.delete=t,a.prototype.get=n,a.prototype.has=r,a.prototype.set=i,Dc=a,Dc}var Oc,Xb;function lF(){if(Xb)return Oc;Xb=1;var e=oF(),t=jl(),n=Vy();function r(){this.size=0,this.__data__={hash:new e,map:new(n||t),string:new e}}return Oc=r,Oc}var Lc,Jb;function uF(){if(Jb)return Lc;Jb=1;function e(t){var n=typeof t;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?t!=="__proto__":t===null}return Lc=e,Lc}var qc,Zb;function Nl(){if(Zb)return qc;Zb=1;var e=uF();function t(n,r){var i=n.__data__;return e(r)?i[typeof r=="string"?"string":"hash"]:i.map}return qc=t,qc}var Fc,e1;function cF(){if(e1)return Fc;e1=1;var e=Nl();function t(n){var r=e(this,n).delete(n);return this.size-=r?1:0,r}return Fc=t,Fc}var Vc,t1;function dF(){if(t1)return Vc;t1=1;var e=Nl();function t(n){return e(this,n).get(n)}return Vc=t,Vc}var $c,n1;function fF(){if(n1)return $c;n1=1;var e=Nl();function t(n){return e(this,n).has(n)}return $c=t,$c}var Bc,r1;function hF(){if(r1)return Bc;r1=1;var e=Nl();function t(n,r){var i=e(this,n),a=i.size;return i.set(n,r),this.size+=i.size==a?0:1,this}return Bc=t,Bc}var zc,i1;function $y(){if(i1)return zc;i1=1;var e=lF(),t=cF(),n=dF(),r=fF(),i=hF();function a(s){var o=-1,l=s==null?0:s.length;for(this.clear();++o<l;){var u=s[o];this.set(u[0],u[1])}}return a.prototype.clear=e,a.prototype.delete=t,a.prototype.get=n,a.prototype.has=r,a.prototype.set=i,zc=a,zc}var Uc,a1;function pF(){if(a1)return Uc;a1=1;var e=jl(),t=Vy(),n=$y(),r=200;function i(a,s){var o=this.__data__;if(o instanceof e){var l=o.__data__;if(!t||l.length<r-1)return l.push([a,s]),this.size=++o.size,this;o=this.__data__=new n(l)}return o.set(a,s),this.size=o.size,this}return Uc=i,Uc}var Gc,s1;function Al(){if(s1)return Gc;s1=1;var e=jl(),t=Hq(),n=Wq(),r=Kq(),i=Yq(),a=pF();function s(o){var l=this.__data__=new e(o);this.size=l.size}return s.prototype.clear=t,s.prototype.delete=n,s.prototype.get=r,s.prototype.has=i,s.prototype.set=a,Gc=s,Gc}var Hc,o1;function By(){if(o1)return Hc;o1=1;function e(t,n){for(var r=-1,i=t==null?0:t.length;++r<i&&n(t[r],r,t)!==!1;);return t}return Hc=e,Hc}var Wc,l1;function MM(){if(l1)return Wc;l1=1;var e=Wr(),t=function(){try{var n=e(Object,"defineProperty");return n({},"",{}),n}catch{}}();return Wc=t,Wc}var Kc,u1;function Rl(){if(u1)return Kc;u1=1;var e=MM();function t(n,r,i){r=="__proto__"&&e?e(n,r,{configurable:!0,enumerable:!0,value:i,writable:!0}):n[r]=i}return Kc=t,Kc}var Yc,c1;function Il(){if(c1)return Yc;c1=1;var e=Rl(),t=Yi(),n=Object.prototype,r=n.hasOwnProperty;function i(a,s,o){var l=a[s];(!(r.call(a,s)&&t(l,o))||o===void 0&&!(s in a))&&e(a,s,o)}return Yc=i,Yc}var Qc,d1;function _s(){if(d1)return Qc;d1=1;var e=Il(),t=Rl();function n(r,i,a,s){var o=!a;a||(a={});for(var l=-1,u=i.length;++l<u;){var c=i[l],d=s?s(a[c],r[c],c,a,r):void 0;d===void 0&&(d=r[c]),o?t(a,c,d):e(a,c,d)}return a}return Qc=n,Qc}var Xc,f1;function mF(){if(f1)return Xc;f1=1;function e(t,n){for(var r=-1,i=Array(t);++r<t;)i[r]=n(r);return i}return Xc=e,Xc}var Jc,h1;function dn(){if(h1)return Jc;h1=1;function e(t){return t!=null&&typeof t=="object"}return Jc=e,Jc}var Zc,p1;function vF(){if(p1)return Zc;p1=1;var e=Hr(),t=dn(),n="[object Arguments]";function r(i){return t(i)&&e(i)==n}return Zc=r,Zc}var ed,m1;function ks(){if(m1)return ed;m1=1;var e=vF(),t=dn(),n=Object.prototype,r=n.hasOwnProperty,i=n.propertyIsEnumerable,a=e(function(){return arguments}())?e:function(s){return t(s)&&r.call(s,"callee")&&!i.call(s,"callee")};return ed=a,ed}var td,v1;function $e(){if(v1)return td;v1=1;var e=Array.isArray;return td=e,td}var Ea={exports:{}},nd,y1;function yF(){if(y1)return nd;y1=1;function e(){return!1}return nd=e,nd}Ea.exports;var g1;function Xi(){return g1||(g1=1,function(e,t){var n=Xt(),r=yF(),i=t&&!t.nodeType&&t,a=i&&!0&&e&&!e.nodeType&&e,s=a&&a.exports===i,o=s?n.Buffer:void 0,l=o?o.isBuffer:void 0,u=l||r;e.exports=u}(Ea,Ea.exports)),Ea.exports}var rd,w1;function Dl(){if(w1)return rd;w1=1;var e=9007199254740991,t=/^(?:0|[1-9]\d*)$/;function n(r,i){var a=typeof r;return i=i??e,!!i&&(a=="number"||a!="symbol"&&t.test(r))&&r>-1&&r%1==0&&r<i}return rd=n,rd}var id,b1;function zy(){if(b1)return id;b1=1;var e=9007199254740991;function t(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=e}return id=t,id}var ad,x1;function gF(){if(x1)return ad;x1=1;var e=Hr(),t=zy(),n=dn(),r="[object Arguments]",i="[object Array]",a="[object Boolean]",s="[object Date]",o="[object Error]",l="[object Function]",u="[object Map]",c="[object Number]",d="[object Object]",f="[object RegExp]",m="[object Set]",v="[object String]",p="[object WeakMap]",b="[object ArrayBuffer]",y="[object DataView]",g="[object Float32Array]",x="[object Float64Array]",_="[object Int8Array]",E="[object Int16Array]",T="[object Int32Array]",M="[object Uint8Array]",C="[object Uint8ClampedArray]",j="[object Uint16Array]",N="[object Uint32Array]",A={};A[g]=A[x]=A[_]=A[E]=A[T]=A[M]=A[C]=A[j]=A[N]=!0,A[r]=A[i]=A[b]=A[a]=A[y]=A[s]=A[o]=A[l]=A[u]=A[c]=A[d]=A[f]=A[m]=A[v]=A[p]=!1;function I(L){return n(L)&&t(L.length)&&!!A[e(L)]}return ad=I,ad}var sd,S1;function Ol(){if(S1)return sd;S1=1;function e(t){return function(n){return t(n)}}return sd=e,sd}var Ca={exports:{}};Ca.exports;var _1;function Uy(){return _1||(_1=1,function(e,t){var n=CM(),r=t&&!t.nodeType&&t,i=r&&!0&&e&&!e.nodeType&&e,a=i&&i.exports===r,s=a&&n.process,o=function(){try{var l=i&&i.require&&i.require("util").types;return l||s&&s.binding&&s.binding("util")}catch{}}();e.exports=o}(Ca,Ca.exports)),Ca.exports}var od,k1;function Es(){if(k1)return od;k1=1;var e=gF(),t=Ol(),n=Uy(),r=n&&n.isTypedArray,i=r?t(r):e;return od=i,od}var ld,E1;function jM(){if(E1)return ld;E1=1;var e=mF(),t=ks(),n=$e(),r=Xi(),i=Dl(),a=Es(),s=Object.prototype,o=s.hasOwnProperty;function l(u,c){var d=n(u),f=!d&&t(u),m=!d&&!f&&r(u),v=!d&&!f&&!m&&a(u),p=d||f||m||v,b=p?e(u.length,String):[],y=b.length;for(var g in u)(c||o.call(u,g))&&!(p&&(g=="length"||m&&(g=="offset"||g=="parent")||v&&(g=="buffer"||g=="byteLength"||g=="byteOffset")||i(g,y)))&&b.push(g);return b}return ld=l,ld}var ud,C1;function Ll(){if(C1)return ud;C1=1;var e=Object.prototype;function t(n){var r=n&&n.constructor,i=typeof r=="function"&&r.prototype||e;return n===i}return ud=t,ud}var cd,T1;function PM(){if(T1)return cd;T1=1;function e(t,n){return function(r){return t(n(r))}}return cd=e,cd}var dd,M1;function wF(){if(M1)return dd;M1=1;var e=PM(),t=e(Object.keys,Object);return dd=t,dd}var fd,j1;function Gy(){if(j1)return fd;j1=1;var e=Ll(),t=wF(),n=Object.prototype,r=n.hasOwnProperty;function i(a){if(!e(a))return t(a);var s=[];for(var o in Object(a))r.call(a,o)&&o!="constructor"&&s.push(o);return s}return fd=i,fd}var hd,P1;function In(){if(P1)return hd;P1=1;var e=Ss(),t=zy();function n(r){return r!=null&&t(r.length)&&!e(r)}return hd=n,hd}var pd,N1;function yr(){if(N1)return pd;N1=1;var e=jM(),t=Gy(),n=In();function r(i){return n(i)?e(i):t(i)}return pd=r,pd}var md,A1;function bF(){if(A1)return md;A1=1;var e=_s(),t=yr();function n(r,i){return r&&e(i,t(i),r)}return md=n,md}var vd,R1;function xF(){if(R1)return vd;R1=1;function e(t){var n=[];if(t!=null)for(var r in Object(t))n.push(r);return n}return vd=e,vd}var yd,I1;function SF(){if(I1)return yd;I1=1;var e=Ft(),t=Ll(),n=xF(),r=Object.prototype,i=r.hasOwnProperty;function a(s){if(!e(s))return n(s);var o=t(s),l=[];for(var u in s)u=="constructor"&&(o||!i.call(s,u))||l.push(u);return l}return yd=a,yd}var gd,D1;function Kr(){if(D1)return gd;D1=1;var e=jM(),t=SF(),n=In();function r(i){return n(i)?e(i,!0):t(i)}return gd=r,gd}var wd,O1;function _F(){if(O1)return wd;O1=1;var e=_s(),t=Kr();function n(r,i){return r&&e(i,t(i),r)}return wd=n,wd}var Ta={exports:{}};Ta.exports;var L1;function NM(){return L1||(L1=1,function(e,t){var n=Xt(),r=t&&!t.nodeType&&t,i=r&&!0&&e&&!e.nodeType&&e,a=i&&i.exports===r,s=a?n.Buffer:void 0,o=s?s.allocUnsafe:void 0;function l(u,c){if(c)return u.slice();var d=u.length,f=o?o(d):new u.constructor(d);return u.copy(f),f}e.exports=l}(Ta,Ta.exports)),Ta.exports}var bd,q1;function AM(){if(q1)return bd;q1=1;function e(t,n){var r=-1,i=t.length;for(n||(n=Array(i));++r<i;)n[r]=t[r];return n}return bd=e,bd}var xd,F1;function RM(){if(F1)return xd;F1=1;function e(t,n){for(var r=-1,i=t==null?0:t.length,a=0,s=[];++r<i;){var o=t[r];n(o,r,t)&&(s[a++]=o)}return s}return xd=e,xd}var Sd,V1;function IM(){if(V1)return Sd;V1=1;function e(){return[]}return Sd=e,Sd}var _d,$1;function Hy(){if($1)return _d;$1=1;var e=RM(),t=IM(),n=Object.prototype,r=n.propertyIsEnumerable,i=Object.getOwnPropertySymbols,a=i?function(s){return s==null?[]:(s=Object(s),e(i(s),function(o){return r.call(s,o)}))}:t;return _d=a,_d}var kd,B1;function kF(){if(B1)return kd;B1=1;var e=_s(),t=Hy();function n(r,i){return e(r,t(r),i)}return kd=n,kd}var Ed,z1;function Wy(){if(z1)return Ed;z1=1;function e(t,n){for(var r=-1,i=n.length,a=t.length;++r<i;)t[a+r]=n[r];return t}return Ed=e,Ed}var Cd,U1;function ql(){if(U1)return Cd;U1=1;var e=PM(),t=e(Object.getPrototypeOf,Object);return Cd=t,Cd}var Td,G1;function DM(){if(G1)return Td;G1=1;var e=Wy(),t=ql(),n=Hy(),r=IM(),i=Object.getOwnPropertySymbols,a=i?function(s){for(var o=[];s;)e(o,n(s)),s=t(s);return o}:r;return Td=a,Td}var Md,H1;function EF(){if(H1)return Md;H1=1;var e=_s(),t=DM();function n(r,i){return e(r,t(r),i)}return Md=n,Md}var jd,W1;function OM(){if(W1)return jd;W1=1;var e=Wy(),t=$e();function n(r,i,a){var s=i(r);return t(r)?s:e(s,a(r))}return jd=n,jd}var Pd,K1;function LM(){if(K1)return Pd;K1=1;var e=OM(),t=Hy(),n=yr();function r(i){return e(i,n,t)}return Pd=r,Pd}var Nd,Y1;function CF(){if(Y1)return Nd;Y1=1;var e=OM(),t=DM(),n=Kr();function r(i){return e(i,n,t)}return Nd=r,Nd}var Ad,Q1;function TF(){if(Q1)return Ad;Q1=1;var e=Wr(),t=Xt(),n=e(t,"DataView");return Ad=n,Ad}var Rd,X1;function MF(){if(X1)return Rd;X1=1;var e=Wr(),t=Xt(),n=e(t,"Promise");return Rd=n,Rd}var Id,J1;function qM(){if(J1)return Id;J1=1;var e=Wr(),t=Xt(),n=e(t,"Set");return Id=n,Id}var Dd,Z1;function jF(){if(Z1)return Dd;Z1=1;var e=Wr(),t=Xt(),n=e(t,"WeakMap");return Dd=n,Dd}var Od,ex;function Ji(){if(ex)return Od;ex=1;var e=TF(),t=Vy(),n=MF(),r=qM(),i=jF(),a=Hr(),s=TM(),o="[object Map]",l="[object Object]",u="[object Promise]",c="[object Set]",d="[object WeakMap]",f="[object DataView]",m=s(e),v=s(t),p=s(n),b=s(r),y=s(i),g=a;return(e&&g(new e(new ArrayBuffer(1)))!=f||t&&g(new t)!=o||n&&g(n.resolve())!=u||r&&g(new r)!=c||i&&g(new i)!=d)&&(g=function(x){var _=a(x),E=_==l?x.constructor:void 0,T=E?s(E):"";if(T)switch(T){case m:return f;case v:return o;case p:return u;case b:return c;case y:return d}return _}),Od=g,Od}var Ld,tx;function PF(){if(tx)return Ld;tx=1;var e=Object.prototype,t=e.hasOwnProperty;function n(r){var i=r.length,a=new r.constructor(i);return i&&typeof r[0]=="string"&&t.call(r,"index")&&(a.index=r.index,a.input=r.input),a}return Ld=n,Ld}var qd,nx;function FM(){if(nx)return qd;nx=1;var e=Xt(),t=e.Uint8Array;return qd=t,qd}var Fd,rx;function Ky(){if(rx)return Fd;rx=1;var e=FM();function t(n){var r=new n.constructor(n.byteLength);return new e(r).set(new e(n)),r}return Fd=t,Fd}var Vd,ix;function NF(){if(ix)return Vd;ix=1;var e=Ky();function t(n,r){var i=r?e(n.buffer):n.buffer;return new n.constructor(i,n.byteOffset,n.byteLength)}return Vd=t,Vd}var $d,ax;function AF(){if(ax)return $d;ax=1;var e=/\w*$/;function t(n){var r=new n.constructor(n.source,e.exec(n));return r.lastIndex=n.lastIndex,r}return $d=t,$d}var Bd,sx;function RF(){if(sx)return Bd;sx=1;var e=Qi(),t=e?e.prototype:void 0,n=t?t.valueOf:void 0;function r(i){return n?Object(n.call(i)):{}}return Bd=r,Bd}var zd,ox;function VM(){if(ox)return zd;ox=1;var e=Ky();function t(n,r){var i=r?e(n.buffer):n.buffer;return new n.constructor(i,n.byteOffset,n.length)}return zd=t,zd}var Ud,lx;function IF(){if(lx)return Ud;lx=1;var e=Ky(),t=NF(),n=AF(),r=RF(),i=VM(),a="[object Boolean]",s="[object Date]",o="[object Map]",l="[object Number]",u="[object RegExp]",c="[object Set]",d="[object String]",f="[object Symbol]",m="[object ArrayBuffer]",v="[object DataView]",p="[object Float32Array]",b="[object Float64Array]",y="[object Int8Array]",g="[object Int16Array]",x="[object Int32Array]",_="[object Uint8Array]",E="[object Uint8ClampedArray]",T="[object Uint16Array]",M="[object Uint32Array]";function C(j,N,A){var I=j.constructor;switch(N){case m:return e(j);case a:case s:return new I(+j);case v:return t(j,A);case p:case b:case y:case g:case x:case _:case E:case T:case M:return i(j,A);case o:return new I;case l:case d:return new I(j);case u:return n(j);case c:return new I;case f:return r(j)}}return Ud=C,Ud}var Gd,ux;function $M(){if(ux)return Gd;ux=1;var e=Ft(),t=Object.create,n=function(){function r(){}return function(i){if(!e(i))return{};if(t)return t(i);r.prototype=i;var a=new r;return r.prototype=void 0,a}}();return Gd=n,Gd}var Hd,cx;function BM(){if(cx)return Hd;cx=1;var e=$M(),t=ql(),n=Ll();function r(i){return typeof i.constructor=="function"&&!n(i)?e(t(i)):{}}return Hd=r,Hd}var Wd,dx;function DF(){if(dx)return Wd;dx=1;var e=Ji(),t=dn(),n="[object Map]";function r(i){return t(i)&&e(i)==n}return Wd=r,Wd}var Kd,fx;function OF(){if(fx)return Kd;fx=1;var e=DF(),t=Ol(),n=Uy(),r=n&&n.isMap,i=r?t(r):e;return Kd=i,Kd}var Yd,hx;function LF(){if(hx)return Yd;hx=1;var e=Ji(),t=dn(),n="[object Set]";function r(i){return t(i)&&e(i)==n}return Yd=r,Yd}var Qd,px;function qF(){if(px)return Qd;px=1;var e=LF(),t=Ol(),n=Uy(),r=n&&n.isSet,i=r?t(r):e;return Qd=i,Qd}var Xd,mx;function zM(){if(mx)return Xd;mx=1;var e=Al(),t=By(),n=Il(),r=bF(),i=_F(),a=NM(),s=AM(),o=kF(),l=EF(),u=LM(),c=CF(),d=Ji(),f=PF(),m=IF(),v=BM(),p=$e(),b=Xi(),y=OF(),g=Ft(),x=qF(),_=yr(),E=Kr(),T=1,M=2,C=4,j="[object Arguments]",N="[object Array]",A="[object Boolean]",I="[object Date]",L="[object Error]",K="[object Function]",V="[object GeneratorFunction]",le="[object Map]",ie="[object Number]",R="[object Object]",q="[object RegExp]",G="[object Set]",z="[object String]",ae="[object Symbol]",Pe="[object WeakMap]",oe="[object ArrayBuffer]",ce="[object DataView]",$="[object Float32Array]",de="[object Float64Array]",Mt="[object Int8Array]",fn="[object Int16Array]",Zt="[object Int32Array]",gr="[object Uint8Array]",Xr="[object Uint8ClampedArray]",F="[object Uint16Array]",te="[object Uint32Array]",Q={};Q[j]=Q[N]=Q[oe]=Q[ce]=Q[A]=Q[I]=Q[$]=Q[de]=Q[Mt]=Q[fn]=Q[Zt]=Q[le]=Q[ie]=Q[R]=Q[q]=Q[G]=Q[z]=Q[ae]=Q[gr]=Q[Xr]=Q[F]=Q[te]=!0,Q[L]=Q[K]=Q[Pe]=!1;function qe(ne,Fe,On,Wl,$t,Ge){var me,Ln=Fe&T,qn=Fe&M,Kl=Fe&C;if(On&&(me=$t?On(ne,Wl,$t,Ge):On(ne)),me!==void 0)return me;if(!g(ne))return ne;var Jr=p(ne);if(Jr){if(me=f(ne),!Ln)return s(ne,me)}else{var Ze=d(ne),Ts=Ze==K||Ze==V;if(b(ne))return a(ne,Ln);if(Ze==R||Ze==j||Ts&&!$t){if(me=qn||Ts?{}:v(ne),!Ln)return qn?l(ne,i(me,ne)):o(ne,r(me,ne))}else{if(!Q[Ze])return $t?ne:{};me=m(ne,Ze,Ln)}}Ge||(Ge=new e);var Zr=Ge.get(ne);if(Zr)return Zr;Ge.set(ne,me),x(ne)?ne.forEach(function(en){me.add(qe(en,Fe,On,en,ne,Ge))}):y(ne)&&ne.forEach(function(en,Bt){me.set(Bt,qe(en,Fe,On,Bt,ne,Ge))});var ea=Kl?qn?c:u:qn?E:_,wr=Jr?void 0:ea(ne);return t(wr||ne,function(en,Bt){wr&&(Bt=en,en=ne[Bt]),n(me,Bt,qe(en,Fe,On,Bt,ne,Ge))}),me}return Xd=qe,Xd}var Jd,vx;function FF(){if(vx)return Jd;vx=1;var e=zM(),t=4;function n(r){return e(r,t)}return Jd=n,Jd}var Zd,yx;function Yy(){if(yx)return Zd;yx=1;function e(t){return function(){return t}}return Zd=e,Zd}var ef,gx;function VF(){if(gx)return ef;gx=1;function e(t){return function(n,r,i){for(var a=-1,s=Object(n),o=i(n),l=o.length;l--;){var u=o[t?l:++a];if(r(s[u],u,s)===!1)break}return n}}return ef=e,ef}var tf,wx;function Qy(){if(wx)return tf;wx=1;var e=VF(),t=e();return tf=t,tf}var nf,bx;function Xy(){if(bx)return nf;bx=1;var e=Qy(),t=yr();function n(r,i){return r&&e(r,i,t)}return nf=n,nf}var rf,xx;function $F(){if(xx)return rf;xx=1;var e=In();function t(n,r){return function(i,a){if(i==null)return i;if(!e(i))return n(i,a);for(var s=i.length,o=r?s:-1,l=Object(i);(r?o--:++o<s)&&a(l[o],o,l)!==!1;);return i}}return rf=t,rf}var af,Sx;function Fl(){if(Sx)return af;Sx=1;var e=Xy(),t=$F(),n=t(e);return af=n,af}var sf,_x;function Yr(){if(_x)return sf;_x=1;function e(t){return t}return sf=e,sf}var of,kx;function UM(){if(kx)return of;kx=1;var e=Yr();function t(n){return typeof n=="function"?n:e}return of=t,of}var lf,Ex;function GM(){if(Ex)return lf;Ex=1;var e=By(),t=Fl(),n=UM(),r=$e();function i(a,s){var o=r(a)?e:t;return o(a,n(s))}return lf=i,lf}var uf,Cx;function HM(){return Cx||(Cx=1,uf=GM()),uf}var cf,Tx;function BF(){if(Tx)return cf;Tx=1;var e=Fl();function t(n,r){var i=[];return e(n,function(a,s,o){r(a,s,o)&&i.push(a)}),i}return cf=t,cf}var df,Mx;function zF(){if(Mx)return df;Mx=1;var e="__lodash_hash_undefined__";function t(n){return this.__data__.set(n,e),this}return df=t,df}var ff,jx;function UF(){if(jx)return ff;jx=1;function e(t){return this.__data__.has(t)}return ff=e,ff}var hf,Px;function WM(){if(Px)return hf;Px=1;var e=$y(),t=zF(),n=UF();function r(i){var a=-1,s=i==null?0:i.length;for(this.__data__=new e;++a<s;)this.add(i[a])}return r.prototype.add=r.prototype.push=t,r.prototype.has=n,hf=r,hf}var pf,Nx;function GF(){if(Nx)return pf;Nx=1;function e(t,n){for(var r=-1,i=t==null?0:t.length;++r<i;)if(n(t[r],r,t))return!0;return!1}return pf=e,pf}var mf,Ax;function KM(){if(Ax)return mf;Ax=1;function e(t,n){return t.has(n)}return mf=e,mf}var vf,Rx;function YM(){if(Rx)return vf;Rx=1;var e=WM(),t=GF(),n=KM(),r=1,i=2;function a(s,o,l,u,c,d){var f=l&r,m=s.length,v=o.length;if(m!=v&&!(f&&v>m))return!1;var p=d.get(s),b=d.get(o);if(p&&b)return p==o&&b==s;var y=-1,g=!0,x=l&i?new e:void 0;for(d.set(s,o),d.set(o,s);++y<m;){var _=s[y],E=o[y];if(u)var T=f?u(E,_,y,o,s,d):u(_,E,y,s,o,d);if(T!==void 0){if(T)continue;g=!1;break}if(x){if(!t(o,function(M,C){if(!n(x,C)&&(_===M||c(_,M,l,u,d)))return x.push(C)})){g=!1;break}}else if(!(_===E||c(_,E,l,u,d))){g=!1;break}}return d.delete(s),d.delete(o),g}return vf=a,vf}var yf,Ix;function HF(){if(Ix)return yf;Ix=1;function e(t){var n=-1,r=Array(t.size);return t.forEach(function(i,a){r[++n]=[a,i]}),r}return yf=e,yf}var gf,Dx;function Jy(){if(Dx)return gf;Dx=1;function e(t){var n=-1,r=Array(t.size);return t.forEach(function(i){r[++n]=i}),r}return gf=e,gf}var wf,Ox;function WF(){if(Ox)return wf;Ox=1;var e=Qi(),t=FM(),n=Yi(),r=YM(),i=HF(),a=Jy(),s=1,o=2,l="[object Boolean]",u="[object Date]",c="[object Error]",d="[object Map]",f="[object Number]",m="[object RegExp]",v="[object Set]",p="[object String]",b="[object Symbol]",y="[object ArrayBuffer]",g="[object DataView]",x=e?e.prototype:void 0,_=x?x.valueOf:void 0;function E(T,M,C,j,N,A,I){switch(C){case g:if(T.byteLength!=M.byteLength||T.byteOffset!=M.byteOffset)return!1;T=T.buffer,M=M.buffer;case y:return!(T.byteLength!=M.byteLength||!A(new t(T),new t(M)));case l:case u:case f:return n(+T,+M);case c:return T.name==M.name&&T.message==M.message;case m:case p:return T==M+"";case d:var L=i;case v:var K=j&s;if(L||(L=a),T.size!=M.size&&!K)return!1;var V=I.get(T);if(V)return V==M;j|=o,I.set(T,M);var le=r(L(T),L(M),j,N,A,I);return I.delete(T),le;case b:if(_)return _.call(T)==_.call(M)}return!1}return wf=E,wf}var bf,Lx;function KF(){if(Lx)return bf;Lx=1;var e=LM(),t=1,n=Object.prototype,r=n.hasOwnProperty;function i(a,s,o,l,u,c){var d=o&t,f=e(a),m=f.length,v=e(s),p=v.length;if(m!=p&&!d)return!1;for(var b=m;b--;){var y=f[b];if(!(d?y in s:r.call(s,y)))return!1}var g=c.get(a),x=c.get(s);if(g&&x)return g==s&&x==a;var _=!0;c.set(a,s),c.set(s,a);for(var E=d;++b<m;){y=f[b];var T=a[y],M=s[y];if(l)var C=d?l(M,T,y,s,a,c):l(T,M,y,a,s,c);if(!(C===void 0?T===M||u(T,M,o,l,c):C)){_=!1;break}E||(E=y=="constructor")}if(_&&!E){var j=a.constructor,N=s.constructor;j!=N&&"constructor"in a&&"constructor"in s&&!(typeof j=="function"&&j instanceof j&&typeof N=="function"&&N instanceof N)&&(_=!1)}return c.delete(a),c.delete(s),_}return bf=i,bf}var xf,qx;function YF(){if(qx)return xf;qx=1;var e=Al(),t=YM(),n=WF(),r=KF(),i=Ji(),a=$e(),s=Xi(),o=Es(),l=1,u="[object Arguments]",c="[object Array]",d="[object Object]",f=Object.prototype,m=f.hasOwnProperty;function v(p,b,y,g,x,_){var E=a(p),T=a(b),M=E?c:i(p),C=T?c:i(b);M=M==u?d:M,C=C==u?d:C;var j=M==d,N=C==d,A=M==C;if(A&&s(p)){if(!s(b))return!1;E=!0,j=!1}if(A&&!j)return _||(_=new e),E||o(p)?t(p,b,y,g,x,_):n(p,b,M,y,g,x,_);if(!(y&l)){var I=j&&m.call(p,"__wrapped__"),L=N&&m.call(b,"__wrapped__");if(I||L){var K=I?p.value():p,V=L?b.value():b;return _||(_=new e),x(K,V,y,g,_)}}return A?(_||(_=new e),r(p,b,y,g,x,_)):!1}return xf=v,xf}var Sf,Fx;function QM(){if(Fx)return Sf;Fx=1;var e=YF(),t=dn();function n(r,i,a,s,o){return r===i?!0:r==null||i==null||!t(r)&&!t(i)?r!==r&&i!==i:e(r,i,a,s,n,o)}return Sf=n,Sf}var _f,Vx;function QF(){if(Vx)return _f;Vx=1;var e=Al(),t=QM(),n=1,r=2;function i(a,s,o,l){var u=o.length,c=u,d=!l;if(a==null)return!c;for(a=Object(a);u--;){var f=o[u];if(d&&f[2]?f[1]!==a[f[0]]:!(f[0]in a))return!1}for(;++u<c;){f=o[u];var m=f[0],v=a[m],p=f[1];if(d&&f[2]){if(v===void 0&&!(m in a))return!1}else{var b=new e;if(l)var y=l(v,p,m,a,s,b);if(!(y===void 0?t(p,v,n|r,l,b):y))return!1}}return!0}return _f=i,_f}var kf,$x;function XM(){if($x)return kf;$x=1;var e=Ft();function t(n){return n===n&&!e(n)}return kf=t,kf}var Ef,Bx;function XF(){if(Bx)return Ef;Bx=1;var e=XM(),t=yr();function n(r){for(var i=t(r),a=i.length;a--;){var s=i[a],o=r[s];i[a]=[s,o,e(o)]}return i}return Ef=n,Ef}var Cf,zx;function JM(){if(zx)return Cf;zx=1;function e(t,n){return function(r){return r==null?!1:r[t]===n&&(n!==void 0||t in Object(r))}}return Cf=e,Cf}var Tf,Ux;function JF(){if(Ux)return Tf;Ux=1;var e=QF(),t=XF(),n=JM();function r(i){var a=t(i);return a.length==1&&a[0][2]?n(a[0][0],a[0][1]):function(s){return s===i||e(s,i,a)}}return Tf=r,Tf}var Mf,Gx;function Zi(){if(Gx)return Mf;Gx=1;var e=Hr(),t=dn(),n="[object Symbol]";function r(i){return typeof i=="symbol"||t(i)&&e(i)==n}return Mf=r,Mf}var jf,Hx;function Zy(){if(Hx)return jf;Hx=1;var e=$e(),t=Zi(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function i(a,s){if(e(a))return!1;var o=typeof a;return o=="number"||o=="symbol"||o=="boolean"||a==null||t(a)?!0:r.test(a)||!n.test(a)||s!=null&&a in Object(s)}return jf=i,jf}var Pf,Wx;function ZF(){if(Wx)return Pf;Wx=1;var e=$y(),t="Expected a function";function n(r,i){if(typeof r!="function"||i!=null&&typeof i!="function")throw new TypeError(t);var a=function(){var s=arguments,o=i?i.apply(this,s):s[0],l=a.cache;if(l.has(o))return l.get(o);var u=r.apply(this,s);return a.cache=l.set(o,u)||l,u};return a.cache=new(n.Cache||e),a}return n.Cache=e,Pf=n,Pf}var Nf,Kx;function eV(){if(Kx)return Nf;Kx=1;var e=ZF(),t=500;function n(r){var i=e(r,function(s){return a.size===t&&a.clear(),s}),a=i.cache;return i}return Nf=n,Nf}var Af,Yx;function tV(){if(Yx)return Af;Yx=1;var e=eV(),t=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,n=/\\(\\)?/g,r=e(function(i){var a=[];return i.charCodeAt(0)===46&&a.push(""),i.replace(t,function(s,o,l,u){a.push(l?u.replace(n,"$1"):o||s)}),a});return Af=r,Af}var Rf,Qx;function Vl(){if(Qx)return Rf;Qx=1;function e(t,n){for(var r=-1,i=t==null?0:t.length,a=Array(i);++r<i;)a[r]=n(t[r],r,t);return a}return Rf=e,Rf}var If,Xx;function nV(){if(Xx)return If;Xx=1;var e=Qi(),t=Vl(),n=$e(),r=Zi(),i=e?e.prototype:void 0,a=i?i.toString:void 0;function s(o){if(typeof o=="string")return o;if(n(o))return t(o,s)+"";if(r(o))return a?a.call(o):"";var l=o+"";return l=="0"&&1/o==-1/0?"-0":l}return If=s,If}var Df,Jx;function ZM(){if(Jx)return Df;Jx=1;var e=nV();function t(n){return n==null?"":e(n)}return Df=t,Df}var Of,Zx;function $l(){if(Zx)return Of;Zx=1;var e=$e(),t=Zy(),n=tV(),r=ZM();function i(a,s){return e(a)?a:t(a,s)?[a]:n(r(a))}return Of=i,Of}var Lf,eS;function Cs(){if(eS)return Lf;eS=1;var e=Zi();function t(n){if(typeof n=="string"||e(n))return n;var r=n+"";return r=="0"&&1/n==-1/0?"-0":r}return Lf=t,Lf}var qf,tS;function Bl(){if(tS)return qf;tS=1;var e=$l(),t=Cs();function n(r,i){i=e(i,r);for(var a=0,s=i.length;r!=null&&a<s;)r=r[t(i[a++])];return a&&a==s?r:void 0}return qf=n,qf}var Ff,nS;function rV(){if(nS)return Ff;nS=1;var e=Bl();function t(n,r,i){var a=n==null?void 0:e(n,r);return a===void 0?i:a}return Ff=t,Ff}var Vf,rS;function iV(){if(rS)return Vf;rS=1;function e(t,n){return t!=null&&n in Object(t)}return Vf=e,Vf}var $f,iS;function ej(){if(iS)return $f;iS=1;var e=$l(),t=ks(),n=$e(),r=Dl(),i=zy(),a=Cs();function s(o,l,u){l=e(l,o);for(var c=-1,d=l.length,f=!1;++c<d;){var m=a(l[c]);if(!(f=o!=null&&u(o,m)))break;o=o[m]}return f||++c!=d?f:(d=o==null?0:o.length,!!d&&i(d)&&r(m,d)&&(n(o)||t(o)))}return $f=s,$f}var Bf,aS;function tj(){if(aS)return Bf;aS=1;var e=iV(),t=ej();function n(r,i){return r!=null&&t(r,i,e)}return Bf=n,Bf}var zf,sS;function aV(){if(sS)return zf;sS=1;var e=QM(),t=rV(),n=tj(),r=Zy(),i=XM(),a=JM(),s=Cs(),o=1,l=2;function u(c,d){return r(c)&&i(d)?a(s(c),d):function(f){var m=t(f,c);return m===void 0&&m===d?n(f,c):e(d,m,o|l)}}return zf=u,zf}var Uf,oS;function nj(){if(oS)return Uf;oS=1;function e(t){return function(n){return n==null?void 0:n[t]}}return Uf=e,Uf}var Gf,lS;function sV(){if(lS)return Gf;lS=1;var e=Bl();function t(n){return function(r){return e(r,n)}}return Gf=t,Gf}var Hf,uS;function oV(){if(uS)return Hf;uS=1;var e=nj(),t=sV(),n=Zy(),r=Cs();function i(a){return n(a)?e(r(a)):t(a)}return Hf=i,Hf}var Wf,cS;function Dn(){if(cS)return Wf;cS=1;var e=JF(),t=aV(),n=Yr(),r=$e(),i=oV();function a(s){return typeof s=="function"?s:s==null?n:typeof s=="object"?r(s)?t(s[0],s[1]):e(s):i(s)}return Wf=a,Wf}var Kf,dS;function rj(){if(dS)return Kf;dS=1;var e=RM(),t=BF(),n=Dn(),r=$e();function i(a,s){var o=r(a)?e:t;return o(a,n(s,3))}return Kf=i,Kf}var Yf,fS;function lV(){if(fS)return Yf;fS=1;var e=Object.prototype,t=e.hasOwnProperty;function n(r,i){return r!=null&&t.call(r,i)}return Yf=n,Yf}var Qf,hS;function ij(){if(hS)return Qf;hS=1;var e=lV(),t=ej();function n(r,i){return r!=null&&t(r,i,e)}return Qf=n,Qf}var Xf,pS;function uV(){if(pS)return Xf;pS=1;var e=Gy(),t=Ji(),n=ks(),r=$e(),i=In(),a=Xi(),s=Ll(),o=Es(),l="[object Map]",u="[object Set]",c=Object.prototype,d=c.hasOwnProperty;function f(m){if(m==null)return!0;if(i(m)&&(r(m)||typeof m=="string"||typeof m.splice=="function"||a(m)||o(m)||n(m)))return!m.length;var v=t(m);if(v==l||v==u)return!m.size;if(s(m))return!e(m).length;for(var p in m)if(d.call(m,p))return!1;return!0}return Xf=f,Xf}var Jf,mS;function aj(){if(mS)return Jf;mS=1;function e(t){return t===void 0}return Jf=e,Jf}var Zf,vS;function sj(){if(vS)return Zf;vS=1;var e=Fl(),t=In();function n(r,i){var a=-1,s=t(r)?Array(r.length):[];return e(r,function(o,l,u){s[++a]=i(o,l,u)}),s}return Zf=n,Zf}var eh,yS;function oj(){if(yS)return eh;yS=1;var e=Vl(),t=Dn(),n=sj(),r=$e();function i(a,s){var o=r(a)?e:n;return o(a,t(s,3))}return eh=i,eh}var th,gS;function cV(){if(gS)return th;gS=1;function e(t,n,r,i){var a=-1,s=t==null?0:t.length;for(i&&s&&(r=t[++a]);++a<s;)r=n(r,t[a],a,t);return r}return th=e,th}var nh,wS;function dV(){if(wS)return nh;wS=1;function e(t,n,r,i,a){return a(t,function(s,o,l){r=i?(i=!1,s):n(r,s,o,l)}),r}return nh=e,nh}var rh,bS;function lj(){if(bS)return rh;bS=1;var e=cV(),t=Fl(),n=Dn(),r=dV(),i=$e();function a(s,o,l){var u=i(s)?e:r,c=arguments.length<3;return u(s,n(o,4),l,c,t)}return rh=a,rh}var ih,xS;function fV(){if(xS)return ih;xS=1;var e=Hr(),t=$e(),n=dn(),r="[object String]";function i(a){return typeof a=="string"||!t(a)&&n(a)&&e(a)==r}return ih=i,ih}var ah,SS;function hV(){if(SS)return ah;SS=1;var e=nj(),t=e("length");return ah=t,ah}var sh,_S;function pV(){if(_S)return sh;_S=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",i=t+n+r,a="\\ufe0e\\ufe0f",s="\\u200d",o=RegExp("["+s+e+i+a+"]");function l(u){return o.test(u)}return sh=l,sh}var oh,kS;function mV(){if(kS)return oh;kS=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",i=t+n+r,a="\\ufe0e\\ufe0f",s="["+e+"]",o="["+i+"]",l="\\ud83c[\\udffb-\\udfff]",u="(?:"+o+"|"+l+")",c="[^"+e+"]",d="(?:\\ud83c[\\udde6-\\uddff]){2}",f="[\\ud800-\\udbff][\\udc00-\\udfff]",m="\\u200d",v=u+"?",p="["+a+"]?",b="(?:"+m+"(?:"+[c,d,f].join("|")+")"+p+v+")*",y=p+v+b,g="(?:"+[c+o+"?",o,d,f,s].join("|")+")",x=RegExp(l+"(?="+l+")|"+g+y,"g");function _(E){for(var T=x.lastIndex=0;x.test(E);)++T;return T}return oh=_,oh}var lh,ES;function vV(){if(ES)return lh;ES=1;var e=hV(),t=pV(),n=mV();function r(i){return t(i)?n(i):e(i)}return lh=r,lh}var uh,CS;function yV(){if(CS)return uh;CS=1;var e=Gy(),t=Ji(),n=In(),r=fV(),i=vV(),a="[object Map]",s="[object Set]";function o(l){if(l==null)return 0;if(n(l))return r(l)?i(l):l.length;var u=t(l);return u==a||u==s?l.size:e(l).length}return uh=o,uh}var ch,TS;function gV(){if(TS)return ch;TS=1;var e=By(),t=$M(),n=Xy(),r=Dn(),i=ql(),a=$e(),s=Xi(),o=Ss(),l=Ft(),u=Es();function c(d,f,m){var v=a(d),p=v||s(d)||u(d);if(f=r(f,4),m==null){var b=d&&d.constructor;p?m=v?new b:[]:l(d)?m=o(b)?t(i(d)):{}:m={}}return(p?e:n)(d,function(y,g,x){return f(m,y,g,x)}),m}return ch=c,ch}var dh,MS;function wV(){if(MS)return dh;MS=1;var e=Qi(),t=ks(),n=$e(),r=e?e.isConcatSpreadable:void 0;function i(a){return n(a)||t(a)||!!(r&&a&&a[r])}return dh=i,dh}var fh,jS;function eg(){if(jS)return fh;jS=1;var e=Wy(),t=wV();function n(r,i,a,s,o){var l=-1,u=r.length;for(a||(a=t),o||(o=[]);++l<u;){var c=r[l];i>0&&a(c)?i>1?n(c,i-1,a,s,o):e(o,c):s||(o[o.length]=c)}return o}return fh=n,fh}var hh,PS;function bV(){if(PS)return hh;PS=1;function e(t,n,r){switch(r.length){case 0:return t.call(n);case 1:return t.call(n,r[0]);case 2:return t.call(n,r[0],r[1]);case 3:return t.call(n,r[0],r[1],r[2])}return t.apply(n,r)}return hh=e,hh}var ph,NS;function uj(){if(NS)return ph;NS=1;var e=bV(),t=Math.max;function n(r,i,a){return i=t(i===void 0?r.length-1:i,0),function(){for(var s=arguments,o=-1,l=t(s.length-i,0),u=Array(l);++o<l;)u[o]=s[i+o];o=-1;for(var c=Array(i+1);++o<i;)c[o]=s[o];return c[i]=a(u),e(r,this,c)}}return ph=n,ph}var mh,AS;function xV(){if(AS)return mh;AS=1;var e=Yy(),t=MM(),n=Yr(),r=t?function(i,a){return t(i,"toString",{configurable:!0,enumerable:!1,value:e(a),writable:!0})}:n;return mh=r,mh}var vh,RS;function SV(){if(RS)return vh;RS=1;var e=800,t=16,n=Date.now;function r(i){var a=0,s=0;return function(){var o=n(),l=t-(o-s);if(s=o,l>0){if(++a>=e)return arguments[0]}else a=0;return i.apply(void 0,arguments)}}return vh=r,vh}var yh,IS;function cj(){if(IS)return yh;IS=1;var e=xV(),t=SV(),n=t(e);return yh=n,yh}var gh,DS;function zl(){if(DS)return gh;DS=1;var e=Yr(),t=uj(),n=cj();function r(i,a){return n(t(i,a,e),i+"")}return gh=r,gh}var wh,OS;function dj(){if(OS)return wh;OS=1;function e(t,n,r,i){for(var a=t.length,s=r+(i?1:-1);i?s--:++s<a;)if(n(t[s],s,t))return s;return-1}return wh=e,wh}var bh,LS;function _V(){if(LS)return bh;LS=1;function e(t){return t!==t}return bh=e,bh}var xh,qS;function kV(){if(qS)return xh;qS=1;function e(t,n,r){for(var i=r-1,a=t.length;++i<a;)if(t[i]===n)return i;return-1}return xh=e,xh}var Sh,FS;function EV(){if(FS)return Sh;FS=1;var e=dj(),t=_V(),n=kV();function r(i,a,s){return a===a?n(i,a,s):e(i,t,s)}return Sh=r,Sh}var _h,VS;function CV(){if(VS)return _h;VS=1;var e=EV();function t(n,r){var i=n==null?0:n.length;return!!i&&e(n,r,0)>-1}return _h=t,_h}var kh,$S;function TV(){if($S)return kh;$S=1;function e(t,n,r){for(var i=-1,a=t==null?0:t.length;++i<a;)if(r(n,t[i]))return!0;return!1}return kh=e,kh}var Eh,BS;function MV(){if(BS)return Eh;BS=1;function e(){}return Eh=e,Eh}var Ch,zS;function jV(){if(zS)return Ch;zS=1;var e=qM(),t=MV(),n=Jy(),r=1/0,i=e&&1/n(new e([,-0]))[1]==r?function(a){return new e(a)}:t;return Ch=i,Ch}var Th,US;function PV(){if(US)return Th;US=1;var e=WM(),t=CV(),n=TV(),r=KM(),i=jV(),a=Jy(),s=200;function o(l,u,c){var d=-1,f=t,m=l.length,v=!0,p=[],b=p;if(c)v=!1,f=n;else if(m>=s){var y=u?null:i(l);if(y)return a(y);v=!1,f=r,b=new e}else b=u?[]:p;e:for(;++d<m;){var g=l[d],x=u?u(g):g;if(g=c||g!==0?g:0,v&&x===x){for(var _=b.length;_--;)if(b[_]===x)continue e;u&&b.push(x),p.push(g)}else f(b,x,c)||(b!==p&&b.push(x),p.push(g))}return p}return Th=o,Th}var Mh,GS;function fj(){if(GS)return Mh;GS=1;var e=In(),t=dn();function n(r){return t(r)&&e(r)}return Mh=n,Mh}var jh,HS;function NV(){if(HS)return jh;HS=1;var e=eg(),t=zl(),n=PV(),r=fj(),i=t(function(a){return n(e(a,1,r,!0))});return jh=i,jh}var Ph,WS;function AV(){if(WS)return Ph;WS=1;var e=Vl();function t(n,r){return e(r,function(i){return n[i]})}return Ph=t,Ph}var Nh,KS;function hj(){if(KS)return Nh;KS=1;var e=AV(),t=yr();function n(r){return r==null?[]:e(r,t(r))}return Nh=n,Nh}var Ah,YS;function Vt(){if(YS)return Ah;YS=1;var e;if(typeof Fy=="function")try{e={clone:FF(),constant:Yy(),each:HM(),filter:rj(),has:ij(),isArray:$e(),isEmpty:uV(),isFunction:Ss(),isUndefined:aj(),keys:yr(),map:oj(),reduce:lj(),size:yV(),transform:gV(),union:NV(),values:hj()}}catch{}return e||(e=window._),Ah=e,Ah}var Rh,QS;function tg(){if(QS)return Rh;QS=1;var e=Vt();Rh=i;var t="\0",n="\0",r="";function i(c){this._isDirected=e.has(c,"directed")?c.directed:!0,this._isMultigraph=e.has(c,"multigraph")?c.multigraph:!1,this._isCompound=e.has(c,"compound")?c.compound:!1,this._label=void 0,this._defaultNodeLabelFn=e.constant(void 0),this._defaultEdgeLabelFn=e.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[n]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}i.prototype._nodeCount=0,i.prototype._edgeCount=0,i.prototype.isDirected=function(){return this._isDirected},i.prototype.isMultigraph=function(){return this._isMultigraph},i.prototype.isCompound=function(){return this._isCompound},i.prototype.setGraph=function(c){return this._label=c,this},i.prototype.graph=function(){return this._label},i.prototype.setDefaultNodeLabel=function(c){return e.isFunction(c)||(c=e.constant(c)),this._defaultNodeLabelFn=c,this},i.prototype.nodeCount=function(){return this._nodeCount},i.prototype.nodes=function(){return e.keys(this._nodes)},i.prototype.sources=function(){var c=this;return e.filter(this.nodes(),function(d){return e.isEmpty(c._in[d])})},i.prototype.sinks=function(){var c=this;return e.filter(this.nodes(),function(d){return e.isEmpty(c._out[d])})},i.prototype.setNodes=function(c,d){var f=arguments,m=this;return e.each(c,function(v){f.length>1?m.setNode(v,d):m.setNode(v)}),this},i.prototype.setNode=function(c,d){return e.has(this._nodes,c)?(arguments.length>1&&(this._nodes[c]=d),this):(this._nodes[c]=arguments.length>1?d:this._defaultNodeLabelFn(c),this._isCompound&&(this._parent[c]=n,this._children[c]={},this._children[n][c]=!0),this._in[c]={},this._preds[c]={},this._out[c]={},this._sucs[c]={},++this._nodeCount,this)},i.prototype.node=function(c){return this._nodes[c]},i.prototype.hasNode=function(c){return e.has(this._nodes,c)},i.prototype.removeNode=function(c){var d=this;if(e.has(this._nodes,c)){var f=function(m){d.removeEdge(d._edgeObjs[m])};delete this._nodes[c],this._isCompound&&(this._removeFromParentsChildList(c),delete this._parent[c],e.each(this.children(c),function(m){d.setParent(m)}),delete this._children[c]),e.each(e.keys(this._in[c]),f),delete this._in[c],delete this._preds[c],e.each(e.keys(this._out[c]),f),delete this._out[c],delete this._sucs[c],--this._nodeCount}return this},i.prototype.setParent=function(c,d){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(e.isUndefined(d))d=n;else{d+="";for(var f=d;!e.isUndefined(f);f=this.parent(f))if(f===c)throw new Error("Setting "+d+" as parent of "+c+" would create a cycle");this.setNode(d)}return this.setNode(c),this._removeFromParentsChildList(c),this._parent[c]=d,this._children[d][c]=!0,this},i.prototype._removeFromParentsChildList=function(c){delete this._children[this._parent[c]][c]},i.prototype.parent=function(c){if(this._isCompound){var d=this._parent[c];if(d!==n)return d}},i.prototype.children=function(c){if(e.isUndefined(c)&&(c=n),this._isCompound){var d=this._children[c];if(d)return e.keys(d)}else{if(c===n)return this.nodes();if(this.hasNode(c))return[]}},i.prototype.predecessors=function(c){var d=this._preds[c];if(d)return e.keys(d)},i.prototype.successors=function(c){var d=this._sucs[c];if(d)return e.keys(d)},i.prototype.neighbors=function(c){var d=this.predecessors(c);if(d)return e.union(d,this.successors(c))},i.prototype.isLeaf=function(c){var d;return this.isDirected()?d=this.successors(c):d=this.neighbors(c),d.length===0},i.prototype.filterNodes=function(c){var d=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});d.setGraph(this.graph());var f=this;e.each(this._nodes,function(p,b){c(b)&&d.setNode(b,p)}),e.each(this._edgeObjs,function(p){d.hasNode(p.v)&&d.hasNode(p.w)&&d.setEdge(p,f.edge(p))});var m={};function v(p){var b=f.parent(p);return b===void 0||d.hasNode(b)?(m[p]=b,b):b in m?m[b]:v(b)}return this._isCompound&&e.each(d.nodes(),function(p){d.setParent(p,v(p))}),d},i.prototype.setDefaultEdgeLabel=function(c){return e.isFunction(c)||(c=e.constant(c)),this._defaultEdgeLabelFn=c,this},i.prototype.edgeCount=function(){return this._edgeCount},i.prototype.edges=function(){return e.values(this._edgeObjs)},i.prototype.setPath=function(c,d){var f=this,m=arguments;return e.reduce(c,function(v,p){return m.length>1?f.setEdge(v,p,d):f.setEdge(v,p),p}),this},i.prototype.setEdge=function(){var c,d,f,m,v=!1,p=arguments[0];typeof p=="object"&&p!==null&&"v"in p?(c=p.v,d=p.w,f=p.name,arguments.length===2&&(m=arguments[1],v=!0)):(c=p,d=arguments[1],f=arguments[3],arguments.length>2&&(m=arguments[2],v=!0)),c=""+c,d=""+d,e.isUndefined(f)||(f=""+f);var b=o(this._isDirected,c,d,f);if(e.has(this._edgeLabels,b))return v&&(this._edgeLabels[b]=m),this;if(!e.isUndefined(f)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(c),this.setNode(d),this._edgeLabels[b]=v?m:this._defaultEdgeLabelFn(c,d,f);var y=l(this._isDirected,c,d,f);return c=y.v,d=y.w,Object.freeze(y),this._edgeObjs[b]=y,a(this._preds[d],c),a(this._sucs[c],d),this._in[d][b]=y,this._out[c][b]=y,this._edgeCount++,this},i.prototype.edge=function(c,d,f){var m=arguments.length===1?u(this._isDirected,arguments[0]):o(this._isDirected,c,d,f);return this._edgeLabels[m]},i.prototype.hasEdge=function(c,d,f){var m=arguments.length===1?u(this._isDirected,arguments[0]):o(this._isDirected,c,d,f);return e.has(this._edgeLabels,m)},i.prototype.removeEdge=function(c,d,f){var m=arguments.length===1?u(this._isDirected,arguments[0]):o(this._isDirected,c,d,f),v=this._edgeObjs[m];return v&&(c=v.v,d=v.w,delete this._edgeLabels[m],delete this._edgeObjs[m],s(this._preds[d],c),s(this._sucs[c],d),delete this._in[d][m],delete this._out[c][m],this._edgeCount--),this},i.prototype.inEdges=function(c,d){var f=this._in[c];if(f){var m=e.values(f);return d?e.filter(m,function(v){return v.v===d}):m}},i.prototype.outEdges=function(c,d){var f=this._out[c];if(f){var m=e.values(f);return d?e.filter(m,function(v){return v.w===d}):m}},i.prototype.nodeEdges=function(c,d){var f=this.inEdges(c,d);if(f)return f.concat(this.outEdges(c,d))};function a(c,d){c[d]?c[d]++:c[d]=1}function s(c,d){--c[d]||delete c[d]}function o(c,d,f,m){var v=""+d,p=""+f;if(!c&&v>p){var b=v;v=p,p=b}return v+r+p+r+(e.isUndefined(m)?t:m)}function l(c,d,f,m){var v=""+d,p=""+f;if(!c&&v>p){var b=v;v=p,p=b}var y={v,w:p};return m&&(y.name=m),y}function u(c,d){return o(c,d.v,d.w,d.name)}return Rh}var Ih,XS;function RV(){return XS||(XS=1,Ih="2.1.8"),Ih}var Dh,JS;function IV(){return JS||(JS=1,Dh={Graph:tg(),version:RV()}),Dh}var Oh,ZS;function DV(){if(ZS)return Oh;ZS=1;var e=Vt(),t=tg();Oh={write:n,read:a};function n(s){var o={options:{directed:s.isDirected(),multigraph:s.isMultigraph(),compound:s.isCompound()},nodes:r(s),edges:i(s)};return e.isUndefined(s.graph())||(o.value=e.clone(s.graph())),o}function r(s){return e.map(s.nodes(),function(o){var l=s.node(o),u=s.parent(o),c={v:o};return e.isUndefined(l)||(c.value=l),e.isUndefined(u)||(c.parent=u),c})}function i(s){return e.map(s.edges(),function(o){var l=s.edge(o),u={v:o.v,w:o.w};return e.isUndefined(o.name)||(u.name=o.name),e.isUndefined(l)||(u.value=l),u})}function a(s){var o=new t(s.options).setGraph(s.value);return e.each(s.nodes,function(l){o.setNode(l.v,l.value),l.parent&&o.setParent(l.v,l.parent)}),e.each(s.edges,function(l){o.setEdge({v:l.v,w:l.w,name:l.name},l.value)}),o}return Oh}var Lh,e_;function OV(){if(e_)return Lh;e_=1;var e=Vt();Lh=t;function t(n){var r={},i=[],a;function s(o){e.has(r,o)||(r[o]=!0,a.push(o),e.each(n.successors(o),s),e.each(n.predecessors(o),s))}return e.each(n.nodes(),function(o){a=[],s(o),a.length&&i.push(a)}),i}return Lh}var qh,t_;function pj(){if(t_)return qh;t_=1;var e=Vt();qh=t;function t(){this._arr=[],this._keyIndices={}}return t.prototype.size=function(){return this._arr.length},t.prototype.keys=function(){return this._arr.map(function(n){return n.key})},t.prototype.has=function(n){return e.has(this._keyIndices,n)},t.prototype.priority=function(n){var r=this._keyIndices[n];if(r!==void 0)return this._arr[r].priority},t.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key},t.prototype.add=function(n,r){var i=this._keyIndices;if(n=String(n),!e.has(i,n)){var a=this._arr,s=a.length;return i[n]=s,a.push({key:n,priority:r}),this._decrease(s),!0}return!1},t.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var n=this._arr.pop();return delete this._keyIndices[n.key],this._heapify(0),n.key},t.prototype.decrease=function(n,r){var i=this._keyIndices[n];if(r>this._arr[i].priority)throw new Error("New priority is greater than current priority. Key: "+n+" Old: "+this._arr[i].priority+" New: "+r);this._arr[i].priority=r,this._decrease(i)},t.prototype._heapify=function(n){var r=this._arr,i=2*n,a=i+1,s=n;i<r.length&&(s=r[i].priority<r[s].priority?i:s,a<r.length&&(s=r[a].priority<r[s].priority?a:s),s!==n&&(this._swap(n,s),this._heapify(s)))},t.prototype._decrease=function(n){for(var r=this._arr,i=r[n].priority,a;n!==0&&(a=n>>1,!(r[a].priority<i));)this._swap(n,a),n=a},t.prototype._swap=function(n,r){var i=this._arr,a=this._keyIndices,s=i[n],o=i[r];i[n]=o,i[r]=s,a[o.key]=n,a[s.key]=r},qh}var Fh,n_;function mj(){if(n_)return Fh;n_=1;var e=Vt(),t=pj();Fh=r;var n=e.constant(1);function r(a,s,o,l){return i(a,String(s),o||n,l||function(u){return a.outEdges(u)})}function i(a,s,o,l){var u={},c=new t,d,f,m=function(v){var p=v.v!==d?v.v:v.w,b=u[p],y=o(v),g=f.distance+y;if(y<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+v+" Weight: "+y);g<b.distance&&(b.distance=g,b.predecessor=d,c.decrease(p,g))};for(a.nodes().forEach(function(v){var p=v===s?0:Number.POSITIVE_INFINITY;u[v]={distance:p},c.add(v,p)});c.size()>0&&(d=c.removeMin(),f=u[d],f.distance!==Number.POSITIVE_INFINITY);)l(d).forEach(m);return u}return Fh}var Vh,r_;function LV(){if(r_)return Vh;r_=1;var e=mj(),t=Vt();Vh=n;function n(r,i,a){return t.transform(r.nodes(),function(s,o){s[o]=e(r,o,i,a)},{})}return Vh}var $h,i_;function vj(){if(i_)return $h;i_=1;var e=Vt();$h=t;function t(n){var r=0,i=[],a={},s=[];function o(l){var u=a[l]={onStack:!0,lowlink:r,index:r++};if(i.push(l),n.successors(l).forEach(function(f){e.has(a,f)?a[f].onStack&&(u.lowlink=Math.min(u.lowlink,a[f].index)):(o(f),u.lowlink=Math.min(u.lowlink,a[f].lowlink))}),u.lowlink===u.index){var c=[],d;do d=i.pop(),a[d].onStack=!1,c.push(d);while(l!==d);s.push(c)}}return n.nodes().forEach(function(l){e.has(a,l)||o(l)}),s}return $h}var Bh,a_;function qV(){if(a_)return Bh;a_=1;var e=Vt(),t=vj();Bh=n;function n(r){return e.filter(t(r),function(i){return i.length>1||i.length===1&&r.hasEdge(i[0],i[0])})}return Bh}var zh,s_;function FV(){if(s_)return zh;s_=1;var e=Vt();zh=n;var t=e.constant(1);function n(i,a,s){return r(i,a||t,s||function(o){return i.outEdges(o)})}function r(i,a,s){var o={},l=i.nodes();return l.forEach(function(u){o[u]={},o[u][u]={distance:0},l.forEach(function(c){u!==c&&(o[u][c]={distance:Number.POSITIVE_INFINITY})}),s(u).forEach(function(c){var d=c.v===u?c.w:c.v,f=a(c);o[u][d]={distance:f,predecessor:u}})}),l.forEach(function(u){var c=o[u];l.forEach(function(d){var f=o[d];l.forEach(function(m){var v=f[u],p=c[m],b=f[m],y=v.distance+p.distance;y<b.distance&&(b.distance=y,b.predecessor=p.predecessor)})})}),o}return zh}var Uh,o_;function yj(){if(o_)return Uh;o_=1;var e=Vt();Uh=t,t.CycleException=n;function t(r){var i={},a={},s=[];function o(l){if(e.has(a,l))throw new n;e.has(i,l)||(a[l]=!0,i[l]=!0,e.each(r.predecessors(l),o),delete a[l],s.push(l))}if(e.each(r.sinks(),o),e.size(i)!==r.nodeCount())throw new n;return s}function n(){}return n.prototype=new Error,Uh}var Gh,l_;function VV(){if(l_)return Gh;l_=1;var e=yj();Gh=t;function t(n){try{e(n)}catch(r){if(r instanceof e.CycleException)return!1;throw r}return!0}return Gh}var Hh,u_;function gj(){if(u_)return Hh;u_=1;var e=Vt();Hh=t;function t(r,i,a){e.isArray(i)||(i=[i]);var s=(r.isDirected()?r.successors:r.neighbors).bind(r),o=[],l={};return e.each(i,function(u){if(!r.hasNode(u))throw new Error("Graph does not have node: "+u);n(r,u,a==="post",l,s,o)}),o}function n(r,i,a,s,o,l){e.has(s,i)||(s[i]=!0,a||l.push(i),e.each(o(i),function(u){n(r,u,a,s,o,l)}),a&&l.push(i))}return Hh}var Wh,c_;function $V(){if(c_)return Wh;c_=1;var e=gj();Wh=t;function t(n,r){return e(n,r,"post")}return Wh}var Kh,d_;function BV(){if(d_)return Kh;d_=1;var e=gj();Kh=t;function t(n,r){return e(n,r,"pre")}return Kh}var Yh,f_;function zV(){if(f_)return Yh;f_=1;var e=Vt(),t=tg(),n=pj();Yh=r;function r(i,a){var s=new t,o={},l=new n,u;function c(f){var m=f.v===u?f.w:f.v,v=l.priority(m);if(v!==void 0){var p=a(f);p<v&&(o[m]=u,l.decrease(m,p))}}if(i.nodeCount()===0)return s;e.each(i.nodes(),function(f){l.add(f,Number.POSITIVE_INFINITY),s.setNode(f)}),l.decrease(i.nodes()[0],0);for(var d=!1;l.size()>0;){if(u=l.removeMin(),e.has(o,u))s.setEdge(u,o[u]);else{if(d)throw new Error("Input graph is not connected: "+i);d=!0}i.nodeEdges(u).forEach(c)}return s}return Yh}var Qh,h_;function UV(){return h_||(h_=1,Qh={components:OV(),dijkstra:mj(),dijkstraAll:LV(),findCycles:qV(),floydWarshall:FV(),isAcyclic:VV(),postorder:$V(),preorder:BV(),prim:zV(),tarjan:vj(),topsort:yj()}),Qh}var Xh,p_;function GV(){if(p_)return Xh;p_=1;var e=IV();return Xh={Graph:e.Graph,json:DV(),alg:UV(),version:e.version},Xh}var tl;if(typeof Fy=="function")try{tl=GV()}catch{}tl||(tl=window.graphlib);var Jt=tl,Jh,m_;function HV(){if(m_)return Jh;m_=1;var e=zM(),t=1,n=4;function r(i){return e(i,t|n)}return Jh=r,Jh}var Zh,v_;function Ul(){if(v_)return Zh;v_=1;var e=Yi(),t=In(),n=Dl(),r=Ft();function i(a,s,o){if(!r(o))return!1;var l=typeof s;return(l=="number"?t(o)&&n(s,o.length):l=="string"&&s in o)?e(o[s],a):!1}return Zh=i,Zh}var ep,y_;function WV(){if(y_)return ep;y_=1;var e=zl(),t=Yi(),n=Ul(),r=Kr(),i=Object.prototype,a=i.hasOwnProperty,s=e(function(o,l){o=Object(o);var u=-1,c=l.length,d=c>2?l[2]:void 0;for(d&&n(l[0],l[1],d)&&(c=1);++u<c;)for(var f=l[u],m=r(f),v=-1,p=m.length;++v<p;){var b=m[v],y=o[b];(y===void 0||t(y,i[b])&&!a.call(o,b))&&(o[b]=f[b])}return o});return ep=s,ep}var tp,g_;function KV(){if(g_)return tp;g_=1;var e=Dn(),t=In(),n=yr();function r(i){return function(a,s,o){var l=Object(a);if(!t(a)){var u=e(s,3);a=n(a),s=function(d){return u(l[d],d,l)}}var c=i(a,s,o);return c>-1?l[u?a[c]:c]:void 0}}return tp=r,tp}var np,w_;function YV(){if(w_)return np;w_=1;var e=/\s/;function t(n){for(var r=n.length;r--&&e.test(n.charAt(r)););return r}return np=t,np}var rp,b_;function QV(){if(b_)return rp;b_=1;var e=YV(),t=/^\s+/;function n(r){return r&&r.slice(0,e(r)+1).replace(t,"")}return rp=n,rp}var ip,x_;function XV(){if(x_)return ip;x_=1;var e=QV(),t=Ft(),n=Zi(),r=NaN,i=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,s=/^0o[0-7]+$/i,o=parseInt;function l(u){if(typeof u=="number")return u;if(n(u))return r;if(t(u)){var c=typeof u.valueOf=="function"?u.valueOf():u;u=t(c)?c+"":c}if(typeof u!="string")return u===0?u:+u;u=e(u);var d=a.test(u);return d||s.test(u)?o(u.slice(2),d?2:8):i.test(u)?r:+u}return ip=l,ip}var ap,S_;function wj(){if(S_)return ap;S_=1;var e=XV(),t=1/0,n=17976931348623157e292;function r(i){if(!i)return i===0?i:0;if(i=e(i),i===t||i===-t){var a=i<0?-1:1;return a*n}return i===i?i:0}return ap=r,ap}var sp,__;function JV(){if(__)return sp;__=1;var e=wj();function t(n){var r=e(n),i=r%1;return r===r?i?r-i:r:0}return sp=t,sp}var op,k_;function ZV(){if(k_)return op;k_=1;var e=dj(),t=Dn(),n=JV(),r=Math.max;function i(a,s,o){var l=a==null?0:a.length;if(!l)return-1;var u=o==null?0:n(o);return u<0&&(u=r(l+u,0)),e(a,t(s,3),u)}return op=i,op}var lp,E_;function e3(){if(E_)return lp;E_=1;var e=KV(),t=ZV(),n=e(t);return lp=n,lp}var up,C_;function bj(){if(C_)return up;C_=1;var e=eg();function t(n){var r=n==null?0:n.length;return r?e(n,1):[]}return up=t,up}var cp,T_;function t3(){if(T_)return cp;T_=1;var e=Qy(),t=UM(),n=Kr();function r(i,a){return i==null?i:e(i,t(a),n)}return cp=r,cp}var dp,M_;function n3(){if(M_)return dp;M_=1;function e(t){var n=t==null?0:t.length;return n?t[n-1]:void 0}return dp=e,dp}var fp,j_;function r3(){if(j_)return fp;j_=1;var e=Rl(),t=Xy(),n=Dn();function r(i,a){var s={};return a=n(a,3),t(i,function(o,l,u){e(s,l,a(o,l,u))}),s}return fp=r,fp}var hp,P_;function ng(){if(P_)return hp;P_=1;var e=Zi();function t(n,r,i){for(var a=-1,s=n.length;++a<s;){var o=n[a],l=r(o);if(l!=null&&(u===void 0?l===l&&!e(l):i(l,u)))var u=l,c=o}return c}return hp=t,hp}var pp,N_;function i3(){if(N_)return pp;N_=1;function e(t,n){return t>n}return pp=e,pp}var mp,A_;function a3(){if(A_)return mp;A_=1;var e=ng(),t=i3(),n=Yr();function r(i){return i&&i.length?e(i,n,t):void 0}return mp=r,mp}var vp,R_;function xj(){if(R_)return vp;R_=1;var e=Rl(),t=Yi();function n(r,i,a){(a!==void 0&&!t(r[i],a)||a===void 0&&!(i in r))&&e(r,i,a)}return vp=n,vp}var yp,I_;function s3(){if(I_)return yp;I_=1;var e=Hr(),t=ql(),n=dn(),r="[object Object]",i=Function.prototype,a=Object.prototype,s=i.toString,o=a.hasOwnProperty,l=s.call(Object);function u(c){if(!n(c)||e(c)!=r)return!1;var d=t(c);if(d===null)return!0;var f=o.call(d,"constructor")&&d.constructor;return typeof f=="function"&&f instanceof f&&s.call(f)==l}return yp=u,yp}var gp,D_;function Sj(){if(D_)return gp;D_=1;function e(t,n){if(!(n==="constructor"&&typeof t[n]=="function")&&n!="__proto__")return t[n]}return gp=e,gp}var wp,O_;function o3(){if(O_)return wp;O_=1;var e=_s(),t=Kr();function n(r){return e(r,t(r))}return wp=n,wp}var bp,L_;function l3(){if(L_)return bp;L_=1;var e=xj(),t=NM(),n=VM(),r=AM(),i=BM(),a=ks(),s=$e(),o=fj(),l=Xi(),u=Ss(),c=Ft(),d=s3(),f=Es(),m=Sj(),v=o3();function p(b,y,g,x,_,E,T){var M=m(b,g),C=m(y,g),j=T.get(C);if(j){e(b,g,j);return}var N=E?E(M,C,g+"",b,y,T):void 0,A=N===void 0;if(A){var I=s(C),L=!I&&l(C),K=!I&&!L&&f(C);N=C,I||L||K?s(M)?N=M:o(M)?N=r(M):L?(A=!1,N=t(C,!0)):K?(A=!1,N=n(C,!0)):N=[]:d(C)||a(C)?(N=M,a(M)?N=v(M):(!c(M)||u(M))&&(N=i(C))):A=!1}A&&(T.set(C,N),_(N,C,x,E,T),T.delete(C)),e(b,g,N)}return bp=p,bp}var xp,q_;function u3(){if(q_)return xp;q_=1;var e=Al(),t=xj(),n=Qy(),r=l3(),i=Ft(),a=Kr(),s=Sj();function o(l,u,c,d,f){l!==u&&n(u,function(m,v){if(f||(f=new e),i(m))r(l,u,v,c,o,d,f);else{var p=d?d(s(l,v),m,v+"",l,u,f):void 0;p===void 0&&(p=m),t(l,v,p)}},a)}return xp=o,xp}var Sp,F_;function c3(){if(F_)return Sp;F_=1;var e=zl(),t=Ul();function n(r){return e(function(i,a){var s=-1,o=a.length,l=o>1?a[o-1]:void 0,u=o>2?a[2]:void 0;for(l=r.length>3&&typeof l=="function"?(o--,l):void 0,u&&t(a[0],a[1],u)&&(l=o<3?void 0:l,o=1),i=Object(i);++s<o;){var c=a[s];c&&r(i,c,s,l)}return i})}return Sp=n,Sp}var _p,V_;function d3(){if(V_)return _p;V_=1;var e=u3(),t=c3(),n=t(function(r,i,a){e(r,i,a)});return _p=n,_p}var kp,$_;function _j(){if($_)return kp;$_=1;function e(t,n){return t<n}return kp=e,kp}var Ep,B_;function f3(){if(B_)return Ep;B_=1;var e=ng(),t=_j(),n=Yr();function r(i){return i&&i.length?e(i,n,t):void 0}return Ep=r,Ep}var Cp,z_;function h3(){if(z_)return Cp;z_=1;var e=ng(),t=Dn(),n=_j();function r(i,a){return i&&i.length?e(i,t(a,2),n):void 0}return Cp=r,Cp}var Tp,U_;function p3(){if(U_)return Tp;U_=1;var e=Xt(),t=function(){return e.Date.now()};return Tp=t,Tp}var Mp,G_;function m3(){if(G_)return Mp;G_=1;var e=Il(),t=$l(),n=Dl(),r=Ft(),i=Cs();function a(s,o,l,u){if(!r(s))return s;o=t(o,s);for(var c=-1,d=o.length,f=d-1,m=s;m!=null&&++c<d;){var v=i(o[c]),p=l;if(v==="__proto__"||v==="constructor"||v==="prototype")return s;if(c!=f){var b=m[v];p=u?u(b,v,m):void 0,p===void 0&&(p=r(b)?b:n(o[c+1])?[]:{})}e(m,v,p),m=m[v]}return s}return Mp=a,Mp}var jp,H_;function v3(){if(H_)return jp;H_=1;var e=Bl(),t=m3(),n=$l();function r(i,a,s){for(var o=-1,l=a.length,u={};++o<l;){var c=a[o],d=e(i,c);s(d,c)&&t(u,n(c,i),d)}return u}return jp=r,jp}var Pp,W_;function y3(){if(W_)return Pp;W_=1;var e=v3(),t=tj();function n(r,i){return e(r,i,function(a,s){return t(r,s)})}return Pp=n,Pp}var Np,K_;function g3(){if(K_)return Np;K_=1;var e=bj(),t=uj(),n=cj();function r(i){return n(t(i,void 0,e),i+"")}return Np=r,Np}var Ap,Y_;function w3(){if(Y_)return Ap;Y_=1;var e=y3(),t=g3(),n=t(function(r,i){return r==null?{}:e(r,i)});return Ap=n,Ap}var Rp,Q_;function b3(){if(Q_)return Rp;Q_=1;var e=Math.ceil,t=Math.max;function n(r,i,a,s){for(var o=-1,l=t(e((i-r)/(a||1)),0),u=Array(l);l--;)u[s?l:++o]=r,r+=a;return u}return Rp=n,Rp}var Ip,X_;function x3(){if(X_)return Ip;X_=1;var e=b3(),t=Ul(),n=wj();function r(i){return function(a,s,o){return o&&typeof o!="number"&&t(a,s,o)&&(s=o=void 0),a=n(a),s===void 0?(s=a,a=0):s=n(s),o=o===void 0?a<s?1:-1:n(o),e(a,s,o,i)}}return Ip=r,Ip}var Dp,J_;function S3(){if(J_)return Dp;J_=1;var e=x3(),t=e();return Dp=t,Dp}var Op,Z_;function _3(){if(Z_)return Op;Z_=1;function e(t,n){var r=t.length;for(t.sort(n);r--;)t[r]=t[r].value;return t}return Op=e,Op}var Lp,ek;function k3(){if(ek)return Lp;ek=1;var e=Zi();function t(n,r){if(n!==r){var i=n!==void 0,a=n===null,s=n===n,o=e(n),l=r!==void 0,u=r===null,c=r===r,d=e(r);if(!u&&!d&&!o&&n>r||o&&l&&c&&!u&&!d||a&&l&&c||!i&&c||!s)return 1;if(!a&&!o&&!d&&n<r||d&&i&&s&&!a&&!o||u&&i&&s||!l&&s||!c)return-1}return 0}return Lp=t,Lp}var qp,tk;function E3(){if(tk)return qp;tk=1;var e=k3();function t(n,r,i){for(var a=-1,s=n.criteria,o=r.criteria,l=s.length,u=i.length;++a<l;){var c=e(s[a],o[a]);if(c){if(a>=u)return c;var d=i[a];return c*(d=="desc"?-1:1)}}return n.index-r.index}return qp=t,qp}var Fp,nk;function C3(){if(nk)return Fp;nk=1;var e=Vl(),t=Bl(),n=Dn(),r=sj(),i=_3(),a=Ol(),s=E3(),o=Yr(),l=$e();function u(c,d,f){d.length?d=e(d,function(p){return l(p)?function(b){return t(b,p.length===1?p[0]:p)}:p}):d=[o];var m=-1;d=e(d,a(n));var v=r(c,function(p,b,y){var g=e(d,function(x){return x(p)});return{criteria:g,index:++m,value:p}});return i(v,function(p,b){return s(p,b,f)})}return Fp=u,Fp}var Vp,rk;function T3(){if(rk)return Vp;rk=1;var e=eg(),t=C3(),n=zl(),r=Ul(),i=n(function(a,s){if(a==null)return[];var o=s.length;return o>1&&r(a,s[0],s[1])?s=[]:o>2&&r(s[0],s[1],s[2])&&(s=[s[0]]),t(a,e(s,1),[])});return Vp=i,Vp}var $p,ik;function M3(){if(ik)return $p;ik=1;var e=ZM(),t=0;function n(r){var i=++t;return e(r)+i}return $p=n,$p}var Bp,ak;function j3(){if(ak)return Bp;ak=1;function e(t,n,r){for(var i=-1,a=t.length,s=n.length,o={};++i<a;){var l=i<s?n[i]:void 0;r(o,t[i],l)}return o}return Bp=e,Bp}var zp,sk;function P3(){if(sk)return zp;sk=1;var e=Il(),t=j3();function n(r,i){return t(r||[],i||[],e)}return zp=n,zp}var nl;if(typeof Fy=="function")try{nl={cloneDeep:HV(),constant:Yy(),defaults:WV(),each:HM(),filter:rj(),find:e3(),flatten:bj(),forEach:GM(),forIn:t3(),has:ij(),isUndefined:aj(),last:n3(),map:oj(),mapValues:r3(),max:a3(),merge:d3(),min:f3(),minBy:h3(),now:p3(),pick:w3(),range:S3(),reduce:lj(),sortBy:T3(),uniqueId:M3(),values:hj(),zipObject:P3()}}catch{}nl||(nl=window._);var _e=nl,N3=Gl;function Gl(){var e={};e._next=e._prev=e,this._sentinel=e}Gl.prototype.dequeue=function(){var e=this._sentinel,t=e._prev;if(t!==e)return kj(t),t};Gl.prototype.enqueue=function(e){var t=this._sentinel;e._prev&&e._next&&kj(e),e._next=t._next,t._next._prev=e,t._next=e,e._prev=t};Gl.prototype.toString=function(){for(var e=[],t=this._sentinel,n=t._prev;n!==t;)e.push(JSON.stringify(n,A3)),n=n._prev;return"["+e.join(", ")+"]"};function kj(e){e._prev._next=e._next,e._next._prev=e._prev,delete e._next,delete e._prev}function A3(e,t){if(e!=="_next"&&e!=="_prev")return t}var Sn=_e,R3=Jt.Graph,I3=N3,D3=L3,O3=Sn.constant(1);function L3(e,t){if(e.nodeCount()<=1)return[];var n=F3(e,t||O3),r=q3(n.graph,n.buckets,n.zeroIdx);return Sn.flatten(Sn.map(r,function(i){return e.outEdges(i.v,i.w)}),!0)}function q3(e,t,n){for(var r=[],i=t[t.length-1],a=t[0],s;e.nodeCount();){for(;s=a.dequeue();)Up(e,t,n,s);for(;s=i.dequeue();)Up(e,t,n,s);if(e.nodeCount()){for(var o=t.length-2;o>0;--o)if(s=t[o].dequeue(),s){r=r.concat(Up(e,t,n,s,!0));break}}}return r}function Up(e,t,n,r,i){var a=i?[]:void 0;return Sn.forEach(e.inEdges(r.v),function(s){var o=e.edge(s),l=e.node(s.v);i&&a.push({v:s.v,w:s.w}),l.out-=o,ov(t,n,l)}),Sn.forEach(e.outEdges(r.v),function(s){var o=e.edge(s),l=s.w,u=e.node(l);u.in-=o,ov(t,n,u)}),e.removeNode(r.v),a}function F3(e,t){var n=new R3,r=0,i=0;Sn.forEach(e.nodes(),function(o){n.setNode(o,{v:o,in:0,out:0})}),Sn.forEach(e.edges(),function(o){var l=n.edge(o.v,o.w)||0,u=t(o),c=l+u;n.setEdge(o.v,o.w,c),i=Math.max(i,n.node(o.v).out+=u),r=Math.max(r,n.node(o.w).in+=u)});var a=Sn.range(i+r+3).map(function(){return new I3}),s=r+1;return Sn.forEach(n.nodes(),function(o){ov(a,s,n.node(o))}),{graph:n,buckets:a,zeroIdx:s}}function ov(e,t,n){n.out?n.in?e[n.out-n.in+t].enqueue(n):e[e.length-1].enqueue(n):e[0].enqueue(n)}var Rr=_e,V3=D3,$3={run:B3,undo:U3};function B3(e){var t=e.graph().acyclicer==="greedy"?V3(e,n(e)):z3(e);Rr.forEach(t,function(r){var i=e.edge(r);e.removeEdge(r),i.forwardName=r.name,i.reversed=!0,e.setEdge(r.w,r.v,i,Rr.uniqueId("rev"))});function n(r){return function(i){return r.edge(i).weight}}}function z3(e){var t=[],n={},r={};function i(a){Rr.has(r,a)||(r[a]=!0,n[a]=!0,Rr.forEach(e.outEdges(a),function(s){Rr.has(n,s.w)?t.push(s):i(s.w)}),delete n[a])}return Rr.forEach(e.nodes(),i),t}function U3(e){Rr.forEach(e.edges(),function(t){var n=e.edge(t);if(n.reversed){e.removeEdge(t);var r=n.forwardName;delete n.reversed,delete n.forwardName,e.setEdge(t.w,t.v,n,r)}})}var ue=_e,Ej=Jt.Graph,yt={addDummyNode:Cj,simplify:G3,asNonCompoundGraph:H3,successorWeights:W3,predecessorWeights:K3,intersectRect:Y3,buildLayerMatrix:Q3,normalizeRanks:X3,removeEmptyRanks:J3,addBorderNode:Z3,maxRank:Tj,partition:e$,time:t$,notime:n$};function Cj(e,t,n,r){var i;do i=ue.uniqueId(r);while(e.hasNode(i));return n.dummy=t,e.setNode(i,n),i}function G3(e){var t=new Ej().setGraph(e.graph());return ue.forEach(e.nodes(),function(n){t.setNode(n,e.node(n))}),ue.forEach(e.edges(),function(n){var r=t.edge(n.v,n.w)||{weight:0,minlen:1},i=e.edge(n);t.setEdge(n.v,n.w,{weight:r.weight+i.weight,minlen:Math.max(r.minlen,i.minlen)})}),t}function H3(e){var t=new Ej({multigraph:e.isMultigraph()}).setGraph(e.graph());return ue.forEach(e.nodes(),function(n){e.children(n).length||t.setNode(n,e.node(n))}),ue.forEach(e.edges(),function(n){t.setEdge(n,e.edge(n))}),t}function W3(e){var t=ue.map(e.nodes(),function(n){var r={};return ue.forEach(e.outEdges(n),function(i){r[i.w]=(r[i.w]||0)+e.edge(i).weight}),r});return ue.zipObject(e.nodes(),t)}function K3(e){var t=ue.map(e.nodes(),function(n){var r={};return ue.forEach(e.inEdges(n),function(i){r[i.v]=(r[i.v]||0)+e.edge(i).weight}),r});return ue.zipObject(e.nodes(),t)}function Y3(e,t){var n=e.x,r=e.y,i=t.x-n,a=t.y-r,s=e.width/2,o=e.height/2;if(!i&&!a)throw new Error("Not possible to find intersection inside of the rectangle");var l,u;return Math.abs(a)*s>Math.abs(i)*o?(a<0&&(o=-o),l=o*i/a,u=o):(i<0&&(s=-s),l=s,u=s*a/i),{x:n+l,y:r+u}}function Q3(e){var t=ue.map(ue.range(Tj(e)+1),function(){return[]});return ue.forEach(e.nodes(),function(n){var r=e.node(n),i=r.rank;ue.isUndefined(i)||(t[i][r.order]=n)}),t}function X3(e){var t=ue.min(ue.map(e.nodes(),function(n){return e.node(n).rank}));ue.forEach(e.nodes(),function(n){var r=e.node(n);ue.has(r,"rank")&&(r.rank-=t)})}function J3(e){var t=ue.min(ue.map(e.nodes(),function(a){return e.node(a).rank})),n=[];ue.forEach(e.nodes(),function(a){var s=e.node(a).rank-t;n[s]||(n[s]=[]),n[s].push(a)});var r=0,i=e.graph().nodeRankFactor;ue.forEach(n,function(a,s){ue.isUndefined(a)&&s%i!==0?--r:r&&ue.forEach(a,function(o){e.node(o).rank+=r})})}function Z3(e,t,n,r){var i={width:0,height:0};return arguments.length>=4&&(i.rank=n,i.order=r),Cj(e,"border",i,t)}function Tj(e){return ue.max(ue.map(e.nodes(),function(t){var n=e.node(t).rank;if(!ue.isUndefined(n))return n}))}function e$(e,t){var n={lhs:[],rhs:[]};return ue.forEach(e,function(r){t(r)?n.lhs.push(r):n.rhs.push(r)}),n}function t$(e,t){var n=ue.now();try{return t()}finally{console.log(e+" time: "+(ue.now()-n)+"ms")}}function n$(e,t){return t()}var Mj=_e,r$=yt,i$={run:a$,undo:o$};function a$(e){e.graph().dummyChains=[],Mj.forEach(e.edges(),function(t){s$(e,t)})}function s$(e,t){var n=t.v,r=e.node(n).rank,i=t.w,a=e.node(i).rank,s=t.name,o=e.edge(t),l=o.labelRank;if(a!==r+1){e.removeEdge(t);var u,c,d;for(d=0,++r;r<a;++d,++r)o.points=[],c={width:0,height:0,edgeLabel:o,edgeObj:t,rank:r},u=r$.addDummyNode(e,"edge",c,"_d"),r===l&&(c.width=o.width,c.height=o.height,c.dummy="edge-label",c.labelpos=o.labelpos),e.setEdge(n,u,{weight:o.weight},s),d===0&&e.graph().dummyChains.push(u),n=u;e.setEdge(n,i,{weight:o.weight},s)}}function o$(e){Mj.forEach(e.graph().dummyChains,function(t){var n=e.node(t),r=n.edgeLabel,i;for(e.setEdge(n.edgeObj,r);n.dummy;)i=e.successors(t)[0],e.removeNode(t),r.points.push({x:n.x,y:n.y}),n.dummy==="edge-label"&&(r.x=n.x,r.y=n.y,r.width=n.width,r.height=n.height),t=i,n=e.node(t)})}var io=_e,Hl={longestPath:l$,slack:u$};function l$(e){var t={};function n(r){var i=e.node(r);if(io.has(t,r))return i.rank;t[r]=!0;var a=io.min(io.map(e.outEdges(r),function(s){return n(s.w)-e.edge(s).minlen}));return(a===Number.POSITIVE_INFINITY||a===void 0||a===null)&&(a=0),i.rank=a}io.forEach(e.sources(),n)}function u$(e,t){return e.node(t.w).rank-e.node(t.v).rank-e.edge(t).minlen}var rl=_e,c$=Jt.Graph,il=Hl.slack,jj=d$;function d$(e){var t=new c$({directed:!1}),n=e.nodes()[0],r=e.nodeCount();t.setNode(n,{});for(var i,a;f$(t,e)<r;)i=h$(t,e),a=t.hasNode(i.v)?il(e,i):-il(e,i),p$(t,e,a);return t}function f$(e,t){function n(r){rl.forEach(t.nodeEdges(r),function(i){var a=i.v,s=r===a?i.w:a;!e.hasNode(s)&&!il(t,i)&&(e.setNode(s,{}),e.setEdge(r,s,{}),n(s))})}return rl.forEach(e.nodes(),n),e.nodeCount()}function h$(e,t){return rl.minBy(t.edges(),function(n){if(e.hasNode(n.v)!==e.hasNode(n.w))return il(t,n)})}function p$(e,t,n){rl.forEach(e.nodes(),function(r){t.node(r).rank+=n})}var An=_e,m$=jj,v$=Hl.slack,y$=Hl.longestPath,g$=Jt.alg.preorder,w$=Jt.alg.postorder,b$=yt.simplify,x$=Qr;Qr.initLowLimValues=ig;Qr.initCutValues=rg;Qr.calcCutValue=Pj;Qr.leaveEdge=Aj;Qr.enterEdge=Rj;Qr.exchangeEdges=Ij;function Qr(e){e=b$(e),y$(e);var t=m$(e);ig(t),rg(t,e);for(var n,r;n=Aj(t);)r=Rj(t,e,n),Ij(t,e,n,r)}function rg(e,t){var n=w$(e,e.nodes());n=n.slice(0,n.length-1),An.forEach(n,function(r){S$(e,t,r)})}function S$(e,t,n){var r=e.node(n),i=r.parent;e.edge(n,i).cutvalue=Pj(e,t,n)}function Pj(e,t,n){var r=e.node(n),i=r.parent,a=!0,s=t.edge(n,i),o=0;return s||(a=!1,s=t.edge(i,n)),o=s.weight,An.forEach(t.nodeEdges(n),function(l){var u=l.v===n,c=u?l.w:l.v;if(c!==i){var d=u===a,f=t.edge(l).weight;if(o+=d?f:-f,k$(e,n,c)){var m=e.edge(n,c).cutvalue;o+=d?-m:m}}}),o}function ig(e,t){arguments.length<2&&(t=e.nodes()[0]),Nj(e,{},1,t)}function Nj(e,t,n,r,i){var a=n,s=e.node(r);return t[r]=!0,An.forEach(e.neighbors(r),function(o){An.has(t,o)||(n=Nj(e,t,n,o,r))}),s.low=a,s.lim=n++,i?s.parent=i:delete s.parent,n}function Aj(e){return An.find(e.edges(),function(t){return e.edge(t).cutvalue<0})}function Rj(e,t,n){var r=n.v,i=n.w;t.hasEdge(r,i)||(r=n.w,i=n.v);var a=e.node(r),s=e.node(i),o=a,l=!1;a.lim>s.lim&&(o=s,l=!0);var u=An.filter(t.edges(),function(c){return l===ok(e,e.node(c.v),o)&&l!==ok(e,e.node(c.w),o)});return An.minBy(u,function(c){return v$(t,c)})}function Ij(e,t,n,r){var i=n.v,a=n.w;e.removeEdge(i,a),e.setEdge(r.v,r.w,{}),ig(e),rg(e,t),_$(e,t)}function _$(e,t){var n=An.find(e.nodes(),function(i){return!t.node(i).parent}),r=g$(e,n);r=r.slice(1),An.forEach(r,function(i){var a=e.node(i).parent,s=t.edge(i,a),o=!1;s||(s=t.edge(a,i),o=!0),t.node(i).rank=t.node(a).rank+(o?s.minlen:-s.minlen)})}function k$(e,t,n){return e.hasEdge(t,n)}function ok(e,t,n){return n.low<=t.lim&&t.lim<=n.lim}var E$=Hl,Dj=E$.longestPath,C$=jj,T$=x$,M$=j$;function j$(e){switch(e.graph().ranker){case"network-simplex":lk(e);break;case"tight-tree":N$(e);break;case"longest-path":P$(e);break;default:lk(e)}}var P$=Dj;function N$(e){Dj(e),C$(e)}function lk(e){T$(e)}var lv=_e,A$=R$;function R$(e){var t=D$(e);lv.forEach(e.graph().dummyChains,function(n){for(var r=e.node(n),i=r.edgeObj,a=I$(e,t,i.v,i.w),s=a.path,o=a.lca,l=0,u=s[l],c=!0;n!==i.w;){if(r=e.node(n),c){for(;(u=s[l])!==o&&e.node(u).maxRank<r.rank;)l++;u===o&&(c=!1)}if(!c){for(;l<s.length-1&&e.node(u=s[l+1]).minRank<=r.rank;)l++;u=s[l]}e.setParent(n,u),n=e.successors(n)[0]}})}function I$(e,t,n,r){var i=[],a=[],s=Math.min(t[n].low,t[r].low),o=Math.max(t[n].lim,t[r].lim),l,u;l=n;do l=e.parent(l),i.push(l);while(l&&(t[l].low>s||o>t[l].lim));for(u=l,l=r;(l=e.parent(l))!==u;)a.push(l);return{path:i.concat(a.reverse()),lca:u}}function D$(e){var t={},n=0;function r(i){var a=n;lv.forEach(e.children(i),r),t[i]={low:a,lim:n++}}return lv.forEach(e.children(),r),t}var _n=_e,uv=yt,O$={run:L$,cleanup:V$};function L$(e){var t=uv.addDummyNode(e,"root",{},"_root"),n=q$(e),r=_n.max(_n.values(n))-1,i=2*r+1;e.graph().nestingRoot=t,_n.forEach(e.edges(),function(s){e.edge(s).minlen*=i});var a=F$(e)+1;_n.forEach(e.children(),function(s){Oj(e,t,i,a,r,n,s)}),e.graph().nodeRankFactor=i}function Oj(e,t,n,r,i,a,s){var o=e.children(s);if(!o.length){s!==t&&e.setEdge(t,s,{weight:0,minlen:n});return}var l=uv.addBorderNode(e,"_bt"),u=uv.addBorderNode(e,"_bb"),c=e.node(s);e.setParent(l,s),c.borderTop=l,e.setParent(u,s),c.borderBottom=u,_n.forEach(o,function(d){Oj(e,t,n,r,i,a,d);var f=e.node(d),m=f.borderTop?f.borderTop:d,v=f.borderBottom?f.borderBottom:d,p=f.borderTop?r:2*r,b=m!==v?1:i-a[s]+1;e.setEdge(l,m,{weight:p,minlen:b,nestingEdge:!0}),e.setEdge(v,u,{weight:p,minlen:b,nestingEdge:!0})}),e.parent(s)||e.setEdge(t,l,{weight:0,minlen:i+a[s]})}function q$(e){var t={};function n(r,i){var a=e.children(r);a&&a.length&&_n.forEach(a,function(s){n(s,i+1)}),t[r]=i}return _n.forEach(e.children(),function(r){n(r,1)}),t}function F$(e){return _n.reduce(e.edges(),function(t,n){return t+e.edge(n).weight},0)}function V$(e){var t=e.graph();e.removeNode(t.nestingRoot),delete t.nestingRoot,_n.forEach(e.edges(),function(n){var r=e.edge(n);r.nestingEdge&&e.removeEdge(n)})}var Gp=_e,$$=yt,B$=z$;function z$(e){function t(n){var r=e.children(n),i=e.node(n);if(r.length&&Gp.forEach(r,t),Gp.has(i,"minRank")){i.borderLeft=[],i.borderRight=[];for(var a=i.minRank,s=i.maxRank+1;a<s;++a)uk(e,"borderLeft","_bl",n,i,a),uk(e,"borderRight","_br",n,i,a)}}Gp.forEach(e.children(),t)}function uk(e,t,n,r,i,a){var s={width:0,height:0,rank:a,borderType:t},o=i[t][a-1],l=$$.addDummyNode(e,"border",s,n);i[t][a]=l,e.setParent(l,r),o&&e.setEdge(o,l,{weight:1})}var sn=_e,U$={adjust:G$,undo:H$};function G$(e){var t=e.graph().rankdir.toLowerCase();(t==="lr"||t==="rl")&&Lj(e)}function H$(e){var t=e.graph().rankdir.toLowerCase();(t==="bt"||t==="rl")&&W$(e),(t==="lr"||t==="rl")&&(K$(e),Lj(e))}function Lj(e){sn.forEach(e.nodes(),function(t){ck(e.node(t))}),sn.forEach(e.edges(),function(t){ck(e.edge(t))})}function ck(e){var t=e.width;e.width=e.height,e.height=t}function W$(e){sn.forEach(e.nodes(),function(t){Hp(e.node(t))}),sn.forEach(e.edges(),function(t){var n=e.edge(t);sn.forEach(n.points,Hp),sn.has(n,"y")&&Hp(n)})}function Hp(e){e.y=-e.y}function K$(e){sn.forEach(e.nodes(),function(t){Wp(e.node(t))}),sn.forEach(e.edges(),function(t){var n=e.edge(t);sn.forEach(n.points,Wp),sn.has(n,"x")&&Wp(n)})}function Wp(e){var t=e.x;e.x=e.y,e.y=t}var vn=_e,Y$=Q$;function Q$(e){var t={},n=vn.filter(e.nodes(),function(o){return!e.children(o).length}),r=vn.max(vn.map(n,function(o){return e.node(o).rank})),i=vn.map(vn.range(r+1),function(){return[]});function a(o){if(!vn.has(t,o)){t[o]=!0;var l=e.node(o);i[l.rank].push(o),vn.forEach(e.successors(o),a)}}var s=vn.sortBy(n,function(o){return e.node(o).rank});return vn.forEach(s,a),i}var zn=_e,X$=J$;function J$(e,t){for(var n=0,r=1;r<t.length;++r)n+=Z$(e,t[r-1],t[r]);return n}function Z$(e,t,n){for(var r=zn.zipObject(n,zn.map(n,function(u,c){return c})),i=zn.flatten(zn.map(t,function(u){return zn.sortBy(zn.map(e.outEdges(u),function(c){return{pos:r[c.w],weight:e.edge(c).weight}}),"pos")}),!0),a=1;a<n.length;)a<<=1;var s=2*a-1;a-=1;var o=zn.map(new Array(s),function(){return 0}),l=0;return zn.forEach(i.forEach(function(u){var c=u.pos+a;o[c]+=u.weight;for(var d=0;c>0;)c%2&&(d+=o[c+1]),c=c-1>>1,o[c]+=u.weight;l+=u.weight*d})),l}var dk=_e,eB=tB;function tB(e,t){return dk.map(t,function(n){var r=e.inEdges(n);if(r.length){var i=dk.reduce(r,function(a,s){var o=e.edge(s),l=e.node(s.v);return{sum:a.sum+o.weight*l.order,weight:a.weight+o.weight}},{sum:0,weight:0});return{v:n,barycenter:i.sum/i.weight,weight:i.weight}}else return{v:n}})}var bt=_e,nB=rB;function rB(e,t){var n={};bt.forEach(e,function(i,a){var s=n[i.v]={indegree:0,in:[],out:[],vs:[i.v],i:a};bt.isUndefined(i.barycenter)||(s.barycenter=i.barycenter,s.weight=i.weight)}),bt.forEach(t.edges(),function(i){var a=n[i.v],s=n[i.w];!bt.isUndefined(a)&&!bt.isUndefined(s)&&(s.indegree++,a.out.push(n[i.w]))});var r=bt.filter(n,function(i){return!i.indegree});return iB(r)}function iB(e){var t=[];function n(a){return function(s){s.merged||(bt.isUndefined(s.barycenter)||bt.isUndefined(a.barycenter)||s.barycenter>=a.barycenter)&&aB(a,s)}}function r(a){return function(s){s.in.push(a),--s.indegree===0&&e.push(s)}}for(;e.length;){var i=e.pop();t.push(i),bt.forEach(i.in.reverse(),n(i)),bt.forEach(i.out,r(i))}return bt.map(bt.filter(t,function(a){return!a.merged}),function(a){return bt.pick(a,["vs","i","barycenter","weight"])})}function aB(e,t){var n=0,r=0;e.weight&&(n+=e.barycenter*e.weight,r+=e.weight),t.weight&&(n+=t.barycenter*t.weight,r+=t.weight),e.vs=t.vs.concat(e.vs),e.barycenter=n/r,e.weight=r,e.i=Math.min(t.i,e.i),t.merged=!0}var Ma=_e,sB=yt,oB=lB;function lB(e,t){var n=sB.partition(e,function(c){return Ma.has(c,"barycenter")}),r=n.lhs,i=Ma.sortBy(n.rhs,function(c){return-c.i}),a=[],s=0,o=0,l=0;r.sort(uB(!!t)),l=fk(a,i,l),Ma.forEach(r,function(c){l+=c.vs.length,a.push(c.vs),s+=c.barycenter*c.weight,o+=c.weight,l=fk(a,i,l)});var u={vs:Ma.flatten(a,!0)};return o&&(u.barycenter=s/o,u.weight=o),u}function fk(e,t,n){for(var r;t.length&&(r=Ma.last(t)).i<=n;)t.pop(),e.push(r.vs),n++;return n}function uB(e){return function(t,n){return t.barycenter<n.barycenter?-1:t.barycenter>n.barycenter?1:e?n.i-t.i:t.i-n.i}}var Qn=_e,cB=eB,dB=nB,fB=oB,hB=qj;function qj(e,t,n,r){var i=e.children(t),a=e.node(t),s=a?a.borderLeft:void 0,o=a?a.borderRight:void 0,l={};s&&(i=Qn.filter(i,function(v){return v!==s&&v!==o}));var u=cB(e,i);Qn.forEach(u,function(v){if(e.children(v.v).length){var p=qj(e,v.v,n,r);l[v.v]=p,Qn.has(p,"barycenter")&&mB(v,p)}});var c=dB(u,n);pB(c,l);var d=fB(c,r);if(s&&(d.vs=Qn.flatten([s,d.vs,o],!0),e.predecessors(s).length)){var f=e.node(e.predecessors(s)[0]),m=e.node(e.predecessors(o)[0]);Qn.has(d,"barycenter")||(d.barycenter=0,d.weight=0),d.barycenter=(d.barycenter*d.weight+f.order+m.order)/(d.weight+2),d.weight+=2}return d}function pB(e,t){Qn.forEach(e,function(n){n.vs=Qn.flatten(n.vs.map(function(r){return t[r]?t[r].vs:r}),!0)})}function mB(e,t){Qn.isUndefined(e.barycenter)?(e.barycenter=t.barycenter,e.weight=t.weight):(e.barycenter=(e.barycenter*e.weight+t.barycenter*t.weight)/(e.weight+t.weight),e.weight+=t.weight)}var ja=_e,vB=Jt.Graph,yB=gB;function gB(e,t,n){var r=wB(e),i=new vB({compound:!0}).setGraph({root:r}).setDefaultNodeLabel(function(a){return e.node(a)});return ja.forEach(e.nodes(),function(a){var s=e.node(a),o=e.parent(a);(s.rank===t||s.minRank<=t&&t<=s.maxRank)&&(i.setNode(a),i.setParent(a,o||r),ja.forEach(e[n](a),function(l){var u=l.v===a?l.w:l.v,c=i.edge(u,a),d=ja.isUndefined(c)?0:c.weight;i.setEdge(u,a,{weight:e.edge(l).weight+d})}),ja.has(s,"minRank")&&i.setNode(a,{borderLeft:s.borderLeft[t],borderRight:s.borderRight[t]}))}),i}function wB(e){for(var t;e.hasNode(t=ja.uniqueId("_root")););return t}var bB=_e,xB=SB;function SB(e,t,n){var r={},i;bB.forEach(n,function(a){for(var s=e.parent(a),o,l;s;){if(o=e.parent(s),o?(l=r[o],r[o]=s):(l=i,i=s),l&&l!==s){t.setEdge(l,s);return}s=o}})}var or=_e,_B=Y$,kB=X$,EB=hB,CB=yB,TB=xB,MB=Jt.Graph,hk=yt,jB=PB;function PB(e){var t=hk.maxRank(e),n=pk(e,or.range(1,t+1),"inEdges"),r=pk(e,or.range(t-1,-1,-1),"outEdges"),i=_B(e);mk(e,i);for(var a=Number.POSITIVE_INFINITY,s,o=0,l=0;l<4;++o,++l){NB(o%2?n:r,o%4>=2),i=hk.buildLayerMatrix(e);var u=kB(e,i);u<a&&(l=0,s=or.cloneDeep(i),a=u)}mk(e,s)}function pk(e,t,n){return or.map(t,function(r){return CB(e,r,n)})}function NB(e,t){var n=new MB;or.forEach(e,function(r){var i=r.graph().root,a=EB(r,i,n,t);or.forEach(a.vs,function(s,o){r.node(s).order=o}),TB(r,n,a.vs)})}function mk(e,t){or.forEach(t,function(n){or.forEach(n,function(r,i){e.node(r).order=i})})}var Y=_e,AB=Jt.Graph,RB=yt,IB={positionX:GB};function DB(e,t){var n={};function r(i,a){var s=0,o=0,l=i.length,u=Y.last(a);return Y.forEach(a,function(c,d){var f=LB(e,c),m=f?e.node(f).order:l;(f||c===u)&&(Y.forEach(a.slice(o,d+1),function(v){Y.forEach(e.predecessors(v),function(p){var b=e.node(p),y=b.order;(y<s||m<y)&&!(b.dummy&&e.node(v).dummy)&&Fj(n,p,v)})}),o=d+1,s=m)}),a}return Y.reduce(t,r),n}function OB(e,t){var n={};function r(a,s,o,l,u){var c;Y.forEach(Y.range(s,o),function(d){c=a[d],e.node(c).dummy&&Y.forEach(e.predecessors(c),function(f){var m=e.node(f);m.dummy&&(m.order<l||m.order>u)&&Fj(n,f,c)})})}function i(a,s){var o=-1,l,u=0;return Y.forEach(s,function(c,d){if(e.node(c).dummy==="border"){var f=e.predecessors(c);f.length&&(l=e.node(f[0]).order,r(s,u,d,o,l),u=d,o=l)}r(s,u,s.length,l,a.length)}),s}return Y.reduce(t,i),n}function LB(e,t){if(e.node(t).dummy)return Y.find(e.predecessors(t),function(n){return e.node(n).dummy})}function Fj(e,t,n){if(t>n){var r=t;t=n,n=r}var i=e[t];i||(e[t]=i={}),i[n]=!0}function qB(e,t,n){if(t>n){var r=t;t=n,n=r}return Y.has(e[t],n)}function FB(e,t,n,r){var i={},a={},s={};return Y.forEach(t,function(o){Y.forEach(o,function(l,u){i[l]=l,a[l]=l,s[l]=u})}),Y.forEach(t,function(o){var l=-1;Y.forEach(o,function(u){var c=r(u);if(c.length){c=Y.sortBy(c,function(p){return s[p]});for(var d=(c.length-1)/2,f=Math.floor(d),m=Math.ceil(d);f<=m;++f){var v=c[f];a[u]===u&&l<s[v]&&!qB(n,u,v)&&(a[v]=u,a[u]=i[u]=i[v],l=s[v])}}})}),{root:i,align:a}}function VB(e,t,n,r,i){var a={},s=$B(e,t,n,i),o=i?"borderLeft":"borderRight";function l(d,f){for(var m=s.nodes(),v=m.pop(),p={};v;)p[v]?d(v):(p[v]=!0,m.push(v),m=m.concat(f(v))),v=m.pop()}function u(d){a[d]=s.inEdges(d).reduce(function(f,m){return Math.max(f,a[m.v]+s.edge(m))},0)}function c(d){var f=s.outEdges(d).reduce(function(v,p){return Math.min(v,a[p.w]-s.edge(p))},Number.POSITIVE_INFINITY),m=e.node(d);f!==Number.POSITIVE_INFINITY&&m.borderType!==o&&(a[d]=Math.max(a[d],f))}return l(u,s.predecessors.bind(s)),l(c,s.successors.bind(s)),Y.forEach(r,function(d){a[d]=a[n[d]]}),a}function $B(e,t,n,r){var i=new AB,a=e.graph(),s=HB(a.nodesep,a.edgesep,r);return Y.forEach(t,function(o){var l;Y.forEach(o,function(u){var c=n[u];if(i.setNode(c),l){var d=n[l],f=i.edge(d,c);i.setEdge(d,c,Math.max(s(e,u,l),f||0))}l=u})}),i}function BB(e,t){return Y.minBy(Y.values(t),function(n){var r=Number.NEGATIVE_INFINITY,i=Number.POSITIVE_INFINITY;return Y.forIn(n,function(a,s){var o=WB(e,s)/2;r=Math.max(a+o,r),i=Math.min(a-o,i)}),r-i})}function zB(e,t){var n=Y.values(t),r=Y.min(n),i=Y.max(n);Y.forEach(["u","d"],function(a){Y.forEach(["l","r"],function(s){var o=a+s,l=e[o],u;if(l!==t){var c=Y.values(l);u=s==="l"?r-Y.min(c):i-Y.max(c),u&&(e[o]=Y.mapValues(l,function(d){return d+u}))}})})}function UB(e,t){return Y.mapValues(e.ul,function(n,r){if(t)return e[t.toLowerCase()][r];var i=Y.sortBy(Y.map(e,r));return(i[1]+i[2])/2})}function GB(e){var t=RB.buildLayerMatrix(e),n=Y.merge(DB(e,t),OB(e,t)),r={},i;Y.forEach(["u","d"],function(s){i=s==="u"?t:Y.values(t).reverse(),Y.forEach(["l","r"],function(o){o==="r"&&(i=Y.map(i,function(d){return Y.values(d).reverse()}));var l=(s==="u"?e.predecessors:e.successors).bind(e),u=FB(e,i,n,l),c=VB(e,i,u.root,u.align,o==="r");o==="r"&&(c=Y.mapValues(c,function(d){return-d})),r[s+o]=c})});var a=BB(e,r);return zB(r,a),UB(r,e.graph().align)}function HB(e,t,n){return function(r,i,a){var s=r.node(i),o=r.node(a),l=0,u;if(l+=s.width/2,Y.has(s,"labelpos"))switch(s.labelpos.toLowerCase()){case"l":u=-s.width/2;break;case"r":u=s.width/2;break}if(u&&(l+=n?u:-u),u=0,l+=(s.dummy?t:e)/2,l+=(o.dummy?t:e)/2,l+=o.width/2,Y.has(o,"labelpos"))switch(o.labelpos.toLowerCase()){case"l":u=o.width/2;break;case"r":u=-o.width/2;break}return u&&(l+=n?u:-u),u=0,l}}function WB(e,t){return e.node(t).width}var Pa=_e,Vj=yt,KB=IB.positionX,YB=QB;function QB(e){e=Vj.asNonCompoundGraph(e),XB(e),Pa.forEach(KB(e),function(t,n){e.node(n).x=t})}function XB(e){var t=Vj.buildLayerMatrix(e),n=e.graph().ranksep,r=0;Pa.forEach(t,function(i){var a=Pa.max(Pa.map(i,function(s){return e.node(s).height}));Pa.forEach(i,function(s){e.node(s).y=r+a/2}),r+=a+n})}var Z=_e,vk=$3,yk=i$,JB=M$,ZB=yt.normalizeRanks,e4=A$,t4=yt.removeEmptyRanks,gk=O$,n4=B$,wk=U$,r4=jB,i4=YB,fr=yt,a4=Jt.Graph,s4=o4;function o4(e,t){var n=t&&t.debugTiming?fr.time:fr.notime;n("layout",function(){var r=n("  buildLayoutGraph",function(){return g4(e)});n("  runLayout",function(){l4(r,n)}),n("  updateInputGraph",function(){u4(e,r)})})}function l4(e,t){t("    makeSpaceForEdgeLabels",function(){w4(e)}),t("    removeSelfEdges",function(){M4(e)}),t("    acyclic",function(){vk.run(e)}),t("    nestingGraph.run",function(){gk.run(e)}),t("    rank",function(){JB(fr.asNonCompoundGraph(e))}),t("    injectEdgeLabelProxies",function(){b4(e)}),t("    removeEmptyRanks",function(){t4(e)}),t("    nestingGraph.cleanup",function(){gk.cleanup(e)}),t("    normalizeRanks",function(){ZB(e)}),t("    assignRankMinMax",function(){x4(e)}),t("    removeEdgeLabelProxies",function(){S4(e)}),t("    normalize.run",function(){yk.run(e)}),t("    parentDummyChains",function(){e4(e)}),t("    addBorderSegments",function(){n4(e)}),t("    order",function(){r4(e)}),t("    insertSelfEdges",function(){j4(e)}),t("    adjustCoordinateSystem",function(){wk.adjust(e)}),t("    position",function(){i4(e)}),t("    positionSelfEdges",function(){P4(e)}),t("    removeBorderNodes",function(){T4(e)}),t("    normalize.undo",function(){yk.undo(e)}),t("    fixupEdgeLabelCoords",function(){E4(e)}),t("    undoCoordinateSystem",function(){wk.undo(e)}),t("    translateGraph",function(){_4(e)}),t("    assignNodeIntersects",function(){k4(e)}),t("    reversePoints",function(){C4(e)}),t("    acyclic.undo",function(){vk.undo(e)})}function u4(e,t){Z.forEach(e.nodes(),function(n){var r=e.node(n),i=t.node(n);r&&(r.x=i.x,r.y=i.y,t.children(n).length&&(r.width=i.width,r.height=i.height))}),Z.forEach(e.edges(),function(n){var r=e.edge(n),i=t.edge(n);r.points=i.points,Z.has(i,"x")&&(r.x=i.x,r.y=i.y)}),e.graph().width=t.graph().width,e.graph().height=t.graph().height}var c4=["nodesep","edgesep","ranksep","marginx","marginy"],d4={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},f4=["acyclicer","ranker","rankdir","align"],h4=["width","height"],p4={width:0,height:0},m4=["minlen","weight","width","height","labeloffset"],v4={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},y4=["labelpos"];function g4(e){var t=new a4({multigraph:!0,compound:!0}),n=Yp(e.graph());return t.setGraph(Z.merge({},d4,Kp(n,c4),Z.pick(n,f4))),Z.forEach(e.nodes(),function(r){var i=Yp(e.node(r));t.setNode(r,Z.defaults(Kp(i,h4),p4)),t.setParent(r,e.parent(r))}),Z.forEach(e.edges(),function(r){var i=Yp(e.edge(r));t.setEdge(r,Z.merge({},v4,Kp(i,m4),Z.pick(i,y4)))}),t}function w4(e){var t=e.graph();t.ranksep/=2,Z.forEach(e.edges(),function(n){var r=e.edge(n);r.minlen*=2,r.labelpos.toLowerCase()!=="c"&&(t.rankdir==="TB"||t.rankdir==="BT"?r.width+=r.labeloffset:r.height+=r.labeloffset)})}function b4(e){Z.forEach(e.edges(),function(t){var n=e.edge(t);if(n.width&&n.height){var r=e.node(t.v),i=e.node(t.w),a={rank:(i.rank-r.rank)/2+r.rank,e:t};fr.addDummyNode(e,"edge-proxy",a,"_ep")}})}function x4(e){var t=0;Z.forEach(e.nodes(),function(n){var r=e.node(n);r.borderTop&&(r.minRank=e.node(r.borderTop).rank,r.maxRank=e.node(r.borderBottom).rank,t=Z.max(t,r.maxRank))}),e.graph().maxRank=t}function S4(e){Z.forEach(e.nodes(),function(t){var n=e.node(t);n.dummy==="edge-proxy"&&(e.edge(n.e).labelRank=n.rank,e.removeNode(t))})}function _4(e){var t=Number.POSITIVE_INFINITY,n=0,r=Number.POSITIVE_INFINITY,i=0,a=e.graph(),s=a.marginx||0,o=a.marginy||0;function l(u){var c=u.x,d=u.y,f=u.width,m=u.height;t=Math.min(t,c-f/2),n=Math.max(n,c+f/2),r=Math.min(r,d-m/2),i=Math.max(i,d+m/2)}Z.forEach(e.nodes(),function(u){l(e.node(u))}),Z.forEach(e.edges(),function(u){var c=e.edge(u);Z.has(c,"x")&&l(c)}),t-=s,r-=o,Z.forEach(e.nodes(),function(u){var c=e.node(u);c.x-=t,c.y-=r}),Z.forEach(e.edges(),function(u){var c=e.edge(u);Z.forEach(c.points,function(d){d.x-=t,d.y-=r}),Z.has(c,"x")&&(c.x-=t),Z.has(c,"y")&&(c.y-=r)}),a.width=n-t+s,a.height=i-r+o}function k4(e){Z.forEach(e.edges(),function(t){var n=e.edge(t),r=e.node(t.v),i=e.node(t.w),a,s;n.points?(a=n.points[0],s=n.points[n.points.length-1]):(n.points=[],a=i,s=r),n.points.unshift(fr.intersectRect(r,a)),n.points.push(fr.intersectRect(i,s))})}function E4(e){Z.forEach(e.edges(),function(t){var n=e.edge(t);if(Z.has(n,"x"))switch((n.labelpos==="l"||n.labelpos==="r")&&(n.width-=n.labeloffset),n.labelpos){case"l":n.x-=n.width/2+n.labeloffset;break;case"r":n.x+=n.width/2+n.labeloffset;break}})}function C4(e){Z.forEach(e.edges(),function(t){var n=e.edge(t);n.reversed&&n.points.reverse()})}function T4(e){Z.forEach(e.nodes(),function(t){if(e.children(t).length){var n=e.node(t),r=e.node(n.borderTop),i=e.node(n.borderBottom),a=e.node(Z.last(n.borderLeft)),s=e.node(Z.last(n.borderRight));n.width=Math.abs(s.x-a.x),n.height=Math.abs(i.y-r.y),n.x=a.x+n.width/2,n.y=r.y+n.height/2}}),Z.forEach(e.nodes(),function(t){e.node(t).dummy==="border"&&e.removeNode(t)})}function M4(e){Z.forEach(e.edges(),function(t){if(t.v===t.w){var n=e.node(t.v);n.selfEdges||(n.selfEdges=[]),n.selfEdges.push({e:t,label:e.edge(t)}),e.removeEdge(t)}})}function j4(e){var t=fr.buildLayerMatrix(e);Z.forEach(t,function(n){var r=0;Z.forEach(n,function(i,a){var s=e.node(i);s.order=a+r,Z.forEach(s.selfEdges,function(o){fr.addDummyNode(e,"selfedge",{width:o.label.width,height:o.label.height,rank:s.rank,order:a+ ++r,e:o.e,label:o.label},"_se")}),delete s.selfEdges})})}function P4(e){Z.forEach(e.nodes(),function(t){var n=e.node(t);if(n.dummy==="selfedge"){var r=e.node(n.e.v),i=r.x+r.width/2,a=r.y,s=n.x-i,o=r.height/2;e.setEdge(n.e,n.label),e.removeNode(t),n.label.points=[{x:i+2*s/3,y:a-o},{x:i+5*s/6,y:a-o},{x:i+s,y:a},{x:i+5*s/6,y:a+o},{x:i+2*s/3,y:a+o}],n.label.x=n.x,n.label.y=n.y}})}function Kp(e,t){return Z.mapValues(Z.pick(e,t),Number)}function Yp(e){var t={};return Z.forEach(e,function(n,r){t[r.toLowerCase()]=n}),t}var ao=_e,N4=yt,A4=Jt.Graph,R4={debugOrdering:I4};function I4(e){var t=N4.buildLayerMatrix(e),n=new A4({compound:!0,multigraph:!0}).setGraph({});return ao.forEach(e.nodes(),function(r){n.setNode(r,{label:r}),n.setParent(r,"layer"+e.node(r).rank)}),ao.forEach(e.edges(),function(r){n.setEdge(r.v,r.w,{},r.name)}),ao.forEach(t,function(r,i){var a="layer"+i;n.setNode(a,{rank:"same"}),ao.reduce(r,function(s,o){return n.setEdge(s,o,{style:"invis"}),o})}),n}var D4="0.8.5",O4={graphlib:Jt,layout:s4,debug:R4,util:{time:yt.time,notime:yt.notime},version:D4};const bk=Ak(O4),xk=new Map;function L4(e,t){const n=e.map(i=>i.id).join("|"),r=t.map(i=>`${i.source}->${i.target}`).join("|");return`${e.length}:${t.length}:${n}:${r}`}function q4(e,t,n){if(n){const r=L4(e,t),i=xk.get(n);if(i&&i.signature===r)return i.layout;const a=Sk(e,t);return xk.set(n,{signature:r,layout:a}),a}return Sk(e,t)}function Sk(e,t){if(e.length>2500){const r=Math.ceil(Math.sqrt(e.length));return e.map((i,a)=>{const s=Math.floor(a/r),o=a%r;return{id:i.id,position:{x:o*260,y:s*160}}})}const n=new bk.graphlib.Graph;return n.setGraph({rankdir:"LR",nodesep:48,ranksep:80}),n.setDefaultEdgeLabel(()=>({})),e.forEach(r=>{n.setNode(r.id,{width:220,height:120})}),t.forEach(r=>{n.setEdge(r.source,r.target)}),bk.layout(n),e.map(r=>{const i=n.node(r.id);return{id:r.id,position:{x:i.x-i.width/2,y:i.y-i.height/2}}})}const $j="agentDirector.gameplayFunnel.v1";function F4(){try{const e=window.localStorage.getItem($j);if(!e)return[];const t=JSON.parse(e);return Array.isArray(t)?t.filter(n=>{if(!n||typeof n!="object")return!1;const r=n;return typeof r.name=="string"&&typeof r.at=="number"&&!!r.metadata&&typeof r.metadata=="object"}):[]}catch{return[]}}function V4(e,t={}){const n={name:e,at:Date.now(),metadata:t},i=[...F4(),n].slice(-200);return window.localStorage.setItem($j,JSON.stringify(i)),n}function $4(e){const t=new Map;for(const r of e)r.type==="tool_call"&&r.toolCallId&&t.set(r.toolCallId,r.id);const n=[];for(const r of e)if(!(r.type!=="llm_call"||!r.io)){for(const i of r.io.emittedToolCallIds??[]){const a=t.get(i);a&&n.push({id:`io_emit_${r.id}_${a}`,source:r.id,target:a,kind:"io",toolCallId:i})}for(const i of r.io.consumedToolCallIds??[]){const a=t.get(i);a&&n.push({id:`io_consume_${a}_${r.id}`,source:a,target:r.id,kind:"io",toolCallId:i})}}return n}function B4(e,t,n){const{intervals:r}=xl(e,t,n),i=new Set;return r.forEach(a=>{i.add(a.startMs),i.add(a.endMs)}),Array.from(i).sort((a,s)=>a-s)}function z4(e,t,n){if(!e.length)return null;if(n===1){for(const r of e)if(r>t+1)return r;return e[e.length-1]}for(let r=e.length-1;r>=0;r-=1){const i=e[r];if(i<t-1)return i}return e[0]}const U4=300,G4=2e3,H4=1.5;function W4(e){const t=U4*Math.pow(H4,Math.max(0,e));return Math.min(G4,Math.round(t))}function Un(e,t){if(!e)return t;try{return JSON.parse(e)}catch{return t}}function _k(e,t){const n=new Map;return[...e,...t].forEach(r=>{const i=n.get(r.id);(!i||r.updatedAt>=i.updatedAt)&&n.set(r.id,r)}),Array.from(n.values()).sort((r,i)=>r.createdAt-i.createdAt)}function kk(e,t=50){return[...e].sort((n,r)=>r.timestamp-n.timestamp).slice(0,t)}const K4=[{minDepth:1,maxDepth:1,difficulty:1},{minDepth:2,maxDepth:3,difficulty:2},{minDepth:4,maxDepth:5,difficulty:3},{minDepth:6,maxDepth:7,difficulty:4},{minDepth:8,maxDepth:9,difficulty:5},{minDepth:10,maxDepth:12,difficulty:6},{minDepth:13,maxDepth:16,difficulty:7},{minDepth:17,maxDepth:20,difficulty:8},{minDepth:21,maxDepth:24,difficulty:9},{minDepth:25,maxDepth:Number.MAX_SAFE_INTEGER,difficulty:10}],so=["latency storm","cache divergence","tool timeout chain","stale prompt vector","schema mismatch surge"],Ek=[{id:"seasonal-incident-sprint",title:"Resolve 3 raid objectives",goal:3,rewardCredits:120},{id:"boss-shutdown",title:"Defeat one boss encounter",goal:1,rewardCredits:200},{id:"guild-push",title:"Complete 2 guild operations",goal:2,rewardCredits:160},{id:"timeline-weaver",title:"Merge 2 timeline forks",goal:2,rewardCredits:150}],Y4={stability_patch:{credits:20,materials:12},precision_lens:{credits:28,materials:16},overclock_core:{credits:42,materials:24}};function we(e,t,n){return Math.min(n,Math.max(t,e))}function Q4(e){let t=0;for(let n=0;n<e.length;n+=1)t=(t*31+e.charCodeAt(n))%1e5;return t}function Bj(e,t,n){const r=so[(e+t)%so.length],i=so[(e+t+2)%so.length];return{id:`mission-${t}-${(e+t)%997}`,title:`Scenario Depth ${t}`,difficulty:X4(t),hazards:[r,i,...n.slice(-1)],rewardCredits:60+t*15}}function X4(e){var n;const t=Math.max(1,Math.floor(e));return((n=K4.find(r=>t>=r.minDepth&&t<=r.maxDepth))==null?void 0:n.difficulty)??10}function J4(){return[{id:"node-alpha",title:"Signal Fracture",body:"Telemetry divergence emerges across parallel tool paths.",choices:[{id:"alpha-risk",label:"Push aggressive branch optimization",nextNodeId:"node-beta",tensionDelta:12,mutator:"risk-surge"},{id:"alpha-safe",label:"Stabilize and preserve deterministic flow",nextNodeId:"node-beta",tensionDelta:-5,mutator:"stability-first"}]},{id:"node-beta",title:"Protocol Fork",body:"The team must choose speed versus interpretability under pressure.",choices:[{id:"beta-speed",label:"Favor speed and absorb uncertainty",nextNodeId:"node-gamma",tensionDelta:8,mutator:"throughput-boost"},{id:"beta-clarity",label:"Favor clarity and route through guardrails",nextNodeId:"node-gamma",tensionDelta:-3,mutator:"clarity-path"}]},{id:"node-gamma",title:"Final Directive",body:"Command has one move left before the run locks in.",choices:[{id:"gamma-strike",label:"Launch decisive strike sequence",nextNodeId:"node-alpha",tensionDelta:10,mutator:"strike-loop"},{id:"gamma-reset",label:"Reset tempo and rebuild confidence",nextNodeId:"node-alpha",tensionDelta:-6,mutator:"tempo-reset"}]}]}function zj(e,t){return{...Ek[(e+t)%Ek.length],progress:0,completed:!1}}function Uj(e,t){const n=[...e,t];return Array.from(new Set(n)).slice(-6)}function cv(e,t,n){return{...e,campaign:{...e.campaign,depth:t,mutators:n,currentMission:Bj(e.seed,t,n)}}}function Ck(e){const t=Q4(e),n=["baseline"];return{seed:t,raid:{party:["director"],roles:{director:"strategist"},objectives:[{id:"obj-root-cause",label:"Identify root cause chain",progress:0,target:100,completed:!1},{id:"obj-recover",label:"Recover operational stability",progress:0,target:100,completed:!1},{id:"obj-harden",label:"Harden replay strategy",progress:0,target:100,completed:!1}],completed:!1},campaign:{depth:1,lives:3,completedMissionIds:[],mutators:n,currentMission:Bj(t,1,n)},narrative:{currentNodeId:"node-alpha",nodes:J4(),history:[],tension:35},skills:{points:6,nodes:[{id:"skill-focus",label:"Focus Matrix",cost:2,requires:[],unlocked:!1},{id:"skill-resilience",label:"Resilience Mesh",cost:2,requires:[],unlocked:!1},{id:"skill-surge",label:"Surge Compiler",cost:3,requires:["skill-focus"],unlocked:!1},{id:"skill-echo",label:"Echo Anticipator",cost:3,requires:["skill-resilience"],unlocked:!1}],loadout:{capacity:3,equipped:[]}},pvp:{round:0,stability:72,sabotage:28,fog:40,winner:null},time:{activeForkId:"primary",forks:[{id:"primary",label:"Primary timeline",playheadMs:0,history:[0]}]},boss:{name:"The Causality Hydra",phase:1,hp:320,maxHp:320,enraged:!1},director:{risk:30,hint:"Start with the bottleneck path and branch cautiously.",recommendedModifier:"stability_patch",lastOutcome:"mixed"},economy:{credits:140,materials:90,crafted:[]},guild:{name:"Trace Guild",members:4,operationsScore:0,eventsCompleted:0},cinematic:{queue:[]},liveops:{season:`Season-${2026+t%2}`,week:1,challenge:zj(t,1),difficultyFactor:1,rewardMultiplier:1,tuningHistory:[]},safety:{mutedPlayerIds:[],blockedPlayerIds:[],reports:[]},outcome:{status:"in_progress",reason:"Run started. Complete missions and stabilize the incident.",updatedAt:Date.now()}}}function vz(e,t,n){if(!t.trim())return e;const r=e.raid.party.includes(t)?e.raid.party:[...e.raid.party,t];return{...e,raid:{...e.raid,party:r,roles:{...e.raid.roles,[t]:n}}}}function yz(e,t,n){const r=og(e),i=e.raid.objectives.map(o=>{if(o.id!==t)return o;const l=we(o.progress+n,0,o.target);return{...o,progress:l,completed:l>=o.target}}),a=i.every(o=>o.completed),s=a&&!e.raid.completed?180:0;return{...e,raid:{...e.raid,objectives:i,completed:a},economy:{...e.economy,credits:e.economy.credits+s},outcome:a&&!e.raid.completed?{status:"partial",reason:"Raid objectives completed. Push campaign and boss tracks to close the run.",updatedAt:Date.now()}:r}}function gz(e,t){const n=e.campaign.currentMission;if(t){const s=e.campaign.depth+1,o=cv(e,s,e.campaign.mutators),l=s>=5?{status:"win",reason:"Campaign depth target reached. Incident run is stabilized.",updatedAt:Date.now()}:{status:"partial",reason:`Mission ${n.id} cleared. Advance deeper to secure the run.`,updatedAt:Date.now()};return{...o,campaign:{...o.campaign,completedMissionIds:[...o.campaign.completedMissionIds,n.id]},economy:{...o.economy,credits:o.economy.credits+n.rewardCredits,materials:o.economy.materials+14},director:{...o.director,lastOutcome:"success"},outcome:l}}const r=we(e.campaign.lives-1,0,3),i=cv(e,e.campaign.depth,Uj(e.campaign.mutators,"failure-loop")),a=r<=0?{status:"loss",reason:"No campaign lives remaining. Incident run failed.",updatedAt:Date.now()}:{status:"partial",reason:`Mission failed. ${r} campaign lives remaining.`,updatedAt:Date.now()};return{...i,campaign:{...i.campaign,lives:r},director:{...i.director,lastOutcome:"failure"},outcome:a}}function wz(e,t){const n=e.narrative.nodes.find(o=>o.id===e.narrative.currentNodeId),r=n==null?void 0:n.choices.find(o=>o.id===t);if(!n||!r)return e;const i=we(e.narrative.tension+r.tensionDelta,0,100),a=Uj(e.campaign.mutators,r.mutator),s=cv(e,e.campaign.depth,a);return{...s,narrative:{...s.narrative,currentNodeId:r.nextNodeId,history:[...s.narrative.history,{nodeId:n.id,choiceId:r.id}],tension:i}}}function bz(e,t){const n=e.skills.nodes.find(a=>a.id===t);if(!n||n.unlocked)return e;const r=new Set(e.skills.nodes.filter(a=>a.unlocked).map(a=>a.id));return!n.requires.every(a=>r.has(a))||e.skills.points<n.cost?e:{...e,skills:{...e.skills,points:e.skills.points-n.cost,nodes:e.skills.nodes.map(a=>a.id===t?{...a,unlocked:!0}:a)}}}function xz(e,t){const n=e.skills.nodes.find(r=>r.id===t);return!(n!=null&&n.unlocked)||e.skills.loadout.equipped.includes(t)||e.skills.loadout.equipped.length>=e.skills.loadout.capacity?e:{...e,skills:{...e.skills,loadout:{...e.skills.loadout,equipped:[...e.skills.loadout.equipped,t]}}}}function Sz(e,t){const n=og(e),r={...e.pvp};t==="sabotage"?(r.sabotage=we(r.sabotage+13,0,100),r.stability=we(r.stability-11,0,100),r.fog=we(r.fog+9,0,100)):t==="stabilize"?(r.stability=we(r.stability+14,0,100),r.sabotage=we(r.sabotage-8,0,100),r.fog=we(r.fog-6,0,100)):(r.fog=we(r.fog-16,0,100),r.stability=we(r.stability+3,0,100),r.sabotage=we(r.sabotage-4,0,100)),r.round+=1,r.stability<=0?r.winner="saboteur":r.sabotage<=0?r.winner="operator":r.round>=10&&(r.winner=r.stability>=r.sabotage?"operator":"saboteur");const i=r.winner==="operator"?{status:"win",reason:"Operator side prevailed in the sabotage conflict.",updatedAt:Date.now()}:r.winner==="saboteur"?{status:"loss",reason:"Saboteur pressure overwhelmed system stability.",updatedAt:Date.now()}:n;return{...e,pvp:r,outcome:i}}function _z(e,t,n){const r=`fork-${e.time.forks.length+1}`,i={id:r,label:t.trim()||r,playheadMs:we(n,0,36e5),history:[we(n,0,36e5)]};return{...e,time:{...e.time,activeForkId:r,forks:[...e.time.forks,i]}}}function kz(e,t){const n=e.time.activeForkId,r=e.time.forks.map(i=>{if(i.id!==n)return i;const a=we(i.playheadMs-Math.abs(t),0,36e5);return{...i,playheadMs:a,history:[...i.history,a]}});return{...e,time:{...e.time,forks:r}}}function Ez(e,t){if(t==="primary")return e;const n=e.time.forks.find(a=>a.id===t),r=e.time.forks.find(a=>a.id==="primary");if(!n||!r)return e;const i={...r,playheadMs:n.playheadMs,history:[...r.history,n.playheadMs]};return{...e,time:{activeForkId:"primary",forks:[i,...e.time.forks.filter(a=>a.id!=="primary"&&a.id!==t)]}}}function Cz(e,t){const n=og(e),r=t==="exploit"?42:t==="strike"?24:8,i=we(e.boss.hp-r,0,e.boss.maxHp),a=i/e.boss.maxHp,s=a<=.33?3:a<=.66?2:1;return{...e,boss:{...e.boss,hp:i,phase:s,enraged:s===3||i<=e.boss.maxHp*.2},outcome:i<=0?{status:"win",reason:"Boss encounter cleared. Run secured.",updatedAt:Date.now()}:n}}function Tz(e,t){const n=t.failures*12+t.retries*4+(t.latencyMs>1400?8:0),r=we(e.director.risk+n,0,100),i=t.failures>0?"Prioritize failure triage and run a stabilizing replay branch.":t.latencyMs>1400?"Latency pressure detected. Reduce fan-out and tighten tool boundaries.":"Momentum is stable. Push a high-confidence optimization branch.",a=t.failures>1?"stability_patch":t.latencyMs>1400?"precision_lens":"overclock_core",s=t.failures>0?"failure":"success";return{...e,director:{risk:r,hint:i,recommendedModifier:a,lastOutcome:s}}}function Mz(e,t){const n=Y4[t];if(!n||e.economy.credits<n.credits||e.economy.materials<n.materials)return e;const r=e.economy.crafted.includes(t)?e.economy.crafted:[...e.economy.crafted,t];let i={...e,economy:{...e.economy,credits:e.economy.credits-n.credits,materials:e.economy.materials-n.materials,crafted:r}};return t==="stability_patch"&&(i={...i,pvp:{...i.pvp,stability:we(i.pvp.stability+8,0,100)}}),t==="precision_lens"&&(i={...i,raid:{...i.raid,objectives:i.raid.objectives.map((a,s)=>s===0?{...a,progress:we(a.progress+10,0,a.target),completed:we(a.progress+10,0,a.target)>=a.target}:a)}}),t==="overclock_core"&&(i={...i,boss:{...i.boss,hp:we(i.boss.hp-16,0,i.boss.maxHp)}}),i}function jz(e,t){const n=Math.round(t);return{...e,guild:{...e.guild,operationsScore:e.guild.operationsScore+n,eventsCompleted:e.guild.eventsCompleted+(n>0?1:0)},economy:{...e.economy,credits:e.economy.credits+Math.max(0,n*3)}}}function Pz(e,t,n,r){const i={id:`event-${e.cinematic.queue.length+1}-${e.seed%1e3}`,type:t,message:n,intensity:r,at:Date.now()};return{...e,cinematic:{queue:[i,...e.cinematic.queue].slice(0,12)}}}function Nz(e){const t=Gj(e),n=t.week+1,r=zj(e.seed,n),i=we(t.difficultyFactor??1,.6,1.6),a=we(t.rewardMultiplier??1,.5,2),s={...r,goal:Math.max(1,Math.round(r.goal*i)),rewardCredits:Math.max(1,Math.round(r.rewardCredits*a))};return{...e,liveops:{...t,week:n,challenge:s}}}function Az(e,t){const n=Gj(e),r=we(t.difficultyFactor,.6,1.6),i=we(t.rewardMultiplier,.5,2),a=n.difficultyFactor||1,s=n.rewardMultiplier||1,o=t.note.trim()||"Operator tuning update",l={...n.challenge,goal:Math.max(1,Math.round(n.challenge.goal/a*r)),rewardCredits:Math.max(1,Math.round(n.challenge.rewardCredits/s*i))},u={id:`tuning-${n.tuningHistory.length+1}-${e.seed%1e3}`,changedAt:Date.now(),difficultyFactor:r,rewardMultiplier:i,note:o};return{...e,liveops:{...n,challenge:l,difficultyFactor:r,rewardMultiplier:i,tuningHistory:[u,...n.tuningHistory].slice(0,20)}}}function Gj(e){var t,n,r,i,a,s;return{season:((t=e.liveops)==null?void 0:t.season)??"Season-2026",week:((n=e.liveops)==null?void 0:n.week)??1,challenge:((r=e.liveops)==null?void 0:r.challenge)??{id:"fallback-liveops",title:"Complete one objective",goal:1,progress:0,rewardCredits:100,completed:!1},difficultyFactor:((i=e.liveops)==null?void 0:i.difficultyFactor)??1,rewardMultiplier:((a=e.liveops)==null?void 0:a.rewardMultiplier)??1,tuningHistory:((s=e.liveops)==null?void 0:s.tuningHistory)??[]}}function ag(e){return e.trim().toLowerCase()}function sg(e){return e.safety??{mutedPlayerIds:[],blockedPlayerIds:[],reports:[]}}function og(e){return e.outcome??{status:"in_progress",reason:"Run in progress.",updatedAt:Date.now()}}function Rz(e,t,n){const r=ag(t),i=n.trim();if(!r||!i)return e;const a=sg(e),s={id:`report-${a.reports.length+1}-${e.seed%1e3}`,targetPlayerId:r,reason:i,createdAt:Date.now()};return{...e,safety:{...a,reports:[s,...a.reports].slice(0,40)}}}function Iz(e,t){const n=ag(t),r=sg(e);return!n||r.mutedPlayerIds.includes(n)?e:{...e,safety:{...r,mutedPlayerIds:[...r.mutedPlayerIds,n]}}}function Dz(e,t){const n=ag(t),r=sg(e);return!n||r.blockedPlayerIds.includes(n)?e:{...e,safety:{...r,blockedPlayerIds:[...r.blockedPlayerIds,n],mutedPlayerIds:r.mutedPlayerIds.includes(n)?r.mutedPlayerIds:[...r.mutedPlayerIds,n]}}}const Tk=220,Mk=120,dv="agentDirector.presence.v1",Z4=2e4,ez=5e3,ui="agentDirector.collab.cursors.v1",Qp="agentDirector.collab.annotations.v1",Xp="agentDirector.collab.activity.v1",tz=S.lazy(()=>ys(()=>import("./index-DD7Pu50G.js"),__vite__mapDeps([0,1]))),nz=S.lazy(()=>ys(()=>import("./index-DrYLD9Mn.js"),[])),rz=S.lazy(()=>ys(()=>import("./index-BB66pQoa.js"),[])),iz=S.lazy(()=>ys(()=>import("./index-BwxbkSZ-.js"),[])),az=S.lazy(()=>ys(()=>import("./index-BYbFnm15.js"),[]));function oo(){return`scenario-${Math.random().toString(36).slice(2,9)}`}function sz(e){return e.filter(t=>t.parentStepId).map(t=>({source:t.parentStepId,target:t.id}))}function oz(e){const t=[...e].sort((n,r)=>n.index-r.index);return t.slice(1).map((n,r)=>({source:t[r].id,target:n.id}))}function lz(e){const t={},n=e.getBoundingClientRect();return e.querySelectorAll(".step-card").forEach(i=>{const a=i.dataset.stepId;if(!a)return;const s=i.getBoundingClientRect();t[a]={left:s.left-n.left,top:s.top-n.top,width:s.width,height:s.height}}),t}function uz(e,t,n){const r=[...sz(e),...oz(e),...$4(e).map(v=>({source:v.source,target:v.target}))],i=q4(e,r,n),a=t.getBoundingClientRect(),s=Math.min(...i.map(v=>v.position.x)),o=Math.min(...i.map(v=>v.position.y)),l=Math.max(...i.map(v=>v.position.x)),u=Math.max(...i.map(v=>v.position.y)),c=l-s+Tk,d=u-o+Mk,f=Math.max(32,(a.width-c)/2),m=Math.max(24,(a.height-d)/2);return i.reduce((v,p)=>(v[p.id]={left:p.position.x-s+f,top:p.position.y-o+m,width:Tk,height:Mk},v),{})}function jk(e,t,n){const r=t.trim().toLowerCase();return e.filter(i=>{var s,o,l;return n!=="all"&&i.type!==n?!1:r?[i.name,(s=i.preview)==null?void 0:s.title,(o=i.preview)==null?void 0:o.outputPreview,(l=i.preview)==null?void 0:l.inputPreview].filter(Boolean).join(" ").toLowerCase().includes(r):!0})}function cz(e,t,n){var u,c,d,f,m,v;const r=e.profiles[t]??e.profiles[((u=e.players[0])==null?void 0:u.player_id)??""]??Object.values(e.profiles)[0],i=e.players.reduce((p,b)=>(p[b.player_id]=b.role,p),{}),a=Object.entries(e.narrative.nodes).map(([p,b])=>({id:p,title:b.title,body:b.title,choices:b.choices.map(y=>({id:y.id,label:y.id,nextNodeId:y.next,tensionDelta:y.tension,mutator:y.modifier}))})),s=e.pvp.winner??null,l=e.telemetry.failures>0?"failure":s?"success":"mixed";return{seed:e.seed,raid:{party:e.players.map(p=>p.player_id),roles:i,objectives:e.raid.objectives.map(p=>({id:p.id,label:p.label,progress:p.progress,target:p.target,completed:p.completed})),completed:e.raid.completed},campaign:{depth:e.campaign.depth,lives:e.campaign.lives,currentMission:{id:e.campaign.current_mission.id,title:e.campaign.current_mission.title,difficulty:e.campaign.current_mission.difficulty,hazards:e.campaign.current_mission.hazards,rewardCredits:e.campaign.current_mission.reward_tokens},completedMissionIds:e.campaign.completed_missions,mutators:[...e.campaign.modifiers,...e.campaign.unlocked_modifiers]},narrative:{currentNodeId:e.narrative.current_node_id,nodes:a.length>0?a:n.narrative.nodes,history:e.narrative.history.map(p=>({nodeId:p.node_id,choiceId:p.choice_id})),tension:e.narrative.tension},skills:{points:(r==null?void 0:r.skill_points)??n.skills.points,nodes:n.skills.nodes.map(p=>({...p,unlocked:!!(r!=null&&r.unlocked_skills.includes(p.id))})),loadout:{capacity:(r==null?void 0:r.loadout_capacity)??n.skills.loadout.capacity,equipped:(r==null?void 0:r.loadout)??[]}},pvp:{round:e.pvp.round,stability:e.pvp.operator_stability,sabotage:e.pvp.sabotage_pressure,fog:e.pvp.fog,winner:s},time:{activeForkId:e.time.active_fork_id,forks:e.time.forks.map(p=>({id:p.id,label:p.label,playheadMs:p.playhead_ms,history:p.history}))},boss:{name:e.boss.name,phase:e.boss.phase,hp:e.boss.hp,maxHp:e.boss.max_hp,enraged:e.boss.enraged},director:{risk:e.director.risk,hint:e.director.hint,recommendedModifier:e.director.hazard_bias,lastOutcome:l},economy:{credits:e.economy.tokens,materials:e.economy.materials,crafted:e.economy.crafted},guild:{name:e.guild.guild_id??"Trace Guild",members:e.players.length,operationsScore:e.guild.operations_score,eventsCompleted:e.guild.events_completed},cinematic:{queue:e.cinematic.events.map(p=>({id:p.id,type:p.type==="critical"||p.type==="success"||p.type==="warning"||p.type==="twist"?p.type:"warning",message:p.message,intensity:p.intensity||1,at:Date.parse(p.at)||Date.now()}))},liveops:{season:e.liveops.season,week:e.liveops.week,challenge:{id:e.liveops.challenge.id,title:e.liveops.challenge.title,goal:e.liveops.challenge.goal,progress:e.liveops.challenge.progress,rewardCredits:e.liveops.challenge.reward,completed:e.liveops.challenge.completed},difficultyFactor:e.liveops.telemetry.difficultyFactor??n.liveops.difficultyFactor??1,rewardMultiplier:e.liveops.telemetry.rewardMultiplier??n.liveops.rewardMultiplier??1,tuningHistory:((c=e.liveops.tuning_history)==null?void 0:c.map(p=>({id:p.id,changedAt:Date.parse(p.changed_at)||Date.now(),difficultyFactor:p.difficultyFactor,rewardMultiplier:p.rewardMultiplier,note:p.note})))??n.liveops.tuningHistory??[]},safety:{mutedPlayerIds:((d=e.safety)==null?void 0:d.muted_player_ids)??n.safety.mutedPlayerIds??[],blockedPlayerIds:((f=e.safety)==null?void 0:f.blocked_player_ids)??n.safety.blockedPlayerIds??[],reports:((v=(m=e.safety)==null?void 0:m.reports)==null?void 0:v.map(p=>({id:p.id,targetPlayerId:p.target_player_id,reason:p.reason,createdAt:Date.parse(p.created_at)||Date.now()})))??n.safety.reports??[]},outcome:e.status==="completed"?{status:e.telemetry.successes>=e.telemetry.failures?"win":"loss",reason:e.telemetry.successes>=e.telemetry.failures?"Session completed with positive outcomes.":"Session completed with unresolved failures.",updatedAt:Date.now()}:e.telemetry.failures>0?{status:"partial",reason:`${e.telemetry.failures} failure signals observed; run still active.`,updatedAt:Date.now()}:n.outcome??{status:"in_progress",reason:"Run in progress.",updatedAt:Date.now()}}}function dz(){const e=window.sessionStorage.getItem("agentDirector.sessionId");if(e)return e;const t=`session-${Math.random().toString(36).slice(2,10)}`;return window.sessionStorage.setItem("agentDirector.sessionId",t),t}function Pk(){try{const e=window.localStorage.getItem(dv);if(!e)return{};const t=JSON.parse(e),n={};return Object.entries(t).forEach(([r,i])=>{typeof i=="number"&&(n[r]=i)}),n}catch{return{}}}function Nk(e,t=Date.now()){return Object.fromEntries(Object.entries(e).filter(([,n])=>t-n<Z4))}function fz(){var Mg,jg;const{trace:e,insights:t,loading:n,error:r,reload:i,traces:a,selectedTraceId:s,setSelectedTraceId:o}=Vq(),[l,u]=Ee("agentDirector.mode","cinema"),[c,d]=S.useState(""),f=S.useDeferredValue(c),[m,v]=S.useState("all"),[p,b]=S.useState(""),[y,g]=S.useState(null),[x,_]=S.useState(null),[E,T]=S.useState(null),[M,C]=S.useState([]),[j,N]=S.useState(""),[A,I]=S.useState(null),[L,K]=S.useState(!1),[V,le]=S.useState(null),[ie,R]=Ee("agentDirector.safeExport",!1),[q,G]=Ee("agentDirector.syncPlayback",!0),[z,ae]=S.useState(null),[Pe,oe]=S.useState(!1),[ce,$]=S.useState(0),[de,Mt]=Ee("agentDirector.speed",1),[fn,Zt]=Ee("agentDirector.windowed",!1),[gr,Xr]=S.useState(2e4),[F,te]=S.useState(!1),[Q,qe]=S.useState(!1),[ne,Fe]=Ee("agentDirector.overlayEnabled",!1),[On,Wl]=Ee("agentDirector.onboarded",!1),[,$t]=Ee("agentDirector.tourCompleted",!1),[Ge,me]=Ee("agentDirector.explainMode",!0),[Ln,qn]=Ee("agentDirector.heroDismissed",!1),[Kl,Jr]=Ee("agentDirector.dockOpen",!1),[Ze,Ts]=Ee("agentDirector.introPersona","builder"),[Zr,ea]=Ee("agentDirector.launchPath","rapid_triage"),[wr,en]=Ee("agentDirector.themeMode","studio"),[Bt,Hj]=Ee("agentDirector.motionMode","balanced"),[Be,lg]=Ee("agentDirector.timelineLaneStrategy","type"),[ug,ei]=Ee("agentDirector.timelineStudioConfig",ma),[Ms,st]=Ee("agentDirector.missions",{playback:!1,flow:!1,inspect:!1,matrix:!1,replay:!1,annotate:!1,collaborate:!1}),js=!1,[Ps,Ns]=Ee("agentDirector.introDismissed",js),[Yl,Ke]=S.useState(!1),[fe,As]=S.useState(null),[Rs,Ql]=S.useState([]),[Xl,Jl]=S.useState(null),[Wj,cg]=S.useState(null),[Zl,eu]=S.useState(""),[Kj,ti]=S.useState([{id:oo(),name:"Prompt tighter",strategy:"hybrid",modificationsText:'{"prompt":"Return concise response"}'},{id:oo(),name:"Recorded baseline",strategy:"recorded",modificationsText:"{}"}]),[ta,tu]=S.useState(null),[jt,dg]=S.useState(null),[Yj,Is]=S.useState(!1),[Qj,na]=S.useState(null),[pe,ra]=Ee("agentDirector.gameplayState.v1",Ck("bootstrap")),[ke,fg]=Ee("agentDirector.gameplayTraceId.v1",""),[br]=Ee("agentDirector.gameplayPlayerId.v1",`player-${Math.random().toString(36).slice(2,8)}`),[xr,ni]=Ee("agentDirector.gameplaySessionId.v1",""),[De,Fn]=S.useState(null),[Xj,Ne]=S.useState(null),[Jj,ri]=S.useState(null),[Zj,eP]=S.useState(null),[tP,nP]=S.useState(null),[nu,hg]=S.useState(1),[rP,ru]=S.useState(null),[iP,iu]=S.useState(null),[pg,au]=S.useState({}),[mg,su]=S.useState([]),[aP,ou]=S.useState([]),[ia,lu]=S.useState(800),[sP,oP]=S.useState(0),uu=S.useRef(null),vg=S.useRef(null),ii=S.useRef(dz()),yg=S.useRef(0),gg=S.useRef(0),cu=S.useRef(!1),wg=S.useRef({}),Vn=S.useMemo(()=>{if(!e)return[];const w=performance.now(),k=jk(e.steps,f,m);return gg.current=performance.now()-w,k},[e,f,m]),du=S.useMemo(()=>Vn.slice(0,Math.min(Vn.length,ia)),[ia,Vn]),bg=S.useMemo(()=>{if(!y)return du;const w=new Set(y.matchedStepIds);return du.filter(k=>w.has(k.id))},[du,y]),lP=S.useMemo(()=>z?jk(z.steps,f,m).slice(0,Math.min(z.steps.length,ia)):[],[z,f,m,ia]),xg=S.useMemo(()=>e?B4(e.startedAt,e.endedAt,e.steps):[],[e]),uP=S.useMemo(()=>!e||!z?null:_M(e,z),[e,z]),Sg=S.useMemo(()=>e?e.steps.find(w=>w.id===V)??null:null,[e,V]),aa=S.useMemo(()=>e?BR(e.steps,Be):[],[e,Be]),ai=S.useMemo(()=>{const w=ug[Be]??ma[Be];return V0(aa,w.order,w.hidden)},[aa,Be,ug]),cP=S.useMemo(()=>ai.order.filter(w=>!ai.hidden.includes(w)),[ai.hidden,ai.order]),Ds=S.useMemo(()=>{const w=ii.current;return Object.values(pg).filter(k=>k.sessionId!==w).filter(k=>k.traceId===((e==null?void 0:e.id)??"none")).sort((k,P)=>P.updatedAt-k.updatedAt)},[pg,e==null?void 0:e.id]),dP=S.useMemo(()=>Ds.map(w=>w.playheadMs),[Ds]),fP=S.useMemo(()=>mg.filter(w=>w.traceId===(e==null?void 0:e.id)),[mg,e==null?void 0:e.id]),_g=S.useMemo(()=>{const w=Object.keys(Ms).length,k=Object.values(Ms).filter(Boolean).length;return{done:k,total:w,pct:w>0?Math.round(k/w*100):0}},[Ms]),fu=S.useMemo(()=>{var W;if(!e)return 100;const w=100,k=Math.min(60,((t==null?void 0:t.errors)??0)*16),P=Math.min(24,((t==null?void 0:t.retries)??0)*6),D=e.metadata.wallTimeMs>6e4?12:e.metadata.wallTimeMs>3e4?6:0,U=(W=t==null?void 0:t.timing)!=null&&W.degraded?8:0;return Math.max(0,Math.min(100,Math.round(w-k-P-D-U)))},[t==null?void 0:t.errors,t==null?void 0:t.retries,(Mg=t==null?void 0:t.timing)==null?void 0:Mg.degraded,e]),hP=S.useMemo(()=>l==="flow"?"F / C / Space":l==="compare"?"C / Space /  ":l==="matrix"?"G / C / Cmd+K":l==="gameplay"?"G / S / Cmd+K":"C / F / Space",[l]);S.useEffect(()=>{e&&e.id!==ke&&(ra(Ck(e.id)),fg(e.id))},[ke,ra,fg,e]),S.useEffect(()=>{let w=!1;if(!xr){Fn(null);return}return mb().then(k=>{w||(Fn(k),k||Ne("Gameplay session not found."))}),()=>{w=!0}},[xr]),S.useEffect(()=>{if(!xr)return;const w=Fq();return()=>w()},[xr]),S.useEffect(()=>{De&&ra(w=>cz(De,br,w))},[br,De,ra]),S.useEffect(()=>{let w=!1;if(!(De==null?void 0:De.guild.guild_id)){ri(null);return}return Rq().then(P=>{w||ri(P)}),()=>{w=!0}},[De==null?void 0:De.guild.guild_id]),S.useEffect(()=>{let w=!1;const k=async()=>{const[D,U]=await Promise.all([Lq(),qq()]);w||(D&&eP(D),U&&nP(U))};k();const P=window.setInterval(()=>{k()},3e4);return()=>{w=!0,window.clearInterval(P)}},[]),S.useEffect(()=>{g(null),_(null)},[e==null?void 0:e.id]),S.useEffect(()=>{oP(Math.round(gg.current))},[Vn]),S.useEffect(()=>{if(!e)return;const w=Vn.length;if(w<=1200){lu(w);return}lu(800);const k=window.setInterval(()=>{lu(P=>P>=w?(window.clearInterval(k),w):Math.min(w,P+1e3))},70);return()=>window.clearInterval(k)},[Vn.length,e]),S.useEffect(()=>{let w=!1;if(!(e!=null&&e.id)){T(null);return}return xq(e.id).then(k=>{w||T(k)}),()=>{w=!0}},[e==null?void 0:e.id]),S.useEffect(()=>{let w=!1;return Sq().then(k=>{w||(C(k),!j&&k.length>0&&N(k[0].id))}),()=>{w=!0}},[j]),S.useEffect(()=>{vg.current=z},[z]),S.useEffect(()=>(document.body.dataset.theme=wr,()=>{delete document.body.dataset.theme}),[wr]),S.useEffect(()=>(document.body.dataset.motion=Bt,()=>{delete document.body.dataset.motion}),[Bt]),S.useEffect(()=>{const w=ii.current,k=(J=!1)=>{const Ae=Date.now(),mn=Nk(Pk(),Ae);J?delete mn[w]:mn[w]=Ae,window.localStorage.setItem(dv,JSON.stringify(mn)),hg(Math.max(1,Object.keys(mn).length))},P=()=>{const J=Nk(Pk(),Date.now());hg(Math.max(1,Object.keys(J).length))};k();const D=window.setInterval(()=>k(),ez),U=J=>{J.key===dv&&P()},W=()=>{document.visibilityState==="visible"&&k()},ee=()=>k(!0);return window.addEventListener("storage",U),document.addEventListener("visibilitychange",W),window.addEventListener("beforeunload",ee),()=>{window.clearInterval(D),k(!0),window.removeEventListener("storage",U),document.removeEventListener("visibilitychange",W),window.removeEventListener("beforeunload",ee)}},[]),S.useEffect(()=>{l==="compare"&&Jr(!1)},[l,Jr]),S.useEffect(()=>{aa.length!==0&&ei(w=>{const k=w[Be]??ma[Be],P=V0(aa,k.order,k.hidden);return P.order.join("|")===k.order.join("|")&&P.hidden.join("|")===k.hidden.join("|")?w:{...w,[Be]:P}})},[aa,Be,ei]),S.useEffect(()=>{au(Un(window.localStorage.getItem(ui),{})),su(Un(window.localStorage.getItem(Qp),[])),ou(Un(window.localStorage.getItem(Xp),[]))},[]),S.useEffect(()=>{const w=Date.now();if(w-yg.current<120&&Pe)return;yg.current=w;const k=ii.current,P={sessionId:k,traceId:(e==null?void 0:e.id)??"none",mode:l,playheadMs:Math.round(ce),selectedStepId:V,updatedAt:w},U={...Un(window.localStorage.getItem(ui),{}),[k]:P};window.localStorage.setItem(ui,JSON.stringify(U)),au(U)},[Pe,l,ce,V,e==null?void 0:e.id]),S.useEffect(()=>{const w=ii.current;return()=>{const k=Un(window.localStorage.getItem(ui),{});if(!k[w])return;const P={...k};delete P[w],window.localStorage.setItem(ui,JSON.stringify(P))}},[]),S.useEffect(()=>{const w=k=>{if(k.key===ui&&au(Un(k.newValue,{})),k.key===Qp){const P=Un(k.newValue,[]);su(D=>_k(D,P))}k.key===Xp&&ou(kk(Un(k.newValue,[])))};return window.addEventListener("storage",w),()=>window.removeEventListener("storage",w)},[]);const X=S.useCallback(w=>{const k={id:`activity-${Math.random().toString(36).slice(2,9)}`,sessionId:ii.current,message:w,timestamp:Date.now()};ou(P=>{const D=kk([k,...P]);return window.localStorage.setItem(Xp,JSON.stringify(D)),D})},[]),ot=S.useCallback((w,k,P)=>{wg.current[w]||(wg.current[w]=!0,V4(k,P))},[]),hn=S.useCallback(async w=>{if(!e)return;const k=await kq(e.id,w,"hybrid",{note:"UI replay"},e);k&&(ae(k),Fe(!0),u("flow"),st(P=>P.replay?P:{...P,replay:!0}),X(`Created replay from ${w}`))},[X,st,e,ae,u,Fe]),pP=S.useCallback(async()=>{if(!e)return;if(!p.trim()){g(null),_(null);return}const w=await bq(e.id,p.trim());if(!w){_("TraceQL query failed"),g(null);return}g(w),_(null);const k=w.matchedStepIds[0];k&&(le(k),l!=="cinema"&&u("cinema"))},[l,u,e,p]),mP=S.useCallback(async()=>{if(!e||!j)return;K(!0);const w=await _q(j,e.id);K(!1),w&&I(w.result)},[j,e]),Pt=S.useCallback(()=>{if(!e)return;const w=[...e.steps].sort((k,P)=>(P.durationMs??0)-(k.durationMs??0))[0];w&&(le(w.id),u("cinema"))},[e,u]),kg=S.useCallback(()=>{if(!e||e.steps.length===0)return null;const w=[...e.steps].sort((k,P)=>(P.durationMs??0)-(k.durationMs??0))[0];return(w==null?void 0:w.id)??null},[e]),Sr=S.useCallback(()=>{if(!e)return;const w=e.steps.find(k=>k.status==="failed");w&&(le(w.id),u("cinema"))},[e,u]),hu=S.useCallback(async()=>{if(!e)return;const w=new URL(window.location.href);w.searchParams.set("trace",s??e.id),w.searchParams.set("mode",l),V?w.searchParams.set("step",V):w.searchParams.delete("step");try{await navigator.clipboard.writeText(w.toString()),ru("Live link copied")}catch{window.prompt("Copy live session link",w.toString()),ru("Live link ready")}window.setTimeout(()=>ru(null),1800)},[l,V,s,e]),vP=S.useCallback(w=>{lg(w),X(`Switched lane strategy to ${w}`)},[X,lg]),yP=S.useCallback(w=>{ei(k=>{const P=k[Be]??ma[Be],D=P.hidden.includes(w)?P.hidden.filter(U=>U!==w):[...P.hidden,w];return{...k,[Be]:{...P,hidden:D}}}),X(`Toggled lane visibility for ${w}`)},[X,Be,ei]),gP=S.useCallback(async w=>{if(!e)return;const k=await jq({traceId:e.id,name:w.trim()||"Night Ops"});if(!k){Ne("Failed to create gameplay session.");return}Fn(k),ni(k.id),Ne(null),X(`Created gameplay session ${k.id}`)},[X,br,ni,e]),wP=S.useCallback(async(w,k,P)=>{if(!w.trim()){Ne("Session id is required.");return}const D=await Pq({sessionId:w.trim(),playerId:k.trim()});if(!D){Ne("Failed to join gameplay session.");return}Fn(D),ni(D.id),Ne(null),X(`Joined gameplay session ${D.id} as ${k}`)},[X,ni]),bP=S.useCallback(async()=>{if(!xr)return;if(!await Nq()){Ne("Failed to leave gameplay session.");return}Fn(null),ni(""),Ne(null),X(`Left gameplay session ${xr}`)},[X,br,xr,ni]),xP=S.useCallback(async(w,k)=>{if(!(De!=null&&De.id))return;const P=await vb({sessionId:De.id,expectedVersion:De.version});if(P.session){Fn(P.session),Ne(null),X(`Gameplay action: ${w}`);return}if(P.conflict){const D=await mb(De.id);D&&Fn(D),Ne("Session changed by another player. Synced latest state.");return}Ne(P.error??"Gameplay action failed.")},[X,br,De]),SP=S.useCallback(async(w,k)=>{if(!w.trim()||!k.trim()){Ne("Guild id and name are required.");return}const P=await Aq({guildId:w.trim(),name:k.trim()});if(!P){Ne("Failed to create guild.");return}if(ri(P),De){const D=await vb({sessionId:De.id,payload:{guild_id:P.id},expectedVersion:De.version});D.session&&Fn(D.session)}Ne(null),X(`Created guild ${P.id}`)},[X,br,De]),_P=S.useCallback(async(w,k)=>{if(!w.trim()||!k.trim()){Ne("Guild id and player id are required.");return}const P=await Iq(w.trim(),k.trim());if(!P){Ne("Failed to join guild.");return}ri(P),Ne(null),X(`Joined guild ${P.id} as ${k}`)},[X]),kP=S.useCallback(async(w,k,P)=>{if(!w.trim()||!k.trim()||!P.trim()){Ne("Guild id, title, and schedule are required.");return}const D=await Dq({guildId:w.trim(),title:k.trim(),scheduledAt:P.trim()});if(!D){Ne("Failed to schedule guild event.");return}ri(D.guild),Ne(null),X(`Scheduled guild event ${D.event.id}`)},[X]),EP=S.useCallback(async(w,k,P)=>{const D=await Oq();if(!D){Ne("Failed to complete guild event.");return}ri(D),Ne(null),X(`Completed guild event ${k}`)},[X]),CP=S.useCallback((w,k)=>{ei(P=>{const D=P[Be]??ma[Be],U=[...D.order],W=U.indexOf(w);if(W===-1)return P;const ee=k==="up"?W-1:W+1;if(ee<0||ee>=U.length)return P;const[J]=U.splice(W,1);return U.splice(ee,0,J),{...P,[Be]:{...D,order:U}}}),X(`Moved lane group ${w} ${k}`)},[X,Be,ei]),TP=S.useCallback(()=>{st({playback:!1,flow:!1,inspect:!1,matrix:!1,replay:!1,annotate:!1,collaborate:!1}),X("Reset onboarding missions")},[X,st]),MP=S.useCallback((w,k)=>{if(!e||!w.trim())return;const P=Date.now(),D={id:`annotation-${Math.random().toString(36).slice(2,9)}`,traceId:e.id,stepId:k,body:w.trim(),authorSessionId:ii.current,createdAt:P,updatedAt:P};su(U=>{const W=_k(U,[D]);return window.localStorage.setItem(Qp,JSON.stringify(W)),W}),st(U=>U.annotate?U:{...U,annotate:!0}),X(k?`Added annotation on step ${k}`:"Added trace annotation")},[X,st,e]),jP=S.useCallback((w,k)=>{ti(P=>P.map(D=>D.id===w?{...D,...k}:D))},[]),PP=S.useCallback(w=>{ti(w)},[]),NP=S.useCallback(()=>{ti(w=>[...w,{id:oo(),name:`Scenario ${w.length+1}`,strategy:"hybrid",modificationsText:"{}"}])},[]),AP=S.useCallback(w=>{ti(k=>k.length<=1?k:k.filter(P=>P.id!==w))},[]),RP=S.useCallback(w=>{ti(k=>{const P=k.findIndex(ee=>ee.id===w);if(P===-1)return k;const D=k[P],U={...D,id:oo(),name:`${D.name} copy`},W=[...k];return W.splice(P+1,0,U),W})},[]),IP=S.useCallback((w,k)=>{ti(P=>{const D=P.findIndex(J=>J.id===w);if(D===-1)return P;const U=k==="up"?D-1:D+1;if(U<0||U>=P.length)return P;const W=[...P],[ee]=W.splice(D,1);return W.splice(U,0,ee),W})},[]),DP=S.useCallback(async w=>{var P;if(!e)return;const k=Zl||V||((P=e.steps[0])==null?void 0:P.id);if(!k){na("Select an anchor step before running the matrix.");return}try{Is(!0),na(null);const D=await Eq({traceId:e.id,stepId:k,scenarios:w});if(!D)throw new Error("Failed to create replay job.");tu(D);let U=D;for(let ee=0;ee<30&&!(U.status!=="queued"&&U.status!=="running");ee+=1){const J=W4(ee);await new Promise(mn=>window.setTimeout(mn,J));const Ae=await Cq(D.id);if(!Ae)break;U=Ae,tu(Ae)}const W=await pb(D.id);if(!W)throw new Error("Replay job finished but matrix summary is unavailable.");dg(W),u("matrix"),X(`Ran matrix with ${w.length} scenario(s) from ${k}`)}catch(D){na(D instanceof Error?D.message:"Failed to run replay matrix.")}finally{Is(!1)}},[X,Zl,V,e,u]),OP=S.useCallback(async()=>{if(ta){Is(!0);try{const w=await Tq(ta.id);if(!w){na("Failed to cancel replay job.");return}tu(w);const k=await pb(w.id);k&&dg(k),X(`Canceled matrix job ${ta.id}`)}finally{Is(!1)}}},[X,ta]),LP=S.useCallback(async w=>{const k=await kM();if(!(k!=null&&k.trace)){na("Could not load replay trace for compare view.");return}ae(k.trace),Fe(!0),u("compare"),X(`Opened matrix compare trace ${w}`)},[X,u,Fe]),ve=S.useCallback(w=>{if(!(w===l||!e)){if((w==="flow"||w==="matrix"||w==="gameplay")&&oe(!1),w==="flow"&&l==="cinema"&&uu.current){const k=uu.current,P=lz(k),D=uz(e.steps,k,e.id);cg({steps:e.steps,fromRects:P,toRects:D}),X("Morphed cinema to flow");return}u(w),X(`Switched mode to ${w}`)}},[X,l,e,oe,u]),sa=S.useCallback(async w=>{if(ea(w),w==="rapid_triage"){me(!0),ve("cinema"),Sr(),e!=null&&e.steps.some(k=>k.status==="failed")||Pt(),X("Started rapid triage launch path");return}if(w==="deep_diagnosis"){me(!0),ve("flow"),Ke(!0),X("Started deep diagnosis launch path");return}G(!0),ve("matrix"),await hu(),X("Started team sync launch path")},[X,ve,Pt,Sr,me,ea,G,hu,e]),pu=S.useCallback(()=>{l==="flow"&&ve("cinema"),oe(w=>!w)},[l,ve]),$n=S.useCallback(()=>{As(null),Ql([]),Jl(null),oe(!1)},[oe]),Eg=S.useCallback(w=>[{id:"setup",label:"Opening the reel",duration:1100,action:()=>{me(!0),oe(!1),$(0),le(null),Fe(!1),Mt(1),e&&e.steps.length<500&&Zt(!1),ve("cinema")}},{id:"pace",label:"Pacing the timeline",duration:2200,action:()=>{ve("cinema"),oe(!0),Mt(1.1)}},{id:"bottleneck",label:"Freeze on the bottleneck",duration:1600,action:()=>{oe(!1),Pt()}},{id:"inspect",label:"Inspect the moment",duration:1600,action:()=>{w&&le(w)}},{id:"flow",label:"Morph into flow",duration:2100,action:()=>{ve("flow")}},{id:"replay",label:"Directors Cut replay",duration:2200,action:async()=>{if(!e)return;!vg.current&&w&&await hn(w),Fe(!0),u("compare")}},{id:"compare",label:"Compare the cut",duration:2e3,action:()=>{oe(!0),Mt(1)}},{id:"finale",label:"Final frame",duration:1100,action:()=>{oe(!1)}}],[ve,hn,Pt,me,oe,u,Fe,$,le,Mt,Zt,e]),si=S.useCallback(()=>{var k;if(!e)return;const w=V??kg()??((k=e.steps[0])==null?void 0:k.id)??null;Ql(Eg(w)),As({active:!0,step:0}),Jl(e.id),Ke(!1),te(!1),qe(!1)},[Eg,kg,V,e,qe,te,Ql,As,Jl,Ke]),oi=S.useCallback(()=>{if(fe!=null&&fe.active){$n();return}si()},[si,$n,fe==null?void 0:fe.active]),qP=S.useMemo(()=>{const k=[{id:"header",title:"Mission control",body:`Confirm run status and metadata. ${{builder:"Focus on payload flow, tool-call sequencing, and replay-ready steps.",executive:"Focus on bottlenecks, risk signals, and run-level outcome changes.",operator:"Focus on failure patterns, retries, and runtime reliability posture."}[Ze]}`,target:'[data-tour="header"]',placement:"bottom"}];return Ln||k.push({id:"hero",title:"Director briefing",body:"Choose Tour, Story mode, or Explain to ramp up quickly.",target:'[data-tour="hero"]',placement:"bottom"}),k.push({id:"insights",title:"Fast diagnosis",body:Ze==="executive"?"Jump straight to bottlenecks and high-cost segments for fast executive readouts.":Ze==="operator"?"Jump to failures and retries first, then inspect impacted steps.":"Jump straight to bottlenecks, errors, and high-cost steps with one click.",target:'[data-tour="insights"]',placement:"bottom"},{id:"journey",title:"Director journey",body:"A narrative path that teaches how to watch, inspect, and direct a better run.",target:'[data-tour="journey"]',placement:"bottom"},{id:"toolbar",title:"Filters + modes",body:"Search, filter, and switch between Cinema, Flow, and Compare as the story evolves.",target:'[data-tour="toolbar"]',placement:"bottom"},{id:"quick-actions",title:"Quick actions",body:"Launch Story Mode, open the command palette, or jump to bottlenecks instantly.",target:'[data-tour="quick-actions"]',placement:"left"},{id:"stage",title:"Cinema stage",body:"The timeline shows every step as a scene. Scrub to see pacing and concurrency.",target:'[data-tour="stage"]',placement:"top"},{id:"inspector",title:"Inspector",body:Ze==="executive"?"Open key moments to validate outcome impact and communication-ready summaries.":"Open any step to read payloads, apply redaction, and replay from that moment.",target:'[data-tour="inspector"]',placement:"left"},{id:"compare",title:"Compare runs",body:z?"Compare is live. Review deltas in cost, steps, and wall time side by side.":"Replay from a step to unlock compare mode and validate improvements.",target:'[data-tour="compare"]',placement:"top"}),k},[z,Ln,Ze]),FP=S.useCallback(()=>{cg(null),u("flow")},[u]),tn=S.useMemo(()=>{var D,U,W,ee;if(!e)return[];const w=[],k=[...e.steps].sort((J,Ae)=>(Ae.durationMs??0)-(J.durationMs??0))[0],P=e.steps.find(J=>J.status==="failed");if(P&&V!==P.id&&w.push({id:"jump-error",title:"Investigate first failure",body:`${P.name} failed and should be inspected before optimization work.`,actionLabel:"Open failed step",tone:"warning",action:Sr}),k&&V!==k.id&&w.push({id:"jump-bottleneck",title:"Tackle latency bottleneck",body:`${k.name} is the slowest scene in this run and the best optimization target.`,actionLabel:"Open bottleneck",tone:"priority",action:Pt}),(D=E==null?void 0:E.hypotheses)!=null&&D[0]){const J=E.hypotheses[0];w.push({id:"investigate-hypothesis",title:J.title,body:J.summary,actionLabel:"Inspect evidence",tone:"info",action:()=>{const Ae=J.evidenceStepIds[0];Ae&&(le(Ae),l!=="cinema"&&u("cinema"))}})}if(l!=="matrix"&&w.push({id:"matrix-experiment",title:"Run scenario matrix",body:"Compare prompt and strategy alternatives from one anchor step to rank causal impact.",actionLabel:"Open matrix",tone:"info",action:()=>{var J;eu(V??((J=e.steps[0])==null?void 0:J.id)??""),u("matrix")}}),!z&&(V||(U=e.steps[0])!=null&&U.id)){const J=V??((W=e.steps[0])==null?void 0:W.id)??null;J&&w.push({id:"run-replay",title:"Create director replay",body:"Branch a replay trace and validate whether your change improves the run.",actionLabel:"Replay from step",tone:"info",action:()=>{hn(J)}})}if((ee=jt==null?void 0:jt.causalRanking)!=null&&ee.length){const J=jt.causalRanking[0];w.push({id:"causal-factor",title:`Top causal factor: ${J.factor}`,body:`Confidence ${(J.confidence*100).toFixed(0)}% across ${J.evidence.samples} sample(s).`,actionLabel:"View matrix",tone:"priority",action:()=>u("matrix")})}return w.slice(0,4)},[z,hn,E,Pt,Sr,l,jt,V,e,u]),VP=S.useMemo(()=>tn.map((w,k)=>{const P=w.tone==="warning"?"high":w.tone==="priority"?"medium":"low";return{id:`priority-${w.id}`,title:w.title,detail:w.body,severity:P,actionLabel:w.actionLabel,onAction:w.action,done:k===0?w.id==="jump-error"&&!!V||w.id==="jump-bottleneck"&&!!V:!1}}),[tn,V]),_r=S.useMemo(()=>{var W,ee;if(!e)return"No trace loaded.";const w=[...e.steps].sort((J,Ae)=>(Ae.durationMs??0)-(J.durationMs??0))[0],k=e.steps.filter(J=>J.status==="failed").length,P=(W=E==null?void 0:E.hypotheses)==null?void 0:W[0],D=(ee=jt==null?void 0:jt.causalRanking)==null?void 0:ee[0];return[`Run ${e.id} completed with ${e.steps.length} steps across ${e.metadata.wallTimeMs}ms.`,w?`Primary latency driver: ${w.name} (${w.durationMs??0}ms).`:null,k>0?`Observed ${k} failed step(s), indicating reliability risk.`:"No failed steps observed.",P?`Top investigation hypothesis: ${P.title} (${P.severity}).`:null,D?`Highest ranked causal factor from matrix: ${D.factor} (${(D.confidence*100).toFixed(0)}% confidence).`:null,"Recommended plan: inspect bottleneck evidence, validate with replay matrix, and lock in mitigations."].filter(Boolean).join(" ")},[E,jt==null?void 0:jt.causalRanking,e]),$P=S.useCallback(w=>{var P,D;const k=w.toLowerCase();if(!e)return"No trace is loaded yet.";if(k.includes("bottleneck")||k.includes("slow")){const U=[...e.steps].sort((W,ee)=>(ee.durationMs??0)-(W.durationMs??0))[0];return U?`The primary bottleneck is ${U.name} at ${U.durationMs??0}ms. Prioritize this step for optimization and replay validation.`:"No bottleneck could be determined from current trace data."}if(k.includes("risk")||k.includes("failure")||k.includes("error")){const U=e.steps.filter(W=>W.status==="failed");return U.length?`Risk is concentrated in ${U.length} failed step(s), starting at ${((P=U[0])==null?void 0:P.name)??"unknown"}.`:"Failure risk appears low for this run; no failed steps were observed."}return k.includes("cost")?`Recorded run cost is ${(e.metadata.totalCostUsd??0).toFixed(4)} USD. Use matrix scenarios to evaluate cheaper prompt/strategy options.`:k.includes("next")||k.includes("action")?tn.length?`Next action: ${((D=tn[0])==null?void 0:D.title)??"Open matrix"}.`:"Next action: open Cinema mode, inspect bottleneck, then run the matrix.":_r},[_r,tn,e]),BP=S.useCallback(()=>{if(!e)return;const w=`# Director Narrative

${_r}

## Recommended Actions
${tn.map(k=>`- ${k.title}: ${k.body}`).join(`
`)}`;ZR(`agent-director-narrative-${e.id}.md`,w,"text/markdown")},[_r,tn,e]),Os=S.useCallback(async()=>{if(!e)return;const w=tn[0],k=e.steps.filter(U=>U.status==="failed").length,D=[`Session handoff (${new Date().toISOString()})`,`Trace: ${e.id}`,`Mode: ${l}`,`Selected step: ${V??"none"}`,`Run health: ${fu}/100`,`Failures: ${k}`,`Wall time: ${e.metadata.wallTimeMs}ms`,`Top recommendation: ${w?`${w.title} -> ${w.actionLabel}`:"None"}`,`Narrative: ${_r}`].join(`
`);try{await navigator.clipboard.writeText(D),iu("Handoff digest copied")}catch{window.prompt("Copy handoff digest",D),iu("Handoff digest ready")}window.setTimeout(()=>iu(null),2200)},[_r,tn,l,fu,V,e]);S.useEffect(()=>{var P;if(!e)return;wq(),$(0),oe(!1);const w=Math.min(Math.max((e.metadata.wallTimeMs||1)*.2,5e3),6e4);Xr(w),e.steps.length>500&&Zt(!0),z||Fe(!1),l==="compare"&&!z&&u("cinema");const k=V&&e.steps.some(D=>D.id===V)?V:((P=e.steps[0])==null?void 0:P.id)??"";eu(D=>D&&e.steps.some(U=>U.id===D)?D:k)},[e,z,l,V,u,Zt,Fe]),S.useEffect(()=>(document.body.classList.toggle("explain-mode",Ge),()=>{document.body.classList.remove("explain-mode")}),[Ge]),S.useEffect(()=>(document.body.classList.toggle("story-mode",!!(fe!=null&&fe.active)),()=>{document.body.classList.remove("story-mode")}),[fe==null?void 0:fe.active]),S.useEffect(()=>{if(!(fe!=null&&fe.active))return;const w=Rs[fe.step];if(!w){$n();return}Promise.resolve(w.action());const k=window.setTimeout(()=>{As(P=>P&&P.active?{...P,step:P.step+1}:P)},w.duration);return()=>window.clearTimeout(k)},[Rs,$n,fe]),S.useEffect(()=>{fe!=null&&fe.active&&(!e||!Xl||e.id!==Xl&&$n())},[fe==null?void 0:fe.active,e,Xl,$n]),S.useEffect(()=>{Ps||js||ot(`tutorial_start:${(e==null?void 0:e.id)||ke||pe.seed}`,"funnel.tutorial_start",{traceId:(e==null?void 0:e.id)||ke||"unknown",persona:Ze,launchPath:Zr})},[ot,pe.seed,ke,Ps,Ze,Zr,js,e==null?void 0:e.id]),S.useEffect(()=>{ce>0&&st(w=>w.playback?w:{...w,playback:!0})},[ce,st]),S.useEffect(()=>{l==="flow"&&st(w=>w.flow?w:{...w,flow:!0}),l==="matrix"&&st(w=>w.matrix?w:{...w,matrix:!0})},[l,st]),S.useEffect(()=>{V&&st(w=>w.inspect?w:{...w,inspect:!0})},[V,st]),S.useEffect(()=>{nu>1&&st(w=>w.collaborate?w:{...w,collaborate:!0})},[nu,st]),S.useEffect(()=>{ot(`session_start:${ke||pe.seed}`,"funnel.session_start",{traceId:ke||(e==null?void 0:e.id)||"unknown",seed:pe.seed})},[ot,pe.seed,ke,e==null?void 0:e.id]),S.useEffect(()=>{pe.raid.objectives.some(k=>k.progress>0)&&ot(`objective_progress:${ke||pe.seed}`,"funnel.first_objective_progress",{traceId:ke||(e==null?void 0:e.id)||"unknown"})},[ot,pe.raid.objectives,pe.seed,ke,e==null?void 0:e.id]),S.useEffect(()=>{pe.outcome.status!=="in_progress"&&(ot(`first_outcome:${ke||pe.seed}`,"funnel.first_mission_outcome",{status:pe.outcome.status,reason:pe.outcome.reason}),(pe.outcome.status==="win"||pe.outcome.status==="loss")&&ot(`run_outcome:${ke||pe.seed}`,"funnel.run_outcome",{status:pe.outcome.status,reason:pe.outcome.reason}))},[ot,pe.outcome.reason,pe.outcome.status,pe.seed,ke]),S.useEffect(()=>{if(!q||Pe||cu.current)return;const w=Ds[0];if(!w||w.traceId!==(e==null?void 0:e.id))return;const k=Math.abs(w.playheadMs-ce),P=w.mode!==l,D=(w.selectedStepId??null)!==(V??null);k<600&&!P&&!D||(cu.current=!0,$(w.playheadMs),(w.mode==="cinema"||w.mode==="flow"||w.mode==="compare"||w.mode==="matrix"||w.mode==="gameplay")&&u(w.mode),le(w.selectedStepId??null),window.setTimeout(()=>{cu.current=!1},180))},[Pe,l,ce,Ds,V,u,q,e==null?void 0:e.id]),S.useEffect(()=>{if(!e)return;const k=Date.parse(e.startedAt)+ce;let P=0,D=Number.POSITIVE_INFINITY;e.steps.forEach((W,ee)=>{const J=Date.parse(W.startedAt),Ae=Date.parse(W.endedAt??W.startedAt);if(k>=J&&k<=Ae){P=ee,D=0;return}const mn=Math.min(Math.abs(k-J),Math.abs(k-Ae));mn<D&&(D=mn,P=ee)}),[P,P-1,P+1].filter(W=>W>=0&&W<e.steps.length).forEach(W=>{const ee=e.steps[W];ee&&yq(e.id,ee.id,ie)})},[e,ce,ie]),S.useEffect(()=>{if(!e||!Pe||l!=="cinema"&&l!=="compare")return;const w=(z==null?void 0:z.metadata.wallTimeMs)??0,k=l==="compare"?Math.max(e.metadata.wallTimeMs||1,w||1):e.metadata.wallTimeMs||1;let P=0,D=performance.now();const U=W=>{const ee=(W-D)*de;D=W,$(J=>{const Ae=J+ee;return Ae>=k?(oe(!1),k):Ae}),P=requestAnimationFrame(U)};return P=requestAnimationFrame(U),()=>cancelAnimationFrame(P)},[e,z,Pe,de,l]),S.useEffect(()=>{const w=k=>{var W;const P=k.target,D=(W=P==null?void 0:P.tagName)==null?void 0:W.toLowerCase();if(!(D==="input"||D==="textarea"||D==="select"||P!=null&&P.isContentEditable)){if((k.metaKey||k.ctrlKey)&&k.key.toLowerCase()==="k"){k.preventDefault(),qe(ee=>!ee);return}if(k.key==="?"||k.key==="/"&&k.shiftKey){k.preventDefault(),te(!0);return}if(k.key.toLowerCase()==="s"){k.preventDefault(),oi();return}if(k.key.toLowerCase()==="e"){k.preventDefault(),me(ee=>!ee);return}if(k.key.toLowerCase()==="t"){k.preventDefault(),Ke(!0);return}if(k.key==="Escape"){if(Yl){Ke(!1),$t(!0);return}te(!1),qe(!1),le(null);return}if(k.key===" "){k.preventDefault(),(l==="cinema"||l==="compare")&&oe(ee=>!ee);return}if(k.key.toLowerCase()==="f"){k.preventDefault(),l==="flow"?u("cinema"):l==="cinema"&&ve("flow");return}if(k.key.toLowerCase()==="c"){k.preventDefault(),l!=="cinema"&&u("cinema");return}if(k.key.toLowerCase()==="g"){k.preventDefault(),ve("gameplay");return}if(k.key.toLowerCase()==="i"){k.preventDefault(),V?le(null):e!=null&&e.steps.length&&le(e.steps[0].id);return}if(k.key==="ArrowLeft"||k.key==="ArrowRight"){if(k.preventDefault(),!e)return;const ee=e.metadata.wallTimeMs||1;if(k.shiftKey){$(k.key==="ArrowLeft"?0:ee),oe(!1),u("cinema");return}const J=k.key==="ArrowRight"?1:-1,Ae=z4(xg,ce,J);Ae!=null&&($(Ae),oe(!1),u("cinema"))}}};return window.addEventListener("keydown",w),()=>window.removeEventListener("keydown",w)},[l,V,e,ce,xg,ve,u,me,qe,Ke,$t,Yl,oi]);const Cg=S.useMemo(()=>{if(!e||!fn||c)return null;const w=e.metadata.wallTimeMs||1,k=Math.min(Math.max(gr,5e3),w);let P=Math.max(0,ce-k/2);const D=Math.min(w,P+k);return D-P<k&&(P=Math.max(0,D-k)),{startMs:P,endMs:D}},[e,fn,ce,c,gr]),pn=!!(fe!=null&&fe.active),Tg=(fe==null?void 0:fe.step)??0,zP=((jg=Rs[Tg])==null?void 0:jg.label)??"Wrapping up",UP=Rs.length,GP=c!==f,HP=`${Math.min(Vn.length,ia)}/${Vn.length}`,WP=S.useMemo(()=>[{id:"macro-rapid-triage",label:"Run rapid triage launch path",description:"Jump to the highest-risk step and start mitigation.",group:"Macros",onTrigger:()=>{sa("rapid_triage")}},{id:"macro-deep-diagnosis",label:"Run deep diagnosis launch path",description:"Open flow analysis and guided tour.",group:"Macros",onTrigger:()=>{sa("deep_diagnosis")}},{id:"macro-team-sync",label:"Run team sync launch path",description:"Enable sync mode and generate shareable context.",group:"Macros",onTrigger:()=>{sa("team_sync")}},{id:"story-toggle",label:pn?"Stop story mode":"Start story mode",description:"Auto-runs a cinematic walkthrough.",group:"Story",keys:"S",onTrigger:oi},{id:"tour-start",label:"Start guided tour",description:"Walk the interface step by step.",group:"Onboarding",keys:"T",onTrigger:()=>Ke(!0)},{id:"explain-toggle",label:Ge?"Disable explain mode":"Enable explain mode",description:"Toggle contextual overlays.",group:"Onboarding",keys:"E",onTrigger:()=>me(w=>!w)},{id:"shortcuts",label:"Show shortcuts",description:"Open the keyboard map.",group:"Onboarding",keys:"?",onTrigger:()=>te(!0)},{id:"playback-toggle",label:Pe?"Pause playback":"Play playback",description:"Start or stop the run.",group:"Playback",keys:"Space",onTrigger:pu},{id:"mode-cinema",label:"Switch to Cinema",description:"Timeline playback view.",group:"Modes",keys:"C",onTrigger:()=>ve("cinema")},{id:"mode-flow",label:"Switch to Flow",description:"Graph dependency view.",group:"Modes",keys:"F",onTrigger:()=>ve("flow")},{id:"mode-compare",label:"Open Compare",description:"Side-by-side diff view.",group:"Modes",onTrigger:()=>ve("compare"),disabled:!z},{id:"mode-matrix",label:"Open Matrix",description:"Counterfactual replay matrix view.",group:"Modes",onTrigger:()=>ve("matrix")},{id:"mode-gameplay",label:"Open Gameplay",description:"World-class gameplay mechanics control center.",group:"Modes",keys:"G",onTrigger:()=>ve("gameplay")},{id:"jump-bottleneck",label:"Jump to bottleneck",description:"Select the slowest step.",group:"Navigation",onTrigger:Pt},{id:"jump-error",label:"Jump to error",description:"Select the first failed step.",group:"Navigation",onTrigger:Sr},{id:"replay-step",label:"Replay from selected step",description:"Branch a Directors Cut.",group:"Tools",onTrigger:()=>V&&hn(V),disabled:!V},{id:"overlay-toggle",label:ne?"Hide overlay":"Show overlay",description:"Ghost diff in Cinema/Flow.",group:"Tools",onTrigger:()=>Fe(w=>!w),disabled:!z},{id:"safe-export",label:ie?"Disable safe export":"Enable safe export",description:"Redact sensitive payloads.",group:"Safety",onTrigger:()=>R(w=>!w)},{id:"reload",label:"Reload traces",description:"Refresh trace data.",group:"Meta",onTrigger:i},{id:"handoff-digest",label:"Copy handoff digest",description:"Capture mode, risk summary, and next actions for teammates.",group:"Meta",keys:"H",onTrigger:()=>{Os()}}],[Os,pn,oi,Ge,Pe,pu,ve,z,Pt,Sr,V,hn,ne,ie,i,me,Fe,R,te,Ke,sa]),KP=S.useCallback(()=>{ot(`tutorial_skip:intro:${(e==null?void 0:e.id)||ke||pe.seed}`,"funnel.tutorial_skip",{traceId:(e==null?void 0:e.id)||ke||"unknown",source:"intro_overlay"}),Ns(!0)},[ot,pe.seed,ke,Ns,e==null?void 0:e.id]),YP=S.useCallback(()=>{Ns(!0),Ke(!0)},[Ns,Ke]),QP=S.useCallback(()=>{ot(`tutorial_skip:tour:${(e==null?void 0:e.id)||ke||pe.seed}`,"funnel.tutorial_skip",{traceId:(e==null?void 0:e.id)||ke||"unknown",source:"guided_tour"}),Ke(!1),$t(!0)},[ot,pe.seed,ke,$t,e==null?void 0:e.id]),XP=S.useCallback(()=>{ot(`tutorial_complete:${(e==null?void 0:e.id)||ke||pe.seed}`,"funnel.tutorial_complete",{traceId:(e==null?void 0:e.id)||ke||"unknown"}),Ke(!1),$t(!0)},[ot,pe.seed,ke,$t,e==null?void 0:e.id]);return n?h.jsx("div",{className:"loading",children:"Loading trace..."}):!r&&!e&&a.length===0?h.jsxs("div",{className:"error",children:[h.jsx("h2",{children:"No traces yet"}),h.jsx("p",{children:"Ingest your first trace, then reload to begin the Observe  Inspect  Direct workflow."}),h.jsxs("div",{className:"error-actions",children:[h.jsx("button",{className:"primary-button",type:"button",onClick:i,children:"Retry"}),h.jsx("a",{className:"ghost-button",href:"/help.html",target:"_blank",rel:"noreferrer",children:"Open help"})]})]}):r||!e?h.jsxs("div",{className:"error",children:[h.jsx("p",{children:r??"Failed to load trace."}),h.jsxs("div",{className:"error-actions",children:[h.jsx("button",{className:"primary-button",type:"button",onClick:i,children:"Retry"}),h.jsx("a",{className:"ghost-button",href:"/help.html",target:"_blank",rel:"noreferrer",children:"Open help"})]})]}):h.jsxs("div",{className:`app theme-${wr} ${Ge?"explain-mode":""} ${l==="compare"?"mode-compare":""} ${l==="matrix"?"mode-matrix":""} ${l==="gameplay"?"mode-gameplay":""}`,children:[h.jsx(MR,{trace:e,traces:a,selectedTraceId:s,onSelectTrace:o,onReload:i,onStartTour:()=>Ke(!0),onToggleStory:oi,onOpenPalette:()=>qe(!0),onToggleExplain:()=>me(w=>!w),onShareSession:hu,onCreateHandoffDigest:()=>void Os(),onThemeChange:en,onMotionChange:Hj,themeMode:wr,motionMode:Bt,activeSessions:nu,shareStatus:rP,handoffStatus:iP,explainMode:Ge,storyActive:pn,mode:l,missionCompletion:_g,runHealthScore:fu,modeHotkeys:hP}),!Ps&&!js?h.jsx(SI,{onComplete:KP,onStartTour:YP,onStartStory:si,persona:Ze,onPersonaChange:Ts,launchPath:Zr,onLaunchPathChange:ea,onStartLaunchPath:w=>void sa(w)}):null,Ps&&!Ln?h.jsx(_I,{explainMode:Ge,storyActive:pn,onStartTour:()=>{qn(!0),Ke(!0)},onStartStory:()=>{qn(!0),si()},onToggleExplain:()=>me(w=>!w),onDismiss:()=>qn(!0)}):null,h.jsx(gI,{steps:qP,open:Yl,onClose:QP,onComplete:XP}),h.jsx(wI,{enabled:Ge}),h.jsx(EI,{active:pn,label:zP,step:Tg,total:UP,onStop:$n,onRestart:si}),h.jsx(jR,{insights:t,investigation:E,onSelectStep:w=>{le(w),l!=="cinema"&&u("cinema")},onJumpToError:Sr,onJumpToBottleneck:Pt}),h.jsx(dI,{trace:e,mode:l==="matrix"||l==="gameplay"?"cinema":l,playheadMs:ce,selectedStepId:V,compareTrace:z,collapsed:On,onToggleCollapsed:()=>Wl(w=>!w),onModeChange:ve,onSelectStep:w=>{le(w),l!=="cinema"&&u("cinema")},onJumpToBottleneck:Pt,onReplay:hn,onStartTour:()=>Ke(!0),priorityQueue:VP}),h.jsxs("div",{className:"toolbar","data-help":!0,"data-help-indicator":!0,"data-tour":"toolbar","data-help-title":"Search + filters","data-help-body":"Filter by step type, enable Safe export, and jump between Cinema, Flow, Compare, and Matrix.","data-help-placement":"bottom",children:[h.jsx(NR,{query:c,typeFilter:m,onQueryChange:d,onTypeFilterChange:v}),h.jsxs("div",{className:"toolbar-actions",children:[h.jsx("input",{className:"search-input",value:p,onChange:w=>b(w.target.value),placeholder:"TraceQL (example: type=tool_call and duration_ms>800)","aria-label":"TraceQL query"}),h.jsx("button",{className:"ghost-button",type:"button",onClick:()=>void pP(),children:"Run TraceQL"}),y?h.jsxs("span",{className:"status-badge",children:[y.matchCount," match(es)"]}):null,GP?h.jsx("span",{className:"status-badge",children:"Filtering..."}):null,h.jsxs("span",{className:"status-badge",children:["Hydration ",HP]}),h.jsxs("span",{className:"status-badge",children:["Filter ",sP,"ms"]}),y?h.jsx("button",{className:"ghost-button",type:"button",onClick:()=>{b(""),g(null),_(null)},children:"Clear TraceQL"}):null,x?h.jsx("span",{className:"status-badge warn",children:x}):null,h.jsxs("select",{className:"search-select",value:j,onChange:w=>N(w.target.value),"aria-label":"Extension selector",children:[h.jsx("option",{value:"",children:"Select extension"}),M.map(w=>h.jsx("option",{value:w.id,children:w.name},w.id))]}),h.jsx("button",{className:"ghost-button",type:"button",onClick:()=>void mP(),disabled:!e||!j||L,children:L?"Running extension...":"Run extension"}),h.jsx("button",{className:`ghost-button ${l==="cinema"?"active":""}`,type:"button","aria-pressed":l==="cinema",title:"Timeline playback",onClick:()=>ve("cinema"),"data-help":!0,"data-help-title":"Cinema mode","data-help-body":"Timeline view with step cards ordered by time.","data-help-placement":"bottom",children:"Cinema"}),h.jsx("button",{className:`ghost-button ${l==="flow"?"active":""}`,type:"button","aria-pressed":l==="flow",title:"Graph view",onClick:()=>ve("flow"),"data-help":!0,"data-help-title":"Flow mode","data-help-body":"Dependency graph of steps and tool calls.","data-help-placement":"bottom",children:"Flow"}),h.jsx("button",{className:`ghost-button ${l==="compare"?"active":""}`,type:"button","aria-pressed":l==="compare",title:z?"Side-by-side compare":"Run a replay to enable compare",onClick:()=>ve("compare"),disabled:!z,"data-tour":"compare","data-help":!0,"data-help-title":"Compare mode","data-help-body":"Side-by-side view after a replay. Enabled once you replay.","data-help-placement":"bottom",children:"Compare"}),h.jsx("button",{className:`ghost-button ${l==="matrix"?"active":""}`,type:"button","aria-pressed":l==="matrix",title:"Counterfactual replay matrix",onClick:()=>ve("matrix"),"data-help":!0,"data-help-title":"Matrix mode","data-help-body":"Run multiple replay scenarios and rank likely causal factors.","data-help-placement":"bottom",children:"Matrix"}),h.jsx("button",{className:`ghost-button ${l==="gameplay"?"active":""}`,type:"button","aria-pressed":l==="gameplay",title:"Gameplay mechanics command center",onClick:()=>ve("gameplay"),"data-help":!0,"data-help-title":"Gameplay mode","data-help-body":"Command raids, campaign, pvp, time forks, boss runs, economy, and liveops.","data-help-placement":"bottom",children:"Gameplay"}),h.jsxs("label",{className:"toggle",title:"Redact payloads and disable raw views for safe sharing","data-help":!0,"data-help-title":"Safe export","data-help-body":"Redacts secrets and disables raw payload views for safe sharing.","data-help-placement":"bottom",children:[h.jsx("input",{type:"checkbox",checked:ie,onChange:()=>R(w=>!w)}),"Safe export"]}),e.steps.length>200||fn?h.jsxs("label",{className:"toggle",title:"Window steps around the playhead for large traces","data-help":!0,"data-help-title":"Windowed mode","data-help-body":"Limits rendering to a playhead window for large traces.","data-help-placement":"bottom",children:[h.jsx("input",{type:"checkbox",checked:fn,onChange:()=>Zt(w=>!w)}),"Windowed"]}):null,z?h.jsxs("label",{className:"toggle",title:"Show ghost overlay of replay in Cinema/Flow","data-help":!0,"data-help-title":"Overlay replay","data-help-body":"Layer the replay over the base run to spot differences.","data-help-placement":"bottom",children:[h.jsx("input",{type:"checkbox",checked:ne,onChange:()=>Fe(w=>!w)}),"Overlay"]}):null,h.jsxs("label",{className:"toggle",title:"Follow active collaborator cursor and mode updates",children:[h.jsx("input",{type:"checkbox",checked:q,onChange:()=>G(w=>!w)}),"Sync playback"]})]})]}),A?h.jsxs("div",{className:"inspector-section",children:[h.jsx("div",{className:"inspector-section-title",children:"Extension output"}),h.jsx("pre",{className:"inspector-json",children:JSON.stringify(A,null,2)})]}):null,l==="cinema"?h.jsxs("div",{className:"playback-stack","data-tour":"playback",children:[h.jsx("div",{"data-help":!0,"data-help-title":"Playback controls","data-help-body":"Play, pause, scrub, and adjust speed to feel the rhythm of the run.","data-help-placement":"bottom",children:h.jsx(B0,{playheadMs:ce,wallTimeMs:e.metadata.wallTimeMs||1,isPlaying:Pe,speed:de,onToggle:()=>oe(w=>!w),onScrub:w=>$(w),onSpeedChange:Mt})}),h.jsx("div",{"data-help":!0,"data-help-title":"Density map","data-help-body":"Zoom into hotspots and keep long traces readable with windowing.","data-help-placement":"bottom",children:h.jsx(nI,{traceStart:e.startedAt,traceEnd:e.endedAt,steps:e.steps,playheadMs:ce,windowRange:Cg,windowed:fn,spanMs:gr,onSpanChange:Xr,onToggleWindowed:Zt,onScrub:w=>$(w),persistenceKey:e.id,laneStrategy:Be,visibleLaneGroups:cP,remotePlayheads:dP})})]}):null,l==="compare"&&z?h.jsx("div",{"data-help":!0,"data-help-title":"Compare playback","data-help-body":"Sync both runs to evaluate improvements at identical timestamps.","data-help-placement":"bottom",children:h.jsx(B0,{playheadMs:ce,wallTimeMs:Math.max(e.metadata.wallTimeMs||1,z.metadata.wallTimeMs||1),isPlaying:Pe,speed:de,onToggle:()=>oe(w=>!w),onScrub:w=>$(w),onSpeedChange:Mt})}):null,h.jsxs("main",{className:`stage ${l==="compare"?"stage-compare":""} motion-fade-in`,role:"main",children:[h.jsx("div",{className:"main motion-slide-up",ref:uu,"data-help":!0,"data-help-indicator":!0,"data-tour":"stage","data-help-title":"Trace stage","data-help-body":"Every step becomes a scene. Hover or click to open deep inspection.","data-help-placement":"top",children:h.jsx(ZL,{morph:Wj,onComplete:FP,children:h.jsxs(S.Suspense,{fallback:h.jsx("div",{className:"loading",children:"Loading view..."}),children:[l==="cinema"?h.jsx(YR,{trace:e,steps:bg,selectedStepId:V,onSelectStep:w=>le(w),playheadMs:ce,windowRange:Cg,timing:t==null?void 0:t.timing,ghostTrace:ne?z:null,diff:uP,laneStrategy:Be,laneGroupsOrder:ai.order,hiddenLaneGroups:ai.hidden,onLaneStrategyChange:vP,onToggleLaneGroupVisibility:yP,onMoveLaneGroup:CP}):null,l==="flow"?h.jsx(tz,{steps:bg,selectedStepId:V,onSelectStep:w=>le(w),baseTrace:e,compareTrace:z,compareSteps:lP,overlayEnabled:ne,onToggleOverlay:()=>Fe(w=>!w)}):null,l==="compare"&&z?h.jsx(nz,{baseTrace:e,compareTrace:z,playheadMs:ce,safeExport:ie,onExit:()=>{u("cinema"),ae(null)}}):null,l==="matrix"?h.jsx(iz,{steps:e.steps,anchorStepId:Zl,onAnchorStepChange:eu,scenarios:Kj,onScenarioChange:jP,onDuplicateScenario:RP,onMoveScenario:IP,onAddScenario:NP,onRemoveScenario:AP,onRun:DP,onCancel:OP,onReplaceScenarios:PP,loading:Yj,error:Qj,job:ta,matrix:jt,safeExport:ie,onOpenCompare:LP}):null,l==="gameplay"?h.jsx(az,{state:pe,playheadMs:ce,onUpdate:w=>ra(k=>w(k)),session:De,playerId:br,sessionError:Xj,onCreateSession:gP,onJoinSession:wP,onLeaveSession:bP,onDispatchAction:xP,guild:Jj,onCreateGuild:SP,onJoinGuild:_P,onScheduleGuildEvent:kP,onCompleteGuildEvent:EP,observability:Zj,analytics:tP}):null]})})}),h.jsx(S.Suspense,{fallback:h.jsx("div",{className:"loading",children:"Loading panel..."}),children:l==="compare"||l==="matrix"||l==="gameplay"?null:Sg?h.jsx(rz,{traceId:e.id,step:Sg,safeExport:ie,onClose:()=>le(null),onReplay:hn}):h.jsx(yI,{trace:e,mode:l,selectedStepId:V,onModeChange:ve,onSelectStep:w=>le(w),onJumpToBottleneck:Pt,onReplay:hn,recommendations:tn,persona:Ze,annotations:fP,activityFeed:aP,onAddAnnotation:MP,missionProgress:Ms,missionCompletion:_g,onResetMissions:TP,narrative:_r,onAskDirector:$P,onExportNarrative:BP})})]}),h.jsxs("div",{className:"mobile-quick-rail","aria-label":"Mobile quick actions",children:[h.jsx("button",{className:`ghost-button ${pn?"active":""}`,type:"button",onClick:oi,"aria-label":pn?"Stop story mode":"Start story mode",children:pn?"Stop Story":"Story"}),h.jsx("button",{className:"ghost-button",type:"button",onClick:()=>Ke(!0),"aria-label":"Start guided tour",children:"Guide"}),h.jsx("button",{className:"ghost-button",type:"button",onClick:()=>qe(!0),"aria-label":"Open command palette",children:"Command"}),h.jsx("button",{className:"ghost-button",type:"button",onClick:()=>void Os(),"aria-label":"Copy handoff digest",children:"Handoff"})]}),h.jsx(kI,{mode:l==="matrix"||l==="gameplay"?"cinema":l,isPlaying:Pe,storyActive:pn,explainMode:Ge,hidden:l==="compare",open:Kl,onToggleOpen:()=>Jr(w=>!w),onTogglePlay:pu,onStartStory:si,onStopStory:$n,onStartTour:()=>Ke(!0),onOpenPalette:()=>qe(!0),onShowShortcuts:()=>te(!0),onToggleExplain:()=>me(w=>!w),onJumpToBottleneck:Pt}),h.jsx(uI,{open:Q,onClose:()=>qe(!1),actions:WP}),h.jsx(iI,{open:F,onClose:()=>te(!1)})]})}Jp.createRoot(document.getElementById("root")).render(h.jsx(hN.StrictMode,{children:h.jsx(fz,{})}));export{Pz as A,Nz as B,Az as C,Iz as D,Dz as E,Rz as F,hN as R,$R as S,WR as T,q4 as a,$4 as b,JR as c,_M as d,mz as e,pz as f,Ak as g,vq as h,ZR as i,h as j,vz as k,yz as l,gz as m,wz as n,xz as o,Sz as p,_z as q,S as r,RR as s,kz as t,bz as u,Ez as v,Cz as w,Tz as x,Mz as y,jz as z};
