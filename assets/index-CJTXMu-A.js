const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-CiJ6T5Xu.js","assets/index-B5DZHykP.css"])))=>i.map(i=>d[i]);
(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();var $s=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Kk(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Wk={exports:{}},dl={},Yk={exports:{}},he={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ws=Symbol.for("react.element"),sP=Symbol.for("react.portal"),oP=Symbol.for("react.fragment"),lP=Symbol.for("react.strict_mode"),uP=Symbol.for("react.profiler"),cP=Symbol.for("react.provider"),dP=Symbol.for("react.context"),fP=Symbol.for("react.forward_ref"),hP=Symbol.for("react.suspense"),pP=Symbol.for("react.memo"),mP=Symbol.for("react.lazy"),Ly=Symbol.iterator;function gP(e){return e===null||typeof e!="object"?null:(e=Ly&&e[Ly]||e["@@iterator"],typeof e=="function"?e:null)}var Qk={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Jk=Object.assign,Xk={};function Ji(e,t,n){this.props=e,this.context=t,this.refs=Xk,this.updater=n||Qk}Ji.prototype.isReactComponent={};Ji.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Ji.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Zk(){}Zk.prototype=Ji.prototype;function wg(e,t,n){this.props=e,this.context=t,this.refs=Xk,this.updater=n||Qk}var Sg=wg.prototype=new Zk;Sg.constructor=wg;Jk(Sg,Ji.prototype);Sg.isPureReactComponent=!0;var qy=Array.isArray,eC=Object.prototype.hasOwnProperty,_g={current:null},tC={key:!0,ref:!0,__self:!0,__source:!0};function nC(e,t,n){var r,i={},a=null,s=null;if(t!=null)for(r in t.ref!==void 0&&(s=t.ref),t.key!==void 0&&(a=""+t.key),t)eC.call(t,r)&&!tC.hasOwnProperty(r)&&(i[r]=t[r]);var o=arguments.length-2;if(o===1)i.children=n;else if(1<o){for(var l=Array(o),u=0;u<o;u++)l[u]=arguments[u+2];i.children=l}if(e&&e.defaultProps)for(r in o=e.defaultProps,o)i[r]===void 0&&(i[r]=o[r]);return{$$typeof:ws,type:e,key:a,ref:s,props:i,_owner:_g.current}}function vP(e,t){return{$$typeof:ws,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function kg(e){return typeof e=="object"&&e!==null&&e.$$typeof===ws}function yP(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Fy=/\/+/g;function yu(e,t){return typeof e=="object"&&e!==null&&e.key!=null?yP(""+e.key):t.toString(36)}function mo(e,t,n,r,i){var a=typeof e;(a==="undefined"||a==="boolean")&&(e=null);var s=!1;if(e===null)s=!0;else switch(a){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case ws:case sP:s=!0}}if(s)return s=e,i=i(s),e=r===""?"."+yu(s,0):r,qy(i)?(n="",e!=null&&(n=e.replace(Fy,"$&/")+"/"),mo(i,t,n,"",function(u){return u})):i!=null&&(kg(i)&&(i=vP(i,n+(!i.key||s&&s.key===i.key?"":(""+i.key).replace(Fy,"$&/")+"/")+e)),t.push(i)),1;if(s=0,r=r===""?".":r+":",qy(e))for(var o=0;o<e.length;o++){a=e[o];var l=r+yu(a,o);s+=mo(a,t,n,l,i)}else if(l=gP(e),typeof l=="function")for(e=l.call(e),o=0;!(a=e.next()).done;)a=a.value,l=r+yu(a,o++),s+=mo(a,t,n,l,i);else if(a==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function Bs(e,t,n){if(e==null)return e;var r=[],i=0;return mo(e,r,"","",function(a){return t.call(n,a,i++)}),r}function bP(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var mt={current:null},go={transition:null},xP={ReactCurrentDispatcher:mt,ReactCurrentBatchConfig:go,ReactCurrentOwner:_g};function rC(){throw Error("act(...) is not supported in production builds of React.")}he.Children={map:Bs,forEach:function(e,t,n){Bs(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Bs(e,function(){t++}),t},toArray:function(e){return Bs(e,function(t){return t})||[]},only:function(e){if(!kg(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};he.Component=Ji;he.Fragment=oP;he.Profiler=uP;he.PureComponent=wg;he.StrictMode=lP;he.Suspense=hP;he.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=xP;he.act=rC;he.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=Jk({},e.props),i=e.key,a=e.ref,s=e._owner;if(t!=null){if(t.ref!==void 0&&(a=t.ref,s=_g.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var o=e.type.defaultProps;for(l in t)eC.call(t,l)&&!tC.hasOwnProperty(l)&&(r[l]=t[l]===void 0&&o!==void 0?o[l]:t[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){o=Array(l);for(var u=0;u<l;u++)o[u]=arguments[u+2];r.children=o}return{$$typeof:ws,type:e.type,key:i,ref:a,props:r,_owner:s}};he.createContext=function(e){return e={$$typeof:dP,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:cP,_context:e},e.Consumer=e};he.createElement=nC;he.createFactory=function(e){var t=nC.bind(null,e);return t.type=e,t};he.createRef=function(){return{current:null}};he.forwardRef=function(e){return{$$typeof:fP,render:e}};he.isValidElement=kg;he.lazy=function(e){return{$$typeof:mP,_payload:{_status:-1,_result:e},_init:bP}};he.memo=function(e,t){return{$$typeof:pP,type:e,compare:t===void 0?null:t}};he.startTransition=function(e){var t=go.transition;go.transition={};try{e()}finally{go.transition=t}};he.unstable_act=rC;he.useCallback=function(e,t){return mt.current.useCallback(e,t)};he.useContext=function(e){return mt.current.useContext(e)};he.useDebugValue=function(){};he.useDeferredValue=function(e){return mt.current.useDeferredValue(e)};he.useEffect=function(e,t){return mt.current.useEffect(e,t)};he.useId=function(){return mt.current.useId()};he.useImperativeHandle=function(e,t,n){return mt.current.useImperativeHandle(e,t,n)};he.useInsertionEffect=function(e,t){return mt.current.useInsertionEffect(e,t)};he.useLayoutEffect=function(e,t){return mt.current.useLayoutEffect(e,t)};he.useMemo=function(e,t){return mt.current.useMemo(e,t)};he.useReducer=function(e,t,n){return mt.current.useReducer(e,t,n)};he.useRef=function(e){return mt.current.useRef(e)};he.useState=function(e){return mt.current.useState(e)};he.useSyncExternalStore=function(e,t,n){return mt.current.useSyncExternalStore(e,t,n)};he.useTransition=function(){return mt.current.useTransition()};he.version="18.3.1";Yk.exports=he;var x=Yk.exports;const wP=Kk(x);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var SP=x,_P=Symbol.for("react.element"),kP=Symbol.for("react.fragment"),CP=Object.prototype.hasOwnProperty,jP=SP.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,EP={key:!0,ref:!0,__self:!0,__source:!0};function iC(e,t,n){var r,i={},a=null,s=null;n!==void 0&&(a=""+n),t.key!==void 0&&(a=""+t.key),t.ref!==void 0&&(s=t.ref);for(r in t)CP.call(t,r)&&!EP.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:_P,type:e,key:a,ref:s,props:i,_owner:jP.current}}dl.Fragment=kP;dl.jsx=iC;dl.jsxs=iC;Wk.exports=dl;var d=Wk.exports,sm={},aC={exports:{}},At={},sC={exports:{}},oC={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(D,B){var V=D.length;D.push(B);e:for(;0<V;){var z=V-1>>>1,te=D[z];if(0<i(te,B))D[z]=B,D[V]=te,V=z;else break e}}function n(D){return D.length===0?null:D[0]}function r(D){if(D.length===0)return null;var B=D[0],V=D.pop();if(V!==B){D[0]=V;e:for(var z=0,te=D.length,A=te>>>1;z<A;){var J=2*(z+1)-1,se=D[J],U=J+1,me=D[U];if(0>i(se,V))U<te&&0>i(me,se)?(D[z]=me,D[U]=V,z=U):(D[z]=se,D[J]=V,z=J);else if(U<te&&0>i(me,V))D[z]=me,D[U]=V,z=U;else break e}}return B}function i(D,B){var V=D.sortIndex-B.sortIndex;return V!==0?V:D.id-B.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var s=Date,o=s.now();e.unstable_now=function(){return s.now()-o}}var l=[],u=[],c=1,f=null,h=3,m=!1,g=!1,p=!1,S=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(D){for(var B=n(u);B!==null;){if(B.callback===null)r(u);else if(B.startTime<=D)r(u),B.sortIndex=B.expirationTime,t(l,B);else break;B=n(u)}}function _(D){if(p=!1,w(D),!g)if(n(l)!==null)g=!0,fe(C);else{var B=n(u);B!==null&&ie(_,B.startTime-D)}}function C(D,B){g=!1,p&&(p=!1,v(j),j=-1),m=!0;var V=h;try{for(w(B),f=n(l);f!==null&&(!(f.expirationTime>B)||D&&!R());){var z=f.callback;if(typeof z=="function"){f.callback=null,h=f.priorityLevel;var te=z(f.expirationTime<=B);B=e.unstable_now(),typeof te=="function"?f.callback=te:f===n(l)&&r(l),w(B)}else r(l);f=n(l)}if(f!==null)var A=!0;else{var J=n(u);J!==null&&ie(_,J.startTime-B),A=!1}return A}finally{f=null,h=V,m=!1}}var E=!1,T=null,j=-1,N=5,P=-1;function R(){return!(e.unstable_now()-P<N)}function O(){if(T!==null){var D=e.unstable_now();P=D;var B=!0;try{B=T(!0,D)}finally{B?F():(E=!1,T=null)}}else E=!1}var F;if(typeof y=="function")F=function(){y(O)};else if(typeof MessageChannel<"u"){var X=new MessageChannel,$=X.port2;X.port1.onmessage=O,F=function(){$.postMessage(null)}}else F=function(){S(O,0)};function fe(D){T=D,E||(E=!0,F())}function ie(D,B){j=S(function(){D(e.unstable_now())},B)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(D){D.callback=null},e.unstable_continueExecution=function(){g||m||(g=!0,fe(C))},e.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<D?Math.floor(1e3/D):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return n(l)},e.unstable_next=function(D){switch(h){case 1:case 2:case 3:var B=3;break;default:B=h}var V=h;h=B;try{return D()}finally{h=V}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(D,B){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var V=h;h=D;try{return B()}finally{h=V}},e.unstable_scheduleCallback=function(D,B,V){var z=e.unstable_now();switch(typeof V=="object"&&V!==null?(V=V.delay,V=typeof V=="number"&&0<V?z+V:z):V=z,D){case 1:var te=-1;break;case 2:te=250;break;case 5:te=1073741823;break;case 4:te=1e4;break;default:te=5e3}return te=V+te,D={id:c++,callback:B,priorityLevel:D,startTime:V,expirationTime:te,sortIndex:-1},V>z?(D.sortIndex=V,t(u,D),n(l)===null&&D===n(u)&&(p?(v(j),j=-1):p=!0,ie(_,V-z))):(D.sortIndex=te,t(l,D),g||m||(g=!0,fe(C))),D},e.unstable_shouldYield=R,e.unstable_wrapCallback=function(D){var B=h;return function(){var V=h;h=B;try{return D.apply(this,arguments)}finally{h=V}}}})(oC);sC.exports=oC;var TP=sC.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var NP=x,Pt=TP;function q(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var lC=new Set,Xa={};function Jr(e,t){$i(e,t),$i(e+"Capture",t)}function $i(e,t){for(Xa[e]=t,e=0;e<t.length;e++)lC.add(t[e])}var Dn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),om=Object.prototype.hasOwnProperty,MP=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Vy={},$y={};function PP(e){return om.call($y,e)?!0:om.call(Vy,e)?!1:MP.test(e)?$y[e]=!0:(Vy[e]=!0,!1)}function RP(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function AP(e,t,n,r){if(t===null||typeof t>"u"||RP(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function gt(e,t,n,r,i,a,s){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=s}var at={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){at[e]=new gt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];at[t]=new gt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){at[e]=new gt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){at[e]=new gt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){at[e]=new gt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){at[e]=new gt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){at[e]=new gt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){at[e]=new gt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){at[e]=new gt(e,5,!1,e.toLowerCase(),null,!1,!1)});var Cg=/[\-:]([a-z])/g;function jg(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Cg,jg);at[t]=new gt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Cg,jg);at[t]=new gt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Cg,jg);at[t]=new gt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){at[e]=new gt(e,1,!1,e.toLowerCase(),null,!1,!1)});at.xlinkHref=new gt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){at[e]=new gt(e,1,!1,e.toLowerCase(),null,!0,!0)});function Eg(e,t,n,r){var i=at.hasOwnProperty(t)?at[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(AP(t,n,i,r)&&(n=null),r||i===null?PP(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,r=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var $n=NP.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,zs=Symbol.for("react.element"),yi=Symbol.for("react.portal"),bi=Symbol.for("react.fragment"),Tg=Symbol.for("react.strict_mode"),lm=Symbol.for("react.profiler"),uC=Symbol.for("react.provider"),cC=Symbol.for("react.context"),Ng=Symbol.for("react.forward_ref"),um=Symbol.for("react.suspense"),cm=Symbol.for("react.suspense_list"),Mg=Symbol.for("react.memo"),er=Symbol.for("react.lazy"),dC=Symbol.for("react.offscreen"),By=Symbol.iterator;function pa(e){return e===null||typeof e!="object"?null:(e=By&&e[By]||e["@@iterator"],typeof e=="function"?e:null)}var Oe=Object.assign,bu;function ja(e){if(bu===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);bu=t&&t[1]||""}return`
`+bu+e}var xu=!1;function wu(e,t){if(!e||xu)return"";xu=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),a=r.stack.split(`
`),s=i.length-1,o=a.length-1;1<=s&&0<=o&&i[s]!==a[o];)o--;for(;1<=s&&0<=o;s--,o--)if(i[s]!==a[o]){if(s!==1||o!==1)do if(s--,o--,0>o||i[s]!==a[o]){var l=`
`+i[s].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}while(1<=s&&0<=o);break}}}finally{xu=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?ja(e):""}function IP(e){switch(e.tag){case 5:return ja(e.type);case 16:return ja("Lazy");case 13:return ja("Suspense");case 19:return ja("SuspenseList");case 0:case 2:case 15:return e=wu(e.type,!1),e;case 11:return e=wu(e.type.render,!1),e;case 1:return e=wu(e.type,!0),e;default:return""}}function dm(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case bi:return"Fragment";case yi:return"Portal";case lm:return"Profiler";case Tg:return"StrictMode";case um:return"Suspense";case cm:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case cC:return(e.displayName||"Context")+".Consumer";case uC:return(e._context.displayName||"Context")+".Provider";case Ng:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Mg:return t=e.displayName||null,t!==null?t:dm(e.type)||"Memo";case er:t=e._payload,e=e._init;try{return dm(e(t))}catch{}}return null}function DP(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return dm(t);case 8:return t===Tg?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function gr(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function fC(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function OP(e){var t=fC(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(s){r=""+s,a.call(this,s)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(s){r=""+s},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Us(e){e._valueTracker||(e._valueTracker=OP(e))}function hC(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=fC(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Mo(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function fm(e,t){var n=t.checked;return Oe({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function zy(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=gr(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function pC(e,t){t=t.checked,t!=null&&Eg(e,"checked",t,!1)}function hm(e,t){pC(e,t);var n=gr(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?pm(e,t.type,n):t.hasOwnProperty("defaultValue")&&pm(e,t.type,gr(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Uy(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function pm(e,t,n){(t!=="number"||Mo(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Ea=Array.isArray;function Di(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+gr(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function mm(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(q(91));return Oe({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Gy(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(q(92));if(Ea(n)){if(1<n.length)throw Error(q(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:gr(n)}}function mC(e,t){var n=gr(t.value),r=gr(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function Hy(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function gC(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function gm(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?gC(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Gs,vC=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Gs=Gs||document.createElement("div"),Gs.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Gs.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Za(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Fa={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},LP=["Webkit","ms","Moz","O"];Object.keys(Fa).forEach(function(e){LP.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Fa[t]=Fa[e]})});function yC(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Fa.hasOwnProperty(e)&&Fa[e]?(""+t).trim():t+"px"}function bC(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=yC(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}var qP=Oe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function vm(e,t){if(t){if(qP[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(q(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(q(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(q(61))}if(t.style!=null&&typeof t.style!="object")throw Error(q(62))}}function ym(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var bm=null;function Pg(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var xm=null,Oi=null,Li=null;function Ky(e){if(e=ks(e)){if(typeof xm!="function")throw Error(q(280));var t=e.stateNode;t&&(t=gl(t),xm(e.stateNode,e.type,t))}}function xC(e){Oi?Li?Li.push(e):Li=[e]:Oi=e}function wC(){if(Oi){var e=Oi,t=Li;if(Li=Oi=null,Ky(e),t)for(e=0;e<t.length;e++)Ky(t[e])}}function SC(e,t){return e(t)}function _C(){}var Su=!1;function kC(e,t,n){if(Su)return e(t,n);Su=!0;try{return SC(e,t,n)}finally{Su=!1,(Oi!==null||Li!==null)&&(_C(),wC())}}function es(e,t){var n=e.stateNode;if(n===null)return null;var r=gl(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(q(231,t,typeof n));return n}var wm=!1;if(Dn)try{var ma={};Object.defineProperty(ma,"passive",{get:function(){wm=!0}}),window.addEventListener("test",ma,ma),window.removeEventListener("test",ma,ma)}catch{wm=!1}function FP(e,t,n,r,i,a,s,o,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(c){this.onError(c)}}var Va=!1,Po=null,Ro=!1,Sm=null,VP={onError:function(e){Va=!0,Po=e}};function $P(e,t,n,r,i,a,s,o,l){Va=!1,Po=null,FP.apply(VP,arguments)}function BP(e,t,n,r,i,a,s,o,l){if($P.apply(this,arguments),Va){if(Va){var u=Po;Va=!1,Po=null}else throw Error(q(198));Ro||(Ro=!0,Sm=u)}}function Xr(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function CC(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Wy(e){if(Xr(e)!==e)throw Error(q(188))}function zP(e){var t=e.alternate;if(!t){if(t=Xr(e),t===null)throw Error(q(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var a=i.alternate;if(a===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return Wy(i),e;if(a===r)return Wy(i),t;a=a.sibling}throw Error(q(188))}if(n.return!==r.return)n=i,r=a;else{for(var s=!1,o=i.child;o;){if(o===n){s=!0,n=i,r=a;break}if(o===r){s=!0,r=i,n=a;break}o=o.sibling}if(!s){for(o=a.child;o;){if(o===n){s=!0,n=a,r=i;break}if(o===r){s=!0,r=a,n=i;break}o=o.sibling}if(!s)throw Error(q(189))}}if(n.alternate!==r)throw Error(q(190))}if(n.tag!==3)throw Error(q(188));return n.stateNode.current===n?e:t}function jC(e){return e=zP(e),e!==null?EC(e):null}function EC(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=EC(e);if(t!==null)return t;e=e.sibling}return null}var TC=Pt.unstable_scheduleCallback,Yy=Pt.unstable_cancelCallback,UP=Pt.unstable_shouldYield,GP=Pt.unstable_requestPaint,He=Pt.unstable_now,HP=Pt.unstable_getCurrentPriorityLevel,Rg=Pt.unstable_ImmediatePriority,NC=Pt.unstable_UserBlockingPriority,Ao=Pt.unstable_NormalPriority,KP=Pt.unstable_LowPriority,MC=Pt.unstable_IdlePriority,fl=null,mn=null;function WP(e){if(mn&&typeof mn.onCommitFiberRoot=="function")try{mn.onCommitFiberRoot(fl,e,void 0,(e.current.flags&128)===128)}catch{}}var tn=Math.clz32?Math.clz32:JP,YP=Math.log,QP=Math.LN2;function JP(e){return e>>>=0,e===0?32:31-(YP(e)/QP|0)|0}var Hs=64,Ks=4194304;function Ta(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Io(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,s=n&268435455;if(s!==0){var o=s&~i;o!==0?r=Ta(o):(a&=s,a!==0&&(r=Ta(a)))}else s=n&~i,s!==0?r=Ta(s):a!==0&&(r=Ta(a));if(r===0)return 0;if(t!==0&&t!==r&&!(t&i)&&(i=r&-r,a=t&-t,i>=a||i===16&&(a&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-tn(t),i=1<<n,r|=e[n],t&=~i;return r}function XP(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ZP(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var s=31-tn(a),o=1<<s,l=i[s];l===-1?(!(o&n)||o&r)&&(i[s]=XP(o,t)):l<=t&&(e.expiredLanes|=o),a&=~o}}function _m(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function PC(){var e=Hs;return Hs<<=1,!(Hs&4194240)&&(Hs=64),e}function _u(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Ss(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-tn(t),e[t]=n}function eR(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-tn(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}function Ag(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-tn(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var Se=0;function RC(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var AC,Ig,IC,DC,OC,km=!1,Ws=[],or=null,lr=null,ur=null,ts=new Map,ns=new Map,nr=[],tR="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Qy(e,t){switch(e){case"focusin":case"focusout":or=null;break;case"dragenter":case"dragleave":lr=null;break;case"mouseover":case"mouseout":ur=null;break;case"pointerover":case"pointerout":ts.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ns.delete(t.pointerId)}}function ga(e,t,n,r,i,a){return e===null||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},t!==null&&(t=ks(t),t!==null&&Ig(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function nR(e,t,n,r,i){switch(t){case"focusin":return or=ga(or,e,t,n,r,i),!0;case"dragenter":return lr=ga(lr,e,t,n,r,i),!0;case"mouseover":return ur=ga(ur,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return ts.set(a,ga(ts.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,ns.set(a,ga(ns.get(a)||null,e,t,n,r,i)),!0}return!1}function LC(e){var t=Lr(e.target);if(t!==null){var n=Xr(t);if(n!==null){if(t=n.tag,t===13){if(t=CC(n),t!==null){e.blockedOn=t,OC(e.priority,function(){IC(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function vo(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Cm(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);bm=r,n.target.dispatchEvent(r),bm=null}else return t=ks(n),t!==null&&Ig(t),e.blockedOn=n,!1;t.shift()}return!0}function Jy(e,t,n){vo(e)&&n.delete(t)}function rR(){km=!1,or!==null&&vo(or)&&(or=null),lr!==null&&vo(lr)&&(lr=null),ur!==null&&vo(ur)&&(ur=null),ts.forEach(Jy),ns.forEach(Jy)}function va(e,t){e.blockedOn===t&&(e.blockedOn=null,km||(km=!0,Pt.unstable_scheduleCallback(Pt.unstable_NormalPriority,rR)))}function rs(e){function t(i){return va(i,e)}if(0<Ws.length){va(Ws[0],e);for(var n=1;n<Ws.length;n++){var r=Ws[n];r.blockedOn===e&&(r.blockedOn=null)}}for(or!==null&&va(or,e),lr!==null&&va(lr,e),ur!==null&&va(ur,e),ts.forEach(t),ns.forEach(t),n=0;n<nr.length;n++)r=nr[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<nr.length&&(n=nr[0],n.blockedOn===null);)LC(n),n.blockedOn===null&&nr.shift()}var qi=$n.ReactCurrentBatchConfig,Do=!0;function iR(e,t,n,r){var i=Se,a=qi.transition;qi.transition=null;try{Se=1,Dg(e,t,n,r)}finally{Se=i,qi.transition=a}}function aR(e,t,n,r){var i=Se,a=qi.transition;qi.transition=null;try{Se=4,Dg(e,t,n,r)}finally{Se=i,qi.transition=a}}function Dg(e,t,n,r){if(Do){var i=Cm(e,t,n,r);if(i===null)Au(e,t,r,Oo,n),Qy(e,r);else if(nR(i,e,t,n,r))r.stopPropagation();else if(Qy(e,r),t&4&&-1<tR.indexOf(e)){for(;i!==null;){var a=ks(i);if(a!==null&&AC(a),a=Cm(e,t,n,r),a===null&&Au(e,t,r,Oo,n),a===i)break;i=a}i!==null&&r.stopPropagation()}else Au(e,t,r,null,n)}}var Oo=null;function Cm(e,t,n,r){if(Oo=null,e=Pg(r),e=Lr(e),e!==null)if(t=Xr(e),t===null)e=null;else if(n=t.tag,n===13){if(e=CC(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Oo=e,null}function qC(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(HP()){case Rg:return 1;case NC:return 4;case Ao:case KP:return 16;case MC:return 536870912;default:return 16}default:return 16}}var ar=null,Og=null,yo=null;function FC(){if(yo)return yo;var e,t=Og,n=t.length,r,i="value"in ar?ar.value:ar.textContent,a=i.length;for(e=0;e<n&&t[e]===i[e];e++);var s=n-e;for(r=1;r<=s&&t[n-r]===i[a-r];r++);return yo=i.slice(e,1<r?1-r:void 0)}function bo(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Ys(){return!0}function Xy(){return!1}function It(e){function t(n,r,i,a,s){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=a,this.target=s,this.currentTarget=null;for(var o in e)e.hasOwnProperty(o)&&(n=e[o],this[o]=n?n(a):a[o]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?Ys:Xy,this.isPropagationStopped=Xy,this}return Oe(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ys)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ys)},persist:function(){},isPersistent:Ys}),t}var Xi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Lg=It(Xi),_s=Oe({},Xi,{view:0,detail:0}),sR=It(_s),ku,Cu,ya,hl=Oe({},_s,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:qg,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ya&&(ya&&e.type==="mousemove"?(ku=e.screenX-ya.screenX,Cu=e.screenY-ya.screenY):Cu=ku=0,ya=e),ku)},movementY:function(e){return"movementY"in e?e.movementY:Cu}}),Zy=It(hl),oR=Oe({},hl,{dataTransfer:0}),lR=It(oR),uR=Oe({},_s,{relatedTarget:0}),ju=It(uR),cR=Oe({},Xi,{animationName:0,elapsedTime:0,pseudoElement:0}),dR=It(cR),fR=Oe({},Xi,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),hR=It(fR),pR=Oe({},Xi,{data:0}),e0=It(pR),mR={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},gR={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},vR={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function yR(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=vR[e])?!!t[e]:!1}function qg(){return yR}var bR=Oe({},_s,{key:function(e){if(e.key){var t=mR[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=bo(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?gR[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:qg,charCode:function(e){return e.type==="keypress"?bo(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?bo(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),xR=It(bR),wR=Oe({},hl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),t0=It(wR),SR=Oe({},_s,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:qg}),_R=It(SR),kR=Oe({},Xi,{propertyName:0,elapsedTime:0,pseudoElement:0}),CR=It(kR),jR=Oe({},hl,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),ER=It(jR),TR=[9,13,27,32],Fg=Dn&&"CompositionEvent"in window,$a=null;Dn&&"documentMode"in document&&($a=document.documentMode);var NR=Dn&&"TextEvent"in window&&!$a,VC=Dn&&(!Fg||$a&&8<$a&&11>=$a),n0=" ",r0=!1;function $C(e,t){switch(e){case"keyup":return TR.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function BC(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var xi=!1;function MR(e,t){switch(e){case"compositionend":return BC(t);case"keypress":return t.which!==32?null:(r0=!0,n0);case"textInput":return e=t.data,e===n0&&r0?null:e;default:return null}}function PR(e,t){if(xi)return e==="compositionend"||!Fg&&$C(e,t)?(e=FC(),yo=Og=ar=null,xi=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return VC&&t.locale!=="ko"?null:t.data;default:return null}}var RR={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function i0(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!RR[e.type]:t==="textarea"}function zC(e,t,n,r){xC(r),t=Lo(t,"onChange"),0<t.length&&(n=new Lg("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Ba=null,is=null;function AR(e){ej(e,0)}function pl(e){var t=_i(e);if(hC(t))return e}function IR(e,t){if(e==="change")return t}var UC=!1;if(Dn){var Eu;if(Dn){var Tu="oninput"in document;if(!Tu){var a0=document.createElement("div");a0.setAttribute("oninput","return;"),Tu=typeof a0.oninput=="function"}Eu=Tu}else Eu=!1;UC=Eu&&(!document.documentMode||9<document.documentMode)}function s0(){Ba&&(Ba.detachEvent("onpropertychange",GC),is=Ba=null)}function GC(e){if(e.propertyName==="value"&&pl(is)){var t=[];zC(t,is,e,Pg(e)),kC(AR,t)}}function DR(e,t,n){e==="focusin"?(s0(),Ba=t,is=n,Ba.attachEvent("onpropertychange",GC)):e==="focusout"&&s0()}function OR(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return pl(is)}function LR(e,t){if(e==="click")return pl(t)}function qR(e,t){if(e==="input"||e==="change")return pl(t)}function FR(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var rn=typeof Object.is=="function"?Object.is:FR;function as(e,t){if(rn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!om.call(t,i)||!rn(e[i],t[i]))return!1}return!0}function o0(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function l0(e,t){var n=o0(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=o0(n)}}function HC(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?HC(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function KC(){for(var e=window,t=Mo();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Mo(e.document)}return t}function Vg(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function VR(e){var t=KC(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&HC(n.ownerDocument.documentElement,n)){if(r!==null&&Vg(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=r.end===void 0?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=l0(n,a);var s=l0(n,r);i&&s&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==s.node||e.focusOffset!==s.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(s.node,s.offset)):(t.setEnd(s.node,s.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var $R=Dn&&"documentMode"in document&&11>=document.documentMode,wi=null,jm=null,za=null,Em=!1;function u0(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Em||wi==null||wi!==Mo(r)||(r=wi,"selectionStart"in r&&Vg(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),za&&as(za,r)||(za=r,r=Lo(jm,"onSelect"),0<r.length&&(t=new Lg("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=wi)))}function Qs(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Si={animationend:Qs("Animation","AnimationEnd"),animationiteration:Qs("Animation","AnimationIteration"),animationstart:Qs("Animation","AnimationStart"),transitionend:Qs("Transition","TransitionEnd")},Nu={},WC={};Dn&&(WC=document.createElement("div").style,"AnimationEvent"in window||(delete Si.animationend.animation,delete Si.animationiteration.animation,delete Si.animationstart.animation),"TransitionEvent"in window||delete Si.transitionend.transition);function ml(e){if(Nu[e])return Nu[e];if(!Si[e])return e;var t=Si[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in WC)return Nu[e]=t[n];return e}var YC=ml("animationend"),QC=ml("animationiteration"),JC=ml("animationstart"),XC=ml("transitionend"),ZC=new Map,c0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function wr(e,t){ZC.set(e,t),Jr(t,[e])}for(var Mu=0;Mu<c0.length;Mu++){var Pu=c0[Mu],BR=Pu.toLowerCase(),zR=Pu[0].toUpperCase()+Pu.slice(1);wr(BR,"on"+zR)}wr(YC,"onAnimationEnd");wr(QC,"onAnimationIteration");wr(JC,"onAnimationStart");wr("dblclick","onDoubleClick");wr("focusin","onFocus");wr("focusout","onBlur");wr(XC,"onTransitionEnd");$i("onMouseEnter",["mouseout","mouseover"]);$i("onMouseLeave",["mouseout","mouseover"]);$i("onPointerEnter",["pointerout","pointerover"]);$i("onPointerLeave",["pointerout","pointerover"]);Jr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Jr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Jr("onBeforeInput",["compositionend","keypress","textInput","paste"]);Jr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Jr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Jr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Na="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),UR=new Set("cancel close invalid load scroll toggle".split(" ").concat(Na));function d0(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,BP(r,t,void 0,e),e.currentTarget=null}function ej(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var s=r.length-1;0<=s;s--){var o=r[s],l=o.instance,u=o.currentTarget;if(o=o.listener,l!==a&&i.isPropagationStopped())break e;d0(i,o,u),a=l}else for(s=0;s<r.length;s++){if(o=r[s],l=o.instance,u=o.currentTarget,o=o.listener,l!==a&&i.isPropagationStopped())break e;d0(i,o,u),a=l}}}if(Ro)throw e=Sm,Ro=!1,Sm=null,e}function Ee(e,t){var n=t[Rm];n===void 0&&(n=t[Rm]=new Set);var r=e+"__bubble";n.has(r)||(tj(t,e,2,!1),n.add(r))}function Ru(e,t,n){var r=0;t&&(r|=4),tj(n,e,r,t)}var Js="_reactListening"+Math.random().toString(36).slice(2);function ss(e){if(!e[Js]){e[Js]=!0,lC.forEach(function(n){n!=="selectionchange"&&(UR.has(n)||Ru(n,!1,e),Ru(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Js]||(t[Js]=!0,Ru("selectionchange",!1,t))}}function tj(e,t,n,r){switch(qC(t)){case 1:var i=iR;break;case 4:i=aR;break;default:i=Dg}n=i.bind(null,t,n,e),i=void 0,!wm||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Au(e,t,n,r,i){var a=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var s=r.tag;if(s===3||s===4){var o=r.stateNode.containerInfo;if(o===i||o.nodeType===8&&o.parentNode===i)break;if(s===4)for(s=r.return;s!==null;){var l=s.tag;if((l===3||l===4)&&(l=s.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;s=s.return}for(;o!==null;){if(s=Lr(o),s===null)return;if(l=s.tag,l===5||l===6){r=a=s;continue e}o=o.parentNode}}r=r.return}kC(function(){var u=a,c=Pg(n),f=[];e:{var h=ZC.get(e);if(h!==void 0){var m=Lg,g=e;switch(e){case"keypress":if(bo(n)===0)break e;case"keydown":case"keyup":m=xR;break;case"focusin":g="focus",m=ju;break;case"focusout":g="blur",m=ju;break;case"beforeblur":case"afterblur":m=ju;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=Zy;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=lR;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=_R;break;case YC:case QC:case JC:m=dR;break;case XC:m=CR;break;case"scroll":m=sR;break;case"wheel":m=ER;break;case"copy":case"cut":case"paste":m=hR;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=t0}var p=(t&4)!==0,S=!p&&e==="scroll",v=p?h!==null?h+"Capture":null:h;p=[];for(var y=u,w;y!==null;){w=y;var _=w.stateNode;if(w.tag===5&&_!==null&&(w=_,v!==null&&(_=es(y,v),_!=null&&p.push(os(y,_,w)))),S)break;y=y.return}0<p.length&&(h=new m(h,g,null,n,c),f.push({event:h,listeners:p}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",m=e==="mouseout"||e==="pointerout",h&&n!==bm&&(g=n.relatedTarget||n.fromElement)&&(Lr(g)||g[On]))break e;if((m||h)&&(h=c.window===c?c:(h=c.ownerDocument)?h.defaultView||h.parentWindow:window,m?(g=n.relatedTarget||n.toElement,m=u,g=g?Lr(g):null,g!==null&&(S=Xr(g),g!==S||g.tag!==5&&g.tag!==6)&&(g=null)):(m=null,g=u),m!==g)){if(p=Zy,_="onMouseLeave",v="onMouseEnter",y="mouse",(e==="pointerout"||e==="pointerover")&&(p=t0,_="onPointerLeave",v="onPointerEnter",y="pointer"),S=m==null?h:_i(m),w=g==null?h:_i(g),h=new p(_,y+"leave",m,n,c),h.target=S,h.relatedTarget=w,_=null,Lr(c)===u&&(p=new p(v,y+"enter",g,n,c),p.target=w,p.relatedTarget=S,_=p),S=_,m&&g)t:{for(p=m,v=g,y=0,w=p;w;w=mi(w))y++;for(w=0,_=v;_;_=mi(_))w++;for(;0<y-w;)p=mi(p),y--;for(;0<w-y;)v=mi(v),w--;for(;y--;){if(p===v||v!==null&&p===v.alternate)break t;p=mi(p),v=mi(v)}p=null}else p=null;m!==null&&f0(f,h,m,p,!1),g!==null&&S!==null&&f0(f,S,g,p,!0)}}e:{if(h=u?_i(u):window,m=h.nodeName&&h.nodeName.toLowerCase(),m==="select"||m==="input"&&h.type==="file")var C=IR;else if(i0(h))if(UC)C=qR;else{C=OR;var E=DR}else(m=h.nodeName)&&m.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(C=LR);if(C&&(C=C(e,u))){zC(f,C,n,c);break e}E&&E(e,h,u),e==="focusout"&&(E=h._wrapperState)&&E.controlled&&h.type==="number"&&pm(h,"number",h.value)}switch(E=u?_i(u):window,e){case"focusin":(i0(E)||E.contentEditable==="true")&&(wi=E,jm=u,za=null);break;case"focusout":za=jm=wi=null;break;case"mousedown":Em=!0;break;case"contextmenu":case"mouseup":case"dragend":Em=!1,u0(f,n,c);break;case"selectionchange":if($R)break;case"keydown":case"keyup":u0(f,n,c)}var T;if(Fg)e:{switch(e){case"compositionstart":var j="onCompositionStart";break e;case"compositionend":j="onCompositionEnd";break e;case"compositionupdate":j="onCompositionUpdate";break e}j=void 0}else xi?$C(e,n)&&(j="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(j="onCompositionStart");j&&(VC&&n.locale!=="ko"&&(xi||j!=="onCompositionStart"?j==="onCompositionEnd"&&xi&&(T=FC()):(ar=c,Og="value"in ar?ar.value:ar.textContent,xi=!0)),E=Lo(u,j),0<E.length&&(j=new e0(j,e,null,n,c),f.push({event:j,listeners:E}),T?j.data=T:(T=BC(n),T!==null&&(j.data=T)))),(T=NR?MR(e,n):PR(e,n))&&(u=Lo(u,"onBeforeInput"),0<u.length&&(c=new e0("onBeforeInput","beforeinput",null,n,c),f.push({event:c,listeners:u}),c.data=T))}ej(f,t)})}function os(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Lo(e,t){for(var n=t+"Capture",r=[];e!==null;){var i=e,a=i.stateNode;i.tag===5&&a!==null&&(i=a,a=es(e,n),a!=null&&r.unshift(os(e,a,i)),a=es(e,t),a!=null&&r.push(os(e,a,i))),e=e.return}return r}function mi(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function f0(e,t,n,r,i){for(var a=t._reactName,s=[];n!==null&&n!==r;){var o=n,l=o.alternate,u=o.stateNode;if(l!==null&&l===r)break;o.tag===5&&u!==null&&(o=u,i?(l=es(n,a),l!=null&&s.unshift(os(n,l,o))):i||(l=es(n,a),l!=null&&s.push(os(n,l,o)))),n=n.return}s.length!==0&&e.push({event:t,listeners:s})}var GR=/\r\n?/g,HR=/\u0000|\uFFFD/g;function h0(e){return(typeof e=="string"?e:""+e).replace(GR,`
`).replace(HR,"")}function Xs(e,t,n){if(t=h0(t),h0(e)!==t&&n)throw Error(q(425))}function qo(){}var Tm=null,Nm=null;function Mm(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Pm=typeof setTimeout=="function"?setTimeout:void 0,KR=typeof clearTimeout=="function"?clearTimeout:void 0,p0=typeof Promise=="function"?Promise:void 0,WR=typeof queueMicrotask=="function"?queueMicrotask:typeof p0<"u"?function(e){return p0.resolve(null).then(e).catch(YR)}:Pm;function YR(e){setTimeout(function(){throw e})}function Iu(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){e.removeChild(i),rs(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);rs(t)}function cr(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function m0(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Zi=Math.random().toString(36).slice(2),hn="__reactFiber$"+Zi,ls="__reactProps$"+Zi,On="__reactContainer$"+Zi,Rm="__reactEvents$"+Zi,QR="__reactListeners$"+Zi,JR="__reactHandles$"+Zi;function Lr(e){var t=e[hn];if(t)return t;for(var n=e.parentNode;n;){if(t=n[On]||n[hn]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=m0(e);e!==null;){if(n=e[hn])return n;e=m0(e)}return t}e=n,n=e.parentNode}return null}function ks(e){return e=e[hn]||e[On],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function _i(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(q(33))}function gl(e){return e[ls]||null}var Am=[],ki=-1;function Sr(e){return{current:e}}function Te(e){0>ki||(e.current=Am[ki],Am[ki]=null,ki--)}function Ce(e,t){ki++,Am[ki]=e.current,e.current=t}var vr={},dt=Sr(vr),bt=Sr(!1),Hr=vr;function Bi(e,t){var n=e.type.contextTypes;if(!n)return vr;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},a;for(a in n)i[a]=t[a];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function xt(e){return e=e.childContextTypes,e!=null}function Fo(){Te(bt),Te(dt)}function g0(e,t,n){if(dt.current!==vr)throw Error(q(168));Ce(dt,t),Ce(bt,n)}function nj(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(q(108,DP(e)||"Unknown",i));return Oe({},n,r)}function Vo(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||vr,Hr=dt.current,Ce(dt,e),Ce(bt,bt.current),!0}function v0(e,t,n){var r=e.stateNode;if(!r)throw Error(q(169));n?(e=nj(e,t,Hr),r.__reactInternalMemoizedMergedChildContext=e,Te(bt),Te(dt),Ce(dt,e)):Te(bt),Ce(bt,n)}var jn=null,vl=!1,Du=!1;function rj(e){jn===null?jn=[e]:jn.push(e)}function XR(e){vl=!0,rj(e)}function _r(){if(!Du&&jn!==null){Du=!0;var e=0,t=Se;try{var n=jn;for(Se=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}jn=null,vl=!1}catch(i){throw jn!==null&&(jn=jn.slice(e+1)),TC(Rg,_r),i}finally{Se=t,Du=!1}}return null}var Ci=[],ji=0,$o=null,Bo=0,$t=[],Bt=0,Kr=null,Tn=1,Nn="";function Ar(e,t){Ci[ji++]=Bo,Ci[ji++]=$o,$o=e,Bo=t}function ij(e,t,n){$t[Bt++]=Tn,$t[Bt++]=Nn,$t[Bt++]=Kr,Kr=e;var r=Tn;e=Nn;var i=32-tn(r)-1;r&=~(1<<i),n+=1;var a=32-tn(t)+i;if(30<a){var s=i-i%5;a=(r&(1<<s)-1).toString(32),r>>=s,i-=s,Tn=1<<32-tn(t)+i|n<<i|r,Nn=a+e}else Tn=1<<a|n<<i|r,Nn=e}function $g(e){e.return!==null&&(Ar(e,1),ij(e,1,0))}function Bg(e){for(;e===$o;)$o=Ci[--ji],Ci[ji]=null,Bo=Ci[--ji],Ci[ji]=null;for(;e===Kr;)Kr=$t[--Bt],$t[Bt]=null,Nn=$t[--Bt],$t[Bt]=null,Tn=$t[--Bt],$t[Bt]=null}var Nt=null,Tt=null,Me=!1,en=null;function aj(e,t){var n=zt(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function y0(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Nt=e,Tt=cr(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Nt=e,Tt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Kr!==null?{id:Tn,overflow:Nn}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=zt(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Nt=e,Tt=null,!0):!1;default:return!1}}function Im(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Dm(e){if(Me){var t=Tt;if(t){var n=t;if(!y0(e,t)){if(Im(e))throw Error(q(418));t=cr(n.nextSibling);var r=Nt;t&&y0(e,t)?aj(r,n):(e.flags=e.flags&-4097|2,Me=!1,Nt=e)}}else{if(Im(e))throw Error(q(418));e.flags=e.flags&-4097|2,Me=!1,Nt=e}}}function b0(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Nt=e}function Zs(e){if(e!==Nt)return!1;if(!Me)return b0(e),Me=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Mm(e.type,e.memoizedProps)),t&&(t=Tt)){if(Im(e))throw sj(),Error(q(418));for(;t;)aj(e,t),t=cr(t.nextSibling)}if(b0(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(q(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Tt=cr(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Tt=null}}else Tt=Nt?cr(e.stateNode.nextSibling):null;return!0}function sj(){for(var e=Tt;e;)e=cr(e.nextSibling)}function zi(){Tt=Nt=null,Me=!1}function zg(e){en===null?en=[e]:en.push(e)}var ZR=$n.ReactCurrentBatchConfig;function ba(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(q(309));var r=n.stateNode}if(!r)throw Error(q(147,e));var i=r,a=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===a?t.ref:(t=function(s){var o=i.refs;s===null?delete o[a]:o[a]=s},t._stringRef=a,t)}if(typeof e!="string")throw Error(q(284));if(!n._owner)throw Error(q(290,e))}return e}function eo(e,t){throw e=Object.prototype.toString.call(t),Error(q(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function x0(e){var t=e._init;return t(e._payload)}function oj(e){function t(v,y){if(e){var w=v.deletions;w===null?(v.deletions=[y],v.flags|=16):w.push(y)}}function n(v,y){if(!e)return null;for(;y!==null;)t(v,y),y=y.sibling;return null}function r(v,y){for(v=new Map;y!==null;)y.key!==null?v.set(y.key,y):v.set(y.index,y),y=y.sibling;return v}function i(v,y){return v=pr(v,y),v.index=0,v.sibling=null,v}function a(v,y,w){return v.index=w,e?(w=v.alternate,w!==null?(w=w.index,w<y?(v.flags|=2,y):w):(v.flags|=2,y)):(v.flags|=1048576,y)}function s(v){return e&&v.alternate===null&&(v.flags|=2),v}function o(v,y,w,_){return y===null||y.tag!==6?(y=Bu(w,v.mode,_),y.return=v,y):(y=i(y,w),y.return=v,y)}function l(v,y,w,_){var C=w.type;return C===bi?c(v,y,w.props.children,_,w.key):y!==null&&(y.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===er&&x0(C)===y.type)?(_=i(y,w.props),_.ref=ba(v,y,w),_.return=v,_):(_=jo(w.type,w.key,w.props,null,v.mode,_),_.ref=ba(v,y,w),_.return=v,_)}function u(v,y,w,_){return y===null||y.tag!==4||y.stateNode.containerInfo!==w.containerInfo||y.stateNode.implementation!==w.implementation?(y=zu(w,v.mode,_),y.return=v,y):(y=i(y,w.children||[]),y.return=v,y)}function c(v,y,w,_,C){return y===null||y.tag!==7?(y=zr(w,v.mode,_,C),y.return=v,y):(y=i(y,w),y.return=v,y)}function f(v,y,w){if(typeof y=="string"&&y!==""||typeof y=="number")return y=Bu(""+y,v.mode,w),y.return=v,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case zs:return w=jo(y.type,y.key,y.props,null,v.mode,w),w.ref=ba(v,null,y),w.return=v,w;case yi:return y=zu(y,v.mode,w),y.return=v,y;case er:var _=y._init;return f(v,_(y._payload),w)}if(Ea(y)||pa(y))return y=zr(y,v.mode,w,null),y.return=v,y;eo(v,y)}return null}function h(v,y,w,_){var C=y!==null?y.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return C!==null?null:o(v,y,""+w,_);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case zs:return w.key===C?l(v,y,w,_):null;case yi:return w.key===C?u(v,y,w,_):null;case er:return C=w._init,h(v,y,C(w._payload),_)}if(Ea(w)||pa(w))return C!==null?null:c(v,y,w,_,null);eo(v,w)}return null}function m(v,y,w,_,C){if(typeof _=="string"&&_!==""||typeof _=="number")return v=v.get(w)||null,o(y,v,""+_,C);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case zs:return v=v.get(_.key===null?w:_.key)||null,l(y,v,_,C);case yi:return v=v.get(_.key===null?w:_.key)||null,u(y,v,_,C);case er:var E=_._init;return m(v,y,w,E(_._payload),C)}if(Ea(_)||pa(_))return v=v.get(w)||null,c(y,v,_,C,null);eo(y,_)}return null}function g(v,y,w,_){for(var C=null,E=null,T=y,j=y=0,N=null;T!==null&&j<w.length;j++){T.index>j?(N=T,T=null):N=T.sibling;var P=h(v,T,w[j],_);if(P===null){T===null&&(T=N);break}e&&T&&P.alternate===null&&t(v,T),y=a(P,y,j),E===null?C=P:E.sibling=P,E=P,T=N}if(j===w.length)return n(v,T),Me&&Ar(v,j),C;if(T===null){for(;j<w.length;j++)T=f(v,w[j],_),T!==null&&(y=a(T,y,j),E===null?C=T:E.sibling=T,E=T);return Me&&Ar(v,j),C}for(T=r(v,T);j<w.length;j++)N=m(T,v,j,w[j],_),N!==null&&(e&&N.alternate!==null&&T.delete(N.key===null?j:N.key),y=a(N,y,j),E===null?C=N:E.sibling=N,E=N);return e&&T.forEach(function(R){return t(v,R)}),Me&&Ar(v,j),C}function p(v,y,w,_){var C=pa(w);if(typeof C!="function")throw Error(q(150));if(w=C.call(w),w==null)throw Error(q(151));for(var E=C=null,T=y,j=y=0,N=null,P=w.next();T!==null&&!P.done;j++,P=w.next()){T.index>j?(N=T,T=null):N=T.sibling;var R=h(v,T,P.value,_);if(R===null){T===null&&(T=N);break}e&&T&&R.alternate===null&&t(v,T),y=a(R,y,j),E===null?C=R:E.sibling=R,E=R,T=N}if(P.done)return n(v,T),Me&&Ar(v,j),C;if(T===null){for(;!P.done;j++,P=w.next())P=f(v,P.value,_),P!==null&&(y=a(P,y,j),E===null?C=P:E.sibling=P,E=P);return Me&&Ar(v,j),C}for(T=r(v,T);!P.done;j++,P=w.next())P=m(T,v,j,P.value,_),P!==null&&(e&&P.alternate!==null&&T.delete(P.key===null?j:P.key),y=a(P,y,j),E===null?C=P:E.sibling=P,E=P);return e&&T.forEach(function(O){return t(v,O)}),Me&&Ar(v,j),C}function S(v,y,w,_){if(typeof w=="object"&&w!==null&&w.type===bi&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case zs:e:{for(var C=w.key,E=y;E!==null;){if(E.key===C){if(C=w.type,C===bi){if(E.tag===7){n(v,E.sibling),y=i(E,w.props.children),y.return=v,v=y;break e}}else if(E.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===er&&x0(C)===E.type){n(v,E.sibling),y=i(E,w.props),y.ref=ba(v,E,w),y.return=v,v=y;break e}n(v,E);break}else t(v,E);E=E.sibling}w.type===bi?(y=zr(w.props.children,v.mode,_,w.key),y.return=v,v=y):(_=jo(w.type,w.key,w.props,null,v.mode,_),_.ref=ba(v,y,w),_.return=v,v=_)}return s(v);case yi:e:{for(E=w.key;y!==null;){if(y.key===E)if(y.tag===4&&y.stateNode.containerInfo===w.containerInfo&&y.stateNode.implementation===w.implementation){n(v,y.sibling),y=i(y,w.children||[]),y.return=v,v=y;break e}else{n(v,y);break}else t(v,y);y=y.sibling}y=zu(w,v.mode,_),y.return=v,v=y}return s(v);case er:return E=w._init,S(v,y,E(w._payload),_)}if(Ea(w))return g(v,y,w,_);if(pa(w))return p(v,y,w,_);eo(v,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,y!==null&&y.tag===6?(n(v,y.sibling),y=i(y,w),y.return=v,v=y):(n(v,y),y=Bu(w,v.mode,_),y.return=v,v=y),s(v)):n(v,y)}return S}var Ui=oj(!0),lj=oj(!1),zo=Sr(null),Uo=null,Ei=null,Ug=null;function Gg(){Ug=Ei=Uo=null}function Hg(e){var t=zo.current;Te(zo),e._currentValue=t}function Om(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Fi(e,t){Uo=e,Ug=Ei=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(yt=!0),e.firstContext=null)}function Gt(e){var t=e._currentValue;if(Ug!==e)if(e={context:e,memoizedValue:t,next:null},Ei===null){if(Uo===null)throw Error(q(308));Ei=e,Uo.dependencies={lanes:0,firstContext:e}}else Ei=Ei.next=e;return t}var qr=null;function Kg(e){qr===null?qr=[e]:qr.push(e)}function uj(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,Kg(t)):(n.next=i.next,i.next=n),t.interleaved=n,Ln(e,r)}function Ln(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var tr=!1;function Wg(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function cj(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Rn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function dr(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,ge&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Ln(e,n)}return i=r.interleaved,i===null?(t.next=t,Kg(r)):(t.next=i.next,i.next=t),r.interleaved=t,Ln(e,n)}function xo(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Ag(e,n)}}function w0(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,a=null;if(n=n.firstBaseUpdate,n!==null){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};a===null?i=a=s:a=a.next=s,n=n.next}while(n!==null);a===null?i=a=t:a=a.next=t}else i=a=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Go(e,t,n,r){var i=e.updateQueue;tr=!1;var a=i.firstBaseUpdate,s=i.lastBaseUpdate,o=i.shared.pending;if(o!==null){i.shared.pending=null;var l=o,u=l.next;l.next=null,s===null?a=u:s.next=u,s=l;var c=e.alternate;c!==null&&(c=c.updateQueue,o=c.lastBaseUpdate,o!==s&&(o===null?c.firstBaseUpdate=u:o.next=u,c.lastBaseUpdate=l))}if(a!==null){var f=i.baseState;s=0,c=u=l=null,o=a;do{var h=o.lane,m=o.eventTime;if((r&h)===h){c!==null&&(c=c.next={eventTime:m,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var g=e,p=o;switch(h=t,m=n,p.tag){case 1:if(g=p.payload,typeof g=="function"){f=g.call(m,f,h);break e}f=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=p.payload,h=typeof g=="function"?g.call(m,f,h):g,h==null)break e;f=Oe({},f,h);break e;case 2:tr=!0}}o.callback!==null&&o.lane!==0&&(e.flags|=64,h=i.effects,h===null?i.effects=[o]:h.push(o))}else m={eventTime:m,lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},c===null?(u=c=m,l=f):c=c.next=m,s|=h;if(o=o.next,o===null){if(o=i.shared.pending,o===null)break;h=o,o=h.next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}while(!0);if(c===null&&(l=f),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,t=i.shared.interleaved,t!==null){i=t;do s|=i.lane,i=i.next;while(i!==t)}else a===null&&(i.shared.lanes=0);Yr|=s,e.lanes=s,e.memoizedState=f}}function S0(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(q(191,i));i.call(r)}}}var Cs={},gn=Sr(Cs),us=Sr(Cs),cs=Sr(Cs);function Fr(e){if(e===Cs)throw Error(q(174));return e}function Yg(e,t){switch(Ce(cs,t),Ce(us,e),Ce(gn,Cs),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:gm(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=gm(t,e)}Te(gn),Ce(gn,t)}function Gi(){Te(gn),Te(us),Te(cs)}function dj(e){Fr(cs.current);var t=Fr(gn.current),n=gm(t,e.type);t!==n&&(Ce(us,e),Ce(gn,n))}function Qg(e){us.current===e&&(Te(gn),Te(us))}var Ae=Sr(0);function Ho(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Ou=[];function Jg(){for(var e=0;e<Ou.length;e++)Ou[e]._workInProgressVersionPrimary=null;Ou.length=0}var wo=$n.ReactCurrentDispatcher,Lu=$n.ReactCurrentBatchConfig,Wr=0,De=null,Qe=null,et=null,Ko=!1,Ua=!1,ds=0,eA=0;function st(){throw Error(q(321))}function Xg(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!rn(e[n],t[n]))return!1;return!0}function Zg(e,t,n,r,i,a){if(Wr=a,De=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,wo.current=e===null||e.memoizedState===null?iA:aA,e=n(r,i),Ua){a=0;do{if(Ua=!1,ds=0,25<=a)throw Error(q(301));a+=1,et=Qe=null,t.updateQueue=null,wo.current=sA,e=n(r,i)}while(Ua)}if(wo.current=Wo,t=Qe!==null&&Qe.next!==null,Wr=0,et=Qe=De=null,Ko=!1,t)throw Error(q(300));return e}function ev(){var e=ds!==0;return ds=0,e}function fn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return et===null?De.memoizedState=et=e:et=et.next=e,et}function Ht(){if(Qe===null){var e=De.alternate;e=e!==null?e.memoizedState:null}else e=Qe.next;var t=et===null?De.memoizedState:et.next;if(t!==null)et=t,Qe=e;else{if(e===null)throw Error(q(310));Qe=e,e={memoizedState:Qe.memoizedState,baseState:Qe.baseState,baseQueue:Qe.baseQueue,queue:Qe.queue,next:null},et===null?De.memoizedState=et=e:et=et.next=e}return et}function fs(e,t){return typeof t=="function"?t(e):t}function qu(e){var t=Ht(),n=t.queue;if(n===null)throw Error(q(311));n.lastRenderedReducer=e;var r=Qe,i=r.baseQueue,a=n.pending;if(a!==null){if(i!==null){var s=i.next;i.next=a.next,a.next=s}r.baseQueue=i=a,n.pending=null}if(i!==null){a=i.next,r=r.baseState;var o=s=null,l=null,u=a;do{var c=u.lane;if((Wr&c)===c)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var f={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(o=l=f,s=r):l=l.next=f,De.lanes|=c,Yr|=c}u=u.next}while(u!==null&&u!==a);l===null?s=r:l.next=o,rn(r,t.memoizedState)||(yt=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=l,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do a=i.lane,De.lanes|=a,Yr|=a,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Fu(e){var t=Ht(),n=t.queue;if(n===null)throw Error(q(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,a=t.memoizedState;if(i!==null){n.pending=null;var s=i=i.next;do a=e(a,s.action),s=s.next;while(s!==i);rn(a,t.memoizedState)||(yt=!0),t.memoizedState=a,t.baseQueue===null&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function fj(){}function hj(e,t){var n=De,r=Ht(),i=t(),a=!rn(r.memoizedState,i);if(a&&(r.memoizedState=i,yt=!0),r=r.queue,tv(gj.bind(null,n,r,e),[e]),r.getSnapshot!==t||a||et!==null&&et.memoizedState.tag&1){if(n.flags|=2048,hs(9,mj.bind(null,n,r,i,t),void 0,null),tt===null)throw Error(q(349));Wr&30||pj(n,t,i)}return i}function pj(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=De.updateQueue,t===null?(t={lastEffect:null,stores:null},De.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function mj(e,t,n,r){t.value=n,t.getSnapshot=r,vj(t)&&yj(e)}function gj(e,t,n){return n(function(){vj(t)&&yj(e)})}function vj(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!rn(e,n)}catch{return!0}}function yj(e){var t=Ln(e,1);t!==null&&nn(t,e,1,-1)}function _0(e){var t=fn();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:fs,lastRenderedState:e},t.queue=e,e=e.dispatch=rA.bind(null,De,e),[t.memoizedState,e]}function hs(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=De.updateQueue,t===null?(t={lastEffect:null,stores:null},De.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function bj(){return Ht().memoizedState}function So(e,t,n,r){var i=fn();De.flags|=e,i.memoizedState=hs(1|t,n,void 0,r===void 0?null:r)}function yl(e,t,n,r){var i=Ht();r=r===void 0?null:r;var a=void 0;if(Qe!==null){var s=Qe.memoizedState;if(a=s.destroy,r!==null&&Xg(r,s.deps)){i.memoizedState=hs(t,n,a,r);return}}De.flags|=e,i.memoizedState=hs(1|t,n,a,r)}function k0(e,t){return So(8390656,8,e,t)}function tv(e,t){return yl(2048,8,e,t)}function xj(e,t){return yl(4,2,e,t)}function wj(e,t){return yl(4,4,e,t)}function Sj(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function _j(e,t,n){return n=n!=null?n.concat([e]):null,yl(4,4,Sj.bind(null,t,e),n)}function nv(){}function kj(e,t){var n=Ht();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Xg(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Cj(e,t){var n=Ht();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Xg(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function jj(e,t,n){return Wr&21?(rn(n,t)||(n=PC(),De.lanes|=n,Yr|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,yt=!0),e.memoizedState=n)}function tA(e,t){var n=Se;Se=n!==0&&4>n?n:4,e(!0);var r=Lu.transition;Lu.transition={};try{e(!1),t()}finally{Se=n,Lu.transition=r}}function Ej(){return Ht().memoizedState}function nA(e,t,n){var r=hr(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Tj(e))Nj(t,n);else if(n=uj(e,t,n,r),n!==null){var i=pt();nn(n,e,r,i),Mj(n,t,r)}}function rA(e,t,n){var r=hr(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Tj(e))Nj(t,i);else{var a=e.alternate;if(e.lanes===0&&(a===null||a.lanes===0)&&(a=t.lastRenderedReducer,a!==null))try{var s=t.lastRenderedState,o=a(s,n);if(i.hasEagerState=!0,i.eagerState=o,rn(o,s)){var l=t.interleaved;l===null?(i.next=i,Kg(t)):(i.next=l.next,l.next=i),t.interleaved=i;return}}catch{}finally{}n=uj(e,t,i,r),n!==null&&(i=pt(),nn(n,e,r,i),Mj(n,t,r))}}function Tj(e){var t=e.alternate;return e===De||t!==null&&t===De}function Nj(e,t){Ua=Ko=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Mj(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Ag(e,n)}}var Wo={readContext:Gt,useCallback:st,useContext:st,useEffect:st,useImperativeHandle:st,useInsertionEffect:st,useLayoutEffect:st,useMemo:st,useReducer:st,useRef:st,useState:st,useDebugValue:st,useDeferredValue:st,useTransition:st,useMutableSource:st,useSyncExternalStore:st,useId:st,unstable_isNewReconciler:!1},iA={readContext:Gt,useCallback:function(e,t){return fn().memoizedState=[e,t===void 0?null:t],e},useContext:Gt,useEffect:k0,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,So(4194308,4,Sj.bind(null,t,e),n)},useLayoutEffect:function(e,t){return So(4194308,4,e,t)},useInsertionEffect:function(e,t){return So(4,2,e,t)},useMemo:function(e,t){var n=fn();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=fn();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=nA.bind(null,De,e),[r.memoizedState,e]},useRef:function(e){var t=fn();return e={current:e},t.memoizedState=e},useState:_0,useDebugValue:nv,useDeferredValue:function(e){return fn().memoizedState=e},useTransition:function(){var e=_0(!1),t=e[0];return e=tA.bind(null,e[1]),fn().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=De,i=fn();if(Me){if(n===void 0)throw Error(q(407));n=n()}else{if(n=t(),tt===null)throw Error(q(349));Wr&30||pj(r,t,n)}i.memoizedState=n;var a={value:n,getSnapshot:t};return i.queue=a,k0(gj.bind(null,r,a,e),[e]),r.flags|=2048,hs(9,mj.bind(null,r,a,n,t),void 0,null),n},useId:function(){var e=fn(),t=tt.identifierPrefix;if(Me){var n=Nn,r=Tn;n=(r&~(1<<32-tn(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=ds++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=eA++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},aA={readContext:Gt,useCallback:kj,useContext:Gt,useEffect:tv,useImperativeHandle:_j,useInsertionEffect:xj,useLayoutEffect:wj,useMemo:Cj,useReducer:qu,useRef:bj,useState:function(){return qu(fs)},useDebugValue:nv,useDeferredValue:function(e){var t=Ht();return jj(t,Qe.memoizedState,e)},useTransition:function(){var e=qu(fs)[0],t=Ht().memoizedState;return[e,t]},useMutableSource:fj,useSyncExternalStore:hj,useId:Ej,unstable_isNewReconciler:!1},sA={readContext:Gt,useCallback:kj,useContext:Gt,useEffect:tv,useImperativeHandle:_j,useInsertionEffect:xj,useLayoutEffect:wj,useMemo:Cj,useReducer:Fu,useRef:bj,useState:function(){return Fu(fs)},useDebugValue:nv,useDeferredValue:function(e){var t=Ht();return Qe===null?t.memoizedState=e:jj(t,Qe.memoizedState,e)},useTransition:function(){var e=Fu(fs)[0],t=Ht().memoizedState;return[e,t]},useMutableSource:fj,useSyncExternalStore:hj,useId:Ej,unstable_isNewReconciler:!1};function Xt(e,t){if(e&&e.defaultProps){t=Oe({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Lm(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Oe({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var bl={isMounted:function(e){return(e=e._reactInternals)?Xr(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=pt(),i=hr(e),a=Rn(r,i);a.payload=t,n!=null&&(a.callback=n),t=dr(e,a,i),t!==null&&(nn(t,e,i,r),xo(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=pt(),i=hr(e),a=Rn(r,i);a.tag=1,a.payload=t,n!=null&&(a.callback=n),t=dr(e,a,i),t!==null&&(nn(t,e,i,r),xo(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=pt(),r=hr(e),i=Rn(n,r);i.tag=2,t!=null&&(i.callback=t),t=dr(e,i,r),t!==null&&(nn(t,e,r,n),xo(t,e,r))}};function C0(e,t,n,r,i,a,s){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,a,s):t.prototype&&t.prototype.isPureReactComponent?!as(n,r)||!as(i,a):!0}function Pj(e,t,n){var r=!1,i=vr,a=t.contextType;return typeof a=="object"&&a!==null?a=Gt(a):(i=xt(t)?Hr:dt.current,r=t.contextTypes,a=(r=r!=null)?Bi(e,i):vr),t=new t(n,a),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=bl,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function j0(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&bl.enqueueReplaceState(t,t.state,null)}function qm(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},Wg(e);var a=t.contextType;typeof a=="object"&&a!==null?i.context=Gt(a):(a=xt(t)?Hr:dt.current,i.context=Bi(e,a)),i.state=e.memoizedState,a=t.getDerivedStateFromProps,typeof a=="function"&&(Lm(e,t,a,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&bl.enqueueReplaceState(i,i.state,null),Go(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function Hi(e,t){try{var n="",r=t;do n+=IP(r),r=r.return;while(r);var i=n}catch(a){i=`
Error generating stack: `+a.message+`
`+a.stack}return{value:e,source:t,stack:i,digest:null}}function Vu(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Fm(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var oA=typeof WeakMap=="function"?WeakMap:Map;function Rj(e,t,n){n=Rn(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Qo||(Qo=!0,Ym=r),Fm(e,t)},n}function Aj(e,t,n){n=Rn(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){Fm(e,t)}}var a=e.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(n.callback=function(){Fm(e,t),typeof r!="function"&&(fr===null?fr=new Set([this]):fr.add(this));var s=t.stack;this.componentDidCatch(t.value,{componentStack:s!==null?s:""})}),n}function E0(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new oA;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=wA.bind(null,e,t,n),t.then(e,e))}function T0(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function N0(e,t,n,r,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Rn(-1,1),t.tag=2,dr(n,t,1))),n.lanes|=1),e)}var lA=$n.ReactCurrentOwner,yt=!1;function ht(e,t,n,r){t.child=e===null?lj(t,null,n,r):Ui(t,e.child,n,r)}function M0(e,t,n,r,i){n=n.render;var a=t.ref;return Fi(t,i),r=Zg(e,t,n,r,a,i),n=ev(),e!==null&&!yt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,qn(e,t,i)):(Me&&n&&$g(t),t.flags|=1,ht(e,t,r,i),t.child)}function P0(e,t,n,r,i){if(e===null){var a=n.type;return typeof a=="function"&&!cv(a)&&a.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=a,Ij(e,t,a,r,i)):(e=jo(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(a=e.child,!(e.lanes&i)){var s=a.memoizedProps;if(n=n.compare,n=n!==null?n:as,n(s,r)&&e.ref===t.ref)return qn(e,t,i)}return t.flags|=1,e=pr(a,r),e.ref=t.ref,e.return=t,t.child=e}function Ij(e,t,n,r,i){if(e!==null){var a=e.memoizedProps;if(as(a,r)&&e.ref===t.ref)if(yt=!1,t.pendingProps=r=a,(e.lanes&i)!==0)e.flags&131072&&(yt=!0);else return t.lanes=e.lanes,qn(e,t,i)}return Vm(e,t,n,r,i)}function Dj(e,t,n){var r=t.pendingProps,i=r.children,a=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ce(Ni,Ct),Ct|=n;else{if(!(n&1073741824))return e=a!==null?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ce(Ni,Ct),Ct|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=a!==null?a.baseLanes:n,Ce(Ni,Ct),Ct|=r}else a!==null?(r=a.baseLanes|n,t.memoizedState=null):r=n,Ce(Ni,Ct),Ct|=r;return ht(e,t,i,n),t.child}function Oj(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Vm(e,t,n,r,i){var a=xt(n)?Hr:dt.current;return a=Bi(t,a),Fi(t,i),n=Zg(e,t,n,r,a,i),r=ev(),e!==null&&!yt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,qn(e,t,i)):(Me&&r&&$g(t),t.flags|=1,ht(e,t,n,i),t.child)}function R0(e,t,n,r,i){if(xt(n)){var a=!0;Vo(t)}else a=!1;if(Fi(t,i),t.stateNode===null)_o(e,t),Pj(t,n,r),qm(t,n,r,i),r=!0;else if(e===null){var s=t.stateNode,o=t.memoizedProps;s.props=o;var l=s.context,u=n.contextType;typeof u=="object"&&u!==null?u=Gt(u):(u=xt(n)?Hr:dt.current,u=Bi(t,u));var c=n.getDerivedStateFromProps,f=typeof c=="function"||typeof s.getSnapshotBeforeUpdate=="function";f||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(o!==r||l!==u)&&j0(t,s,r,u),tr=!1;var h=t.memoizedState;s.state=h,Go(t,r,s,i),l=t.memoizedState,o!==r||h!==l||bt.current||tr?(typeof c=="function"&&(Lm(t,n,c,r),l=t.memoizedState),(o=tr||C0(t,n,o,r,h,l,u))?(f||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(t.flags|=4194308)):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),s.props=r,s.state=l,s.context=u,r=o):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{s=t.stateNode,cj(e,t),o=t.memoizedProps,u=t.type===t.elementType?o:Xt(t.type,o),s.props=u,f=t.pendingProps,h=s.context,l=n.contextType,typeof l=="object"&&l!==null?l=Gt(l):(l=xt(n)?Hr:dt.current,l=Bi(t,l));var m=n.getDerivedStateFromProps;(c=typeof m=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(o!==f||h!==l)&&j0(t,s,r,l),tr=!1,h=t.memoizedState,s.state=h,Go(t,r,s,i);var g=t.memoizedState;o!==f||h!==g||bt.current||tr?(typeof m=="function"&&(Lm(t,n,m,r),g=t.memoizedState),(u=tr||C0(t,n,u,r,h,g,l)||!1)?(c||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(r,g,l),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(r,g,l)),typeof s.componentDidUpdate=="function"&&(t.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof s.componentDidUpdate!="function"||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=g),s.props=r,s.state=g,s.context=l,r=u):(typeof s.componentDidUpdate!="function"||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return $m(e,t,n,r,a,i)}function $m(e,t,n,r,i,a){Oj(e,t);var s=(t.flags&128)!==0;if(!r&&!s)return i&&v0(t,n,!1),qn(e,t,a);r=t.stateNode,lA.current=t;var o=s&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&s?(t.child=Ui(t,e.child,null,a),t.child=Ui(t,null,o,a)):ht(e,t,o,a),t.memoizedState=r.state,i&&v0(t,n,!0),t.child}function Lj(e){var t=e.stateNode;t.pendingContext?g0(e,t.pendingContext,t.pendingContext!==t.context):t.context&&g0(e,t.context,!1),Yg(e,t.containerInfo)}function A0(e,t,n,r,i){return zi(),zg(i),t.flags|=256,ht(e,t,n,r),t.child}var Bm={dehydrated:null,treeContext:null,retryLane:0};function zm(e){return{baseLanes:e,cachePool:null,transitions:null}}function qj(e,t,n){var r=t.pendingProps,i=Ae.current,a=!1,s=(t.flags&128)!==0,o;if((o=s)||(o=e!==null&&e.memoizedState===null?!1:(i&2)!==0),o?(a=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),Ce(Ae,i&1),e===null)return Dm(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(s=r.children,e=r.fallback,a?(r=t.mode,a=t.child,s={mode:"hidden",children:s},!(r&1)&&a!==null?(a.childLanes=0,a.pendingProps=s):a=Sl(s,r,0,null),e=zr(e,r,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=zm(n),t.memoizedState=Bm,e):rv(t,s));if(i=e.memoizedState,i!==null&&(o=i.dehydrated,o!==null))return uA(e,t,s,r,o,i,n);if(a){a=r.fallback,s=t.mode,i=e.child,o=i.sibling;var l={mode:"hidden",children:r.children};return!(s&1)&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=l,t.deletions=null):(r=pr(i,l),r.subtreeFlags=i.subtreeFlags&14680064),o!==null?a=pr(o,a):(a=zr(a,s,n,null),a.flags|=2),a.return=t,r.return=t,r.sibling=a,t.child=r,r=a,a=t.child,s=e.child.memoizedState,s=s===null?zm(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},a.memoizedState=s,a.childLanes=e.childLanes&~n,t.memoizedState=Bm,r}return a=e.child,e=a.sibling,r=pr(a,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function rv(e,t){return t=Sl({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function to(e,t,n,r){return r!==null&&zg(r),Ui(t,e.child,null,n),e=rv(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function uA(e,t,n,r,i,a,s){if(n)return t.flags&256?(t.flags&=-257,r=Vu(Error(q(422))),to(e,t,s,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(a=r.fallback,i=t.mode,r=Sl({mode:"visible",children:r.children},i,0,null),a=zr(a,i,s,null),a.flags|=2,r.return=t,a.return=t,r.sibling=a,t.child=r,t.mode&1&&Ui(t,e.child,null,s),t.child.memoizedState=zm(s),t.memoizedState=Bm,a);if(!(t.mode&1))return to(e,t,s,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var o=r.dgst;return r=o,a=Error(q(419)),r=Vu(a,r,void 0),to(e,t,s,r)}if(o=(s&e.childLanes)!==0,yt||o){if(r=tt,r!==null){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|s)?0:i,i!==0&&i!==a.retryLane&&(a.retryLane=i,Ln(e,i),nn(r,e,i,-1))}return uv(),r=Vu(Error(q(421))),to(e,t,s,r)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=SA.bind(null,e),i._reactRetry=t,null):(e=a.treeContext,Tt=cr(i.nextSibling),Nt=t,Me=!0,en=null,e!==null&&($t[Bt++]=Tn,$t[Bt++]=Nn,$t[Bt++]=Kr,Tn=e.id,Nn=e.overflow,Kr=t),t=rv(t,r.children),t.flags|=4096,t)}function I0(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Om(e.return,t,n)}function $u(e,t,n,r,i){var a=e.memoizedState;a===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function Fj(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(ht(e,t,r.children,n),r=Ae.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&I0(e,n,t);else if(e.tag===19)I0(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ce(Ae,r),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&Ho(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),$u(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&Ho(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}$u(t,!0,n,null,a);break;case"together":$u(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function _o(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function qn(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Yr|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(q(153));if(t.child!==null){for(e=t.child,n=pr(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=pr(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function cA(e,t,n){switch(t.tag){case 3:Lj(t),zi();break;case 5:dj(t);break;case 1:xt(t.type)&&Vo(t);break;case 4:Yg(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ce(zo,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Ce(Ae,Ae.current&1),t.flags|=128,null):n&t.child.childLanes?qj(e,t,n):(Ce(Ae,Ae.current&1),e=qn(e,t,n),e!==null?e.sibling:null);Ce(Ae,Ae.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return Fj(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ce(Ae,Ae.current),r)break;return null;case 22:case 23:return t.lanes=0,Dj(e,t,n)}return qn(e,t,n)}var Vj,Um,$j,Bj;Vj=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Um=function(){};$j=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Fr(gn.current);var a=null;switch(n){case"input":i=fm(e,i),r=fm(e,r),a=[];break;case"select":i=Oe({},i,{value:void 0}),r=Oe({},r,{value:void 0}),a=[];break;case"textarea":i=mm(e,i),r=mm(e,r),a=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=qo)}vm(n,r);var s;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var o=i[u];for(s in o)o.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Xa.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in r){var l=r[u];if(o=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&l!==o&&(l!=null||o!=null))if(u==="style")if(o){for(s in o)!o.hasOwnProperty(s)||l&&l.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in l)l.hasOwnProperty(s)&&o[s]!==l[s]&&(n||(n={}),n[s]=l[s])}else n||(a||(a=[]),a.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,o=o?o.__html:void 0,l!=null&&o!==l&&(a=a||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(a=a||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Xa.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&Ee("scroll",e),a||o===l||(a=[])):(a=a||[]).push(u,l))}n&&(a=a||[]).push("style",n);var u=a;(t.updateQueue=u)&&(t.flags|=4)}};Bj=function(e,t,n,r){n!==r&&(t.flags|=4)};function xa(e,t){if(!Me)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function ot(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function dA(e,t,n){var r=t.pendingProps;switch(Bg(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ot(t),null;case 1:return xt(t.type)&&Fo(),ot(t),null;case 3:return r=t.stateNode,Gi(),Te(bt),Te(dt),Jg(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Zs(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,en!==null&&(Xm(en),en=null))),Um(e,t),ot(t),null;case 5:Qg(t);var i=Fr(cs.current);if(n=t.type,e!==null&&t.stateNode!=null)$j(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(q(166));return ot(t),null}if(e=Fr(gn.current),Zs(t)){r=t.stateNode,n=t.type;var a=t.memoizedProps;switch(r[hn]=t,r[ls]=a,e=(t.mode&1)!==0,n){case"dialog":Ee("cancel",r),Ee("close",r);break;case"iframe":case"object":case"embed":Ee("load",r);break;case"video":case"audio":for(i=0;i<Na.length;i++)Ee(Na[i],r);break;case"source":Ee("error",r);break;case"img":case"image":case"link":Ee("error",r),Ee("load",r);break;case"details":Ee("toggle",r);break;case"input":zy(r,a),Ee("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},Ee("invalid",r);break;case"textarea":Gy(r,a),Ee("invalid",r)}vm(n,a),i=null;for(var s in a)if(a.hasOwnProperty(s)){var o=a[s];s==="children"?typeof o=="string"?r.textContent!==o&&(a.suppressHydrationWarning!==!0&&Xs(r.textContent,o,e),i=["children",o]):typeof o=="number"&&r.textContent!==""+o&&(a.suppressHydrationWarning!==!0&&Xs(r.textContent,o,e),i=["children",""+o]):Xa.hasOwnProperty(s)&&o!=null&&s==="onScroll"&&Ee("scroll",r)}switch(n){case"input":Us(r),Uy(r,a,!0);break;case"textarea":Us(r),Hy(r);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(r.onclick=qo)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{s=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=gC(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=s.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=s.createElement(n,{is:r.is}):(e=s.createElement(n),n==="select"&&(s=e,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):e=s.createElementNS(e,n),e[hn]=t,e[ls]=r,Vj(e,t,!1,!1),t.stateNode=e;e:{switch(s=ym(n,r),n){case"dialog":Ee("cancel",e),Ee("close",e),i=r;break;case"iframe":case"object":case"embed":Ee("load",e),i=r;break;case"video":case"audio":for(i=0;i<Na.length;i++)Ee(Na[i],e);i=r;break;case"source":Ee("error",e),i=r;break;case"img":case"image":case"link":Ee("error",e),Ee("load",e),i=r;break;case"details":Ee("toggle",e),i=r;break;case"input":zy(e,r),i=fm(e,r),Ee("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=Oe({},r,{value:void 0}),Ee("invalid",e);break;case"textarea":Gy(e,r),i=mm(e,r),Ee("invalid",e);break;default:i=r}vm(n,i),o=i;for(a in o)if(o.hasOwnProperty(a)){var l=o[a];a==="style"?bC(e,l):a==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&vC(e,l)):a==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Za(e,l):typeof l=="number"&&Za(e,""+l):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(Xa.hasOwnProperty(a)?l!=null&&a==="onScroll"&&Ee("scroll",e):l!=null&&Eg(e,a,l,s))}switch(n){case"input":Us(e),Uy(e,r,!1);break;case"textarea":Us(e),Hy(e);break;case"option":r.value!=null&&e.setAttribute("value",""+gr(r.value));break;case"select":e.multiple=!!r.multiple,a=r.value,a!=null?Di(e,!!r.multiple,a,!1):r.defaultValue!=null&&Di(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=qo)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return ot(t),null;case 6:if(e&&t.stateNode!=null)Bj(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(q(166));if(n=Fr(cs.current),Fr(gn.current),Zs(t)){if(r=t.stateNode,n=t.memoizedProps,r[hn]=t,(a=r.nodeValue!==n)&&(e=Nt,e!==null))switch(e.tag){case 3:Xs(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Xs(r.nodeValue,n,(e.mode&1)!==0)}a&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[hn]=t,t.stateNode=r}return ot(t),null;case 13:if(Te(Ae),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Me&&Tt!==null&&t.mode&1&&!(t.flags&128))sj(),zi(),t.flags|=98560,a=!1;else if(a=Zs(t),r!==null&&r.dehydrated!==null){if(e===null){if(!a)throw Error(q(318));if(a=t.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(q(317));a[hn]=t}else zi(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;ot(t),a=!1}else en!==null&&(Xm(en),en=null),a=!0;if(!a)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Ae.current&1?Je===0&&(Je=3):uv())),t.updateQueue!==null&&(t.flags|=4),ot(t),null);case 4:return Gi(),Um(e,t),e===null&&ss(t.stateNode.containerInfo),ot(t),null;case 10:return Hg(t.type._context),ot(t),null;case 17:return xt(t.type)&&Fo(),ot(t),null;case 19:if(Te(Ae),a=t.memoizedState,a===null)return ot(t),null;if(r=(t.flags&128)!==0,s=a.rendering,s===null)if(r)xa(a,!1);else{if(Je!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(s=Ho(e),s!==null){for(t.flags|=128,xa(a,!1),r=s.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)a=n,e=r,a.flags&=14680066,s=a.alternate,s===null?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=s.childLanes,a.lanes=s.lanes,a.child=s.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=s.memoizedProps,a.memoizedState=s.memoizedState,a.updateQueue=s.updateQueue,a.type=s.type,e=s.dependencies,a.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ce(Ae,Ae.current&1|2),t.child}e=e.sibling}a.tail!==null&&He()>Ki&&(t.flags|=128,r=!0,xa(a,!1),t.lanes=4194304)}else{if(!r)if(e=Ho(s),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),xa(a,!0),a.tail===null&&a.tailMode==="hidden"&&!s.alternate&&!Me)return ot(t),null}else 2*He()-a.renderingStartTime>Ki&&n!==1073741824&&(t.flags|=128,r=!0,xa(a,!1),t.lanes=4194304);a.isBackwards?(s.sibling=t.child,t.child=s):(n=a.last,n!==null?n.sibling=s:t.child=s,a.last=s)}return a.tail!==null?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=He(),t.sibling=null,n=Ae.current,Ce(Ae,r?n&1|2:n&1),t):(ot(t),null);case 22:case 23:return lv(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Ct&1073741824&&(ot(t),t.subtreeFlags&6&&(t.flags|=8192)):ot(t),null;case 24:return null;case 25:return null}throw Error(q(156,t.tag))}function fA(e,t){switch(Bg(t),t.tag){case 1:return xt(t.type)&&Fo(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Gi(),Te(bt),Te(dt),Jg(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Qg(t),null;case 13:if(Te(Ae),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(q(340));zi()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Te(Ae),null;case 4:return Gi(),null;case 10:return Hg(t.type._context),null;case 22:case 23:return lv(),null;case 24:return null;default:return null}}var no=!1,ut=!1,hA=typeof WeakSet=="function"?WeakSet:Set,K=null;function Ti(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Be(e,t,r)}else n.current=null}function Gm(e,t,n){try{n()}catch(r){Be(e,t,r)}}var D0=!1;function pA(e,t){if(Tm=Do,e=KC(),Vg(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch{n=null;break e}var s=0,o=-1,l=-1,u=0,c=0,f=e,h=null;t:for(;;){for(var m;f!==n||i!==0&&f.nodeType!==3||(o=s+i),f!==a||r!==0&&f.nodeType!==3||(l=s+r),f.nodeType===3&&(s+=f.nodeValue.length),(m=f.firstChild)!==null;)h=f,f=m;for(;;){if(f===e)break t;if(h===n&&++u===i&&(o=s),h===a&&++c===r&&(l=s),(m=f.nextSibling)!==null)break;f=h,h=f.parentNode}f=m}n=o===-1||l===-1?null:{start:o,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Nm={focusedElem:e,selectionRange:n},Do=!1,K=t;K!==null;)if(t=K,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,K=e;else for(;K!==null;){t=K;try{var g=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var p=g.memoizedProps,S=g.memoizedState,v=t.stateNode,y=v.getSnapshotBeforeUpdate(t.elementType===t.type?p:Xt(t.type,p),S);v.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var w=t.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(q(163))}}catch(_){Be(t,t.return,_)}if(e=t.sibling,e!==null){e.return=t.return,K=e;break}K=t.return}return g=D0,D0=!1,g}function Ga(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,a!==void 0&&Gm(t,n,a)}i=i.next}while(i!==r)}}function xl(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function Hm(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function zj(e){var t=e.alternate;t!==null&&(e.alternate=null,zj(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[hn],delete t[ls],delete t[Rm],delete t[QR],delete t[JR])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Uj(e){return e.tag===5||e.tag===3||e.tag===4}function O0(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Uj(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Km(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=qo));else if(r!==4&&(e=e.child,e!==null))for(Km(e,t,n),e=e.sibling;e!==null;)Km(e,t,n),e=e.sibling}function Wm(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(Wm(e,t,n),e=e.sibling;e!==null;)Wm(e,t,n),e=e.sibling}var nt=null,Zt=!1;function Qn(e,t,n){for(n=n.child;n!==null;)Gj(e,t,n),n=n.sibling}function Gj(e,t,n){if(mn&&typeof mn.onCommitFiberUnmount=="function")try{mn.onCommitFiberUnmount(fl,n)}catch{}switch(n.tag){case 5:ut||Ti(n,t);case 6:var r=nt,i=Zt;nt=null,Qn(e,t,n),nt=r,Zt=i,nt!==null&&(Zt?(e=nt,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):nt.removeChild(n.stateNode));break;case 18:nt!==null&&(Zt?(e=nt,n=n.stateNode,e.nodeType===8?Iu(e.parentNode,n):e.nodeType===1&&Iu(e,n),rs(e)):Iu(nt,n.stateNode));break;case 4:r=nt,i=Zt,nt=n.stateNode.containerInfo,Zt=!0,Qn(e,t,n),nt=r,Zt=i;break;case 0:case 11:case 14:case 15:if(!ut&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var a=i,s=a.destroy;a=a.tag,s!==void 0&&(a&2||a&4)&&Gm(n,t,s),i=i.next}while(i!==r)}Qn(e,t,n);break;case 1:if(!ut&&(Ti(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){Be(n,t,o)}Qn(e,t,n);break;case 21:Qn(e,t,n);break;case 22:n.mode&1?(ut=(r=ut)||n.memoizedState!==null,Qn(e,t,n),ut=r):Qn(e,t,n);break;default:Qn(e,t,n)}}function L0(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new hA),t.forEach(function(r){var i=_A.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Qt(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var a=e,s=t,o=s;e:for(;o!==null;){switch(o.tag){case 5:nt=o.stateNode,Zt=!1;break e;case 3:nt=o.stateNode.containerInfo,Zt=!0;break e;case 4:nt=o.stateNode.containerInfo,Zt=!0;break e}o=o.return}if(nt===null)throw Error(q(160));Gj(a,s,i),nt=null,Zt=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){Be(i,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Hj(t,e),t=t.sibling}function Hj(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Qt(t,e),dn(e),r&4){try{Ga(3,e,e.return),xl(3,e)}catch(p){Be(e,e.return,p)}try{Ga(5,e,e.return)}catch(p){Be(e,e.return,p)}}break;case 1:Qt(t,e),dn(e),r&512&&n!==null&&Ti(n,n.return);break;case 5:if(Qt(t,e),dn(e),r&512&&n!==null&&Ti(n,n.return),e.flags&32){var i=e.stateNode;try{Za(i,"")}catch(p){Be(e,e.return,p)}}if(r&4&&(i=e.stateNode,i!=null)){var a=e.memoizedProps,s=n!==null?n.memoizedProps:a,o=e.type,l=e.updateQueue;if(e.updateQueue=null,l!==null)try{o==="input"&&a.type==="radio"&&a.name!=null&&pC(i,a),ym(o,s);var u=ym(o,a);for(s=0;s<l.length;s+=2){var c=l[s],f=l[s+1];c==="style"?bC(i,f):c==="dangerouslySetInnerHTML"?vC(i,f):c==="children"?Za(i,f):Eg(i,c,f,u)}switch(o){case"input":hm(i,a);break;case"textarea":mC(i,a);break;case"select":var h=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var m=a.value;m!=null?Di(i,!!a.multiple,m,!1):h!==!!a.multiple&&(a.defaultValue!=null?Di(i,!!a.multiple,a.defaultValue,!0):Di(i,!!a.multiple,a.multiple?[]:"",!1))}i[ls]=a}catch(p){Be(e,e.return,p)}}break;case 6:if(Qt(t,e),dn(e),r&4){if(e.stateNode===null)throw Error(q(162));i=e.stateNode,a=e.memoizedProps;try{i.nodeValue=a}catch(p){Be(e,e.return,p)}}break;case 3:if(Qt(t,e),dn(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{rs(t.containerInfo)}catch(p){Be(e,e.return,p)}break;case 4:Qt(t,e),dn(e);break;case 13:Qt(t,e),dn(e),i=e.child,i.flags&8192&&(a=i.memoizedState!==null,i.stateNode.isHidden=a,!a||i.alternate!==null&&i.alternate.memoizedState!==null||(sv=He())),r&4&&L0(e);break;case 22:if(c=n!==null&&n.memoizedState!==null,e.mode&1?(ut=(u=ut)||c,Qt(t,e),ut=u):Qt(t,e),dn(e),r&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!c&&e.mode&1)for(K=e,c=e.child;c!==null;){for(f=K=c;K!==null;){switch(h=K,m=h.child,h.tag){case 0:case 11:case 14:case 15:Ga(4,h,h.return);break;case 1:Ti(h,h.return);var g=h.stateNode;if(typeof g.componentWillUnmount=="function"){r=h,n=h.return;try{t=r,g.props=t.memoizedProps,g.state=t.memoizedState,g.componentWillUnmount()}catch(p){Be(r,n,p)}}break;case 5:Ti(h,h.return);break;case 22:if(h.memoizedState!==null){F0(f);continue}}m!==null?(m.return=h,K=m):F0(f)}c=c.sibling}e:for(c=null,f=e;;){if(f.tag===5){if(c===null){c=f;try{i=f.stateNode,u?(a=i.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(o=f.stateNode,l=f.memoizedProps.style,s=l!=null&&l.hasOwnProperty("display")?l.display:null,o.style.display=yC("display",s))}catch(p){Be(e,e.return,p)}}}else if(f.tag===6){if(c===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(p){Be(e,e.return,p)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;c===f&&(c=null),f=f.return}c===f&&(c=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Qt(t,e),dn(e),r&4&&L0(e);break;case 21:break;default:Qt(t,e),dn(e)}}function dn(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(Uj(n)){var r=n;break e}n=n.return}throw Error(q(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Za(i,""),r.flags&=-33);var a=O0(e);Wm(e,a,i);break;case 3:case 4:var s=r.stateNode.containerInfo,o=O0(e);Km(e,o,s);break;default:throw Error(q(161))}}catch(l){Be(e,e.return,l)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function mA(e,t,n){K=e,Kj(e)}function Kj(e,t,n){for(var r=(e.mode&1)!==0;K!==null;){var i=K,a=i.child;if(i.tag===22&&r){var s=i.memoizedState!==null||no;if(!s){var o=i.alternate,l=o!==null&&o.memoizedState!==null||ut;o=no;var u=ut;if(no=s,(ut=l)&&!u)for(K=i;K!==null;)s=K,l=s.child,s.tag===22&&s.memoizedState!==null?V0(i):l!==null?(l.return=s,K=l):V0(i);for(;a!==null;)K=a,Kj(a),a=a.sibling;K=i,no=o,ut=u}q0(e)}else i.subtreeFlags&8772&&a!==null?(a.return=i,K=a):q0(e)}}function q0(e){for(;K!==null;){var t=K;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:ut||xl(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!ut)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:Xt(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;a!==null&&S0(t,a,r);break;case 3:var s=t.updateQueue;if(s!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}S0(t,s,n)}break;case 5:var o=t.stateNode;if(n===null&&t.flags&4){n=o;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var f=c.dehydrated;f!==null&&rs(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(q(163))}ut||t.flags&512&&Hm(t)}catch(h){Be(t,t.return,h)}}if(t===e){K=null;break}if(n=t.sibling,n!==null){n.return=t.return,K=n;break}K=t.return}}function F0(e){for(;K!==null;){var t=K;if(t===e){K=null;break}var n=t.sibling;if(n!==null){n.return=t.return,K=n;break}K=t.return}}function V0(e){for(;K!==null;){var t=K;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{xl(4,t)}catch(l){Be(t,n,l)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(l){Be(t,i,l)}}var a=t.return;try{Hm(t)}catch(l){Be(t,a,l)}break;case 5:var s=t.return;try{Hm(t)}catch(l){Be(t,s,l)}}}catch(l){Be(t,t.return,l)}if(t===e){K=null;break}var o=t.sibling;if(o!==null){o.return=t.return,K=o;break}K=t.return}}var gA=Math.ceil,Yo=$n.ReactCurrentDispatcher,iv=$n.ReactCurrentOwner,Ut=$n.ReactCurrentBatchConfig,ge=0,tt=null,We=null,it=0,Ct=0,Ni=Sr(0),Je=0,ps=null,Yr=0,wl=0,av=0,Ha=null,vt=null,sv=0,Ki=1/0,Cn=null,Qo=!1,Ym=null,fr=null,ro=!1,sr=null,Jo=0,Ka=0,Qm=null,ko=-1,Co=0;function pt(){return ge&6?He():ko!==-1?ko:ko=He()}function hr(e){return e.mode&1?ge&2&&it!==0?it&-it:ZR.transition!==null?(Co===0&&(Co=PC()),Co):(e=Se,e!==0||(e=window.event,e=e===void 0?16:qC(e.type)),e):1}function nn(e,t,n,r){if(50<Ka)throw Ka=0,Qm=null,Error(q(185));Ss(e,n,r),(!(ge&2)||e!==tt)&&(e===tt&&(!(ge&2)&&(wl|=n),Je===4&&rr(e,it)),wt(e,r),n===1&&ge===0&&!(t.mode&1)&&(Ki=He()+500,vl&&_r()))}function wt(e,t){var n=e.callbackNode;ZP(e,t);var r=Io(e,e===tt?it:0);if(r===0)n!==null&&Yy(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&Yy(n),t===1)e.tag===0?XR($0.bind(null,e)):rj($0.bind(null,e)),WR(function(){!(ge&6)&&_r()}),n=null;else{switch(RC(r)){case 1:n=Rg;break;case 4:n=NC;break;case 16:n=Ao;break;case 536870912:n=MC;break;default:n=Ao}n=tE(n,Wj.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Wj(e,t){if(ko=-1,Co=0,ge&6)throw Error(q(327));var n=e.callbackNode;if(Vi()&&e.callbackNode!==n)return null;var r=Io(e,e===tt?it:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Xo(e,r);else{t=r;var i=ge;ge|=2;var a=Qj();(tt!==e||it!==t)&&(Cn=null,Ki=He()+500,Br(e,t));do try{bA();break}catch(o){Yj(e,o)}while(!0);Gg(),Yo.current=a,ge=i,We!==null?t=0:(tt=null,it=0,t=Je)}if(t!==0){if(t===2&&(i=_m(e),i!==0&&(r=i,t=Jm(e,i))),t===1)throw n=ps,Br(e,0),rr(e,r),wt(e,He()),n;if(t===6)rr(e,r);else{if(i=e.current.alternate,!(r&30)&&!vA(i)&&(t=Xo(e,r),t===2&&(a=_m(e),a!==0&&(r=a,t=Jm(e,a))),t===1))throw n=ps,Br(e,0),rr(e,r),wt(e,He()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(q(345));case 2:Ir(e,vt,Cn);break;case 3:if(rr(e,r),(r&130023424)===r&&(t=sv+500-He(),10<t)){if(Io(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){pt(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=Pm(Ir.bind(null,e,vt,Cn),t);break}Ir(e,vt,Cn);break;case 4:if(rr(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var s=31-tn(r);a=1<<s,s=t[s],s>i&&(i=s),r&=~a}if(r=i,r=He()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*gA(r/1960))-r,10<r){e.timeoutHandle=Pm(Ir.bind(null,e,vt,Cn),r);break}Ir(e,vt,Cn);break;case 5:Ir(e,vt,Cn);break;default:throw Error(q(329))}}}return wt(e,He()),e.callbackNode===n?Wj.bind(null,e):null}function Jm(e,t){var n=Ha;return e.current.memoizedState.isDehydrated&&(Br(e,t).flags|=256),e=Xo(e,t),e!==2&&(t=vt,vt=n,t!==null&&Xm(t)),e}function Xm(e){vt===null?vt=e:vt.push.apply(vt,e)}function vA(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!rn(a(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function rr(e,t){for(t&=~av,t&=~wl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-tn(t),r=1<<n;e[n]=-1,t&=~r}}function $0(e){if(ge&6)throw Error(q(327));Vi();var t=Io(e,0);if(!(t&1))return wt(e,He()),null;var n=Xo(e,t);if(e.tag!==0&&n===2){var r=_m(e);r!==0&&(t=r,n=Jm(e,r))}if(n===1)throw n=ps,Br(e,0),rr(e,t),wt(e,He()),n;if(n===6)throw Error(q(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Ir(e,vt,Cn),wt(e,He()),null}function ov(e,t){var n=ge;ge|=1;try{return e(t)}finally{ge=n,ge===0&&(Ki=He()+500,vl&&_r())}}function Qr(e){sr!==null&&sr.tag===0&&!(ge&6)&&Vi();var t=ge;ge|=1;var n=Ut.transition,r=Se;try{if(Ut.transition=null,Se=1,e)return e()}finally{Se=r,Ut.transition=n,ge=t,!(ge&6)&&_r()}}function lv(){Ct=Ni.current,Te(Ni)}function Br(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,KR(n)),We!==null)for(n=We.return;n!==null;){var r=n;switch(Bg(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Fo();break;case 3:Gi(),Te(bt),Te(dt),Jg();break;case 5:Qg(r);break;case 4:Gi();break;case 13:Te(Ae);break;case 19:Te(Ae);break;case 10:Hg(r.type._context);break;case 22:case 23:lv()}n=n.return}if(tt=e,We=e=pr(e.current,null),it=Ct=t,Je=0,ps=null,av=wl=Yr=0,vt=Ha=null,qr!==null){for(t=0;t<qr.length;t++)if(n=qr[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,a=n.pending;if(a!==null){var s=a.next;a.next=i,r.next=s}n.pending=r}qr=null}return e}function Yj(e,t){do{var n=We;try{if(Gg(),wo.current=Wo,Ko){for(var r=De.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Ko=!1}if(Wr=0,et=Qe=De=null,Ua=!1,ds=0,iv.current=null,n===null||n.return===null){Je=1,ps=t,We=null;break}e:{var a=e,s=n.return,o=n,l=t;if(t=it,o.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,c=o,f=c.tag;if(!(c.mode&1)&&(f===0||f===11||f===15)){var h=c.alternate;h?(c.updateQueue=h.updateQueue,c.memoizedState=h.memoizedState,c.lanes=h.lanes):(c.updateQueue=null,c.memoizedState=null)}var m=T0(s);if(m!==null){m.flags&=-257,N0(m,s,o,a,t),m.mode&1&&E0(a,u,t),t=m,l=u;var g=t.updateQueue;if(g===null){var p=new Set;p.add(l),t.updateQueue=p}else g.add(l);break e}else{if(!(t&1)){E0(a,u,t),uv();break e}l=Error(q(426))}}else if(Me&&o.mode&1){var S=T0(s);if(S!==null){!(S.flags&65536)&&(S.flags|=256),N0(S,s,o,a,t),zg(Hi(l,o));break e}}a=l=Hi(l,o),Je!==4&&(Je=2),Ha===null?Ha=[a]:Ha.push(a),a=s;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t;var v=Rj(a,l,t);w0(a,v);break e;case 1:o=l;var y=a.type,w=a.stateNode;if(!(a.flags&128)&&(typeof y.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(fr===null||!fr.has(w)))){a.flags|=65536,t&=-t,a.lanes|=t;var _=Aj(a,o,t);w0(a,_);break e}}a=a.return}while(a!==null)}Xj(n)}catch(C){t=C,We===n&&n!==null&&(We=n=n.return);continue}break}while(!0)}function Qj(){var e=Yo.current;return Yo.current=Wo,e===null?Wo:e}function uv(){(Je===0||Je===3||Je===2)&&(Je=4),tt===null||!(Yr&268435455)&&!(wl&268435455)||rr(tt,it)}function Xo(e,t){var n=ge;ge|=2;var r=Qj();(tt!==e||it!==t)&&(Cn=null,Br(e,t));do try{yA();break}catch(i){Yj(e,i)}while(!0);if(Gg(),ge=n,Yo.current=r,We!==null)throw Error(q(261));return tt=null,it=0,Je}function yA(){for(;We!==null;)Jj(We)}function bA(){for(;We!==null&&!UP();)Jj(We)}function Jj(e){var t=eE(e.alternate,e,Ct);e.memoizedProps=e.pendingProps,t===null?Xj(e):We=t,iv.current=null}function Xj(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=fA(n,t),n!==null){n.flags&=32767,We=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Je=6,We=null;return}}else if(n=dA(n,t,Ct),n!==null){We=n;return}if(t=t.sibling,t!==null){We=t;return}We=t=e}while(t!==null);Je===0&&(Je=5)}function Ir(e,t,n){var r=Se,i=Ut.transition;try{Ut.transition=null,Se=1,xA(e,t,n,r)}finally{Ut.transition=i,Se=r}return null}function xA(e,t,n,r){do Vi();while(sr!==null);if(ge&6)throw Error(q(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(q(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(eR(e,a),e===tt&&(We=tt=null,it=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||ro||(ro=!0,tE(Ao,function(){return Vi(),null})),a=(n.flags&15990)!==0,n.subtreeFlags&15990||a){a=Ut.transition,Ut.transition=null;var s=Se;Se=1;var o=ge;ge|=4,iv.current=null,pA(e,n),Hj(n,e),VR(Nm),Do=!!Tm,Nm=Tm=null,e.current=n,mA(n),GP(),ge=o,Se=s,Ut.transition=a}else e.current=n;if(ro&&(ro=!1,sr=e,Jo=i),a=e.pendingLanes,a===0&&(fr=null),WP(n.stateNode),wt(e,He()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Qo)throw Qo=!1,e=Ym,Ym=null,e;return Jo&1&&e.tag!==0&&Vi(),a=e.pendingLanes,a&1?e===Qm?Ka++:(Ka=0,Qm=e):Ka=0,_r(),null}function Vi(){if(sr!==null){var e=RC(Jo),t=Ut.transition,n=Se;try{if(Ut.transition=null,Se=16>e?16:e,sr===null)var r=!1;else{if(e=sr,sr=null,Jo=0,ge&6)throw Error(q(331));var i=ge;for(ge|=4,K=e.current;K!==null;){var a=K,s=a.child;if(K.flags&16){var o=a.deletions;if(o!==null){for(var l=0;l<o.length;l++){var u=o[l];for(K=u;K!==null;){var c=K;switch(c.tag){case 0:case 11:case 15:Ga(8,c,a)}var f=c.child;if(f!==null)f.return=c,K=f;else for(;K!==null;){c=K;var h=c.sibling,m=c.return;if(zj(c),c===u){K=null;break}if(h!==null){h.return=m,K=h;break}K=m}}}var g=a.alternate;if(g!==null){var p=g.child;if(p!==null){g.child=null;do{var S=p.sibling;p.sibling=null,p=S}while(p!==null)}}K=a}}if(a.subtreeFlags&2064&&s!==null)s.return=a,K=s;else e:for(;K!==null;){if(a=K,a.flags&2048)switch(a.tag){case 0:case 11:case 15:Ga(9,a,a.return)}var v=a.sibling;if(v!==null){v.return=a.return,K=v;break e}K=a.return}}var y=e.current;for(K=y;K!==null;){s=K;var w=s.child;if(s.subtreeFlags&2064&&w!==null)w.return=s,K=w;else e:for(s=y;K!==null;){if(o=K,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:xl(9,o)}}catch(C){Be(o,o.return,C)}if(o===s){K=null;break e}var _=o.sibling;if(_!==null){_.return=o.return,K=_;break e}K=o.return}}if(ge=i,_r(),mn&&typeof mn.onPostCommitFiberRoot=="function")try{mn.onPostCommitFiberRoot(fl,e)}catch{}r=!0}return r}finally{Se=n,Ut.transition=t}}return!1}function B0(e,t,n){t=Hi(n,t),t=Rj(e,t,1),e=dr(e,t,1),t=pt(),e!==null&&(Ss(e,1,t),wt(e,t))}function Be(e,t,n){if(e.tag===3)B0(e,e,n);else for(;t!==null;){if(t.tag===3){B0(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(fr===null||!fr.has(r))){e=Hi(n,e),e=Aj(t,e,1),t=dr(t,e,1),e=pt(),t!==null&&(Ss(t,1,e),wt(t,e));break}}t=t.return}}function wA(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=pt(),e.pingedLanes|=e.suspendedLanes&n,tt===e&&(it&n)===n&&(Je===4||Je===3&&(it&130023424)===it&&500>He()-sv?Br(e,0):av|=n),wt(e,t)}function Zj(e,t){t===0&&(e.mode&1?(t=Ks,Ks<<=1,!(Ks&130023424)&&(Ks=4194304)):t=1);var n=pt();e=Ln(e,t),e!==null&&(Ss(e,t,n),wt(e,n))}function SA(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Zj(e,n)}function _A(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(q(314))}r!==null&&r.delete(t),Zj(e,n)}var eE;eE=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||bt.current)yt=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return yt=!1,cA(e,t,n);yt=!!(e.flags&131072)}else yt=!1,Me&&t.flags&1048576&&ij(t,Bo,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;_o(e,t),e=t.pendingProps;var i=Bi(t,dt.current);Fi(t,n),i=Zg(null,t,r,e,i,n);var a=ev();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,xt(r)?(a=!0,Vo(t)):a=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Wg(t),i.updater=bl,t.stateNode=i,i._reactInternals=t,qm(t,r,e,n),t=$m(null,t,r,!0,a,n)):(t.tag=0,Me&&a&&$g(t),ht(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(_o(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=CA(r),e=Xt(r,e),i){case 0:t=Vm(null,t,r,e,n);break e;case 1:t=R0(null,t,r,e,n);break e;case 11:t=M0(null,t,r,e,n);break e;case 14:t=P0(null,t,r,Xt(r.type,e),n);break e}throw Error(q(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Xt(r,i),Vm(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Xt(r,i),R0(e,t,r,i,n);case 3:e:{if(Lj(t),e===null)throw Error(q(387));r=t.pendingProps,a=t.memoizedState,i=a.element,cj(e,t),Go(t,r,null,n);var s=t.memoizedState;if(r=s.element,a.isDehydrated)if(a={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=a,t.memoizedState=a,t.flags&256){i=Hi(Error(q(423)),t),t=A0(e,t,r,n,i);break e}else if(r!==i){i=Hi(Error(q(424)),t),t=A0(e,t,r,n,i);break e}else for(Tt=cr(t.stateNode.containerInfo.firstChild),Nt=t,Me=!0,en=null,n=lj(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(zi(),r===i){t=qn(e,t,n);break e}ht(e,t,r,n)}t=t.child}return t;case 5:return dj(t),e===null&&Dm(t),r=t.type,i=t.pendingProps,a=e!==null?e.memoizedProps:null,s=i.children,Mm(r,i)?s=null:a!==null&&Mm(r,a)&&(t.flags|=32),Oj(e,t),ht(e,t,s,n),t.child;case 6:return e===null&&Dm(t),null;case 13:return qj(e,t,n);case 4:return Yg(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Ui(t,null,r,n):ht(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Xt(r,i),M0(e,t,r,i,n);case 7:return ht(e,t,t.pendingProps,n),t.child;case 8:return ht(e,t,t.pendingProps.children,n),t.child;case 12:return ht(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,a=t.memoizedProps,s=i.value,Ce(zo,r._currentValue),r._currentValue=s,a!==null)if(rn(a.value,s)){if(a.children===i.children&&!bt.current){t=qn(e,t,n);break e}}else for(a=t.child,a!==null&&(a.return=t);a!==null;){var o=a.dependencies;if(o!==null){s=a.child;for(var l=o.firstContext;l!==null;){if(l.context===r){if(a.tag===1){l=Rn(-1,n&-n),l.tag=2;var u=a.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}a.lanes|=n,l=a.alternate,l!==null&&(l.lanes|=n),Om(a.return,n,t),o.lanes|=n;break}l=l.next}}else if(a.tag===10)s=a.type===t.type?null:a.child;else if(a.tag===18){if(s=a.return,s===null)throw Error(q(341));s.lanes|=n,o=s.alternate,o!==null&&(o.lanes|=n),Om(s,n,t),s=a.sibling}else s=a.child;if(s!==null)s.return=a;else for(s=a;s!==null;){if(s===t){s=null;break}if(a=s.sibling,a!==null){a.return=s.return,s=a;break}s=s.return}a=s}ht(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Fi(t,n),i=Gt(i),r=r(i),t.flags|=1,ht(e,t,r,n),t.child;case 14:return r=t.type,i=Xt(r,t.pendingProps),i=Xt(r.type,i),P0(e,t,r,i,n);case 15:return Ij(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Xt(r,i),_o(e,t),t.tag=1,xt(r)?(e=!0,Vo(t)):e=!1,Fi(t,n),Pj(t,r,i),qm(t,r,i,n),$m(null,t,r,!0,e,n);case 19:return Fj(e,t,n);case 22:return Dj(e,t,n)}throw Error(q(156,t.tag))};function tE(e,t){return TC(e,t)}function kA(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function zt(e,t,n,r){return new kA(e,t,n,r)}function cv(e){return e=e.prototype,!(!e||!e.isReactComponent)}function CA(e){if(typeof e=="function")return cv(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Ng)return 11;if(e===Mg)return 14}return 2}function pr(e,t){var n=e.alternate;return n===null?(n=zt(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function jo(e,t,n,r,i,a){var s=2;if(r=e,typeof e=="function")cv(e)&&(s=1);else if(typeof e=="string")s=5;else e:switch(e){case bi:return zr(n.children,i,a,t);case Tg:s=8,i|=8;break;case lm:return e=zt(12,n,t,i|2),e.elementType=lm,e.lanes=a,e;case um:return e=zt(13,n,t,i),e.elementType=um,e.lanes=a,e;case cm:return e=zt(19,n,t,i),e.elementType=cm,e.lanes=a,e;case dC:return Sl(n,i,a,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case uC:s=10;break e;case cC:s=9;break e;case Ng:s=11;break e;case Mg:s=14;break e;case er:s=16,r=null;break e}throw Error(q(130,e==null?e:typeof e,""))}return t=zt(s,n,t,i),t.elementType=e,t.type=r,t.lanes=a,t}function zr(e,t,n,r){return e=zt(7,e,r,t),e.lanes=n,e}function Sl(e,t,n,r){return e=zt(22,e,r,t),e.elementType=dC,e.lanes=n,e.stateNode={isHidden:!1},e}function Bu(e,t,n){return e=zt(6,e,null,t),e.lanes=n,e}function zu(e,t,n){return t=zt(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function jA(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=_u(0),this.expirationTimes=_u(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=_u(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function dv(e,t,n,r,i,a,s,o,l){return e=new jA(e,t,n,o,l),t===1?(t=1,a===!0&&(t|=8)):t=0,a=zt(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Wg(a),e}function EA(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:yi,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function nE(e){if(!e)return vr;e=e._reactInternals;e:{if(Xr(e)!==e||e.tag!==1)throw Error(q(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(xt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(q(171))}if(e.tag===1){var n=e.type;if(xt(n))return nj(e,n,t)}return t}function rE(e,t,n,r,i,a,s,o,l){return e=dv(n,r,!0,e,i,a,s,o,l),e.context=nE(null),n=e.current,r=pt(),i=hr(n),a=Rn(r,i),a.callback=t??null,dr(n,a,i),e.current.lanes=i,Ss(e,i,r),wt(e,r),e}function _l(e,t,n,r){var i=t.current,a=pt(),s=hr(i);return n=nE(n),t.context===null?t.context=n:t.pendingContext=n,t=Rn(a,s),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=dr(i,t,s),e!==null&&(nn(e,i,s,a),xo(e,i,s)),s}function Zo(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function z0(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function fv(e,t){z0(e,t),(e=e.alternate)&&z0(e,t)}function TA(){return null}var iE=typeof reportError=="function"?reportError:function(e){console.error(e)};function hv(e){this._internalRoot=e}kl.prototype.render=hv.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(q(409));_l(e,t,null,null)};kl.prototype.unmount=hv.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Qr(function(){_l(null,e,null,null)}),t[On]=null}};function kl(e){this._internalRoot=e}kl.prototype.unstable_scheduleHydration=function(e){if(e){var t=DC();e={blockedOn:null,target:e,priority:t};for(var n=0;n<nr.length&&t!==0&&t<nr[n].priority;n++);nr.splice(n,0,e),n===0&&LC(e)}};function pv(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Cl(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function U0(){}function NA(e,t,n,r,i){if(i){if(typeof r=="function"){var a=r;r=function(){var u=Zo(s);a.call(u)}}var s=rE(t,r,e,0,null,!1,!1,"",U0);return e._reactRootContainer=s,e[On]=s.current,ss(e.nodeType===8?e.parentNode:e),Qr(),s}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var o=r;r=function(){var u=Zo(l);o.call(u)}}var l=dv(e,0,!1,null,null,!1,!1,"",U0);return e._reactRootContainer=l,e[On]=l.current,ss(e.nodeType===8?e.parentNode:e),Qr(function(){_l(t,l,n,r)}),l}function jl(e,t,n,r,i){var a=n._reactRootContainer;if(a){var s=a;if(typeof i=="function"){var o=i;i=function(){var l=Zo(s);o.call(l)}}_l(t,s,e,i)}else s=NA(n,t,e,i,r);return Zo(s)}AC=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Ta(t.pendingLanes);n!==0&&(Ag(t,n|1),wt(t,He()),!(ge&6)&&(Ki=He()+500,_r()))}break;case 13:Qr(function(){var r=Ln(e,1);if(r!==null){var i=pt();nn(r,e,1,i)}}),fv(e,1)}};Ig=function(e){if(e.tag===13){var t=Ln(e,134217728);if(t!==null){var n=pt();nn(t,e,134217728,n)}fv(e,134217728)}};IC=function(e){if(e.tag===13){var t=hr(e),n=Ln(e,t);if(n!==null){var r=pt();nn(n,e,t,r)}fv(e,t)}};DC=function(){return Se};OC=function(e,t){var n=Se;try{return Se=e,t()}finally{Se=n}};xm=function(e,t,n){switch(t){case"input":if(hm(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=gl(r);if(!i)throw Error(q(90));hC(r),hm(r,i)}}}break;case"textarea":mC(e,n);break;case"select":t=n.value,t!=null&&Di(e,!!n.multiple,t,!1)}};SC=ov;_C=Qr;var MA={usingClientEntryPoint:!1,Events:[ks,_i,gl,xC,wC,ov]},wa={findFiberByHostInstance:Lr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},PA={bundleType:wa.bundleType,version:wa.version,rendererPackageName:wa.rendererPackageName,rendererConfig:wa.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:$n.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=jC(e),e===null?null:e.stateNode},findFiberByHostInstance:wa.findFiberByHostInstance||TA,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var io=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!io.isDisabled&&io.supportsFiber)try{fl=io.inject(PA),mn=io}catch{}}At.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=MA;At.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!pv(t))throw Error(q(200));return EA(e,t,null,n)};At.createRoot=function(e,t){if(!pv(e))throw Error(q(299));var n=!1,r="",i=iE;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=dv(e,1,!1,null,null,n,!1,r,i),e[On]=t.current,ss(e.nodeType===8?e.parentNode:e),new hv(t)};At.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(q(188)):(e=Object.keys(e).join(","),Error(q(268,e)));return e=jC(t),e=e===null?null:e.stateNode,e};At.flushSync=function(e){return Qr(e)};At.hydrate=function(e,t,n){if(!Cl(t))throw Error(q(200));return jl(null,e,t,!0,n)};At.hydrateRoot=function(e,t,n){if(!pv(e))throw Error(q(405));var r=n!=null&&n.hydratedSources||null,i=!1,a="",s=iE;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(a=n.identifierPrefix),n.onRecoverableError!==void 0&&(s=n.onRecoverableError)),t=rE(t,null,e,1,n??null,i,!1,a,s),e[On]=t.current,ss(e),r)for(e=0;e<r.length;e++)n=r[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new kl(t)};At.render=function(e,t,n){if(!Cl(t))throw Error(q(200));return jl(null,e,t,!1,n)};At.unmountComponentAtNode=function(e){if(!Cl(e))throw Error(q(40));return e._reactRootContainer?(Qr(function(){jl(null,null,e,!1,function(){e._reactRootContainer=null,e[On]=null})}),!0):!1};At.unstable_batchedUpdates=ov;At.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Cl(n))throw Error(q(200));if(e==null||e._reactInternals===void 0)throw Error(q(38));return jl(e,t,n,!1,r)};At.version="18.3.1-next-f1338f8080-20240426";function aE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(aE)}catch(e){console.error(e)}}aE(),aC.exports=At;var RA=aC.exports,G0=RA;sm.createRoot=G0.createRoot,sm.hydrateRoot=G0.hydrateRoot;const AA="modulepreload",IA=function(e){return"/agent-director/"+e},H0={},mv=function(t,n,r){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),o=(s==null?void 0:s.nonce)||(s==null?void 0:s.getAttribute("nonce"));i=Promise.allSettled(n.map(l=>{if(l=IA(l),l in H0)return;H0[l]=!0;const u=l.endsWith(".css"),c=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${c}`))return;const f=document.createElement("link");if(f.rel=u?"stylesheet":AA,u||(f.as="script"),f.crossOrigin="",f.href=l,o&&f.setAttribute("nonce",o),document.head.appendChild(f),u)return new Promise((h,m)=>{f.addEventListener("load",h),f.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${l}`)))})}))}function a(s){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s}return i.then(s=>{for(const o of s||[])o.status==="rejected"&&a(o.reason);return t().catch(a)})},DA=()=>d.jsxs("svg",{className:"logo-mark",width:"54",height:"54",viewBox:"0 0 120 120",role:"img","aria-label":"Agent Director logo",children:[d.jsx("rect",{x:"8",y:"8",width:"104",height:"104",rx:"18",className:"logo-frame"}),d.jsx("rect",{x:"24",y:"28",width:"72",height:"16",rx:"6",className:"logo-bar logo-bar-a"}),d.jsx("rect",{x:"24",y:"52",width:"72",height:"16",rx:"6",className:"logo-bar logo-bar-b"}),d.jsx("rect",{x:"24",y:"76",width:"72",height:"16",rx:"6",className:"logo-bar logo-bar-c"}),d.jsx("circle",{cx:"96",cy:"36",r:"6",className:"logo-node logo-node-a"}),d.jsx("circle",{cx:"96",cy:"60",r:"6",className:"logo-node logo-node-b"}),d.jsx("circle",{cx:"96",cy:"84",r:"6",className:"logo-node logo-node-c"})]});function OA({trace:e,traces:t=[],selectedTraceId:n,onSelectTrace:r,onReload:i,onStartTour:a,onToggleStory:s,onOpenPalette:o,onToggleExplain:l,onShareSession:u,onThemeChange:c,onMotionChange:f,themeMode:h="studio",motionMode:m="balanced",activeSessions:g=1,shareStatus:p=null,handoffStatus:S=null,explainMode:v=!1,storyActive:y=!1,mode:w="cinema",missionCompletion:_,runHealthScore:C=100,modeHotkeys:E="C / F / Space",onCreateHandoffDigest:T}){const j=Math.max(0,Math.min(100,Math.round(C))),N=_?`${_.done}/${_.total} missions`:"Missions n/a";return d.jsxs("header",{className:"header","data-help":!0,"data-help-indicator":!0,"data-tour":"header","data-help-title":"Mission control","data-help-body":"Trace identity, status, and live controls live here. Use Story, Guide, or Explain to orient new viewers.","data-help-placement":"bottom",children:[d.jsxs("div",{className:"header-title",children:[d.jsxs("div",{className:"header-logo",children:[d.jsx(DA,{}),d.jsx("span",{children:"Agent Director"})]}),d.jsx("div",{className:"header-tagline",children:"Cinematic trace intelligence for agent runs."}),d.jsxs("div",{className:"header-meta",children:[d.jsxs("span",{className:"header-run",children:["Run: ",(e==null?void 0:e.id)??"loading"]}),t.length>0?d.jsx("select",{className:"trace-select",value:n??(e==null?void 0:e.id)??"","aria-label":"Select trace",onChange:P=>r==null?void 0:r(P.target.value),"data-help":!0,"data-help-title":"Trace selector","data-help-body":"Switch between available runs to compare different sessions.","data-help-placement":"bottom",children:t.map(P=>d.jsxs("option",{value:P.id,children:[P.name," (",P.id,")"]},P.id))}):null,d.jsx("span",{className:`status-pill status-${(e==null?void 0:e.status)??"loading"}`,children:(e==null?void 0:e.status)??"loading"}),e!=null&&e.replay?d.jsxs("span",{className:"header-replay",title:`Replay from ${e.branchPointStepId??"unknown step"}`,children:["Replay: ",e.replay.strategy]}):null,d.jsxs("span",{className:"header-wall",children:["Wall: ",(e==null?void 0:e.metadata.wallTimeMs)??0,"ms"]}),d.jsxs("span",{className:"header-presence","aria-label":"Active sessions",children:["Live: ",g]}),d.jsxs("span",{className:"header-mode-pill","aria-label":"Current mode",children:["Mode: ",w]}),d.jsxs("span",{className:"header-hotkeys","aria-label":"Mode hotkeys",children:["Keys: ",E]}),d.jsx("span",{className:"header-mission","aria-label":"Mission completion",children:N}),d.jsxs("span",{className:"header-health","aria-label":`Run health score ${j}`,children:[d.jsx("span",{className:"header-health-bar",children:d.jsx("span",{className:"header-health-fill",style:{width:`${j}%`}})}),d.jsxs("span",{children:["Health ",j]})]}),p?d.jsx("span",{className:"header-share-status",children:p}):null,S?d.jsx("span",{className:"header-share-status",children:S}):null]})]}),d.jsxs("div",{className:"header-actions",children:[d.jsxs("label",{className:"theme-picker",children:["Theme",d.jsxs("select",{className:"trace-select",value:h,"aria-label":"Select theme",onChange:P=>c==null?void 0:c(P.target.value),children:[d.jsx("option",{value:"studio",children:"Studio"}),d.jsx("option",{value:"focus",children:"Focus"}),d.jsx("option",{value:"contrast",children:"Contrast"})]})]}),d.jsxs("label",{className:"theme-picker",children:["Motion",d.jsxs("select",{className:"trace-select",value:m,"aria-label":"Select motion profile",onChange:P=>f==null?void 0:f(P.target.value),children:[d.jsx("option",{value:"cinematic",children:"Cinematic"}),d.jsx("option",{value:"balanced",children:"Balanced"}),d.jsx("option",{value:"minimal",children:"Minimal"})]})]}),d.jsx("button",{className:`ghost-button ${y?"active":""}`,type:"button",onClick:s,"aria-pressed":y,"aria-label":"Toggle story mode","data-help":!0,"data-help-title":"Story mode","data-help-body":"Auto-runs a cinematic walkthrough for demos.","data-help-placement":"bottom",children:"Story"}),d.jsx("button",{className:"ghost-button",type:"button",onClick:a,"aria-label":"Start guided tour","data-help":!0,"data-help-title":"Guided tour","data-help-body":"Walk through the interface step by step.","data-help-placement":"bottom",children:"Guide"}),d.jsx("button",{className:"ghost-button",type:"button",onClick:o,"aria-label":"Open command palette","data-help":!0,"data-help-title":"Command palette","data-help-body":"Search and trigger any action instantly.","data-help-placement":"bottom",children:"Command"}),d.jsx("button",{className:`ghost-button ${v?"active":""}`,type:"button",onClick:l,"aria-pressed":v,"aria-label":"Toggle explain mode","data-help":!0,"data-help-title":"Explain mode","data-help-body":"Hover any control to see contextual guidance.","data-help-placement":"bottom",children:"Explain"}),d.jsx("button",{className:"ghost-button",onClick:i,type:"button","aria-label":"Refresh traces",title:"Refresh traces","data-help":!0,"data-help-title":"Refresh","data-help-body":"Reload traces from the data store.","data-help-placement":"bottom",children:"Refresh"}),d.jsx("button",{className:"ghost-button",type:"button",onClick:u,"aria-label":"Copy live session link",title:"Copy live session link",children:"Share"}),d.jsx("button",{className:"ghost-button",type:"button",onClick:T,"aria-label":"Copy session handoff digest",title:"Copy session handoff digest",children:"Handoff"}),d.jsx("a",{className:"ghost-button",href:"/help.html",target:"_blank",rel:"noreferrer","data-help":!0,"data-help-title":"Help","data-help-body":"Open quick docs for first run, key flows, troubleshooting, and shortcuts.","data-help-placement":"bottom",children:"Help"}),null]})]})}function LA({insights:e,investigation:t,onSelectStep:n,onJumpToBottleneck:r,onJumpToError:i}){var h,m,g,p,S;if(!e)return null;const a=e.timing,s=e.ioWarnings??[],o=e.concurrency,l=e.retryPatterns,u=e.costByTool??{},c=e.costByModel??{},f=((h=t==null?void 0:t.hypotheses)==null?void 0:h.slice(0,2))??[];return d.jsxs("section",{className:"insight-strip","data-help":!0,"data-help-indicator":!0,"data-tour":"insights","data-help-title":"Run insights","data-help-body":"Fast diagnostics for latency, cost, errors, and concurrency. Click chips to jump into the trace.","data-help-placement":"bottom",children:[d.jsxs("div",{className:"insight-block","data-help":!0,"data-help-title":"Top latency","data-help-body":"Largest steps by duration; jump straight to the slowest.","data-help-placement":"bottom",children:[d.jsx("span",{className:"insight-label",children:"Top latency"}),d.jsxs("div",{className:"insight-items",children:[e.topLatencySteps.map(v=>d.jsxs("button",{className:"insight-chip",type:"button",title:`Jump to ${v.name}`,onClick:()=>n==null?void 0:n(v.stepId),children:[v.name," (",v.durationMs,"ms)"]},v.stepId)),e.topLatencySteps.length>0?d.jsx("button",{className:"insight-chip",type:"button",onClick:r,title:"Jump to longest step",children:"Jump to bottleneck"}):null]})]}),d.jsxs("div",{className:"insight-block","data-help":!0,"data-help-title":"Cost by type","data-help-body":"Aggregated spend by step class.","data-help-placement":"bottom",children:[d.jsx("span",{className:"insight-label",children:"Cost by type"}),d.jsx("div",{className:"insight-items",children:Object.entries(e.costByType).map(([v,y])=>d.jsxs("span",{className:"insight-chip",title:`Total cost for ${v}`,children:[v,": $",y.toFixed(3)]},v))})]}),Object.keys(u).length?d.jsxs("div",{className:"insight-block","data-help":!0,"data-help-title":"Cost by tool","data-help-body":"Top tools by total spend.","data-help-placement":"bottom",children:[d.jsx("span",{className:"insight-label",children:"Cost by tool"}),d.jsx("div",{className:"insight-items",children:Object.entries(u).sort((v,y)=>y[1]-v[1]).slice(0,3).map(([v,y])=>d.jsxs("span",{className:"insight-chip",title:`Total cost for ${v}`,children:[v,": $",y.toFixed(3)]},v))})]}):null,d.jsxs("div",{className:"insight-block","data-help":!0,"data-help-title":"Errors & retries","data-help-body":"Instant visibility into failed or retried steps.","data-help-placement":"bottom",children:[d.jsx("span",{className:"insight-label",children:"Errors / retries"}),d.jsxs("div",{className:"insight-items",children:[d.jsxs("span",{className:"insight-chip",children:["Errors: ",e.errors]}),d.jsxs("span",{className:"insight-chip",children:["Retries: ",e.retries]}),e.errors>0?d.jsx("button",{className:"insight-chip",type:"button",onClick:i,title:"Jump to first error",children:"Jump to first error"}):null,(m=l==null?void 0:l.topRetries)!=null&&m.length?d.jsxs("span",{className:"insight-chip",title:`Retry rate ${(l.retryRate*100).toFixed(1)}%`,children:["Top retries: ",l.topRetries.length]}):null]})]}),d.jsxs("div",{className:"insight-block","data-help":!0,"data-help-title":"Wall vs work","data-help-body":"Wall time vs summed work to show parallelism.","data-help-placement":"bottom",children:[d.jsx("span",{className:"insight-label",children:"Wall vs work"}),d.jsxs("div",{className:"insight-items",children:[d.jsxs("span",{className:"insight-chip",title:"Wall clock duration",children:["Wall: ",e.wallTimeMs,"ms"]}),d.jsxs("span",{className:"insight-chip",title:"Sum of step durations",children:["Work: ",e.workTimeMs,"ms"]}),e.criticalPathMs!=null?d.jsxs("span",{className:"insight-chip",title:"Longest parent-child chain",children:["Critical: ",e.criticalPathMs,"ms"]}):null]})]}),d.jsxs("div",{className:"insight-block","data-help":!0,"data-help-title":"Health","data-help-body":"Timing and I/O anomalies detected in the trace.","data-help-placement":"bottom",children:[d.jsx("span",{className:"insight-label",children:"Health"}),d.jsxs("div",{className:"insight-items",children:[a!=null&&a.degraded?d.jsx("span",{className:"insight-chip insight-warning",title:a.issues.join(" "),children:"Timing degraded"}):d.jsx("span",{className:"insight-chip",children:"Timing OK"}),s.length>0?d.jsxs("span",{className:"insight-chip insight-warning",title:s.map(v=>v.message).join(" "),children:["IO warnings: ",s.length]}):d.jsx("span",{className:"insight-chip",children:"IO OK"})]})]}),f.length?d.jsxs("div",{className:"insight-block","data-help":!0,"data-help-title":"Investigator","data-help-body":"Automated root-cause hypotheses ranked by severity and confidence.","data-help-placement":"bottom",children:[d.jsx("span",{className:"insight-label",children:"Investigator"}),d.jsxs("div",{className:"insight-items",children:[f.map(v=>d.jsxs("span",{className:"insight-chip",title:v.summary,children:[v.title," (",Math.round(v.confidence*100),"%)"]},v.id)),(p=(g=f[0])==null?void 0:g.evidenceStepIds)!=null&&p[0]?d.jsx("button",{className:"insight-chip",type:"button",onClick:()=>n==null?void 0:n(f[0].evidenceStepIds[0]),children:"Jump to evidence"}):null]})]}):null,(S=o==null?void 0:o.buckets)!=null&&S.length?d.jsxs("div",{className:"insight-block","data-help":!0,"data-help-title":"Parallelism","data-help-body":"How many steps ran concurrently over time.","data-help-placement":"bottom",children:[d.jsx("span",{className:"insight-label",children:"Parallelism"}),d.jsx("div",{className:"insight-items",children:d.jsx("div",{className:"insight-heatmap",title:`Peak concurrency: ${o.peak}`,children:o.buckets.map((v,y)=>d.jsx("span",{className:"heatmap-bar",style:{height:`${Math.max(20,v.active/Math.max(1,o.peak)*48)}px`},title:`Bucket ${y+1}: ${v.active} active`},`${v.startMs}-${v.endMs}`))})})]}):null,Object.keys(c).length?d.jsxs("div",{className:"insight-block","data-help":!0,"data-help-title":"Model cost","data-help-body":"Spend by model family.","data-help-placement":"bottom",children:[d.jsx("span",{className:"insight-label",children:"Model cost"}),d.jsx("div",{className:"insight-items",children:Object.entries(c).map(([v,y])=>d.jsxs("span",{className:"insight-chip",title:`Total cost for ${v}`,children:[v,": $",y.toFixed(3)]},v))})]}):null]})}const qA=["all","llm_call","tool_call","decision","handoff","guardrail"];function FA({query:e,typeFilter:t,onQueryChange:n,onTypeFilterChange:r}){return d.jsxs("div",{className:"search-bar",children:[d.jsx("input",{className:"search-input",placeholder:"Search steps, tools, previews...","aria-label":"Search steps",value:e,onChange:i=>n(i.target.value),"data-help":!0,"data-help-title":"Search","data-help-body":"Filter steps by name, tool, or payload preview. Great for fast recall.","data-help-placement":"bottom"}),d.jsx("select",{className:"search-select",value:t,"aria-label":"Filter by step type",onChange:i=>r(i.target.value),"data-help":!0,"data-help-title":"Type filter","data-help-body":"Narrow the timeline to a specific class of steps (LLM, tool, decision, handoff).","data-help-placement":"bottom",children:qA.map(i=>d.jsx("option",{value:i,children:i},i))})]})}function El(e,t,n){const r=Date.parse(e),i=n.map(c=>Date.parse(c.endedAt??c.startedAt)).filter(c=>Number.isFinite(c)),a=t?Date.parse(t):i.length?Math.max(...i):r,s=Math.max(1,a-r),o=n.map(c=>{const f=Math.max(0,Date.parse(c.startedAt)-r),h=Math.max(f,Date.parse(c.endedAt??c.startedAt)-r);return{stepId:c.id,startMs:f,endMs:h}}).sort((c,f)=>c.startMs-f.startMs||c.endMs-f.endMs),l=[],u=[];for(const c of o){let f=l.findIndex(h=>h<=c.startMs);f===-1?(f=l.length,l.push(c.endMs)):l[f]=c.endMs,u.push({stepId:c.stepId,startMs:c.startMs,endMs:c.endMs,lane:f,xPct:c.startMs/s*100,wPct:Math.max(.75,(c.endMs-c.startMs)/s*100)})}return{wallTimeMs:s,intervals:u,laneCount:l.length}}function VA(e){var g;const n=e.steps.map(p=>({stepId:p.id,name:p.name,durationMs:p.durationMs??0})).sort((p,S)=>S.durationMs-p.durationMs).slice(0,3),r={},i={};for(const p of e.steps)((g=p.metrics)==null?void 0:g.costUsd)!=null&&(r[p.type]=(r[p.type]??0)+p.metrics.costUsd,p.type==="tool_call"&&(i[p.name]=(i[p.name]??0)+p.metrics.costUsd));const a=e.steps.filter(p=>p.status==="failed").length,s=e.steps.filter(p=>!!p.retryOfStepId).length,o=e.metadata.wallTimeMs,l=e.metadata.workTimeMs??e.steps.reduce((p,S)=>p+(S.durationMs??0),0),u=BA(e),c=zA(e.steps),f=UA(e.steps),h=GA(e),m=HA(e.steps);return{topLatencySteps:n,costByType:r,costByTool:i,costByModel:{[e.metadata.modelId]:e.metadata.totalCostUsd??0},errors:a,retries:s,wallTimeMs:o,workTimeMs:l,timing:u,ioWarnings:c,criticalPathMs:f,concurrency:h,retryPatterns:m}}function $A(e){var n;const t=(n=e.metrics)==null?void 0:n.costUsd;return t==null?null:`$${t.toFixed(3)}`}function En(e){if(!e)return null;const t=Date.parse(e);return Number.isNaN(t)?null:t}function BA(e){const t=En(e.startedAt),n=En(e.endedAt??void 0),r=[],i=[],a=[];return t==null&&a.push("Trace start time missing or invalid."),e.steps.forEach(s=>{const o=En(s.startedAt),l=En(s.endedAt??s.startedAt);if(o==null||l==null){r.push(s.id);return}if(l<o){i.push(s.id);return}t!=null&&o<t&&i.push(s.id),n!=null&&l>n&&i.push(s.id)}),r.length&&a.push(`Missing timestamps on ${r.length} steps.`),i.length&&a.push(`Timestamp skew detected on ${i.length} steps.`),{degraded:!!(r.length||i.length||t==null),issues:a,missingStepIds:r,skewedStepIds:i}}function zA(e){const t=new Map;e.forEach(a=>{a.type==="tool_call"&&a.toolCallId&&t.set(a.toolCallId,a)});const n=new Set,r=new Set,i=[];return e.forEach(a=>{a.type!=="llm_call"||!a.io||((a.io.emittedToolCallIds??[]).forEach(s=>{n.add(s),t.has(s)||i.push({kind:"missing_tool_step",message:`Emitted toolCallId ${s} has no tool step.`,stepId:a.id,toolCallId:s})}),(a.io.consumedToolCallIds??[]).forEach(s=>{r.add(s),t.has(s)||i.push({kind:"missing_tool_step",message:`Consumed toolCallId ${s} has no tool step.`,stepId:a.id,toolCallId:s}),n.has(s)||i.push({kind:"consume_without_emit",message:`Consumed toolCallId ${s} without emission.`,stepId:a.id,toolCallId:s})}))}),t.forEach((a,s)=>{n.has(s)||i.push({kind:"unemitted_tool",message:`Tool step ${a.id} has toolCallId ${s} never emitted.`,stepId:a.id,toolCallId:s}),r.has(s)||i.push({kind:"unconsumed_tool",message:`Tool step ${a.id} has toolCallId ${s} never consumed.`,stepId:a.id,toolCallId:s})}),i}function UA(e){const t=new Map,n=new Map,r=[];e.forEach(s=>{if(t.set(s.id,s.durationMs??0),s.parentStepId){const o=n.get(s.parentStepId)??[];o.push(s.id),n.set(s.parentStepId,o)}else r.push(s.id)});const i=new Map,a=s=>{if(i.has(s))return i.get(s)??0;const l=(n.get(s)??[]).reduce((c,f)=>Math.max(c,a(f)),0),u=(t.get(s)??0)+l;return i.set(s,u),u};return r.length?Math.max(...r.map(s=>a(s))):0}function GA(e){const t=En(e.startedAt);if(t==null)return{buckets:[],peak:0};const n=En(e.endedAt??void 0)??Math.max(...e.steps.map(l=>En(l.endedAt??l.startedAt)??t),t),r=Math.max(1,n-t),i=12,a=Math.max(1,Math.floor(r/i)),s=[];let o=0;for(let l=0;l<i;l+=1){const u=t+l*a,c=u+a;let f=0;e.steps.forEach(h=>{const m=En(h.startedAt),g=En(h.endedAt??h.startedAt);m==null||g==null||g>=u&&m<=c&&(f+=1)}),o=Math.max(o,f),s.push({startMs:l*a,endMs:(l+1)*a,active:f})}return{buckets:s,peak:o}}function HA(e){const t={};e.forEach(i=>{i.retryOfStepId&&(t[i.retryOfStepId]=(t[i.retryOfStepId]??0)+1)});const n=Object.values(t).reduce((i,a)=>i+a,0),r=Object.entries(t).sort((i,a)=>a[1]-i[1]).slice(0,3);return{totalRetries:n,retryRate:e.length?n/e.length:0,topRetries:r.map(([i,a])=>({stepId:i,count:a}))}}const KA={llm_call:{label:"LLM",icon:"LLM",description:"Model call"},tool_call:{label:"TOOL",icon:"TOOL",description:"Tool call"},decision:{label:"DEC",icon:"DEC",description:"Decision"},handoff:{label:"HAND",icon:"HAND",description:"Handoff"},guardrail:{label:"GUARD",icon:"GUARD",description:"Guardrail"}};function WA(e){return KA[e]}function YA({type:e,size:t="sm",showLabel:n=!1}){const r=WA(e);return d.jsxs("span",{className:`step-badge step-badge-${e} step-badge-${t}`,title:r.description,children:[d.jsx("span",{className:"step-badge-icon",children:r.icon}),n?d.jsx("span",{className:"step-badge-label",children:r.label}):null]})}function sE({step:e,interval:t,playbackState:n,selected:r,onSelect:i,variant:a="base",diffStatus:s,disabled:o=!1,laneHeight:l=140}){var _,C,E,T,j,N;const u=$A(e),c=((_=e.preview)==null?void 0:_.subtitle)??((C=e.preview)==null?void 0:C.title)??"",f=((E=e.preview)==null?void 0:E.outputPreview)??((T=e.preview)==null?void 0:T.inputPreview)??"",h=s?`step-diff-${s}`:"",m=a==="ghost"?"step-ghost":"",g=t.wPct<8?"step-compact":"",p=e.type.replace("_"," ").toUpperCase(),S=((j=e.metrics)==null?void 0:j.tokensTotal)!=null?`${e.metrics.tokensTotal} tokens`:null,v=e.durationMs!=null?`${e.durationMs}ms`:null,y=[S,v,u].filter(Boolean).join("  "),w=`Click to inspect inputs/outputs and replay from this moment.${y?` ${y}.`:""}`;return d.jsxs("button",{type:"button",className:`step-card step-${e.type} step-${n} ${r?"step-selected":""} ${h} ${m} ${g}`,"data-step-id":e.id,"aria-pressed":r,"aria-hidden":a==="ghost",disabled:o,"data-help":!0,"data-help-title":`${e.name}  ${p}`,"data-help-body":w,"data-help-placement":"top",style:{left:`${t.xPct}%`,width:`${t.wPct}%`,top:`${t.lane*l}px`},onClick:()=>{o||i(e.id)},children:[d.jsxs("div",{className:"step-card-header",children:[d.jsxs("div",{className:"step-title-group",children:[d.jsx(YA,{type:e.type}),d.jsx("span",{className:"step-title",children:e.name})]}),d.jsx("span",{className:`status-pill status-${e.status}`,children:e.status})]}),c?d.jsx("div",{className:"step-subtitle",children:c}):null,d.jsxs("div",{className:"step-metrics",children:[((N=e.metrics)==null?void 0:N.tokensTotal)!=null?d.jsxs("span",{children:[e.metrics.tokensTotal," tok"]}):null,e.durationMs!=null?d.jsxs("span",{children:[e.durationMs,"ms"]}):null,u?d.jsx("span",{children:u}):null]}),f?d.jsx("div",{className:"step-preview",children:f}):null]})}function oE(e,t){return t<e.startMs?"future":t>e.endMs?"past":"active"}const Sa={type:{order:[],hidden:[]},status:{order:[],hidden:[]},parent:{order:[],hidden:[]}};function gv(e,t){return t==="type"?e.type:t==="status"?e.status:e.parentStepId??"root"}function QA(e,t){const n=new Set;return e.forEach(r=>n.add(gv(r,t))),Array.from(n).sort((r,i)=>r.localeCompare(i))}function K0(e,t,n){const r=new Set(e),i=[...t.filter(s=>r.has(s))];e.forEach(s=>{i.includes(s)||i.push(s)});const a=Array.from(new Set(n.filter(s=>r.has(s))));return{order:i,hidden:a}}const JA=140,XA=132,ZA=96,W0={llm_call:1,tool_call:2,decision:3,handoff:4,guardrail:5};function lE(e){return[...e].sort((t,n)=>(W0[t.type]??9)-(W0[n.type]??9))}function eI(e,t,n,r,i){const a=new Map;t.forEach(h=>{var g;const m=gv(h,n);a.has(m)||a.set(m,[]),(g=a.get(m))==null||g.push(h)});const s=Array.from(a.keys()),o=[...r.filter(h=>s.includes(h))];s.forEach(h=>{o.includes(h)||o.push(h)});const l=o.filter(h=>!i.includes(h)),u=new Map;let c=0,f=0;return l.forEach(h=>{const m=a.get(h)??[],g=El(e.startedAt,e.endedAt,m);g.intervals.forEach(p=>{u.set(p.stepId,{...p,lane:p.lane+c})}),c+=Math.max(1,g.laneCount)}),f=Math.max(1,c),{intervalsByStepId:u,laneCount:f,visibleGroups:l}}function tI({trace:e,steps:t,selectedStepId:n,onSelectStep:r,playheadPct:i,playheadMs:a,windowRange:s,ghostTrace:o,diff:l,laneStrategy:u="type",laneGroupsOrder:c=[],hiddenLaneGroups:f=[],laneHeight:h=JA,cardHeight:m=XA,compactHeight:g=ZA}){const{intervalsByStepId:p,laneCount:S}=eI(e,t,u,c,f),v=Array.from(p.values()),y=new Map(v.map(R=>[R.stepId,R])),w=lE(t),_=e.metadata.wallTimeMs||1,C=new Set((l==null?void 0:l.removedSteps)??[]),E=new Set((l==null?void 0:l.changedSteps)??[]),T=new Set(((l==null?void 0:l.changedPairs)??[]).map(R=>R.rightId)),j=new Set((l==null?void 0:l.addedSteps)??[]);let N=v;if(s){const R=s.endMs-s.startMs,O=Math.max(1e3,R*.15),F=Math.max(0,s.startMs-O),X=s.endMs+O;if(N=v.filter($=>$.endMs>=F&&$.startMs<=X),n&&!N.some($=>$.stepId===n)){const $=y.get(n);$&&(N=[...N,$])}}const P=new Set(N.map(R=>R.stepId));return d.jsx("div",{className:"timeline",style:{"--step-card-height":`${m}px`,"--step-compact-height":`${g}px`},children:d.jsxs("div",{className:"timeline-grid",style:{height:`${S*h}px`},"data-help":!0,"data-help-title":"Timeline lanes","data-help-body":"Each lane stacks overlapping steps; width reflects duration.","data-help-placement":"top",children:[d.jsx("div",{className:"playback-cursor",style:{left:`${i}%`}}),w.filter(R=>P.has(R.id)).filter(R=>!f.includes(gv(R,u))).map(R=>{const O=y.get(R.id);if(!O)return null;const F=oE(O,a);return d.jsx(sE,{step:R,interval:O,playbackState:F,selected:n===R.id,diffStatus:C.has(R.id)?"removed":E.has(R.id)?"changed":null,laneHeight:h,onSelect:r},R.id)}),o?d.jsx(nI,{ghostTrace:o,baseWallTimeMs:_,playheadMs:a,windowRange:s,diffAdded:j,diffChanged:T,laneHeight:h}):null]})})}function nI({ghostTrace:e,baseWallTimeMs:t,playheadMs:n,windowRange:r,diffAdded:i,diffChanged:a,laneHeight:s}){const{intervals:o,laneCount:l}=El(e.startedAt,e.endedAt,e.steps),u=new Map(o.map(p=>[p.stepId,p])),c=e.metadata.wallTimeMs||1,f=n/t*c;let h=o;if(r){const p=r.endMs-r.startMs,S=Math.max(1e3,p*.15),v=c/t,y=Math.max(0,(r.startMs-S)*v),w=Math.min(c,(r.endMs+S)*v);h=o.filter(_=>_.endMs>=y&&_.startMs<=w)}const m=new Set(h.map(p=>p.stepId)),g=lE(e.steps);return d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"ghost-lanes",style:{height:`${l*s}px`}}),g.filter(p=>m.has(p.id)).map(p=>{const S=u.get(p.id);if(!S)return null;const v=oE(S,f),y=i.has(p.id)?"added":a.has(p.id)?"changed":null;return d.jsx(sE,{step:p,interval:S,playbackState:v,selected:!1,diffStatus:y,variant:"ghost",disabled:!0,laneHeight:s,onSelect:()=>{}},`ghost-${p.id}`)})]})}function rI({trace:e,steps:t,selectedStepId:n,onSelectStep:r,playheadMs:i,windowRange:a,timing:s,ghostTrace:o,diff:l,laneStrategy:u,laneGroupsOrder:c,hiddenLaneGroups:f,onLaneStrategyChange:h,onToggleLaneGroupVisibility:m,onMoveLaneGroup:g}){const p=e.metadata.wallTimeMs||1,S=Math.min(100,Math.max(0,i/p*100)),v=c.filter(y=>!f.includes(y)).length;return d.jsxs("section",{className:"cinema-mode","aria-label":"Cinema mode",children:[s!=null&&s.degraded?d.jsxs("div",{className:"timing-banner",title:s.issues.join(" "),children:["Timing degraded: ",s.issues[0]??"Check timestamps."]}):null,d.jsxs("div",{className:"timeline-studio-panel","data-help":!0,"data-help-title":"Timeline studio","data-help-body":"Regroup lanes by type/status/parent, hide noisy groups, and reorder emphasis.",children:[d.jsxs("label",{className:"timeline-studio-strategy",children:["Lane strategy",d.jsxs("select",{value:u,onChange:y=>h(y.target.value),children:[d.jsx("option",{value:"type",children:"Type"}),d.jsx("option",{value:"status",children:"Status"}),d.jsx("option",{value:"parent",children:"Parent branch"})]})]}),d.jsxs("div",{className:"timeline-studio-summary",children:[v,"/",c.length," groups visible"]}),d.jsx("div",{className:"timeline-studio-groups",children:c.map((y,w)=>{const _=f.includes(y);return d.jsxs("div",{className:`timeline-studio-group ${_?"is-hidden":""}`,children:[d.jsx("button",{type:"button",className:"ghost-button",onClick:()=>m(y),children:_?"Show":"Hide"}),d.jsx("span",{className:"timeline-studio-group-name",children:y}),d.jsx("button",{type:"button",className:"ghost-button",onClick:()=>g(y,"up"),disabled:w===0,children:"Up"}),d.jsx("button",{type:"button",className:"ghost-button",onClick:()=>g(y,"down"),disabled:w===c.length-1,children:"Down"})]},y)})})]}),d.jsx(tI,{trace:e,steps:t,selectedStepId:n,onSelectStep:r,playheadPct:S,playheadMs:i,windowRange:a,ghostTrace:o,diff:l,laneStrategy:u,laneGroupsOrder:c,hiddenLaneGroups:f})]})}const iI=[.5,1,1.5,2,4];function Y0({playheadMs:e,wallTimeMs:t,isPlaying:n,speed:r,onToggle:i,onScrub:a,onSpeedChange:s}){const o=l=>{a(Number(l.target.value))};return d.jsxs("div",{className:"playback-controls",children:[d.jsx("button",{className:"ghost-button",type:"button",onClick:i,"aria-label":n?"Pause playback":"Play playback","data-help":!0,"data-help-title":"Playhead","data-help-body":"Start or pause the run to experience timing as it unfolded.","data-help-placement":"bottom",children:n?"Pause":"Play"}),d.jsx("input",{className:"playback-slider",type:"range",min:0,max:t,value:e,"aria-label":"Playback position",onChange:o,"data-help":!0,"data-help-title":"Scrub timeline","data-help-body":"Drag to jump to any moment in the run.","data-help-placement":"bottom"}),d.jsx("select",{className:"playback-speed",value:r,"aria-label":"Playback speed",onChange:l=>s(Number(l.target.value)),"data-help":!0,"data-help-title":"Speed","data-help-body":"Slow down to inspect or speed up to skim.","data-help-placement":"bottom",children:iI.map(l=>d.jsxs("option",{value:l,children:[l,"x"]},l))})]})}function aI(e,t,n,r=60){const{wallTimeMs:i,intervals:a}=El(e,t,n),s=new Array(r).fill(0);if(!i)return{buckets:s,wallTimeMs:0};const o=i/r;return!Number.isFinite(o)||o<=0?{buckets:s,wallTimeMs:i}:(a.forEach(l=>{const u=Math.max(0,Math.floor(l.startMs/o)),c=Math.min(r-1,Math.floor(l.endMs/o));for(let f=u;f<=c;f+=1)s[f]+=1}),{buckets:s,wallTimeMs:i})}function Zm(e,t){const n=new Blob([JSON.stringify(t,null,2)],{type:"application/json"}),r=URL.createObjectURL(n),i=document.createElement("a");i.href=r,i.download=e,document.body.appendChild(i),i.click(),i.remove(),URL.revokeObjectURL(r)}function uE(e,t,n="text/plain"){const r=new Blob([t],{type:n}),i=URL.createObjectURL(r),a=document.createElement("a");a.href=i,a.download=e,document.body.appendChild(a),a.click(),a.remove(),URL.revokeObjectURL(i)}const _a=5e3,sI=32;function jt(e,t,n){return Math.min(n,Math.max(t,e))}function vi(e,t){const n=new Set;return e.forEach(r=>{n.add(jt(Math.round(r),0,t))}),Array.from(n).sort((r,i)=>r-i).slice(0,sI)}function oI(e,t){if(!e)return{bookmarksMs:[],clipStartMs:null,clipEndMs:null,segments:[]};try{const n=JSON.parse(e),r=vi(Array.isArray(n.bookmarksMs)?n.bookmarksMs:[],t),i=typeof n.clipStartMs=="number"?jt(n.clipStartMs,0,t):null,a=typeof n.clipEndMs=="number"?jt(n.clipEndMs,0,t):null,s=Array.isArray(n.segments)?n.segments.filter(o=>typeof(o==null?void 0:o.id)=="string"&&typeof(o==null?void 0:o.startMs)=="number"&&typeof(o==null?void 0:o.endMs)=="number"&&typeof(o==null?void 0:o.label)=="string").map(o=>({...o,startMs:jt(o.startMs,0,t),endMs:jt(o.endMs,0,t)})):[];return{bookmarksMs:r,clipStartMs:i,clipEndMs:i!=null&&a!=null&&a<i?i:a,segments:s}}catch{return{bookmarksMs:[],clipStartMs:null,clipEndMs:null,segments:[]}}}function Q0(e,t){const n=Date.parse(e);return Number.isNaN(n)?null:new Date(n+t).toISOString()}function lI({traceStart:e,traceEnd:t,steps:n,playheadMs:r,windowRange:i,windowed:a,spanMs:s,onSpanChange:o,onToggleWindowed:l,onScrub:u,persistenceKey:c,laneStrategy:f="type",visibleLaneGroups:h=[],remotePlayheads:m=[]}){const{buckets:g,wallTimeMs:p}=aI(e,t,n,64),S=Math.max(1,...g),v=jt(s,_a,Math.max(_a,p)),y=(i==null?void 0:i.startMs)??0,w=(i==null?void 0:i.endMs)??p,_=x.useMemo(()=>`agentDirector.timelineStudio.${c??e}`,[c,e]),[C,E]=x.useState([]),[T,j]=x.useState(null),[N,P]=x.useState(null),[R,O]=x.useState([]),[F,X]=x.useState("");x.useEffect(()=>{const G=oI(window.localStorage.getItem(_),p);E(G.bookmarksMs),j(G.clipStartMs),P(G.clipEndMs),O(G.segments)},[_,p]),x.useEffect(()=>{const G={bookmarksMs:vi(C,p),clipStartMs:T==null?null:jt(T,0,p),clipEndMs:N==null?null:jt(N,0,p),segments:R};window.localStorage.setItem(_,JSON.stringify(G))},[C,N,T,R,_,p]);const $=p?y/p*100:0,fe=p?(w-y)/p*100:100,ie=p?r/p*100:0,D=T!=null&&N!=null?Math.min(T,N):null,B=T!=null&&N!=null?Math.max(T,N):null,V=D!=null&&B!=null&&p?(B-D)/p*100:0,z=D!=null&&p?D/p*100:0,te=D!=null&&B!=null&&B>D,A=G=>{const le=G.currentTarget.getBoundingClientRect(),ne=(G.clientX-le.left)/le.width,Le=jt(Math.round(ne*p),0,p);u(Le)},J=G=>{if(G.key==="ArrowLeft"){G.preventDefault(),u(jt(r-Math.max(250,Math.round(p*.02)),0,p));return}if(G.key==="ArrowRight"){G.preventDefault(),u(jt(r+Math.max(250,Math.round(p*.02)),0,p));return}if(G.key==="Home"){G.preventDefault(),u(0);return}if(G.key==="End"){G.preventDefault(),u(p);return}(G.key===" "||G.key==="Enter")&&(G.preventDefault(),u(r))},se=()=>{E(G=>vi([...G,r],p))},U=G=>{if(C.length===0)return;const le=vi(C,p);if(G==="previous"){const Le=[...le].reverse().find(ue=>ue<r)??le[le.length-1];u(Le);return}const ne=le.find(Le=>Le>r)??le[0];u(ne)},me=()=>{const G=jt(r,0,p);j(G),N!=null&&N<G&&P(G)},Xe=()=>{const G=jt(r,0,p);P(G),T!=null&&T>G&&j(G)},ft=()=>{j(null),P(null)},Dt=()=>{if(!te||D==null||B==null)return;const G=F.trim()||`Scene ${R.length+1}`,le=`segment-${Math.random().toString(36).slice(2,9)}`;O(ne=>[...ne,{id:le,startMs:D,endMs:B,label:G}]),X("")},xn=G=>{O(le=>le.filter(ne=>ne.id!==G))},Un=()=>{if(!te||D==null||B==null)return;const G={type:"agent-director-clip",traceStart:e,traceEnd:t,clip:{startMs:D,endMs:B,startAt:Q0(e,D),endAt:Q0(e,B)},bookmarksMs:vi(C,p).filter(le=>le>=D&&le<=B),playheadMs:r,laneContext:{strategy:f,visibleGroups:h},segments:R.filter(le=>le.endMs>=D&&le.startMs<=B),exportedAt:new Date().toISOString()};Zm(`agent-director-clip-${D}-${B}.json`,G)};return d.jsxs("div",{className:"mini-timeline",children:[d.jsxs("div",{className:"mini-track",onClick:A,role:"slider",tabIndex:0,"aria-label":"Timeline density map","aria-valuemin":0,"aria-valuemax":p,"aria-valuenow":r,"aria-valuetext":`${r} milliseconds`,onKeyDown:J,"data-help":!0,"data-help-title":"Density map","data-help-body":"A compact view of activity density. Click to jump the playhead.","data-help-placement":"top",children:[d.jsx("div",{className:"mini-bars",children:g.map((G,le)=>d.jsx("span",{className:"mini-bar",style:{height:`${G/S*100}%`}},`bucket-${le}`))}),d.jsx("div",{className:"mini-window",style:{left:`${$}%`,width:`${fe}%`,opacity:a?1:.4}}),te?d.jsx("div",{className:"mini-clip-window",style:{left:`${z}%`,width:`${V}%`}}):null,d.jsx("div",{className:"mini-bookmark-markers","data-testid":"timeline-bookmark-markers","aria-hidden":"true",children:vi(C,p).map(G=>{const le=p?G/p*100:0;return d.jsx("button",{type:"button",className:"mini-bookmark-marker",style:{left:`${le}%`},onClick:ne=>{ne.stopPropagation(),u(G)},title:`Jump to bookmark at ${G}ms`,"aria-label":`Bookmark ${G} milliseconds`},`bookmark-${G}`)})}),d.jsx("div",{className:"mini-remote-markers","aria-hidden":"true",children:m.map((G,le)=>{const ne=p?G/p*100:0;return d.jsx("span",{className:"mini-remote-marker",style:{left:`${ne}%`}},`remote-${le}`)})}),d.jsx("div",{className:"mini-segments","aria-hidden":"true",children:R.map(G=>{const le=p?G.startMs/p*100:0,ne=p?(G.endMs-G.startMs)/p*100:0;return d.jsx("span",{className:"mini-segment-bar",style:{left:`${le}%`,width:`${Math.max(1,ne)}%`},title:G.label},G.id)})}),d.jsx("div",{className:"mini-playhead",style:{left:`${ie}%`}})]}),d.jsxs("div",{className:"mini-controls",children:[d.jsx("label",{className:"mini-label",children:"Zoom"}),d.jsx("input",{type:"range",min:_a,max:Math.max(_a,p),value:v,"aria-label":"Timeline zoom",onChange:G=>{l(!0),o(Number(G.target.value))},"data-help":!0,"data-help-title":"Zoom window","data-help-body":"Tighten the window to focus on hotspots.","data-help-placement":"top"}),d.jsx("button",{className:"ghost-button",type:"button",onClick:()=>l(!a),title:"Toggle windowed playback",children:a?"Full":"Window"}),d.jsx("button",{className:"ghost-button",type:"button",title:"Reset zoom",onClick:()=>{l(!0),o(Math.min(Math.max(p*.2,_a),6e4))},children:"Reset"}),d.jsx("button",{className:"ghost-button",type:"button",onClick:se,children:"Add bookmark"}),d.jsx("button",{className:"ghost-button",type:"button",onClick:()=>U("previous"),children:"Previous bookmark"}),d.jsx("button",{className:"ghost-button",type:"button",onClick:()=>U("next"),children:"Next bookmark"}),d.jsx("button",{className:"ghost-button",type:"button",onClick:me,children:"Set clip start"}),d.jsx("button",{className:"ghost-button",type:"button",onClick:Xe,children:"Set clip end"}),d.jsx("button",{className:"ghost-button",type:"button",onClick:ft,children:"Clear clip"}),d.jsx("input",{className:"search-input mini-segment-input",placeholder:"Segment label",value:F,onChange:G=>X(G.target.value),"aria-label":"Segment label"}),d.jsx("button",{className:"ghost-button",type:"button",onClick:Dt,disabled:!te,children:"Add segment"}),d.jsx("button",{className:"ghost-button",type:"button",onClick:Un,disabled:!te,children:"Export clip"})]}),R.length?d.jsx("div",{className:"mini-segment-list",children:R.map(G=>d.jsxs("div",{className:"mini-segment-item",children:[d.jsxs("span",{children:[G.label," (",G.startMs,"ms - ",G.endMs,"ms)"]}),d.jsx("button",{className:"ghost-button",type:"button",onClick:()=>xn(G.id),children:"Remove"})]},G.id))}):null]})}const uI=[{keys:"Space",action:"Play / pause"},{keys:" / ",action:"Step boundary back / forward"},{keys:"Shift +  / ",action:"Jump to start / end"},{keys:"F",action:"Toggle Flow mode"},{keys:"I",action:"Toggle Inspector"},{keys:"S",action:"Story mode"},{keys:"E",action:"Explain mode"},{keys:"T",action:"Start tour"},{keys:"Cmd/Ctrl + K",action:"Open command palette"},{keys:"?",action:"Show shortcuts"},{keys:"Esc",action:"Close modal / inspector"}];function cI({open:e,onClose:t}){const n=x.useRef(null);if(x.useEffect(()=>{var i;e&&((i=n.current)==null||i.focus())},[e]),!e)return null;const r=i=>{var l;if(i.key==="Escape"){i.preventDefault(),t();return}if(i.key!=="Tab")return;const a=Array.from(i.currentTarget.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'));if(a.length===0)return;const s=a.indexOf(document.activeElement),o=i.shiftKey?s<=0?a.length-1:s-1:(s+1)%a.length;(l=a[o])==null||l.focus(),i.preventDefault()};return d.jsx("div",{className:"modal-backdrop",role:"dialog","aria-modal":"true","aria-labelledby":"shortcuts-title",onKeyDown:r,children:d.jsxs("div",{className:"modal",tabIndex:-1,children:[d.jsxs("div",{className:"modal-header",children:[d.jsx("div",{className:"modal-title",id:"shortcuts-title",children:"Keyboard Shortcuts"}),d.jsx("button",{className:"ghost-button",type:"button",onClick:t,ref:n,"aria-label":"Close shortcuts",children:"Close"})]}),d.jsx("div",{className:"modal-body",children:uI.map(i=>d.jsxs("div",{className:"modal-row",children:[d.jsx("span",{className:"modal-keys",children:i.keys}),d.jsx("span",{className:"modal-action",children:i.action})]},i.keys))})]})})}const J0="agentDirector.palette.recent.v1",X0="agentDirector.palette.pinned.v1",dI=8,fI=12,hI=e=>e.trim().toLowerCase();function Z0(e){try{const t=JSON.parse(window.localStorage.getItem(e)??"[]");return Array.isArray(t)?t.filter(n=>typeof n=="string"):[]}catch{return[]}}function eb(e,t){window.localStorage.setItem(e,JSON.stringify(t))}function pI(e){const t=new Map;return e.forEach(n=>{var i;const r=n.section;t.has(r)||t.set(r,[]),(i=t.get(r))==null||i.push(n)}),t}function tb(e,t,n){var i;if(!e.length)return 0;let r=t;for(let a=0;a<e.length;a+=1)if(r=(r+n+e.length)%e.length,!((i=e[r])!=null&&i.disabled))return r;return t}function mI({open:e,onClose:t,actions:n}){var T,j;const[r,i]=x.useState(""),[a,s]=x.useState(0),[o,l]=x.useState([]),[u,c]=x.useState([]),f=x.useRef(null),h=x.useRef(null),m=x.useMemo(()=>{const N=hI(r);return N?n.filter(P=>[P.label,P.description,P.group,P.keys].filter(Boolean).join(" ").toLowerCase().includes(N)):n},[n,r]),g=x.useMemo(()=>{const N=new Map(m.map(F=>[F.id,F])),P=u.map(F=>N.get(F)).filter(F=>!!F).map(F=>({...F,section:"Pinned"})),R=o.map(F=>N.get(F)).filter(F=>!!F).filter(F=>!P.some(X=>X.id===F.id)).map(F=>({...F,section:"Recent"})),O=m.filter(F=>!P.some(X=>X.id===F.id)).filter(F=>!R.some(X=>X.id===F.id)).map(F=>({...F,section:F.group??"General"}));return[...P,...R,...O]},[m,u,o]),p=x.useMemo(()=>pI(g),[g]),S=x.useMemo(()=>n.filter(N=>(N.group??"").toLowerCase()==="macros"||N.id.startsWith("macro-")),[n]);if(x.useEffect(()=>{if(!e)return;i(""),s(0),l(Z0(J0)),c(Z0(X0));const N=window.setTimeout(()=>{var P;return(P=f.current)==null?void 0:P.focus()},0);return()=>window.clearTimeout(N)},[e]),x.useEffect(()=>{a>=g.length&&s(0)},[a,g.length]),!e)return null;const v=N=>{l(P=>{const R=[N,...P.filter(O=>O!==N)].slice(0,dI);return eb(J0,R),R})},y=N=>{N.disabled||(v(N.id),N.onTrigger(),t())},w=N=>{c(P=>{const R=P.includes(N)?P.filter(O=>O!==N):[N,...P].slice(0,fI);return eb(X0,R),R})},_=N=>{var P,R;if(N.key==="Escape"){N.preventDefault(),t();return}if(N.key==="ArrowDown"){N.preventDefault(),s(O=>tb(g,O,1));return}if(N.key==="ArrowUp"){N.preventDefault(),s(O=>tb(g,O,-1));return}if(N.key==="Enter"){N.preventDefault();const O=g[a];O&&y(O);return}if(N.key==="Tab"){const O=Array.from(((P=h.current)==null?void 0:P.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'))??[]);if(!O.length)return;const F=O.indexOf(document.activeElement),X=N.shiftKey?F<=0?O.length-1:F-1:(F+1)%O.length;(R=O[X])==null||R.focus(),N.preventDefault()}},C=(T=g[a])!=null&&T.id?`palette-option-${(j=g[a])==null?void 0:j.id}`:void 0;let E=-1;return d.jsx("div",{className:"modal-backdrop palette-backdrop",role:"dialog","aria-modal":"true","aria-label":"Command palette",onKeyDown:_,onMouseDown:N=>{N.target===N.currentTarget&&t()},children:d.jsxs("div",{className:"palette",ref:h,children:[d.jsxs("div",{className:"palette-header",children:[d.jsxs("div",{children:[d.jsx("div",{className:"palette-title",children:"Command palette"}),d.jsx("div",{className:"palette-subtitle",children:"Search actions, modes, and playbook steps."})]}),d.jsx("button",{className:"ghost-button",type:"button",onClick:t,"aria-label":"Close command palette",children:"Close"})]}),d.jsx("input",{ref:f,className:"palette-input",value:r,onChange:N=>i(N.target.value),placeholder:"Type to filter actions","aria-label":"Search commands",role:"combobox","aria-expanded":"true","aria-controls":"command-palette-list","aria-activedescendant":C,"aria-autocomplete":"list"}),!r.trim()&&S.length>0?d.jsxs("div",{className:"palette-macros",children:[d.jsx("div",{className:"palette-group-title",children:"Quick macros"}),d.jsx("div",{className:"palette-macro-list",children:S.slice(0,3).map(N=>d.jsx("button",{className:"ghost-button palette-macro-item",type:"button",onClick:()=>y(N),children:N.label},N.id))})]}):null,d.jsxs("div",{className:"palette-list",role:"listbox",id:"command-palette-list",children:[g.length===0?d.jsx("div",{className:"palette-empty",children:"No matching commands."}):null,Array.from(p.entries()).map(([N,P])=>d.jsxs("div",{className:"palette-group",children:[d.jsx("div",{className:"palette-group-title",children:N}),d.jsx("div",{className:"palette-group-list",children:P.map(R=>{E+=1;const O=E===a,F=u.includes(R.id);return d.jsxs("button",{id:`palette-option-${R.id}`,className:`palette-item ${O?"active":""}`,type:"button",role:"option","aria-selected":O,onMouseEnter:()=>s(E),onClick:()=>y(R),disabled:R.disabled,children:[d.jsxs("div",{className:"palette-item-main",children:[d.jsx("div",{className:"palette-item-title",children:R.label}),R.description?d.jsx("div",{className:"palette-item-description",children:R.description}):null]}),d.jsxs("div",{className:"palette-item-trailing",children:[R.keys?d.jsx("div",{className:"palette-item-keys",children:R.keys}):null,d.jsx("span",{className:`palette-pin ${F?"active":""}`,role:"button",tabIndex:0,onClick:X=>{X.stopPropagation(),w(R.id)},onKeyDown:X=>{X.key!=="Enter"&&X.key!==" "||(X.preventDefault(),X.stopPropagation(),w(R.id))},"aria-label":F?`Unpin ${R.label}`:`Pin ${R.label}`,title:F?"Unpin command":"Pin command",children:F?"":""})]})]},R.id)})})]},N))]})]})})}function gI(e){return e.length?e.reduce((t,n)=>(n.durationMs??0)>(t.durationMs??0)?n:t,e[0]):null}function vI({trace:e,mode:t,playheadMs:n,selectedStepId:r,compareTrace:i,collapsed:a,onToggleCollapsed:s,onModeChange:o,onSelectStep:l,onJumpToBottleneck:u,onReplay:c,onStartTour:f,priorityQueue:h=[]}){var R;const m=e.steps??[],g=gI(m),p=r??(g==null?void 0:g.id)??((R=m[0])==null?void 0:R.id)??null,S=t==="cinema"||n>0,v=!!r,y=!!i,w=[S,v,y].filter(Boolean).length,_=[S,v,y].findIndex(O=>!O),C=_===-1?2:_,E=[0,1,2].map(O=>[S,v,y][O]?"done":O===C?"active":"next"),T=[{id:"observe",title:"Act I: Observe",summary:"Scrub the timeline to feel the pacing, bottlenecks, and tool choreography.",status:E[0],actionLabel:"Enter cinema",action:()=>o("cinema"),tasks:[{label:"Scrub the timeline",done:n>0},{label:"Stay in Cinema mode",done:t==="cinema"}]},{id:"inspect",title:"Act II: Inspect",summary:"Open the most expensive or failed step and read the payload with context.",status:E[1],actionLabel:g?"Jump to bottleneck":"Select first step",action:()=>{if(r){o("cinema");return}if(g){u();return}p&&(l(p),o("cinema"))},disabled:!p,tasks:[{label:"Open the Inspector",done:!!r},{label:"Jump to the bottleneck",done:!!(g&&r===g.id)}]},{id:"direct",title:"Act III: Direct",summary:"Replay from a decisive step, then compare flows and diffs side-by-side.",status:E[2],actionLabel:i?"Open compare":"Replay from step",action:()=>{if(i){o("compare");return}p&&c(p)},disabled:!p,tasks:[{label:"Replay from a step",done:!!i},{label:"Compare runs side-by-side",done:!!(i&&t==="compare")}]}],j=T[C],P=h.filter(O=>!O.done)[0];return a?d.jsxs("section",{className:"journey-panel journey-collapsed","aria-label":"Director journey","data-help":!0,"data-help-indicator":!0,"data-tour":"journey","data-help-title":"Director journey","data-help-body":"A guided path from observation to replay. Use it to show newcomers what to do first.","data-help-placement":"bottom",children:[d.jsxs("div",{className:"journey-collapsed-main",children:[d.jsx("div",{className:"journey-eyebrow",children:"Director journey"}),d.jsx("div",{className:"journey-collapsed-title",children:"From observe to direct"})]}),d.jsxs("div",{className:"journey-collapsed-actions",children:[d.jsxs("span",{className:"journey-progress-text",children:[w,"/3 complete"]}),P?d.jsxs("span",{className:`journey-priority-chip severity-${P.severity}`,children:["Next priority: ",P.title]}):null,j?d.jsxs("button",{className:"primary-button journey-next",type:"button",onClick:j.action,disabled:j.disabled,children:["Next: ",j.actionLabel]}):null,f?d.jsx("button",{className:"ghost-button",type:"button",onClick:f,children:"Tour"}):null,d.jsx("button",{className:"primary-button journey-expand",type:"button",onClick:s,children:"Expand"})]})]}):d.jsxs("section",{className:"journey-panel","aria-label":"Director journey","data-help":!0,"data-help-indicator":!0,"data-tour":"journey","data-help-title":"Director journey","data-help-body":"A three-act flow that teaches the story: observe, inspect, direct. Each act jumps to the right place.","data-help-placement":"bottom",children:[d.jsxs("div",{className:"journey-head",children:[d.jsxs("div",{children:[d.jsx("div",{className:"journey-eyebrow",children:"Director journey"}),d.jsx("h2",{className:"journey-title",children:"Cut a perfect take in three acts."}),d.jsx("p",{className:"journey-subtitle",children:"Trace the performance, interrogate the moment, then direct a better run."})]}),d.jsxs("div",{className:"journey-head-actions",children:[f?d.jsx("button",{className:"ghost-button",type:"button",onClick:f,children:"Start tour"}):null,d.jsx("button",{className:"ghost-button",type:"button",onClick:s,children:"Collapse"})]})]}),d.jsx("div",{className:"journey-track",children:T.map((O,F)=>{var X;return d.jsxs("div",{className:"journey-card","data-status":O.status,children:[d.jsxs("div",{className:"journey-card-top",children:[d.jsxs("span",{className:"journey-index",children:["0",F+1]}),d.jsx("span",{className:"journey-status",children:O.status})]}),d.jsx("h3",{className:"journey-card-title",children:O.title}),d.jsx("p",{className:"journey-card-body",children:O.summary}),(X=O.tasks)!=null&&X.length?d.jsx("ul",{className:"journey-tasks",children:O.tasks.map($=>d.jsxs("li",{className:`journey-task ${$.done?"done":""}`,children:[d.jsx("span",{className:"journey-task-icon","aria-hidden":"true",children:$.done?"":""}),d.jsx("span",{children:$.label})]},$.label))}):null,d.jsx("button",{className:"primary-button journey-action",type:"button",onClick:O.action,disabled:O.disabled,children:O.actionLabel})]},O.id)})}),d.jsxs("div",{className:"journey-footer",children:[d.jsxs("div",{children:[d.jsx("div",{className:"journey-progress-label",children:"Progress"}),d.jsx("div",{className:"journey-progress",children:d.jsx("span",{className:"journey-progress-bar",style:{width:`${w/3*100}%`}})})]}),d.jsx("div",{className:"journey-footnote",children:"Tip: Use Flow to spot fan-out, Compare to validate your changes."})]}),h.length?d.jsxs("div",{className:"journey-priority-queue",children:[d.jsxs("div",{className:"journey-priority-head",children:[d.jsx("div",{className:"journey-progress-label",children:"Priority queue"}),d.jsxs("span",{children:[h.filter(O=>O.done).length,"/",h.length," resolved"]})]}),d.jsx("div",{className:"journey-priority-list",children:h.map(O=>d.jsxs("article",{className:`journey-priority-item ${O.done?"done":""}`,children:[d.jsxs("div",{className:"journey-priority-main",children:[d.jsx("span",{className:`journey-priority-chip severity-${O.severity}`,children:O.severity}),d.jsxs("div",{children:[d.jsx("div",{className:"journey-priority-title",children:O.title}),d.jsx("div",{className:"journey-priority-body",children:O.detail})]})]}),d.jsx("button",{className:"ghost-button",type:"button",onClick:O.onAction,disabled:O.done,children:O.done?"Resolved":O.actionLabel})]},O.id))})]}):null]})}const yI=[],bI=[],xI=[],wI={};function SI(e){return e.length?e.reduce((t,n)=>(n.durationMs??0)>(t.durationMs??0)?n:t,e[0]):null}function _I({trace:e,mode:t,selectedStepId:n,onModeChange:r,onSelectStep:i,onJumpToBottleneck:a,onReplay:s,recommendations:o=yI,persona:l="builder",annotations:u=bI,activityFeed:c=xI,onAddAnnotation:f,missionProgress:h=wI,missionCompletion:m,onResetMissions:g,narrative:p="",onAskDirector:S,onExportNarrative:v}){var se;const y=e.steps??[],w=SI(y),_=n??(w==null?void 0:w.id)??((se=y[0])==null?void 0:se.id)??null,C=e.metadata.wallTimeMs??0,E=l==="executive"?"Executive lens":l==="operator"?"Operator lens":"Builder lens",[T,j]=x.useState(""),[N,P]=x.useState(""),[R,O]=x.useState(""),[F,X]=x.useState("overview"),[$,fe]=x.useState([]),ie=x.useMemo(()=>c.slice(0,6),[c]),D=(m==null?void 0:m.done)??0,B=D>=3||!!h.inspect,V=D>=5||!!h.collaborate||ie.length>0,z=x.useMemo(()=>o.slice(0,3).map((U,me)=>({id:U.id,step:`${me+1}. ${U.actionLabel}  ${U.title}`})),[o]);x.useEffect(()=>{fe(U=>U.filter(me=>o.some(Xe=>Xe.id===me)))},[o]);const te=$.filter(U=>o.some(me=>me.id===U)).length,A=o.length?Math.round(te/o.length*100):0,J=U=>{U.action(),fe(me=>me.includes(U.id)?me:[...me,U.id])};return d.jsxs("aside",{className:"inspector inspector-empty","data-help":!0,"data-help-indicator":!0,"data-tour":"inspector","data-help-title":"Inspector panel","data-help-body":"Select a step to open detailed payloads, redaction controls, and replay actions.","data-help-placement":"left",children:[d.jsx("div",{className:"inspector-header",children:d.jsxs("div",{children:[d.jsx("div",{className:"inspector-title",children:"Director's notes"}),d.jsxs("div",{className:"inspector-subtitle",children:[E,". Select a step to open deep inspection."]})]})}),d.jsxs("div",{className:"director-tabs",role:"tablist","aria-label":"Director workspace tabs",children:[d.jsx("button",{className:`ghost-button ${F==="overview"?"active":""}`,type:"button",role:"tab","aria-selected":F==="overview",onClick:()=>X("overview"),children:"Overview"}),d.jsx("button",{className:`ghost-button ${F==="narrative"?"active":""}`,type:"button",role:"tab","aria-selected":F==="narrative",onClick:()=>X("narrative"),children:"Narrative"}),d.jsx("button",{className:`ghost-button ${F==="collab"?"active":""}`,type:"button",role:"tab","aria-selected":F==="collab",onClick:()=>X("collab"),children:"Collaboration"})]}),F==="overview"?d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"inspector-section",children:[d.jsx("div",{className:"inspector-section-title",children:"Run summary"}),d.jsxs("div",{className:"inspector-row",children:[d.jsx("span",{children:"Steps"}),d.jsx("span",{children:y.length})]}),d.jsxs("div",{className:"inspector-row",children:[d.jsx("span",{children:"Wall time"}),d.jsxs("span",{children:[C,"ms"]})]}),d.jsxs("div",{className:"inspector-row",children:[d.jsx("span",{children:"Status"}),d.jsx("span",{children:e.status})]})]}),d.jsxs("div",{className:"inspector-section",children:[d.jsx("div",{className:"inspector-section-title",children:"Next actions"}),d.jsxs("div",{className:"director-actions",children:[d.jsx("button",{className:"primary-button",type:"button",onClick:()=>r("cinema"),"data-help":!0,"data-help-title":"Open cinema","data-help-body":"Jump straight into the timeline.","data-help-placement":"right",children:"Open cinema"}),d.jsx("button",{className:"ghost-button",type:"button",onClick:()=>r("flow"),"data-help":!0,"data-help-title":"Open flow","data-help-body":"See the dependency graph of the run.","data-help-placement":"right",children:"Switch to flow"}),d.jsx("button",{className:"ghost-button",type:"button",onClick:()=>{if(!n){if(w){a();return}_&&i(_)}},disabled:!_||!!n,"data-help":!0,"data-help-title":"Jump to bottleneck","data-help-body":"Select the slowest step for inspection.","data-help-placement":"right",children:n?"Inspector open":w?"Jump to bottleneck":"Select first step"}),d.jsx("button",{className:"ghost-button",type:"button",onClick:()=>_&&s(_),disabled:!_||!B,title:B?void 0:"Complete core missions to unlock replay guidance.","data-help":!0,"data-help-title":"Replay","data-help-body":"Branch a replay from a decisive step.","data-help-placement":"right",children:"Replay from step"})]})]}),d.jsxs("div",{className:"inspector-section",children:[d.jsx("div",{className:"inspector-section-title",children:"Mode"}),d.jsxs("div",{className:"director-modes",children:[d.jsx("button",{className:`ghost-button ${t==="cinema"?"active":""}`,type:"button",onClick:()=>r("cinema"),"data-help":!0,"data-help-title":"Cinema mode","data-help-body":"Timeline view for pacing and sequence.","data-help-placement":"right",children:"Cinema"}),d.jsx("button",{className:`ghost-button ${t==="flow"?"active":""}`,type:"button",onClick:()=>r("flow"),"data-help":!0,"data-help-title":"Flow mode","data-help-body":"Graph view for dependencies.","data-help-placement":"right",children:"Flow"}),d.jsx("button",{className:"ghost-button",type:"button",disabled:!0,children:"Compare"})]})]}),d.jsxs("div",{className:"inspector-section",children:[d.jsx("div",{className:"inspector-section-title",children:"Adaptive missions"}),d.jsxs("div",{className:"mission-summary",children:[(m==null?void 0:m.done)??0,"/",(m==null?void 0:m.total)??0," complete",d.jsxs("span",{children:[(m==null?void 0:m.pct)??0,"%"]})]}),d.jsxs("div",{className:"mission-stage",children:["Stage: ",V?"Collaboration":B?"Analysis":"Foundation"]}),d.jsx("div",{className:"mission-grid",children:Object.entries(h).map(([U,me])=>d.jsxs("div",{className:`mission-chip ${me?"done":""}`,children:[d.jsx("span",{children:U}),d.jsx("span",{children:me?"Done":"Pending"})]},U))}),d.jsx("button",{className:"ghost-button",type:"button",onClick:g,children:"Reset missions"})]}),d.jsxs("div",{className:"inspector-section",children:[d.jsx("div",{className:"inspector-section-title",children:"Action plan"}),B?o.length===0?d.jsx("div",{className:"annotation-empty",children:"No recommendations generated yet."}):d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"mission-summary",children:[te,"/",o.length," complete",d.jsxs("span",{children:[A,"%"]})]}),d.jsx("div",{className:"director-recommendations",children:o.map(U=>{const me=$.includes(U.id);return d.jsxs("article",{className:`director-recommendation tone-${U.tone} ${me?"done":""}`,children:[d.jsx("div",{className:"director-recommendation-title",children:U.title}),d.jsx("p",{className:"director-recommendation-body",children:U.body}),d.jsx("button",{className:"ghost-button",type:"button",onClick:()=>J(U),children:me?"Completed":U.actionLabel})]},U.id)})})]}):d.jsx("div",{className:"annotation-empty",children:"Complete inspect/flow/replay missions to unlock AI narrative tools."}),V?null:d.jsx("div",{className:"annotation-empty",children:"Open another live session to unlock collaboration activity feed."})]})]}):null,F==="narrative"?d.jsxs("div",{className:"inspector-section",children:[d.jsx("div",{className:"inspector-section-title",children:"AI director narrative"}),B?d.jsxs(d.Fragment,{children:[d.jsx("p",{className:"director-recommendation-body",children:p}),z.length?d.jsx("div",{className:"director-guided-plan",children:z.map(U=>d.jsx("div",{children:U.step},U.id))}):null,d.jsxs("div",{className:"director-ask-row",children:[d.jsx("input",{className:"search-input",value:N,onChange:U=>P(U.target.value),placeholder:"Ask Director (e.g. what is highest risk?)","aria-label":"Ask director question"}),d.jsx("button",{className:"ghost-button",type:"button",onClick:()=>{N.trim()&&O((S==null?void 0:S(N))??"")},children:"Ask"})]}),R?d.jsx("div",{className:"director-answer",children:R}):null,d.jsx("button",{className:"ghost-button",type:"button",onClick:v,children:"Export narrative"})]}):d.jsx("div",{className:"annotation-empty",children:"Complete inspect/flow/replay missions to unlock AI narrative tools."})]}):null,F==="collab"?d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"inspector-section",children:[d.jsx("div",{className:"inspector-section-title",children:"Shared annotations"}),d.jsx("textarea",{value:T,onChange:U=>j(U.target.value),rows:3,placeholder:n?"Add note for selected step...":"Add trace-level note...","aria-label":"Shared annotation"}),d.jsx("button",{className:"ghost-button",type:"button",onClick:()=>{const U=T.trim();U&&(f==null||f(U,n),j(""))},children:"Add annotation"}),d.jsxs("div",{className:"annotation-list",children:[u.slice(-6).reverse().map(U=>d.jsxs("article",{className:"annotation-item",children:[d.jsxs("div",{className:"annotation-meta",children:[d.jsx("span",{children:U.stepId?`step ${U.stepId}`:"trace"}),d.jsx("span",{children:U.authorSessionId})]}),d.jsx("p",{children:U.body})]},U.id)),u.length===0?d.jsx("div",{className:"annotation-empty",children:"No shared annotations yet."}):null]})]}),d.jsxs("div",{className:"inspector-section",children:[d.jsx("div",{className:"inspector-section-title",children:"Collab activity"}),V?d.jsxs("div",{className:"activity-list",children:[ie.map(U=>d.jsxs("div",{className:"activity-item",children:[d.jsx("span",{children:U.message}),d.jsx("span",{children:new Date(U.timestamp).toLocaleTimeString()})]},U.id)),ie.length===0?d.jsx("div",{className:"annotation-empty",children:"No activity yet."}):null]}):d.jsx("div",{className:"annotation-empty",children:"Open another live session to unlock collaboration activity feed."})]})]}):null]})}const Uu=(e,t,n)=>Math.min(n,Math.max(t,e));function Gu(e){return Array.from((e==null?void 0:e.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'))??[]).filter(n=>!(n.hasAttribute("disabled")||n.getAttribute("aria-hidden")==="true"))}function kI({steps:e,open:t,onClose:n,onComplete:r}){const[i,a]=x.useState(0),[s,o]=x.useState(null),[l,u]=x.useState(null),c=x.useRef(null),f=x.useRef(null),h=x.useRef(null),m=x.useMemo(()=>e[i],[e,i]),g=x.useCallback(()=>{if(!t)return;const _=document.querySelector(m.target);if(!_){f.current=null,o(null);return}f.current=_;const C=_.getBoundingClientRect();o(C)},[t,m.target]),p=x.useCallback(()=>{if(!s||!c.current){u(null);return}const _=c.current.offsetWidth,C=c.current.offsetHeight,E=16;let T=Uu(s.left+s.width/2-_/2,E,window.innerWidth-_-E),j=s.bottom+16;m.placement==="top"&&(j=s.top-C-16),m.placement==="left"&&(T=s.left-_-16,j=s.top+s.height/2-C/2),m.placement==="right"&&(T=s.right+16,j=s.top+s.height/2-C/2),j+C>window.innerHeight-E&&(j=s.top-C-16),j<E&&(j=s.bottom+16),T=Uu(T,E,window.innerWidth-_-E),j=Uu(j,E,window.innerHeight-C-E),u({top:j,left:T})},[m.placement,s]);if(x.useEffect(()=>{t&&a(0)},[t]),x.useEffect(()=>{var C,E;if(!t){(E=(C=h.current)==null?void 0:C.focus)==null||E.call(C);return}h.current=document.activeElement;const _=window.setTimeout(()=>{var j;(j=Gu(c.current)[0]??c.current)==null||j.focus()},0);return()=>window.clearTimeout(_)},[t]),x.useEffect(()=>{if(!t)return;const _=document.querySelector(m.target);_&&_.scrollIntoView({behavior:"smooth",block:"center",inline:"center"});const C=window.requestAnimationFrame(()=>g());return()=>window.cancelAnimationFrame(C)},[t,m.target,g]),x.useLayoutEffect(()=>{p()},[s,p,m.title]),x.useEffect(()=>{if(!t)return;const _=()=>{g(),p()};return window.addEventListener("resize",_),window.addEventListener("scroll",_,!0),()=>{window.removeEventListener("resize",_),window.removeEventListener("scroll",_,!0)}},[t,g,p]),x.useEffect(()=>{if(!t)return;const _=C=>{var P;if(C.key==="Escape"){C.preventDefault(),n();return}if(C.key!=="Tab")return;const E=Gu(c.current);if(!E.length)return;const T=document.activeElement,j=E.indexOf(T),N=C.shiftKey?j<=0?E.length-1:j-1:(j+1)%E.length;(P=E[N])==null||P.focus(),C.preventDefault()};return document.addEventListener("keydown",_,!0),()=>document.removeEventListener("keydown",_,!0)},[n,t]),!t||!m)return null;const S=_=>{var N;if(_.key==="Escape"){_.preventDefault(),n();return}if(_.key!=="Tab")return;const C=Gu(c.current);if(C.length===0)return;const E=document.activeElement,T=C.indexOf(E),j=_.shiftKey?T<=0?C.length-1:T-1:(T+1)%C.length;(N=C[j])==null||N.focus(),_.preventDefault()},v=`tour-title-${m.id}`,y=`tour-body-${m.id}`,w=s?{top:s.top-6,left:s.left-6,width:s.width+12,height:s.height+12}:void 0;return d.jsxs("div",{className:"tour-overlay",role:"dialog","aria-modal":"true","aria-label":"Guided tour","aria-labelledby":v,"aria-describedby":y,onKeyDown:S,children:[d.jsx("div",{className:"tour-backdrop",onClick:n}),s?d.jsx("div",{className:"tour-spotlight",style:w}):null,d.jsxs("div",{className:`tour-card ${l?"tour-card-anchored":""}`,ref:c,style:l??void 0,tabIndex:-1,children:[d.jsxs("div",{className:"tour-step",children:["Step ",i+1," of ",e.length]}),d.jsx("div",{className:"tour-title",id:v,children:m.title}),d.jsx("p",{className:"tour-body",id:y,children:m.body}),d.jsxs("div",{className:"tour-actions",children:[d.jsx("button",{className:"ghost-button",type:"button",onClick:()=>a(_=>Math.max(0,_-1)),disabled:i===0,children:"Back"}),d.jsx("button",{className:"ghost-button",type:"button",onClick:n,children:"Skip"}),i===e.length-1?d.jsx("button",{className:"primary-button",type:"button",onClick:r,children:"Finish tour"}):d.jsx("button",{className:"primary-button",type:"button",onClick:()=>a(_=>_+1),children:"Next"})]})]})]})}const nb=(e,t,n)=>Math.min(n,Math.max(t,e));function CI({enabled:e}){const[t,n]=x.useState(null),[r,i]=x.useState(null),a=x.useRef(null),s=x.useRef(null),o=x.useCallback(()=>{const u=a.current;if(!u){n(null);return}const c=u.getBoundingClientRect(),f=u.dataset.helpTitle??"Context",h=u.dataset.helpBody??"",m=u.dataset.helpPlacement??"right";n({rect:c,title:f,body:h,placement:m})},[]);x.useEffect(()=>{if(!e){a.current=null,n(null);return}const u=g=>{var S,v;const p=(v=(S=g.target)==null?void 0:S.closest)==null?void 0:v.call(S,"[data-help]");if(!p){a.current||n(null);return}a.current!==p&&(a.current=p,o())},c=g=>{var S,v;const p=(v=(S=g.target)==null?void 0:S.closest)==null?void 0:v.call(S,"[data-help]");p&&(a.current=p,o())},f=g=>{var S;const p=g.relatedTarget;(S=p==null?void 0:p.closest)!=null&&S.call(p,"[data-help]")||(a.current=null,n(null))},h=g=>{var S,v;const p=(v=(S=g.target)==null?void 0:S.closest)==null?void 0:v.call(S,"[data-help]");if(!p){a.current=null,n(null);return}a.current=p,o()},m=()=>{a.current&&o()};return window.addEventListener("mousemove",u),window.addEventListener("focusin",c),window.addEventListener("focusout",f),window.addEventListener("pointerdown",h),window.addEventListener("scroll",m,!0),window.addEventListener("resize",m),()=>{window.removeEventListener("mousemove",u),window.removeEventListener("focusin",c),window.removeEventListener("focusout",f),window.removeEventListener("pointerdown",h),window.removeEventListener("scroll",m,!0),window.removeEventListener("resize",m)}},[e,o]);const l=x.useCallback(()=>{if(!t||!s.current){i(null);return}const u=12,c=s.current.offsetWidth,f=s.current.offsetHeight,{rect:h,placement:m}=t;let g=h.right+16,p=h.top+h.height/2-f/2;m==="left"&&(g=h.left-c-16,p=h.top+h.height/2-f/2),m==="top"&&(g=h.left+h.width/2-c/2,p=h.top-f-16),m==="bottom"&&(g=h.left+h.width/2-c/2,p=h.bottom+16),g=nb(g,u,window.innerWidth-c-u),p=nb(p,u,window.innerHeight-f-u),i({left:g,top:p})},[t]);return x.useLayoutEffect(()=>{l()},[l]),!e||!t?null:d.jsxs("div",{className:"help-overlay","aria-hidden":"true",children:[d.jsx("div",{className:"help-highlight",style:{top:t.rect.top-6,left:t.rect.left-6,width:t.rect.width+12,height:t.rect.height+12}}),d.jsxs("div",{className:"help-bubble",ref:s,style:r??void 0,"data-placement":t.placement,children:[d.jsx("div",{className:"help-title",children:t.title}),d.jsx("div",{className:"help-body",children:t.body})]})]})}const jI=[{id:"builder",label:"Builder lens",body:"Focus on step payloads, execution paths, and replay control."},{id:"executive",label:"Executive lens",body:"Focus on bottlenecks, risk, and outcome-level run quality."},{id:"operator",label:"Operator lens",body:"Focus on failures, retries, and trace reliability posture."}],EI=[{id:"rapid_triage",label:"Rapid triage",body:"Jump straight to the highest-risk step and start resolution.",estimate:"2-3 min"},{id:"deep_diagnosis",label:"Deep diagnosis",body:"Open flow and guided analysis for full root-cause exploration.",estimate:"8-12 min"},{id:"team_sync",label:"Team sync",body:"Open collaborative mode and prep a handoff workflow.",estimate:"4-6 min"}];function TI({onComplete:e,onStartTour:t,onStartStory:n,persona:r="builder",onPersonaChange:i,launchPath:a="rapid_triage",onLaunchPathChange:s,onStartLaunchPath:o}){const l=()=>{t==null||t(),e()},u=()=>{n==null||n(),e()},c=f=>{s==null||s(f),o==null||o(f),e()};return d.jsx("div",{className:"intro-overlay",role:"dialog","aria-modal":"true","aria-label":"Agent Director intro",children:d.jsxs("div",{className:"intro-card",children:[d.jsx("div",{className:"intro-scan"}),d.jsx("div",{className:"intro-title",children:"Agent Director"}),d.jsx("div",{className:"intro-tagline",children:"Watch your agent think. Then direct it."}),d.jsxs("div",{className:"intro-steps",children:[d.jsxs("div",{className:"intro-step",children:[d.jsx("div",{className:"intro-step-label",children:"Observe"}),d.jsx("div",{className:"intro-step-body",children:"Scrub the timeline to feel pacing and parallelism."})]}),d.jsxs("div",{className:"intro-step",children:[d.jsx("div",{className:"intro-step-label",children:"Inspect"}),d.jsx("div",{className:"intro-step-body",children:"Open the bottleneck to read payloads and costs."})]}),d.jsxs("div",{className:"intro-step",children:[d.jsx("div",{className:"intro-step-label",children:"Direct"}),d.jsx("div",{className:"intro-step-body",children:"Replay from a decisive step and compare runs."})]})]}),d.jsx("div",{className:"intro-personas",role:"group","aria-label":"Select onboarding lens",children:jI.map(f=>d.jsxs("button",{type:"button",className:`ghost-button intro-persona ${r===f.id?"active":""}`,onClick:()=>i==null?void 0:i(f.id),"aria-pressed":r===f.id,"aria-label":f.label,children:[d.jsx("span",{className:"intro-persona-label",children:f.label}),d.jsx("span",{className:"intro-persona-body",children:f.body})]},f.id))}),d.jsx("div",{className:"intro-launch-paths",role:"group","aria-label":"Select launch path",children:EI.map(f=>d.jsxs("article",{className:`intro-path-card ${a===f.id?"active":""}`,children:[d.jsxs("button",{type:"button",className:`ghost-button intro-path-button ${a===f.id?"active":""}`,onClick:()=>s==null?void 0:s(f.id),"aria-pressed":a===f.id,"aria-label":f.label,children:[d.jsx("span",{className:"intro-path-label",children:f.label}),d.jsx("span",{className:"intro-path-estimate",children:f.estimate}),d.jsx("span",{className:"intro-path-body",children:f.body})]}),d.jsxs("button",{className:"primary-button intro-path-start",type:"button",onClick:()=>c(f.id),children:["Start ",f.label]})]},f.id))}),d.jsxs("div",{className:"intro-grid",children:[d.jsx("span",{}),d.jsx("span",{}),d.jsx("span",{}),d.jsx("span",{})]}),d.jsxs("div",{className:"intro-actions",children:[d.jsx("button",{className:"primary-button",type:"button",onClick:l,children:"Start guided tour"}),n?d.jsx("button",{className:"ghost-button",type:"button",onClick:u,children:"Play story mode"}):null,d.jsx("button",{className:"ghost-button",type:"button",onClick:e,children:"Skip intro"})]})]})})}function NI({explainMode:e,storyActive:t,onStartTour:n,onStartStory:r,onToggleExplain:i,onDismiss:a}){return d.jsxs("section",{className:"hero-ribbon","aria-label":"Director briefing","data-help":!0,"data-help-indicator":!0,"data-tour":"hero","data-help-title":"Director briefing","data-help-body":"Start the tour, play story mode, or enable explain to learn the interface instantly.","data-help-placement":"bottom",children:[d.jsxs("div",{className:"hero-ribbon-top",children:[d.jsx("span",{className:"hero-eyebrow",children:"Director briefing"}),d.jsx("button",{className:"ghost-button hero-dismiss",type:"button",onClick:a,children:"Dismiss"})]}),d.jsx("div",{className:"hero-title",children:"Observe. Inspect. Direct."}),d.jsx("div",{className:"hero-subtitle",children:"A cinematic control room for agent traces. See time, read structure, then replay with confidence."}),d.jsxs("div",{className:"hero-pills",children:[d.jsx("span",{className:"hero-pill","data-tone":"observe",children:"Observe"}),d.jsx("span",{className:"hero-pill","data-tone":"inspect",children:"Inspect"}),d.jsx("span",{className:"hero-pill","data-tone":"direct",children:"Direct"})]}),d.jsxs("div",{className:"hero-actions",children:[d.jsx("button",{className:"primary-button",type:"button",onClick:n,children:"Start guided tour"}),d.jsx("button",{className:"ghost-button",type:"button",onClick:r,disabled:t,children:t?"Story running":"Play story mode"}),d.jsxs("button",{className:`ghost-button ${e?"active":""}`,type:"button",onClick:i,"aria-pressed":e,children:["Explain ",e?"On":"Off"]})]})]})}function MI({mode:e,isPlaying:t,storyActive:n,explainMode:r,hidden:i=!1,open:a,onToggleOpen:s,onTogglePlay:o,onStartStory:l,onStopStory:u,onStartTour:c,onOpenPalette:f,onShowShortcuts:h,onToggleExplain:m,onJumpToBottleneck:g}){if(i)return null;const p=t?"Pause":"Play",S=n?"Stop story":"Story mode";return a?d.jsxs("aside",{className:"quick-actions","aria-label":"Quick actions","data-help":!0,"data-help-indicator":!0,"data-tour":"quick-actions","data-help-title":"Quick actions","data-help-body":"Launch story mode, open the command palette, or jump to the bottleneck instantly.","data-help-placement":"left",children:[d.jsxs("div",{className:"quick-actions-header",children:[d.jsxs("div",{children:[d.jsx("div",{className:"quick-actions-title",children:"Quick actions"}),d.jsx("div",{className:"quick-actions-subtitle",children:"Pin demo controls close at hand."})]}),d.jsx("button",{className:"ghost-button",type:"button",onClick:s,"aria-label":"Collapse quick actions",children:"Collapse"})]}),d.jsxs("button",{className:`quick-action ${t?"active":""}`,type:"button",onClick:o,"aria-label":p,"data-help":!0,"data-help-title":"Play or pause","data-help-body":"Start or stop playback from anywhere.","data-help-placement":"left",children:[d.jsx("span",{className:"quick-action-label",children:p}),d.jsx("span",{className:"quick-action-meta",children:e==="flow"?"Cinema":"Space"})]}),d.jsxs("button",{className:`quick-action ${n?"active":""}`,type:"button",onClick:n?u:l,"aria-label":S,"data-help":!0,"data-help-title":"Story mode","data-help-body":"Auto-runs a cinematic walkthrough of the run.","data-help-placement":"left",children:[d.jsx("span",{className:"quick-action-label",children:S}),d.jsx("span",{className:"quick-action-meta",children:"S"})]}),d.jsxs("button",{className:"quick-action",type:"button",onClick:f,"aria-label":"Open command palette","data-help":!0,"data-help-title":"Command palette","data-help-body":"Search every action and jump instantly.","data-help-placement":"left",children:[d.jsx("span",{className:"quick-action-label",children:"Command"}),d.jsx("span",{className:"quick-action-meta",children:"Cmd+K"})]}),d.jsxs("button",{className:"quick-action",type:"button",onClick:c,"aria-label":"Start guided tour","data-help":!0,"data-help-title":"Guided tour","data-help-body":"Walk the interface with a curated tour.","data-help-placement":"left",children:[d.jsx("span",{className:"quick-action-label",children:"Tour"}),d.jsx("span",{className:"quick-action-meta",children:"Guide"})]}),d.jsxs("button",{className:`quick-action ${r?"active":""}`,type:"button",onClick:m,"aria-label":"Toggle explain mode","data-help":!0,"data-help-title":"Explain mode","data-help-body":"Toggle contextual overlays for every control.","data-help-placement":"left",children:[d.jsx("span",{className:"quick-action-label",children:"Explain"}),d.jsx("span",{className:"quick-action-meta",children:r?"On":"Off"})]}),d.jsxs("button",{className:"quick-action",type:"button",onClick:g,"aria-label":"Jump to bottleneck","data-help":!0,"data-help-title":"Bottleneck jump","data-help-body":"Focus instantly on the slowest step.","data-help-placement":"left",children:[d.jsx("span",{className:"quick-action-label",children:"Bottleneck"}),d.jsx("span",{className:"quick-action-meta",children:"Latency"})]}),d.jsxs("button",{className:"quick-action",type:"button",onClick:h,"aria-label":"Show shortcuts","data-help":!0,"data-help-title":"Shortcuts","data-help-body":"See the full keyboard map.","data-help-placement":"left",children:[d.jsx("span",{className:"quick-action-label",children:"Shortcuts"}),d.jsx("span",{className:"quick-action-meta",children:"?"})]})]}):d.jsxs("button",{className:"quick-actions-toggle",type:"button",onClick:s,title:"Open quick actions","aria-expanded":"false","data-help":!0,"data-tour":"quick-actions","data-help-title":"Quick actions","data-help-body":"Open the dock to access demos, shortcuts, and instant actions.","data-help-placement":"left",children:[d.jsx("span",{className:"quick-actions-toggle-label",children:"Actions"}),d.jsx("span",{className:"quick-actions-toggle-meta",children:"Dock"})]})}function PI({active:e,label:t,step:n,total:r,onStop:i,onRestart:a}){if(!e)return null;const s=r>0?(n+1)/r*100:0;return d.jsxs("div",{className:"story-banner",role:"status","aria-live":"polite",children:[d.jsxs("div",{className:"story-banner-main",children:[d.jsx("div",{className:"story-banner-title",children:"Story mode"}),d.jsx("div",{className:"story-banner-step",children:t})]}),d.jsxs("div",{className:"story-banner-actions",children:[d.jsxs("span",{className:"story-banner-count",children:[Math.min(n+1,r),"/",r]}),d.jsx("button",{className:"ghost-button",type:"button",onClick:a,children:"Restart"}),d.jsx("button",{className:"primary-button",type:"button",onClick:i,children:"Stop"})]}),d.jsx("div",{className:"story-banner-progress",children:d.jsx("span",{style:{width:`${s}%`}})})]})}const cE=/token|secret|password|api[_-]?key|authorization|bearer|session|cookie|private|ssh|credentials/i;function vv(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}function RI(e){const t=[],n=new WeakSet,r=(i,a)=>{if(Array.isArray(i)){i.forEach((s,o)=>{r(s,`${a}[${o}]`)});return}vv(i)&&(n.has(i)||(n.add(i),Object.entries(i).forEach(([s,o])=>{const l=a?`${a}.${s}`:s;cE.test(s)&&t.push(l),r(o,l)})))};return r(e,""),t}function dE(e){const t=new WeakMap,n=r=>{if(Array.isArray(r))return r.map(a=>n(a));if(!vv(r))return r;if(t.has(r))return t.get(r);const i={};return t.set(r,i),Object.entries(r).forEach(([a,s])=>{cE.test(a)?i[a]="[REDACTED]":i[a]=n(s)}),i};return n(e)}function yv(e){return vv(e)}function rb(e){return e==null||Number.isNaN(e)?"n/a":e.toString()}function AI(e){return e==null||Number.isNaN(e)?"n/a":e.toFixed(3)}function II(e,t){return t?dE(e):e}function DI({job:e,matrix:t,safeExport:n,sensitiveKeys:r,anchorStepName:i}){const a=t.rows.map(s=>({scenarioId:s.scenarioId,name:s.name,strategy:s.strategy,status:s.status,replayTraceId:s.replayTraceId,modifications:II(s.modifications,n),error:s.error??null,changedStepIds:s.changedStepIds,addedStepIds:s.addedStepIds,removedStepIds:s.removedStepIds,metrics:s.metrics}));return{generatedAt:new Date().toISOString(),safeExport:n,redaction:{safeExport:n,sensitiveKeys:r,policy:n?"redacted":"raw"},job:e?{id:e.id,status:e.status,createdAt:e.createdAt,startedAt:e.startedAt??null,endedAt:e.endedAt??null,scenarioCount:e.scenarioCount,completedCount:e.completedCount,failedCount:e.failedCount,canceledCount:e.canceledCount}:null,base:{traceId:t.traceId,stepId:t.stepId,anchorStepName:i??null},rows:a,causalRanking:t.causalRanking}}function OI({job:e,matrix:t,safeExport:n,anchorStepName:r}){const i=[],a=new Date().toISOString();return i.push("# Counterfactual Replay Matrix"),i.push(""),i.push(`Generated: ${a}`),i.push(`Safe export: ${n?"on":"off"}`),i.push(""),i.push("## Base trace"),i.push(`- Trace: ${t.traceId}`),i.push(`- Anchor step: ${r??t.stepId}`),i.push(""),e&&(i.push("## Job status"),i.push(`- Job: ${e.id}`),i.push(`- Status: ${e.status}`),i.push(`- Scenarios: ${e.scenarioCount} (completed ${e.completedCount}, failed ${e.failedCount}, canceled ${e.canceledCount})`),i.push("")),i.push("## Scenario outcomes"),i.push("| Scenario | Status | Wall  (ms) | Cost  (USD) | Errors  | Changed |"),i.push("| --- | --- | --- | --- | --- | --- |"),t.rows.forEach(s=>{i.push(`| ${s.name} | ${s.status} | ${rb(s.metrics.wallTimeDeltaMs)} | ${AI(s.metrics.costDeltaUsd)} | ${rb(s.metrics.errorDelta)} | ${s.metrics.changedSteps} |`)}),i.push(""),i.push("## Causal ranking"),t.causalRanking.length?t.causalRanking.slice(0,10).forEach(s=>{i.push(`- ${s.factor}: score ${s.score.toFixed(3)}, confidence ${(s.confidence*100).toFixed(0)}% (samples ${s.evidence.samples})`)}):i.push("- No causal ranking available."),i.push(""),i.push("## Redaction"),i.push(`Safe export: ${n?"enabled":"disabled"}.`),i.push(""),i.join(`
`)}const ib=["recorded","live","hybrid"],ao=25,ka=[{id:"prompt-tighten",label:"Prompt tighten",description:"Shorten or focus the assistant response",name:"Prompt tighter",strategy:"hybrid",modifications:{prompt:"Return concise response"}},{id:"tool-timeout",label:"Tool timeout",description:"Extend tool timeout for flaky calls",name:"Tool timeout 45s",strategy:"live",modifications:{toolTimeoutMs:45e3}},{id:"recorded-baseline",label:"Recorded baseline",description:"Pure recorded replay for determinism",name:"Recorded baseline",strategy:"recorded",modifications:{}}],so=[{id:"latency-sweep",label:"Latency sweep",description:"Evaluate timeout adjustments across three live variants.",scenarios:[{name:"Timeout 15s",strategy:"live",modifications:{toolTimeoutMs:15e3}},{name:"Timeout 30s",strategy:"live",modifications:{toolTimeoutMs:3e4}},{name:"Timeout 45s",strategy:"live",modifications:{toolTimeoutMs:45e3}}]},{id:"prompt-spectrum",label:"Prompt spectrum",description:"Compare concise, balanced, and verbose response shaping.",scenarios:[{name:"Concise prompt",strategy:"hybrid",modifications:{prompt:"Return concise response"}},{name:"Balanced prompt",strategy:"hybrid",modifications:{prompt:"Return balanced detail response"}},{name:"Verbose prompt",strategy:"hybrid",modifications:{prompt:"Return comprehensive detailed response"}}]}];function ab(e){return e??Number.POSITIVE_INFINITY}function Hu(){return`scenario-${Math.random().toString(36).slice(2,9)}`}function Ku(e){const t=e.trim();if(!t)return{value:{}};try{const n=JSON.parse(t);return yv(n)?{value:n}:{error:"Modifications must be a JSON object."}}catch{return{error:"Modifications must be valid JSON."}}}function ms(e,t=""){const n=[];return Object.entries(e).forEach(([r,i])=>{const a=t?`${t}.${r}`:r;if(typeof i=="string"||typeof i=="number"||typeof i=="boolean"||i==null){n.push({path:a,value:i});return}yv(i)&&n.push(...ms(i,a))}),n}function LI(e,t,n){const r=t.split(".").filter(Boolean);if(r.length===0)return e;const i=JSON.parse(JSON.stringify(e));let a=i;for(let s=0;s<r.length-1;s+=1){const o=r[s],l=a[o];yv(l)||(a[o]={}),a=a[o]}return a[r[r.length-1]]=n,i}function qI(e){const t=e.trim();if(t==="true")return!0;if(t==="false")return!1;if(t==="null")return null;const n=Number(t);return!Number.isNaN(n)&&t!==""?n:e}function sb(e,t){const n=new Map(ms(e).map(i=>[i.path,i.value]));return ms(t).filter(i=>n.get(i.path)!==i.value).map(i=>({path:i.path,from:n.get(i.path)??null,to:i.value}))}function FI(e){return e===null?"null":typeof e=="string"?"string":typeof e=="number"?"number":typeof e=="boolean"?"boolean":"unknown"}function VI(e){return`${e.strategy}::${JSON.stringify(e.modifications)}`}function $I(e){const t=new Map;return e.scenarios.forEach(n=>{ms(n.modifications).forEach(r=>{const i=t.get(r.path)??new Set;i.add(FI(r.value)),t.set(r.path,i)})}),Array.from(t.entries()).filter(([,n])=>n.size>1).map(([n])=>n)}function ob(e,t){const n=t.get(e);return n?n.name:e}function BI({steps:e,anchorStepId:t,onAnchorStepChange:n,scenarios:r,onScenarioChange:i,onDuplicateScenario:a,onMoveScenario:s,onAddScenario:o,onRemoveScenario:l,onReplaceScenarios:u,onRun:c,onCancel:f,loading:h,error:m,job:g,matrix:p,safeExport:S,onOpenCompare:v}){var Er,Hn,ln,kt;const[y,w]=x.useState("wallTimeDeltaMs"),[_,C]=x.useState(!0),[E,T]=x.useState(null),[j,N]=x.useState(((Er=ka[0])==null?void 0:Er.id)??""),[P,R]=x.useState(((Hn=so[0])==null?void 0:Hn.id)??""),[O,F]=x.useState(null),[X,$]=x.useState(null),[fe,ie]=x.useState({}),[D,B]=x.useState(25),V=x.useRef(null),z=x.useMemo(()=>new Map(e.map(M=>[M.id,M])),[e]),te=x.useMemo(()=>{const M=r.map((H,Y)=>H.name.trim()||`Scenario ${Y+1}`),W=new Map;return M.forEach(H=>{const Y=H.toLowerCase();W.set(Y,(W.get(Y)??0)+1)}),r.map((H,Y)=>{const we=M[Y],je=we.toLowerCase(),pe=Ku(H.modificationsText),_e=[];pe.error&&_e.push(pe.error),(W.get(je)??0)>1&&_e.push(`Duplicate scenario name: ${we}`);const si=pe.value??{},un=pe.value?RI(pe.value):[];return{id:H.id,name:we,parsedModifications:si,errors:_e,sensitiveKeys:un}})},[r]),A=te.reduce((M,W)=>M+W.errors.length,0),J=r.length>ao?`Scenario limit exceeded (${r.length}/${ao}).`:null,se=A>0||!!J,U=J||(A>0?"Fix scenario errors before running.":null),me=!h&&r.length>0&&!se,Xe=x.useMemo(()=>{const W=[...(p==null?void 0:p.rows)??[]];return W.sort((H,Y)=>{if(y==="name")return _?H.name.localeCompare(Y.name):Y.name.localeCompare(H.name);if(y==="changedSteps"){const pe=H.metrics.changedSteps,_e=Y.metrics.changedSteps;return _?pe-_e:_e-pe}const we=ab(H.metrics[y]),je=ab(Y.metrics[y]);return _?we-je:je-we}),W},[p==null?void 0:p.rows,y,_]);x.useEffect(()=>{B(25)},[p==null?void 0:p.jobId,y,_]);const ft=M=>{if(M===y){C(W=>!W);return}w(M),C(!0)},Dt=te.map((M,W)=>{var H;return{name:M.name,strategy:((H=r[W])==null?void 0:H.strategy)??"hybrid",modifications:M.parsedModifications}}),xn=()=>{me&&c(Dt)},Un=()=>{const M=ka.find(W=>W.id===j)??ka[0];M&&u([...r,{id:Hu(),name:M.name,strategy:M.strategy,modificationsText:JSON.stringify(M.modifications,null,2)}])},G=()=>{const M=so.find(pe=>pe.id===P);if(!M){F("Select a valid profile.");return}const W=M.scenarios.map(pe=>pe.name.toLowerCase());if(new Set(W).size!==W.length){F("Profile has duplicate scenario names.");return}const Y=M.scenarios.map(pe=>VI(pe));if(new Set(Y).size!==Y.length){F("Profile has duplicate scenario payloads.");return}const we=$I(M);if(we.length>0){F(`Profile has conflicting scalar types: ${we.slice(0,3).join(", ")}`);return}const je=M.scenarios.map(pe=>({id:Hu(),name:pe.name,strategy:pe.strategy,modificationsText:JSON.stringify(pe.modifications,null,2)}));u(je),F(null),c(je.map(pe=>({name:pe.name,strategy:pe.strategy,modifications:Ku(pe.modificationsText).value??{}})))},le=(M,W,H)=>{const Y=r.find(pe=>pe.id===M);if(!Y)return;const we=Ku(Y.modificationsText);if(!we.value)return;const je=LI(we.value,W,qI(H));i(M,{modificationsText:JSON.stringify(je,null,2)})},ne=()=>{const M={version:1,anchorStepId:t,scenarios:r.map(W=>({name:W.name,strategy:W.strategy,modificationsText:W.modificationsText}))};Zm(`agent-director-scenarios-${t||"matrix"}.json`,M)},Le=async M=>{var H;const W=(H=M.target.files)==null?void 0:H[0];if(W){M.target.value="";try{const Y=await W.text(),we=JSON.parse(Y),je=Array.isArray(we.scenarios)?we.scenarios:Array.isArray(we)?we:null;if(!je||je.length===0){$("Scenario file must include a scenarios array.");return}if(je.length>ao){$(`Scenario file exceeds ${ao} scenarios.`);return}const pe=je.map((_e,si)=>{if(!_e||typeof _e!="object")throw new Error("Scenario entries must be objects.");const un=_e,Ds=String(un.name??`Scenario ${si+1}`),oi=String(un.strategy??"hybrid"),Ze=ib.includes(oi)?oi:"hybrid",ye=typeof un.modificationsText=="string"?un.modificationsText:JSON.stringify(un.modifications??{},null,2);return{id:Hu(),name:Ds,strategy:Ze,modificationsText:ye}});typeof we.anchorStepId=="string"&&z.has(we.anchorStepId)&&n(we.anchorStepId),u(pe),$(null)}catch(Y){$(Y instanceof Error?Y.message:"Failed to import scenario file.")}}},ue=x.useMemo(()=>{const M=te.flatMap(W=>W.sensitiveKeys);return Array.from(new Set(M))},[te]),qe=x.useMemo(()=>{const M=(p==null?void 0:p.causalRanking)??[];return M.length===0?1:Math.max(1,...M.map(W=>Math.abs(W.score)))},[p==null?void 0:p.causalRanking]),Yt=((ln=te[0])==null?void 0:ln.parsedModifications)??{},jr=x.useMemo(()=>Object.entries(fe).filter(([,W])=>W!==0).reduce((W,[H,Y])=>{const we=p==null?void 0:p.causalRanking.find(_e=>_e.factor===H),je=(we==null?void 0:we.score)??0,pe=Y/100;return W.wallTimeMs+=je*pe*1400,W.costUsd+=je*pe*.04,W.errorDelta+=je*pe*.7,W},{wallTimeMs:0,costUsd:0,errorDelta:0}),[p==null?void 0:p.causalRanking,fe]),_t=x.useMemo(()=>{const M=new Map;return((p==null?void 0:p.rows)??[]).forEach(W=>{const H=Math.abs(W.metrics.wallTimeDeltaMs??0)+Math.abs((W.metrics.costDeltaUsd??0)*1e3)+Math.abs(W.metrics.errorDelta??0)*400;W.changedStepIds.forEach(Y=>{M.set(Y,(M.get(Y)??0)+Math.max(1,H))})}),Array.from(M.entries()).sort((W,H)=>H[1]-W[1]).slice(0,10)},[p==null?void 0:p.rows]),Ke=Math.max(1,..._t.map(([,M])=>M),1),xe=x.useMemo(()=>((p==null?void 0:p.causalRanking)??[]).slice(0,5).map(M=>({id:M.factor,text:`${M.factor} -> ${M.evidence.examples[0]??"observed change"} -> outcome`,confidence:M.confidence})),[p==null?void 0:p.causalRanking]),Ot=Xe.slice(0,D),on=()=>{var H;if(!p)return;const M=((H=z.get(t))==null?void 0:H.name)??null,W=DI({job:g,matrix:p,safeExport:S,sensitiveKeys:ue,anchorStepName:M});Zm(`agent-director-matrix-${p.jobId}.json`,W)},oa=()=>{var H;if(!p)return;const M=((H=z.get(t))==null?void 0:H.name)??null,W=OI({job:g,matrix:p,safeExport:S,anchorStepName:M});uE(`agent-director-matrix-${p.jobId}.md`,W,"text/markdown")},Gn=(g==null?void 0:g.status)==="queued"||(g==null?void 0:g.status)==="running",ve=E?((p==null?void 0:p.rows)??[]).find(M=>M.scenarioId===E)??null:null,ai=ve?S?dE(ve.modifications):ve.modifications:null;return d.jsxs("section",{className:"matrix-mode","data-help":!0,"data-help-title":"Matrix mode","data-help-body":"Run multiple replay scenarios from one anchor and compare outcome deltas with causal ranking.","data-help-placement":"top",children:[d.jsxs("div",{className:"matrix-panel",children:[d.jsxs("div",{className:"matrix-panel-header",children:[d.jsx("h2",{children:"Counterfactual Replay Matrix"}),d.jsx("div",{className:"matrix-job-state",children:g?d.jsxs(d.Fragment,{children:[d.jsxs("span",{className:`status-pill status-${g.status}`,children:["Job: ",g.status]}),d.jsxs("span",{children:[g.completedCount,"/",g.scenarioCount," completed"]}),g.failedCount?d.jsxs("span",{children:[g.failedCount," failed"]}):null,g.canceledCount?d.jsxs("span",{children:[g.canceledCount," canceled"]}):null]}):d.jsx("span",{children:"No job yet"})})]}),d.jsxs("div",{className:"matrix-controls",children:[d.jsxs("label",{children:["Anchor step",d.jsx("select",{value:t,onChange:M=>n(M.target.value),children:e.map(M=>d.jsxs("option",{value:M.id,children:[M.name," (",M.id,")"]},M.id))})]}),d.jsxs("label",{children:["Preset",d.jsx("select",{value:j,onChange:M=>N(M.target.value),"data-help":!0,"data-help-title":"Scenario presets","data-help-body":"Insert common experiments like prompt tweaks or recorded baselines.","data-help-placement":"bottom",children:ka.map(M=>d.jsx("option",{value:M.id,children:M.label},M.id))})]}),d.jsxs("label",{children:["Batch profile",d.jsx("select",{value:P,onChange:M=>R(M.target.value),children:so.map(M=>d.jsx("option",{value:M.id,children:M.label},M.id))})]}),d.jsx("button",{type:"button",className:"ghost-button",onClick:Un,disabled:h,"data-help":!0,"data-help-title":"Add preset","data-help-body":"Append the selected preset as a new scenario.","data-help-placement":"bottom",children:"Add preset"}),d.jsx("button",{type:"button",className:"ghost-button",onClick:G,disabled:h,"data-help":!0,"data-help-title":"Run batch profile","data-help-body":"Loads and executes a predefined scenario orchestration profile.","data-help-placement":"bottom",children:"Run profile"}),d.jsxs("div",{className:"matrix-actions",children:[d.jsx("button",{type:"button",className:"primary-button",onClick:xn,disabled:!me,"data-help":!0,"data-help-title":"Run matrix","data-help-body":"Execute all scenarios sequentially and gather outcome deltas.","data-help-placement":"bottom",children:h?"Running...":"Run matrix"}),d.jsx("button",{type:"button",className:"ghost-button",onClick:o,disabled:h,children:"Add scenario"}),d.jsx("button",{type:"button",className:"ghost-button",onClick:f,disabled:!Gn||h,children:"Cancel job"}),d.jsx("button",{type:"button",className:"ghost-button",onClick:ne,"data-help":!0,"data-help-title":"Export scenarios","data-help-body":"Download the scenario set as JSON for reuse.","data-help-placement":"bottom",children:"Export scenarios"}),d.jsx("button",{type:"button",className:"ghost-button",onClick:()=>{var M;return(M=V.current)==null?void 0:M.click()},"data-help":!0,"data-help-title":"Import scenarios","data-help-body":"Load a scenario JSON file to repopulate the builder.","data-help-placement":"bottom",children:"Import scenarios"}),d.jsx("input",{ref:V,type:"file",accept:"application/json",onChange:Le,className:"matrix-file-input"}),d.jsx("button",{type:"button",className:"ghost-button",onClick:on,disabled:!p,"data-help":!0,"data-help-title":"Export matrix","data-help-body":"Download the full matrix JSON with redaction metadata.","data-help-placement":"bottom",children:"Export matrix"}),d.jsx("button",{type:"button",className:"ghost-button",onClick:oa,disabled:!p,"data-help":!0,"data-help-title":"Export summary","data-help-body":"Download a markdown summary for sharing.","data-help-placement":"bottom",children:"Export summary"})]})]}),d.jsxs("div",{className:"matrix-presets",children:[ka.map(M=>d.jsxs("div",{className:"matrix-preset",children:[d.jsx("strong",{children:M.label}),d.jsx("span",{children:M.description})]},M.id)),so.filter(M=>M.id===P).map(M=>d.jsxs("div",{className:"matrix-preset profile",children:[d.jsx("strong",{children:M.label}),d.jsx("span",{children:M.description})]},M.id))]}),d.jsx("div",{className:"matrix-scenarios",children:r.map((M,W)=>{const H=te[W];return d.jsxs("article",{className:"matrix-scenario",children:[d.jsxs("div",{className:"matrix-scenario-head",children:[d.jsx("input",{value:M.name,onChange:Y=>i(M.id,{name:Y.target.value}),placeholder:"Scenario name"}),d.jsx("select",{value:M.strategy,onChange:Y=>i(M.id,{strategy:Y.target.value}),children:ib.map(Y=>d.jsx("option",{value:Y,children:Y},Y))})]}),d.jsx("textarea",{value:M.modificationsText,onChange:Y=>i(M.id,{modificationsText:Y.target.value}),rows:3,spellCheck:!1,"aria-label":`Scenario ${M.name} modifications`}),H?d.jsxs("div",{className:"matrix-schema-editor",children:[d.jsx("strong",{children:"Schema-aware scalar editor"}),d.jsx("div",{className:"matrix-schema-grid",children:ms(H.parsedModifications).slice(0,8).map(Y=>d.jsxs("label",{className:"matrix-schema-field",children:[d.jsx("span",{children:Y.path}),d.jsx("input",{value:String(Y.value??""),onChange:we=>le(M.id,Y.path,we.target.value)})]},`${M.id}-${Y.path}`))})]}):null,d.jsxs("div",{className:"matrix-diff-preview",children:[d.jsx("strong",{children:"Diff vs baseline"}),d.jsxs("div",{className:"matrix-diff-list",children:[sb(Yt,(H==null?void 0:H.parsedModifications)??{}).slice(0,6).map(Y=>d.jsxs("div",{className:"matrix-diff-item",children:[d.jsx("span",{children:Y.path}),d.jsxs("span",{children:[String(Y.from)," ","->"," ",String(Y.to)]})]},`${M.id}-${Y.path}`)),sb(Yt,(H==null?void 0:H.parsedModifications)??{}).length===0?d.jsx("div",{className:"matrix-diff-item",children:"No scalar changes from baseline."}):null]})]}),H!=null&&H.errors.length?d.jsx("div",{className:"matrix-scenario-error",children:H.errors.map(Y=>d.jsx("div",{children:Y},Y))}):null,H!=null&&H.sensitiveKeys.length?d.jsxs("div",{className:"matrix-scenario-warning",children:["Sensitive keys: ",H.sensitiveKeys.join(", ")]}):null,d.jsxs("div",{className:"matrix-scenario-actions",children:[d.jsx("button",{type:"button",className:"ghost-button",onClick:()=>a(M.id),disabled:h,children:"Duplicate scenario"}),d.jsx("button",{type:"button",className:"ghost-button",onClick:()=>s(M.id,"up"),disabled:h||W===0,children:"Move scenario up"}),d.jsx("button",{type:"button",className:"ghost-button",onClick:()=>s(M.id,"down"),disabled:h||W===r.length-1,children:"Move scenario down"}),d.jsx("button",{type:"button",className:"ghost-button",onClick:()=>l(M.id),disabled:r.length<=1,children:"Remove"})]})]},M.id)})}),U?d.jsx("div",{className:"error-banner",children:U}):null,X?d.jsx("div",{className:"error-banner",children:X}):null,O?d.jsx("div",{className:"error-banner",children:O}):null,m?d.jsx("div",{className:"error-banner",children:m}):null]}),d.jsxs("div",{className:"matrix-results",children:[d.jsxs("div",{className:"matrix-table-wrap",children:[d.jsxs("table",{className:"matrix-table",children:[d.jsx("thead",{children:d.jsxs("tr",{children:[d.jsx("th",{children:d.jsx("button",{type:"button",className:"table-sort",onClick:()=>ft("name"),children:"Scenario"})}),d.jsx("th",{children:"Status"}),d.jsx("th",{children:d.jsx("button",{type:"button",className:"table-sort",onClick:()=>ft("wallTimeDeltaMs"),children:"Wall  (ms)"})}),d.jsx("th",{children:d.jsx("button",{type:"button",className:"table-sort",onClick:()=>ft("costDeltaUsd"),children:"Cost  (USD)"})}),d.jsx("th",{children:d.jsx("button",{type:"button",className:"table-sort",onClick:()=>ft("errorDelta"),children:"Errors "})}),d.jsx("th",{children:d.jsx("button",{type:"button",className:"table-sort",onClick:()=>ft("changedSteps"),children:"Changed"})}),d.jsx("th",{children:"Details"}),d.jsx("th",{children:"Compare"})]})}),d.jsx("tbody",{children:Xe.length===0?d.jsx("tr",{children:d.jsx("td",{colSpan:8,children:"No matrix results yet. Run a job to populate this table."})}):Ot.map(M=>d.jsxs("tr",{children:[d.jsx("td",{children:M.name}),d.jsx("td",{title:M.error??void 0,children:M.status}),d.jsx("td",{children:M.metrics.wallTimeDeltaMs??"n/a"}),d.jsx("td",{children:M.metrics.costDeltaUsd??"n/a"}),d.jsx("td",{children:M.metrics.errorDelta??"n/a"}),d.jsx("td",{children:M.metrics.changedSteps}),d.jsx("td",{children:d.jsx("button",{type:"button",className:"ghost-button",onClick:()=>T(M.scenarioId),children:"Details"})}),d.jsx("td",{children:d.jsx("button",{type:"button",className:"ghost-button",disabled:!M.replayTraceId,onClick:()=>M.replayTraceId&&v(M.replayTraceId),children:"Open"})})]},M.scenarioId))})]}),Xe.length>Ot.length?d.jsx("div",{className:"matrix-table-more",children:d.jsxs("button",{type:"button",className:"ghost-button",onClick:()=>B(M=>Math.min(Xe.length,M+25)),children:["Load more rows (",Ot.length,"/",Xe.length,")"]})}):null]}),d.jsxs("aside",{className:"matrix-causal",children:[d.jsx("h3",{children:"Causal ranking"}),(kt=p==null?void 0:p.causalRanking)!=null&&kt.length?d.jsxs(d.Fragment,{children:[d.jsx("ul",{children:p.causalRanking.slice(0,8).map(M=>d.jsxs("li",{children:[d.jsxs("div",{className:"factor-row",children:[d.jsx("strong",{children:M.factor}),d.jsxs("span",{children:["score ",M.score.toFixed(3)]})]}),d.jsx("div",{className:"factor-bar-track",role:"presentation",children:d.jsx("div",{className:`factor-bar-fill ${M.score>=0?"positive":"negative"}`,style:{width:`${Math.max(6,Math.abs(M.score)/qe*100)}%`}})}),d.jsxs("div",{className:"factor-meta",children:["confidence ",(M.confidence*100).toFixed(0),"%  samples ",M.evidence.samples]}),d.jsx("input",{type:"range",min:-100,max:100,value:fe[M.factor]??0,"aria-label":`Simulate ${M.factor}`,onChange:W=>ie(H=>({...H,[M.factor]:Number(W.target.value)}))}),M.evidence.examples.length?d.jsx("div",{className:"factor-chips",children:M.evidence.examples.map(W=>d.jsx("span",{className:"factor-chip",children:W},W))}):null]},M.factor))}),d.jsxs("div",{className:"matrix-projected",children:[d.jsx("h4",{children:"Projected impact (simulation)"}),d.jsxs("div",{className:"matrix-projected-grid",children:[d.jsxs("span",{children:["Wall  ",jr.wallTimeMs.toFixed(0)," ms"]}),d.jsxs("span",{children:["Cost  ",jr.costUsd.toFixed(3)," USD"]}),d.jsxs("span",{children:["Error  ",jr.errorDelta.toFixed(2)]})]})]}),d.jsxs("div",{className:"matrix-heatmap",children:[d.jsx("h4",{children:"Step influence heatmap"}),_t.map(([M,W])=>d.jsxs("div",{className:"matrix-heatmap-row",children:[d.jsx("span",{children:ob(M,z)}),d.jsx("span",{className:"matrix-heatmap-bar",style:{width:`${Math.max(5,W/Ke*100)}%`}})]},M)),_t.length===0?d.jsx("p",{children:"No influence data yet."}):null]}),d.jsxs("div",{className:"matrix-paths",children:[d.jsx("h4",{children:"Causal path explorer"}),xe.map(M=>d.jsxs("div",{className:"matrix-path-item",children:[d.jsx("span",{children:M.text}),d.jsxs("span",{children:[(M.confidence*100).toFixed(0),"%"]})]},M.id)),xe.length===0?d.jsx("p",{children:"No paths available."}):null]})]}):d.jsx("p",{children:"No causal ranking yet."})]}),ve?d.jsxs("aside",{className:"matrix-detail",role:"dialog","aria-label":"Scenario details",children:[d.jsxs("div",{className:"matrix-detail-header",children:[d.jsxs("div",{children:[d.jsx("h3",{children:"Scenario details"}),d.jsxs("p",{className:"matrix-detail-subtitle",children:[ve.name,"  ",ve.status]})]}),d.jsx("button",{type:"button",className:"ghost-button",onClick:()=>T(null),children:"Close"})]}),d.jsxs("div",{className:"matrix-detail-grid",children:[d.jsxs("div",{className:"matrix-detail-block",children:[d.jsx("h4",{children:"Modifications"}),S?d.jsx("p",{className:"matrix-detail-note",children:"Safe export enabled: sensitive keys are redacted."}):null,d.jsx("pre",{children:JSON.stringify(ai??{},null,2)})]}),d.jsxs("div",{className:"matrix-detail-block",children:[d.jsx("h4",{children:"Change summary"}),d.jsxs("div",{className:"matrix-detail-metrics",children:[d.jsxs("span",{children:["Changed: ",ve.metrics.changedSteps]}),d.jsxs("span",{children:["Added: ",ve.metrics.addedSteps]}),d.jsxs("span",{children:["Removed: ",ve.metrics.removedSteps]}),d.jsxs("span",{children:["Invalidated: ",ve.metrics.invalidatedStepCount]})]}),d.jsxs("div",{className:"matrix-detail-steps",children:[d.jsx("strong",{children:"Top changed steps"}),d.jsx("div",{className:"matrix-step-chips",children:ve.changedStepIds.length?ve.changedStepIds.slice(0,6).map(M=>d.jsx("span",{className:"matrix-step-chip",title:M,children:ob(M,z)},M)):d.jsx("span",{className:"matrix-step-chip",children:"None"})}),ve.changedStepIds.length>6?d.jsxs("div",{className:"matrix-step-more",children:["+",ve.changedStepIds.length-6," more steps changed"]}):null]}),ve.error?d.jsx("div",{className:"matrix-detail-error",children:ve.error}):null]})]})]}):null]})]})}const oo=["latency storm","cache divergence","tool timeout chain","stale prompt vector","schema mismatch surge"],lb=[{id:"seasonal-incident-sprint",title:"Resolve 3 raid objectives",goal:3,rewardCredits:120},{id:"boss-shutdown",title:"Defeat one boss encounter",goal:1,rewardCredits:200},{id:"guild-push",title:"Complete 2 guild operations",goal:2,rewardCredits:160},{id:"timeline-weaver",title:"Merge 2 timeline forks",goal:2,rewardCredits:150}],zI={stability_patch:{credits:20,materials:12},precision_lens:{credits:28,materials:16},overclock_core:{credits:42,materials:24}};function ze(e,t,n){return Math.min(n,Math.max(t,e))}function UI(e){let t=0;for(let n=0;n<e.length;n+=1)t=(t*31+e.charCodeAt(n))%1e5;return t}function fE(e,t,n){const r=oo[(e+t)%oo.length],i=oo[(e+t+2)%oo.length];return{id:`mission-${t}-${(e+t)%997}`,title:`Scenario Depth ${t}`,difficulty:ze(1+Math.floor(t/2),1,10),hazards:[r,i,...n.slice(-1)],rewardCredits:60+t*15}}function GI(){return[{id:"node-alpha",title:"Signal Fracture",body:"Telemetry divergence emerges across parallel tool paths.",choices:[{id:"alpha-risk",label:"Push aggressive branch optimization",nextNodeId:"node-beta",tensionDelta:12,mutator:"risk-surge"},{id:"alpha-safe",label:"Stabilize and preserve deterministic flow",nextNodeId:"node-beta",tensionDelta:-5,mutator:"stability-first"}]},{id:"node-beta",title:"Protocol Fork",body:"The team must choose speed versus interpretability under pressure.",choices:[{id:"beta-speed",label:"Favor speed and absorb uncertainty",nextNodeId:"node-gamma",tensionDelta:8,mutator:"throughput-boost"},{id:"beta-clarity",label:"Favor clarity and route through guardrails",nextNodeId:"node-gamma",tensionDelta:-3,mutator:"clarity-path"}]},{id:"node-gamma",title:"Final Directive",body:"Command has one move left before the run locks in.",choices:[{id:"gamma-strike",label:"Launch decisive strike sequence",nextNodeId:"node-alpha",tensionDelta:10,mutator:"strike-loop"},{id:"gamma-reset",label:"Reset tempo and rebuild confidence",nextNodeId:"node-alpha",tensionDelta:-6,mutator:"tempo-reset"}]}]}function hE(e,t){return{...lb[(e+t)%lb.length],progress:0,completed:!1}}function pE(e,t){const n=[...e,t];return Array.from(new Set(n)).slice(-6)}function eg(e,t,n){return{...e,campaign:{...e.campaign,depth:t,mutators:n,currentMission:fE(e.seed,t,n)}}}function ub(e){const t=UI(e),n=["baseline"];return{seed:t,raid:{party:["director"],roles:{director:"strategist"},objectives:[{id:"obj-root-cause",label:"Identify root cause chain",progress:0,target:100,completed:!1},{id:"obj-recover",label:"Recover operational stability",progress:0,target:100,completed:!1},{id:"obj-harden",label:"Harden replay strategy",progress:0,target:100,completed:!1}],completed:!1},campaign:{depth:1,lives:3,completedMissionIds:[],mutators:n,currentMission:fE(t,1,n)},narrative:{currentNodeId:"node-alpha",nodes:GI(),history:[],tension:35},skills:{points:6,nodes:[{id:"skill-focus",label:"Focus Matrix",cost:2,requires:[],unlocked:!1},{id:"skill-resilience",label:"Resilience Mesh",cost:2,requires:[],unlocked:!1},{id:"skill-surge",label:"Surge Compiler",cost:3,requires:["skill-focus"],unlocked:!1},{id:"skill-echo",label:"Echo Anticipator",cost:3,requires:["skill-resilience"],unlocked:!1}],loadout:{capacity:3,equipped:[]}},pvp:{round:0,stability:72,sabotage:28,fog:40,winner:null},time:{activeForkId:"primary",forks:[{id:"primary",label:"Primary timeline",playheadMs:0,history:[0]}]},boss:{name:"The Causality Hydra",phase:1,hp:320,maxHp:320,enraged:!1},director:{risk:30,hint:"Start with the bottleneck path and branch cautiously.",recommendedModifier:"stability_patch",lastOutcome:"mixed"},economy:{credits:140,materials:90,crafted:[]},guild:{name:"Trace Guild",members:4,operationsScore:0,eventsCompleted:0},cinematic:{queue:[]},liveops:{season:`Season-${2026+t%2}`,week:1,challenge:hE(t,1)}}}function HI(e,t,n){if(!t.trim())return e;const r=e.raid.party.includes(t)?e.raid.party:[...e.raid.party,t];return{...e,raid:{...e.raid,party:r,roles:{...e.raid.roles,[t]:n}}}}function KI(e,t,n){const r=e.raid.objectives.map(s=>{if(s.id!==t)return s;const o=ze(s.progress+n,0,s.target);return{...s,progress:o,completed:o>=s.target}}),i=r.every(s=>s.completed),a=i&&!e.raid.completed?180:0;return{...e,raid:{...e.raid,objectives:r,completed:i},economy:{...e.economy,credits:e.economy.credits+a}}}function cb(e,t){const n=e.campaign.currentMission;if(t){const a=e.campaign.depth+1,s=eg(e,a,e.campaign.mutators);return{...s,campaign:{...s.campaign,completedMissionIds:[...s.campaign.completedMissionIds,n.id]},economy:{...s.economy,credits:s.economy.credits+n.rewardCredits,materials:s.economy.materials+14},director:{...s.director,lastOutcome:"success"}}}const r=ze(e.campaign.lives-1,0,3),i=eg(e,e.campaign.depth,pE(e.campaign.mutators,"failure-loop"));return{...i,campaign:{...i.campaign,lives:r},director:{...i.director,lastOutcome:"failure"}}}function WI(e,t){const n=e.narrative.nodes.find(o=>o.id===e.narrative.currentNodeId),r=n==null?void 0:n.choices.find(o=>o.id===t);if(!n||!r)return e;const i=ze(e.narrative.tension+r.tensionDelta,0,100),a=pE(e.campaign.mutators,r.mutator),s=eg(e,e.campaign.depth,a);return{...s,narrative:{...s.narrative,currentNodeId:r.nextNodeId,history:[...s.narrative.history,{nodeId:n.id,choiceId:r.id}],tension:i}}}function YI(e,t){const n=e.skills.nodes.find(a=>a.id===t);if(!n||n.unlocked)return e;const r=new Set(e.skills.nodes.filter(a=>a.unlocked).map(a=>a.id));return!n.requires.every(a=>r.has(a))||e.skills.points<n.cost?e:{...e,skills:{...e.skills,points:e.skills.points-n.cost,nodes:e.skills.nodes.map(a=>a.id===t?{...a,unlocked:!0}:a)}}}function QI(e,t){const n=e.skills.nodes.find(r=>r.id===t);return!(n!=null&&n.unlocked)||e.skills.loadout.equipped.includes(t)||e.skills.loadout.equipped.length>=e.skills.loadout.capacity?e:{...e,skills:{...e.skills,loadout:{...e.skills.loadout,equipped:[...e.skills.loadout.equipped,t]}}}}function Wu(e,t){const n={...e.pvp};return t==="sabotage"?(n.sabotage=ze(n.sabotage+13,0,100),n.stability=ze(n.stability-11,0,100),n.fog=ze(n.fog+9,0,100)):t==="stabilize"?(n.stability=ze(n.stability+14,0,100),n.sabotage=ze(n.sabotage-8,0,100),n.fog=ze(n.fog-6,0,100)):(n.fog=ze(n.fog-16,0,100),n.stability=ze(n.stability+3,0,100),n.sabotage=ze(n.sabotage-4,0,100)),n.round+=1,n.stability<=0?n.winner="saboteur":n.sabotage<=0?n.winner="operator":n.round>=10&&(n.winner=n.stability>=n.sabotage?"operator":"saboteur"),{...e,pvp:n}}function JI(e,t,n){const r=`fork-${e.time.forks.length+1}`,i={id:r,label:t.trim()||r,playheadMs:ze(n,0,36e5),history:[ze(n,0,36e5)]};return{...e,time:{...e.time,activeForkId:r,forks:[...e.time.forks,i]}}}function XI(e,t){const n=e.time.activeForkId,r=e.time.forks.map(i=>{if(i.id!==n)return i;const a=ze(i.playheadMs-Math.abs(t),0,36e5);return{...i,playheadMs:a,history:[...i.history,a]}});return{...e,time:{...e.time,forks:r}}}function ZI(e,t){if(t==="primary")return e;const n=e.time.forks.find(a=>a.id===t),r=e.time.forks.find(a=>a.id==="primary");if(!n||!r)return e;const i={...r,playheadMs:n.playheadMs,history:[...r.history,n.playheadMs]};return{...e,time:{activeForkId:"primary",forks:[i,...e.time.forks.filter(a=>a.id!=="primary"&&a.id!==t)]}}}function Yu(e,t){const n=t==="exploit"?42:t==="strike"?24:8,r=ze(e.boss.hp-n,0,e.boss.maxHp),i=r/e.boss.maxHp,a=i<=.33?3:i<=.66?2:1;return{...e,boss:{...e.boss,hp:r,phase:a,enraged:a===3||r<=e.boss.maxHp*.2}}}function eD(e,t){const n=t.failures*12+t.retries*4+(t.latencyMs>1400?8:0),r=ze(e.director.risk+n,0,100),i=t.failures>0?"Prioritize failure triage and run a stabilizing replay branch.":t.latencyMs>1400?"Latency pressure detected. Reduce fan-out and tighten tool boundaries.":"Momentum is stable. Push a high-confidence optimization branch.",a=t.failures>1?"stability_patch":t.latencyMs>1400?"precision_lens":"overclock_core",s=t.failures>0?"failure":"success";return{...e,director:{risk:r,hint:i,recommendedModifier:a,lastOutcome:s}}}function Qu(e,t){const n=zI[t];if(!n||e.economy.credits<n.credits||e.economy.materials<n.materials)return e;const r=e.economy.crafted.includes(t)?e.economy.crafted:[...e.economy.crafted,t];let i={...e,economy:{...e.economy,credits:e.economy.credits-n.credits,materials:e.economy.materials-n.materials,crafted:r}};return t==="stability_patch"&&(i={...i,pvp:{...i.pvp,stability:ze(i.pvp.stability+8,0,100)}}),t==="precision_lens"&&(i={...i,raid:{...i.raid,objectives:i.raid.objectives.map((a,s)=>s===0?{...a,progress:ze(a.progress+10,0,a.target),completed:ze(a.progress+10,0,a.target)>=a.target}:a)}}),t==="overclock_core"&&(i={...i,boss:{...i.boss,hp:ze(i.boss.hp-16,0,i.boss.maxHp)}}),i}function db(e,t){const n=Math.round(t);return{...e,guild:{...e.guild,operationsScore:e.guild.operationsScore+n,eventsCompleted:e.guild.eventsCompleted+(n>0?1:0)},economy:{...e.economy,credits:e.economy.credits+Math.max(0,n*3)}}}function fb(e,t,n,r){const i={id:`event-${e.cinematic.queue.length+1}-${e.seed%1e3}`,type:t,message:n,intensity:r,at:Date.now()};return{...e,cinematic:{queue:[i,...e.cinematic.queue].slice(0,12)}}}function tD(e){const t=e.liveops.week+1,n=hE(e.seed,t);return{...e,liveops:{...e.liveops,week:t,challenge:n}}}function nD(e,t,n){return Math.min(n,Math.max(t,e))}function rD({state:e,playheadMs:t,onUpdate:n,session:r,playerId:i,sessionError:a,onCreateSession:s,onJoinSession:o,onLeaveSession:l,onDispatchAction:u,guild:c,onCreateGuild:f,onJoinGuild:h,onScheduleGuildEvent:m,onCompleteGuildEvent:g}){const[p,S]=x.useState(""),[v,y]=x.useState("strategist"),[w,_]=x.useState("alt path"),[C,E]=x.useState("Night Ops"),[T,j]=x.useState(""),[N,P]=x.useState("operator"),[R,O]=x.useState("guild-night-ops"),[F,X]=x.useState("Night Ops Guild"),[$,fe]=x.useState("Weekly Raid Drill"),[ie,D]=x.useState("2026-02-16T20:00:00Z"),B=!!(r!=null&&r.id&&u),V=(A,J,se)=>{if(B){u==null||u(A,J);return}n(se)},z=x.useMemo(()=>e.narrative.nodes.find(A=>A.id===e.narrative.currentNodeId),[e.narrative.currentNodeId,e.narrative.nodes]),te=x.useMemo(()=>{var se;const A=[e.raid.completed,e.campaign.depth>=3,e.narrative.history.length>=2,e.skills.loadout.equipped.length>=2,e.pvp.round>=3||e.pvp.winner!=null,e.time.forks.length>=2||((se=e.time.forks[0])==null?void 0:se.history.length)>1,e.boss.hp<e.boss.maxHp,e.director.lastOutcome!=="mixed",e.economy.crafted.length>=1,e.guild.operationsScore>0,e.cinematic.queue.length>=1,e.liveops.week>=2],J=A.filter(Boolean).length;return{done:J,total:A.length,pct:Math.round(J/A.length*100)}},[e]);return d.jsxs("section",{className:"gameplay-mode",children:[d.jsxs("header",{className:"gameplay-header",children:[d.jsxs("div",{children:[d.jsx("h2",{children:"Gameplay Command Center"}),d.jsx("p",{children:"World-class mechanics stack: raids, campaign, narrative, PvP, time control, boss runs, and liveops."}),d.jsxs("div",{className:"gameplay-inline",children:[d.jsx("input",{className:"search-input",value:C,onChange:A=>E(A.target.value),placeholder:"Session name","aria-label":"Session name"}),d.jsx("button",{className:"ghost-button",type:"button",onClick:()=>s==null?void 0:s(C),children:"Create multiplayer session"}),d.jsx("input",{className:"search-input",value:T,onChange:A=>j(A.target.value),placeholder:"Session id","aria-label":"Join session id"}),d.jsxs("select",{value:N,onChange:A=>P(A.target.value),children:[d.jsx("option",{value:"strategist",children:"Strategist"}),d.jsx("option",{value:"operator",children:"Operator"}),d.jsx("option",{value:"analyst",children:"Analyst"}),d.jsx("option",{value:"saboteur",children:"Saboteur"})]}),d.jsx("button",{className:"ghost-button",type:"button",onClick:()=>o==null?void 0:o(T,i??"director",N),children:"Join session"}),r!=null&&r.id?d.jsx("button",{className:"ghost-button",type:"button",onClick:()=>l==null?void 0:l(),children:"Leave session"}):null]}),d.jsxs("p",{children:["Session: ",(r==null?void 0:r.id)??"local-only"," ",i?` Player ${i}`:""," ",r?` Version ${r.version}`:""]}),a?d.jsx("p",{children:a}):null]}),d.jsxs("div",{className:"gameplay-completion","aria-label":"Gameplay completion",children:[d.jsxs("strong",{children:[te.done,"/",te.total]}),d.jsxs("span",{children:[te.pct,"% complete"]})]})]}),d.jsxs("div",{className:"gameplay-grid",children:[d.jsxs("article",{className:"gameplay-card",children:[d.jsx("h3",{children:"1) Co-op Incident Raids"}),d.jsxs("p",{children:["Party: ",e.raid.party.length," members"]}),d.jsxs("div",{className:"gameplay-inline",children:[d.jsx("input",{className:"search-input",value:p,onChange:A=>S(A.target.value),placeholder:"Member name","aria-label":"Raid member name"}),d.jsxs("select",{value:v,onChange:A=>y(A.target.value),children:[d.jsx("option",{value:"strategist",children:"Strategist"}),d.jsx("option",{value:"operator",children:"Operator"}),d.jsx("option",{value:"analyst",children:"Analyst"}),d.jsx("option",{value:"saboteur",children:"Saboteur"})]}),d.jsx("button",{className:"ghost-button",type:"button",onClick:()=>{p.trim()&&(B?o==null||o((r==null?void 0:r.id)??"",p.trim(),v):n(A=>HI(A,p.trim(),v)),S(""))},children:"Add member"})]}),d.jsx("div",{className:"gameplay-objectives",children:e.raid.objectives.map(A=>d.jsxs("div",{className:"gameplay-objective",children:[d.jsx("span",{children:A.label}),d.jsxs("span",{children:[A.progress,"/",A.target]}),d.jsx("button",{className:"ghost-button",type:"button",onClick:()=>V("raid.objective_progress",{objective_id:A.id,delta:25},J=>KI(J,A.id,25)),children:"+25"})]},A.id))})]}),d.jsxs("article",{className:"gameplay-card",children:[d.jsx("h3",{children:"2) Roguelike Scenario Campaign"}),d.jsxs("p",{children:["Depth ",e.campaign.depth,"  Lives ",e.campaign.lives]}),d.jsxs("p",{children:[e.campaign.currentMission.title," (difficulty ",e.campaign.currentMission.difficulty,")"]}),d.jsxs("div",{className:"gameplay-inline",children:[d.jsx("button",{className:"primary-button",type:"button",onClick:()=>V("campaign.resolve_mission",{success:!0},A=>cb(A,!0)),children:"Mission success"}),d.jsx("button",{className:"ghost-button",type:"button",onClick:()=>V("campaign.resolve_mission",{success:!1},A=>cb(A,!1)),children:"Mission fail"})]})]}),d.jsxs("article",{className:"gameplay-card",children:[d.jsx("h3",{children:"3) Branching Narrative Director"}),d.jsx("p",{children:z==null?void 0:z.title}),d.jsxs("p",{children:["Tension ",e.narrative.tension]}),d.jsx("div",{className:"gameplay-list",children:((z==null?void 0:z.choices)??[]).map(A=>d.jsx("button",{className:"ghost-button",type:"button",onClick:()=>V("narrative.choose",{choice_id:A.id},J=>WI(J,A.id)),children:A.label},A.id))})]}),d.jsxs("article",{className:"gameplay-card",children:[d.jsx("h3",{children:"4) Skill Tree + Loadout"}),d.jsxs("p",{children:["Points ",e.skills.points,"  Equipped ",e.skills.loadout.equipped.length,"/",e.skills.loadout.capacity]}),d.jsx("div",{className:"gameplay-list",children:e.skills.nodes.map(A=>d.jsxs("div",{className:"gameplay-node",children:[d.jsxs("span",{children:[A.label," (",A.cost,")"]}),d.jsx("button",{className:"ghost-button",type:"button",onClick:()=>V("skills.unlock",{player_id:i??"director",skill_id:A.id},J=>YI(J,A.id)),children:A.unlocked?"Unlocked":"Unlock"}),d.jsx("button",{className:"ghost-button",type:"button",onClick:()=>V("skills.equip",{player_id:i??"director",skill_id:A.id},J=>QI(J,A.id)),children:"Equip"})]},A.id))})]}),d.jsxs("article",{className:"gameplay-card",children:[d.jsx("h3",{children:"5) Asymmetric PvP"}),d.jsxs("p",{children:["Round ",e.pvp.round,"  Stability ",e.pvp.stability,"  Sabotage ",e.pvp.sabotage]}),d.jsxs("div",{className:"gameplay-inline",children:[d.jsx("button",{className:"ghost-button",type:"button",onClick:()=>V("pvp.act",{action:"sabotage"},A=>Wu(A,"sabotage")),children:"Sabotage"}),d.jsx("button",{className:"ghost-button",type:"button",onClick:()=>V("pvp.act",{action:"stabilize"},A=>Wu(A,"stabilize")),children:"Stabilize"}),d.jsx("button",{className:"ghost-button",type:"button",onClick:()=>V("pvp.act",{action:"scan"},A=>Wu(A,"scan")),children:"Scan"})]})]}),d.jsxs("article",{className:"gameplay-card",children:[d.jsx("h3",{children:"6) Time Manipulation"}),d.jsxs("p",{children:["Active fork: ",e.time.activeForkId]}),d.jsxs("div",{className:"gameplay-inline",children:[d.jsx("input",{className:"search-input",value:w,onChange:A=>_(A.target.value),"aria-label":"Fork label"}),d.jsx("button",{className:"ghost-button",type:"button",onClick:()=>V("time.create_fork",{label:w,playhead_ms:t},A=>JI(A,w,t)),children:"Create fork"}),d.jsx("button",{className:"ghost-button",type:"button",onClick:()=>V("time.rewind",{amount_ms:1e3},A=>XI(A,1e3)),children:"Rewind 1s"}),d.jsx("button",{className:"ghost-button",type:"button",onClick:()=>V("time.merge",{fork_id:e.time.activeForkId},A=>ZI(A,A.time.activeForkId)),children:"Merge"})]})]}),d.jsxs("article",{className:"gameplay-card",children:[d.jsx("h3",{children:"7) Boss Encounter Runs"}),d.jsxs("p",{children:[e.boss.name,"  Phase ",e.boss.phase,"  HP ",e.boss.hp,"/",e.boss.maxHp]}),d.jsxs("div",{className:"gameplay-inline",children:[d.jsx("button",{className:"ghost-button",type:"button",onClick:()=>V("boss.act",{action:"strike"},A=>Yu(A,"strike")),children:"Strike"}),d.jsx("button",{className:"ghost-button",type:"button",onClick:()=>V("boss.act",{action:"shield"},A=>Yu(A,"shield")),children:"Shield"}),d.jsx("button",{className:"ghost-button",type:"button",onClick:()=>V("boss.act",{action:"exploit"},A=>Yu(A,"exploit")),children:"Exploit"})]})]}),d.jsxs("article",{className:"gameplay-card",children:[d.jsx("h3",{children:"8) Adaptive AI Dungeon Master"}),d.jsxs("p",{children:["Risk ",e.director.risk,"  Outcome ",e.director.lastOutcome]}),d.jsx("p",{children:e.director.hint}),d.jsx("button",{className:"ghost-button",type:"button",onClick:()=>{var U;const A=e.pvp.sabotage>e.pvp.stability?2:0,J=Math.floor((((U=e.raid.objectives[0])==null?void 0:U.progress)??0)/40),se=900+e.pvp.fog*10;V("director.evaluate",{failures:A,retries:J,latency_ms:se},me=>eD(me,{failures:A,retries:J,latencyMs:se}))},children:"Recompute guidance"})]}),d.jsxs("article",{className:"gameplay-card",children:[d.jsx("h3",{children:"9) Mission Economy + Crafting"}),d.jsxs("p",{children:["Credits ",e.economy.credits,"  Materials ",e.economy.materials]}),d.jsxs("div",{className:"gameplay-inline",children:[d.jsx("button",{className:"ghost-button",type:"button",onClick:()=>V("economy.craft",{recipe_id:"stability_patch"},A=>Qu(A,"stability_patch")),children:"Craft stability patch"}),d.jsx("button",{className:"ghost-button",type:"button",onClick:()=>V("economy.craft",{recipe_id:"precision_lens"},A=>Qu(A,"precision_lens")),children:"Craft precision lens"}),d.jsx("button",{className:"ghost-button",type:"button",onClick:()=>V("economy.craft",{recipe_id:"overclock_core"},A=>Qu(A,"overclock_core")),children:"Craft overclock core"})]})]}),d.jsxs("article",{className:"gameplay-card",children:[d.jsx("h3",{children:"10) Guild Operations"}),d.jsxs("p",{children:[e.guild.name,"  Ops score ",e.guild.operationsScore,"  Events ",e.guild.eventsCompleted]}),d.jsxs("div",{className:"gameplay-inline",children:[d.jsx("input",{className:"search-input",value:R,onChange:A=>O(A.target.value),placeholder:"Guild id","aria-label":"Guild id"}),d.jsx("input",{className:"search-input",value:F,onChange:A=>X(A.target.value),placeholder:"Guild name","aria-label":"Guild name"}),d.jsx("button",{className:"ghost-button",type:"button",onClick:()=>f==null?void 0:f(R,F),children:"Create guild"}),d.jsx("button",{className:"ghost-button",type:"button",onClick:()=>h==null?void 0:h(R,p.trim()||i||"director"),children:"Join guild"})]}),d.jsxs("div",{className:"gameplay-inline",children:[d.jsx("input",{className:"search-input",value:$,onChange:A=>fe(A.target.value),placeholder:"Event title","aria-label":"Guild event title"}),d.jsx("input",{className:"search-input",value:ie,onChange:A=>D(A.target.value),placeholder:"2026-02-16T20:00:00Z","aria-label":"Guild event schedule"}),d.jsx("button",{className:"ghost-button",type:"button",onClick:()=>m==null?void 0:m(R,$,ie),children:"Schedule event"})]}),c?d.jsxs("div",{className:"gameplay-list",children:[d.jsxs("p",{children:[c.member_count," members  Score ",c.operations_score]}),c.scoreboard.slice(0,4).map(A=>d.jsxs("div",{className:"gameplay-node",children:[d.jsx("span",{children:A.player_id}),d.jsx("span",{children:A.score})]},A.player_id)),c.events.slice(-3).map(A=>d.jsxs("div",{className:"gameplay-node",children:[d.jsx("span",{children:A.title}),d.jsx("button",{className:"ghost-button",type:"button",onClick:()=>g==null?void 0:g(c.id,A.id,10),children:"Complete"})]},A.id))]}):null,d.jsxs("div",{className:"gameplay-inline",children:[d.jsx("button",{className:"ghost-button",type:"button",onClick:()=>V("guild.op",{impact:6},A=>db(A,6)),children:"Positive op"}),d.jsx("button",{className:"ghost-button",type:"button",onClick:()=>V("guild.op",{impact:-3},A=>db(A,-3)),children:"Risky op"})]})]}),d.jsxs("article",{className:"gameplay-card",children:[d.jsx("h3",{children:"11) Cinematic Event Engine"}),d.jsxs("p",{children:[e.cinematic.queue.length," queued events"]}),d.jsxs("div",{className:"gameplay-inline",children:[d.jsx("button",{className:"ghost-button",type:"button",onClick:()=>V("cinematic.emit",{event_type:"critical",message:"Critical cascade detected",intensity:3},A=>fb(A,"critical","Critical cascade detected",3)),children:"Critical beat"}),d.jsx("button",{className:"ghost-button",type:"button",onClick:()=>V("cinematic.emit",{event_type:"success",message:"System stabilizing",intensity:2},A=>fb(A,"success","System stabilizing",2)),children:"Success beat"})]})]}),d.jsxs("article",{className:"gameplay-card",children:[d.jsx("h3",{children:"12) Seasonal LiveOps"}),d.jsxs("p",{children:[e.liveops.season,"  Week ",e.liveops.week]}),d.jsx("p",{children:e.liveops.challenge.title}),d.jsxs("div",{className:"gameplay-inline",children:[d.jsx("button",{className:"ghost-button",type:"button",onClick:()=>V("liveops.advance_week",{},A=>tD(A)),children:"Next week"}),d.jsx("button",{className:"ghost-button",type:"button",onClick:()=>V("liveops.progress",{delta:1},A=>({...A,liveops:{...A.liveops,challenge:{...A.liveops.challenge,progress:nD(A.liveops.challenge.progress+1,0,A.liveops.challenge.goal),completed:A.liveops.challenge.progress+1>=A.liveops.challenge.goal}}})),children:"Progress challenge"})]})]})]})]})}const mE=x.createContext({});function iD(e){const t=x.useRef(null);return t.current===null&&(t.current=e()),t.current}const bv=x.createContext(null),gE=x.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});function aD(e=!0){const t=x.useContext(bv);if(t===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:i}=t,a=x.useId();x.useEffect(()=>{e&&i(a)},[e]);const s=x.useCallback(()=>e&&r&&r(a),[a,r,e]);return!n&&r?[!1,s]:[!0]}const xv=typeof window<"u",sD=xv?x.useLayoutEffect:x.useEffect,Mt=e=>e;let vE=Mt;function wv(e){let t;return()=>(t===void 0&&(t=e()),t)}const Wi=(e,t,n)=>{const r=t-e;return r===0?1:(n-e)/r},An=e=>e*1e3,In=e=>e/1e3,oD={useManualTiming:!1};function lD(e){let t=new Set,n=new Set,r=!1,i=!1;const a=new WeakSet;let s={delta:0,timestamp:0,isProcessing:!1};function o(u){a.has(u)&&(l.schedule(u),e()),u(s)}const l={schedule:(u,c=!1,f=!1)=>{const m=f&&r?t:n;return c&&a.add(u),m.has(u)||m.add(u),u},cancel:u=>{n.delete(u),a.delete(u)},process:u=>{if(s=u,r){i=!0;return}r=!0,[t,n]=[n,t],t.forEach(o),t.clear(),r=!1,i&&(i=!1,l.process(u))}};return l}const lo=["read","resolveKeyframes","update","preRender","render","postRender"],uD=40;function yE(e,t){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},a=()=>n=!0,s=lo.reduce((v,y)=>(v[y]=lD(a),v),{}),{read:o,resolveKeyframes:l,update:u,preRender:c,render:f,postRender:h}=s,m=()=>{const v=performance.now();n=!1,i.delta=r?1e3/60:Math.max(Math.min(v-i.timestamp,uD),1),i.timestamp=v,i.isProcessing=!0,o.process(i),l.process(i),u.process(i),c.process(i),f.process(i),h.process(i),i.isProcessing=!1,n&&t&&(r=!1,e(m))},g=()=>{n=!0,r=!0,i.isProcessing||e(m)};return{schedule:lo.reduce((v,y)=>{const w=s[y];return v[y]=(_,C=!1,E=!1)=>(n||g(),w.schedule(_,C,E)),v},{}),cancel:v=>{for(let y=0;y<lo.length;y++)s[lo[y]].cancel(v)},state:i,steps:s}}const{schedule:Ne,cancel:yr,state:rt,steps:Ju}=yE(typeof requestAnimationFrame<"u"?requestAnimationFrame:Mt,!0),bE=x.createContext({strict:!1}),hb={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Yi={};for(const e in hb)Yi[e]={isEnabled:t=>hb[e].some(n=>!!t[n])};function cD(e){for(const t in e)Yi[t]={...Yi[t],...e[t]}}const dD=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function el(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||dD.has(e)}let xE=e=>!el(e);function fD(e){e&&(xE=t=>t.startsWith("on")?!el(t):e(t))}try{fD(require("@emotion/is-prop-valid").default)}catch{}function hD(e,t,n){const r={};for(const i in e)i==="values"&&typeof e.values=="object"||(xE(i)||n===!0&&el(i)||!t&&!el(i)||e.draggable&&i.startsWith("onDrag"))&&(r[i]=e[i]);return r}function pD(e){if(typeof Proxy>"u")return e;const t=new Map,n=(...r)=>e(...r);return new Proxy(n,{get:(r,i)=>i==="create"?e:(t.has(i)||t.set(i,e(i)),t.get(i))})}const Tl=x.createContext({});function gs(e){return typeof e=="string"||Array.isArray(e)}function Nl(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}const Sv=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],_v=["initial",...Sv];function Ml(e){return Nl(e.animate)||_v.some(t=>gs(e[t]))}function wE(e){return!!(Ml(e)||e.variants)}function mD(e,t){if(Ml(e)){const{initial:n,animate:r}=e;return{initial:n===!1||gs(n)?n:void 0,animate:gs(r)?r:void 0}}return e.inherit!==!1?t:{}}function gD(e){const{initial:t,animate:n}=mD(e,x.useContext(Tl));return x.useMemo(()=>({initial:t,animate:n}),[pb(t),pb(n)])}function pb(e){return Array.isArray(e)?e.join(" "):e}const vD=Symbol.for("motionComponentSymbol");function Mi(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function yD(e,t,n){return x.useCallback(r=>{r&&e.onMount&&e.onMount(r),t&&(r?t.mount(r):t.unmount()),n&&(typeof n=="function"?n(r):Mi(n)&&(n.current=r))},[t])}const kv=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),bD="framerAppearId",SE="data-"+kv(bD),{schedule:Cv}=yE(queueMicrotask,!1),_E=x.createContext({});function xD(e,t,n,r,i){var a,s;const{visualElement:o}=x.useContext(Tl),l=x.useContext(bE),u=x.useContext(bv),c=x.useContext(gE).reducedMotion,f=x.useRef(null);r=r||l.renderer,!f.current&&r&&(f.current=r(e,{visualState:t,parent:o,props:n,presenceContext:u,blockInitialAnimation:u?u.initial===!1:!1,reducedMotionConfig:c}));const h=f.current,m=x.useContext(_E);h&&!h.projection&&i&&(h.type==="html"||h.type==="svg")&&wD(f.current,n,i,m);const g=x.useRef(!1);x.useInsertionEffect(()=>{h&&g.current&&h.update(n,u)});const p=n[SE],S=x.useRef(!!p&&!(!((a=window.MotionHandoffIsComplete)===null||a===void 0)&&a.call(window,p))&&((s=window.MotionHasOptimisedAnimation)===null||s===void 0?void 0:s.call(window,p)));return sD(()=>{h&&(g.current=!0,window.MotionIsMounted=!0,h.updateFeatures(),Cv.render(h.render),S.current&&h.animationState&&h.animationState.animateChanges())}),x.useEffect(()=>{h&&(!S.current&&h.animationState&&h.animationState.animateChanges(),S.current&&(queueMicrotask(()=>{var v;(v=window.MotionHandoffMarkAsComplete)===null||v===void 0||v.call(window,p)}),S.current=!1))}),h}function wD(e,t,n,r){const{layoutId:i,layout:a,drag:s,dragConstraints:o,layoutScroll:l,layoutRoot:u}=t;e.projection=new n(e.latestValues,t["data-framer-portal-id"]?void 0:kE(e.parent)),e.projection.setOptions({layoutId:i,layout:a,alwaysMeasureLayout:!!s||o&&Mi(o),visualElement:e,animationType:typeof a=="string"?a:"both",initialPromotionConfig:r,layoutScroll:l,layoutRoot:u})}function kE(e){if(e)return e.options.allowProjection!==!1?e.projection:kE(e.parent)}function SD({preloadedFeatures:e,createVisualElement:t,useRender:n,useVisualState:r,Component:i}){var a,s;e&&cD(e);function o(u,c){let f;const h={...x.useContext(gE),...u,layoutId:_D(u)},{isStatic:m}=h,g=gD(u),p=r(u,m);if(!m&&xv){kD();const S=CD(h);f=S.MeasureLayout,g.visualElement=xD(i,p,h,t,S.ProjectionNode)}return d.jsxs(Tl.Provider,{value:g,children:[f&&g.visualElement?d.jsx(f,{visualElement:g.visualElement,...h}):null,n(i,u,yD(p,g.visualElement,c),p,m,g.visualElement)]})}o.displayName=`motion.${typeof i=="string"?i:`create(${(s=(a=i.displayName)!==null&&a!==void 0?a:i.name)!==null&&s!==void 0?s:""})`}`;const l=x.forwardRef(o);return l[vD]=i,l}function _D({layoutId:e}){const t=x.useContext(mE).id;return t&&e!==void 0?t+"-"+e:e}function kD(e,t){x.useContext(bE).strict}function CD(e){const{drag:t,layout:n}=Yi;if(!t&&!n)return{};const r={...t,...n};return{MeasureLayout:t!=null&&t.isEnabled(e)||n!=null&&n.isEnabled(e)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const jD=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function jv(e){return typeof e!="string"||e.includes("-")?!1:!!(jD.indexOf(e)>-1||/[A-Z]/u.test(e))}function mb(e){const t=[{},{}];return e==null||e.values.forEach((n,r)=>{t[0][r]=n.get(),t[1][r]=n.getVelocity()}),t}function Ev(e,t,n,r){if(typeof t=="function"){const[i,a]=mb(r);t=t(n!==void 0?n:e.custom,i,a)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[i,a]=mb(r);t=t(n!==void 0?n:e.custom,i,a)}return t}const tg=e=>Array.isArray(e),ED=e=>!!(e&&typeof e=="object"&&e.mix&&e.toValue),TD=e=>tg(e)?e[e.length-1]||0:e,ct=e=>!!(e&&e.getVelocity);function Eo(e){const t=ct(e)?e.get():e;return ED(t)?t.toValue():t}function ND({scrapeMotionValuesFromProps:e,createRenderState:t,onUpdate:n},r,i,a){const s={latestValues:MD(r,i,a,e),renderState:t()};return n&&(s.onMount=o=>n({props:r,current:o,...s}),s.onUpdate=o=>n(o)),s}const CE=e=>(t,n)=>{const r=x.useContext(Tl),i=x.useContext(bv),a=()=>ND(e,t,r,i);return n?a():iD(a)};function MD(e,t,n,r){const i={},a=r(e,{});for(const h in a)i[h]=Eo(a[h]);let{initial:s,animate:o}=e;const l=Ml(e),u=wE(e);t&&u&&!l&&e.inherit!==!1&&(s===void 0&&(s=t.initial),o===void 0&&(o=t.animate));let c=n?n.initial===!1:!1;c=c||s===!1;const f=c?o:s;if(f&&typeof f!="boolean"&&!Nl(f)){const h=Array.isArray(f)?f:[f];for(let m=0;m<h.length;m++){const g=Ev(e,h[m]);if(g){const{transitionEnd:p,transition:S,...v}=g;for(const y in v){let w=v[y];if(Array.isArray(w)){const _=c?w.length-1:0;w=w[_]}w!==null&&(i[y]=w)}for(const y in p)i[y]=p[y]}}}return i}const ea=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Zr=new Set(ea),jE=e=>t=>typeof t=="string"&&t.startsWith(e),EE=jE("--"),PD=jE("var(--"),Tv=e=>PD(e)?RD.test(e.split("/*")[0].trim()):!1,RD=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,TE=(e,t)=>t&&typeof e=="number"?t.transform(e):e,Fn=(e,t,n)=>n>t?t:n<e?e:n,ta={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},vs={...ta,transform:e=>Fn(0,1,e)},uo={...ta,default:1},js=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),Zn=js("deg"),vn=js("%"),Z=js("px"),AD=js("vh"),ID=js("vw"),gb={...vn,parse:e=>vn.parse(e)/100,transform:e=>vn.transform(e*100)},DD={borderWidth:Z,borderTopWidth:Z,borderRightWidth:Z,borderBottomWidth:Z,borderLeftWidth:Z,borderRadius:Z,radius:Z,borderTopLeftRadius:Z,borderTopRightRadius:Z,borderBottomRightRadius:Z,borderBottomLeftRadius:Z,width:Z,maxWidth:Z,height:Z,maxHeight:Z,top:Z,right:Z,bottom:Z,left:Z,padding:Z,paddingTop:Z,paddingRight:Z,paddingBottom:Z,paddingLeft:Z,margin:Z,marginTop:Z,marginRight:Z,marginBottom:Z,marginLeft:Z,backgroundPositionX:Z,backgroundPositionY:Z},OD={rotate:Zn,rotateX:Zn,rotateY:Zn,rotateZ:Zn,scale:uo,scaleX:uo,scaleY:uo,scaleZ:uo,skew:Zn,skewX:Zn,skewY:Zn,distance:Z,translateX:Z,translateY:Z,translateZ:Z,x:Z,y:Z,z:Z,perspective:Z,transformPerspective:Z,opacity:vs,originX:gb,originY:gb,originZ:Z},vb={...ta,transform:Math.round},Nv={...DD,...OD,zIndex:vb,size:Z,fillOpacity:vs,strokeOpacity:vs,numOctaves:vb},LD={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},qD=ea.length;function FD(e,t,n){let r="",i=!0;for(let a=0;a<qD;a++){const s=ea[a],o=e[s];if(o===void 0)continue;let l=!0;if(typeof o=="number"?l=o===(s.startsWith("scale")?1:0):l=parseFloat(o)===0,!l||n){const u=TE(o,Nv[s]);if(!l){i=!1;const c=LD[s]||s;r+=`${c}(${u}) `}n&&(t[s]=u)}}return r=r.trim(),n?r=n(t,i?"":r):i&&(r="none"),r}function Mv(e,t,n){const{style:r,vars:i,transformOrigin:a}=e;let s=!1,o=!1;for(const l in t){const u=t[l];if(Zr.has(l)){s=!0;continue}else if(EE(l)){i[l]=u;continue}else{const c=TE(u,Nv[l]);l.startsWith("origin")?(o=!0,a[l]=c):r[l]=c}}if(t.transform||(s||n?r.transform=FD(t,e.transform,n):r.transform&&(r.transform="none")),o){const{originX:l="50%",originY:u="50%",originZ:c=0}=a;r.transformOrigin=`${l} ${u} ${c}`}}const VD={offset:"stroke-dashoffset",array:"stroke-dasharray"},$D={offset:"strokeDashoffset",array:"strokeDasharray"};function BD(e,t,n=1,r=0,i=!0){e.pathLength=1;const a=i?VD:$D;e[a.offset]=Z.transform(-r);const s=Z.transform(t),o=Z.transform(n);e[a.array]=`${s} ${o}`}function yb(e,t,n){return typeof e=="string"?e:Z.transform(t+n*e)}function zD(e,t,n){const r=yb(t,e.x,e.width),i=yb(n,e.y,e.height);return`${r} ${i}`}function Pv(e,{attrX:t,attrY:n,attrScale:r,originX:i,originY:a,pathLength:s,pathSpacing:o=1,pathOffset:l=0,...u},c,f){if(Mv(e,u,f),c){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:h,style:m,dimensions:g}=e;h.transform&&(g&&(m.transform=h.transform),delete h.transform),g&&(i!==void 0||a!==void 0||m.transform)&&(m.transformOrigin=zD(g,i!==void 0?i:.5,a!==void 0?a:.5)),t!==void 0&&(h.x=t),n!==void 0&&(h.y=n),r!==void 0&&(h.scale=r),s!==void 0&&BD(h,s,o,l,!1)}const Rv=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),NE=()=>({...Rv(),attrs:{}}),Av=e=>typeof e=="string"&&e.toLowerCase()==="svg";function ME(e,{style:t,vars:n},r,i){Object.assign(e.style,t,i&&i.getProjectionStyles(r));for(const a in n)e.style.setProperty(a,n[a])}const PE=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function RE(e,t,n,r){ME(e,t,void 0,r);for(const i in t.attrs)e.setAttribute(PE.has(i)?i:kv(i),t.attrs[i])}const tl={};function UD(e){Object.assign(tl,e)}function AE(e,{layout:t,layoutId:n}){return Zr.has(e)||e.startsWith("origin")||(t||n!==void 0)&&(!!tl[e]||e==="opacity")}function Iv(e,t,n){var r;const{style:i}=e,a={};for(const s in i)(ct(i[s])||t.style&&ct(t.style[s])||AE(s,e)||((r=n==null?void 0:n.getValue(s))===null||r===void 0?void 0:r.liveStyle)!==void 0)&&(a[s]=i[s]);return a}function IE(e,t,n){const r=Iv(e,t,n);for(const i in e)if(ct(e[i])||ct(t[i])){const a=ea.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[a]=e[i]}return r}function GD(e,t){try{t.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{t.dimensions={x:0,y:0,width:0,height:0}}}const bb=["x","y","width","height","cx","cy","r"],HD={useVisualState:CE({scrapeMotionValuesFromProps:IE,createRenderState:NE,onUpdate:({props:e,prevProps:t,current:n,renderState:r,latestValues:i})=>{if(!n)return;let a=!!e.drag;if(!a){for(const o in i)if(Zr.has(o)){a=!0;break}}if(!a)return;let s=!t;if(t)for(let o=0;o<bb.length;o++){const l=bb[o];e[l]!==t[l]&&(s=!0)}s&&Ne.read(()=>{GD(n,r),Ne.render(()=>{Pv(r,i,Av(n.tagName),e.transformTemplate),RE(n,r)})})}})},KD={useVisualState:CE({scrapeMotionValuesFromProps:Iv,createRenderState:Rv})};function DE(e,t,n){for(const r in t)!ct(t[r])&&!AE(r,n)&&(e[r]=t[r])}function WD({transformTemplate:e},t){return x.useMemo(()=>{const n=Rv();return Mv(n,t,e),Object.assign({},n.vars,n.style)},[t])}function YD(e,t){const n=e.style||{},r={};return DE(r,n,e),Object.assign(r,WD(e,t)),r}function QD(e,t){const n={},r=YD(e,t);return e.drag&&e.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=r,n}function JD(e,t,n,r){const i=x.useMemo(()=>{const a=NE();return Pv(a,t,Av(r),e.transformTemplate),{...a.attrs,style:{...a.style}}},[t]);if(e.style){const a={};DE(a,e.style,e),i.style={...a,...i.style}}return i}function XD(e=!1){return(n,r,i,{latestValues:a},s)=>{const l=(jv(n)?JD:QD)(r,a,s,n),u=hD(r,typeof n=="string",e),c=n!==x.Fragment?{...u,...l,ref:i}:{},{children:f}=r,h=x.useMemo(()=>ct(f)?f.get():f,[f]);return x.createElement(n,{...c,children:h})}}function ZD(e,t){return function(r,{forwardMotionProps:i}={forwardMotionProps:!1}){const s={...jv(r)?HD:KD,preloadedFeatures:e,useRender:XD(i),createVisualElement:t,Component:r};return SD(s)}}function OE(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}function Pl(e,t,n){const r=e.getProps();return Ev(r,t,n!==void 0?n:r.custom,e)}const e2=wv(()=>window.ScrollTimeline!==void 0);class t2{constructor(t){this.stop=()=>this.runAll("stop"),this.animations=t.filter(Boolean)}get finished(){return Promise.all(this.animations.map(t=>"finished"in t?t.finished:t))}getAll(t){return this.animations[0][t]}setAll(t,n){for(let r=0;r<this.animations.length;r++)this.animations[r][t]=n}attachTimeline(t,n){const r=this.animations.map(i=>{if(e2()&&i.attachTimeline)return i.attachTimeline(t);if(typeof n=="function")return n(i)});return()=>{r.forEach((i,a)=>{i&&i(),this.animations[a].stop()})}}get time(){return this.getAll("time")}set time(t){this.setAll("time",t)}get speed(){return this.getAll("speed")}set speed(t){this.setAll("speed",t)}get startTime(){return this.getAll("startTime")}get duration(){let t=0;for(let n=0;n<this.animations.length;n++)t=Math.max(t,this.animations[n].duration);return t}runAll(t){this.animations.forEach(n=>n[t]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class n2 extends t2{then(t,n){return Promise.all(this.animations).then(t).catch(n)}}function Dv(e,t){return e?e[t]||e.default||e:void 0}const ng=2e4;function LE(e){let t=0;const n=50;let r=e.next(t);for(;!r.done&&t<ng;)t+=n,r=e.next(t);return t>=ng?1/0:t}function Ov(e){return typeof e=="function"}function xb(e,t){e.timeline=t,e.onfinish=null}const Lv=e=>Array.isArray(e)&&typeof e[0]=="number",r2={linearEasing:void 0};function i2(e,t){const n=wv(e);return()=>{var r;return(r=r2[t])!==null&&r!==void 0?r:n()}}const nl=i2(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),qE=(e,t,n=10)=>{let r="";const i=Math.max(Math.round(t/n),2);for(let a=0;a<i;a++)r+=e(Wi(0,i-1,a))+", ";return`linear(${r.substring(0,r.length-2)})`};function FE(e){return!!(typeof e=="function"&&nl()||!e||typeof e=="string"&&(e in rg||nl())||Lv(e)||Array.isArray(e)&&e.every(FE))}const Ma=([e,t,n,r])=>`cubic-bezier(${e}, ${t}, ${n}, ${r})`,rg={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Ma([0,.65,.55,1]),circOut:Ma([.55,0,1,.45]),backIn:Ma([.31,.01,.66,-.59]),backOut:Ma([.33,1.53,.69,.99])};function VE(e,t){if(e)return typeof e=="function"&&nl()?qE(e,t):Lv(e)?Ma(e):Array.isArray(e)?e.map(n=>VE(n,t)||rg.easeOut):rg[e]}const Jt={x:!1,y:!1};function $E(){return Jt.x||Jt.y}function a2(e,t,n){var r;if(e instanceof Element)return[e];if(typeof e=="string"){let i=document;const a=(r=void 0)!==null&&r!==void 0?r:i.querySelectorAll(e);return a?Array.from(a):[]}return Array.from(e)}function BE(e,t){const n=a2(e),r=new AbortController,i={passive:!0,...t,signal:r.signal};return[n,i,()=>r.abort()]}function wb(e){return t=>{t.pointerType==="touch"||$E()||e(t)}}function s2(e,t,n={}){const[r,i,a]=BE(e,n),s=wb(o=>{const{target:l}=o,u=t(o);if(typeof u!="function"||!l)return;const c=wb(f=>{u(f),l.removeEventListener("pointerleave",c)});l.addEventListener("pointerleave",c,i)});return r.forEach(o=>{o.addEventListener("pointerenter",s,i)}),a}const zE=(e,t)=>t?e===t?!0:zE(e,t.parentElement):!1,qv=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1,o2=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function l2(e){return o2.has(e.tagName)||e.tabIndex!==-1}const Pa=new WeakSet;function Sb(e){return t=>{t.key==="Enter"&&e(t)}}function Xu(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const u2=(e,t)=>{const n=e.currentTarget;if(!n)return;const r=Sb(()=>{if(Pa.has(n))return;Xu(n,"down");const i=Sb(()=>{Xu(n,"up")}),a=()=>Xu(n,"cancel");n.addEventListener("keyup",i,t),n.addEventListener("blur",a,t)});n.addEventListener("keydown",r,t),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),t)};function _b(e){return qv(e)&&!$E()}function c2(e,t,n={}){const[r,i,a]=BE(e,n),s=o=>{const l=o.currentTarget;if(!_b(o)||Pa.has(l))return;Pa.add(l);const u=t(o),c=(m,g)=>{window.removeEventListener("pointerup",f),window.removeEventListener("pointercancel",h),!(!_b(m)||!Pa.has(l))&&(Pa.delete(l),typeof u=="function"&&u(m,{success:g}))},f=m=>{c(m,n.useGlobalTarget||zE(l,m.target))},h=m=>{c(m,!1)};window.addEventListener("pointerup",f,i),window.addEventListener("pointercancel",h,i)};return r.forEach(o=>{!l2(o)&&o.getAttribute("tabindex")===null&&(o.tabIndex=0),(n.useGlobalTarget?window:o).addEventListener("pointerdown",s,i),o.addEventListener("focus",u=>u2(u,i),i)}),a}function d2(e){return e==="x"||e==="y"?Jt[e]?null:(Jt[e]=!0,()=>{Jt[e]=!1}):Jt.x||Jt.y?null:(Jt.x=Jt.y=!0,()=>{Jt.x=Jt.y=!1})}const UE=new Set(["width","height","top","left","right","bottom",...ea]);let To;function f2(){To=void 0}const yn={now:()=>(To===void 0&&yn.set(rt.isProcessing||oD.useManualTiming?rt.timestamp:performance.now()),To),set:e=>{To=e,queueMicrotask(f2)}};function Fv(e,t){e.indexOf(t)===-1&&e.push(t)}function Vv(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}class $v{constructor(){this.subscriptions=[]}add(t){return Fv(this.subscriptions,t),()=>Vv(this.subscriptions,t)}notify(t,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](t,n,r);else for(let a=0;a<i;a++){const s=this.subscriptions[a];s&&s(t,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function GE(e,t){return t?e*(1e3/t):0}const kb=30,h2=e=>!isNaN(parseFloat(e));class p2{constructor(t,n={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,i=!0)=>{const a=yn.now();this.updatedAt!==a&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(t),this.owner=n.owner}setCurrent(t){this.current=t,this.updatedAt=yn.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=h2(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,n){this.events[t]||(this.events[t]=new $v);const r=this.events[t].add(n);return t==="change"?()=>{r(),Ne.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,n){this.passiveEffect=t,this.stopPassiveEffect=n}set(t,n=!0){!n||!this.passiveEffect?this.updateAndNotify(t,n):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-r}jump(t,n=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=yn.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>kb)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,kb);return GE(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(t){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=t(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function ys(e,t){return new p2(e,t)}function m2(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,ys(n))}function g2(e,t){const n=Pl(e,t);let{transitionEnd:r={},transition:i={},...a}=n||{};a={...a,...r};for(const s in a){const o=TD(a[s]);m2(e,s,o)}}function v2(e){return!!(ct(e)&&e.add)}function ig(e,t){const n=e.getValue("willChange");if(v2(n))return n.add(t)}function HE(e){return e.props[SE]}const KE=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,y2=1e-7,b2=12;function x2(e,t,n,r,i){let a,s,o=0;do s=t+(n-t)/2,a=KE(s,r,i)-e,a>0?n=s:t=s;while(Math.abs(a)>y2&&++o<b2);return s}function Es(e,t,n,r){if(e===t&&n===r)return Mt;const i=a=>x2(a,0,1,e,n);return a=>a===0||a===1?a:KE(i(a),t,r)}const WE=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,YE=e=>t=>1-e(1-t),QE=Es(.33,1.53,.69,.99),Bv=YE(QE),JE=WE(Bv),XE=e=>(e*=2)<1?.5*Bv(e):.5*(2-Math.pow(2,-10*(e-1))),zv=e=>1-Math.sin(Math.acos(e)),ZE=YE(zv),eT=WE(zv),tT=e=>/^0[^.\s]+$/u.test(e);function w2(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||tT(e):!0}const Wa=e=>Math.round(e*1e5)/1e5,Uv=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function S2(e){return e==null}const _2=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Gv=(e,t)=>n=>!!(typeof n=="string"&&_2.test(n)&&n.startsWith(e)||t&&!S2(n)&&Object.prototype.hasOwnProperty.call(n,t)),nT=(e,t,n)=>r=>{if(typeof r!="string")return r;const[i,a,s,o]=r.match(Uv);return{[e]:parseFloat(i),[t]:parseFloat(a),[n]:parseFloat(s),alpha:o!==void 0?parseFloat(o):1}},k2=e=>Fn(0,255,e),Zu={...ta,transform:e=>Math.round(k2(e))},Vr={test:Gv("rgb","red"),parse:nT("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:r=1})=>"rgba("+Zu.transform(e)+", "+Zu.transform(t)+", "+Zu.transform(n)+", "+Wa(vs.transform(r))+")"};function C2(e){let t="",n="",r="",i="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),r=e.substring(5,7),i=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),r=e.substring(3,4),i=e.substring(4,5),t+=t,n+=n,r+=r,i+=i),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const ag={test:Gv("#"),parse:C2,transform:Vr.transform},Pi={test:Gv("hsl","hue"),parse:nT("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:r=1})=>"hsla("+Math.round(e)+", "+vn.transform(Wa(t))+", "+vn.transform(Wa(n))+", "+Wa(vs.transform(r))+")"},lt={test:e=>Vr.test(e)||ag.test(e)||Pi.test(e),parse:e=>Vr.test(e)?Vr.parse(e):Pi.test(e)?Pi.parse(e):ag.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?Vr.transform(e):Pi.transform(e)},j2=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function E2(e){var t,n;return isNaN(e)&&typeof e=="string"&&(((t=e.match(Uv))===null||t===void 0?void 0:t.length)||0)+(((n=e.match(j2))===null||n===void 0?void 0:n.length)||0)>0}const rT="number",iT="color",T2="var",N2="var(",Cb="${}",M2=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function bs(e){const t=e.toString(),n=[],r={color:[],number:[],var:[]},i=[];let a=0;const o=t.replace(M2,l=>(lt.test(l)?(r.color.push(a),i.push(iT),n.push(lt.parse(l))):l.startsWith(N2)?(r.var.push(a),i.push(T2),n.push(l)):(r.number.push(a),i.push(rT),n.push(parseFloat(l))),++a,Cb)).split(Cb);return{values:n,split:o,indexes:r,types:i}}function aT(e){return bs(e).values}function sT(e){const{split:t,types:n}=bs(e),r=t.length;return i=>{let a="";for(let s=0;s<r;s++)if(a+=t[s],i[s]!==void 0){const o=n[s];o===rT?a+=Wa(i[s]):o===iT?a+=lt.transform(i[s]):a+=i[s]}return a}}const P2=e=>typeof e=="number"?0:e;function R2(e){const t=aT(e);return sT(e)(t.map(P2))}const br={test:E2,parse:aT,createTransformer:sT,getAnimatableNone:R2},A2=new Set(["brightness","contrast","saturate","opacity"]);function I2(e){const[t,n]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[r]=n.match(Uv)||[];if(!r)return e;const i=n.replace(r,"");let a=A2.has(t)?1:0;return r!==n&&(a*=100),t+"("+a+i+")"}const D2=/\b([a-z-]*)\(.*?\)/gu,sg={...br,getAnimatableNone:e=>{const t=e.match(D2);return t?t.map(I2).join(" "):e}},O2={...Nv,color:lt,backgroundColor:lt,outlineColor:lt,fill:lt,stroke:lt,borderColor:lt,borderTopColor:lt,borderRightColor:lt,borderBottomColor:lt,borderLeftColor:lt,filter:sg,WebkitFilter:sg},Hv=e=>O2[e];function oT(e,t){let n=Hv(e);return n!==sg&&(n=br),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const L2=new Set(["auto","none","0"]);function q2(e,t,n){let r=0,i;for(;r<e.length&&!i;){const a=e[r];typeof a=="string"&&!L2.has(a)&&bs(a).values.length&&(i=e[r]),r++}if(i&&n)for(const a of t)e[a]=oT(n,i)}const jb=e=>e===ta||e===Z,Eb=(e,t)=>parseFloat(e.split(", ")[t]),Tb=(e,t)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const i=r.match(/^matrix3d\((.+)\)$/u);if(i)return Eb(i[1],t);{const a=r.match(/^matrix\((.+)\)$/u);return a?Eb(a[1],e):0}},F2=new Set(["x","y","z"]),V2=ea.filter(e=>!F2.has(e));function $2(e){const t=[];return V2.forEach(n=>{const r=e.getValue(n);r!==void 0&&(t.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),t}const Qi={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:Tb(4,13),y:Tb(5,14)};Qi.translateX=Qi.x;Qi.translateY=Qi.y;const Ur=new Set;let og=!1,lg=!1;function lT(){if(lg){const e=Array.from(Ur).filter(r=>r.needsMeasurement),t=new Set(e.map(r=>r.element)),n=new Map;t.forEach(r=>{const i=$2(r);i.length&&(n.set(r,i),r.render())}),e.forEach(r=>r.measureInitialState()),t.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([a,s])=>{var o;(o=r.getValue(a))===null||o===void 0||o.set(s)})}),e.forEach(r=>r.measureEndState()),e.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}lg=!1,og=!1,Ur.forEach(e=>e.complete()),Ur.clear()}function uT(){Ur.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(lg=!0)})}function B2(){uT(),lT()}class Kv{constructor(t,n,r,i,a,s=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...t],this.onComplete=n,this.name=r,this.motionValue=i,this.element=a,this.isAsync=s}scheduleResolve(){this.isScheduled=!0,this.isAsync?(Ur.add(this),og||(og=!0,Ne.read(uT),Ne.resolveKeyframes(lT))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:n,element:r,motionValue:i}=this;for(let a=0;a<t.length;a++)if(t[a]===null)if(a===0){const s=i==null?void 0:i.get(),o=t[t.length-1];if(s!==void 0)t[0]=s;else if(r&&n){const l=r.readValue(n,o);l!=null&&(t[0]=l)}t[0]===void 0&&(t[0]=o),i&&s===void 0&&i.set(t[0])}else t[a]=t[a-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),Ur.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,Ur.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const cT=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e),z2=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function U2(e){const t=z2.exec(e);if(!t)return[,];const[,n,r,i]=t;return[`--${n??r}`,i]}function dT(e,t,n=1){const[r,i]=U2(e);if(!r)return;const a=window.getComputedStyle(t).getPropertyValue(r);if(a){const s=a.trim();return cT(s)?parseFloat(s):s}return Tv(i)?dT(i,t,n+1):i}const fT=e=>t=>t.test(e),G2={test:e=>e==="auto",parse:e=>e},hT=[ta,Z,vn,Zn,ID,AD,G2],Nb=e=>hT.find(fT(e));class pT extends Kv{constructor(t,n,r,i,a){super(t,n,r,i,a,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let l=0;l<t.length;l++){let u=t[l];if(typeof u=="string"&&(u=u.trim(),Tv(u))){const c=dT(u,n.current);c!==void 0&&(t[l]=c),l===t.length-1&&(this.finalKeyframe=u)}}if(this.resolveNoneKeyframes(),!UE.has(r)||t.length!==2)return;const[i,a]=t,s=Nb(i),o=Nb(a);if(s!==o)if(jb(s)&&jb(o))for(let l=0;l<t.length;l++){const u=t[l];typeof u=="string"&&(t[l]=parseFloat(u))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:n}=this,r=[];for(let i=0;i<t.length;i++)w2(t[i])&&r.push(i);r.length&&q2(t,r,n)}measureInitialState(){const{element:t,unresolvedKeyframes:n,name:r}=this;if(!t||!t.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Qi[r](t.measureViewportBox(),window.getComputedStyle(t.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&t.getValue(r,i).jump(i,!1)}measureEndState(){var t;const{element:n,name:r,unresolvedKeyframes:i}=this;if(!n||!n.current)return;const a=n.getValue(r);a&&a.jump(this.measuredOrigin,!1);const s=i.length-1,o=i[s];i[s]=Qi[r](n.measureViewportBox(),window.getComputedStyle(n.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),!((t=this.removedTransforms)===null||t===void 0)&&t.length&&this.removedTransforms.forEach(([l,u])=>{n.getValue(l).set(u)}),this.resolveNoneKeyframes()}}const Mb=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(br.test(e)||e==="0")&&!e.startsWith("url("));function H2(e){const t=e[0];if(e.length===1)return!0;for(let n=0;n<e.length;n++)if(e[n]!==t)return!0}function K2(e,t,n,r){const i=e[0];if(i===null)return!1;if(t==="display"||t==="visibility")return!0;const a=e[e.length-1],s=Mb(i,t),o=Mb(a,t);return!s||!o?!1:H2(e)||(n==="spring"||Ov(n))&&r}const W2=e=>e!==null;function Rl(e,{repeat:t,repeatType:n="loop"},r){const i=e.filter(W2),a=t&&n!=="loop"&&t%2===1?0:i.length-1;return!a||r===void 0?i[a]:r}const Y2=40;class mT{constructor({autoplay:t=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:a=0,repeatType:s="loop",...o}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=yn.now(),this.options={autoplay:t,delay:n,type:r,repeat:i,repeatDelay:a,repeatType:s,...o},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>Y2?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&B2(),this._resolved}onKeyframesResolved(t,n){this.resolvedAt=yn.now(),this.hasAttemptedResolve=!0;const{name:r,type:i,velocity:a,delay:s,onComplete:o,onUpdate:l,isGenerator:u}=this.options;if(!u&&!K2(t,r,i,a))if(s)this.options.duration=0;else{l&&l(Rl(t,this.options,n)),o&&o(),this.resolveFinishedPromise();return}const c=this.initPlayback(t,n);c!==!1&&(this._resolved={keyframes:t,finalKeyframe:n,...c},this.onPostResolved())}onPostResolved(){}then(t,n){return this.currentFinishedPromise.then(t,n)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(t=>{this.resolveFinishedPromise=t})}}const Ie=(e,t,n)=>e+(t-e)*n;function ec(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function Q2({hue:e,saturation:t,lightness:n,alpha:r}){e/=360,t/=100,n/=100;let i=0,a=0,s=0;if(!t)i=a=s=n;else{const o=n<.5?n*(1+t):n+t-n*t,l=2*n-o;i=ec(l,o,e+1/3),a=ec(l,o,e),s=ec(l,o,e-1/3)}return{red:Math.round(i*255),green:Math.round(a*255),blue:Math.round(s*255),alpha:r}}function rl(e,t){return n=>n>0?t:e}const tc=(e,t,n)=>{const r=e*e,i=n*(t*t-r)+r;return i<0?0:Math.sqrt(i)},J2=[ag,Vr,Pi],X2=e=>J2.find(t=>t.test(e));function Pb(e){const t=X2(e);if(!t)return!1;let n=t.parse(e);return t===Pi&&(n=Q2(n)),n}const Rb=(e,t)=>{const n=Pb(e),r=Pb(t);if(!n||!r)return rl(e,t);const i={...n};return a=>(i.red=tc(n.red,r.red,a),i.green=tc(n.green,r.green,a),i.blue=tc(n.blue,r.blue,a),i.alpha=Ie(n.alpha,r.alpha,a),Vr.transform(i))},Z2=(e,t)=>n=>t(e(n)),Ts=(...e)=>e.reduce(Z2),ug=new Set(["none","hidden"]);function eO(e,t){return ug.has(e)?n=>n<=0?e:t:n=>n>=1?t:e}function tO(e,t){return n=>Ie(e,t,n)}function Wv(e){return typeof e=="number"?tO:typeof e=="string"?Tv(e)?rl:lt.test(e)?Rb:iO:Array.isArray(e)?gT:typeof e=="object"?lt.test(e)?Rb:nO:rl}function gT(e,t){const n=[...e],r=n.length,i=e.map((a,s)=>Wv(a)(a,t[s]));return a=>{for(let s=0;s<r;s++)n[s]=i[s](a);return n}}function nO(e,t){const n={...e,...t},r={};for(const i in n)e[i]!==void 0&&t[i]!==void 0&&(r[i]=Wv(e[i])(e[i],t[i]));return i=>{for(const a in r)n[a]=r[a](i);return n}}function rO(e,t){var n;const r=[],i={color:0,var:0,number:0};for(let a=0;a<t.values.length;a++){const s=t.types[a],o=e.indexes[s][i[s]],l=(n=e.values[o])!==null&&n!==void 0?n:0;r[a]=l,i[s]++}return r}const iO=(e,t)=>{const n=br.createTransformer(t),r=bs(e),i=bs(t);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?ug.has(e)&&!i.values.length||ug.has(t)&&!r.values.length?eO(e,t):Ts(gT(rO(r,i),i.values),n):rl(e,t)};function vT(e,t,n){return typeof e=="number"&&typeof t=="number"&&typeof n=="number"?Ie(e,t,n):Wv(e)(e,t)}const aO=5;function yT(e,t,n){const r=Math.max(t-aO,0);return GE(n-e(r),t-r)}const $e={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},nc=.001;function sO({duration:e=$e.duration,bounce:t=$e.bounce,velocity:n=$e.velocity,mass:r=$e.mass}){let i,a,s=1-t;s=Fn($e.minDamping,$e.maxDamping,s),e=Fn($e.minDuration,$e.maxDuration,In(e)),s<1?(i=u=>{const c=u*s,f=c*e,h=c-n,m=cg(u,s),g=Math.exp(-f);return nc-h/m*g},a=u=>{const f=u*s*e,h=f*n+n,m=Math.pow(s,2)*Math.pow(u,2)*e,g=Math.exp(-f),p=cg(Math.pow(u,2),s);return(-i(u)+nc>0?-1:1)*((h-m)*g)/p}):(i=u=>{const c=Math.exp(-u*e),f=(u-n)*e+1;return-nc+c*f},a=u=>{const c=Math.exp(-u*e),f=(n-u)*(e*e);return c*f});const o=5/e,l=lO(i,a,o);if(e=An(e),isNaN(l))return{stiffness:$e.stiffness,damping:$e.damping,duration:e};{const u=Math.pow(l,2)*r;return{stiffness:u,damping:s*2*Math.sqrt(r*u),duration:e}}}const oO=12;function lO(e,t,n){let r=n;for(let i=1;i<oO;i++)r=r-e(r)/t(r);return r}function cg(e,t){return e*Math.sqrt(1-t*t)}const uO=["duration","bounce"],cO=["stiffness","damping","mass"];function Ab(e,t){return t.some(n=>e[n]!==void 0)}function dO(e){let t={velocity:$e.velocity,stiffness:$e.stiffness,damping:$e.damping,mass:$e.mass,isResolvedFromDuration:!1,...e};if(!Ab(e,cO)&&Ab(e,uO))if(e.visualDuration){const n=e.visualDuration,r=2*Math.PI/(n*1.2),i=r*r,a=2*Fn(.05,1,1-(e.bounce||0))*Math.sqrt(i);t={...t,mass:$e.mass,stiffness:i,damping:a}}else{const n=sO(e);t={...t,...n,mass:$e.mass},t.isResolvedFromDuration=!0}return t}function bT(e=$e.visualDuration,t=$e.bounce){const n=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:r,restDelta:i}=n;const a=n.keyframes[0],s=n.keyframes[n.keyframes.length-1],o={done:!1,value:a},{stiffness:l,damping:u,mass:c,duration:f,velocity:h,isResolvedFromDuration:m}=dO({...n,velocity:-In(n.velocity||0)}),g=h||0,p=u/(2*Math.sqrt(l*c)),S=s-a,v=In(Math.sqrt(l/c)),y=Math.abs(S)<5;r||(r=y?$e.restSpeed.granular:$e.restSpeed.default),i||(i=y?$e.restDelta.granular:$e.restDelta.default);let w;if(p<1){const C=cg(v,p);w=E=>{const T=Math.exp(-p*v*E);return s-T*((g+p*v*S)/C*Math.sin(C*E)+S*Math.cos(C*E))}}else if(p===1)w=C=>s-Math.exp(-v*C)*(S+(g+v*S)*C);else{const C=v*Math.sqrt(p*p-1);w=E=>{const T=Math.exp(-p*v*E),j=Math.min(C*E,300);return s-T*((g+p*v*S)*Math.sinh(j)+C*S*Math.cosh(j))/C}}const _={calculatedDuration:m&&f||null,next:C=>{const E=w(C);if(m)o.done=C>=f;else{let T=0;p<1&&(T=C===0?An(g):yT(w,C,E));const j=Math.abs(T)<=r,N=Math.abs(s-E)<=i;o.done=j&&N}return o.value=o.done?s:E,o},toString:()=>{const C=Math.min(LE(_),ng),E=qE(T=>_.next(C*T).value,C,30);return C+"ms "+E}};return _}function Ib({keyframes:e,velocity:t=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:a=500,modifyTarget:s,min:o,max:l,restDelta:u=.5,restSpeed:c}){const f=e[0],h={done:!1,value:f},m=j=>o!==void 0&&j<o||l!==void 0&&j>l,g=j=>o===void 0?l:l===void 0||Math.abs(o-j)<Math.abs(l-j)?o:l;let p=n*t;const S=f+p,v=s===void 0?S:s(S);v!==S&&(p=v-f);const y=j=>-p*Math.exp(-j/r),w=j=>v+y(j),_=j=>{const N=y(j),P=w(j);h.done=Math.abs(N)<=u,h.value=h.done?v:P};let C,E;const T=j=>{m(h.value)&&(C=j,E=bT({keyframes:[h.value,g(h.value)],velocity:yT(w,j,h.value),damping:i,stiffness:a,restDelta:u,restSpeed:c}))};return T(0),{calculatedDuration:null,next:j=>{let N=!1;return!E&&C===void 0&&(N=!0,_(j),T(j)),C!==void 0&&j>=C?E.next(j-C):(!N&&_(j),h)}}}const fO=Es(.42,0,1,1),hO=Es(0,0,.58,1),xT=Es(.42,0,.58,1),pO=e=>Array.isArray(e)&&typeof e[0]!="number",mO={linear:Mt,easeIn:fO,easeInOut:xT,easeOut:hO,circIn:zv,circInOut:eT,circOut:ZE,backIn:Bv,backInOut:JE,backOut:QE,anticipate:XE},Db=e=>{if(Lv(e)){vE(e.length===4);const[t,n,r,i]=e;return Es(t,n,r,i)}else if(typeof e=="string")return mO[e];return e};function gO(e,t,n){const r=[],i=n||vT,a=e.length-1;for(let s=0;s<a;s++){let o=i(e[s],e[s+1]);if(t){const l=Array.isArray(t)?t[s]||Mt:t;o=Ts(l,o)}r.push(o)}return r}function vO(e,t,{clamp:n=!0,ease:r,mixer:i}={}){const a=e.length;if(vE(a===t.length),a===1)return()=>t[0];if(a===2&&t[0]===t[1])return()=>t[1];const s=e[0]===e[1];e[0]>e[a-1]&&(e=[...e].reverse(),t=[...t].reverse());const o=gO(t,r,i),l=o.length,u=c=>{if(s&&c<e[0])return t[0];let f=0;if(l>1)for(;f<e.length-2&&!(c<e[f+1]);f++);const h=Wi(e[f],e[f+1],c);return o[f](h)};return n?c=>u(Fn(e[0],e[a-1],c)):u}function yO(e,t){const n=e[e.length-1];for(let r=1;r<=t;r++){const i=Wi(0,t,r);e.push(Ie(n,1,i))}}function bO(e){const t=[0];return yO(t,e.length-1),t}function xO(e,t){return e.map(n=>n*t)}function wO(e,t){return e.map(()=>t||xT).splice(0,e.length-1)}function il({duration:e=300,keyframes:t,times:n,ease:r="easeInOut"}){const i=pO(r)?r.map(Db):Db(r),a={done:!1,value:t[0]},s=xO(n&&n.length===t.length?n:bO(t),e),o=vO(s,t,{ease:Array.isArray(i)?i:wO(t,i)});return{calculatedDuration:e,next:l=>(a.value=o(l),a.done=l>=e,a)}}const SO=e=>{const t=({timestamp:n})=>e(n);return{start:()=>Ne.update(t,!0),stop:()=>yr(t),now:()=>rt.isProcessing?rt.timestamp:yn.now()}},_O={decay:Ib,inertia:Ib,tween:il,keyframes:il,spring:bT},kO=e=>e/100;class Yv extends mT{constructor(t){super(t),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:l}=this.options;l&&l()};const{name:n,motionValue:r,element:i,keyframes:a}=this.options,s=(i==null?void 0:i.KeyframeResolver)||Kv,o=(l,u)=>this.onKeyframesResolved(l,u);this.resolver=new s(a,o,n,r,i),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(t){const{type:n="keyframes",repeat:r=0,repeatDelay:i=0,repeatType:a,velocity:s=0}=this.options,o=Ov(n)?n:_O[n]||il;let l,u;o!==il&&typeof t[0]!="number"&&(l=Ts(kO,vT(t[0],t[1])),t=[0,100]);const c=o({...this.options,keyframes:t});a==="mirror"&&(u=o({...this.options,keyframes:[...t].reverse(),velocity:-s})),c.calculatedDuration===null&&(c.calculatedDuration=LE(c));const{calculatedDuration:f}=c,h=f+i,m=h*(r+1)-i;return{generator:c,mirroredGenerator:u,mapPercentToKeyframes:l,calculatedDuration:f,resolvedDuration:h,totalDuration:m}}onPostResolved(){const{autoplay:t=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!t?this.pause():this.state=this.pendingPlayState}tick(t,n=!1){const{resolved:r}=this;if(!r){const{keyframes:j}=this.options;return{done:!0,value:j[j.length-1]}}const{finalKeyframe:i,generator:a,mirroredGenerator:s,mapPercentToKeyframes:o,keyframes:l,calculatedDuration:u,totalDuration:c,resolvedDuration:f}=r;if(this.startTime===null)return a.next(0);const{delay:h,repeat:m,repeatType:g,repeatDelay:p,onUpdate:S}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-c/this.speed,this.startTime)),n?this.currentTime=t:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(t-this.startTime)*this.speed;const v=this.currentTime-h*(this.speed>=0?1:-1),y=this.speed>=0?v<0:v>c;this.currentTime=Math.max(v,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=c);let w=this.currentTime,_=a;if(m){const j=Math.min(this.currentTime,c)/f;let N=Math.floor(j),P=j%1;!P&&j>=1&&(P=1),P===1&&N--,N=Math.min(N,m+1),!!(N%2)&&(g==="reverse"?(P=1-P,p&&(P-=p/f)):g==="mirror"&&(_=s)),w=Fn(0,1,P)*f}const C=y?{done:!1,value:l[0]}:_.next(w);o&&(C.value=o(C.value));let{done:E}=C;!y&&u!==null&&(E=this.speed>=0?this.currentTime>=c:this.currentTime<=0);const T=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&E);return T&&i!==void 0&&(C.value=Rl(l,this.options,i)),S&&S(C.value),T&&this.finish(),C}get duration(){const{resolved:t}=this;return t?In(t.calculatedDuration):0}get time(){return In(this.currentTime)}set time(t){t=An(t),this.currentTime=t,this.holdTime!==null||this.speed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.speed)}get speed(){return this.playbackSpeed}set speed(t){const n=this.playbackSpeed!==t;this.playbackSpeed=t,n&&(this.time=In(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:t=SO,onPlay:n,startTime:r}=this.options;this.driver||(this.driver=t(a=>this.tick(a))),n&&n();const i=this.driver.now();this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=i):this.startTime=r??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var t;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(t=this.currentTime)!==null&&t!==void 0?t:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:t}=this.options;t&&t()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}}const CO=new Set(["opacity","clipPath","filter","transform"]);function jO(e,t,n,{delay:r=0,duration:i=300,repeat:a=0,repeatType:s="loop",ease:o="easeInOut",times:l}={}){const u={[t]:n};l&&(u.offset=l);const c=VE(o,i);return Array.isArray(c)&&(u.easing=c),e.animate(u,{delay:r,duration:i,easing:Array.isArray(c)?"linear":c,fill:"both",iterations:a+1,direction:s==="reverse"?"alternate":"normal"})}const EO=wv(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),al=10,TO=2e4;function NO(e){return Ov(e.type)||e.type==="spring"||!FE(e.ease)}function MO(e,t){const n=new Yv({...t,keyframes:e,repeat:0,delay:0,isGenerator:!0});let r={done:!1,value:e[0]};const i=[];let a=0;for(;!r.done&&a<TO;)r=n.sample(a),i.push(r.value),a+=al;return{times:void 0,keyframes:i,duration:a-al,ease:"linear"}}const wT={anticipate:XE,backInOut:JE,circInOut:eT};function PO(e){return e in wT}class Ob extends mT{constructor(t){super(t);const{name:n,motionValue:r,element:i,keyframes:a}=this.options;this.resolver=new pT(a,(s,o)=>this.onKeyframesResolved(s,o),n,r,i),this.resolver.scheduleResolve()}initPlayback(t,n){let{duration:r=300,times:i,ease:a,type:s,motionValue:o,name:l,startTime:u}=this.options;if(!o.owner||!o.owner.current)return!1;if(typeof a=="string"&&nl()&&PO(a)&&(a=wT[a]),NO(this.options)){const{onComplete:f,onUpdate:h,motionValue:m,element:g,...p}=this.options,S=MO(t,p);t=S.keyframes,t.length===1&&(t[1]=t[0]),r=S.duration,i=S.times,a=S.ease,s="keyframes"}const c=jO(o.owner.current,l,t,{...this.options,duration:r,times:i,ease:a});return c.startTime=u??this.calcStartTime(),this.pendingTimeline?(xb(c,this.pendingTimeline),this.pendingTimeline=void 0):c.onfinish=()=>{const{onComplete:f}=this.options;o.set(Rl(t,this.options,n)),f&&f(),this.cancel(),this.resolveFinishedPromise()},{animation:c,duration:r,times:i,type:s,ease:a,keyframes:t}}get duration(){const{resolved:t}=this;if(!t)return 0;const{duration:n}=t;return In(n)}get time(){const{resolved:t}=this;if(!t)return 0;const{animation:n}=t;return In(n.currentTime||0)}set time(t){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.currentTime=An(t)}get speed(){const{resolved:t}=this;if(!t)return 1;const{animation:n}=t;return n.playbackRate}set speed(t){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.playbackRate=t}get state(){const{resolved:t}=this;if(!t)return"idle";const{animation:n}=t;return n.playState}get startTime(){const{resolved:t}=this;if(!t)return null;const{animation:n}=t;return n.startTime}attachTimeline(t){if(!this._resolved)this.pendingTimeline=t;else{const{resolved:n}=this;if(!n)return Mt;const{animation:r}=n;xb(r,t)}return Mt}play(){if(this.isStopped)return;const{resolved:t}=this;if(!t)return;const{animation:n}=t;n.playState==="finished"&&this.updateFinishedPromise(),n.play()}pause(){const{resolved:t}=this;if(!t)return;const{animation:n}=t;n.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:t}=this;if(!t)return;const{animation:n,keyframes:r,duration:i,type:a,ease:s,times:o}=t;if(n.playState==="idle"||n.playState==="finished")return;if(this.time){const{motionValue:u,onUpdate:c,onComplete:f,element:h,...m}=this.options,g=new Yv({...m,keyframes:r,duration:i,type:a,ease:s,times:o,isGenerator:!0}),p=An(this.time);u.setWithVelocity(g.sample(p-al).value,g.sample(p).value,al)}const{onStop:l}=this.options;l&&l(),this.cancel()}complete(){const{resolved:t}=this;t&&t.animation.finish()}cancel(){const{resolved:t}=this;t&&t.animation.cancel()}static supports(t){const{motionValue:n,name:r,repeatDelay:i,repeatType:a,damping:s,type:o}=t;if(!n||!n.owner||!(n.owner.current instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:u}=n.owner.getProps();return EO()&&r&&CO.has(r)&&!l&&!u&&!i&&a!=="mirror"&&s!==0&&o!=="inertia"}}const RO={type:"spring",stiffness:500,damping:25,restSpeed:10},AO=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),IO={type:"keyframes",duration:.8},DO={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},OO=(e,{keyframes:t})=>t.length>2?IO:Zr.has(e)?e.startsWith("scale")?AO(t[1]):RO:DO;function LO({when:e,delay:t,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:a,repeatType:s,repeatDelay:o,from:l,elapsed:u,...c}){return!!Object.keys(c).length}const Qv=(e,t,n,r={},i,a)=>s=>{const o=Dv(r,e)||{},l=o.delay||r.delay||0;let{elapsed:u=0}=r;u=u-An(l);let c={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:t.getVelocity(),...o,delay:-u,onUpdate:h=>{t.set(h),o.onUpdate&&o.onUpdate(h)},onComplete:()=>{s(),o.onComplete&&o.onComplete()},name:e,motionValue:t,element:a?void 0:i};LO(o)||(c={...c,...OO(e,c)}),c.duration&&(c.duration=An(c.duration)),c.repeatDelay&&(c.repeatDelay=An(c.repeatDelay)),c.from!==void 0&&(c.keyframes[0]=c.from);let f=!1;if((c.type===!1||c.duration===0&&!c.repeatDelay)&&(c.duration=0,c.delay===0&&(f=!0)),f&&!a&&t.get()!==void 0){const h=Rl(c.keyframes,o);if(h!==void 0)return Ne.update(()=>{c.onUpdate(h),c.onComplete()}),new n2([])}return!a&&Ob.supports(c)?new Ob(c):new Yv(c)};function qO({protectedKeys:e,needsAnimating:t},n){const r=e.hasOwnProperty(n)&&t[n]!==!0;return t[n]=!1,r}function ST(e,t,{delay:n=0,transitionOverride:r,type:i}={}){var a;let{transition:s=e.getDefaultTransition(),transitionEnd:o,...l}=t;r&&(s=r);const u=[],c=i&&e.animationState&&e.animationState.getState()[i];for(const f in l){const h=e.getValue(f,(a=e.latestValues[f])!==null&&a!==void 0?a:null),m=l[f];if(m===void 0||c&&qO(c,f))continue;const g={delay:n,...Dv(s||{},f)};let p=!1;if(window.MotionHandoffAnimation){const v=HE(e);if(v){const y=window.MotionHandoffAnimation(v,f,Ne);y!==null&&(g.startTime=y,p=!0)}}ig(e,f),h.start(Qv(f,h,m,e.shouldReduceMotion&&UE.has(f)?{type:!1}:g,e,p));const S=h.animation;S&&u.push(S)}return o&&Promise.all(u).then(()=>{Ne.update(()=>{o&&g2(e,o)})}),u}function dg(e,t,n={}){var r;const i=Pl(e,t,n.type==="exit"?(r=e.presenceContext)===null||r===void 0?void 0:r.custom:void 0);let{transition:a=e.getDefaultTransition()||{}}=i||{};n.transitionOverride&&(a=n.transitionOverride);const s=i?()=>Promise.all(ST(e,i,n)):()=>Promise.resolve(),o=e.variantChildren&&e.variantChildren.size?(u=0)=>{const{delayChildren:c=0,staggerChildren:f,staggerDirection:h}=a;return FO(e,t,c+u,f,h,n)}:()=>Promise.resolve(),{when:l}=a;if(l){const[u,c]=l==="beforeChildren"?[s,o]:[o,s];return u().then(()=>c())}else return Promise.all([s(),o(n.delay)])}function FO(e,t,n=0,r=0,i=1,a){const s=[],o=(e.variantChildren.size-1)*r,l=i===1?(u=0)=>u*r:(u=0)=>o-u*r;return Array.from(e.variantChildren).sort(VO).forEach((u,c)=>{u.notify("AnimationStart",t),s.push(dg(u,t,{...a,delay:n+l(c)}).then(()=>u.notify("AnimationComplete",t)))}),Promise.all(s)}function VO(e,t){return e.sortNodePosition(t)}function $O(e,t,n={}){e.notify("AnimationStart",t);let r;if(Array.isArray(t)){const i=t.map(a=>dg(e,a,n));r=Promise.all(i)}else if(typeof t=="string")r=dg(e,t,n);else{const i=typeof t=="function"?Pl(e,t,n.custom):t;r=Promise.all(ST(e,i,n))}return r.then(()=>{e.notify("AnimationComplete",t)})}const BO=_v.length;function _T(e){if(!e)return;if(!e.isControllingVariants){const n=e.parent?_T(e.parent)||{}:{};return e.props.initial!==void 0&&(n.initial=e.props.initial),n}const t={};for(let n=0;n<BO;n++){const r=_v[n],i=e.props[r];(gs(i)||i===!1)&&(t[r]=i)}return t}const zO=[...Sv].reverse(),UO=Sv.length;function GO(e){return t=>Promise.all(t.map(({animation:n,options:r})=>$O(e,n,r)))}function HO(e){let t=GO(e),n=Lb(),r=!0;const i=l=>(u,c)=>{var f;const h=Pl(e,c,l==="exit"?(f=e.presenceContext)===null||f===void 0?void 0:f.custom:void 0);if(h){const{transition:m,transitionEnd:g,...p}=h;u={...u,...p,...g}}return u};function a(l){t=l(e)}function s(l){const{props:u}=e,c=_T(e.parent)||{},f=[],h=new Set;let m={},g=1/0;for(let S=0;S<UO;S++){const v=zO[S],y=n[v],w=u[v]!==void 0?u[v]:c[v],_=gs(w),C=v===l?y.isActive:null;C===!1&&(g=S);let E=w===c[v]&&w!==u[v]&&_;if(E&&r&&e.manuallyAnimateOnMount&&(E=!1),y.protectedKeys={...m},!y.isActive&&C===null||!w&&!y.prevProp||Nl(w)||typeof w=="boolean")continue;const T=KO(y.prevProp,w);let j=T||v===l&&y.isActive&&!E&&_||S>g&&_,N=!1;const P=Array.isArray(w)?w:[w];let R=P.reduce(i(v),{});C===!1&&(R={});const{prevResolvedValues:O={}}=y,F={...O,...R},X=ie=>{j=!0,h.has(ie)&&(N=!0,h.delete(ie)),y.needsAnimating[ie]=!0;const D=e.getValue(ie);D&&(D.liveStyle=!1)};for(const ie in F){const D=R[ie],B=O[ie];if(m.hasOwnProperty(ie))continue;let V=!1;tg(D)&&tg(B)?V=!OE(D,B):V=D!==B,V?D!=null?X(ie):h.add(ie):D!==void 0&&h.has(ie)?X(ie):y.protectedKeys[ie]=!0}y.prevProp=w,y.prevResolvedValues=R,y.isActive&&(m={...m,...R}),r&&e.blockInitialAnimation&&(j=!1),j&&(!(E&&T)||N)&&f.push(...P.map(ie=>({animation:ie,options:{type:v}})))}if(h.size){const S={};h.forEach(v=>{const y=e.getBaseTarget(v),w=e.getValue(v);w&&(w.liveStyle=!0),S[v]=y??null}),f.push({animation:S})}let p=!!f.length;return r&&(u.initial===!1||u.initial===u.animate)&&!e.manuallyAnimateOnMount&&(p=!1),r=!1,p?t(f):Promise.resolve()}function o(l,u){var c;if(n[l].isActive===u)return Promise.resolve();(c=e.variantChildren)===null||c===void 0||c.forEach(h=>{var m;return(m=h.animationState)===null||m===void 0?void 0:m.setActive(l,u)}),n[l].isActive=u;const f=s(l);for(const h in n)n[h].protectedKeys={};return f}return{animateChanges:s,setActive:o,setAnimateFunction:a,getState:()=>n,reset:()=>{n=Lb(),r=!0}}}function KO(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!OE(t,e):!1}function Rr(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Lb(){return{animate:Rr(!0),whileInView:Rr(),whileHover:Rr(),whileTap:Rr(),whileDrag:Rr(),whileFocus:Rr(),exit:Rr()}}class kr{constructor(t){this.isMounted=!1,this.node=t}update(){}}class WO extends kr{constructor(t){super(t),t.animationState||(t.animationState=HO(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();Nl(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:n}=this.node.prevProps||{};t!==n&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)===null||t===void 0||t.call(this)}}let YO=0;class QO extends kr{constructor(){super(...arguments),this.id=YO++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===r)return;const i=this.node.animationState.setActive("exit",!t);n&&!t&&i.then(()=>n(this.id))}mount(){const{register:t}=this.node.presenceContext||{};t&&(this.unmount=t(this.id))}unmount(){}}const JO={animation:{Feature:WO},exit:{Feature:QO}};function xs(e,t,n,r={passive:!0}){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n)}function Ns(e){return{point:{x:e.pageX,y:e.pageY}}}const XO=e=>t=>qv(t)&&e(t,Ns(t));function Ya(e,t,n,r){return xs(e,t,XO(n),r)}const qb=(e,t)=>Math.abs(e-t);function ZO(e,t){const n=qb(e.x,t.x),r=qb(e.y,t.y);return Math.sqrt(n**2+r**2)}class kT{constructor(t,n,{transformPagePoint:r,contextWindow:i,dragSnapToOrigin:a=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const f=ic(this.lastMoveEventInfo,this.history),h=this.startEvent!==null,m=ZO(f.offset,{x:0,y:0})>=3;if(!h&&!m)return;const{point:g}=f,{timestamp:p}=rt;this.history.push({...g,timestamp:p});const{onStart:S,onMove:v}=this.handlers;h||(S&&S(this.lastMoveEvent,f),this.startEvent=this.lastMoveEvent),v&&v(this.lastMoveEvent,f)},this.handlePointerMove=(f,h)=>{this.lastMoveEvent=f,this.lastMoveEventInfo=rc(h,this.transformPagePoint),Ne.update(this.updatePoint,!0)},this.handlePointerUp=(f,h)=>{this.end();const{onEnd:m,onSessionEnd:g,resumeAnimation:p}=this.handlers;if(this.dragSnapToOrigin&&p&&p(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const S=ic(f.type==="pointercancel"?this.lastMoveEventInfo:rc(h,this.transformPagePoint),this.history);this.startEvent&&m&&m(f,S),g&&g(f,S)},!qv(t))return;this.dragSnapToOrigin=a,this.handlers=n,this.transformPagePoint=r,this.contextWindow=i||window;const s=Ns(t),o=rc(s,this.transformPagePoint),{point:l}=o,{timestamp:u}=rt;this.history=[{...l,timestamp:u}];const{onSessionStart:c}=n;c&&c(t,ic(o,this.history)),this.removeListeners=Ts(Ya(this.contextWindow,"pointermove",this.handlePointerMove),Ya(this.contextWindow,"pointerup",this.handlePointerUp),Ya(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),yr(this.updatePoint)}}function rc(e,t){return t?{point:t(e.point)}:e}function Fb(e,t){return{x:e.x-t.x,y:e.y-t.y}}function ic({point:e},t){return{point:e,delta:Fb(e,CT(t)),offset:Fb(e,eL(t)),velocity:tL(t,.1)}}function eL(e){return e[0]}function CT(e){return e[e.length-1]}function tL(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,r=null;const i=CT(e);for(;n>=0&&(r=e[n],!(i.timestamp-r.timestamp>An(t)));)n--;if(!r)return{x:0,y:0};const a=In(i.timestamp-r.timestamp);if(a===0)return{x:0,y:0};const s={x:(i.x-r.x)/a,y:(i.y-r.y)/a};return s.x===1/0&&(s.x=0),s.y===1/0&&(s.y=0),s}const jT=1e-4,nL=1-jT,rL=1+jT,ET=.01,iL=0-ET,aL=0+ET;function Rt(e){return e.max-e.min}function sL(e,t,n){return Math.abs(e-t)<=n}function Vb(e,t,n,r=.5){e.origin=r,e.originPoint=Ie(t.min,t.max,e.origin),e.scale=Rt(n)/Rt(t),e.translate=Ie(n.min,n.max,e.origin)-e.originPoint,(e.scale>=nL&&e.scale<=rL||isNaN(e.scale))&&(e.scale=1),(e.translate>=iL&&e.translate<=aL||isNaN(e.translate))&&(e.translate=0)}function Qa(e,t,n,r){Vb(e.x,t.x,n.x,r?r.originX:void 0),Vb(e.y,t.y,n.y,r?r.originY:void 0)}function $b(e,t,n){e.min=n.min+t.min,e.max=e.min+Rt(t)}function oL(e,t,n){$b(e.x,t.x,n.x),$b(e.y,t.y,n.y)}function Bb(e,t,n){e.min=t.min-n.min,e.max=e.min+Rt(t)}function Ja(e,t,n){Bb(e.x,t.x,n.x),Bb(e.y,t.y,n.y)}function lL(e,{min:t,max:n},r){return t!==void 0&&e<t?e=r?Ie(t,e,r.min):Math.max(e,t):n!==void 0&&e>n&&(e=r?Ie(n,e,r.max):Math.min(e,n)),e}function zb(e,t,n){return{min:t!==void 0?e.min+t:void 0,max:n!==void 0?e.max+n-(e.max-e.min):void 0}}function uL(e,{top:t,left:n,bottom:r,right:i}){return{x:zb(e.x,n,i),y:zb(e.y,t,r)}}function Ub(e,t){let n=t.min-e.min,r=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,r]=[r,n]),{min:n,max:r}}function cL(e,t){return{x:Ub(e.x,t.x),y:Ub(e.y,t.y)}}function dL(e,t){let n=.5;const r=Rt(e),i=Rt(t);return i>r?n=Wi(t.min,t.max-r,e.min):r>i&&(n=Wi(e.min,e.max-i,t.min)),Fn(0,1,n)}function fL(e,t){const n={};return t.min!==void 0&&(n.min=t.min-e.min),t.max!==void 0&&(n.max=t.max-e.min),n}const fg=.35;function hL(e=fg){return e===!1?e=0:e===!0&&(e=fg),{x:Gb(e,"left","right"),y:Gb(e,"top","bottom")}}function Gb(e,t,n){return{min:Hb(e,t),max:Hb(e,n)}}function Hb(e,t){return typeof e=="number"?e:e[t]||0}const Kb=()=>({translate:0,scale:1,origin:0,originPoint:0}),Ri=()=>({x:Kb(),y:Kb()}),Wb=()=>({min:0,max:0}),Ge=()=>({x:Wb(),y:Wb()});function Vt(e){return[e("x"),e("y")]}function TT({top:e,left:t,right:n,bottom:r}){return{x:{min:t,max:n},y:{min:e,max:r}}}function pL({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function mL(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),r=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function ac(e){return e===void 0||e===1}function hg({scale:e,scaleX:t,scaleY:n}){return!ac(e)||!ac(t)||!ac(n)}function Dr(e){return hg(e)||NT(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function NT(e){return Yb(e.x)||Yb(e.y)}function Yb(e){return e&&e!=="0%"}function sl(e,t,n){const r=e-n,i=t*r;return n+i}function Qb(e,t,n,r,i){return i!==void 0&&(e=sl(e,i,r)),sl(e,n,r)+t}function pg(e,t=0,n=1,r,i){e.min=Qb(e.min,t,n,r,i),e.max=Qb(e.max,t,n,r,i)}function MT(e,{x:t,y:n}){pg(e.x,t.translate,t.scale,t.originPoint),pg(e.y,n.translate,n.scale,n.originPoint)}const Jb=.999999999999,Xb=1.0000000000001;function gL(e,t,n,r=!1){const i=n.length;if(!i)return;t.x=t.y=1;let a,s;for(let o=0;o<i;o++){a=n[o],s=a.projectionDelta;const{visualElement:l}=a.options;l&&l.props.style&&l.props.style.display==="contents"||(r&&a.options.layoutScroll&&a.scroll&&a!==a.root&&Ii(e,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),s&&(t.x*=s.x.scale,t.y*=s.y.scale,MT(e,s)),r&&Dr(a.latestValues)&&Ii(e,a.latestValues))}t.x<Xb&&t.x>Jb&&(t.x=1),t.y<Xb&&t.y>Jb&&(t.y=1)}function Ai(e,t){e.min=e.min+t,e.max=e.max+t}function Zb(e,t,n,r,i=.5){const a=Ie(e.min,e.max,i);pg(e,t,n,a,r)}function Ii(e,t){Zb(e.x,t.x,t.scaleX,t.scale,t.originX),Zb(e.y,t.y,t.scaleY,t.scale,t.originY)}function PT(e,t){return TT(mL(e.getBoundingClientRect(),t))}function vL(e,t,n){const r=PT(e,n),{scroll:i}=t;return i&&(Ai(r.x,i.offset.x),Ai(r.y,i.offset.y)),r}const RT=({current:e})=>e?e.ownerDocument.defaultView:null,yL=new WeakMap;class bL{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Ge(),this.visualElement=t}start(t,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const i=c=>{const{dragSnapToOrigin:f}=this.getProps();f?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Ns(c).point)},a=(c,f)=>{const{drag:h,dragPropagation:m,onDragStart:g}=this.getProps();if(h&&!m&&(this.openDragLock&&this.openDragLock(),this.openDragLock=d2(h),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Vt(S=>{let v=this.getAxisMotionValue(S).get()||0;if(vn.test(v)){const{projection:y}=this.visualElement;if(y&&y.layout){const w=y.layout.layoutBox[S];w&&(v=Rt(w)*(parseFloat(v)/100))}}this.originPoint[S]=v}),g&&Ne.postRender(()=>g(c,f)),ig(this.visualElement,"transform");const{animationState:p}=this.visualElement;p&&p.setActive("whileDrag",!0)},s=(c,f)=>{const{dragPropagation:h,dragDirectionLock:m,onDirectionLock:g,onDrag:p}=this.getProps();if(!h&&!this.openDragLock)return;const{offset:S}=f;if(m&&this.currentDirection===null){this.currentDirection=xL(S),this.currentDirection!==null&&g&&g(this.currentDirection);return}this.updateAxis("x",f.point,S),this.updateAxis("y",f.point,S),this.visualElement.render(),p&&p(c,f)},o=(c,f)=>this.stop(c,f),l=()=>Vt(c=>{var f;return this.getAnimationState(c)==="paused"&&((f=this.getAxisMotionValue(c).animation)===null||f===void 0?void 0:f.play())}),{dragSnapToOrigin:u}=this.getProps();this.panSession=new kT(t,{onSessionStart:i,onStart:a,onMove:s,onSessionEnd:o,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,contextWindow:RT(this.visualElement)})}stop(t,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:i}=n;this.startAnimation(i);const{onDragEnd:a}=this.getProps();a&&Ne.postRender(()=>a(t,n))}cancel(){this.isDragging=!1;const{projection:t,animationState:n}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(t,n,r){const{drag:i}=this.getProps();if(!r||!co(t,i,this.currentDirection))return;const a=this.getAxisMotionValue(t);let s=this.originPoint[t]+r[t];this.constraints&&this.constraints[t]&&(s=lL(s,this.constraints[t],this.elastic[t])),a.set(s)}resolveConstraints(){var t;const{dragConstraints:n,dragElastic:r}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(t=this.visualElement.projection)===null||t===void 0?void 0:t.layout,a=this.constraints;n&&Mi(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&i?this.constraints=uL(i.layoutBox,n):this.constraints=!1,this.elastic=hL(r),a!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&Vt(s=>{this.constraints!==!1&&this.getAxisMotionValue(s)&&(this.constraints[s]=fL(i.layoutBox[s],this.constraints[s]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:n}=this.getProps();if(!t||!Mi(t))return!1;const r=t.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const a=vL(r,i.root,this.visualElement.getTransformPagePoint());let s=cL(i.layout.layoutBox,a);if(n){const o=n(pL(s));this.hasMutatedConstraints=!!o,o&&(s=TT(o))}return s}startAnimation(t){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:a,dragSnapToOrigin:s,onDragTransitionEnd:o}=this.getProps(),l=this.constraints||{},u=Vt(c=>{if(!co(c,n,this.currentDirection))return;let f=l&&l[c]||{};s&&(f={min:0,max:0});const h=i?200:1e6,m=i?40:1e7,g={type:"inertia",velocity:r?t[c]:0,bounceStiffness:h,bounceDamping:m,timeConstant:750,restDelta:1,restSpeed:10,...a,...f};return this.startAxisValueAnimation(c,g)});return Promise.all(u).then(o)}startAxisValueAnimation(t,n){const r=this.getAxisMotionValue(t);return ig(this.visualElement,t),r.start(Qv(t,r,0,n,this.visualElement,!1))}stopAnimation(){Vt(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){Vt(t=>{var n;return(n=this.getAxisMotionValue(t).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(t){var n;return(n=this.getAxisMotionValue(t).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(t){const n=`_drag${t.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(t,(r.initial?r.initial[t]:void 0)||0)}snapToCursor(t){Vt(n=>{const{drag:r}=this.getProps();if(!co(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,a=this.getAxisMotionValue(n);if(i&&i.layout){const{min:s,max:o}=i.layout.layoutBox[n];a.set(t[n]-Ie(s,o,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!Mi(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};Vt(s=>{const o=this.getAxisMotionValue(s);if(o&&this.constraints!==!1){const l=o.get();i[s]=dL({min:l,max:l},this.constraints[s])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Vt(s=>{if(!co(s,t,null))return;const o=this.getAxisMotionValue(s),{min:l,max:u}=this.constraints[s];o.set(Ie(l,u,i[s]))})}addListeners(){if(!this.visualElement.current)return;yL.set(this.visualElement,this);const t=this.visualElement.current,n=Ya(t,"pointerdown",l=>{const{drag:u,dragListener:c=!0}=this.getProps();u&&c&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();Mi(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,a=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),Ne.read(r);const s=xs(window,"resize",()=>this.scalePositionWithinConstraints()),o=i.addEventListener("didUpdate",({delta:l,hasLayoutChanged:u})=>{this.isDragging&&u&&(Vt(c=>{const f=this.getAxisMotionValue(c);f&&(this.originPoint[c]+=l[c].translate,f.set(f.get()+l[c].translate))}),this.visualElement.render())});return()=>{s(),n(),a(),o&&o()}}getProps(){const t=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:a=!1,dragElastic:s=fg,dragMomentum:o=!0}=t;return{...t,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:a,dragElastic:s,dragMomentum:o}}}function co(e,t,n){return(t===!0||t===e)&&(n===null||n===e)}function xL(e,t=10){let n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}class wL extends kr{constructor(t){super(t),this.removeGroupControls=Mt,this.removeListeners=Mt,this.controls=new bL(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Mt}unmount(){this.removeGroupControls(),this.removeListeners()}}const ex=e=>(t,n)=>{e&&Ne.postRender(()=>e(t,n))};class SL extends kr{constructor(){super(...arguments),this.removePointerDownListener=Mt}onPointerDown(t){this.session=new kT(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:RT(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:ex(t),onStart:ex(n),onMove:r,onEnd:(a,s)=>{delete this.session,i&&Ne.postRender(()=>i(a,s))}}}mount(){this.removePointerDownListener=Ya(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const No={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function tx(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const Ca={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(Z.test(e))e=parseFloat(e);else return e;const n=tx(e,t.target.x),r=tx(e,t.target.y);return`${n}% ${r}%`}},_L={correct:(e,{treeScale:t,projectionDelta:n})=>{const r=e,i=br.parse(e);if(i.length>5)return r;const a=br.createTransformer(e),s=typeof i[0]!="number"?1:0,o=n.x.scale*t.x,l=n.y.scale*t.y;i[0+s]/=o,i[1+s]/=l;const u=Ie(o,l,.5);return typeof i[2+s]=="number"&&(i[2+s]/=u),typeof i[3+s]=="number"&&(i[3+s]/=u),a(i)}};class kL extends x.Component{componentDidMount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:a}=t;UD(CL),a&&(n.group&&n.group.add(a),r&&r.register&&i&&r.register(a),a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,onExitComplete:()=>this.safeToRemove()})),No.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:n,visualElement:r,drag:i,isPresent:a}=this.props,s=r.projection;return s&&(s.isPresent=a,i||t.layoutDependency!==n||n===void 0?s.willUpdate():this.safeToRemove(),t.isPresent!==a&&(a?s.promote():s.relegate()||Ne.postRender(()=>{const o=s.getStack();(!o||!o.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),Cv.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=t;i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function AT(e){const[t,n]=aD(),r=x.useContext(mE);return d.jsx(kL,{...e,layoutGroup:r,switchLayoutGroup:x.useContext(_E),isPresent:t,safeToRemove:n})}const CL={borderRadius:{...Ca,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Ca,borderTopRightRadius:Ca,borderBottomLeftRadius:Ca,borderBottomRightRadius:Ca,boxShadow:_L};function jL(e,t,n){const r=ct(e)?e:ys(e);return r.start(Qv("",r,t,n)),r.animation}function EL(e){return e instanceof SVGElement&&e.tagName!=="svg"}const TL=(e,t)=>e.depth-t.depth;class NL{constructor(){this.children=[],this.isDirty=!1}add(t){Fv(this.children,t),this.isDirty=!0}remove(t){Vv(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(TL),this.isDirty=!1,this.children.forEach(t)}}function ML(e,t){const n=yn.now(),r=({timestamp:i})=>{const a=i-n;a>=t&&(yr(r),e(a-t))};return Ne.read(r,!0),()=>yr(r)}const IT=["TopLeft","TopRight","BottomLeft","BottomRight"],PL=IT.length,nx=e=>typeof e=="string"?parseFloat(e):e,rx=e=>typeof e=="number"||Z.test(e);function RL(e,t,n,r,i,a){i?(e.opacity=Ie(0,n.opacity!==void 0?n.opacity:1,AL(r)),e.opacityExit=Ie(t.opacity!==void 0?t.opacity:1,0,IL(r))):a&&(e.opacity=Ie(t.opacity!==void 0?t.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let s=0;s<PL;s++){const o=`border${IT[s]}Radius`;let l=ix(t,o),u=ix(n,o);if(l===void 0&&u===void 0)continue;l||(l=0),u||(u=0),l===0||u===0||rx(l)===rx(u)?(e[o]=Math.max(Ie(nx(l),nx(u),r),0),(vn.test(u)||vn.test(l))&&(e[o]+="%")):e[o]=u}(t.rotate||n.rotate)&&(e.rotate=Ie(t.rotate||0,n.rotate||0,r))}function ix(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const AL=DT(0,.5,ZE),IL=DT(.5,.95,Mt);function DT(e,t,n){return r=>r<e?0:r>t?1:n(Wi(e,t,r))}function ax(e,t){e.min=t.min,e.max=t.max}function Ft(e,t){ax(e.x,t.x),ax(e.y,t.y)}function sx(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function ox(e,t,n,r,i){return e-=t,e=sl(e,1/n,r),i!==void 0&&(e=sl(e,1/i,r)),e}function DL(e,t=0,n=1,r=.5,i,a=e,s=e){if(vn.test(t)&&(t=parseFloat(t),t=Ie(s.min,s.max,t/100)-s.min),typeof t!="number")return;let o=Ie(a.min,a.max,r);e===a&&(o-=t),e.min=ox(e.min,t,n,o,i),e.max=ox(e.max,t,n,o,i)}function lx(e,t,[n,r,i],a,s){DL(e,t[n],t[r],t[i],t.scale,a,s)}const OL=["x","scaleX","originX"],LL=["y","scaleY","originY"];function ux(e,t,n,r){lx(e.x,t,OL,n?n.x:void 0,r?r.x:void 0),lx(e.y,t,LL,n?n.y:void 0,r?r.y:void 0)}function cx(e){return e.translate===0&&e.scale===1}function OT(e){return cx(e.x)&&cx(e.y)}function dx(e,t){return e.min===t.min&&e.max===t.max}function qL(e,t){return dx(e.x,t.x)&&dx(e.y,t.y)}function fx(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function LT(e,t){return fx(e.x,t.x)&&fx(e.y,t.y)}function hx(e){return Rt(e.x)/Rt(e.y)}function px(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class FL{constructor(){this.members=[]}add(t){Fv(this.members,t),t.scheduleRender()}remove(t){if(Vv(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(t){const n=this.members.findIndex(i=>t===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const a=this.members[i];if(a.isPresent!==!1){r=a;break}}return r?(this.promote(r),!0):!1}promote(t,n){const r=this.lead;if(t!==r&&(this.prevLead=r,this.lead=t,t.show(),r)){r.instance&&r.scheduleRender(),t.scheduleRender(),t.resumeFrom=r,n&&(t.resumeFrom.preserveOpacity=!0),r.snapshot&&(t.snapshot=r.snapshot,t.snapshot.latestValues=r.animationValues||r.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:i}=t.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:n,resumingFrom:r}=t;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function VL(e,t,n){let r="";const i=e.x.translate/t.x,a=e.y.translate/t.y,s=(n==null?void 0:n.z)||0;if((i||a||s)&&(r=`translate3d(${i}px, ${a}px, ${s}px) `),(t.x!==1||t.y!==1)&&(r+=`scale(${1/t.x}, ${1/t.y}) `),n){const{transformPerspective:u,rotate:c,rotateX:f,rotateY:h,skewX:m,skewY:g}=n;u&&(r=`perspective(${u}px) ${r}`),c&&(r+=`rotate(${c}deg) `),f&&(r+=`rotateX(${f}deg) `),h&&(r+=`rotateY(${h}deg) `),m&&(r+=`skewX(${m}deg) `),g&&(r+=`skewY(${g}deg) `)}const o=e.x.scale*t.x,l=e.y.scale*t.y;return(o!==1||l!==1)&&(r+=`scale(${o}, ${l})`),r||"none"}const Or={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},Ra=typeof window<"u"&&window.MotionDebug!==void 0,sc=["","X","Y","Z"],$L={visibility:"hidden"},mx=1e3;let BL=0;function oc(e,t,n,r){const{latestValues:i}=t;i[e]&&(n[e]=i[e],t.setStaticValue(e,0),r&&(r[e]=0))}function qT(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const n=HE(t);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:a}=e.options;window.MotionCancelOptimisedAnimation(n,"transform",Ne,!(i||a))}const{parent:r}=e;r&&!r.hasCheckedOptimisedAppear&&qT(r)}function FT({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(s={},o=t==null?void 0:t()){this.id=BL++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Ra&&(Or.totalNodes=Or.resolvedTargetDeltas=Or.recalculatedProjection=0),this.nodes.forEach(GL),this.nodes.forEach(QL),this.nodes.forEach(JL),this.nodes.forEach(HL),Ra&&window.MotionDebug.record(Or)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=s,this.root=o?o.root||o:this,this.path=o?[...o.path,o]:[],this.parent=o,this.depth=o?o.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new NL)}addEventListener(s,o){return this.eventHandlers.has(s)||this.eventHandlers.set(s,new $v),this.eventHandlers.get(s).add(o)}notifyListeners(s,...o){const l=this.eventHandlers.get(s);l&&l.notify(...o)}hasListeners(s){return this.eventHandlers.has(s)}mount(s,o=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=EL(s),this.instance=s;const{layoutId:l,layout:u,visualElement:c}=this.options;if(c&&!c.current&&c.mount(s),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),o&&(u||l)&&(this.isLayoutDirty=!0),e){let f;const h=()=>this.root.updateBlockedByResize=!1;e(s,()=>{this.root.updateBlockedByResize=!0,f&&f(),f=ML(h,250),No.hasAnimatedSinceResize&&(No.hasAnimatedSinceResize=!1,this.nodes.forEach(vx))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&c&&(l||u)&&this.addEventListener("didUpdate",({delta:f,hasLayoutChanged:h,hasRelativeTargetChanged:m,layout:g})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const p=this.options.transition||c.getDefaultTransition()||nq,{onLayoutAnimationStart:S,onLayoutAnimationComplete:v}=c.getProps(),y=!this.targetLayout||!LT(this.targetLayout,g)||m,w=!h&&m;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||w||h&&(y||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(f,w);const _={...Dv(p,"layout"),onPlay:S,onComplete:v};(c.shouldReduceMotion||this.options.layoutRoot)&&(_.delay=0,_.type=!1),this.startAnimation(_)}else h||vx(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=g})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const s=this.getStack();s&&s.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,yr(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(XL),this.animationId++)}getTransformTemplate(){const{visualElement:s}=this.options;return s&&s.getProps().transformTemplate}willUpdate(s=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&qT(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let c=0;c<this.path.length;c++){const f=this.path[c];f.shouldResetTransform=!0,f.updateScroll("snapshot"),f.options.layoutRoot&&f.willUpdate(!1)}const{layoutId:o,layout:l}=this.options;if(o===void 0&&!l)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),s&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(gx);return}this.isUpdating||this.nodes.forEach(WL),this.isUpdating=!1,this.nodes.forEach(YL),this.nodes.forEach(zL),this.nodes.forEach(UL),this.clearAllSnapshots();const o=yn.now();rt.delta=Fn(0,1e3/60,o-rt.timestamp),rt.timestamp=o,rt.isProcessing=!0,Ju.update.process(rt),Ju.preRender.process(rt),Ju.render.process(rt),rt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Cv.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(KL),this.sharedNodes.forEach(ZL)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Ne.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Ne.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const s=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Ge(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:o}=this.options;o&&o.notify("LayoutMeasure",this.layout.layoutBox,s?s.layoutBox:void 0)}updateScroll(s="measure"){let o=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===s&&(o=!1),o){const l=r(this.instance);this.scroll={animationId:this.root.animationId,phase:s,isRoot:l,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!i)return;const s=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,o=this.projectionDelta&&!OT(this.projectionDelta),l=this.getTransformTemplate(),u=l?l(this.latestValues,""):void 0,c=u!==this.prevTransformTemplateValue;s&&(o||Dr(this.latestValues)||c)&&(i(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(s=!0){const o=this.measurePageBox();let l=this.removeElementScroll(o);return s&&(l=this.removeTransform(l)),rq(l),{animationId:this.root.animationId,measuredBox:o,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var s;const{visualElement:o}=this.options;if(!o)return Ge();const l=o.measureViewportBox();if(!(((s=this.scroll)===null||s===void 0?void 0:s.wasRoot)||this.path.some(iq))){const{scroll:c}=this.root;c&&(Ai(l.x,c.offset.x),Ai(l.y,c.offset.y))}return l}removeElementScroll(s){var o;const l=Ge();if(Ft(l,s),!((o=this.scroll)===null||o===void 0)&&o.wasRoot)return l;for(let u=0;u<this.path.length;u++){const c=this.path[u],{scroll:f,options:h}=c;c!==this.root&&f&&h.layoutScroll&&(f.wasRoot&&Ft(l,s),Ai(l.x,f.offset.x),Ai(l.y,f.offset.y))}return l}applyTransform(s,o=!1){const l=Ge();Ft(l,s);for(let u=0;u<this.path.length;u++){const c=this.path[u];!o&&c.options.layoutScroll&&c.scroll&&c!==c.root&&Ii(l,{x:-c.scroll.offset.x,y:-c.scroll.offset.y}),Dr(c.latestValues)&&Ii(l,c.latestValues)}return Dr(this.latestValues)&&Ii(l,this.latestValues),l}removeTransform(s){const o=Ge();Ft(o,s);for(let l=0;l<this.path.length;l++){const u=this.path[l];if(!u.instance||!Dr(u.latestValues))continue;hg(u.latestValues)&&u.updateSnapshot();const c=Ge(),f=u.measurePageBox();Ft(c,f),ux(o,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,c)}return Dr(this.latestValues)&&ux(o,this.latestValues),o}setTargetDelta(s){this.targetDelta=s,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(s){this.options={...this.options,...s,crossfade:s.crossfade!==void 0?s.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==rt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(s=!1){var o;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==l;if(!(s||u&&this.isSharedProjectionDirty||this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:f,layoutId:h}=this.options;if(!(!this.layout||!(f||h))){if(this.resolvedRelativeTargetAt=rt.timestamp,!this.targetDelta&&!this.relativeTarget){const m=this.getClosestProjectingParent();m&&m.layout&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ge(),this.relativeTargetOrigin=Ge(),Ja(this.relativeTargetOrigin,this.layout.layoutBox,m.layout.layoutBox),Ft(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=Ge(),this.targetWithTransforms=Ge()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),oL(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Ft(this.target,this.layout.layoutBox),MT(this.target,this.targetDelta)):Ft(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const m=this.getClosestProjectingParent();m&&!!m.resumingFrom==!!this.resumingFrom&&!m.options.layoutScroll&&m.target&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ge(),this.relativeTargetOrigin=Ge(),Ja(this.relativeTargetOrigin,this.target,m.target),Ft(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Ra&&Or.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||hg(this.parent.latestValues)||NT(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var s;const o=this.getLead(),l=!!this.resumingFrom||this!==o;let u=!0;if((this.isProjectionDirty||!((s=this.parent)===null||s===void 0)&&s.isProjectionDirty)&&(u=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===rt.timestamp&&(u=!1),u)return;const{layout:c,layoutId:f}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(c||f))return;Ft(this.layoutCorrected,this.layout.layoutBox);const h=this.treeScale.x,m=this.treeScale.y;gL(this.layoutCorrected,this.treeScale,this.path,l),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=Ge());const{target:g}=o;if(!g){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(sx(this.prevProjectionDelta.x,this.projectionDelta.x),sx(this.prevProjectionDelta.y,this.projectionDelta.y)),Qa(this.projectionDelta,this.layoutCorrected,g,this.latestValues),(this.treeScale.x!==h||this.treeScale.y!==m||!px(this.projectionDelta.x,this.prevProjectionDelta.x)||!px(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",g)),Ra&&Or.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(s=!0){var o;if((o=this.options.visualElement)===null||o===void 0||o.scheduleRender(),s){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Ri(),this.projectionDelta=Ri(),this.projectionDeltaWithTransform=Ri()}setAnimationOrigin(s,o=!1){const l=this.snapshot,u=l?l.latestValues:{},c={...this.latestValues},f=Ri();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!o;const h=Ge(),m=l?l.source:void 0,g=this.layout?this.layout.source:void 0,p=m!==g,S=this.getStack(),v=!S||S.members.length<=1,y=!!(p&&!v&&this.options.crossfade===!0&&!this.path.some(tq));this.animationProgress=0;let w;this.mixTargetDelta=_=>{const C=_/1e3;yx(f.x,s.x,C),yx(f.y,s.y,C),this.setTargetDelta(f),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Ja(h,this.layout.layoutBox,this.relativeParent.layout.layoutBox),eq(this.relativeTarget,this.relativeTargetOrigin,h,C),w&&qL(this.relativeTarget,w)&&(this.isProjectionDirty=!1),w||(w=Ge()),Ft(w,this.relativeTarget)),p&&(this.animationValues=c,RL(c,u,this.latestValues,C,y,v)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=C},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(s){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(yr(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Ne.update(()=>{No.hasAnimatedSinceResize=!0,this.currentAnimation=jL(0,mx,{...s,onUpdate:o=>{this.mixTargetDelta(o),s.onUpdate&&s.onUpdate(o)},onComplete:()=>{s.onComplete&&s.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const s=this.getStack();s&&s.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(mx),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const s=this.getLead();let{targetWithTransforms:o,target:l,layout:u,latestValues:c}=s;if(!(!o||!l||!u)){if(this!==s&&this.layout&&u&&VT(this.options.animationType,this.layout.layoutBox,u.layoutBox)){l=this.target||Ge();const f=Rt(this.layout.layoutBox.x);l.x.min=s.target.x.min,l.x.max=l.x.min+f;const h=Rt(this.layout.layoutBox.y);l.y.min=s.target.y.min,l.y.max=l.y.min+h}Ft(o,l),Ii(o,c),Qa(this.projectionDeltaWithTransform,this.layoutCorrected,o,c)}}registerSharedNode(s,o){this.sharedNodes.has(s)||this.sharedNodes.set(s,new FL),this.sharedNodes.get(s).add(o);const u=o.options.initialPromotionConfig;o.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(o):void 0})}isLead(){const s=this.getStack();return s?s.lead===this:!0}getLead(){var s;const{layoutId:o}=this.options;return o?((s=this.getStack())===null||s===void 0?void 0:s.lead)||this:this}getPrevLead(){var s;const{layoutId:o}=this.options;return o?(s=this.getStack())===null||s===void 0?void 0:s.prevLead:void 0}getStack(){const{layoutId:s}=this.options;if(s)return this.root.sharedNodes.get(s)}promote({needsReset:s,transition:o,preserveFollowOpacity:l}={}){const u=this.getStack();u&&u.promote(this,l),s&&(this.projectionDelta=void 0,this.needsReset=!0),o&&this.setOptions({transition:o})}relegate(){const s=this.getStack();return s?s.relegate(this):!1}resetSkewAndRotation(){const{visualElement:s}=this.options;if(!s)return;let o=!1;const{latestValues:l}=s;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(o=!0),!o)return;const u={};l.z&&oc("z",s,u,this.animationValues);for(let c=0;c<sc.length;c++)oc(`rotate${sc[c]}`,s,u,this.animationValues),oc(`skew${sc[c]}`,s,u,this.animationValues);s.render();for(const c in u)s.setStaticValue(c,u[c]),this.animationValues&&(this.animationValues[c]=u[c]);s.scheduleRender()}getProjectionStyles(s){var o,l;if(!this.instance||this.isSVG)return;if(!this.isVisible)return $L;const u={visibility:""},c=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,u.opacity="",u.pointerEvents=Eo(s==null?void 0:s.pointerEvents)||"",u.transform=c?c(this.latestValues,""):"none",u;const f=this.getLead();if(!this.projectionDelta||!this.layout||!f.target){const p={};return this.options.layoutId&&(p.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,p.pointerEvents=Eo(s==null?void 0:s.pointerEvents)||""),this.hasProjected&&!Dr(this.latestValues)&&(p.transform=c?c({},""):"none",this.hasProjected=!1),p}const h=f.animationValues||f.latestValues;this.applyTransformsToTarget(),u.transform=VL(this.projectionDeltaWithTransform,this.treeScale,h),c&&(u.transform=c(h,u.transform));const{x:m,y:g}=this.projectionDelta;u.transformOrigin=`${m.origin*100}% ${g.origin*100}% 0`,f.animationValues?u.opacity=f===this?(l=(o=h.opacity)!==null&&o!==void 0?o:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:h.opacityExit:u.opacity=f===this?h.opacity!==void 0?h.opacity:"":h.opacityExit!==void 0?h.opacityExit:0;for(const p in tl){if(h[p]===void 0)continue;const{correct:S,applyTo:v}=tl[p],y=u.transform==="none"?h[p]:S(h[p],f);if(v){const w=v.length;for(let _=0;_<w;_++)u[v[_]]=y}else u[p]=y}return this.options.layoutId&&(u.pointerEvents=f===this?Eo(s==null?void 0:s.pointerEvents)||"":"none"),u}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(s=>{var o;return(o=s.currentAnimation)===null||o===void 0?void 0:o.stop()}),this.root.nodes.forEach(gx),this.root.sharedNodes.clear()}}}function zL(e){e.updateLayout()}function UL(e){var t;const n=((t=e.resumeFrom)===null||t===void 0?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&n&&e.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=e.layout,{animationType:a}=e.options,s=n.source!==e.layout.source;a==="size"?Vt(f=>{const h=s?n.measuredBox[f]:n.layoutBox[f],m=Rt(h);h.min=r[f].min,h.max=h.min+m}):VT(a,n.layoutBox,r)&&Vt(f=>{const h=s?n.measuredBox[f]:n.layoutBox[f],m=Rt(r[f]);h.max=h.min+m,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[f].max=e.relativeTarget[f].min+m)});const o=Ri();Qa(o,r,n.layoutBox);const l=Ri();s?Qa(l,e.applyTransform(i,!0),n.measuredBox):Qa(l,r,n.layoutBox);const u=!OT(o);let c=!1;if(!e.resumeFrom){const f=e.getClosestProjectingParent();if(f&&!f.resumeFrom){const{snapshot:h,layout:m}=f;if(h&&m){const g=Ge();Ja(g,n.layoutBox,h.layoutBox);const p=Ge();Ja(p,r,m.layoutBox),LT(g,p)||(c=!0),f.options.layoutRoot&&(e.relativeTarget=p,e.relativeTargetOrigin=g,e.relativeParent=f)}}}e.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:l,layoutDelta:o,hasLayoutChanged:u,hasRelativeTargetChanged:c})}else if(e.isLead()){const{onExitComplete:r}=e.options;r&&r()}e.options.transition=void 0}function GL(e){Ra&&Or.totalNodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function HL(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function KL(e){e.clearSnapshot()}function gx(e){e.clearMeasurements()}function WL(e){e.isLayoutDirty=!1}function YL(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function vx(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function QL(e){e.resolveTargetDelta()}function JL(e){e.calcProjection()}function XL(e){e.resetSkewAndRotation()}function ZL(e){e.removeLeadSnapshot()}function yx(e,t,n){e.translate=Ie(t.translate,0,n),e.scale=Ie(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function bx(e,t,n,r){e.min=Ie(t.min,n.min,r),e.max=Ie(t.max,n.max,r)}function eq(e,t,n,r){bx(e.x,t.x,n.x,r),bx(e.y,t.y,n.y,r)}function tq(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const nq={duration:.45,ease:[.4,0,.1,1]},xx=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),wx=xx("applewebkit/")&&!xx("chrome/")?Math.round:Mt;function Sx(e){e.min=wx(e.min),e.max=wx(e.max)}function rq(e){Sx(e.x),Sx(e.y)}function VT(e,t,n){return e==="position"||e==="preserve-aspect"&&!sL(hx(t),hx(n),.2)}function iq(e){var t;return e!==e.root&&((t=e.scroll)===null||t===void 0?void 0:t.wasRoot)}const aq=FT({attachResizeListener:(e,t)=>xs(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),lc={current:void 0},$T=FT({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!lc.current){const e=new aq({});e.mount(window),e.setOptions({layoutScroll:!0}),lc.current=e}return lc.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),sq={pan:{Feature:SL},drag:{Feature:wL,ProjectionNode:$T,MeasureLayout:AT}};function _x(e,t,n){const{props:r}=e;e.animationState&&r.whileHover&&e.animationState.setActive("whileHover",n==="Start");const i="onHover"+n,a=r[i];a&&Ne.postRender(()=>a(t,Ns(t)))}class oq extends kr{mount(){const{current:t}=this.node;t&&(this.unmount=s2(t,n=>(_x(this.node,n,"Start"),r=>_x(this.node,r,"End"))))}unmount(){}}class lq extends kr{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Ts(xs(this.node.current,"focus",()=>this.onFocus()),xs(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function kx(e,t,n){const{props:r}=e;e.animationState&&r.whileTap&&e.animationState.setActive("whileTap",n==="Start");const i="onTap"+(n==="End"?"":n),a=r[i];a&&Ne.postRender(()=>a(t,Ns(t)))}class uq extends kr{mount(){const{current:t}=this.node;t&&(this.unmount=c2(t,n=>(kx(this.node,n,"Start"),(r,{success:i})=>kx(this.node,r,i?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const mg=new WeakMap,uc=new WeakMap,cq=e=>{const t=mg.get(e.target);t&&t(e)},dq=e=>{e.forEach(cq)};function fq({root:e,...t}){const n=e||document;uc.has(n)||uc.set(n,{});const r=uc.get(n),i=JSON.stringify(t);return r[i]||(r[i]=new IntersectionObserver(dq,{root:e,...t})),r[i]}function hq(e,t,n){const r=fq(t);return mg.set(e,n),r.observe(e),()=>{mg.delete(e),r.unobserve(e)}}const pq={some:0,all:1};class mq extends kr{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:a}=t,s={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:pq[i]},o=l=>{const{isIntersecting:u}=l;if(this.isInView===u||(this.isInView=u,a&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:c,onViewportLeave:f}=this.node.getProps(),h=u?c:f;h&&h(l)};return hq(this.node.current,s,o)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:n}=this.node;["amount","margin","root"].some(gq(t,n))&&this.startObserver()}unmount(){}}function gq({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}const vq={inView:{Feature:mq},tap:{Feature:uq},focus:{Feature:lq},hover:{Feature:oq}},yq={layout:{ProjectionNode:$T,MeasureLayout:AT}},gg={current:null},BT={current:!1};function bq(){if(BT.current=!0,!!xv)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>gg.current=e.matches;e.addListener(t),t()}else gg.current=!1}const xq=[...hT,lt,br],wq=e=>xq.find(fT(e)),Cx=new WeakMap;function Sq(e,t,n){for(const r in t){const i=t[r],a=n[r];if(ct(i))e.addValue(r,i);else if(ct(a))e.addValue(r,ys(i,{owner:e}));else if(a!==i)if(e.hasValue(r)){const s=e.getValue(r);s.liveStyle===!0?s.jump(i):s.hasAnimated||s.set(i)}else{const s=e.getStaticValue(r);e.addValue(r,ys(s!==void 0?s:i,{owner:e}))}}for(const r in n)t[r]===void 0&&e.removeValue(r);return t}const jx=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class _q{scrapeMotionValuesFromProps(t,n,r){return{}}constructor({parent:t,props:n,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:a,visualState:s},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Kv,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const m=yn.now();this.renderScheduledAt<m&&(this.renderScheduledAt=m,Ne.render(this.render,!1,!0))};const{latestValues:l,renderState:u,onUpdate:c}=s;this.onUpdate=c,this.latestValues=l,this.baseTarget={...l},this.initialValues=n.initial?{...l}:{},this.renderState=u,this.parent=t,this.props=n,this.presenceContext=r,this.depth=t?t.depth+1:0,this.reducedMotionConfig=i,this.options=o,this.blockInitialAnimation=!!a,this.isControllingVariants=Ml(n),this.isVariantNode=wE(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:f,...h}=this.scrapeMotionValuesFromProps(n,{},this);for(const m in h){const g=h[m];l[m]!==void 0&&ct(g)&&g.set(l[m],!1)}}mount(t){this.current=t,Cx.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),BT.current||bq(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:gg.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){Cx.delete(this.current),this.projection&&this.projection.unmount(),yr(this.notifyUpdate),yr(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const n=this.features[t];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(t,n){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const r=Zr.has(t),i=n.on("change",o=>{this.latestValues[t]=o,this.props.onUpdate&&Ne.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),a=n.on("renderRequest",this.scheduleRender);let s;window.MotionCheckAppearSync&&(s=window.MotionCheckAppearSync(this,t,n)),this.valueSubscriptions.set(t,()=>{i(),a(),s&&s(),n.owner&&n.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in Yi){const n=Yi[t];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[t]&&i&&r(this.props)&&(this.features[t]=new i(this)),this.features[t]){const a=this.features[t];a.isMounted?a.update():(a.mount(),a.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Ge()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,n){this.latestValues[t]=n}update(t,n){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<jx.length;r++){const i=jx[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const a="on"+i,s=t[a];s&&(this.propEventSubscriptions[i]=this.on(i,s))}this.prevMotionValues=Sq(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(t),()=>n.variantChildren.delete(t)}addValue(t,n){const r=this.values.get(t);n!==r&&(r&&this.removeValue(t),this.bindToMotionValue(t,n),this.values.set(t,n),this.latestValues[t]=n.get())}removeValue(t){this.values.delete(t);const n=this.valueSubscriptions.get(t);n&&(n(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,n){if(this.props.values&&this.props.values[t])return this.props.values[t];let r=this.values.get(t);return r===void 0&&n!==void 0&&(r=ys(n===null?void 0:n,{owner:this}),this.addValue(t,r)),r}readValue(t,n){var r;let i=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:(r=this.getBaseTargetFromProps(this.props,t))!==null&&r!==void 0?r:this.readValueFromInstance(this.current,t,this.options);return i!=null&&(typeof i=="string"&&(cT(i)||tT(i))?i=parseFloat(i):!wq(i)&&br.test(n)&&(i=oT(t,n)),this.setBaseTarget(t,ct(i)?i.get():i)),ct(i)?i.get():i}setBaseTarget(t,n){this.baseTarget[t]=n}getBaseTarget(t){var n;const{initial:r}=this.props;let i;if(typeof r=="string"||typeof r=="object"){const s=Ev(this.props,r,(n=this.presenceContext)===null||n===void 0?void 0:n.custom);s&&(i=s[t])}if(r&&i!==void 0)return i;const a=this.getBaseTargetFromProps(this.props,t);return a!==void 0&&!ct(a)?a:this.initialValues[t]!==void 0&&i===void 0?void 0:this.baseTarget[t]}on(t,n){return this.events[t]||(this.events[t]=new $v),this.events[t].add(n)}notify(t,...n){this.events[t]&&this.events[t].notify(...n)}}class zT extends _q{constructor(){super(...arguments),this.KeyframeResolver=pT}sortInstanceNodePosition(t,n){return t.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(t,n){return t.style?t.style[n]:void 0}removeValueFromRenderState(t,{vars:n,style:r}){delete n[t],delete r[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;ct(t)&&(this.childSubscription=t.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function kq(e){return window.getComputedStyle(e)}class Cq extends zT{constructor(){super(...arguments),this.type="html",this.renderInstance=ME}readValueFromInstance(t,n){if(Zr.has(n)){const r=Hv(n);return r&&r.default||0}else{const r=kq(t),i=(EE(n)?r.getPropertyValue(n):r[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(t,{transformPagePoint:n}){return PT(t,n)}build(t,n,r){Mv(t,n,r.transformTemplate)}scrapeMotionValuesFromProps(t,n,r){return Iv(t,n,r)}}class jq extends zT{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Ge}getBaseTargetFromProps(t,n){return t[n]}readValueFromInstance(t,n){if(Zr.has(n)){const r=Hv(n);return r&&r.default||0}return n=PE.has(n)?n:kv(n),t.getAttribute(n)}scrapeMotionValuesFromProps(t,n,r){return IE(t,n,r)}build(t,n,r){Pv(t,n,this.isSVGTag,r.transformTemplate)}renderInstance(t,n,r,i){RE(t,n,r,i)}mount(t){this.isSVGTag=Av(t.tagName),super.mount(t)}}const Eq=(e,t)=>jv(e)?new jq(t):new Cq(t,{allowProjection:e!==x.Fragment}),Tq=ZD({...JO,...vq,...sq,...yq},Eq),Nq=pD(Tq);function Mq({steps:e,fromRects:t,toRects:n,onComplete:r}){return x.useEffect(()=>{const i=window.setTimeout(r,550);return()=>window.clearTimeout(i)},[r]),d.jsx("div",{className:"morph-layer",children:e.map(i=>{var o;const a=t[i.id],s=n[i.id];return!a||!s?null:d.jsxs(Nq.div,{className:`morph-card step-${i.type}`,initial:{left:a.left,top:a.top,width:a.width,height:a.height},animate:{left:s.left,top:s.top,width:s.width,height:s.height},transition:{duration:.5,ease:"easeInOut"},children:[d.jsx("div",{className:"morph-card-title",children:i.name}),d.jsx("div",{className:"morph-card-subtitle",children:((o=i.preview)==null?void 0:o.title)??i.type})]},i.id)})})}function Pq({morph:e,onComplete:t,children:n}){return d.jsxs("div",{className:"morph-orchestrator",children:[n,e?d.jsx(Mq,{steps:e.steps,fromRects:e.fromRects,toRects:e.toRects,onComplete:t}):null]})}const Rq="demo-trace-overlap-001",Aq="Overlap + ToolCallId Demo",Iq="2026-01-27T10:00:00.000Z",Dq="2026-01-27T10:00:05.000Z",Oq="completed",Lq={source:"openai_agents",agentName:"DemoAgent",modelId:"gpt-4o-2024-11-20",wallTimeMs:5e3,workTimeMs:7200,totalTokens:1400,totalCostUsd:.018},qq=[{id:"s1",index:0,type:"llm_call",name:"plan",startedAt:"2026-01-27T10:00:00.000Z",endedAt:"2026-01-27T10:00:01.000Z",durationMs:1e3,childStepIds:[],metrics:{tokensTotal:300,costUsd:.004},preview:{title:"LLM: plan",subtitle:"gpt-4o",outputPreview:"I'll fetch two sources..."},status:"completed"},{id:"s2",index:1,type:"llm_call",name:"call_tools",startedAt:"2026-01-27T10:00:01.000Z",endedAt:"2026-01-27T10:00:01.200Z",durationMs:200,childStepIds:[],metrics:{tokensTotal:120,costUsd:.002},preview:{title:"LLM: call tools",outputPreview:"Calling web_search + database_query"},io:{emittedToolCallIds:["tc-001","tc-002"]},status:"completed"},{id:"s3",index:2,type:"tool_call",name:"web_search",toolCallId:"tc-001",startedAt:"2026-01-27T10:00:01.200Z",endedAt:"2026-01-27T10:00:03.200Z",durationMs:2e3,childStepIds:[],metrics:{costUsd:0},preview:{title:"Tool: web_search",inputPreview:'{"q":"EU AI Act"}',outputPreview:"[3 results...]"},status:"completed"},{id:"s4",index:3,type:"tool_call",name:"database_query",toolCallId:"tc-002",startedAt:"2026-01-27T10:00:01.500Z",endedAt:"2026-01-27T10:00:02.700Z",durationMs:1200,childStepIds:[],preview:{title:"Tool: database_query",inputPreview:'{"sql":"SELECT..."}',outputPreview:'{"rows":42}'},status:"completed"},{id:"s5",index:4,type:"llm_call",name:"analyze",startedAt:"2026-01-27T10:00:03.200Z",endedAt:"2026-01-27T10:00:04.600Z",durationMs:1400,childStepIds:[],metrics:{tokensTotal:700,costUsd:.012},preview:{title:"LLM: analyze",outputPreview:"Synthesis based on tool outputs..."},io:{consumedToolCallIds:["tc-001","tc-002"]},status:"completed"}],Al={id:Rq,name:Aq,startedAt:Iq,endedAt:Dq,status:Oq,metadata:Lq,steps:qq};function UT(e,t){const n=Fq(e,t),r=new Set(n.map(f=>f.leftId)),i=new Set(n.map(f=>f.rightId)),a=t.steps.filter(f=>!i.has(f.id)).map(f=>f.id),s=e.steps.filter(f=>!r.has(f.id)).map(f=>f.id),o=n.filter(f=>{const h=e.steps.find(g=>g.id===f.leftId),m=t.steps.find(g=>g.id===f.rightId);return!h||!m?!1:Ex(h)!==Ex(m)}),l=o.map(f=>f.leftId),u=(t.metadata.totalCostUsd??0)-(e.metadata.totalCostUsd??0),c=t.metadata.wallTimeMs-e.metadata.wallTimeMs;return{addedSteps:a,removedSteps:s,changedSteps:l,changedPairs:o,alignedSteps:n,costDeltaUsd:u,wallTimeDeltaMs:c}}function Fq(e,t){const n=[],r=new Set(e.steps.map(c=>c.id)),i=new Set(t.steps.map(c=>c.id));Array.from(r).forEach(c=>{i.has(c)&&(n.push({leftId:c,rightId:c}),r.delete(c),i.delete(c))});const a=new Map;t.steps.forEach(c=>{c.toolCallId&&a.set(c.toolCallId,c.id)}),e.steps.forEach(c=>{if(!c.toolCallId)return;const f=a.get(c.toolCallId);f&&i.has(f)&&(n.push({leftId:c.id,rightId:f}),r.delete(c.id),i.delete(f))});const s=Mx(e),o=Mx(t),l=Vq(e,t),u={};return i.forEach(c=>{const f=o.get(c);if(!f)return;const h=Tx(f.step);h&&(u[h]||(u[h]=[]),u[h].push(c))}),Object.values(u).forEach(c=>{c.sort((f,h)=>{var m,g;return(((m=o.get(f))==null?void 0:m.startMs)??0)-(((g=o.get(h))==null?void 0:g.startMs)??0)})}),Array.from(r).forEach(c=>{var g;const f=s.get(c);if(!f)return;const h=Tx(f.step);if(!h||!((g=u[h])!=null&&g.length))return;const m=$q(f,u[h],o,l);m&&(n.push({leftId:c,rightId:m}),r.delete(c),i.delete(m),u[h]=u[h].filter(p=>p!==m))}),n}function Ex(e){var r,i;const t=((r=e.preview)==null?void 0:r.outputPreview)??null,n=((i=e.metrics)==null?void 0:i.costUsd)??null;return`${e.status}|${t??""}|${n??""}`}function Tx(e){return e.type?`${e.type}:${e.name??""}`:null}function Nx(e){if(!e)return null;const t=Date.parse(e);return Number.isNaN(t)?null:t}function Mx(e){const t=Nx(e.startedAt),n=new Map;return e.steps.forEach(r=>{const i=Nx(r.startedAt),a=t!=null&&i!=null?i-t:null;n.set(r.id,{step:r,startMs:a})}),n}function Vq(e,t){const n=Math.max(e.metadata.wallTimeMs,t.metadata.wallTimeMs,1);return Math.max(1e3,Math.min(5e3,Math.round(n*.1)))}function $q(e,t,n,r){const i=e.startMs;if(i==null)return null;let a=null,s=r+1;return t.forEach(o=>{const l=n.get(o);if(!l||l.startMs==null)return;const u=Math.abs(l.startMs-i);u<s&&(s=u,a=o)}),s<=r?a:null}const Bq=new Map,zq=new Map,Gr=new Map;async function Uq(){return[Al]}async function GT(e){return{trace:Al}}const Gq={s1:{role:"assistant",content:"I'll analyze the user's request and create a plan to fetch information from two sources: a web search for current EU AI Act updates and a database query for historical compliance data.",model:"gpt-4o-2024-11-20",usage:{prompt_tokens:150,completion_tokens:150,total_tokens:300},reasoning:"The user wants comprehensive information about AI regulations. I'll use parallel tool calls to maximize efficiency."},s2:{role:"assistant",content:null,tool_calls:[{id:"tc-001",type:"function",function:{name:"web_search",arguments:'{"q":"EU AI Act latest updates 2026"}'}},{id:"tc-002",type:"function",function:{name:"database_query",arguments:`{"sql":"SELECT * FROM compliance_records WHERE region='EU' ORDER BY date DESC LIMIT 10"}`}}],model:"gpt-4o-2024-11-20",usage:{prompt_tokens:80,completion_tokens:40,total_tokens:120}},s3:{tool_call_id:"tc-001",tool_name:"web_search",input:{q:"EU AI Act latest updates 2026"},output:{results:[{title:"EU AI Act Implementation Timeline",url:"https://example.com/ai-act",snippet:"The EU AI Act enters full force in 2026..."},{title:"High-Risk AI Systems Classification",url:"https://example.com/classification",snippet:"New guidance on high-risk categorization..."},{title:"Compliance Deadlines Approaching",url:"https://example.com/deadlines",snippet:"Organizations must comply by August 2026..."}],total_results:3,search_time_ms:1850},status:"success"},s4:{tool_call_id:"tc-002",tool_name:"database_query",input:{sql:"SELECT * FROM compliance_records WHERE region='EU' ORDER BY date DESC LIMIT 10"},output:{rows:[{id:1,company:"TechCorp",status:"compliant",date:"2026-01-15"},{id:2,company:"AIStartup",status:"in_progress",date:"2026-01-10"},{id:3,company:"DataCo",status:"compliant",date:"2026-01-05"}],row_count:42,query_time_ms:1100},status:"success"},s5:{role:"assistant",content:`Based on my analysis of the web search results and database records:

**Key Findings:**
1. The EU AI Act is now in full effect as of 2026
2. High-risk AI systems require specific compliance measures
3. 42 organizations in our database have compliance records

**Recommendations:**
- Review classification of AI systems
- Ensure documentation is complete
- Schedule compliance audit before August deadline`,model:"gpt-4o-2024-11-20",usage:{prompt_tokens:450,completion_tokens:250,total_tokens:700},reasoning:"Synthesized information from both the web search (3 relevant articles) and database query (42 compliance records) to provide actionable insights."}};function Hq(e,t){const n=Al.steps.find(a=>a.id===e);if(!n)return null;const r=Gq[e];if(!r)return null;const i=t?Kq(r):r;return{...n,data:i}}function Kq(e){var n,r;const t=JSON.parse(JSON.stringify(e));return(n=t.input)!=null&&n.sql&&(t.input.sql="[REDACTED]"),(r=t.output)!=null&&r.rows&&(t.output.rows=t.output.rows.map(i=>({...i,company:"[REDACTED]"}))),t.tool_calls&&(t.tool_calls=t.tool_calls.map(i=>({...i,function:{...i.function,arguments:"[REDACTED]"}}))),t}async function Wq(e,t,n,r=[],i=!1){return await new Promise(a=>setTimeout(a,150)),Hq(t,i)}async function Yq(e,t,n){await Wq(e,t,"redacted",[],n)}function Qq(e,t){return()=>{}}function Jq(){Bq.clear(),zq.clear()}async function Xq(e,t){return null}async function Zq(e){return null}async function Dz(e,t){return[]}async function Oz(e,t,n,r,i){return null}async function eF(){return[]}async function tF(e,t){return null}async function nF(e,t,n,r,i){return i?HT(i,t,n,r):null}function HT(e,t,n,r){var g;const i=JSON.parse(JSON.stringify(e)),a=6e4,s=Date.parse("2024-01-01T00:00:00.000Z"),o=Date.parse(e.endedAt??e.startedAt??""),u=(Number.isNaN(o)?s:o)+a,c=new Date(u);i.id=`${e.id}-replay-${u}`,i.parentTraceId=e.id,i.branchPointStepId=t,i.replay={strategy:n,modifiedStepId:t,modifications:r,createdAt:c.toISOString()};const f=p=>{if(!p)return p;const S=Date.parse(p);return Number.isNaN(S)?p:new Date(S+a).toISOString()};i.startedAt=f(i.startedAt)??i.startedAt,i.endedAt=f(i.endedAt);const h=new Set,m=((g=i.steps.find(p=>p.id===t))==null?void 0:g.index)??-1;return n==="live"?i.steps.forEach(p=>{p.index>m&&h.add(p.id)}):n==="hybrid"&&i.steps.forEach(p=>{p.index>m&&h.add(p.id)}),i.steps=i.steps.map(p=>{var v;const S={...p};if(S.startedAt=f(p.startedAt)??p.startedAt,S.endedAt=f(p.endedAt),p.id===t){const y=((v=p.preview)==null?void 0:v.outputPreview)??"";S.preview={...p.preview,outputPreview:`${y} (modified)`.trim()}}return h.has(p.id)&&(S.status="pending",S.endedAt=null,S.durationMs=void 0,S.metrics=void 0,S.preview={...p.preview,outputPreview:"[invalidated for replay]"}),S}),i}async function rF(e){return sF(e)}async function iF(e){var t;return((t=Gr.get(e))==null?void 0:t.job)??null}async function Px(e){var t;return((t=Gr.get(e))==null?void 0:t.matrix)??null}async function aF(e){{const t=Gr.get(e);if(!t)return null;const n={...t.job,status:"canceled",scenarios:t.job.scenarios.map(r=>({...r,status:"canceled",endedAt:r.endedAt??new Date().toISOString()}))};return Gr.set(e,{...t,job:n}),n}}function sF(e){const t=`demo-job-${Date.now()}-${Math.random().toString(36).slice(2,6)}`,n=Al,r=new Date().toISOString(),i=e.scenarios.map((l,u)=>({id:`demo-scn-${u+1}`,name:l.name,strategy:l.strategy,modifications:l.modifications,status:"running",startedAt:r,endedAt:null,replayTraceId:`${t}-replay-${u+1}`})),a={id:t,traceId:e.traceId,stepId:e.stepId,status:"running",createdAt:r,startedAt:r,endedAt:null,scenarioCount:i.length,completedCount:0,failedCount:0,canceledCount:0,scenarios:i},s=i.map(l=>{const u=HT(n,e.stepId,l.strategy,l.modifications);u.id=l.replayTraceId;const c=UT(n,u),f=n.metadata.totalCostUsd??0,h=u.metadata.totalCostUsd??f,m=n.metadata.errorCount??0,g=u.metadata.errorCount??m,p=n.metadata.retryCount??0,S=u.metadata.retryCount??p,v=u.steps.filter(y=>y.status==="pending").length;return{scenarioId:l.id,name:l.name,strategy:l.strategy,status:"completed",replayTraceId:l.replayTraceId,modifications:l.modifications,error:null,changedStepIds:c.changedSteps,addedStepIds:c.addedSteps,removedStepIds:c.removedSteps,metrics:{costDeltaUsd:h-f,wallTimeDeltaMs:(u.metadata.wallTimeMs??0)-(n.metadata.wallTimeMs??0),errorDelta:g-m,retryDelta:S-p,changedSteps:c.changedSteps.length,addedSteps:c.addedSteps.length,removedSteps:c.removedSteps.length,invalidatedStepCount:v}}}),o={jobId:t,traceId:e.traceId,stepId:e.stepId,rows:s,causalRanking:[]};return Gr.set(t,{job:a,matrix:o}),window.setTimeout(()=>{const l=Gr.get(t);if(!l)return;const u=new Date().toISOString(),c=l.job.scenarios.map(m=>({...m,status:"completed",endedAt:u})),f={...l.job,status:"completed",endedAt:u,completedCount:c.length,scenarios:c},h={...l.matrix,rows:l.matrix.rows.map(m=>({...m,status:"completed"}))};Gr.set(t,{job:f,matrix:h})},600),a}async function oF(e){return null}async function Rx(e){return null}async function lF(e){return null}async function uF(e){return null}async function Ax(e){return{session:null,conflict:!1,error:null}}async function cF(e){return null}async function dF(e){return null}async function fF(e,t){return null}async function hF(e){return null}async function pF(e,t,n){return null}function mF(e,t,n){return()=>{}}function gF(){const[e,t]=x.useState(null),[n,r]=x.useState(null),[i,a]=x.useState(!0),[s,o]=x.useState(null),[l,u]=x.useState([]),[c,f]=x.useState(null),h=x.useCallback(async g=>{const p=await GT(),S=(p==null?void 0:p.trace)??null;t(S),r(S?(p==null?void 0:p.insights)??VA(S):null)},[t,r]),m=x.useCallback(async()=>{var g;a(!0),o(null);try{const p=await Uq();u(p);const S=((g=p[p.length-1])==null?void 0:g.id)??null,v=c??S;if(!v){t(null),r(null);return}if(!c||c!==v){f(v);return}await h(v)}catch(p){o(p instanceof Error?p.message:"Failed to load trace")}finally{a(!1)}},[c,h]);return x.useEffect(()=>{m()},[m]),x.useEffect(()=>{c&&(a(!0),h(c).catch(g=>{o(g instanceof Error?g.message:"Failed to load trace")}).finally(()=>a(!1)))},[c,h]),x.useEffect(()=>Qq(),[c,f]),{trace:e,insights:n,loading:i,error:s,reload:m,traces:l,selectedTraceId:c,setSelectedTraceId:f}}function Re(e,t){const[n,r]=x.useState(()=>{if(typeof window>"u")return t;try{const i=window.localStorage.getItem(e);return i==null?t:JSON.parse(i)}catch{return t}});return x.useEffect(()=>{try{window.localStorage.setItem(e,JSON.stringify(n))}catch{}},[e,n]),[n,r]}function Jv(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var cc,Ix;function vF(){if(Ix)return cc;Ix=1;function e(){this.__data__=[],this.size=0}return cc=e,cc}var dc,Dx;function na(){if(Dx)return dc;Dx=1;function e(t,n){return t===n||t!==t&&n!==n}return dc=e,dc}var fc,Ox;function Il(){if(Ox)return fc;Ox=1;var e=na();function t(n,r){for(var i=n.length;i--;)if(e(n[i][0],r))return i;return-1}return fc=t,fc}var hc,Lx;function yF(){if(Lx)return hc;Lx=1;var e=Il(),t=Array.prototype,n=t.splice;function r(i){var a=this.__data__,s=e(a,i);if(s<0)return!1;var o=a.length-1;return s==o?a.pop():n.call(a,s,1),--this.size,!0}return hc=r,hc}var pc,qx;function bF(){if(qx)return pc;qx=1;var e=Il();function t(n){var r=this.__data__,i=e(r,n);return i<0?void 0:r[i][1]}return pc=t,pc}var mc,Fx;function xF(){if(Fx)return mc;Fx=1;var e=Il();function t(n){return e(this.__data__,n)>-1}return mc=t,mc}var gc,Vx;function wF(){if(Vx)return gc;Vx=1;var e=Il();function t(n,r){var i=this.__data__,a=e(i,n);return a<0?(++this.size,i.push([n,r])):i[a][1]=r,this}return gc=t,gc}var vc,$x;function Dl(){if($x)return vc;$x=1;var e=vF(),t=yF(),n=bF(),r=xF(),i=wF();function a(s){var o=-1,l=s==null?0:s.length;for(this.clear();++o<l;){var u=s[o];this.set(u[0],u[1])}}return a.prototype.clear=e,a.prototype.delete=t,a.prototype.get=n,a.prototype.has=r,a.prototype.set=i,vc=a,vc}var yc,Bx;function SF(){if(Bx)return yc;Bx=1;var e=Dl();function t(){this.__data__=new e,this.size=0}return yc=t,yc}var bc,zx;function _F(){if(zx)return bc;zx=1;function e(t){var n=this.__data__,r=n.delete(t);return this.size=n.size,r}return bc=e,bc}var xc,Ux;function kF(){if(Ux)return xc;Ux=1;function e(t){return this.__data__.get(t)}return xc=e,xc}var wc,Gx;function CF(){if(Gx)return wc;Gx=1;function e(t){return this.__data__.has(t)}return wc=e,wc}var Sc,Hx;function KT(){if(Hx)return Sc;Hx=1;var e=typeof $s=="object"&&$s&&$s.Object===Object&&$s;return Sc=e,Sc}var _c,Kx;function an(){if(Kx)return _c;Kx=1;var e=KT(),t=typeof self=="object"&&self&&self.Object===Object&&self,n=e||t||Function("return this")();return _c=n,_c}var kc,Wx;function ra(){if(Wx)return kc;Wx=1;var e=an(),t=e.Symbol;return kc=t,kc}var Cc,Yx;function jF(){if(Yx)return Cc;Yx=1;var e=ra(),t=Object.prototype,n=t.hasOwnProperty,r=t.toString,i=e?e.toStringTag:void 0;function a(s){var o=n.call(s,i),l=s[i];try{s[i]=void 0;var u=!0}catch{}var c=r.call(s);return u&&(o?s[i]=l:delete s[i]),c}return Cc=a,Cc}var jc,Qx;function EF(){if(Qx)return jc;Qx=1;var e=Object.prototype,t=e.toString;function n(r){return t.call(r)}return jc=n,jc}var Ec,Jx;function ei(){if(Jx)return Ec;Jx=1;var e=ra(),t=jF(),n=EF(),r="[object Null]",i="[object Undefined]",a=e?e.toStringTag:void 0;function s(o){return o==null?o===void 0?i:r:a&&a in Object(o)?t(o):n(o)}return Ec=s,Ec}var Tc,Xx;function Kt(){if(Xx)return Tc;Xx=1;function e(t){var n=typeof t;return t!=null&&(n=="object"||n=="function")}return Tc=e,Tc}var Nc,Zx;function Ms(){if(Zx)return Nc;Zx=1;var e=ei(),t=Kt(),n="[object AsyncFunction]",r="[object Function]",i="[object GeneratorFunction]",a="[object Proxy]";function s(o){if(!t(o))return!1;var l=e(o);return l==r||l==i||l==n||l==a}return Nc=s,Nc}var Mc,ew;function TF(){if(ew)return Mc;ew=1;var e=an(),t=e["__core-js_shared__"];return Mc=t,Mc}var Pc,tw;function NF(){if(tw)return Pc;tw=1;var e=TF(),t=function(){var r=/[^.]+$/.exec(e&&e.keys&&e.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}();function n(r){return!!t&&t in r}return Pc=n,Pc}var Rc,nw;function WT(){if(nw)return Rc;nw=1;var e=Function.prototype,t=e.toString;function n(r){if(r!=null){try{return t.call(r)}catch{}try{return r+""}catch{}}return""}return Rc=n,Rc}var Ac,rw;function MF(){if(rw)return Ac;rw=1;var e=Ms(),t=NF(),n=Kt(),r=WT(),i=/[\\^$.*+?()[\]{}|]/g,a=/^\[object .+?Constructor\]$/,s=Function.prototype,o=Object.prototype,l=s.toString,u=o.hasOwnProperty,c=RegExp("^"+l.call(u).replace(i,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function f(h){if(!n(h)||t(h))return!1;var m=e(h)?c:a;return m.test(r(h))}return Ac=f,Ac}var Ic,iw;function PF(){if(iw)return Ic;iw=1;function e(t,n){return t==null?void 0:t[n]}return Ic=e,Ic}var Dc,aw;function ti(){if(aw)return Dc;aw=1;var e=MF(),t=PF();function n(r,i){var a=t(r,i);return e(a)?a:void 0}return Dc=n,Dc}var Oc,sw;function Xv(){if(sw)return Oc;sw=1;var e=ti(),t=an(),n=e(t,"Map");return Oc=n,Oc}var Lc,ow;function Ol(){if(ow)return Lc;ow=1;var e=ti(),t=e(Object,"create");return Lc=t,Lc}var qc,lw;function RF(){if(lw)return qc;lw=1;var e=Ol();function t(){this.__data__=e?e(null):{},this.size=0}return qc=t,qc}var Fc,uw;function AF(){if(uw)return Fc;uw=1;function e(t){var n=this.has(t)&&delete this.__data__[t];return this.size-=n?1:0,n}return Fc=e,Fc}var Vc,cw;function IF(){if(cw)return Vc;cw=1;var e=Ol(),t="__lodash_hash_undefined__",n=Object.prototype,r=n.hasOwnProperty;function i(a){var s=this.__data__;if(e){var o=s[a];return o===t?void 0:o}return r.call(s,a)?s[a]:void 0}return Vc=i,Vc}var $c,dw;function DF(){if(dw)return $c;dw=1;var e=Ol(),t=Object.prototype,n=t.hasOwnProperty;function r(i){var a=this.__data__;return e?a[i]!==void 0:n.call(a,i)}return $c=r,$c}var Bc,fw;function OF(){if(fw)return Bc;fw=1;var e=Ol(),t="__lodash_hash_undefined__";function n(r,i){var a=this.__data__;return this.size+=this.has(r)?0:1,a[r]=e&&i===void 0?t:i,this}return Bc=n,Bc}var zc,hw;function LF(){if(hw)return zc;hw=1;var e=RF(),t=AF(),n=IF(),r=DF(),i=OF();function a(s){var o=-1,l=s==null?0:s.length;for(this.clear();++o<l;){var u=s[o];this.set(u[0],u[1])}}return a.prototype.clear=e,a.prototype.delete=t,a.prototype.get=n,a.prototype.has=r,a.prototype.set=i,zc=a,zc}var Uc,pw;function qF(){if(pw)return Uc;pw=1;var e=LF(),t=Dl(),n=Xv();function r(){this.size=0,this.__data__={hash:new e,map:new(n||t),string:new e}}return Uc=r,Uc}var Gc,mw;function FF(){if(mw)return Gc;mw=1;function e(t){var n=typeof t;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?t!=="__proto__":t===null}return Gc=e,Gc}var Hc,gw;function Ll(){if(gw)return Hc;gw=1;var e=FF();function t(n,r){var i=n.__data__;return e(r)?i[typeof r=="string"?"string":"hash"]:i.map}return Hc=t,Hc}var Kc,vw;function VF(){if(vw)return Kc;vw=1;var e=Ll();function t(n){var r=e(this,n).delete(n);return this.size-=r?1:0,r}return Kc=t,Kc}var Wc,yw;function $F(){if(yw)return Wc;yw=1;var e=Ll();function t(n){return e(this,n).get(n)}return Wc=t,Wc}var Yc,bw;function BF(){if(bw)return Yc;bw=1;var e=Ll();function t(n){return e(this,n).has(n)}return Yc=t,Yc}var Qc,xw;function zF(){if(xw)return Qc;xw=1;var e=Ll();function t(n,r){var i=e(this,n),a=i.size;return i.set(n,r),this.size+=i.size==a?0:1,this}return Qc=t,Qc}var Jc,ww;function Zv(){if(ww)return Jc;ww=1;var e=qF(),t=VF(),n=$F(),r=BF(),i=zF();function a(s){var o=-1,l=s==null?0:s.length;for(this.clear();++o<l;){var u=s[o];this.set(u[0],u[1])}}return a.prototype.clear=e,a.prototype.delete=t,a.prototype.get=n,a.prototype.has=r,a.prototype.set=i,Jc=a,Jc}var Xc,Sw;function UF(){if(Sw)return Xc;Sw=1;var e=Dl(),t=Xv(),n=Zv(),r=200;function i(a,s){var o=this.__data__;if(o instanceof e){var l=o.__data__;if(!t||l.length<r-1)return l.push([a,s]),this.size=++o.size,this;o=this.__data__=new n(l)}return o.set(a,s),this.size=o.size,this}return Xc=i,Xc}var Zc,_w;function ql(){if(_w)return Zc;_w=1;var e=Dl(),t=SF(),n=_F(),r=kF(),i=CF(),a=UF();function s(o){var l=this.__data__=new e(o);this.size=l.size}return s.prototype.clear=t,s.prototype.delete=n,s.prototype.get=r,s.prototype.has=i,s.prototype.set=a,Zc=s,Zc}var ed,kw;function ey(){if(kw)return ed;kw=1;function e(t,n){for(var r=-1,i=t==null?0:t.length;++r<i&&n(t[r],r,t)!==!1;);return t}return ed=e,ed}var td,Cw;function YT(){if(Cw)return td;Cw=1;var e=ti(),t=function(){try{var n=e(Object,"defineProperty");return n({},"",{}),n}catch{}}();return td=t,td}var nd,jw;function Fl(){if(jw)return nd;jw=1;var e=YT();function t(n,r,i){r=="__proto__"&&e?e(n,r,{configurable:!0,enumerable:!0,value:i,writable:!0}):n[r]=i}return nd=t,nd}var rd,Ew;function Vl(){if(Ew)return rd;Ew=1;var e=Fl(),t=na(),n=Object.prototype,r=n.hasOwnProperty;function i(a,s,o){var l=a[s];(!(r.call(a,s)&&t(l,o))||o===void 0&&!(s in a))&&e(a,s,o)}return rd=i,rd}var id,Tw;function Ps(){if(Tw)return id;Tw=1;var e=Vl(),t=Fl();function n(r,i,a,s){var o=!a;a||(a={});for(var l=-1,u=i.length;++l<u;){var c=i[l],f=s?s(a[c],r[c],c,a,r):void 0;f===void 0&&(f=r[c]),o?t(a,c,f):e(a,c,f)}return a}return id=n,id}var ad,Nw;function GF(){if(Nw)return ad;Nw=1;function e(t,n){for(var r=-1,i=Array(t);++r<t;)i[r]=n(r);return i}return ad=e,ad}var sd,Mw;function bn(){if(Mw)return sd;Mw=1;function e(t){return t!=null&&typeof t=="object"}return sd=e,sd}var od,Pw;function HF(){if(Pw)return od;Pw=1;var e=ei(),t=bn(),n="[object Arguments]";function r(i){return t(i)&&e(i)==n}return od=r,od}var ld,Rw;function Rs(){if(Rw)return ld;Rw=1;var e=HF(),t=bn(),n=Object.prototype,r=n.hasOwnProperty,i=n.propertyIsEnumerable,a=e(function(){return arguments}())?e:function(s){return t(s)&&r.call(s,"callee")&&!i.call(s,"callee")};return ld=a,ld}var ud,Aw;function Ye(){if(Aw)return ud;Aw=1;var e=Array.isArray;return ud=e,ud}var Aa={exports:{}},cd,Iw;function KF(){if(Iw)return cd;Iw=1;function e(){return!1}return cd=e,cd}Aa.exports;var Dw;function ia(){return Dw||(Dw=1,function(e,t){var n=an(),r=KF(),i=t&&!t.nodeType&&t,a=i&&!0&&e&&!e.nodeType&&e,s=a&&a.exports===i,o=s?n.Buffer:void 0,l=o?o.isBuffer:void 0,u=l||r;e.exports=u}(Aa,Aa.exports)),Aa.exports}var dd,Ow;function $l(){if(Ow)return dd;Ow=1;var e=9007199254740991,t=/^(?:0|[1-9]\d*)$/;function n(r,i){var a=typeof r;return i=i??e,!!i&&(a=="number"||a!="symbol"&&t.test(r))&&r>-1&&r%1==0&&r<i}return dd=n,dd}var fd,Lw;function ty(){if(Lw)return fd;Lw=1;var e=9007199254740991;function t(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=e}return fd=t,fd}var hd,qw;function WF(){if(qw)return hd;qw=1;var e=ei(),t=ty(),n=bn(),r="[object Arguments]",i="[object Array]",a="[object Boolean]",s="[object Date]",o="[object Error]",l="[object Function]",u="[object Map]",c="[object Number]",f="[object Object]",h="[object RegExp]",m="[object Set]",g="[object String]",p="[object WeakMap]",S="[object ArrayBuffer]",v="[object DataView]",y="[object Float32Array]",w="[object Float64Array]",_="[object Int8Array]",C="[object Int16Array]",E="[object Int32Array]",T="[object Uint8Array]",j="[object Uint8ClampedArray]",N="[object Uint16Array]",P="[object Uint32Array]",R={};R[y]=R[w]=R[_]=R[C]=R[E]=R[T]=R[j]=R[N]=R[P]=!0,R[r]=R[i]=R[S]=R[a]=R[v]=R[s]=R[o]=R[l]=R[u]=R[c]=R[f]=R[h]=R[m]=R[g]=R[p]=!1;function O(F){return n(F)&&t(F.length)&&!!R[e(F)]}return hd=O,hd}var pd,Fw;function Bl(){if(Fw)return pd;Fw=1;function e(t){return function(n){return t(n)}}return pd=e,pd}var Ia={exports:{}};Ia.exports;var Vw;function ny(){return Vw||(Vw=1,function(e,t){var n=KT(),r=t&&!t.nodeType&&t,i=r&&!0&&e&&!e.nodeType&&e,a=i&&i.exports===r,s=a&&n.process,o=function(){try{var l=i&&i.require&&i.require("util").types;return l||s&&s.binding&&s.binding("util")}catch{}}();e.exports=o}(Ia,Ia.exports)),Ia.exports}var md,$w;function As(){if($w)return md;$w=1;var e=WF(),t=Bl(),n=ny(),r=n&&n.isTypedArray,i=r?t(r):e;return md=i,md}var gd,Bw;function QT(){if(Bw)return gd;Bw=1;var e=GF(),t=Rs(),n=Ye(),r=ia(),i=$l(),a=As(),s=Object.prototype,o=s.hasOwnProperty;function l(u,c){var f=n(u),h=!f&&t(u),m=!f&&!h&&r(u),g=!f&&!h&&!m&&a(u),p=f||h||m||g,S=p?e(u.length,String):[],v=S.length;for(var y in u)(c||o.call(u,y))&&!(p&&(y=="length"||m&&(y=="offset"||y=="parent")||g&&(y=="buffer"||y=="byteLength"||y=="byteOffset")||i(y,v)))&&S.push(y);return S}return gd=l,gd}var vd,zw;function zl(){if(zw)return vd;zw=1;var e=Object.prototype;function t(n){var r=n&&n.constructor,i=typeof r=="function"&&r.prototype||e;return n===i}return vd=t,vd}var yd,Uw;function JT(){if(Uw)return yd;Uw=1;function e(t,n){return function(r){return t(n(r))}}return yd=e,yd}var bd,Gw;function YF(){if(Gw)return bd;Gw=1;var e=JT(),t=e(Object.keys,Object);return bd=t,bd}var xd,Hw;function ry(){if(Hw)return xd;Hw=1;var e=zl(),t=YF(),n=Object.prototype,r=n.hasOwnProperty;function i(a){if(!e(a))return t(a);var s=[];for(var o in Object(a))r.call(a,o)&&o!="constructor"&&s.push(o);return s}return xd=i,xd}var wd,Kw;function Bn(){if(Kw)return wd;Kw=1;var e=Ms(),t=ty();function n(r){return r!=null&&t(r.length)&&!e(r)}return wd=n,wd}var Sd,Ww;function Cr(){if(Ww)return Sd;Ww=1;var e=QT(),t=ry(),n=Bn();function r(i){return n(i)?e(i):t(i)}return Sd=r,Sd}var _d,Yw;function QF(){if(Yw)return _d;Yw=1;var e=Ps(),t=Cr();function n(r,i){return r&&e(i,t(i),r)}return _d=n,_d}var kd,Qw;function JF(){if(Qw)return kd;Qw=1;function e(t){var n=[];if(t!=null)for(var r in Object(t))n.push(r);return n}return kd=e,kd}var Cd,Jw;function XF(){if(Jw)return Cd;Jw=1;var e=Kt(),t=zl(),n=JF(),r=Object.prototype,i=r.hasOwnProperty;function a(s){if(!e(s))return n(s);var o=t(s),l=[];for(var u in s)u=="constructor"&&(o||!i.call(s,u))||l.push(u);return l}return Cd=a,Cd}var jd,Xw;function ni(){if(Xw)return jd;Xw=1;var e=QT(),t=XF(),n=Bn();function r(i){return n(i)?e(i,!0):t(i)}return jd=r,jd}var Ed,Zw;function ZF(){if(Zw)return Ed;Zw=1;var e=Ps(),t=ni();function n(r,i){return r&&e(i,t(i),r)}return Ed=n,Ed}var Da={exports:{}};Da.exports;var e1;function XT(){return e1||(e1=1,function(e,t){var n=an(),r=t&&!t.nodeType&&t,i=r&&!0&&e&&!e.nodeType&&e,a=i&&i.exports===r,s=a?n.Buffer:void 0,o=s?s.allocUnsafe:void 0;function l(u,c){if(c)return u.slice();var f=u.length,h=o?o(f):new u.constructor(f);return u.copy(h),h}e.exports=l}(Da,Da.exports)),Da.exports}var Td,t1;function ZT(){if(t1)return Td;t1=1;function e(t,n){var r=-1,i=t.length;for(n||(n=Array(i));++r<i;)n[r]=t[r];return n}return Td=e,Td}var Nd,n1;function eN(){if(n1)return Nd;n1=1;function e(t,n){for(var r=-1,i=t==null?0:t.length,a=0,s=[];++r<i;){var o=t[r];n(o,r,t)&&(s[a++]=o)}return s}return Nd=e,Nd}var Md,r1;function tN(){if(r1)return Md;r1=1;function e(){return[]}return Md=e,Md}var Pd,i1;function iy(){if(i1)return Pd;i1=1;var e=eN(),t=tN(),n=Object.prototype,r=n.propertyIsEnumerable,i=Object.getOwnPropertySymbols,a=i?function(s){return s==null?[]:(s=Object(s),e(i(s),function(o){return r.call(s,o)}))}:t;return Pd=a,Pd}var Rd,a1;function e3(){if(a1)return Rd;a1=1;var e=Ps(),t=iy();function n(r,i){return e(r,t(r),i)}return Rd=n,Rd}var Ad,s1;function ay(){if(s1)return Ad;s1=1;function e(t,n){for(var r=-1,i=n.length,a=t.length;++r<i;)t[a+r]=n[r];return t}return Ad=e,Ad}var Id,o1;function Ul(){if(o1)return Id;o1=1;var e=JT(),t=e(Object.getPrototypeOf,Object);return Id=t,Id}var Dd,l1;function nN(){if(l1)return Dd;l1=1;var e=ay(),t=Ul(),n=iy(),r=tN(),i=Object.getOwnPropertySymbols,a=i?function(s){for(var o=[];s;)e(o,n(s)),s=t(s);return o}:r;return Dd=a,Dd}var Od,u1;function t3(){if(u1)return Od;u1=1;var e=Ps(),t=nN();function n(r,i){return e(r,t(r),i)}return Od=n,Od}var Ld,c1;function rN(){if(c1)return Ld;c1=1;var e=ay(),t=Ye();function n(r,i,a){var s=i(r);return t(r)?s:e(s,a(r))}return Ld=n,Ld}var qd,d1;function iN(){if(d1)return qd;d1=1;var e=rN(),t=iy(),n=Cr();function r(i){return e(i,n,t)}return qd=r,qd}var Fd,f1;function n3(){if(f1)return Fd;f1=1;var e=rN(),t=nN(),n=ni();function r(i){return e(i,n,t)}return Fd=r,Fd}var Vd,h1;function r3(){if(h1)return Vd;h1=1;var e=ti(),t=an(),n=e(t,"DataView");return Vd=n,Vd}var $d,p1;function i3(){if(p1)return $d;p1=1;var e=ti(),t=an(),n=e(t,"Promise");return $d=n,$d}var Bd,m1;function aN(){if(m1)return Bd;m1=1;var e=ti(),t=an(),n=e(t,"Set");return Bd=n,Bd}var zd,g1;function a3(){if(g1)return zd;g1=1;var e=ti(),t=an(),n=e(t,"WeakMap");return zd=n,zd}var Ud,v1;function aa(){if(v1)return Ud;v1=1;var e=r3(),t=Xv(),n=i3(),r=aN(),i=a3(),a=ei(),s=WT(),o="[object Map]",l="[object Object]",u="[object Promise]",c="[object Set]",f="[object WeakMap]",h="[object DataView]",m=s(e),g=s(t),p=s(n),S=s(r),v=s(i),y=a;return(e&&y(new e(new ArrayBuffer(1)))!=h||t&&y(new t)!=o||n&&y(n.resolve())!=u||r&&y(new r)!=c||i&&y(new i)!=f)&&(y=function(w){var _=a(w),C=_==l?w.constructor:void 0,E=C?s(C):"";if(E)switch(E){case m:return h;case g:return o;case p:return u;case S:return c;case v:return f}return _}),Ud=y,Ud}var Gd,y1;function s3(){if(y1)return Gd;y1=1;var e=Object.prototype,t=e.hasOwnProperty;function n(r){var i=r.length,a=new r.constructor(i);return i&&typeof r[0]=="string"&&t.call(r,"index")&&(a.index=r.index,a.input=r.input),a}return Gd=n,Gd}var Hd,b1;function sN(){if(b1)return Hd;b1=1;var e=an(),t=e.Uint8Array;return Hd=t,Hd}var Kd,x1;function sy(){if(x1)return Kd;x1=1;var e=sN();function t(n){var r=new n.constructor(n.byteLength);return new e(r).set(new e(n)),r}return Kd=t,Kd}var Wd,w1;function o3(){if(w1)return Wd;w1=1;var e=sy();function t(n,r){var i=r?e(n.buffer):n.buffer;return new n.constructor(i,n.byteOffset,n.byteLength)}return Wd=t,Wd}var Yd,S1;function l3(){if(S1)return Yd;S1=1;var e=/\w*$/;function t(n){var r=new n.constructor(n.source,e.exec(n));return r.lastIndex=n.lastIndex,r}return Yd=t,Yd}var Qd,_1;function u3(){if(_1)return Qd;_1=1;var e=ra(),t=e?e.prototype:void 0,n=t?t.valueOf:void 0;function r(i){return n?Object(n.call(i)):{}}return Qd=r,Qd}var Jd,k1;function oN(){if(k1)return Jd;k1=1;var e=sy();function t(n,r){var i=r?e(n.buffer):n.buffer;return new n.constructor(i,n.byteOffset,n.length)}return Jd=t,Jd}var Xd,C1;function c3(){if(C1)return Xd;C1=1;var e=sy(),t=o3(),n=l3(),r=u3(),i=oN(),a="[object Boolean]",s="[object Date]",o="[object Map]",l="[object Number]",u="[object RegExp]",c="[object Set]",f="[object String]",h="[object Symbol]",m="[object ArrayBuffer]",g="[object DataView]",p="[object Float32Array]",S="[object Float64Array]",v="[object Int8Array]",y="[object Int16Array]",w="[object Int32Array]",_="[object Uint8Array]",C="[object Uint8ClampedArray]",E="[object Uint16Array]",T="[object Uint32Array]";function j(N,P,R){var O=N.constructor;switch(P){case m:return e(N);case a:case s:return new O(+N);case g:return t(N,R);case p:case S:case v:case y:case w:case _:case C:case E:case T:return i(N,R);case o:return new O;case l:case f:return new O(N);case u:return n(N);case c:return new O;case h:return r(N)}}return Xd=j,Xd}var Zd,j1;function lN(){if(j1)return Zd;j1=1;var e=Kt(),t=Object.create,n=function(){function r(){}return function(i){if(!e(i))return{};if(t)return t(i);r.prototype=i;var a=new r;return r.prototype=void 0,a}}();return Zd=n,Zd}var ef,E1;function uN(){if(E1)return ef;E1=1;var e=lN(),t=Ul(),n=zl();function r(i){return typeof i.constructor=="function"&&!n(i)?e(t(i)):{}}return ef=r,ef}var tf,T1;function d3(){if(T1)return tf;T1=1;var e=aa(),t=bn(),n="[object Map]";function r(i){return t(i)&&e(i)==n}return tf=r,tf}var nf,N1;function f3(){if(N1)return nf;N1=1;var e=d3(),t=Bl(),n=ny(),r=n&&n.isMap,i=r?t(r):e;return nf=i,nf}var rf,M1;function h3(){if(M1)return rf;M1=1;var e=aa(),t=bn(),n="[object Set]";function r(i){return t(i)&&e(i)==n}return rf=r,rf}var af,P1;function p3(){if(P1)return af;P1=1;var e=h3(),t=Bl(),n=ny(),r=n&&n.isSet,i=r?t(r):e;return af=i,af}var sf,R1;function cN(){if(R1)return sf;R1=1;var e=ql(),t=ey(),n=Vl(),r=QF(),i=ZF(),a=XT(),s=ZT(),o=e3(),l=t3(),u=iN(),c=n3(),f=aa(),h=s3(),m=c3(),g=uN(),p=Ye(),S=ia(),v=f3(),y=Kt(),w=p3(),_=Cr(),C=ni(),E=1,T=2,j=4,N="[object Arguments]",P="[object Array]",R="[object Boolean]",O="[object Date]",F="[object Error]",X="[object Function]",$="[object GeneratorFunction]",fe="[object Map]",ie="[object Number]",D="[object Object]",B="[object RegExp]",V="[object Set]",z="[object String]",te="[object Symbol]",A="[object WeakMap]",J="[object ArrayBuffer]",se="[object DataView]",U="[object Float32Array]",me="[object Float64Array]",Xe="[object Int8Array]",ft="[object Int16Array]",Dt="[object Int32Array]",xn="[object Uint8Array]",Un="[object Uint8ClampedArray]",G="[object Uint16Array]",le="[object Uint32Array]",ne={};ne[N]=ne[P]=ne[J]=ne[se]=ne[R]=ne[O]=ne[U]=ne[me]=ne[Xe]=ne[ft]=ne[Dt]=ne[fe]=ne[ie]=ne[D]=ne[B]=ne[V]=ne[z]=ne[te]=ne[xn]=ne[Un]=ne[G]=ne[le]=!0,ne[F]=ne[X]=ne[A]=!1;function Le(ue,qe,Yt,jr,_t,Ke){var xe,Ot=qe&E,on=qe&T,oa=qe&j;if(Yt&&(xe=_t?Yt(ue,jr,_t,Ke):Yt(ue)),xe!==void 0)return xe;if(!y(ue))return ue;var Gn=p(ue);if(Gn){if(xe=h(ue),!Ot)return s(ue,xe)}else{var ve=f(ue),ai=ve==X||ve==$;if(S(ue))return a(ue,Ot);if(ve==D||ve==N||ai&&!_t){if(xe=on||ai?{}:g(ue),!Ot)return on?l(ue,i(xe,ue)):o(ue,r(xe,ue))}else{if(!ne[ve])return _t?ue:{};xe=m(ue,ve,Ot)}}Ke||(Ke=new e);var Er=Ke.get(ue);if(Er)return Er;Ke.set(ue,xe),w(ue)?ue.forEach(function(kt){xe.add(Le(kt,qe,Yt,kt,ue,Ke))}):v(ue)&&ue.forEach(function(kt,M){xe.set(M,Le(kt,qe,Yt,M,ue,Ke))});var Hn=oa?on?c:u:on?C:_,ln=Gn?void 0:Hn(ue);return t(ln||ue,function(kt,M){ln&&(M=kt,kt=ue[M]),n(xe,M,Le(kt,qe,Yt,M,ue,Ke))}),xe}return sf=Le,sf}var of,A1;function m3(){if(A1)return of;A1=1;var e=cN(),t=4;function n(r){return e(r,t)}return of=n,of}var lf,I1;function oy(){if(I1)return lf;I1=1;function e(t){return function(){return t}}return lf=e,lf}var uf,D1;function g3(){if(D1)return uf;D1=1;function e(t){return function(n,r,i){for(var a=-1,s=Object(n),o=i(n),l=o.length;l--;){var u=o[t?l:++a];if(r(s[u],u,s)===!1)break}return n}}return uf=e,uf}var cf,O1;function ly(){if(O1)return cf;O1=1;var e=g3(),t=e();return cf=t,cf}var df,L1;function uy(){if(L1)return df;L1=1;var e=ly(),t=Cr();function n(r,i){return r&&e(r,i,t)}return df=n,df}var ff,q1;function v3(){if(q1)return ff;q1=1;var e=Bn();function t(n,r){return function(i,a){if(i==null)return i;if(!e(i))return n(i,a);for(var s=i.length,o=r?s:-1,l=Object(i);(r?o--:++o<s)&&a(l[o],o,l)!==!1;);return i}}return ff=t,ff}var hf,F1;function Gl(){if(F1)return hf;F1=1;var e=uy(),t=v3(),n=t(e);return hf=n,hf}var pf,V1;function ri(){if(V1)return pf;V1=1;function e(t){return t}return pf=e,pf}var mf,$1;function dN(){if($1)return mf;$1=1;var e=ri();function t(n){return typeof n=="function"?n:e}return mf=t,mf}var gf,B1;function fN(){if(B1)return gf;B1=1;var e=ey(),t=Gl(),n=dN(),r=Ye();function i(a,s){var o=r(a)?e:t;return o(a,n(s))}return gf=i,gf}var vf,z1;function hN(){return z1||(z1=1,vf=fN()),vf}var yf,U1;function y3(){if(U1)return yf;U1=1;var e=Gl();function t(n,r){var i=[];return e(n,function(a,s,o){r(a,s,o)&&i.push(a)}),i}return yf=t,yf}var bf,G1;function b3(){if(G1)return bf;G1=1;var e="__lodash_hash_undefined__";function t(n){return this.__data__.set(n,e),this}return bf=t,bf}var xf,H1;function x3(){if(H1)return xf;H1=1;function e(t){return this.__data__.has(t)}return xf=e,xf}var wf,K1;function pN(){if(K1)return wf;K1=1;var e=Zv(),t=b3(),n=x3();function r(i){var a=-1,s=i==null?0:i.length;for(this.__data__=new e;++a<s;)this.add(i[a])}return r.prototype.add=r.prototype.push=t,r.prototype.has=n,wf=r,wf}var Sf,W1;function w3(){if(W1)return Sf;W1=1;function e(t,n){for(var r=-1,i=t==null?0:t.length;++r<i;)if(n(t[r],r,t))return!0;return!1}return Sf=e,Sf}var _f,Y1;function mN(){if(Y1)return _f;Y1=1;function e(t,n){return t.has(n)}return _f=e,_f}var kf,Q1;function gN(){if(Q1)return kf;Q1=1;var e=pN(),t=w3(),n=mN(),r=1,i=2;function a(s,o,l,u,c,f){var h=l&r,m=s.length,g=o.length;if(m!=g&&!(h&&g>m))return!1;var p=f.get(s),S=f.get(o);if(p&&S)return p==o&&S==s;var v=-1,y=!0,w=l&i?new e:void 0;for(f.set(s,o),f.set(o,s);++v<m;){var _=s[v],C=o[v];if(u)var E=h?u(C,_,v,o,s,f):u(_,C,v,s,o,f);if(E!==void 0){if(E)continue;y=!1;break}if(w){if(!t(o,function(T,j){if(!n(w,j)&&(_===T||c(_,T,l,u,f)))return w.push(j)})){y=!1;break}}else if(!(_===C||c(_,C,l,u,f))){y=!1;break}}return f.delete(s),f.delete(o),y}return kf=a,kf}var Cf,J1;function S3(){if(J1)return Cf;J1=1;function e(t){var n=-1,r=Array(t.size);return t.forEach(function(i,a){r[++n]=[a,i]}),r}return Cf=e,Cf}var jf,X1;function cy(){if(X1)return jf;X1=1;function e(t){var n=-1,r=Array(t.size);return t.forEach(function(i){r[++n]=i}),r}return jf=e,jf}var Ef,Z1;function _3(){if(Z1)return Ef;Z1=1;var e=ra(),t=sN(),n=na(),r=gN(),i=S3(),a=cy(),s=1,o=2,l="[object Boolean]",u="[object Date]",c="[object Error]",f="[object Map]",h="[object Number]",m="[object RegExp]",g="[object Set]",p="[object String]",S="[object Symbol]",v="[object ArrayBuffer]",y="[object DataView]",w=e?e.prototype:void 0,_=w?w.valueOf:void 0;function C(E,T,j,N,P,R,O){switch(j){case y:if(E.byteLength!=T.byteLength||E.byteOffset!=T.byteOffset)return!1;E=E.buffer,T=T.buffer;case v:return!(E.byteLength!=T.byteLength||!R(new t(E),new t(T)));case l:case u:case h:return n(+E,+T);case c:return E.name==T.name&&E.message==T.message;case m:case p:return E==T+"";case f:var F=i;case g:var X=N&s;if(F||(F=a),E.size!=T.size&&!X)return!1;var $=O.get(E);if($)return $==T;N|=o,O.set(E,T);var fe=r(F(E),F(T),N,P,R,O);return O.delete(E),fe;case S:if(_)return _.call(E)==_.call(T)}return!1}return Ef=C,Ef}var Tf,eS;function k3(){if(eS)return Tf;eS=1;var e=iN(),t=1,n=Object.prototype,r=n.hasOwnProperty;function i(a,s,o,l,u,c){var f=o&t,h=e(a),m=h.length,g=e(s),p=g.length;if(m!=p&&!f)return!1;for(var S=m;S--;){var v=h[S];if(!(f?v in s:r.call(s,v)))return!1}var y=c.get(a),w=c.get(s);if(y&&w)return y==s&&w==a;var _=!0;c.set(a,s),c.set(s,a);for(var C=f;++S<m;){v=h[S];var E=a[v],T=s[v];if(l)var j=f?l(T,E,v,s,a,c):l(E,T,v,a,s,c);if(!(j===void 0?E===T||u(E,T,o,l,c):j)){_=!1;break}C||(C=v=="constructor")}if(_&&!C){var N=a.constructor,P=s.constructor;N!=P&&"constructor"in a&&"constructor"in s&&!(typeof N=="function"&&N instanceof N&&typeof P=="function"&&P instanceof P)&&(_=!1)}return c.delete(a),c.delete(s),_}return Tf=i,Tf}var Nf,tS;function C3(){if(tS)return Nf;tS=1;var e=ql(),t=gN(),n=_3(),r=k3(),i=aa(),a=Ye(),s=ia(),o=As(),l=1,u="[object Arguments]",c="[object Array]",f="[object Object]",h=Object.prototype,m=h.hasOwnProperty;function g(p,S,v,y,w,_){var C=a(p),E=a(S),T=C?c:i(p),j=E?c:i(S);T=T==u?f:T,j=j==u?f:j;var N=T==f,P=j==f,R=T==j;if(R&&s(p)){if(!s(S))return!1;C=!0,N=!1}if(R&&!N)return _||(_=new e),C||o(p)?t(p,S,v,y,w,_):n(p,S,T,v,y,w,_);if(!(v&l)){var O=N&&m.call(p,"__wrapped__"),F=P&&m.call(S,"__wrapped__");if(O||F){var X=O?p.value():p,$=F?S.value():S;return _||(_=new e),w(X,$,v,y,_)}}return R?(_||(_=new e),r(p,S,v,y,w,_)):!1}return Nf=g,Nf}var Mf,nS;function vN(){if(nS)return Mf;nS=1;var e=C3(),t=bn();function n(r,i,a,s,o){return r===i?!0:r==null||i==null||!t(r)&&!t(i)?r!==r&&i!==i:e(r,i,a,s,n,o)}return Mf=n,Mf}var Pf,rS;function j3(){if(rS)return Pf;rS=1;var e=ql(),t=vN(),n=1,r=2;function i(a,s,o,l){var u=o.length,c=u,f=!l;if(a==null)return!c;for(a=Object(a);u--;){var h=o[u];if(f&&h[2]?h[1]!==a[h[0]]:!(h[0]in a))return!1}for(;++u<c;){h=o[u];var m=h[0],g=a[m],p=h[1];if(f&&h[2]){if(g===void 0&&!(m in a))return!1}else{var S=new e;if(l)var v=l(g,p,m,a,s,S);if(!(v===void 0?t(p,g,n|r,l,S):v))return!1}}return!0}return Pf=i,Pf}var Rf,iS;function yN(){if(iS)return Rf;iS=1;var e=Kt();function t(n){return n===n&&!e(n)}return Rf=t,Rf}var Af,aS;function E3(){if(aS)return Af;aS=1;var e=yN(),t=Cr();function n(r){for(var i=t(r),a=i.length;a--;){var s=i[a],o=r[s];i[a]=[s,o,e(o)]}return i}return Af=n,Af}var If,sS;function bN(){if(sS)return If;sS=1;function e(t,n){return function(r){return r==null?!1:r[t]===n&&(n!==void 0||t in Object(r))}}return If=e,If}var Df,oS;function T3(){if(oS)return Df;oS=1;var e=j3(),t=E3(),n=bN();function r(i){var a=t(i);return a.length==1&&a[0][2]?n(a[0][0],a[0][1]):function(s){return s===i||e(s,i,a)}}return Df=r,Df}var Of,lS;function sa(){if(lS)return Of;lS=1;var e=ei(),t=bn(),n="[object Symbol]";function r(i){return typeof i=="symbol"||t(i)&&e(i)==n}return Of=r,Of}var Lf,uS;function dy(){if(uS)return Lf;uS=1;var e=Ye(),t=sa(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function i(a,s){if(e(a))return!1;var o=typeof a;return o=="number"||o=="symbol"||o=="boolean"||a==null||t(a)?!0:r.test(a)||!n.test(a)||s!=null&&a in Object(s)}return Lf=i,Lf}var qf,cS;function N3(){if(cS)return qf;cS=1;var e=Zv(),t="Expected a function";function n(r,i){if(typeof r!="function"||i!=null&&typeof i!="function")throw new TypeError(t);var a=function(){var s=arguments,o=i?i.apply(this,s):s[0],l=a.cache;if(l.has(o))return l.get(o);var u=r.apply(this,s);return a.cache=l.set(o,u)||l,u};return a.cache=new(n.Cache||e),a}return n.Cache=e,qf=n,qf}var Ff,dS;function M3(){if(dS)return Ff;dS=1;var e=N3(),t=500;function n(r){var i=e(r,function(s){return a.size===t&&a.clear(),s}),a=i.cache;return i}return Ff=n,Ff}var Vf,fS;function P3(){if(fS)return Vf;fS=1;var e=M3(),t=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,n=/\\(\\)?/g,r=e(function(i){var a=[];return i.charCodeAt(0)===46&&a.push(""),i.replace(t,function(s,o,l,u){a.push(l?u.replace(n,"$1"):o||s)}),a});return Vf=r,Vf}var $f,hS;function Hl(){if(hS)return $f;hS=1;function e(t,n){for(var r=-1,i=t==null?0:t.length,a=Array(i);++r<i;)a[r]=n(t[r],r,t);return a}return $f=e,$f}var Bf,pS;function R3(){if(pS)return Bf;pS=1;var e=ra(),t=Hl(),n=Ye(),r=sa(),i=e?e.prototype:void 0,a=i?i.toString:void 0;function s(o){if(typeof o=="string")return o;if(n(o))return t(o,s)+"";if(r(o))return a?a.call(o):"";var l=o+"";return l=="0"&&1/o==-1/0?"-0":l}return Bf=s,Bf}var zf,mS;function xN(){if(mS)return zf;mS=1;var e=R3();function t(n){return n==null?"":e(n)}return zf=t,zf}var Uf,gS;function Kl(){if(gS)return Uf;gS=1;var e=Ye(),t=dy(),n=P3(),r=xN();function i(a,s){return e(a)?a:t(a,s)?[a]:n(r(a))}return Uf=i,Uf}var Gf,vS;function Is(){if(vS)return Gf;vS=1;var e=sa();function t(n){if(typeof n=="string"||e(n))return n;var r=n+"";return r=="0"&&1/n==-1/0?"-0":r}return Gf=t,Gf}var Hf,yS;function Wl(){if(yS)return Hf;yS=1;var e=Kl(),t=Is();function n(r,i){i=e(i,r);for(var a=0,s=i.length;r!=null&&a<s;)r=r[t(i[a++])];return a&&a==s?r:void 0}return Hf=n,Hf}var Kf,bS;function A3(){if(bS)return Kf;bS=1;var e=Wl();function t(n,r,i){var a=n==null?void 0:e(n,r);return a===void 0?i:a}return Kf=t,Kf}var Wf,xS;function I3(){if(xS)return Wf;xS=1;function e(t,n){return t!=null&&n in Object(t)}return Wf=e,Wf}var Yf,wS;function wN(){if(wS)return Yf;wS=1;var e=Kl(),t=Rs(),n=Ye(),r=$l(),i=ty(),a=Is();function s(o,l,u){l=e(l,o);for(var c=-1,f=l.length,h=!1;++c<f;){var m=a(l[c]);if(!(h=o!=null&&u(o,m)))break;o=o[m]}return h||++c!=f?h:(f=o==null?0:o.length,!!f&&i(f)&&r(m,f)&&(n(o)||t(o)))}return Yf=s,Yf}var Qf,SS;function SN(){if(SS)return Qf;SS=1;var e=I3(),t=wN();function n(r,i){return r!=null&&t(r,i,e)}return Qf=n,Qf}var Jf,_S;function D3(){if(_S)return Jf;_S=1;var e=vN(),t=A3(),n=SN(),r=dy(),i=yN(),a=bN(),s=Is(),o=1,l=2;function u(c,f){return r(c)&&i(f)?a(s(c),f):function(h){var m=t(h,c);return m===void 0&&m===f?n(h,c):e(f,m,o|l)}}return Jf=u,Jf}var Xf,kS;function _N(){if(kS)return Xf;kS=1;function e(t){return function(n){return n==null?void 0:n[t]}}return Xf=e,Xf}var Zf,CS;function O3(){if(CS)return Zf;CS=1;var e=Wl();function t(n){return function(r){return e(r,n)}}return Zf=t,Zf}var eh,jS;function L3(){if(jS)return eh;jS=1;var e=_N(),t=O3(),n=dy(),r=Is();function i(a){return n(a)?e(r(a)):t(a)}return eh=i,eh}var th,ES;function zn(){if(ES)return th;ES=1;var e=T3(),t=D3(),n=ri(),r=Ye(),i=L3();function a(s){return typeof s=="function"?s:s==null?n:typeof s=="object"?r(s)?t(s[0],s[1]):e(s):i(s)}return th=a,th}var nh,TS;function kN(){if(TS)return nh;TS=1;var e=eN(),t=y3(),n=zn(),r=Ye();function i(a,s){var o=r(a)?e:t;return o(a,n(s,3))}return nh=i,nh}var rh,NS;function q3(){if(NS)return rh;NS=1;var e=Object.prototype,t=e.hasOwnProperty;function n(r,i){return r!=null&&t.call(r,i)}return rh=n,rh}var ih,MS;function CN(){if(MS)return ih;MS=1;var e=q3(),t=wN();function n(r,i){return r!=null&&t(r,i,e)}return ih=n,ih}var ah,PS;function F3(){if(PS)return ah;PS=1;var e=ry(),t=aa(),n=Rs(),r=Ye(),i=Bn(),a=ia(),s=zl(),o=As(),l="[object Map]",u="[object Set]",c=Object.prototype,f=c.hasOwnProperty;function h(m){if(m==null)return!0;if(i(m)&&(r(m)||typeof m=="string"||typeof m.splice=="function"||a(m)||o(m)||n(m)))return!m.length;var g=t(m);if(g==l||g==u)return!m.size;if(s(m))return!e(m).length;for(var p in m)if(f.call(m,p))return!1;return!0}return ah=h,ah}var sh,RS;function jN(){if(RS)return sh;RS=1;function e(t){return t===void 0}return sh=e,sh}var oh,AS;function EN(){if(AS)return oh;AS=1;var e=Gl(),t=Bn();function n(r,i){var a=-1,s=t(r)?Array(r.length):[];return e(r,function(o,l,u){s[++a]=i(o,l,u)}),s}return oh=n,oh}var lh,IS;function TN(){if(IS)return lh;IS=1;var e=Hl(),t=zn(),n=EN(),r=Ye();function i(a,s){var o=r(a)?e:n;return o(a,t(s,3))}return lh=i,lh}var uh,DS;function V3(){if(DS)return uh;DS=1;function e(t,n,r,i){var a=-1,s=t==null?0:t.length;for(i&&s&&(r=t[++a]);++a<s;)r=n(r,t[a],a,t);return r}return uh=e,uh}var ch,OS;function $3(){if(OS)return ch;OS=1;function e(t,n,r,i,a){return a(t,function(s,o,l){r=i?(i=!1,s):n(r,s,o,l)}),r}return ch=e,ch}var dh,LS;function NN(){if(LS)return dh;LS=1;var e=V3(),t=Gl(),n=zn(),r=$3(),i=Ye();function a(s,o,l){var u=i(s)?e:r,c=arguments.length<3;return u(s,n(o,4),l,c,t)}return dh=a,dh}var fh,qS;function B3(){if(qS)return fh;qS=1;var e=ei(),t=Ye(),n=bn(),r="[object String]";function i(a){return typeof a=="string"||!t(a)&&n(a)&&e(a)==r}return fh=i,fh}var hh,FS;function z3(){if(FS)return hh;FS=1;var e=_N(),t=e("length");return hh=t,hh}var ph,VS;function U3(){if(VS)return ph;VS=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",i=t+n+r,a="\\ufe0e\\ufe0f",s="\\u200d",o=RegExp("["+s+e+i+a+"]");function l(u){return o.test(u)}return ph=l,ph}var mh,$S;function G3(){if($S)return mh;$S=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",i=t+n+r,a="\\ufe0e\\ufe0f",s="["+e+"]",o="["+i+"]",l="\\ud83c[\\udffb-\\udfff]",u="(?:"+o+"|"+l+")",c="[^"+e+"]",f="(?:\\ud83c[\\udde6-\\uddff]){2}",h="[\\ud800-\\udbff][\\udc00-\\udfff]",m="\\u200d",g=u+"?",p="["+a+"]?",S="(?:"+m+"(?:"+[c,f,h].join("|")+")"+p+g+")*",v=p+g+S,y="(?:"+[c+o+"?",o,f,h,s].join("|")+")",w=RegExp(l+"(?="+l+")|"+y+v,"g");function _(C){for(var E=w.lastIndex=0;w.test(C);)++E;return E}return mh=_,mh}var gh,BS;function H3(){if(BS)return gh;BS=1;var e=z3(),t=U3(),n=G3();function r(i){return t(i)?n(i):e(i)}return gh=r,gh}var vh,zS;function K3(){if(zS)return vh;zS=1;var e=ry(),t=aa(),n=Bn(),r=B3(),i=H3(),a="[object Map]",s="[object Set]";function o(l){if(l==null)return 0;if(n(l))return r(l)?i(l):l.length;var u=t(l);return u==a||u==s?l.size:e(l).length}return vh=o,vh}var yh,US;function W3(){if(US)return yh;US=1;var e=ey(),t=lN(),n=uy(),r=zn(),i=Ul(),a=Ye(),s=ia(),o=Ms(),l=Kt(),u=As();function c(f,h,m){var g=a(f),p=g||s(f)||u(f);if(h=r(h,4),m==null){var S=f&&f.constructor;p?m=g?new S:[]:l(f)?m=o(S)?t(i(f)):{}:m={}}return(p?e:n)(f,function(v,y,w){return h(m,v,y,w)}),m}return yh=c,yh}var bh,GS;function Y3(){if(GS)return bh;GS=1;var e=ra(),t=Rs(),n=Ye(),r=e?e.isConcatSpreadable:void 0;function i(a){return n(a)||t(a)||!!(r&&a&&a[r])}return bh=i,bh}var xh,HS;function fy(){if(HS)return xh;HS=1;var e=ay(),t=Y3();function n(r,i,a,s,o){var l=-1,u=r.length;for(a||(a=t),o||(o=[]);++l<u;){var c=r[l];i>0&&a(c)?i>1?n(c,i-1,a,s,o):e(o,c):s||(o[o.length]=c)}return o}return xh=n,xh}var wh,KS;function Q3(){if(KS)return wh;KS=1;function e(t,n,r){switch(r.length){case 0:return t.call(n);case 1:return t.call(n,r[0]);case 2:return t.call(n,r[0],r[1]);case 3:return t.call(n,r[0],r[1],r[2])}return t.apply(n,r)}return wh=e,wh}var Sh,WS;function MN(){if(WS)return Sh;WS=1;var e=Q3(),t=Math.max;function n(r,i,a){return i=t(i===void 0?r.length-1:i,0),function(){for(var s=arguments,o=-1,l=t(s.length-i,0),u=Array(l);++o<l;)u[o]=s[i+o];o=-1;for(var c=Array(i+1);++o<i;)c[o]=s[o];return c[i]=a(u),e(r,this,c)}}return Sh=n,Sh}var _h,YS;function J3(){if(YS)return _h;YS=1;var e=oy(),t=YT(),n=ri(),r=t?function(i,a){return t(i,"toString",{configurable:!0,enumerable:!1,value:e(a),writable:!0})}:n;return _h=r,_h}var kh,QS;function X3(){if(QS)return kh;QS=1;var e=800,t=16,n=Date.now;function r(i){var a=0,s=0;return function(){var o=n(),l=t-(o-s);if(s=o,l>0){if(++a>=e)return arguments[0]}else a=0;return i.apply(void 0,arguments)}}return kh=r,kh}var Ch,JS;function PN(){if(JS)return Ch;JS=1;var e=J3(),t=X3(),n=t(e);return Ch=n,Ch}var jh,XS;function Yl(){if(XS)return jh;XS=1;var e=ri(),t=MN(),n=PN();function r(i,a){return n(t(i,a,e),i+"")}return jh=r,jh}var Eh,ZS;function RN(){if(ZS)return Eh;ZS=1;function e(t,n,r,i){for(var a=t.length,s=r+(i?1:-1);i?s--:++s<a;)if(n(t[s],s,t))return s;return-1}return Eh=e,Eh}var Th,e_;function Z3(){if(e_)return Th;e_=1;function e(t){return t!==t}return Th=e,Th}var Nh,t_;function eV(){if(t_)return Nh;t_=1;function e(t,n,r){for(var i=r-1,a=t.length;++i<a;)if(t[i]===n)return i;return-1}return Nh=e,Nh}var Mh,n_;function tV(){if(n_)return Mh;n_=1;var e=RN(),t=Z3(),n=eV();function r(i,a,s){return a===a?n(i,a,s):e(i,t,s)}return Mh=r,Mh}var Ph,r_;function nV(){if(r_)return Ph;r_=1;var e=tV();function t(n,r){var i=n==null?0:n.length;return!!i&&e(n,r,0)>-1}return Ph=t,Ph}var Rh,i_;function rV(){if(i_)return Rh;i_=1;function e(t,n,r){for(var i=-1,a=t==null?0:t.length;++i<a;)if(r(n,t[i]))return!0;return!1}return Rh=e,Rh}var Ah,a_;function iV(){if(a_)return Ah;a_=1;function e(){}return Ah=e,Ah}var Ih,s_;function aV(){if(s_)return Ih;s_=1;var e=aN(),t=iV(),n=cy(),r=1/0,i=e&&1/n(new e([,-0]))[1]==r?function(a){return new e(a)}:t;return Ih=i,Ih}var Dh,o_;function sV(){if(o_)return Dh;o_=1;var e=pN(),t=nV(),n=rV(),r=mN(),i=aV(),a=cy(),s=200;function o(l,u,c){var f=-1,h=t,m=l.length,g=!0,p=[],S=p;if(c)g=!1,h=n;else if(m>=s){var v=u?null:i(l);if(v)return a(v);g=!1,h=r,S=new e}else S=u?[]:p;e:for(;++f<m;){var y=l[f],w=u?u(y):y;if(y=c||y!==0?y:0,g&&w===w){for(var _=S.length;_--;)if(S[_]===w)continue e;u&&S.push(w),p.push(y)}else h(S,w,c)||(S!==p&&S.push(w),p.push(y))}return p}return Dh=o,Dh}var Oh,l_;function AN(){if(l_)return Oh;l_=1;var e=Bn(),t=bn();function n(r){return t(r)&&e(r)}return Oh=n,Oh}var Lh,u_;function oV(){if(u_)return Lh;u_=1;var e=fy(),t=Yl(),n=sV(),r=AN(),i=t(function(a){return n(e(a,1,r,!0))});return Lh=i,Lh}var qh,c_;function lV(){if(c_)return qh;c_=1;var e=Hl();function t(n,r){return e(r,function(i){return n[i]})}return qh=t,qh}var Fh,d_;function IN(){if(d_)return Fh;d_=1;var e=lV(),t=Cr();function n(r){return r==null?[]:e(r,t(r))}return Fh=n,Fh}var Vh,f_;function Wt(){if(f_)return Vh;f_=1;var e;if(typeof Jv=="function")try{e={clone:m3(),constant:oy(),each:hN(),filter:kN(),has:CN(),isArray:Ye(),isEmpty:F3(),isFunction:Ms(),isUndefined:jN(),keys:Cr(),map:TN(),reduce:NN(),size:K3(),transform:W3(),union:oV(),values:IN()}}catch{}return e||(e=window._),Vh=e,Vh}var $h,h_;function hy(){if(h_)return $h;h_=1;var e=Wt();$h=i;var t="\0",n="\0",r="";function i(c){this._isDirected=e.has(c,"directed")?c.directed:!0,this._isMultigraph=e.has(c,"multigraph")?c.multigraph:!1,this._isCompound=e.has(c,"compound")?c.compound:!1,this._label=void 0,this._defaultNodeLabelFn=e.constant(void 0),this._defaultEdgeLabelFn=e.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[n]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}i.prototype._nodeCount=0,i.prototype._edgeCount=0,i.prototype.isDirected=function(){return this._isDirected},i.prototype.isMultigraph=function(){return this._isMultigraph},i.prototype.isCompound=function(){return this._isCompound},i.prototype.setGraph=function(c){return this._label=c,this},i.prototype.graph=function(){return this._label},i.prototype.setDefaultNodeLabel=function(c){return e.isFunction(c)||(c=e.constant(c)),this._defaultNodeLabelFn=c,this},i.prototype.nodeCount=function(){return this._nodeCount},i.prototype.nodes=function(){return e.keys(this._nodes)},i.prototype.sources=function(){var c=this;return e.filter(this.nodes(),function(f){return e.isEmpty(c._in[f])})},i.prototype.sinks=function(){var c=this;return e.filter(this.nodes(),function(f){return e.isEmpty(c._out[f])})},i.prototype.setNodes=function(c,f){var h=arguments,m=this;return e.each(c,function(g){h.length>1?m.setNode(g,f):m.setNode(g)}),this},i.prototype.setNode=function(c,f){return e.has(this._nodes,c)?(arguments.length>1&&(this._nodes[c]=f),this):(this._nodes[c]=arguments.length>1?f:this._defaultNodeLabelFn(c),this._isCompound&&(this._parent[c]=n,this._children[c]={},this._children[n][c]=!0),this._in[c]={},this._preds[c]={},this._out[c]={},this._sucs[c]={},++this._nodeCount,this)},i.prototype.node=function(c){return this._nodes[c]},i.prototype.hasNode=function(c){return e.has(this._nodes,c)},i.prototype.removeNode=function(c){var f=this;if(e.has(this._nodes,c)){var h=function(m){f.removeEdge(f._edgeObjs[m])};delete this._nodes[c],this._isCompound&&(this._removeFromParentsChildList(c),delete this._parent[c],e.each(this.children(c),function(m){f.setParent(m)}),delete this._children[c]),e.each(e.keys(this._in[c]),h),delete this._in[c],delete this._preds[c],e.each(e.keys(this._out[c]),h),delete this._out[c],delete this._sucs[c],--this._nodeCount}return this},i.prototype.setParent=function(c,f){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(e.isUndefined(f))f=n;else{f+="";for(var h=f;!e.isUndefined(h);h=this.parent(h))if(h===c)throw new Error("Setting "+f+" as parent of "+c+" would create a cycle");this.setNode(f)}return this.setNode(c),this._removeFromParentsChildList(c),this._parent[c]=f,this._children[f][c]=!0,this},i.prototype._removeFromParentsChildList=function(c){delete this._children[this._parent[c]][c]},i.prototype.parent=function(c){if(this._isCompound){var f=this._parent[c];if(f!==n)return f}},i.prototype.children=function(c){if(e.isUndefined(c)&&(c=n),this._isCompound){var f=this._children[c];if(f)return e.keys(f)}else{if(c===n)return this.nodes();if(this.hasNode(c))return[]}},i.prototype.predecessors=function(c){var f=this._preds[c];if(f)return e.keys(f)},i.prototype.successors=function(c){var f=this._sucs[c];if(f)return e.keys(f)},i.prototype.neighbors=function(c){var f=this.predecessors(c);if(f)return e.union(f,this.successors(c))},i.prototype.isLeaf=function(c){var f;return this.isDirected()?f=this.successors(c):f=this.neighbors(c),f.length===0},i.prototype.filterNodes=function(c){var f=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});f.setGraph(this.graph());var h=this;e.each(this._nodes,function(p,S){c(S)&&f.setNode(S,p)}),e.each(this._edgeObjs,function(p){f.hasNode(p.v)&&f.hasNode(p.w)&&f.setEdge(p,h.edge(p))});var m={};function g(p){var S=h.parent(p);return S===void 0||f.hasNode(S)?(m[p]=S,S):S in m?m[S]:g(S)}return this._isCompound&&e.each(f.nodes(),function(p){f.setParent(p,g(p))}),f},i.prototype.setDefaultEdgeLabel=function(c){return e.isFunction(c)||(c=e.constant(c)),this._defaultEdgeLabelFn=c,this},i.prototype.edgeCount=function(){return this._edgeCount},i.prototype.edges=function(){return e.values(this._edgeObjs)},i.prototype.setPath=function(c,f){var h=this,m=arguments;return e.reduce(c,function(g,p){return m.length>1?h.setEdge(g,p,f):h.setEdge(g,p),p}),this},i.prototype.setEdge=function(){var c,f,h,m,g=!1,p=arguments[0];typeof p=="object"&&p!==null&&"v"in p?(c=p.v,f=p.w,h=p.name,arguments.length===2&&(m=arguments[1],g=!0)):(c=p,f=arguments[1],h=arguments[3],arguments.length>2&&(m=arguments[2],g=!0)),c=""+c,f=""+f,e.isUndefined(h)||(h=""+h);var S=o(this._isDirected,c,f,h);if(e.has(this._edgeLabels,S))return g&&(this._edgeLabels[S]=m),this;if(!e.isUndefined(h)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(c),this.setNode(f),this._edgeLabels[S]=g?m:this._defaultEdgeLabelFn(c,f,h);var v=l(this._isDirected,c,f,h);return c=v.v,f=v.w,Object.freeze(v),this._edgeObjs[S]=v,a(this._preds[f],c),a(this._sucs[c],f),this._in[f][S]=v,this._out[c][S]=v,this._edgeCount++,this},i.prototype.edge=function(c,f,h){var m=arguments.length===1?u(this._isDirected,arguments[0]):o(this._isDirected,c,f,h);return this._edgeLabels[m]},i.prototype.hasEdge=function(c,f,h){var m=arguments.length===1?u(this._isDirected,arguments[0]):o(this._isDirected,c,f,h);return e.has(this._edgeLabels,m)},i.prototype.removeEdge=function(c,f,h){var m=arguments.length===1?u(this._isDirected,arguments[0]):o(this._isDirected,c,f,h),g=this._edgeObjs[m];return g&&(c=g.v,f=g.w,delete this._edgeLabels[m],delete this._edgeObjs[m],s(this._preds[f],c),s(this._sucs[c],f),delete this._in[f][m],delete this._out[c][m],this._edgeCount--),this},i.prototype.inEdges=function(c,f){var h=this._in[c];if(h){var m=e.values(h);return f?e.filter(m,function(g){return g.v===f}):m}},i.prototype.outEdges=function(c,f){var h=this._out[c];if(h){var m=e.values(h);return f?e.filter(m,function(g){return g.w===f}):m}},i.prototype.nodeEdges=function(c,f){var h=this.inEdges(c,f);if(h)return h.concat(this.outEdges(c,f))};function a(c,f){c[f]?c[f]++:c[f]=1}function s(c,f){--c[f]||delete c[f]}function o(c,f,h,m){var g=""+f,p=""+h;if(!c&&g>p){var S=g;g=p,p=S}return g+r+p+r+(e.isUndefined(m)?t:m)}function l(c,f,h,m){var g=""+f,p=""+h;if(!c&&g>p){var S=g;g=p,p=S}var v={v:g,w:p};return m&&(v.name=m),v}function u(c,f){return o(c,f.v,f.w,f.name)}return $h}var Bh,p_;function uV(){return p_||(p_=1,Bh="2.1.8"),Bh}var zh,m_;function cV(){return m_||(m_=1,zh={Graph:hy(),version:uV()}),zh}var Uh,g_;function dV(){if(g_)return Uh;g_=1;var e=Wt(),t=hy();Uh={write:n,read:a};function n(s){var o={options:{directed:s.isDirected(),multigraph:s.isMultigraph(),compound:s.isCompound()},nodes:r(s),edges:i(s)};return e.isUndefined(s.graph())||(o.value=e.clone(s.graph())),o}function r(s){return e.map(s.nodes(),function(o){var l=s.node(o),u=s.parent(o),c={v:o};return e.isUndefined(l)||(c.value=l),e.isUndefined(u)||(c.parent=u),c})}function i(s){return e.map(s.edges(),function(o){var l=s.edge(o),u={v:o.v,w:o.w};return e.isUndefined(o.name)||(u.name=o.name),e.isUndefined(l)||(u.value=l),u})}function a(s){var o=new t(s.options).setGraph(s.value);return e.each(s.nodes,function(l){o.setNode(l.v,l.value),l.parent&&o.setParent(l.v,l.parent)}),e.each(s.edges,function(l){o.setEdge({v:l.v,w:l.w,name:l.name},l.value)}),o}return Uh}var Gh,v_;function fV(){if(v_)return Gh;v_=1;var e=Wt();Gh=t;function t(n){var r={},i=[],a;function s(o){e.has(r,o)||(r[o]=!0,a.push(o),e.each(n.successors(o),s),e.each(n.predecessors(o),s))}return e.each(n.nodes(),function(o){a=[],s(o),a.length&&i.push(a)}),i}return Gh}var Hh,y_;function DN(){if(y_)return Hh;y_=1;var e=Wt();Hh=t;function t(){this._arr=[],this._keyIndices={}}return t.prototype.size=function(){return this._arr.length},t.prototype.keys=function(){return this._arr.map(function(n){return n.key})},t.prototype.has=function(n){return e.has(this._keyIndices,n)},t.prototype.priority=function(n){var r=this._keyIndices[n];if(r!==void 0)return this._arr[r].priority},t.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key},t.prototype.add=function(n,r){var i=this._keyIndices;if(n=String(n),!e.has(i,n)){var a=this._arr,s=a.length;return i[n]=s,a.push({key:n,priority:r}),this._decrease(s),!0}return!1},t.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var n=this._arr.pop();return delete this._keyIndices[n.key],this._heapify(0),n.key},t.prototype.decrease=function(n,r){var i=this._keyIndices[n];if(r>this._arr[i].priority)throw new Error("New priority is greater than current priority. Key: "+n+" Old: "+this._arr[i].priority+" New: "+r);this._arr[i].priority=r,this._decrease(i)},t.prototype._heapify=function(n){var r=this._arr,i=2*n,a=i+1,s=n;i<r.length&&(s=r[i].priority<r[s].priority?i:s,a<r.length&&(s=r[a].priority<r[s].priority?a:s),s!==n&&(this._swap(n,s),this._heapify(s)))},t.prototype._decrease=function(n){for(var r=this._arr,i=r[n].priority,a;n!==0&&(a=n>>1,!(r[a].priority<i));)this._swap(n,a),n=a},t.prototype._swap=function(n,r){var i=this._arr,a=this._keyIndices,s=i[n],o=i[r];i[n]=o,i[r]=s,a[o.key]=n,a[s.key]=r},Hh}var Kh,b_;function ON(){if(b_)return Kh;b_=1;var e=Wt(),t=DN();Kh=r;var n=e.constant(1);function r(a,s,o,l){return i(a,String(s),o||n,l||function(u){return a.outEdges(u)})}function i(a,s,o,l){var u={},c=new t,f,h,m=function(g){var p=g.v!==f?g.v:g.w,S=u[p],v=o(g),y=h.distance+v;if(v<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+g+" Weight: "+v);y<S.distance&&(S.distance=y,S.predecessor=f,c.decrease(p,y))};for(a.nodes().forEach(function(g){var p=g===s?0:Number.POSITIVE_INFINITY;u[g]={distance:p},c.add(g,p)});c.size()>0&&(f=c.removeMin(),h=u[f],h.distance!==Number.POSITIVE_INFINITY);)l(f).forEach(m);return u}return Kh}var Wh,x_;function hV(){if(x_)return Wh;x_=1;var e=ON(),t=Wt();Wh=n;function n(r,i,a){return t.transform(r.nodes(),function(s,o){s[o]=e(r,o,i,a)},{})}return Wh}var Yh,w_;function LN(){if(w_)return Yh;w_=1;var e=Wt();Yh=t;function t(n){var r=0,i=[],a={},s=[];function o(l){var u=a[l]={onStack:!0,lowlink:r,index:r++};if(i.push(l),n.successors(l).forEach(function(h){e.has(a,h)?a[h].onStack&&(u.lowlink=Math.min(u.lowlink,a[h].index)):(o(h),u.lowlink=Math.min(u.lowlink,a[h].lowlink))}),u.lowlink===u.index){var c=[],f;do f=i.pop(),a[f].onStack=!1,c.push(f);while(l!==f);s.push(c)}}return n.nodes().forEach(function(l){e.has(a,l)||o(l)}),s}return Yh}var Qh,S_;function pV(){if(S_)return Qh;S_=1;var e=Wt(),t=LN();Qh=n;function n(r){return e.filter(t(r),function(i){return i.length>1||i.length===1&&r.hasEdge(i[0],i[0])})}return Qh}var Jh,__;function mV(){if(__)return Jh;__=1;var e=Wt();Jh=n;var t=e.constant(1);function n(i,a,s){return r(i,a||t,s||function(o){return i.outEdges(o)})}function r(i,a,s){var o={},l=i.nodes();return l.forEach(function(u){o[u]={},o[u][u]={distance:0},l.forEach(function(c){u!==c&&(o[u][c]={distance:Number.POSITIVE_INFINITY})}),s(u).forEach(function(c){var f=c.v===u?c.w:c.v,h=a(c);o[u][f]={distance:h,predecessor:u}})}),l.forEach(function(u){var c=o[u];l.forEach(function(f){var h=o[f];l.forEach(function(m){var g=h[u],p=c[m],S=h[m],v=g.distance+p.distance;v<S.distance&&(S.distance=v,S.predecessor=p.predecessor)})})}),o}return Jh}var Xh,k_;function qN(){if(k_)return Xh;k_=1;var e=Wt();Xh=t,t.CycleException=n;function t(r){var i={},a={},s=[];function o(l){if(e.has(a,l))throw new n;e.has(i,l)||(a[l]=!0,i[l]=!0,e.each(r.predecessors(l),o),delete a[l],s.push(l))}if(e.each(r.sinks(),o),e.size(i)!==r.nodeCount())throw new n;return s}function n(){}return n.prototype=new Error,Xh}var Zh,C_;function gV(){if(C_)return Zh;C_=1;var e=qN();Zh=t;function t(n){try{e(n)}catch(r){if(r instanceof e.CycleException)return!1;throw r}return!0}return Zh}var ep,j_;function FN(){if(j_)return ep;j_=1;var e=Wt();ep=t;function t(r,i,a){e.isArray(i)||(i=[i]);var s=(r.isDirected()?r.successors:r.neighbors).bind(r),o=[],l={};return e.each(i,function(u){if(!r.hasNode(u))throw new Error("Graph does not have node: "+u);n(r,u,a==="post",l,s,o)}),o}function n(r,i,a,s,o,l){e.has(s,i)||(s[i]=!0,a||l.push(i),e.each(o(i),function(u){n(r,u,a,s,o,l)}),a&&l.push(i))}return ep}var tp,E_;function vV(){if(E_)return tp;E_=1;var e=FN();tp=t;function t(n,r){return e(n,r,"post")}return tp}var np,T_;function yV(){if(T_)return np;T_=1;var e=FN();np=t;function t(n,r){return e(n,r,"pre")}return np}var rp,N_;function bV(){if(N_)return rp;N_=1;var e=Wt(),t=hy(),n=DN();rp=r;function r(i,a){var s=new t,o={},l=new n,u;function c(h){var m=h.v===u?h.w:h.v,g=l.priority(m);if(g!==void 0){var p=a(h);p<g&&(o[m]=u,l.decrease(m,p))}}if(i.nodeCount()===0)return s;e.each(i.nodes(),function(h){l.add(h,Number.POSITIVE_INFINITY),s.setNode(h)}),l.decrease(i.nodes()[0],0);for(var f=!1;l.size()>0;){if(u=l.removeMin(),e.has(o,u))s.setEdge(u,o[u]);else{if(f)throw new Error("Input graph is not connected: "+i);f=!0}i.nodeEdges(u).forEach(c)}return s}return rp}var ip,M_;function xV(){return M_||(M_=1,ip={components:fV(),dijkstra:ON(),dijkstraAll:hV(),findCycles:pV(),floydWarshall:mV(),isAcyclic:gV(),postorder:vV(),preorder:yV(),prim:bV(),tarjan:LN(),topsort:qN()}),ip}var ap,P_;function wV(){if(P_)return ap;P_=1;var e=cV();return ap={Graph:e.Graph,json:dV(),alg:xV(),version:e.version},ap}var ol;if(typeof Jv=="function")try{ol=wV()}catch{}ol||(ol=window.graphlib);var sn=ol,sp,R_;function SV(){if(R_)return sp;R_=1;var e=cN(),t=1,n=4;function r(i){return e(i,t|n)}return sp=r,sp}var op,A_;function Ql(){if(A_)return op;A_=1;var e=na(),t=Bn(),n=$l(),r=Kt();function i(a,s,o){if(!r(o))return!1;var l=typeof s;return(l=="number"?t(o)&&n(s,o.length):l=="string"&&s in o)?e(o[s],a):!1}return op=i,op}var lp,I_;function _V(){if(I_)return lp;I_=1;var e=Yl(),t=na(),n=Ql(),r=ni(),i=Object.prototype,a=i.hasOwnProperty,s=e(function(o,l){o=Object(o);var u=-1,c=l.length,f=c>2?l[2]:void 0;for(f&&n(l[0],l[1],f)&&(c=1);++u<c;)for(var h=l[u],m=r(h),g=-1,p=m.length;++g<p;){var S=m[g],v=o[S];(v===void 0||t(v,i[S])&&!a.call(o,S))&&(o[S]=h[S])}return o});return lp=s,lp}var up,D_;function kV(){if(D_)return up;D_=1;var e=zn(),t=Bn(),n=Cr();function r(i){return function(a,s,o){var l=Object(a);if(!t(a)){var u=e(s,3);a=n(a),s=function(f){return u(l[f],f,l)}}var c=i(a,s,o);return c>-1?l[u?a[c]:c]:void 0}}return up=r,up}var cp,O_;function CV(){if(O_)return cp;O_=1;var e=/\s/;function t(n){for(var r=n.length;r--&&e.test(n.charAt(r)););return r}return cp=t,cp}var dp,L_;function jV(){if(L_)return dp;L_=1;var e=CV(),t=/^\s+/;function n(r){return r&&r.slice(0,e(r)+1).replace(t,"")}return dp=n,dp}var fp,q_;function EV(){if(q_)return fp;q_=1;var e=jV(),t=Kt(),n=sa(),r=NaN,i=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,s=/^0o[0-7]+$/i,o=parseInt;function l(u){if(typeof u=="number")return u;if(n(u))return r;if(t(u)){var c=typeof u.valueOf=="function"?u.valueOf():u;u=t(c)?c+"":c}if(typeof u!="string")return u===0?u:+u;u=e(u);var f=a.test(u);return f||s.test(u)?o(u.slice(2),f?2:8):i.test(u)?r:+u}return fp=l,fp}var hp,F_;function VN(){if(F_)return hp;F_=1;var e=EV(),t=1/0,n=17976931348623157e292;function r(i){if(!i)return i===0?i:0;if(i=e(i),i===t||i===-t){var a=i<0?-1:1;return a*n}return i===i?i:0}return hp=r,hp}var pp,V_;function TV(){if(V_)return pp;V_=1;var e=VN();function t(n){var r=e(n),i=r%1;return r===r?i?r-i:r:0}return pp=t,pp}var mp,$_;function NV(){if($_)return mp;$_=1;var e=RN(),t=zn(),n=TV(),r=Math.max;function i(a,s,o){var l=a==null?0:a.length;if(!l)return-1;var u=o==null?0:n(o);return u<0&&(u=r(l+u,0)),e(a,t(s,3),u)}return mp=i,mp}var gp,B_;function MV(){if(B_)return gp;B_=1;var e=kV(),t=NV(),n=e(t);return gp=n,gp}var vp,z_;function $N(){if(z_)return vp;z_=1;var e=fy();function t(n){var r=n==null?0:n.length;return r?e(n,1):[]}return vp=t,vp}var yp,U_;function PV(){if(U_)return yp;U_=1;var e=ly(),t=dN(),n=ni();function r(i,a){return i==null?i:e(i,t(a),n)}return yp=r,yp}var bp,G_;function RV(){if(G_)return bp;G_=1;function e(t){var n=t==null?0:t.length;return n?t[n-1]:void 0}return bp=e,bp}var xp,H_;function AV(){if(H_)return xp;H_=1;var e=Fl(),t=uy(),n=zn();function r(i,a){var s={};return a=n(a,3),t(i,function(o,l,u){e(s,l,a(o,l,u))}),s}return xp=r,xp}var wp,K_;function py(){if(K_)return wp;K_=1;var e=sa();function t(n,r,i){for(var a=-1,s=n.length;++a<s;){var o=n[a],l=r(o);if(l!=null&&(u===void 0?l===l&&!e(l):i(l,u)))var u=l,c=o}return c}return wp=t,wp}var Sp,W_;function IV(){if(W_)return Sp;W_=1;function e(t,n){return t>n}return Sp=e,Sp}var _p,Y_;function DV(){if(Y_)return _p;Y_=1;var e=py(),t=IV(),n=ri();function r(i){return i&&i.length?e(i,n,t):void 0}return _p=r,_p}var kp,Q_;function BN(){if(Q_)return kp;Q_=1;var e=Fl(),t=na();function n(r,i,a){(a!==void 0&&!t(r[i],a)||a===void 0&&!(i in r))&&e(r,i,a)}return kp=n,kp}var Cp,J_;function OV(){if(J_)return Cp;J_=1;var e=ei(),t=Ul(),n=bn(),r="[object Object]",i=Function.prototype,a=Object.prototype,s=i.toString,o=a.hasOwnProperty,l=s.call(Object);function u(c){if(!n(c)||e(c)!=r)return!1;var f=t(c);if(f===null)return!0;var h=o.call(f,"constructor")&&f.constructor;return typeof h=="function"&&h instanceof h&&s.call(h)==l}return Cp=u,Cp}var jp,X_;function zN(){if(X_)return jp;X_=1;function e(t,n){if(!(n==="constructor"&&typeof t[n]=="function")&&n!="__proto__")return t[n]}return jp=e,jp}var Ep,Z_;function LV(){if(Z_)return Ep;Z_=1;var e=Ps(),t=ni();function n(r){return e(r,t(r))}return Ep=n,Ep}var Tp,ek;function qV(){if(ek)return Tp;ek=1;var e=BN(),t=XT(),n=oN(),r=ZT(),i=uN(),a=Rs(),s=Ye(),o=AN(),l=ia(),u=Ms(),c=Kt(),f=OV(),h=As(),m=zN(),g=LV();function p(S,v,y,w,_,C,E){var T=m(S,y),j=m(v,y),N=E.get(j);if(N){e(S,y,N);return}var P=C?C(T,j,y+"",S,v,E):void 0,R=P===void 0;if(R){var O=s(j),F=!O&&l(j),X=!O&&!F&&h(j);P=j,O||F||X?s(T)?P=T:o(T)?P=r(T):F?(R=!1,P=t(j,!0)):X?(R=!1,P=n(j,!0)):P=[]:f(j)||a(j)?(P=T,a(T)?P=g(T):(!c(T)||u(T))&&(P=i(j))):R=!1}R&&(E.set(j,P),_(P,j,w,C,E),E.delete(j)),e(S,y,P)}return Tp=p,Tp}var Np,tk;function FV(){if(tk)return Np;tk=1;var e=ql(),t=BN(),n=ly(),r=qV(),i=Kt(),a=ni(),s=zN();function o(l,u,c,f,h){l!==u&&n(u,function(m,g){if(h||(h=new e),i(m))r(l,u,g,c,o,f,h);else{var p=f?f(s(l,g),m,g+"",l,u,h):void 0;p===void 0&&(p=m),t(l,g,p)}},a)}return Np=o,Np}var Mp,nk;function VV(){if(nk)return Mp;nk=1;var e=Yl(),t=Ql();function n(r){return e(function(i,a){var s=-1,o=a.length,l=o>1?a[o-1]:void 0,u=o>2?a[2]:void 0;for(l=r.length>3&&typeof l=="function"?(o--,l):void 0,u&&t(a[0],a[1],u)&&(l=o<3?void 0:l,o=1),i=Object(i);++s<o;){var c=a[s];c&&r(i,c,s,l)}return i})}return Mp=n,Mp}var Pp,rk;function $V(){if(rk)return Pp;rk=1;var e=FV(),t=VV(),n=t(function(r,i,a){e(r,i,a)});return Pp=n,Pp}var Rp,ik;function UN(){if(ik)return Rp;ik=1;function e(t,n){return t<n}return Rp=e,Rp}var Ap,ak;function BV(){if(ak)return Ap;ak=1;var e=py(),t=UN(),n=ri();function r(i){return i&&i.length?e(i,n,t):void 0}return Ap=r,Ap}var Ip,sk;function zV(){if(sk)return Ip;sk=1;var e=py(),t=zn(),n=UN();function r(i,a){return i&&i.length?e(i,t(a,2),n):void 0}return Ip=r,Ip}var Dp,ok;function UV(){if(ok)return Dp;ok=1;var e=an(),t=function(){return e.Date.now()};return Dp=t,Dp}var Op,lk;function GV(){if(lk)return Op;lk=1;var e=Vl(),t=Kl(),n=$l(),r=Kt(),i=Is();function a(s,o,l,u){if(!r(s))return s;o=t(o,s);for(var c=-1,f=o.length,h=f-1,m=s;m!=null&&++c<f;){var g=i(o[c]),p=l;if(g==="__proto__"||g==="constructor"||g==="prototype")return s;if(c!=h){var S=m[g];p=u?u(S,g,m):void 0,p===void 0&&(p=r(S)?S:n(o[c+1])?[]:{})}e(m,g,p),m=m[g]}return s}return Op=a,Op}var Lp,uk;function HV(){if(uk)return Lp;uk=1;var e=Wl(),t=GV(),n=Kl();function r(i,a,s){for(var o=-1,l=a.length,u={};++o<l;){var c=a[o],f=e(i,c);s(f,c)&&t(u,n(c,i),f)}return u}return Lp=r,Lp}var qp,ck;function KV(){if(ck)return qp;ck=1;var e=HV(),t=SN();function n(r,i){return e(r,i,function(a,s){return t(r,s)})}return qp=n,qp}var Fp,dk;function WV(){if(dk)return Fp;dk=1;var e=$N(),t=MN(),n=PN();function r(i){return n(t(i,void 0,e),i+"")}return Fp=r,Fp}var Vp,fk;function YV(){if(fk)return Vp;fk=1;var e=KV(),t=WV(),n=t(function(r,i){return r==null?{}:e(r,i)});return Vp=n,Vp}var $p,hk;function QV(){if(hk)return $p;hk=1;var e=Math.ceil,t=Math.max;function n(r,i,a,s){for(var o=-1,l=t(e((i-r)/(a||1)),0),u=Array(l);l--;)u[s?l:++o]=r,r+=a;return u}return $p=n,$p}var Bp,pk;function JV(){if(pk)return Bp;pk=1;var e=QV(),t=Ql(),n=VN();function r(i){return function(a,s,o){return o&&typeof o!="number"&&t(a,s,o)&&(s=o=void 0),a=n(a),s===void 0?(s=a,a=0):s=n(s),o=o===void 0?a<s?1:-1:n(o),e(a,s,o,i)}}return Bp=r,Bp}var zp,mk;function XV(){if(mk)return zp;mk=1;var e=JV(),t=e();return zp=t,zp}var Up,gk;function ZV(){if(gk)return Up;gk=1;function e(t,n){var r=t.length;for(t.sort(n);r--;)t[r]=t[r].value;return t}return Up=e,Up}var Gp,vk;function e$(){if(vk)return Gp;vk=1;var e=sa();function t(n,r){if(n!==r){var i=n!==void 0,a=n===null,s=n===n,o=e(n),l=r!==void 0,u=r===null,c=r===r,f=e(r);if(!u&&!f&&!o&&n>r||o&&l&&c&&!u&&!f||a&&l&&c||!i&&c||!s)return 1;if(!a&&!o&&!f&&n<r||f&&i&&s&&!a&&!o||u&&i&&s||!l&&s||!c)return-1}return 0}return Gp=t,Gp}var Hp,yk;function t$(){if(yk)return Hp;yk=1;var e=e$();function t(n,r,i){for(var a=-1,s=n.criteria,o=r.criteria,l=s.length,u=i.length;++a<l;){var c=e(s[a],o[a]);if(c){if(a>=u)return c;var f=i[a];return c*(f=="desc"?-1:1)}}return n.index-r.index}return Hp=t,Hp}var Kp,bk;function n$(){if(bk)return Kp;bk=1;var e=Hl(),t=Wl(),n=zn(),r=EN(),i=ZV(),a=Bl(),s=t$(),o=ri(),l=Ye();function u(c,f,h){f.length?f=e(f,function(p){return l(p)?function(S){return t(S,p.length===1?p[0]:p)}:p}):f=[o];var m=-1;f=e(f,a(n));var g=r(c,function(p,S,v){var y=e(f,function(w){return w(p)});return{criteria:y,index:++m,value:p}});return i(g,function(p,S){return s(p,S,h)})}return Kp=u,Kp}var Wp,xk;function r$(){if(xk)return Wp;xk=1;var e=fy(),t=n$(),n=Yl(),r=Ql(),i=n(function(a,s){if(a==null)return[];var o=s.length;return o>1&&r(a,s[0],s[1])?s=[]:o>2&&r(s[0],s[1],s[2])&&(s=[s[0]]),t(a,e(s,1),[])});return Wp=i,Wp}var Yp,wk;function i$(){if(wk)return Yp;wk=1;var e=xN(),t=0;function n(r){var i=++t;return e(r)+i}return Yp=n,Yp}var Qp,Sk;function a$(){if(Sk)return Qp;Sk=1;function e(t,n,r){for(var i=-1,a=t.length,s=n.length,o={};++i<a;){var l=i<s?n[i]:void 0;r(o,t[i],l)}return o}return Qp=e,Qp}var Jp,_k;function s$(){if(_k)return Jp;_k=1;var e=Vl(),t=a$();function n(r,i){return t(r||[],i||[],e)}return Jp=n,Jp}var ll;if(typeof Jv=="function")try{ll={cloneDeep:SV(),constant:oy(),defaults:_V(),each:hN(),filter:kN(),find:MV(),flatten:$N(),forEach:fN(),forIn:PV(),has:CN(),isUndefined:jN(),last:RV(),map:TN(),mapValues:AV(),max:DV(),merge:$V(),min:BV(),minBy:zV(),now:UV(),pick:YV(),range:XV(),reduce:NN(),sortBy:r$(),uniqueId:i$(),values:IN(),zipObject:s$()}}catch{}ll||(ll=window._);var Pe=ll,o$=Jl;function Jl(){var e={};e._next=e._prev=e,this._sentinel=e}Jl.prototype.dequeue=function(){var e=this._sentinel,t=e._prev;if(t!==e)return GN(t),t};Jl.prototype.enqueue=function(e){var t=this._sentinel;e._prev&&e._next&&GN(e),e._next=t._next,t._next._prev=e,t._next=e,e._prev=t};Jl.prototype.toString=function(){for(var e=[],t=this._sentinel,n=t._prev;n!==t;)e.push(JSON.stringify(n,l$)),n=n._prev;return"["+e.join(", ")+"]"};function GN(e){e._prev._next=e._next,e._next._prev=e._prev,delete e._next,delete e._prev}function l$(e,t){if(e!=="_next"&&e!=="_prev")return t}var Mn=Pe,u$=sn.Graph,c$=o$,d$=h$,f$=Mn.constant(1);function h$(e,t){if(e.nodeCount()<=1)return[];var n=m$(e,t||f$),r=p$(n.graph,n.buckets,n.zeroIdx);return Mn.flatten(Mn.map(r,function(i){return e.outEdges(i.v,i.w)}),!0)}function p$(e,t,n){for(var r=[],i=t[t.length-1],a=t[0],s;e.nodeCount();){for(;s=a.dequeue();)Xp(e,t,n,s);for(;s=i.dequeue();)Xp(e,t,n,s);if(e.nodeCount()){for(var o=t.length-2;o>0;--o)if(s=t[o].dequeue(),s){r=r.concat(Xp(e,t,n,s,!0));break}}}return r}function Xp(e,t,n,r,i){var a=i?[]:void 0;return Mn.forEach(e.inEdges(r.v),function(s){var o=e.edge(s),l=e.node(s.v);i&&a.push({v:s.v,w:s.w}),l.out-=o,vg(t,n,l)}),Mn.forEach(e.outEdges(r.v),function(s){var o=e.edge(s),l=s.w,u=e.node(l);u.in-=o,vg(t,n,u)}),e.removeNode(r.v),a}function m$(e,t){var n=new u$,r=0,i=0;Mn.forEach(e.nodes(),function(o){n.setNode(o,{v:o,in:0,out:0})}),Mn.forEach(e.edges(),function(o){var l=n.edge(o.v,o.w)||0,u=t(o),c=l+u;n.setEdge(o.v,o.w,c),i=Math.max(i,n.node(o.v).out+=u),r=Math.max(r,n.node(o.w).in+=u)});var a=Mn.range(i+r+3).map(function(){return new c$}),s=r+1;return Mn.forEach(n.nodes(),function(o){vg(a,s,n.node(o))}),{graph:n,buckets:a,zeroIdx:s}}function vg(e,t,n){n.out?n.in?e[n.out-n.in+t].enqueue(n):e[e.length-1].enqueue(n):e[0].enqueue(n)}var $r=Pe,g$=d$,v$={run:y$,undo:x$};function y$(e){var t=e.graph().acyclicer==="greedy"?g$(e,n(e)):b$(e);$r.forEach(t,function(r){var i=e.edge(r);e.removeEdge(r),i.forwardName=r.name,i.reversed=!0,e.setEdge(r.w,r.v,i,$r.uniqueId("rev"))});function n(r){return function(i){return r.edge(i).weight}}}function b$(e){var t=[],n={},r={};function i(a){$r.has(r,a)||(r[a]=!0,n[a]=!0,$r.forEach(e.outEdges(a),function(s){$r.has(n,s.w)?t.push(s):i(s.w)}),delete n[a])}return $r.forEach(e.nodes(),i),t}function x$(e){$r.forEach(e.edges(),function(t){var n=e.edge(t);if(n.reversed){e.removeEdge(t);var r=n.forwardName;delete n.reversed,delete n.forwardName,e.setEdge(t.w,t.v,n,r)}})}var be=Pe,HN=sn.Graph,St={addDummyNode:KN,simplify:w$,asNonCompoundGraph:S$,successorWeights:_$,predecessorWeights:k$,intersectRect:C$,buildLayerMatrix:j$,normalizeRanks:E$,removeEmptyRanks:T$,addBorderNode:N$,maxRank:WN,partition:M$,time:P$,notime:R$};function KN(e,t,n,r){var i;do i=be.uniqueId(r);while(e.hasNode(i));return n.dummy=t,e.setNode(i,n),i}function w$(e){var t=new HN().setGraph(e.graph());return be.forEach(e.nodes(),function(n){t.setNode(n,e.node(n))}),be.forEach(e.edges(),function(n){var r=t.edge(n.v,n.w)||{weight:0,minlen:1},i=e.edge(n);t.setEdge(n.v,n.w,{weight:r.weight+i.weight,minlen:Math.max(r.minlen,i.minlen)})}),t}function S$(e){var t=new HN({multigraph:e.isMultigraph()}).setGraph(e.graph());return be.forEach(e.nodes(),function(n){e.children(n).length||t.setNode(n,e.node(n))}),be.forEach(e.edges(),function(n){t.setEdge(n,e.edge(n))}),t}function _$(e){var t=be.map(e.nodes(),function(n){var r={};return be.forEach(e.outEdges(n),function(i){r[i.w]=(r[i.w]||0)+e.edge(i).weight}),r});return be.zipObject(e.nodes(),t)}function k$(e){var t=be.map(e.nodes(),function(n){var r={};return be.forEach(e.inEdges(n),function(i){r[i.v]=(r[i.v]||0)+e.edge(i).weight}),r});return be.zipObject(e.nodes(),t)}function C$(e,t){var n=e.x,r=e.y,i=t.x-n,a=t.y-r,s=e.width/2,o=e.height/2;if(!i&&!a)throw new Error("Not possible to find intersection inside of the rectangle");var l,u;return Math.abs(a)*s>Math.abs(i)*o?(a<0&&(o=-o),l=o*i/a,u=o):(i<0&&(s=-s),l=s,u=s*a/i),{x:n+l,y:r+u}}function j$(e){var t=be.map(be.range(WN(e)+1),function(){return[]});return be.forEach(e.nodes(),function(n){var r=e.node(n),i=r.rank;be.isUndefined(i)||(t[i][r.order]=n)}),t}function E$(e){var t=be.min(be.map(e.nodes(),function(n){return e.node(n).rank}));be.forEach(e.nodes(),function(n){var r=e.node(n);be.has(r,"rank")&&(r.rank-=t)})}function T$(e){var t=be.min(be.map(e.nodes(),function(a){return e.node(a).rank})),n=[];be.forEach(e.nodes(),function(a){var s=e.node(a).rank-t;n[s]||(n[s]=[]),n[s].push(a)});var r=0,i=e.graph().nodeRankFactor;be.forEach(n,function(a,s){be.isUndefined(a)&&s%i!==0?--r:r&&be.forEach(a,function(o){e.node(o).rank+=r})})}function N$(e,t,n,r){var i={width:0,height:0};return arguments.length>=4&&(i.rank=n,i.order=r),KN(e,"border",i,t)}function WN(e){return be.max(be.map(e.nodes(),function(t){var n=e.node(t).rank;if(!be.isUndefined(n))return n}))}function M$(e,t){var n={lhs:[],rhs:[]};return be.forEach(e,function(r){t(r)?n.lhs.push(r):n.rhs.push(r)}),n}function P$(e,t){var n=be.now();try{return t()}finally{console.log(e+" time: "+(be.now()-n)+"ms")}}function R$(e,t){return t()}var YN=Pe,A$=St,I$={run:D$,undo:L$};function D$(e){e.graph().dummyChains=[],YN.forEach(e.edges(),function(t){O$(e,t)})}function O$(e,t){var n=t.v,r=e.node(n).rank,i=t.w,a=e.node(i).rank,s=t.name,o=e.edge(t),l=o.labelRank;if(a!==r+1){e.removeEdge(t);var u,c,f;for(f=0,++r;r<a;++f,++r)o.points=[],c={width:0,height:0,edgeLabel:o,edgeObj:t,rank:r},u=A$.addDummyNode(e,"edge",c,"_d"),r===l&&(c.width=o.width,c.height=o.height,c.dummy="edge-label",c.labelpos=o.labelpos),e.setEdge(n,u,{weight:o.weight},s),f===0&&e.graph().dummyChains.push(u),n=u;e.setEdge(n,i,{weight:o.weight},s)}}function L$(e){YN.forEach(e.graph().dummyChains,function(t){var n=e.node(t),r=n.edgeLabel,i;for(e.setEdge(n.edgeObj,r);n.dummy;)i=e.successors(t)[0],e.removeNode(t),r.points.push({x:n.x,y:n.y}),n.dummy==="edge-label"&&(r.x=n.x,r.y=n.y,r.width=n.width,r.height=n.height),t=i,n=e.node(t)})}var fo=Pe,Xl={longestPath:q$,slack:F$};function q$(e){var t={};function n(r){var i=e.node(r);if(fo.has(t,r))return i.rank;t[r]=!0;var a=fo.min(fo.map(e.outEdges(r),function(s){return n(s.w)-e.edge(s).minlen}));return(a===Number.POSITIVE_INFINITY||a===void 0||a===null)&&(a=0),i.rank=a}fo.forEach(e.sources(),n)}function F$(e,t){return e.node(t.w).rank-e.node(t.v).rank-e.edge(t).minlen}var ul=Pe,V$=sn.Graph,cl=Xl.slack,QN=$$;function $$(e){var t=new V$({directed:!1}),n=e.nodes()[0],r=e.nodeCount();t.setNode(n,{});for(var i,a;B$(t,e)<r;)i=z$(t,e),a=t.hasNode(i.v)?cl(e,i):-cl(e,i),U$(t,e,a);return t}function B$(e,t){function n(r){ul.forEach(t.nodeEdges(r),function(i){var a=i.v,s=r===a?i.w:a;!e.hasNode(s)&&!cl(t,i)&&(e.setNode(s,{}),e.setEdge(r,s,{}),n(s))})}return ul.forEach(e.nodes(),n),e.nodeCount()}function z$(e,t){return ul.minBy(t.edges(),function(n){if(e.hasNode(n.v)!==e.hasNode(n.w))return cl(t,n)})}function U$(e,t,n){ul.forEach(e.nodes(),function(r){t.node(r).rank+=n})}var Vn=Pe,G$=QN,H$=Xl.slack,K$=Xl.longestPath,W$=sn.alg.preorder,Y$=sn.alg.postorder,Q$=St.simplify,J$=ii;ii.initLowLimValues=gy;ii.initCutValues=my;ii.calcCutValue=JN;ii.leaveEdge=ZN;ii.enterEdge=eM;ii.exchangeEdges=tM;function ii(e){e=Q$(e),K$(e);var t=G$(e);gy(t),my(t,e);for(var n,r;n=ZN(t);)r=eM(t,e,n),tM(t,e,n,r)}function my(e,t){var n=Y$(e,e.nodes());n=n.slice(0,n.length-1),Vn.forEach(n,function(r){X$(e,t,r)})}function X$(e,t,n){var r=e.node(n),i=r.parent;e.edge(n,i).cutvalue=JN(e,t,n)}function JN(e,t,n){var r=e.node(n),i=r.parent,a=!0,s=t.edge(n,i),o=0;return s||(a=!1,s=t.edge(i,n)),o=s.weight,Vn.forEach(t.nodeEdges(n),function(l){var u=l.v===n,c=u?l.w:l.v;if(c!==i){var f=u===a,h=t.edge(l).weight;if(o+=f?h:-h,eB(e,n,c)){var m=e.edge(n,c).cutvalue;o+=f?-m:m}}}),o}function gy(e,t){arguments.length<2&&(t=e.nodes()[0]),XN(e,{},1,t)}function XN(e,t,n,r,i){var a=n,s=e.node(r);return t[r]=!0,Vn.forEach(e.neighbors(r),function(o){Vn.has(t,o)||(n=XN(e,t,n,o,r))}),s.low=a,s.lim=n++,i?s.parent=i:delete s.parent,n}function ZN(e){return Vn.find(e.edges(),function(t){return e.edge(t).cutvalue<0})}function eM(e,t,n){var r=n.v,i=n.w;t.hasEdge(r,i)||(r=n.w,i=n.v);var a=e.node(r),s=e.node(i),o=a,l=!1;a.lim>s.lim&&(o=s,l=!0);var u=Vn.filter(t.edges(),function(c){return l===kk(e,e.node(c.v),o)&&l!==kk(e,e.node(c.w),o)});return Vn.minBy(u,function(c){return H$(t,c)})}function tM(e,t,n,r){var i=n.v,a=n.w;e.removeEdge(i,a),e.setEdge(r.v,r.w,{}),gy(e),my(e,t),Z$(e,t)}function Z$(e,t){var n=Vn.find(e.nodes(),function(i){return!t.node(i).parent}),r=W$(e,n);r=r.slice(1),Vn.forEach(r,function(i){var a=e.node(i).parent,s=t.edge(i,a),o=!1;s||(s=t.edge(a,i),o=!0),t.node(i).rank=t.node(a).rank+(o?s.minlen:-s.minlen)})}function eB(e,t,n){return e.hasEdge(t,n)}function kk(e,t,n){return n.low<=t.lim&&t.lim<=n.lim}var tB=Xl,nM=tB.longestPath,nB=QN,rB=J$,iB=aB;function aB(e){switch(e.graph().ranker){case"network-simplex":Ck(e);break;case"tight-tree":oB(e);break;case"longest-path":sB(e);break;default:Ck(e)}}var sB=nM;function oB(e){nM(e),nB(e)}function Ck(e){rB(e)}var yg=Pe,lB=uB;function uB(e){var t=dB(e);yg.forEach(e.graph().dummyChains,function(n){for(var r=e.node(n),i=r.edgeObj,a=cB(e,t,i.v,i.w),s=a.path,o=a.lca,l=0,u=s[l],c=!0;n!==i.w;){if(r=e.node(n),c){for(;(u=s[l])!==o&&e.node(u).maxRank<r.rank;)l++;u===o&&(c=!1)}if(!c){for(;l<s.length-1&&e.node(u=s[l+1]).minRank<=r.rank;)l++;u=s[l]}e.setParent(n,u),n=e.successors(n)[0]}})}function cB(e,t,n,r){var i=[],a=[],s=Math.min(t[n].low,t[r].low),o=Math.max(t[n].lim,t[r].lim),l,u;l=n;do l=e.parent(l),i.push(l);while(l&&(t[l].low>s||o>t[l].lim));for(u=l,l=r;(l=e.parent(l))!==u;)a.push(l);return{path:i.concat(a.reverse()),lca:u}}function dB(e){var t={},n=0;function r(i){var a=n;yg.forEach(e.children(i),r),t[i]={low:a,lim:n++}}return yg.forEach(e.children(),r),t}var Pn=Pe,bg=St,fB={run:hB,cleanup:gB};function hB(e){var t=bg.addDummyNode(e,"root",{},"_root"),n=pB(e),r=Pn.max(Pn.values(n))-1,i=2*r+1;e.graph().nestingRoot=t,Pn.forEach(e.edges(),function(s){e.edge(s).minlen*=i});var a=mB(e)+1;Pn.forEach(e.children(),function(s){rM(e,t,i,a,r,n,s)}),e.graph().nodeRankFactor=i}function rM(e,t,n,r,i,a,s){var o=e.children(s);if(!o.length){s!==t&&e.setEdge(t,s,{weight:0,minlen:n});return}var l=bg.addBorderNode(e,"_bt"),u=bg.addBorderNode(e,"_bb"),c=e.node(s);e.setParent(l,s),c.borderTop=l,e.setParent(u,s),c.borderBottom=u,Pn.forEach(o,function(f){rM(e,t,n,r,i,a,f);var h=e.node(f),m=h.borderTop?h.borderTop:f,g=h.borderBottom?h.borderBottom:f,p=h.borderTop?r:2*r,S=m!==g?1:i-a[s]+1;e.setEdge(l,m,{weight:p,minlen:S,nestingEdge:!0}),e.setEdge(g,u,{weight:p,minlen:S,nestingEdge:!0})}),e.parent(s)||e.setEdge(t,l,{weight:0,minlen:i+a[s]})}function pB(e){var t={};function n(r,i){var a=e.children(r);a&&a.length&&Pn.forEach(a,function(s){n(s,i+1)}),t[r]=i}return Pn.forEach(e.children(),function(r){n(r,1)}),t}function mB(e){return Pn.reduce(e.edges(),function(t,n){return t+e.edge(n).weight},0)}function gB(e){var t=e.graph();e.removeNode(t.nestingRoot),delete t.nestingRoot,Pn.forEach(e.edges(),function(n){var r=e.edge(n);r.nestingEdge&&e.removeEdge(n)})}var Zp=Pe,vB=St,yB=bB;function bB(e){function t(n){var r=e.children(n),i=e.node(n);if(r.length&&Zp.forEach(r,t),Zp.has(i,"minRank")){i.borderLeft=[],i.borderRight=[];for(var a=i.minRank,s=i.maxRank+1;a<s;++a)jk(e,"borderLeft","_bl",n,i,a),jk(e,"borderRight","_br",n,i,a)}}Zp.forEach(e.children(),t)}function jk(e,t,n,r,i,a){var s={width:0,height:0,rank:a,borderType:t},o=i[t][a-1],l=vB.addDummyNode(e,"border",s,n);i[t][a]=l,e.setParent(l,r),o&&e.setEdge(o,l,{weight:1})}var pn=Pe,xB={adjust:wB,undo:SB};function wB(e){var t=e.graph().rankdir.toLowerCase();(t==="lr"||t==="rl")&&iM(e)}function SB(e){var t=e.graph().rankdir.toLowerCase();(t==="bt"||t==="rl")&&_B(e),(t==="lr"||t==="rl")&&(kB(e),iM(e))}function iM(e){pn.forEach(e.nodes(),function(t){Ek(e.node(t))}),pn.forEach(e.edges(),function(t){Ek(e.edge(t))})}function Ek(e){var t=e.width;e.width=e.height,e.height=t}function _B(e){pn.forEach(e.nodes(),function(t){em(e.node(t))}),pn.forEach(e.edges(),function(t){var n=e.edge(t);pn.forEach(n.points,em),pn.has(n,"y")&&em(n)})}function em(e){e.y=-e.y}function kB(e){pn.forEach(e.nodes(),function(t){tm(e.node(t))}),pn.forEach(e.edges(),function(t){var n=e.edge(t);pn.forEach(n.points,tm),pn.has(n,"x")&&tm(n)})}function tm(e){var t=e.x;e.x=e.y,e.y=t}var kn=Pe,CB=jB;function jB(e){var t={},n=kn.filter(e.nodes(),function(o){return!e.children(o).length}),r=kn.max(kn.map(n,function(o){return e.node(o).rank})),i=kn.map(kn.range(r+1),function(){return[]});function a(o){if(!kn.has(t,o)){t[o]=!0;var l=e.node(o);i[l.rank].push(o),kn.forEach(e.successors(o),a)}}var s=kn.sortBy(n,function(o){return e.node(o).rank});return kn.forEach(s,a),i}var Jn=Pe,EB=TB;function TB(e,t){for(var n=0,r=1;r<t.length;++r)n+=NB(e,t[r-1],t[r]);return n}function NB(e,t,n){for(var r=Jn.zipObject(n,Jn.map(n,function(u,c){return c})),i=Jn.flatten(Jn.map(t,function(u){return Jn.sortBy(Jn.map(e.outEdges(u),function(c){return{pos:r[c.w],weight:e.edge(c).weight}}),"pos")}),!0),a=1;a<n.length;)a<<=1;var s=2*a-1;a-=1;var o=Jn.map(new Array(s),function(){return 0}),l=0;return Jn.forEach(i.forEach(function(u){var c=u.pos+a;o[c]+=u.weight;for(var f=0;c>0;)c%2&&(f+=o[c+1]),c=c-1>>1,o[c]+=u.weight;l+=u.weight*f})),l}var Tk=Pe,MB=PB;function PB(e,t){return Tk.map(t,function(n){var r=e.inEdges(n);if(r.length){var i=Tk.reduce(r,function(a,s){var o=e.edge(s),l=e.node(s.v);return{sum:a.sum+o.weight*l.order,weight:a.weight+o.weight}},{sum:0,weight:0});return{v:n,barycenter:i.sum/i.weight,weight:i.weight}}else return{v:n}})}var Et=Pe,RB=AB;function AB(e,t){var n={};Et.forEach(e,function(i,a){var s=n[i.v]={indegree:0,in:[],out:[],vs:[i.v],i:a};Et.isUndefined(i.barycenter)||(s.barycenter=i.barycenter,s.weight=i.weight)}),Et.forEach(t.edges(),function(i){var a=n[i.v],s=n[i.w];!Et.isUndefined(a)&&!Et.isUndefined(s)&&(s.indegree++,a.out.push(n[i.w]))});var r=Et.filter(n,function(i){return!i.indegree});return IB(r)}function IB(e){var t=[];function n(a){return function(s){s.merged||(Et.isUndefined(s.barycenter)||Et.isUndefined(a.barycenter)||s.barycenter>=a.barycenter)&&DB(a,s)}}function r(a){return function(s){s.in.push(a),--s.indegree===0&&e.push(s)}}for(;e.length;){var i=e.pop();t.push(i),Et.forEach(i.in.reverse(),n(i)),Et.forEach(i.out,r(i))}return Et.map(Et.filter(t,function(a){return!a.merged}),function(a){return Et.pick(a,["vs","i","barycenter","weight"])})}function DB(e,t){var n=0,r=0;e.weight&&(n+=e.barycenter*e.weight,r+=e.weight),t.weight&&(n+=t.barycenter*t.weight,r+=t.weight),e.vs=t.vs.concat(e.vs),e.barycenter=n/r,e.weight=r,e.i=Math.min(t.i,e.i),t.merged=!0}var Oa=Pe,OB=St,LB=qB;function qB(e,t){var n=OB.partition(e,function(c){return Oa.has(c,"barycenter")}),r=n.lhs,i=Oa.sortBy(n.rhs,function(c){return-c.i}),a=[],s=0,o=0,l=0;r.sort(FB(!!t)),l=Nk(a,i,l),Oa.forEach(r,function(c){l+=c.vs.length,a.push(c.vs),s+=c.barycenter*c.weight,o+=c.weight,l=Nk(a,i,l)});var u={vs:Oa.flatten(a,!0)};return o&&(u.barycenter=s/o,u.weight=o),u}function Nk(e,t,n){for(var r;t.length&&(r=Oa.last(t)).i<=n;)t.pop(),e.push(r.vs),n++;return n}function FB(e){return function(t,n){return t.barycenter<n.barycenter?-1:t.barycenter>n.barycenter?1:e?n.i-t.i:t.i-n.i}}var ir=Pe,VB=MB,$B=RB,BB=LB,zB=aM;function aM(e,t,n,r){var i=e.children(t),a=e.node(t),s=a?a.borderLeft:void 0,o=a?a.borderRight:void 0,l={};s&&(i=ir.filter(i,function(g){return g!==s&&g!==o}));var u=VB(e,i);ir.forEach(u,function(g){if(e.children(g.v).length){var p=aM(e,g.v,n,r);l[g.v]=p,ir.has(p,"barycenter")&&GB(g,p)}});var c=$B(u,n);UB(c,l);var f=BB(c,r);if(s&&(f.vs=ir.flatten([s,f.vs,o],!0),e.predecessors(s).length)){var h=e.node(e.predecessors(s)[0]),m=e.node(e.predecessors(o)[0]);ir.has(f,"barycenter")||(f.barycenter=0,f.weight=0),f.barycenter=(f.barycenter*f.weight+h.order+m.order)/(f.weight+2),f.weight+=2}return f}function UB(e,t){ir.forEach(e,function(n){n.vs=ir.flatten(n.vs.map(function(r){return t[r]?t[r].vs:r}),!0)})}function GB(e,t){ir.isUndefined(e.barycenter)?(e.barycenter=t.barycenter,e.weight=t.weight):(e.barycenter=(e.barycenter*e.weight+t.barycenter*t.weight)/(e.weight+t.weight),e.weight+=t.weight)}var La=Pe,HB=sn.Graph,KB=WB;function WB(e,t,n){var r=YB(e),i=new HB({compound:!0}).setGraph({root:r}).setDefaultNodeLabel(function(a){return e.node(a)});return La.forEach(e.nodes(),function(a){var s=e.node(a),o=e.parent(a);(s.rank===t||s.minRank<=t&&t<=s.maxRank)&&(i.setNode(a),i.setParent(a,o||r),La.forEach(e[n](a),function(l){var u=l.v===a?l.w:l.v,c=i.edge(u,a),f=La.isUndefined(c)?0:c.weight;i.setEdge(u,a,{weight:e.edge(l).weight+f})}),La.has(s,"minRank")&&i.setNode(a,{borderLeft:s.borderLeft[t],borderRight:s.borderRight[t]}))}),i}function YB(e){for(var t;e.hasNode(t=La.uniqueId("_root")););return t}var QB=Pe,JB=XB;function XB(e,t,n){var r={},i;QB.forEach(n,function(a){for(var s=e.parent(a),o,l;s;){if(o=e.parent(s),o?(l=r[o],r[o]=s):(l=i,i=s),l&&l!==s){t.setEdge(l,s);return}s=o}})}var mr=Pe,ZB=CB,e4=EB,t4=zB,n4=KB,r4=JB,i4=sn.Graph,Mk=St,a4=s4;function s4(e){var t=Mk.maxRank(e),n=Pk(e,mr.range(1,t+1),"inEdges"),r=Pk(e,mr.range(t-1,-1,-1),"outEdges"),i=ZB(e);Rk(e,i);for(var a=Number.POSITIVE_INFINITY,s,o=0,l=0;l<4;++o,++l){o4(o%2?n:r,o%4>=2),i=Mk.buildLayerMatrix(e);var u=e4(e,i);u<a&&(l=0,s=mr.cloneDeep(i),a=u)}Rk(e,s)}function Pk(e,t,n){return mr.map(t,function(r){return n4(e,r,n)})}function o4(e,t){var n=new i4;mr.forEach(e,function(r){var i=r.graph().root,a=t4(r,i,n,t);mr.forEach(a.vs,function(s,o){r.node(s).order=o}),r4(r,n,a.vs)})}function Rk(e,t){mr.forEach(t,function(n){mr.forEach(n,function(r,i){e.node(r).order=i})})}var re=Pe,l4=sn.Graph,u4=St,c4={positionX:w4};function d4(e,t){var n={};function r(i,a){var s=0,o=0,l=i.length,u=re.last(a);return re.forEach(a,function(c,f){var h=h4(e,c),m=h?e.node(h).order:l;(h||c===u)&&(re.forEach(a.slice(o,f+1),function(g){re.forEach(e.predecessors(g),function(p){var S=e.node(p),v=S.order;(v<s||m<v)&&!(S.dummy&&e.node(g).dummy)&&sM(n,p,g)})}),o=f+1,s=m)}),a}return re.reduce(t,r),n}function f4(e,t){var n={};function r(a,s,o,l,u){var c;re.forEach(re.range(s,o),function(f){c=a[f],e.node(c).dummy&&re.forEach(e.predecessors(c),function(h){var m=e.node(h);m.dummy&&(m.order<l||m.order>u)&&sM(n,h,c)})})}function i(a,s){var o=-1,l,u=0;return re.forEach(s,function(c,f){if(e.node(c).dummy==="border"){var h=e.predecessors(c);h.length&&(l=e.node(h[0]).order,r(s,u,f,o,l),u=f,o=l)}r(s,u,s.length,l,a.length)}),s}return re.reduce(t,i),n}function h4(e,t){if(e.node(t).dummy)return re.find(e.predecessors(t),function(n){return e.node(n).dummy})}function sM(e,t,n){if(t>n){var r=t;t=n,n=r}var i=e[t];i||(e[t]=i={}),i[n]=!0}function p4(e,t,n){if(t>n){var r=t;t=n,n=r}return re.has(e[t],n)}function m4(e,t,n,r){var i={},a={},s={};return re.forEach(t,function(o){re.forEach(o,function(l,u){i[l]=l,a[l]=l,s[l]=u})}),re.forEach(t,function(o){var l=-1;re.forEach(o,function(u){var c=r(u);if(c.length){c=re.sortBy(c,function(p){return s[p]});for(var f=(c.length-1)/2,h=Math.floor(f),m=Math.ceil(f);h<=m;++h){var g=c[h];a[u]===u&&l<s[g]&&!p4(n,u,g)&&(a[g]=u,a[u]=i[u]=i[g],l=s[g])}}})}),{root:i,align:a}}function g4(e,t,n,r,i){var a={},s=v4(e,t,n,i),o=i?"borderLeft":"borderRight";function l(f,h){for(var m=s.nodes(),g=m.pop(),p={};g;)p[g]?f(g):(p[g]=!0,m.push(g),m=m.concat(h(g))),g=m.pop()}function u(f){a[f]=s.inEdges(f).reduce(function(h,m){return Math.max(h,a[m.v]+s.edge(m))},0)}function c(f){var h=s.outEdges(f).reduce(function(g,p){return Math.min(g,a[p.w]-s.edge(p))},Number.POSITIVE_INFINITY),m=e.node(f);h!==Number.POSITIVE_INFINITY&&m.borderType!==o&&(a[f]=Math.max(a[f],h))}return l(u,s.predecessors.bind(s)),l(c,s.successors.bind(s)),re.forEach(r,function(f){a[f]=a[n[f]]}),a}function v4(e,t,n,r){var i=new l4,a=e.graph(),s=S4(a.nodesep,a.edgesep,r);return re.forEach(t,function(o){var l;re.forEach(o,function(u){var c=n[u];if(i.setNode(c),l){var f=n[l],h=i.edge(f,c);i.setEdge(f,c,Math.max(s(e,u,l),h||0))}l=u})}),i}function y4(e,t){return re.minBy(re.values(t),function(n){var r=Number.NEGATIVE_INFINITY,i=Number.POSITIVE_INFINITY;return re.forIn(n,function(a,s){var o=_4(e,s)/2;r=Math.max(a+o,r),i=Math.min(a-o,i)}),r-i})}function b4(e,t){var n=re.values(t),r=re.min(n),i=re.max(n);re.forEach(["u","d"],function(a){re.forEach(["l","r"],function(s){var o=a+s,l=e[o],u;if(l!==t){var c=re.values(l);u=s==="l"?r-re.min(c):i-re.max(c),u&&(e[o]=re.mapValues(l,function(f){return f+u}))}})})}function x4(e,t){return re.mapValues(e.ul,function(n,r){if(t)return e[t.toLowerCase()][r];var i=re.sortBy(re.map(e,r));return(i[1]+i[2])/2})}function w4(e){var t=u4.buildLayerMatrix(e),n=re.merge(d4(e,t),f4(e,t)),r={},i;re.forEach(["u","d"],function(s){i=s==="u"?t:re.values(t).reverse(),re.forEach(["l","r"],function(o){o==="r"&&(i=re.map(i,function(f){return re.values(f).reverse()}));var l=(s==="u"?e.predecessors:e.successors).bind(e),u=m4(e,i,n,l),c=g4(e,i,u.root,u.align,o==="r");o==="r"&&(c=re.mapValues(c,function(f){return-f})),r[s+o]=c})});var a=y4(e,r);return b4(r,a),x4(r,e.graph().align)}function S4(e,t,n){return function(r,i,a){var s=r.node(i),o=r.node(a),l=0,u;if(l+=s.width/2,re.has(s,"labelpos"))switch(s.labelpos.toLowerCase()){case"l":u=-s.width/2;break;case"r":u=s.width/2;break}if(u&&(l+=n?u:-u),u=0,l+=(s.dummy?t:e)/2,l+=(o.dummy?t:e)/2,l+=o.width/2,re.has(o,"labelpos"))switch(o.labelpos.toLowerCase()){case"l":u=o.width/2;break;case"r":u=-o.width/2;break}return u&&(l+=n?u:-u),u=0,l}}function _4(e,t){return e.node(t).width}var qa=Pe,oM=St,k4=c4.positionX,C4=j4;function j4(e){e=oM.asNonCompoundGraph(e),E4(e),qa.forEach(k4(e),function(t,n){e.node(n).x=t})}function E4(e){var t=oM.buildLayerMatrix(e),n=e.graph().ranksep,r=0;qa.forEach(t,function(i){var a=qa.max(qa.map(i,function(s){return e.node(s).height}));qa.forEach(i,function(s){e.node(s).y=r+a/2}),r+=a+n})}var ce=Pe,Ak=v$,Ik=I$,T4=iB,N4=St.normalizeRanks,M4=lB,P4=St.removeEmptyRanks,Dk=fB,R4=yB,Ok=xB,A4=a4,I4=C4,xr=St,D4=sn.Graph,O4=L4;function L4(e,t){var n=t&&t.debugTiming?xr.time:xr.notime;n("layout",function(){var r=n("  buildLayoutGraph",function(){return W4(e)});n("  runLayout",function(){q4(r,n)}),n("  updateInputGraph",function(){F4(e,r)})})}function q4(e,t){t("    makeSpaceForEdgeLabels",function(){Y4(e)}),t("    removeSelfEdges",function(){iz(e)}),t("    acyclic",function(){Ak.run(e)}),t("    nestingGraph.run",function(){Dk.run(e)}),t("    rank",function(){T4(xr.asNonCompoundGraph(e))}),t("    injectEdgeLabelProxies",function(){Q4(e)}),t("    removeEmptyRanks",function(){P4(e)}),t("    nestingGraph.cleanup",function(){Dk.cleanup(e)}),t("    normalizeRanks",function(){N4(e)}),t("    assignRankMinMax",function(){J4(e)}),t("    removeEdgeLabelProxies",function(){X4(e)}),t("    normalize.run",function(){Ik.run(e)}),t("    parentDummyChains",function(){M4(e)}),t("    addBorderSegments",function(){R4(e)}),t("    order",function(){A4(e)}),t("    insertSelfEdges",function(){az(e)}),t("    adjustCoordinateSystem",function(){Ok.adjust(e)}),t("    position",function(){I4(e)}),t("    positionSelfEdges",function(){sz(e)}),t("    removeBorderNodes",function(){rz(e)}),t("    normalize.undo",function(){Ik.undo(e)}),t("    fixupEdgeLabelCoords",function(){tz(e)}),t("    undoCoordinateSystem",function(){Ok.undo(e)}),t("    translateGraph",function(){Z4(e)}),t("    assignNodeIntersects",function(){ez(e)}),t("    reversePoints",function(){nz(e)}),t("    acyclic.undo",function(){Ak.undo(e)})}function F4(e,t){ce.forEach(e.nodes(),function(n){var r=e.node(n),i=t.node(n);r&&(r.x=i.x,r.y=i.y,t.children(n).length&&(r.width=i.width,r.height=i.height))}),ce.forEach(e.edges(),function(n){var r=e.edge(n),i=t.edge(n);r.points=i.points,ce.has(i,"x")&&(r.x=i.x,r.y=i.y)}),e.graph().width=t.graph().width,e.graph().height=t.graph().height}var V4=["nodesep","edgesep","ranksep","marginx","marginy"],$4={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},B4=["acyclicer","ranker","rankdir","align"],z4=["width","height"],U4={width:0,height:0},G4=["minlen","weight","width","height","labeloffset"],H4={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},K4=["labelpos"];function W4(e){var t=new D4({multigraph:!0,compound:!0}),n=rm(e.graph());return t.setGraph(ce.merge({},$4,nm(n,V4),ce.pick(n,B4))),ce.forEach(e.nodes(),function(r){var i=rm(e.node(r));t.setNode(r,ce.defaults(nm(i,z4),U4)),t.setParent(r,e.parent(r))}),ce.forEach(e.edges(),function(r){var i=rm(e.edge(r));t.setEdge(r,ce.merge({},H4,nm(i,G4),ce.pick(i,K4)))}),t}function Y4(e){var t=e.graph();t.ranksep/=2,ce.forEach(e.edges(),function(n){var r=e.edge(n);r.minlen*=2,r.labelpos.toLowerCase()!=="c"&&(t.rankdir==="TB"||t.rankdir==="BT"?r.width+=r.labeloffset:r.height+=r.labeloffset)})}function Q4(e){ce.forEach(e.edges(),function(t){var n=e.edge(t);if(n.width&&n.height){var r=e.node(t.v),i=e.node(t.w),a={rank:(i.rank-r.rank)/2+r.rank,e:t};xr.addDummyNode(e,"edge-proxy",a,"_ep")}})}function J4(e){var t=0;ce.forEach(e.nodes(),function(n){var r=e.node(n);r.borderTop&&(r.minRank=e.node(r.borderTop).rank,r.maxRank=e.node(r.borderBottom).rank,t=ce.max(t,r.maxRank))}),e.graph().maxRank=t}function X4(e){ce.forEach(e.nodes(),function(t){var n=e.node(t);n.dummy==="edge-proxy"&&(e.edge(n.e).labelRank=n.rank,e.removeNode(t))})}function Z4(e){var t=Number.POSITIVE_INFINITY,n=0,r=Number.POSITIVE_INFINITY,i=0,a=e.graph(),s=a.marginx||0,o=a.marginy||0;function l(u){var c=u.x,f=u.y,h=u.width,m=u.height;t=Math.min(t,c-h/2),n=Math.max(n,c+h/2),r=Math.min(r,f-m/2),i=Math.max(i,f+m/2)}ce.forEach(e.nodes(),function(u){l(e.node(u))}),ce.forEach(e.edges(),function(u){var c=e.edge(u);ce.has(c,"x")&&l(c)}),t-=s,r-=o,ce.forEach(e.nodes(),function(u){var c=e.node(u);c.x-=t,c.y-=r}),ce.forEach(e.edges(),function(u){var c=e.edge(u);ce.forEach(c.points,function(f){f.x-=t,f.y-=r}),ce.has(c,"x")&&(c.x-=t),ce.has(c,"y")&&(c.y-=r)}),a.width=n-t+s,a.height=i-r+o}function ez(e){ce.forEach(e.edges(),function(t){var n=e.edge(t),r=e.node(t.v),i=e.node(t.w),a,s;n.points?(a=n.points[0],s=n.points[n.points.length-1]):(n.points=[],a=i,s=r),n.points.unshift(xr.intersectRect(r,a)),n.points.push(xr.intersectRect(i,s))})}function tz(e){ce.forEach(e.edges(),function(t){var n=e.edge(t);if(ce.has(n,"x"))switch((n.labelpos==="l"||n.labelpos==="r")&&(n.width-=n.labeloffset),n.labelpos){case"l":n.x-=n.width/2+n.labeloffset;break;case"r":n.x+=n.width/2+n.labeloffset;break}})}function nz(e){ce.forEach(e.edges(),function(t){var n=e.edge(t);n.reversed&&n.points.reverse()})}function rz(e){ce.forEach(e.nodes(),function(t){if(e.children(t).length){var n=e.node(t),r=e.node(n.borderTop),i=e.node(n.borderBottom),a=e.node(ce.last(n.borderLeft)),s=e.node(ce.last(n.borderRight));n.width=Math.abs(s.x-a.x),n.height=Math.abs(i.y-r.y),n.x=a.x+n.width/2,n.y=r.y+n.height/2}}),ce.forEach(e.nodes(),function(t){e.node(t).dummy==="border"&&e.removeNode(t)})}function iz(e){ce.forEach(e.edges(),function(t){if(t.v===t.w){var n=e.node(t.v);n.selfEdges||(n.selfEdges=[]),n.selfEdges.push({e:t,label:e.edge(t)}),e.removeEdge(t)}})}function az(e){var t=xr.buildLayerMatrix(e);ce.forEach(t,function(n){var r=0;ce.forEach(n,function(i,a){var s=e.node(i);s.order=a+r,ce.forEach(s.selfEdges,function(o){xr.addDummyNode(e,"selfedge",{width:o.label.width,height:o.label.height,rank:s.rank,order:a+ ++r,e:o.e,label:o.label},"_se")}),delete s.selfEdges})})}function sz(e){ce.forEach(e.nodes(),function(t){var n=e.node(t);if(n.dummy==="selfedge"){var r=e.node(n.e.v),i=r.x+r.width/2,a=r.y,s=n.x-i,o=r.height/2;e.setEdge(n.e,n.label),e.removeNode(t),n.label.points=[{x:i+2*s/3,y:a-o},{x:i+5*s/6,y:a-o},{x:i+s,y:a},{x:i+5*s/6,y:a+o},{x:i+2*s/3,y:a+o}],n.label.x=n.x,n.label.y=n.y}})}function nm(e,t){return ce.mapValues(ce.pick(e,t),Number)}function rm(e){var t={};return ce.forEach(e,function(n,r){t[r.toLowerCase()]=n}),t}var ho=Pe,oz=St,lz=sn.Graph,uz={debugOrdering:cz};function cz(e){var t=oz.buildLayerMatrix(e),n=new lz({compound:!0,multigraph:!0}).setGraph({});return ho.forEach(e.nodes(),function(r){n.setNode(r,{label:r}),n.setParent(r,"layer"+e.node(r).rank)}),ho.forEach(e.edges(),function(r){n.setEdge(r.v,r.w,{},r.name)}),ho.forEach(t,function(r,i){var a="layer"+i;n.setNode(a,{rank:"same"}),ho.reduce(r,function(s,o){return n.setEdge(s,o,{style:"invis"}),o})}),n}var dz="0.8.5",fz={graphlib:sn,layout:O4,debug:uz,util:{time:St.time,notime:St.notime},version:dz};const Lk=Kk(fz),qk=new Map;function hz(e,t){const n=e.map(i=>i.id).join("|"),r=t.map(i=>`${i.source}->${i.target}`).join("|");return`${e.length}:${t.length}:${n}:${r}`}function pz(e,t,n){if(n){const r=hz(e,t),i=qk.get(n);if(i&&i.signature===r)return i.layout;const a=Fk(e,t);return qk.set(n,{signature:r,layout:a}),a}return Fk(e,t)}function Fk(e,t){if(e.length>2500){const r=Math.ceil(Math.sqrt(e.length));return e.map((i,a)=>{const s=Math.floor(a/r),o=a%r;return{id:i.id,position:{x:o*260,y:s*160}}})}const n=new Lk.graphlib.Graph;return n.setGraph({rankdir:"LR",nodesep:48,ranksep:80}),n.setDefaultEdgeLabel(()=>({})),e.forEach(r=>{n.setNode(r.id,{width:220,height:120})}),t.forEach(r=>{n.setEdge(r.source,r.target)}),Lk.layout(n),e.map(r=>{const i=n.node(r.id);return{id:r.id,position:{x:i.x-i.width/2,y:i.y-i.height/2}}})}function mz(e){const t=new Map;for(const r of e)r.type==="tool_call"&&r.toolCallId&&t.set(r.toolCallId,r.id);const n=[];for(const r of e)if(!(r.type!=="llm_call"||!r.io)){for(const i of r.io.emittedToolCallIds??[]){const a=t.get(i);a&&n.push({id:`io_emit_${r.id}_${a}`,source:r.id,target:a,kind:"io",toolCallId:i})}for(const i of r.io.consumedToolCallIds??[]){const a=t.get(i);a&&n.push({id:`io_consume_${a}_${r.id}`,source:a,target:r.id,kind:"io",toolCallId:i})}}return n}function gz(e,t,n){const{intervals:r}=El(e,t,n),i=new Set;return r.forEach(a=>{i.add(a.startMs),i.add(a.endMs)}),Array.from(i).sort((a,s)=>a-s)}function vz(e,t,n){if(!e.length)return null;if(n===1){for(const r of e)if(r>t+1)return r;return e[e.length-1]}for(let r=e.length-1;r>=0;r-=1){const i=e[r];if(i<t-1)return i}return e[0]}const yz=300,bz=2e3,xz=1.5;function wz(e){const t=yz*Math.pow(xz,Math.max(0,e));return Math.min(bz,Math.round(t))}function Xn(e,t){if(!e)return t;try{return JSON.parse(e)}catch{return t}}function Vk(e,t){const n=new Map;return[...e,...t].forEach(r=>{const i=n.get(r.id);(!i||r.updatedAt>=i.updatedAt)&&n.set(r.id,r)}),Array.from(n.values()).sort((r,i)=>r.createdAt-i.createdAt)}function $k(e,t=50){return[...e].sort((n,r)=>r.timestamp-n.timestamp).slice(0,t)}const Bk=220,zk=120,xg="agentDirector.presence.v1",Sz=2e4,_z=5e3,gi="agentDirector.collab.cursors.v1",im="agentDirector.collab.annotations.v1",am="agentDirector.collab.activity.v1",kz=x.lazy(()=>mv(()=>import("./index-CiJ6T5Xu.js"),__vite__mapDeps([0,1]))),Cz=x.lazy(()=>mv(()=>import("./index-Dy8_xaXw.js"),[])),jz=x.lazy(()=>mv(()=>import("./index-QzQuGdED.js"),[]));function po(){return`scenario-${Math.random().toString(36).slice(2,9)}`}function Ez(e){return e.filter(t=>t.parentStepId).map(t=>({source:t.parentStepId,target:t.id}))}function Tz(e){const t=[...e].sort((n,r)=>n.index-r.index);return t.slice(1).map((n,r)=>({source:t[r].id,target:n.id}))}function Nz(e){const t={},n=e.getBoundingClientRect();return e.querySelectorAll(".step-card").forEach(i=>{const a=i.dataset.stepId;if(!a)return;const s=i.getBoundingClientRect();t[a]={left:s.left-n.left,top:s.top-n.top,width:s.width,height:s.height}}),t}function Mz(e,t,n){const r=[...Ez(e),...Tz(e),...mz(e).map(g=>({source:g.source,target:g.target}))],i=pz(e,r,n),a=t.getBoundingClientRect(),s=Math.min(...i.map(g=>g.position.x)),o=Math.min(...i.map(g=>g.position.y)),l=Math.max(...i.map(g=>g.position.x)),u=Math.max(...i.map(g=>g.position.y)),c=l-s+Bk,f=u-o+zk,h=Math.max(32,(a.width-c)/2),m=Math.max(24,(a.height-f)/2);return i.reduce((g,p)=>(g[p.id]={left:p.position.x-s+h,top:p.position.y-o+m,width:Bk,height:zk},g),{})}function Uk(e,t,n){const r=t.trim().toLowerCase();return e.filter(i=>{var s,o,l;return n!=="all"&&i.type!==n?!1:r?[i.name,(s=i.preview)==null?void 0:s.title,(o=i.preview)==null?void 0:o.outputPreview,(l=i.preview)==null?void 0:l.inputPreview].filter(Boolean).join(" ").toLowerCase().includes(r):!0})}function Pz(e,t,n){var u;const r=e.profiles[t]??e.profiles[((u=e.players[0])==null?void 0:u.player_id)??""]??Object.values(e.profiles)[0],i=e.players.reduce((c,f)=>(c[f.player_id]=f.role,c),{}),a=Object.entries(e.narrative.nodes).map(([c,f])=>({id:c,title:f.title,body:f.title,choices:f.choices.map(h=>({id:h.id,label:h.id,nextNodeId:h.next,tensionDelta:h.tension,mutator:h.modifier}))})),s=e.pvp.winner??null,l=e.telemetry.failures>0?"failure":s?"success":"mixed";return{seed:e.seed,raid:{party:e.players.map(c=>c.player_id),roles:i,objectives:e.raid.objectives.map(c=>({id:c.id,label:c.label,progress:c.progress,target:c.target,completed:c.completed})),completed:e.raid.completed},campaign:{depth:e.campaign.depth,lives:e.campaign.lives,currentMission:{id:e.campaign.current_mission.id,title:e.campaign.current_mission.title,difficulty:e.campaign.current_mission.difficulty,hazards:e.campaign.current_mission.hazards,rewardCredits:e.campaign.current_mission.reward_tokens},completedMissionIds:e.campaign.completed_missions,mutators:[...e.campaign.modifiers,...e.campaign.unlocked_modifiers]},narrative:{currentNodeId:e.narrative.current_node_id,nodes:a.length>0?a:n.narrative.nodes,history:e.narrative.history.map(c=>({nodeId:c.node_id,choiceId:c.choice_id})),tension:e.narrative.tension},skills:{points:(r==null?void 0:r.skill_points)??n.skills.points,nodes:n.skills.nodes.map(c=>({...c,unlocked:!!(r!=null&&r.unlocked_skills.includes(c.id))})),loadout:{capacity:(r==null?void 0:r.loadout_capacity)??n.skills.loadout.capacity,equipped:(r==null?void 0:r.loadout)??[]}},pvp:{round:e.pvp.round,stability:e.pvp.operator_stability,sabotage:e.pvp.sabotage_pressure,fog:e.pvp.fog,winner:s},time:{activeForkId:e.time.active_fork_id,forks:e.time.forks.map(c=>({id:c.id,label:c.label,playheadMs:c.playhead_ms,history:c.history}))},boss:{name:e.boss.name,phase:e.boss.phase,hp:e.boss.hp,maxHp:e.boss.max_hp,enraged:e.boss.enraged},director:{risk:e.director.risk,hint:e.director.hint,recommendedModifier:e.director.hazard_bias,lastOutcome:l},economy:{credits:e.economy.tokens,materials:e.economy.materials,crafted:e.economy.crafted},guild:{name:e.guild.guild_id??"Trace Guild",members:e.players.length,operationsScore:e.guild.operations_score,eventsCompleted:e.guild.events_completed},cinematic:{queue:e.cinematic.events.map(c=>({id:c.id,type:c.type==="critical"||c.type==="success"||c.type==="warning"||c.type==="twist"?c.type:"warning",message:c.message,intensity:c.intensity||1,at:Date.parse(c.at)||Date.now()}))},liveops:{season:e.liveops.season,week:e.liveops.week,challenge:{id:e.liveops.challenge.id,title:e.liveops.challenge.title,goal:e.liveops.challenge.goal,progress:e.liveops.challenge.progress,rewardCredits:e.liveops.challenge.reward,completed:e.liveops.challenge.completed}}}}function Rz(){const e=window.sessionStorage.getItem("agentDirector.sessionId");if(e)return e;const t=`session-${Math.random().toString(36).slice(2,10)}`;return window.sessionStorage.setItem("agentDirector.sessionId",t),t}function Gk(){try{const e=window.localStorage.getItem(xg);if(!e)return{};const t=JSON.parse(e),n={};return Object.entries(t).forEach(([r,i])=>{typeof i=="number"&&(n[r]=i)}),n}catch{return{}}}function Hk(e,t=Date.now()){return Object.fromEntries(Object.entries(e).filter(([,n])=>t-n<Sz))}function Az(){var Dy,Oy;const{trace:e,insights:t,loading:n,error:r,reload:i,traces:a,selectedTraceId:s,setSelectedTraceId:o}=gF(),[l,u]=Re("agentDirector.mode","cinema"),[c,f]=x.useState(""),h=x.useDeferredValue(c),[m,g]=x.useState("all"),[p,S]=x.useState(""),[v,y]=x.useState(null),[w,_]=x.useState(null),[C,E]=x.useState(null),[T,j]=x.useState([]),[N,P]=x.useState(""),[R,O]=x.useState(null),[F,X]=x.useState(!1),[$,fe]=x.useState(null),[ie,D]=Re("agentDirector.safeExport",!1),[B,V]=Re("agentDirector.syncPlayback",!0),[z,te]=x.useState(null),[A,J]=x.useState(!1),[se,U]=x.useState(0),[me,Xe]=Re("agentDirector.speed",1),[ft,Dt]=Re("agentDirector.windowed",!1),[xn,Un]=x.useState(2e4),[G,le]=x.useState(!1),[ne,Le]=x.useState(!1),[ue,qe]=Re("agentDirector.overlayEnabled",!1),[Yt,jr]=Re("agentDirector.onboarded",!1),[,_t]=Re("agentDirector.tourCompleted",!1),[Ke,xe]=Re("agentDirector.explainMode",!0),[Ot,on]=Re("agentDirector.heroDismissed",!1),[oa,Gn]=Re("agentDirector.dockOpen",!1),[ve,ai]=Re("agentDirector.introPersona","builder"),[Er,Hn]=Re("agentDirector.launchPath","rapid_triage"),[ln,kt]=Re("agentDirector.themeMode","studio"),[M,W]=Re("agentDirector.motionMode","balanced"),[H,Y]=Re("agentDirector.timelineLaneStrategy","type"),[we,je]=Re("agentDirector.timelineStudioConfig",Sa),[pe,_e]=Re("agentDirector.missions",{playback:!1,flow:!1,inspect:!1,matrix:!1,replay:!1,annotate:!1,collaborate:!1}),si=!1,[un,Ds]=Re("agentDirector.introDismissed",si),[oi,Ze]=x.useState(!1),[ye,Os]=x.useState(null),[Ls,Zl]=x.useState([]),[eu,tu]=x.useState(null),[lM,vy]=x.useState(null),[nu,ru]=x.useState(""),[uM,li]=x.useState([{id:po(),name:"Prompt tighter",strategy:"hybrid",modificationsText:'{"prompt":"Return concise response"}'},{id:po(),name:"Recorded baseline",strategy:"recorded",modificationsText:"{}"}]),[la,iu]=x.useState(null),[Lt,yy]=x.useState(null),[cM,qs]=x.useState(!1),[dM,ua]=x.useState(null),[fM,ca]=Re("agentDirector.gameplayState.v1",ub("bootstrap")),[by,xy]=Re("agentDirector.gameplayTraceId.v1",""),[Tr]=Re("agentDirector.gameplayPlayerId.v1",`player-${Math.random().toString(36).slice(2,8)}`),[Nr,ui]=Re("agentDirector.gameplaySessionId.v1",""),[Ue,Kn]=x.useState(null),[hM,Fe]=x.useState(null),[pM,ci]=x.useState(null),[au,wy]=x.useState(1),[mM,su]=x.useState(null),[gM,ou]=x.useState(null),[Sy,lu]=x.useState({}),[_y,uu]=x.useState([]),[vM,cu]=x.useState([]),[da,du]=x.useState(800),[yM,bM]=x.useState(0),fu=x.useRef(null),ky=x.useRef(null),di=x.useRef(Rz()),Cy=x.useRef(0),jy=x.useRef(0),hu=x.useRef(!1),Wn=x.useMemo(()=>{if(!e)return[];const b=performance.now(),k=Uk(e.steps,h,m);return jy.current=performance.now()-b,k},[e,h,m]),pu=x.useMemo(()=>Wn.slice(0,Math.min(Wn.length,da)),[da,Wn]),Ey=x.useMemo(()=>{if(!v)return pu;const b=new Set(v.matchedStepIds);return pu.filter(k=>b.has(k.id))},[pu,v]),xM=x.useMemo(()=>z?Uk(z.steps,h,m).slice(0,Math.min(z.steps.length,da)):[],[z,h,m,da]),Ty=x.useMemo(()=>e?gz(e.startedAt,e.endedAt,e.steps):[],[e]),wM=x.useMemo(()=>!e||!z?null:UT(e,z),[e,z]),Ny=x.useMemo(()=>e?e.steps.find(b=>b.id===$)??null:null,[e,$]),fa=x.useMemo(()=>e?QA(e.steps,H):[],[e,H]),fi=x.useMemo(()=>{const b=we[H]??Sa[H];return K0(fa,b.order,b.hidden)},[fa,H,we]),SM=x.useMemo(()=>fi.order.filter(b=>!fi.hidden.includes(b)),[fi.hidden,fi.order]),Fs=x.useMemo(()=>{const b=di.current;return Object.values(Sy).filter(k=>k.sessionId!==b).filter(k=>k.traceId===((e==null?void 0:e.id)??"none")).sort((k,I)=>I.updatedAt-k.updatedAt)},[Sy,e==null?void 0:e.id]),_M=x.useMemo(()=>Fs.map(b=>b.playheadMs),[Fs]),kM=x.useMemo(()=>_y.filter(b=>b.traceId===(e==null?void 0:e.id)),[_y,e==null?void 0:e.id]),My=x.useMemo(()=>{const b=Object.keys(pe).length,k=Object.values(pe).filter(Boolean).length;return{done:k,total:b,pct:b>0?Math.round(k/b*100):0}},[pe]),mu=x.useMemo(()=>{var ee;if(!e)return 100;const b=100,k=Math.min(60,((t==null?void 0:t.errors)??0)*16),I=Math.min(24,((t==null?void 0:t.retries)??0)*6),L=e.metadata.wallTimeMs>6e4?12:e.metadata.wallTimeMs>3e4?6:0,Q=(ee=t==null?void 0:t.timing)!=null&&ee.degraded?8:0;return Math.max(0,Math.min(100,Math.round(b-k-I-L-Q)))},[t==null?void 0:t.errors,t==null?void 0:t.retries,(Dy=t==null?void 0:t.timing)==null?void 0:Dy.degraded,e]),CM=x.useMemo(()=>l==="flow"?"F / C / Space":l==="compare"?"C / Space /  ":l==="matrix"?"G / C / Cmd+K":l==="gameplay"?"G / S / Cmd+K":"C / F / Space",[l]);x.useEffect(()=>{e&&e.id!==by&&(ca(ub(e.id)),xy(e.id))},[by,ca,xy,e]),x.useEffect(()=>{let b=!1;if(!Nr){Kn(null);return}return Rx().then(k=>{b||(Kn(k),k||Fe("Gameplay session not found."))}),()=>{b=!0}},[Nr]),x.useEffect(()=>{if(!Nr)return;const b=mF();return()=>b()},[Nr]),x.useEffect(()=>{Ue&&ca(b=>Pz(Ue,Tr,b))},[Tr,Ue,ca]),x.useEffect(()=>{let b=!1;if(!(Ue==null?void 0:Ue.guild.guild_id)){ci(null);return}return dF().then(I=>{b||ci(I)}),()=>{b=!0}},[Ue==null?void 0:Ue.guild.guild_id]),x.useEffect(()=>{y(null),_(null)},[e==null?void 0:e.id]),x.useEffect(()=>{bM(Math.round(jy.current))},[Wn]),x.useEffect(()=>{if(!e)return;const b=Wn.length;if(b<=1200){du(b);return}du(800);const k=window.setInterval(()=>{du(I=>I>=b?(window.clearInterval(k),b):Math.min(b,I+1e3))},70);return()=>window.clearInterval(k)},[Wn.length,e]),x.useEffect(()=>{let b=!1;if(!(e!=null&&e.id)){E(null);return}return Zq(e.id).then(k=>{b||E(k)}),()=>{b=!0}},[e==null?void 0:e.id]),x.useEffect(()=>{let b=!1;return eF().then(k=>{b||(j(k),!N&&k.length>0&&P(k[0].id))}),()=>{b=!0}},[N]),x.useEffect(()=>{ky.current=z},[z]),x.useEffect(()=>(document.body.dataset.theme=ln,()=>{delete document.body.dataset.theme}),[ln]),x.useEffect(()=>(document.body.dataset.motion=M,()=>{delete document.body.dataset.motion}),[M]),x.useEffect(()=>{const b=di.current,k=(oe=!1)=>{const Ve=Date.now(),_n=Hk(Gk(),Ve);oe?delete _n[b]:_n[b]=Ve,window.localStorage.setItem(xg,JSON.stringify(_n)),wy(Math.max(1,Object.keys(_n).length))},I=()=>{const oe=Hk(Gk(),Date.now());wy(Math.max(1,Object.keys(oe).length))};k();const L=window.setInterval(()=>k(),_z),Q=oe=>{oe.key===xg&&I()},ee=()=>{document.visibilityState==="visible"&&k()},de=()=>k(!0);return window.addEventListener("storage",Q),document.addEventListener("visibilitychange",ee),window.addEventListener("beforeunload",de),()=>{window.clearInterval(L),k(!0),window.removeEventListener("storage",Q),document.removeEventListener("visibilitychange",ee),window.removeEventListener("beforeunload",de)}},[]),x.useEffect(()=>{l==="compare"&&Gn(!1)},[l,Gn]),x.useEffect(()=>{fa.length!==0&&je(b=>{const k=b[H]??Sa[H],I=K0(fa,k.order,k.hidden);return I.order.join("|")===k.order.join("|")&&I.hidden.join("|")===k.hidden.join("|")?b:{...b,[H]:I}})},[fa,H,je]),x.useEffect(()=>{lu(Xn(window.localStorage.getItem(gi),{})),uu(Xn(window.localStorage.getItem(im),[])),cu(Xn(window.localStorage.getItem(am),[]))},[]),x.useEffect(()=>{const b=Date.now();if(b-Cy.current<120&&A)return;Cy.current=b;const k=di.current,I={sessionId:k,traceId:(e==null?void 0:e.id)??"none",mode:l,playheadMs:Math.round(se),selectedStepId:$,updatedAt:b},Q={...Xn(window.localStorage.getItem(gi),{}),[k]:I};window.localStorage.setItem(gi,JSON.stringify(Q)),lu(Q)},[A,l,se,$,e==null?void 0:e.id]),x.useEffect(()=>{const b=di.current;return()=>{const k=Xn(window.localStorage.getItem(gi),{});if(!k[b])return;const I={...k};delete I[b],window.localStorage.setItem(gi,JSON.stringify(I))}},[]),x.useEffect(()=>{const b=k=>{if(k.key===gi&&lu(Xn(k.newValue,{})),k.key===im){const I=Xn(k.newValue,[]);uu(L=>Vk(L,I))}k.key===am&&cu($k(Xn(k.newValue,[])))};return window.addEventListener("storage",b),()=>window.removeEventListener("storage",b)},[]);const ae=x.useCallback(b=>{const k={id:`activity-${Math.random().toString(36).slice(2,9)}`,sessionId:di.current,message:b,timestamp:Date.now()};cu(I=>{const L=$k([k,...I]);return window.localStorage.setItem(am,JSON.stringify(L)),L})},[]),wn=x.useCallback(async b=>{if(!e)return;const k=await nF(e.id,b,"hybrid",{note:"UI replay"},e);k&&(te(k),qe(!0),u("flow"),_e(I=>I.replay?I:{...I,replay:!0}),ae(`Created replay from ${b}`))},[ae,_e,e,te,u,qe]),jM=x.useCallback(async()=>{if(!e)return;if(!p.trim()){y(null),_(null);return}const b=await Xq(e.id,p.trim());if(!b){_("TraceQL query failed"),y(null);return}y(b),_(null);const k=b.matchedStepIds[0];k&&(fe(k),l!=="cinema"&&u("cinema"))},[l,u,e,p]),EM=x.useCallback(async()=>{if(!e||!N)return;X(!0);const b=await tF(N,e.id);X(!1),b&&O(b.result)},[N,e]),qt=x.useCallback(()=>{if(!e)return;const b=[...e.steps].sort((k,I)=>(I.durationMs??0)-(k.durationMs??0))[0];b&&(fe(b.id),u("cinema"))},[e,u]),Py=x.useCallback(()=>{if(!e||e.steps.length===0)return null;const b=[...e.steps].sort((k,I)=>(I.durationMs??0)-(k.durationMs??0))[0];return(b==null?void 0:b.id)??null},[e]),Mr=x.useCallback(()=>{if(!e)return;const b=e.steps.find(k=>k.status==="failed");b&&(fe(b.id),u("cinema"))},[e,u]),gu=x.useCallback(async()=>{if(!e)return;const b=new URL(window.location.href);b.searchParams.set("trace",s??e.id),b.searchParams.set("mode",l),$?b.searchParams.set("step",$):b.searchParams.delete("step");try{await navigator.clipboard.writeText(b.toString()),su("Live link copied")}catch{window.prompt("Copy live session link",b.toString()),su("Live link ready")}window.setTimeout(()=>su(null),1800)},[l,$,s,e]),TM=x.useCallback(b=>{Y(b),ae(`Switched lane strategy to ${b}`)},[ae,Y]),NM=x.useCallback(b=>{je(k=>{const I=k[H]??Sa[H],L=I.hidden.includes(b)?I.hidden.filter(Q=>Q!==b):[...I.hidden,b];return{...k,[H]:{...I,hidden:L}}}),ae(`Toggled lane visibility for ${b}`)},[ae,H,je]),MM=x.useCallback(async b=>{if(!e)return;const k=await oF({traceId:e.id,name:b.trim()||"Night Ops"});if(!k){Fe("Failed to create gameplay session.");return}Kn(k),ui(k.id),Fe(null),ae(`Created gameplay session ${k.id}`)},[ae,Tr,ui,e]),PM=x.useCallback(async(b,k,I)=>{if(!b.trim()){Fe("Session id is required.");return}const L=await lF({sessionId:b.trim(),playerId:k.trim()});if(!L){Fe("Failed to join gameplay session.");return}Kn(L),ui(L.id),Fe(null),ae(`Joined gameplay session ${L.id} as ${k}`)},[ae,ui]),RM=x.useCallback(async()=>{if(!Nr)return;if(!await uF()){Fe("Failed to leave gameplay session.");return}Kn(null),ui(""),Fe(null),ae(`Left gameplay session ${Nr}`)},[ae,Tr,Nr,ui]),AM=x.useCallback(async(b,k)=>{if(!(Ue!=null&&Ue.id))return;const I=await Ax({sessionId:Ue.id,expectedVersion:Ue.version});if(I.session){Kn(I.session),Fe(null),ae(`Gameplay action: ${b}`);return}if(I.conflict){const L=await Rx(Ue.id);L&&Kn(L),Fe("Session changed by another player. Synced latest state.");return}Fe(I.error??"Gameplay action failed.")},[ae,Tr,Ue]),IM=x.useCallback(async(b,k)=>{if(!b.trim()||!k.trim()){Fe("Guild id and name are required.");return}const I=await cF({guildId:b.trim(),name:k.trim()});if(!I){Fe("Failed to create guild.");return}if(ci(I),Ue){const L=await Ax({sessionId:Ue.id,payload:{guild_id:I.id},expectedVersion:Ue.version});L.session&&Kn(L.session)}Fe(null),ae(`Created guild ${I.id}`)},[ae,Tr,Ue]),DM=x.useCallback(async(b,k)=>{if(!b.trim()||!k.trim()){Fe("Guild id and player id are required.");return}const I=await fF(b.trim(),k.trim());if(!I){Fe("Failed to join guild.");return}ci(I),Fe(null),ae(`Joined guild ${I.id} as ${k}`)},[ae]),OM=x.useCallback(async(b,k,I)=>{if(!b.trim()||!k.trim()||!I.trim()){Fe("Guild id, title, and schedule are required.");return}const L=await hF({guildId:b.trim(),title:k.trim(),scheduledAt:I.trim()});if(!L){Fe("Failed to schedule guild event.");return}ci(L.guild),Fe(null),ae(`Scheduled guild event ${L.event.id}`)},[ae]),LM=x.useCallback(async(b,k,I)=>{const L=await pF();if(!L){Fe("Failed to complete guild event.");return}ci(L),Fe(null),ae(`Completed guild event ${k}`)},[ae]),qM=x.useCallback((b,k)=>{je(I=>{const L=I[H]??Sa[H],Q=[...L.order],ee=Q.indexOf(b);if(ee===-1)return I;const de=k==="up"?ee-1:ee+1;if(de<0||de>=Q.length)return I;const[oe]=Q.splice(ee,1);return Q.splice(de,0,oe),{...I,[H]:{...L,order:Q}}}),ae(`Moved lane group ${b} ${k}`)},[ae,H,je]),FM=x.useCallback(()=>{_e({playback:!1,flow:!1,inspect:!1,matrix:!1,replay:!1,annotate:!1,collaborate:!1}),ae("Reset onboarding missions")},[ae,_e]),VM=x.useCallback((b,k)=>{if(!e||!b.trim())return;const I=Date.now(),L={id:`annotation-${Math.random().toString(36).slice(2,9)}`,traceId:e.id,stepId:k,body:b.trim(),authorSessionId:di.current,createdAt:I,updatedAt:I};uu(Q=>{const ee=Vk(Q,[L]);return window.localStorage.setItem(im,JSON.stringify(ee)),ee}),_e(Q=>Q.annotate?Q:{...Q,annotate:!0}),ae(k?`Added annotation on step ${k}`:"Added trace annotation")},[ae,_e,e]),$M=x.useCallback((b,k)=>{li(I=>I.map(L=>L.id===b?{...L,...k}:L))},[]),BM=x.useCallback(b=>{li(b)},[]),zM=x.useCallback(()=>{li(b=>[...b,{id:po(),name:`Scenario ${b.length+1}`,strategy:"hybrid",modificationsText:"{}"}])},[]),UM=x.useCallback(b=>{li(k=>k.length<=1?k:k.filter(I=>I.id!==b))},[]),GM=x.useCallback(b=>{li(k=>{const I=k.findIndex(de=>de.id===b);if(I===-1)return k;const L=k[I],Q={...L,id:po(),name:`${L.name} copy`},ee=[...k];return ee.splice(I+1,0,Q),ee})},[]),HM=x.useCallback((b,k)=>{li(I=>{const L=I.findIndex(oe=>oe.id===b);if(L===-1)return I;const Q=k==="up"?L-1:L+1;if(Q<0||Q>=I.length)return I;const ee=[...I],[de]=ee.splice(L,1);return ee.splice(Q,0,de),ee})},[]),KM=x.useCallback(async b=>{var I;if(!e)return;const k=nu||$||((I=e.steps[0])==null?void 0:I.id);if(!k){ua("Select an anchor step before running the matrix.");return}try{qs(!0),ua(null);const L=await rF({traceId:e.id,stepId:k,scenarios:b});if(!L)throw new Error("Failed to create replay job.");iu(L);let Q=L;for(let de=0;de<30&&!(Q.status!=="queued"&&Q.status!=="running");de+=1){const oe=wz(de);await new Promise(_n=>window.setTimeout(_n,oe));const Ve=await iF(L.id);if(!Ve)break;Q=Ve,iu(Ve)}const ee=await Px(L.id);if(!ee)throw new Error("Replay job finished but matrix summary is unavailable.");yy(ee),u("matrix"),ae(`Ran matrix with ${b.length} scenario(s) from ${k}`)}catch(L){ua(L instanceof Error?L.message:"Failed to run replay matrix.")}finally{qs(!1)}},[ae,nu,$,e,u]),WM=x.useCallback(async()=>{if(la){qs(!0);try{const b=await aF(la.id);if(!b){ua("Failed to cancel replay job.");return}iu(b);const k=await Px(b.id);k&&yy(k),ae(`Canceled matrix job ${la.id}`)}finally{qs(!1)}}},[ae,la]),YM=x.useCallback(async b=>{const k=await GT();if(!(k!=null&&k.trace)){ua("Could not load replay trace for compare view.");return}te(k.trace),qe(!0),u("compare"),ae(`Opened matrix compare trace ${b}`)},[ae,u,qe]),ke=x.useCallback(b=>{if(!(b===l||!e)){if((b==="flow"||b==="matrix"||b==="gameplay")&&J(!1),b==="flow"&&l==="cinema"&&fu.current){const k=fu.current,I=Nz(k),L=Mz(e.steps,k,e.id);vy({steps:e.steps,fromRects:I,toRects:L}),ae("Morphed cinema to flow");return}u(b),ae(`Switched mode to ${b}`)}},[ae,l,e,J,u]),ha=x.useCallback(async b=>{if(Hn(b),b==="rapid_triage"){xe(!0),ke("cinema"),Mr(),e!=null&&e.steps.some(k=>k.status==="failed")||qt(),ae("Started rapid triage launch path");return}if(b==="deep_diagnosis"){xe(!0),ke("flow"),Ze(!0),ae("Started deep diagnosis launch path");return}V(!0),ke("matrix"),await gu(),ae("Started team sync launch path")},[ae,ke,qt,Mr,xe,Hn,V,gu,e]),vu=x.useCallback(()=>{l==="flow"&&ke("cinema"),J(b=>!b)},[l,ke]),Yn=x.useCallback(()=>{Os(null),Zl([]),tu(null),J(!1)},[J]),Ry=x.useCallback(b=>[{id:"setup",label:"Opening the reel",duration:1100,action:()=>{xe(!0),J(!1),U(0),fe(null),qe(!1),Xe(1),e&&e.steps.length<500&&Dt(!1),ke("cinema")}},{id:"pace",label:"Pacing the timeline",duration:2200,action:()=>{ke("cinema"),J(!0),Xe(1.1)}},{id:"bottleneck",label:"Freeze on the bottleneck",duration:1600,action:()=>{J(!1),qt()}},{id:"inspect",label:"Inspect the moment",duration:1600,action:()=>{b&&fe(b)}},{id:"flow",label:"Morph into flow",duration:2100,action:()=>{ke("flow")}},{id:"replay",label:"Directors Cut replay",duration:2200,action:async()=>{if(!e)return;!ky.current&&b&&await wn(b),qe(!0),u("compare")}},{id:"compare",label:"Compare the cut",duration:2e3,action:()=>{J(!0),Xe(1)}},{id:"finale",label:"Final frame",duration:1100,action:()=>{J(!1)}}],[ke,wn,qt,xe,J,u,qe,U,fe,Xe,Dt,e]),hi=x.useCallback(()=>{var k;if(!e)return;const b=$??Py()??((k=e.steps[0])==null?void 0:k.id)??null;Zl(Ry(b)),Os({active:!0,step:0}),tu(e.id),Ze(!1),le(!1),Le(!1)},[Ry,Py,$,e,Le,le,Zl,Os,tu,Ze]),pi=x.useCallback(()=>{if(ye!=null&&ye.active){Yn();return}hi()},[hi,Yn,ye==null?void 0:ye.active]),QM=x.useMemo(()=>{const k=[{id:"header",title:"Mission control",body:`Confirm run status and metadata. ${{builder:"Focus on payload flow, tool-call sequencing, and replay-ready steps.",executive:"Focus on bottlenecks, risk signals, and run-level outcome changes.",operator:"Focus on failure patterns, retries, and runtime reliability posture."}[ve]}`,target:'[data-tour="header"]',placement:"bottom"}];return Ot||k.push({id:"hero",title:"Director briefing",body:"Choose Tour, Story mode, or Explain to ramp up quickly.",target:'[data-tour="hero"]',placement:"bottom"}),k.push({id:"insights",title:"Fast diagnosis",body:ve==="executive"?"Jump straight to bottlenecks and high-cost segments for fast executive readouts.":ve==="operator"?"Jump to failures and retries first, then inspect impacted steps.":"Jump straight to bottlenecks, errors, and high-cost steps with one click.",target:'[data-tour="insights"]',placement:"bottom"},{id:"journey",title:"Director journey",body:"A narrative path that teaches how to watch, inspect, and direct a better run.",target:'[data-tour="journey"]',placement:"bottom"},{id:"toolbar",title:"Filters + modes",body:"Search, filter, and switch between Cinema, Flow, and Compare as the story evolves.",target:'[data-tour="toolbar"]',placement:"bottom"},{id:"quick-actions",title:"Quick actions",body:"Launch Story Mode, open the command palette, or jump to bottlenecks instantly.",target:'[data-tour="quick-actions"]',placement:"left"},{id:"stage",title:"Cinema stage",body:"The timeline shows every step as a scene. Scrub to see pacing and concurrency.",target:'[data-tour="stage"]',placement:"top"},{id:"inspector",title:"Inspector",body:ve==="executive"?"Open key moments to validate outcome impact and communication-ready summaries.":"Open any step to read payloads, apply redaction, and replay from that moment.",target:'[data-tour="inspector"]',placement:"left"},{id:"compare",title:"Compare runs",body:z?"Compare is live. Review deltas in cost, steps, and wall time side by side.":"Replay from a step to unlock compare mode and validate improvements.",target:'[data-tour="compare"]',placement:"top"}),k},[z,Ot,ve]),JM=x.useCallback(()=>{vy(null),u("flow")},[u]),cn=x.useMemo(()=>{var L,Q,ee,de;if(!e)return[];const b=[],k=[...e.steps].sort((oe,Ve)=>(Ve.durationMs??0)-(oe.durationMs??0))[0],I=e.steps.find(oe=>oe.status==="failed");if(I&&$!==I.id&&b.push({id:"jump-error",title:"Investigate first failure",body:`${I.name} failed and should be inspected before optimization work.`,actionLabel:"Open failed step",tone:"warning",action:Mr}),k&&$!==k.id&&b.push({id:"jump-bottleneck",title:"Tackle latency bottleneck",body:`${k.name} is the slowest scene in this run and the best optimization target.`,actionLabel:"Open bottleneck",tone:"priority",action:qt}),(L=C==null?void 0:C.hypotheses)!=null&&L[0]){const oe=C.hypotheses[0];b.push({id:"investigate-hypothesis",title:oe.title,body:oe.summary,actionLabel:"Inspect evidence",tone:"info",action:()=>{const Ve=oe.evidenceStepIds[0];Ve&&(fe(Ve),l!=="cinema"&&u("cinema"))}})}if(l!=="matrix"&&b.push({id:"matrix-experiment",title:"Run scenario matrix",body:"Compare prompt and strategy alternatives from one anchor step to rank causal impact.",actionLabel:"Open matrix",tone:"info",action:()=>{var oe;ru($??((oe=e.steps[0])==null?void 0:oe.id)??""),u("matrix")}}),!z&&($||(Q=e.steps[0])!=null&&Q.id)){const oe=$??((ee=e.steps[0])==null?void 0:ee.id)??null;oe&&b.push({id:"run-replay",title:"Create director replay",body:"Branch a replay trace and validate whether your change improves the run.",actionLabel:"Replay from step",tone:"info",action:()=>{wn(oe)}})}if((de=Lt==null?void 0:Lt.causalRanking)!=null&&de.length){const oe=Lt.causalRanking[0];b.push({id:"causal-factor",title:`Top causal factor: ${oe.factor}`,body:`Confidence ${(oe.confidence*100).toFixed(0)}% across ${oe.evidence.samples} sample(s).`,actionLabel:"View matrix",tone:"priority",action:()=>u("matrix")})}return b.slice(0,4)},[z,wn,C,qt,Mr,l,Lt,$,e,u]),XM=x.useMemo(()=>cn.map((b,k)=>{const I=b.tone==="warning"?"high":b.tone==="priority"?"medium":"low";return{id:`priority-${b.id}`,title:b.title,detail:b.body,severity:I,actionLabel:b.actionLabel,onAction:b.action,done:k===0?b.id==="jump-error"&&!!$||b.id==="jump-bottleneck"&&!!$:!1}}),[cn,$]),Pr=x.useMemo(()=>{var ee,de;if(!e)return"No trace loaded.";const b=[...e.steps].sort((oe,Ve)=>(Ve.durationMs??0)-(oe.durationMs??0))[0],k=e.steps.filter(oe=>oe.status==="failed").length,I=(ee=C==null?void 0:C.hypotheses)==null?void 0:ee[0],L=(de=Lt==null?void 0:Lt.causalRanking)==null?void 0:de[0];return[`Run ${e.id} completed with ${e.steps.length} steps across ${e.metadata.wallTimeMs}ms.`,b?`Primary latency driver: ${b.name} (${b.durationMs??0}ms).`:null,k>0?`Observed ${k} failed step(s), indicating reliability risk.`:"No failed steps observed.",I?`Top investigation hypothesis: ${I.title} (${I.severity}).`:null,L?`Highest ranked causal factor from matrix: ${L.factor} (${(L.confidence*100).toFixed(0)}% confidence).`:null,"Recommended plan: inspect bottleneck evidence, validate with replay matrix, and lock in mitigations."].filter(Boolean).join(" ")},[C,Lt==null?void 0:Lt.causalRanking,e]),ZM=x.useCallback(b=>{var I,L;const k=b.toLowerCase();if(!e)return"No trace is loaded yet.";if(k.includes("bottleneck")||k.includes("slow")){const Q=[...e.steps].sort((ee,de)=>(de.durationMs??0)-(ee.durationMs??0))[0];return Q?`The primary bottleneck is ${Q.name} at ${Q.durationMs??0}ms. Prioritize this step for optimization and replay validation.`:"No bottleneck could be determined from current trace data."}if(k.includes("risk")||k.includes("failure")||k.includes("error")){const Q=e.steps.filter(ee=>ee.status==="failed");return Q.length?`Risk is concentrated in ${Q.length} failed step(s), starting at ${((I=Q[0])==null?void 0:I.name)??"unknown"}.`:"Failure risk appears low for this run; no failed steps were observed."}return k.includes("cost")?`Recorded run cost is ${(e.metadata.totalCostUsd??0).toFixed(4)} USD. Use matrix scenarios to evaluate cheaper prompt/strategy options.`:k.includes("next")||k.includes("action")?cn.length?`Next action: ${((L=cn[0])==null?void 0:L.title)??"Open matrix"}.`:"Next action: open Cinema mode, inspect bottleneck, then run the matrix.":Pr},[Pr,cn,e]),eP=x.useCallback(()=>{if(!e)return;const b=`# Director Narrative

${Pr}

## Recommended Actions
${cn.map(k=>`- ${k.title}: ${k.body}`).join(`
`)}`;uE(`agent-director-narrative-${e.id}.md`,b,"text/markdown")},[Pr,cn,e]),Vs=x.useCallback(async()=>{if(!e)return;const b=cn[0],k=e.steps.filter(Q=>Q.status==="failed").length,L=[`Session handoff (${new Date().toISOString()})`,`Trace: ${e.id}`,`Mode: ${l}`,`Selected step: ${$??"none"}`,`Run health: ${mu}/100`,`Failures: ${k}`,`Wall time: ${e.metadata.wallTimeMs}ms`,`Top recommendation: ${b?`${b.title} -> ${b.actionLabel}`:"None"}`,`Narrative: ${Pr}`].join(`
`);try{await navigator.clipboard.writeText(L),ou("Handoff digest copied")}catch{window.prompt("Copy handoff digest",L),ou("Handoff digest ready")}window.setTimeout(()=>ou(null),2200)},[Pr,cn,l,mu,$,e]);x.useEffect(()=>{var I;if(!e)return;Jq(),U(0),J(!1);const b=Math.min(Math.max((e.metadata.wallTimeMs||1)*.2,5e3),6e4);Un(b),e.steps.length>500&&Dt(!0),z||qe(!1),l==="compare"&&!z&&u("cinema");const k=$&&e.steps.some(L=>L.id===$)?$:((I=e.steps[0])==null?void 0:I.id)??"";ru(L=>L&&e.steps.some(Q=>Q.id===L)?L:k)},[e,z,l,$,u,Dt,qe]),x.useEffect(()=>(document.body.classList.toggle("explain-mode",Ke),()=>{document.body.classList.remove("explain-mode")}),[Ke]),x.useEffect(()=>(document.body.classList.toggle("story-mode",!!(ye!=null&&ye.active)),()=>{document.body.classList.remove("story-mode")}),[ye==null?void 0:ye.active]),x.useEffect(()=>{if(!(ye!=null&&ye.active))return;const b=Ls[ye.step];if(!b){Yn();return}Promise.resolve(b.action());const k=window.setTimeout(()=>{Os(I=>I&&I.active?{...I,step:I.step+1}:I)},b.duration);return()=>window.clearTimeout(k)},[Ls,Yn,ye]),x.useEffect(()=>{ye!=null&&ye.active&&(!e||!eu||e.id!==eu&&Yn())},[ye==null?void 0:ye.active,e,eu,Yn]),x.useEffect(()=>{se>0&&_e(b=>b.playback?b:{...b,playback:!0})},[se,_e]),x.useEffect(()=>{l==="flow"&&_e(b=>b.flow?b:{...b,flow:!0}),l==="matrix"&&_e(b=>b.matrix?b:{...b,matrix:!0})},[l,_e]),x.useEffect(()=>{$&&_e(b=>b.inspect?b:{...b,inspect:!0})},[$,_e]),x.useEffect(()=>{au>1&&_e(b=>b.collaborate?b:{...b,collaborate:!0})},[au,_e]),x.useEffect(()=>{if(!B||A||hu.current)return;const b=Fs[0];if(!b||b.traceId!==(e==null?void 0:e.id))return;const k=Math.abs(b.playheadMs-se),I=b.mode!==l,L=(b.selectedStepId??null)!==($??null);k<600&&!I&&!L||(hu.current=!0,U(b.playheadMs),(b.mode==="cinema"||b.mode==="flow"||b.mode==="compare"||b.mode==="matrix"||b.mode==="gameplay")&&u(b.mode),fe(b.selectedStepId??null),window.setTimeout(()=>{hu.current=!1},180))},[A,l,se,Fs,$,u,B,e==null?void 0:e.id]),x.useEffect(()=>{if(!e)return;const k=Date.parse(e.startedAt)+se;let I=0,L=Number.POSITIVE_INFINITY;e.steps.forEach((ee,de)=>{const oe=Date.parse(ee.startedAt),Ve=Date.parse(ee.endedAt??ee.startedAt);if(k>=oe&&k<=Ve){I=de,L=0;return}const _n=Math.min(Math.abs(k-oe),Math.abs(k-Ve));_n<L&&(L=_n,I=de)}),[I,I-1,I+1].filter(ee=>ee>=0&&ee<e.steps.length).forEach(ee=>{const de=e.steps[ee];de&&Yq(e.id,de.id,ie)})},[e,se,ie]),x.useEffect(()=>{if(!e||!A||l!=="cinema"&&l!=="compare")return;const b=(z==null?void 0:z.metadata.wallTimeMs)??0,k=l==="compare"?Math.max(e.metadata.wallTimeMs||1,b||1):e.metadata.wallTimeMs||1;let I=0,L=performance.now();const Q=ee=>{const de=(ee-L)*me;L=ee,U(oe=>{const Ve=oe+de;return Ve>=k?(J(!1),k):Ve}),I=requestAnimationFrame(Q)};return I=requestAnimationFrame(Q),()=>cancelAnimationFrame(I)},[e,z,A,me,l]),x.useEffect(()=>{const b=k=>{var ee;const I=k.target,L=(ee=I==null?void 0:I.tagName)==null?void 0:ee.toLowerCase();if(!(L==="input"||L==="textarea"||L==="select"||I!=null&&I.isContentEditable)){if((k.metaKey||k.ctrlKey)&&k.key.toLowerCase()==="k"){k.preventDefault(),Le(de=>!de);return}if(k.key==="?"||k.key==="/"&&k.shiftKey){k.preventDefault(),le(!0);return}if(k.key.toLowerCase()==="s"){k.preventDefault(),pi();return}if(k.key.toLowerCase()==="e"){k.preventDefault(),xe(de=>!de);return}if(k.key.toLowerCase()==="t"){k.preventDefault(),Ze(!0);return}if(k.key==="Escape"){if(oi){Ze(!1),_t(!0);return}le(!1),Le(!1),fe(null);return}if(k.key===" "){k.preventDefault(),(l==="cinema"||l==="compare")&&J(de=>!de);return}if(k.key.toLowerCase()==="f"){k.preventDefault(),l==="flow"?u("cinema"):l==="cinema"&&ke("flow");return}if(k.key.toLowerCase()==="c"){k.preventDefault(),l!=="cinema"&&u("cinema");return}if(k.key.toLowerCase()==="g"){k.preventDefault(),ke("gameplay");return}if(k.key.toLowerCase()==="i"){k.preventDefault(),$?fe(null):e!=null&&e.steps.length&&fe(e.steps[0].id);return}if(k.key==="ArrowLeft"||k.key==="ArrowRight"){if(k.preventDefault(),!e)return;const de=e.metadata.wallTimeMs||1;if(k.shiftKey){U(k.key==="ArrowLeft"?0:de),J(!1),u("cinema");return}const oe=k.key==="ArrowRight"?1:-1,Ve=vz(Ty,se,oe);Ve!=null&&(U(Ve),J(!1),u("cinema"))}}};return window.addEventListener("keydown",b),()=>window.removeEventListener("keydown",b)},[l,$,e,se,Ty,ke,u,xe,Le,Ze,_t,oi,pi]);const Ay=x.useMemo(()=>{if(!e||!ft||c)return null;const b=e.metadata.wallTimeMs||1,k=Math.min(Math.max(xn,5e3),b);let I=Math.max(0,se-k/2);const L=Math.min(b,I+k);return L-I<k&&(I=Math.max(0,L-k)),{startMs:I,endMs:L}},[e,ft,se,c,xn]),Sn=!!(ye!=null&&ye.active),Iy=(ye==null?void 0:ye.step)??0,tP=((Oy=Ls[Iy])==null?void 0:Oy.label)??"Wrapping up",nP=Ls.length,rP=c!==h,iP=`${Math.min(Wn.length,da)}/${Wn.length}`,aP=x.useMemo(()=>[{id:"macro-rapid-triage",label:"Run rapid triage launch path",description:"Jump to the highest-risk step and start mitigation.",group:"Macros",onTrigger:()=>{ha("rapid_triage")}},{id:"macro-deep-diagnosis",label:"Run deep diagnosis launch path",description:"Open flow analysis and guided tour.",group:"Macros",onTrigger:()=>{ha("deep_diagnosis")}},{id:"macro-team-sync",label:"Run team sync launch path",description:"Enable sync mode and generate shareable context.",group:"Macros",onTrigger:()=>{ha("team_sync")}},{id:"story-toggle",label:Sn?"Stop story mode":"Start story mode",description:"Auto-runs a cinematic walkthrough.",group:"Story",keys:"S",onTrigger:pi},{id:"tour-start",label:"Start guided tour",description:"Walk the interface step by step.",group:"Onboarding",keys:"T",onTrigger:()=>Ze(!0)},{id:"explain-toggle",label:Ke?"Disable explain mode":"Enable explain mode",description:"Toggle contextual overlays.",group:"Onboarding",keys:"E",onTrigger:()=>xe(b=>!b)},{id:"shortcuts",label:"Show shortcuts",description:"Open the keyboard map.",group:"Onboarding",keys:"?",onTrigger:()=>le(!0)},{id:"playback-toggle",label:A?"Pause playback":"Play playback",description:"Start or stop the run.",group:"Playback",keys:"Space",onTrigger:vu},{id:"mode-cinema",label:"Switch to Cinema",description:"Timeline playback view.",group:"Modes",keys:"C",onTrigger:()=>ke("cinema")},{id:"mode-flow",label:"Switch to Flow",description:"Graph dependency view.",group:"Modes",keys:"F",onTrigger:()=>ke("flow")},{id:"mode-compare",label:"Open Compare",description:"Side-by-side diff view.",group:"Modes",onTrigger:()=>ke("compare"),disabled:!z},{id:"mode-matrix",label:"Open Matrix",description:"Counterfactual replay matrix view.",group:"Modes",onTrigger:()=>ke("matrix")},{id:"mode-gameplay",label:"Open Gameplay",description:"World-class gameplay mechanics control center.",group:"Modes",keys:"G",onTrigger:()=>ke("gameplay")},{id:"jump-bottleneck",label:"Jump to bottleneck",description:"Select the slowest step.",group:"Navigation",onTrigger:qt},{id:"jump-error",label:"Jump to error",description:"Select the first failed step.",group:"Navigation",onTrigger:Mr},{id:"replay-step",label:"Replay from selected step",description:"Branch a Directors Cut.",group:"Tools",onTrigger:()=>$&&wn($),disabled:!$},{id:"overlay-toggle",label:ue?"Hide overlay":"Show overlay",description:"Ghost diff in Cinema/Flow.",group:"Tools",onTrigger:()=>qe(b=>!b),disabled:!z},{id:"safe-export",label:ie?"Disable safe export":"Enable safe export",description:"Redact sensitive payloads.",group:"Safety",onTrigger:()=>D(b=>!b)},{id:"reload",label:"Reload traces",description:"Refresh trace data.",group:"Meta",onTrigger:i},{id:"handoff-digest",label:"Copy handoff digest",description:"Capture mode, risk summary, and next actions for teammates.",group:"Meta",keys:"H",onTrigger:()=>{Vs()}}],[Vs,Sn,pi,Ke,A,vu,ke,z,qt,Mr,$,wn,ue,ie,i,xe,qe,D,le,Ze,ha]);return n?d.jsx("div",{className:"loading",children:"Loading trace..."}):!r&&!e&&a.length===0?d.jsxs("div",{className:"error",children:[d.jsx("h2",{children:"No traces yet"}),d.jsx("p",{children:"Ingest your first trace, then reload to begin the Observe  Inspect  Direct workflow."}),d.jsxs("div",{className:"error-actions",children:[d.jsx("button",{className:"primary-button",type:"button",onClick:i,children:"Retry"}),d.jsx("a",{className:"ghost-button",href:"/help.html",target:"_blank",rel:"noreferrer",children:"Open help"})]})]}):r||!e?d.jsxs("div",{className:"error",children:[d.jsx("p",{children:r??"Failed to load trace."}),d.jsxs("div",{className:"error-actions",children:[d.jsx("button",{className:"primary-button",type:"button",onClick:i,children:"Retry"}),d.jsx("a",{className:"ghost-button",href:"/help.html",target:"_blank",rel:"noreferrer",children:"Open help"})]})]}):d.jsxs("div",{className:`app theme-${ln} ${Ke?"explain-mode":""} ${l==="compare"?"mode-compare":""} ${l==="matrix"?"mode-matrix":""} ${l==="gameplay"?"mode-gameplay":""}`,children:[d.jsx(OA,{trace:e,traces:a,selectedTraceId:s,onSelectTrace:o,onReload:i,onStartTour:()=>Ze(!0),onToggleStory:pi,onOpenPalette:()=>Le(!0),onToggleExplain:()=>xe(b=>!b),onShareSession:gu,onCreateHandoffDigest:()=>void Vs(),onThemeChange:kt,onMotionChange:W,themeMode:ln,motionMode:M,activeSessions:au,shareStatus:mM,handoffStatus:gM,explainMode:Ke,storyActive:Sn,mode:l,missionCompletion:My,runHealthScore:mu,modeHotkeys:CM}),!un&&!si?d.jsx(TI,{onComplete:()=>Ds(!0),onStartTour:()=>{Ds(!0),Ze(!0)},onStartStory:hi,persona:ve,onPersonaChange:ai,launchPath:Er,onLaunchPathChange:Hn,onStartLaunchPath:b=>void ha(b)}):null,un&&!Ot?d.jsx(NI,{explainMode:Ke,storyActive:Sn,onStartTour:()=>{on(!0),Ze(!0)},onStartStory:()=>{on(!0),hi()},onToggleExplain:()=>xe(b=>!b),onDismiss:()=>on(!0)}):null,d.jsx(kI,{steps:QM,open:oi,onClose:()=>{Ze(!1),_t(!0)},onComplete:()=>{Ze(!1),_t(!0)}}),d.jsx(CI,{enabled:Ke}),d.jsx(PI,{active:Sn,label:tP,step:Iy,total:nP,onStop:Yn,onRestart:hi}),d.jsx(LA,{insights:t,investigation:C,onSelectStep:b=>{fe(b),l!=="cinema"&&u("cinema")},onJumpToError:Mr,onJumpToBottleneck:qt}),d.jsx(vI,{trace:e,mode:l==="matrix"||l==="gameplay"?"cinema":l,playheadMs:se,selectedStepId:$,compareTrace:z,collapsed:Yt,onToggleCollapsed:()=>jr(b=>!b),onModeChange:ke,onSelectStep:b=>{fe(b),l!=="cinema"&&u("cinema")},onJumpToBottleneck:qt,onReplay:wn,onStartTour:()=>Ze(!0),priorityQueue:XM}),d.jsxs("div",{className:"toolbar","data-help":!0,"data-help-indicator":!0,"data-tour":"toolbar","data-help-title":"Search + filters","data-help-body":"Filter by step type, enable Safe export, and jump between Cinema, Flow, Compare, and Matrix.","data-help-placement":"bottom",children:[d.jsx(FA,{query:c,typeFilter:m,onQueryChange:f,onTypeFilterChange:g}),d.jsxs("div",{className:"toolbar-actions",children:[d.jsx("input",{className:"search-input",value:p,onChange:b=>S(b.target.value),placeholder:"TraceQL (example: type=tool_call and duration_ms>800)","aria-label":"TraceQL query"}),d.jsx("button",{className:"ghost-button",type:"button",onClick:()=>void jM(),children:"Run TraceQL"}),v?d.jsxs("span",{className:"status-badge",children:[v.matchCount," match(es)"]}):null,rP?d.jsx("span",{className:"status-badge",children:"Filtering..."}):null,d.jsxs("span",{className:"status-badge",children:["Hydration ",iP]}),d.jsxs("span",{className:"status-badge",children:["Filter ",yM,"ms"]}),v?d.jsx("button",{className:"ghost-button",type:"button",onClick:()=>{S(""),y(null),_(null)},children:"Clear TraceQL"}):null,w?d.jsx("span",{className:"status-badge warn",children:w}):null,d.jsxs("select",{className:"search-select",value:N,onChange:b=>P(b.target.value),"aria-label":"Extension selector",children:[d.jsx("option",{value:"",children:"Select extension"}),T.map(b=>d.jsx("option",{value:b.id,children:b.name},b.id))]}),d.jsx("button",{className:"ghost-button",type:"button",onClick:()=>void EM(),disabled:!e||!N||F,children:F?"Running extension...":"Run extension"}),d.jsx("button",{className:`ghost-button ${l==="cinema"?"active":""}`,type:"button","aria-pressed":l==="cinema",title:"Timeline playback",onClick:()=>ke("cinema"),"data-help":!0,"data-help-title":"Cinema mode","data-help-body":"Timeline view with step cards ordered by time.","data-help-placement":"bottom",children:"Cinema"}),d.jsx("button",{className:`ghost-button ${l==="flow"?"active":""}`,type:"button","aria-pressed":l==="flow",title:"Graph view",onClick:()=>ke("flow"),"data-help":!0,"data-help-title":"Flow mode","data-help-body":"Dependency graph of steps and tool calls.","data-help-placement":"bottom",children:"Flow"}),d.jsx("button",{className:`ghost-button ${l==="compare"?"active":""}`,type:"button","aria-pressed":l==="compare",title:z?"Side-by-side compare":"Run a replay to enable compare",onClick:()=>ke("compare"),disabled:!z,"data-tour":"compare","data-help":!0,"data-help-title":"Compare mode","data-help-body":"Side-by-side view after a replay. Enabled once you replay.","data-help-placement":"bottom",children:"Compare"}),d.jsx("button",{className:`ghost-button ${l==="matrix"?"active":""}`,type:"button","aria-pressed":l==="matrix",title:"Counterfactual replay matrix",onClick:()=>ke("matrix"),"data-help":!0,"data-help-title":"Matrix mode","data-help-body":"Run multiple replay scenarios and rank likely causal factors.","data-help-placement":"bottom",children:"Matrix"}),d.jsx("button",{className:`ghost-button ${l==="gameplay"?"active":""}`,type:"button","aria-pressed":l==="gameplay",title:"Gameplay mechanics command center",onClick:()=>ke("gameplay"),"data-help":!0,"data-help-title":"Gameplay mode","data-help-body":"Command raids, campaign, pvp, time forks, boss runs, economy, and liveops.","data-help-placement":"bottom",children:"Gameplay"}),d.jsxs("label",{className:"toggle",title:"Redact payloads and disable raw views for safe sharing","data-help":!0,"data-help-title":"Safe export","data-help-body":"Redacts secrets and disables raw payload views for safe sharing.","data-help-placement":"bottom",children:[d.jsx("input",{type:"checkbox",checked:ie,onChange:()=>D(b=>!b)}),"Safe export"]}),e.steps.length>200||ft?d.jsxs("label",{className:"toggle",title:"Window steps around the playhead for large traces","data-help":!0,"data-help-title":"Windowed mode","data-help-body":"Limits rendering to a playhead window for large traces.","data-help-placement":"bottom",children:[d.jsx("input",{type:"checkbox",checked:ft,onChange:()=>Dt(b=>!b)}),"Windowed"]}):null,z?d.jsxs("label",{className:"toggle",title:"Show ghost overlay of replay in Cinema/Flow","data-help":!0,"data-help-title":"Overlay replay","data-help-body":"Layer the replay over the base run to spot differences.","data-help-placement":"bottom",children:[d.jsx("input",{type:"checkbox",checked:ue,onChange:()=>qe(b=>!b)}),"Overlay"]}):null,d.jsxs("label",{className:"toggle",title:"Follow active collaborator cursor and mode updates",children:[d.jsx("input",{type:"checkbox",checked:B,onChange:()=>V(b=>!b)}),"Sync playback"]})]})]}),R?d.jsxs("div",{className:"inspector-section",children:[d.jsx("div",{className:"inspector-section-title",children:"Extension output"}),d.jsx("pre",{className:"inspector-json",children:JSON.stringify(R,null,2)})]}):null,l==="cinema"?d.jsxs("div",{className:"playback-stack","data-tour":"playback",children:[d.jsx("div",{"data-help":!0,"data-help-title":"Playback controls","data-help-body":"Play, pause, scrub, and adjust speed to feel the rhythm of the run.","data-help-placement":"bottom",children:d.jsx(Y0,{playheadMs:se,wallTimeMs:e.metadata.wallTimeMs||1,isPlaying:A,speed:me,onToggle:()=>J(b=>!b),onScrub:b=>U(b),onSpeedChange:Xe})}),d.jsx("div",{"data-help":!0,"data-help-title":"Density map","data-help-body":"Zoom into hotspots and keep long traces readable with windowing.","data-help-placement":"bottom",children:d.jsx(lI,{traceStart:e.startedAt,traceEnd:e.endedAt,steps:e.steps,playheadMs:se,windowRange:Ay,windowed:ft,spanMs:xn,onSpanChange:Un,onToggleWindowed:Dt,onScrub:b=>U(b),persistenceKey:e.id,laneStrategy:H,visibleLaneGroups:SM,remotePlayheads:_M})})]}):null,l==="compare"&&z?d.jsx("div",{"data-help":!0,"data-help-title":"Compare playback","data-help-body":"Sync both runs to evaluate improvements at identical timestamps.","data-help-placement":"bottom",children:d.jsx(Y0,{playheadMs:se,wallTimeMs:Math.max(e.metadata.wallTimeMs||1,z.metadata.wallTimeMs||1),isPlaying:A,speed:me,onToggle:()=>J(b=>!b),onScrub:b=>U(b),onSpeedChange:Xe})}):null,d.jsxs("main",{className:`stage ${l==="compare"?"stage-compare":""} motion-fade-in`,role:"main",children:[d.jsx("div",{className:"main motion-slide-up",ref:fu,"data-help":!0,"data-help-indicator":!0,"data-tour":"stage","data-help-title":"Trace stage","data-help-body":"Every step becomes a scene. Hover or click to open deep inspection.","data-help-placement":"top",children:d.jsx(Pq,{morph:lM,onComplete:JM,children:d.jsxs(x.Suspense,{fallback:d.jsx("div",{className:"loading",children:"Loading view..."}),children:[l==="cinema"?d.jsx(rI,{trace:e,steps:Ey,selectedStepId:$,onSelectStep:b=>fe(b),playheadMs:se,windowRange:Ay,timing:t==null?void 0:t.timing,ghostTrace:ue?z:null,diff:wM,laneStrategy:H,laneGroupsOrder:fi.order,hiddenLaneGroups:fi.hidden,onLaneStrategyChange:TM,onToggleLaneGroupVisibility:NM,onMoveLaneGroup:qM}):null,l==="flow"?d.jsx(kz,{steps:Ey,selectedStepId:$,onSelectStep:b=>fe(b),baseTrace:e,compareTrace:z,compareSteps:xM,overlayEnabled:ue,onToggleOverlay:()=>qe(b=>!b)}):null,l==="compare"&&z?d.jsx(Cz,{baseTrace:e,compareTrace:z,playheadMs:se,safeExport:ie,onExit:()=>{u("cinema"),te(null)}}):null,l==="matrix"?d.jsx(BI,{steps:e.steps,anchorStepId:nu,onAnchorStepChange:ru,scenarios:uM,onScenarioChange:$M,onDuplicateScenario:GM,onMoveScenario:HM,onAddScenario:zM,onRemoveScenario:UM,onRun:KM,onCancel:WM,onReplaceScenarios:BM,loading:cM,error:dM,job:la,matrix:Lt,safeExport:ie,onOpenCompare:YM}):null,l==="gameplay"?d.jsx(rD,{state:fM,playheadMs:se,onUpdate:b=>ca(k=>b(k)),session:Ue,playerId:Tr,sessionError:hM,onCreateSession:MM,onJoinSession:PM,onLeaveSession:RM,onDispatchAction:AM,guild:pM,onCreateGuild:IM,onJoinGuild:DM,onScheduleGuildEvent:OM,onCompleteGuildEvent:LM}):null]})})}),d.jsx(x.Suspense,{fallback:d.jsx("div",{className:"loading",children:"Loading panel..."}),children:l==="compare"||l==="matrix"||l==="gameplay"?null:Ny?d.jsx(jz,{traceId:e.id,step:Ny,safeExport:ie,onClose:()=>fe(null),onReplay:wn}):d.jsx(_I,{trace:e,mode:l,selectedStepId:$,onModeChange:ke,onSelectStep:b=>fe(b),onJumpToBottleneck:qt,onReplay:wn,recommendations:cn,persona:ve,annotations:kM,activityFeed:vM,onAddAnnotation:VM,missionProgress:pe,missionCompletion:My,onResetMissions:FM,narrative:Pr,onAskDirector:ZM,onExportNarrative:eP})})]}),d.jsxs("div",{className:"mobile-quick-rail","aria-label":"Mobile quick actions",children:[d.jsx("button",{className:`ghost-button ${Sn?"active":""}`,type:"button",onClick:pi,"aria-label":Sn?"Stop story mode":"Start story mode",children:Sn?"Stop Story":"Story"}),d.jsx("button",{className:"ghost-button",type:"button",onClick:()=>Ze(!0),"aria-label":"Start guided tour",children:"Guide"}),d.jsx("button",{className:"ghost-button",type:"button",onClick:()=>Le(!0),"aria-label":"Open command palette",children:"Command"}),d.jsx("button",{className:"ghost-button",type:"button",onClick:()=>void Vs(),"aria-label":"Copy handoff digest",children:"Handoff"})]}),d.jsx(MI,{mode:l==="matrix"||l==="gameplay"?"cinema":l,isPlaying:A,storyActive:Sn,explainMode:Ke,hidden:l==="compare",open:oa,onToggleOpen:()=>Gn(b=>!b),onTogglePlay:vu,onStartStory:hi,onStopStory:Yn,onStartTour:()=>Ze(!0),onOpenPalette:()=>Le(!0),onShowShortcuts:()=>le(!0),onToggleExplain:()=>xe(b=>!b),onJumpToBottleneck:qt}),d.jsx(mI,{open:ne,onClose:()=>Le(!1),actions:aP}),d.jsx(cI,{open:G,onClose:()=>le(!1)})]})}sm.createRoot(document.getElementById("root")).render(d.jsx(wP.StrictMode,{children:d.jsx(Az,{})}));export{wP as R,YA as S,tI as T,pz as a,mz as b,Zm as c,UT as d,Oz as e,Dz as f,Kk as g,Wq as h,d as j,x as r,$A as s};
