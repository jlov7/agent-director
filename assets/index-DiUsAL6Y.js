import{r as c,j as e,k as je,l as be,m as ye,n as f,o as ve,p as Ne,q as J,t as ke,u as fe,v as Ce,w as A,x as _e,y as Se,z as we,A as T,B as Me,C as E,D as C,E as ee,F as se,G as Fe,H as Re,I as Pe,J as Oe,K as De,L as Ie}from"./index-KQkxmhuy.js";function qe({state:l,playheadMs:B,onUpdate:z,session:r,playerId:p,sessionError:H,onCreateSession:_,onJoinSession:u,onLeaveSession:S,onDispatchAction:y,guild:m,onCreateGuild:w,onJoinGuild:M,onScheduleGuildEvent:F,onCompleteGuildEvent:R,observability:i,analytics:t}){const[g,U]=c.useState(""),[P,le]=c.useState("strategist"),[O,ae]=c.useState("alt path"),[W,ie]=c.useState("Night Ops"),[$,ne]=c.useState(""),[X,te]=c.useState("operator"),[v,ce]=c.useState("guild-night-ops"),[Z,re]=c.useState("Night Ops Guild"),[G,oe]=c.useState("Weekly Raid Drill"),[K,de]=c.useState("2026-02-16T20:00:00Z"),[d,pe]=c.useState(""),[D,ue]=c.useState("Abusive behavior"),[V,me]=c.useState("1"),[Q,he]=c.useState("1"),[I,xe]=c.useState("Weekly balance update"),Y=!!(r!=null&&r.id&&y),a=(s,n,o)=>{if(Y){y==null||y(s,n);return}z(o)},h=c.useMemo(()=>l.narrative.nodes.find(s=>s.id===l.narrative.currentNodeId),[l.narrative.currentNodeId,l.narrative.nodes]),L=c.useMemo(()=>{var o;const s=[l.raid.completed,l.campaign.depth>=3,l.narrative.history.length>=2,l.skills.loadout.equipped.length>=2,l.pvp.round>=3||l.pvp.winner!=null,l.time.forks.length>=2||((o=l.time.forks[0])==null?void 0:o.history.length)>1,l.boss.hp<l.boss.maxHp,l.director.lastOutcome!=="mixed",l.economy.crafted.length>=1,l.guild.operationsScore>0,l.cinematic.queue.length>=1,l.liveops.week>=2],n=s.filter(Boolean).length;return{done:n,total:s.length,pct:Math.round(n/s.length*100)}},[l]),j=l.safety??{mutedPlayerIds:[],blockedPlayerIds:[],reports:[]},N=l.sandbox??{enabled:!1},k=l.progression??{xp:0,level:1,nextLevelXp:200,milestones:[]},q=l.rewards??{streakDays:0,sessionClaimed:!1,masteryClaims:[]},b=c.useMemo(()=>l.outcome.status==="win"||l.outcome.status==="loss"?4:l.raid.objectives.some(n=>n.progress>0)||l.pvp.round>0||l.time.forks.length>1?l.campaign.depth>1||l.narrative.history.length>0?3:2:1,[l]);return e.jsxs("section",{className:"gameplay-mode",children:[e.jsxs("header",{className:"gameplay-header",children:[e.jsxs("div",{children:[e.jsx("h2",{children:"Gameplay Command Center"}),e.jsx("p",{children:"World-class mechanics stack: raids, campaign, narrative, PvP, time control, boss runs, and liveops."}),e.jsx("p",{children:"v1 core loop target session length: 18-22 minutes."}),e.jsxs("div",{className:"gameplay-inline",children:[e.jsx("input",{className:"search-input",value:W,onChange:s=>ie(s.target.value),placeholder:"Session name","aria-label":"Session name"}),e.jsx("button",{className:"ghost-button",type:"button",onClick:()=>_==null?void 0:_(W),children:"Create multiplayer session"}),e.jsx("input",{className:"search-input",value:$,onChange:s=>ne(s.target.value),placeholder:"Session id","aria-label":"Join session id"}),e.jsxs("select",{value:X,onChange:s=>te(s.target.value),children:[e.jsx("option",{value:"strategist",children:"Strategist"}),e.jsx("option",{value:"operator",children:"Operator"}),e.jsx("option",{value:"analyst",children:"Analyst"}),e.jsx("option",{value:"saboteur",children:"Saboteur"})]}),e.jsx("button",{className:"ghost-button",type:"button",onClick:()=>u==null?void 0:u($,p??"director",X),children:"Join session"}),r!=null&&r.id?e.jsx("button",{className:"ghost-button",type:"button",onClick:()=>S==null?void 0:S(),children:"Leave session"}):null]}),e.jsxs("p",{children:["Session: ",(r==null?void 0:r.id)??"local-only"," ",p?`• Player ${p}`:""," ",r?`• Version ${r.version}`:""]}),H?e.jsx("p",{children:H}):null]}),e.jsxs("div",{className:"gameplay-completion","aria-label":"Gameplay completion",children:[e.jsxs("strong",{children:[L.done,"/",L.total]}),e.jsxs("span",{children:[L.pct,"% complete"]})]})]}),e.jsxs("div",{className:"gameplay-grid",children:[e.jsxs("article",{className:"gameplay-card",children:[e.jsx("h3",{children:"0) Core Loop + Outcomes"}),e.jsxs("p",{children:["Phase ",b,"/4 • Outcome ",l.outcome.status.replace("_"," ")," • Sandbox"," ",N.enabled?"ON":"OFF"]}),e.jsx("p",{children:l.outcome.reason}),e.jsx("div",{className:"gameplay-inline",children:e.jsx("button",{className:"ghost-button",type:"button",onClick:()=>a("session.toggle_sandbox",{enabled:!N.enabled},s=>ve(s,!N.enabled)),children:N.enabled?"Disable sandbox":"Enable sandbox"})}),e.jsxs("div",{className:"gameplay-list",children:[e.jsx("div",{className:"gameplay-node",children:e.jsxs("span",{children:[b>=1?"x":"o"," Brief: inspect run and set objective"]})}),e.jsx("div",{className:"gameplay-node",children:e.jsxs("span",{children:[b>=2?"x":"o"," Execute: complete raid and mission actions"]})}),e.jsx("div",{className:"gameplay-node",children:e.jsxs("span",{children:[b>=3?"x":"o"," Adapt: choose narrative and tune loadout/liveops"]})}),e.jsx("div",{className:"gameplay-node",children:e.jsxs("span",{children:[b>=4?"x":"o"," Resolve: finish with win/loss review"]})})]}),e.jsxs("div",{className:"gameplay-list",children:[e.jsx("p",{children:"Telemetry funnels:"}),e.jsx("div",{className:"gameplay-node",children:e.jsx("span",{children:"funnel.session_start"})}),e.jsx("div",{className:"gameplay-node",children:e.jsx("span",{children:"funnel.first_objective_progress"})}),e.jsx("div",{className:"gameplay-node",children:e.jsx("span",{children:"funnel.first_mission_outcome"})}),e.jsx("div",{className:"gameplay-node",children:e.jsx("span",{children:"funnel.run_outcome"})})]})]}),e.jsxs("article",{className:"gameplay-card",children:[e.jsx("h3",{children:"1) Co-op Incident Raids"}),e.jsxs("p",{children:["Party: ",l.raid.party.length," members"]}),e.jsxs("div",{className:"gameplay-inline",children:[e.jsx("input",{className:"search-input",value:g,onChange:s=>U(s.target.value),placeholder:"Member name","aria-label":"Raid member name"}),e.jsxs("select",{value:P,onChange:s=>le(s.target.value),children:[e.jsx("option",{value:"strategist",children:"Strategist"}),e.jsx("option",{value:"operator",children:"Operator"}),e.jsx("option",{value:"analyst",children:"Analyst"}),e.jsx("option",{value:"saboteur",children:"Saboteur"})]}),e.jsx("button",{className:"ghost-button",type:"button",onClick:()=>{g.trim()&&(Y?u==null||u((r==null?void 0:r.id)??"",g.trim(),P):z(s=>je(s,g.trim(),P)),U(""))},children:"Add member"})]}),e.jsx("div",{className:"gameplay-objectives",children:l.raid.objectives.map(s=>e.jsxs("div",{className:"gameplay-objective",children:[e.jsx("span",{children:s.label}),e.jsxs("span",{children:[s.progress,"/",s.target]}),e.jsx("button",{className:"ghost-button",type:"button",onClick:()=>a("raid.objective_progress",{objective_id:s.id,delta:25},n=>Ne(n,s.id,25)),children:"+25"})]},s.id))})]}),e.jsxs("article",{className:"gameplay-card",children:[e.jsx("h3",{children:"2) Roguelike Scenario Campaign"}),e.jsxs("p",{children:["Depth ",l.campaign.depth," • Lives ",l.campaign.lives]}),e.jsxs("p",{children:[l.campaign.currentMission.title," (difficulty ",l.campaign.currentMission.difficulty,")"]}),e.jsxs("p",{children:["Mission seed ",l.campaign.currentMission.missionSeed," • Hazards ",l.campaign.currentMission.hazards.join(", ")]}),e.jsx("p",{children:l.campaign.currentMission.blueprint}),e.jsx("p",{children:"Difficulty ramp bands: D1-1, D2-3, D4-5, D6-7, D8-9, D10+."}),e.jsxs("div",{className:"gameplay-inline",children:[e.jsx("button",{className:"primary-button",type:"button",onClick:()=>a("campaign.resolve_mission",{success:!0},s=>J(s,!0)),children:"Mission success"}),e.jsx("button",{className:"ghost-button",type:"button",onClick:()=>a("campaign.resolve_mission",{success:!1},s=>J(s,!1)),children:"Mission fail"})]})]}),e.jsxs("article",{className:"gameplay-card",children:[e.jsx("h3",{children:"3) Branching Narrative Director"}),e.jsx("p",{children:h==null?void 0:h.title}),e.jsxs("p",{children:["Tension ",l.narrative.tension]}),e.jsx("div",{className:"gameplay-list",children:((h==null?void 0:h.choices)??[]).map(s=>e.jsx("button",{className:"ghost-button",type:"button",onClick:()=>a("narrative.choose",{choice_id:s.id},n=>ke(n,s.id)),children:s.label},s.id))})]}),e.jsxs("article",{className:"gameplay-card",children:[e.jsx("h3",{children:"4) Skill Tree + Loadout"}),e.jsxs("p",{children:["Level ",k.level," • XP ",k.xp,"/",k.nextLevelXp," • Milestones"," ",k.milestones.length]}),e.jsxs("p",{children:["Points ",l.skills.points," • Equipped ",l.skills.loadout.equipped.length,"/",l.skills.loadout.capacity," • Slots C/U/P ",l.skills.loadout.slotCaps.core,"/",l.skills.loadout.slotCaps.utility,"/",l.skills.loadout.slotCaps.power]}),e.jsx("div",{className:"gameplay-list",children:l.skills.nodes.map(s=>e.jsxs("div",{className:"gameplay-node",children:[e.jsxs("span",{children:[s.label," (",s.cost,") • T",s.tier," • ",s.loadoutSlot," • L",s.minLevel]}),s.requires.length>0?e.jsxs("small",{children:["Requires ",s.requires.join(", ")]}):e.jsx("small",{children:"Starter node"}),s.requiredMilestones.length>0?e.jsxs("small",{children:["Milestones: ",s.requiredMilestones.join(", ")]}):null,(()=>{const n=be(l,s.id),o=ye(l,s.id);return e.jsxs(e.Fragment,{children:[!s.unlocked&&!n.allowed?e.jsx("small",{children:n.reason}):null,s.unlocked&&!o.allowed?e.jsx("small",{children:o.reason}):null,e.jsx("button",{className:"ghost-button",type:"button","aria-label":`Unlock ${s.label}`,disabled:!s.unlocked&&!n.allowed,onClick:()=>a("skills.unlock",{player_id:p??"director",skill_id:s.id},x=>fe(x,s.id)),children:s.unlocked?"Unlocked":"Unlock"}),e.jsx("button",{className:"ghost-button",type:"button","aria-label":`Equip ${s.label}`,disabled:!o.allowed,onClick:()=>a("skills.equip",{player_id:p??"director",skill_id:s.id},x=>Ce(x,s.id)),children:"Equip"})]})})()]},s.id))})]}),e.jsxs("article",{className:"gameplay-card",children:[e.jsx("h3",{children:"5) Asymmetric PvP"}),e.jsxs("p",{children:["Round ",l.pvp.round," • Stability ",l.pvp.stability," • Sabotage ",l.pvp.sabotage]}),e.jsxs("div",{className:"gameplay-inline",children:[e.jsx("button",{className:"ghost-button",type:"button",onClick:()=>a("pvp.act",{action:"sabotage"},s=>A(s,"sabotage")),children:"Sabotage"}),e.jsx("button",{className:"ghost-button",type:"button",onClick:()=>a("pvp.act",{action:"stabilize"},s=>A(s,"stabilize")),children:"Stabilize"}),e.jsx("button",{className:"ghost-button",type:"button",onClick:()=>a("pvp.act",{action:"scan"},s=>A(s,"scan")),children:"Scan"})]})]}),e.jsxs("article",{className:"gameplay-card",children:[e.jsx("h3",{children:"6) Time Manipulation"}),e.jsxs("p",{children:["Active fork: ",l.time.activeForkId]}),e.jsxs("div",{className:"gameplay-inline",children:[e.jsx("input",{className:"search-input",value:O,onChange:s=>ae(s.target.value),"aria-label":"Fork label"}),e.jsx("button",{className:"ghost-button",type:"button",onClick:()=>a("time.create_fork",{label:O,playhead_ms:B},s=>_e(s,O,B)),children:"Create fork"}),e.jsx("button",{className:"ghost-button",type:"button",onClick:()=>a("time.rewind",{amount_ms:1e3},s=>Se(s,1e3)),children:"Rewind 1s"}),e.jsx("button",{className:"ghost-button",type:"button",onClick:()=>a("time.merge",{fork_id:l.time.activeForkId},s=>we(s,s.time.activeForkId)),children:"Merge"})]})]}),e.jsxs("article",{className:"gameplay-card",children:[e.jsx("h3",{children:"7) Boss Encounter Runs"}),e.jsxs("p",{children:[l.boss.name," • Phase ",l.boss.phase," • HP ",l.boss.hp,"/",l.boss.maxHp]}),e.jsx("p",{children:l.boss.phaseMechanic}),e.jsxs("p",{children:["Current vulnerability: ",l.boss.vulnerability]}),e.jsxs("div",{className:"gameplay-inline",children:[e.jsx("button",{className:"ghost-button",type:"button",onClick:()=>a("boss.act",{action:"strike"},s=>T(s,"strike")),children:"Strike"}),e.jsx("button",{className:"ghost-button",type:"button",onClick:()=>a("boss.act",{action:"shield"},s=>T(s,"shield")),children:"Shield"}),e.jsx("button",{className:"ghost-button",type:"button",onClick:()=>a("boss.act",{action:"exploit"},s=>T(s,"exploit")),children:"Exploit"})]})]}),e.jsxs("article",{className:"gameplay-card",children:[e.jsx("h3",{children:"8) Adaptive AI Dungeon Master"}),e.jsxs("p",{children:["Risk ",l.director.risk," • Outcome ",l.director.lastOutcome]}),e.jsx("p",{children:l.director.hint}),e.jsx("button",{className:"ghost-button",type:"button",onClick:()=>{var x;const s=l.pvp.sabotage>l.pvp.stability?2:0,n=Math.floor((((x=l.raid.objectives[0])==null?void 0:x.progress)??0)/40),o=900+l.pvp.fog*10;a("director.evaluate",{failures:s,retries:n,latency_ms:o},ge=>Me(ge,{failures:s,retries:n,latencyMs:o}))},children:"Recompute guidance"})]}),e.jsxs("article",{className:"gameplay-card",children:[e.jsx("h3",{children:"9) Mission Economy + Crafting"}),e.jsxs("p",{children:["Credits ",l.economy.credits," • Materials ",l.economy.materials]}),e.jsxs("p",{children:["Reserve target ",l.economy.reserveTarget," • Inflation index ",l.economy.inflationIndex.toFixed(2)," (",l.economy.inflationIndex>1.7?"hot":l.economy.inflationIndex>1.2?"elevated":"stable",")"]}),e.jsxs("div",{className:"gameplay-inline",children:[e.jsx("button",{className:"ghost-button",type:"button",onClick:()=>a("economy.craft",{recipe_id:"stability_patch"},s=>E(s,"stability_patch")),children:"Craft stability patch"}),e.jsx("button",{className:"ghost-button",type:"button",onClick:()=>a("economy.craft",{recipe_id:"precision_lens"},s=>E(s,"precision_lens")),children:"Craft precision lens"}),e.jsx("button",{className:"ghost-button",type:"button",onClick:()=>a("economy.craft",{recipe_id:"overclock_core"},s=>E(s,"overclock_core")),children:"Craft overclock core"})]}),e.jsxs("div",{className:"gameplay-list",children:[e.jsxs("p",{children:["Reward cadence: streak ",q.streakDays," • session ",q.sessionClaimed?"claimed":"open"," • mastery"," ",q.masteryClaims.length]}),e.jsxs("div",{className:"gameplay-inline",children:[e.jsx("button",{className:"ghost-button",type:"button",disabled:!f(l,"daily").allowed,onClick:()=>a("rewards.claim",{kind:"daily"},s=>C(s,"daily")),children:"Claim daily"}),e.jsx("button",{className:"ghost-button",type:"button",disabled:!f(l,"session").allowed,onClick:()=>a("rewards.claim",{kind:"session"},s=>C(s,"session")),children:"Claim session"}),e.jsx("button",{className:"ghost-button",type:"button",disabled:!f(l,"streak").allowed,onClick:()=>a("rewards.claim",{kind:"streak"},s=>C(s,"streak")),children:"Claim streak"}),e.jsx("button",{className:"ghost-button",type:"button",disabled:!f(l,"mastery","raid_mastery").allowed,onClick:()=>a("rewards.claim",{kind:"mastery",mastery_id:"raid_mastery"},s=>C(s,"mastery","raid_mastery")),children:"Claim raid mastery"})]})]})]}),e.jsxs("article",{className:"gameplay-card",children:[e.jsx("h3",{children:"10) Guild Operations"}),e.jsxs("p",{children:[l.guild.name," • Ops score ",l.guild.operationsScore," • Events ",l.guild.eventsCompleted]}),e.jsxs("div",{className:"gameplay-inline",children:[e.jsx("input",{className:"search-input",value:v,onChange:s=>ce(s.target.value),placeholder:"Guild id","aria-label":"Guild id"}),e.jsx("input",{className:"search-input",value:Z,onChange:s=>re(s.target.value),placeholder:"Guild name","aria-label":"Guild name"}),e.jsx("button",{className:"ghost-button",type:"button",onClick:()=>w==null?void 0:w(v,Z),children:"Create guild"}),e.jsx("button",{className:"ghost-button",type:"button",onClick:()=>M==null?void 0:M(v,g.trim()||p||"director"),children:"Join guild"})]}),e.jsxs("div",{className:"gameplay-inline",children:[e.jsx("input",{className:"search-input",value:G,onChange:s=>oe(s.target.value),placeholder:"Event title","aria-label":"Guild event title"}),e.jsx("input",{className:"search-input",value:K,onChange:s=>de(s.target.value),placeholder:"2026-02-16T20:00:00Z","aria-label":"Guild event schedule"}),e.jsx("button",{className:"ghost-button",type:"button",onClick:()=>F==null?void 0:F(v,G,K),children:"Schedule event"})]}),m?e.jsxs("div",{className:"gameplay-list",children:[e.jsxs("p",{children:[m.member_count," members • Score ",m.operations_score]}),m.scoreboard.slice(0,4).map(s=>e.jsxs("div",{className:"gameplay-node",children:[e.jsx("span",{children:s.player_id}),e.jsx("span",{children:s.score})]},s.player_id)),m.events.slice(-3).map(s=>e.jsxs("div",{className:"gameplay-node",children:[e.jsx("span",{children:s.title}),e.jsx("button",{className:"ghost-button",type:"button",onClick:()=>R==null?void 0:R(m.id,s.id,10),children:"Complete"})]},s.id))]}):null,e.jsxs("div",{className:"gameplay-inline",children:[e.jsx("button",{className:"ghost-button",type:"button",onClick:()=>a("guild.op",{impact:6},s=>ee(s,6)),children:"Positive op"}),e.jsx("button",{className:"ghost-button",type:"button",onClick:()=>a("guild.op",{impact:-3},s=>ee(s,-3)),children:"Risky op"})]})]}),e.jsxs("article",{className:"gameplay-card",children:[e.jsx("h3",{children:"11) Cinematic Event Engine"}),e.jsxs("p",{children:[l.cinematic.queue.length," queued events"]}),e.jsxs("div",{className:"gameplay-inline",children:[e.jsx("button",{className:"ghost-button",type:"button",onClick:()=>a("cinematic.emit",{event_type:"critical",message:"Critical cascade detected",intensity:3},s=>se(s,"critical","Critical cascade detected",3)),children:"Critical beat"}),e.jsx("button",{className:"ghost-button",type:"button",onClick:()=>a("cinematic.emit",{event_type:"success",message:"System stabilizing",intensity:2},s=>se(s,"success","System stabilizing",2)),children:"Success beat"})]})]}),e.jsxs("article",{className:"gameplay-card",children:[e.jsx("h3",{children:"12) Seasonal LiveOps"}),e.jsxs("p",{children:[l.liveops.season," • Week ",l.liveops.week]}),e.jsx("p",{children:l.liveops.challenge.title}),e.jsxs("p",{children:["Difficulty x",l.liveops.difficultyFactor.toFixed(2)," • Reward x",l.liveops.rewardMultiplier.toFixed(2)]}),e.jsxs("div",{className:"gameplay-inline",children:[e.jsx("button",{className:"ghost-button",type:"button",onClick:()=>a("liveops.advance_week",{},s=>Fe(s)),children:"Next week"}),e.jsx("button",{className:"ghost-button",type:"button",onClick:()=>a("liveops.progress",{delta:1},s=>Re(s,1)),children:"Progress challenge"})]}),e.jsxs("div",{className:"gameplay-inline",children:[e.jsx("input",{className:"search-input",value:V,onChange:s=>me(s.target.value),placeholder:"Difficulty (0.6-1.6)","aria-label":"LiveOps difficulty factor"}),e.jsx("input",{className:"search-input",value:Q,onChange:s=>he(s.target.value),placeholder:"Reward (0.5-2.0)","aria-label":"LiveOps reward multiplier"})]}),e.jsxs("div",{className:"gameplay-inline",children:[e.jsx("input",{className:"search-input",value:I,onChange:s=>xe(s.target.value),placeholder:"Tuning note","aria-label":"LiveOps tuning note"}),e.jsx("button",{className:"ghost-button",type:"button",onClick:()=>{const s=Number.parseFloat(V),n=Number.parseFloat(Q);a("liveops.balance",{difficulty_factor:Number.isFinite(s)?s:1,reward_multiplier:Number.isFinite(n)?n:1,note:I},o=>Pe(o,{difficultyFactor:Number.isFinite(s)?s:1,rewardMultiplier:Number.isFinite(n)?n:1,note:I}))},children:"Apply balancing"})]}),l.liveops.tuningHistory.length>0?e.jsx("div",{className:"gameplay-list",children:l.liveops.tuningHistory.slice(0,3).map(s=>e.jsxs("div",{className:"gameplay-node",children:[e.jsxs("span",{children:[new Date(s.changedAt).toLocaleDateString()," • ",s.note]}),e.jsxs("span",{children:["D x",s.difficultyFactor.toFixed(2)," / R x",s.rewardMultiplier.toFixed(2)]})]},s.id))}):null]}),e.jsxs("article",{className:"gameplay-card",children:[e.jsx("h3",{children:"13) Safety and Moderation"}),e.jsxs("p",{children:["Muted ",j.mutedPlayerIds.length," • Blocked ",j.blockedPlayerIds.length," • Reports"," ",j.reports.length]}),e.jsxs("div",{className:"gameplay-inline",children:[e.jsx("input",{className:"search-input",value:d,onChange:s=>pe(s.target.value),placeholder:"Player id","aria-label":"Safety player id"}),e.jsx("input",{className:"search-input",value:D,onChange:s=>ue(s.target.value),placeholder:"Reason","aria-label":"Safety reason"})]}),e.jsxs("div",{className:"gameplay-inline",children:[e.jsx("button",{className:"ghost-button",type:"button",onClick:()=>a("safety.mute",{target_player_id:d},s=>Oe(s,d)),children:"Mute player"}),e.jsx("button",{className:"ghost-button",type:"button",onClick:()=>a("safety.block",{target_player_id:d},s=>De(s,d)),children:"Block player"}),e.jsx("button",{className:"ghost-button",type:"button",onClick:()=>a("safety.report",{target_player_id:d,reason:D},s=>Ie(s,d,D)),children:"Report player"})]}),j.reports.length>0?e.jsx("div",{className:"gameplay-list",children:j.reports.slice(0,3).map(s=>e.jsxs("div",{className:"gameplay-node",children:[e.jsx("span",{children:s.targetPlayerId}),e.jsx("span",{children:s.reason})]},s.id))}):null]}),e.jsxs("article",{className:"gameplay-card",children:[e.jsx("h3",{children:"14) Observability + Funnel Analytics"}),e.jsxs("p",{children:["Sessions ",(i==null?void 0:i.metrics.total_sessions)??0," • Running ",(i==null?void 0:i.metrics.running_sessions)??0]}),e.jsxs("p",{children:["Avg latency ",Math.round((i==null?void 0:i.metrics.avg_latency_ms)??0),"ms • P95"," ",Math.round((i==null?void 0:i.metrics.p95_latency_ms)??0),"ms"]}),e.jsxs("p",{children:["Failure rate ",((i==null?void 0:i.metrics.failure_rate_pct)??0).toFixed(2),"% • Challenge completion"," ",((i==null?void 0:i.metrics.challenge_completion_rate_pct)??0).toFixed(2),"%"]}),e.jsxs("div",{className:"gameplay-list",children:[e.jsx("p",{children:"Funnels"}),e.jsxs("div",{className:"gameplay-node",children:[e.jsx("span",{children:"Session start"}),e.jsx("span",{children:(t==null?void 0:t.funnels.session_start)??0})]}),e.jsxs("div",{className:"gameplay-node",children:[e.jsx("span",{children:"First objective progress"}),e.jsx("span",{children:(t==null?void 0:t.funnels.first_objective_progress)??0})]}),e.jsxs("div",{className:"gameplay-node",children:[e.jsx("span",{children:"First mission outcome"}),e.jsx("span",{children:(t==null?void 0:t.funnels.first_mission_outcome)??0})]}),e.jsxs("div",{className:"gameplay-node",children:[e.jsx("span",{children:"Run outcome"}),e.jsx("span",{children:(t==null?void 0:t.funnels.run_outcome)??0})]})]}),e.jsx("div",{className:"gameplay-list",children:e.jsxs("p",{children:["Retention D1 ",((t==null?void 0:t.retention.d1_pct)??0).toFixed(2),"% • D7"," ",((t==null?void 0:t.retention.d7_pct)??0).toFixed(2),"% • D30 ",((t==null?void 0:t.retention.d30_pct)??0).toFixed(2),"%"]})}),i!=null&&i.alerts.length?e.jsx("div",{className:"gameplay-list",children:i.alerts.slice(0,3).map(s=>e.jsxs("div",{className:"gameplay-node",children:[e.jsx("span",{children:s.severity.toUpperCase()}),e.jsx("span",{children:s.message})]},s.id))}):null]})]})]})}export{qe as default};
