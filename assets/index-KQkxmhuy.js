const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-P6WsSEYR.js","assets/index-B5DZHykP.css"])))=>i.map(i=>d[i]);
(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();var Fs=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Dk(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Ok={exports:{}},ol={},Lk={exports:{}},ae={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hs=Symbol.for("react.element"),rN=Symbol.for("react.portal"),iN=Symbol.for("react.fragment"),aN=Symbol.for("react.strict_mode"),sN=Symbol.for("react.profiler"),oN=Symbol.for("react.provider"),lN=Symbol.for("react.context"),uN=Symbol.for("react.forward_ref"),cN=Symbol.for("react.suspense"),dN=Symbol.for("react.memo"),fN=Symbol.for("react.lazy"),Rg=Symbol.iterator;function hN(e){return e===null||typeof e!="object"?null:(e=Rg&&e[Rg]||e["@@iterator"],typeof e=="function"?e:null)}var qk={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Fk=Object.assign,Vk={};function Gi(e,t,n){this.props=e,this.context=t,this.refs=Vk,this.updater=n||qk}Gi.prototype.isReactComponent={};Gi.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Gi.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function $k(){}$k.prototype=Gi.prototype;function py(e,t,n){this.props=e,this.context=t,this.refs=Vk,this.updater=n||qk}var my=py.prototype=new $k;my.constructor=py;Fk(my,Gi.prototype);my.isPureReactComponent=!0;var Ig=Array.isArray,Bk=Object.prototype.hasOwnProperty,yy={current:null},zk={key:!0,ref:!0,__self:!0,__source:!0};function Uk(e,t,n){var r,i={},a=null,s=null;if(t!=null)for(r in t.ref!==void 0&&(s=t.ref),t.key!==void 0&&(a=""+t.key),t)Bk.call(t,r)&&!zk.hasOwnProperty(r)&&(i[r]=t[r]);var o=arguments.length-2;if(o===1)i.children=n;else if(1<o){for(var l=Array(o),u=0;u<o;u++)l[u]=arguments[u+2];i.children=l}if(e&&e.defaultProps)for(r in o=e.defaultProps,o)i[r]===void 0&&(i[r]=o[r]);return{$$typeof:hs,type:e,key:a,ref:s,props:i,_owner:yy.current}}function pN(e,t){return{$$typeof:hs,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function vy(e){return typeof e=="object"&&e!==null&&e.$$typeof===hs}function mN(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Dg=/\/+/g;function vu(e,t){return typeof e=="object"&&e!==null&&e.key!=null?mN(""+e.key):t.toString(36)}function co(e,t,n,r,i){var a=typeof e;(a==="undefined"||a==="boolean")&&(e=null);var s=!1;if(e===null)s=!0;else switch(a){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case hs:case rN:s=!0}}if(s)return s=e,i=i(s),e=r===""?"."+vu(s,0):r,Ig(i)?(n="",e!=null&&(n=e.replace(Dg,"$&/")+"/"),co(i,t,n,"",function(u){return u})):i!=null&&(vy(i)&&(i=pN(i,n+(!i.key||s&&s.key===i.key?"":(""+i.key).replace(Dg,"$&/")+"/")+e)),t.push(i)),1;if(s=0,r=r===""?".":r+":",Ig(e))for(var o=0;o<e.length;o++){a=e[o];var l=r+vu(a,o);s+=co(a,t,n,l,i)}else if(l=hN(e),typeof l=="function")for(e=l.call(e),o=0;!(a=e.next()).done;)a=a.value,l=r+vu(a,o++),s+=co(a,t,n,l,i);else if(a==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function Vs(e,t,n){if(e==null)return e;var r=[],i=0;return co(e,r,"","",function(a){return t.call(n,a,i++)}),r}function yN(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var ct={current:null},fo={transition:null},vN={ReactCurrentDispatcher:ct,ReactCurrentBatchConfig:fo,ReactCurrentOwner:yy};function Gk(){throw Error("act(...) is not supported in production builds of React.")}ae.Children={map:Vs,forEach:function(e,t,n){Vs(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Vs(e,function(){t++}),t},toArray:function(e){return Vs(e,function(t){return t})||[]},only:function(e){if(!vy(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};ae.Component=Gi;ae.Fragment=iN;ae.Profiler=sN;ae.PureComponent=py;ae.StrictMode=aN;ae.Suspense=cN;ae.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=vN;ae.act=Gk;ae.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=Fk({},e.props),i=e.key,a=e.ref,s=e._owner;if(t!=null){if(t.ref!==void 0&&(a=t.ref,s=yy.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var o=e.type.defaultProps;for(l in t)Bk.call(t,l)&&!zk.hasOwnProperty(l)&&(r[l]=t[l]===void 0&&o!==void 0?o[l]:t[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){o=Array(l);for(var u=0;u<l;u++)o[u]=arguments[u+2];r.children=o}return{$$typeof:hs,type:e.type,key:i,ref:a,props:r,_owner:s}};ae.createContext=function(e){return e={$$typeof:lN,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:oN,_context:e},e.Consumer=e};ae.createElement=Uk;ae.createFactory=function(e){var t=Uk.bind(null,e);return t.type=e,t};ae.createRef=function(){return{current:null}};ae.forwardRef=function(e){return{$$typeof:uN,render:e}};ae.isValidElement=vy;ae.lazy=function(e){return{$$typeof:fN,_payload:{_status:-1,_result:e},_init:yN}};ae.memo=function(e,t){return{$$typeof:dN,type:e,compare:t===void 0?null:t}};ae.startTransition=function(e){var t=fo.transition;fo.transition={};try{e()}finally{fo.transition=t}};ae.unstable_act=Gk;ae.useCallback=function(e,t){return ct.current.useCallback(e,t)};ae.useContext=function(e){return ct.current.useContext(e)};ae.useDebugValue=function(){};ae.useDeferredValue=function(e){return ct.current.useDeferredValue(e)};ae.useEffect=function(e,t){return ct.current.useEffect(e,t)};ae.useId=function(){return ct.current.useId()};ae.useImperativeHandle=function(e,t,n){return ct.current.useImperativeHandle(e,t,n)};ae.useInsertionEffect=function(e,t){return ct.current.useInsertionEffect(e,t)};ae.useLayoutEffect=function(e,t){return ct.current.useLayoutEffect(e,t)};ae.useMemo=function(e,t){return ct.current.useMemo(e,t)};ae.useReducer=function(e,t,n){return ct.current.useReducer(e,t,n)};ae.useRef=function(e){return ct.current.useRef(e)};ae.useState=function(e){return ct.current.useState(e)};ae.useSyncExternalStore=function(e,t,n){return ct.current.useSyncExternalStore(e,t,n)};ae.useTransition=function(){return ct.current.useTransition()};ae.version="18.3.1";Lk.exports=ae;var S=Lk.exports;const gN=Dk(S);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wN=S,bN=Symbol.for("react.element"),xN=Symbol.for("react.fragment"),SN=Object.prototype.hasOwnProperty,_N=wN.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,kN={key:!0,ref:!0,__self:!0,__source:!0};function Hk(e,t,n){var r,i={},a=null,s=null;n!==void 0&&(a=""+n),t.key!==void 0&&(a=""+t.key),t.ref!==void 0&&(s=t.ref);for(r in t)SN.call(t,r)&&!kN.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:bN,type:e,key:a,ref:s,props:i,_owner:_N.current}}ol.Fragment=xN;ol.jsx=Hk;ol.jsxs=Hk;Ok.exports=ol;var h=Ok.exports,em={},Wk={exports:{}},Et={},Kk={exports:{}},Yk={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(I,F){var R=I.length;I.push(F);e:for(;0<R;){var $=R-1>>>1,Q=I[$];if(0<i(Q,F))I[$]=F,I[R]=Q,R=$;else break e}}function n(I){return I.length===0?null:I[0]}function r(I){if(I.length===0)return null;var F=I[0],R=I.pop();if(R!==F){I[0]=R;e:for(var $=0,Q=I.length,Pe=Q>>>1;$<Pe;){var le=2*($+1)-1,ce=I[le],z=le+1,de=I[z];if(0>i(ce,R))z<Q&&0>i(de,ce)?(I[$]=de,I[z]=R,$=z):(I[$]=ce,I[le]=R,$=le);else if(z<Q&&0>i(de,R))I[$]=de,I[z]=R,$=z;else break e}}return F}function i(I,F){var R=I.sortIndex-F.sortIndex;return R!==0?R:I.id-F.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var s=Date,o=s.now();e.unstable_now=function(){return s.now()-o}}var l=[],u=[],c=1,d=null,f=3,m=!1,y=!1,p=!1,x=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(I){for(var F=n(u);F!==null;){if(F.callback===null)r(u);else if(F.startTime<=I)r(u),F.sortIndex=F.expirationTime,t(l,F);else break;F=n(u)}}function _(I){if(p=!1,b(I),!y)if(n(l)!==null)y=!0,se(C);else{var F=n(u);F!==null&&ee(_,F.startTime-I)}}function C(I,F){y=!1,p&&(p=!1,v(E),E=-1),m=!0;var R=f;try{for(b(F),d=n(l);d!==null&&(!(d.expirationTime>F)||I&&!A());){var $=d.callback;if(typeof $=="function"){d.callback=null,f=d.priorityLevel;var Q=$(d.expirationTime<=F);F=e.unstable_now(),typeof Q=="function"?d.callback=Q:d===n(l)&&r(l),b(F)}else r(l);d=n(l)}if(d!==null)var Pe=!0;else{var le=n(u);le!==null&&ee(_,le.startTime-F),Pe=!1}return Pe}finally{d=null,f=R,m=!1}}var T=!1,M=null,E=-1,j=5,P=-1;function A(){return!(e.unstable_now()-P<j)}function D(){if(M!==null){var I=e.unstable_now();P=I;var F=!0;try{F=M(!0,I)}finally{F?q():(T=!1,M=null)}}else T=!1}var q;if(typeof g=="function")q=function(){g(D)};else if(typeof MessageChannel<"u"){var W=new MessageChannel,V=W.port2;W.port1.onmessage=D,q=function(){V.postMessage(null)}}else q=function(){x(D,0)};function se(I){M=I,T||(T=!0,q())}function ee(I,F){E=x(function(){I(e.unstable_now())},F)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(I){I.callback=null},e.unstable_continueExecution=function(){y||m||(y=!0,se(C))},e.unstable_forceFrameRate=function(I){0>I||125<I?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):j=0<I?Math.floor(1e3/I):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return n(l)},e.unstable_next=function(I){switch(f){case 1:case 2:case 3:var F=3;break;default:F=f}var R=f;f=F;try{return I()}finally{f=R}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(I,F){switch(I){case 1:case 2:case 3:case 4:case 5:break;default:I=3}var R=f;f=I;try{return F()}finally{f=R}},e.unstable_scheduleCallback=function(I,F,R){var $=e.unstable_now();switch(typeof R=="object"&&R!==null?(R=R.delay,R=typeof R=="number"&&0<R?$+R:$):R=$,I){case 1:var Q=-1;break;case 2:Q=250;break;case 5:Q=1073741823;break;case 4:Q=1e4;break;default:Q=5e3}return Q=R+Q,I={id:c++,callback:F,priorityLevel:I,startTime:R,expirationTime:Q,sortIndex:-1},R>$?(I.sortIndex=R,t(u,I),n(l)===null&&I===n(u)&&(p?(v(E),E=-1):p=!0,ee(_,R-$))):(I.sortIndex=Q,t(l,I),y||m||(y=!0,se(C))),I},e.unstable_shouldYield=A,e.unstable_wrapCallback=function(I){var F=f;return function(){var R=f;f=F;try{return I.apply(this,arguments)}finally{f=R}}}})(Yk);Kk.exports=Yk;var CN=Kk.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var EN=S,kt=CN;function L(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Qk=new Set,Ga={};function Ur(e,t){Di(e,t),Di(e+"Capture",t)}function Di(e,t){for(Ga[e]=t,e=0;e<t.length;e++)Qk.add(t[e])}var Tn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),tm=Object.prototype.hasOwnProperty,TN=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Og={},Lg={};function MN(e){return tm.call(Lg,e)?!0:tm.call(Og,e)?!1:TN.test(e)?Lg[e]=!0:(Og[e]=!0,!1)}function jN(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function PN(e,t,n,r){if(t===null||typeof t>"u"||jN(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function dt(e,t,n,r,i,a,s){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=s}var Je={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Je[e]=new dt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Je[t]=new dt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Je[e]=new dt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Je[e]=new dt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Je[e]=new dt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Je[e]=new dt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Je[e]=new dt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Je[e]=new dt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Je[e]=new dt(e,5,!1,e.toLowerCase(),null,!1,!1)});var gy=/[\-:]([a-z])/g;function wy(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(gy,wy);Je[t]=new dt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(gy,wy);Je[t]=new dt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(gy,wy);Je[t]=new dt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Je[e]=new dt(e,1,!1,e.toLowerCase(),null,!1,!1)});Je.xlinkHref=new dt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Je[e]=new dt(e,1,!1,e.toLowerCase(),null,!0,!0)});function by(e,t,n,r){var i=Je.hasOwnProperty(t)?Je[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(PN(t,n,i,r)&&(n=null),r||i===null?MN(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,r=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var In=EN.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,$s=Symbol.for("react.element"),fi=Symbol.for("react.portal"),hi=Symbol.for("react.fragment"),xy=Symbol.for("react.strict_mode"),nm=Symbol.for("react.profiler"),Xk=Symbol.for("react.provider"),Jk=Symbol.for("react.context"),Sy=Symbol.for("react.forward_ref"),rm=Symbol.for("react.suspense"),im=Symbol.for("react.suspense_list"),_y=Symbol.for("react.memo"),Wn=Symbol.for("react.lazy"),Zk=Symbol.for("react.offscreen"),qg=Symbol.iterator;function la(e){return e===null||typeof e!="object"?null:(e=qg&&e[qg]||e["@@iterator"],typeof e=="function"?e:null)}var je=Object.assign,gu;function wa(e){if(gu===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);gu=t&&t[1]||""}return`
`+gu+e}var wu=!1;function bu(e,t){if(!e||wu)return"";wu=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),a=r.stack.split(`
`),s=i.length-1,o=a.length-1;1<=s&&0<=o&&i[s]!==a[o];)o--;for(;1<=s&&0<=o;s--,o--)if(i[s]!==a[o]){if(s!==1||o!==1)do if(s--,o--,0>o||i[s]!==a[o]){var l=`
`+i[s].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}while(1<=s&&0<=o);break}}}finally{wu=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?wa(e):""}function NN(e){switch(e.tag){case 5:return wa(e.type);case 16:return wa("Lazy");case 13:return wa("Suspense");case 19:return wa("SuspenseList");case 0:case 2:case 15:return e=bu(e.type,!1),e;case 11:return e=bu(e.type.render,!1),e;case 1:return e=bu(e.type,!0),e;default:return""}}function am(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case hi:return"Fragment";case fi:return"Portal";case nm:return"Profiler";case xy:return"StrictMode";case rm:return"Suspense";case im:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Jk:return(e.displayName||"Context")+".Consumer";case Xk:return(e._context.displayName||"Context")+".Provider";case Sy:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case _y:return t=e.displayName||null,t!==null?t:am(e.type)||"Memo";case Wn:t=e._payload,e=e._init;try{return am(e(t))}catch{}}return null}function AN(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return am(t);case 8:return t===xy?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function ur(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function eC(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function RN(e){var t=eC(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(s){r=""+s,a.call(this,s)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(s){r=""+s},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Bs(e){e._valueTracker||(e._valueTracker=RN(e))}function tC(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=eC(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Eo(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function sm(e,t){var n=t.checked;return je({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Fg(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=ur(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function nC(e,t){t=t.checked,t!=null&&by(e,"checked",t,!1)}function om(e,t){nC(e,t);var n=ur(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?lm(e,t.type,n):t.hasOwnProperty("defaultValue")&&lm(e,t.type,ur(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Vg(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function lm(e,t,n){(t!=="number"||Eo(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var ba=Array.isArray;function ji(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+ur(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function um(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(L(91));return je({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function $g(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(L(92));if(ba(n)){if(1<n.length)throw Error(L(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:ur(n)}}function rC(e,t){var n=ur(t.value),r=ur(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function Bg(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function iC(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function cm(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?iC(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var zs,aC=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(zs=zs||document.createElement("div"),zs.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=zs.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Ha(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Aa={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},IN=["Webkit","ms","Moz","O"];Object.keys(Aa).forEach(function(e){IN.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Aa[t]=Aa[e]})});function sC(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Aa.hasOwnProperty(e)&&Aa[e]?(""+t).trim():t+"px"}function oC(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=sC(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}var DN=je({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function dm(e,t){if(t){if(DN[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(L(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(L(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(L(61))}if(t.style!=null&&typeof t.style!="object")throw Error(L(62))}}function fm(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var hm=null;function ky(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var pm=null,Pi=null,Ni=null;function zg(e){if(e=ys(e)){if(typeof pm!="function")throw Error(L(280));var t=e.stateNode;t&&(t=fl(t),pm(e.stateNode,e.type,t))}}function lC(e){Pi?Ni?Ni.push(e):Ni=[e]:Pi=e}function uC(){if(Pi){var e=Pi,t=Ni;if(Ni=Pi=null,zg(e),t)for(e=0;e<t.length;e++)zg(t[e])}}function cC(e,t){return e(t)}function dC(){}var xu=!1;function fC(e,t,n){if(xu)return e(t,n);xu=!0;try{return cC(e,t,n)}finally{xu=!1,(Pi!==null||Ni!==null)&&(dC(),uC())}}function Wa(e,t){var n=e.stateNode;if(n===null)return null;var r=fl(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(L(231,t,typeof n));return n}var mm=!1;if(Tn)try{var ua={};Object.defineProperty(ua,"passive",{get:function(){mm=!0}}),window.addEventListener("test",ua,ua),window.removeEventListener("test",ua,ua)}catch{mm=!1}function ON(e,t,n,r,i,a,s,o,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(c){this.onError(c)}}var Ra=!1,To=null,Mo=!1,ym=null,LN={onError:function(e){Ra=!0,To=e}};function qN(e,t,n,r,i,a,s,o,l){Ra=!1,To=null,ON.apply(LN,arguments)}function FN(e,t,n,r,i,a,s,o,l){if(qN.apply(this,arguments),Ra){if(Ra){var u=To;Ra=!1,To=null}else throw Error(L(198));Mo||(Mo=!0,ym=u)}}function Gr(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function hC(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Ug(e){if(Gr(e)!==e)throw Error(L(188))}function VN(e){var t=e.alternate;if(!t){if(t=Gr(e),t===null)throw Error(L(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var a=i.alternate;if(a===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return Ug(i),e;if(a===r)return Ug(i),t;a=a.sibling}throw Error(L(188))}if(n.return!==r.return)n=i,r=a;else{for(var s=!1,o=i.child;o;){if(o===n){s=!0,n=i,r=a;break}if(o===r){s=!0,r=i,n=a;break}o=o.sibling}if(!s){for(o=a.child;o;){if(o===n){s=!0,n=a,r=i;break}if(o===r){s=!0,r=a,n=i;break}o=o.sibling}if(!s)throw Error(L(189))}}if(n.alternate!==r)throw Error(L(190))}if(n.tag!==3)throw Error(L(188));return n.stateNode.current===n?e:t}function pC(e){return e=VN(e),e!==null?mC(e):null}function mC(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=mC(e);if(t!==null)return t;e=e.sibling}return null}var yC=kt.unstable_scheduleCallback,Gg=kt.unstable_cancelCallback,$N=kt.unstable_shouldYield,BN=kt.unstable_requestPaint,Le=kt.unstable_now,zN=kt.unstable_getCurrentPriorityLevel,Cy=kt.unstable_ImmediatePriority,vC=kt.unstable_UserBlockingPriority,jo=kt.unstable_NormalPriority,UN=kt.unstable_LowPriority,gC=kt.unstable_IdlePriority,ll=null,on=null;function GN(e){if(on&&typeof on.onCommitFiberRoot=="function")try{on.onCommitFiberRoot(ll,e,void 0,(e.current.flags&128)===128)}catch{}}var Kt=Math.clz32?Math.clz32:KN,HN=Math.log,WN=Math.LN2;function KN(e){return e>>>=0,e===0?32:31-(HN(e)/WN|0)|0}var Us=64,Gs=4194304;function xa(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Po(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,s=n&268435455;if(s!==0){var o=s&~i;o!==0?r=xa(o):(a&=s,a!==0&&(r=xa(a)))}else s=n&~i,s!==0?r=xa(s):a!==0&&(r=xa(a));if(r===0)return 0;if(t!==0&&t!==r&&!(t&i)&&(i=r&-r,a=t&-t,i>=a||i===16&&(a&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Kt(t),i=1<<n,r|=e[n],t&=~i;return r}function YN(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function QN(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var s=31-Kt(a),o=1<<s,l=i[s];l===-1?(!(o&n)||o&r)&&(i[s]=YN(o,t)):l<=t&&(e.expiredLanes|=o),a&=~o}}function vm(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function wC(){var e=Us;return Us<<=1,!(Us&4194240)&&(Us=64),e}function Su(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function ps(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Kt(t),e[t]=n}function XN(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-Kt(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}function Ey(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Kt(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var he=0;function bC(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var xC,Ty,SC,_C,kC,gm=!1,Hs=[],er=null,tr=null,nr=null,Ka=new Map,Ya=new Map,Yn=[],JN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Hg(e,t){switch(e){case"focusin":case"focusout":er=null;break;case"dragenter":case"dragleave":tr=null;break;case"mouseover":case"mouseout":nr=null;break;case"pointerover":case"pointerout":Ka.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ya.delete(t.pointerId)}}function ca(e,t,n,r,i,a){return e===null||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},t!==null&&(t=ys(t),t!==null&&Ty(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function ZN(e,t,n,r,i){switch(t){case"focusin":return er=ca(er,e,t,n,r,i),!0;case"dragenter":return tr=ca(tr,e,t,n,r,i),!0;case"mouseover":return nr=ca(nr,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return Ka.set(a,ca(Ka.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Ya.set(a,ca(Ya.get(a)||null,e,t,n,r,i)),!0}return!1}function CC(e){var t=Pr(e.target);if(t!==null){var n=Gr(t);if(n!==null){if(t=n.tag,t===13){if(t=hC(n),t!==null){e.blockedOn=t,kC(e.priority,function(){SC(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ho(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=wm(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);hm=r,n.target.dispatchEvent(r),hm=null}else return t=ys(n),t!==null&&Ty(t),e.blockedOn=n,!1;t.shift()}return!0}function Wg(e,t,n){ho(e)&&n.delete(t)}function eA(){gm=!1,er!==null&&ho(er)&&(er=null),tr!==null&&ho(tr)&&(tr=null),nr!==null&&ho(nr)&&(nr=null),Ka.forEach(Wg),Ya.forEach(Wg)}function da(e,t){e.blockedOn===t&&(e.blockedOn=null,gm||(gm=!0,kt.unstable_scheduleCallback(kt.unstable_NormalPriority,eA)))}function Qa(e){function t(i){return da(i,e)}if(0<Hs.length){da(Hs[0],e);for(var n=1;n<Hs.length;n++){var r=Hs[n];r.blockedOn===e&&(r.blockedOn=null)}}for(er!==null&&da(er,e),tr!==null&&da(tr,e),nr!==null&&da(nr,e),Ka.forEach(t),Ya.forEach(t),n=0;n<Yn.length;n++)r=Yn[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Yn.length&&(n=Yn[0],n.blockedOn===null);)CC(n),n.blockedOn===null&&Yn.shift()}var Ai=In.ReactCurrentBatchConfig,No=!0;function tA(e,t,n,r){var i=he,a=Ai.transition;Ai.transition=null;try{he=1,My(e,t,n,r)}finally{he=i,Ai.transition=a}}function nA(e,t,n,r){var i=he,a=Ai.transition;Ai.transition=null;try{he=4,My(e,t,n,r)}finally{he=i,Ai.transition=a}}function My(e,t,n,r){if(No){var i=wm(e,t,n,r);if(i===null)Au(e,t,r,Ao,n),Hg(e,r);else if(ZN(i,e,t,n,r))r.stopPropagation();else if(Hg(e,r),t&4&&-1<JN.indexOf(e)){for(;i!==null;){var a=ys(i);if(a!==null&&xC(a),a=wm(e,t,n,r),a===null&&Au(e,t,r,Ao,n),a===i)break;i=a}i!==null&&r.stopPropagation()}else Au(e,t,r,null,n)}}var Ao=null;function wm(e,t,n,r){if(Ao=null,e=ky(r),e=Pr(e),e!==null)if(t=Gr(e),t===null)e=null;else if(n=t.tag,n===13){if(e=hC(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Ao=e,null}function EC(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(zN()){case Cy:return 1;case vC:return 4;case jo:case UN:return 16;case gC:return 536870912;default:return 16}default:return 16}}var Jn=null,jy=null,po=null;function TC(){if(po)return po;var e,t=jy,n=t.length,r,i="value"in Jn?Jn.value:Jn.textContent,a=i.length;for(e=0;e<n&&t[e]===i[e];e++);var s=n-e;for(r=1;r<=s&&t[n-r]===i[a-r];r++);return po=i.slice(e,1<r?1-r:void 0)}function mo(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Ws(){return!0}function Kg(){return!1}function Tt(e){function t(n,r,i,a,s){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=a,this.target=s,this.currentTarget=null;for(var o in e)e.hasOwnProperty(o)&&(n=e[o],this[o]=n?n(a):a[o]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?Ws:Kg,this.isPropagationStopped=Kg,this}return je(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ws)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ws)},persist:function(){},isPersistent:Ws}),t}var Hi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Py=Tt(Hi),ms=je({},Hi,{view:0,detail:0}),rA=Tt(ms),_u,ku,fa,ul=je({},ms,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ny,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==fa&&(fa&&e.type==="mousemove"?(_u=e.screenX-fa.screenX,ku=e.screenY-fa.screenY):ku=_u=0,fa=e),_u)},movementY:function(e){return"movementY"in e?e.movementY:ku}}),Yg=Tt(ul),iA=je({},ul,{dataTransfer:0}),aA=Tt(iA),sA=je({},ms,{relatedTarget:0}),Cu=Tt(sA),oA=je({},Hi,{animationName:0,elapsedTime:0,pseudoElement:0}),lA=Tt(oA),uA=je({},Hi,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),cA=Tt(uA),dA=je({},Hi,{data:0}),Qg=Tt(dA),fA={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},hA={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},pA={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function mA(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=pA[e])?!!t[e]:!1}function Ny(){return mA}var yA=je({},ms,{key:function(e){if(e.key){var t=fA[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=mo(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?hA[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ny,charCode:function(e){return e.type==="keypress"?mo(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?mo(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),vA=Tt(yA),gA=je({},ul,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Xg=Tt(gA),wA=je({},ms,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ny}),bA=Tt(wA),xA=je({},Hi,{propertyName:0,elapsedTime:0,pseudoElement:0}),SA=Tt(xA),_A=je({},ul,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),kA=Tt(_A),CA=[9,13,27,32],Ay=Tn&&"CompositionEvent"in window,Ia=null;Tn&&"documentMode"in document&&(Ia=document.documentMode);var EA=Tn&&"TextEvent"in window&&!Ia,MC=Tn&&(!Ay||Ia&&8<Ia&&11>=Ia),Jg=" ",Zg=!1;function jC(e,t){switch(e){case"keyup":return CA.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function PC(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var pi=!1;function TA(e,t){switch(e){case"compositionend":return PC(t);case"keypress":return t.which!==32?null:(Zg=!0,Jg);case"textInput":return e=t.data,e===Jg&&Zg?null:e;default:return null}}function MA(e,t){if(pi)return e==="compositionend"||!Ay&&jC(e,t)?(e=TC(),po=jy=Jn=null,pi=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return MC&&t.locale!=="ko"?null:t.data;default:return null}}var jA={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function e0(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!jA[e.type]:t==="textarea"}function NC(e,t,n,r){lC(r),t=Ro(t,"onChange"),0<t.length&&(n=new Py("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Da=null,Xa=null;function PA(e){BC(e,0)}function cl(e){var t=vi(e);if(tC(t))return e}function NA(e,t){if(e==="change")return t}var AC=!1;if(Tn){var Eu;if(Tn){var Tu="oninput"in document;if(!Tu){var t0=document.createElement("div");t0.setAttribute("oninput","return;"),Tu=typeof t0.oninput=="function"}Eu=Tu}else Eu=!1;AC=Eu&&(!document.documentMode||9<document.documentMode)}function n0(){Da&&(Da.detachEvent("onpropertychange",RC),Xa=Da=null)}function RC(e){if(e.propertyName==="value"&&cl(Xa)){var t=[];NC(t,Xa,e,ky(e)),fC(PA,t)}}function AA(e,t,n){e==="focusin"?(n0(),Da=t,Xa=n,Da.attachEvent("onpropertychange",RC)):e==="focusout"&&n0()}function RA(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return cl(Xa)}function IA(e,t){if(e==="click")return cl(t)}function DA(e,t){if(e==="input"||e==="change")return cl(t)}function OA(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Qt=typeof Object.is=="function"?Object.is:OA;function Ja(e,t){if(Qt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!tm.call(t,i)||!Qt(e[i],t[i]))return!1}return!0}function r0(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function i0(e,t){var n=r0(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=r0(n)}}function IC(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?IC(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function DC(){for(var e=window,t=Eo();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Eo(e.document)}return t}function Ry(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function LA(e){var t=DC(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&IC(n.ownerDocument.documentElement,n)){if(r!==null&&Ry(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=r.end===void 0?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=i0(n,a);var s=i0(n,r);i&&s&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==s.node||e.focusOffset!==s.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(s.node,s.offset)):(t.setEnd(s.node,s.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var qA=Tn&&"documentMode"in document&&11>=document.documentMode,mi=null,bm=null,Oa=null,xm=!1;function a0(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;xm||mi==null||mi!==Eo(r)||(r=mi,"selectionStart"in r&&Ry(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Oa&&Ja(Oa,r)||(Oa=r,r=Ro(bm,"onSelect"),0<r.length&&(t=new Py("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=mi)))}function Ks(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var yi={animationend:Ks("Animation","AnimationEnd"),animationiteration:Ks("Animation","AnimationIteration"),animationstart:Ks("Animation","AnimationStart"),transitionend:Ks("Transition","TransitionEnd")},Mu={},OC={};Tn&&(OC=document.createElement("div").style,"AnimationEvent"in window||(delete yi.animationend.animation,delete yi.animationiteration.animation,delete yi.animationstart.animation),"TransitionEvent"in window||delete yi.transitionend.transition);function dl(e){if(Mu[e])return Mu[e];if(!yi[e])return e;var t=yi[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in OC)return Mu[e]=t[n];return e}var LC=dl("animationend"),qC=dl("animationiteration"),FC=dl("animationstart"),VC=dl("transitionend"),$C=new Map,s0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function pr(e,t){$C.set(e,t),Ur(t,[e])}for(var ju=0;ju<s0.length;ju++){var Pu=s0[ju],FA=Pu.toLowerCase(),VA=Pu[0].toUpperCase()+Pu.slice(1);pr(FA,"on"+VA)}pr(LC,"onAnimationEnd");pr(qC,"onAnimationIteration");pr(FC,"onAnimationStart");pr("dblclick","onDoubleClick");pr("focusin","onFocus");pr("focusout","onBlur");pr(VC,"onTransitionEnd");Di("onMouseEnter",["mouseout","mouseover"]);Di("onMouseLeave",["mouseout","mouseover"]);Di("onPointerEnter",["pointerout","pointerover"]);Di("onPointerLeave",["pointerout","pointerover"]);Ur("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ur("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ur("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ur("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ur("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ur("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Sa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),$A=new Set("cancel close invalid load scroll toggle".split(" ").concat(Sa));function o0(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,FN(r,t,void 0,e),e.currentTarget=null}function BC(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var s=r.length-1;0<=s;s--){var o=r[s],l=o.instance,u=o.currentTarget;if(o=o.listener,l!==a&&i.isPropagationStopped())break e;o0(i,o,u),a=l}else for(s=0;s<r.length;s++){if(o=r[s],l=o.instance,u=o.currentTarget,o=o.listener,l!==a&&i.isPropagationStopped())break e;o0(i,o,u),a=l}}}if(Mo)throw e=ym,Mo=!1,ym=null,e}function we(e,t){var n=t[Em];n===void 0&&(n=t[Em]=new Set);var r=e+"__bubble";n.has(r)||(zC(t,e,2,!1),n.add(r))}function Nu(e,t,n){var r=0;t&&(r|=4),zC(n,e,r,t)}var Ys="_reactListening"+Math.random().toString(36).slice(2);function Za(e){if(!e[Ys]){e[Ys]=!0,Qk.forEach(function(n){n!=="selectionchange"&&($A.has(n)||Nu(n,!1,e),Nu(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Ys]||(t[Ys]=!0,Nu("selectionchange",!1,t))}}function zC(e,t,n,r){switch(EC(t)){case 1:var i=tA;break;case 4:i=nA;break;default:i=My}n=i.bind(null,t,n,e),i=void 0,!mm||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Au(e,t,n,r,i){var a=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var s=r.tag;if(s===3||s===4){var o=r.stateNode.containerInfo;if(o===i||o.nodeType===8&&o.parentNode===i)break;if(s===4)for(s=r.return;s!==null;){var l=s.tag;if((l===3||l===4)&&(l=s.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;s=s.return}for(;o!==null;){if(s=Pr(o),s===null)return;if(l=s.tag,l===5||l===6){r=a=s;continue e}o=o.parentNode}}r=r.return}fC(function(){var u=a,c=ky(n),d=[];e:{var f=$C.get(e);if(f!==void 0){var m=Py,y=e;switch(e){case"keypress":if(mo(n)===0)break e;case"keydown":case"keyup":m=vA;break;case"focusin":y="focus",m=Cu;break;case"focusout":y="blur",m=Cu;break;case"beforeblur":case"afterblur":m=Cu;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=Yg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=aA;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=bA;break;case LC:case qC:case FC:m=lA;break;case VC:m=SA;break;case"scroll":m=rA;break;case"wheel":m=kA;break;case"copy":case"cut":case"paste":m=cA;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=Xg}var p=(t&4)!==0,x=!p&&e==="scroll",v=p?f!==null?f+"Capture":null:f;p=[];for(var g=u,b;g!==null;){b=g;var _=b.stateNode;if(b.tag===5&&_!==null&&(b=_,v!==null&&(_=Wa(g,v),_!=null&&p.push(es(g,_,b)))),x)break;g=g.return}0<p.length&&(f=new m(f,y,null,n,c),d.push({event:f,listeners:p}))}}if(!(t&7)){e:{if(f=e==="mouseover"||e==="pointerover",m=e==="mouseout"||e==="pointerout",f&&n!==hm&&(y=n.relatedTarget||n.fromElement)&&(Pr(y)||y[Mn]))break e;if((m||f)&&(f=c.window===c?c:(f=c.ownerDocument)?f.defaultView||f.parentWindow:window,m?(y=n.relatedTarget||n.toElement,m=u,y=y?Pr(y):null,y!==null&&(x=Gr(y),y!==x||y.tag!==5&&y.tag!==6)&&(y=null)):(m=null,y=u),m!==y)){if(p=Yg,_="onMouseLeave",v="onMouseEnter",g="mouse",(e==="pointerout"||e==="pointerover")&&(p=Xg,_="onPointerLeave",v="onPointerEnter",g="pointer"),x=m==null?f:vi(m),b=y==null?f:vi(y),f=new p(_,g+"leave",m,n,c),f.target=x,f.relatedTarget=b,_=null,Pr(c)===u&&(p=new p(v,g+"enter",y,n,c),p.target=b,p.relatedTarget=x,_=p),x=_,m&&y)t:{for(p=m,v=y,g=0,b=p;b;b=ui(b))g++;for(b=0,_=v;_;_=ui(_))b++;for(;0<g-b;)p=ui(p),g--;for(;0<b-g;)v=ui(v),b--;for(;g--;){if(p===v||v!==null&&p===v.alternate)break t;p=ui(p),v=ui(v)}p=null}else p=null;m!==null&&l0(d,f,m,p,!1),y!==null&&x!==null&&l0(d,x,y,p,!0)}}e:{if(f=u?vi(u):window,m=f.nodeName&&f.nodeName.toLowerCase(),m==="select"||m==="input"&&f.type==="file")var C=NA;else if(e0(f))if(AC)C=DA;else{C=RA;var T=AA}else(m=f.nodeName)&&m.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(C=IA);if(C&&(C=C(e,u))){NC(d,C,n,c);break e}T&&T(e,f,u),e==="focusout"&&(T=f._wrapperState)&&T.controlled&&f.type==="number"&&lm(f,"number",f.value)}switch(T=u?vi(u):window,e){case"focusin":(e0(T)||T.contentEditable==="true")&&(mi=T,bm=u,Oa=null);break;case"focusout":Oa=bm=mi=null;break;case"mousedown":xm=!0;break;case"contextmenu":case"mouseup":case"dragend":xm=!1,a0(d,n,c);break;case"selectionchange":if(qA)break;case"keydown":case"keyup":a0(d,n,c)}var M;if(Ay)e:{switch(e){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else pi?jC(e,n)&&(E="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(E="onCompositionStart");E&&(MC&&n.locale!=="ko"&&(pi||E!=="onCompositionStart"?E==="onCompositionEnd"&&pi&&(M=TC()):(Jn=c,jy="value"in Jn?Jn.value:Jn.textContent,pi=!0)),T=Ro(u,E),0<T.length&&(E=new Qg(E,e,null,n,c),d.push({event:E,listeners:T}),M?E.data=M:(M=PC(n),M!==null&&(E.data=M)))),(M=EA?TA(e,n):MA(e,n))&&(u=Ro(u,"onBeforeInput"),0<u.length&&(c=new Qg("onBeforeInput","beforeinput",null,n,c),d.push({event:c,listeners:u}),c.data=M))}BC(d,t)})}function es(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Ro(e,t){for(var n=t+"Capture",r=[];e!==null;){var i=e,a=i.stateNode;i.tag===5&&a!==null&&(i=a,a=Wa(e,n),a!=null&&r.unshift(es(e,a,i)),a=Wa(e,t),a!=null&&r.push(es(e,a,i))),e=e.return}return r}function ui(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function l0(e,t,n,r,i){for(var a=t._reactName,s=[];n!==null&&n!==r;){var o=n,l=o.alternate,u=o.stateNode;if(l!==null&&l===r)break;o.tag===5&&u!==null&&(o=u,i?(l=Wa(n,a),l!=null&&s.unshift(es(n,l,o))):i||(l=Wa(n,a),l!=null&&s.push(es(n,l,o)))),n=n.return}s.length!==0&&e.push({event:t,listeners:s})}var BA=/\r\n?/g,zA=/\u0000|\uFFFD/g;function u0(e){return(typeof e=="string"?e:""+e).replace(BA,`
`).replace(zA,"")}function Qs(e,t,n){if(t=u0(t),u0(e)!==t&&n)throw Error(L(425))}function Io(){}var Sm=null,_m=null;function km(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Cm=typeof setTimeout=="function"?setTimeout:void 0,UA=typeof clearTimeout=="function"?clearTimeout:void 0,c0=typeof Promise=="function"?Promise:void 0,GA=typeof queueMicrotask=="function"?queueMicrotask:typeof c0<"u"?function(e){return c0.resolve(null).then(e).catch(HA)}:Cm;function HA(e){setTimeout(function(){throw e})}function Ru(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){e.removeChild(i),Qa(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Qa(t)}function rr(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function d0(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Wi=Math.random().toString(36).slice(2),an="__reactFiber$"+Wi,ts="__reactProps$"+Wi,Mn="__reactContainer$"+Wi,Em="__reactEvents$"+Wi,WA="__reactListeners$"+Wi,KA="__reactHandles$"+Wi;function Pr(e){var t=e[an];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Mn]||n[an]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=d0(e);e!==null;){if(n=e[an])return n;e=d0(e)}return t}e=n,n=e.parentNode}return null}function ys(e){return e=e[an]||e[Mn],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function vi(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(L(33))}function fl(e){return e[ts]||null}var Tm=[],gi=-1;function mr(e){return{current:e}}function be(e){0>gi||(e.current=Tm[gi],Tm[gi]=null,gi--)}function ge(e,t){gi++,Tm[gi]=e.current,e.current=t}var cr={},at=mr(cr),pt=mr(!1),Fr=cr;function Oi(e,t){var n=e.type.contextTypes;if(!n)return cr;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},a;for(a in n)i[a]=t[a];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function mt(e){return e=e.childContextTypes,e!=null}function Do(){be(pt),be(at)}function f0(e,t,n){if(at.current!==cr)throw Error(L(168));ge(at,t),ge(pt,n)}function UC(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(L(108,AN(e)||"Unknown",i));return je({},n,r)}function Oo(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||cr,Fr=at.current,ge(at,e),ge(pt,pt.current),!0}function h0(e,t,n){var r=e.stateNode;if(!r)throw Error(L(169));n?(e=UC(e,t,Fr),r.__reactInternalMemoizedMergedChildContext=e,be(pt),be(at),ge(at,e)):be(pt),ge(pt,n)}var gn=null,hl=!1,Iu=!1;function GC(e){gn===null?gn=[e]:gn.push(e)}function YA(e){hl=!0,GC(e)}function yr(){if(!Iu&&gn!==null){Iu=!0;var e=0,t=he;try{var n=gn;for(he=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}gn=null,hl=!1}catch(i){throw gn!==null&&(gn=gn.slice(e+1)),yC(Cy,yr),i}finally{he=t,Iu=!1}}return null}var wi=[],bi=0,Lo=null,qo=0,Rt=[],It=0,Vr=null,bn=1,xn="";function Er(e,t){wi[bi++]=qo,wi[bi++]=Lo,Lo=e,qo=t}function HC(e,t,n){Rt[It++]=bn,Rt[It++]=xn,Rt[It++]=Vr,Vr=e;var r=bn;e=xn;var i=32-Kt(r)-1;r&=~(1<<i),n+=1;var a=32-Kt(t)+i;if(30<a){var s=i-i%5;a=(r&(1<<s)-1).toString(32),r>>=s,i-=s,bn=1<<32-Kt(t)+i|n<<i|r,xn=a+e}else bn=1<<a|n<<i|r,xn=e}function Iy(e){e.return!==null&&(Er(e,1),HC(e,1,0))}function Dy(e){for(;e===Lo;)Lo=wi[--bi],wi[bi]=null,qo=wi[--bi],wi[bi]=null;for(;e===Vr;)Vr=Rt[--It],Rt[It]=null,xn=Rt[--It],Rt[It]=null,bn=Rt[--It],Rt[It]=null}var St=null,xt=null,Se=!1,Wt=null;function WC(e,t){var n=Dt(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function p0(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,St=e,xt=rr(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,St=e,xt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Vr!==null?{id:bn,overflow:xn}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Dt(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,St=e,xt=null,!0):!1;default:return!1}}function Mm(e){return(e.mode&1)!==0&&(e.flags&128)===0}function jm(e){if(Se){var t=xt;if(t){var n=t;if(!p0(e,t)){if(Mm(e))throw Error(L(418));t=rr(n.nextSibling);var r=St;t&&p0(e,t)?WC(r,n):(e.flags=e.flags&-4097|2,Se=!1,St=e)}}else{if(Mm(e))throw Error(L(418));e.flags=e.flags&-4097|2,Se=!1,St=e}}}function m0(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;St=e}function Xs(e){if(e!==St)return!1;if(!Se)return m0(e),Se=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!km(e.type,e.memoizedProps)),t&&(t=xt)){if(Mm(e))throw KC(),Error(L(418));for(;t;)WC(e,t),t=rr(t.nextSibling)}if(m0(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(L(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){xt=rr(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}xt=null}}else xt=St?rr(e.stateNode.nextSibling):null;return!0}function KC(){for(var e=xt;e;)e=rr(e.nextSibling)}function Li(){xt=St=null,Se=!1}function Oy(e){Wt===null?Wt=[e]:Wt.push(e)}var QA=In.ReactCurrentBatchConfig;function ha(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(L(309));var r=n.stateNode}if(!r)throw Error(L(147,e));var i=r,a=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===a?t.ref:(t=function(s){var o=i.refs;s===null?delete o[a]:o[a]=s},t._stringRef=a,t)}if(typeof e!="string")throw Error(L(284));if(!n._owner)throw Error(L(290,e))}return e}function Js(e,t){throw e=Object.prototype.toString.call(t),Error(L(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function y0(e){var t=e._init;return t(e._payload)}function YC(e){function t(v,g){if(e){var b=v.deletions;b===null?(v.deletions=[g],v.flags|=16):b.push(g)}}function n(v,g){if(!e)return null;for(;g!==null;)t(v,g),g=g.sibling;return null}function r(v,g){for(v=new Map;g!==null;)g.key!==null?v.set(g.key,g):v.set(g.index,g),g=g.sibling;return v}function i(v,g){return v=or(v,g),v.index=0,v.sibling=null,v}function a(v,g,b){return v.index=b,e?(b=v.alternate,b!==null?(b=b.index,b<g?(v.flags|=2,g):b):(v.flags|=2,g)):(v.flags|=1048576,g)}function s(v){return e&&v.alternate===null&&(v.flags|=2),v}function o(v,g,b,_){return g===null||g.tag!==6?(g=$u(b,v.mode,_),g.return=v,g):(g=i(g,b),g.return=v,g)}function l(v,g,b,_){var C=b.type;return C===hi?c(v,g,b.props.children,_,b.key):g!==null&&(g.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===Wn&&y0(C)===g.type)?(_=i(g,b.props),_.ref=ha(v,g,b),_.return=v,_):(_=So(b.type,b.key,b.props,null,v.mode,_),_.ref=ha(v,g,b),_.return=v,_)}function u(v,g,b,_){return g===null||g.tag!==4||g.stateNode.containerInfo!==b.containerInfo||g.stateNode.implementation!==b.implementation?(g=Bu(b,v.mode,_),g.return=v,g):(g=i(g,b.children||[]),g.return=v,g)}function c(v,g,b,_,C){return g===null||g.tag!==7?(g=Or(b,v.mode,_,C),g.return=v,g):(g=i(g,b),g.return=v,g)}function d(v,g,b){if(typeof g=="string"&&g!==""||typeof g=="number")return g=$u(""+g,v.mode,b),g.return=v,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case $s:return b=So(g.type,g.key,g.props,null,v.mode,b),b.ref=ha(v,null,g),b.return=v,b;case fi:return g=Bu(g,v.mode,b),g.return=v,g;case Wn:var _=g._init;return d(v,_(g._payload),b)}if(ba(g)||la(g))return g=Or(g,v.mode,b,null),g.return=v,g;Js(v,g)}return null}function f(v,g,b,_){var C=g!==null?g.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return C!==null?null:o(v,g,""+b,_);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case $s:return b.key===C?l(v,g,b,_):null;case fi:return b.key===C?u(v,g,b,_):null;case Wn:return C=b._init,f(v,g,C(b._payload),_)}if(ba(b)||la(b))return C!==null?null:c(v,g,b,_,null);Js(v,b)}return null}function m(v,g,b,_,C){if(typeof _=="string"&&_!==""||typeof _=="number")return v=v.get(b)||null,o(g,v,""+_,C);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case $s:return v=v.get(_.key===null?b:_.key)||null,l(g,v,_,C);case fi:return v=v.get(_.key===null?b:_.key)||null,u(g,v,_,C);case Wn:var T=_._init;return m(v,g,b,T(_._payload),C)}if(ba(_)||la(_))return v=v.get(b)||null,c(g,v,_,C,null);Js(g,_)}return null}function y(v,g,b,_){for(var C=null,T=null,M=g,E=g=0,j=null;M!==null&&E<b.length;E++){M.index>E?(j=M,M=null):j=M.sibling;var P=f(v,M,b[E],_);if(P===null){M===null&&(M=j);break}e&&M&&P.alternate===null&&t(v,M),g=a(P,g,E),T===null?C=P:T.sibling=P,T=P,M=j}if(E===b.length)return n(v,M),Se&&Er(v,E),C;if(M===null){for(;E<b.length;E++)M=d(v,b[E],_),M!==null&&(g=a(M,g,E),T===null?C=M:T.sibling=M,T=M);return Se&&Er(v,E),C}for(M=r(v,M);E<b.length;E++)j=m(M,v,E,b[E],_),j!==null&&(e&&j.alternate!==null&&M.delete(j.key===null?E:j.key),g=a(j,g,E),T===null?C=j:T.sibling=j,T=j);return e&&M.forEach(function(A){return t(v,A)}),Se&&Er(v,E),C}function p(v,g,b,_){var C=la(b);if(typeof C!="function")throw Error(L(150));if(b=C.call(b),b==null)throw Error(L(151));for(var T=C=null,M=g,E=g=0,j=null,P=b.next();M!==null&&!P.done;E++,P=b.next()){M.index>E?(j=M,M=null):j=M.sibling;var A=f(v,M,P.value,_);if(A===null){M===null&&(M=j);break}e&&M&&A.alternate===null&&t(v,M),g=a(A,g,E),T===null?C=A:T.sibling=A,T=A,M=j}if(P.done)return n(v,M),Se&&Er(v,E),C;if(M===null){for(;!P.done;E++,P=b.next())P=d(v,P.value,_),P!==null&&(g=a(P,g,E),T===null?C=P:T.sibling=P,T=P);return Se&&Er(v,E),C}for(M=r(v,M);!P.done;E++,P=b.next())P=m(M,v,E,P.value,_),P!==null&&(e&&P.alternate!==null&&M.delete(P.key===null?E:P.key),g=a(P,g,E),T===null?C=P:T.sibling=P,T=P);return e&&M.forEach(function(D){return t(v,D)}),Se&&Er(v,E),C}function x(v,g,b,_){if(typeof b=="object"&&b!==null&&b.type===hi&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case $s:e:{for(var C=b.key,T=g;T!==null;){if(T.key===C){if(C=b.type,C===hi){if(T.tag===7){n(v,T.sibling),g=i(T,b.props.children),g.return=v,v=g;break e}}else if(T.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===Wn&&y0(C)===T.type){n(v,T.sibling),g=i(T,b.props),g.ref=ha(v,T,b),g.return=v,v=g;break e}n(v,T);break}else t(v,T);T=T.sibling}b.type===hi?(g=Or(b.props.children,v.mode,_,b.key),g.return=v,v=g):(_=So(b.type,b.key,b.props,null,v.mode,_),_.ref=ha(v,g,b),_.return=v,v=_)}return s(v);case fi:e:{for(T=b.key;g!==null;){if(g.key===T)if(g.tag===4&&g.stateNode.containerInfo===b.containerInfo&&g.stateNode.implementation===b.implementation){n(v,g.sibling),g=i(g,b.children||[]),g.return=v,v=g;break e}else{n(v,g);break}else t(v,g);g=g.sibling}g=Bu(b,v.mode,_),g.return=v,v=g}return s(v);case Wn:return T=b._init,x(v,g,T(b._payload),_)}if(ba(b))return y(v,g,b,_);if(la(b))return p(v,g,b,_);Js(v,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,g!==null&&g.tag===6?(n(v,g.sibling),g=i(g,b),g.return=v,v=g):(n(v,g),g=$u(b,v.mode,_),g.return=v,v=g),s(v)):n(v,g)}return x}var qi=YC(!0),QC=YC(!1),Fo=mr(null),Vo=null,xi=null,Ly=null;function qy(){Ly=xi=Vo=null}function Fy(e){var t=Fo.current;be(Fo),e._currentValue=t}function Pm(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ri(e,t){Vo=e,Ly=xi=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(ht=!0),e.firstContext=null)}function Lt(e){var t=e._currentValue;if(Ly!==e)if(e={context:e,memoizedValue:t,next:null},xi===null){if(Vo===null)throw Error(L(308));xi=e,Vo.dependencies={lanes:0,firstContext:e}}else xi=xi.next=e;return t}var Nr=null;function Vy(e){Nr===null?Nr=[e]:Nr.push(e)}function XC(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,Vy(t)):(n.next=i.next,i.next=n),t.interleaved=n,jn(e,r)}function jn(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Kn=!1;function $y(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function JC(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function kn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function ir(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,oe&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,jn(e,n)}return i=r.interleaved,i===null?(t.next=t,Vy(r)):(t.next=i.next,i.next=t),r.interleaved=t,jn(e,n)}function yo(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Ey(e,n)}}function v0(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,a=null;if(n=n.firstBaseUpdate,n!==null){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};a===null?i=a=s:a=a.next=s,n=n.next}while(n!==null);a===null?i=a=t:a=a.next=t}else i=a=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function $o(e,t,n,r){var i=e.updateQueue;Kn=!1;var a=i.firstBaseUpdate,s=i.lastBaseUpdate,o=i.shared.pending;if(o!==null){i.shared.pending=null;var l=o,u=l.next;l.next=null,s===null?a=u:s.next=u,s=l;var c=e.alternate;c!==null&&(c=c.updateQueue,o=c.lastBaseUpdate,o!==s&&(o===null?c.firstBaseUpdate=u:o.next=u,c.lastBaseUpdate=l))}if(a!==null){var d=i.baseState;s=0,c=u=l=null,o=a;do{var f=o.lane,m=o.eventTime;if((r&f)===f){c!==null&&(c=c.next={eventTime:m,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var y=e,p=o;switch(f=t,m=n,p.tag){case 1:if(y=p.payload,typeof y=="function"){d=y.call(m,d,f);break e}d=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=p.payload,f=typeof y=="function"?y.call(m,d,f):y,f==null)break e;d=je({},d,f);break e;case 2:Kn=!0}}o.callback!==null&&o.lane!==0&&(e.flags|=64,f=i.effects,f===null?i.effects=[o]:f.push(o))}else m={eventTime:m,lane:f,tag:o.tag,payload:o.payload,callback:o.callback,next:null},c===null?(u=c=m,l=d):c=c.next=m,s|=f;if(o=o.next,o===null){if(o=i.shared.pending,o===null)break;f=o,o=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);if(c===null&&(l=d),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,t=i.shared.interleaved,t!==null){i=t;do s|=i.lane,i=i.next;while(i!==t)}else a===null&&(i.shared.lanes=0);Br|=s,e.lanes=s,e.memoizedState=d}}function g0(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(L(191,i));i.call(r)}}}var vs={},ln=mr(vs),ns=mr(vs),rs=mr(vs);function Ar(e){if(e===vs)throw Error(L(174));return e}function By(e,t){switch(ge(rs,t),ge(ns,e),ge(ln,vs),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:cm(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=cm(t,e)}be(ln),ge(ln,t)}function Fi(){be(ln),be(ns),be(rs)}function ZC(e){Ar(rs.current);var t=Ar(ln.current),n=cm(t,e.type);t!==n&&(ge(ns,e),ge(ln,n))}function zy(e){ns.current===e&&(be(ln),be(ns))}var Ee=mr(0);function Bo(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Du=[];function Uy(){for(var e=0;e<Du.length;e++)Du[e]._workInProgressVersionPrimary=null;Du.length=0}var vo=In.ReactCurrentDispatcher,Ou=In.ReactCurrentBatchConfig,$r=0,Me=null,ze=null,He=null,zo=!1,La=!1,is=0,XA=0;function et(){throw Error(L(321))}function Gy(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Qt(e[n],t[n]))return!1;return!0}function Hy(e,t,n,r,i,a){if($r=a,Me=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,vo.current=e===null||e.memoizedState===null?tR:nR,e=n(r,i),La){a=0;do{if(La=!1,is=0,25<=a)throw Error(L(301));a+=1,He=ze=null,t.updateQueue=null,vo.current=rR,e=n(r,i)}while(La)}if(vo.current=Uo,t=ze!==null&&ze.next!==null,$r=0,He=ze=Me=null,zo=!1,t)throw Error(L(300));return e}function Wy(){var e=is!==0;return is=0,e}function rn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return He===null?Me.memoizedState=He=e:He=He.next=e,He}function qt(){if(ze===null){var e=Me.alternate;e=e!==null?e.memoizedState:null}else e=ze.next;var t=He===null?Me.memoizedState:He.next;if(t!==null)He=t,ze=e;else{if(e===null)throw Error(L(310));ze=e,e={memoizedState:ze.memoizedState,baseState:ze.baseState,baseQueue:ze.baseQueue,queue:ze.queue,next:null},He===null?Me.memoizedState=He=e:He=He.next=e}return He}function as(e,t){return typeof t=="function"?t(e):t}function Lu(e){var t=qt(),n=t.queue;if(n===null)throw Error(L(311));n.lastRenderedReducer=e;var r=ze,i=r.baseQueue,a=n.pending;if(a!==null){if(i!==null){var s=i.next;i.next=a.next,a.next=s}r.baseQueue=i=a,n.pending=null}if(i!==null){a=i.next,r=r.baseState;var o=s=null,l=null,u=a;do{var c=u.lane;if(($r&c)===c)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var d={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(o=l=d,s=r):l=l.next=d,Me.lanes|=c,Br|=c}u=u.next}while(u!==null&&u!==a);l===null?s=r:l.next=o,Qt(r,t.memoizedState)||(ht=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=l,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do a=i.lane,Me.lanes|=a,Br|=a,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function qu(e){var t=qt(),n=t.queue;if(n===null)throw Error(L(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,a=t.memoizedState;if(i!==null){n.pending=null;var s=i=i.next;do a=e(a,s.action),s=s.next;while(s!==i);Qt(a,t.memoizedState)||(ht=!0),t.memoizedState=a,t.baseQueue===null&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function eE(){}function tE(e,t){var n=Me,r=qt(),i=t(),a=!Qt(r.memoizedState,i);if(a&&(r.memoizedState=i,ht=!0),r=r.queue,Ky(iE.bind(null,n,r,e),[e]),r.getSnapshot!==t||a||He!==null&&He.memoizedState.tag&1){if(n.flags|=2048,ss(9,rE.bind(null,n,r,i,t),void 0,null),We===null)throw Error(L(349));$r&30||nE(n,t,i)}return i}function nE(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Me.updateQueue,t===null?(t={lastEffect:null,stores:null},Me.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function rE(e,t,n,r){t.value=n,t.getSnapshot=r,aE(t)&&sE(e)}function iE(e,t,n){return n(function(){aE(t)&&sE(e)})}function aE(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Qt(e,n)}catch{return!0}}function sE(e){var t=jn(e,1);t!==null&&Yt(t,e,1,-1)}function w0(e){var t=rn();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:as,lastRenderedState:e},t.queue=e,e=e.dispatch=eR.bind(null,Me,e),[t.memoizedState,e]}function ss(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Me.updateQueue,t===null?(t={lastEffect:null,stores:null},Me.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function oE(){return qt().memoizedState}function go(e,t,n,r){var i=rn();Me.flags|=e,i.memoizedState=ss(1|t,n,void 0,r===void 0?null:r)}function pl(e,t,n,r){var i=qt();r=r===void 0?null:r;var a=void 0;if(ze!==null){var s=ze.memoizedState;if(a=s.destroy,r!==null&&Gy(r,s.deps)){i.memoizedState=ss(t,n,a,r);return}}Me.flags|=e,i.memoizedState=ss(1|t,n,a,r)}function b0(e,t){return go(8390656,8,e,t)}function Ky(e,t){return pl(2048,8,e,t)}function lE(e,t){return pl(4,2,e,t)}function uE(e,t){return pl(4,4,e,t)}function cE(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function dE(e,t,n){return n=n!=null?n.concat([e]):null,pl(4,4,cE.bind(null,t,e),n)}function Yy(){}function fE(e,t){var n=qt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Gy(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function hE(e,t){var n=qt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Gy(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function pE(e,t,n){return $r&21?(Qt(n,t)||(n=wC(),Me.lanes|=n,Br|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,ht=!0),e.memoizedState=n)}function JA(e,t){var n=he;he=n!==0&&4>n?n:4,e(!0);var r=Ou.transition;Ou.transition={};try{e(!1),t()}finally{he=n,Ou.transition=r}}function mE(){return qt().memoizedState}function ZA(e,t,n){var r=sr(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},yE(e))vE(t,n);else if(n=XC(e,t,n,r),n!==null){var i=ut();Yt(n,e,r,i),gE(n,t,r)}}function eR(e,t,n){var r=sr(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(yE(e))vE(t,i);else{var a=e.alternate;if(e.lanes===0&&(a===null||a.lanes===0)&&(a=t.lastRenderedReducer,a!==null))try{var s=t.lastRenderedState,o=a(s,n);if(i.hasEagerState=!0,i.eagerState=o,Qt(o,s)){var l=t.interleaved;l===null?(i.next=i,Vy(t)):(i.next=l.next,l.next=i),t.interleaved=i;return}}catch{}finally{}n=XC(e,t,i,r),n!==null&&(i=ut(),Yt(n,e,r,i),gE(n,t,r))}}function yE(e){var t=e.alternate;return e===Me||t!==null&&t===Me}function vE(e,t){La=zo=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function gE(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Ey(e,n)}}var Uo={readContext:Lt,useCallback:et,useContext:et,useEffect:et,useImperativeHandle:et,useInsertionEffect:et,useLayoutEffect:et,useMemo:et,useReducer:et,useRef:et,useState:et,useDebugValue:et,useDeferredValue:et,useTransition:et,useMutableSource:et,useSyncExternalStore:et,useId:et,unstable_isNewReconciler:!1},tR={readContext:Lt,useCallback:function(e,t){return rn().memoizedState=[e,t===void 0?null:t],e},useContext:Lt,useEffect:b0,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,go(4194308,4,cE.bind(null,t,e),n)},useLayoutEffect:function(e,t){return go(4194308,4,e,t)},useInsertionEffect:function(e,t){return go(4,2,e,t)},useMemo:function(e,t){var n=rn();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=rn();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=ZA.bind(null,Me,e),[r.memoizedState,e]},useRef:function(e){var t=rn();return e={current:e},t.memoizedState=e},useState:w0,useDebugValue:Yy,useDeferredValue:function(e){return rn().memoizedState=e},useTransition:function(){var e=w0(!1),t=e[0];return e=JA.bind(null,e[1]),rn().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Me,i=rn();if(Se){if(n===void 0)throw Error(L(407));n=n()}else{if(n=t(),We===null)throw Error(L(349));$r&30||nE(r,t,n)}i.memoizedState=n;var a={value:n,getSnapshot:t};return i.queue=a,b0(iE.bind(null,r,a,e),[e]),r.flags|=2048,ss(9,rE.bind(null,r,a,n,t),void 0,null),n},useId:function(){var e=rn(),t=We.identifierPrefix;if(Se){var n=xn,r=bn;n=(r&~(1<<32-Kt(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=is++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=XA++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},nR={readContext:Lt,useCallback:fE,useContext:Lt,useEffect:Ky,useImperativeHandle:dE,useInsertionEffect:lE,useLayoutEffect:uE,useMemo:hE,useReducer:Lu,useRef:oE,useState:function(){return Lu(as)},useDebugValue:Yy,useDeferredValue:function(e){var t=qt();return pE(t,ze.memoizedState,e)},useTransition:function(){var e=Lu(as)[0],t=qt().memoizedState;return[e,t]},useMutableSource:eE,useSyncExternalStore:tE,useId:mE,unstable_isNewReconciler:!1},rR={readContext:Lt,useCallback:fE,useContext:Lt,useEffect:Ky,useImperativeHandle:dE,useInsertionEffect:lE,useLayoutEffect:uE,useMemo:hE,useReducer:qu,useRef:oE,useState:function(){return qu(as)},useDebugValue:Yy,useDeferredValue:function(e){var t=qt();return ze===null?t.memoizedState=e:pE(t,ze.memoizedState,e)},useTransition:function(){var e=qu(as)[0],t=qt().memoizedState;return[e,t]},useMutableSource:eE,useSyncExternalStore:tE,useId:mE,unstable_isNewReconciler:!1};function Gt(e,t){if(e&&e.defaultProps){t=je({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Nm(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:je({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var ml={isMounted:function(e){return(e=e._reactInternals)?Gr(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ut(),i=sr(e),a=kn(r,i);a.payload=t,n!=null&&(a.callback=n),t=ir(e,a,i),t!==null&&(Yt(t,e,i,r),yo(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ut(),i=sr(e),a=kn(r,i);a.tag=1,a.payload=t,n!=null&&(a.callback=n),t=ir(e,a,i),t!==null&&(Yt(t,e,i,r),yo(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ut(),r=sr(e),i=kn(n,r);i.tag=2,t!=null&&(i.callback=t),t=ir(e,i,r),t!==null&&(Yt(t,e,r,n),yo(t,e,r))}};function x0(e,t,n,r,i,a,s){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,a,s):t.prototype&&t.prototype.isPureReactComponent?!Ja(n,r)||!Ja(i,a):!0}function wE(e,t,n){var r=!1,i=cr,a=t.contextType;return typeof a=="object"&&a!==null?a=Lt(a):(i=mt(t)?Fr:at.current,r=t.contextTypes,a=(r=r!=null)?Oi(e,i):cr),t=new t(n,a),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=ml,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function S0(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ml.enqueueReplaceState(t,t.state,null)}function Am(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},$y(e);var a=t.contextType;typeof a=="object"&&a!==null?i.context=Lt(a):(a=mt(t)?Fr:at.current,i.context=Oi(e,a)),i.state=e.memoizedState,a=t.getDerivedStateFromProps,typeof a=="function"&&(Nm(e,t,a,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&ml.enqueueReplaceState(i,i.state,null),$o(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function Vi(e,t){try{var n="",r=t;do n+=NN(r),r=r.return;while(r);var i=n}catch(a){i=`
Error generating stack: `+a.message+`
`+a.stack}return{value:e,source:t,stack:i,digest:null}}function Fu(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Rm(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var iR=typeof WeakMap=="function"?WeakMap:Map;function bE(e,t,n){n=kn(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Ho||(Ho=!0,zm=r),Rm(e,t)},n}function xE(e,t,n){n=kn(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){Rm(e,t)}}var a=e.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(n.callback=function(){Rm(e,t),typeof r!="function"&&(ar===null?ar=new Set([this]):ar.add(this));var s=t.stack;this.componentDidCatch(t.value,{componentStack:s!==null?s:""})}),n}function _0(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new iR;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=gR.bind(null,e,t,n),t.then(e,e))}function k0(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function C0(e,t,n,r,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=kn(-1,1),t.tag=2,ir(n,t,1))),n.lanes|=1),e)}var aR=In.ReactCurrentOwner,ht=!1;function lt(e,t,n,r){t.child=e===null?QC(t,null,n,r):qi(t,e.child,n,r)}function E0(e,t,n,r,i){n=n.render;var a=t.ref;return Ri(t,i),r=Hy(e,t,n,r,a,i),n=Wy(),e!==null&&!ht?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Pn(e,t,i)):(Se&&n&&Iy(t),t.flags|=1,lt(e,t,r,i),t.child)}function T0(e,t,n,r,i){if(e===null){var a=n.type;return typeof a=="function"&&!rv(a)&&a.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=a,SE(e,t,a,r,i)):(e=So(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(a=e.child,!(e.lanes&i)){var s=a.memoizedProps;if(n=n.compare,n=n!==null?n:Ja,n(s,r)&&e.ref===t.ref)return Pn(e,t,i)}return t.flags|=1,e=or(a,r),e.ref=t.ref,e.return=t,t.child=e}function SE(e,t,n,r,i){if(e!==null){var a=e.memoizedProps;if(Ja(a,r)&&e.ref===t.ref)if(ht=!1,t.pendingProps=r=a,(e.lanes&i)!==0)e.flags&131072&&(ht=!0);else return t.lanes=e.lanes,Pn(e,t,i)}return Im(e,t,n,r,i)}function _E(e,t,n){var r=t.pendingProps,i=r.children,a=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ge(_i,gt),gt|=n;else{if(!(n&1073741824))return e=a!==null?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ge(_i,gt),gt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=a!==null?a.baseLanes:n,ge(_i,gt),gt|=r}else a!==null?(r=a.baseLanes|n,t.memoizedState=null):r=n,ge(_i,gt),gt|=r;return lt(e,t,i,n),t.child}function kE(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Im(e,t,n,r,i){var a=mt(n)?Fr:at.current;return a=Oi(t,a),Ri(t,i),n=Hy(e,t,n,r,a,i),r=Wy(),e!==null&&!ht?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Pn(e,t,i)):(Se&&r&&Iy(t),t.flags|=1,lt(e,t,n,i),t.child)}function M0(e,t,n,r,i){if(mt(n)){var a=!0;Oo(t)}else a=!1;if(Ri(t,i),t.stateNode===null)wo(e,t),wE(t,n,r),Am(t,n,r,i),r=!0;else if(e===null){var s=t.stateNode,o=t.memoizedProps;s.props=o;var l=s.context,u=n.contextType;typeof u=="object"&&u!==null?u=Lt(u):(u=mt(n)?Fr:at.current,u=Oi(t,u));var c=n.getDerivedStateFromProps,d=typeof c=="function"||typeof s.getSnapshotBeforeUpdate=="function";d||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(o!==r||l!==u)&&S0(t,s,r,u),Kn=!1;var f=t.memoizedState;s.state=f,$o(t,r,s,i),l=t.memoizedState,o!==r||f!==l||pt.current||Kn?(typeof c=="function"&&(Nm(t,n,c,r),l=t.memoizedState),(o=Kn||x0(t,n,o,r,f,l,u))?(d||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(t.flags|=4194308)):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),s.props=r,s.state=l,s.context=u,r=o):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{s=t.stateNode,JC(e,t),o=t.memoizedProps,u=t.type===t.elementType?o:Gt(t.type,o),s.props=u,d=t.pendingProps,f=s.context,l=n.contextType,typeof l=="object"&&l!==null?l=Lt(l):(l=mt(n)?Fr:at.current,l=Oi(t,l));var m=n.getDerivedStateFromProps;(c=typeof m=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(o!==d||f!==l)&&S0(t,s,r,l),Kn=!1,f=t.memoizedState,s.state=f,$o(t,r,s,i);var y=t.memoizedState;o!==d||f!==y||pt.current||Kn?(typeof m=="function"&&(Nm(t,n,m,r),y=t.memoizedState),(u=Kn||x0(t,n,u,r,f,y,l)||!1)?(c||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(r,y,l),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(r,y,l)),typeof s.componentDidUpdate=="function"&&(t.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof s.componentDidUpdate!="function"||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=y),s.props=r,s.state=y,s.context=l,r=u):(typeof s.componentDidUpdate!="function"||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),r=!1)}return Dm(e,t,n,r,a,i)}function Dm(e,t,n,r,i,a){kE(e,t);var s=(t.flags&128)!==0;if(!r&&!s)return i&&h0(t,n,!1),Pn(e,t,a);r=t.stateNode,aR.current=t;var o=s&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&s?(t.child=qi(t,e.child,null,a),t.child=qi(t,null,o,a)):lt(e,t,o,a),t.memoizedState=r.state,i&&h0(t,n,!0),t.child}function CE(e){var t=e.stateNode;t.pendingContext?f0(e,t.pendingContext,t.pendingContext!==t.context):t.context&&f0(e,t.context,!1),By(e,t.containerInfo)}function j0(e,t,n,r,i){return Li(),Oy(i),t.flags|=256,lt(e,t,n,r),t.child}var Om={dehydrated:null,treeContext:null,retryLane:0};function Lm(e){return{baseLanes:e,cachePool:null,transitions:null}}function EE(e,t,n){var r=t.pendingProps,i=Ee.current,a=!1,s=(t.flags&128)!==0,o;if((o=s)||(o=e!==null&&e.memoizedState===null?!1:(i&2)!==0),o?(a=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),ge(Ee,i&1),e===null)return jm(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(s=r.children,e=r.fallback,a?(r=t.mode,a=t.child,s={mode:"hidden",children:s},!(r&1)&&a!==null?(a.childLanes=0,a.pendingProps=s):a=gl(s,r,0,null),e=Or(e,r,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=Lm(n),t.memoizedState=Om,e):Qy(t,s));if(i=e.memoizedState,i!==null&&(o=i.dehydrated,o!==null))return sR(e,t,s,r,o,i,n);if(a){a=r.fallback,s=t.mode,i=e.child,o=i.sibling;var l={mode:"hidden",children:r.children};return!(s&1)&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=l,t.deletions=null):(r=or(i,l),r.subtreeFlags=i.subtreeFlags&14680064),o!==null?a=or(o,a):(a=Or(a,s,n,null),a.flags|=2),a.return=t,r.return=t,r.sibling=a,t.child=r,r=a,a=t.child,s=e.child.memoizedState,s=s===null?Lm(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},a.memoizedState=s,a.childLanes=e.childLanes&~n,t.memoizedState=Om,r}return a=e.child,e=a.sibling,r=or(a,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Qy(e,t){return t=gl({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Zs(e,t,n,r){return r!==null&&Oy(r),qi(t,e.child,null,n),e=Qy(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function sR(e,t,n,r,i,a,s){if(n)return t.flags&256?(t.flags&=-257,r=Fu(Error(L(422))),Zs(e,t,s,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(a=r.fallback,i=t.mode,r=gl({mode:"visible",children:r.children},i,0,null),a=Or(a,i,s,null),a.flags|=2,r.return=t,a.return=t,r.sibling=a,t.child=r,t.mode&1&&qi(t,e.child,null,s),t.child.memoizedState=Lm(s),t.memoizedState=Om,a);if(!(t.mode&1))return Zs(e,t,s,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var o=r.dgst;return r=o,a=Error(L(419)),r=Fu(a,r,void 0),Zs(e,t,s,r)}if(o=(s&e.childLanes)!==0,ht||o){if(r=We,r!==null){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|s)?0:i,i!==0&&i!==a.retryLane&&(a.retryLane=i,jn(e,i),Yt(r,e,i,-1))}return nv(),r=Fu(Error(L(421))),Zs(e,t,s,r)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=wR.bind(null,e),i._reactRetry=t,null):(e=a.treeContext,xt=rr(i.nextSibling),St=t,Se=!0,Wt=null,e!==null&&(Rt[It++]=bn,Rt[It++]=xn,Rt[It++]=Vr,bn=e.id,xn=e.overflow,Vr=t),t=Qy(t,r.children),t.flags|=4096,t)}function P0(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Pm(e.return,t,n)}function Vu(e,t,n,r,i){var a=e.memoizedState;a===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function TE(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(lt(e,t,r.children,n),r=Ee.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&P0(e,n,t);else if(e.tag===19)P0(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(ge(Ee,r),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&Bo(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Vu(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&Bo(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Vu(t,!0,n,null,a);break;case"together":Vu(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function wo(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Pn(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Br|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(L(153));if(t.child!==null){for(e=t.child,n=or(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=or(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function oR(e,t,n){switch(t.tag){case 3:CE(t),Li();break;case 5:ZC(t);break;case 1:mt(t.type)&&Oo(t);break;case 4:By(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;ge(Fo,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(ge(Ee,Ee.current&1),t.flags|=128,null):n&t.child.childLanes?EE(e,t,n):(ge(Ee,Ee.current&1),e=Pn(e,t,n),e!==null?e.sibling:null);ge(Ee,Ee.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return TE(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),ge(Ee,Ee.current),r)break;return null;case 22:case 23:return t.lanes=0,_E(e,t,n)}return Pn(e,t,n)}var ME,qm,jE,PE;ME=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};qm=function(){};jE=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Ar(ln.current);var a=null;switch(n){case"input":i=sm(e,i),r=sm(e,r),a=[];break;case"select":i=je({},i,{value:void 0}),r=je({},r,{value:void 0}),a=[];break;case"textarea":i=um(e,i),r=um(e,r),a=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Io)}dm(n,r);var s;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var o=i[u];for(s in o)o.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Ga.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in r){var l=r[u];if(o=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&l!==o&&(l!=null||o!=null))if(u==="style")if(o){for(s in o)!o.hasOwnProperty(s)||l&&l.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in l)l.hasOwnProperty(s)&&o[s]!==l[s]&&(n||(n={}),n[s]=l[s])}else n||(a||(a=[]),a.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,o=o?o.__html:void 0,l!=null&&o!==l&&(a=a||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(a=a||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Ga.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&we("scroll",e),a||o===l||(a=[])):(a=a||[]).push(u,l))}n&&(a=a||[]).push("style",n);var u=a;(t.updateQueue=u)&&(t.flags|=4)}};PE=function(e,t,n,r){n!==r&&(t.flags|=4)};function pa(e,t){if(!Se)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function tt(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function lR(e,t,n){var r=t.pendingProps;switch(Dy(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return tt(t),null;case 1:return mt(t.type)&&Do(),tt(t),null;case 3:return r=t.stateNode,Fi(),be(pt),be(at),Uy(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Xs(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Wt!==null&&(Hm(Wt),Wt=null))),qm(e,t),tt(t),null;case 5:zy(t);var i=Ar(rs.current);if(n=t.type,e!==null&&t.stateNode!=null)jE(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(L(166));return tt(t),null}if(e=Ar(ln.current),Xs(t)){r=t.stateNode,n=t.type;var a=t.memoizedProps;switch(r[an]=t,r[ts]=a,e=(t.mode&1)!==0,n){case"dialog":we("cancel",r),we("close",r);break;case"iframe":case"object":case"embed":we("load",r);break;case"video":case"audio":for(i=0;i<Sa.length;i++)we(Sa[i],r);break;case"source":we("error",r);break;case"img":case"image":case"link":we("error",r),we("load",r);break;case"details":we("toggle",r);break;case"input":Fg(r,a),we("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},we("invalid",r);break;case"textarea":$g(r,a),we("invalid",r)}dm(n,a),i=null;for(var s in a)if(a.hasOwnProperty(s)){var o=a[s];s==="children"?typeof o=="string"?r.textContent!==o&&(a.suppressHydrationWarning!==!0&&Qs(r.textContent,o,e),i=["children",o]):typeof o=="number"&&r.textContent!==""+o&&(a.suppressHydrationWarning!==!0&&Qs(r.textContent,o,e),i=["children",""+o]):Ga.hasOwnProperty(s)&&o!=null&&s==="onScroll"&&we("scroll",r)}switch(n){case"input":Bs(r),Vg(r,a,!0);break;case"textarea":Bs(r),Bg(r);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(r.onclick=Io)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{s=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=iC(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=s.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=s.createElement(n,{is:r.is}):(e=s.createElement(n),n==="select"&&(s=e,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):e=s.createElementNS(e,n),e[an]=t,e[ts]=r,ME(e,t,!1,!1),t.stateNode=e;e:{switch(s=fm(n,r),n){case"dialog":we("cancel",e),we("close",e),i=r;break;case"iframe":case"object":case"embed":we("load",e),i=r;break;case"video":case"audio":for(i=0;i<Sa.length;i++)we(Sa[i],e);i=r;break;case"source":we("error",e),i=r;break;case"img":case"image":case"link":we("error",e),we("load",e),i=r;break;case"details":we("toggle",e),i=r;break;case"input":Fg(e,r),i=sm(e,r),we("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=je({},r,{value:void 0}),we("invalid",e);break;case"textarea":$g(e,r),i=um(e,r),we("invalid",e);break;default:i=r}dm(n,i),o=i;for(a in o)if(o.hasOwnProperty(a)){var l=o[a];a==="style"?oC(e,l):a==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&aC(e,l)):a==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Ha(e,l):typeof l=="number"&&Ha(e,""+l):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(Ga.hasOwnProperty(a)?l!=null&&a==="onScroll"&&we("scroll",e):l!=null&&by(e,a,l,s))}switch(n){case"input":Bs(e),Vg(e,r,!1);break;case"textarea":Bs(e),Bg(e);break;case"option":r.value!=null&&e.setAttribute("value",""+ur(r.value));break;case"select":e.multiple=!!r.multiple,a=r.value,a!=null?ji(e,!!r.multiple,a,!1):r.defaultValue!=null&&ji(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=Io)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return tt(t),null;case 6:if(e&&t.stateNode!=null)PE(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(L(166));if(n=Ar(rs.current),Ar(ln.current),Xs(t)){if(r=t.stateNode,n=t.memoizedProps,r[an]=t,(a=r.nodeValue!==n)&&(e=St,e!==null))switch(e.tag){case 3:Qs(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Qs(r.nodeValue,n,(e.mode&1)!==0)}a&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[an]=t,t.stateNode=r}return tt(t),null;case 13:if(be(Ee),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Se&&xt!==null&&t.mode&1&&!(t.flags&128))KC(),Li(),t.flags|=98560,a=!1;else if(a=Xs(t),r!==null&&r.dehydrated!==null){if(e===null){if(!a)throw Error(L(318));if(a=t.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(L(317));a[an]=t}else Li(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;tt(t),a=!1}else Wt!==null&&(Hm(Wt),Wt=null),a=!0;if(!a)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Ee.current&1?Ue===0&&(Ue=3):nv())),t.updateQueue!==null&&(t.flags|=4),tt(t),null);case 4:return Fi(),qm(e,t),e===null&&Za(t.stateNode.containerInfo),tt(t),null;case 10:return Fy(t.type._context),tt(t),null;case 17:return mt(t.type)&&Do(),tt(t),null;case 19:if(be(Ee),a=t.memoizedState,a===null)return tt(t),null;if(r=(t.flags&128)!==0,s=a.rendering,s===null)if(r)pa(a,!1);else{if(Ue!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(s=Bo(e),s!==null){for(t.flags|=128,pa(a,!1),r=s.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)a=n,e=r,a.flags&=14680066,s=a.alternate,s===null?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=s.childLanes,a.lanes=s.lanes,a.child=s.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=s.memoizedProps,a.memoizedState=s.memoizedState,a.updateQueue=s.updateQueue,a.type=s.type,e=s.dependencies,a.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return ge(Ee,Ee.current&1|2),t.child}e=e.sibling}a.tail!==null&&Le()>$i&&(t.flags|=128,r=!0,pa(a,!1),t.lanes=4194304)}else{if(!r)if(e=Bo(s),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),pa(a,!0),a.tail===null&&a.tailMode==="hidden"&&!s.alternate&&!Se)return tt(t),null}else 2*Le()-a.renderingStartTime>$i&&n!==1073741824&&(t.flags|=128,r=!0,pa(a,!1),t.lanes=4194304);a.isBackwards?(s.sibling=t.child,t.child=s):(n=a.last,n!==null?n.sibling=s:t.child=s,a.last=s)}return a.tail!==null?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=Le(),t.sibling=null,n=Ee.current,ge(Ee,r?n&1|2:n&1),t):(tt(t),null);case 22:case 23:return tv(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?gt&1073741824&&(tt(t),t.subtreeFlags&6&&(t.flags|=8192)):tt(t),null;case 24:return null;case 25:return null}throw Error(L(156,t.tag))}function uR(e,t){switch(Dy(t),t.tag){case 1:return mt(t.type)&&Do(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Fi(),be(pt),be(at),Uy(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return zy(t),null;case 13:if(be(Ee),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(L(340));Li()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return be(Ee),null;case 4:return Fi(),null;case 10:return Fy(t.type._context),null;case 22:case 23:return tv(),null;case 24:return null;default:return null}}var eo=!1,rt=!1,cR=typeof WeakSet=="function"?WeakSet:Set,U=null;function Si(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ie(e,t,r)}else n.current=null}function Fm(e,t,n){try{n()}catch(r){Ie(e,t,r)}}var N0=!1;function dR(e,t){if(Sm=No,e=DC(),Ry(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch{n=null;break e}var s=0,o=-1,l=-1,u=0,c=0,d=e,f=null;t:for(;;){for(var m;d!==n||i!==0&&d.nodeType!==3||(o=s+i),d!==a||r!==0&&d.nodeType!==3||(l=s+r),d.nodeType===3&&(s+=d.nodeValue.length),(m=d.firstChild)!==null;)f=d,d=m;for(;;){if(d===e)break t;if(f===n&&++u===i&&(o=s),f===a&&++c===r&&(l=s),(m=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=m}n=o===-1||l===-1?null:{start:o,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(_m={focusedElem:e,selectionRange:n},No=!1,U=t;U!==null;)if(t=U,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,U=e;else for(;U!==null;){t=U;try{var y=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var p=y.memoizedProps,x=y.memoizedState,v=t.stateNode,g=v.getSnapshotBeforeUpdate(t.elementType===t.type?p:Gt(t.type,p),x);v.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var b=t.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(L(163))}}catch(_){Ie(t,t.return,_)}if(e=t.sibling,e!==null){e.return=t.return,U=e;break}U=t.return}return y=N0,N0=!1,y}function qa(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,a!==void 0&&Fm(t,n,a)}i=i.next}while(i!==r)}}function yl(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function Vm(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function NE(e){var t=e.alternate;t!==null&&(e.alternate=null,NE(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[an],delete t[ts],delete t[Em],delete t[WA],delete t[KA])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function AE(e){return e.tag===5||e.tag===3||e.tag===4}function A0(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||AE(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function $m(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Io));else if(r!==4&&(e=e.child,e!==null))for($m(e,t,n),e=e.sibling;e!==null;)$m(e,t,n),e=e.sibling}function Bm(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(Bm(e,t,n),e=e.sibling;e!==null;)Bm(e,t,n),e=e.sibling}var Ye=null,Ht=!1;function zn(e,t,n){for(n=n.child;n!==null;)RE(e,t,n),n=n.sibling}function RE(e,t,n){if(on&&typeof on.onCommitFiberUnmount=="function")try{on.onCommitFiberUnmount(ll,n)}catch{}switch(n.tag){case 5:rt||Si(n,t);case 6:var r=Ye,i=Ht;Ye=null,zn(e,t,n),Ye=r,Ht=i,Ye!==null&&(Ht?(e=Ye,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Ye.removeChild(n.stateNode));break;case 18:Ye!==null&&(Ht?(e=Ye,n=n.stateNode,e.nodeType===8?Ru(e.parentNode,n):e.nodeType===1&&Ru(e,n),Qa(e)):Ru(Ye,n.stateNode));break;case 4:r=Ye,i=Ht,Ye=n.stateNode.containerInfo,Ht=!0,zn(e,t,n),Ye=r,Ht=i;break;case 0:case 11:case 14:case 15:if(!rt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var a=i,s=a.destroy;a=a.tag,s!==void 0&&(a&2||a&4)&&Fm(n,t,s),i=i.next}while(i!==r)}zn(e,t,n);break;case 1:if(!rt&&(Si(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){Ie(n,t,o)}zn(e,t,n);break;case 21:zn(e,t,n);break;case 22:n.mode&1?(rt=(r=rt)||n.memoizedState!==null,zn(e,t,n),rt=r):zn(e,t,n);break;default:zn(e,t,n)}}function R0(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new cR),t.forEach(function(r){var i=bR.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function zt(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var a=e,s=t,o=s;e:for(;o!==null;){switch(o.tag){case 5:Ye=o.stateNode,Ht=!1;break e;case 3:Ye=o.stateNode.containerInfo,Ht=!0;break e;case 4:Ye=o.stateNode.containerInfo,Ht=!0;break e}o=o.return}if(Ye===null)throw Error(L(160));RE(a,s,i),Ye=null,Ht=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){Ie(i,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)IE(t,e),t=t.sibling}function IE(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(zt(t,e),nn(e),r&4){try{qa(3,e,e.return),yl(3,e)}catch(p){Ie(e,e.return,p)}try{qa(5,e,e.return)}catch(p){Ie(e,e.return,p)}}break;case 1:zt(t,e),nn(e),r&512&&n!==null&&Si(n,n.return);break;case 5:if(zt(t,e),nn(e),r&512&&n!==null&&Si(n,n.return),e.flags&32){var i=e.stateNode;try{Ha(i,"")}catch(p){Ie(e,e.return,p)}}if(r&4&&(i=e.stateNode,i!=null)){var a=e.memoizedProps,s=n!==null?n.memoizedProps:a,o=e.type,l=e.updateQueue;if(e.updateQueue=null,l!==null)try{o==="input"&&a.type==="radio"&&a.name!=null&&nC(i,a),fm(o,s);var u=fm(o,a);for(s=0;s<l.length;s+=2){var c=l[s],d=l[s+1];c==="style"?oC(i,d):c==="dangerouslySetInnerHTML"?aC(i,d):c==="children"?Ha(i,d):by(i,c,d,u)}switch(o){case"input":om(i,a);break;case"textarea":rC(i,a);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var m=a.value;m!=null?ji(i,!!a.multiple,m,!1):f!==!!a.multiple&&(a.defaultValue!=null?ji(i,!!a.multiple,a.defaultValue,!0):ji(i,!!a.multiple,a.multiple?[]:"",!1))}i[ts]=a}catch(p){Ie(e,e.return,p)}}break;case 6:if(zt(t,e),nn(e),r&4){if(e.stateNode===null)throw Error(L(162));i=e.stateNode,a=e.memoizedProps;try{i.nodeValue=a}catch(p){Ie(e,e.return,p)}}break;case 3:if(zt(t,e),nn(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Qa(t.containerInfo)}catch(p){Ie(e,e.return,p)}break;case 4:zt(t,e),nn(e);break;case 13:zt(t,e),nn(e),i=e.child,i.flags&8192&&(a=i.memoizedState!==null,i.stateNode.isHidden=a,!a||i.alternate!==null&&i.alternate.memoizedState!==null||(Zy=Le())),r&4&&R0(e);break;case 22:if(c=n!==null&&n.memoizedState!==null,e.mode&1?(rt=(u=rt)||c,zt(t,e),rt=u):zt(t,e),nn(e),r&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!c&&e.mode&1)for(U=e,c=e.child;c!==null;){for(d=U=c;U!==null;){switch(f=U,m=f.child,f.tag){case 0:case 11:case 14:case 15:qa(4,f,f.return);break;case 1:Si(f,f.return);var y=f.stateNode;if(typeof y.componentWillUnmount=="function"){r=f,n=f.return;try{t=r,y.props=t.memoizedProps,y.state=t.memoizedState,y.componentWillUnmount()}catch(p){Ie(r,n,p)}}break;case 5:Si(f,f.return);break;case 22:if(f.memoizedState!==null){D0(d);continue}}m!==null?(m.return=f,U=m):D0(d)}c=c.sibling}e:for(c=null,d=e;;){if(d.tag===5){if(c===null){c=d;try{i=d.stateNode,u?(a=i.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(o=d.stateNode,l=d.memoizedProps.style,s=l!=null&&l.hasOwnProperty("display")?l.display:null,o.style.display=sC("display",s))}catch(p){Ie(e,e.return,p)}}}else if(d.tag===6){if(c===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(p){Ie(e,e.return,p)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===e)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;d.sibling===null;){if(d.return===null||d.return===e)break e;c===d&&(c=null),d=d.return}c===d&&(c=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:zt(t,e),nn(e),r&4&&R0(e);break;case 21:break;default:zt(t,e),nn(e)}}function nn(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(AE(n)){var r=n;break e}n=n.return}throw Error(L(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Ha(i,""),r.flags&=-33);var a=A0(e);Bm(e,a,i);break;case 3:case 4:var s=r.stateNode.containerInfo,o=A0(e);$m(e,o,s);break;default:throw Error(L(161))}}catch(l){Ie(e,e.return,l)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function fR(e,t,n){U=e,DE(e)}function DE(e,t,n){for(var r=(e.mode&1)!==0;U!==null;){var i=U,a=i.child;if(i.tag===22&&r){var s=i.memoizedState!==null||eo;if(!s){var o=i.alternate,l=o!==null&&o.memoizedState!==null||rt;o=eo;var u=rt;if(eo=s,(rt=l)&&!u)for(U=i;U!==null;)s=U,l=s.child,s.tag===22&&s.memoizedState!==null?O0(i):l!==null?(l.return=s,U=l):O0(i);for(;a!==null;)U=a,DE(a),a=a.sibling;U=i,eo=o,rt=u}I0(e)}else i.subtreeFlags&8772&&a!==null?(a.return=i,U=a):I0(e)}}function I0(e){for(;U!==null;){var t=U;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:rt||yl(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!rt)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:Gt(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;a!==null&&g0(t,a,r);break;case 3:var s=t.updateQueue;if(s!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}g0(t,s,n)}break;case 5:var o=t.stateNode;if(n===null&&t.flags&4){n=o;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var d=c.dehydrated;d!==null&&Qa(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(L(163))}rt||t.flags&512&&Vm(t)}catch(f){Ie(t,t.return,f)}}if(t===e){U=null;break}if(n=t.sibling,n!==null){n.return=t.return,U=n;break}U=t.return}}function D0(e){for(;U!==null;){var t=U;if(t===e){U=null;break}var n=t.sibling;if(n!==null){n.return=t.return,U=n;break}U=t.return}}function O0(e){for(;U!==null;){var t=U;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{yl(4,t)}catch(l){Ie(t,n,l)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(l){Ie(t,i,l)}}var a=t.return;try{Vm(t)}catch(l){Ie(t,a,l)}break;case 5:var s=t.return;try{Vm(t)}catch(l){Ie(t,s,l)}}}catch(l){Ie(t,t.return,l)}if(t===e){U=null;break}var o=t.sibling;if(o!==null){o.return=t.return,U=o;break}U=t.return}}var hR=Math.ceil,Go=In.ReactCurrentDispatcher,Xy=In.ReactCurrentOwner,Ot=In.ReactCurrentBatchConfig,oe=0,We=null,Ve=null,Xe=0,gt=0,_i=mr(0),Ue=0,os=null,Br=0,vl=0,Jy=0,Fa=null,ft=null,Zy=0,$i=1/0,vn=null,Ho=!1,zm=null,ar=null,to=!1,Zn=null,Wo=0,Va=0,Um=null,bo=-1,xo=0;function ut(){return oe&6?Le():bo!==-1?bo:bo=Le()}function sr(e){return e.mode&1?oe&2&&Xe!==0?Xe&-Xe:QA.transition!==null?(xo===0&&(xo=wC()),xo):(e=he,e!==0||(e=window.event,e=e===void 0?16:EC(e.type)),e):1}function Yt(e,t,n,r){if(50<Va)throw Va=0,Um=null,Error(L(185));ps(e,n,r),(!(oe&2)||e!==We)&&(e===We&&(!(oe&2)&&(vl|=n),Ue===4&&Qn(e,Xe)),yt(e,r),n===1&&oe===0&&!(t.mode&1)&&($i=Le()+500,hl&&yr()))}function yt(e,t){var n=e.callbackNode;QN(e,t);var r=Po(e,e===We?Xe:0);if(r===0)n!==null&&Gg(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&Gg(n),t===1)e.tag===0?YA(L0.bind(null,e)):GC(L0.bind(null,e)),GA(function(){!(oe&6)&&yr()}),n=null;else{switch(bC(r)){case 1:n=Cy;break;case 4:n=vC;break;case 16:n=jo;break;case 536870912:n=gC;break;default:n=jo}n=zE(n,OE.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function OE(e,t){if(bo=-1,xo=0,oe&6)throw Error(L(327));var n=e.callbackNode;if(Ii()&&e.callbackNode!==n)return null;var r=Po(e,e===We?Xe:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Ko(e,r);else{t=r;var i=oe;oe|=2;var a=qE();(We!==e||Xe!==t)&&(vn=null,$i=Le()+500,Dr(e,t));do try{yR();break}catch(o){LE(e,o)}while(!0);qy(),Go.current=a,oe=i,Ve!==null?t=0:(We=null,Xe=0,t=Ue)}if(t!==0){if(t===2&&(i=vm(e),i!==0&&(r=i,t=Gm(e,i))),t===1)throw n=os,Dr(e,0),Qn(e,r),yt(e,Le()),n;if(t===6)Qn(e,r);else{if(i=e.current.alternate,!(r&30)&&!pR(i)&&(t=Ko(e,r),t===2&&(a=vm(e),a!==0&&(r=a,t=Gm(e,a))),t===1))throw n=os,Dr(e,0),Qn(e,r),yt(e,Le()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(L(345));case 2:Tr(e,ft,vn);break;case 3:if(Qn(e,r),(r&130023424)===r&&(t=Zy+500-Le(),10<t)){if(Po(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){ut(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=Cm(Tr.bind(null,e,ft,vn),t);break}Tr(e,ft,vn);break;case 4:if(Qn(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var s=31-Kt(r);a=1<<s,s=t[s],s>i&&(i=s),r&=~a}if(r=i,r=Le()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*hR(r/1960))-r,10<r){e.timeoutHandle=Cm(Tr.bind(null,e,ft,vn),r);break}Tr(e,ft,vn);break;case 5:Tr(e,ft,vn);break;default:throw Error(L(329))}}}return yt(e,Le()),e.callbackNode===n?OE.bind(null,e):null}function Gm(e,t){var n=Fa;return e.current.memoizedState.isDehydrated&&(Dr(e,t).flags|=256),e=Ko(e,t),e!==2&&(t=ft,ft=n,t!==null&&Hm(t)),e}function Hm(e){ft===null?ft=e:ft.push.apply(ft,e)}function pR(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!Qt(a(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Qn(e,t){for(t&=~Jy,t&=~vl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Kt(t),r=1<<n;e[n]=-1,t&=~r}}function L0(e){if(oe&6)throw Error(L(327));Ii();var t=Po(e,0);if(!(t&1))return yt(e,Le()),null;var n=Ko(e,t);if(e.tag!==0&&n===2){var r=vm(e);r!==0&&(t=r,n=Gm(e,r))}if(n===1)throw n=os,Dr(e,0),Qn(e,t),yt(e,Le()),n;if(n===6)throw Error(L(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Tr(e,ft,vn),yt(e,Le()),null}function ev(e,t){var n=oe;oe|=1;try{return e(t)}finally{oe=n,oe===0&&($i=Le()+500,hl&&yr())}}function zr(e){Zn!==null&&Zn.tag===0&&!(oe&6)&&Ii();var t=oe;oe|=1;var n=Ot.transition,r=he;try{if(Ot.transition=null,he=1,e)return e()}finally{he=r,Ot.transition=n,oe=t,!(oe&6)&&yr()}}function tv(){gt=_i.current,be(_i)}function Dr(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,UA(n)),Ve!==null)for(n=Ve.return;n!==null;){var r=n;switch(Dy(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Do();break;case 3:Fi(),be(pt),be(at),Uy();break;case 5:zy(r);break;case 4:Fi();break;case 13:be(Ee);break;case 19:be(Ee);break;case 10:Fy(r.type._context);break;case 22:case 23:tv()}n=n.return}if(We=e,Ve=e=or(e.current,null),Xe=gt=t,Ue=0,os=null,Jy=vl=Br=0,ft=Fa=null,Nr!==null){for(t=0;t<Nr.length;t++)if(n=Nr[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,a=n.pending;if(a!==null){var s=a.next;a.next=i,r.next=s}n.pending=r}Nr=null}return e}function LE(e,t){do{var n=Ve;try{if(qy(),vo.current=Uo,zo){for(var r=Me.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}zo=!1}if($r=0,He=ze=Me=null,La=!1,is=0,Xy.current=null,n===null||n.return===null){Ue=1,os=t,Ve=null;break}e:{var a=e,s=n.return,o=n,l=t;if(t=Xe,o.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,c=o,d=c.tag;if(!(c.mode&1)&&(d===0||d===11||d===15)){var f=c.alternate;f?(c.updateQueue=f.updateQueue,c.memoizedState=f.memoizedState,c.lanes=f.lanes):(c.updateQueue=null,c.memoizedState=null)}var m=k0(s);if(m!==null){m.flags&=-257,C0(m,s,o,a,t),m.mode&1&&_0(a,u,t),t=m,l=u;var y=t.updateQueue;if(y===null){var p=new Set;p.add(l),t.updateQueue=p}else y.add(l);break e}else{if(!(t&1)){_0(a,u,t),nv();break e}l=Error(L(426))}}else if(Se&&o.mode&1){var x=k0(s);if(x!==null){!(x.flags&65536)&&(x.flags|=256),C0(x,s,o,a,t),Oy(Vi(l,o));break e}}a=l=Vi(l,o),Ue!==4&&(Ue=2),Fa===null?Fa=[a]:Fa.push(a),a=s;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t;var v=bE(a,l,t);v0(a,v);break e;case 1:o=l;var g=a.type,b=a.stateNode;if(!(a.flags&128)&&(typeof g.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(ar===null||!ar.has(b)))){a.flags|=65536,t&=-t,a.lanes|=t;var _=xE(a,o,t);v0(a,_);break e}}a=a.return}while(a!==null)}VE(n)}catch(C){t=C,Ve===n&&n!==null&&(Ve=n=n.return);continue}break}while(!0)}function qE(){var e=Go.current;return Go.current=Uo,e===null?Uo:e}function nv(){(Ue===0||Ue===3||Ue===2)&&(Ue=4),We===null||!(Br&268435455)&&!(vl&268435455)||Qn(We,Xe)}function Ko(e,t){var n=oe;oe|=2;var r=qE();(We!==e||Xe!==t)&&(vn=null,Dr(e,t));do try{mR();break}catch(i){LE(e,i)}while(!0);if(qy(),oe=n,Go.current=r,Ve!==null)throw Error(L(261));return We=null,Xe=0,Ue}function mR(){for(;Ve!==null;)FE(Ve)}function yR(){for(;Ve!==null&&!$N();)FE(Ve)}function FE(e){var t=BE(e.alternate,e,gt);e.memoizedProps=e.pendingProps,t===null?VE(e):Ve=t,Xy.current=null}function VE(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=uR(n,t),n!==null){n.flags&=32767,Ve=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Ue=6,Ve=null;return}}else if(n=lR(n,t,gt),n!==null){Ve=n;return}if(t=t.sibling,t!==null){Ve=t;return}Ve=t=e}while(t!==null);Ue===0&&(Ue=5)}function Tr(e,t,n){var r=he,i=Ot.transition;try{Ot.transition=null,he=1,vR(e,t,n,r)}finally{Ot.transition=i,he=r}return null}function vR(e,t,n,r){do Ii();while(Zn!==null);if(oe&6)throw Error(L(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(L(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(XN(e,a),e===We&&(Ve=We=null,Xe=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||to||(to=!0,zE(jo,function(){return Ii(),null})),a=(n.flags&15990)!==0,n.subtreeFlags&15990||a){a=Ot.transition,Ot.transition=null;var s=he;he=1;var o=oe;oe|=4,Xy.current=null,dR(e,n),IE(n,e),LA(_m),No=!!Sm,_m=Sm=null,e.current=n,fR(n),BN(),oe=o,he=s,Ot.transition=a}else e.current=n;if(to&&(to=!1,Zn=e,Wo=i),a=e.pendingLanes,a===0&&(ar=null),GN(n.stateNode),yt(e,Le()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Ho)throw Ho=!1,e=zm,zm=null,e;return Wo&1&&e.tag!==0&&Ii(),a=e.pendingLanes,a&1?e===Um?Va++:(Va=0,Um=e):Va=0,yr(),null}function Ii(){if(Zn!==null){var e=bC(Wo),t=Ot.transition,n=he;try{if(Ot.transition=null,he=16>e?16:e,Zn===null)var r=!1;else{if(e=Zn,Zn=null,Wo=0,oe&6)throw Error(L(331));var i=oe;for(oe|=4,U=e.current;U!==null;){var a=U,s=a.child;if(U.flags&16){var o=a.deletions;if(o!==null){for(var l=0;l<o.length;l++){var u=o[l];for(U=u;U!==null;){var c=U;switch(c.tag){case 0:case 11:case 15:qa(8,c,a)}var d=c.child;if(d!==null)d.return=c,U=d;else for(;U!==null;){c=U;var f=c.sibling,m=c.return;if(NE(c),c===u){U=null;break}if(f!==null){f.return=m,U=f;break}U=m}}}var y=a.alternate;if(y!==null){var p=y.child;if(p!==null){y.child=null;do{var x=p.sibling;p.sibling=null,p=x}while(p!==null)}}U=a}}if(a.subtreeFlags&2064&&s!==null)s.return=a,U=s;else e:for(;U!==null;){if(a=U,a.flags&2048)switch(a.tag){case 0:case 11:case 15:qa(9,a,a.return)}var v=a.sibling;if(v!==null){v.return=a.return,U=v;break e}U=a.return}}var g=e.current;for(U=g;U!==null;){s=U;var b=s.child;if(s.subtreeFlags&2064&&b!==null)b.return=s,U=b;else e:for(s=g;U!==null;){if(o=U,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:yl(9,o)}}catch(C){Ie(o,o.return,C)}if(o===s){U=null;break e}var _=o.sibling;if(_!==null){_.return=o.return,U=_;break e}U=o.return}}if(oe=i,yr(),on&&typeof on.onPostCommitFiberRoot=="function")try{on.onPostCommitFiberRoot(ll,e)}catch{}r=!0}return r}finally{he=n,Ot.transition=t}}return!1}function q0(e,t,n){t=Vi(n,t),t=bE(e,t,1),e=ir(e,t,1),t=ut(),e!==null&&(ps(e,1,t),yt(e,t))}function Ie(e,t,n){if(e.tag===3)q0(e,e,n);else for(;t!==null;){if(t.tag===3){q0(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ar===null||!ar.has(r))){e=Vi(n,e),e=xE(t,e,1),t=ir(t,e,1),e=ut(),t!==null&&(ps(t,1,e),yt(t,e));break}}t=t.return}}function gR(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=ut(),e.pingedLanes|=e.suspendedLanes&n,We===e&&(Xe&n)===n&&(Ue===4||Ue===3&&(Xe&130023424)===Xe&&500>Le()-Zy?Dr(e,0):Jy|=n),yt(e,t)}function $E(e,t){t===0&&(e.mode&1?(t=Gs,Gs<<=1,!(Gs&130023424)&&(Gs=4194304)):t=1);var n=ut();e=jn(e,t),e!==null&&(ps(e,t,n),yt(e,n))}function wR(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),$E(e,n)}function bR(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(L(314))}r!==null&&r.delete(t),$E(e,n)}var BE;BE=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||pt.current)ht=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return ht=!1,oR(e,t,n);ht=!!(e.flags&131072)}else ht=!1,Se&&t.flags&1048576&&HC(t,qo,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;wo(e,t),e=t.pendingProps;var i=Oi(t,at.current);Ri(t,n),i=Hy(null,t,r,e,i,n);var a=Wy();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,mt(r)?(a=!0,Oo(t)):a=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,$y(t),i.updater=ml,t.stateNode=i,i._reactInternals=t,Am(t,r,e,n),t=Dm(null,t,r,!0,a,n)):(t.tag=0,Se&&a&&Iy(t),lt(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(wo(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=SR(r),e=Gt(r,e),i){case 0:t=Im(null,t,r,e,n);break e;case 1:t=M0(null,t,r,e,n);break e;case 11:t=E0(null,t,r,e,n);break e;case 14:t=T0(null,t,r,Gt(r.type,e),n);break e}throw Error(L(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Gt(r,i),Im(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Gt(r,i),M0(e,t,r,i,n);case 3:e:{if(CE(t),e===null)throw Error(L(387));r=t.pendingProps,a=t.memoizedState,i=a.element,JC(e,t),$o(t,r,null,n);var s=t.memoizedState;if(r=s.element,a.isDehydrated)if(a={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=a,t.memoizedState=a,t.flags&256){i=Vi(Error(L(423)),t),t=j0(e,t,r,n,i);break e}else if(r!==i){i=Vi(Error(L(424)),t),t=j0(e,t,r,n,i);break e}else for(xt=rr(t.stateNode.containerInfo.firstChild),St=t,Se=!0,Wt=null,n=QC(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Li(),r===i){t=Pn(e,t,n);break e}lt(e,t,r,n)}t=t.child}return t;case 5:return ZC(t),e===null&&jm(t),r=t.type,i=t.pendingProps,a=e!==null?e.memoizedProps:null,s=i.children,km(r,i)?s=null:a!==null&&km(r,a)&&(t.flags|=32),kE(e,t),lt(e,t,s,n),t.child;case 6:return e===null&&jm(t),null;case 13:return EE(e,t,n);case 4:return By(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=qi(t,null,r,n):lt(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Gt(r,i),E0(e,t,r,i,n);case 7:return lt(e,t,t.pendingProps,n),t.child;case 8:return lt(e,t,t.pendingProps.children,n),t.child;case 12:return lt(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,a=t.memoizedProps,s=i.value,ge(Fo,r._currentValue),r._currentValue=s,a!==null)if(Qt(a.value,s)){if(a.children===i.children&&!pt.current){t=Pn(e,t,n);break e}}else for(a=t.child,a!==null&&(a.return=t);a!==null;){var o=a.dependencies;if(o!==null){s=a.child;for(var l=o.firstContext;l!==null;){if(l.context===r){if(a.tag===1){l=kn(-1,n&-n),l.tag=2;var u=a.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}a.lanes|=n,l=a.alternate,l!==null&&(l.lanes|=n),Pm(a.return,n,t),o.lanes|=n;break}l=l.next}}else if(a.tag===10)s=a.type===t.type?null:a.child;else if(a.tag===18){if(s=a.return,s===null)throw Error(L(341));s.lanes|=n,o=s.alternate,o!==null&&(o.lanes|=n),Pm(s,n,t),s=a.sibling}else s=a.child;if(s!==null)s.return=a;else for(s=a;s!==null;){if(s===t){s=null;break}if(a=s.sibling,a!==null){a.return=s.return,s=a;break}s=s.return}a=s}lt(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Ri(t,n),i=Lt(i),r=r(i),t.flags|=1,lt(e,t,r,n),t.child;case 14:return r=t.type,i=Gt(r,t.pendingProps),i=Gt(r.type,i),T0(e,t,r,i,n);case 15:return SE(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Gt(r,i),wo(e,t),t.tag=1,mt(r)?(e=!0,Oo(t)):e=!1,Ri(t,n),wE(t,r,i),Am(t,r,i,n),Dm(null,t,r,!0,e,n);case 19:return TE(e,t,n);case 22:return _E(e,t,n)}throw Error(L(156,t.tag))};function zE(e,t){return yC(e,t)}function xR(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Dt(e,t,n,r){return new xR(e,t,n,r)}function rv(e){return e=e.prototype,!(!e||!e.isReactComponent)}function SR(e){if(typeof e=="function")return rv(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Sy)return 11;if(e===_y)return 14}return 2}function or(e,t){var n=e.alternate;return n===null?(n=Dt(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function So(e,t,n,r,i,a){var s=2;if(r=e,typeof e=="function")rv(e)&&(s=1);else if(typeof e=="string")s=5;else e:switch(e){case hi:return Or(n.children,i,a,t);case xy:s=8,i|=8;break;case nm:return e=Dt(12,n,t,i|2),e.elementType=nm,e.lanes=a,e;case rm:return e=Dt(13,n,t,i),e.elementType=rm,e.lanes=a,e;case im:return e=Dt(19,n,t,i),e.elementType=im,e.lanes=a,e;case Zk:return gl(n,i,a,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Xk:s=10;break e;case Jk:s=9;break e;case Sy:s=11;break e;case _y:s=14;break e;case Wn:s=16,r=null;break e}throw Error(L(130,e==null?e:typeof e,""))}return t=Dt(s,n,t,i),t.elementType=e,t.type=r,t.lanes=a,t}function Or(e,t,n,r){return e=Dt(7,e,r,t),e.lanes=n,e}function gl(e,t,n,r){return e=Dt(22,e,r,t),e.elementType=Zk,e.lanes=n,e.stateNode={isHidden:!1},e}function $u(e,t,n){return e=Dt(6,e,null,t),e.lanes=n,e}function Bu(e,t,n){return t=Dt(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function _R(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Su(0),this.expirationTimes=Su(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Su(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function iv(e,t,n,r,i,a,s,o,l){return e=new _R(e,t,n,o,l),t===1?(t=1,a===!0&&(t|=8)):t=0,a=Dt(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},$y(a),e}function kR(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:fi,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function UE(e){if(!e)return cr;e=e._reactInternals;e:{if(Gr(e)!==e||e.tag!==1)throw Error(L(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(mt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(L(171))}if(e.tag===1){var n=e.type;if(mt(n))return UC(e,n,t)}return t}function GE(e,t,n,r,i,a,s,o,l){return e=iv(n,r,!0,e,i,a,s,o,l),e.context=UE(null),n=e.current,r=ut(),i=sr(n),a=kn(r,i),a.callback=t??null,ir(n,a,i),e.current.lanes=i,ps(e,i,r),yt(e,r),e}function wl(e,t,n,r){var i=t.current,a=ut(),s=sr(i);return n=UE(n),t.context===null?t.context=n:t.pendingContext=n,t=kn(a,s),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=ir(i,t,s),e!==null&&(Yt(e,i,s,a),yo(e,i,s)),s}function Yo(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function F0(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function av(e,t){F0(e,t),(e=e.alternate)&&F0(e,t)}function CR(){return null}var HE=typeof reportError=="function"?reportError:function(e){console.error(e)};function sv(e){this._internalRoot=e}bl.prototype.render=sv.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(L(409));wl(e,t,null,null)};bl.prototype.unmount=sv.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;zr(function(){wl(null,e,null,null)}),t[Mn]=null}};function bl(e){this._internalRoot=e}bl.prototype.unstable_scheduleHydration=function(e){if(e){var t=_C();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Yn.length&&t!==0&&t<Yn[n].priority;n++);Yn.splice(n,0,e),n===0&&CC(e)}};function ov(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function xl(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function V0(){}function ER(e,t,n,r,i){if(i){if(typeof r=="function"){var a=r;r=function(){var u=Yo(s);a.call(u)}}var s=GE(t,r,e,0,null,!1,!1,"",V0);return e._reactRootContainer=s,e[Mn]=s.current,Za(e.nodeType===8?e.parentNode:e),zr(),s}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var o=r;r=function(){var u=Yo(l);o.call(u)}}var l=iv(e,0,!1,null,null,!1,!1,"",V0);return e._reactRootContainer=l,e[Mn]=l.current,Za(e.nodeType===8?e.parentNode:e),zr(function(){wl(t,l,n,r)}),l}function Sl(e,t,n,r,i){var a=n._reactRootContainer;if(a){var s=a;if(typeof i=="function"){var o=i;i=function(){var l=Yo(s);o.call(l)}}wl(t,s,e,i)}else s=ER(n,t,e,i,r);return Yo(s)}xC=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=xa(t.pendingLanes);n!==0&&(Ey(t,n|1),yt(t,Le()),!(oe&6)&&($i=Le()+500,yr()))}break;case 13:zr(function(){var r=jn(e,1);if(r!==null){var i=ut();Yt(r,e,1,i)}}),av(e,1)}};Ty=function(e){if(e.tag===13){var t=jn(e,134217728);if(t!==null){var n=ut();Yt(t,e,134217728,n)}av(e,134217728)}};SC=function(e){if(e.tag===13){var t=sr(e),n=jn(e,t);if(n!==null){var r=ut();Yt(n,e,t,r)}av(e,t)}};_C=function(){return he};kC=function(e,t){var n=he;try{return he=e,t()}finally{he=n}};pm=function(e,t,n){switch(t){case"input":if(om(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=fl(r);if(!i)throw Error(L(90));tC(r),om(r,i)}}}break;case"textarea":rC(e,n);break;case"select":t=n.value,t!=null&&ji(e,!!n.multiple,t,!1)}};cC=ev;dC=zr;var TR={usingClientEntryPoint:!1,Events:[ys,vi,fl,lC,uC,ev]},ma={findFiberByHostInstance:Pr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},MR={bundleType:ma.bundleType,version:ma.version,rendererPackageName:ma.rendererPackageName,rendererConfig:ma.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:In.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=pC(e),e===null?null:e.stateNode},findFiberByHostInstance:ma.findFiberByHostInstance||CR,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var no=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!no.isDisabled&&no.supportsFiber)try{ll=no.inject(MR),on=no}catch{}}Et.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=TR;Et.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ov(t))throw Error(L(200));return kR(e,t,null,n)};Et.createRoot=function(e,t){if(!ov(e))throw Error(L(299));var n=!1,r="",i=HE;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=iv(e,1,!1,null,null,n,!1,r,i),e[Mn]=t.current,Za(e.nodeType===8?e.parentNode:e),new sv(t)};Et.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(L(188)):(e=Object.keys(e).join(","),Error(L(268,e)));return e=pC(t),e=e===null?null:e.stateNode,e};Et.flushSync=function(e){return zr(e)};Et.hydrate=function(e,t,n){if(!xl(t))throw Error(L(200));return Sl(null,e,t,!0,n)};Et.hydrateRoot=function(e,t,n){if(!ov(e))throw Error(L(405));var r=n!=null&&n.hydratedSources||null,i=!1,a="",s=HE;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(a=n.identifierPrefix),n.onRecoverableError!==void 0&&(s=n.onRecoverableError)),t=GE(t,null,e,1,n??null,i,!1,a,s),e[Mn]=t.current,Za(e),r)for(e=0;e<r.length;e++)n=r[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new bl(t)};Et.render=function(e,t,n){if(!xl(t))throw Error(L(200));return Sl(null,e,t,!1,n)};Et.unmountComponentAtNode=function(e){if(!xl(e))throw Error(L(40));return e._reactRootContainer?(zr(function(){Sl(null,null,e,!1,function(){e._reactRootContainer=null,e[Mn]=null})}),!0):!1};Et.unstable_batchedUpdates=ev;Et.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!xl(n))throw Error(L(200));if(e==null||e._reactInternals===void 0)throw Error(L(38));return Sl(e,t,n,!1,r)};Et.version="18.3.1-next-f1338f8080-20240426";function WE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(WE)}catch(e){console.error(e)}}WE(),Wk.exports=Et;var jR=Wk.exports,$0=jR;em.createRoot=$0.createRoot,em.hydrateRoot=$0.hydrateRoot;const PR="modulepreload",NR=function(e){return"/agent-director/"+e},B0={},gs=function(t,n,r){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),o=(s==null?void 0:s.nonce)||(s==null?void 0:s.getAttribute("nonce"));i=Promise.allSettled(n.map(l=>{if(l=NR(l),l in B0)return;B0[l]=!0;const u=l.endsWith(".css"),c=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${c}`))return;const d=document.createElement("link");if(d.rel=u?"stylesheet":PR,u||(d.as="script"),d.crossOrigin="",d.href=l,o&&d.setAttribute("nonce",o),document.head.appendChild(d),u)return new Promise((f,m)=>{d.addEventListener("load",f),d.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${l}`)))})}))}function a(s){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s}return i.then(s=>{for(const o of s||[])o.status==="rejected"&&a(o.reason);return t().catch(a)})},AR=()=>h.jsxs("svg",{className:"logo-mark",width:"54",height:"54",viewBox:"0 0 120 120",role:"img","aria-label":"Agent Director logo",children:[h.jsx("rect",{x:"8",y:"8",width:"104",height:"104",rx:"18",className:"logo-frame"}),h.jsx("rect",{x:"24",y:"28",width:"72",height:"16",rx:"6",className:"logo-bar logo-bar-a"}),h.jsx("rect",{x:"24",y:"52",width:"72",height:"16",rx:"6",className:"logo-bar logo-bar-b"}),h.jsx("rect",{x:"24",y:"76",width:"72",height:"16",rx:"6",className:"logo-bar logo-bar-c"}),h.jsx("circle",{cx:"96",cy:"36",r:"6",className:"logo-node logo-node-a"}),h.jsx("circle",{cx:"96",cy:"60",r:"6",className:"logo-node logo-node-b"}),h.jsx("circle",{cx:"96",cy:"84",r:"6",className:"logo-node logo-node-c"})]});function RR({trace:e,traces:t=[],selectedTraceId:n,onSelectTrace:r,onReload:i,onStartTour:a,onToggleStory:s,onOpenPalette:o,onToggleExplain:l,onShareSession:u,onThemeChange:c,onMotionChange:d,themeMode:f="studio",motionMode:m="balanced",activeSessions:y=1,shareStatus:p=null,handoffStatus:x=null,explainMode:v=!1,storyActive:g=!1,mode:b="cinema",missionCompletion:_,runHealthScore:C=100,modeHotkeys:T="C / F / Space",onCreateHandoffDigest:M}){const E=Math.max(0,Math.min(100,Math.round(C))),j=_?`${_.done}/${_.total} missions`:"Missions n/a";return h.jsxs("header",{className:"header","data-help":!0,"data-help-indicator":!0,"data-tour":"header","data-help-title":"Mission control","data-help-body":"Trace identity, status, and live controls live here. Use Story, Guide, or Explain to orient new viewers.","data-help-placement":"bottom",children:[h.jsxs("div",{className:"header-title",children:[h.jsxs("div",{className:"header-logo",children:[h.jsx(AR,{}),h.jsx("span",{children:"Agent Director"})]}),h.jsx("div",{className:"header-tagline",children:"Cinematic trace intelligence for agent runs."}),h.jsxs("div",{className:"header-meta",children:[h.jsxs("span",{className:"header-run",children:["Run: ",(e==null?void 0:e.id)??"loading"]}),t.length>0?h.jsx("select",{className:"trace-select",value:n??(e==null?void 0:e.id)??"","aria-label":"Select trace",onChange:P=>r==null?void 0:r(P.target.value),"data-help":!0,"data-help-title":"Trace selector","data-help-body":"Switch between available runs to compare different sessions.","data-help-placement":"bottom",children:t.map(P=>h.jsxs("option",{value:P.id,children:[P.name," (",P.id,")"]},P.id))}):null,h.jsx("span",{className:`status-pill status-${(e==null?void 0:e.status)??"loading"}`,children:(e==null?void 0:e.status)??"loading"}),e!=null&&e.replay?h.jsxs("span",{className:"header-replay",title:`Replay from ${e.branchPointStepId??"unknown step"}`,children:["Replay: ",e.replay.strategy]}):null,h.jsxs("span",{className:"header-wall",children:["Wall: ",(e==null?void 0:e.metadata.wallTimeMs)??0,"ms"]}),h.jsxs("span",{className:"header-presence","aria-label":"Active sessions",children:["Live: ",y]}),h.jsxs("span",{className:"header-mode-pill","aria-label":"Current mode",children:["Mode: ",b]}),h.jsxs("span",{className:"header-hotkeys","aria-label":"Mode hotkeys",children:["Keys: ",T]}),h.jsx("span",{className:"header-mission","aria-label":"Mission completion",children:j}),h.jsxs("span",{className:"header-health","aria-label":`Run health score ${E}`,children:[h.jsx("span",{className:"header-health-bar",children:h.jsx("span",{className:"header-health-fill",style:{width:`${E}%`}})}),h.jsxs("span",{children:["Health ",E]})]}),p?h.jsx("span",{className:"header-share-status",children:p}):null,x?h.jsx("span",{className:"header-share-status",children:x}):null]})]}),h.jsxs("div",{className:"header-actions",children:[h.jsxs("label",{className:"theme-picker",children:["Theme",h.jsxs("select",{className:"trace-select",value:f,"aria-label":"Select theme",onChange:P=>c==null?void 0:c(P.target.value),children:[h.jsx("option",{value:"studio",children:"Studio"}),h.jsx("option",{value:"focus",children:"Focus"}),h.jsx("option",{value:"contrast",children:"Contrast"})]})]}),h.jsxs("label",{className:"theme-picker",children:["Motion",h.jsxs("select",{className:"trace-select",value:m,"aria-label":"Select motion profile",onChange:P=>d==null?void 0:d(P.target.value),children:[h.jsx("option",{value:"cinematic",children:"Cinematic"}),h.jsx("option",{value:"balanced",children:"Balanced"}),h.jsx("option",{value:"minimal",children:"Minimal"})]})]}),h.jsx("button",{className:`ghost-button ${g?"active":""}`,type:"button",onClick:s,"aria-pressed":g,"aria-label":"Toggle story mode","data-help":!0,"data-help-title":"Story mode","data-help-body":"Auto-runs a cinematic walkthrough for demos.","data-help-placement":"bottom",children:"Story"}),h.jsx("button",{className:"ghost-button",type:"button",onClick:a,"aria-label":"Start guided tour","data-help":!0,"data-help-title":"Guided tour","data-help-body":"Walk through the interface step by step.","data-help-placement":"bottom",children:"Guide"}),h.jsx("button",{className:"ghost-button",type:"button",onClick:o,"aria-label":"Open command palette","data-help":!0,"data-help-title":"Command palette","data-help-body":"Search and trigger any action instantly.","data-help-placement":"bottom",children:"Command"}),h.jsx("button",{className:`ghost-button ${v?"active":""}`,type:"button",onClick:l,"aria-pressed":v,"aria-label":"Toggle explain mode","data-help":!0,"data-help-title":"Explain mode","data-help-body":"Hover any control to see contextual guidance.","data-help-placement":"bottom",children:"Explain"}),h.jsx("button",{className:"ghost-button",onClick:i,type:"button","aria-label":"Refresh traces",title:"Refresh traces","data-help":!0,"data-help-title":"Refresh","data-help-body":"Reload traces from the data store.","data-help-placement":"bottom",children:"Refresh"}),h.jsx("button",{className:"ghost-button",type:"button",onClick:u,"aria-label":"Copy live session link",title:"Copy live session link",children:"Share"}),h.jsx("button",{className:"ghost-button",type:"button",onClick:M,"aria-label":"Copy session handoff digest",title:"Copy session handoff digest",children:"Handoff"}),h.jsx("a",{className:"ghost-button",href:"/help.html",target:"_blank",rel:"noreferrer","data-help":!0,"data-help-title":"Help","data-help-body":"Open quick docs for first run, key flows, troubleshooting, and shortcuts.","data-help-placement":"bottom",children:"Help"}),null]})]})}function IR({insights:e,investigation:t,onSelectStep:n,onJumpToBottleneck:r,onJumpToError:i}){var f,m,y,p,x;if(!e)return null;const a=e.timing,s=e.ioWarnings??[],o=e.concurrency,l=e.retryPatterns,u=e.costByTool??{},c=e.costByModel??{},d=((f=t==null?void 0:t.hypotheses)==null?void 0:f.slice(0,2))??[];return h.jsxs("section",{className:"insight-strip","data-help":!0,"data-help-indicator":!0,"data-tour":"insights","data-help-title":"Run insights","data-help-body":"Fast diagnostics for latency, cost, errors, and concurrency. Click chips to jump into the trace.","data-help-placement":"bottom",children:[h.jsxs("div",{className:"insight-block","data-help":!0,"data-help-title":"Top latency","data-help-body":"Largest steps by duration; jump straight to the slowest.","data-help-placement":"bottom",children:[h.jsx("span",{className:"insight-label",children:"Top latency"}),h.jsxs("div",{className:"insight-items",children:[e.topLatencySteps.map(v=>h.jsxs("button",{className:"insight-chip",type:"button",title:`Jump to ${v.name}`,onClick:()=>n==null?void 0:n(v.stepId),children:[v.name," (",v.durationMs,"ms)"]},v.stepId)),e.topLatencySteps.length>0?h.jsx("button",{className:"insight-chip",type:"button",onClick:r,title:"Jump to longest step",children:"Jump to bottleneck"}):null]})]}),h.jsxs("div",{className:"insight-block","data-help":!0,"data-help-title":"Cost by type","data-help-body":"Aggregated spend by step class.","data-help-placement":"bottom",children:[h.jsx("span",{className:"insight-label",children:"Cost by type"}),h.jsx("div",{className:"insight-items",children:Object.entries(e.costByType).map(([v,g])=>h.jsxs("span",{className:"insight-chip",title:`Total cost for ${v}`,children:[v,": $",g.toFixed(3)]},v))})]}),Object.keys(u).length?h.jsxs("div",{className:"insight-block","data-help":!0,"data-help-title":"Cost by tool","data-help-body":"Top tools by total spend.","data-help-placement":"bottom",children:[h.jsx("span",{className:"insight-label",children:"Cost by tool"}),h.jsx("div",{className:"insight-items",children:Object.entries(u).sort((v,g)=>g[1]-v[1]).slice(0,3).map(([v,g])=>h.jsxs("span",{className:"insight-chip",title:`Total cost for ${v}`,children:[v,": $",g.toFixed(3)]},v))})]}):null,h.jsxs("div",{className:"insight-block","data-help":!0,"data-help-title":"Errors & retries","data-help-body":"Instant visibility into failed or retried steps.","data-help-placement":"bottom",children:[h.jsx("span",{className:"insight-label",children:"Errors / retries"}),h.jsxs("div",{className:"insight-items",children:[h.jsxs("span",{className:"insight-chip",children:["Errors: ",e.errors]}),h.jsxs("span",{className:"insight-chip",children:["Retries: ",e.retries]}),e.errors>0?h.jsx("button",{className:"insight-chip",type:"button",onClick:i,title:"Jump to first error",children:"Jump to first error"}):null,(m=l==null?void 0:l.topRetries)!=null&&m.length?h.jsxs("span",{className:"insight-chip",title:`Retry rate ${(l.retryRate*100).toFixed(1)}%`,children:["Top retries: ",l.topRetries.length]}):null]})]}),h.jsxs("div",{className:"insight-block","data-help":!0,"data-help-title":"Wall vs work","data-help-body":"Wall time vs summed work to show parallelism.","data-help-placement":"bottom",children:[h.jsx("span",{className:"insight-label",children:"Wall vs work"}),h.jsxs("div",{className:"insight-items",children:[h.jsxs("span",{className:"insight-chip",title:"Wall clock duration",children:["Wall: ",e.wallTimeMs,"ms"]}),h.jsxs("span",{className:"insight-chip",title:"Sum of step durations",children:["Work: ",e.workTimeMs,"ms"]}),e.criticalPathMs!=null?h.jsxs("span",{className:"insight-chip",title:"Longest parent-child chain",children:["Critical: ",e.criticalPathMs,"ms"]}):null]})]}),h.jsxs("div",{className:"insight-block","data-help":!0,"data-help-title":"Health","data-help-body":"Timing and I/O anomalies detected in the trace.","data-help-placement":"bottom",children:[h.jsx("span",{className:"insight-label",children:"Health"}),h.jsxs("div",{className:"insight-items",children:[a!=null&&a.degraded?h.jsx("span",{className:"insight-chip insight-warning",title:a.issues.join(" "),children:"Timing degraded"}):h.jsx("span",{className:"insight-chip",children:"Timing OK"}),s.length>0?h.jsxs("span",{className:"insight-chip insight-warning",title:s.map(v=>v.message).join(" "),children:["IO warnings: ",s.length]}):h.jsx("span",{className:"insight-chip",children:"IO OK"})]})]}),d.length?h.jsxs("div",{className:"insight-block","data-help":!0,"data-help-title":"Investigator","data-help-body":"Automated root-cause hypotheses ranked by severity and confidence.","data-help-placement":"bottom",children:[h.jsx("span",{className:"insight-label",children:"Investigator"}),h.jsxs("div",{className:"insight-items",children:[d.map(v=>h.jsxs("span",{className:"insight-chip",title:v.summary,children:[v.title," (",Math.round(v.confidence*100),"%)"]},v.id)),(p=(y=d[0])==null?void 0:y.evidenceStepIds)!=null&&p[0]?h.jsx("button",{className:"insight-chip",type:"button",onClick:()=>n==null?void 0:n(d[0].evidenceStepIds[0]),children:"Jump to evidence"}):null]})]}):null,(x=o==null?void 0:o.buckets)!=null&&x.length?h.jsxs("div",{className:"insight-block","data-help":!0,"data-help-title":"Parallelism","data-help-body":"How many steps ran concurrently over time.","data-help-placement":"bottom",children:[h.jsx("span",{className:"insight-label",children:"Parallelism"}),h.jsx("div",{className:"insight-items",children:h.jsx("div",{className:"insight-heatmap",title:`Peak concurrency: ${o.peak}`,children:o.buckets.map((v,g)=>h.jsx("span",{className:"heatmap-bar",style:{height:`${Math.max(20,v.active/Math.max(1,o.peak)*48)}px`},title:`Bucket ${g+1}: ${v.active} active`},`${v.startMs}-${v.endMs}`))})})]}):null,Object.keys(c).length?h.jsxs("div",{className:"insight-block","data-help":!0,"data-help-title":"Model cost","data-help-body":"Spend by model family.","data-help-placement":"bottom",children:[h.jsx("span",{className:"insight-label",children:"Model cost"}),h.jsx("div",{className:"insight-items",children:Object.entries(c).map(([v,g])=>h.jsxs("span",{className:"insight-chip",title:`Total cost for ${v}`,children:[v,": $",g.toFixed(3)]},v))})]}):null]})}const DR=["all","llm_call","tool_call","decision","handoff","guardrail"];function OR({query:e,typeFilter:t,onQueryChange:n,onTypeFilterChange:r}){return h.jsxs("div",{className:"search-bar",children:[h.jsx("input",{className:"search-input",placeholder:"Search steps, tools, previews...","aria-label":"Search steps",value:e,onChange:i=>n(i.target.value),"data-help":!0,"data-help-title":"Search","data-help-body":"Filter steps by name, tool, or payload preview. Great for fast recall.","data-help-placement":"bottom"}),h.jsx("select",{className:"search-select",value:t,"aria-label":"Filter by step type",onChange:i=>r(i.target.value),"data-help":!0,"data-help-title":"Type filter","data-help-body":"Narrow the timeline to a specific class of steps (LLM, tool, decision, handoff).","data-help-placement":"bottom",children:DR.map(i=>h.jsx("option",{value:i,children:i},i))})]})}function _l(e,t,n){const r=Date.parse(e),i=n.map(c=>Date.parse(c.endedAt??c.startedAt)).filter(c=>Number.isFinite(c)),a=t?Date.parse(t):i.length?Math.max(...i):r,s=Math.max(1,a-r),o=n.map(c=>{const d=Math.max(0,Date.parse(c.startedAt)-r),f=Math.max(d,Date.parse(c.endedAt??c.startedAt)-r);return{stepId:c.id,startMs:d,endMs:f}}).sort((c,d)=>c.startMs-d.startMs||c.endMs-d.endMs),l=[],u=[];for(const c of o){let d=l.findIndex(f=>f<=c.startMs);d===-1?(d=l.length,l.push(c.endMs)):l[d]=c.endMs,u.push({stepId:c.stepId,startMs:c.startMs,endMs:c.endMs,lane:d,xPct:c.startMs/s*100,wPct:Math.max(.75,(c.endMs-c.startMs)/s*100)})}return{wallTimeMs:s,intervals:u,laneCount:l.length}}function LR(e){var y;const n=e.steps.map(p=>({stepId:p.id,name:p.name,durationMs:p.durationMs??0})).sort((p,x)=>x.durationMs-p.durationMs).slice(0,3),r={},i={};for(const p of e.steps)((y=p.metrics)==null?void 0:y.costUsd)!=null&&(r[p.type]=(r[p.type]??0)+p.metrics.costUsd,p.type==="tool_call"&&(i[p.name]=(i[p.name]??0)+p.metrics.costUsd));const a=e.steps.filter(p=>p.status==="failed").length,s=e.steps.filter(p=>!!p.retryOfStepId).length,o=e.metadata.wallTimeMs,l=e.metadata.workTimeMs??e.steps.reduce((p,x)=>p+(x.durationMs??0),0),u=FR(e),c=VR(e.steps),d=$R(e.steps),f=BR(e),m=zR(e.steps);return{topLatencySteps:n,costByType:r,costByTool:i,costByModel:{[e.metadata.modelId]:e.metadata.totalCostUsd??0},errors:a,retries:s,wallTimeMs:o,workTimeMs:l,timing:u,ioWarnings:c,criticalPathMs:d,concurrency:f,retryPatterns:m}}function qR(e){var n;const t=(n=e.metrics)==null?void 0:n.costUsd;return t==null?null:`$${t.toFixed(3)}`}function wn(e){if(!e)return null;const t=Date.parse(e);return Number.isNaN(t)?null:t}function FR(e){const t=wn(e.startedAt),n=wn(e.endedAt??void 0),r=[],i=[],a=[];return t==null&&a.push("Trace start time missing or invalid."),e.steps.forEach(s=>{const o=wn(s.startedAt),l=wn(s.endedAt??s.startedAt);if(o==null||l==null){r.push(s.id);return}if(l<o){i.push(s.id);return}t!=null&&o<t&&i.push(s.id),n!=null&&l>n&&i.push(s.id)}),r.length&&a.push(`Missing timestamps on ${r.length} steps.`),i.length&&a.push(`Timestamp skew detected on ${i.length} steps.`),{degraded:!!(r.length||i.length||t==null),issues:a,missingStepIds:r,skewedStepIds:i}}function VR(e){const t=new Map;e.forEach(a=>{a.type==="tool_call"&&a.toolCallId&&t.set(a.toolCallId,a)});const n=new Set,r=new Set,i=[];return e.forEach(a=>{a.type!=="llm_call"||!a.io||((a.io.emittedToolCallIds??[]).forEach(s=>{n.add(s),t.has(s)||i.push({kind:"missing_tool_step",message:`Emitted toolCallId ${s} has no tool step.`,stepId:a.id,toolCallId:s})}),(a.io.consumedToolCallIds??[]).forEach(s=>{r.add(s),t.has(s)||i.push({kind:"missing_tool_step",message:`Consumed toolCallId ${s} has no tool step.`,stepId:a.id,toolCallId:s}),n.has(s)||i.push({kind:"consume_without_emit",message:`Consumed toolCallId ${s} without emission.`,stepId:a.id,toolCallId:s})}))}),t.forEach((a,s)=>{n.has(s)||i.push({kind:"unemitted_tool",message:`Tool step ${a.id} has toolCallId ${s} never emitted.`,stepId:a.id,toolCallId:s}),r.has(s)||i.push({kind:"unconsumed_tool",message:`Tool step ${a.id} has toolCallId ${s} never consumed.`,stepId:a.id,toolCallId:s})}),i}function $R(e){const t=new Map,n=new Map,r=[];e.forEach(s=>{if(t.set(s.id,s.durationMs??0),s.parentStepId){const o=n.get(s.parentStepId)??[];o.push(s.id),n.set(s.parentStepId,o)}else r.push(s.id)});const i=new Map,a=s=>{if(i.has(s))return i.get(s)??0;const l=(n.get(s)??[]).reduce((c,d)=>Math.max(c,a(d)),0),u=(t.get(s)??0)+l;return i.set(s,u),u};return r.length?Math.max(...r.map(s=>a(s))):0}function BR(e){const t=wn(e.startedAt);if(t==null)return{buckets:[],peak:0};const n=wn(e.endedAt??void 0)??Math.max(...e.steps.map(l=>wn(l.endedAt??l.startedAt)??t),t),r=Math.max(1,n-t),i=12,a=Math.max(1,Math.floor(r/i)),s=[];let o=0;for(let l=0;l<i;l+=1){const u=t+l*a,c=u+a;let d=0;e.steps.forEach(f=>{const m=wn(f.startedAt),y=wn(f.endedAt??f.startedAt);m==null||y==null||y>=u&&m<=c&&(d+=1)}),o=Math.max(o,d),s.push({startMs:l*a,endMs:(l+1)*a,active:d})}return{buckets:s,peak:o}}function zR(e){const t={};e.forEach(i=>{i.retryOfStepId&&(t[i.retryOfStepId]=(t[i.retryOfStepId]??0)+1)});const n=Object.values(t).reduce((i,a)=>i+a,0),r=Object.entries(t).sort((i,a)=>a[1]-i[1]).slice(0,3);return{totalRetries:n,retryRate:e.length?n/e.length:0,topRetries:r.map(([i,a])=>({stepId:i,count:a}))}}const UR={llm_call:{label:"LLM",icon:"LLM",description:"Model call"},tool_call:{label:"TOOL",icon:"TOOL",description:"Tool call"},decision:{label:"DEC",icon:"DEC",description:"Decision"},handoff:{label:"HAND",icon:"HAND",description:"Handoff"},guardrail:{label:"GUARD",icon:"GUARD",description:"Guardrail"}};function GR(e){return UR[e]}function HR({type:e,size:t="sm",showLabel:n=!1}){const r=GR(e);return h.jsxs("span",{className:`step-badge step-badge-${e} step-badge-${t}`,title:r.description,children:[h.jsx("span",{className:"step-badge-icon",children:r.icon}),n?h.jsx("span",{className:"step-badge-label",children:r.label}):null]})}function KE({step:e,interval:t,playbackState:n,selected:r,onSelect:i,variant:a="base",diffStatus:s,disabled:o=!1,laneHeight:l=140}){var _,C,T,M,E,j;const u=qR(e),c=((_=e.preview)==null?void 0:_.subtitle)??((C=e.preview)==null?void 0:C.title)??"",d=((T=e.preview)==null?void 0:T.outputPreview)??((M=e.preview)==null?void 0:M.inputPreview)??"",f=s?`step-diff-${s}`:"",m=a==="ghost"?"step-ghost":"",y=t.wPct<8?"step-compact":"",p=e.type.replace("_"," ").toUpperCase(),x=((E=e.metrics)==null?void 0:E.tokensTotal)!=null?`${e.metrics.tokensTotal} tokens`:null,v=e.durationMs!=null?`${e.durationMs}ms`:null,g=[x,v,u].filter(Boolean).join("  "),b=`Click to inspect inputs/outputs and replay from this moment.${g?` ${g}.`:""}`;return h.jsxs("button",{type:"button",className:`step-card step-${e.type} step-${n} ${r?"step-selected":""} ${f} ${m} ${y}`,"data-step-id":e.id,"aria-pressed":r,"aria-hidden":a==="ghost",disabled:o,"data-help":!0,"data-help-title":`${e.name}  ${p}`,"data-help-body":b,"data-help-placement":"top",style:{left:`${t.xPct}%`,width:`${t.wPct}%`,top:`${t.lane*l}px`},onClick:()=>{o||i(e.id)},children:[h.jsxs("div",{className:"step-card-header",children:[h.jsxs("div",{className:"step-title-group",children:[h.jsx(HR,{type:e.type}),h.jsx("span",{className:"step-title",children:e.name})]}),h.jsx("span",{className:`status-pill status-${e.status}`,children:e.status})]}),c?h.jsx("div",{className:"step-subtitle",children:c}):null,h.jsxs("div",{className:"step-metrics",children:[((j=e.metrics)==null?void 0:j.tokensTotal)!=null?h.jsxs("span",{children:[e.metrics.tokensTotal," tok"]}):null,e.durationMs!=null?h.jsxs("span",{children:[e.durationMs,"ms"]}):null,u?h.jsx("span",{children:u}):null]}),d?h.jsx("div",{className:"step-preview",children:d}):null]})}function YE(e,t){return t<e.startMs?"future":t>e.endMs?"past":"active"}const ya={type:{order:[],hidden:[]},status:{order:[],hidden:[]},parent:{order:[],hidden:[]}};function lv(e,t){return t==="type"?e.type:t==="status"?e.status:e.parentStepId??"root"}function WR(e,t){const n=new Set;return e.forEach(r=>n.add(lv(r,t))),Array.from(n).sort((r,i)=>r.localeCompare(i))}function z0(e,t,n){const r=new Set(e),i=[...t.filter(s=>r.has(s))];e.forEach(s=>{i.includes(s)||i.push(s)});const a=Array.from(new Set(n.filter(s=>r.has(s))));return{order:i,hidden:a}}const KR=140,YR=132,QR=96,U0={llm_call:1,tool_call:2,decision:3,handoff:4,guardrail:5};function QE(e){return[...e].sort((t,n)=>(U0[t.type]??9)-(U0[n.type]??9))}function XR(e,t,n,r,i){const a=new Map;t.forEach(f=>{var y;const m=lv(f,n);a.has(m)||a.set(m,[]),(y=a.get(m))==null||y.push(f)});const s=Array.from(a.keys()),o=[...r.filter(f=>s.includes(f))];s.forEach(f=>{o.includes(f)||o.push(f)});const l=o.filter(f=>!i.includes(f)),u=new Map;let c=0,d=0;return l.forEach(f=>{const m=a.get(f)??[],y=_l(e.startedAt,e.endedAt,m);y.intervals.forEach(p=>{u.set(p.stepId,{...p,lane:p.lane+c})}),c+=Math.max(1,y.laneCount)}),d=Math.max(1,c),{intervalsByStepId:u,laneCount:d,visibleGroups:l}}function JR({trace:e,steps:t,selectedStepId:n,onSelectStep:r,playheadPct:i,playheadMs:a,windowRange:s,ghostTrace:o,diff:l,laneStrategy:u="type",laneGroupsOrder:c=[],hiddenLaneGroups:d=[],laneHeight:f=KR,cardHeight:m=YR,compactHeight:y=QR}){const{intervalsByStepId:p,laneCount:x}=XR(e,t,u,c,d),v=Array.from(p.values()),g=new Map(v.map(A=>[A.stepId,A])),b=QE(t),_=e.metadata.wallTimeMs||1,C=new Set((l==null?void 0:l.removedSteps)??[]),T=new Set((l==null?void 0:l.changedSteps)??[]),M=new Set(((l==null?void 0:l.changedPairs)??[]).map(A=>A.rightId)),E=new Set((l==null?void 0:l.addedSteps)??[]);let j=v;if(s){const A=s.endMs-s.startMs,D=Math.max(1e3,A*.15),q=Math.max(0,s.startMs-D),W=s.endMs+D;if(j=v.filter(V=>V.endMs>=q&&V.startMs<=W),n&&!j.some(V=>V.stepId===n)){const V=g.get(n);V&&(j=[...j,V])}}const P=new Set(j.map(A=>A.stepId));return h.jsx("div",{className:"timeline",style:{"--step-card-height":`${m}px`,"--step-compact-height":`${y}px`},children:h.jsxs("div",{className:"timeline-grid",style:{height:`${x*f}px`},"data-help":!0,"data-help-title":"Timeline lanes","data-help-body":"Each lane stacks overlapping steps; width reflects duration.","data-help-placement":"top",children:[h.jsx("div",{className:"playback-cursor",style:{left:`${i}%`}}),b.filter(A=>P.has(A.id)).filter(A=>!d.includes(lv(A,u))).map(A=>{const D=g.get(A.id);if(!D)return null;const q=YE(D,a);return h.jsx(KE,{step:A,interval:D,playbackState:q,selected:n===A.id,diffStatus:C.has(A.id)?"removed":T.has(A.id)?"changed":null,laneHeight:f,onSelect:r},A.id)}),o?h.jsx(ZR,{ghostTrace:o,baseWallTimeMs:_,playheadMs:a,windowRange:s,diffAdded:E,diffChanged:M,laneHeight:f}):null]})})}function ZR({ghostTrace:e,baseWallTimeMs:t,playheadMs:n,windowRange:r,diffAdded:i,diffChanged:a,laneHeight:s}){const{intervals:o,laneCount:l}=_l(e.startedAt,e.endedAt,e.steps),u=new Map(o.map(p=>[p.stepId,p])),c=e.metadata.wallTimeMs||1,d=n/t*c;let f=o;if(r){const p=r.endMs-r.startMs,x=Math.max(1e3,p*.15),v=c/t,g=Math.max(0,(r.startMs-x)*v),b=Math.min(c,(r.endMs+x)*v);f=o.filter(_=>_.endMs>=g&&_.startMs<=b)}const m=new Set(f.map(p=>p.stepId)),y=QE(e.steps);return h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"ghost-lanes",style:{height:`${l*s}px`}}),y.filter(p=>m.has(p.id)).map(p=>{const x=u.get(p.id);if(!x)return null;const v=YE(x,d),g=i.has(p.id)?"added":a.has(p.id)?"changed":null;return h.jsx(KE,{step:p,interval:x,playbackState:v,selected:!1,diffStatus:g,variant:"ghost",disabled:!0,laneHeight:s,onSelect:()=>{}},`ghost-${p.id}`)})]})}function eI({trace:e,steps:t,selectedStepId:n,onSelectStep:r,playheadMs:i,windowRange:a,timing:s,ghostTrace:o,diff:l,laneStrategy:u,laneGroupsOrder:c,hiddenLaneGroups:d,onLaneStrategyChange:f,onToggleLaneGroupVisibility:m,onMoveLaneGroup:y}){const p=e.metadata.wallTimeMs||1,x=Math.min(100,Math.max(0,i/p*100)),v=c.filter(g=>!d.includes(g)).length;return h.jsxs("section",{className:"cinema-mode","aria-label":"Cinema mode",children:[s!=null&&s.degraded?h.jsxs("div",{className:"timing-banner",title:s.issues.join(" "),children:["Timing degraded: ",s.issues[0]??"Check timestamps."]}):null,h.jsxs("div",{className:"timeline-studio-panel","data-help":!0,"data-help-title":"Timeline studio","data-help-body":"Regroup lanes by type/status/parent, hide noisy groups, and reorder emphasis.",children:[h.jsxs("label",{className:"timeline-studio-strategy",children:["Lane strategy",h.jsxs("select",{value:u,onChange:g=>f(g.target.value),children:[h.jsx("option",{value:"type",children:"Type"}),h.jsx("option",{value:"status",children:"Status"}),h.jsx("option",{value:"parent",children:"Parent branch"})]})]}),h.jsxs("div",{className:"timeline-studio-summary",children:[v,"/",c.length," groups visible"]}),h.jsx("div",{className:"timeline-studio-groups",children:c.map((g,b)=>{const _=d.includes(g);return h.jsxs("div",{className:`timeline-studio-group ${_?"is-hidden":""}`,children:[h.jsx("button",{type:"button",className:"ghost-button",onClick:()=>m(g),children:_?"Show":"Hide"}),h.jsx("span",{className:"timeline-studio-group-name",children:g}),h.jsx("button",{type:"button",className:"ghost-button",onClick:()=>y(g,"up"),disabled:b===0,children:"Up"}),h.jsx("button",{type:"button",className:"ghost-button",onClick:()=>y(g,"down"),disabled:b===c.length-1,children:"Down"})]},g)})})]}),h.jsx(JR,{trace:e,steps:t,selectedStepId:n,onSelectStep:r,playheadPct:x,playheadMs:i,windowRange:a,ghostTrace:o,diff:l,laneStrategy:u,laneGroupsOrder:c,hiddenLaneGroups:d})]})}const tI=[.5,1,1.5,2,4];function G0({playheadMs:e,wallTimeMs:t,isPlaying:n,speed:r,onToggle:i,onScrub:a,onSpeedChange:s}){const o=l=>{a(Number(l.target.value))};return h.jsxs("div",{className:"playback-controls",children:[h.jsx("button",{className:"ghost-button",type:"button",onClick:i,"aria-label":n?"Pause playback":"Play playback","data-help":!0,"data-help-title":"Playhead","data-help-body":"Start or pause the run to experience timing as it unfolded.","data-help-placement":"bottom",children:n?"Pause":"Play"}),h.jsx("input",{className:"playback-slider",type:"range",min:0,max:t,value:e,"aria-label":"Playback position",onChange:o,"data-help":!0,"data-help-title":"Scrub timeline","data-help-body":"Drag to jump to any moment in the run.","data-help-placement":"bottom"}),h.jsx("select",{className:"playback-speed",value:r,"aria-label":"Playback speed",onChange:l=>s(Number(l.target.value)),"data-help":!0,"data-help-title":"Speed","data-help-body":"Slow down to inspect or speed up to skim.","data-help-placement":"bottom",children:tI.map(l=>h.jsxs("option",{value:l,children:[l,"x"]},l))})]})}function nI(e,t,n,r=60){const{wallTimeMs:i,intervals:a}=_l(e,t,n),s=new Array(r).fill(0);if(!i)return{buckets:s,wallTimeMs:0};const o=i/r;return!Number.isFinite(o)||o<=0?{buckets:s,wallTimeMs:i}:(a.forEach(l=>{const u=Math.max(0,Math.floor(l.startMs/o)),c=Math.min(r-1,Math.floor(l.endMs/o));for(let d=u;d<=c;d+=1)s[d]+=1}),{buckets:s,wallTimeMs:i})}function rI(e,t){const n=new Blob([JSON.stringify(t,null,2)],{type:"application/json"}),r=URL.createObjectURL(n),i=document.createElement("a");i.href=r,i.download=e,document.body.appendChild(i),i.click(),i.remove(),URL.revokeObjectURL(r)}function iI(e,t,n="text/plain"){const r=new Blob([t],{type:n}),i=URL.createObjectURL(r),a=document.createElement("a");a.href=i,a.download=e,document.body.appendChild(a),a.click(),a.remove(),URL.revokeObjectURL(i)}const va=5e3,aI=32;function wt(e,t,n){return Math.min(n,Math.max(t,e))}function di(e,t){const n=new Set;return e.forEach(r=>{n.add(wt(Math.round(r),0,t))}),Array.from(n).sort((r,i)=>r-i).slice(0,aI)}function sI(e,t){if(!e)return{bookmarksMs:[],clipStartMs:null,clipEndMs:null,segments:[]};try{const n=JSON.parse(e),r=di(Array.isArray(n.bookmarksMs)?n.bookmarksMs:[],t),i=typeof n.clipStartMs=="number"?wt(n.clipStartMs,0,t):null,a=typeof n.clipEndMs=="number"?wt(n.clipEndMs,0,t):null,s=Array.isArray(n.segments)?n.segments.filter(o=>typeof(o==null?void 0:o.id)=="string"&&typeof(o==null?void 0:o.startMs)=="number"&&typeof(o==null?void 0:o.endMs)=="number"&&typeof(o==null?void 0:o.label)=="string").map(o=>({...o,startMs:wt(o.startMs,0,t),endMs:wt(o.endMs,0,t)})):[];return{bookmarksMs:r,clipStartMs:i,clipEndMs:i!=null&&a!=null&&a<i?i:a,segments:s}}catch{return{bookmarksMs:[],clipStartMs:null,clipEndMs:null,segments:[]}}}function H0(e,t){const n=Date.parse(e);return Number.isNaN(n)?null:new Date(n+t).toISOString()}function oI({traceStart:e,traceEnd:t,steps:n,playheadMs:r,windowRange:i,windowed:a,spanMs:s,onSpanChange:o,onToggleWindowed:l,onScrub:u,persistenceKey:c,laneStrategy:d="type",visibleLaneGroups:f=[],remotePlayheads:m=[]}){const{buckets:y,wallTimeMs:p}=nI(e,t,n,64),x=Math.max(1,...y),v=wt(s,va,Math.max(va,p)),g=(i==null?void 0:i.startMs)??0,b=(i==null?void 0:i.endMs)??p,_=S.useMemo(()=>`agentDirector.timelineStudio.${c??e}`,[c,e]),[C,T]=S.useState([]),[M,E]=S.useState(null),[j,P]=S.useState(null),[A,D]=S.useState([]),[q,W]=S.useState("");S.useEffect(()=>{const B=sI(window.localStorage.getItem(_),p);T(B.bookmarksMs),E(B.clipStartMs),P(B.clipEndMs),D(B.segments)},[_,p]),S.useEffect(()=>{const B={bookmarksMs:di(C,p),clipStartMs:M==null?null:wt(M,0,p),clipEndMs:j==null?null:wt(j,0,p),segments:A};window.localStorage.setItem(_,JSON.stringify(B))},[C,j,M,A,_,p]);const V=p?g/p*100:0,se=p?(b-g)/p*100:100,ee=p?r/p*100:0,I=M!=null&&j!=null?Math.min(M,j):null,F=M!=null&&j!=null?Math.max(M,j):null,R=I!=null&&F!=null&&p?(F-I)/p*100:0,$=I!=null&&p?I/p*100:0,Q=I!=null&&F!=null&&F>I,Pe=B=>{const re=B.currentTarget.getBoundingClientRect(),X=(B.clientX-re.left)/re.width,qe=wt(Math.round(X*p),0,p);u(qe)},le=B=>{if(B.key==="ArrowLeft"){B.preventDefault(),u(wt(r-Math.max(250,Math.round(p*.02)),0,p));return}if(B.key==="ArrowRight"){B.preventDefault(),u(wt(r+Math.max(250,Math.round(p*.02)),0,p));return}if(B.key==="Home"){B.preventDefault(),u(0);return}if(B.key==="End"){B.preventDefault(),u(p);return}(B.key===" "||B.key==="Enter")&&(B.preventDefault(),u(r))},ce=()=>{T(B=>di([...B,r],p))},z=B=>{if(C.length===0)return;const re=di(C,p);if(B==="previous"){const qe=[...re].reverse().find(ie=>ie<r)??re[re.length-1];u(qe);return}const X=re.find(qe=>qe>r)??re[0];u(X)},de=()=>{const B=wt(r,0,p);E(B),j!=null&&j<B&&P(B)},Mt=()=>{const B=wt(r,0,p);P(B),M!=null&&M>B&&E(B)},fn=()=>{E(null),P(null)},Zt=()=>{if(!Q||I==null||F==null)return;const B=q.trim()||`Scene ${A.length+1}`,re=`segment-${Math.random().toString(36).slice(2,9)}`;D(X=>[...X,{id:re,startMs:I,endMs:F,label:B}]),W("")},wr=B=>{D(re=>re.filter(X=>X.id!==B))},Jr=()=>{if(!Q||I==null||F==null)return;const B={type:"agent-director-clip",traceStart:e,traceEnd:t,clip:{startMs:I,endMs:F,startAt:H0(e,I),endAt:H0(e,F)},bookmarksMs:di(C,p).filter(re=>re>=I&&re<=F),playheadMs:r,laneContext:{strategy:d,visibleGroups:f},segments:A.filter(re=>re.endMs>=I&&re.startMs<=F),exportedAt:new Date().toISOString()};rI(`agent-director-clip-${I}-${F}.json`,B)};return h.jsxs("div",{className:"mini-timeline",children:[h.jsxs("div",{className:"mini-track",onClick:Pe,role:"slider",tabIndex:0,"aria-label":"Timeline density map","aria-valuemin":0,"aria-valuemax":p,"aria-valuenow":r,"aria-valuetext":`${r} milliseconds`,onKeyDown:le,"data-help":!0,"data-help-title":"Density map","data-help-body":"A compact view of activity density. Click to jump the playhead.","data-help-placement":"top",children:[h.jsx("div",{className:"mini-bars",children:y.map((B,re)=>h.jsx("span",{className:"mini-bar",style:{height:`${B/x*100}%`}},`bucket-${re}`))}),h.jsx("div",{className:"mini-window",style:{left:`${V}%`,width:`${se}%`,opacity:a?1:.4}}),Q?h.jsx("div",{className:"mini-clip-window",style:{left:`${$}%`,width:`${R}%`}}):null,h.jsx("div",{className:"mini-bookmark-markers","data-testid":"timeline-bookmark-markers","aria-hidden":"true",children:di(C,p).map(B=>{const re=p?B/p*100:0;return h.jsx("button",{type:"button",className:"mini-bookmark-marker",style:{left:`${re}%`},onClick:X=>{X.stopPropagation(),u(B)},title:`Jump to bookmark at ${B}ms`,"aria-label":`Bookmark ${B} milliseconds`},`bookmark-${B}`)})}),h.jsx("div",{className:"mini-remote-markers","aria-hidden":"true",children:m.map((B,re)=>{const X=p?B/p*100:0;return h.jsx("span",{className:"mini-remote-marker",style:{left:`${X}%`}},`remote-${re}`)})}),h.jsx("div",{className:"mini-segments","aria-hidden":"true",children:A.map(B=>{const re=p?B.startMs/p*100:0,X=p?(B.endMs-B.startMs)/p*100:0;return h.jsx("span",{className:"mini-segment-bar",style:{left:`${re}%`,width:`${Math.max(1,X)}%`},title:B.label},B.id)})}),h.jsx("div",{className:"mini-playhead",style:{left:`${ee}%`}})]}),h.jsxs("div",{className:"mini-controls",children:[h.jsx("label",{className:"mini-label",children:"Zoom"}),h.jsx("input",{type:"range",min:va,max:Math.max(va,p),value:v,"aria-label":"Timeline zoom",onChange:B=>{l(!0),o(Number(B.target.value))},"data-help":!0,"data-help-title":"Zoom window","data-help-body":"Tighten the window to focus on hotspots.","data-help-placement":"top"}),h.jsx("button",{className:"ghost-button",type:"button",onClick:()=>l(!a),title:"Toggle windowed playback",children:a?"Full":"Window"}),h.jsx("button",{className:"ghost-button",type:"button",title:"Reset zoom",onClick:()=>{l(!0),o(Math.min(Math.max(p*.2,va),6e4))},children:"Reset"}),h.jsx("button",{className:"ghost-button",type:"button",onClick:ce,children:"Add bookmark"}),h.jsx("button",{className:"ghost-button",type:"button",onClick:()=>z("previous"),children:"Previous bookmark"}),h.jsx("button",{className:"ghost-button",type:"button",onClick:()=>z("next"),children:"Next bookmark"}),h.jsx("button",{className:"ghost-button",type:"button",onClick:de,children:"Set clip start"}),h.jsx("button",{className:"ghost-button",type:"button",onClick:Mt,children:"Set clip end"}),h.jsx("button",{className:"ghost-button",type:"button",onClick:fn,children:"Clear clip"}),h.jsx("input",{className:"search-input mini-segment-input",placeholder:"Segment label",value:q,onChange:B=>W(B.target.value),"aria-label":"Segment label"}),h.jsx("button",{className:"ghost-button",type:"button",onClick:Zt,disabled:!Q,children:"Add segment"}),h.jsx("button",{className:"ghost-button",type:"button",onClick:Jr,disabled:!Q,children:"Export clip"})]}),A.length?h.jsx("div",{className:"mini-segment-list",children:A.map(B=>h.jsxs("div",{className:"mini-segment-item",children:[h.jsxs("span",{children:[B.label," (",B.startMs,"ms - ",B.endMs,"ms)"]}),h.jsx("button",{className:"ghost-button",type:"button",onClick:()=>wr(B.id),children:"Remove"})]},B.id))}):null]})}const lI=[{keys:"Space",action:"Play / pause"},{keys:" / ",action:"Step boundary back / forward"},{keys:"Shift +  / ",action:"Jump to start / end"},{keys:"F",action:"Toggle Flow mode"},{keys:"I",action:"Toggle Inspector"},{keys:"S",action:"Story mode"},{keys:"E",action:"Explain mode"},{keys:"T",action:"Start tour"},{keys:"Cmd/Ctrl + K",action:"Open command palette"},{keys:"?",action:"Show shortcuts"},{keys:"Esc",action:"Close modal / inspector"}];function uI({open:e,onClose:t}){const n=S.useRef(null);if(S.useEffect(()=>{var i;e&&((i=n.current)==null||i.focus())},[e]),!e)return null;const r=i=>{var l;if(i.key==="Escape"){i.preventDefault(),t();return}if(i.key!=="Tab")return;const a=Array.from(i.currentTarget.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'));if(a.length===0)return;const s=a.indexOf(document.activeElement),o=i.shiftKey?s<=0?a.length-1:s-1:(s+1)%a.length;(l=a[o])==null||l.focus(),i.preventDefault()};return h.jsx("div",{className:"modal-backdrop",role:"dialog","aria-modal":"true","aria-labelledby":"shortcuts-title",onKeyDown:r,children:h.jsxs("div",{className:"modal",tabIndex:-1,children:[h.jsxs("div",{className:"modal-header",children:[h.jsx("div",{className:"modal-title",id:"shortcuts-title",children:"Keyboard Shortcuts"}),h.jsx("button",{className:"ghost-button",type:"button",onClick:t,ref:n,"aria-label":"Close shortcuts",children:"Close"})]}),h.jsx("div",{className:"modal-body",children:lI.map(i=>h.jsxs("div",{className:"modal-row",children:[h.jsx("span",{className:"modal-keys",children:i.keys}),h.jsx("span",{className:"modal-action",children:i.action})]},i.keys))})]})})}const W0="agentDirector.palette.recent.v1",K0="agentDirector.palette.pinned.v1",cI=8,dI=12,fI=e=>e.trim().toLowerCase();function Y0(e){try{const t=JSON.parse(window.localStorage.getItem(e)??"[]");return Array.isArray(t)?t.filter(n=>typeof n=="string"):[]}catch{return[]}}function Q0(e,t){window.localStorage.setItem(e,JSON.stringify(t))}function hI(e){const t=new Map;return e.forEach(n=>{var i;const r=n.section;t.has(r)||t.set(r,[]),(i=t.get(r))==null||i.push(n)}),t}function X0(e,t,n){var i;if(!e.length)return 0;let r=t;for(let a=0;a<e.length;a+=1)if(r=(r+n+e.length)%e.length,!((i=e[r])!=null&&i.disabled))return r;return t}function pI({open:e,onClose:t,actions:n}){var M,E;const[r,i]=S.useState(""),[a,s]=S.useState(0),[o,l]=S.useState([]),[u,c]=S.useState([]),d=S.useRef(null),f=S.useRef(null),m=S.useMemo(()=>{const j=fI(r);return j?n.filter(P=>[P.label,P.description,P.group,P.keys].filter(Boolean).join(" ").toLowerCase().includes(j)):n},[n,r]),y=S.useMemo(()=>{const j=new Map(m.map(q=>[q.id,q])),P=u.map(q=>j.get(q)).filter(q=>!!q).map(q=>({...q,section:"Pinned"})),A=o.map(q=>j.get(q)).filter(q=>!!q).filter(q=>!P.some(W=>W.id===q.id)).map(q=>({...q,section:"Recent"})),D=m.filter(q=>!P.some(W=>W.id===q.id)).filter(q=>!A.some(W=>W.id===q.id)).map(q=>({...q,section:q.group??"General"}));return[...P,...A,...D]},[m,u,o]),p=S.useMemo(()=>hI(y),[y]),x=S.useMemo(()=>n.filter(j=>(j.group??"").toLowerCase()==="macros"||j.id.startsWith("macro-")),[n]);if(S.useEffect(()=>{if(!e)return;i(""),s(0),l(Y0(W0)),c(Y0(K0));const j=window.setTimeout(()=>{var P;return(P=d.current)==null?void 0:P.focus()},0);return()=>window.clearTimeout(j)},[e]),S.useEffect(()=>{a>=y.length&&s(0)},[a,y.length]),!e)return null;const v=j=>{l(P=>{const A=[j,...P.filter(D=>D!==j)].slice(0,cI);return Q0(W0,A),A})},g=j=>{j.disabled||(v(j.id),j.onTrigger(),t())},b=j=>{c(P=>{const A=P.includes(j)?P.filter(D=>D!==j):[j,...P].slice(0,dI);return Q0(K0,A),A})},_=j=>{var P,A;if(j.key==="Escape"){j.preventDefault(),t();return}if(j.key==="ArrowDown"){j.preventDefault(),s(D=>X0(y,D,1));return}if(j.key==="ArrowUp"){j.preventDefault(),s(D=>X0(y,D,-1));return}if(j.key==="Enter"){j.preventDefault();const D=y[a];D&&g(D);return}if(j.key==="Tab"){const D=Array.from(((P=f.current)==null?void 0:P.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'))??[]);if(!D.length)return;const q=D.indexOf(document.activeElement),W=j.shiftKey?q<=0?D.length-1:q-1:(q+1)%D.length;(A=D[W])==null||A.focus(),j.preventDefault()}},C=(M=y[a])!=null&&M.id?`palette-option-${(E=y[a])==null?void 0:E.id}`:void 0;let T=-1;return h.jsx("div",{className:"modal-backdrop palette-backdrop",role:"dialog","aria-modal":"true","aria-label":"Command palette",onKeyDown:_,onMouseDown:j=>{j.target===j.currentTarget&&t()},children:h.jsxs("div",{className:"palette",ref:f,children:[h.jsxs("div",{className:"palette-header",children:[h.jsxs("div",{children:[h.jsx("div",{className:"palette-title",children:"Command palette"}),h.jsx("div",{className:"palette-subtitle",children:"Search actions, modes, and playbook steps."})]}),h.jsx("button",{className:"ghost-button",type:"button",onClick:t,"aria-label":"Close command palette",children:"Close"})]}),h.jsx("input",{ref:d,className:"palette-input",value:r,onChange:j=>i(j.target.value),placeholder:"Type to filter actions","aria-label":"Search commands",role:"combobox","aria-expanded":"true","aria-controls":"command-palette-list","aria-activedescendant":C,"aria-autocomplete":"list"}),!r.trim()&&x.length>0?h.jsxs("div",{className:"palette-macros",children:[h.jsx("div",{className:"palette-group-title",children:"Quick macros"}),h.jsx("div",{className:"palette-macro-list",children:x.slice(0,3).map(j=>h.jsx("button",{className:"ghost-button palette-macro-item",type:"button",onClick:()=>g(j),children:j.label},j.id))})]}):null,h.jsxs("div",{className:"palette-list",role:"listbox",id:"command-palette-list",children:[y.length===0?h.jsx("div",{className:"palette-empty",children:"No matching commands."}):null,Array.from(p.entries()).map(([j,P])=>h.jsxs("div",{className:"palette-group",children:[h.jsx("div",{className:"palette-group-title",children:j}),h.jsx("div",{className:"palette-group-list",children:P.map(A=>{T+=1;const D=T===a,q=u.includes(A.id);return h.jsxs("button",{id:`palette-option-${A.id}`,className:`palette-item ${D?"active":""}`,type:"button",role:"option","aria-selected":D,onMouseEnter:()=>s(T),onClick:()=>g(A),disabled:A.disabled,children:[h.jsxs("div",{className:"palette-item-main",children:[h.jsx("div",{className:"palette-item-title",children:A.label}),A.description?h.jsx("div",{className:"palette-item-description",children:A.description}):null]}),h.jsxs("div",{className:"palette-item-trailing",children:[A.keys?h.jsx("div",{className:"palette-item-keys",children:A.keys}):null,h.jsx("span",{className:`palette-pin ${q?"active":""}`,role:"button",tabIndex:0,onClick:W=>{W.stopPropagation(),b(A.id)},onKeyDown:W=>{W.key!=="Enter"&&W.key!==" "||(W.preventDefault(),W.stopPropagation(),b(A.id))},"aria-label":q?`Unpin ${A.label}`:`Pin ${A.label}`,title:q?"Unpin command":"Pin command",children:q?"":""})]})]},A.id)})})]},j))]})]})})}function mI(e){return e.length?e.reduce((t,n)=>(n.durationMs??0)>(t.durationMs??0)?n:t,e[0]):null}function yI({trace:e,mode:t,playheadMs:n,selectedStepId:r,compareTrace:i,collapsed:a,onToggleCollapsed:s,onModeChange:o,onSelectStep:l,onJumpToBottleneck:u,onReplay:c,onStartTour:d,priorityQueue:f=[]}){var A;const m=e.steps??[],y=mI(m),p=r??(y==null?void 0:y.id)??((A=m[0])==null?void 0:A.id)??null,x=t==="cinema"||n>0,v=!!r,g=!!i,b=[x,v,g].filter(Boolean).length,_=[x,v,g].findIndex(D=>!D),C=_===-1?2:_,T=[0,1,2].map(D=>[x,v,g][D]?"done":D===C?"active":"next"),M=[{id:"observe",title:"Act I: Observe",summary:"Scrub the timeline to feel the pacing, bottlenecks, and tool choreography.",status:T[0],actionLabel:"Enter cinema",action:()=>o("cinema"),tasks:[{label:"Scrub the timeline",done:n>0},{label:"Stay in Cinema mode",done:t==="cinema"}]},{id:"inspect",title:"Act II: Inspect",summary:"Open the most expensive or failed step and read the payload with context.",status:T[1],actionLabel:y?"Jump to bottleneck":"Select first step",action:()=>{if(r){o("cinema");return}if(y){u();return}p&&(l(p),o("cinema"))},disabled:!p,tasks:[{label:"Open the Inspector",done:!!r},{label:"Jump to the bottleneck",done:!!(y&&r===y.id)}]},{id:"direct",title:"Act III: Direct",summary:"Replay from a decisive step, then compare flows and diffs side-by-side.",status:T[2],actionLabel:i?"Open compare":"Replay from step",action:()=>{if(i){o("compare");return}p&&c(p)},disabled:!p,tasks:[{label:"Replay from a step",done:!!i},{label:"Compare runs side-by-side",done:!!(i&&t==="compare")}]}],E=M[C],P=f.filter(D=>!D.done)[0];return a?h.jsxs("section",{className:"journey-panel journey-collapsed","aria-label":"Director journey","data-help":!0,"data-help-indicator":!0,"data-tour":"journey","data-help-title":"Director journey","data-help-body":"A guided path from observation to replay. Use it to show newcomers what to do first.","data-help-placement":"bottom",children:[h.jsxs("div",{className:"journey-collapsed-main",children:[h.jsx("div",{className:"journey-eyebrow",children:"Director journey"}),h.jsx("div",{className:"journey-collapsed-title",children:"From observe to direct"})]}),h.jsxs("div",{className:"journey-collapsed-actions",children:[h.jsxs("span",{className:"journey-progress-text",children:[b,"/3 complete"]}),P?h.jsxs("span",{className:`journey-priority-chip severity-${P.severity}`,children:["Next priority: ",P.title]}):null,E?h.jsxs("button",{className:"primary-button journey-next",type:"button",onClick:E.action,disabled:E.disabled,children:["Next: ",E.actionLabel]}):null,d?h.jsx("button",{className:"ghost-button",type:"button",onClick:d,children:"Tour"}):null,h.jsx("button",{className:"primary-button journey-expand",type:"button",onClick:s,children:"Expand"})]})]}):h.jsxs("section",{className:"journey-panel","aria-label":"Director journey","data-help":!0,"data-help-indicator":!0,"data-tour":"journey","data-help-title":"Director journey","data-help-body":"A three-act flow that teaches the story: observe, inspect, direct. Each act jumps to the right place.","data-help-placement":"bottom",children:[h.jsxs("div",{className:"journey-head",children:[h.jsxs("div",{children:[h.jsx("div",{className:"journey-eyebrow",children:"Director journey"}),h.jsx("h2",{className:"journey-title",children:"Cut a perfect take in three acts."}),h.jsx("p",{className:"journey-subtitle",children:"Trace the performance, interrogate the moment, then direct a better run."})]}),h.jsxs("div",{className:"journey-head-actions",children:[d?h.jsx("button",{className:"ghost-button",type:"button",onClick:d,children:"Start tour"}):null,h.jsx("button",{className:"ghost-button",type:"button",onClick:s,children:"Collapse"})]})]}),h.jsx("div",{className:"journey-track",children:M.map((D,q)=>{var W;return h.jsxs("div",{className:"journey-card","data-status":D.status,children:[h.jsxs("div",{className:"journey-card-top",children:[h.jsxs("span",{className:"journey-index",children:["0",q+1]}),h.jsx("span",{className:"journey-status",children:D.status})]}),h.jsx("h3",{className:"journey-card-title",children:D.title}),h.jsx("p",{className:"journey-card-body",children:D.summary}),(W=D.tasks)!=null&&W.length?h.jsx("ul",{className:"journey-tasks",children:D.tasks.map(V=>h.jsxs("li",{className:`journey-task ${V.done?"done":""}`,children:[h.jsx("span",{className:"journey-task-icon","aria-hidden":"true",children:V.done?"":""}),h.jsx("span",{children:V.label})]},V.label))}):null,h.jsx("button",{className:"primary-button journey-action",type:"button",onClick:D.action,disabled:D.disabled,children:D.actionLabel})]},D.id)})}),h.jsxs("div",{className:"journey-footer",children:[h.jsxs("div",{children:[h.jsx("div",{className:"journey-progress-label",children:"Progress"}),h.jsx("div",{className:"journey-progress",children:h.jsx("span",{className:"journey-progress-bar",style:{width:`${b/3*100}%`}})})]}),h.jsx("div",{className:"journey-footnote",children:"Tip: Use Flow to spot fan-out, Compare to validate your changes."})]}),f.length?h.jsxs("div",{className:"journey-priority-queue",children:[h.jsxs("div",{className:"journey-priority-head",children:[h.jsx("div",{className:"journey-progress-label",children:"Priority queue"}),h.jsxs("span",{children:[f.filter(D=>D.done).length,"/",f.length," resolved"]})]}),h.jsx("div",{className:"journey-priority-list",children:f.map(D=>h.jsxs("article",{className:`journey-priority-item ${D.done?"done":""}`,children:[h.jsxs("div",{className:"journey-priority-main",children:[h.jsx("span",{className:`journey-priority-chip severity-${D.severity}`,children:D.severity}),h.jsxs("div",{children:[h.jsx("div",{className:"journey-priority-title",children:D.title}),h.jsx("div",{className:"journey-priority-body",children:D.detail})]})]}),h.jsx("button",{className:"ghost-button",type:"button",onClick:D.onAction,disabled:D.done,children:D.done?"Resolved":D.actionLabel})]},D.id))})]}):null]})}const vI=[],gI=[],wI=[],bI={};function xI(e){return e.length?e.reduce((t,n)=>(n.durationMs??0)>(t.durationMs??0)?n:t,e[0]):null}function SI({trace:e,mode:t,selectedStepId:n,onModeChange:r,onSelectStep:i,onJumpToBottleneck:a,onReplay:s,recommendations:o=vI,persona:l="builder",annotations:u=gI,activityFeed:c=wI,onAddAnnotation:d,missionProgress:f=bI,missionCompletion:m,onResetMissions:y,narrative:p="",onAskDirector:x,onExportNarrative:v}){var ce;const g=e.steps??[],b=xI(g),_=n??(b==null?void 0:b.id)??((ce=g[0])==null?void 0:ce.id)??null,C=e.metadata.wallTimeMs??0,T=l==="executive"?"Executive lens":l==="operator"?"Operator lens":"Builder lens",[M,E]=S.useState(""),[j,P]=S.useState(""),[A,D]=S.useState(""),[q,W]=S.useState("overview"),[V,se]=S.useState([]),ee=S.useMemo(()=>c.slice(0,6),[c]),I=(m==null?void 0:m.done)??0,F=I>=3||!!f.inspect,R=I>=5||!!f.collaborate||ee.length>0,$=S.useMemo(()=>o.slice(0,3).map((z,de)=>({id:z.id,step:`${de+1}. ${z.actionLabel}  ${z.title}`})),[o]);S.useEffect(()=>{se(z=>z.filter(de=>o.some(Mt=>Mt.id===de)))},[o]);const Q=V.filter(z=>o.some(de=>de.id===z)).length,Pe=o.length?Math.round(Q/o.length*100):0,le=z=>{z.action(),se(de=>de.includes(z.id)?de:[...de,z.id])};return h.jsxs("aside",{className:"inspector inspector-empty","data-help":!0,"data-help-indicator":!0,"data-tour":"inspector","data-help-title":"Inspector panel","data-help-body":"Select a step to open detailed payloads, redaction controls, and replay actions.","data-help-placement":"left",children:[h.jsx("div",{className:"inspector-header",children:h.jsxs("div",{children:[h.jsx("div",{className:"inspector-title",children:"Director's notes"}),h.jsxs("div",{className:"inspector-subtitle",children:[T,". Select a step to open deep inspection."]})]})}),h.jsxs("div",{className:"director-tabs",role:"tablist","aria-label":"Director workspace tabs",children:[h.jsx("button",{className:`ghost-button ${q==="overview"?"active":""}`,type:"button",role:"tab","aria-selected":q==="overview",onClick:()=>W("overview"),children:"Overview"}),h.jsx("button",{className:`ghost-button ${q==="narrative"?"active":""}`,type:"button",role:"tab","aria-selected":q==="narrative",onClick:()=>W("narrative"),children:"Narrative"}),h.jsx("button",{className:`ghost-button ${q==="collab"?"active":""}`,type:"button",role:"tab","aria-selected":q==="collab",onClick:()=>W("collab"),children:"Collaboration"})]}),q==="overview"?h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"inspector-section",children:[h.jsx("div",{className:"inspector-section-title",children:"Run summary"}),h.jsxs("div",{className:"inspector-row",children:[h.jsx("span",{children:"Steps"}),h.jsx("span",{children:g.length})]}),h.jsxs("div",{className:"inspector-row",children:[h.jsx("span",{children:"Wall time"}),h.jsxs("span",{children:[C,"ms"]})]}),h.jsxs("div",{className:"inspector-row",children:[h.jsx("span",{children:"Status"}),h.jsx("span",{children:e.status})]})]}),h.jsxs("div",{className:"inspector-section",children:[h.jsx("div",{className:"inspector-section-title",children:"Next actions"}),h.jsxs("div",{className:"director-actions",children:[h.jsx("button",{className:"primary-button",type:"button",onClick:()=>r("cinema"),"data-help":!0,"data-help-title":"Open cinema","data-help-body":"Jump straight into the timeline.","data-help-placement":"right",children:"Open cinema"}),h.jsx("button",{className:"ghost-button",type:"button",onClick:()=>r("flow"),"data-help":!0,"data-help-title":"Open flow","data-help-body":"See the dependency graph of the run.","data-help-placement":"right",children:"Switch to flow"}),h.jsx("button",{className:"ghost-button",type:"button",onClick:()=>{if(!n){if(b){a();return}_&&i(_)}},disabled:!_||!!n,"data-help":!0,"data-help-title":"Jump to bottleneck","data-help-body":"Select the slowest step for inspection.","data-help-placement":"right",children:n?"Inspector open":b?"Jump to bottleneck":"Select first step"}),h.jsx("button",{className:"ghost-button",type:"button",onClick:()=>_&&s(_),disabled:!_||!F,title:F?void 0:"Complete core missions to unlock replay guidance.","data-help":!0,"data-help-title":"Replay","data-help-body":"Branch a replay from a decisive step.","data-help-placement":"right",children:"Replay from step"})]})]}),h.jsxs("div",{className:"inspector-section",children:[h.jsx("div",{className:"inspector-section-title",children:"Mode"}),h.jsxs("div",{className:"director-modes",children:[h.jsx("button",{className:`ghost-button ${t==="cinema"?"active":""}`,type:"button",onClick:()=>r("cinema"),"data-help":!0,"data-help-title":"Cinema mode","data-help-body":"Timeline view for pacing and sequence.","data-help-placement":"right",children:"Cinema"}),h.jsx("button",{className:`ghost-button ${t==="flow"?"active":""}`,type:"button",onClick:()=>r("flow"),"data-help":!0,"data-help-title":"Flow mode","data-help-body":"Graph view for dependencies.","data-help-placement":"right",children:"Flow"}),h.jsx("button",{className:"ghost-button",type:"button",disabled:!0,children:"Compare"})]})]}),h.jsxs("div",{className:"inspector-section",children:[h.jsx("div",{className:"inspector-section-title",children:"Adaptive missions"}),h.jsxs("div",{className:"mission-summary",children:[(m==null?void 0:m.done)??0,"/",(m==null?void 0:m.total)??0," complete",h.jsxs("span",{children:[(m==null?void 0:m.pct)??0,"%"]})]}),h.jsxs("div",{className:"mission-stage",children:["Stage: ",R?"Collaboration":F?"Analysis":"Foundation"]}),h.jsx("div",{className:"mission-grid",children:Object.entries(f).map(([z,de])=>h.jsxs("div",{className:`mission-chip ${de?"done":""}`,children:[h.jsx("span",{children:z}),h.jsx("span",{children:de?"Done":"Pending"})]},z))}),h.jsx("button",{className:"ghost-button",type:"button",onClick:y,children:"Reset missions"})]}),h.jsxs("div",{className:"inspector-section",children:[h.jsx("div",{className:"inspector-section-title",children:"Action plan"}),F?o.length===0?h.jsx("div",{className:"annotation-empty",children:"No recommendations generated yet."}):h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"mission-summary",children:[Q,"/",o.length," complete",h.jsxs("span",{children:[Pe,"%"]})]}),h.jsx("div",{className:"director-recommendations",children:o.map(z=>{const de=V.includes(z.id);return h.jsxs("article",{className:`director-recommendation tone-${z.tone} ${de?"done":""}`,children:[h.jsx("div",{className:"director-recommendation-title",children:z.title}),h.jsx("p",{className:"director-recommendation-body",children:z.body}),h.jsx("button",{className:"ghost-button",type:"button",onClick:()=>le(z),children:de?"Completed":z.actionLabel})]},z.id)})})]}):h.jsx("div",{className:"annotation-empty",children:"Complete inspect/flow/replay missions to unlock AI narrative tools."}),R?null:h.jsx("div",{className:"annotation-empty",children:"Open another live session to unlock collaboration activity feed."})]})]}):null,q==="narrative"?h.jsxs("div",{className:"inspector-section",children:[h.jsx("div",{className:"inspector-section-title",children:"AI director narrative"}),F?h.jsxs(h.Fragment,{children:[h.jsx("p",{className:"director-recommendation-body",children:p}),$.length?h.jsx("div",{className:"director-guided-plan",children:$.map(z=>h.jsx("div",{children:z.step},z.id))}):null,h.jsxs("div",{className:"director-ask-row",children:[h.jsx("input",{className:"search-input",value:j,onChange:z=>P(z.target.value),placeholder:"Ask Director (e.g. what is highest risk?)","aria-label":"Ask director question"}),h.jsx("button",{className:"ghost-button",type:"button",onClick:()=>{j.trim()&&D((x==null?void 0:x(j))??"")},children:"Ask"})]}),A?h.jsx("div",{className:"director-answer",children:A}):null,h.jsx("button",{className:"ghost-button",type:"button",onClick:v,children:"Export narrative"})]}):h.jsx("div",{className:"annotation-empty",children:"Complete inspect/flow/replay missions to unlock AI narrative tools."})]}):null,q==="collab"?h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"inspector-section",children:[h.jsx("div",{className:"inspector-section-title",children:"Shared annotations"}),h.jsx("textarea",{value:M,onChange:z=>E(z.target.value),rows:3,placeholder:n?"Add note for selected step...":"Add trace-level note...","aria-label":"Shared annotation"}),h.jsx("button",{className:"ghost-button",type:"button",onClick:()=>{const z=M.trim();z&&(d==null||d(z,n),E(""))},children:"Add annotation"}),h.jsxs("div",{className:"annotation-list",children:[u.slice(-6).reverse().map(z=>h.jsxs("article",{className:"annotation-item",children:[h.jsxs("div",{className:"annotation-meta",children:[h.jsx("span",{children:z.stepId?`step ${z.stepId}`:"trace"}),h.jsx("span",{children:z.authorSessionId})]}),h.jsx("p",{children:z.body})]},z.id)),u.length===0?h.jsx("div",{className:"annotation-empty",children:"No shared annotations yet."}):null]})]}),h.jsxs("div",{className:"inspector-section",children:[h.jsx("div",{className:"inspector-section-title",children:"Collab activity"}),R?h.jsxs("div",{className:"activity-list",children:[ee.map(z=>h.jsxs("div",{className:"activity-item",children:[h.jsx("span",{children:z.message}),h.jsx("span",{children:new Date(z.timestamp).toLocaleTimeString()})]},z.id)),ee.length===0?h.jsx("div",{className:"annotation-empty",children:"No activity yet."}):null]}):h.jsx("div",{className:"annotation-empty",children:"Open another live session to unlock collaboration activity feed."})]})]}):null]})}const zu=(e,t,n)=>Math.min(n,Math.max(t,e));function Uu(e){return Array.from((e==null?void 0:e.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'))??[]).filter(n=>!(n.hasAttribute("disabled")||n.getAttribute("aria-hidden")==="true"))}function _I({steps:e,open:t,onClose:n,onComplete:r}){const[i,a]=S.useState(0),[s,o]=S.useState(null),[l,u]=S.useState(null),c=S.useRef(null),d=S.useRef(null),f=S.useRef(null),m=S.useMemo(()=>e[i],[e,i]),y=S.useCallback(()=>{if(!t)return;const _=document.querySelector(m.target);if(!_){d.current=null,o(null);return}d.current=_;const C=_.getBoundingClientRect();o(C)},[t,m.target]),p=S.useCallback(()=>{if(!s||!c.current){u(null);return}const _=c.current.offsetWidth,C=c.current.offsetHeight,T=16;let M=zu(s.left+s.width/2-_/2,T,window.innerWidth-_-T),E=s.bottom+16;m.placement==="top"&&(E=s.top-C-16),m.placement==="left"&&(M=s.left-_-16,E=s.top+s.height/2-C/2),m.placement==="right"&&(M=s.right+16,E=s.top+s.height/2-C/2),E+C>window.innerHeight-T&&(E=s.top-C-16),E<T&&(E=s.bottom+16),M=zu(M,T,window.innerWidth-_-T),E=zu(E,T,window.innerHeight-C-T),u({top:E,left:M})},[m.placement,s]);if(S.useEffect(()=>{t&&a(0)},[t]),S.useEffect(()=>{var C,T;if(!t){(T=(C=f.current)==null?void 0:C.focus)==null||T.call(C);return}f.current=document.activeElement;const _=window.setTimeout(()=>{var E;(E=Uu(c.current)[0]??c.current)==null||E.focus()},0);return()=>window.clearTimeout(_)},[t]),S.useEffect(()=>{if(!t)return;const _=document.querySelector(m.target);_&&_.scrollIntoView({behavior:"smooth",block:"center",inline:"center"});const C=window.requestAnimationFrame(()=>y());return()=>window.cancelAnimationFrame(C)},[t,m.target,y]),S.useLayoutEffect(()=>{p()},[s,p,m.title]),S.useEffect(()=>{if(!t)return;const _=()=>{y(),p()};return window.addEventListener("resize",_),window.addEventListener("scroll",_,!0),()=>{window.removeEventListener("resize",_),window.removeEventListener("scroll",_,!0)}},[t,y,p]),S.useEffect(()=>{if(!t)return;const _=C=>{var P;if(C.key==="Escape"){C.preventDefault(),n();return}if(C.key!=="Tab")return;const T=Uu(c.current);if(!T.length)return;const M=document.activeElement,E=T.indexOf(M),j=C.shiftKey?E<=0?T.length-1:E-1:(E+1)%T.length;(P=T[j])==null||P.focus(),C.preventDefault()};return document.addEventListener("keydown",_,!0),()=>document.removeEventListener("keydown",_,!0)},[n,t]),!t||!m)return null;const x=_=>{var j;if(_.key==="Escape"){_.preventDefault(),n();return}if(_.key!=="Tab")return;const C=Uu(c.current);if(C.length===0)return;const T=document.activeElement,M=C.indexOf(T),E=_.shiftKey?M<=0?C.length-1:M-1:(M+1)%C.length;(j=C[E])==null||j.focus(),_.preventDefault()},v=`tour-title-${m.id}`,g=`tour-body-${m.id}`,b=s?{top:s.top-6,left:s.left-6,width:s.width+12,height:s.height+12}:void 0;return h.jsxs("div",{className:"tour-overlay",role:"dialog","aria-modal":"true","aria-label":"Guided tour","aria-labelledby":v,"aria-describedby":g,onKeyDown:x,children:[h.jsx("div",{className:"tour-backdrop",onClick:n}),s?h.jsx("div",{className:"tour-spotlight",style:b}):null,h.jsxs("div",{className:`tour-card ${l?"tour-card-anchored":""}`,ref:c,style:l??void 0,tabIndex:-1,children:[h.jsxs("div",{className:"tour-step",children:["Step ",i+1," of ",e.length]}),h.jsx("div",{className:"tour-title",id:v,children:m.title}),h.jsx("p",{className:"tour-body",id:g,children:m.body}),h.jsxs("div",{className:"tour-actions",children:[h.jsx("button",{className:"ghost-button",type:"button",onClick:()=>a(_=>Math.max(0,_-1)),disabled:i===0,children:"Back"}),h.jsx("button",{className:"ghost-button",type:"button",onClick:n,children:"Skip"}),i===e.length-1?h.jsx("button",{className:"primary-button",type:"button",onClick:r,children:"Finish tour"}):h.jsx("button",{className:"primary-button",type:"button",onClick:()=>a(_=>_+1),children:"Next"})]})]})]})}const J0=(e,t,n)=>Math.min(n,Math.max(t,e));function kI({enabled:e}){const[t,n]=S.useState(null),[r,i]=S.useState(null),a=S.useRef(null),s=S.useRef(null),o=S.useCallback(()=>{const u=a.current;if(!u){n(null);return}const c=u.getBoundingClientRect(),d=u.dataset.helpTitle??"Context",f=u.dataset.helpBody??"",m=u.dataset.helpPlacement??"right";n({rect:c,title:d,body:f,placement:m})},[]);S.useEffect(()=>{if(!e){a.current=null,n(null);return}const u=y=>{var x,v;const p=(v=(x=y.target)==null?void 0:x.closest)==null?void 0:v.call(x,"[data-help]");if(!p){a.current||n(null);return}a.current!==p&&(a.current=p,o())},c=y=>{var x,v;const p=(v=(x=y.target)==null?void 0:x.closest)==null?void 0:v.call(x,"[data-help]");p&&(a.current=p,o())},d=y=>{var x;const p=y.relatedTarget;(x=p==null?void 0:p.closest)!=null&&x.call(p,"[data-help]")||(a.current=null,n(null))},f=y=>{var x,v;const p=(v=(x=y.target)==null?void 0:x.closest)==null?void 0:v.call(x,"[data-help]");if(!p){a.current=null,n(null);return}a.current=p,o()},m=()=>{a.current&&o()};return window.addEventListener("mousemove",u),window.addEventListener("focusin",c),window.addEventListener("focusout",d),window.addEventListener("pointerdown",f),window.addEventListener("scroll",m,!0),window.addEventListener("resize",m),()=>{window.removeEventListener("mousemove",u),window.removeEventListener("focusin",c),window.removeEventListener("focusout",d),window.removeEventListener("pointerdown",f),window.removeEventListener("scroll",m,!0),window.removeEventListener("resize",m)}},[e,o]);const l=S.useCallback(()=>{if(!t||!s.current){i(null);return}const u=12,c=s.current.offsetWidth,d=s.current.offsetHeight,{rect:f,placement:m}=t;let y=f.right+16,p=f.top+f.height/2-d/2;m==="left"&&(y=f.left-c-16,p=f.top+f.height/2-d/2),m==="top"&&(y=f.left+f.width/2-c/2,p=f.top-d-16),m==="bottom"&&(y=f.left+f.width/2-c/2,p=f.bottom+16),y=J0(y,u,window.innerWidth-c-u),p=J0(p,u,window.innerHeight-d-u),i({left:y,top:p})},[t]);return S.useLayoutEffect(()=>{l()},[l]),!e||!t?null:h.jsxs("div",{className:"help-overlay","aria-hidden":"true",children:[h.jsx("div",{className:"help-highlight",style:{top:t.rect.top-6,left:t.rect.left-6,width:t.rect.width+12,height:t.rect.height+12}}),h.jsxs("div",{className:"help-bubble",ref:s,style:r??void 0,"data-placement":t.placement,children:[h.jsx("div",{className:"help-title",children:t.title}),h.jsx("div",{className:"help-body",children:t.body})]})]})}const CI=[{id:"builder",label:"Builder lens",body:"Focus on step payloads, execution paths, and replay control."},{id:"executive",label:"Executive lens",body:"Focus on bottlenecks, risk, and outcome-level run quality."},{id:"operator",label:"Operator lens",body:"Focus on failures, retries, and trace reliability posture."}],EI=[{id:"rapid_triage",label:"Rapid triage",body:"Jump straight to the highest-risk step and start resolution.",estimate:"2-3 min"},{id:"deep_diagnosis",label:"Deep diagnosis",body:"Open flow and guided analysis for full root-cause exploration.",estimate:"8-12 min"},{id:"team_sync",label:"Team sync",body:"Open collaborative mode and prep a handoff workflow.",estimate:"4-6 min"}];function TI({onComplete:e,onStartTour:t,onStartStory:n,persona:r="builder",onPersonaChange:i,launchPath:a="rapid_triage",onLaunchPathChange:s,onStartLaunchPath:o}){const l=()=>{t==null||t(),e()},u=()=>{n==null||n(),e()},c=d=>{s==null||s(d),o==null||o(d),e()};return h.jsx("div",{className:"intro-overlay",role:"dialog","aria-modal":"true","aria-label":"Agent Director intro",children:h.jsxs("div",{className:"intro-card",children:[h.jsx("div",{className:"intro-scan"}),h.jsx("div",{className:"intro-title",children:"Agent Director"}),h.jsx("div",{className:"intro-tagline",children:"Watch your agent think. Then direct it."}),h.jsxs("div",{className:"intro-steps",children:[h.jsxs("div",{className:"intro-step",children:[h.jsx("div",{className:"intro-step-label",children:"Observe"}),h.jsx("div",{className:"intro-step-body",children:"Scrub the timeline to feel pacing and parallelism."})]}),h.jsxs("div",{className:"intro-step",children:[h.jsx("div",{className:"intro-step-label",children:"Inspect"}),h.jsx("div",{className:"intro-step-body",children:"Open the bottleneck to read payloads and costs."})]}),h.jsxs("div",{className:"intro-step",children:[h.jsx("div",{className:"intro-step-label",children:"Direct"}),h.jsx("div",{className:"intro-step-body",children:"Replay from a decisive step and compare runs."})]})]}),h.jsx("div",{className:"intro-personas",role:"group","aria-label":"Select onboarding lens",children:CI.map(d=>h.jsxs("button",{type:"button",className:`ghost-button intro-persona ${r===d.id?"active":""}`,onClick:()=>i==null?void 0:i(d.id),"aria-pressed":r===d.id,"aria-label":d.label,children:[h.jsx("span",{className:"intro-persona-label",children:d.label}),h.jsx("span",{className:"intro-persona-body",children:d.body})]},d.id))}),h.jsx("div",{className:"intro-launch-paths",role:"group","aria-label":"Select launch path",children:EI.map(d=>h.jsxs("article",{className:`intro-path-card ${a===d.id?"active":""}`,children:[h.jsxs("button",{type:"button",className:`ghost-button intro-path-button ${a===d.id?"active":""}`,onClick:()=>s==null?void 0:s(d.id),"aria-pressed":a===d.id,"aria-label":d.label,children:[h.jsx("span",{className:"intro-path-label",children:d.label}),h.jsx("span",{className:"intro-path-estimate",children:d.estimate}),h.jsx("span",{className:"intro-path-body",children:d.body})]}),h.jsxs("button",{className:"primary-button intro-path-start",type:"button",onClick:()=>c(d.id),children:["Start ",d.label]})]},d.id))}),h.jsxs("div",{className:"intro-grid",children:[h.jsx("span",{}),h.jsx("span",{}),h.jsx("span",{}),h.jsx("span",{})]}),h.jsxs("div",{className:"intro-actions",children:[h.jsx("button",{className:"primary-button",type:"button",onClick:l,children:"Start guided tour"}),n?h.jsx("button",{className:"ghost-button",type:"button",onClick:u,children:"Play story mode"}):null,h.jsx("button",{className:"ghost-button",type:"button",onClick:e,children:"Skip intro"})]})]})})}function MI({explainMode:e,storyActive:t,onStartTour:n,onStartStory:r,onToggleExplain:i,onDismiss:a}){return h.jsxs("section",{className:"hero-ribbon","aria-label":"Director briefing","data-help":!0,"data-help-indicator":!0,"data-tour":"hero","data-help-title":"Director briefing","data-help-body":"Start the tour, play story mode, or enable explain to learn the interface instantly.","data-help-placement":"bottom",children:[h.jsxs("div",{className:"hero-ribbon-top",children:[h.jsx("span",{className:"hero-eyebrow",children:"Director briefing"}),h.jsx("button",{className:"ghost-button hero-dismiss",type:"button",onClick:a,children:"Dismiss"})]}),h.jsx("div",{className:"hero-title",children:"Observe. Inspect. Direct."}),h.jsx("div",{className:"hero-subtitle",children:"A cinematic control room for agent traces. See time, read structure, then replay with confidence."}),h.jsxs("div",{className:"hero-pills",children:[h.jsx("span",{className:"hero-pill","data-tone":"observe",children:"Observe"}),h.jsx("span",{className:"hero-pill","data-tone":"inspect",children:"Inspect"}),h.jsx("span",{className:"hero-pill","data-tone":"direct",children:"Direct"})]}),h.jsxs("div",{className:"hero-actions",children:[h.jsx("button",{className:"primary-button",type:"button",onClick:n,children:"Start guided tour"}),h.jsx("button",{className:"ghost-button",type:"button",onClick:r,disabled:t,children:t?"Story running":"Play story mode"}),h.jsxs("button",{className:`ghost-button ${e?"active":""}`,type:"button",onClick:i,"aria-pressed":e,children:["Explain ",e?"On":"Off"]})]})]})}function jI({mode:e,isPlaying:t,storyActive:n,explainMode:r,hidden:i=!1,open:a,onToggleOpen:s,onTogglePlay:o,onStartStory:l,onStopStory:u,onStartTour:c,onOpenPalette:d,onShowShortcuts:f,onToggleExplain:m,onJumpToBottleneck:y}){if(i)return null;const p=t?"Pause":"Play",x=n?"Stop story":"Story mode";return a?h.jsxs("aside",{className:"quick-actions","aria-label":"Quick actions","data-help":!0,"data-help-indicator":!0,"data-tour":"quick-actions","data-help-title":"Quick actions","data-help-body":"Launch story mode, open the command palette, or jump to the bottleneck instantly.","data-help-placement":"left",children:[h.jsxs("div",{className:"quick-actions-header",children:[h.jsxs("div",{children:[h.jsx("div",{className:"quick-actions-title",children:"Quick actions"}),h.jsx("div",{className:"quick-actions-subtitle",children:"Pin demo controls close at hand."})]}),h.jsx("button",{className:"ghost-button",type:"button",onClick:s,"aria-label":"Collapse quick actions",children:"Collapse"})]}),h.jsxs("button",{className:`quick-action ${t?"active":""}`,type:"button",onClick:o,"aria-label":p,"data-help":!0,"data-help-title":"Play or pause","data-help-body":"Start or stop playback from anywhere.","data-help-placement":"left",children:[h.jsx("span",{className:"quick-action-label",children:p}),h.jsx("span",{className:"quick-action-meta",children:e==="flow"?"Cinema":"Space"})]}),h.jsxs("button",{className:`quick-action ${n?"active":""}`,type:"button",onClick:n?u:l,"aria-label":x,"data-help":!0,"data-help-title":"Story mode","data-help-body":"Auto-runs a cinematic walkthrough of the run.","data-help-placement":"left",children:[h.jsx("span",{className:"quick-action-label",children:x}),h.jsx("span",{className:"quick-action-meta",children:"S"})]}),h.jsxs("button",{className:"quick-action",type:"button",onClick:d,"aria-label":"Open command palette","data-help":!0,"data-help-title":"Command palette","data-help-body":"Search every action and jump instantly.","data-help-placement":"left",children:[h.jsx("span",{className:"quick-action-label",children:"Command"}),h.jsx("span",{className:"quick-action-meta",children:"Cmd+K"})]}),h.jsxs("button",{className:"quick-action",type:"button",onClick:c,"aria-label":"Start guided tour","data-help":!0,"data-help-title":"Guided tour","data-help-body":"Walk the interface with a curated tour.","data-help-placement":"left",children:[h.jsx("span",{className:"quick-action-label",children:"Tour"}),h.jsx("span",{className:"quick-action-meta",children:"Guide"})]}),h.jsxs("button",{className:`quick-action ${r?"active":""}`,type:"button",onClick:m,"aria-label":"Toggle explain mode","data-help":!0,"data-help-title":"Explain mode","data-help-body":"Toggle contextual overlays for every control.","data-help-placement":"left",children:[h.jsx("span",{className:"quick-action-label",children:"Explain"}),h.jsx("span",{className:"quick-action-meta",children:r?"On":"Off"})]}),h.jsxs("button",{className:"quick-action",type:"button",onClick:y,"aria-label":"Jump to bottleneck","data-help":!0,"data-help-title":"Bottleneck jump","data-help-body":"Focus instantly on the slowest step.","data-help-placement":"left",children:[h.jsx("span",{className:"quick-action-label",children:"Bottleneck"}),h.jsx("span",{className:"quick-action-meta",children:"Latency"})]}),h.jsxs("button",{className:"quick-action",type:"button",onClick:f,"aria-label":"Show shortcuts","data-help":!0,"data-help-title":"Shortcuts","data-help-body":"See the full keyboard map.","data-help-placement":"left",children:[h.jsx("span",{className:"quick-action-label",children:"Shortcuts"}),h.jsx("span",{className:"quick-action-meta",children:"?"})]})]}):h.jsxs("button",{className:"quick-actions-toggle",type:"button",onClick:s,title:"Open quick actions","aria-expanded":"false","data-help":!0,"data-tour":"quick-actions","data-help-title":"Quick actions","data-help-body":"Open the dock to access demos, shortcuts, and instant actions.","data-help-placement":"left",children:[h.jsx("span",{className:"quick-actions-toggle-label",children:"Actions"}),h.jsx("span",{className:"quick-actions-toggle-meta",children:"Dock"})]})}function PI({active:e,label:t,step:n,total:r,onStop:i,onRestart:a}){if(!e)return null;const s=r>0?(n+1)/r*100:0;return h.jsxs("div",{className:"story-banner",role:"status","aria-live":"polite",children:[h.jsxs("div",{className:"story-banner-main",children:[h.jsx("div",{className:"story-banner-title",children:"Story mode"}),h.jsx("div",{className:"story-banner-step",children:t})]}),h.jsxs("div",{className:"story-banner-actions",children:[h.jsxs("span",{className:"story-banner-count",children:[Math.min(n+1,r),"/",r]}),h.jsx("button",{className:"ghost-button",type:"button",onClick:a,children:"Restart"}),h.jsx("button",{className:"primary-button",type:"button",onClick:i,children:"Stop"})]}),h.jsx("div",{className:"story-banner-progress",children:h.jsx("span",{style:{width:`${s}%`}})})]})}const XE=S.createContext({});function NI(e){const t=S.useRef(null);return t.current===null&&(t.current=e()),t.current}const uv=S.createContext(null),JE=S.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});function AI(e=!0){const t=S.useContext(uv);if(t===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:i}=t,a=S.useId();S.useEffect(()=>{e&&i(a)},[e]);const s=S.useCallback(()=>e&&r&&r(a),[a,r,e]);return!n&&r?[!1,s]:[!0]}const cv=typeof window<"u",RI=cv?S.useLayoutEffect:S.useEffect,_t=e=>e;let ZE=_t;function dv(e){let t;return()=>(t===void 0&&(t=e()),t)}const Bi=(e,t,n)=>{const r=t-e;return r===0?1:(n-e)/r},Cn=e=>e*1e3,En=e=>e/1e3,II={useManualTiming:!1};function DI(e){let t=new Set,n=new Set,r=!1,i=!1;const a=new WeakSet;let s={delta:0,timestamp:0,isProcessing:!1};function o(u){a.has(u)&&(l.schedule(u),e()),u(s)}const l={schedule:(u,c=!1,d=!1)=>{const m=d&&r?t:n;return c&&a.add(u),m.has(u)||m.add(u),u},cancel:u=>{n.delete(u),a.delete(u)},process:u=>{if(s=u,r){i=!0;return}r=!0,[t,n]=[n,t],t.forEach(o),t.clear(),r=!1,i&&(i=!1,l.process(u))}};return l}const ro=["read","resolveKeyframes","update","preRender","render","postRender"],OI=40;function eT(e,t){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},a=()=>n=!0,s=ro.reduce((v,g)=>(v[g]=DI(a),v),{}),{read:o,resolveKeyframes:l,update:u,preRender:c,render:d,postRender:f}=s,m=()=>{const v=performance.now();n=!1,i.delta=r?1e3/60:Math.max(Math.min(v-i.timestamp,OI),1),i.timestamp=v,i.isProcessing=!0,o.process(i),l.process(i),u.process(i),c.process(i),d.process(i),f.process(i),i.isProcessing=!1,n&&t&&(r=!1,e(m))},y=()=>{n=!0,r=!0,i.isProcessing||e(m)};return{schedule:ro.reduce((v,g)=>{const b=s[g];return v[g]=(_,C=!1,T=!1)=>(n||y(),b.schedule(_,C,T)),v},{}),cancel:v=>{for(let g=0;g<ro.length;g++)s[ro[g]].cancel(v)},state:i,steps:s}}const{schedule:xe,cancel:dr,state:Qe,steps:Gu}=eT(typeof requestAnimationFrame<"u"?requestAnimationFrame:_t,!0),tT=S.createContext({strict:!1}),Z0={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},zi={};for(const e in Z0)zi[e]={isEnabled:t=>Z0[e].some(n=>!!t[n])};function LI(e){for(const t in e)zi[t]={...zi[t],...e[t]}}const qI=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Qo(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||qI.has(e)}let nT=e=>!Qo(e);function FI(e){e&&(nT=t=>t.startsWith("on")?!Qo(t):e(t))}try{FI(require("@emotion/is-prop-valid").default)}catch{}function VI(e,t,n){const r={};for(const i in e)i==="values"&&typeof e.values=="object"||(nT(i)||n===!0&&Qo(i)||!t&&!Qo(i)||e.draggable&&i.startsWith("onDrag"))&&(r[i]=e[i]);return r}function $I(e){if(typeof Proxy>"u")return e;const t=new Map,n=(...r)=>e(...r);return new Proxy(n,{get:(r,i)=>i==="create"?e:(t.has(i)||t.set(i,e(i)),t.get(i))})}const kl=S.createContext({});function ls(e){return typeof e=="string"||Array.isArray(e)}function Cl(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}const fv=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],hv=["initial",...fv];function El(e){return Cl(e.animate)||hv.some(t=>ls(e[t]))}function rT(e){return!!(El(e)||e.variants)}function BI(e,t){if(El(e)){const{initial:n,animate:r}=e;return{initial:n===!1||ls(n)?n:void 0,animate:ls(r)?r:void 0}}return e.inherit!==!1?t:{}}function zI(e){const{initial:t,animate:n}=BI(e,S.useContext(kl));return S.useMemo(()=>({initial:t,animate:n}),[ew(t),ew(n)])}function ew(e){return Array.isArray(e)?e.join(" "):e}const UI=Symbol.for("motionComponentSymbol");function ki(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function GI(e,t,n){return S.useCallback(r=>{r&&e.onMount&&e.onMount(r),t&&(r?t.mount(r):t.unmount()),n&&(typeof n=="function"?n(r):ki(n)&&(n.current=r))},[t])}const pv=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),HI="framerAppearId",iT="data-"+pv(HI),{schedule:mv}=eT(queueMicrotask,!1),aT=S.createContext({});function WI(e,t,n,r,i){var a,s;const{visualElement:o}=S.useContext(kl),l=S.useContext(tT),u=S.useContext(uv),c=S.useContext(JE).reducedMotion,d=S.useRef(null);r=r||l.renderer,!d.current&&r&&(d.current=r(e,{visualState:t,parent:o,props:n,presenceContext:u,blockInitialAnimation:u?u.initial===!1:!1,reducedMotionConfig:c}));const f=d.current,m=S.useContext(aT);f&&!f.projection&&i&&(f.type==="html"||f.type==="svg")&&KI(d.current,n,i,m);const y=S.useRef(!1);S.useInsertionEffect(()=>{f&&y.current&&f.update(n,u)});const p=n[iT],x=S.useRef(!!p&&!(!((a=window.MotionHandoffIsComplete)===null||a===void 0)&&a.call(window,p))&&((s=window.MotionHasOptimisedAnimation)===null||s===void 0?void 0:s.call(window,p)));return RI(()=>{f&&(y.current=!0,window.MotionIsMounted=!0,f.updateFeatures(),mv.render(f.render),x.current&&f.animationState&&f.animationState.animateChanges())}),S.useEffect(()=>{f&&(!x.current&&f.animationState&&f.animationState.animateChanges(),x.current&&(queueMicrotask(()=>{var v;(v=window.MotionHandoffMarkAsComplete)===null||v===void 0||v.call(window,p)}),x.current=!1))}),f}function KI(e,t,n,r){const{layoutId:i,layout:a,drag:s,dragConstraints:o,layoutScroll:l,layoutRoot:u}=t;e.projection=new n(e.latestValues,t["data-framer-portal-id"]?void 0:sT(e.parent)),e.projection.setOptions({layoutId:i,layout:a,alwaysMeasureLayout:!!s||o&&ki(o),visualElement:e,animationType:typeof a=="string"?a:"both",initialPromotionConfig:r,layoutScroll:l,layoutRoot:u})}function sT(e){if(e)return e.options.allowProjection!==!1?e.projection:sT(e.parent)}function YI({preloadedFeatures:e,createVisualElement:t,useRender:n,useVisualState:r,Component:i}){var a,s;e&&LI(e);function o(u,c){let d;const f={...S.useContext(JE),...u,layoutId:QI(u)},{isStatic:m}=f,y=zI(u),p=r(u,m);if(!m&&cv){XI();const x=JI(f);d=x.MeasureLayout,y.visualElement=WI(i,p,f,t,x.ProjectionNode)}return h.jsxs(kl.Provider,{value:y,children:[d&&y.visualElement?h.jsx(d,{visualElement:y.visualElement,...f}):null,n(i,u,GI(p,y.visualElement,c),p,m,y.visualElement)]})}o.displayName=`motion.${typeof i=="string"?i:`create(${(s=(a=i.displayName)!==null&&a!==void 0?a:i.name)!==null&&s!==void 0?s:""})`}`;const l=S.forwardRef(o);return l[UI]=i,l}function QI({layoutId:e}){const t=S.useContext(XE).id;return t&&e!==void 0?t+"-"+e:e}function XI(e,t){S.useContext(tT).strict}function JI(e){const{drag:t,layout:n}=zi;if(!t&&!n)return{};const r={...t,...n};return{MeasureLayout:t!=null&&t.isEnabled(e)||n!=null&&n.isEnabled(e)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const ZI=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function yv(e){return typeof e!="string"||e.includes("-")?!1:!!(ZI.indexOf(e)>-1||/[A-Z]/u.test(e))}function tw(e){const t=[{},{}];return e==null||e.values.forEach((n,r)=>{t[0][r]=n.get(),t[1][r]=n.getVelocity()}),t}function vv(e,t,n,r){if(typeof t=="function"){const[i,a]=tw(r);t=t(n!==void 0?n:e.custom,i,a)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[i,a]=tw(r);t=t(n!==void 0?n:e.custom,i,a)}return t}const Wm=e=>Array.isArray(e),eD=e=>!!(e&&typeof e=="object"&&e.mix&&e.toValue),tD=e=>Wm(e)?e[e.length-1]||0:e,it=e=>!!(e&&e.getVelocity);function _o(e){const t=it(e)?e.get():e;return eD(t)?t.toValue():t}function nD({scrapeMotionValuesFromProps:e,createRenderState:t,onUpdate:n},r,i,a){const s={latestValues:rD(r,i,a,e),renderState:t()};return n&&(s.onMount=o=>n({props:r,current:o,...s}),s.onUpdate=o=>n(o)),s}const oT=e=>(t,n)=>{const r=S.useContext(kl),i=S.useContext(uv),a=()=>nD(e,t,r,i);return n?a():NI(a)};function rD(e,t,n,r){const i={},a=r(e,{});for(const f in a)i[f]=_o(a[f]);let{initial:s,animate:o}=e;const l=El(e),u=rT(e);t&&u&&!l&&e.inherit!==!1&&(s===void 0&&(s=t.initial),o===void 0&&(o=t.animate));let c=n?n.initial===!1:!1;c=c||s===!1;const d=c?o:s;if(d&&typeof d!="boolean"&&!Cl(d)){const f=Array.isArray(d)?d:[d];for(let m=0;m<f.length;m++){const y=vv(e,f[m]);if(y){const{transitionEnd:p,transition:x,...v}=y;for(const g in v){let b=v[g];if(Array.isArray(b)){const _=c?b.length-1:0;b=b[_]}b!==null&&(i[g]=b)}for(const g in p)i[g]=p[g]}}}return i}const Ki=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Hr=new Set(Ki),lT=e=>t=>typeof t=="string"&&t.startsWith(e),uT=lT("--"),iD=lT("var(--"),gv=e=>iD(e)?aD.test(e.split("/*")[0].trim()):!1,aD=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,cT=(e,t)=>t&&typeof e=="number"?t.transform(e):e,Nn=(e,t,n)=>n>t?t:n<e?e:n,Yi={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},us={...Yi,transform:e=>Nn(0,1,e)},io={...Yi,default:1},ws=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),Hn=ws("deg"),un=ws("%"),H=ws("px"),sD=ws("vh"),oD=ws("vw"),nw={...un,parse:e=>un.parse(e)/100,transform:e=>un.transform(e*100)},lD={borderWidth:H,borderTopWidth:H,borderRightWidth:H,borderBottomWidth:H,borderLeftWidth:H,borderRadius:H,radius:H,borderTopLeftRadius:H,borderTopRightRadius:H,borderBottomRightRadius:H,borderBottomLeftRadius:H,width:H,maxWidth:H,height:H,maxHeight:H,top:H,right:H,bottom:H,left:H,padding:H,paddingTop:H,paddingRight:H,paddingBottom:H,paddingLeft:H,margin:H,marginTop:H,marginRight:H,marginBottom:H,marginLeft:H,backgroundPositionX:H,backgroundPositionY:H},uD={rotate:Hn,rotateX:Hn,rotateY:Hn,rotateZ:Hn,scale:io,scaleX:io,scaleY:io,scaleZ:io,skew:Hn,skewX:Hn,skewY:Hn,distance:H,translateX:H,translateY:H,translateZ:H,x:H,y:H,z:H,perspective:H,transformPerspective:H,opacity:us,originX:nw,originY:nw,originZ:H},rw={...Yi,transform:Math.round},wv={...lD,...uD,zIndex:rw,size:H,fillOpacity:us,strokeOpacity:us,numOctaves:rw},cD={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},dD=Ki.length;function fD(e,t,n){let r="",i=!0;for(let a=0;a<dD;a++){const s=Ki[a],o=e[s];if(o===void 0)continue;let l=!0;if(typeof o=="number"?l=o===(s.startsWith("scale")?1:0):l=parseFloat(o)===0,!l||n){const u=cT(o,wv[s]);if(!l){i=!1;const c=cD[s]||s;r+=`${c}(${u}) `}n&&(t[s]=u)}}return r=r.trim(),n?r=n(t,i?"":r):i&&(r="none"),r}function bv(e,t,n){const{style:r,vars:i,transformOrigin:a}=e;let s=!1,o=!1;for(const l in t){const u=t[l];if(Hr.has(l)){s=!0;continue}else if(uT(l)){i[l]=u;continue}else{const c=cT(u,wv[l]);l.startsWith("origin")?(o=!0,a[l]=c):r[l]=c}}if(t.transform||(s||n?r.transform=fD(t,e.transform,n):r.transform&&(r.transform="none")),o){const{originX:l="50%",originY:u="50%",originZ:c=0}=a;r.transformOrigin=`${l} ${u} ${c}`}}const hD={offset:"stroke-dashoffset",array:"stroke-dasharray"},pD={offset:"strokeDashoffset",array:"strokeDasharray"};function mD(e,t,n=1,r=0,i=!0){e.pathLength=1;const a=i?hD:pD;e[a.offset]=H.transform(-r);const s=H.transform(t),o=H.transform(n);e[a.array]=`${s} ${o}`}function iw(e,t,n){return typeof e=="string"?e:H.transform(t+n*e)}function yD(e,t,n){const r=iw(t,e.x,e.width),i=iw(n,e.y,e.height);return`${r} ${i}`}function xv(e,{attrX:t,attrY:n,attrScale:r,originX:i,originY:a,pathLength:s,pathSpacing:o=1,pathOffset:l=0,...u},c,d){if(bv(e,u,d),c){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:f,style:m,dimensions:y}=e;f.transform&&(y&&(m.transform=f.transform),delete f.transform),y&&(i!==void 0||a!==void 0||m.transform)&&(m.transformOrigin=yD(y,i!==void 0?i:.5,a!==void 0?a:.5)),t!==void 0&&(f.x=t),n!==void 0&&(f.y=n),r!==void 0&&(f.scale=r),s!==void 0&&mD(f,s,o,l,!1)}const Sv=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),dT=()=>({...Sv(),attrs:{}}),_v=e=>typeof e=="string"&&e.toLowerCase()==="svg";function fT(e,{style:t,vars:n},r,i){Object.assign(e.style,t,i&&i.getProjectionStyles(r));for(const a in n)e.style.setProperty(a,n[a])}const hT=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function pT(e,t,n,r){fT(e,t,void 0,r);for(const i in t.attrs)e.setAttribute(hT.has(i)?i:pv(i),t.attrs[i])}const Xo={};function vD(e){Object.assign(Xo,e)}function mT(e,{layout:t,layoutId:n}){return Hr.has(e)||e.startsWith("origin")||(t||n!==void 0)&&(!!Xo[e]||e==="opacity")}function kv(e,t,n){var r;const{style:i}=e,a={};for(const s in i)(it(i[s])||t.style&&it(t.style[s])||mT(s,e)||((r=n==null?void 0:n.getValue(s))===null||r===void 0?void 0:r.liveStyle)!==void 0)&&(a[s]=i[s]);return a}function yT(e,t,n){const r=kv(e,t,n);for(const i in e)if(it(e[i])||it(t[i])){const a=Ki.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[a]=e[i]}return r}function gD(e,t){try{t.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{t.dimensions={x:0,y:0,width:0,height:0}}}const aw=["x","y","width","height","cx","cy","r"],wD={useVisualState:oT({scrapeMotionValuesFromProps:yT,createRenderState:dT,onUpdate:({props:e,prevProps:t,current:n,renderState:r,latestValues:i})=>{if(!n)return;let a=!!e.drag;if(!a){for(const o in i)if(Hr.has(o)){a=!0;break}}if(!a)return;let s=!t;if(t)for(let o=0;o<aw.length;o++){const l=aw[o];e[l]!==t[l]&&(s=!0)}s&&xe.read(()=>{gD(n,r),xe.render(()=>{xv(r,i,_v(n.tagName),e.transformTemplate),pT(n,r)})})}})},bD={useVisualState:oT({scrapeMotionValuesFromProps:kv,createRenderState:Sv})};function vT(e,t,n){for(const r in t)!it(t[r])&&!mT(r,n)&&(e[r]=t[r])}function xD({transformTemplate:e},t){return S.useMemo(()=>{const n=Sv();return bv(n,t,e),Object.assign({},n.vars,n.style)},[t])}function SD(e,t){const n=e.style||{},r={};return vT(r,n,e),Object.assign(r,xD(e,t)),r}function _D(e,t){const n={},r=SD(e,t);return e.drag&&e.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=r,n}function kD(e,t,n,r){const i=S.useMemo(()=>{const a=dT();return xv(a,t,_v(r),e.transformTemplate),{...a.attrs,style:{...a.style}}},[t]);if(e.style){const a={};vT(a,e.style,e),i.style={...a,...i.style}}return i}function CD(e=!1){return(n,r,i,{latestValues:a},s)=>{const l=(yv(n)?kD:_D)(r,a,s,n),u=VI(r,typeof n=="string",e),c=n!==S.Fragment?{...u,...l,ref:i}:{},{children:d}=r,f=S.useMemo(()=>it(d)?d.get():d,[d]);return S.createElement(n,{...c,children:f})}}function ED(e,t){return function(r,{forwardMotionProps:i}={forwardMotionProps:!1}){const s={...yv(r)?wD:bD,preloadedFeatures:e,useRender:CD(i),createVisualElement:t,Component:r};return YI(s)}}function gT(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}function Tl(e,t,n){const r=e.getProps();return vv(r,t,n!==void 0?n:r.custom,e)}const TD=dv(()=>window.ScrollTimeline!==void 0);class MD{constructor(t){this.stop=()=>this.runAll("stop"),this.animations=t.filter(Boolean)}get finished(){return Promise.all(this.animations.map(t=>"finished"in t?t.finished:t))}getAll(t){return this.animations[0][t]}setAll(t,n){for(let r=0;r<this.animations.length;r++)this.animations[r][t]=n}attachTimeline(t,n){const r=this.animations.map(i=>{if(TD()&&i.attachTimeline)return i.attachTimeline(t);if(typeof n=="function")return n(i)});return()=>{r.forEach((i,a)=>{i&&i(),this.animations[a].stop()})}}get time(){return this.getAll("time")}set time(t){this.setAll("time",t)}get speed(){return this.getAll("speed")}set speed(t){this.setAll("speed",t)}get startTime(){return this.getAll("startTime")}get duration(){let t=0;for(let n=0;n<this.animations.length;n++)t=Math.max(t,this.animations[n].duration);return t}runAll(t){this.animations.forEach(n=>n[t]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class jD extends MD{then(t,n){return Promise.all(this.animations).then(t).catch(n)}}function Cv(e,t){return e?e[t]||e.default||e:void 0}const Km=2e4;function wT(e){let t=0;const n=50;let r=e.next(t);for(;!r.done&&t<Km;)t+=n,r=e.next(t);return t>=Km?1/0:t}function Ev(e){return typeof e=="function"}function sw(e,t){e.timeline=t,e.onfinish=null}const Tv=e=>Array.isArray(e)&&typeof e[0]=="number",PD={linearEasing:void 0};function ND(e,t){const n=dv(e);return()=>{var r;return(r=PD[t])!==null&&r!==void 0?r:n()}}const Jo=ND(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),bT=(e,t,n=10)=>{let r="";const i=Math.max(Math.round(t/n),2);for(let a=0;a<i;a++)r+=e(Bi(0,i-1,a))+", ";return`linear(${r.substring(0,r.length-2)})`};function xT(e){return!!(typeof e=="function"&&Jo()||!e||typeof e=="string"&&(e in Ym||Jo())||Tv(e)||Array.isArray(e)&&e.every(xT))}const _a=([e,t,n,r])=>`cubic-bezier(${e}, ${t}, ${n}, ${r})`,Ym={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:_a([0,.65,.55,1]),circOut:_a([.55,0,1,.45]),backIn:_a([.31,.01,.66,-.59]),backOut:_a([.33,1.53,.69,.99])};function ST(e,t){if(e)return typeof e=="function"&&Jo()?bT(e,t):Tv(e)?_a(e):Array.isArray(e)?e.map(n=>ST(n,t)||Ym.easeOut):Ym[e]}const Ut={x:!1,y:!1};function _T(){return Ut.x||Ut.y}function AD(e,t,n){var r;if(e instanceof Element)return[e];if(typeof e=="string"){let i=document;const a=(r=void 0)!==null&&r!==void 0?r:i.querySelectorAll(e);return a?Array.from(a):[]}return Array.from(e)}function kT(e,t){const n=AD(e),r=new AbortController,i={passive:!0,...t,signal:r.signal};return[n,i,()=>r.abort()]}function ow(e){return t=>{t.pointerType==="touch"||_T()||e(t)}}function RD(e,t,n={}){const[r,i,a]=kT(e,n),s=ow(o=>{const{target:l}=o,u=t(o);if(typeof u!="function"||!l)return;const c=ow(d=>{u(d),l.removeEventListener("pointerleave",c)});l.addEventListener("pointerleave",c,i)});return r.forEach(o=>{o.addEventListener("pointerenter",s,i)}),a}const CT=(e,t)=>t?e===t?!0:CT(e,t.parentElement):!1,Mv=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1,ID=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function DD(e){return ID.has(e.tagName)||e.tabIndex!==-1}const ka=new WeakSet;function lw(e){return t=>{t.key==="Enter"&&e(t)}}function Hu(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const OD=(e,t)=>{const n=e.currentTarget;if(!n)return;const r=lw(()=>{if(ka.has(n))return;Hu(n,"down");const i=lw(()=>{Hu(n,"up")}),a=()=>Hu(n,"cancel");n.addEventListener("keyup",i,t),n.addEventListener("blur",a,t)});n.addEventListener("keydown",r,t),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),t)};function uw(e){return Mv(e)&&!_T()}function LD(e,t,n={}){const[r,i,a]=kT(e,n),s=o=>{const l=o.currentTarget;if(!uw(o)||ka.has(l))return;ka.add(l);const u=t(o),c=(m,y)=>{window.removeEventListener("pointerup",d),window.removeEventListener("pointercancel",f),!(!uw(m)||!ka.has(l))&&(ka.delete(l),typeof u=="function"&&u(m,{success:y}))},d=m=>{c(m,n.useGlobalTarget||CT(l,m.target))},f=m=>{c(m,!1)};window.addEventListener("pointerup",d,i),window.addEventListener("pointercancel",f,i)};return r.forEach(o=>{!DD(o)&&o.getAttribute("tabindex")===null&&(o.tabIndex=0),(n.useGlobalTarget?window:o).addEventListener("pointerdown",s,i),o.addEventListener("focus",u=>OD(u,i),i)}),a}function qD(e){return e==="x"||e==="y"?Ut[e]?null:(Ut[e]=!0,()=>{Ut[e]=!1}):Ut.x||Ut.y?null:(Ut.x=Ut.y=!0,()=>{Ut.x=Ut.y=!1})}const ET=new Set(["width","height","top","left","right","bottom",...Ki]);let ko;function FD(){ko=void 0}const cn={now:()=>(ko===void 0&&cn.set(Qe.isProcessing||II.useManualTiming?Qe.timestamp:performance.now()),ko),set:e=>{ko=e,queueMicrotask(FD)}};function jv(e,t){e.indexOf(t)===-1&&e.push(t)}function Pv(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}class Nv{constructor(){this.subscriptions=[]}add(t){return jv(this.subscriptions,t),()=>Pv(this.subscriptions,t)}notify(t,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](t,n,r);else for(let a=0;a<i;a++){const s=this.subscriptions[a];s&&s(t,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function TT(e,t){return t?e*(1e3/t):0}const cw=30,VD=e=>!isNaN(parseFloat(e));class $D{constructor(t,n={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,i=!0)=>{const a=cn.now();this.updatedAt!==a&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(t),this.owner=n.owner}setCurrent(t){this.current=t,this.updatedAt=cn.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=VD(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,n){this.events[t]||(this.events[t]=new Nv);const r=this.events[t].add(n);return t==="change"?()=>{r(),xe.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,n){this.passiveEffect=t,this.stopPassiveEffect=n}set(t,n=!0){!n||!this.passiveEffect?this.updateAndNotify(t,n):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-r}jump(t,n=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=cn.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>cw)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,cw);return TT(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(t){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=t(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function cs(e,t){return new $D(e,t)}function BD(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,cs(n))}function zD(e,t){const n=Tl(e,t);let{transitionEnd:r={},transition:i={},...a}=n||{};a={...a,...r};for(const s in a){const o=tD(a[s]);BD(e,s,o)}}function UD(e){return!!(it(e)&&e.add)}function Qm(e,t){const n=e.getValue("willChange");if(UD(n))return n.add(t)}function MT(e){return e.props[iT]}const jT=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,GD=1e-7,HD=12;function WD(e,t,n,r,i){let a,s,o=0;do s=t+(n-t)/2,a=jT(s,r,i)-e,a>0?n=s:t=s;while(Math.abs(a)>GD&&++o<HD);return s}function bs(e,t,n,r){if(e===t&&n===r)return _t;const i=a=>WD(a,0,1,e,n);return a=>a===0||a===1?a:jT(i(a),t,r)}const PT=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,NT=e=>t=>1-e(1-t),AT=bs(.33,1.53,.69,.99),Av=NT(AT),RT=PT(Av),IT=e=>(e*=2)<1?.5*Av(e):.5*(2-Math.pow(2,-10*(e-1))),Rv=e=>1-Math.sin(Math.acos(e)),DT=NT(Rv),OT=PT(Rv),LT=e=>/^0[^.\s]+$/u.test(e);function KD(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||LT(e):!0}const $a=e=>Math.round(e*1e5)/1e5,Iv=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function YD(e){return e==null}const QD=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Dv=(e,t)=>n=>!!(typeof n=="string"&&QD.test(n)&&n.startsWith(e)||t&&!YD(n)&&Object.prototype.hasOwnProperty.call(n,t)),qT=(e,t,n)=>r=>{if(typeof r!="string")return r;const[i,a,s,o]=r.match(Iv);return{[e]:parseFloat(i),[t]:parseFloat(a),[n]:parseFloat(s),alpha:o!==void 0?parseFloat(o):1}},XD=e=>Nn(0,255,e),Wu={...Yi,transform:e=>Math.round(XD(e))},Rr={test:Dv("rgb","red"),parse:qT("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:r=1})=>"rgba("+Wu.transform(e)+", "+Wu.transform(t)+", "+Wu.transform(n)+", "+$a(us.transform(r))+")"};function JD(e){let t="",n="",r="",i="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),r=e.substring(5,7),i=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),r=e.substring(3,4),i=e.substring(4,5),t+=t,n+=n,r+=r,i+=i),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const Xm={test:Dv("#"),parse:JD,transform:Rr.transform},Ci={test:Dv("hsl","hue"),parse:qT("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:r=1})=>"hsla("+Math.round(e)+", "+un.transform($a(t))+", "+un.transform($a(n))+", "+$a(us.transform(r))+")"},nt={test:e=>Rr.test(e)||Xm.test(e)||Ci.test(e),parse:e=>Rr.test(e)?Rr.parse(e):Ci.test(e)?Ci.parse(e):Xm.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?Rr.transform(e):Ci.transform(e)},ZD=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function e2(e){var t,n;return isNaN(e)&&typeof e=="string"&&(((t=e.match(Iv))===null||t===void 0?void 0:t.length)||0)+(((n=e.match(ZD))===null||n===void 0?void 0:n.length)||0)>0}const FT="number",VT="color",t2="var",n2="var(",dw="${}",r2=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function ds(e){const t=e.toString(),n=[],r={color:[],number:[],var:[]},i=[];let a=0;const o=t.replace(r2,l=>(nt.test(l)?(r.color.push(a),i.push(VT),n.push(nt.parse(l))):l.startsWith(n2)?(r.var.push(a),i.push(t2),n.push(l)):(r.number.push(a),i.push(FT),n.push(parseFloat(l))),++a,dw)).split(dw);return{values:n,split:o,indexes:r,types:i}}function $T(e){return ds(e).values}function BT(e){const{split:t,types:n}=ds(e),r=t.length;return i=>{let a="";for(let s=0;s<r;s++)if(a+=t[s],i[s]!==void 0){const o=n[s];o===FT?a+=$a(i[s]):o===VT?a+=nt.transform(i[s]):a+=i[s]}return a}}const i2=e=>typeof e=="number"?0:e;function a2(e){const t=$T(e);return BT(e)(t.map(i2))}const fr={test:e2,parse:$T,createTransformer:BT,getAnimatableNone:a2},s2=new Set(["brightness","contrast","saturate","opacity"]);function o2(e){const[t,n]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[r]=n.match(Iv)||[];if(!r)return e;const i=n.replace(r,"");let a=s2.has(t)?1:0;return r!==n&&(a*=100),t+"("+a+i+")"}const l2=/\b([a-z-]*)\(.*?\)/gu,Jm={...fr,getAnimatableNone:e=>{const t=e.match(l2);return t?t.map(o2).join(" "):e}},u2={...wv,color:nt,backgroundColor:nt,outlineColor:nt,fill:nt,stroke:nt,borderColor:nt,borderTopColor:nt,borderRightColor:nt,borderBottomColor:nt,borderLeftColor:nt,filter:Jm,WebkitFilter:Jm},Ov=e=>u2[e];function zT(e,t){let n=Ov(e);return n!==Jm&&(n=fr),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const c2=new Set(["auto","none","0"]);function d2(e,t,n){let r=0,i;for(;r<e.length&&!i;){const a=e[r];typeof a=="string"&&!c2.has(a)&&ds(a).values.length&&(i=e[r]),r++}if(i&&n)for(const a of t)e[a]=zT(n,i)}const fw=e=>e===Yi||e===H,hw=(e,t)=>parseFloat(e.split(", ")[t]),pw=(e,t)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const i=r.match(/^matrix3d\((.+)\)$/u);if(i)return hw(i[1],t);{const a=r.match(/^matrix\((.+)\)$/u);return a?hw(a[1],e):0}},f2=new Set(["x","y","z"]),h2=Ki.filter(e=>!f2.has(e));function p2(e){const t=[];return h2.forEach(n=>{const r=e.getValue(n);r!==void 0&&(t.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),t}const Ui={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:pw(4,13),y:pw(5,14)};Ui.translateX=Ui.x;Ui.translateY=Ui.y;const Lr=new Set;let Zm=!1,ey=!1;function UT(){if(ey){const e=Array.from(Lr).filter(r=>r.needsMeasurement),t=new Set(e.map(r=>r.element)),n=new Map;t.forEach(r=>{const i=p2(r);i.length&&(n.set(r,i),r.render())}),e.forEach(r=>r.measureInitialState()),t.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([a,s])=>{var o;(o=r.getValue(a))===null||o===void 0||o.set(s)})}),e.forEach(r=>r.measureEndState()),e.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}ey=!1,Zm=!1,Lr.forEach(e=>e.complete()),Lr.clear()}function GT(){Lr.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(ey=!0)})}function m2(){GT(),UT()}class Lv{constructor(t,n,r,i,a,s=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...t],this.onComplete=n,this.name=r,this.motionValue=i,this.element=a,this.isAsync=s}scheduleResolve(){this.isScheduled=!0,this.isAsync?(Lr.add(this),Zm||(Zm=!0,xe.read(GT),xe.resolveKeyframes(UT))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:n,element:r,motionValue:i}=this;for(let a=0;a<t.length;a++)if(t[a]===null)if(a===0){const s=i==null?void 0:i.get(),o=t[t.length-1];if(s!==void 0)t[0]=s;else if(r&&n){const l=r.readValue(n,o);l!=null&&(t[0]=l)}t[0]===void 0&&(t[0]=o),i&&s===void 0&&i.set(t[0])}else t[a]=t[a-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),Lr.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,Lr.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const HT=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e),y2=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function v2(e){const t=y2.exec(e);if(!t)return[,];const[,n,r,i]=t;return[`--${n??r}`,i]}function WT(e,t,n=1){const[r,i]=v2(e);if(!r)return;const a=window.getComputedStyle(t).getPropertyValue(r);if(a){const s=a.trim();return HT(s)?parseFloat(s):s}return gv(i)?WT(i,t,n+1):i}const KT=e=>t=>t.test(e),g2={test:e=>e==="auto",parse:e=>e},YT=[Yi,H,un,Hn,oD,sD,g2],mw=e=>YT.find(KT(e));class QT extends Lv{constructor(t,n,r,i,a){super(t,n,r,i,a,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let l=0;l<t.length;l++){let u=t[l];if(typeof u=="string"&&(u=u.trim(),gv(u))){const c=WT(u,n.current);c!==void 0&&(t[l]=c),l===t.length-1&&(this.finalKeyframe=u)}}if(this.resolveNoneKeyframes(),!ET.has(r)||t.length!==2)return;const[i,a]=t,s=mw(i),o=mw(a);if(s!==o)if(fw(s)&&fw(o))for(let l=0;l<t.length;l++){const u=t[l];typeof u=="string"&&(t[l]=parseFloat(u))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:n}=this,r=[];for(let i=0;i<t.length;i++)KD(t[i])&&r.push(i);r.length&&d2(t,r,n)}measureInitialState(){const{element:t,unresolvedKeyframes:n,name:r}=this;if(!t||!t.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Ui[r](t.measureViewportBox(),window.getComputedStyle(t.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&t.getValue(r,i).jump(i,!1)}measureEndState(){var t;const{element:n,name:r,unresolvedKeyframes:i}=this;if(!n||!n.current)return;const a=n.getValue(r);a&&a.jump(this.measuredOrigin,!1);const s=i.length-1,o=i[s];i[s]=Ui[r](n.measureViewportBox(),window.getComputedStyle(n.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),!((t=this.removedTransforms)===null||t===void 0)&&t.length&&this.removedTransforms.forEach(([l,u])=>{n.getValue(l).set(u)}),this.resolveNoneKeyframes()}}const yw=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(fr.test(e)||e==="0")&&!e.startsWith("url("));function w2(e){const t=e[0];if(e.length===1)return!0;for(let n=0;n<e.length;n++)if(e[n]!==t)return!0}function b2(e,t,n,r){const i=e[0];if(i===null)return!1;if(t==="display"||t==="visibility")return!0;const a=e[e.length-1],s=yw(i,t),o=yw(a,t);return!s||!o?!1:w2(e)||(n==="spring"||Ev(n))&&r}const x2=e=>e!==null;function Ml(e,{repeat:t,repeatType:n="loop"},r){const i=e.filter(x2),a=t&&n!=="loop"&&t%2===1?0:i.length-1;return!a||r===void 0?i[a]:r}const S2=40;class XT{constructor({autoplay:t=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:a=0,repeatType:s="loop",...o}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=cn.now(),this.options={autoplay:t,delay:n,type:r,repeat:i,repeatDelay:a,repeatType:s,...o},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>S2?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&m2(),this._resolved}onKeyframesResolved(t,n){this.resolvedAt=cn.now(),this.hasAttemptedResolve=!0;const{name:r,type:i,velocity:a,delay:s,onComplete:o,onUpdate:l,isGenerator:u}=this.options;if(!u&&!b2(t,r,i,a))if(s)this.options.duration=0;else{l&&l(Ml(t,this.options,n)),o&&o(),this.resolveFinishedPromise();return}const c=this.initPlayback(t,n);c!==!1&&(this._resolved={keyframes:t,finalKeyframe:n,...c},this.onPostResolved())}onPostResolved(){}then(t,n){return this.currentFinishedPromise.then(t,n)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(t=>{this.resolveFinishedPromise=t})}}const Te=(e,t,n)=>e+(t-e)*n;function Ku(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function _2({hue:e,saturation:t,lightness:n,alpha:r}){e/=360,t/=100,n/=100;let i=0,a=0,s=0;if(!t)i=a=s=n;else{const o=n<.5?n*(1+t):n+t-n*t,l=2*n-o;i=Ku(l,o,e+1/3),a=Ku(l,o,e),s=Ku(l,o,e-1/3)}return{red:Math.round(i*255),green:Math.round(a*255),blue:Math.round(s*255),alpha:r}}function Zo(e,t){return n=>n>0?t:e}const Yu=(e,t,n)=>{const r=e*e,i=n*(t*t-r)+r;return i<0?0:Math.sqrt(i)},k2=[Xm,Rr,Ci],C2=e=>k2.find(t=>t.test(e));function vw(e){const t=C2(e);if(!t)return!1;let n=t.parse(e);return t===Ci&&(n=_2(n)),n}const gw=(e,t)=>{const n=vw(e),r=vw(t);if(!n||!r)return Zo(e,t);const i={...n};return a=>(i.red=Yu(n.red,r.red,a),i.green=Yu(n.green,r.green,a),i.blue=Yu(n.blue,r.blue,a),i.alpha=Te(n.alpha,r.alpha,a),Rr.transform(i))},E2=(e,t)=>n=>t(e(n)),xs=(...e)=>e.reduce(E2),ty=new Set(["none","hidden"]);function T2(e,t){return ty.has(e)?n=>n<=0?e:t:n=>n>=1?t:e}function M2(e,t){return n=>Te(e,t,n)}function qv(e){return typeof e=="number"?M2:typeof e=="string"?gv(e)?Zo:nt.test(e)?gw:N2:Array.isArray(e)?JT:typeof e=="object"?nt.test(e)?gw:j2:Zo}function JT(e,t){const n=[...e],r=n.length,i=e.map((a,s)=>qv(a)(a,t[s]));return a=>{for(let s=0;s<r;s++)n[s]=i[s](a);return n}}function j2(e,t){const n={...e,...t},r={};for(const i in n)e[i]!==void 0&&t[i]!==void 0&&(r[i]=qv(e[i])(e[i],t[i]));return i=>{for(const a in r)n[a]=r[a](i);return n}}function P2(e,t){var n;const r=[],i={color:0,var:0,number:0};for(let a=0;a<t.values.length;a++){const s=t.types[a],o=e.indexes[s][i[s]],l=(n=e.values[o])!==null&&n!==void 0?n:0;r[a]=l,i[s]++}return r}const N2=(e,t)=>{const n=fr.createTransformer(t),r=ds(e),i=ds(t);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?ty.has(e)&&!i.values.length||ty.has(t)&&!r.values.length?T2(e,t):xs(JT(P2(r,i),i.values),n):Zo(e,t)};function ZT(e,t,n){return typeof e=="number"&&typeof t=="number"&&typeof n=="number"?Te(e,t,n):qv(e)(e,t)}const A2=5;function eM(e,t,n){const r=Math.max(t-A2,0);return TT(n-e(r),t-r)}const Re={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Qu=.001;function R2({duration:e=Re.duration,bounce:t=Re.bounce,velocity:n=Re.velocity,mass:r=Re.mass}){let i,a,s=1-t;s=Nn(Re.minDamping,Re.maxDamping,s),e=Nn(Re.minDuration,Re.maxDuration,En(e)),s<1?(i=u=>{const c=u*s,d=c*e,f=c-n,m=ny(u,s),y=Math.exp(-d);return Qu-f/m*y},a=u=>{const d=u*s*e,f=d*n+n,m=Math.pow(s,2)*Math.pow(u,2)*e,y=Math.exp(-d),p=ny(Math.pow(u,2),s);return(-i(u)+Qu>0?-1:1)*((f-m)*y)/p}):(i=u=>{const c=Math.exp(-u*e),d=(u-n)*e+1;return-Qu+c*d},a=u=>{const c=Math.exp(-u*e),d=(n-u)*(e*e);return c*d});const o=5/e,l=D2(i,a,o);if(e=Cn(e),isNaN(l))return{stiffness:Re.stiffness,damping:Re.damping,duration:e};{const u=Math.pow(l,2)*r;return{stiffness:u,damping:s*2*Math.sqrt(r*u),duration:e}}}const I2=12;function D2(e,t,n){let r=n;for(let i=1;i<I2;i++)r=r-e(r)/t(r);return r}function ny(e,t){return e*Math.sqrt(1-t*t)}const O2=["duration","bounce"],L2=["stiffness","damping","mass"];function ww(e,t){return t.some(n=>e[n]!==void 0)}function q2(e){let t={velocity:Re.velocity,stiffness:Re.stiffness,damping:Re.damping,mass:Re.mass,isResolvedFromDuration:!1,...e};if(!ww(e,L2)&&ww(e,O2))if(e.visualDuration){const n=e.visualDuration,r=2*Math.PI/(n*1.2),i=r*r,a=2*Nn(.05,1,1-(e.bounce||0))*Math.sqrt(i);t={...t,mass:Re.mass,stiffness:i,damping:a}}else{const n=R2(e);t={...t,...n,mass:Re.mass},t.isResolvedFromDuration=!0}return t}function tM(e=Re.visualDuration,t=Re.bounce){const n=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:r,restDelta:i}=n;const a=n.keyframes[0],s=n.keyframes[n.keyframes.length-1],o={done:!1,value:a},{stiffness:l,damping:u,mass:c,duration:d,velocity:f,isResolvedFromDuration:m}=q2({...n,velocity:-En(n.velocity||0)}),y=f||0,p=u/(2*Math.sqrt(l*c)),x=s-a,v=En(Math.sqrt(l/c)),g=Math.abs(x)<5;r||(r=g?Re.restSpeed.granular:Re.restSpeed.default),i||(i=g?Re.restDelta.granular:Re.restDelta.default);let b;if(p<1){const C=ny(v,p);b=T=>{const M=Math.exp(-p*v*T);return s-M*((y+p*v*x)/C*Math.sin(C*T)+x*Math.cos(C*T))}}else if(p===1)b=C=>s-Math.exp(-v*C)*(x+(y+v*x)*C);else{const C=v*Math.sqrt(p*p-1);b=T=>{const M=Math.exp(-p*v*T),E=Math.min(C*T,300);return s-M*((y+p*v*x)*Math.sinh(E)+C*x*Math.cosh(E))/C}}const _={calculatedDuration:m&&d||null,next:C=>{const T=b(C);if(m)o.done=C>=d;else{let M=0;p<1&&(M=C===0?Cn(y):eM(b,C,T));const E=Math.abs(M)<=r,j=Math.abs(s-T)<=i;o.done=E&&j}return o.value=o.done?s:T,o},toString:()=>{const C=Math.min(wT(_),Km),T=bT(M=>_.next(C*M).value,C,30);return C+"ms "+T}};return _}function bw({keyframes:e,velocity:t=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:a=500,modifyTarget:s,min:o,max:l,restDelta:u=.5,restSpeed:c}){const d=e[0],f={done:!1,value:d},m=E=>o!==void 0&&E<o||l!==void 0&&E>l,y=E=>o===void 0?l:l===void 0||Math.abs(o-E)<Math.abs(l-E)?o:l;let p=n*t;const x=d+p,v=s===void 0?x:s(x);v!==x&&(p=v-d);const g=E=>-p*Math.exp(-E/r),b=E=>v+g(E),_=E=>{const j=g(E),P=b(E);f.done=Math.abs(j)<=u,f.value=f.done?v:P};let C,T;const M=E=>{m(f.value)&&(C=E,T=tM({keyframes:[f.value,y(f.value)],velocity:eM(b,E,f.value),damping:i,stiffness:a,restDelta:u,restSpeed:c}))};return M(0),{calculatedDuration:null,next:E=>{let j=!1;return!T&&C===void 0&&(j=!0,_(E),M(E)),C!==void 0&&E>=C?T.next(E-C):(!j&&_(E),f)}}}const F2=bs(.42,0,1,1),V2=bs(0,0,.58,1),nM=bs(.42,0,.58,1),$2=e=>Array.isArray(e)&&typeof e[0]!="number",B2={linear:_t,easeIn:F2,easeInOut:nM,easeOut:V2,circIn:Rv,circInOut:OT,circOut:DT,backIn:Av,backInOut:RT,backOut:AT,anticipate:IT},xw=e=>{if(Tv(e)){ZE(e.length===4);const[t,n,r,i]=e;return bs(t,n,r,i)}else if(typeof e=="string")return B2[e];return e};function z2(e,t,n){const r=[],i=n||ZT,a=e.length-1;for(let s=0;s<a;s++){let o=i(e[s],e[s+1]);if(t){const l=Array.isArray(t)?t[s]||_t:t;o=xs(l,o)}r.push(o)}return r}function U2(e,t,{clamp:n=!0,ease:r,mixer:i}={}){const a=e.length;if(ZE(a===t.length),a===1)return()=>t[0];if(a===2&&t[0]===t[1])return()=>t[1];const s=e[0]===e[1];e[0]>e[a-1]&&(e=[...e].reverse(),t=[...t].reverse());const o=z2(t,r,i),l=o.length,u=c=>{if(s&&c<e[0])return t[0];let d=0;if(l>1)for(;d<e.length-2&&!(c<e[d+1]);d++);const f=Bi(e[d],e[d+1],c);return o[d](f)};return n?c=>u(Nn(e[0],e[a-1],c)):u}function G2(e,t){const n=e[e.length-1];for(let r=1;r<=t;r++){const i=Bi(0,t,r);e.push(Te(n,1,i))}}function H2(e){const t=[0];return G2(t,e.length-1),t}function W2(e,t){return e.map(n=>n*t)}function K2(e,t){return e.map(()=>t||nM).splice(0,e.length-1)}function el({duration:e=300,keyframes:t,times:n,ease:r="easeInOut"}){const i=$2(r)?r.map(xw):xw(r),a={done:!1,value:t[0]},s=W2(n&&n.length===t.length?n:H2(t),e),o=U2(s,t,{ease:Array.isArray(i)?i:K2(t,i)});return{calculatedDuration:e,next:l=>(a.value=o(l),a.done=l>=e,a)}}const Y2=e=>{const t=({timestamp:n})=>e(n);return{start:()=>xe.update(t,!0),stop:()=>dr(t),now:()=>Qe.isProcessing?Qe.timestamp:cn.now()}},Q2={decay:bw,inertia:bw,tween:el,keyframes:el,spring:tM},X2=e=>e/100;class Fv extends XT{constructor(t){super(t),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:l}=this.options;l&&l()};const{name:n,motionValue:r,element:i,keyframes:a}=this.options,s=(i==null?void 0:i.KeyframeResolver)||Lv,o=(l,u)=>this.onKeyframesResolved(l,u);this.resolver=new s(a,o,n,r,i),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(t){const{type:n="keyframes",repeat:r=0,repeatDelay:i=0,repeatType:a,velocity:s=0}=this.options,o=Ev(n)?n:Q2[n]||el;let l,u;o!==el&&typeof t[0]!="number"&&(l=xs(X2,ZT(t[0],t[1])),t=[0,100]);const c=o({...this.options,keyframes:t});a==="mirror"&&(u=o({...this.options,keyframes:[...t].reverse(),velocity:-s})),c.calculatedDuration===null&&(c.calculatedDuration=wT(c));const{calculatedDuration:d}=c,f=d+i,m=f*(r+1)-i;return{generator:c,mirroredGenerator:u,mapPercentToKeyframes:l,calculatedDuration:d,resolvedDuration:f,totalDuration:m}}onPostResolved(){const{autoplay:t=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!t?this.pause():this.state=this.pendingPlayState}tick(t,n=!1){const{resolved:r}=this;if(!r){const{keyframes:E}=this.options;return{done:!0,value:E[E.length-1]}}const{finalKeyframe:i,generator:a,mirroredGenerator:s,mapPercentToKeyframes:o,keyframes:l,calculatedDuration:u,totalDuration:c,resolvedDuration:d}=r;if(this.startTime===null)return a.next(0);const{delay:f,repeat:m,repeatType:y,repeatDelay:p,onUpdate:x}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-c/this.speed,this.startTime)),n?this.currentTime=t:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(t-this.startTime)*this.speed;const v=this.currentTime-f*(this.speed>=0?1:-1),g=this.speed>=0?v<0:v>c;this.currentTime=Math.max(v,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=c);let b=this.currentTime,_=a;if(m){const E=Math.min(this.currentTime,c)/d;let j=Math.floor(E),P=E%1;!P&&E>=1&&(P=1),P===1&&j--,j=Math.min(j,m+1),!!(j%2)&&(y==="reverse"?(P=1-P,p&&(P-=p/d)):y==="mirror"&&(_=s)),b=Nn(0,1,P)*d}const C=g?{done:!1,value:l[0]}:_.next(b);o&&(C.value=o(C.value));let{done:T}=C;!g&&u!==null&&(T=this.speed>=0?this.currentTime>=c:this.currentTime<=0);const M=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&T);return M&&i!==void 0&&(C.value=Ml(l,this.options,i)),x&&x(C.value),M&&this.finish(),C}get duration(){const{resolved:t}=this;return t?En(t.calculatedDuration):0}get time(){return En(this.currentTime)}set time(t){t=Cn(t),this.currentTime=t,this.holdTime!==null||this.speed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.speed)}get speed(){return this.playbackSpeed}set speed(t){const n=this.playbackSpeed!==t;this.playbackSpeed=t,n&&(this.time=En(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:t=Y2,onPlay:n,startTime:r}=this.options;this.driver||(this.driver=t(a=>this.tick(a))),n&&n();const i=this.driver.now();this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=i):this.startTime=r??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var t;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(t=this.currentTime)!==null&&t!==void 0?t:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:t}=this.options;t&&t()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}}const J2=new Set(["opacity","clipPath","filter","transform"]);function Z2(e,t,n,{delay:r=0,duration:i=300,repeat:a=0,repeatType:s="loop",ease:o="easeInOut",times:l}={}){const u={[t]:n};l&&(u.offset=l);const c=ST(o,i);return Array.isArray(c)&&(u.easing=c),e.animate(u,{delay:r,duration:i,easing:Array.isArray(c)?"linear":c,fill:"both",iterations:a+1,direction:s==="reverse"?"alternate":"normal"})}const eO=dv(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),tl=10,tO=2e4;function nO(e){return Ev(e.type)||e.type==="spring"||!xT(e.ease)}function rO(e,t){const n=new Fv({...t,keyframes:e,repeat:0,delay:0,isGenerator:!0});let r={done:!1,value:e[0]};const i=[];let a=0;for(;!r.done&&a<tO;)r=n.sample(a),i.push(r.value),a+=tl;return{times:void 0,keyframes:i,duration:a-tl,ease:"linear"}}const rM={anticipate:IT,backInOut:RT,circInOut:OT};function iO(e){return e in rM}class Sw extends XT{constructor(t){super(t);const{name:n,motionValue:r,element:i,keyframes:a}=this.options;this.resolver=new QT(a,(s,o)=>this.onKeyframesResolved(s,o),n,r,i),this.resolver.scheduleResolve()}initPlayback(t,n){let{duration:r=300,times:i,ease:a,type:s,motionValue:o,name:l,startTime:u}=this.options;if(!o.owner||!o.owner.current)return!1;if(typeof a=="string"&&Jo()&&iO(a)&&(a=rM[a]),nO(this.options)){const{onComplete:d,onUpdate:f,motionValue:m,element:y,...p}=this.options,x=rO(t,p);t=x.keyframes,t.length===1&&(t[1]=t[0]),r=x.duration,i=x.times,a=x.ease,s="keyframes"}const c=Z2(o.owner.current,l,t,{...this.options,duration:r,times:i,ease:a});return c.startTime=u??this.calcStartTime(),this.pendingTimeline?(sw(c,this.pendingTimeline),this.pendingTimeline=void 0):c.onfinish=()=>{const{onComplete:d}=this.options;o.set(Ml(t,this.options,n)),d&&d(),this.cancel(),this.resolveFinishedPromise()},{animation:c,duration:r,times:i,type:s,ease:a,keyframes:t}}get duration(){const{resolved:t}=this;if(!t)return 0;const{duration:n}=t;return En(n)}get time(){const{resolved:t}=this;if(!t)return 0;const{animation:n}=t;return En(n.currentTime||0)}set time(t){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.currentTime=Cn(t)}get speed(){const{resolved:t}=this;if(!t)return 1;const{animation:n}=t;return n.playbackRate}set speed(t){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.playbackRate=t}get state(){const{resolved:t}=this;if(!t)return"idle";const{animation:n}=t;return n.playState}get startTime(){const{resolved:t}=this;if(!t)return null;const{animation:n}=t;return n.startTime}attachTimeline(t){if(!this._resolved)this.pendingTimeline=t;else{const{resolved:n}=this;if(!n)return _t;const{animation:r}=n;sw(r,t)}return _t}play(){if(this.isStopped)return;const{resolved:t}=this;if(!t)return;const{animation:n}=t;n.playState==="finished"&&this.updateFinishedPromise(),n.play()}pause(){const{resolved:t}=this;if(!t)return;const{animation:n}=t;n.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:t}=this;if(!t)return;const{animation:n,keyframes:r,duration:i,type:a,ease:s,times:o}=t;if(n.playState==="idle"||n.playState==="finished")return;if(this.time){const{motionValue:u,onUpdate:c,onComplete:d,element:f,...m}=this.options,y=new Fv({...m,keyframes:r,duration:i,type:a,ease:s,times:o,isGenerator:!0}),p=Cn(this.time);u.setWithVelocity(y.sample(p-tl).value,y.sample(p).value,tl)}const{onStop:l}=this.options;l&&l(),this.cancel()}complete(){const{resolved:t}=this;t&&t.animation.finish()}cancel(){const{resolved:t}=this;t&&t.animation.cancel()}static supports(t){const{motionValue:n,name:r,repeatDelay:i,repeatType:a,damping:s,type:o}=t;if(!n||!n.owner||!(n.owner.current instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:u}=n.owner.getProps();return eO()&&r&&J2.has(r)&&!l&&!u&&!i&&a!=="mirror"&&s!==0&&o!=="inertia"}}const aO={type:"spring",stiffness:500,damping:25,restSpeed:10},sO=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),oO={type:"keyframes",duration:.8},lO={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},uO=(e,{keyframes:t})=>t.length>2?oO:Hr.has(e)?e.startsWith("scale")?sO(t[1]):aO:lO;function cO({when:e,delay:t,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:a,repeatType:s,repeatDelay:o,from:l,elapsed:u,...c}){return!!Object.keys(c).length}const Vv=(e,t,n,r={},i,a)=>s=>{const o=Cv(r,e)||{},l=o.delay||r.delay||0;let{elapsed:u=0}=r;u=u-Cn(l);let c={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:t.getVelocity(),...o,delay:-u,onUpdate:f=>{t.set(f),o.onUpdate&&o.onUpdate(f)},onComplete:()=>{s(),o.onComplete&&o.onComplete()},name:e,motionValue:t,element:a?void 0:i};cO(o)||(c={...c,...uO(e,c)}),c.duration&&(c.duration=Cn(c.duration)),c.repeatDelay&&(c.repeatDelay=Cn(c.repeatDelay)),c.from!==void 0&&(c.keyframes[0]=c.from);let d=!1;if((c.type===!1||c.duration===0&&!c.repeatDelay)&&(c.duration=0,c.delay===0&&(d=!0)),d&&!a&&t.get()!==void 0){const f=Ml(c.keyframes,o);if(f!==void 0)return xe.update(()=>{c.onUpdate(f),c.onComplete()}),new jD([])}return!a&&Sw.supports(c)?new Sw(c):new Fv(c)};function dO({protectedKeys:e,needsAnimating:t},n){const r=e.hasOwnProperty(n)&&t[n]!==!0;return t[n]=!1,r}function iM(e,t,{delay:n=0,transitionOverride:r,type:i}={}){var a;let{transition:s=e.getDefaultTransition(),transitionEnd:o,...l}=t;r&&(s=r);const u=[],c=i&&e.animationState&&e.animationState.getState()[i];for(const d in l){const f=e.getValue(d,(a=e.latestValues[d])!==null&&a!==void 0?a:null),m=l[d];if(m===void 0||c&&dO(c,d))continue;const y={delay:n,...Cv(s||{},d)};let p=!1;if(window.MotionHandoffAnimation){const v=MT(e);if(v){const g=window.MotionHandoffAnimation(v,d,xe);g!==null&&(y.startTime=g,p=!0)}}Qm(e,d),f.start(Vv(d,f,m,e.shouldReduceMotion&&ET.has(d)?{type:!1}:y,e,p));const x=f.animation;x&&u.push(x)}return o&&Promise.all(u).then(()=>{xe.update(()=>{o&&zD(e,o)})}),u}function ry(e,t,n={}){var r;const i=Tl(e,t,n.type==="exit"?(r=e.presenceContext)===null||r===void 0?void 0:r.custom:void 0);let{transition:a=e.getDefaultTransition()||{}}=i||{};n.transitionOverride&&(a=n.transitionOverride);const s=i?()=>Promise.all(iM(e,i,n)):()=>Promise.resolve(),o=e.variantChildren&&e.variantChildren.size?(u=0)=>{const{delayChildren:c=0,staggerChildren:d,staggerDirection:f}=a;return fO(e,t,c+u,d,f,n)}:()=>Promise.resolve(),{when:l}=a;if(l){const[u,c]=l==="beforeChildren"?[s,o]:[o,s];return u().then(()=>c())}else return Promise.all([s(),o(n.delay)])}function fO(e,t,n=0,r=0,i=1,a){const s=[],o=(e.variantChildren.size-1)*r,l=i===1?(u=0)=>u*r:(u=0)=>o-u*r;return Array.from(e.variantChildren).sort(hO).forEach((u,c)=>{u.notify("AnimationStart",t),s.push(ry(u,t,{...a,delay:n+l(c)}).then(()=>u.notify("AnimationComplete",t)))}),Promise.all(s)}function hO(e,t){return e.sortNodePosition(t)}function pO(e,t,n={}){e.notify("AnimationStart",t);let r;if(Array.isArray(t)){const i=t.map(a=>ry(e,a,n));r=Promise.all(i)}else if(typeof t=="string")r=ry(e,t,n);else{const i=typeof t=="function"?Tl(e,t,n.custom):t;r=Promise.all(iM(e,i,n))}return r.then(()=>{e.notify("AnimationComplete",t)})}const mO=hv.length;function aM(e){if(!e)return;if(!e.isControllingVariants){const n=e.parent?aM(e.parent)||{}:{};return e.props.initial!==void 0&&(n.initial=e.props.initial),n}const t={};for(let n=0;n<mO;n++){const r=hv[n],i=e.props[r];(ls(i)||i===!1)&&(t[r]=i)}return t}const yO=[...fv].reverse(),vO=fv.length;function gO(e){return t=>Promise.all(t.map(({animation:n,options:r})=>pO(e,n,r)))}function wO(e){let t=gO(e),n=_w(),r=!0;const i=l=>(u,c)=>{var d;const f=Tl(e,c,l==="exit"?(d=e.presenceContext)===null||d===void 0?void 0:d.custom:void 0);if(f){const{transition:m,transitionEnd:y,...p}=f;u={...u,...p,...y}}return u};function a(l){t=l(e)}function s(l){const{props:u}=e,c=aM(e.parent)||{},d=[],f=new Set;let m={},y=1/0;for(let x=0;x<vO;x++){const v=yO[x],g=n[v],b=u[v]!==void 0?u[v]:c[v],_=ls(b),C=v===l?g.isActive:null;C===!1&&(y=x);let T=b===c[v]&&b!==u[v]&&_;if(T&&r&&e.manuallyAnimateOnMount&&(T=!1),g.protectedKeys={...m},!g.isActive&&C===null||!b&&!g.prevProp||Cl(b)||typeof b=="boolean")continue;const M=bO(g.prevProp,b);let E=M||v===l&&g.isActive&&!T&&_||x>y&&_,j=!1;const P=Array.isArray(b)?b:[b];let A=P.reduce(i(v),{});C===!1&&(A={});const{prevResolvedValues:D={}}=g,q={...D,...A},W=ee=>{E=!0,f.has(ee)&&(j=!0,f.delete(ee)),g.needsAnimating[ee]=!0;const I=e.getValue(ee);I&&(I.liveStyle=!1)};for(const ee in q){const I=A[ee],F=D[ee];if(m.hasOwnProperty(ee))continue;let R=!1;Wm(I)&&Wm(F)?R=!gT(I,F):R=I!==F,R?I!=null?W(ee):f.add(ee):I!==void 0&&f.has(ee)?W(ee):g.protectedKeys[ee]=!0}g.prevProp=b,g.prevResolvedValues=A,g.isActive&&(m={...m,...A}),r&&e.blockInitialAnimation&&(E=!1),E&&(!(T&&M)||j)&&d.push(...P.map(ee=>({animation:ee,options:{type:v}})))}if(f.size){const x={};f.forEach(v=>{const g=e.getBaseTarget(v),b=e.getValue(v);b&&(b.liveStyle=!0),x[v]=g??null}),d.push({animation:x})}let p=!!d.length;return r&&(u.initial===!1||u.initial===u.animate)&&!e.manuallyAnimateOnMount&&(p=!1),r=!1,p?t(d):Promise.resolve()}function o(l,u){var c;if(n[l].isActive===u)return Promise.resolve();(c=e.variantChildren)===null||c===void 0||c.forEach(f=>{var m;return(m=f.animationState)===null||m===void 0?void 0:m.setActive(l,u)}),n[l].isActive=u;const d=s(l);for(const f in n)n[f].protectedKeys={};return d}return{animateChanges:s,setActive:o,setAnimateFunction:a,getState:()=>n,reset:()=>{n=_w(),r=!0}}}function bO(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!gT(t,e):!1}function Cr(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function _w(){return{animate:Cr(!0),whileInView:Cr(),whileHover:Cr(),whileTap:Cr(),whileDrag:Cr(),whileFocus:Cr(),exit:Cr()}}class vr{constructor(t){this.isMounted=!1,this.node=t}update(){}}class xO extends vr{constructor(t){super(t),t.animationState||(t.animationState=wO(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();Cl(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:n}=this.node.prevProps||{};t!==n&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)===null||t===void 0||t.call(this)}}let SO=0;class _O extends vr{constructor(){super(...arguments),this.id=SO++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===r)return;const i=this.node.animationState.setActive("exit",!t);n&&!t&&i.then(()=>n(this.id))}mount(){const{register:t}=this.node.presenceContext||{};t&&(this.unmount=t(this.id))}unmount(){}}const kO={animation:{Feature:xO},exit:{Feature:_O}};function fs(e,t,n,r={passive:!0}){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n)}function Ss(e){return{point:{x:e.pageX,y:e.pageY}}}const CO=e=>t=>Mv(t)&&e(t,Ss(t));function Ba(e,t,n,r){return fs(e,t,CO(n),r)}const kw=(e,t)=>Math.abs(e-t);function EO(e,t){const n=kw(e.x,t.x),r=kw(e.y,t.y);return Math.sqrt(n**2+r**2)}class sM{constructor(t,n,{transformPagePoint:r,contextWindow:i,dragSnapToOrigin:a=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const d=Ju(this.lastMoveEventInfo,this.history),f=this.startEvent!==null,m=EO(d.offset,{x:0,y:0})>=3;if(!f&&!m)return;const{point:y}=d,{timestamp:p}=Qe;this.history.push({...y,timestamp:p});const{onStart:x,onMove:v}=this.handlers;f||(x&&x(this.lastMoveEvent,d),this.startEvent=this.lastMoveEvent),v&&v(this.lastMoveEvent,d)},this.handlePointerMove=(d,f)=>{this.lastMoveEvent=d,this.lastMoveEventInfo=Xu(f,this.transformPagePoint),xe.update(this.updatePoint,!0)},this.handlePointerUp=(d,f)=>{this.end();const{onEnd:m,onSessionEnd:y,resumeAnimation:p}=this.handlers;if(this.dragSnapToOrigin&&p&&p(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const x=Ju(d.type==="pointercancel"?this.lastMoveEventInfo:Xu(f,this.transformPagePoint),this.history);this.startEvent&&m&&m(d,x),y&&y(d,x)},!Mv(t))return;this.dragSnapToOrigin=a,this.handlers=n,this.transformPagePoint=r,this.contextWindow=i||window;const s=Ss(t),o=Xu(s,this.transformPagePoint),{point:l}=o,{timestamp:u}=Qe;this.history=[{...l,timestamp:u}];const{onSessionStart:c}=n;c&&c(t,Ju(o,this.history)),this.removeListeners=xs(Ba(this.contextWindow,"pointermove",this.handlePointerMove),Ba(this.contextWindow,"pointerup",this.handlePointerUp),Ba(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),dr(this.updatePoint)}}function Xu(e,t){return t?{point:t(e.point)}:e}function Cw(e,t){return{x:e.x-t.x,y:e.y-t.y}}function Ju({point:e},t){return{point:e,delta:Cw(e,oM(t)),offset:Cw(e,TO(t)),velocity:MO(t,.1)}}function TO(e){return e[0]}function oM(e){return e[e.length-1]}function MO(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,r=null;const i=oM(e);for(;n>=0&&(r=e[n],!(i.timestamp-r.timestamp>Cn(t)));)n--;if(!r)return{x:0,y:0};const a=En(i.timestamp-r.timestamp);if(a===0)return{x:0,y:0};const s={x:(i.x-r.x)/a,y:(i.y-r.y)/a};return s.x===1/0&&(s.x=0),s.y===1/0&&(s.y=0),s}const lM=1e-4,jO=1-lM,PO=1+lM,uM=.01,NO=0-uM,AO=0+uM;function Ct(e){return e.max-e.min}function RO(e,t,n){return Math.abs(e-t)<=n}function Ew(e,t,n,r=.5){e.origin=r,e.originPoint=Te(t.min,t.max,e.origin),e.scale=Ct(n)/Ct(t),e.translate=Te(n.min,n.max,e.origin)-e.originPoint,(e.scale>=jO&&e.scale<=PO||isNaN(e.scale))&&(e.scale=1),(e.translate>=NO&&e.translate<=AO||isNaN(e.translate))&&(e.translate=0)}function za(e,t,n,r){Ew(e.x,t.x,n.x,r?r.originX:void 0),Ew(e.y,t.y,n.y,r?r.originY:void 0)}function Tw(e,t,n){e.min=n.min+t.min,e.max=e.min+Ct(t)}function IO(e,t,n){Tw(e.x,t.x,n.x),Tw(e.y,t.y,n.y)}function Mw(e,t,n){e.min=t.min-n.min,e.max=e.min+Ct(t)}function Ua(e,t,n){Mw(e.x,t.x,n.x),Mw(e.y,t.y,n.y)}function DO(e,{min:t,max:n},r){return t!==void 0&&e<t?e=r?Te(t,e,r.min):Math.max(e,t):n!==void 0&&e>n&&(e=r?Te(n,e,r.max):Math.min(e,n)),e}function jw(e,t,n){return{min:t!==void 0?e.min+t:void 0,max:n!==void 0?e.max+n-(e.max-e.min):void 0}}function OO(e,{top:t,left:n,bottom:r,right:i}){return{x:jw(e.x,n,i),y:jw(e.y,t,r)}}function Pw(e,t){let n=t.min-e.min,r=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,r]=[r,n]),{min:n,max:r}}function LO(e,t){return{x:Pw(e.x,t.x),y:Pw(e.y,t.y)}}function qO(e,t){let n=.5;const r=Ct(e),i=Ct(t);return i>r?n=Bi(t.min,t.max-r,e.min):r>i&&(n=Bi(e.min,e.max-i,t.min)),Nn(0,1,n)}function FO(e,t){const n={};return t.min!==void 0&&(n.min=t.min-e.min),t.max!==void 0&&(n.max=t.max-e.min),n}const iy=.35;function VO(e=iy){return e===!1?e=0:e===!0&&(e=iy),{x:Nw(e,"left","right"),y:Nw(e,"top","bottom")}}function Nw(e,t,n){return{min:Aw(e,t),max:Aw(e,n)}}function Aw(e,t){return typeof e=="number"?e:e[t]||0}const Rw=()=>({translate:0,scale:1,origin:0,originPoint:0}),Ei=()=>({x:Rw(),y:Rw()}),Iw=()=>({min:0,max:0}),Oe=()=>({x:Iw(),y:Iw()});function At(e){return[e("x"),e("y")]}function cM({top:e,left:t,right:n,bottom:r}){return{x:{min:t,max:n},y:{min:e,max:r}}}function $O({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function BO(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),r=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function Zu(e){return e===void 0||e===1}function ay({scale:e,scaleX:t,scaleY:n}){return!Zu(e)||!Zu(t)||!Zu(n)}function Mr(e){return ay(e)||dM(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function dM(e){return Dw(e.x)||Dw(e.y)}function Dw(e){return e&&e!=="0%"}function nl(e,t,n){const r=e-n,i=t*r;return n+i}function Ow(e,t,n,r,i){return i!==void 0&&(e=nl(e,i,r)),nl(e,n,r)+t}function sy(e,t=0,n=1,r,i){e.min=Ow(e.min,t,n,r,i),e.max=Ow(e.max,t,n,r,i)}function fM(e,{x:t,y:n}){sy(e.x,t.translate,t.scale,t.originPoint),sy(e.y,n.translate,n.scale,n.originPoint)}const Lw=.999999999999,qw=1.0000000000001;function zO(e,t,n,r=!1){const i=n.length;if(!i)return;t.x=t.y=1;let a,s;for(let o=0;o<i;o++){a=n[o],s=a.projectionDelta;const{visualElement:l}=a.options;l&&l.props.style&&l.props.style.display==="contents"||(r&&a.options.layoutScroll&&a.scroll&&a!==a.root&&Mi(e,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),s&&(t.x*=s.x.scale,t.y*=s.y.scale,fM(e,s)),r&&Mr(a.latestValues)&&Mi(e,a.latestValues))}t.x<qw&&t.x>Lw&&(t.x=1),t.y<qw&&t.y>Lw&&(t.y=1)}function Ti(e,t){e.min=e.min+t,e.max=e.max+t}function Fw(e,t,n,r,i=.5){const a=Te(e.min,e.max,i);sy(e,t,n,a,r)}function Mi(e,t){Fw(e.x,t.x,t.scaleX,t.scale,t.originX),Fw(e.y,t.y,t.scaleY,t.scale,t.originY)}function hM(e,t){return cM(BO(e.getBoundingClientRect(),t))}function UO(e,t,n){const r=hM(e,n),{scroll:i}=t;return i&&(Ti(r.x,i.offset.x),Ti(r.y,i.offset.y)),r}const pM=({current:e})=>e?e.ownerDocument.defaultView:null,GO=new WeakMap;class HO{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Oe(),this.visualElement=t}start(t,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const i=c=>{const{dragSnapToOrigin:d}=this.getProps();d?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Ss(c).point)},a=(c,d)=>{const{drag:f,dragPropagation:m,onDragStart:y}=this.getProps();if(f&&!m&&(this.openDragLock&&this.openDragLock(),this.openDragLock=qD(f),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),At(x=>{let v=this.getAxisMotionValue(x).get()||0;if(un.test(v)){const{projection:g}=this.visualElement;if(g&&g.layout){const b=g.layout.layoutBox[x];b&&(v=Ct(b)*(parseFloat(v)/100))}}this.originPoint[x]=v}),y&&xe.postRender(()=>y(c,d)),Qm(this.visualElement,"transform");const{animationState:p}=this.visualElement;p&&p.setActive("whileDrag",!0)},s=(c,d)=>{const{dragPropagation:f,dragDirectionLock:m,onDirectionLock:y,onDrag:p}=this.getProps();if(!f&&!this.openDragLock)return;const{offset:x}=d;if(m&&this.currentDirection===null){this.currentDirection=WO(x),this.currentDirection!==null&&y&&y(this.currentDirection);return}this.updateAxis("x",d.point,x),this.updateAxis("y",d.point,x),this.visualElement.render(),p&&p(c,d)},o=(c,d)=>this.stop(c,d),l=()=>At(c=>{var d;return this.getAnimationState(c)==="paused"&&((d=this.getAxisMotionValue(c).animation)===null||d===void 0?void 0:d.play())}),{dragSnapToOrigin:u}=this.getProps();this.panSession=new sM(t,{onSessionStart:i,onStart:a,onMove:s,onSessionEnd:o,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,contextWindow:pM(this.visualElement)})}stop(t,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:i}=n;this.startAnimation(i);const{onDragEnd:a}=this.getProps();a&&xe.postRender(()=>a(t,n))}cancel(){this.isDragging=!1;const{projection:t,animationState:n}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(t,n,r){const{drag:i}=this.getProps();if(!r||!ao(t,i,this.currentDirection))return;const a=this.getAxisMotionValue(t);let s=this.originPoint[t]+r[t];this.constraints&&this.constraints[t]&&(s=DO(s,this.constraints[t],this.elastic[t])),a.set(s)}resolveConstraints(){var t;const{dragConstraints:n,dragElastic:r}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(t=this.visualElement.projection)===null||t===void 0?void 0:t.layout,a=this.constraints;n&&ki(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&i?this.constraints=OO(i.layoutBox,n):this.constraints=!1,this.elastic=VO(r),a!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&At(s=>{this.constraints!==!1&&this.getAxisMotionValue(s)&&(this.constraints[s]=FO(i.layoutBox[s],this.constraints[s]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:n}=this.getProps();if(!t||!ki(t))return!1;const r=t.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const a=UO(r,i.root,this.visualElement.getTransformPagePoint());let s=LO(i.layout.layoutBox,a);if(n){const o=n($O(s));this.hasMutatedConstraints=!!o,o&&(s=cM(o))}return s}startAnimation(t){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:a,dragSnapToOrigin:s,onDragTransitionEnd:o}=this.getProps(),l=this.constraints||{},u=At(c=>{if(!ao(c,n,this.currentDirection))return;let d=l&&l[c]||{};s&&(d={min:0,max:0});const f=i?200:1e6,m=i?40:1e7,y={type:"inertia",velocity:r?t[c]:0,bounceStiffness:f,bounceDamping:m,timeConstant:750,restDelta:1,restSpeed:10,...a,...d};return this.startAxisValueAnimation(c,y)});return Promise.all(u).then(o)}startAxisValueAnimation(t,n){const r=this.getAxisMotionValue(t);return Qm(this.visualElement,t),r.start(Vv(t,r,0,n,this.visualElement,!1))}stopAnimation(){At(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){At(t=>{var n;return(n=this.getAxisMotionValue(t).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(t){var n;return(n=this.getAxisMotionValue(t).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(t){const n=`_drag${t.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(t,(r.initial?r.initial[t]:void 0)||0)}snapToCursor(t){At(n=>{const{drag:r}=this.getProps();if(!ao(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,a=this.getAxisMotionValue(n);if(i&&i.layout){const{min:s,max:o}=i.layout.layoutBox[n];a.set(t[n]-Te(s,o,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!ki(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};At(s=>{const o=this.getAxisMotionValue(s);if(o&&this.constraints!==!1){const l=o.get();i[s]=qO({min:l,max:l},this.constraints[s])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),At(s=>{if(!ao(s,t,null))return;const o=this.getAxisMotionValue(s),{min:l,max:u}=this.constraints[s];o.set(Te(l,u,i[s]))})}addListeners(){if(!this.visualElement.current)return;GO.set(this.visualElement,this);const t=this.visualElement.current,n=Ba(t,"pointerdown",l=>{const{drag:u,dragListener:c=!0}=this.getProps();u&&c&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();ki(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,a=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),xe.read(r);const s=fs(window,"resize",()=>this.scalePositionWithinConstraints()),o=i.addEventListener("didUpdate",({delta:l,hasLayoutChanged:u})=>{this.isDragging&&u&&(At(c=>{const d=this.getAxisMotionValue(c);d&&(this.originPoint[c]+=l[c].translate,d.set(d.get()+l[c].translate))}),this.visualElement.render())});return()=>{s(),n(),a(),o&&o()}}getProps(){const t=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:a=!1,dragElastic:s=iy,dragMomentum:o=!0}=t;return{...t,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:a,dragElastic:s,dragMomentum:o}}}function ao(e,t,n){return(t===!0||t===e)&&(n===null||n===e)}function WO(e,t=10){let n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}class KO extends vr{constructor(t){super(t),this.removeGroupControls=_t,this.removeListeners=_t,this.controls=new HO(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||_t}unmount(){this.removeGroupControls(),this.removeListeners()}}const Vw=e=>(t,n)=>{e&&xe.postRender(()=>e(t,n))};class YO extends vr{constructor(){super(...arguments),this.removePointerDownListener=_t}onPointerDown(t){this.session=new sM(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:pM(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:Vw(t),onStart:Vw(n),onMove:r,onEnd:(a,s)=>{delete this.session,i&&xe.postRender(()=>i(a,s))}}}mount(){this.removePointerDownListener=Ba(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Co={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function $w(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const ga={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(H.test(e))e=parseFloat(e);else return e;const n=$w(e,t.target.x),r=$w(e,t.target.y);return`${n}% ${r}%`}},QO={correct:(e,{treeScale:t,projectionDelta:n})=>{const r=e,i=fr.parse(e);if(i.length>5)return r;const a=fr.createTransformer(e),s=typeof i[0]!="number"?1:0,o=n.x.scale*t.x,l=n.y.scale*t.y;i[0+s]/=o,i[1+s]/=l;const u=Te(o,l,.5);return typeof i[2+s]=="number"&&(i[2+s]/=u),typeof i[3+s]=="number"&&(i[3+s]/=u),a(i)}};class XO extends S.Component{componentDidMount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:a}=t;vD(JO),a&&(n.group&&n.group.add(a),r&&r.register&&i&&r.register(a),a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,onExitComplete:()=>this.safeToRemove()})),Co.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:n,visualElement:r,drag:i,isPresent:a}=this.props,s=r.projection;return s&&(s.isPresent=a,i||t.layoutDependency!==n||n===void 0?s.willUpdate():this.safeToRemove(),t.isPresent!==a&&(a?s.promote():s.relegate()||xe.postRender(()=>{const o=s.getStack();(!o||!o.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),mv.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=t;i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function mM(e){const[t,n]=AI(),r=S.useContext(XE);return h.jsx(XO,{...e,layoutGroup:r,switchLayoutGroup:S.useContext(aT),isPresent:t,safeToRemove:n})}const JO={borderRadius:{...ga,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:ga,borderTopRightRadius:ga,borderBottomLeftRadius:ga,borderBottomRightRadius:ga,boxShadow:QO};function ZO(e,t,n){const r=it(e)?e:cs(e);return r.start(Vv("",r,t,n)),r.animation}function eL(e){return e instanceof SVGElement&&e.tagName!=="svg"}const tL=(e,t)=>e.depth-t.depth;class nL{constructor(){this.children=[],this.isDirty=!1}add(t){jv(this.children,t),this.isDirty=!0}remove(t){Pv(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(tL),this.isDirty=!1,this.children.forEach(t)}}function rL(e,t){const n=cn.now(),r=({timestamp:i})=>{const a=i-n;a>=t&&(dr(r),e(a-t))};return xe.read(r,!0),()=>dr(r)}const yM=["TopLeft","TopRight","BottomLeft","BottomRight"],iL=yM.length,Bw=e=>typeof e=="string"?parseFloat(e):e,zw=e=>typeof e=="number"||H.test(e);function aL(e,t,n,r,i,a){i?(e.opacity=Te(0,n.opacity!==void 0?n.opacity:1,sL(r)),e.opacityExit=Te(t.opacity!==void 0?t.opacity:1,0,oL(r))):a&&(e.opacity=Te(t.opacity!==void 0?t.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let s=0;s<iL;s++){const o=`border${yM[s]}Radius`;let l=Uw(t,o),u=Uw(n,o);if(l===void 0&&u===void 0)continue;l||(l=0),u||(u=0),l===0||u===0||zw(l)===zw(u)?(e[o]=Math.max(Te(Bw(l),Bw(u),r),0),(un.test(u)||un.test(l))&&(e[o]+="%")):e[o]=u}(t.rotate||n.rotate)&&(e.rotate=Te(t.rotate||0,n.rotate||0,r))}function Uw(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const sL=vM(0,.5,DT),oL=vM(.5,.95,_t);function vM(e,t,n){return r=>r<e?0:r>t?1:n(Bi(e,t,r))}function Gw(e,t){e.min=t.min,e.max=t.max}function Nt(e,t){Gw(e.x,t.x),Gw(e.y,t.y)}function Hw(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function Ww(e,t,n,r,i){return e-=t,e=nl(e,1/n,r),i!==void 0&&(e=nl(e,1/i,r)),e}function lL(e,t=0,n=1,r=.5,i,a=e,s=e){if(un.test(t)&&(t=parseFloat(t),t=Te(s.min,s.max,t/100)-s.min),typeof t!="number")return;let o=Te(a.min,a.max,r);e===a&&(o-=t),e.min=Ww(e.min,t,n,o,i),e.max=Ww(e.max,t,n,o,i)}function Kw(e,t,[n,r,i],a,s){lL(e,t[n],t[r],t[i],t.scale,a,s)}const uL=["x","scaleX","originX"],cL=["y","scaleY","originY"];function Yw(e,t,n,r){Kw(e.x,t,uL,n?n.x:void 0,r?r.x:void 0),Kw(e.y,t,cL,n?n.y:void 0,r?r.y:void 0)}function Qw(e){return e.translate===0&&e.scale===1}function gM(e){return Qw(e.x)&&Qw(e.y)}function Xw(e,t){return e.min===t.min&&e.max===t.max}function dL(e,t){return Xw(e.x,t.x)&&Xw(e.y,t.y)}function Jw(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function wM(e,t){return Jw(e.x,t.x)&&Jw(e.y,t.y)}function Zw(e){return Ct(e.x)/Ct(e.y)}function eb(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class fL{constructor(){this.members=[]}add(t){jv(this.members,t),t.scheduleRender()}remove(t){if(Pv(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(t){const n=this.members.findIndex(i=>t===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const a=this.members[i];if(a.isPresent!==!1){r=a;break}}return r?(this.promote(r),!0):!1}promote(t,n){const r=this.lead;if(t!==r&&(this.prevLead=r,this.lead=t,t.show(),r)){r.instance&&r.scheduleRender(),t.scheduleRender(),t.resumeFrom=r,n&&(t.resumeFrom.preserveOpacity=!0),r.snapshot&&(t.snapshot=r.snapshot,t.snapshot.latestValues=r.animationValues||r.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:i}=t.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:n,resumingFrom:r}=t;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function hL(e,t,n){let r="";const i=e.x.translate/t.x,a=e.y.translate/t.y,s=(n==null?void 0:n.z)||0;if((i||a||s)&&(r=`translate3d(${i}px, ${a}px, ${s}px) `),(t.x!==1||t.y!==1)&&(r+=`scale(${1/t.x}, ${1/t.y}) `),n){const{transformPerspective:u,rotate:c,rotateX:d,rotateY:f,skewX:m,skewY:y}=n;u&&(r=`perspective(${u}px) ${r}`),c&&(r+=`rotate(${c}deg) `),d&&(r+=`rotateX(${d}deg) `),f&&(r+=`rotateY(${f}deg) `),m&&(r+=`skewX(${m}deg) `),y&&(r+=`skewY(${y}deg) `)}const o=e.x.scale*t.x,l=e.y.scale*t.y;return(o!==1||l!==1)&&(r+=`scale(${o}, ${l})`),r||"none"}const jr={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},Ca=typeof window<"u"&&window.MotionDebug!==void 0,ec=["","X","Y","Z"],pL={visibility:"hidden"},tb=1e3;let mL=0;function tc(e,t,n,r){const{latestValues:i}=t;i[e]&&(n[e]=i[e],t.setStaticValue(e,0),r&&(r[e]=0))}function bM(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const n=MT(t);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:a}=e.options;window.MotionCancelOptimisedAnimation(n,"transform",xe,!(i||a))}const{parent:r}=e;r&&!r.hasCheckedOptimisedAppear&&bM(r)}function xM({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(s={},o=t==null?void 0:t()){this.id=mL++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Ca&&(jr.totalNodes=jr.resolvedTargetDeltas=jr.recalculatedProjection=0),this.nodes.forEach(gL),this.nodes.forEach(_L),this.nodes.forEach(kL),this.nodes.forEach(wL),Ca&&window.MotionDebug.record(jr)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=s,this.root=o?o.root||o:this,this.path=o?[...o.path,o]:[],this.parent=o,this.depth=o?o.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new nL)}addEventListener(s,o){return this.eventHandlers.has(s)||this.eventHandlers.set(s,new Nv),this.eventHandlers.get(s).add(o)}notifyListeners(s,...o){const l=this.eventHandlers.get(s);l&&l.notify(...o)}hasListeners(s){return this.eventHandlers.has(s)}mount(s,o=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=eL(s),this.instance=s;const{layoutId:l,layout:u,visualElement:c}=this.options;if(c&&!c.current&&c.mount(s),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),o&&(u||l)&&(this.isLayoutDirty=!0),e){let d;const f=()=>this.root.updateBlockedByResize=!1;e(s,()=>{this.root.updateBlockedByResize=!0,d&&d(),d=rL(f,250),Co.hasAnimatedSinceResize&&(Co.hasAnimatedSinceResize=!1,this.nodes.forEach(rb))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&c&&(l||u)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:f,hasRelativeTargetChanged:m,layout:y})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const p=this.options.transition||c.getDefaultTransition()||jL,{onLayoutAnimationStart:x,onLayoutAnimationComplete:v}=c.getProps(),g=!this.targetLayout||!wM(this.targetLayout,y)||m,b=!f&&m;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||b||f&&(g||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(d,b);const _={...Cv(p,"layout"),onPlay:x,onComplete:v};(c.shouldReduceMotion||this.options.layoutRoot)&&(_.delay=0,_.type=!1),this.startAnimation(_)}else f||rb(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=y})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const s=this.getStack();s&&s.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,dr(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(CL),this.animationId++)}getTransformTemplate(){const{visualElement:s}=this.options;return s&&s.getProps().transformTemplate}willUpdate(s=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&bM(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let c=0;c<this.path.length;c++){const d=this.path[c];d.shouldResetTransform=!0,d.updateScroll("snapshot"),d.options.layoutRoot&&d.willUpdate(!1)}const{layoutId:o,layout:l}=this.options;if(o===void 0&&!l)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),s&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(nb);return}this.isUpdating||this.nodes.forEach(xL),this.isUpdating=!1,this.nodes.forEach(SL),this.nodes.forEach(yL),this.nodes.forEach(vL),this.clearAllSnapshots();const o=cn.now();Qe.delta=Nn(0,1e3/60,o-Qe.timestamp),Qe.timestamp=o,Qe.isProcessing=!0,Gu.update.process(Qe),Gu.preRender.process(Qe),Gu.render.process(Qe),Qe.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,mv.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(bL),this.sharedNodes.forEach(EL)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,xe.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){xe.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const s=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Oe(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:o}=this.options;o&&o.notify("LayoutMeasure",this.layout.layoutBox,s?s.layoutBox:void 0)}updateScroll(s="measure"){let o=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===s&&(o=!1),o){const l=r(this.instance);this.scroll={animationId:this.root.animationId,phase:s,isRoot:l,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!i)return;const s=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,o=this.projectionDelta&&!gM(this.projectionDelta),l=this.getTransformTemplate(),u=l?l(this.latestValues,""):void 0,c=u!==this.prevTransformTemplateValue;s&&(o||Mr(this.latestValues)||c)&&(i(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(s=!0){const o=this.measurePageBox();let l=this.removeElementScroll(o);return s&&(l=this.removeTransform(l)),PL(l),{animationId:this.root.animationId,measuredBox:o,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var s;const{visualElement:o}=this.options;if(!o)return Oe();const l=o.measureViewportBox();if(!(((s=this.scroll)===null||s===void 0?void 0:s.wasRoot)||this.path.some(NL))){const{scroll:c}=this.root;c&&(Ti(l.x,c.offset.x),Ti(l.y,c.offset.y))}return l}removeElementScroll(s){var o;const l=Oe();if(Nt(l,s),!((o=this.scroll)===null||o===void 0)&&o.wasRoot)return l;for(let u=0;u<this.path.length;u++){const c=this.path[u],{scroll:d,options:f}=c;c!==this.root&&d&&f.layoutScroll&&(d.wasRoot&&Nt(l,s),Ti(l.x,d.offset.x),Ti(l.y,d.offset.y))}return l}applyTransform(s,o=!1){const l=Oe();Nt(l,s);for(let u=0;u<this.path.length;u++){const c=this.path[u];!o&&c.options.layoutScroll&&c.scroll&&c!==c.root&&Mi(l,{x:-c.scroll.offset.x,y:-c.scroll.offset.y}),Mr(c.latestValues)&&Mi(l,c.latestValues)}return Mr(this.latestValues)&&Mi(l,this.latestValues),l}removeTransform(s){const o=Oe();Nt(o,s);for(let l=0;l<this.path.length;l++){const u=this.path[l];if(!u.instance||!Mr(u.latestValues))continue;ay(u.latestValues)&&u.updateSnapshot();const c=Oe(),d=u.measurePageBox();Nt(c,d),Yw(o,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,c)}return Mr(this.latestValues)&&Yw(o,this.latestValues),o}setTargetDelta(s){this.targetDelta=s,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(s){this.options={...this.options,...s,crossfade:s.crossfade!==void 0?s.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Qe.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(s=!1){var o;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==l;if(!(s||u&&this.isSharedProjectionDirty||this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:d,layoutId:f}=this.options;if(!(!this.layout||!(d||f))){if(this.resolvedRelativeTargetAt=Qe.timestamp,!this.targetDelta&&!this.relativeTarget){const m=this.getClosestProjectingParent();m&&m.layout&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Oe(),this.relativeTargetOrigin=Oe(),Ua(this.relativeTargetOrigin,this.layout.layoutBox,m.layout.layoutBox),Nt(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=Oe(),this.targetWithTransforms=Oe()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),IO(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Nt(this.target,this.layout.layoutBox),fM(this.target,this.targetDelta)):Nt(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const m=this.getClosestProjectingParent();m&&!!m.resumingFrom==!!this.resumingFrom&&!m.options.layoutScroll&&m.target&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Oe(),this.relativeTargetOrigin=Oe(),Ua(this.relativeTargetOrigin,this.target,m.target),Nt(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Ca&&jr.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||ay(this.parent.latestValues)||dM(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var s;const o=this.getLead(),l=!!this.resumingFrom||this!==o;let u=!0;if((this.isProjectionDirty||!((s=this.parent)===null||s===void 0)&&s.isProjectionDirty)&&(u=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===Qe.timestamp&&(u=!1),u)return;const{layout:c,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(c||d))return;Nt(this.layoutCorrected,this.layout.layoutBox);const f=this.treeScale.x,m=this.treeScale.y;zO(this.layoutCorrected,this.treeScale,this.path,l),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=Oe());const{target:y}=o;if(!y){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(Hw(this.prevProjectionDelta.x,this.projectionDelta.x),Hw(this.prevProjectionDelta.y,this.projectionDelta.y)),za(this.projectionDelta,this.layoutCorrected,y,this.latestValues),(this.treeScale.x!==f||this.treeScale.y!==m||!eb(this.projectionDelta.x,this.prevProjectionDelta.x)||!eb(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",y)),Ca&&jr.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(s=!0){var o;if((o=this.options.visualElement)===null||o===void 0||o.scheduleRender(),s){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Ei(),this.projectionDelta=Ei(),this.projectionDeltaWithTransform=Ei()}setAnimationOrigin(s,o=!1){const l=this.snapshot,u=l?l.latestValues:{},c={...this.latestValues},d=Ei();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!o;const f=Oe(),m=l?l.source:void 0,y=this.layout?this.layout.source:void 0,p=m!==y,x=this.getStack(),v=!x||x.members.length<=1,g=!!(p&&!v&&this.options.crossfade===!0&&!this.path.some(ML));this.animationProgress=0;let b;this.mixTargetDelta=_=>{const C=_/1e3;ib(d.x,s.x,C),ib(d.y,s.y,C),this.setTargetDelta(d),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Ua(f,this.layout.layoutBox,this.relativeParent.layout.layoutBox),TL(this.relativeTarget,this.relativeTargetOrigin,f,C),b&&dL(this.relativeTarget,b)&&(this.isProjectionDirty=!1),b||(b=Oe()),Nt(b,this.relativeTarget)),p&&(this.animationValues=c,aL(c,u,this.latestValues,C,g,v)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=C},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(s){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(dr(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=xe.update(()=>{Co.hasAnimatedSinceResize=!0,this.currentAnimation=ZO(0,tb,{...s,onUpdate:o=>{this.mixTargetDelta(o),s.onUpdate&&s.onUpdate(o)},onComplete:()=>{s.onComplete&&s.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const s=this.getStack();s&&s.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(tb),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const s=this.getLead();let{targetWithTransforms:o,target:l,layout:u,latestValues:c}=s;if(!(!o||!l||!u)){if(this!==s&&this.layout&&u&&SM(this.options.animationType,this.layout.layoutBox,u.layoutBox)){l=this.target||Oe();const d=Ct(this.layout.layoutBox.x);l.x.min=s.target.x.min,l.x.max=l.x.min+d;const f=Ct(this.layout.layoutBox.y);l.y.min=s.target.y.min,l.y.max=l.y.min+f}Nt(o,l),Mi(o,c),za(this.projectionDeltaWithTransform,this.layoutCorrected,o,c)}}registerSharedNode(s,o){this.sharedNodes.has(s)||this.sharedNodes.set(s,new fL),this.sharedNodes.get(s).add(o);const u=o.options.initialPromotionConfig;o.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(o):void 0})}isLead(){const s=this.getStack();return s?s.lead===this:!0}getLead(){var s;const{layoutId:o}=this.options;return o?((s=this.getStack())===null||s===void 0?void 0:s.lead)||this:this}getPrevLead(){var s;const{layoutId:o}=this.options;return o?(s=this.getStack())===null||s===void 0?void 0:s.prevLead:void 0}getStack(){const{layoutId:s}=this.options;if(s)return this.root.sharedNodes.get(s)}promote({needsReset:s,transition:o,preserveFollowOpacity:l}={}){const u=this.getStack();u&&u.promote(this,l),s&&(this.projectionDelta=void 0,this.needsReset=!0),o&&this.setOptions({transition:o})}relegate(){const s=this.getStack();return s?s.relegate(this):!1}resetSkewAndRotation(){const{visualElement:s}=this.options;if(!s)return;let o=!1;const{latestValues:l}=s;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(o=!0),!o)return;const u={};l.z&&tc("z",s,u,this.animationValues);for(let c=0;c<ec.length;c++)tc(`rotate${ec[c]}`,s,u,this.animationValues),tc(`skew${ec[c]}`,s,u,this.animationValues);s.render();for(const c in u)s.setStaticValue(c,u[c]),this.animationValues&&(this.animationValues[c]=u[c]);s.scheduleRender()}getProjectionStyles(s){var o,l;if(!this.instance||this.isSVG)return;if(!this.isVisible)return pL;const u={visibility:""},c=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,u.opacity="",u.pointerEvents=_o(s==null?void 0:s.pointerEvents)||"",u.transform=c?c(this.latestValues,""):"none",u;const d=this.getLead();if(!this.projectionDelta||!this.layout||!d.target){const p={};return this.options.layoutId&&(p.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,p.pointerEvents=_o(s==null?void 0:s.pointerEvents)||""),this.hasProjected&&!Mr(this.latestValues)&&(p.transform=c?c({},""):"none",this.hasProjected=!1),p}const f=d.animationValues||d.latestValues;this.applyTransformsToTarget(),u.transform=hL(this.projectionDeltaWithTransform,this.treeScale,f),c&&(u.transform=c(f,u.transform));const{x:m,y}=this.projectionDelta;u.transformOrigin=`${m.origin*100}% ${y.origin*100}% 0`,d.animationValues?u.opacity=d===this?(l=(o=f.opacity)!==null&&o!==void 0?o:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:f.opacityExit:u.opacity=d===this?f.opacity!==void 0?f.opacity:"":f.opacityExit!==void 0?f.opacityExit:0;for(const p in Xo){if(f[p]===void 0)continue;const{correct:x,applyTo:v}=Xo[p],g=u.transform==="none"?f[p]:x(f[p],d);if(v){const b=v.length;for(let _=0;_<b;_++)u[v[_]]=g}else u[p]=g}return this.options.layoutId&&(u.pointerEvents=d===this?_o(s==null?void 0:s.pointerEvents)||"":"none"),u}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(s=>{var o;return(o=s.currentAnimation)===null||o===void 0?void 0:o.stop()}),this.root.nodes.forEach(nb),this.root.sharedNodes.clear()}}}function yL(e){e.updateLayout()}function vL(e){var t;const n=((t=e.resumeFrom)===null||t===void 0?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&n&&e.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=e.layout,{animationType:a}=e.options,s=n.source!==e.layout.source;a==="size"?At(d=>{const f=s?n.measuredBox[d]:n.layoutBox[d],m=Ct(f);f.min=r[d].min,f.max=f.min+m}):SM(a,n.layoutBox,r)&&At(d=>{const f=s?n.measuredBox[d]:n.layoutBox[d],m=Ct(r[d]);f.max=f.min+m,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[d].max=e.relativeTarget[d].min+m)});const o=Ei();za(o,r,n.layoutBox);const l=Ei();s?za(l,e.applyTransform(i,!0),n.measuredBox):za(l,r,n.layoutBox);const u=!gM(o);let c=!1;if(!e.resumeFrom){const d=e.getClosestProjectingParent();if(d&&!d.resumeFrom){const{snapshot:f,layout:m}=d;if(f&&m){const y=Oe();Ua(y,n.layoutBox,f.layoutBox);const p=Oe();Ua(p,r,m.layoutBox),wM(y,p)||(c=!0),d.options.layoutRoot&&(e.relativeTarget=p,e.relativeTargetOrigin=y,e.relativeParent=d)}}}e.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:l,layoutDelta:o,hasLayoutChanged:u,hasRelativeTargetChanged:c})}else if(e.isLead()){const{onExitComplete:r}=e.options;r&&r()}e.options.transition=void 0}function gL(e){Ca&&jr.totalNodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function wL(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function bL(e){e.clearSnapshot()}function nb(e){e.clearMeasurements()}function xL(e){e.isLayoutDirty=!1}function SL(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function rb(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function _L(e){e.resolveTargetDelta()}function kL(e){e.calcProjection()}function CL(e){e.resetSkewAndRotation()}function EL(e){e.removeLeadSnapshot()}function ib(e,t,n){e.translate=Te(t.translate,0,n),e.scale=Te(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function ab(e,t,n,r){e.min=Te(t.min,n.min,r),e.max=Te(t.max,n.max,r)}function TL(e,t,n,r){ab(e.x,t.x,n.x,r),ab(e.y,t.y,n.y,r)}function ML(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const jL={duration:.45,ease:[.4,0,.1,1]},sb=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),ob=sb("applewebkit/")&&!sb("chrome/")?Math.round:_t;function lb(e){e.min=ob(e.min),e.max=ob(e.max)}function PL(e){lb(e.x),lb(e.y)}function SM(e,t,n){return e==="position"||e==="preserve-aspect"&&!RO(Zw(t),Zw(n),.2)}function NL(e){var t;return e!==e.root&&((t=e.scroll)===null||t===void 0?void 0:t.wasRoot)}const AL=xM({attachResizeListener:(e,t)=>fs(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),nc={current:void 0},_M=xM({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!nc.current){const e=new AL({});e.mount(window),e.setOptions({layoutScroll:!0}),nc.current=e}return nc.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),RL={pan:{Feature:YO},drag:{Feature:KO,ProjectionNode:_M,MeasureLayout:mM}};function ub(e,t,n){const{props:r}=e;e.animationState&&r.whileHover&&e.animationState.setActive("whileHover",n==="Start");const i="onHover"+n,a=r[i];a&&xe.postRender(()=>a(t,Ss(t)))}class IL extends vr{mount(){const{current:t}=this.node;t&&(this.unmount=RD(t,n=>(ub(this.node,n,"Start"),r=>ub(this.node,r,"End"))))}unmount(){}}class DL extends vr{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=xs(fs(this.node.current,"focus",()=>this.onFocus()),fs(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function cb(e,t,n){const{props:r}=e;e.animationState&&r.whileTap&&e.animationState.setActive("whileTap",n==="Start");const i="onTap"+(n==="End"?"":n),a=r[i];a&&xe.postRender(()=>a(t,Ss(t)))}class OL extends vr{mount(){const{current:t}=this.node;t&&(this.unmount=LD(t,n=>(cb(this.node,n,"Start"),(r,{success:i})=>cb(this.node,r,i?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const oy=new WeakMap,rc=new WeakMap,LL=e=>{const t=oy.get(e.target);t&&t(e)},qL=e=>{e.forEach(LL)};function FL({root:e,...t}){const n=e||document;rc.has(n)||rc.set(n,{});const r=rc.get(n),i=JSON.stringify(t);return r[i]||(r[i]=new IntersectionObserver(qL,{root:e,...t})),r[i]}function VL(e,t,n){const r=FL(t);return oy.set(e,n),r.observe(e),()=>{oy.delete(e),r.unobserve(e)}}const $L={some:0,all:1};class BL extends vr{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:a}=t,s={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:$L[i]},o=l=>{const{isIntersecting:u}=l;if(this.isInView===u||(this.isInView=u,a&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:c,onViewportLeave:d}=this.node.getProps(),f=u?c:d;f&&f(l)};return VL(this.node.current,s,o)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:n}=this.node;["amount","margin","root"].some(zL(t,n))&&this.startObserver()}unmount(){}}function zL({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}const UL={inView:{Feature:BL},tap:{Feature:OL},focus:{Feature:DL},hover:{Feature:IL}},GL={layout:{ProjectionNode:_M,MeasureLayout:mM}},ly={current:null},kM={current:!1};function HL(){if(kM.current=!0,!!cv)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>ly.current=e.matches;e.addListener(t),t()}else ly.current=!1}const WL=[...YT,nt,fr],KL=e=>WL.find(KT(e)),db=new WeakMap;function YL(e,t,n){for(const r in t){const i=t[r],a=n[r];if(it(i))e.addValue(r,i);else if(it(a))e.addValue(r,cs(i,{owner:e}));else if(a!==i)if(e.hasValue(r)){const s=e.getValue(r);s.liveStyle===!0?s.jump(i):s.hasAnimated||s.set(i)}else{const s=e.getStaticValue(r);e.addValue(r,cs(s!==void 0?s:i,{owner:e}))}}for(const r in n)t[r]===void 0&&e.removeValue(r);return t}const fb=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class QL{scrapeMotionValuesFromProps(t,n,r){return{}}constructor({parent:t,props:n,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:a,visualState:s},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Lv,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const m=cn.now();this.renderScheduledAt<m&&(this.renderScheduledAt=m,xe.render(this.render,!1,!0))};const{latestValues:l,renderState:u,onUpdate:c}=s;this.onUpdate=c,this.latestValues=l,this.baseTarget={...l},this.initialValues=n.initial?{...l}:{},this.renderState=u,this.parent=t,this.props=n,this.presenceContext=r,this.depth=t?t.depth+1:0,this.reducedMotionConfig=i,this.options=o,this.blockInitialAnimation=!!a,this.isControllingVariants=El(n),this.isVariantNode=rT(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:d,...f}=this.scrapeMotionValuesFromProps(n,{},this);for(const m in f){const y=f[m];l[m]!==void 0&&it(y)&&y.set(l[m],!1)}}mount(t){this.current=t,db.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),kM.current||HL(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:ly.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){db.delete(this.current),this.projection&&this.projection.unmount(),dr(this.notifyUpdate),dr(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const n=this.features[t];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(t,n){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const r=Hr.has(t),i=n.on("change",o=>{this.latestValues[t]=o,this.props.onUpdate&&xe.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),a=n.on("renderRequest",this.scheduleRender);let s;window.MotionCheckAppearSync&&(s=window.MotionCheckAppearSync(this,t,n)),this.valueSubscriptions.set(t,()=>{i(),a(),s&&s(),n.owner&&n.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in zi){const n=zi[t];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[t]&&i&&r(this.props)&&(this.features[t]=new i(this)),this.features[t]){const a=this.features[t];a.isMounted?a.update():(a.mount(),a.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Oe()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,n){this.latestValues[t]=n}update(t,n){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<fb.length;r++){const i=fb[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const a="on"+i,s=t[a];s&&(this.propEventSubscriptions[i]=this.on(i,s))}this.prevMotionValues=YL(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(t),()=>n.variantChildren.delete(t)}addValue(t,n){const r=this.values.get(t);n!==r&&(r&&this.removeValue(t),this.bindToMotionValue(t,n),this.values.set(t,n),this.latestValues[t]=n.get())}removeValue(t){this.values.delete(t);const n=this.valueSubscriptions.get(t);n&&(n(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,n){if(this.props.values&&this.props.values[t])return this.props.values[t];let r=this.values.get(t);return r===void 0&&n!==void 0&&(r=cs(n===null?void 0:n,{owner:this}),this.addValue(t,r)),r}readValue(t,n){var r;let i=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:(r=this.getBaseTargetFromProps(this.props,t))!==null&&r!==void 0?r:this.readValueFromInstance(this.current,t,this.options);return i!=null&&(typeof i=="string"&&(HT(i)||LT(i))?i=parseFloat(i):!KL(i)&&fr.test(n)&&(i=zT(t,n)),this.setBaseTarget(t,it(i)?i.get():i)),it(i)?i.get():i}setBaseTarget(t,n){this.baseTarget[t]=n}getBaseTarget(t){var n;const{initial:r}=this.props;let i;if(typeof r=="string"||typeof r=="object"){const s=vv(this.props,r,(n=this.presenceContext)===null||n===void 0?void 0:n.custom);s&&(i=s[t])}if(r&&i!==void 0)return i;const a=this.getBaseTargetFromProps(this.props,t);return a!==void 0&&!it(a)?a:this.initialValues[t]!==void 0&&i===void 0?void 0:this.baseTarget[t]}on(t,n){return this.events[t]||(this.events[t]=new Nv),this.events[t].add(n)}notify(t,...n){this.events[t]&&this.events[t].notify(...n)}}class CM extends QL{constructor(){super(...arguments),this.KeyframeResolver=QT}sortInstanceNodePosition(t,n){return t.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(t,n){return t.style?t.style[n]:void 0}removeValueFromRenderState(t,{vars:n,style:r}){delete n[t],delete r[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;it(t)&&(this.childSubscription=t.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function XL(e){return window.getComputedStyle(e)}class JL extends CM{constructor(){super(...arguments),this.type="html",this.renderInstance=fT}readValueFromInstance(t,n){if(Hr.has(n)){const r=Ov(n);return r&&r.default||0}else{const r=XL(t),i=(uT(n)?r.getPropertyValue(n):r[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(t,{transformPagePoint:n}){return hM(t,n)}build(t,n,r){bv(t,n,r.transformTemplate)}scrapeMotionValuesFromProps(t,n,r){return kv(t,n,r)}}class ZL extends CM{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Oe}getBaseTargetFromProps(t,n){return t[n]}readValueFromInstance(t,n){if(Hr.has(n)){const r=Ov(n);return r&&r.default||0}return n=hT.has(n)?n:pv(n),t.getAttribute(n)}scrapeMotionValuesFromProps(t,n,r){return yT(t,n,r)}build(t,n,r){xv(t,n,this.isSVGTag,r.transformTemplate)}renderInstance(t,n,r,i){pT(t,n,r,i)}mount(t){this.isSVGTag=_v(t.tagName),super.mount(t)}}const eq=(e,t)=>yv(e)?new ZL(t):new JL(t,{allowProjection:e!==S.Fragment}),tq=ED({...kO,...UL,...RL,...GL},eq),nq=$I(tq);function rq({steps:e,fromRects:t,toRects:n,onComplete:r}){return S.useEffect(()=>{const i=window.setTimeout(r,550);return()=>window.clearTimeout(i)},[r]),h.jsx("div",{className:"morph-layer",children:e.map(i=>{var o;const a=t[i.id],s=n[i.id];return!a||!s?null:h.jsxs(nq.div,{className:`morph-card step-${i.type}`,initial:{left:a.left,top:a.top,width:a.width,height:a.height},animate:{left:s.left,top:s.top,width:s.width,height:s.height},transition:{duration:.5,ease:"easeInOut"},children:[h.jsx("div",{className:"morph-card-title",children:i.name}),h.jsx("div",{className:"morph-card-subtitle",children:((o=i.preview)==null?void 0:o.title)??i.type})]},i.id)})})}function iq({morph:e,onComplete:t,children:n}){return h.jsxs("div",{className:"morph-orchestrator",children:[n,e?h.jsx(rq,{steps:e.steps,fromRects:e.fromRects,toRects:e.toRects,onComplete:t}):null]})}const aq="demo-trace-overlap-001",sq="Overlap + ToolCallId Demo",oq="2026-01-27T10:00:00.000Z",lq="2026-01-27T10:00:05.000Z",uq="completed",cq={source:"openai_agents",agentName:"DemoAgent",modelId:"gpt-4o-2024-11-20",wallTimeMs:5e3,workTimeMs:7200,totalTokens:1400,totalCostUsd:.018},dq=[{id:"s1",index:0,type:"llm_call",name:"plan",startedAt:"2026-01-27T10:00:00.000Z",endedAt:"2026-01-27T10:00:01.000Z",durationMs:1e3,childStepIds:[],metrics:{tokensTotal:300,costUsd:.004},preview:{title:"LLM: plan",subtitle:"gpt-4o",outputPreview:"I'll fetch two sources..."},status:"completed"},{id:"s2",index:1,type:"llm_call",name:"call_tools",startedAt:"2026-01-27T10:00:01.000Z",endedAt:"2026-01-27T10:00:01.200Z",durationMs:200,childStepIds:[],metrics:{tokensTotal:120,costUsd:.002},preview:{title:"LLM: call tools",outputPreview:"Calling web_search + database_query"},io:{emittedToolCallIds:["tc-001","tc-002"]},status:"completed"},{id:"s3",index:2,type:"tool_call",name:"web_search",toolCallId:"tc-001",startedAt:"2026-01-27T10:00:01.200Z",endedAt:"2026-01-27T10:00:03.200Z",durationMs:2e3,childStepIds:[],metrics:{costUsd:0},preview:{title:"Tool: web_search",inputPreview:'{"q":"EU AI Act"}',outputPreview:"[3 results...]"},status:"completed"},{id:"s4",index:3,type:"tool_call",name:"database_query",toolCallId:"tc-002",startedAt:"2026-01-27T10:00:01.500Z",endedAt:"2026-01-27T10:00:02.700Z",durationMs:1200,childStepIds:[],preview:{title:"Tool: database_query",inputPreview:'{"sql":"SELECT..."}',outputPreview:'{"rows":42}'},status:"completed"},{id:"s5",index:4,type:"llm_call",name:"analyze",startedAt:"2026-01-27T10:00:03.200Z",endedAt:"2026-01-27T10:00:04.600Z",durationMs:1400,childStepIds:[],metrics:{tokensTotal:700,costUsd:.012},preview:{title:"LLM: analyze",outputPreview:"Synthesis based on tool outputs..."},io:{consumedToolCallIds:["tc-001","tc-002"]},status:"completed"}],jl={id:aq,name:sq,startedAt:oq,endedAt:lq,status:uq,metadata:cq,steps:dq};function EM(e,t){const n=fq(e,t),r=new Set(n.map(d=>d.leftId)),i=new Set(n.map(d=>d.rightId)),a=t.steps.filter(d=>!i.has(d.id)).map(d=>d.id),s=e.steps.filter(d=>!r.has(d.id)).map(d=>d.id),o=n.filter(d=>{const f=e.steps.find(y=>y.id===d.leftId),m=t.steps.find(y=>y.id===d.rightId);return!f||!m?!1:hb(f)!==hb(m)}),l=o.map(d=>d.leftId),u=(t.metadata.totalCostUsd??0)-(e.metadata.totalCostUsd??0),c=t.metadata.wallTimeMs-e.metadata.wallTimeMs;return{addedSteps:a,removedSteps:s,changedSteps:l,changedPairs:o,alignedSteps:n,costDeltaUsd:u,wallTimeDeltaMs:c}}function fq(e,t){const n=[],r=new Set(e.steps.map(c=>c.id)),i=new Set(t.steps.map(c=>c.id));Array.from(r).forEach(c=>{i.has(c)&&(n.push({leftId:c,rightId:c}),r.delete(c),i.delete(c))});const a=new Map;t.steps.forEach(c=>{c.toolCallId&&a.set(c.toolCallId,c.id)}),e.steps.forEach(c=>{if(!c.toolCallId)return;const d=a.get(c.toolCallId);d&&i.has(d)&&(n.push({leftId:c.id,rightId:d}),r.delete(c.id),i.delete(d))});const s=yb(e),o=yb(t),l=hq(e,t),u={};return i.forEach(c=>{const d=o.get(c);if(!d)return;const f=pb(d.step);f&&(u[f]||(u[f]=[]),u[f].push(c))}),Object.values(u).forEach(c=>{c.sort((d,f)=>{var m,y;return(((m=o.get(d))==null?void 0:m.startMs)??0)-(((y=o.get(f))==null?void 0:y.startMs)??0)})}),Array.from(r).forEach(c=>{var y;const d=s.get(c);if(!d)return;const f=pb(d.step);if(!f||!((y=u[f])!=null&&y.length))return;const m=pq(d,u[f],o,l);m&&(n.push({leftId:c,rightId:m}),r.delete(c),i.delete(m),u[f]=u[f].filter(p=>p!==m))}),n}function hb(e){var r,i;const t=((r=e.preview)==null?void 0:r.outputPreview)??null,n=((i=e.metrics)==null?void 0:i.costUsd)??null;return`${e.status}|${t??""}|${n??""}`}function pb(e){return e.type?`${e.type}:${e.name??""}`:null}function mb(e){if(!e)return null;const t=Date.parse(e);return Number.isNaN(t)?null:t}function yb(e){const t=mb(e.startedAt),n=new Map;return e.steps.forEach(r=>{const i=mb(r.startedAt),a=t!=null&&i!=null?i-t:null;n.set(r.id,{step:r,startMs:a})}),n}function hq(e,t){const n=Math.max(e.metadata.wallTimeMs,t.metadata.wallTimeMs,1);return Math.max(1e3,Math.min(5e3,Math.round(n*.1)))}function pq(e,t,n,r){const i=e.startMs;if(i==null)return null;let a=null,s=r+1;return t.forEach(o=>{const l=n.get(o);if(!l||l.startMs==null)return;const u=Math.abs(l.startMs-i);u<s&&(s=u,a=o)}),s<=r?a:null}const mq=new Map,yq=new Map,qr=new Map;async function vq(){return[jl]}async function TM(e){return{trace:jl}}const gq={s1:{role:"assistant",content:"I'll analyze the user's request and create a plan to fetch information from two sources: a web search for current EU AI Act updates and a database query for historical compliance data.",model:"gpt-4o-2024-11-20",usage:{prompt_tokens:150,completion_tokens:150,total_tokens:300},reasoning:"The user wants comprehensive information about AI regulations. I'll use parallel tool calls to maximize efficiency."},s2:{role:"assistant",content:null,tool_calls:[{id:"tc-001",type:"function",function:{name:"web_search",arguments:'{"q":"EU AI Act latest updates 2026"}'}},{id:"tc-002",type:"function",function:{name:"database_query",arguments:`{"sql":"SELECT * FROM compliance_records WHERE region='EU' ORDER BY date DESC LIMIT 10"}`}}],model:"gpt-4o-2024-11-20",usage:{prompt_tokens:80,completion_tokens:40,total_tokens:120}},s3:{tool_call_id:"tc-001",tool_name:"web_search",input:{q:"EU AI Act latest updates 2026"},output:{results:[{title:"EU AI Act Implementation Timeline",url:"https://example.com/ai-act",snippet:"The EU AI Act enters full force in 2026..."},{title:"High-Risk AI Systems Classification",url:"https://example.com/classification",snippet:"New guidance on high-risk categorization..."},{title:"Compliance Deadlines Approaching",url:"https://example.com/deadlines",snippet:"Organizations must comply by August 2026..."}],total_results:3,search_time_ms:1850},status:"success"},s4:{tool_call_id:"tc-002",tool_name:"database_query",input:{sql:"SELECT * FROM compliance_records WHERE region='EU' ORDER BY date DESC LIMIT 10"},output:{rows:[{id:1,company:"TechCorp",status:"compliant",date:"2026-01-15"},{id:2,company:"AIStartup",status:"in_progress",date:"2026-01-10"},{id:3,company:"DataCo",status:"compliant",date:"2026-01-05"}],row_count:42,query_time_ms:1100},status:"success"},s5:{role:"assistant",content:`Based on my analysis of the web search results and database records:

**Key Findings:**
1. The EU AI Act is now in full effect as of 2026
2. High-risk AI systems require specific compliance measures
3. 42 organizations in our database have compliance records

**Recommendations:**
- Review classification of AI systems
- Ensure documentation is complete
- Schedule compliance audit before August deadline`,model:"gpt-4o-2024-11-20",usage:{prompt_tokens:450,completion_tokens:250,total_tokens:700},reasoning:"Synthesized information from both the web search (3 relevant articles) and database query (42 compliance records) to provide actionable insights."}};function wq(e,t){const n=jl.steps.find(a=>a.id===e);if(!n)return null;const r=gq[e];if(!r)return null;const i=t?bq(r):r;return{...n,data:i}}function bq(e){var n,r;const t=JSON.parse(JSON.stringify(e));return(n=t.input)!=null&&n.sql&&(t.input.sql="[REDACTED]"),(r=t.output)!=null&&r.rows&&(t.output.rows=t.output.rows.map(i=>({...i,company:"[REDACTED]"}))),t.tool_calls&&(t.tool_calls=t.tool_calls.map(i=>({...i,function:{...i.function,arguments:"[REDACTED]"}}))),t}async function xq(e,t,n,r=[],i=!1){return await new Promise(a=>setTimeout(a,150)),wq(t,i)}async function Sq(e,t,n){await xq(e,t,"redacted",[],n)}function _q(e,t){return()=>{}}function kq(){mq.clear(),yq.clear()}async function Cq(e,t){return null}async function Eq(e){return null}async function kz(e,t){return[]}async function Cz(e,t,n,r,i){return null}async function Tq(){return[]}async function Mq(e,t){return null}async function jq(e,t,n,r,i){return i?MM(i,t,n,r):null}function MM(e,t,n,r){var y;const i=JSON.parse(JSON.stringify(e)),a=6e4,s=Date.parse("2024-01-01T00:00:00.000Z"),o=Date.parse(e.endedAt??e.startedAt??""),u=(Number.isNaN(o)?s:o)+a,c=new Date(u);i.id=`${e.id}-replay-${u}`,i.parentTraceId=e.id,i.branchPointStepId=t,i.replay={strategy:n,modifiedStepId:t,modifications:r,createdAt:c.toISOString()};const d=p=>{if(!p)return p;const x=Date.parse(p);return Number.isNaN(x)?p:new Date(x+a).toISOString()};i.startedAt=d(i.startedAt)??i.startedAt,i.endedAt=d(i.endedAt);const f=new Set,m=((y=i.steps.find(p=>p.id===t))==null?void 0:y.index)??-1;return n==="live"?i.steps.forEach(p=>{p.index>m&&f.add(p.id)}):n==="hybrid"&&i.steps.forEach(p=>{p.index>m&&f.add(p.id)}),i.steps=i.steps.map(p=>{var v;const x={...p};if(x.startedAt=d(p.startedAt)??p.startedAt,x.endedAt=d(p.endedAt),p.id===t){const g=((v=p.preview)==null?void 0:v.outputPreview)??"";x.preview={...p.preview,outputPreview:`${g} (modified)`.trim()}}return f.has(p.id)&&(x.status="pending",x.endedAt=null,x.durationMs=void 0,x.metrics=void 0,x.preview={...p.preview,outputPreview:"[invalidated for replay]"}),x}),i}async function Pq(e){return Rq(e)}async function Nq(e){var t;return((t=qr.get(e))==null?void 0:t.job)??null}async function vb(e){var t;return((t=qr.get(e))==null?void 0:t.matrix)??null}async function Aq(e){{const t=qr.get(e);if(!t)return null;const n={...t.job,status:"canceled",scenarios:t.job.scenarios.map(r=>({...r,status:"canceled",endedAt:r.endedAt??new Date().toISOString()}))};return qr.set(e,{...t,job:n}),n}}function Rq(e){const t=`demo-job-${Date.now()}-${Math.random().toString(36).slice(2,6)}`,n=jl,r=new Date().toISOString(),i=e.scenarios.map((l,u)=>({id:`demo-scn-${u+1}`,name:l.name,strategy:l.strategy,modifications:l.modifications,status:"running",startedAt:r,endedAt:null,replayTraceId:`${t}-replay-${u+1}`})),a={id:t,traceId:e.traceId,stepId:e.stepId,status:"running",createdAt:r,startedAt:r,endedAt:null,scenarioCount:i.length,completedCount:0,failedCount:0,canceledCount:0,scenarios:i},s=i.map(l=>{const u=MM(n,e.stepId,l.strategy,l.modifications);u.id=l.replayTraceId;const c=EM(n,u),d=n.metadata.totalCostUsd??0,f=u.metadata.totalCostUsd??d,m=n.metadata.errorCount??0,y=u.metadata.errorCount??m,p=n.metadata.retryCount??0,x=u.metadata.retryCount??p,v=u.steps.filter(g=>g.status==="pending").length;return{scenarioId:l.id,name:l.name,strategy:l.strategy,status:"completed",replayTraceId:l.replayTraceId,modifications:l.modifications,error:null,changedStepIds:c.changedSteps,addedStepIds:c.addedSteps,removedStepIds:c.removedSteps,metrics:{costDeltaUsd:f-d,wallTimeDeltaMs:(u.metadata.wallTimeMs??0)-(n.metadata.wallTimeMs??0),errorDelta:y-m,retryDelta:x-p,changedSteps:c.changedSteps.length,addedSteps:c.addedSteps.length,removedSteps:c.removedSteps.length,invalidatedStepCount:v}}}),o={jobId:t,traceId:e.traceId,stepId:e.stepId,rows:s,causalRanking:[]};return qr.set(t,{job:a,matrix:o}),window.setTimeout(()=>{const l=qr.get(t);if(!l)return;const u=new Date().toISOString(),c=l.job.scenarios.map(m=>({...m,status:"completed",endedAt:u})),d={...l.job,status:"completed",endedAt:u,completedCount:c.length,scenarios:c},f={...l.matrix,rows:l.matrix.rows.map(m=>({...m,status:"completed"}))};qr.set(t,{job:d,matrix:f})},600),a}async function Iq(e){return null}async function gb(e){return null}async function Dq(e){return null}async function Oq(e){return null}async function wb(e){return{session:null,conflict:!1,error:null}}async function Lq(e){return null}async function qq(e){return null}async function Fq(e,t){return null}async function Vq(e){return null}async function $q(e,t,n){return null}async function Bq(){return null}async function zq(){return null}function Uq(e,t,n){return()=>{}}function Gq(){const[e,t]=S.useState(null),[n,r]=S.useState(null),[i,a]=S.useState(!0),[s,o]=S.useState(null),[l,u]=S.useState([]),[c,d]=S.useState(null),f=S.useCallback(async y=>{const p=await TM(),x=(p==null?void 0:p.trace)??null;t(x),r(x?(p==null?void 0:p.insights)??LR(x):null)},[t,r]),m=S.useCallback(async()=>{var y;a(!0),o(null);try{const p=await vq();u(p);const x=((y=p[p.length-1])==null?void 0:y.id)??null,v=c??x;if(!v){t(null),r(null);return}if(!c||c!==v){d(v);return}await f(v)}catch(p){o(p instanceof Error?p.message:"Failed to load trace")}finally{a(!1)}},[c,f]);return S.useEffect(()=>{m()},[m]),S.useEffect(()=>{c&&(a(!0),f(c).catch(y=>{o(y instanceof Error?y.message:"Failed to load trace")}).finally(()=>a(!1)))},[c,f]),S.useEffect(()=>_q(),[c,d]),{trace:e,insights:n,loading:i,error:s,reload:m,traces:l,selectedTraceId:c,setSelectedTraceId:d}}function Ce(e,t){const[n,r]=S.useState(()=>{if(typeof window>"u")return t;try{const i=window.localStorage.getItem(e);return i==null?t:JSON.parse(i)}catch{return t}});return S.useEffect(()=>{try{window.localStorage.setItem(e,JSON.stringify(n))}catch{}},[e,n]),[n,r]}function $v(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var ic,bb;function Hq(){if(bb)return ic;bb=1;function e(){this.__data__=[],this.size=0}return ic=e,ic}var ac,xb;function Qi(){if(xb)return ac;xb=1;function e(t,n){return t===n||t!==t&&n!==n}return ac=e,ac}var sc,Sb;function Pl(){if(Sb)return sc;Sb=1;var e=Qi();function t(n,r){for(var i=n.length;i--;)if(e(n[i][0],r))return i;return-1}return sc=t,sc}var oc,_b;function Wq(){if(_b)return oc;_b=1;var e=Pl(),t=Array.prototype,n=t.splice;function r(i){var a=this.__data__,s=e(a,i);if(s<0)return!1;var o=a.length-1;return s==o?a.pop():n.call(a,s,1),--this.size,!0}return oc=r,oc}var lc,kb;function Kq(){if(kb)return lc;kb=1;var e=Pl();function t(n){var r=this.__data__,i=e(r,n);return i<0?void 0:r[i][1]}return lc=t,lc}var uc,Cb;function Yq(){if(Cb)return uc;Cb=1;var e=Pl();function t(n){return e(this.__data__,n)>-1}return uc=t,uc}var cc,Eb;function Qq(){if(Eb)return cc;Eb=1;var e=Pl();function t(n,r){var i=this.__data__,a=e(i,n);return a<0?(++this.size,i.push([n,r])):i[a][1]=r,this}return cc=t,cc}var dc,Tb;function Nl(){if(Tb)return dc;Tb=1;var e=Hq(),t=Wq(),n=Kq(),r=Yq(),i=Qq();function a(s){var o=-1,l=s==null?0:s.length;for(this.clear();++o<l;){var u=s[o];this.set(u[0],u[1])}}return a.prototype.clear=e,a.prototype.delete=t,a.prototype.get=n,a.prototype.has=r,a.prototype.set=i,dc=a,dc}var fc,Mb;function Xq(){if(Mb)return fc;Mb=1;var e=Nl();function t(){this.__data__=new e,this.size=0}return fc=t,fc}var hc,jb;function Jq(){if(jb)return hc;jb=1;function e(t){var n=this.__data__,r=n.delete(t);return this.size=n.size,r}return hc=e,hc}var pc,Pb;function Zq(){if(Pb)return pc;Pb=1;function e(t){return this.__data__.get(t)}return pc=e,pc}var mc,Nb;function eF(){if(Nb)return mc;Nb=1;function e(t){return this.__data__.has(t)}return mc=e,mc}var yc,Ab;function jM(){if(Ab)return yc;Ab=1;var e=typeof Fs=="object"&&Fs&&Fs.Object===Object&&Fs;return yc=e,yc}var vc,Rb;function Xt(){if(Rb)return vc;Rb=1;var e=jM(),t=typeof self=="object"&&self&&self.Object===Object&&self,n=e||t||Function("return this")();return vc=n,vc}var gc,Ib;function Xi(){if(Ib)return gc;Ib=1;var e=Xt(),t=e.Symbol;return gc=t,gc}var wc,Db;function tF(){if(Db)return wc;Db=1;var e=Xi(),t=Object.prototype,n=t.hasOwnProperty,r=t.toString,i=e?e.toStringTag:void 0;function a(s){var o=n.call(s,i),l=s[i];try{s[i]=void 0;var u=!0}catch{}var c=r.call(s);return u&&(o?s[i]=l:delete s[i]),c}return wc=a,wc}var bc,Ob;function nF(){if(Ob)return bc;Ob=1;var e=Object.prototype,t=e.toString;function n(r){return t.call(r)}return bc=n,bc}var xc,Lb;function Wr(){if(Lb)return xc;Lb=1;var e=Xi(),t=tF(),n=nF(),r="[object Null]",i="[object Undefined]",a=e?e.toStringTag:void 0;function s(o){return o==null?o===void 0?i:r:a&&a in Object(o)?t(o):n(o)}return xc=s,xc}var Sc,qb;function Ft(){if(qb)return Sc;qb=1;function e(t){var n=typeof t;return t!=null&&(n=="object"||n=="function")}return Sc=e,Sc}var _c,Fb;function _s(){if(Fb)return _c;Fb=1;var e=Wr(),t=Ft(),n="[object AsyncFunction]",r="[object Function]",i="[object GeneratorFunction]",a="[object Proxy]";function s(o){if(!t(o))return!1;var l=e(o);return l==r||l==i||l==n||l==a}return _c=s,_c}var kc,Vb;function rF(){if(Vb)return kc;Vb=1;var e=Xt(),t=e["__core-js_shared__"];return kc=t,kc}var Cc,$b;function iF(){if($b)return Cc;$b=1;var e=rF(),t=function(){var r=/[^.]+$/.exec(e&&e.keys&&e.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}();function n(r){return!!t&&t in r}return Cc=n,Cc}var Ec,Bb;function PM(){if(Bb)return Ec;Bb=1;var e=Function.prototype,t=e.toString;function n(r){if(r!=null){try{return t.call(r)}catch{}try{return r+""}catch{}}return""}return Ec=n,Ec}var Tc,zb;function aF(){if(zb)return Tc;zb=1;var e=_s(),t=iF(),n=Ft(),r=PM(),i=/[\\^$.*+?()[\]{}|]/g,a=/^\[object .+?Constructor\]$/,s=Function.prototype,o=Object.prototype,l=s.toString,u=o.hasOwnProperty,c=RegExp("^"+l.call(u).replace(i,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function d(f){if(!n(f)||t(f))return!1;var m=e(f)?c:a;return m.test(r(f))}return Tc=d,Tc}var Mc,Ub;function sF(){if(Ub)return Mc;Ub=1;function e(t,n){return t==null?void 0:t[n]}return Mc=e,Mc}var jc,Gb;function Kr(){if(Gb)return jc;Gb=1;var e=aF(),t=sF();function n(r,i){var a=t(r,i);return e(a)?a:void 0}return jc=n,jc}var Pc,Hb;function Bv(){if(Hb)return Pc;Hb=1;var e=Kr(),t=Xt(),n=e(t,"Map");return Pc=n,Pc}var Nc,Wb;function Al(){if(Wb)return Nc;Wb=1;var e=Kr(),t=e(Object,"create");return Nc=t,Nc}var Ac,Kb;function oF(){if(Kb)return Ac;Kb=1;var e=Al();function t(){this.__data__=e?e(null):{},this.size=0}return Ac=t,Ac}var Rc,Yb;function lF(){if(Yb)return Rc;Yb=1;function e(t){var n=this.has(t)&&delete this.__data__[t];return this.size-=n?1:0,n}return Rc=e,Rc}var Ic,Qb;function uF(){if(Qb)return Ic;Qb=1;var e=Al(),t="__lodash_hash_undefined__",n=Object.prototype,r=n.hasOwnProperty;function i(a){var s=this.__data__;if(e){var o=s[a];return o===t?void 0:o}return r.call(s,a)?s[a]:void 0}return Ic=i,Ic}var Dc,Xb;function cF(){if(Xb)return Dc;Xb=1;var e=Al(),t=Object.prototype,n=t.hasOwnProperty;function r(i){var a=this.__data__;return e?a[i]!==void 0:n.call(a,i)}return Dc=r,Dc}var Oc,Jb;function dF(){if(Jb)return Oc;Jb=1;var e=Al(),t="__lodash_hash_undefined__";function n(r,i){var a=this.__data__;return this.size+=this.has(r)?0:1,a[r]=e&&i===void 0?t:i,this}return Oc=n,Oc}var Lc,Zb;function fF(){if(Zb)return Lc;Zb=1;var e=oF(),t=lF(),n=uF(),r=cF(),i=dF();function a(s){var o=-1,l=s==null?0:s.length;for(this.clear();++o<l;){var u=s[o];this.set(u[0],u[1])}}return a.prototype.clear=e,a.prototype.delete=t,a.prototype.get=n,a.prototype.has=r,a.prototype.set=i,Lc=a,Lc}var qc,e1;function hF(){if(e1)return qc;e1=1;var e=fF(),t=Nl(),n=Bv();function r(){this.size=0,this.__data__={hash:new e,map:new(n||t),string:new e}}return qc=r,qc}var Fc,t1;function pF(){if(t1)return Fc;t1=1;function e(t){var n=typeof t;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?t!=="__proto__":t===null}return Fc=e,Fc}var Vc,n1;function Rl(){if(n1)return Vc;n1=1;var e=pF();function t(n,r){var i=n.__data__;return e(r)?i[typeof r=="string"?"string":"hash"]:i.map}return Vc=t,Vc}var $c,r1;function mF(){if(r1)return $c;r1=1;var e=Rl();function t(n){var r=e(this,n).delete(n);return this.size-=r?1:0,r}return $c=t,$c}var Bc,i1;function yF(){if(i1)return Bc;i1=1;var e=Rl();function t(n){return e(this,n).get(n)}return Bc=t,Bc}var zc,a1;function vF(){if(a1)return zc;a1=1;var e=Rl();function t(n){return e(this,n).has(n)}return zc=t,zc}var Uc,s1;function gF(){if(s1)return Uc;s1=1;var e=Rl();function t(n,r){var i=e(this,n),a=i.size;return i.set(n,r),this.size+=i.size==a?0:1,this}return Uc=t,Uc}var Gc,o1;function zv(){if(o1)return Gc;o1=1;var e=hF(),t=mF(),n=yF(),r=vF(),i=gF();function a(s){var o=-1,l=s==null?0:s.length;for(this.clear();++o<l;){var u=s[o];this.set(u[0],u[1])}}return a.prototype.clear=e,a.prototype.delete=t,a.prototype.get=n,a.prototype.has=r,a.prototype.set=i,Gc=a,Gc}var Hc,l1;function wF(){if(l1)return Hc;l1=1;var e=Nl(),t=Bv(),n=zv(),r=200;function i(a,s){var o=this.__data__;if(o instanceof e){var l=o.__data__;if(!t||l.length<r-1)return l.push([a,s]),this.size=++o.size,this;o=this.__data__=new n(l)}return o.set(a,s),this.size=o.size,this}return Hc=i,Hc}var Wc,u1;function Il(){if(u1)return Wc;u1=1;var e=Nl(),t=Xq(),n=Jq(),r=Zq(),i=eF(),a=wF();function s(o){var l=this.__data__=new e(o);this.size=l.size}return s.prototype.clear=t,s.prototype.delete=n,s.prototype.get=r,s.prototype.has=i,s.prototype.set=a,Wc=s,Wc}var Kc,c1;function Uv(){if(c1)return Kc;c1=1;function e(t,n){for(var r=-1,i=t==null?0:t.length;++r<i&&n(t[r],r,t)!==!1;);return t}return Kc=e,Kc}var Yc,d1;function NM(){if(d1)return Yc;d1=1;var e=Kr(),t=function(){try{var n=e(Object,"defineProperty");return n({},"",{}),n}catch{}}();return Yc=t,Yc}var Qc,f1;function Dl(){if(f1)return Qc;f1=1;var e=NM();function t(n,r,i){r=="__proto__"&&e?e(n,r,{configurable:!0,enumerable:!0,value:i,writable:!0}):n[r]=i}return Qc=t,Qc}var Xc,h1;function Ol(){if(h1)return Xc;h1=1;var e=Dl(),t=Qi(),n=Object.prototype,r=n.hasOwnProperty;function i(a,s,o){var l=a[s];(!(r.call(a,s)&&t(l,o))||o===void 0&&!(s in a))&&e(a,s,o)}return Xc=i,Xc}var Jc,p1;function ks(){if(p1)return Jc;p1=1;var e=Ol(),t=Dl();function n(r,i,a,s){var o=!a;a||(a={});for(var l=-1,u=i.length;++l<u;){var c=i[l],d=s?s(a[c],r[c],c,a,r):void 0;d===void 0&&(d=r[c]),o?t(a,c,d):e(a,c,d)}return a}return Jc=n,Jc}var Zc,m1;function bF(){if(m1)return Zc;m1=1;function e(t,n){for(var r=-1,i=Array(t);++r<t;)i[r]=n(r);return i}return Zc=e,Zc}var ed,y1;function dn(){if(y1)return ed;y1=1;function e(t){return t!=null&&typeof t=="object"}return ed=e,ed}var td,v1;function xF(){if(v1)return td;v1=1;var e=Wr(),t=dn(),n="[object Arguments]";function r(i){return t(i)&&e(i)==n}return td=r,td}var nd,g1;function Cs(){if(g1)return nd;g1=1;var e=xF(),t=dn(),n=Object.prototype,r=n.hasOwnProperty,i=n.propertyIsEnumerable,a=e(function(){return arguments}())?e:function(s){return t(s)&&r.call(s,"callee")&&!i.call(s,"callee")};return nd=a,nd}var rd,w1;function $e(){if(w1)return rd;w1=1;var e=Array.isArray;return rd=e,rd}var Ea={exports:{}},id,b1;function SF(){if(b1)return id;b1=1;function e(){return!1}return id=e,id}Ea.exports;var x1;function Ji(){return x1||(x1=1,function(e,t){var n=Xt(),r=SF(),i=t&&!t.nodeType&&t,a=i&&!0&&e&&!e.nodeType&&e,s=a&&a.exports===i,o=s?n.Buffer:void 0,l=o?o.isBuffer:void 0,u=l||r;e.exports=u}(Ea,Ea.exports)),Ea.exports}var ad,S1;function Ll(){if(S1)return ad;S1=1;var e=9007199254740991,t=/^(?:0|[1-9]\d*)$/;function n(r,i){var a=typeof r;return i=i??e,!!i&&(a=="number"||a!="symbol"&&t.test(r))&&r>-1&&r%1==0&&r<i}return ad=n,ad}var sd,_1;function Gv(){if(_1)return sd;_1=1;var e=9007199254740991;function t(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=e}return sd=t,sd}var od,k1;function _F(){if(k1)return od;k1=1;var e=Wr(),t=Gv(),n=dn(),r="[object Arguments]",i="[object Array]",a="[object Boolean]",s="[object Date]",o="[object Error]",l="[object Function]",u="[object Map]",c="[object Number]",d="[object Object]",f="[object RegExp]",m="[object Set]",y="[object String]",p="[object WeakMap]",x="[object ArrayBuffer]",v="[object DataView]",g="[object Float32Array]",b="[object Float64Array]",_="[object Int8Array]",C="[object Int16Array]",T="[object Int32Array]",M="[object Uint8Array]",E="[object Uint8ClampedArray]",j="[object Uint16Array]",P="[object Uint32Array]",A={};A[g]=A[b]=A[_]=A[C]=A[T]=A[M]=A[E]=A[j]=A[P]=!0,A[r]=A[i]=A[x]=A[a]=A[v]=A[s]=A[o]=A[l]=A[u]=A[c]=A[d]=A[f]=A[m]=A[y]=A[p]=!1;function D(q){return n(q)&&t(q.length)&&!!A[e(q)]}return od=D,od}var ld,C1;function ql(){if(C1)return ld;C1=1;function e(t){return function(n){return t(n)}}return ld=e,ld}var Ta={exports:{}};Ta.exports;var E1;function Hv(){return E1||(E1=1,function(e,t){var n=jM(),r=t&&!t.nodeType&&t,i=r&&!0&&e&&!e.nodeType&&e,a=i&&i.exports===r,s=a&&n.process,o=function(){try{var l=i&&i.require&&i.require("util").types;return l||s&&s.binding&&s.binding("util")}catch{}}();e.exports=o}(Ta,Ta.exports)),Ta.exports}var ud,T1;function Es(){if(T1)return ud;T1=1;var e=_F(),t=ql(),n=Hv(),r=n&&n.isTypedArray,i=r?t(r):e;return ud=i,ud}var cd,M1;function AM(){if(M1)return cd;M1=1;var e=bF(),t=Cs(),n=$e(),r=Ji(),i=Ll(),a=Es(),s=Object.prototype,o=s.hasOwnProperty;function l(u,c){var d=n(u),f=!d&&t(u),m=!d&&!f&&r(u),y=!d&&!f&&!m&&a(u),p=d||f||m||y,x=p?e(u.length,String):[],v=x.length;for(var g in u)(c||o.call(u,g))&&!(p&&(g=="length"||m&&(g=="offset"||g=="parent")||y&&(g=="buffer"||g=="byteLength"||g=="byteOffset")||i(g,v)))&&x.push(g);return x}return cd=l,cd}var dd,j1;function Fl(){if(j1)return dd;j1=1;var e=Object.prototype;function t(n){var r=n&&n.constructor,i=typeof r=="function"&&r.prototype||e;return n===i}return dd=t,dd}var fd,P1;function RM(){if(P1)return fd;P1=1;function e(t,n){return function(r){return t(n(r))}}return fd=e,fd}var hd,N1;function kF(){if(N1)return hd;N1=1;var e=RM(),t=e(Object.keys,Object);return hd=t,hd}var pd,A1;function Wv(){if(A1)return pd;A1=1;var e=Fl(),t=kF(),n=Object.prototype,r=n.hasOwnProperty;function i(a){if(!e(a))return t(a);var s=[];for(var o in Object(a))r.call(a,o)&&o!="constructor"&&s.push(o);return s}return pd=i,pd}var md,R1;function Dn(){if(R1)return md;R1=1;var e=_s(),t=Gv();function n(r){return r!=null&&t(r.length)&&!e(r)}return md=n,md}var yd,I1;function gr(){if(I1)return yd;I1=1;var e=AM(),t=Wv(),n=Dn();function r(i){return n(i)?e(i):t(i)}return yd=r,yd}var vd,D1;function CF(){if(D1)return vd;D1=1;var e=ks(),t=gr();function n(r,i){return r&&e(i,t(i),r)}return vd=n,vd}var gd,O1;function EF(){if(O1)return gd;O1=1;function e(t){var n=[];if(t!=null)for(var r in Object(t))n.push(r);return n}return gd=e,gd}var wd,L1;function TF(){if(L1)return wd;L1=1;var e=Ft(),t=Fl(),n=EF(),r=Object.prototype,i=r.hasOwnProperty;function a(s){if(!e(s))return n(s);var o=t(s),l=[];for(var u in s)u=="constructor"&&(o||!i.call(s,u))||l.push(u);return l}return wd=a,wd}var bd,q1;function Yr(){if(q1)return bd;q1=1;var e=AM(),t=TF(),n=Dn();function r(i){return n(i)?e(i,!0):t(i)}return bd=r,bd}var xd,F1;function MF(){if(F1)return xd;F1=1;var e=ks(),t=Yr();function n(r,i){return r&&e(i,t(i),r)}return xd=n,xd}var Ma={exports:{}};Ma.exports;var V1;function IM(){return V1||(V1=1,function(e,t){var n=Xt(),r=t&&!t.nodeType&&t,i=r&&!0&&e&&!e.nodeType&&e,a=i&&i.exports===r,s=a?n.Buffer:void 0,o=s?s.allocUnsafe:void 0;function l(u,c){if(c)return u.slice();var d=u.length,f=o?o(d):new u.constructor(d);return u.copy(f),f}e.exports=l}(Ma,Ma.exports)),Ma.exports}var Sd,$1;function DM(){if($1)return Sd;$1=1;function e(t,n){var r=-1,i=t.length;for(n||(n=Array(i));++r<i;)n[r]=t[r];return n}return Sd=e,Sd}var _d,B1;function OM(){if(B1)return _d;B1=1;function e(t,n){for(var r=-1,i=t==null?0:t.length,a=0,s=[];++r<i;){var o=t[r];n(o,r,t)&&(s[a++]=o)}return s}return _d=e,_d}var kd,z1;function LM(){if(z1)return kd;z1=1;function e(){return[]}return kd=e,kd}var Cd,U1;function Kv(){if(U1)return Cd;U1=1;var e=OM(),t=LM(),n=Object.prototype,r=n.propertyIsEnumerable,i=Object.getOwnPropertySymbols,a=i?function(s){return s==null?[]:(s=Object(s),e(i(s),function(o){return r.call(s,o)}))}:t;return Cd=a,Cd}var Ed,G1;function jF(){if(G1)return Ed;G1=1;var e=ks(),t=Kv();function n(r,i){return e(r,t(r),i)}return Ed=n,Ed}var Td,H1;function Yv(){if(H1)return Td;H1=1;function e(t,n){for(var r=-1,i=n.length,a=t.length;++r<i;)t[a+r]=n[r];return t}return Td=e,Td}var Md,W1;function Vl(){if(W1)return Md;W1=1;var e=RM(),t=e(Object.getPrototypeOf,Object);return Md=t,Md}var jd,K1;function qM(){if(K1)return jd;K1=1;var e=Yv(),t=Vl(),n=Kv(),r=LM(),i=Object.getOwnPropertySymbols,a=i?function(s){for(var o=[];s;)e(o,n(s)),s=t(s);return o}:r;return jd=a,jd}var Pd,Y1;function PF(){if(Y1)return Pd;Y1=1;var e=ks(),t=qM();function n(r,i){return e(r,t(r),i)}return Pd=n,Pd}var Nd,Q1;function FM(){if(Q1)return Nd;Q1=1;var e=Yv(),t=$e();function n(r,i,a){var s=i(r);return t(r)?s:e(s,a(r))}return Nd=n,Nd}var Ad,X1;function VM(){if(X1)return Ad;X1=1;var e=FM(),t=Kv(),n=gr();function r(i){return e(i,n,t)}return Ad=r,Ad}var Rd,J1;function NF(){if(J1)return Rd;J1=1;var e=FM(),t=qM(),n=Yr();function r(i){return e(i,n,t)}return Rd=r,Rd}var Id,Z1;function AF(){if(Z1)return Id;Z1=1;var e=Kr(),t=Xt(),n=e(t,"DataView");return Id=n,Id}var Dd,ex;function RF(){if(ex)return Dd;ex=1;var e=Kr(),t=Xt(),n=e(t,"Promise");return Dd=n,Dd}var Od,tx;function $M(){if(tx)return Od;tx=1;var e=Kr(),t=Xt(),n=e(t,"Set");return Od=n,Od}var Ld,nx;function IF(){if(nx)return Ld;nx=1;var e=Kr(),t=Xt(),n=e(t,"WeakMap");return Ld=n,Ld}var qd,rx;function Zi(){if(rx)return qd;rx=1;var e=AF(),t=Bv(),n=RF(),r=$M(),i=IF(),a=Wr(),s=PM(),o="[object Map]",l="[object Object]",u="[object Promise]",c="[object Set]",d="[object WeakMap]",f="[object DataView]",m=s(e),y=s(t),p=s(n),x=s(r),v=s(i),g=a;return(e&&g(new e(new ArrayBuffer(1)))!=f||t&&g(new t)!=o||n&&g(n.resolve())!=u||r&&g(new r)!=c||i&&g(new i)!=d)&&(g=function(b){var _=a(b),C=_==l?b.constructor:void 0,T=C?s(C):"";if(T)switch(T){case m:return f;case y:return o;case p:return u;case x:return c;case v:return d}return _}),qd=g,qd}var Fd,ix;function DF(){if(ix)return Fd;ix=1;var e=Object.prototype,t=e.hasOwnProperty;function n(r){var i=r.length,a=new r.constructor(i);return i&&typeof r[0]=="string"&&t.call(r,"index")&&(a.index=r.index,a.input=r.input),a}return Fd=n,Fd}var Vd,ax;function BM(){if(ax)return Vd;ax=1;var e=Xt(),t=e.Uint8Array;return Vd=t,Vd}var $d,sx;function Qv(){if(sx)return $d;sx=1;var e=BM();function t(n){var r=new n.constructor(n.byteLength);return new e(r).set(new e(n)),r}return $d=t,$d}var Bd,ox;function OF(){if(ox)return Bd;ox=1;var e=Qv();function t(n,r){var i=r?e(n.buffer):n.buffer;return new n.constructor(i,n.byteOffset,n.byteLength)}return Bd=t,Bd}var zd,lx;function LF(){if(lx)return zd;lx=1;var e=/\w*$/;function t(n){var r=new n.constructor(n.source,e.exec(n));return r.lastIndex=n.lastIndex,r}return zd=t,zd}var Ud,ux;function qF(){if(ux)return Ud;ux=1;var e=Xi(),t=e?e.prototype:void 0,n=t?t.valueOf:void 0;function r(i){return n?Object(n.call(i)):{}}return Ud=r,Ud}var Gd,cx;function zM(){if(cx)return Gd;cx=1;var e=Qv();function t(n,r){var i=r?e(n.buffer):n.buffer;return new n.constructor(i,n.byteOffset,n.length)}return Gd=t,Gd}var Hd,dx;function FF(){if(dx)return Hd;dx=1;var e=Qv(),t=OF(),n=LF(),r=qF(),i=zM(),a="[object Boolean]",s="[object Date]",o="[object Map]",l="[object Number]",u="[object RegExp]",c="[object Set]",d="[object String]",f="[object Symbol]",m="[object ArrayBuffer]",y="[object DataView]",p="[object Float32Array]",x="[object Float64Array]",v="[object Int8Array]",g="[object Int16Array]",b="[object Int32Array]",_="[object Uint8Array]",C="[object Uint8ClampedArray]",T="[object Uint16Array]",M="[object Uint32Array]";function E(j,P,A){var D=j.constructor;switch(P){case m:return e(j);case a:case s:return new D(+j);case y:return t(j,A);case p:case x:case v:case g:case b:case _:case C:case T:case M:return i(j,A);case o:return new D;case l:case d:return new D(j);case u:return n(j);case c:return new D;case f:return r(j)}}return Hd=E,Hd}var Wd,fx;function UM(){if(fx)return Wd;fx=1;var e=Ft(),t=Object.create,n=function(){function r(){}return function(i){if(!e(i))return{};if(t)return t(i);r.prototype=i;var a=new r;return r.prototype=void 0,a}}();return Wd=n,Wd}var Kd,hx;function GM(){if(hx)return Kd;hx=1;var e=UM(),t=Vl(),n=Fl();function r(i){return typeof i.constructor=="function"&&!n(i)?e(t(i)):{}}return Kd=r,Kd}var Yd,px;function VF(){if(px)return Yd;px=1;var e=Zi(),t=dn(),n="[object Map]";function r(i){return t(i)&&e(i)==n}return Yd=r,Yd}var Qd,mx;function $F(){if(mx)return Qd;mx=1;var e=VF(),t=ql(),n=Hv(),r=n&&n.isMap,i=r?t(r):e;return Qd=i,Qd}var Xd,yx;function BF(){if(yx)return Xd;yx=1;var e=Zi(),t=dn(),n="[object Set]";function r(i){return t(i)&&e(i)==n}return Xd=r,Xd}var Jd,vx;function zF(){if(vx)return Jd;vx=1;var e=BF(),t=ql(),n=Hv(),r=n&&n.isSet,i=r?t(r):e;return Jd=i,Jd}var Zd,gx;function HM(){if(gx)return Zd;gx=1;var e=Il(),t=Uv(),n=Ol(),r=CF(),i=MF(),a=IM(),s=DM(),o=jF(),l=PF(),u=VM(),c=NF(),d=Zi(),f=DF(),m=FF(),y=GM(),p=$e(),x=Ji(),v=$F(),g=Ft(),b=zF(),_=gr(),C=Yr(),T=1,M=2,E=4,j="[object Arguments]",P="[object Array]",A="[object Boolean]",D="[object Date]",q="[object Error]",W="[object Function]",V="[object GeneratorFunction]",se="[object Map]",ee="[object Number]",I="[object Object]",F="[object RegExp]",R="[object Set]",$="[object String]",Q="[object Symbol]",Pe="[object WeakMap]",le="[object ArrayBuffer]",ce="[object DataView]",z="[object Float32Array]",de="[object Float64Array]",Mt="[object Int8Array]",fn="[object Int16Array]",Zt="[object Int32Array]",wr="[object Uint8Array]",Jr="[object Uint8ClampedArray]",B="[object Uint16Array]",re="[object Uint32Array]",X={};X[j]=X[P]=X[le]=X[ce]=X[A]=X[D]=X[z]=X[de]=X[Mt]=X[fn]=X[Zt]=X[se]=X[ee]=X[I]=X[F]=X[R]=X[$]=X[Q]=X[wr]=X[Jr]=X[B]=X[re]=!0,X[q]=X[W]=X[Pe]=!1;function qe(ie,Fe,Ln,Yl,$t,Ge){var me,qn=Fe&T,Fn=Fe&M,Ql=Fe&E;if(Ln&&(me=$t?Ln(ie,Yl,$t,Ge):Ln(ie)),me!==void 0)return me;if(!g(ie))return ie;var Zr=p(ie);if(Zr){if(me=f(ie),!qn)return s(ie,me)}else{var Ze=d(ie),js=Ze==W||Ze==V;if(x(ie))return a(ie,qn);if(Ze==I||Ze==j||js&&!$t){if(me=Fn||js?{}:y(ie),!qn)return Fn?l(ie,i(me,ie)):o(ie,r(me,ie))}else{if(!X[Ze])return $t?ie:{};me=m(ie,Ze,qn)}}Ge||(Ge=new e);var ei=Ge.get(ie);if(ei)return ei;Ge.set(ie,me),b(ie)?ie.forEach(function(en){me.add(qe(en,Fe,Ln,en,ie,Ge))}):v(ie)&&ie.forEach(function(en,Bt){me.set(Bt,qe(en,Fe,Ln,Bt,ie,Ge))});var ta=Ql?Fn?c:u:Fn?C:_,br=Zr?void 0:ta(ie);return t(br||ie,function(en,Bt){br&&(Bt=en,en=ie[Bt]),n(me,Bt,qe(en,Fe,Ln,Bt,ie,Ge))}),me}return Zd=qe,Zd}var ef,wx;function UF(){if(wx)return ef;wx=1;var e=HM(),t=4;function n(r){return e(r,t)}return ef=n,ef}var tf,bx;function Xv(){if(bx)return tf;bx=1;function e(t){return function(){return t}}return tf=e,tf}var nf,xx;function GF(){if(xx)return nf;xx=1;function e(t){return function(n,r,i){for(var a=-1,s=Object(n),o=i(n),l=o.length;l--;){var u=o[t?l:++a];if(r(s[u],u,s)===!1)break}return n}}return nf=e,nf}var rf,Sx;function Jv(){if(Sx)return rf;Sx=1;var e=GF(),t=e();return rf=t,rf}var af,_x;function Zv(){if(_x)return af;_x=1;var e=Jv(),t=gr();function n(r,i){return r&&e(r,i,t)}return af=n,af}var sf,kx;function HF(){if(kx)return sf;kx=1;var e=Dn();function t(n,r){return function(i,a){if(i==null)return i;if(!e(i))return n(i,a);for(var s=i.length,o=r?s:-1,l=Object(i);(r?o--:++o<s)&&a(l[o],o,l)!==!1;);return i}}return sf=t,sf}var of,Cx;function $l(){if(Cx)return of;Cx=1;var e=Zv(),t=HF(),n=t(e);return of=n,of}var lf,Ex;function Qr(){if(Ex)return lf;Ex=1;function e(t){return t}return lf=e,lf}var uf,Tx;function WM(){if(Tx)return uf;Tx=1;var e=Qr();function t(n){return typeof n=="function"?n:e}return uf=t,uf}var cf,Mx;function KM(){if(Mx)return cf;Mx=1;var e=Uv(),t=$l(),n=WM(),r=$e();function i(a,s){var o=r(a)?e:t;return o(a,n(s))}return cf=i,cf}var df,jx;function YM(){return jx||(jx=1,df=KM()),df}var ff,Px;function WF(){if(Px)return ff;Px=1;var e=$l();function t(n,r){var i=[];return e(n,function(a,s,o){r(a,s,o)&&i.push(a)}),i}return ff=t,ff}var hf,Nx;function KF(){if(Nx)return hf;Nx=1;var e="__lodash_hash_undefined__";function t(n){return this.__data__.set(n,e),this}return hf=t,hf}var pf,Ax;function YF(){if(Ax)return pf;Ax=1;function e(t){return this.__data__.has(t)}return pf=e,pf}var mf,Rx;function QM(){if(Rx)return mf;Rx=1;var e=zv(),t=KF(),n=YF();function r(i){var a=-1,s=i==null?0:i.length;for(this.__data__=new e;++a<s;)this.add(i[a])}return r.prototype.add=r.prototype.push=t,r.prototype.has=n,mf=r,mf}var yf,Ix;function QF(){if(Ix)return yf;Ix=1;function e(t,n){for(var r=-1,i=t==null?0:t.length;++r<i;)if(n(t[r],r,t))return!0;return!1}return yf=e,yf}var vf,Dx;function XM(){if(Dx)return vf;Dx=1;function e(t,n){return t.has(n)}return vf=e,vf}var gf,Ox;function JM(){if(Ox)return gf;Ox=1;var e=QM(),t=QF(),n=XM(),r=1,i=2;function a(s,o,l,u,c,d){var f=l&r,m=s.length,y=o.length;if(m!=y&&!(f&&y>m))return!1;var p=d.get(s),x=d.get(o);if(p&&x)return p==o&&x==s;var v=-1,g=!0,b=l&i?new e:void 0;for(d.set(s,o),d.set(o,s);++v<m;){var _=s[v],C=o[v];if(u)var T=f?u(C,_,v,o,s,d):u(_,C,v,s,o,d);if(T!==void 0){if(T)continue;g=!1;break}if(b){if(!t(o,function(M,E){if(!n(b,E)&&(_===M||c(_,M,l,u,d)))return b.push(E)})){g=!1;break}}else if(!(_===C||c(_,C,l,u,d))){g=!1;break}}return d.delete(s),d.delete(o),g}return gf=a,gf}var wf,Lx;function XF(){if(Lx)return wf;Lx=1;function e(t){var n=-1,r=Array(t.size);return t.forEach(function(i,a){r[++n]=[a,i]}),r}return wf=e,wf}var bf,qx;function eg(){if(qx)return bf;qx=1;function e(t){var n=-1,r=Array(t.size);return t.forEach(function(i){r[++n]=i}),r}return bf=e,bf}var xf,Fx;function JF(){if(Fx)return xf;Fx=1;var e=Xi(),t=BM(),n=Qi(),r=JM(),i=XF(),a=eg(),s=1,o=2,l="[object Boolean]",u="[object Date]",c="[object Error]",d="[object Map]",f="[object Number]",m="[object RegExp]",y="[object Set]",p="[object String]",x="[object Symbol]",v="[object ArrayBuffer]",g="[object DataView]",b=e?e.prototype:void 0,_=b?b.valueOf:void 0;function C(T,M,E,j,P,A,D){switch(E){case g:if(T.byteLength!=M.byteLength||T.byteOffset!=M.byteOffset)return!1;T=T.buffer,M=M.buffer;case v:return!(T.byteLength!=M.byteLength||!A(new t(T),new t(M)));case l:case u:case f:return n(+T,+M);case c:return T.name==M.name&&T.message==M.message;case m:case p:return T==M+"";case d:var q=i;case y:var W=j&s;if(q||(q=a),T.size!=M.size&&!W)return!1;var V=D.get(T);if(V)return V==M;j|=o,D.set(T,M);var se=r(q(T),q(M),j,P,A,D);return D.delete(T),se;case x:if(_)return _.call(T)==_.call(M)}return!1}return xf=C,xf}var Sf,Vx;function ZF(){if(Vx)return Sf;Vx=1;var e=VM(),t=1,n=Object.prototype,r=n.hasOwnProperty;function i(a,s,o,l,u,c){var d=o&t,f=e(a),m=f.length,y=e(s),p=y.length;if(m!=p&&!d)return!1;for(var x=m;x--;){var v=f[x];if(!(d?v in s:r.call(s,v)))return!1}var g=c.get(a),b=c.get(s);if(g&&b)return g==s&&b==a;var _=!0;c.set(a,s),c.set(s,a);for(var C=d;++x<m;){v=f[x];var T=a[v],M=s[v];if(l)var E=d?l(M,T,v,s,a,c):l(T,M,v,a,s,c);if(!(E===void 0?T===M||u(T,M,o,l,c):E)){_=!1;break}C||(C=v=="constructor")}if(_&&!C){var j=a.constructor,P=s.constructor;j!=P&&"constructor"in a&&"constructor"in s&&!(typeof j=="function"&&j instanceof j&&typeof P=="function"&&P instanceof P)&&(_=!1)}return c.delete(a),c.delete(s),_}return Sf=i,Sf}var _f,$x;function e3(){if($x)return _f;$x=1;var e=Il(),t=JM(),n=JF(),r=ZF(),i=Zi(),a=$e(),s=Ji(),o=Es(),l=1,u="[object Arguments]",c="[object Array]",d="[object Object]",f=Object.prototype,m=f.hasOwnProperty;function y(p,x,v,g,b,_){var C=a(p),T=a(x),M=C?c:i(p),E=T?c:i(x);M=M==u?d:M,E=E==u?d:E;var j=M==d,P=E==d,A=M==E;if(A&&s(p)){if(!s(x))return!1;C=!0,j=!1}if(A&&!j)return _||(_=new e),C||o(p)?t(p,x,v,g,b,_):n(p,x,M,v,g,b,_);if(!(v&l)){var D=j&&m.call(p,"__wrapped__"),q=P&&m.call(x,"__wrapped__");if(D||q){var W=D?p.value():p,V=q?x.value():x;return _||(_=new e),b(W,V,v,g,_)}}return A?(_||(_=new e),r(p,x,v,g,b,_)):!1}return _f=y,_f}var kf,Bx;function ZM(){if(Bx)return kf;Bx=1;var e=e3(),t=dn();function n(r,i,a,s,o){return r===i?!0:r==null||i==null||!t(r)&&!t(i)?r!==r&&i!==i:e(r,i,a,s,n,o)}return kf=n,kf}var Cf,zx;function t3(){if(zx)return Cf;zx=1;var e=Il(),t=ZM(),n=1,r=2;function i(a,s,o,l){var u=o.length,c=u,d=!l;if(a==null)return!c;for(a=Object(a);u--;){var f=o[u];if(d&&f[2]?f[1]!==a[f[0]]:!(f[0]in a))return!1}for(;++u<c;){f=o[u];var m=f[0],y=a[m],p=f[1];if(d&&f[2]){if(y===void 0&&!(m in a))return!1}else{var x=new e;if(l)var v=l(y,p,m,a,s,x);if(!(v===void 0?t(p,y,n|r,l,x):v))return!1}}return!0}return Cf=i,Cf}var Ef,Ux;function ej(){if(Ux)return Ef;Ux=1;var e=Ft();function t(n){return n===n&&!e(n)}return Ef=t,Ef}var Tf,Gx;function n3(){if(Gx)return Tf;Gx=1;var e=ej(),t=gr();function n(r){for(var i=t(r),a=i.length;a--;){var s=i[a],o=r[s];i[a]=[s,o,e(o)]}return i}return Tf=n,Tf}var Mf,Hx;function tj(){if(Hx)return Mf;Hx=1;function e(t,n){return function(r){return r==null?!1:r[t]===n&&(n!==void 0||t in Object(r))}}return Mf=e,Mf}var jf,Wx;function r3(){if(Wx)return jf;Wx=1;var e=t3(),t=n3(),n=tj();function r(i){var a=t(i);return a.length==1&&a[0][2]?n(a[0][0],a[0][1]):function(s){return s===i||e(s,i,a)}}return jf=r,jf}var Pf,Kx;function ea(){if(Kx)return Pf;Kx=1;var e=Wr(),t=dn(),n="[object Symbol]";function r(i){return typeof i=="symbol"||t(i)&&e(i)==n}return Pf=r,Pf}var Nf,Yx;function tg(){if(Yx)return Nf;Yx=1;var e=$e(),t=ea(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function i(a,s){if(e(a))return!1;var o=typeof a;return o=="number"||o=="symbol"||o=="boolean"||a==null||t(a)?!0:r.test(a)||!n.test(a)||s!=null&&a in Object(s)}return Nf=i,Nf}var Af,Qx;function i3(){if(Qx)return Af;Qx=1;var e=zv(),t="Expected a function";function n(r,i){if(typeof r!="function"||i!=null&&typeof i!="function")throw new TypeError(t);var a=function(){var s=arguments,o=i?i.apply(this,s):s[0],l=a.cache;if(l.has(o))return l.get(o);var u=r.apply(this,s);return a.cache=l.set(o,u)||l,u};return a.cache=new(n.Cache||e),a}return n.Cache=e,Af=n,Af}var Rf,Xx;function a3(){if(Xx)return Rf;Xx=1;var e=i3(),t=500;function n(r){var i=e(r,function(s){return a.size===t&&a.clear(),s}),a=i.cache;return i}return Rf=n,Rf}var If,Jx;function s3(){if(Jx)return If;Jx=1;var e=a3(),t=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,n=/\\(\\)?/g,r=e(function(i){var a=[];return i.charCodeAt(0)===46&&a.push(""),i.replace(t,function(s,o,l,u){a.push(l?u.replace(n,"$1"):o||s)}),a});return If=r,If}var Df,Zx;function Bl(){if(Zx)return Df;Zx=1;function e(t,n){for(var r=-1,i=t==null?0:t.length,a=Array(i);++r<i;)a[r]=n(t[r],r,t);return a}return Df=e,Df}var Of,eS;function o3(){if(eS)return Of;eS=1;var e=Xi(),t=Bl(),n=$e(),r=ea(),i=e?e.prototype:void 0,a=i?i.toString:void 0;function s(o){if(typeof o=="string")return o;if(n(o))return t(o,s)+"";if(r(o))return a?a.call(o):"";var l=o+"";return l=="0"&&1/o==-1/0?"-0":l}return Of=s,Of}var Lf,tS;function nj(){if(tS)return Lf;tS=1;var e=o3();function t(n){return n==null?"":e(n)}return Lf=t,Lf}var qf,nS;function zl(){if(nS)return qf;nS=1;var e=$e(),t=tg(),n=s3(),r=nj();function i(a,s){return e(a)?a:t(a,s)?[a]:n(r(a))}return qf=i,qf}var Ff,rS;function Ts(){if(rS)return Ff;rS=1;var e=ea();function t(n){if(typeof n=="string"||e(n))return n;var r=n+"";return r=="0"&&1/n==-1/0?"-0":r}return Ff=t,Ff}var Vf,iS;function Ul(){if(iS)return Vf;iS=1;var e=zl(),t=Ts();function n(r,i){i=e(i,r);for(var a=0,s=i.length;r!=null&&a<s;)r=r[t(i[a++])];return a&&a==s?r:void 0}return Vf=n,Vf}var $f,aS;function l3(){if(aS)return $f;aS=1;var e=Ul();function t(n,r,i){var a=n==null?void 0:e(n,r);return a===void 0?i:a}return $f=t,$f}var Bf,sS;function u3(){if(sS)return Bf;sS=1;function e(t,n){return t!=null&&n in Object(t)}return Bf=e,Bf}var zf,oS;function rj(){if(oS)return zf;oS=1;var e=zl(),t=Cs(),n=$e(),r=Ll(),i=Gv(),a=Ts();function s(o,l,u){l=e(l,o);for(var c=-1,d=l.length,f=!1;++c<d;){var m=a(l[c]);if(!(f=o!=null&&u(o,m)))break;o=o[m]}return f||++c!=d?f:(d=o==null?0:o.length,!!d&&i(d)&&r(m,d)&&(n(o)||t(o)))}return zf=s,zf}var Uf,lS;function ij(){if(lS)return Uf;lS=1;var e=u3(),t=rj();function n(r,i){return r!=null&&t(r,i,e)}return Uf=n,Uf}var Gf,uS;function c3(){if(uS)return Gf;uS=1;var e=ZM(),t=l3(),n=ij(),r=tg(),i=ej(),a=tj(),s=Ts(),o=1,l=2;function u(c,d){return r(c)&&i(d)?a(s(c),d):function(f){var m=t(f,c);return m===void 0&&m===d?n(f,c):e(d,m,o|l)}}return Gf=u,Gf}var Hf,cS;function aj(){if(cS)return Hf;cS=1;function e(t){return function(n){return n==null?void 0:n[t]}}return Hf=e,Hf}var Wf,dS;function d3(){if(dS)return Wf;dS=1;var e=Ul();function t(n){return function(r){return e(r,n)}}return Wf=t,Wf}var Kf,fS;function f3(){if(fS)return Kf;fS=1;var e=aj(),t=d3(),n=tg(),r=Ts();function i(a){return n(a)?e(r(a)):t(a)}return Kf=i,Kf}var Yf,hS;function On(){if(hS)return Yf;hS=1;var e=r3(),t=c3(),n=Qr(),r=$e(),i=f3();function a(s){return typeof s=="function"?s:s==null?n:typeof s=="object"?r(s)?t(s[0],s[1]):e(s):i(s)}return Yf=a,Yf}var Qf,pS;function sj(){if(pS)return Qf;pS=1;var e=OM(),t=WF(),n=On(),r=$e();function i(a,s){var o=r(a)?e:t;return o(a,n(s,3))}return Qf=i,Qf}var Xf,mS;function h3(){if(mS)return Xf;mS=1;var e=Object.prototype,t=e.hasOwnProperty;function n(r,i){return r!=null&&t.call(r,i)}return Xf=n,Xf}var Jf,yS;function oj(){if(yS)return Jf;yS=1;var e=h3(),t=rj();function n(r,i){return r!=null&&t(r,i,e)}return Jf=n,Jf}var Zf,vS;function p3(){if(vS)return Zf;vS=1;var e=Wv(),t=Zi(),n=Cs(),r=$e(),i=Dn(),a=Ji(),s=Fl(),o=Es(),l="[object Map]",u="[object Set]",c=Object.prototype,d=c.hasOwnProperty;function f(m){if(m==null)return!0;if(i(m)&&(r(m)||typeof m=="string"||typeof m.splice=="function"||a(m)||o(m)||n(m)))return!m.length;var y=t(m);if(y==l||y==u)return!m.size;if(s(m))return!e(m).length;for(var p in m)if(d.call(m,p))return!1;return!0}return Zf=f,Zf}var eh,gS;function lj(){if(gS)return eh;gS=1;function e(t){return t===void 0}return eh=e,eh}var th,wS;function uj(){if(wS)return th;wS=1;var e=$l(),t=Dn();function n(r,i){var a=-1,s=t(r)?Array(r.length):[];return e(r,function(o,l,u){s[++a]=i(o,l,u)}),s}return th=n,th}var nh,bS;function cj(){if(bS)return nh;bS=1;var e=Bl(),t=On(),n=uj(),r=$e();function i(a,s){var o=r(a)?e:n;return o(a,t(s,3))}return nh=i,nh}var rh,xS;function m3(){if(xS)return rh;xS=1;function e(t,n,r,i){var a=-1,s=t==null?0:t.length;for(i&&s&&(r=t[++a]);++a<s;)r=n(r,t[a],a,t);return r}return rh=e,rh}var ih,SS;function y3(){if(SS)return ih;SS=1;function e(t,n,r,i,a){return a(t,function(s,o,l){r=i?(i=!1,s):n(r,s,o,l)}),r}return ih=e,ih}var ah,_S;function dj(){if(_S)return ah;_S=1;var e=m3(),t=$l(),n=On(),r=y3(),i=$e();function a(s,o,l){var u=i(s)?e:r,c=arguments.length<3;return u(s,n(o,4),l,c,t)}return ah=a,ah}var sh,kS;function v3(){if(kS)return sh;kS=1;var e=Wr(),t=$e(),n=dn(),r="[object String]";function i(a){return typeof a=="string"||!t(a)&&n(a)&&e(a)==r}return sh=i,sh}var oh,CS;function g3(){if(CS)return oh;CS=1;var e=aj(),t=e("length");return oh=t,oh}var lh,ES;function w3(){if(ES)return lh;ES=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",i=t+n+r,a="\\ufe0e\\ufe0f",s="\\u200d",o=RegExp("["+s+e+i+a+"]");function l(u){return o.test(u)}return lh=l,lh}var uh,TS;function b3(){if(TS)return uh;TS=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",i=t+n+r,a="\\ufe0e\\ufe0f",s="["+e+"]",o="["+i+"]",l="\\ud83c[\\udffb-\\udfff]",u="(?:"+o+"|"+l+")",c="[^"+e+"]",d="(?:\\ud83c[\\udde6-\\uddff]){2}",f="[\\ud800-\\udbff][\\udc00-\\udfff]",m="\\u200d",y=u+"?",p="["+a+"]?",x="(?:"+m+"(?:"+[c,d,f].join("|")+")"+p+y+")*",v=p+y+x,g="(?:"+[c+o+"?",o,d,f,s].join("|")+")",b=RegExp(l+"(?="+l+")|"+g+v,"g");function _(C){for(var T=b.lastIndex=0;b.test(C);)++T;return T}return uh=_,uh}var ch,MS;function x3(){if(MS)return ch;MS=1;var e=g3(),t=w3(),n=b3();function r(i){return t(i)?n(i):e(i)}return ch=r,ch}var dh,jS;function S3(){if(jS)return dh;jS=1;var e=Wv(),t=Zi(),n=Dn(),r=v3(),i=x3(),a="[object Map]",s="[object Set]";function o(l){if(l==null)return 0;if(n(l))return r(l)?i(l):l.length;var u=t(l);return u==a||u==s?l.size:e(l).length}return dh=o,dh}var fh,PS;function _3(){if(PS)return fh;PS=1;var e=Uv(),t=UM(),n=Zv(),r=On(),i=Vl(),a=$e(),s=Ji(),o=_s(),l=Ft(),u=Es();function c(d,f,m){var y=a(d),p=y||s(d)||u(d);if(f=r(f,4),m==null){var x=d&&d.constructor;p?m=y?new x:[]:l(d)?m=o(x)?t(i(d)):{}:m={}}return(p?e:n)(d,function(v,g,b){return f(m,v,g,b)}),m}return fh=c,fh}var hh,NS;function k3(){if(NS)return hh;NS=1;var e=Xi(),t=Cs(),n=$e(),r=e?e.isConcatSpreadable:void 0;function i(a){return n(a)||t(a)||!!(r&&a&&a[r])}return hh=i,hh}var ph,AS;function ng(){if(AS)return ph;AS=1;var e=Yv(),t=k3();function n(r,i,a,s,o){var l=-1,u=r.length;for(a||(a=t),o||(o=[]);++l<u;){var c=r[l];i>0&&a(c)?i>1?n(c,i-1,a,s,o):e(o,c):s||(o[o.length]=c)}return o}return ph=n,ph}var mh,RS;function C3(){if(RS)return mh;RS=1;function e(t,n,r){switch(r.length){case 0:return t.call(n);case 1:return t.call(n,r[0]);case 2:return t.call(n,r[0],r[1]);case 3:return t.call(n,r[0],r[1],r[2])}return t.apply(n,r)}return mh=e,mh}var yh,IS;function fj(){if(IS)return yh;IS=1;var e=C3(),t=Math.max;function n(r,i,a){return i=t(i===void 0?r.length-1:i,0),function(){for(var s=arguments,o=-1,l=t(s.length-i,0),u=Array(l);++o<l;)u[o]=s[i+o];o=-1;for(var c=Array(i+1);++o<i;)c[o]=s[o];return c[i]=a(u),e(r,this,c)}}return yh=n,yh}var vh,DS;function E3(){if(DS)return vh;DS=1;var e=Xv(),t=NM(),n=Qr(),r=t?function(i,a){return t(i,"toString",{configurable:!0,enumerable:!1,value:e(a),writable:!0})}:n;return vh=r,vh}var gh,OS;function T3(){if(OS)return gh;OS=1;var e=800,t=16,n=Date.now;function r(i){var a=0,s=0;return function(){var o=n(),l=t-(o-s);if(s=o,l>0){if(++a>=e)return arguments[0]}else a=0;return i.apply(void 0,arguments)}}return gh=r,gh}var wh,LS;function hj(){if(LS)return wh;LS=1;var e=E3(),t=T3(),n=t(e);return wh=n,wh}var bh,qS;function Gl(){if(qS)return bh;qS=1;var e=Qr(),t=fj(),n=hj();function r(i,a){return n(t(i,a,e),i+"")}return bh=r,bh}var xh,FS;function pj(){if(FS)return xh;FS=1;function e(t,n,r,i){for(var a=t.length,s=r+(i?1:-1);i?s--:++s<a;)if(n(t[s],s,t))return s;return-1}return xh=e,xh}var Sh,VS;function M3(){if(VS)return Sh;VS=1;function e(t){return t!==t}return Sh=e,Sh}var _h,$S;function j3(){if($S)return _h;$S=1;function e(t,n,r){for(var i=r-1,a=t.length;++i<a;)if(t[i]===n)return i;return-1}return _h=e,_h}var kh,BS;function P3(){if(BS)return kh;BS=1;var e=pj(),t=M3(),n=j3();function r(i,a,s){return a===a?n(i,a,s):e(i,t,s)}return kh=r,kh}var Ch,zS;function N3(){if(zS)return Ch;zS=1;var e=P3();function t(n,r){var i=n==null?0:n.length;return!!i&&e(n,r,0)>-1}return Ch=t,Ch}var Eh,US;function A3(){if(US)return Eh;US=1;function e(t,n,r){for(var i=-1,a=t==null?0:t.length;++i<a;)if(r(n,t[i]))return!0;return!1}return Eh=e,Eh}var Th,GS;function R3(){if(GS)return Th;GS=1;function e(){}return Th=e,Th}var Mh,HS;function I3(){if(HS)return Mh;HS=1;var e=$M(),t=R3(),n=eg(),r=1/0,i=e&&1/n(new e([,-0]))[1]==r?function(a){return new e(a)}:t;return Mh=i,Mh}var jh,WS;function D3(){if(WS)return jh;WS=1;var e=QM(),t=N3(),n=A3(),r=XM(),i=I3(),a=eg(),s=200;function o(l,u,c){var d=-1,f=t,m=l.length,y=!0,p=[],x=p;if(c)y=!1,f=n;else if(m>=s){var v=u?null:i(l);if(v)return a(v);y=!1,f=r,x=new e}else x=u?[]:p;e:for(;++d<m;){var g=l[d],b=u?u(g):g;if(g=c||g!==0?g:0,y&&b===b){for(var _=x.length;_--;)if(x[_]===b)continue e;u&&x.push(b),p.push(g)}else f(x,b,c)||(x!==p&&x.push(b),p.push(g))}return p}return jh=o,jh}var Ph,KS;function mj(){if(KS)return Ph;KS=1;var e=Dn(),t=dn();function n(r){return t(r)&&e(r)}return Ph=n,Ph}var Nh,YS;function O3(){if(YS)return Nh;YS=1;var e=ng(),t=Gl(),n=D3(),r=mj(),i=t(function(a){return n(e(a,1,r,!0))});return Nh=i,Nh}var Ah,QS;function L3(){if(QS)return Ah;QS=1;var e=Bl();function t(n,r){return e(r,function(i){return n[i]})}return Ah=t,Ah}var Rh,XS;function yj(){if(XS)return Rh;XS=1;var e=L3(),t=gr();function n(r){return r==null?[]:e(r,t(r))}return Rh=n,Rh}var Ih,JS;function Vt(){if(JS)return Ih;JS=1;var e;if(typeof $v=="function")try{e={clone:UF(),constant:Xv(),each:YM(),filter:sj(),has:oj(),isArray:$e(),isEmpty:p3(),isFunction:_s(),isUndefined:lj(),keys:gr(),map:cj(),reduce:dj(),size:S3(),transform:_3(),union:O3(),values:yj()}}catch{}return e||(e=window._),Ih=e,Ih}var Dh,ZS;function rg(){if(ZS)return Dh;ZS=1;var e=Vt();Dh=i;var t="\0",n="\0",r="";function i(c){this._isDirected=e.has(c,"directed")?c.directed:!0,this._isMultigraph=e.has(c,"multigraph")?c.multigraph:!1,this._isCompound=e.has(c,"compound")?c.compound:!1,this._label=void 0,this._defaultNodeLabelFn=e.constant(void 0),this._defaultEdgeLabelFn=e.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[n]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}i.prototype._nodeCount=0,i.prototype._edgeCount=0,i.prototype.isDirected=function(){return this._isDirected},i.prototype.isMultigraph=function(){return this._isMultigraph},i.prototype.isCompound=function(){return this._isCompound},i.prototype.setGraph=function(c){return this._label=c,this},i.prototype.graph=function(){return this._label},i.prototype.setDefaultNodeLabel=function(c){return e.isFunction(c)||(c=e.constant(c)),this._defaultNodeLabelFn=c,this},i.prototype.nodeCount=function(){return this._nodeCount},i.prototype.nodes=function(){return e.keys(this._nodes)},i.prototype.sources=function(){var c=this;return e.filter(this.nodes(),function(d){return e.isEmpty(c._in[d])})},i.prototype.sinks=function(){var c=this;return e.filter(this.nodes(),function(d){return e.isEmpty(c._out[d])})},i.prototype.setNodes=function(c,d){var f=arguments,m=this;return e.each(c,function(y){f.length>1?m.setNode(y,d):m.setNode(y)}),this},i.prototype.setNode=function(c,d){return e.has(this._nodes,c)?(arguments.length>1&&(this._nodes[c]=d),this):(this._nodes[c]=arguments.length>1?d:this._defaultNodeLabelFn(c),this._isCompound&&(this._parent[c]=n,this._children[c]={},this._children[n][c]=!0),this._in[c]={},this._preds[c]={},this._out[c]={},this._sucs[c]={},++this._nodeCount,this)},i.prototype.node=function(c){return this._nodes[c]},i.prototype.hasNode=function(c){return e.has(this._nodes,c)},i.prototype.removeNode=function(c){var d=this;if(e.has(this._nodes,c)){var f=function(m){d.removeEdge(d._edgeObjs[m])};delete this._nodes[c],this._isCompound&&(this._removeFromParentsChildList(c),delete this._parent[c],e.each(this.children(c),function(m){d.setParent(m)}),delete this._children[c]),e.each(e.keys(this._in[c]),f),delete this._in[c],delete this._preds[c],e.each(e.keys(this._out[c]),f),delete this._out[c],delete this._sucs[c],--this._nodeCount}return this},i.prototype.setParent=function(c,d){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(e.isUndefined(d))d=n;else{d+="";for(var f=d;!e.isUndefined(f);f=this.parent(f))if(f===c)throw new Error("Setting "+d+" as parent of "+c+" would create a cycle");this.setNode(d)}return this.setNode(c),this._removeFromParentsChildList(c),this._parent[c]=d,this._children[d][c]=!0,this},i.prototype._removeFromParentsChildList=function(c){delete this._children[this._parent[c]][c]},i.prototype.parent=function(c){if(this._isCompound){var d=this._parent[c];if(d!==n)return d}},i.prototype.children=function(c){if(e.isUndefined(c)&&(c=n),this._isCompound){var d=this._children[c];if(d)return e.keys(d)}else{if(c===n)return this.nodes();if(this.hasNode(c))return[]}},i.prototype.predecessors=function(c){var d=this._preds[c];if(d)return e.keys(d)},i.prototype.successors=function(c){var d=this._sucs[c];if(d)return e.keys(d)},i.prototype.neighbors=function(c){var d=this.predecessors(c);if(d)return e.union(d,this.successors(c))},i.prototype.isLeaf=function(c){var d;return this.isDirected()?d=this.successors(c):d=this.neighbors(c),d.length===0},i.prototype.filterNodes=function(c){var d=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});d.setGraph(this.graph());var f=this;e.each(this._nodes,function(p,x){c(x)&&d.setNode(x,p)}),e.each(this._edgeObjs,function(p){d.hasNode(p.v)&&d.hasNode(p.w)&&d.setEdge(p,f.edge(p))});var m={};function y(p){var x=f.parent(p);return x===void 0||d.hasNode(x)?(m[p]=x,x):x in m?m[x]:y(x)}return this._isCompound&&e.each(d.nodes(),function(p){d.setParent(p,y(p))}),d},i.prototype.setDefaultEdgeLabel=function(c){return e.isFunction(c)||(c=e.constant(c)),this._defaultEdgeLabelFn=c,this},i.prototype.edgeCount=function(){return this._edgeCount},i.prototype.edges=function(){return e.values(this._edgeObjs)},i.prototype.setPath=function(c,d){var f=this,m=arguments;return e.reduce(c,function(y,p){return m.length>1?f.setEdge(y,p,d):f.setEdge(y,p),p}),this},i.prototype.setEdge=function(){var c,d,f,m,y=!1,p=arguments[0];typeof p=="object"&&p!==null&&"v"in p?(c=p.v,d=p.w,f=p.name,arguments.length===2&&(m=arguments[1],y=!0)):(c=p,d=arguments[1],f=arguments[3],arguments.length>2&&(m=arguments[2],y=!0)),c=""+c,d=""+d,e.isUndefined(f)||(f=""+f);var x=o(this._isDirected,c,d,f);if(e.has(this._edgeLabels,x))return y&&(this._edgeLabels[x]=m),this;if(!e.isUndefined(f)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(c),this.setNode(d),this._edgeLabels[x]=y?m:this._defaultEdgeLabelFn(c,d,f);var v=l(this._isDirected,c,d,f);return c=v.v,d=v.w,Object.freeze(v),this._edgeObjs[x]=v,a(this._preds[d],c),a(this._sucs[c],d),this._in[d][x]=v,this._out[c][x]=v,this._edgeCount++,this},i.prototype.edge=function(c,d,f){var m=arguments.length===1?u(this._isDirected,arguments[0]):o(this._isDirected,c,d,f);return this._edgeLabels[m]},i.prototype.hasEdge=function(c,d,f){var m=arguments.length===1?u(this._isDirected,arguments[0]):o(this._isDirected,c,d,f);return e.has(this._edgeLabels,m)},i.prototype.removeEdge=function(c,d,f){var m=arguments.length===1?u(this._isDirected,arguments[0]):o(this._isDirected,c,d,f),y=this._edgeObjs[m];return y&&(c=y.v,d=y.w,delete this._edgeLabels[m],delete this._edgeObjs[m],s(this._preds[d],c),s(this._sucs[c],d),delete this._in[d][m],delete this._out[c][m],this._edgeCount--),this},i.prototype.inEdges=function(c,d){var f=this._in[c];if(f){var m=e.values(f);return d?e.filter(m,function(y){return y.v===d}):m}},i.prototype.outEdges=function(c,d){var f=this._out[c];if(f){var m=e.values(f);return d?e.filter(m,function(y){return y.w===d}):m}},i.prototype.nodeEdges=function(c,d){var f=this.inEdges(c,d);if(f)return f.concat(this.outEdges(c,d))};function a(c,d){c[d]?c[d]++:c[d]=1}function s(c,d){--c[d]||delete c[d]}function o(c,d,f,m){var y=""+d,p=""+f;if(!c&&y>p){var x=y;y=p,p=x}return y+r+p+r+(e.isUndefined(m)?t:m)}function l(c,d,f,m){var y=""+d,p=""+f;if(!c&&y>p){var x=y;y=p,p=x}var v={v:y,w:p};return m&&(v.name=m),v}function u(c,d){return o(c,d.v,d.w,d.name)}return Dh}var Oh,e_;function q3(){return e_||(e_=1,Oh="2.1.8"),Oh}var Lh,t_;function F3(){return t_||(t_=1,Lh={Graph:rg(),version:q3()}),Lh}var qh,n_;function V3(){if(n_)return qh;n_=1;var e=Vt(),t=rg();qh={write:n,read:a};function n(s){var o={options:{directed:s.isDirected(),multigraph:s.isMultigraph(),compound:s.isCompound()},nodes:r(s),edges:i(s)};return e.isUndefined(s.graph())||(o.value=e.clone(s.graph())),o}function r(s){return e.map(s.nodes(),function(o){var l=s.node(o),u=s.parent(o),c={v:o};return e.isUndefined(l)||(c.value=l),e.isUndefined(u)||(c.parent=u),c})}function i(s){return e.map(s.edges(),function(o){var l=s.edge(o),u={v:o.v,w:o.w};return e.isUndefined(o.name)||(u.name=o.name),e.isUndefined(l)||(u.value=l),u})}function a(s){var o=new t(s.options).setGraph(s.value);return e.each(s.nodes,function(l){o.setNode(l.v,l.value),l.parent&&o.setParent(l.v,l.parent)}),e.each(s.edges,function(l){o.setEdge({v:l.v,w:l.w,name:l.name},l.value)}),o}return qh}var Fh,r_;function $3(){if(r_)return Fh;r_=1;var e=Vt();Fh=t;function t(n){var r={},i=[],a;function s(o){e.has(r,o)||(r[o]=!0,a.push(o),e.each(n.successors(o),s),e.each(n.predecessors(o),s))}return e.each(n.nodes(),function(o){a=[],s(o),a.length&&i.push(a)}),i}return Fh}var Vh,i_;function vj(){if(i_)return Vh;i_=1;var e=Vt();Vh=t;function t(){this._arr=[],this._keyIndices={}}return t.prototype.size=function(){return this._arr.length},t.prototype.keys=function(){return this._arr.map(function(n){return n.key})},t.prototype.has=function(n){return e.has(this._keyIndices,n)},t.prototype.priority=function(n){var r=this._keyIndices[n];if(r!==void 0)return this._arr[r].priority},t.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key},t.prototype.add=function(n,r){var i=this._keyIndices;if(n=String(n),!e.has(i,n)){var a=this._arr,s=a.length;return i[n]=s,a.push({key:n,priority:r}),this._decrease(s),!0}return!1},t.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var n=this._arr.pop();return delete this._keyIndices[n.key],this._heapify(0),n.key},t.prototype.decrease=function(n,r){var i=this._keyIndices[n];if(r>this._arr[i].priority)throw new Error("New priority is greater than current priority. Key: "+n+" Old: "+this._arr[i].priority+" New: "+r);this._arr[i].priority=r,this._decrease(i)},t.prototype._heapify=function(n){var r=this._arr,i=2*n,a=i+1,s=n;i<r.length&&(s=r[i].priority<r[s].priority?i:s,a<r.length&&(s=r[a].priority<r[s].priority?a:s),s!==n&&(this._swap(n,s),this._heapify(s)))},t.prototype._decrease=function(n){for(var r=this._arr,i=r[n].priority,a;n!==0&&(a=n>>1,!(r[a].priority<i));)this._swap(n,a),n=a},t.prototype._swap=function(n,r){var i=this._arr,a=this._keyIndices,s=i[n],o=i[r];i[n]=o,i[r]=s,a[o.key]=n,a[s.key]=r},Vh}var $h,a_;function gj(){if(a_)return $h;a_=1;var e=Vt(),t=vj();$h=r;var n=e.constant(1);function r(a,s,o,l){return i(a,String(s),o||n,l||function(u){return a.outEdges(u)})}function i(a,s,o,l){var u={},c=new t,d,f,m=function(y){var p=y.v!==d?y.v:y.w,x=u[p],v=o(y),g=f.distance+v;if(v<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+y+" Weight: "+v);g<x.distance&&(x.distance=g,x.predecessor=d,c.decrease(p,g))};for(a.nodes().forEach(function(y){var p=y===s?0:Number.POSITIVE_INFINITY;u[y]={distance:p},c.add(y,p)});c.size()>0&&(d=c.removeMin(),f=u[d],f.distance!==Number.POSITIVE_INFINITY);)l(d).forEach(m);return u}return $h}var Bh,s_;function B3(){if(s_)return Bh;s_=1;var e=gj(),t=Vt();Bh=n;function n(r,i,a){return t.transform(r.nodes(),function(s,o){s[o]=e(r,o,i,a)},{})}return Bh}var zh,o_;function wj(){if(o_)return zh;o_=1;var e=Vt();zh=t;function t(n){var r=0,i=[],a={},s=[];function o(l){var u=a[l]={onStack:!0,lowlink:r,index:r++};if(i.push(l),n.successors(l).forEach(function(f){e.has(a,f)?a[f].onStack&&(u.lowlink=Math.min(u.lowlink,a[f].index)):(o(f),u.lowlink=Math.min(u.lowlink,a[f].lowlink))}),u.lowlink===u.index){var c=[],d;do d=i.pop(),a[d].onStack=!1,c.push(d);while(l!==d);s.push(c)}}return n.nodes().forEach(function(l){e.has(a,l)||o(l)}),s}return zh}var Uh,l_;function z3(){if(l_)return Uh;l_=1;var e=Vt(),t=wj();Uh=n;function n(r){return e.filter(t(r),function(i){return i.length>1||i.length===1&&r.hasEdge(i[0],i[0])})}return Uh}var Gh,u_;function U3(){if(u_)return Gh;u_=1;var e=Vt();Gh=n;var t=e.constant(1);function n(i,a,s){return r(i,a||t,s||function(o){return i.outEdges(o)})}function r(i,a,s){var o={},l=i.nodes();return l.forEach(function(u){o[u]={},o[u][u]={distance:0},l.forEach(function(c){u!==c&&(o[u][c]={distance:Number.POSITIVE_INFINITY})}),s(u).forEach(function(c){var d=c.v===u?c.w:c.v,f=a(c);o[u][d]={distance:f,predecessor:u}})}),l.forEach(function(u){var c=o[u];l.forEach(function(d){var f=o[d];l.forEach(function(m){var y=f[u],p=c[m],x=f[m],v=y.distance+p.distance;v<x.distance&&(x.distance=v,x.predecessor=p.predecessor)})})}),o}return Gh}var Hh,c_;function bj(){if(c_)return Hh;c_=1;var e=Vt();Hh=t,t.CycleException=n;function t(r){var i={},a={},s=[];function o(l){if(e.has(a,l))throw new n;e.has(i,l)||(a[l]=!0,i[l]=!0,e.each(r.predecessors(l),o),delete a[l],s.push(l))}if(e.each(r.sinks(),o),e.size(i)!==r.nodeCount())throw new n;return s}function n(){}return n.prototype=new Error,Hh}var Wh,d_;function G3(){if(d_)return Wh;d_=1;var e=bj();Wh=t;function t(n){try{e(n)}catch(r){if(r instanceof e.CycleException)return!1;throw r}return!0}return Wh}var Kh,f_;function xj(){if(f_)return Kh;f_=1;var e=Vt();Kh=t;function t(r,i,a){e.isArray(i)||(i=[i]);var s=(r.isDirected()?r.successors:r.neighbors).bind(r),o=[],l={};return e.each(i,function(u){if(!r.hasNode(u))throw new Error("Graph does not have node: "+u);n(r,u,a==="post",l,s,o)}),o}function n(r,i,a,s,o,l){e.has(s,i)||(s[i]=!0,a||l.push(i),e.each(o(i),function(u){n(r,u,a,s,o,l)}),a&&l.push(i))}return Kh}var Yh,h_;function H3(){if(h_)return Yh;h_=1;var e=xj();Yh=t;function t(n,r){return e(n,r,"post")}return Yh}var Qh,p_;function W3(){if(p_)return Qh;p_=1;var e=xj();Qh=t;function t(n,r){return e(n,r,"pre")}return Qh}var Xh,m_;function K3(){if(m_)return Xh;m_=1;var e=Vt(),t=rg(),n=vj();Xh=r;function r(i,a){var s=new t,o={},l=new n,u;function c(f){var m=f.v===u?f.w:f.v,y=l.priority(m);if(y!==void 0){var p=a(f);p<y&&(o[m]=u,l.decrease(m,p))}}if(i.nodeCount()===0)return s;e.each(i.nodes(),function(f){l.add(f,Number.POSITIVE_INFINITY),s.setNode(f)}),l.decrease(i.nodes()[0],0);for(var d=!1;l.size()>0;){if(u=l.removeMin(),e.has(o,u))s.setEdge(u,o[u]);else{if(d)throw new Error("Input graph is not connected: "+i);d=!0}i.nodeEdges(u).forEach(c)}return s}return Xh}var Jh,y_;function Y3(){return y_||(y_=1,Jh={components:$3(),dijkstra:gj(),dijkstraAll:B3(),findCycles:z3(),floydWarshall:U3(),isAcyclic:G3(),postorder:H3(),preorder:W3(),prim:K3(),tarjan:wj(),topsort:bj()}),Jh}var Zh,v_;function Q3(){if(v_)return Zh;v_=1;var e=F3();return Zh={Graph:e.Graph,json:V3(),alg:Y3(),version:e.version},Zh}var rl;if(typeof $v=="function")try{rl=Q3()}catch{}rl||(rl=window.graphlib);var Jt=rl,ep,g_;function X3(){if(g_)return ep;g_=1;var e=HM(),t=1,n=4;function r(i){return e(i,t|n)}return ep=r,ep}var tp,w_;function Hl(){if(w_)return tp;w_=1;var e=Qi(),t=Dn(),n=Ll(),r=Ft();function i(a,s,o){if(!r(o))return!1;var l=typeof s;return(l=="number"?t(o)&&n(s,o.length):l=="string"&&s in o)?e(o[s],a):!1}return tp=i,tp}var np,b_;function J3(){if(b_)return np;b_=1;var e=Gl(),t=Qi(),n=Hl(),r=Yr(),i=Object.prototype,a=i.hasOwnProperty,s=e(function(o,l){o=Object(o);var u=-1,c=l.length,d=c>2?l[2]:void 0;for(d&&n(l[0],l[1],d)&&(c=1);++u<c;)for(var f=l[u],m=r(f),y=-1,p=m.length;++y<p;){var x=m[y],v=o[x];(v===void 0||t(v,i[x])&&!a.call(o,x))&&(o[x]=f[x])}return o});return np=s,np}var rp,x_;function Z3(){if(x_)return rp;x_=1;var e=On(),t=Dn(),n=gr();function r(i){return function(a,s,o){var l=Object(a);if(!t(a)){var u=e(s,3);a=n(a),s=function(d){return u(l[d],d,l)}}var c=i(a,s,o);return c>-1?l[u?a[c]:c]:void 0}}return rp=r,rp}var ip,S_;function eV(){if(S_)return ip;S_=1;var e=/\s/;function t(n){for(var r=n.length;r--&&e.test(n.charAt(r)););return r}return ip=t,ip}var ap,__;function tV(){if(__)return ap;__=1;var e=eV(),t=/^\s+/;function n(r){return r&&r.slice(0,e(r)+1).replace(t,"")}return ap=n,ap}var sp,k_;function nV(){if(k_)return sp;k_=1;var e=tV(),t=Ft(),n=ea(),r=NaN,i=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,s=/^0o[0-7]+$/i,o=parseInt;function l(u){if(typeof u=="number")return u;if(n(u))return r;if(t(u)){var c=typeof u.valueOf=="function"?u.valueOf():u;u=t(c)?c+"":c}if(typeof u!="string")return u===0?u:+u;u=e(u);var d=a.test(u);return d||s.test(u)?o(u.slice(2),d?2:8):i.test(u)?r:+u}return sp=l,sp}var op,C_;function Sj(){if(C_)return op;C_=1;var e=nV(),t=1/0,n=17976931348623157e292;function r(i){if(!i)return i===0?i:0;if(i=e(i),i===t||i===-t){var a=i<0?-1:1;return a*n}return i===i?i:0}return op=r,op}var lp,E_;function rV(){if(E_)return lp;E_=1;var e=Sj();function t(n){var r=e(n),i=r%1;return r===r?i?r-i:r:0}return lp=t,lp}var up,T_;function iV(){if(T_)return up;T_=1;var e=pj(),t=On(),n=rV(),r=Math.max;function i(a,s,o){var l=a==null?0:a.length;if(!l)return-1;var u=o==null?0:n(o);return u<0&&(u=r(l+u,0)),e(a,t(s,3),u)}return up=i,up}var cp,M_;function aV(){if(M_)return cp;M_=1;var e=Z3(),t=iV(),n=e(t);return cp=n,cp}var dp,j_;function _j(){if(j_)return dp;j_=1;var e=ng();function t(n){var r=n==null?0:n.length;return r?e(n,1):[]}return dp=t,dp}var fp,P_;function sV(){if(P_)return fp;P_=1;var e=Jv(),t=WM(),n=Yr();function r(i,a){return i==null?i:e(i,t(a),n)}return fp=r,fp}var hp,N_;function oV(){if(N_)return hp;N_=1;function e(t){var n=t==null?0:t.length;return n?t[n-1]:void 0}return hp=e,hp}var pp,A_;function lV(){if(A_)return pp;A_=1;var e=Dl(),t=Zv(),n=On();function r(i,a){var s={};return a=n(a,3),t(i,function(o,l,u){e(s,l,a(o,l,u))}),s}return pp=r,pp}var mp,R_;function ig(){if(R_)return mp;R_=1;var e=ea();function t(n,r,i){for(var a=-1,s=n.length;++a<s;){var o=n[a],l=r(o);if(l!=null&&(u===void 0?l===l&&!e(l):i(l,u)))var u=l,c=o}return c}return mp=t,mp}var yp,I_;function uV(){if(I_)return yp;I_=1;function e(t,n){return t>n}return yp=e,yp}var vp,D_;function cV(){if(D_)return vp;D_=1;var e=ig(),t=uV(),n=Qr();function r(i){return i&&i.length?e(i,n,t):void 0}return vp=r,vp}var gp,O_;function kj(){if(O_)return gp;O_=1;var e=Dl(),t=Qi();function n(r,i,a){(a!==void 0&&!t(r[i],a)||a===void 0&&!(i in r))&&e(r,i,a)}return gp=n,gp}var wp,L_;function dV(){if(L_)return wp;L_=1;var e=Wr(),t=Vl(),n=dn(),r="[object Object]",i=Function.prototype,a=Object.prototype,s=i.toString,o=a.hasOwnProperty,l=s.call(Object);function u(c){if(!n(c)||e(c)!=r)return!1;var d=t(c);if(d===null)return!0;var f=o.call(d,"constructor")&&d.constructor;return typeof f=="function"&&f instanceof f&&s.call(f)==l}return wp=u,wp}var bp,q_;function Cj(){if(q_)return bp;q_=1;function e(t,n){if(!(n==="constructor"&&typeof t[n]=="function")&&n!="__proto__")return t[n]}return bp=e,bp}var xp,F_;function fV(){if(F_)return xp;F_=1;var e=ks(),t=Yr();function n(r){return e(r,t(r))}return xp=n,xp}var Sp,V_;function hV(){if(V_)return Sp;V_=1;var e=kj(),t=IM(),n=zM(),r=DM(),i=GM(),a=Cs(),s=$e(),o=mj(),l=Ji(),u=_s(),c=Ft(),d=dV(),f=Es(),m=Cj(),y=fV();function p(x,v,g,b,_,C,T){var M=m(x,g),E=m(v,g),j=T.get(E);if(j){e(x,g,j);return}var P=C?C(M,E,g+"",x,v,T):void 0,A=P===void 0;if(A){var D=s(E),q=!D&&l(E),W=!D&&!q&&f(E);P=E,D||q||W?s(M)?P=M:o(M)?P=r(M):q?(A=!1,P=t(E,!0)):W?(A=!1,P=n(E,!0)):P=[]:d(E)||a(E)?(P=M,a(M)?P=y(M):(!c(M)||u(M))&&(P=i(E))):A=!1}A&&(T.set(E,P),_(P,E,b,C,T),T.delete(E)),e(x,g,P)}return Sp=p,Sp}var _p,$_;function pV(){if($_)return _p;$_=1;var e=Il(),t=kj(),n=Jv(),r=hV(),i=Ft(),a=Yr(),s=Cj();function o(l,u,c,d,f){l!==u&&n(u,function(m,y){if(f||(f=new e),i(m))r(l,u,y,c,o,d,f);else{var p=d?d(s(l,y),m,y+"",l,u,f):void 0;p===void 0&&(p=m),t(l,y,p)}},a)}return _p=o,_p}var kp,B_;function mV(){if(B_)return kp;B_=1;var e=Gl(),t=Hl();function n(r){return e(function(i,a){var s=-1,o=a.length,l=o>1?a[o-1]:void 0,u=o>2?a[2]:void 0;for(l=r.length>3&&typeof l=="function"?(o--,l):void 0,u&&t(a[0],a[1],u)&&(l=o<3?void 0:l,o=1),i=Object(i);++s<o;){var c=a[s];c&&r(i,c,s,l)}return i})}return kp=n,kp}var Cp,z_;function yV(){if(z_)return Cp;z_=1;var e=pV(),t=mV(),n=t(function(r,i,a){e(r,i,a)});return Cp=n,Cp}var Ep,U_;function Ej(){if(U_)return Ep;U_=1;function e(t,n){return t<n}return Ep=e,Ep}var Tp,G_;function vV(){if(G_)return Tp;G_=1;var e=ig(),t=Ej(),n=Qr();function r(i){return i&&i.length?e(i,n,t):void 0}return Tp=r,Tp}var Mp,H_;function gV(){if(H_)return Mp;H_=1;var e=ig(),t=On(),n=Ej();function r(i,a){return i&&i.length?e(i,t(a,2),n):void 0}return Mp=r,Mp}var jp,W_;function wV(){if(W_)return jp;W_=1;var e=Xt(),t=function(){return e.Date.now()};return jp=t,jp}var Pp,K_;function bV(){if(K_)return Pp;K_=1;var e=Ol(),t=zl(),n=Ll(),r=Ft(),i=Ts();function a(s,o,l,u){if(!r(s))return s;o=t(o,s);for(var c=-1,d=o.length,f=d-1,m=s;m!=null&&++c<d;){var y=i(o[c]),p=l;if(y==="__proto__"||y==="constructor"||y==="prototype")return s;if(c!=f){var x=m[y];p=u?u(x,y,m):void 0,p===void 0&&(p=r(x)?x:n(o[c+1])?[]:{})}e(m,y,p),m=m[y]}return s}return Pp=a,Pp}var Np,Y_;function xV(){if(Y_)return Np;Y_=1;var e=Ul(),t=bV(),n=zl();function r(i,a,s){for(var o=-1,l=a.length,u={};++o<l;){var c=a[o],d=e(i,c);s(d,c)&&t(u,n(c,i),d)}return u}return Np=r,Np}var Ap,Q_;function SV(){if(Q_)return Ap;Q_=1;var e=xV(),t=ij();function n(r,i){return e(r,i,function(a,s){return t(r,s)})}return Ap=n,Ap}var Rp,X_;function _V(){if(X_)return Rp;X_=1;var e=_j(),t=fj(),n=hj();function r(i){return n(t(i,void 0,e),i+"")}return Rp=r,Rp}var Ip,J_;function kV(){if(J_)return Ip;J_=1;var e=SV(),t=_V(),n=t(function(r,i){return r==null?{}:e(r,i)});return Ip=n,Ip}var Dp,Z_;function CV(){if(Z_)return Dp;Z_=1;var e=Math.ceil,t=Math.max;function n(r,i,a,s){for(var o=-1,l=t(e((i-r)/(a||1)),0),u=Array(l);l--;)u[s?l:++o]=r,r+=a;return u}return Dp=n,Dp}var Op,ek;function EV(){if(ek)return Op;ek=1;var e=CV(),t=Hl(),n=Sj();function r(i){return function(a,s,o){return o&&typeof o!="number"&&t(a,s,o)&&(s=o=void 0),a=n(a),s===void 0?(s=a,a=0):s=n(s),o=o===void 0?a<s?1:-1:n(o),e(a,s,o,i)}}return Op=r,Op}var Lp,tk;function TV(){if(tk)return Lp;tk=1;var e=EV(),t=e();return Lp=t,Lp}var qp,nk;function MV(){if(nk)return qp;nk=1;function e(t,n){var r=t.length;for(t.sort(n);r--;)t[r]=t[r].value;return t}return qp=e,qp}var Fp,rk;function jV(){if(rk)return Fp;rk=1;var e=ea();function t(n,r){if(n!==r){var i=n!==void 0,a=n===null,s=n===n,o=e(n),l=r!==void 0,u=r===null,c=r===r,d=e(r);if(!u&&!d&&!o&&n>r||o&&l&&c&&!u&&!d||a&&l&&c||!i&&c||!s)return 1;if(!a&&!o&&!d&&n<r||d&&i&&s&&!a&&!o||u&&i&&s||!l&&s||!c)return-1}return 0}return Fp=t,Fp}var Vp,ik;function PV(){if(ik)return Vp;ik=1;var e=jV();function t(n,r,i){for(var a=-1,s=n.criteria,o=r.criteria,l=s.length,u=i.length;++a<l;){var c=e(s[a],o[a]);if(c){if(a>=u)return c;var d=i[a];return c*(d=="desc"?-1:1)}}return n.index-r.index}return Vp=t,Vp}var $p,ak;function NV(){if(ak)return $p;ak=1;var e=Bl(),t=Ul(),n=On(),r=uj(),i=MV(),a=ql(),s=PV(),o=Qr(),l=$e();function u(c,d,f){d.length?d=e(d,function(p){return l(p)?function(x){return t(x,p.length===1?p[0]:p)}:p}):d=[o];var m=-1;d=e(d,a(n));var y=r(c,function(p,x,v){var g=e(d,function(b){return b(p)});return{criteria:g,index:++m,value:p}});return i(y,function(p,x){return s(p,x,f)})}return $p=u,$p}var Bp,sk;function AV(){if(sk)return Bp;sk=1;var e=ng(),t=NV(),n=Gl(),r=Hl(),i=n(function(a,s){if(a==null)return[];var o=s.length;return o>1&&r(a,s[0],s[1])?s=[]:o>2&&r(s[0],s[1],s[2])&&(s=[s[0]]),t(a,e(s,1),[])});return Bp=i,Bp}var zp,ok;function RV(){if(ok)return zp;ok=1;var e=nj(),t=0;function n(r){var i=++t;return e(r)+i}return zp=n,zp}var Up,lk;function IV(){if(lk)return Up;lk=1;function e(t,n,r){for(var i=-1,a=t.length,s=n.length,o={};++i<a;){var l=i<s?n[i]:void 0;r(o,t[i],l)}return o}return Up=e,Up}var Gp,uk;function DV(){if(uk)return Gp;uk=1;var e=Ol(),t=IV();function n(r,i){return t(r||[],i||[],e)}return Gp=n,Gp}var il;if(typeof $v=="function")try{il={cloneDeep:X3(),constant:Xv(),defaults:J3(),each:YM(),filter:sj(),find:aV(),flatten:_j(),forEach:KM(),forIn:sV(),has:oj(),isUndefined:lj(),last:oV(),map:cj(),mapValues:lV(),max:cV(),merge:yV(),min:vV(),minBy:gV(),now:wV(),pick:kV(),range:TV(),reduce:dj(),sortBy:AV(),uniqueId:RV(),values:yj(),zipObject:DV()}}catch{}il||(il=window._);var _e=il,OV=Wl;function Wl(){var e={};e._next=e._prev=e,this._sentinel=e}Wl.prototype.dequeue=function(){var e=this._sentinel,t=e._prev;if(t!==e)return Tj(t),t};Wl.prototype.enqueue=function(e){var t=this._sentinel;e._prev&&e._next&&Tj(e),e._next=t._next,t._next._prev=e,t._next=e,e._prev=t};Wl.prototype.toString=function(){for(var e=[],t=this._sentinel,n=t._prev;n!==t;)e.push(JSON.stringify(n,LV)),n=n._prev;return"["+e.join(", ")+"]"};function Tj(e){e._prev._next=e._next,e._next._prev=e._prev,delete e._next,delete e._prev}function LV(e,t){if(e!=="_next"&&e!=="_prev")return t}var Sn=_e,qV=Jt.Graph,FV=OV,VV=BV,$V=Sn.constant(1);function BV(e,t){if(e.nodeCount()<=1)return[];var n=UV(e,t||$V),r=zV(n.graph,n.buckets,n.zeroIdx);return Sn.flatten(Sn.map(r,function(i){return e.outEdges(i.v,i.w)}),!0)}function zV(e,t,n){for(var r=[],i=t[t.length-1],a=t[0],s;e.nodeCount();){for(;s=a.dequeue();)Hp(e,t,n,s);for(;s=i.dequeue();)Hp(e,t,n,s);if(e.nodeCount()){for(var o=t.length-2;o>0;--o)if(s=t[o].dequeue(),s){r=r.concat(Hp(e,t,n,s,!0));break}}}return r}function Hp(e,t,n,r,i){var a=i?[]:void 0;return Sn.forEach(e.inEdges(r.v),function(s){var o=e.edge(s),l=e.node(s.v);i&&a.push({v:s.v,w:s.w}),l.out-=o,uy(t,n,l)}),Sn.forEach(e.outEdges(r.v),function(s){var o=e.edge(s),l=s.w,u=e.node(l);u.in-=o,uy(t,n,u)}),e.removeNode(r.v),a}function UV(e,t){var n=new qV,r=0,i=0;Sn.forEach(e.nodes(),function(o){n.setNode(o,{v:o,in:0,out:0})}),Sn.forEach(e.edges(),function(o){var l=n.edge(o.v,o.w)||0,u=t(o),c=l+u;n.setEdge(o.v,o.w,c),i=Math.max(i,n.node(o.v).out+=u),r=Math.max(r,n.node(o.w).in+=u)});var a=Sn.range(i+r+3).map(function(){return new FV}),s=r+1;return Sn.forEach(n.nodes(),function(o){uy(a,s,n.node(o))}),{graph:n,buckets:a,zeroIdx:s}}function uy(e,t,n){n.out?n.in?e[n.out-n.in+t].enqueue(n):e[e.length-1].enqueue(n):e[0].enqueue(n)}var Ir=_e,GV=VV,HV={run:WV,undo:YV};function WV(e){var t=e.graph().acyclicer==="greedy"?GV(e,n(e)):KV(e);Ir.forEach(t,function(r){var i=e.edge(r);e.removeEdge(r),i.forwardName=r.name,i.reversed=!0,e.setEdge(r.w,r.v,i,Ir.uniqueId("rev"))});function n(r){return function(i){return r.edge(i).weight}}}function KV(e){var t=[],n={},r={};function i(a){Ir.has(r,a)||(r[a]=!0,n[a]=!0,Ir.forEach(e.outEdges(a),function(s){Ir.has(n,s.w)?t.push(s):i(s.w)}),delete n[a])}return Ir.forEach(e.nodes(),i),t}function YV(e){Ir.forEach(e.edges(),function(t){var n=e.edge(t);if(n.reversed){e.removeEdge(t);var r=n.forwardName;delete n.reversed,delete n.forwardName,e.setEdge(t.w,t.v,n,r)}})}var ue=_e,Mj=Jt.Graph,vt={addDummyNode:jj,simplify:QV,asNonCompoundGraph:XV,successorWeights:JV,predecessorWeights:ZV,intersectRect:e$,buildLayerMatrix:t$,normalizeRanks:n$,removeEmptyRanks:r$,addBorderNode:i$,maxRank:Pj,partition:a$,time:s$,notime:o$};function jj(e,t,n,r){var i;do i=ue.uniqueId(r);while(e.hasNode(i));return n.dummy=t,e.setNode(i,n),i}function QV(e){var t=new Mj().setGraph(e.graph());return ue.forEach(e.nodes(),function(n){t.setNode(n,e.node(n))}),ue.forEach(e.edges(),function(n){var r=t.edge(n.v,n.w)||{weight:0,minlen:1},i=e.edge(n);t.setEdge(n.v,n.w,{weight:r.weight+i.weight,minlen:Math.max(r.minlen,i.minlen)})}),t}function XV(e){var t=new Mj({multigraph:e.isMultigraph()}).setGraph(e.graph());return ue.forEach(e.nodes(),function(n){e.children(n).length||t.setNode(n,e.node(n))}),ue.forEach(e.edges(),function(n){t.setEdge(n,e.edge(n))}),t}function JV(e){var t=ue.map(e.nodes(),function(n){var r={};return ue.forEach(e.outEdges(n),function(i){r[i.w]=(r[i.w]||0)+e.edge(i).weight}),r});return ue.zipObject(e.nodes(),t)}function ZV(e){var t=ue.map(e.nodes(),function(n){var r={};return ue.forEach(e.inEdges(n),function(i){r[i.v]=(r[i.v]||0)+e.edge(i).weight}),r});return ue.zipObject(e.nodes(),t)}function e$(e,t){var n=e.x,r=e.y,i=t.x-n,a=t.y-r,s=e.width/2,o=e.height/2;if(!i&&!a)throw new Error("Not possible to find intersection inside of the rectangle");var l,u;return Math.abs(a)*s>Math.abs(i)*o?(a<0&&(o=-o),l=o*i/a,u=o):(i<0&&(s=-s),l=s,u=s*a/i),{x:n+l,y:r+u}}function t$(e){var t=ue.map(ue.range(Pj(e)+1),function(){return[]});return ue.forEach(e.nodes(),function(n){var r=e.node(n),i=r.rank;ue.isUndefined(i)||(t[i][r.order]=n)}),t}function n$(e){var t=ue.min(ue.map(e.nodes(),function(n){return e.node(n).rank}));ue.forEach(e.nodes(),function(n){var r=e.node(n);ue.has(r,"rank")&&(r.rank-=t)})}function r$(e){var t=ue.min(ue.map(e.nodes(),function(a){return e.node(a).rank})),n=[];ue.forEach(e.nodes(),function(a){var s=e.node(a).rank-t;n[s]||(n[s]=[]),n[s].push(a)});var r=0,i=e.graph().nodeRankFactor;ue.forEach(n,function(a,s){ue.isUndefined(a)&&s%i!==0?--r:r&&ue.forEach(a,function(o){e.node(o).rank+=r})})}function i$(e,t,n,r){var i={width:0,height:0};return arguments.length>=4&&(i.rank=n,i.order=r),jj(e,"border",i,t)}function Pj(e){return ue.max(ue.map(e.nodes(),function(t){var n=e.node(t).rank;if(!ue.isUndefined(n))return n}))}function a$(e,t){var n={lhs:[],rhs:[]};return ue.forEach(e,function(r){t(r)?n.lhs.push(r):n.rhs.push(r)}),n}function s$(e,t){var n=ue.now();try{return t()}finally{console.log(e+" time: "+(ue.now()-n)+"ms")}}function o$(e,t){return t()}var Nj=_e,l$=vt,u$={run:c$,undo:f$};function c$(e){e.graph().dummyChains=[],Nj.forEach(e.edges(),function(t){d$(e,t)})}function d$(e,t){var n=t.v,r=e.node(n).rank,i=t.w,a=e.node(i).rank,s=t.name,o=e.edge(t),l=o.labelRank;if(a!==r+1){e.removeEdge(t);var u,c,d;for(d=0,++r;r<a;++d,++r)o.points=[],c={width:0,height:0,edgeLabel:o,edgeObj:t,rank:r},u=l$.addDummyNode(e,"edge",c,"_d"),r===l&&(c.width=o.width,c.height=o.height,c.dummy="edge-label",c.labelpos=o.labelpos),e.setEdge(n,u,{weight:o.weight},s),d===0&&e.graph().dummyChains.push(u),n=u;e.setEdge(n,i,{weight:o.weight},s)}}function f$(e){Nj.forEach(e.graph().dummyChains,function(t){var n=e.node(t),r=n.edgeLabel,i;for(e.setEdge(n.edgeObj,r);n.dummy;)i=e.successors(t)[0],e.removeNode(t),r.points.push({x:n.x,y:n.y}),n.dummy==="edge-label"&&(r.x=n.x,r.y=n.y,r.width=n.width,r.height=n.height),t=i,n=e.node(t)})}var so=_e,Kl={longestPath:h$,slack:p$};function h$(e){var t={};function n(r){var i=e.node(r);if(so.has(t,r))return i.rank;t[r]=!0;var a=so.min(so.map(e.outEdges(r),function(s){return n(s.w)-e.edge(s).minlen}));return(a===Number.POSITIVE_INFINITY||a===void 0||a===null)&&(a=0),i.rank=a}so.forEach(e.sources(),n)}function p$(e,t){return e.node(t.w).rank-e.node(t.v).rank-e.edge(t).minlen}var al=_e,m$=Jt.Graph,sl=Kl.slack,Aj=y$;function y$(e){var t=new m$({directed:!1}),n=e.nodes()[0],r=e.nodeCount();t.setNode(n,{});for(var i,a;v$(t,e)<r;)i=g$(t,e),a=t.hasNode(i.v)?sl(e,i):-sl(e,i),w$(t,e,a);return t}function v$(e,t){function n(r){al.forEach(t.nodeEdges(r),function(i){var a=i.v,s=r===a?i.w:a;!e.hasNode(s)&&!sl(t,i)&&(e.setNode(s,{}),e.setEdge(r,s,{}),n(s))})}return al.forEach(e.nodes(),n),e.nodeCount()}function g$(e,t){return al.minBy(t.edges(),function(n){if(e.hasNode(n.v)!==e.hasNode(n.w))return sl(t,n)})}function w$(e,t,n){al.forEach(e.nodes(),function(r){t.node(r).rank+=n})}var An=_e,b$=Aj,x$=Kl.slack,S$=Kl.longestPath,_$=Jt.alg.preorder,k$=Jt.alg.postorder,C$=vt.simplify,E$=Xr;Xr.initLowLimValues=sg;Xr.initCutValues=ag;Xr.calcCutValue=Rj;Xr.leaveEdge=Dj;Xr.enterEdge=Oj;Xr.exchangeEdges=Lj;function Xr(e){e=C$(e),S$(e);var t=b$(e);sg(t),ag(t,e);for(var n,r;n=Dj(t);)r=Oj(t,e,n),Lj(t,e,n,r)}function ag(e,t){var n=k$(e,e.nodes());n=n.slice(0,n.length-1),An.forEach(n,function(r){T$(e,t,r)})}function T$(e,t,n){var r=e.node(n),i=r.parent;e.edge(n,i).cutvalue=Rj(e,t,n)}function Rj(e,t,n){var r=e.node(n),i=r.parent,a=!0,s=t.edge(n,i),o=0;return s||(a=!1,s=t.edge(i,n)),o=s.weight,An.forEach(t.nodeEdges(n),function(l){var u=l.v===n,c=u?l.w:l.v;if(c!==i){var d=u===a,f=t.edge(l).weight;if(o+=d?f:-f,j$(e,n,c)){var m=e.edge(n,c).cutvalue;o+=d?-m:m}}}),o}function sg(e,t){arguments.length<2&&(t=e.nodes()[0]),Ij(e,{},1,t)}function Ij(e,t,n,r,i){var a=n,s=e.node(r);return t[r]=!0,An.forEach(e.neighbors(r),function(o){An.has(t,o)||(n=Ij(e,t,n,o,r))}),s.low=a,s.lim=n++,i?s.parent=i:delete s.parent,n}function Dj(e){return An.find(e.edges(),function(t){return e.edge(t).cutvalue<0})}function Oj(e,t,n){var r=n.v,i=n.w;t.hasEdge(r,i)||(r=n.w,i=n.v);var a=e.node(r),s=e.node(i),o=a,l=!1;a.lim>s.lim&&(o=s,l=!0);var u=An.filter(t.edges(),function(c){return l===ck(e,e.node(c.v),o)&&l!==ck(e,e.node(c.w),o)});return An.minBy(u,function(c){return x$(t,c)})}function Lj(e,t,n,r){var i=n.v,a=n.w;e.removeEdge(i,a),e.setEdge(r.v,r.w,{}),sg(e),ag(e,t),M$(e,t)}function M$(e,t){var n=An.find(e.nodes(),function(i){return!t.node(i).parent}),r=_$(e,n);r=r.slice(1),An.forEach(r,function(i){var a=e.node(i).parent,s=t.edge(i,a),o=!1;s||(s=t.edge(a,i),o=!0),t.node(i).rank=t.node(a).rank+(o?s.minlen:-s.minlen)})}function j$(e,t,n){return e.hasEdge(t,n)}function ck(e,t,n){return n.low<=t.lim&&t.lim<=n.lim}var P$=Kl,qj=P$.longestPath,N$=Aj,A$=E$,R$=I$;function I$(e){switch(e.graph().ranker){case"network-simplex":dk(e);break;case"tight-tree":O$(e);break;case"longest-path":D$(e);break;default:dk(e)}}var D$=qj;function O$(e){qj(e),N$(e)}function dk(e){A$(e)}var cy=_e,L$=q$;function q$(e){var t=V$(e);cy.forEach(e.graph().dummyChains,function(n){for(var r=e.node(n),i=r.edgeObj,a=F$(e,t,i.v,i.w),s=a.path,o=a.lca,l=0,u=s[l],c=!0;n!==i.w;){if(r=e.node(n),c){for(;(u=s[l])!==o&&e.node(u).maxRank<r.rank;)l++;u===o&&(c=!1)}if(!c){for(;l<s.length-1&&e.node(u=s[l+1]).minRank<=r.rank;)l++;u=s[l]}e.setParent(n,u),n=e.successors(n)[0]}})}function F$(e,t,n,r){var i=[],a=[],s=Math.min(t[n].low,t[r].low),o=Math.max(t[n].lim,t[r].lim),l,u;l=n;do l=e.parent(l),i.push(l);while(l&&(t[l].low>s||o>t[l].lim));for(u=l,l=r;(l=e.parent(l))!==u;)a.push(l);return{path:i.concat(a.reverse()),lca:u}}function V$(e){var t={},n=0;function r(i){var a=n;cy.forEach(e.children(i),r),t[i]={low:a,lim:n++}}return cy.forEach(e.children(),r),t}var _n=_e,dy=vt,$$={run:B$,cleanup:G$};function B$(e){var t=dy.addDummyNode(e,"root",{},"_root"),n=z$(e),r=_n.max(_n.values(n))-1,i=2*r+1;e.graph().nestingRoot=t,_n.forEach(e.edges(),function(s){e.edge(s).minlen*=i});var a=U$(e)+1;_n.forEach(e.children(),function(s){Fj(e,t,i,a,r,n,s)}),e.graph().nodeRankFactor=i}function Fj(e,t,n,r,i,a,s){var o=e.children(s);if(!o.length){s!==t&&e.setEdge(t,s,{weight:0,minlen:n});return}var l=dy.addBorderNode(e,"_bt"),u=dy.addBorderNode(e,"_bb"),c=e.node(s);e.setParent(l,s),c.borderTop=l,e.setParent(u,s),c.borderBottom=u,_n.forEach(o,function(d){Fj(e,t,n,r,i,a,d);var f=e.node(d),m=f.borderTop?f.borderTop:d,y=f.borderBottom?f.borderBottom:d,p=f.borderTop?r:2*r,x=m!==y?1:i-a[s]+1;e.setEdge(l,m,{weight:p,minlen:x,nestingEdge:!0}),e.setEdge(y,u,{weight:p,minlen:x,nestingEdge:!0})}),e.parent(s)||e.setEdge(t,l,{weight:0,minlen:i+a[s]})}function z$(e){var t={};function n(r,i){var a=e.children(r);a&&a.length&&_n.forEach(a,function(s){n(s,i+1)}),t[r]=i}return _n.forEach(e.children(),function(r){n(r,1)}),t}function U$(e){return _n.reduce(e.edges(),function(t,n){return t+e.edge(n).weight},0)}function G$(e){var t=e.graph();e.removeNode(t.nestingRoot),delete t.nestingRoot,_n.forEach(e.edges(),function(n){var r=e.edge(n);r.nestingEdge&&e.removeEdge(n)})}var Wp=_e,H$=vt,W$=K$;function K$(e){function t(n){var r=e.children(n),i=e.node(n);if(r.length&&Wp.forEach(r,t),Wp.has(i,"minRank")){i.borderLeft=[],i.borderRight=[];for(var a=i.minRank,s=i.maxRank+1;a<s;++a)fk(e,"borderLeft","_bl",n,i,a),fk(e,"borderRight","_br",n,i,a)}}Wp.forEach(e.children(),t)}function fk(e,t,n,r,i,a){var s={width:0,height:0,rank:a,borderType:t},o=i[t][a-1],l=H$.addDummyNode(e,"border",s,n);i[t][a]=l,e.setParent(l,r),o&&e.setEdge(o,l,{weight:1})}var sn=_e,Y$={adjust:Q$,undo:X$};function Q$(e){var t=e.graph().rankdir.toLowerCase();(t==="lr"||t==="rl")&&Vj(e)}function X$(e){var t=e.graph().rankdir.toLowerCase();(t==="bt"||t==="rl")&&J$(e),(t==="lr"||t==="rl")&&(Z$(e),Vj(e))}function Vj(e){sn.forEach(e.nodes(),function(t){hk(e.node(t))}),sn.forEach(e.edges(),function(t){hk(e.edge(t))})}function hk(e){var t=e.width;e.width=e.height,e.height=t}function J$(e){sn.forEach(e.nodes(),function(t){Kp(e.node(t))}),sn.forEach(e.edges(),function(t){var n=e.edge(t);sn.forEach(n.points,Kp),sn.has(n,"y")&&Kp(n)})}function Kp(e){e.y=-e.y}function Z$(e){sn.forEach(e.nodes(),function(t){Yp(e.node(t))}),sn.forEach(e.edges(),function(t){var n=e.edge(t);sn.forEach(n.points,Yp),sn.has(n,"x")&&Yp(n)})}function Yp(e){var t=e.x;e.x=e.y,e.y=t}var yn=_e,eB=tB;function tB(e){var t={},n=yn.filter(e.nodes(),function(o){return!e.children(o).length}),r=yn.max(yn.map(n,function(o){return e.node(o).rank})),i=yn.map(yn.range(r+1),function(){return[]});function a(o){if(!yn.has(t,o)){t[o]=!0;var l=e.node(o);i[l.rank].push(o),yn.forEach(e.successors(o),a)}}var s=yn.sortBy(n,function(o){return e.node(o).rank});return yn.forEach(s,a),i}var Un=_e,nB=rB;function rB(e,t){for(var n=0,r=1;r<t.length;++r)n+=iB(e,t[r-1],t[r]);return n}function iB(e,t,n){for(var r=Un.zipObject(n,Un.map(n,function(u,c){return c})),i=Un.flatten(Un.map(t,function(u){return Un.sortBy(Un.map(e.outEdges(u),function(c){return{pos:r[c.w],weight:e.edge(c).weight}}),"pos")}),!0),a=1;a<n.length;)a<<=1;var s=2*a-1;a-=1;var o=Un.map(new Array(s),function(){return 0}),l=0;return Un.forEach(i.forEach(function(u){var c=u.pos+a;o[c]+=u.weight;for(var d=0;c>0;)c%2&&(d+=o[c+1]),c=c-1>>1,o[c]+=u.weight;l+=u.weight*d})),l}var pk=_e,aB=sB;function sB(e,t){return pk.map(t,function(n){var r=e.inEdges(n);if(r.length){var i=pk.reduce(r,function(a,s){var o=e.edge(s),l=e.node(s.v);return{sum:a.sum+o.weight*l.order,weight:a.weight+o.weight}},{sum:0,weight:0});return{v:n,barycenter:i.sum/i.weight,weight:i.weight}}else return{v:n}})}var bt=_e,oB=lB;function lB(e,t){var n={};bt.forEach(e,function(i,a){var s=n[i.v]={indegree:0,in:[],out:[],vs:[i.v],i:a};bt.isUndefined(i.barycenter)||(s.barycenter=i.barycenter,s.weight=i.weight)}),bt.forEach(t.edges(),function(i){var a=n[i.v],s=n[i.w];!bt.isUndefined(a)&&!bt.isUndefined(s)&&(s.indegree++,a.out.push(n[i.w]))});var r=bt.filter(n,function(i){return!i.indegree});return uB(r)}function uB(e){var t=[];function n(a){return function(s){s.merged||(bt.isUndefined(s.barycenter)||bt.isUndefined(a.barycenter)||s.barycenter>=a.barycenter)&&cB(a,s)}}function r(a){return function(s){s.in.push(a),--s.indegree===0&&e.push(s)}}for(;e.length;){var i=e.pop();t.push(i),bt.forEach(i.in.reverse(),n(i)),bt.forEach(i.out,r(i))}return bt.map(bt.filter(t,function(a){return!a.merged}),function(a){return bt.pick(a,["vs","i","barycenter","weight"])})}function cB(e,t){var n=0,r=0;e.weight&&(n+=e.barycenter*e.weight,r+=e.weight),t.weight&&(n+=t.barycenter*t.weight,r+=t.weight),e.vs=t.vs.concat(e.vs),e.barycenter=n/r,e.weight=r,e.i=Math.min(t.i,e.i),t.merged=!0}var ja=_e,dB=vt,fB=hB;function hB(e,t){var n=dB.partition(e,function(c){return ja.has(c,"barycenter")}),r=n.lhs,i=ja.sortBy(n.rhs,function(c){return-c.i}),a=[],s=0,o=0,l=0;r.sort(pB(!!t)),l=mk(a,i,l),ja.forEach(r,function(c){l+=c.vs.length,a.push(c.vs),s+=c.barycenter*c.weight,o+=c.weight,l=mk(a,i,l)});var u={vs:ja.flatten(a,!0)};return o&&(u.barycenter=s/o,u.weight=o),u}function mk(e,t,n){for(var r;t.length&&(r=ja.last(t)).i<=n;)t.pop(),e.push(r.vs),n++;return n}function pB(e){return function(t,n){return t.barycenter<n.barycenter?-1:t.barycenter>n.barycenter?1:e?n.i-t.i:t.i-n.i}}var Xn=_e,mB=aB,yB=oB,vB=fB,gB=$j;function $j(e,t,n,r){var i=e.children(t),a=e.node(t),s=a?a.borderLeft:void 0,o=a?a.borderRight:void 0,l={};s&&(i=Xn.filter(i,function(y){return y!==s&&y!==o}));var u=mB(e,i);Xn.forEach(u,function(y){if(e.children(y.v).length){var p=$j(e,y.v,n,r);l[y.v]=p,Xn.has(p,"barycenter")&&bB(y,p)}});var c=yB(u,n);wB(c,l);var d=vB(c,r);if(s&&(d.vs=Xn.flatten([s,d.vs,o],!0),e.predecessors(s).length)){var f=e.node(e.predecessors(s)[0]),m=e.node(e.predecessors(o)[0]);Xn.has(d,"barycenter")||(d.barycenter=0,d.weight=0),d.barycenter=(d.barycenter*d.weight+f.order+m.order)/(d.weight+2),d.weight+=2}return d}function wB(e,t){Xn.forEach(e,function(n){n.vs=Xn.flatten(n.vs.map(function(r){return t[r]?t[r].vs:r}),!0)})}function bB(e,t){Xn.isUndefined(e.barycenter)?(e.barycenter=t.barycenter,e.weight=t.weight):(e.barycenter=(e.barycenter*e.weight+t.barycenter*t.weight)/(e.weight+t.weight),e.weight+=t.weight)}var Pa=_e,xB=Jt.Graph,SB=_B;function _B(e,t,n){var r=kB(e),i=new xB({compound:!0}).setGraph({root:r}).setDefaultNodeLabel(function(a){return e.node(a)});return Pa.forEach(e.nodes(),function(a){var s=e.node(a),o=e.parent(a);(s.rank===t||s.minRank<=t&&t<=s.maxRank)&&(i.setNode(a),i.setParent(a,o||r),Pa.forEach(e[n](a),function(l){var u=l.v===a?l.w:l.v,c=i.edge(u,a),d=Pa.isUndefined(c)?0:c.weight;i.setEdge(u,a,{weight:e.edge(l).weight+d})}),Pa.has(s,"minRank")&&i.setNode(a,{borderLeft:s.borderLeft[t],borderRight:s.borderRight[t]}))}),i}function kB(e){for(var t;e.hasNode(t=Pa.uniqueId("_root")););return t}var CB=_e,EB=TB;function TB(e,t,n){var r={},i;CB.forEach(n,function(a){for(var s=e.parent(a),o,l;s;){if(o=e.parent(s),o?(l=r[o],r[o]=s):(l=i,i=s),l&&l!==s){t.setEdge(l,s);return}s=o}})}var lr=_e,MB=eB,jB=nB,PB=gB,NB=SB,AB=EB,RB=Jt.Graph,yk=vt,IB=DB;function DB(e){var t=yk.maxRank(e),n=vk(e,lr.range(1,t+1),"inEdges"),r=vk(e,lr.range(t-1,-1,-1),"outEdges"),i=MB(e);gk(e,i);for(var a=Number.POSITIVE_INFINITY,s,o=0,l=0;l<4;++o,++l){OB(o%2?n:r,o%4>=2),i=yk.buildLayerMatrix(e);var u=jB(e,i);u<a&&(l=0,s=lr.cloneDeep(i),a=u)}gk(e,s)}function vk(e,t,n){return lr.map(t,function(r){return NB(e,r,n)})}function OB(e,t){var n=new RB;lr.forEach(e,function(r){var i=r.graph().root,a=PB(r,i,n,t);lr.forEach(a.vs,function(s,o){r.node(s).order=o}),AB(r,n,a.vs)})}function gk(e,t){lr.forEach(t,function(n){lr.forEach(n,function(r,i){e.node(r).order=i})})}var Y=_e,LB=Jt.Graph,qB=vt,FB={positionX:QB};function VB(e,t){var n={};function r(i,a){var s=0,o=0,l=i.length,u=Y.last(a);return Y.forEach(a,function(c,d){var f=BB(e,c),m=f?e.node(f).order:l;(f||c===u)&&(Y.forEach(a.slice(o,d+1),function(y){Y.forEach(e.predecessors(y),function(p){var x=e.node(p),v=x.order;(v<s||m<v)&&!(x.dummy&&e.node(y).dummy)&&Bj(n,p,y)})}),o=d+1,s=m)}),a}return Y.reduce(t,r),n}function $B(e,t){var n={};function r(a,s,o,l,u){var c;Y.forEach(Y.range(s,o),function(d){c=a[d],e.node(c).dummy&&Y.forEach(e.predecessors(c),function(f){var m=e.node(f);m.dummy&&(m.order<l||m.order>u)&&Bj(n,f,c)})})}function i(a,s){var o=-1,l,u=0;return Y.forEach(s,function(c,d){if(e.node(c).dummy==="border"){var f=e.predecessors(c);f.length&&(l=e.node(f[0]).order,r(s,u,d,o,l),u=d,o=l)}r(s,u,s.length,l,a.length)}),s}return Y.reduce(t,i),n}function BB(e,t){if(e.node(t).dummy)return Y.find(e.predecessors(t),function(n){return e.node(n).dummy})}function Bj(e,t,n){if(t>n){var r=t;t=n,n=r}var i=e[t];i||(e[t]=i={}),i[n]=!0}function zB(e,t,n){if(t>n){var r=t;t=n,n=r}return Y.has(e[t],n)}function UB(e,t,n,r){var i={},a={},s={};return Y.forEach(t,function(o){Y.forEach(o,function(l,u){i[l]=l,a[l]=l,s[l]=u})}),Y.forEach(t,function(o){var l=-1;Y.forEach(o,function(u){var c=r(u);if(c.length){c=Y.sortBy(c,function(p){return s[p]});for(var d=(c.length-1)/2,f=Math.floor(d),m=Math.ceil(d);f<=m;++f){var y=c[f];a[u]===u&&l<s[y]&&!zB(n,u,y)&&(a[y]=u,a[u]=i[u]=i[y],l=s[y])}}})}),{root:i,align:a}}function GB(e,t,n,r,i){var a={},s=HB(e,t,n,i),o=i?"borderLeft":"borderRight";function l(d,f){for(var m=s.nodes(),y=m.pop(),p={};y;)p[y]?d(y):(p[y]=!0,m.push(y),m=m.concat(f(y))),y=m.pop()}function u(d){a[d]=s.inEdges(d).reduce(function(f,m){return Math.max(f,a[m.v]+s.edge(m))},0)}function c(d){var f=s.outEdges(d).reduce(function(y,p){return Math.min(y,a[p.w]-s.edge(p))},Number.POSITIVE_INFINITY),m=e.node(d);f!==Number.POSITIVE_INFINITY&&m.borderType!==o&&(a[d]=Math.max(a[d],f))}return l(u,s.predecessors.bind(s)),l(c,s.successors.bind(s)),Y.forEach(r,function(d){a[d]=a[n[d]]}),a}function HB(e,t,n,r){var i=new LB,a=e.graph(),s=XB(a.nodesep,a.edgesep,r);return Y.forEach(t,function(o){var l;Y.forEach(o,function(u){var c=n[u];if(i.setNode(c),l){var d=n[l],f=i.edge(d,c);i.setEdge(d,c,Math.max(s(e,u,l),f||0))}l=u})}),i}function WB(e,t){return Y.minBy(Y.values(t),function(n){var r=Number.NEGATIVE_INFINITY,i=Number.POSITIVE_INFINITY;return Y.forIn(n,function(a,s){var o=JB(e,s)/2;r=Math.max(a+o,r),i=Math.min(a-o,i)}),r-i})}function KB(e,t){var n=Y.values(t),r=Y.min(n),i=Y.max(n);Y.forEach(["u","d"],function(a){Y.forEach(["l","r"],function(s){var o=a+s,l=e[o],u;if(l!==t){var c=Y.values(l);u=s==="l"?r-Y.min(c):i-Y.max(c),u&&(e[o]=Y.mapValues(l,function(d){return d+u}))}})})}function YB(e,t){return Y.mapValues(e.ul,function(n,r){if(t)return e[t.toLowerCase()][r];var i=Y.sortBy(Y.map(e,r));return(i[1]+i[2])/2})}function QB(e){var t=qB.buildLayerMatrix(e),n=Y.merge(VB(e,t),$B(e,t)),r={},i;Y.forEach(["u","d"],function(s){i=s==="u"?t:Y.values(t).reverse(),Y.forEach(["l","r"],function(o){o==="r"&&(i=Y.map(i,function(d){return Y.values(d).reverse()}));var l=(s==="u"?e.predecessors:e.successors).bind(e),u=UB(e,i,n,l),c=GB(e,i,u.root,u.align,o==="r");o==="r"&&(c=Y.mapValues(c,function(d){return-d})),r[s+o]=c})});var a=WB(e,r);return KB(r,a),YB(r,e.graph().align)}function XB(e,t,n){return function(r,i,a){var s=r.node(i),o=r.node(a),l=0,u;if(l+=s.width/2,Y.has(s,"labelpos"))switch(s.labelpos.toLowerCase()){case"l":u=-s.width/2;break;case"r":u=s.width/2;break}if(u&&(l+=n?u:-u),u=0,l+=(s.dummy?t:e)/2,l+=(o.dummy?t:e)/2,l+=o.width/2,Y.has(o,"labelpos"))switch(o.labelpos.toLowerCase()){case"l":u=o.width/2;break;case"r":u=-o.width/2;break}return u&&(l+=n?u:-u),u=0,l}}function JB(e,t){return e.node(t).width}var Na=_e,zj=vt,ZB=FB.positionX,e4=t4;function t4(e){e=zj.asNonCompoundGraph(e),n4(e),Na.forEach(ZB(e),function(t,n){e.node(n).x=t})}function n4(e){var t=zj.buildLayerMatrix(e),n=e.graph().ranksep,r=0;Na.forEach(t,function(i){var a=Na.max(Na.map(i,function(s){return e.node(s).height}));Na.forEach(i,function(s){e.node(s).y=r+a/2}),r+=a+n})}var te=_e,wk=HV,bk=u$,r4=R$,i4=vt.normalizeRanks,a4=L$,s4=vt.removeEmptyRanks,xk=$$,o4=W$,Sk=Y$,l4=IB,u4=e4,hr=vt,c4=Jt.Graph,d4=f4;function f4(e,t){var n=t&&t.debugTiming?hr.time:hr.notime;n("layout",function(){var r=n("  buildLayoutGraph",function(){return _4(e)});n("  runLayout",function(){h4(r,n)}),n("  updateInputGraph",function(){p4(e,r)})})}function h4(e,t){t("    makeSpaceForEdgeLabels",function(){k4(e)}),t("    removeSelfEdges",function(){R4(e)}),t("    acyclic",function(){wk.run(e)}),t("    nestingGraph.run",function(){xk.run(e)}),t("    rank",function(){r4(hr.asNonCompoundGraph(e))}),t("    injectEdgeLabelProxies",function(){C4(e)}),t("    removeEmptyRanks",function(){s4(e)}),t("    nestingGraph.cleanup",function(){xk.cleanup(e)}),t("    normalizeRanks",function(){i4(e)}),t("    assignRankMinMax",function(){E4(e)}),t("    removeEdgeLabelProxies",function(){T4(e)}),t("    normalize.run",function(){bk.run(e)}),t("    parentDummyChains",function(){a4(e)}),t("    addBorderSegments",function(){o4(e)}),t("    order",function(){l4(e)}),t("    insertSelfEdges",function(){I4(e)}),t("    adjustCoordinateSystem",function(){Sk.adjust(e)}),t("    position",function(){u4(e)}),t("    positionSelfEdges",function(){D4(e)}),t("    removeBorderNodes",function(){A4(e)}),t("    normalize.undo",function(){bk.undo(e)}),t("    fixupEdgeLabelCoords",function(){P4(e)}),t("    undoCoordinateSystem",function(){Sk.undo(e)}),t("    translateGraph",function(){M4(e)}),t("    assignNodeIntersects",function(){j4(e)}),t("    reversePoints",function(){N4(e)}),t("    acyclic.undo",function(){wk.undo(e)})}function p4(e,t){te.forEach(e.nodes(),function(n){var r=e.node(n),i=t.node(n);r&&(r.x=i.x,r.y=i.y,t.children(n).length&&(r.width=i.width,r.height=i.height))}),te.forEach(e.edges(),function(n){var r=e.edge(n),i=t.edge(n);r.points=i.points,te.has(i,"x")&&(r.x=i.x,r.y=i.y)}),e.graph().width=t.graph().width,e.graph().height=t.graph().height}var m4=["nodesep","edgesep","ranksep","marginx","marginy"],y4={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},v4=["acyclicer","ranker","rankdir","align"],g4=["width","height"],w4={width:0,height:0},b4=["minlen","weight","width","height","labeloffset"],x4={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},S4=["labelpos"];function _4(e){var t=new c4({multigraph:!0,compound:!0}),n=Xp(e.graph());return t.setGraph(te.merge({},y4,Qp(n,m4),te.pick(n,v4))),te.forEach(e.nodes(),function(r){var i=Xp(e.node(r));t.setNode(r,te.defaults(Qp(i,g4),w4)),t.setParent(r,e.parent(r))}),te.forEach(e.edges(),function(r){var i=Xp(e.edge(r));t.setEdge(r,te.merge({},x4,Qp(i,b4),te.pick(i,S4)))}),t}function k4(e){var t=e.graph();t.ranksep/=2,te.forEach(e.edges(),function(n){var r=e.edge(n);r.minlen*=2,r.labelpos.toLowerCase()!=="c"&&(t.rankdir==="TB"||t.rankdir==="BT"?r.width+=r.labeloffset:r.height+=r.labeloffset)})}function C4(e){te.forEach(e.edges(),function(t){var n=e.edge(t);if(n.width&&n.height){var r=e.node(t.v),i=e.node(t.w),a={rank:(i.rank-r.rank)/2+r.rank,e:t};hr.addDummyNode(e,"edge-proxy",a,"_ep")}})}function E4(e){var t=0;te.forEach(e.nodes(),function(n){var r=e.node(n);r.borderTop&&(r.minRank=e.node(r.borderTop).rank,r.maxRank=e.node(r.borderBottom).rank,t=te.max(t,r.maxRank))}),e.graph().maxRank=t}function T4(e){te.forEach(e.nodes(),function(t){var n=e.node(t);n.dummy==="edge-proxy"&&(e.edge(n.e).labelRank=n.rank,e.removeNode(t))})}function M4(e){var t=Number.POSITIVE_INFINITY,n=0,r=Number.POSITIVE_INFINITY,i=0,a=e.graph(),s=a.marginx||0,o=a.marginy||0;function l(u){var c=u.x,d=u.y,f=u.width,m=u.height;t=Math.min(t,c-f/2),n=Math.max(n,c+f/2),r=Math.min(r,d-m/2),i=Math.max(i,d+m/2)}te.forEach(e.nodes(),function(u){l(e.node(u))}),te.forEach(e.edges(),function(u){var c=e.edge(u);te.has(c,"x")&&l(c)}),t-=s,r-=o,te.forEach(e.nodes(),function(u){var c=e.node(u);c.x-=t,c.y-=r}),te.forEach(e.edges(),function(u){var c=e.edge(u);te.forEach(c.points,function(d){d.x-=t,d.y-=r}),te.has(c,"x")&&(c.x-=t),te.has(c,"y")&&(c.y-=r)}),a.width=n-t+s,a.height=i-r+o}function j4(e){te.forEach(e.edges(),function(t){var n=e.edge(t),r=e.node(t.v),i=e.node(t.w),a,s;n.points?(a=n.points[0],s=n.points[n.points.length-1]):(n.points=[],a=i,s=r),n.points.unshift(hr.intersectRect(r,a)),n.points.push(hr.intersectRect(i,s))})}function P4(e){te.forEach(e.edges(),function(t){var n=e.edge(t);if(te.has(n,"x"))switch((n.labelpos==="l"||n.labelpos==="r")&&(n.width-=n.labeloffset),n.labelpos){case"l":n.x-=n.width/2+n.labeloffset;break;case"r":n.x+=n.width/2+n.labeloffset;break}})}function N4(e){te.forEach(e.edges(),function(t){var n=e.edge(t);n.reversed&&n.points.reverse()})}function A4(e){te.forEach(e.nodes(),function(t){if(e.children(t).length){var n=e.node(t),r=e.node(n.borderTop),i=e.node(n.borderBottom),a=e.node(te.last(n.borderLeft)),s=e.node(te.last(n.borderRight));n.width=Math.abs(s.x-a.x),n.height=Math.abs(i.y-r.y),n.x=a.x+n.width/2,n.y=r.y+n.height/2}}),te.forEach(e.nodes(),function(t){e.node(t).dummy==="border"&&e.removeNode(t)})}function R4(e){te.forEach(e.edges(),function(t){if(t.v===t.w){var n=e.node(t.v);n.selfEdges||(n.selfEdges=[]),n.selfEdges.push({e:t,label:e.edge(t)}),e.removeEdge(t)}})}function I4(e){var t=hr.buildLayerMatrix(e);te.forEach(t,function(n){var r=0;te.forEach(n,function(i,a){var s=e.node(i);s.order=a+r,te.forEach(s.selfEdges,function(o){hr.addDummyNode(e,"selfedge",{width:o.label.width,height:o.label.height,rank:s.rank,order:a+ ++r,e:o.e,label:o.label},"_se")}),delete s.selfEdges})})}function D4(e){te.forEach(e.nodes(),function(t){var n=e.node(t);if(n.dummy==="selfedge"){var r=e.node(n.e.v),i=r.x+r.width/2,a=r.y,s=n.x-i,o=r.height/2;e.setEdge(n.e,n.label),e.removeNode(t),n.label.points=[{x:i+2*s/3,y:a-o},{x:i+5*s/6,y:a-o},{x:i+s,y:a},{x:i+5*s/6,y:a+o},{x:i+2*s/3,y:a+o}],n.label.x=n.x,n.label.y=n.y}})}function Qp(e,t){return te.mapValues(te.pick(e,t),Number)}function Xp(e){var t={};return te.forEach(e,function(n,r){t[r.toLowerCase()]=n}),t}var oo=_e,O4=vt,L4=Jt.Graph,q4={debugOrdering:F4};function F4(e){var t=O4.buildLayerMatrix(e),n=new L4({compound:!0,multigraph:!0}).setGraph({});return oo.forEach(e.nodes(),function(r){n.setNode(r,{label:r}),n.setParent(r,"layer"+e.node(r).rank)}),oo.forEach(e.edges(),function(r){n.setEdge(r.v,r.w,{},r.name)}),oo.forEach(t,function(r,i){var a="layer"+i;n.setNode(a,{rank:"same"}),oo.reduce(r,function(s,o){return n.setEdge(s,o,{style:"invis"}),o})}),n}var V4="0.8.5",$4={graphlib:Jt,layout:d4,debug:q4,util:{time:vt.time,notime:vt.notime},version:V4};const _k=Dk($4),kk=new Map;function B4(e,t){const n=e.map(i=>i.id).join("|"),r=t.map(i=>`${i.source}->${i.target}`).join("|");return`${e.length}:${t.length}:${n}:${r}`}function z4(e,t,n){if(n){const r=B4(e,t),i=kk.get(n);if(i&&i.signature===r)return i.layout;const a=Ck(e,t);return kk.set(n,{signature:r,layout:a}),a}return Ck(e,t)}function Ck(e,t){if(e.length>2500){const r=Math.ceil(Math.sqrt(e.length));return e.map((i,a)=>{const s=Math.floor(a/r),o=a%r;return{id:i.id,position:{x:o*260,y:s*160}}})}const n=new _k.graphlib.Graph;return n.setGraph({rankdir:"LR",nodesep:48,ranksep:80}),n.setDefaultEdgeLabel(()=>({})),e.forEach(r=>{n.setNode(r.id,{width:220,height:120})}),t.forEach(r=>{n.setEdge(r.source,r.target)}),_k.layout(n),e.map(r=>{const i=n.node(r.id);return{id:r.id,position:{x:i.x-i.width/2,y:i.y-i.height/2}}})}const Uj="agentDirector.gameplayFunnel.v1";function U4(){try{const e=window.localStorage.getItem(Uj);if(!e)return[];const t=JSON.parse(e);return Array.isArray(t)?t.filter(n=>{if(!n||typeof n!="object")return!1;const r=n;return typeof r.name=="string"&&typeof r.at=="number"&&!!r.metadata&&typeof r.metadata=="object"}):[]}catch{return[]}}function G4(e,t={}){const n={name:e,at:Date.now(),metadata:t},i=[...U4(),n].slice(-200);return window.localStorage.setItem(Uj,JSON.stringify(i)),n}function H4(e){const t=new Map;for(const r of e)r.type==="tool_call"&&r.toolCallId&&t.set(r.toolCallId,r.id);const n=[];for(const r of e)if(!(r.type!=="llm_call"||!r.io)){for(const i of r.io.emittedToolCallIds??[]){const a=t.get(i);a&&n.push({id:`io_emit_${r.id}_${a}`,source:r.id,target:a,kind:"io",toolCallId:i})}for(const i of r.io.consumedToolCallIds??[]){const a=t.get(i);a&&n.push({id:`io_consume_${a}_${r.id}`,source:a,target:r.id,kind:"io",toolCallId:i})}}return n}function W4(e,t,n){const{intervals:r}=_l(e,t,n),i=new Set;return r.forEach(a=>{i.add(a.startMs),i.add(a.endMs)}),Array.from(i).sort((a,s)=>a-s)}function K4(e,t,n){if(!e.length)return null;if(n===1){for(const r of e)if(r>t+1)return r;return e[e.length-1]}for(let r=e.length-1;r>=0;r-=1){const i=e[r];if(i<t-1)return i}return e[0]}const Y4=300,Q4=2e3,X4=1.5;function J4(e){const t=Y4*Math.pow(X4,Math.max(0,e));return Math.min(Q4,Math.round(t))}function Gn(e,t){if(!e)return t;try{return JSON.parse(e)}catch{return t}}function Ek(e,t){const n=new Map;return[...e,...t].forEach(r=>{const i=n.get(r.id);(!i||r.updatedAt>=i.updatedAt)&&n.set(r.id,r)}),Array.from(n.values()).sort((r,i)=>r.createdAt-i.createdAt)}function Tk(e,t=50){return[...e].sort((n,r)=>r.timestamp-n.timestamp).slice(0,t)}const Z4=[{minDepth:1,maxDepth:1,difficulty:1},{minDepth:2,maxDepth:3,difficulty:2},{minDepth:4,maxDepth:5,difficulty:3},{minDepth:6,maxDepth:7,difficulty:4},{minDepth:8,maxDepth:9,difficulty:5},{minDepth:10,maxDepth:12,difficulty:6},{minDepth:13,maxDepth:16,difficulty:7},{minDepth:17,maxDepth:20,difficulty:8},{minDepth:21,maxDepth:24,difficulty:9},{minDepth:25,maxDepth:Number.MAX_SAFE_INTEGER,difficulty:10}],lo=["latency storm","cache divergence","tool timeout chain","stale prompt vector","schema mismatch surge"],Mk=[{id:"seasonal-incident-sprint",title:"Resolve 3 raid objectives",goal:3,rewardCredits:120},{id:"boss-shutdown",title:"Defeat one boss encounter",goal:1,rewardCredits:200},{id:"guild-push",title:"Complete 2 guild operations",goal:2,rewardCredits:160},{id:"timeline-weaver",title:"Merge 2 timeline forks",goal:2,rewardCredits:150}],ez={stability_patch:{credits:20,materials:12},precision_lens:{credits:28,materials:16},overclock_core:{credits:42,materials:24}};function ye(e,t,n){return Math.min(n,Math.max(t,e))}function Gj(e){let t=0;for(let n=0;n<e.length;n+=1)t=(t*31+e.charCodeAt(n))%1e5;return t}function tz(e,t,n){const r=Gj(`${e}:${t}:${n.join("|")}`),i=lo[r%lo.length],a=lo[Math.floor(r/7)%lo.length],s=Array.from(new Set([i,a])),o=[...n].sort().slice(-2),l=`seed=${r};depth=${t};mutators=${o.join(",")||"none"}`;return{id:`mission-${t}-${(e+t)%997}`,title:`Scenario Depth ${t}`,difficulty:nz(t),hazards:[...s,...o.slice(-1)],rewardCredits:60+t*15,missionSeed:r,blueprint:l}}function Hj(e,t,n){return tz(e,t,n)}function nz(e){var n;const t=Math.max(1,Math.floor(e));return((n=Z4.find(r=>t>=r.minDepth&&t<=r.maxDepth))==null?void 0:n.difficulty)??10}function rz(){return[{id:"node-alpha",title:"Signal Fracture",body:"Telemetry divergence emerges across parallel tool paths.",choices:[{id:"alpha-risk",label:"Push aggressive branch optimization",nextNodeId:"node-beta",tensionDelta:12,mutator:"risk-surge"},{id:"alpha-safe",label:"Stabilize and preserve deterministic flow",nextNodeId:"node-beta",tensionDelta:-5,mutator:"stability-first"}]},{id:"node-beta",title:"Protocol Fork",body:"The team must choose speed versus interpretability under pressure.",choices:[{id:"beta-speed",label:"Favor speed and absorb uncertainty",nextNodeId:"node-gamma",tensionDelta:8,mutator:"throughput-boost"},{id:"beta-clarity",label:"Favor clarity and route through guardrails",nextNodeId:"node-gamma",tensionDelta:-3,mutator:"clarity-path"}]},{id:"node-gamma",title:"Final Directive",body:"Command has one move left before the run locks in.",choices:[{id:"gamma-strike",label:"Launch decisive strike sequence",nextNodeId:"node-alpha",tensionDelta:10,mutator:"strike-loop"},{id:"gamma-reset",label:"Reset tempo and rebuild confidence",nextNodeId:"node-alpha",tensionDelta:-6,mutator:"tempo-reset"}]}]}function Wj(e,t){return{...Mk[(e+t)%Mk.length],progress:0,completed:!1}}function Kj(e,t){const n=[...e,t];return Array.from(new Set(n)).slice(-6)}function fy(e,t,n){return{...e,campaign:{...e.campaign,depth:t,mutators:n,currentMission:Hj(e.seed,t,n)}}}function jk(e){const t=Gj(e),n=["baseline"];return{seed:t,raid:{party:["director"],roles:{director:"strategist"},objectives:[{id:"obj-root-cause",label:"Identify root cause chain",progress:0,target:100,completed:!1},{id:"obj-recover",label:"Recover operational stability",progress:0,target:100,completed:!1},{id:"obj-harden",label:"Harden replay strategy",progress:0,target:100,completed:!1}],completed:!1},campaign:{depth:1,lives:3,completedMissionIds:[],mutators:n,currentMission:Hj(t,1,n)},narrative:{currentNodeId:"node-alpha",nodes:rz(),history:[],tension:35},skills:{points:6,nodes:[{id:"skill-focus",label:"Focus Matrix",cost:1,requires:[],minLevel:1,requiredMilestones:[],tier:1,loadoutSlot:"core",unlocked:!1},{id:"skill-resilience",label:"Resilience Mesh",cost:1,requires:[],minLevel:1,requiredMilestones:[],tier:1,loadoutSlot:"utility",unlocked:!1},{id:"skill-surge",label:"Surge Compiler",cost:2,requires:["skill-focus"],minLevel:2,requiredMilestones:[],tier:2,loadoutSlot:"power",unlocked:!1},{id:"skill-echo",label:"Echo Anticipator",cost:2,requires:["skill-resilience"],minLevel:2,requiredMilestones:[],tier:2,loadoutSlot:"utility",unlocked:!1},{id:"skill-ward",label:"Ward Lattice",cost:2,requires:["skill-resilience"],minLevel:3,requiredMilestones:["milestone-level-3"],tier:3,loadoutSlot:"power",unlocked:!1},{id:"skill-overclock",label:"Overclock Nexus",cost:3,requires:["skill-surge","skill-echo"],minLevel:4,requiredMilestones:["milestone-level-3"],tier:3,loadoutSlot:"power",unlocked:!1}],loadout:{capacity:3,equipped:[],slotCaps:{core:1,utility:1,power:1}}},pvp:{round:0,stability:72,sabotage:28,fog:40,winner:null},time:{activeForkId:"primary",forks:[{id:"primary",label:"Primary timeline",playheadMs:0,history:[0]}]},boss:{name:"The Causality Hydra",phase:1,hp:320,maxHp:320,enraged:!1,phaseMechanic:"Phase 1: Shield lattice destabilization",vulnerability:"exploit"},director:{risk:30,hint:"Start with the bottleneck path and branch cautiously.",recommendedModifier:"stability_patch",lastOutcome:"mixed"},economy:{credits:140,materials:90,crafted:[],inflationIndex:.438,reserveTarget:320},rewards:{dailyClaimedOn:null,streakDays:0,sessionClaimed:!1,streakClaimedFor:0,masteryClaims:[],history:[]},guild:{name:"Trace Guild",members:4,operationsScore:0,eventsCompleted:0},cinematic:{queue:[]},liveops:{season:`Season-${2026+t%2}`,week:1,challenge:Wj(t,1),difficultyFactor:1,rewardMultiplier:1,tuningHistory:[]},safety:{mutedPlayerIds:[],blockedPlayerIds:[],reports:[]},outcome:{status:"in_progress",reason:"Run started. Complete missions and stabilize the incident.",updatedAt:Date.now()},sandbox:{enabled:!1},progression:{xp:0,level:1,nextLevelXp:200,milestones:[]}}}function Ez(e,t){return{...e,sandbox:{enabled:t},outcome:t?{status:"in_progress",reason:"Sandbox mode enabled. Penalties are disabled for safe practice runs.",updatedAt:Date.now()}:e.outcome}}function Tz(e,t,n){if(!t.trim())return e;const r=e.raid.party.includes(t)?e.raid.party:[...e.raid.party,t];return{...e,raid:{...e.raid,party:r,roles:{...e.raid.roles,[t]:n}}}}function Mz(e,t,n){const r=cg(e),i=e.raid.objectives.map(l=>{if(l.id!==t)return l;const u=ye(l.progress+n,0,l.target);return{...l,progress:u,completed:u>=l.target}}),a=i.every(l=>l.completed),s=a&&!e.raid.completed?180:0,o={...e,raid:{...e.raid,objectives:i,completed:a},outcome:a&&!e.raid.completed?{status:"partial",reason:"Raid objectives completed. Push campaign and boss tracks to close the run.",updatedAt:Date.now()}:r};return!a||e.raid.completed?o:Rn(Ms(o,s),60)}function jz(e,t){const n=lz(e),r=e.campaign.currentMission;if(t){const l=e.campaign.depth+1,u=fy(e,l,e.campaign.mutators),c=l>=5?{status:"win",reason:"Campaign depth target reached. Incident run is stabilized.",updatedAt:Date.now()}:{status:"partial",reason:`Mission ${r.id} cleared. Advance deeper to secure the run.`,updatedAt:Date.now()},d={...u,campaign:{...u.campaign,completedMissionIds:[...u.campaign.completedMissionIds,r.id]},economy:{...u.economy,materials:u.economy.materials+14},director:{...u.director,lastOutcome:"success"},outcome:c};return Rn(Ms(d,r.rewardCredits),120)}const i=n.enabled?e.campaign.lives:ye(e.campaign.lives-1,0,3),a=fy(e,e.campaign.depth,Kj(e.campaign.mutators,"failure-loop")),s=n.enabled?{status:"partial",reason:"Sandbox mode active. Failure recorded with no life penalty.",updatedAt:Date.now()}:i<=0?{status:"loss",reason:"No campaign lives remaining. Incident run failed.",updatedAt:Date.now()}:{status:"partial",reason:`Mission failed. ${i} campaign lives remaining.`,updatedAt:Date.now()},o={...a,campaign:{...a.campaign,lives:i},director:{...a.director,lastOutcome:"failure"},outcome:s};return Rn(o,40)}function Pz(e,t){const n=e.narrative.nodes.find(o=>o.id===e.narrative.currentNodeId),r=n==null?void 0:n.choices.find(o=>o.id===t);if(!n||!r)return e;const i=ye(e.narrative.tension+r.tensionDelta,0,100),a=Kj(e.campaign.mutators,r.mutator),s=fy(e,e.campaign.depth,a);return{...s,narrative:{...s.narrative,currentNodeId:r.nextNodeId,history:[...s.narrative.history,{nodeId:n.id,choiceId:r.id}],tension:i}}}function Nz(e,t){const n=e.skills.nodes.find(i=>i.id===t);return!n||!iz(e,t).allowed?e:{...e,skills:{...e.skills,points:e.skills.points-n.cost,nodes:e.skills.nodes.map(i=>i.id===t?{...i,unlocked:!0}:i)}}}function Az(e,t){return az(e,t).allowed?{...e,skills:{...e.skills,loadout:{...e.skills.loadout,equipped:[...e.skills.loadout.equipped,t]}}}:e}function iz(e,t){const n=e.skills.nodes.find(o=>o.id===t);if(!n)return{allowed:!1,reason:"Unknown skill node."};if(n.unlocked)return{allowed:!1,reason:"Skill already unlocked."};const r=new Set(e.skills.nodes.filter(o=>o.unlocked).map(o=>o.id)),i=n.requires.filter(o=>!r.has(o));if(i.length>0)return{allowed:!1,reason:`Requires: ${i.join(", ")}`};const a=Qj(e);if(a.level<n.minLevel)return{allowed:!1,reason:`Requires level ${n.minLevel}`};const s=n.requiredMilestones.filter(o=>!a.milestones.includes(o));return s.length>0?{allowed:!1,reason:`Requires milestone ${s[0]}`}:e.skills.points<n.cost?{allowed:!1,reason:`Need ${n.cost} points`}:{allowed:!0,reason:"Unlock available"}}function az(e,t){const n=e.skills.nodes.find(a=>a.id===t);if(!n)return{allowed:!1,reason:"Unknown skill node."};if(!n.unlocked)return{allowed:!1,reason:"Unlock required before equip."};if(e.skills.loadout.equipped.includes(t))return{allowed:!1,reason:"Already equipped."};if(e.skills.loadout.equipped.length>=e.skills.loadout.capacity)return{allowed:!1,reason:"Loadout capacity reached."};const r=e.skills.loadout.slotCaps[n.loadoutSlot];return e.skills.loadout.equipped.reduce((a,s)=>{const o=e.skills.nodes.find(l=>l.id===s);return(o==null?void 0:o.loadoutSlot)===n.loadoutSlot?a+1:a},0)>=r?{allowed:!1,reason:`${n.loadoutSlot} slot limit reached.`}:{allowed:!0,reason:"Equip available"}}function Rz(e,t){const n=cg(e),r={...e.pvp};t==="sabotage"?(r.sabotage=ye(r.sabotage+13,0,100),r.stability=ye(r.stability-11,0,100),r.fog=ye(r.fog+9,0,100)):t==="stabilize"?(r.stability=ye(r.stability+14,0,100),r.sabotage=ye(r.sabotage-8,0,100),r.fog=ye(r.fog-6,0,100)):(r.fog=ye(r.fog-16,0,100),r.stability=ye(r.stability+3,0,100),r.sabotage=ye(r.sabotage-4,0,100)),r.round+=1,r.stability<=0?r.winner="saboteur":r.sabotage<=0?r.winner="operator":r.round>=10&&(r.winner=r.stability>=r.sabotage?"operator":"saboteur");const i=r.winner==="operator"?{status:"win",reason:"Operator side prevailed in the sabotage conflict.",updatedAt:Date.now()}:r.winner==="saboteur"?{status:"loss",reason:"Saboteur pressure overwhelmed system stability.",updatedAt:Date.now()}:n,a={...e,pvp:r,outcome:i};return Rn(a,r.winner?72:12)}function Iz(e,t,n){const r=`fork-${e.time.forks.length+1}`,i={id:r,label:t.trim()||r,playheadMs:ye(n,0,36e5),history:[ye(n,0,36e5)]};return{...e,time:{...e.time,activeForkId:r,forks:[...e.time.forks,i]}}}function Dz(e,t){const n=e.time.activeForkId,r=e.time.forks.map(i=>{if(i.id!==n)return i;const a=ye(i.playheadMs-Math.abs(t),0,36e5);return{...i,playheadMs:a,history:[...i.history,a]}});return{...e,time:{...e.time,forks:r}}}function Oz(e,t){if(t==="primary")return e;const n=e.time.forks.find(a=>a.id===t),r=e.time.forks.find(a=>a.id==="primary");if(!n||!r)return e;const i={...r,playheadMs:n.playheadMs,history:[...r.history,n.playheadMs]};return{...e,time:{activeForkId:"primary",forks:[i,...e.time.forks.filter(a=>a.id!=="primary"&&a.id!==t)]}}}function Lz(e,t){const n=cg(e),i={1:{exploit:42,strike:24,shield:8},2:{exploit:34,strike:28,shield:10},3:{exploit:26,strike:18,shield:14}}[e.boss.phase][t],a=e.boss.vulnerability===t?8:0,s=i+a,o=ye(e.boss.hp-s,0,e.boss.maxHp),l=o/e.boss.maxHp,u=l<=.33?3:l<=.66?2:1,c=u===1?"Phase 1: Shield lattice destabilization":u===2?"Phase 2: Mirror clones absorb exploit damage":"Phase 3: Enrage pulse; shield counters become lethal",d=u===1?"exploit":u===2?"strike":"shield",f={...e,boss:{...e.boss,hp:o,phase:u,enraged:u===3||o<=e.boss.maxHp*.2,phaseMechanic:c,vulnerability:d},outcome:o<=0?{status:"win",reason:"Boss encounter cleared. Run secured.",updatedAt:Date.now()}:n};return Rn(f,o<=0?180:10)}function qz(e,t){const n=t.failures*12+t.retries*4+(t.latencyMs>1400?8:0),r=ye(e.director.risk+n,0,100),i=t.failures>0?"Prioritize failure triage and run a stabilizing replay branch.":t.latencyMs>1400?"Latency pressure detected. Reduce fan-out and tighten tool boundaries.":"Momentum is stable. Push a high-confidence optimization branch.",a=t.failures>1?"stability_patch":t.latencyMs>1400?"precision_lens":"overclock_core",s=t.failures>0?"failure":"success";return{...e,director:{risk:r,hint:i,recommendedModifier:a,lastOutcome:s}}}function Fz(e,t){const n=ez[t];if(!n||e.economy.credits<n.credits||e.economy.materials<n.materials)return e;const r=e.economy.crafted.includes(t)?e.economy.crafted:[...e.economy.crafted,t],i=e.economy.reserveTarget||320,a=e.economy.credits-n.credits;let s={...e,economy:{...e.economy,credits:a,materials:e.economy.materials-n.materials,crafted:r,inflationIndex:Number((a/i).toFixed(3))}};return t==="stability_patch"&&(s={...s,pvp:{...s.pvp,stability:ye(s.pvp.stability+8,0,100)}}),t==="precision_lens"&&(s={...s,raid:{...s.raid,objectives:s.raid.objectives.map((o,l)=>l===0?{...o,progress:ye(o.progress+10,0,o.target),completed:ye(o.progress+10,0,o.target)>=o.target}:o)}}),t==="overclock_core"&&(s={...s,boss:{...s.boss,hp:ye(s.boss.hp-16,0,s.boss.maxHp)}}),Rn(s,10)}function Vz(e,t){const n=Math.round(t),r={...e,guild:{...e.guild,operationsScore:e.guild.operationsScore+n,eventsCompleted:e.guild.eventsCompleted+(n>0?1:0)}},i=n>0?Ms(r,n*3):r;return Rn(i,Math.max(0,n*6))}function $z(e,t,n,r){const i={id:`event-${e.cinematic.queue.length+1}-${e.seed%1e3}`,type:t,message:n,intensity:r,at:Date.now()};return{...e,cinematic:{queue:[i,...e.cinematic.queue].slice(0,12)}}}function Bz(e){const t=og(e),n=t.week+1,r=Wj(e.seed,n),i=ye(t.difficultyFactor??1,.6,1.6),a=ye(t.rewardMultiplier??1,.5,2),s={...r,goal:Math.max(1,Math.round(r.goal*i)),rewardCredits:Math.max(1,Math.round(r.rewardCredits*a))},o={...e,liveops:{...t,week:n,challenge:s}};return oz(o)}function zz(e,t){const n=og(e),r=n.challenge,i=ye(t,0,20),a=ye(r.progress+i,0,r.goal),s=a>=r.goal,o={...e,liveops:{...n,challenge:{...r,progress:a,completed:s}}};return!s||r.completed?o:Rn(Ms(o,r.rewardCredits),80)}function sz(e,t,n="raid_mastery"){const r=Yj(e),i=new Date().toISOString().slice(0,10);return t==="daily"?r.dailyClaimedOn===i?{allowed:!1,reason:"Daily reward already claimed today."}:{allowed:!0,reason:"Daily reward available."}:t==="session"?r.sessionClaimed?{allowed:!1,reason:"Session reward already claimed."}:e.raid.objectives.some(o=>o.progress>0)||e.campaign.depth>1||e.pvp.round>0?{allowed:!0,reason:"Session reward available."}:{allowed:!1,reason:"Session reward requires gameplay activity."}:t==="streak"?r.streakDays<3?{allowed:!1,reason:"Streak reward requires 3+ daily claims."}:r.streakClaimedFor>=r.streakDays?{allowed:!1,reason:"Streak reward already claimed for current streak."}:{allowed:!0,reason:"Streak reward available."}:r.masteryClaims.includes(n)?{allowed:!1,reason:"Mastery reward already claimed."}:(n==="raid_mastery"?e.raid.completed:n==="campaign_mastery"?e.campaign.depth>=4:e.boss.hp<=0)?{allowed:!0,reason:"Mastery reward available."}:{allowed:!1,reason:"Mastery requirement not met."}}function Uz(e,t,n="raid_mastery"){if(!sz(e,t,n).allowed)return e;const i=Yj(e),a=new Date().toISOString().slice(0,10);let s=i,o=0,l={};if(t==="daily"){const f=i.dailyClaimedOn===a?i.streakDays:i.streakDays+1;s={...i,dailyClaimedOn:a,streakDays:f},o=90+Math.min(7,f)*10,l={streakDays:f}}else t==="session"?(s={...i,sessionClaimed:!0},o=140,l={actions:e.pvp.round+e.narrative.history.length+e.campaign.depth}):t==="streak"?(s={...i,streakClaimedFor:i.streakDays},o=170+i.streakDays*5,l={streakDays:i.streakDays}):(s={...i,masteryClaims:[...i.masteryClaims,n]},o=n==="boss_mastery"?260:n==="campaign_mastery"?220:180,l={masteryId:n});const u=Ms({...e,rewards:s},o),c=Math.max(1,u.economy.credits-e.economy.credits),d={id:`reward-${s.history.length+1}-${e.seed%1e3}`,kind:t,amount:c,at:Date.now(),details:l};return Rn({...u,rewards:{...s,history:[d,...s.history].slice(0,60)}},30+Math.max(1,Math.round(c/10)))}function Gz(e,t){const n=og(e),r=ye(t.difficultyFactor,.6,1.6),i=ye(t.rewardMultiplier,.5,2),a=n.difficultyFactor||1,s=n.rewardMultiplier||1,o=t.note.trim()||"Operator tuning update",l={...n.challenge,goal:Math.max(1,Math.round(n.challenge.goal/a*r)),rewardCredits:Math.max(1,Math.round(n.challenge.rewardCredits/s*i))},u={id:`tuning-${n.tuningHistory.length+1}-${e.seed%1e3}`,changedAt:Date.now(),difficultyFactor:r,rewardMultiplier:i,note:o};return{...e,liveops:{...n,challenge:l,difficultyFactor:r,rewardMultiplier:i,tuningHistory:[u,...n.tuningHistory].slice(0,20)}}}function Ms(e,t){if(t<=0)return e;const n=e.economy.reserveTarget||320,r=e.economy.credits;let i=1;if(r<=n){const c=Math.min(.12,(n-r)/n*.12);i=Math.min(1.12,1+c)}else{const c=(r-n)/n;i=Math.max(.45,1-c*.35)}const a=Math.max(1,Math.round(t*i)),s=Math.round(n*1.7),o=r+a,l=o>s?Math.max(1,Math.round((o-s)*.22)):0,u=o-l;return{...e,economy:{...e.economy,credits:u,inflationIndex:Number((u/n).toFixed(3))}}}function oz(e){const t=e.economy.reserveTarget||320;if(e.economy.credits<=t)return{...e,economy:{...e.economy,inflationIndex:Number((e.economy.credits/t).toFixed(3))}};const n=Math.max(6,Math.round((e.economy.credits-t)*.08)),r=Math.max(0,e.economy.credits-n);return{...e,economy:{...e.economy,credits:r,inflationIndex:Number((r/t).toFixed(3))}}}function og(e){var t,n,r,i,a,s;return{season:((t=e.liveops)==null?void 0:t.season)??"Season-2026",week:((n=e.liveops)==null?void 0:n.week)??1,challenge:((r=e.liveops)==null?void 0:r.challenge)??{id:"fallback-liveops",title:"Complete one objective",goal:1,progress:0,rewardCredits:100,completed:!1},difficultyFactor:((i=e.liveops)==null?void 0:i.difficultyFactor)??1,rewardMultiplier:((a=e.liveops)==null?void 0:a.rewardMultiplier)??1,tuningHistory:((s=e.liveops)==null?void 0:s.tuningHistory)??[]}}function Yj(e){return e.rewards??{dailyClaimedOn:null,streakDays:0,sessionClaimed:!1,streakClaimedFor:0,masteryClaims:[],history:[]}}function lg(e){return e.trim().toLowerCase()}function ug(e){return e.safety??{mutedPlayerIds:[],blockedPlayerIds:[],reports:[]}}function cg(e){return e.outcome??{status:"in_progress",reason:"Run in progress.",updatedAt:Date.now()}}function lz(e){return e.sandbox??{enabled:!1}}function Qj(e){return e.progression??{xp:0,level:1,nextLevelXp:200,milestones:[]}}function Rn(e,t){if(t<=0)return e;const n=Qj(e);let r=n.xp+t,i=n.level,a=n.nextLevelXp,s=0;for(;r>=a;)r-=a,i+=1,s+=1,a=i*200;const o=[...n.milestones];return[3,5,10].forEach(l=>{const u=`milestone-level-${l}`;i>=l&&!o.includes(u)&&o.push(u)}),{...e,progression:{xp:r,level:i,nextLevelXp:a,milestones:o},skills:{...e.skills,points:e.skills.points+s}}}function Hz(e,t,n){const r=lg(t),i=n.trim();if(!r||!i)return e;const a=ug(e),s={id:`report-${a.reports.length+1}-${e.seed%1e3}`,targetPlayerId:r,reason:i,createdAt:Date.now()};return{...e,safety:{...a,reports:[s,...a.reports].slice(0,40)}}}function Wz(e,t){const n=lg(t),r=ug(e);return!n||r.mutedPlayerIds.includes(n)?e:{...e,safety:{...r,mutedPlayerIds:[...r.mutedPlayerIds,n]}}}function Kz(e,t){const n=lg(t),r=ug(e);return!n||r.blockedPlayerIds.includes(n)?e:{...e,safety:{...r,blockedPlayerIds:[...r.blockedPlayerIds,n],mutedPlayerIds:r.mutedPlayerIds.includes(n)?r.mutedPlayerIds:[...r.mutedPlayerIds,n]}}}const Pk=220,Nk=120,hy="agentDirector.presence.v1",uz=2e4,cz=5e3,ci="agentDirector.collab.cursors.v1",Jp="agentDirector.collab.annotations.v1",Zp="agentDirector.collab.activity.v1",dz=S.lazy(()=>gs(()=>import("./index-P6WsSEYR.js"),__vite__mapDeps([0,1]))),fz=S.lazy(()=>gs(()=>import("./index-SOiRWcmz.js"),[])),hz=S.lazy(()=>gs(()=>import("./index-D0-MOsul.js"),[])),pz=S.lazy(()=>gs(()=>import("./index-CI4YnKrT.js"),[])),mz=S.lazy(()=>gs(()=>import("./index-DiUsAL6Y.js"),[]));function uo(){return`scenario-${Math.random().toString(36).slice(2,9)}`}function yz(e){return e.filter(t=>t.parentStepId).map(t=>({source:t.parentStepId,target:t.id}))}function vz(e){const t=[...e].sort((n,r)=>n.index-r.index);return t.slice(1).map((n,r)=>({source:t[r].id,target:n.id}))}function gz(e){const t={},n=e.getBoundingClientRect();return e.querySelectorAll(".step-card").forEach(i=>{const a=i.dataset.stepId;if(!a)return;const s=i.getBoundingClientRect();t[a]={left:s.left-n.left,top:s.top-n.top,width:s.width,height:s.height}}),t}function wz(e,t,n){const r=[...yz(e),...vz(e),...H4(e).map(y=>({source:y.source,target:y.target}))],i=z4(e,r,n),a=t.getBoundingClientRect(),s=Math.min(...i.map(y=>y.position.x)),o=Math.min(...i.map(y=>y.position.y)),l=Math.max(...i.map(y=>y.position.x)),u=Math.max(...i.map(y=>y.position.y)),c=l-s+Pk,d=u-o+Nk,f=Math.max(32,(a.width-c)/2),m=Math.max(24,(a.height-d)/2);return i.reduce((y,p)=>(y[p.id]={left:p.position.x-s+f,top:p.position.y-o+m,width:Pk,height:Nk},y),{})}function Ak(e,t,n){const r=t.trim().toLowerCase();return e.filter(i=>{var s,o,l;return n!=="all"&&i.type!==n?!1:r?[i.name,(s=i.preview)==null?void 0:s.title,(o=i.preview)==null?void 0:o.outputPreview,(l=i.preview)==null?void 0:l.inputPreview].filter(Boolean).join(" ").toLowerCase().includes(r):!0})}function bz(e,t,n){var u,c,d,f,m,y,p,x,v,g,b,_,C,T,M,E,j,P,A,D,q,W,V,se,ee,I,F;const r=e.profiles[t]??e.profiles[((u=e.players[0])==null?void 0:u.player_id)??""]??Object.values(e.profiles)[0],i=e.players.reduce((R,$)=>(R[$.player_id]=$.role,R),{}),a=Object.entries(e.narrative.nodes).map(([R,$])=>({id:R,title:$.title,body:$.title,choices:$.choices.map(Q=>({id:Q.id,label:Q.id,nextNodeId:Q.next,tensionDelta:Q.tension,mutator:Q.modifier}))})),s=e.pvp.winner??null,l=e.telemetry.failures>0?"failure":s?"success":"mixed";return{seed:e.seed,raid:{party:e.players.map(R=>R.player_id),roles:i,objectives:e.raid.objectives.map(R=>({id:R.id,label:R.label,progress:R.progress,target:R.target,completed:R.completed})),completed:e.raid.completed},campaign:{depth:e.campaign.depth,lives:e.campaign.lives,currentMission:{id:e.campaign.current_mission.id,title:e.campaign.current_mission.title,difficulty:e.campaign.current_mission.difficulty,hazards:e.campaign.current_mission.hazards,rewardCredits:e.campaign.current_mission.reward_tokens,missionSeed:e.campaign.current_mission.mission_seed??n.campaign.currentMission.missionSeed??e.seed,blueprint:e.campaign.current_mission.blueprint??n.campaign.currentMission.blueprint??`seed=${e.seed};depth=${e.campaign.depth}`},completedMissionIds:e.campaign.completed_missions,mutators:[...e.campaign.modifiers,...e.campaign.unlocked_modifiers]},narrative:{currentNodeId:e.narrative.current_node_id,nodes:a.length>0?a:n.narrative.nodes,history:e.narrative.history.map(R=>({nodeId:R.node_id,choiceId:R.choice_id})),tension:e.narrative.tension},skills:{points:(r==null?void 0:r.skill_points)??n.skills.points,nodes:n.skills.nodes.map(R=>({...R,unlocked:!!(r!=null&&r.unlocked_skills.includes(R.id))})),loadout:{capacity:(r==null?void 0:r.loadout_capacity)??n.skills.loadout.capacity,equipped:(r==null?void 0:r.loadout)??[],slotCaps:n.skills.loadout.slotCaps}},pvp:{round:e.pvp.round,stability:e.pvp.operator_stability,sabotage:e.pvp.sabotage_pressure,fog:e.pvp.fog,winner:s},time:{activeForkId:e.time.active_fork_id,forks:e.time.forks.map(R=>({id:R.id,label:R.label,playheadMs:R.playhead_ms,history:R.history}))},boss:{name:e.boss.name,phase:e.boss.phase,hp:e.boss.hp,maxHp:e.boss.max_hp,enraged:e.boss.enraged,phaseMechanic:e.boss.phase_mechanic??(e.boss.phase===1?"Phase 1: Shield lattice destabilization":e.boss.phase===2?"Phase 2: Mirror clones absorb exploit damage":"Phase 3: Enrage pulse; shield counters become lethal"),vulnerability:e.boss.vulnerability==="strike"||e.boss.vulnerability==="shield"||e.boss.vulnerability==="exploit"?e.boss.vulnerability:e.boss.phase===1?"exploit":e.boss.phase===2?"strike":"shield"},director:{risk:e.director.risk,hint:e.director.hint,recommendedModifier:e.director.hazard_bias,lastOutcome:l},economy:{credits:e.economy.tokens,materials:e.economy.materials,crafted:e.economy.crafted,reserveTarget:((c=e.economy.policy)==null?void 0:c.target_reserve)??n.economy.reserveTarget??320,inflationIndex:e.economy.inflation_index??Number((e.economy.tokens/(((d=e.economy.policy)==null?void 0:d.target_reserve)??n.economy.reserveTarget??320)).toFixed(3))},rewards:{dailyClaimedOn:((f=e.rewards)==null?void 0:f.daily_claimed_date)??((m=n.rewards)==null?void 0:m.dailyClaimedOn)??null,streakDays:((y=e.rewards)==null?void 0:y.streak_days)??((p=n.rewards)==null?void 0:p.streakDays)??0,sessionClaimed:((x=e.rewards)==null?void 0:x.session_claimed)??((v=n.rewards)==null?void 0:v.sessionClaimed)??!1,streakClaimedFor:((g=e.rewards)==null?void 0:g.streak_claimed_for)??((b=n.rewards)==null?void 0:b.streakClaimedFor)??0,masteryClaims:((_=e.rewards)==null?void 0:_.mastery_claims)??((C=n.rewards)==null?void 0:C.masteryClaims)??[],history:((M=(T=e.rewards)==null?void 0:T.history)==null?void 0:M.map(R=>({id:R.id,kind:R.kind==="daily"||R.kind==="session"||R.kind==="streak"||R.kind==="mastery"?R.kind:"daily",amount:R.amount,at:Date.parse(R.at)||Date.now(),details:R.details?Object.fromEntries(Object.entries(R.details).map(([$,Q])=>[$,String(Q)])):{}})))??((E=n.rewards)==null?void 0:E.history)??[]},guild:{name:e.guild.guild_id??"Trace Guild",members:e.players.length,operationsScore:e.guild.operations_score,eventsCompleted:e.guild.events_completed},cinematic:{queue:e.cinematic.events.map(R=>({id:R.id,type:R.type==="critical"||R.type==="success"||R.type==="warning"||R.type==="twist"?R.type:"warning",message:R.message,intensity:R.intensity||1,at:Date.parse(R.at)||Date.now()}))},liveops:{season:e.liveops.season,week:e.liveops.week,challenge:{id:e.liveops.challenge.id,title:e.liveops.challenge.title,goal:e.liveops.challenge.goal,progress:e.liveops.challenge.progress,rewardCredits:e.liveops.challenge.reward,completed:e.liveops.challenge.completed},difficultyFactor:e.liveops.telemetry.difficultyFactor??n.liveops.difficultyFactor??1,rewardMultiplier:e.liveops.telemetry.rewardMultiplier??n.liveops.rewardMultiplier??1,tuningHistory:((j=e.liveops.tuning_history)==null?void 0:j.map(R=>({id:R.id,changedAt:Date.parse(R.changed_at)||Date.now(),difficultyFactor:R.difficultyFactor,rewardMultiplier:R.rewardMultiplier,note:R.note})))??n.liveops.tuningHistory??[]},safety:{mutedPlayerIds:((P=e.safety)==null?void 0:P.muted_player_ids)??n.safety.mutedPlayerIds??[],blockedPlayerIds:((A=e.safety)==null?void 0:A.blocked_player_ids)??n.safety.blockedPlayerIds??[],reports:((q=(D=e.safety)==null?void 0:D.reports)==null?void 0:q.map(R=>({id:R.id,targetPlayerId:R.target_player_id,reason:R.reason,createdAt:Date.parse(R.created_at)||Date.now()})))??n.safety.reports??[]},outcome:e.status==="completed"?{status:e.telemetry.successes>=e.telemetry.failures?"win":"loss",reason:e.telemetry.successes>=e.telemetry.failures?"Session completed with positive outcomes.":"Session completed with unresolved failures.",updatedAt:Date.now()}:e.telemetry.failures>0?{status:"partial",reason:`${e.telemetry.failures} failure signals observed; run still active.`,updatedAt:Date.now()}:n.outcome??{status:"in_progress",reason:"Run in progress.",updatedAt:Date.now()},sandbox:{enabled:((W=e.sandbox)==null?void 0:W.enabled)??((V=n.sandbox)==null?void 0:V.enabled)??!1},progression:{xp:(r==null?void 0:r.xp)??((se=n.progression)==null?void 0:se.xp)??0,level:(r==null?void 0:r.level)??((ee=n.progression)==null?void 0:ee.level)??1,nextLevelXp:((r==null?void 0:r.level)??((I=n.progression)==null?void 0:I.level)??1)*200,milestones:(r==null?void 0:r.milestones)??((F=n.progression)==null?void 0:F.milestones)??[]}}}function xz(){const e=window.sessionStorage.getItem("agentDirector.sessionId");if(e)return e;const t=`session-${Math.random().toString(36).slice(2,10)}`;return window.sessionStorage.setItem("agentDirector.sessionId",t),t}function Rk(){try{const e=window.localStorage.getItem(hy);if(!e)return{};const t=JSON.parse(e),n={};return Object.entries(t).forEach(([r,i])=>{typeof i=="number"&&(n[r]=i)}),n}catch{return{}}}function Ik(e,t=Date.now()){return Object.fromEntries(Object.entries(e).filter(([,n])=>t-n<uz))}function Sz(){var Ng,Ag;const{trace:e,insights:t,loading:n,error:r,reload:i,traces:a,selectedTraceId:s,setSelectedTraceId:o}=Gq(),[l,u]=Ce("agentDirector.mode","cinema"),[c,d]=S.useState(""),f=S.useDeferredValue(c),[m,y]=S.useState("all"),[p,x]=S.useState(""),[v,g]=S.useState(null),[b,_]=S.useState(null),[C,T]=S.useState(null),[M,E]=S.useState([]),[j,P]=S.useState(""),[A,D]=S.useState(null),[q,W]=S.useState(!1),[V,se]=S.useState(null),[ee,I]=Ce("agentDirector.safeExport",!1),[F,R]=Ce("agentDirector.syncPlayback",!0),[$,Q]=S.useState(null),[Pe,le]=S.useState(!1),[ce,z]=S.useState(0),[de,Mt]=Ce("agentDirector.speed",1),[fn,Zt]=Ce("agentDirector.windowed",!1),[wr,Jr]=S.useState(2e4),[B,re]=S.useState(!1),[X,qe]=S.useState(!1),[ie,Fe]=Ce("agentDirector.overlayEnabled",!1),[Ln,Yl]=Ce("agentDirector.onboarded",!1),[,$t]=Ce("agentDirector.tourCompleted",!1),[Ge,me]=Ce("agentDirector.explainMode",!0),[qn,Fn]=Ce("agentDirector.heroDismissed",!1),[Ql,Zr]=Ce("agentDirector.dockOpen",!1),[Ze,js]=Ce("agentDirector.introPersona","builder"),[ei,ta]=Ce("agentDirector.launchPath","rapid_triage"),[br,en]=Ce("agentDirector.themeMode","studio"),[Bt,Xj]=Ce("agentDirector.motionMode","balanced"),[Be,dg]=Ce("agentDirector.timelineLaneStrategy","type"),[fg,ti]=Ce("agentDirector.timelineStudioConfig",ya),[Ps,st]=Ce("agentDirector.missions",{playback:!1,flow:!1,inspect:!1,matrix:!1,replay:!1,annotate:!1,collaborate:!1}),Ns=!1,[As,Rs]=Ce("agentDirector.introDismissed",Ns),[Xl,Ke]=S.useState(!1),[fe,Is]=S.useState(null),[Ds,Jl]=S.useState([]),[Zl,eu]=S.useState(null),[Jj,hg]=S.useState(null),[tu,nu]=S.useState(""),[Zj,ni]=S.useState([{id:uo(),name:"Prompt tighter",strategy:"hybrid",modificationsText:'{"prompt":"Return concise response"}'},{id:uo(),name:"Recorded baseline",strategy:"recorded",modificationsText:"{}"}]),[na,ru]=S.useState(null),[jt,pg]=S.useState(null),[eP,Os]=S.useState(!1),[tP,ra]=S.useState(null),[pe,ia]=Ce("agentDirector.gameplayState.v1",jk("bootstrap")),[ke,mg]=Ce("agentDirector.gameplayTraceId.v1",""),[xr]=Ce("agentDirector.gameplayPlayerId.v1",`player-${Math.random().toString(36).slice(2,8)}`),[Sr,ri]=Ce("agentDirector.gameplaySessionId.v1",""),[De,Vn]=S.useState(null),[nP,Ne]=S.useState(null),[rP,ii]=S.useState(null),[iP,aP]=S.useState(null),[sP,oP]=S.useState(null),[iu,yg]=S.useState(1),[lP,au]=S.useState(null),[uP,su]=S.useState(null),[vg,ou]=S.useState({}),[gg,lu]=S.useState([]),[cP,uu]=S.useState([]),[aa,cu]=S.useState(800),[dP,fP]=S.useState(0),du=S.useRef(null),wg=S.useRef(null),ai=S.useRef(xz()),bg=S.useRef(0),xg=S.useRef(0),fu=S.useRef(!1),Sg=S.useRef({}),$n=S.useMemo(()=>{if(!e)return[];const w=performance.now(),k=Ak(e.steps,f,m);return xg.current=performance.now()-w,k},[e,f,m]),hu=S.useMemo(()=>$n.slice(0,Math.min($n.length,aa)),[aa,$n]),_g=S.useMemo(()=>{if(!v)return hu;const w=new Set(v.matchedStepIds);return hu.filter(k=>w.has(k.id))},[hu,v]),hP=S.useMemo(()=>$?Ak($.steps,f,m).slice(0,Math.min($.steps.length,aa)):[],[$,f,m,aa]),kg=S.useMemo(()=>e?W4(e.startedAt,e.endedAt,e.steps):[],[e]),pP=S.useMemo(()=>!e||!$?null:EM(e,$),[e,$]),Cg=S.useMemo(()=>e?e.steps.find(w=>w.id===V)??null:null,[e,V]),sa=S.useMemo(()=>e?WR(e.steps,Be):[],[e,Be]),si=S.useMemo(()=>{const w=fg[Be]??ya[Be];return z0(sa,w.order,w.hidden)},[sa,Be,fg]),mP=S.useMemo(()=>si.order.filter(w=>!si.hidden.includes(w)),[si.hidden,si.order]),Ls=S.useMemo(()=>{const w=ai.current;return Object.values(vg).filter(k=>k.sessionId!==w).filter(k=>k.traceId===((e==null?void 0:e.id)??"none")).sort((k,N)=>N.updatedAt-k.updatedAt)},[vg,e==null?void 0:e.id]),yP=S.useMemo(()=>Ls.map(w=>w.playheadMs),[Ls]),vP=S.useMemo(()=>gg.filter(w=>w.traceId===(e==null?void 0:e.id)),[gg,e==null?void 0:e.id]),Eg=S.useMemo(()=>{const w=Object.keys(Ps).length,k=Object.values(Ps).filter(Boolean).length;return{done:k,total:w,pct:w>0?Math.round(k/w*100):0}},[Ps]),pu=S.useMemo(()=>{var K;if(!e)return 100;const w=100,k=Math.min(60,((t==null?void 0:t.errors)??0)*16),N=Math.min(24,((t==null?void 0:t.retries)??0)*6),O=e.metadata.wallTimeMs>6e4?12:e.metadata.wallTimeMs>3e4?6:0,G=(K=t==null?void 0:t.timing)!=null&&K.degraded?8:0;return Math.max(0,Math.min(100,Math.round(w-k-N-O-G)))},[t==null?void 0:t.errors,t==null?void 0:t.retries,(Ng=t==null?void 0:t.timing)==null?void 0:Ng.degraded,e]),gP=S.useMemo(()=>l==="flow"?"F / C / Space":l==="compare"?"C / Space /  ":l==="matrix"?"G / C / Cmd+K":l==="gameplay"?"G / S / Cmd+K":"C / F / Space",[l]);S.useEffect(()=>{e&&e.id!==ke&&(ia(jk(e.id)),mg(e.id))},[ke,ia,mg,e]),S.useEffect(()=>{let w=!1;if(!Sr){Vn(null);return}return gb().then(k=>{w||(Vn(k),k||Ne("Gameplay session not found."))}),()=>{w=!0}},[Sr]),S.useEffect(()=>{if(!Sr)return;const w=Uq();return()=>w()},[Sr]),S.useEffect(()=>{De&&ia(w=>bz(De,xr,w))},[xr,De,ia]),S.useEffect(()=>{let w=!1;if(!(De==null?void 0:De.guild.guild_id)){ii(null);return}return qq().then(N=>{w||ii(N)}),()=>{w=!0}},[De==null?void 0:De.guild.guild_id]),S.useEffect(()=>{let w=!1;const k=async()=>{const[O,G]=await Promise.all([Bq(),zq()]);w||(O&&aP(O),G&&oP(G))};k();const N=window.setInterval(()=>{k()},3e4);return()=>{w=!0,window.clearInterval(N)}},[]),S.useEffect(()=>{g(null),_(null)},[e==null?void 0:e.id]),S.useEffect(()=>{fP(Math.round(xg.current))},[$n]),S.useEffect(()=>{if(!e)return;const w=$n.length;if(w<=1200){cu(w);return}cu(800);const k=window.setInterval(()=>{cu(N=>N>=w?(window.clearInterval(k),w):Math.min(w,N+1e3))},70);return()=>window.clearInterval(k)},[$n.length,e]),S.useEffect(()=>{let w=!1;if(!(e!=null&&e.id)){T(null);return}return Eq(e.id).then(k=>{w||T(k)}),()=>{w=!0}},[e==null?void 0:e.id]),S.useEffect(()=>{let w=!1;return Tq().then(k=>{w||(E(k),!j&&k.length>0&&P(k[0].id))}),()=>{w=!0}},[j]),S.useEffect(()=>{wg.current=$},[$]),S.useEffect(()=>(document.body.dataset.theme=br,()=>{delete document.body.dataset.theme}),[br]),S.useEffect(()=>(document.body.dataset.motion=Bt,()=>{delete document.body.dataset.motion}),[Bt]),S.useEffect(()=>{const w=ai.current,k=(Z=!1)=>{const Ae=Date.now(),mn=Ik(Rk(),Ae);Z?delete mn[w]:mn[w]=Ae,window.localStorage.setItem(hy,JSON.stringify(mn)),yg(Math.max(1,Object.keys(mn).length))},N=()=>{const Z=Ik(Rk(),Date.now());yg(Math.max(1,Object.keys(Z).length))};k();const O=window.setInterval(()=>k(),cz),G=Z=>{Z.key===hy&&N()},K=()=>{document.visibilityState==="visible"&&k()},ne=()=>k(!0);return window.addEventListener("storage",G),document.addEventListener("visibilitychange",K),window.addEventListener("beforeunload",ne),()=>{window.clearInterval(O),k(!0),window.removeEventListener("storage",G),document.removeEventListener("visibilitychange",K),window.removeEventListener("beforeunload",ne)}},[]),S.useEffect(()=>{l==="compare"&&Zr(!1)},[l,Zr]),S.useEffect(()=>{sa.length!==0&&ti(w=>{const k=w[Be]??ya[Be],N=z0(sa,k.order,k.hidden);return N.order.join("|")===k.order.join("|")&&N.hidden.join("|")===k.hidden.join("|")?w:{...w,[Be]:N}})},[sa,Be,ti]),S.useEffect(()=>{ou(Gn(window.localStorage.getItem(ci),{})),lu(Gn(window.localStorage.getItem(Jp),[])),uu(Gn(window.localStorage.getItem(Zp),[]))},[]),S.useEffect(()=>{const w=Date.now();if(w-bg.current<120&&Pe)return;bg.current=w;const k=ai.current,N={sessionId:k,traceId:(e==null?void 0:e.id)??"none",mode:l,playheadMs:Math.round(ce),selectedStepId:V,updatedAt:w},G={...Gn(window.localStorage.getItem(ci),{}),[k]:N};window.localStorage.setItem(ci,JSON.stringify(G)),ou(G)},[Pe,l,ce,V,e==null?void 0:e.id]),S.useEffect(()=>{const w=ai.current;return()=>{const k=Gn(window.localStorage.getItem(ci),{});if(!k[w])return;const N={...k};delete N[w],window.localStorage.setItem(ci,JSON.stringify(N))}},[]),S.useEffect(()=>{const w=k=>{if(k.key===ci&&ou(Gn(k.newValue,{})),k.key===Jp){const N=Gn(k.newValue,[]);lu(O=>Ek(O,N))}k.key===Zp&&uu(Tk(Gn(k.newValue,[])))};return window.addEventListener("storage",w),()=>window.removeEventListener("storage",w)},[]);const J=S.useCallback(w=>{const k={id:`activity-${Math.random().toString(36).slice(2,9)}`,sessionId:ai.current,message:w,timestamp:Date.now()};uu(N=>{const O=Tk([k,...N]);return window.localStorage.setItem(Zp,JSON.stringify(O)),O})},[]),ot=S.useCallback((w,k,N)=>{Sg.current[w]||(Sg.current[w]=!0,G4(k,N))},[]),hn=S.useCallback(async w=>{if(!e)return;const k=await jq(e.id,w,"hybrid",{note:"UI replay"},e);k&&(Q(k),Fe(!0),u("flow"),st(N=>N.replay?N:{...N,replay:!0}),J(`Created replay from ${w}`))},[J,st,e,Q,u,Fe]),wP=S.useCallback(async()=>{if(!e)return;if(!p.trim()){g(null),_(null);return}const w=await Cq(e.id,p.trim());if(!w){_("TraceQL query failed"),g(null);return}g(w),_(null);const k=w.matchedStepIds[0];k&&(se(k),l!=="cinema"&&u("cinema"))},[l,u,e,p]),bP=S.useCallback(async()=>{if(!e||!j)return;W(!0);const w=await Mq(j,e.id);W(!1),w&&D(w.result)},[j,e]),Pt=S.useCallback(()=>{if(!e)return;const w=[...e.steps].sort((k,N)=>(N.durationMs??0)-(k.durationMs??0))[0];w&&(se(w.id),u("cinema"))},[e,u]),Tg=S.useCallback(()=>{if(!e||e.steps.length===0)return null;const w=[...e.steps].sort((k,N)=>(N.durationMs??0)-(k.durationMs??0))[0];return(w==null?void 0:w.id)??null},[e]),_r=S.useCallback(()=>{if(!e)return;const w=e.steps.find(k=>k.status==="failed");w&&(se(w.id),u("cinema"))},[e,u]),mu=S.useCallback(async()=>{if(!e)return;const w=new URL(window.location.href);w.searchParams.set("trace",s??e.id),w.searchParams.set("mode",l),V?w.searchParams.set("step",V):w.searchParams.delete("step");try{await navigator.clipboard.writeText(w.toString()),au("Live link copied")}catch{window.prompt("Copy live session link",w.toString()),au("Live link ready")}window.setTimeout(()=>au(null),1800)},[l,V,s,e]),xP=S.useCallback(w=>{dg(w),J(`Switched lane strategy to ${w}`)},[J,dg]),SP=S.useCallback(w=>{ti(k=>{const N=k[Be]??ya[Be],O=N.hidden.includes(w)?N.hidden.filter(G=>G!==w):[...N.hidden,w];return{...k,[Be]:{...N,hidden:O}}}),J(`Toggled lane visibility for ${w}`)},[J,Be,ti]),_P=S.useCallback(async w=>{if(!e)return;const k=await Iq({traceId:e.id,name:w.trim()||"Night Ops"});if(!k){Ne("Failed to create gameplay session.");return}Vn(k),ri(k.id),Ne(null),J(`Created gameplay session ${k.id}`)},[J,xr,ri,e]),kP=S.useCallback(async(w,k,N)=>{if(!w.trim()){Ne("Session id is required.");return}const O=await Dq({sessionId:w.trim(),playerId:k.trim()});if(!O){Ne("Failed to join gameplay session.");return}Vn(O),ri(O.id),Ne(null),J(`Joined gameplay session ${O.id} as ${k}`)},[J,ri]),CP=S.useCallback(async()=>{if(!Sr)return;if(!await Oq()){Ne("Failed to leave gameplay session.");return}Vn(null),ri(""),Ne(null),J(`Left gameplay session ${Sr}`)},[J,xr,Sr,ri]),EP=S.useCallback(async(w,k)=>{if(!(De!=null&&De.id))return;const N=await wb({sessionId:De.id,expectedVersion:De.version});if(N.session){Vn(N.session),Ne(null),J(`Gameplay action: ${w}`);return}if(N.conflict){const O=await gb(De.id);O&&Vn(O),Ne("Session changed by another player. Synced latest state.");return}Ne(N.error??"Gameplay action failed.")},[J,xr,De]),TP=S.useCallback(async(w,k)=>{if(!w.trim()||!k.trim()){Ne("Guild id and name are required.");return}const N=await Lq({guildId:w.trim(),name:k.trim()});if(!N){Ne("Failed to create guild.");return}if(ii(N),De){const O=await wb({sessionId:De.id,payload:{guild_id:N.id},expectedVersion:De.version});O.session&&Vn(O.session)}Ne(null),J(`Created guild ${N.id}`)},[J,xr,De]),MP=S.useCallback(async(w,k)=>{if(!w.trim()||!k.trim()){Ne("Guild id and player id are required.");return}const N=await Fq(w.trim(),k.trim());if(!N){Ne("Failed to join guild.");return}ii(N),Ne(null),J(`Joined guild ${N.id} as ${k}`)},[J]),jP=S.useCallback(async(w,k,N)=>{if(!w.trim()||!k.trim()||!N.trim()){Ne("Guild id, title, and schedule are required.");return}const O=await Vq({guildId:w.trim(),title:k.trim(),scheduledAt:N.trim()});if(!O){Ne("Failed to schedule guild event.");return}ii(O.guild),Ne(null),J(`Scheduled guild event ${O.event.id}`)},[J]),PP=S.useCallback(async(w,k,N)=>{const O=await $q();if(!O){Ne("Failed to complete guild event.");return}ii(O),Ne(null),J(`Completed guild event ${k}`)},[J]),NP=S.useCallback((w,k)=>{ti(N=>{const O=N[Be]??ya[Be],G=[...O.order],K=G.indexOf(w);if(K===-1)return N;const ne=k==="up"?K-1:K+1;if(ne<0||ne>=G.length)return N;const[Z]=G.splice(K,1);return G.splice(ne,0,Z),{...N,[Be]:{...O,order:G}}}),J(`Moved lane group ${w} ${k}`)},[J,Be,ti]),AP=S.useCallback(()=>{st({playback:!1,flow:!1,inspect:!1,matrix:!1,replay:!1,annotate:!1,collaborate:!1}),J("Reset onboarding missions")},[J,st]),RP=S.useCallback((w,k)=>{if(!e||!w.trim())return;const N=Date.now(),O={id:`annotation-${Math.random().toString(36).slice(2,9)}`,traceId:e.id,stepId:k,body:w.trim(),authorSessionId:ai.current,createdAt:N,updatedAt:N};lu(G=>{const K=Ek(G,[O]);return window.localStorage.setItem(Jp,JSON.stringify(K)),K}),st(G=>G.annotate?G:{...G,annotate:!0}),J(k?`Added annotation on step ${k}`:"Added trace annotation")},[J,st,e]),IP=S.useCallback((w,k)=>{ni(N=>N.map(O=>O.id===w?{...O,...k}:O))},[]),DP=S.useCallback(w=>{ni(w)},[]),OP=S.useCallback(()=>{ni(w=>[...w,{id:uo(),name:`Scenario ${w.length+1}`,strategy:"hybrid",modificationsText:"{}"}])},[]),LP=S.useCallback(w=>{ni(k=>k.length<=1?k:k.filter(N=>N.id!==w))},[]),qP=S.useCallback(w=>{ni(k=>{const N=k.findIndex(ne=>ne.id===w);if(N===-1)return k;const O=k[N],G={...O,id:uo(),name:`${O.name} copy`},K=[...k];return K.splice(N+1,0,G),K})},[]),FP=S.useCallback((w,k)=>{ni(N=>{const O=N.findIndex(Z=>Z.id===w);if(O===-1)return N;const G=k==="up"?O-1:O+1;if(G<0||G>=N.length)return N;const K=[...N],[ne]=K.splice(O,1);return K.splice(G,0,ne),K})},[]),VP=S.useCallback(async w=>{var N;if(!e)return;const k=tu||V||((N=e.steps[0])==null?void 0:N.id);if(!k){ra("Select an anchor step before running the matrix.");return}try{Os(!0),ra(null);const O=await Pq({traceId:e.id,stepId:k,scenarios:w});if(!O)throw new Error("Failed to create replay job.");ru(O);let G=O;for(let ne=0;ne<30&&!(G.status!=="queued"&&G.status!=="running");ne+=1){const Z=J4(ne);await new Promise(mn=>window.setTimeout(mn,Z));const Ae=await Nq(O.id);if(!Ae)break;G=Ae,ru(Ae)}const K=await vb(O.id);if(!K)throw new Error("Replay job finished but matrix summary is unavailable.");pg(K),u("matrix"),J(`Ran matrix with ${w.length} scenario(s) from ${k}`)}catch(O){ra(O instanceof Error?O.message:"Failed to run replay matrix.")}finally{Os(!1)}},[J,tu,V,e,u]),$P=S.useCallback(async()=>{if(na){Os(!0);try{const w=await Aq(na.id);if(!w){ra("Failed to cancel replay job.");return}ru(w);const k=await vb(w.id);k&&pg(k),J(`Canceled matrix job ${na.id}`)}finally{Os(!1)}}},[J,na]),BP=S.useCallback(async w=>{const k=await TM();if(!(k!=null&&k.trace)){ra("Could not load replay trace for compare view.");return}Q(k.trace),Fe(!0),u("compare"),J(`Opened matrix compare trace ${w}`)},[J,u,Fe]),ve=S.useCallback(w=>{if(!(w===l||!e)){if((w==="flow"||w==="matrix"||w==="gameplay")&&le(!1),w==="flow"&&l==="cinema"&&du.current){const k=du.current,N=gz(k),O=wz(e.steps,k,e.id);hg({steps:e.steps,fromRects:N,toRects:O}),J("Morphed cinema to flow");return}u(w),J(`Switched mode to ${w}`)}},[J,l,e,le,u]),oa=S.useCallback(async w=>{if(ta(w),w==="rapid_triage"){me(!0),ve("cinema"),_r(),e!=null&&e.steps.some(k=>k.status==="failed")||Pt(),J("Started rapid triage launch path");return}if(w==="deep_diagnosis"){me(!0),ve("flow"),Ke(!0),J("Started deep diagnosis launch path");return}R(!0),ve("matrix"),await mu(),J("Started team sync launch path")},[J,ve,Pt,_r,me,ta,R,mu,e]),yu=S.useCallback(()=>{l==="flow"&&ve("cinema"),le(w=>!w)},[l,ve]),Bn=S.useCallback(()=>{Is(null),Jl([]),eu(null),le(!1)},[le]),Mg=S.useCallback(w=>[{id:"setup",label:"Opening the reel",duration:1100,action:()=>{me(!0),le(!1),z(0),se(null),Fe(!1),Mt(1),e&&e.steps.length<500&&Zt(!1),ve("cinema")}},{id:"pace",label:"Pacing the timeline",duration:2200,action:()=>{ve("cinema"),le(!0),Mt(1.1)}},{id:"bottleneck",label:"Freeze on the bottleneck",duration:1600,action:()=>{le(!1),Pt()}},{id:"inspect",label:"Inspect the moment",duration:1600,action:()=>{w&&se(w)}},{id:"flow",label:"Morph into flow",duration:2100,action:()=>{ve("flow")}},{id:"replay",label:"Directors Cut replay",duration:2200,action:async()=>{if(!e)return;!wg.current&&w&&await hn(w),Fe(!0),u("compare")}},{id:"compare",label:"Compare the cut",duration:2e3,action:()=>{le(!0),Mt(1)}},{id:"finale",label:"Final frame",duration:1100,action:()=>{le(!1)}}],[ve,hn,Pt,me,le,u,Fe,z,se,Mt,Zt,e]),oi=S.useCallback(()=>{var k;if(!e)return;const w=V??Tg()??((k=e.steps[0])==null?void 0:k.id)??null;Jl(Mg(w)),Is({active:!0,step:0}),eu(e.id),Ke(!1),re(!1),qe(!1)},[Mg,Tg,V,e,qe,re,Jl,Is,eu,Ke]),li=S.useCallback(()=>{if(fe!=null&&fe.active){Bn();return}oi()},[oi,Bn,fe==null?void 0:fe.active]),zP=S.useMemo(()=>{const k=[{id:"header",title:"Mission control",body:`Confirm run status and metadata. ${{builder:"Focus on payload flow, tool-call sequencing, and replay-ready steps.",executive:"Focus on bottlenecks, risk signals, and run-level outcome changes.",operator:"Focus on failure patterns, retries, and runtime reliability posture."}[Ze]}`,target:'[data-tour="header"]',placement:"bottom"}];return qn||k.push({id:"hero",title:"Director briefing",body:"Choose Tour, Story mode, or Explain to ramp up quickly.",target:'[data-tour="hero"]',placement:"bottom"}),k.push({id:"insights",title:"Fast diagnosis",body:Ze==="executive"?"Jump straight to bottlenecks and high-cost segments for fast executive readouts.":Ze==="operator"?"Jump to failures and retries first, then inspect impacted steps.":"Jump straight to bottlenecks, errors, and high-cost steps with one click.",target:'[data-tour="insights"]',placement:"bottom"},{id:"journey",title:"Director journey",body:"A narrative path that teaches how to watch, inspect, and direct a better run.",target:'[data-tour="journey"]',placement:"bottom"},{id:"toolbar",title:"Filters + modes",body:"Search, filter, and switch between Cinema, Flow, and Compare as the story evolves.",target:'[data-tour="toolbar"]',placement:"bottom"},{id:"quick-actions",title:"Quick actions",body:"Launch Story Mode, open the command palette, or jump to bottlenecks instantly.",target:'[data-tour="quick-actions"]',placement:"left"},{id:"stage",title:"Cinema stage",body:"The timeline shows every step as a scene. Scrub to see pacing and concurrency.",target:'[data-tour="stage"]',placement:"top"},{id:"inspector",title:"Inspector",body:Ze==="executive"?"Open key moments to validate outcome impact and communication-ready summaries.":"Open any step to read payloads, apply redaction, and replay from that moment.",target:'[data-tour="inspector"]',placement:"left"},{id:"compare",title:"Compare runs",body:$?"Compare is live. Review deltas in cost, steps, and wall time side by side.":"Replay from a step to unlock compare mode and validate improvements.",target:'[data-tour="compare"]',placement:"top"}),k},[$,qn,Ze]),UP=S.useCallback(()=>{hg(null),u("flow")},[u]),tn=S.useMemo(()=>{var O,G,K,ne;if(!e)return[];const w=[],k=[...e.steps].sort((Z,Ae)=>(Ae.durationMs??0)-(Z.durationMs??0))[0],N=e.steps.find(Z=>Z.status==="failed");if(N&&V!==N.id&&w.push({id:"jump-error",title:"Investigate first failure",body:`${N.name} failed and should be inspected before optimization work.`,actionLabel:"Open failed step",tone:"warning",action:_r}),k&&V!==k.id&&w.push({id:"jump-bottleneck",title:"Tackle latency bottleneck",body:`${k.name} is the slowest scene in this run and the best optimization target.`,actionLabel:"Open bottleneck",tone:"priority",action:Pt}),(O=C==null?void 0:C.hypotheses)!=null&&O[0]){const Z=C.hypotheses[0];w.push({id:"investigate-hypothesis",title:Z.title,body:Z.summary,actionLabel:"Inspect evidence",tone:"info",action:()=>{const Ae=Z.evidenceStepIds[0];Ae&&(se(Ae),l!=="cinema"&&u("cinema"))}})}if(l!=="matrix"&&w.push({id:"matrix-experiment",title:"Run scenario matrix",body:"Compare prompt and strategy alternatives from one anchor step to rank causal impact.",actionLabel:"Open matrix",tone:"info",action:()=>{var Z;nu(V??((Z=e.steps[0])==null?void 0:Z.id)??""),u("matrix")}}),!$&&(V||(G=e.steps[0])!=null&&G.id)){const Z=V??((K=e.steps[0])==null?void 0:K.id)??null;Z&&w.push({id:"run-replay",title:"Create director replay",body:"Branch a replay trace and validate whether your change improves the run.",actionLabel:"Replay from step",tone:"info",action:()=>{hn(Z)}})}if((ne=jt==null?void 0:jt.causalRanking)!=null&&ne.length){const Z=jt.causalRanking[0];w.push({id:"causal-factor",title:`Top causal factor: ${Z.factor}`,body:`Confidence ${(Z.confidence*100).toFixed(0)}% across ${Z.evidence.samples} sample(s).`,actionLabel:"View matrix",tone:"priority",action:()=>u("matrix")})}return w.slice(0,4)},[$,hn,C,Pt,_r,l,jt,V,e,u]),GP=S.useMemo(()=>tn.map((w,k)=>{const N=w.tone==="warning"?"high":w.tone==="priority"?"medium":"low";return{id:`priority-${w.id}`,title:w.title,detail:w.body,severity:N,actionLabel:w.actionLabel,onAction:w.action,done:k===0?w.id==="jump-error"&&!!V||w.id==="jump-bottleneck"&&!!V:!1}}),[tn,V]),kr=S.useMemo(()=>{var K,ne;if(!e)return"No trace loaded.";const w=[...e.steps].sort((Z,Ae)=>(Ae.durationMs??0)-(Z.durationMs??0))[0],k=e.steps.filter(Z=>Z.status==="failed").length,N=(K=C==null?void 0:C.hypotheses)==null?void 0:K[0],O=(ne=jt==null?void 0:jt.causalRanking)==null?void 0:ne[0];return[`Run ${e.id} completed with ${e.steps.length} steps across ${e.metadata.wallTimeMs}ms.`,w?`Primary latency driver: ${w.name} (${w.durationMs??0}ms).`:null,k>0?`Observed ${k} failed step(s), indicating reliability risk.`:"No failed steps observed.",N?`Top investigation hypothesis: ${N.title} (${N.severity}).`:null,O?`Highest ranked causal factor from matrix: ${O.factor} (${(O.confidence*100).toFixed(0)}% confidence).`:null,"Recommended plan: inspect bottleneck evidence, validate with replay matrix, and lock in mitigations."].filter(Boolean).join(" ")},[C,jt==null?void 0:jt.causalRanking,e]),HP=S.useCallback(w=>{var N,O;const k=w.toLowerCase();if(!e)return"No trace is loaded yet.";if(k.includes("bottleneck")||k.includes("slow")){const G=[...e.steps].sort((K,ne)=>(ne.durationMs??0)-(K.durationMs??0))[0];return G?`The primary bottleneck is ${G.name} at ${G.durationMs??0}ms. Prioritize this step for optimization and replay validation.`:"No bottleneck could be determined from current trace data."}if(k.includes("risk")||k.includes("failure")||k.includes("error")){const G=e.steps.filter(K=>K.status==="failed");return G.length?`Risk is concentrated in ${G.length} failed step(s), starting at ${((N=G[0])==null?void 0:N.name)??"unknown"}.`:"Failure risk appears low for this run; no failed steps were observed."}return k.includes("cost")?`Recorded run cost is ${(e.metadata.totalCostUsd??0).toFixed(4)} USD. Use matrix scenarios to evaluate cheaper prompt/strategy options.`:k.includes("next")||k.includes("action")?tn.length?`Next action: ${((O=tn[0])==null?void 0:O.title)??"Open matrix"}.`:"Next action: open Cinema mode, inspect bottleneck, then run the matrix.":kr},[kr,tn,e]),WP=S.useCallback(()=>{if(!e)return;const w=`# Director Narrative

${kr}

## Recommended Actions
${tn.map(k=>`- ${k.title}: ${k.body}`).join(`
`)}`;iI(`agent-director-narrative-${e.id}.md`,w,"text/markdown")},[kr,tn,e]),qs=S.useCallback(async()=>{if(!e)return;const w=tn[0],k=e.steps.filter(G=>G.status==="failed").length,O=[`Session handoff (${new Date().toISOString()})`,`Trace: ${e.id}`,`Mode: ${l}`,`Selected step: ${V??"none"}`,`Run health: ${pu}/100`,`Failures: ${k}`,`Wall time: ${e.metadata.wallTimeMs}ms`,`Top recommendation: ${w?`${w.title} -> ${w.actionLabel}`:"None"}`,`Narrative: ${kr}`].join(`
`);try{await navigator.clipboard.writeText(O),su("Handoff digest copied")}catch{window.prompt("Copy handoff digest",O),su("Handoff digest ready")}window.setTimeout(()=>su(null),2200)},[kr,tn,l,pu,V,e]);S.useEffect(()=>{var N;if(!e)return;kq(),z(0),le(!1);const w=Math.min(Math.max((e.metadata.wallTimeMs||1)*.2,5e3),6e4);Jr(w),e.steps.length>500&&Zt(!0),$||Fe(!1),l==="compare"&&!$&&u("cinema");const k=V&&e.steps.some(O=>O.id===V)?V:((N=e.steps[0])==null?void 0:N.id)??"";nu(O=>O&&e.steps.some(G=>G.id===O)?O:k)},[e,$,l,V,u,Zt,Fe]),S.useEffect(()=>(document.body.classList.toggle("explain-mode",Ge),()=>{document.body.classList.remove("explain-mode")}),[Ge]),S.useEffect(()=>(document.body.classList.toggle("story-mode",!!(fe!=null&&fe.active)),()=>{document.body.classList.remove("story-mode")}),[fe==null?void 0:fe.active]),S.useEffect(()=>{if(!(fe!=null&&fe.active))return;const w=Ds[fe.step];if(!w){Bn();return}Promise.resolve(w.action());const k=window.setTimeout(()=>{Is(N=>N&&N.active?{...N,step:N.step+1}:N)},w.duration);return()=>window.clearTimeout(k)},[Ds,Bn,fe]),S.useEffect(()=>{fe!=null&&fe.active&&(!e||!Zl||e.id!==Zl&&Bn())},[fe==null?void 0:fe.active,e,Zl,Bn]),S.useEffect(()=>{As||Ns||ot(`tutorial_start:${(e==null?void 0:e.id)||ke||pe.seed}`,"funnel.tutorial_start",{traceId:(e==null?void 0:e.id)||ke||"unknown",persona:Ze,launchPath:ei})},[ot,pe.seed,ke,As,Ze,ei,Ns,e==null?void 0:e.id]),S.useEffect(()=>{ce>0&&st(w=>w.playback?w:{...w,playback:!0})},[ce,st]),S.useEffect(()=>{l==="flow"&&st(w=>w.flow?w:{...w,flow:!0}),l==="matrix"&&st(w=>w.matrix?w:{...w,matrix:!0})},[l,st]),S.useEffect(()=>{V&&st(w=>w.inspect?w:{...w,inspect:!0})},[V,st]),S.useEffect(()=>{iu>1&&st(w=>w.collaborate?w:{...w,collaborate:!0})},[iu,st]),S.useEffect(()=>{ot(`session_start:${ke||pe.seed}`,"funnel.session_start",{traceId:ke||(e==null?void 0:e.id)||"unknown",seed:pe.seed})},[ot,pe.seed,ke,e==null?void 0:e.id]),S.useEffect(()=>{pe.raid.objectives.some(k=>k.progress>0)&&ot(`objective_progress:${ke||pe.seed}`,"funnel.first_objective_progress",{traceId:ke||(e==null?void 0:e.id)||"unknown"})},[ot,pe.raid.objectives,pe.seed,ke,e==null?void 0:e.id]),S.useEffect(()=>{pe.outcome.status!=="in_progress"&&(ot(`first_outcome:${ke||pe.seed}`,"funnel.first_mission_outcome",{status:pe.outcome.status,reason:pe.outcome.reason}),(pe.outcome.status==="win"||pe.outcome.status==="loss")&&ot(`run_outcome:${ke||pe.seed}`,"funnel.run_outcome",{status:pe.outcome.status,reason:pe.outcome.reason}))},[ot,pe.outcome.reason,pe.outcome.status,pe.seed,ke]),S.useEffect(()=>{if(!F||Pe||fu.current)return;const w=Ls[0];if(!w||w.traceId!==(e==null?void 0:e.id))return;const k=Math.abs(w.playheadMs-ce),N=w.mode!==l,O=(w.selectedStepId??null)!==(V??null);k<600&&!N&&!O||(fu.current=!0,z(w.playheadMs),(w.mode==="cinema"||w.mode==="flow"||w.mode==="compare"||w.mode==="matrix"||w.mode==="gameplay")&&u(w.mode),se(w.selectedStepId??null),window.setTimeout(()=>{fu.current=!1},180))},[Pe,l,ce,Ls,V,u,F,e==null?void 0:e.id]),S.useEffect(()=>{if(!e)return;const k=Date.parse(e.startedAt)+ce;let N=0,O=Number.POSITIVE_INFINITY;e.steps.forEach((K,ne)=>{const Z=Date.parse(K.startedAt),Ae=Date.parse(K.endedAt??K.startedAt);if(k>=Z&&k<=Ae){N=ne,O=0;return}const mn=Math.min(Math.abs(k-Z),Math.abs(k-Ae));mn<O&&(O=mn,N=ne)}),[N,N-1,N+1].filter(K=>K>=0&&K<e.steps.length).forEach(K=>{const ne=e.steps[K];ne&&Sq(e.id,ne.id,ee)})},[e,ce,ee]),S.useEffect(()=>{if(!e||!Pe||l!=="cinema"&&l!=="compare")return;const w=($==null?void 0:$.metadata.wallTimeMs)??0,k=l==="compare"?Math.max(e.metadata.wallTimeMs||1,w||1):e.metadata.wallTimeMs||1;let N=0,O=performance.now();const G=K=>{const ne=(K-O)*de;O=K,z(Z=>{const Ae=Z+ne;return Ae>=k?(le(!1),k):Ae}),N=requestAnimationFrame(G)};return N=requestAnimationFrame(G),()=>cancelAnimationFrame(N)},[e,$,Pe,de,l]),S.useEffect(()=>{const w=k=>{var K;const N=k.target,O=(K=N==null?void 0:N.tagName)==null?void 0:K.toLowerCase();if(!(O==="input"||O==="textarea"||O==="select"||N!=null&&N.isContentEditable)){if((k.metaKey||k.ctrlKey)&&k.key.toLowerCase()==="k"){k.preventDefault(),qe(ne=>!ne);return}if(k.key==="?"||k.key==="/"&&k.shiftKey){k.preventDefault(),re(!0);return}if(k.key.toLowerCase()==="s"){k.preventDefault(),li();return}if(k.key.toLowerCase()==="e"){k.preventDefault(),me(ne=>!ne);return}if(k.key.toLowerCase()==="t"){k.preventDefault(),Ke(!0);return}if(k.key==="Escape"){if(Xl){Ke(!1),$t(!0);return}re(!1),qe(!1),se(null);return}if(k.key===" "){k.preventDefault(),(l==="cinema"||l==="compare")&&le(ne=>!ne);return}if(k.key.toLowerCase()==="f"){k.preventDefault(),l==="flow"?u("cinema"):l==="cinema"&&ve("flow");return}if(k.key.toLowerCase()==="c"){k.preventDefault(),l!=="cinema"&&u("cinema");return}if(k.key.toLowerCase()==="g"){k.preventDefault(),ve("gameplay");return}if(k.key.toLowerCase()==="i"){k.preventDefault(),V?se(null):e!=null&&e.steps.length&&se(e.steps[0].id);return}if(k.key==="ArrowLeft"||k.key==="ArrowRight"){if(k.preventDefault(),!e)return;const ne=e.metadata.wallTimeMs||1;if(k.shiftKey){z(k.key==="ArrowLeft"?0:ne),le(!1),u("cinema");return}const Z=k.key==="ArrowRight"?1:-1,Ae=K4(kg,ce,Z);Ae!=null&&(z(Ae),le(!1),u("cinema"))}}};return window.addEventListener("keydown",w),()=>window.removeEventListener("keydown",w)},[l,V,e,ce,kg,ve,u,me,qe,Ke,$t,Xl,li]);const jg=S.useMemo(()=>{if(!e||!fn||c)return null;const w=e.metadata.wallTimeMs||1,k=Math.min(Math.max(wr,5e3),w);let N=Math.max(0,ce-k/2);const O=Math.min(w,N+k);return O-N<k&&(N=Math.max(0,O-k)),{startMs:N,endMs:O}},[e,fn,ce,c,wr]),pn=!!(fe!=null&&fe.active),Pg=(fe==null?void 0:fe.step)??0,KP=((Ag=Ds[Pg])==null?void 0:Ag.label)??"Wrapping up",YP=Ds.length,QP=c!==f,XP=`${Math.min($n.length,aa)}/${$n.length}`,JP=S.useMemo(()=>[{id:"macro-rapid-triage",label:"Run rapid triage launch path",description:"Jump to the highest-risk step and start mitigation.",group:"Macros",onTrigger:()=>{oa("rapid_triage")}},{id:"macro-deep-diagnosis",label:"Run deep diagnosis launch path",description:"Open flow analysis and guided tour.",group:"Macros",onTrigger:()=>{oa("deep_diagnosis")}},{id:"macro-team-sync",label:"Run team sync launch path",description:"Enable sync mode and generate shareable context.",group:"Macros",onTrigger:()=>{oa("team_sync")}},{id:"story-toggle",label:pn?"Stop story mode":"Start story mode",description:"Auto-runs a cinematic walkthrough.",group:"Story",keys:"S",onTrigger:li},{id:"tour-start",label:"Start guided tour",description:"Walk the interface step by step.",group:"Onboarding",keys:"T",onTrigger:()=>Ke(!0)},{id:"explain-toggle",label:Ge?"Disable explain mode":"Enable explain mode",description:"Toggle contextual overlays.",group:"Onboarding",keys:"E",onTrigger:()=>me(w=>!w)},{id:"shortcuts",label:"Show shortcuts",description:"Open the keyboard map.",group:"Onboarding",keys:"?",onTrigger:()=>re(!0)},{id:"playback-toggle",label:Pe?"Pause playback":"Play playback",description:"Start or stop the run.",group:"Playback",keys:"Space",onTrigger:yu},{id:"mode-cinema",label:"Switch to Cinema",description:"Timeline playback view.",group:"Modes",keys:"C",onTrigger:()=>ve("cinema")},{id:"mode-flow",label:"Switch to Flow",description:"Graph dependency view.",group:"Modes",keys:"F",onTrigger:()=>ve("flow")},{id:"mode-compare",label:"Open Compare",description:"Side-by-side diff view.",group:"Modes",onTrigger:()=>ve("compare"),disabled:!$},{id:"mode-matrix",label:"Open Matrix",description:"Counterfactual replay matrix view.",group:"Modes",onTrigger:()=>ve("matrix")},{id:"mode-gameplay",label:"Open Gameplay",description:"World-class gameplay mechanics control center.",group:"Modes",keys:"G",onTrigger:()=>ve("gameplay")},{id:"jump-bottleneck",label:"Jump to bottleneck",description:"Select the slowest step.",group:"Navigation",onTrigger:Pt},{id:"jump-error",label:"Jump to error",description:"Select the first failed step.",group:"Navigation",onTrigger:_r},{id:"replay-step",label:"Replay from selected step",description:"Branch a Directors Cut.",group:"Tools",onTrigger:()=>V&&hn(V),disabled:!V},{id:"overlay-toggle",label:ie?"Hide overlay":"Show overlay",description:"Ghost diff in Cinema/Flow.",group:"Tools",onTrigger:()=>Fe(w=>!w),disabled:!$},{id:"safe-export",label:ee?"Disable safe export":"Enable safe export",description:"Redact sensitive payloads.",group:"Safety",onTrigger:()=>I(w=>!w)},{id:"reload",label:"Reload traces",description:"Refresh trace data.",group:"Meta",onTrigger:i},{id:"handoff-digest",label:"Copy handoff digest",description:"Capture mode, risk summary, and next actions for teammates.",group:"Meta",keys:"H",onTrigger:()=>{qs()}}],[qs,pn,li,Ge,Pe,yu,ve,$,Pt,_r,V,hn,ie,ee,i,me,Fe,I,re,Ke,oa]),ZP=S.useCallback(()=>{ot(`tutorial_skip:intro:${(e==null?void 0:e.id)||ke||pe.seed}`,"funnel.tutorial_skip",{traceId:(e==null?void 0:e.id)||ke||"unknown",source:"intro_overlay"}),Rs(!0)},[ot,pe.seed,ke,Rs,e==null?void 0:e.id]),eN=S.useCallback(()=>{Rs(!0),Ke(!0)},[Rs,Ke]),tN=S.useCallback(()=>{ot(`tutorial_skip:tour:${(e==null?void 0:e.id)||ke||pe.seed}`,"funnel.tutorial_skip",{traceId:(e==null?void 0:e.id)||ke||"unknown",source:"guided_tour"}),Ke(!1),$t(!0)},[ot,pe.seed,ke,$t,e==null?void 0:e.id]),nN=S.useCallback(()=>{ot(`tutorial_complete:${(e==null?void 0:e.id)||ke||pe.seed}`,"funnel.tutorial_complete",{traceId:(e==null?void 0:e.id)||ke||"unknown"}),Ke(!1),$t(!0)},[ot,pe.seed,ke,$t,e==null?void 0:e.id]);return n?h.jsx("div",{className:"loading",children:"Loading trace..."}):!r&&!e&&a.length===0?h.jsxs("div",{className:"error",children:[h.jsx("h2",{children:"No traces yet"}),h.jsx("p",{children:"Ingest your first trace, then reload to begin the Observe  Inspect  Direct workflow."}),h.jsxs("div",{className:"error-actions",children:[h.jsx("button",{className:"primary-button",type:"button",onClick:i,children:"Retry"}),h.jsx("a",{className:"ghost-button",href:"/help.html",target:"_blank",rel:"noreferrer",children:"Open help"})]})]}):r||!e?h.jsxs("div",{className:"error",children:[h.jsx("p",{children:r??"Failed to load trace."}),h.jsxs("div",{className:"error-actions",children:[h.jsx("button",{className:"primary-button",type:"button",onClick:i,children:"Retry"}),h.jsx("a",{className:"ghost-button",href:"/help.html",target:"_blank",rel:"noreferrer",children:"Open help"})]})]}):h.jsxs("div",{className:`app theme-${br} ${Ge?"explain-mode":""} ${l==="compare"?"mode-compare":""} ${l==="matrix"?"mode-matrix":""} ${l==="gameplay"?"mode-gameplay":""}`,children:[h.jsx(RR,{trace:e,traces:a,selectedTraceId:s,onSelectTrace:o,onReload:i,onStartTour:()=>Ke(!0),onToggleStory:li,onOpenPalette:()=>qe(!0),onToggleExplain:()=>me(w=>!w),onShareSession:mu,onCreateHandoffDigest:()=>void qs(),onThemeChange:en,onMotionChange:Xj,themeMode:br,motionMode:Bt,activeSessions:iu,shareStatus:lP,handoffStatus:uP,explainMode:Ge,storyActive:pn,mode:l,missionCompletion:Eg,runHealthScore:pu,modeHotkeys:gP}),!As&&!Ns?h.jsx(TI,{onComplete:ZP,onStartTour:eN,onStartStory:oi,persona:Ze,onPersonaChange:js,launchPath:ei,onLaunchPathChange:ta,onStartLaunchPath:w=>void oa(w)}):null,As&&!qn?h.jsx(MI,{explainMode:Ge,storyActive:pn,onStartTour:()=>{Fn(!0),Ke(!0)},onStartStory:()=>{Fn(!0),oi()},onToggleExplain:()=>me(w=>!w),onDismiss:()=>Fn(!0)}):null,h.jsx(_I,{steps:zP,open:Xl,onClose:tN,onComplete:nN}),h.jsx(kI,{enabled:Ge}),h.jsx(PI,{active:pn,label:KP,step:Pg,total:YP,onStop:Bn,onRestart:oi}),h.jsx(IR,{insights:t,investigation:C,onSelectStep:w=>{se(w),l!=="cinema"&&u("cinema")},onJumpToError:_r,onJumpToBottleneck:Pt}),h.jsx(yI,{trace:e,mode:l==="matrix"||l==="gameplay"?"cinema":l,playheadMs:ce,selectedStepId:V,compareTrace:$,collapsed:Ln,onToggleCollapsed:()=>Yl(w=>!w),onModeChange:ve,onSelectStep:w=>{se(w),l!=="cinema"&&u("cinema")},onJumpToBottleneck:Pt,onReplay:hn,onStartTour:()=>Ke(!0),priorityQueue:GP}),h.jsxs("div",{className:"toolbar","data-help":!0,"data-help-indicator":!0,"data-tour":"toolbar","data-help-title":"Search + filters","data-help-body":"Filter by step type, enable Safe export, and jump between Cinema, Flow, Compare, and Matrix.","data-help-placement":"bottom",children:[h.jsx(OR,{query:c,typeFilter:m,onQueryChange:d,onTypeFilterChange:y}),h.jsxs("div",{className:"toolbar-actions",children:[h.jsx("input",{className:"search-input",value:p,onChange:w=>x(w.target.value),placeholder:"TraceQL (example: type=tool_call and duration_ms>800)","aria-label":"TraceQL query"}),h.jsx("button",{className:"ghost-button",type:"button",onClick:()=>void wP(),children:"Run TraceQL"}),v?h.jsxs("span",{className:"status-badge",children:[v.matchCount," match(es)"]}):null,QP?h.jsx("span",{className:"status-badge",children:"Filtering..."}):null,h.jsxs("span",{className:"status-badge",children:["Hydration ",XP]}),h.jsxs("span",{className:"status-badge",children:["Filter ",dP,"ms"]}),v?h.jsx("button",{className:"ghost-button",type:"button",onClick:()=>{x(""),g(null),_(null)},children:"Clear TraceQL"}):null,b?h.jsx("span",{className:"status-badge warn",children:b}):null,h.jsxs("select",{className:"search-select",value:j,onChange:w=>P(w.target.value),"aria-label":"Extension selector",children:[h.jsx("option",{value:"",children:"Select extension"}),M.map(w=>h.jsx("option",{value:w.id,children:w.name},w.id))]}),h.jsx("button",{className:"ghost-button",type:"button",onClick:()=>void bP(),disabled:!e||!j||q,children:q?"Running extension...":"Run extension"}),h.jsx("button",{className:`ghost-button ${l==="cinema"?"active":""}`,type:"button","aria-pressed":l==="cinema",title:"Timeline playback",onClick:()=>ve("cinema"),"data-help":!0,"data-help-title":"Cinema mode","data-help-body":"Timeline view with step cards ordered by time.","data-help-placement":"bottom",children:"Cinema"}),h.jsx("button",{className:`ghost-button ${l==="flow"?"active":""}`,type:"button","aria-pressed":l==="flow",title:"Graph view",onClick:()=>ve("flow"),"data-help":!0,"data-help-title":"Flow mode","data-help-body":"Dependency graph of steps and tool calls.","data-help-placement":"bottom",children:"Flow"}),h.jsx("button",{className:`ghost-button ${l==="compare"?"active":""}`,type:"button","aria-pressed":l==="compare",title:$?"Side-by-side compare":"Run a replay to enable compare",onClick:()=>ve("compare"),disabled:!$,"data-tour":"compare","data-help":!0,"data-help-title":"Compare mode","data-help-body":"Side-by-side view after a replay. Enabled once you replay.","data-help-placement":"bottom",children:"Compare"}),h.jsx("button",{className:`ghost-button ${l==="matrix"?"active":""}`,type:"button","aria-pressed":l==="matrix",title:"Counterfactual replay matrix",onClick:()=>ve("matrix"),"data-help":!0,"data-help-title":"Matrix mode","data-help-body":"Run multiple replay scenarios and rank likely causal factors.","data-help-placement":"bottom",children:"Matrix"}),h.jsx("button",{className:`ghost-button ${l==="gameplay"?"active":""}`,type:"button","aria-pressed":l==="gameplay",title:"Gameplay mechanics command center",onClick:()=>ve("gameplay"),"data-help":!0,"data-help-title":"Gameplay mode","data-help-body":"Command raids, campaign, pvp, time forks, boss runs, economy, and liveops.","data-help-placement":"bottom",children:"Gameplay"}),h.jsxs("label",{className:"toggle",title:"Redact payloads and disable raw views for safe sharing","data-help":!0,"data-help-title":"Safe export","data-help-body":"Redacts secrets and disables raw payload views for safe sharing.","data-help-placement":"bottom",children:[h.jsx("input",{type:"checkbox",checked:ee,onChange:()=>I(w=>!w)}),"Safe export"]}),e.steps.length>200||fn?h.jsxs("label",{className:"toggle",title:"Window steps around the playhead for large traces","data-help":!0,"data-help-title":"Windowed mode","data-help-body":"Limits rendering to a playhead window for large traces.","data-help-placement":"bottom",children:[h.jsx("input",{type:"checkbox",checked:fn,onChange:()=>Zt(w=>!w)}),"Windowed"]}):null,$?h.jsxs("label",{className:"toggle",title:"Show ghost overlay of replay in Cinema/Flow","data-help":!0,"data-help-title":"Overlay replay","data-help-body":"Layer the replay over the base run to spot differences.","data-help-placement":"bottom",children:[h.jsx("input",{type:"checkbox",checked:ie,onChange:()=>Fe(w=>!w)}),"Overlay"]}):null,h.jsxs("label",{className:"toggle",title:"Follow active collaborator cursor and mode updates",children:[h.jsx("input",{type:"checkbox",checked:F,onChange:()=>R(w=>!w)}),"Sync playback"]})]})]}),A?h.jsxs("div",{className:"inspector-section",children:[h.jsx("div",{className:"inspector-section-title",children:"Extension output"}),h.jsx("pre",{className:"inspector-json",children:JSON.stringify(A,null,2)})]}):null,l==="cinema"?h.jsxs("div",{className:"playback-stack","data-tour":"playback",children:[h.jsx("div",{"data-help":!0,"data-help-title":"Playback controls","data-help-body":"Play, pause, scrub, and adjust speed to feel the rhythm of the run.","data-help-placement":"bottom",children:h.jsx(G0,{playheadMs:ce,wallTimeMs:e.metadata.wallTimeMs||1,isPlaying:Pe,speed:de,onToggle:()=>le(w=>!w),onScrub:w=>z(w),onSpeedChange:Mt})}),h.jsx("div",{"data-help":!0,"data-help-title":"Density map","data-help-body":"Zoom into hotspots and keep long traces readable with windowing.","data-help-placement":"bottom",children:h.jsx(oI,{traceStart:e.startedAt,traceEnd:e.endedAt,steps:e.steps,playheadMs:ce,windowRange:jg,windowed:fn,spanMs:wr,onSpanChange:Jr,onToggleWindowed:Zt,onScrub:w=>z(w),persistenceKey:e.id,laneStrategy:Be,visibleLaneGroups:mP,remotePlayheads:yP})})]}):null,l==="compare"&&$?h.jsx("div",{"data-help":!0,"data-help-title":"Compare playback","data-help-body":"Sync both runs to evaluate improvements at identical timestamps.","data-help-placement":"bottom",children:h.jsx(G0,{playheadMs:ce,wallTimeMs:Math.max(e.metadata.wallTimeMs||1,$.metadata.wallTimeMs||1),isPlaying:Pe,speed:de,onToggle:()=>le(w=>!w),onScrub:w=>z(w),onSpeedChange:Mt})}):null,h.jsxs("main",{className:`stage ${l==="compare"?"stage-compare":""} motion-fade-in`,role:"main",children:[h.jsx("div",{className:"main motion-slide-up",ref:du,"data-help":!0,"data-help-indicator":!0,"data-tour":"stage","data-help-title":"Trace stage","data-help-body":"Every step becomes a scene. Hover or click to open deep inspection.","data-help-placement":"top",children:h.jsx(iq,{morph:Jj,onComplete:UP,children:h.jsxs(S.Suspense,{fallback:h.jsx("div",{className:"loading",children:"Loading view..."}),children:[l==="cinema"?h.jsx(eI,{trace:e,steps:_g,selectedStepId:V,onSelectStep:w=>se(w),playheadMs:ce,windowRange:jg,timing:t==null?void 0:t.timing,ghostTrace:ie?$:null,diff:pP,laneStrategy:Be,laneGroupsOrder:si.order,hiddenLaneGroups:si.hidden,onLaneStrategyChange:xP,onToggleLaneGroupVisibility:SP,onMoveLaneGroup:NP}):null,l==="flow"?h.jsx(dz,{steps:_g,selectedStepId:V,onSelectStep:w=>se(w),baseTrace:e,compareTrace:$,compareSteps:hP,overlayEnabled:ie,onToggleOverlay:()=>Fe(w=>!w)}):null,l==="compare"&&$?h.jsx(fz,{baseTrace:e,compareTrace:$,playheadMs:ce,safeExport:ee,onExit:()=>{u("cinema"),Q(null)}}):null,l==="matrix"?h.jsx(pz,{steps:e.steps,anchorStepId:tu,onAnchorStepChange:nu,scenarios:Zj,onScenarioChange:IP,onDuplicateScenario:qP,onMoveScenario:FP,onAddScenario:OP,onRemoveScenario:LP,onRun:VP,onCancel:$P,onReplaceScenarios:DP,loading:eP,error:tP,job:na,matrix:jt,safeExport:ee,onOpenCompare:BP}):null,l==="gameplay"?h.jsx(mz,{state:pe,playheadMs:ce,onUpdate:w=>ia(k=>w(k)),session:De,playerId:xr,sessionError:nP,onCreateSession:_P,onJoinSession:kP,onLeaveSession:CP,onDispatchAction:EP,guild:rP,onCreateGuild:TP,onJoinGuild:MP,onScheduleGuildEvent:jP,onCompleteGuildEvent:PP,observability:iP,analytics:sP}):null]})})}),h.jsx(S.Suspense,{fallback:h.jsx("div",{className:"loading",children:"Loading panel..."}),children:l==="compare"||l==="matrix"||l==="gameplay"?null:Cg?h.jsx(hz,{traceId:e.id,step:Cg,safeExport:ee,onClose:()=>se(null),onReplay:hn}):h.jsx(SI,{trace:e,mode:l,selectedStepId:V,onModeChange:ve,onSelectStep:w=>se(w),onJumpToBottleneck:Pt,onReplay:hn,recommendations:tn,persona:Ze,annotations:vP,activityFeed:cP,onAddAnnotation:RP,missionProgress:Ps,missionCompletion:Eg,onResetMissions:AP,narrative:kr,onAskDirector:HP,onExportNarrative:WP})})]}),h.jsxs("div",{className:"mobile-quick-rail","aria-label":"Mobile quick actions",children:[h.jsx("button",{className:`ghost-button ${pn?"active":""}`,type:"button",onClick:li,"aria-label":pn?"Stop story mode":"Start story mode",children:pn?"Stop Story":"Story"}),h.jsx("button",{className:"ghost-button",type:"button",onClick:()=>Ke(!0),"aria-label":"Start guided tour",children:"Guide"}),h.jsx("button",{className:"ghost-button",type:"button",onClick:()=>qe(!0),"aria-label":"Open command palette",children:"Command"}),h.jsx("button",{className:"ghost-button",type:"button",onClick:()=>void qs(),"aria-label":"Copy handoff digest",children:"Handoff"})]}),h.jsx(jI,{mode:l==="matrix"||l==="gameplay"?"cinema":l,isPlaying:Pe,storyActive:pn,explainMode:Ge,hidden:l==="compare",open:Ql,onToggleOpen:()=>Zr(w=>!w),onTogglePlay:yu,onStartStory:oi,onStopStory:Bn,onStartTour:()=>Ke(!0),onOpenPalette:()=>qe(!0),onShowShortcuts:()=>re(!0),onToggleExplain:()=>me(w=>!w),onJumpToBottleneck:Pt}),h.jsx(pI,{open:X,onClose:()=>qe(!1),actions:JP}),h.jsx(uI,{open:B,onClose:()=>re(!1)})]})}em.createRoot(document.getElementById("root")).render(h.jsx(gN.StrictMode,{children:h.jsx(Sz,{})}));export{Lz as A,qz as B,Fz as C,Uz as D,Vz as E,$z as F,Bz as G,zz as H,Gz as I,Wz as J,Kz as K,Hz as L,gN as R,HR as S,JR as T,z4 as a,H4 as b,rI as c,EM as d,Cz as e,kz as f,Dk as g,xq as h,iI as i,h as j,Tz as k,iz as l,az as m,sz as n,Ez as o,Mz as p,jz as q,S as r,qR as s,Pz as t,Nz as u,Az as v,Rz as w,Iz as x,Dz as y,Oz as z};
