const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-BUKj4lxY.js","assets/index-B5DZHykP.css"])))=>i.map(i=>d[i]);
(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();var qs=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Rk(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Ik={exports:{}},sl={},Dk={exports:{}},re={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hs=Symbol.for("react.element"),ZP=Symbol.for("react.portal"),eN=Symbol.for("react.fragment"),tN=Symbol.for("react.strict_mode"),nN=Symbol.for("react.profiler"),rN=Symbol.for("react.provider"),iN=Symbol.for("react.context"),aN=Symbol.for("react.forward_ref"),sN=Symbol.for("react.suspense"),oN=Symbol.for("react.memo"),lN=Symbol.for("react.lazy"),Ng=Symbol.iterator;function uN(e){return e===null||typeof e!="object"?null:(e=Ng&&e[Ng]||e["@@iterator"],typeof e=="function"?e:null)}var Ok={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Lk=Object.assign,qk={};function Gi(e,t,n){this.props=e,this.context=t,this.refs=qk,this.updater=n||Ok}Gi.prototype.isReactComponent={};Gi.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Gi.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Fk(){}Fk.prototype=Gi.prototype;function hv(e,t,n){this.props=e,this.context=t,this.refs=qk,this.updater=n||Ok}var pv=hv.prototype=new Fk;pv.constructor=hv;Lk(pv,Gi.prototype);pv.isPureReactComponent=!0;var Ag=Array.isArray,Vk=Object.prototype.hasOwnProperty,mv={current:null},$k={key:!0,ref:!0,__self:!0,__source:!0};function Bk(e,t,n){var r,i={},a=null,s=null;if(t!=null)for(r in t.ref!==void 0&&(s=t.ref),t.key!==void 0&&(a=""+t.key),t)Vk.call(t,r)&&!$k.hasOwnProperty(r)&&(i[r]=t[r]);var o=arguments.length-2;if(o===1)i.children=n;else if(1<o){for(var l=Array(o),u=0;u<o;u++)l[u]=arguments[u+2];i.children=l}if(e&&e.defaultProps)for(r in o=e.defaultProps,o)i[r]===void 0&&(i[r]=o[r]);return{$$typeof:hs,type:e,key:a,ref:s,props:i,_owner:mv.current}}function cN(e,t){return{$$typeof:hs,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function vv(e){return typeof e=="object"&&e!==null&&e.$$typeof===hs}function dN(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Rg=/\/+/g;function vu(e,t){return typeof e=="object"&&e!==null&&e.key!=null?dN(""+e.key):t.toString(36)}function uo(e,t,n,r,i){var a=typeof e;(a==="undefined"||a==="boolean")&&(e=null);var s=!1;if(e===null)s=!0;else switch(a){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case hs:case ZP:s=!0}}if(s)return s=e,i=i(s),e=r===""?"."+vu(s,0):r,Ag(i)?(n="",e!=null&&(n=e.replace(Rg,"$&/")+"/"),uo(i,t,n,"",function(u){return u})):i!=null&&(vv(i)&&(i=cN(i,n+(!i.key||s&&s.key===i.key?"":(""+i.key).replace(Rg,"$&/")+"/")+e)),t.push(i)),1;if(s=0,r=r===""?".":r+":",Ag(e))for(var o=0;o<e.length;o++){a=e[o];var l=r+vu(a,o);s+=uo(a,t,n,l,i)}else if(l=uN(e),typeof l=="function")for(e=l.call(e),o=0;!(a=e.next()).done;)a=a.value,l=r+vu(a,o++),s+=uo(a,t,n,l,i);else if(a==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function Fs(e,t,n){if(e==null)return e;var r=[],i=0;return uo(e,r,"","",function(a){return t.call(n,a,i++)}),r}function fN(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var ct={current:null},co={transition:null},hN={ReactCurrentDispatcher:ct,ReactCurrentBatchConfig:co,ReactCurrentOwner:mv};function zk(){throw Error("act(...) is not supported in production builds of React.")}re.Children={map:Fs,forEach:function(e,t,n){Fs(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Fs(e,function(){t++}),t},toArray:function(e){return Fs(e,function(t){return t})||[]},only:function(e){if(!vv(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};re.Component=Gi;re.Fragment=eN;re.Profiler=nN;re.PureComponent=hv;re.StrictMode=tN;re.Suspense=sN;re.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=hN;re.act=zk;re.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=Lk({},e.props),i=e.key,a=e.ref,s=e._owner;if(t!=null){if(t.ref!==void 0&&(a=t.ref,s=mv.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var o=e.type.defaultProps;for(l in t)Vk.call(t,l)&&!$k.hasOwnProperty(l)&&(r[l]=t[l]===void 0&&o!==void 0?o[l]:t[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){o=Array(l);for(var u=0;u<l;u++)o[u]=arguments[u+2];r.children=o}return{$$typeof:hs,type:e.type,key:i,ref:a,props:r,_owner:s}};re.createContext=function(e){return e={$$typeof:iN,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:rN,_context:e},e.Consumer=e};re.createElement=Bk;re.createFactory=function(e){var t=Bk.bind(null,e);return t.type=e,t};re.createRef=function(){return{current:null}};re.forwardRef=function(e){return{$$typeof:aN,render:e}};re.isValidElement=vv;re.lazy=function(e){return{$$typeof:lN,_payload:{_status:-1,_result:e},_init:fN}};re.memo=function(e,t){return{$$typeof:oN,type:e,compare:t===void 0?null:t}};re.startTransition=function(e){var t=co.transition;co.transition={};try{e()}finally{co.transition=t}};re.unstable_act=zk;re.useCallback=function(e,t){return ct.current.useCallback(e,t)};re.useContext=function(e){return ct.current.useContext(e)};re.useDebugValue=function(){};re.useDeferredValue=function(e){return ct.current.useDeferredValue(e)};re.useEffect=function(e,t){return ct.current.useEffect(e,t)};re.useId=function(){return ct.current.useId()};re.useImperativeHandle=function(e,t,n){return ct.current.useImperativeHandle(e,t,n)};re.useInsertionEffect=function(e,t){return ct.current.useInsertionEffect(e,t)};re.useLayoutEffect=function(e,t){return ct.current.useLayoutEffect(e,t)};re.useMemo=function(e,t){return ct.current.useMemo(e,t)};re.useReducer=function(e,t,n){return ct.current.useReducer(e,t,n)};re.useRef=function(e){return ct.current.useRef(e)};re.useState=function(e){return ct.current.useState(e)};re.useSyncExternalStore=function(e,t,n){return ct.current.useSyncExternalStore(e,t,n)};re.useTransition=function(){return ct.current.useTransition()};re.version="18.3.1";Dk.exports=re;var S=Dk.exports;const pN=Rk(S);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mN=S,vN=Symbol.for("react.element"),yN=Symbol.for("react.fragment"),gN=Object.prototype.hasOwnProperty,wN=mN.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,bN={key:!0,ref:!0,__self:!0,__source:!0};function Uk(e,t,n){var r,i={},a=null,s=null;n!==void 0&&(a=""+n),t.key!==void 0&&(a=""+t.key),t.ref!==void 0&&(s=t.ref);for(r in t)gN.call(t,r)&&!bN.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:vN,type:e,key:a,ref:s,props:i,_owner:wN.current}}sl.Fragment=yN;sl.jsx=Uk;sl.jsxs=Uk;Ik.exports=sl;var h=Ik.exports,Zp={},Gk={exports:{}},Ct={},Hk={exports:{}},Wk={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(R,q){var G=R.length;R.push(q);e:for(;0<G;){var z=G-1>>>1,ae=R[z];if(0<i(ae,q))R[z]=q,R[G]=ae,G=z;else break e}}function n(R){return R.length===0?null:R[0]}function r(R){if(R.length===0)return null;var q=R[0],G=R.pop();if(G!==q){R[0]=G;e:for(var z=0,ae=R.length,Pe=ae>>>1;z<Pe;){var oe=2*(z+1)-1,ce=R[oe],$=oe+1,de=R[$];if(0>i(ce,G))$<ae&&0>i(de,ce)?(R[z]=de,R[$]=G,z=$):(R[z]=ce,R[oe]=G,z=oe);else if($<ae&&0>i(de,G))R[z]=de,R[$]=G,z=$;else break e}}return q}function i(R,q){var G=R.sortIndex-q.sortIndex;return G!==0?G:R.id-q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var s=Date,o=s.now();e.unstable_now=function(){return s.now()-o}}var l=[],u=[],c=1,d=null,f=3,m=!1,v=!1,p=!1,x=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(R){for(var q=n(u);q!==null;){if(q.callback===null)r(u);else if(q.startTime<=R)r(u),q.sortIndex=q.expirationTime,t(l,q);else break;q=n(u)}}function k(R){if(p=!1,b(R),!v)if(n(l)!==null)v=!0,le(_);else{var q=n(u);q!==null&&ie(k,q.startTime-R)}}function _(R,q){v=!1,p&&(p=!1,y(T),T=-1),m=!0;var G=f;try{for(b(q),d=n(l);d!==null&&(!(d.expirationTime>q)||R&&!A());){var z=d.callback;if(typeof z=="function"){d.callback=null,f=d.priorityLevel;var ae=z(d.expirationTime<=q);q=e.unstable_now(),typeof ae=="function"?d.callback=ae:d===n(l)&&r(l),b(q)}else r(l);d=n(l)}if(d!==null)var Pe=!0;else{var oe=n(u);oe!==null&&ie(k,oe.startTime-q),Pe=!1}return Pe}finally{d=null,f=G,m=!1}}var C=!1,M=null,T=-1,j=5,N=-1;function A(){return!(e.unstable_now()-N<j)}function I(){if(M!==null){var R=e.unstable_now();N=R;var q=!0;try{q=M(!0,R)}finally{q?L():(C=!1,M=null)}}else C=!1}var L;if(typeof g=="function")L=function(){g(I)};else if(typeof MessageChannel<"u"){var K=new MessageChannel,V=K.port2;K.port1.onmessage=I,L=function(){V.postMessage(null)}}else L=function(){x(I,0)};function le(R){M=R,C||(C=!0,L())}function ie(R,q){T=x(function(){R(e.unstable_now())},q)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(R){R.callback=null},e.unstable_continueExecution=function(){v||m||(v=!0,le(_))},e.unstable_forceFrameRate=function(R){0>R||125<R?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):j=0<R?Math.floor(1e3/R):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return n(l)},e.unstable_next=function(R){switch(f){case 1:case 2:case 3:var q=3;break;default:q=f}var G=f;f=q;try{return R()}finally{f=G}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(R,q){switch(R){case 1:case 2:case 3:case 4:case 5:break;default:R=3}var G=f;f=R;try{return q()}finally{f=G}},e.unstable_scheduleCallback=function(R,q,G){var z=e.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?z+G:z):G=z,R){case 1:var ae=-1;break;case 2:ae=250;break;case 5:ae=1073741823;break;case 4:ae=1e4;break;default:ae=5e3}return ae=G+ae,R={id:c++,callback:q,priorityLevel:R,startTime:G,expirationTime:ae,sortIndex:-1},G>z?(R.sortIndex=G,t(u,R),n(l)===null&&R===n(u)&&(p?(y(T),T=-1):p=!0,ie(k,G-z))):(R.sortIndex=ae,t(l,R),v||m||(v=!0,le(_))),R},e.unstable_shouldYield=A,e.unstable_wrapCallback=function(R){var q=f;return function(){var G=f;f=q;try{return R.apply(this,arguments)}finally{f=G}}}})(Wk);Hk.exports=Wk;var xN=Hk.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var SN=S,kt=xN;function O(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Kk=new Set,Ga={};function Ur(e,t){Di(e,t),Di(e+"Capture",t)}function Di(e,t){for(Ga[e]=t,e=0;e<t.length;e++)Kk.add(t[e])}var Tn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),em=Object.prototype.hasOwnProperty,_N=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Ig={},Dg={};function kN(e){return em.call(Dg,e)?!0:em.call(Ig,e)?!1:_N.test(e)?Dg[e]=!0:(Ig[e]=!0,!1)}function EN(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function CN(e,t,n,r){if(t===null||typeof t>"u"||EN(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function dt(e,t,n,r,i,a,s){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=s}var Je={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Je[e]=new dt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Je[t]=new dt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Je[e]=new dt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Je[e]=new dt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Je[e]=new dt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Je[e]=new dt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Je[e]=new dt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Je[e]=new dt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Je[e]=new dt(e,5,!1,e.toLowerCase(),null,!1,!1)});var yv=/[\-:]([a-z])/g;function gv(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(yv,gv);Je[t]=new dt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(yv,gv);Je[t]=new dt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(yv,gv);Je[t]=new dt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Je[e]=new dt(e,1,!1,e.toLowerCase(),null,!1,!1)});Je.xlinkHref=new dt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Je[e]=new dt(e,1,!1,e.toLowerCase(),null,!0,!0)});function wv(e,t,n,r){var i=Je.hasOwnProperty(t)?Je[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(CN(t,n,i,r)&&(n=null),r||i===null?kN(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,r=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Rn=SN.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Vs=Symbol.for("react.element"),fi=Symbol.for("react.portal"),hi=Symbol.for("react.fragment"),bv=Symbol.for("react.strict_mode"),tm=Symbol.for("react.profiler"),Yk=Symbol.for("react.provider"),Qk=Symbol.for("react.context"),xv=Symbol.for("react.forward_ref"),nm=Symbol.for("react.suspense"),rm=Symbol.for("react.suspense_list"),Sv=Symbol.for("react.memo"),Hn=Symbol.for("react.lazy"),Xk=Symbol.for("react.offscreen"),Og=Symbol.iterator;function la(e){return e===null||typeof e!="object"?null:(e=Og&&e[Og]||e["@@iterator"],typeof e=="function"?e:null)}var je=Object.assign,yu;function wa(e){if(yu===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);yu=t&&t[1]||""}return`
`+yu+e}var gu=!1;function wu(e,t){if(!e||gu)return"";gu=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),a=r.stack.split(`
`),s=i.length-1,o=a.length-1;1<=s&&0<=o&&i[s]!==a[o];)o--;for(;1<=s&&0<=o;s--,o--)if(i[s]!==a[o]){if(s!==1||o!==1)do if(s--,o--,0>o||i[s]!==a[o]){var l=`
`+i[s].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}while(1<=s&&0<=o);break}}}finally{gu=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?wa(e):""}function TN(e){switch(e.tag){case 5:return wa(e.type);case 16:return wa("Lazy");case 13:return wa("Suspense");case 19:return wa("SuspenseList");case 0:case 2:case 15:return e=wu(e.type,!1),e;case 11:return e=wu(e.type.render,!1),e;case 1:return e=wu(e.type,!0),e;default:return""}}function im(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case hi:return"Fragment";case fi:return"Portal";case tm:return"Profiler";case bv:return"StrictMode";case nm:return"Suspense";case rm:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Qk:return(e.displayName||"Context")+".Consumer";case Yk:return(e._context.displayName||"Context")+".Provider";case xv:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Sv:return t=e.displayName||null,t!==null?t:im(e.type)||"Memo";case Hn:t=e._payload,e=e._init;try{return im(e(t))}catch{}}return null}function MN(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return im(t);case 8:return t===bv?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function lr(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Jk(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function jN(e){var t=Jk(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(s){r=""+s,a.call(this,s)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(s){r=""+s},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function $s(e){e._valueTracker||(e._valueTracker=jN(e))}function Zk(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Jk(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Eo(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function am(e,t){var n=t.checked;return je({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Lg(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=lr(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function eE(e,t){t=t.checked,t!=null&&wv(e,"checked",t,!1)}function sm(e,t){eE(e,t);var n=lr(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?om(e,t.type,n):t.hasOwnProperty("defaultValue")&&om(e,t.type,lr(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function qg(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function om(e,t,n){(t!=="number"||Eo(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var ba=Array.isArray;function ji(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+lr(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function lm(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(O(91));return je({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Fg(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(O(92));if(ba(n)){if(1<n.length)throw Error(O(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:lr(n)}}function tE(e,t){var n=lr(t.value),r=lr(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function Vg(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function nE(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function um(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?nE(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Bs,rE=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Bs=Bs||document.createElement("div"),Bs.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Bs.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Ha(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Aa={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},PN=["Webkit","ms","Moz","O"];Object.keys(Aa).forEach(function(e){PN.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Aa[t]=Aa[e]})});function iE(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Aa.hasOwnProperty(e)&&Aa[e]?(""+t).trim():t+"px"}function aE(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=iE(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}var NN=je({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function cm(e,t){if(t){if(NN[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(O(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(O(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(O(61))}if(t.style!=null&&typeof t.style!="object")throw Error(O(62))}}function dm(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var fm=null;function _v(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var hm=null,Pi=null,Ni=null;function $g(e){if(e=vs(e)){if(typeof hm!="function")throw Error(O(280));var t=e.stateNode;t&&(t=dl(t),hm(e.stateNode,e.type,t))}}function sE(e){Pi?Ni?Ni.push(e):Ni=[e]:Pi=e}function oE(){if(Pi){var e=Pi,t=Ni;if(Ni=Pi=null,$g(e),t)for(e=0;e<t.length;e++)$g(t[e])}}function lE(e,t){return e(t)}function uE(){}var bu=!1;function cE(e,t,n){if(bu)return e(t,n);bu=!0;try{return lE(e,t,n)}finally{bu=!1,(Pi!==null||Ni!==null)&&(uE(),oE())}}function Wa(e,t){var n=e.stateNode;if(n===null)return null;var r=dl(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(O(231,t,typeof n));return n}var pm=!1;if(Tn)try{var ua={};Object.defineProperty(ua,"passive",{get:function(){pm=!0}}),window.addEventListener("test",ua,ua),window.removeEventListener("test",ua,ua)}catch{pm=!1}function AN(e,t,n,r,i,a,s,o,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(c){this.onError(c)}}var Ra=!1,Co=null,To=!1,mm=null,RN={onError:function(e){Ra=!0,Co=e}};function IN(e,t,n,r,i,a,s,o,l){Ra=!1,Co=null,AN.apply(RN,arguments)}function DN(e,t,n,r,i,a,s,o,l){if(IN.apply(this,arguments),Ra){if(Ra){var u=Co;Ra=!1,Co=null}else throw Error(O(198));To||(To=!0,mm=u)}}function Gr(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function dE(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Bg(e){if(Gr(e)!==e)throw Error(O(188))}function ON(e){var t=e.alternate;if(!t){if(t=Gr(e),t===null)throw Error(O(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var a=i.alternate;if(a===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return Bg(i),e;if(a===r)return Bg(i),t;a=a.sibling}throw Error(O(188))}if(n.return!==r.return)n=i,r=a;else{for(var s=!1,o=i.child;o;){if(o===n){s=!0,n=i,r=a;break}if(o===r){s=!0,r=i,n=a;break}o=o.sibling}if(!s){for(o=a.child;o;){if(o===n){s=!0,n=a,r=i;break}if(o===r){s=!0,r=a,n=i;break}o=o.sibling}if(!s)throw Error(O(189))}}if(n.alternate!==r)throw Error(O(190))}if(n.tag!==3)throw Error(O(188));return n.stateNode.current===n?e:t}function fE(e){return e=ON(e),e!==null?hE(e):null}function hE(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=hE(e);if(t!==null)return t;e=e.sibling}return null}var pE=kt.unstable_scheduleCallback,zg=kt.unstable_cancelCallback,LN=kt.unstable_shouldYield,qN=kt.unstable_requestPaint,Le=kt.unstable_now,FN=kt.unstable_getCurrentPriorityLevel,kv=kt.unstable_ImmediatePriority,mE=kt.unstable_UserBlockingPriority,Mo=kt.unstable_NormalPriority,VN=kt.unstable_LowPriority,vE=kt.unstable_IdlePriority,ol=null,on=null;function $N(e){if(on&&typeof on.onCommitFiberRoot=="function")try{on.onCommitFiberRoot(ol,e,void 0,(e.current.flags&128)===128)}catch{}}var Kt=Math.clz32?Math.clz32:UN,BN=Math.log,zN=Math.LN2;function UN(e){return e>>>=0,e===0?32:31-(BN(e)/zN|0)|0}var zs=64,Us=4194304;function xa(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function jo(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,s=n&268435455;if(s!==0){var o=s&~i;o!==0?r=xa(o):(a&=s,a!==0&&(r=xa(a)))}else s=n&~i,s!==0?r=xa(s):a!==0&&(r=xa(a));if(r===0)return 0;if(t!==0&&t!==r&&!(t&i)&&(i=r&-r,a=t&-t,i>=a||i===16&&(a&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Kt(t),i=1<<n,r|=e[n],t&=~i;return r}function GN(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function HN(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var s=31-Kt(a),o=1<<s,l=i[s];l===-1?(!(o&n)||o&r)&&(i[s]=GN(o,t)):l<=t&&(e.expiredLanes|=o),a&=~o}}function vm(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function yE(){var e=zs;return zs<<=1,!(zs&4194240)&&(zs=64),e}function xu(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function ps(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Kt(t),e[t]=n}function WN(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-Kt(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}function Ev(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Kt(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var he=0;function gE(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var wE,Cv,bE,xE,SE,ym=!1,Gs=[],Zn=null,er=null,tr=null,Ka=new Map,Ya=new Map,Kn=[],KN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ug(e,t){switch(e){case"focusin":case"focusout":Zn=null;break;case"dragenter":case"dragleave":er=null;break;case"mouseover":case"mouseout":tr=null;break;case"pointerover":case"pointerout":Ka.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ya.delete(t.pointerId)}}function ca(e,t,n,r,i,a){return e===null||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},t!==null&&(t=vs(t),t!==null&&Cv(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function YN(e,t,n,r,i){switch(t){case"focusin":return Zn=ca(Zn,e,t,n,r,i),!0;case"dragenter":return er=ca(er,e,t,n,r,i),!0;case"mouseover":return tr=ca(tr,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return Ka.set(a,ca(Ka.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Ya.set(a,ca(Ya.get(a)||null,e,t,n,r,i)),!0}return!1}function _E(e){var t=jr(e.target);if(t!==null){var n=Gr(t);if(n!==null){if(t=n.tag,t===13){if(t=dE(n),t!==null){e.blockedOn=t,SE(e.priority,function(){bE(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function fo(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=gm(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);fm=r,n.target.dispatchEvent(r),fm=null}else return t=vs(n),t!==null&&Cv(t),e.blockedOn=n,!1;t.shift()}return!0}function Gg(e,t,n){fo(e)&&n.delete(t)}function QN(){ym=!1,Zn!==null&&fo(Zn)&&(Zn=null),er!==null&&fo(er)&&(er=null),tr!==null&&fo(tr)&&(tr=null),Ka.forEach(Gg),Ya.forEach(Gg)}function da(e,t){e.blockedOn===t&&(e.blockedOn=null,ym||(ym=!0,kt.unstable_scheduleCallback(kt.unstable_NormalPriority,QN)))}function Qa(e){function t(i){return da(i,e)}if(0<Gs.length){da(Gs[0],e);for(var n=1;n<Gs.length;n++){var r=Gs[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Zn!==null&&da(Zn,e),er!==null&&da(er,e),tr!==null&&da(tr,e),Ka.forEach(t),Ya.forEach(t),n=0;n<Kn.length;n++)r=Kn[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Kn.length&&(n=Kn[0],n.blockedOn===null);)_E(n),n.blockedOn===null&&Kn.shift()}var Ai=Rn.ReactCurrentBatchConfig,Po=!0;function XN(e,t,n,r){var i=he,a=Ai.transition;Ai.transition=null;try{he=1,Tv(e,t,n,r)}finally{he=i,Ai.transition=a}}function JN(e,t,n,r){var i=he,a=Ai.transition;Ai.transition=null;try{he=4,Tv(e,t,n,r)}finally{he=i,Ai.transition=a}}function Tv(e,t,n,r){if(Po){var i=gm(e,t,n,r);if(i===null)Nu(e,t,r,No,n),Ug(e,r);else if(YN(i,e,t,n,r))r.stopPropagation();else if(Ug(e,r),t&4&&-1<KN.indexOf(e)){for(;i!==null;){var a=vs(i);if(a!==null&&wE(a),a=gm(e,t,n,r),a===null&&Nu(e,t,r,No,n),a===i)break;i=a}i!==null&&r.stopPropagation()}else Nu(e,t,r,null,n)}}var No=null;function gm(e,t,n,r){if(No=null,e=_v(r),e=jr(e),e!==null)if(t=Gr(e),t===null)e=null;else if(n=t.tag,n===13){if(e=dE(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return No=e,null}function kE(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(FN()){case kv:return 1;case mE:return 4;case Mo:case VN:return 16;case vE:return 536870912;default:return 16}default:return 16}}var Xn=null,Mv=null,ho=null;function EE(){if(ho)return ho;var e,t=Mv,n=t.length,r,i="value"in Xn?Xn.value:Xn.textContent,a=i.length;for(e=0;e<n&&t[e]===i[e];e++);var s=n-e;for(r=1;r<=s&&t[n-r]===i[a-r];r++);return ho=i.slice(e,1<r?1-r:void 0)}function po(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Hs(){return!0}function Hg(){return!1}function Tt(e){function t(n,r,i,a,s){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=a,this.target=s,this.currentTarget=null;for(var o in e)e.hasOwnProperty(o)&&(n=e[o],this[o]=n?n(a):a[o]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?Hs:Hg,this.isPropagationStopped=Hg,this}return je(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Hs)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Hs)},persist:function(){},isPersistent:Hs}),t}var Hi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},jv=Tt(Hi),ms=je({},Hi,{view:0,detail:0}),ZN=Tt(ms),Su,_u,fa,ll=je({},ms,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Pv,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==fa&&(fa&&e.type==="mousemove"?(Su=e.screenX-fa.screenX,_u=e.screenY-fa.screenY):_u=Su=0,fa=e),Su)},movementY:function(e){return"movementY"in e?e.movementY:_u}}),Wg=Tt(ll),eA=je({},ll,{dataTransfer:0}),tA=Tt(eA),nA=je({},ms,{relatedTarget:0}),ku=Tt(nA),rA=je({},Hi,{animationName:0,elapsedTime:0,pseudoElement:0}),iA=Tt(rA),aA=je({},Hi,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),sA=Tt(aA),oA=je({},Hi,{data:0}),Kg=Tt(oA),lA={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},uA={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},cA={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function dA(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=cA[e])?!!t[e]:!1}function Pv(){return dA}var fA=je({},ms,{key:function(e){if(e.key){var t=lA[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=po(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?uA[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Pv,charCode:function(e){return e.type==="keypress"?po(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?po(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),hA=Tt(fA),pA=je({},ll,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Yg=Tt(pA),mA=je({},ms,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Pv}),vA=Tt(mA),yA=je({},Hi,{propertyName:0,elapsedTime:0,pseudoElement:0}),gA=Tt(yA),wA=je({},ll,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),bA=Tt(wA),xA=[9,13,27,32],Nv=Tn&&"CompositionEvent"in window,Ia=null;Tn&&"documentMode"in document&&(Ia=document.documentMode);var SA=Tn&&"TextEvent"in window&&!Ia,CE=Tn&&(!Nv||Ia&&8<Ia&&11>=Ia),Qg=" ",Xg=!1;function TE(e,t){switch(e){case"keyup":return xA.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ME(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var pi=!1;function _A(e,t){switch(e){case"compositionend":return ME(t);case"keypress":return t.which!==32?null:(Xg=!0,Qg);case"textInput":return e=t.data,e===Qg&&Xg?null:e;default:return null}}function kA(e,t){if(pi)return e==="compositionend"||!Nv&&TE(e,t)?(e=EE(),ho=Mv=Xn=null,pi=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return CE&&t.locale!=="ko"?null:t.data;default:return null}}var EA={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Jg(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!EA[e.type]:t==="textarea"}function jE(e,t,n,r){sE(r),t=Ao(t,"onChange"),0<t.length&&(n=new jv("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Da=null,Xa=null;function CA(e){VE(e,0)}function ul(e){var t=yi(e);if(Zk(t))return e}function TA(e,t){if(e==="change")return t}var PE=!1;if(Tn){var Eu;if(Tn){var Cu="oninput"in document;if(!Cu){var Zg=document.createElement("div");Zg.setAttribute("oninput","return;"),Cu=typeof Zg.oninput=="function"}Eu=Cu}else Eu=!1;PE=Eu&&(!document.documentMode||9<document.documentMode)}function e0(){Da&&(Da.detachEvent("onpropertychange",NE),Xa=Da=null)}function NE(e){if(e.propertyName==="value"&&ul(Xa)){var t=[];jE(t,Xa,e,_v(e)),cE(CA,t)}}function MA(e,t,n){e==="focusin"?(e0(),Da=t,Xa=n,Da.attachEvent("onpropertychange",NE)):e==="focusout"&&e0()}function jA(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return ul(Xa)}function PA(e,t){if(e==="click")return ul(t)}function NA(e,t){if(e==="input"||e==="change")return ul(t)}function AA(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Qt=typeof Object.is=="function"?Object.is:AA;function Ja(e,t){if(Qt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!em.call(t,i)||!Qt(e[i],t[i]))return!1}return!0}function t0(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function n0(e,t){var n=t0(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=t0(n)}}function AE(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?AE(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function RE(){for(var e=window,t=Eo();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Eo(e.document)}return t}function Av(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function RA(e){var t=RE(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&AE(n.ownerDocument.documentElement,n)){if(r!==null&&Av(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=r.end===void 0?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=n0(n,a);var s=n0(n,r);i&&s&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==s.node||e.focusOffset!==s.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(s.node,s.offset)):(t.setEnd(s.node,s.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var IA=Tn&&"documentMode"in document&&11>=document.documentMode,mi=null,wm=null,Oa=null,bm=!1;function r0(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;bm||mi==null||mi!==Eo(r)||(r=mi,"selectionStart"in r&&Av(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Oa&&Ja(Oa,r)||(Oa=r,r=Ao(wm,"onSelect"),0<r.length&&(t=new jv("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=mi)))}function Ws(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var vi={animationend:Ws("Animation","AnimationEnd"),animationiteration:Ws("Animation","AnimationIteration"),animationstart:Ws("Animation","AnimationStart"),transitionend:Ws("Transition","TransitionEnd")},Tu={},IE={};Tn&&(IE=document.createElement("div").style,"AnimationEvent"in window||(delete vi.animationend.animation,delete vi.animationiteration.animation,delete vi.animationstart.animation),"TransitionEvent"in window||delete vi.transitionend.transition);function cl(e){if(Tu[e])return Tu[e];if(!vi[e])return e;var t=vi[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in IE)return Tu[e]=t[n];return e}var DE=cl("animationend"),OE=cl("animationiteration"),LE=cl("animationstart"),qE=cl("transitionend"),FE=new Map,i0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function hr(e,t){FE.set(e,t),Ur(t,[e])}for(var Mu=0;Mu<i0.length;Mu++){var ju=i0[Mu],DA=ju.toLowerCase(),OA=ju[0].toUpperCase()+ju.slice(1);hr(DA,"on"+OA)}hr(DE,"onAnimationEnd");hr(OE,"onAnimationIteration");hr(LE,"onAnimationStart");hr("dblclick","onDoubleClick");hr("focusin","onFocus");hr("focusout","onBlur");hr(qE,"onTransitionEnd");Di("onMouseEnter",["mouseout","mouseover"]);Di("onMouseLeave",["mouseout","mouseover"]);Di("onPointerEnter",["pointerout","pointerover"]);Di("onPointerLeave",["pointerout","pointerover"]);Ur("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ur("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ur("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ur("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ur("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ur("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Sa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),LA=new Set("cancel close invalid load scroll toggle".split(" ").concat(Sa));function a0(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,DN(r,t,void 0,e),e.currentTarget=null}function VE(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var s=r.length-1;0<=s;s--){var o=r[s],l=o.instance,u=o.currentTarget;if(o=o.listener,l!==a&&i.isPropagationStopped())break e;a0(i,o,u),a=l}else for(s=0;s<r.length;s++){if(o=r[s],l=o.instance,u=o.currentTarget,o=o.listener,l!==a&&i.isPropagationStopped())break e;a0(i,o,u),a=l}}}if(To)throw e=mm,To=!1,mm=null,e}function ge(e,t){var n=t[Em];n===void 0&&(n=t[Em]=new Set);var r=e+"__bubble";n.has(r)||($E(t,e,2,!1),n.add(r))}function Pu(e,t,n){var r=0;t&&(r|=4),$E(n,e,r,t)}var Ks="_reactListening"+Math.random().toString(36).slice(2);function Za(e){if(!e[Ks]){e[Ks]=!0,Kk.forEach(function(n){n!=="selectionchange"&&(LA.has(n)||Pu(n,!1,e),Pu(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Ks]||(t[Ks]=!0,Pu("selectionchange",!1,t))}}function $E(e,t,n,r){switch(kE(t)){case 1:var i=XN;break;case 4:i=JN;break;default:i=Tv}n=i.bind(null,t,n,e),i=void 0,!pm||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Nu(e,t,n,r,i){var a=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var s=r.tag;if(s===3||s===4){var o=r.stateNode.containerInfo;if(o===i||o.nodeType===8&&o.parentNode===i)break;if(s===4)for(s=r.return;s!==null;){var l=s.tag;if((l===3||l===4)&&(l=s.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;s=s.return}for(;o!==null;){if(s=jr(o),s===null)return;if(l=s.tag,l===5||l===6){r=a=s;continue e}o=o.parentNode}}r=r.return}cE(function(){var u=a,c=_v(n),d=[];e:{var f=FE.get(e);if(f!==void 0){var m=jv,v=e;switch(e){case"keypress":if(po(n)===0)break e;case"keydown":case"keyup":m=hA;break;case"focusin":v="focus",m=ku;break;case"focusout":v="blur",m=ku;break;case"beforeblur":case"afterblur":m=ku;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=Wg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=tA;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=vA;break;case DE:case OE:case LE:m=iA;break;case qE:m=gA;break;case"scroll":m=ZN;break;case"wheel":m=bA;break;case"copy":case"cut":case"paste":m=sA;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=Yg}var p=(t&4)!==0,x=!p&&e==="scroll",y=p?f!==null?f+"Capture":null:f;p=[];for(var g=u,b;g!==null;){b=g;var k=b.stateNode;if(b.tag===5&&k!==null&&(b=k,y!==null&&(k=Wa(g,y),k!=null&&p.push(es(g,k,b)))),x)break;g=g.return}0<p.length&&(f=new m(f,v,null,n,c),d.push({event:f,listeners:p}))}}if(!(t&7)){e:{if(f=e==="mouseover"||e==="pointerover",m=e==="mouseout"||e==="pointerout",f&&n!==fm&&(v=n.relatedTarget||n.fromElement)&&(jr(v)||v[Mn]))break e;if((m||f)&&(f=c.window===c?c:(f=c.ownerDocument)?f.defaultView||f.parentWindow:window,m?(v=n.relatedTarget||n.toElement,m=u,v=v?jr(v):null,v!==null&&(x=Gr(v),v!==x||v.tag!==5&&v.tag!==6)&&(v=null)):(m=null,v=u),m!==v)){if(p=Wg,k="onMouseLeave",y="onMouseEnter",g="mouse",(e==="pointerout"||e==="pointerover")&&(p=Yg,k="onPointerLeave",y="onPointerEnter",g="pointer"),x=m==null?f:yi(m),b=v==null?f:yi(v),f=new p(k,g+"leave",m,n,c),f.target=x,f.relatedTarget=b,k=null,jr(c)===u&&(p=new p(y,g+"enter",v,n,c),p.target=b,p.relatedTarget=x,k=p),x=k,m&&v)t:{for(p=m,y=v,g=0,b=p;b;b=ui(b))g++;for(b=0,k=y;k;k=ui(k))b++;for(;0<g-b;)p=ui(p),g--;for(;0<b-g;)y=ui(y),b--;for(;g--;){if(p===y||y!==null&&p===y.alternate)break t;p=ui(p),y=ui(y)}p=null}else p=null;m!==null&&s0(d,f,m,p,!1),v!==null&&x!==null&&s0(d,x,v,p,!0)}}e:{if(f=u?yi(u):window,m=f.nodeName&&f.nodeName.toLowerCase(),m==="select"||m==="input"&&f.type==="file")var _=TA;else if(Jg(f))if(PE)_=NA;else{_=jA;var C=MA}else(m=f.nodeName)&&m.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(_=PA);if(_&&(_=_(e,u))){jE(d,_,n,c);break e}C&&C(e,f,u),e==="focusout"&&(C=f._wrapperState)&&C.controlled&&f.type==="number"&&om(f,"number",f.value)}switch(C=u?yi(u):window,e){case"focusin":(Jg(C)||C.contentEditable==="true")&&(mi=C,wm=u,Oa=null);break;case"focusout":Oa=wm=mi=null;break;case"mousedown":bm=!0;break;case"contextmenu":case"mouseup":case"dragend":bm=!1,r0(d,n,c);break;case"selectionchange":if(IA)break;case"keydown":case"keyup":r0(d,n,c)}var M;if(Nv)e:{switch(e){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else pi?TE(e,n)&&(T="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(T="onCompositionStart");T&&(CE&&n.locale!=="ko"&&(pi||T!=="onCompositionStart"?T==="onCompositionEnd"&&pi&&(M=EE()):(Xn=c,Mv="value"in Xn?Xn.value:Xn.textContent,pi=!0)),C=Ao(u,T),0<C.length&&(T=new Kg(T,e,null,n,c),d.push({event:T,listeners:C}),M?T.data=M:(M=ME(n),M!==null&&(T.data=M)))),(M=SA?_A(e,n):kA(e,n))&&(u=Ao(u,"onBeforeInput"),0<u.length&&(c=new Kg("onBeforeInput","beforeinput",null,n,c),d.push({event:c,listeners:u}),c.data=M))}VE(d,t)})}function es(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Ao(e,t){for(var n=t+"Capture",r=[];e!==null;){var i=e,a=i.stateNode;i.tag===5&&a!==null&&(i=a,a=Wa(e,n),a!=null&&r.unshift(es(e,a,i)),a=Wa(e,t),a!=null&&r.push(es(e,a,i))),e=e.return}return r}function ui(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function s0(e,t,n,r,i){for(var a=t._reactName,s=[];n!==null&&n!==r;){var o=n,l=o.alternate,u=o.stateNode;if(l!==null&&l===r)break;o.tag===5&&u!==null&&(o=u,i?(l=Wa(n,a),l!=null&&s.unshift(es(n,l,o))):i||(l=Wa(n,a),l!=null&&s.push(es(n,l,o)))),n=n.return}s.length!==0&&e.push({event:t,listeners:s})}var qA=/\r\n?/g,FA=/\u0000|\uFFFD/g;function o0(e){return(typeof e=="string"?e:""+e).replace(qA,`
`).replace(FA,"")}function Ys(e,t,n){if(t=o0(t),o0(e)!==t&&n)throw Error(O(425))}function Ro(){}var xm=null,Sm=null;function _m(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var km=typeof setTimeout=="function"?setTimeout:void 0,VA=typeof clearTimeout=="function"?clearTimeout:void 0,l0=typeof Promise=="function"?Promise:void 0,$A=typeof queueMicrotask=="function"?queueMicrotask:typeof l0<"u"?function(e){return l0.resolve(null).then(e).catch(BA)}:km;function BA(e){setTimeout(function(){throw e})}function Au(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){e.removeChild(i),Qa(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Qa(t)}function nr(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function u0(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Wi=Math.random().toString(36).slice(2),an="__reactFiber$"+Wi,ts="__reactProps$"+Wi,Mn="__reactContainer$"+Wi,Em="__reactEvents$"+Wi,zA="__reactListeners$"+Wi,UA="__reactHandles$"+Wi;function jr(e){var t=e[an];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Mn]||n[an]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=u0(e);e!==null;){if(n=e[an])return n;e=u0(e)}return t}e=n,n=e.parentNode}return null}function vs(e){return e=e[an]||e[Mn],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function yi(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(O(33))}function dl(e){return e[ts]||null}var Cm=[],gi=-1;function pr(e){return{current:e}}function be(e){0>gi||(e.current=Cm[gi],Cm[gi]=null,gi--)}function ye(e,t){gi++,Cm[gi]=e.current,e.current=t}var ur={},at=pr(ur),pt=pr(!1),qr=ur;function Oi(e,t){var n=e.type.contextTypes;if(!n)return ur;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},a;for(a in n)i[a]=t[a];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function mt(e){return e=e.childContextTypes,e!=null}function Io(){be(pt),be(at)}function c0(e,t,n){if(at.current!==ur)throw Error(O(168));ye(at,t),ye(pt,n)}function BE(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(O(108,MN(e)||"Unknown",i));return je({},n,r)}function Do(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ur,qr=at.current,ye(at,e),ye(pt,pt.current),!0}function d0(e,t,n){var r=e.stateNode;if(!r)throw Error(O(169));n?(e=BE(e,t,qr),r.__reactInternalMemoizedMergedChildContext=e,be(pt),be(at),ye(at,e)):be(pt),ye(pt,n)}var gn=null,fl=!1,Ru=!1;function zE(e){gn===null?gn=[e]:gn.push(e)}function GA(e){fl=!0,zE(e)}function mr(){if(!Ru&&gn!==null){Ru=!0;var e=0,t=he;try{var n=gn;for(he=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}gn=null,fl=!1}catch(i){throw gn!==null&&(gn=gn.slice(e+1)),pE(kv,mr),i}finally{he=t,Ru=!1}}return null}var wi=[],bi=0,Oo=null,Lo=0,Rt=[],It=0,Fr=null,bn=1,xn="";function Er(e,t){wi[bi++]=Lo,wi[bi++]=Oo,Oo=e,Lo=t}function UE(e,t,n){Rt[It++]=bn,Rt[It++]=xn,Rt[It++]=Fr,Fr=e;var r=bn;e=xn;var i=32-Kt(r)-1;r&=~(1<<i),n+=1;var a=32-Kt(t)+i;if(30<a){var s=i-i%5;a=(r&(1<<s)-1).toString(32),r>>=s,i-=s,bn=1<<32-Kt(t)+i|n<<i|r,xn=a+e}else bn=1<<a|n<<i|r,xn=e}function Rv(e){e.return!==null&&(Er(e,1),UE(e,1,0))}function Iv(e){for(;e===Oo;)Oo=wi[--bi],wi[bi]=null,Lo=wi[--bi],wi[bi]=null;for(;e===Fr;)Fr=Rt[--It],Rt[It]=null,xn=Rt[--It],Rt[It]=null,bn=Rt[--It],Rt[It]=null}var St=null,xt=null,Se=!1,Wt=null;function GE(e,t){var n=Dt(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function f0(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,St=e,xt=nr(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,St=e,xt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Fr!==null?{id:bn,overflow:xn}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Dt(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,St=e,xt=null,!0):!1;default:return!1}}function Tm(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Mm(e){if(Se){var t=xt;if(t){var n=t;if(!f0(e,t)){if(Tm(e))throw Error(O(418));t=nr(n.nextSibling);var r=St;t&&f0(e,t)?GE(r,n):(e.flags=e.flags&-4097|2,Se=!1,St=e)}}else{if(Tm(e))throw Error(O(418));e.flags=e.flags&-4097|2,Se=!1,St=e}}}function h0(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;St=e}function Qs(e){if(e!==St)return!1;if(!Se)return h0(e),Se=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!_m(e.type,e.memoizedProps)),t&&(t=xt)){if(Tm(e))throw HE(),Error(O(418));for(;t;)GE(e,t),t=nr(t.nextSibling)}if(h0(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(O(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){xt=nr(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}xt=null}}else xt=St?nr(e.stateNode.nextSibling):null;return!0}function HE(){for(var e=xt;e;)e=nr(e.nextSibling)}function Li(){xt=St=null,Se=!1}function Dv(e){Wt===null?Wt=[e]:Wt.push(e)}var HA=Rn.ReactCurrentBatchConfig;function ha(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(O(309));var r=n.stateNode}if(!r)throw Error(O(147,e));var i=r,a=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===a?t.ref:(t=function(s){var o=i.refs;s===null?delete o[a]:o[a]=s},t._stringRef=a,t)}if(typeof e!="string")throw Error(O(284));if(!n._owner)throw Error(O(290,e))}return e}function Xs(e,t){throw e=Object.prototype.toString.call(t),Error(O(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function p0(e){var t=e._init;return t(e._payload)}function WE(e){function t(y,g){if(e){var b=y.deletions;b===null?(y.deletions=[g],y.flags|=16):b.push(g)}}function n(y,g){if(!e)return null;for(;g!==null;)t(y,g),g=g.sibling;return null}function r(y,g){for(y=new Map;g!==null;)g.key!==null?y.set(g.key,g):y.set(g.index,g),g=g.sibling;return y}function i(y,g){return y=sr(y,g),y.index=0,y.sibling=null,y}function a(y,g,b){return y.index=b,e?(b=y.alternate,b!==null?(b=b.index,b<g?(y.flags|=2,g):b):(y.flags|=2,g)):(y.flags|=1048576,g)}function s(y){return e&&y.alternate===null&&(y.flags|=2),y}function o(y,g,b,k){return g===null||g.tag!==6?(g=Vu(b,y.mode,k),g.return=y,g):(g=i(g,b),g.return=y,g)}function l(y,g,b,k){var _=b.type;return _===hi?c(y,g,b.props.children,k,b.key):g!==null&&(g.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===Hn&&p0(_)===g.type)?(k=i(g,b.props),k.ref=ha(y,g,b),k.return=y,k):(k=xo(b.type,b.key,b.props,null,y.mode,k),k.ref=ha(y,g,b),k.return=y,k)}function u(y,g,b,k){return g===null||g.tag!==4||g.stateNode.containerInfo!==b.containerInfo||g.stateNode.implementation!==b.implementation?(g=$u(b,y.mode,k),g.return=y,g):(g=i(g,b.children||[]),g.return=y,g)}function c(y,g,b,k,_){return g===null||g.tag!==7?(g=Dr(b,y.mode,k,_),g.return=y,g):(g=i(g,b),g.return=y,g)}function d(y,g,b){if(typeof g=="string"&&g!==""||typeof g=="number")return g=Vu(""+g,y.mode,b),g.return=y,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case Vs:return b=xo(g.type,g.key,g.props,null,y.mode,b),b.ref=ha(y,null,g),b.return=y,b;case fi:return g=$u(g,y.mode,b),g.return=y,g;case Hn:var k=g._init;return d(y,k(g._payload),b)}if(ba(g)||la(g))return g=Dr(g,y.mode,b,null),g.return=y,g;Xs(y,g)}return null}function f(y,g,b,k){var _=g!==null?g.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return _!==null?null:o(y,g,""+b,k);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Vs:return b.key===_?l(y,g,b,k):null;case fi:return b.key===_?u(y,g,b,k):null;case Hn:return _=b._init,f(y,g,_(b._payload),k)}if(ba(b)||la(b))return _!==null?null:c(y,g,b,k,null);Xs(y,b)}return null}function m(y,g,b,k,_){if(typeof k=="string"&&k!==""||typeof k=="number")return y=y.get(b)||null,o(g,y,""+k,_);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case Vs:return y=y.get(k.key===null?b:k.key)||null,l(g,y,k,_);case fi:return y=y.get(k.key===null?b:k.key)||null,u(g,y,k,_);case Hn:var C=k._init;return m(y,g,b,C(k._payload),_)}if(ba(k)||la(k))return y=y.get(b)||null,c(g,y,k,_,null);Xs(g,k)}return null}function v(y,g,b,k){for(var _=null,C=null,M=g,T=g=0,j=null;M!==null&&T<b.length;T++){M.index>T?(j=M,M=null):j=M.sibling;var N=f(y,M,b[T],k);if(N===null){M===null&&(M=j);break}e&&M&&N.alternate===null&&t(y,M),g=a(N,g,T),C===null?_=N:C.sibling=N,C=N,M=j}if(T===b.length)return n(y,M),Se&&Er(y,T),_;if(M===null){for(;T<b.length;T++)M=d(y,b[T],k),M!==null&&(g=a(M,g,T),C===null?_=M:C.sibling=M,C=M);return Se&&Er(y,T),_}for(M=r(y,M);T<b.length;T++)j=m(M,y,T,b[T],k),j!==null&&(e&&j.alternate!==null&&M.delete(j.key===null?T:j.key),g=a(j,g,T),C===null?_=j:C.sibling=j,C=j);return e&&M.forEach(function(A){return t(y,A)}),Se&&Er(y,T),_}function p(y,g,b,k){var _=la(b);if(typeof _!="function")throw Error(O(150));if(b=_.call(b),b==null)throw Error(O(151));for(var C=_=null,M=g,T=g=0,j=null,N=b.next();M!==null&&!N.done;T++,N=b.next()){M.index>T?(j=M,M=null):j=M.sibling;var A=f(y,M,N.value,k);if(A===null){M===null&&(M=j);break}e&&M&&A.alternate===null&&t(y,M),g=a(A,g,T),C===null?_=A:C.sibling=A,C=A,M=j}if(N.done)return n(y,M),Se&&Er(y,T),_;if(M===null){for(;!N.done;T++,N=b.next())N=d(y,N.value,k),N!==null&&(g=a(N,g,T),C===null?_=N:C.sibling=N,C=N);return Se&&Er(y,T),_}for(M=r(y,M);!N.done;T++,N=b.next())N=m(M,y,T,N.value,k),N!==null&&(e&&N.alternate!==null&&M.delete(N.key===null?T:N.key),g=a(N,g,T),C===null?_=N:C.sibling=N,C=N);return e&&M.forEach(function(I){return t(y,I)}),Se&&Er(y,T),_}function x(y,g,b,k){if(typeof b=="object"&&b!==null&&b.type===hi&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case Vs:e:{for(var _=b.key,C=g;C!==null;){if(C.key===_){if(_=b.type,_===hi){if(C.tag===7){n(y,C.sibling),g=i(C,b.props.children),g.return=y,y=g;break e}}else if(C.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===Hn&&p0(_)===C.type){n(y,C.sibling),g=i(C,b.props),g.ref=ha(y,C,b),g.return=y,y=g;break e}n(y,C);break}else t(y,C);C=C.sibling}b.type===hi?(g=Dr(b.props.children,y.mode,k,b.key),g.return=y,y=g):(k=xo(b.type,b.key,b.props,null,y.mode,k),k.ref=ha(y,g,b),k.return=y,y=k)}return s(y);case fi:e:{for(C=b.key;g!==null;){if(g.key===C)if(g.tag===4&&g.stateNode.containerInfo===b.containerInfo&&g.stateNode.implementation===b.implementation){n(y,g.sibling),g=i(g,b.children||[]),g.return=y,y=g;break e}else{n(y,g);break}else t(y,g);g=g.sibling}g=$u(b,y.mode,k),g.return=y,y=g}return s(y);case Hn:return C=b._init,x(y,g,C(b._payload),k)}if(ba(b))return v(y,g,b,k);if(la(b))return p(y,g,b,k);Xs(y,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,g!==null&&g.tag===6?(n(y,g.sibling),g=i(g,b),g.return=y,y=g):(n(y,g),g=Vu(b,y.mode,k),g.return=y,y=g),s(y)):n(y,g)}return x}var qi=WE(!0),KE=WE(!1),qo=pr(null),Fo=null,xi=null,Ov=null;function Lv(){Ov=xi=Fo=null}function qv(e){var t=qo.current;be(qo),e._currentValue=t}function jm(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ri(e,t){Fo=e,Ov=xi=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(ht=!0),e.firstContext=null)}function Lt(e){var t=e._currentValue;if(Ov!==e)if(e={context:e,memoizedValue:t,next:null},xi===null){if(Fo===null)throw Error(O(308));xi=e,Fo.dependencies={lanes:0,firstContext:e}}else xi=xi.next=e;return t}var Pr=null;function Fv(e){Pr===null?Pr=[e]:Pr.push(e)}function YE(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,Fv(t)):(n.next=i.next,i.next=n),t.interleaved=n,jn(e,r)}function jn(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Wn=!1;function Vv(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function QE(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function kn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function rr(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,se&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,jn(e,n)}return i=r.interleaved,i===null?(t.next=t,Fv(r)):(t.next=i.next,i.next=t),r.interleaved=t,jn(e,n)}function mo(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Ev(e,n)}}function m0(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,a=null;if(n=n.firstBaseUpdate,n!==null){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};a===null?i=a=s:a=a.next=s,n=n.next}while(n!==null);a===null?i=a=t:a=a.next=t}else i=a=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Vo(e,t,n,r){var i=e.updateQueue;Wn=!1;var a=i.firstBaseUpdate,s=i.lastBaseUpdate,o=i.shared.pending;if(o!==null){i.shared.pending=null;var l=o,u=l.next;l.next=null,s===null?a=u:s.next=u,s=l;var c=e.alternate;c!==null&&(c=c.updateQueue,o=c.lastBaseUpdate,o!==s&&(o===null?c.firstBaseUpdate=u:o.next=u,c.lastBaseUpdate=l))}if(a!==null){var d=i.baseState;s=0,c=u=l=null,o=a;do{var f=o.lane,m=o.eventTime;if((r&f)===f){c!==null&&(c=c.next={eventTime:m,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var v=e,p=o;switch(f=t,m=n,p.tag){case 1:if(v=p.payload,typeof v=="function"){d=v.call(m,d,f);break e}d=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=p.payload,f=typeof v=="function"?v.call(m,d,f):v,f==null)break e;d=je({},d,f);break e;case 2:Wn=!0}}o.callback!==null&&o.lane!==0&&(e.flags|=64,f=i.effects,f===null?i.effects=[o]:f.push(o))}else m={eventTime:m,lane:f,tag:o.tag,payload:o.payload,callback:o.callback,next:null},c===null?(u=c=m,l=d):c=c.next=m,s|=f;if(o=o.next,o===null){if(o=i.shared.pending,o===null)break;f=o,o=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);if(c===null&&(l=d),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,t=i.shared.interleaved,t!==null){i=t;do s|=i.lane,i=i.next;while(i!==t)}else a===null&&(i.shared.lanes=0);$r|=s,e.lanes=s,e.memoizedState=d}}function v0(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(O(191,i));i.call(r)}}}var ys={},ln=pr(ys),ns=pr(ys),rs=pr(ys);function Nr(e){if(e===ys)throw Error(O(174));return e}function $v(e,t){switch(ye(rs,t),ye(ns,e),ye(ln,ys),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:um(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=um(t,e)}be(ln),ye(ln,t)}function Fi(){be(ln),be(ns),be(rs)}function XE(e){Nr(rs.current);var t=Nr(ln.current),n=um(t,e.type);t!==n&&(ye(ns,e),ye(ln,n))}function Bv(e){ns.current===e&&(be(ln),be(ns))}var Ce=pr(0);function $o(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Iu=[];function zv(){for(var e=0;e<Iu.length;e++)Iu[e]._workInProgressVersionPrimary=null;Iu.length=0}var vo=Rn.ReactCurrentDispatcher,Du=Rn.ReactCurrentBatchConfig,Vr=0,Me=null,ze=null,He=null,Bo=!1,La=!1,is=0,WA=0;function et(){throw Error(O(321))}function Uv(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Qt(e[n],t[n]))return!1;return!0}function Gv(e,t,n,r,i,a){if(Vr=a,Me=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,vo.current=e===null||e.memoizedState===null?XA:JA,e=n(r,i),La){a=0;do{if(La=!1,is=0,25<=a)throw Error(O(301));a+=1,He=ze=null,t.updateQueue=null,vo.current=ZA,e=n(r,i)}while(La)}if(vo.current=zo,t=ze!==null&&ze.next!==null,Vr=0,He=ze=Me=null,Bo=!1,t)throw Error(O(300));return e}function Hv(){var e=is!==0;return is=0,e}function rn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return He===null?Me.memoizedState=He=e:He=He.next=e,He}function qt(){if(ze===null){var e=Me.alternate;e=e!==null?e.memoizedState:null}else e=ze.next;var t=He===null?Me.memoizedState:He.next;if(t!==null)He=t,ze=e;else{if(e===null)throw Error(O(310));ze=e,e={memoizedState:ze.memoizedState,baseState:ze.baseState,baseQueue:ze.baseQueue,queue:ze.queue,next:null},He===null?Me.memoizedState=He=e:He=He.next=e}return He}function as(e,t){return typeof t=="function"?t(e):t}function Ou(e){var t=qt(),n=t.queue;if(n===null)throw Error(O(311));n.lastRenderedReducer=e;var r=ze,i=r.baseQueue,a=n.pending;if(a!==null){if(i!==null){var s=i.next;i.next=a.next,a.next=s}r.baseQueue=i=a,n.pending=null}if(i!==null){a=i.next,r=r.baseState;var o=s=null,l=null,u=a;do{var c=u.lane;if((Vr&c)===c)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var d={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(o=l=d,s=r):l=l.next=d,Me.lanes|=c,$r|=c}u=u.next}while(u!==null&&u!==a);l===null?s=r:l.next=o,Qt(r,t.memoizedState)||(ht=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=l,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do a=i.lane,Me.lanes|=a,$r|=a,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Lu(e){var t=qt(),n=t.queue;if(n===null)throw Error(O(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,a=t.memoizedState;if(i!==null){n.pending=null;var s=i=i.next;do a=e(a,s.action),s=s.next;while(s!==i);Qt(a,t.memoizedState)||(ht=!0),t.memoizedState=a,t.baseQueue===null&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function JE(){}function ZE(e,t){var n=Me,r=qt(),i=t(),a=!Qt(r.memoizedState,i);if(a&&(r.memoizedState=i,ht=!0),r=r.queue,Wv(nC.bind(null,n,r,e),[e]),r.getSnapshot!==t||a||He!==null&&He.memoizedState.tag&1){if(n.flags|=2048,ss(9,tC.bind(null,n,r,i,t),void 0,null),We===null)throw Error(O(349));Vr&30||eC(n,t,i)}return i}function eC(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Me.updateQueue,t===null?(t={lastEffect:null,stores:null},Me.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function tC(e,t,n,r){t.value=n,t.getSnapshot=r,rC(t)&&iC(e)}function nC(e,t,n){return n(function(){rC(t)&&iC(e)})}function rC(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Qt(e,n)}catch{return!0}}function iC(e){var t=jn(e,1);t!==null&&Yt(t,e,1,-1)}function y0(e){var t=rn();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:as,lastRenderedState:e},t.queue=e,e=e.dispatch=QA.bind(null,Me,e),[t.memoizedState,e]}function ss(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Me.updateQueue,t===null?(t={lastEffect:null,stores:null},Me.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function aC(){return qt().memoizedState}function yo(e,t,n,r){var i=rn();Me.flags|=e,i.memoizedState=ss(1|t,n,void 0,r===void 0?null:r)}function hl(e,t,n,r){var i=qt();r=r===void 0?null:r;var a=void 0;if(ze!==null){var s=ze.memoizedState;if(a=s.destroy,r!==null&&Uv(r,s.deps)){i.memoizedState=ss(t,n,a,r);return}}Me.flags|=e,i.memoizedState=ss(1|t,n,a,r)}function g0(e,t){return yo(8390656,8,e,t)}function Wv(e,t){return hl(2048,8,e,t)}function sC(e,t){return hl(4,2,e,t)}function oC(e,t){return hl(4,4,e,t)}function lC(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function uC(e,t,n){return n=n!=null?n.concat([e]):null,hl(4,4,lC.bind(null,t,e),n)}function Kv(){}function cC(e,t){var n=qt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Uv(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function dC(e,t){var n=qt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Uv(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function fC(e,t,n){return Vr&21?(Qt(n,t)||(n=yE(),Me.lanes|=n,$r|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,ht=!0),e.memoizedState=n)}function KA(e,t){var n=he;he=n!==0&&4>n?n:4,e(!0);var r=Du.transition;Du.transition={};try{e(!1),t()}finally{he=n,Du.transition=r}}function hC(){return qt().memoizedState}function YA(e,t,n){var r=ar(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},pC(e))mC(t,n);else if(n=YE(e,t,n,r),n!==null){var i=ut();Yt(n,e,r,i),vC(n,t,r)}}function QA(e,t,n){var r=ar(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(pC(e))mC(t,i);else{var a=e.alternate;if(e.lanes===0&&(a===null||a.lanes===0)&&(a=t.lastRenderedReducer,a!==null))try{var s=t.lastRenderedState,o=a(s,n);if(i.hasEagerState=!0,i.eagerState=o,Qt(o,s)){var l=t.interleaved;l===null?(i.next=i,Fv(t)):(i.next=l.next,l.next=i),t.interleaved=i;return}}catch{}finally{}n=YE(e,t,i,r),n!==null&&(i=ut(),Yt(n,e,r,i),vC(n,t,r))}}function pC(e){var t=e.alternate;return e===Me||t!==null&&t===Me}function mC(e,t){La=Bo=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function vC(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Ev(e,n)}}var zo={readContext:Lt,useCallback:et,useContext:et,useEffect:et,useImperativeHandle:et,useInsertionEffect:et,useLayoutEffect:et,useMemo:et,useReducer:et,useRef:et,useState:et,useDebugValue:et,useDeferredValue:et,useTransition:et,useMutableSource:et,useSyncExternalStore:et,useId:et,unstable_isNewReconciler:!1},XA={readContext:Lt,useCallback:function(e,t){return rn().memoizedState=[e,t===void 0?null:t],e},useContext:Lt,useEffect:g0,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,yo(4194308,4,lC.bind(null,t,e),n)},useLayoutEffect:function(e,t){return yo(4194308,4,e,t)},useInsertionEffect:function(e,t){return yo(4,2,e,t)},useMemo:function(e,t){var n=rn();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=rn();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=YA.bind(null,Me,e),[r.memoizedState,e]},useRef:function(e){var t=rn();return e={current:e},t.memoizedState=e},useState:y0,useDebugValue:Kv,useDeferredValue:function(e){return rn().memoizedState=e},useTransition:function(){var e=y0(!1),t=e[0];return e=KA.bind(null,e[1]),rn().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Me,i=rn();if(Se){if(n===void 0)throw Error(O(407));n=n()}else{if(n=t(),We===null)throw Error(O(349));Vr&30||eC(r,t,n)}i.memoizedState=n;var a={value:n,getSnapshot:t};return i.queue=a,g0(nC.bind(null,r,a,e),[e]),r.flags|=2048,ss(9,tC.bind(null,r,a,n,t),void 0,null),n},useId:function(){var e=rn(),t=We.identifierPrefix;if(Se){var n=xn,r=bn;n=(r&~(1<<32-Kt(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=is++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=WA++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},JA={readContext:Lt,useCallback:cC,useContext:Lt,useEffect:Wv,useImperativeHandle:uC,useInsertionEffect:sC,useLayoutEffect:oC,useMemo:dC,useReducer:Ou,useRef:aC,useState:function(){return Ou(as)},useDebugValue:Kv,useDeferredValue:function(e){var t=qt();return fC(t,ze.memoizedState,e)},useTransition:function(){var e=Ou(as)[0],t=qt().memoizedState;return[e,t]},useMutableSource:JE,useSyncExternalStore:ZE,useId:hC,unstable_isNewReconciler:!1},ZA={readContext:Lt,useCallback:cC,useContext:Lt,useEffect:Wv,useImperativeHandle:uC,useInsertionEffect:sC,useLayoutEffect:oC,useMemo:dC,useReducer:Lu,useRef:aC,useState:function(){return Lu(as)},useDebugValue:Kv,useDeferredValue:function(e){var t=qt();return ze===null?t.memoizedState=e:fC(t,ze.memoizedState,e)},useTransition:function(){var e=Lu(as)[0],t=qt().memoizedState;return[e,t]},useMutableSource:JE,useSyncExternalStore:ZE,useId:hC,unstable_isNewReconciler:!1};function Gt(e,t){if(e&&e.defaultProps){t=je({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Pm(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:je({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var pl={isMounted:function(e){return(e=e._reactInternals)?Gr(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ut(),i=ar(e),a=kn(r,i);a.payload=t,n!=null&&(a.callback=n),t=rr(e,a,i),t!==null&&(Yt(t,e,i,r),mo(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ut(),i=ar(e),a=kn(r,i);a.tag=1,a.payload=t,n!=null&&(a.callback=n),t=rr(e,a,i),t!==null&&(Yt(t,e,i,r),mo(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ut(),r=ar(e),i=kn(n,r);i.tag=2,t!=null&&(i.callback=t),t=rr(e,i,r),t!==null&&(Yt(t,e,r,n),mo(t,e,r))}};function w0(e,t,n,r,i,a,s){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,a,s):t.prototype&&t.prototype.isPureReactComponent?!Ja(n,r)||!Ja(i,a):!0}function yC(e,t,n){var r=!1,i=ur,a=t.contextType;return typeof a=="object"&&a!==null?a=Lt(a):(i=mt(t)?qr:at.current,r=t.contextTypes,a=(r=r!=null)?Oi(e,i):ur),t=new t(n,a),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=pl,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function b0(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&pl.enqueueReplaceState(t,t.state,null)}function Nm(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},Vv(e);var a=t.contextType;typeof a=="object"&&a!==null?i.context=Lt(a):(a=mt(t)?qr:at.current,i.context=Oi(e,a)),i.state=e.memoizedState,a=t.getDerivedStateFromProps,typeof a=="function"&&(Pm(e,t,a,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&pl.enqueueReplaceState(i,i.state,null),Vo(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function Vi(e,t){try{var n="",r=t;do n+=TN(r),r=r.return;while(r);var i=n}catch(a){i=`
Error generating stack: `+a.message+`
`+a.stack}return{value:e,source:t,stack:i,digest:null}}function qu(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Am(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var eR=typeof WeakMap=="function"?WeakMap:Map;function gC(e,t,n){n=kn(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Go||(Go=!0,Bm=r),Am(e,t)},n}function wC(e,t,n){n=kn(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){Am(e,t)}}var a=e.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(n.callback=function(){Am(e,t),typeof r!="function"&&(ir===null?ir=new Set([this]):ir.add(this));var s=t.stack;this.componentDidCatch(t.value,{componentStack:s!==null?s:""})}),n}function x0(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new eR;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=pR.bind(null,e,t,n),t.then(e,e))}function S0(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function _0(e,t,n,r,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=kn(-1,1),t.tag=2,rr(n,t,1))),n.lanes|=1),e)}var tR=Rn.ReactCurrentOwner,ht=!1;function lt(e,t,n,r){t.child=e===null?KE(t,null,n,r):qi(t,e.child,n,r)}function k0(e,t,n,r,i){n=n.render;var a=t.ref;return Ri(t,i),r=Gv(e,t,n,r,a,i),n=Hv(),e!==null&&!ht?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Pn(e,t,i)):(Se&&n&&Rv(t),t.flags|=1,lt(e,t,r,i),t.child)}function E0(e,t,n,r,i){if(e===null){var a=n.type;return typeof a=="function"&&!ny(a)&&a.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=a,bC(e,t,a,r,i)):(e=xo(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(a=e.child,!(e.lanes&i)){var s=a.memoizedProps;if(n=n.compare,n=n!==null?n:Ja,n(s,r)&&e.ref===t.ref)return Pn(e,t,i)}return t.flags|=1,e=sr(a,r),e.ref=t.ref,e.return=t,t.child=e}function bC(e,t,n,r,i){if(e!==null){var a=e.memoizedProps;if(Ja(a,r)&&e.ref===t.ref)if(ht=!1,t.pendingProps=r=a,(e.lanes&i)!==0)e.flags&131072&&(ht=!0);else return t.lanes=e.lanes,Pn(e,t,i)}return Rm(e,t,n,r,i)}function xC(e,t,n){var r=t.pendingProps,i=r.children,a=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ye(_i,gt),gt|=n;else{if(!(n&1073741824))return e=a!==null?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ye(_i,gt),gt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=a!==null?a.baseLanes:n,ye(_i,gt),gt|=r}else a!==null?(r=a.baseLanes|n,t.memoizedState=null):r=n,ye(_i,gt),gt|=r;return lt(e,t,i,n),t.child}function SC(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Rm(e,t,n,r,i){var a=mt(n)?qr:at.current;return a=Oi(t,a),Ri(t,i),n=Gv(e,t,n,r,a,i),r=Hv(),e!==null&&!ht?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Pn(e,t,i)):(Se&&r&&Rv(t),t.flags|=1,lt(e,t,n,i),t.child)}function C0(e,t,n,r,i){if(mt(n)){var a=!0;Do(t)}else a=!1;if(Ri(t,i),t.stateNode===null)go(e,t),yC(t,n,r),Nm(t,n,r,i),r=!0;else if(e===null){var s=t.stateNode,o=t.memoizedProps;s.props=o;var l=s.context,u=n.contextType;typeof u=="object"&&u!==null?u=Lt(u):(u=mt(n)?qr:at.current,u=Oi(t,u));var c=n.getDerivedStateFromProps,d=typeof c=="function"||typeof s.getSnapshotBeforeUpdate=="function";d||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(o!==r||l!==u)&&b0(t,s,r,u),Wn=!1;var f=t.memoizedState;s.state=f,Vo(t,r,s,i),l=t.memoizedState,o!==r||f!==l||pt.current||Wn?(typeof c=="function"&&(Pm(t,n,c,r),l=t.memoizedState),(o=Wn||w0(t,n,o,r,f,l,u))?(d||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(t.flags|=4194308)):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),s.props=r,s.state=l,s.context=u,r=o):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{s=t.stateNode,QE(e,t),o=t.memoizedProps,u=t.type===t.elementType?o:Gt(t.type,o),s.props=u,d=t.pendingProps,f=s.context,l=n.contextType,typeof l=="object"&&l!==null?l=Lt(l):(l=mt(n)?qr:at.current,l=Oi(t,l));var m=n.getDerivedStateFromProps;(c=typeof m=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(o!==d||f!==l)&&b0(t,s,r,l),Wn=!1,f=t.memoizedState,s.state=f,Vo(t,r,s,i);var v=t.memoizedState;o!==d||f!==v||pt.current||Wn?(typeof m=="function"&&(Pm(t,n,m,r),v=t.memoizedState),(u=Wn||w0(t,n,u,r,f,v,l)||!1)?(c||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(r,v,l),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(r,v,l)),typeof s.componentDidUpdate=="function"&&(t.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof s.componentDidUpdate!="function"||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=v),s.props=r,s.state=v,s.context=l,r=u):(typeof s.componentDidUpdate!="function"||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),r=!1)}return Im(e,t,n,r,a,i)}function Im(e,t,n,r,i,a){SC(e,t);var s=(t.flags&128)!==0;if(!r&&!s)return i&&d0(t,n,!1),Pn(e,t,a);r=t.stateNode,tR.current=t;var o=s&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&s?(t.child=qi(t,e.child,null,a),t.child=qi(t,null,o,a)):lt(e,t,o,a),t.memoizedState=r.state,i&&d0(t,n,!0),t.child}function _C(e){var t=e.stateNode;t.pendingContext?c0(e,t.pendingContext,t.pendingContext!==t.context):t.context&&c0(e,t.context,!1),$v(e,t.containerInfo)}function T0(e,t,n,r,i){return Li(),Dv(i),t.flags|=256,lt(e,t,n,r),t.child}var Dm={dehydrated:null,treeContext:null,retryLane:0};function Om(e){return{baseLanes:e,cachePool:null,transitions:null}}function kC(e,t,n){var r=t.pendingProps,i=Ce.current,a=!1,s=(t.flags&128)!==0,o;if((o=s)||(o=e!==null&&e.memoizedState===null?!1:(i&2)!==0),o?(a=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),ye(Ce,i&1),e===null)return Mm(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(s=r.children,e=r.fallback,a?(r=t.mode,a=t.child,s={mode:"hidden",children:s},!(r&1)&&a!==null?(a.childLanes=0,a.pendingProps=s):a=yl(s,r,0,null),e=Dr(e,r,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=Om(n),t.memoizedState=Dm,e):Yv(t,s));if(i=e.memoizedState,i!==null&&(o=i.dehydrated,o!==null))return nR(e,t,s,r,o,i,n);if(a){a=r.fallback,s=t.mode,i=e.child,o=i.sibling;var l={mode:"hidden",children:r.children};return!(s&1)&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=l,t.deletions=null):(r=sr(i,l),r.subtreeFlags=i.subtreeFlags&14680064),o!==null?a=sr(o,a):(a=Dr(a,s,n,null),a.flags|=2),a.return=t,r.return=t,r.sibling=a,t.child=r,r=a,a=t.child,s=e.child.memoizedState,s=s===null?Om(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},a.memoizedState=s,a.childLanes=e.childLanes&~n,t.memoizedState=Dm,r}return a=e.child,e=a.sibling,r=sr(a,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Yv(e,t){return t=yl({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Js(e,t,n,r){return r!==null&&Dv(r),qi(t,e.child,null,n),e=Yv(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function nR(e,t,n,r,i,a,s){if(n)return t.flags&256?(t.flags&=-257,r=qu(Error(O(422))),Js(e,t,s,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(a=r.fallback,i=t.mode,r=yl({mode:"visible",children:r.children},i,0,null),a=Dr(a,i,s,null),a.flags|=2,r.return=t,a.return=t,r.sibling=a,t.child=r,t.mode&1&&qi(t,e.child,null,s),t.child.memoizedState=Om(s),t.memoizedState=Dm,a);if(!(t.mode&1))return Js(e,t,s,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var o=r.dgst;return r=o,a=Error(O(419)),r=qu(a,r,void 0),Js(e,t,s,r)}if(o=(s&e.childLanes)!==0,ht||o){if(r=We,r!==null){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|s)?0:i,i!==0&&i!==a.retryLane&&(a.retryLane=i,jn(e,i),Yt(r,e,i,-1))}return ty(),r=qu(Error(O(421))),Js(e,t,s,r)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=mR.bind(null,e),i._reactRetry=t,null):(e=a.treeContext,xt=nr(i.nextSibling),St=t,Se=!0,Wt=null,e!==null&&(Rt[It++]=bn,Rt[It++]=xn,Rt[It++]=Fr,bn=e.id,xn=e.overflow,Fr=t),t=Yv(t,r.children),t.flags|=4096,t)}function M0(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),jm(e.return,t,n)}function Fu(e,t,n,r,i){var a=e.memoizedState;a===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function EC(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(lt(e,t,r.children,n),r=Ce.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&M0(e,n,t);else if(e.tag===19)M0(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(ye(Ce,r),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&$o(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Fu(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&$o(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Fu(t,!0,n,null,a);break;case"together":Fu(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function go(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Pn(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),$r|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(O(153));if(t.child!==null){for(e=t.child,n=sr(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=sr(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function rR(e,t,n){switch(t.tag){case 3:_C(t),Li();break;case 5:XE(t);break;case 1:mt(t.type)&&Do(t);break;case 4:$v(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;ye(qo,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(ye(Ce,Ce.current&1),t.flags|=128,null):n&t.child.childLanes?kC(e,t,n):(ye(Ce,Ce.current&1),e=Pn(e,t,n),e!==null?e.sibling:null);ye(Ce,Ce.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return EC(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),ye(Ce,Ce.current),r)break;return null;case 22:case 23:return t.lanes=0,xC(e,t,n)}return Pn(e,t,n)}var CC,Lm,TC,MC;CC=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Lm=function(){};TC=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Nr(ln.current);var a=null;switch(n){case"input":i=am(e,i),r=am(e,r),a=[];break;case"select":i=je({},i,{value:void 0}),r=je({},r,{value:void 0}),a=[];break;case"textarea":i=lm(e,i),r=lm(e,r),a=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Ro)}cm(n,r);var s;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var o=i[u];for(s in o)o.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Ga.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in r){var l=r[u];if(o=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&l!==o&&(l!=null||o!=null))if(u==="style")if(o){for(s in o)!o.hasOwnProperty(s)||l&&l.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in l)l.hasOwnProperty(s)&&o[s]!==l[s]&&(n||(n={}),n[s]=l[s])}else n||(a||(a=[]),a.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,o=o?o.__html:void 0,l!=null&&o!==l&&(a=a||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(a=a||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Ga.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&ge("scroll",e),a||o===l||(a=[])):(a=a||[]).push(u,l))}n&&(a=a||[]).push("style",n);var u=a;(t.updateQueue=u)&&(t.flags|=4)}};MC=function(e,t,n,r){n!==r&&(t.flags|=4)};function pa(e,t){if(!Se)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function tt(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function iR(e,t,n){var r=t.pendingProps;switch(Iv(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return tt(t),null;case 1:return mt(t.type)&&Io(),tt(t),null;case 3:return r=t.stateNode,Fi(),be(pt),be(at),zv(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Qs(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Wt!==null&&(Gm(Wt),Wt=null))),Lm(e,t),tt(t),null;case 5:Bv(t);var i=Nr(rs.current);if(n=t.type,e!==null&&t.stateNode!=null)TC(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(O(166));return tt(t),null}if(e=Nr(ln.current),Qs(t)){r=t.stateNode,n=t.type;var a=t.memoizedProps;switch(r[an]=t,r[ts]=a,e=(t.mode&1)!==0,n){case"dialog":ge("cancel",r),ge("close",r);break;case"iframe":case"object":case"embed":ge("load",r);break;case"video":case"audio":for(i=0;i<Sa.length;i++)ge(Sa[i],r);break;case"source":ge("error",r);break;case"img":case"image":case"link":ge("error",r),ge("load",r);break;case"details":ge("toggle",r);break;case"input":Lg(r,a),ge("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},ge("invalid",r);break;case"textarea":Fg(r,a),ge("invalid",r)}cm(n,a),i=null;for(var s in a)if(a.hasOwnProperty(s)){var o=a[s];s==="children"?typeof o=="string"?r.textContent!==o&&(a.suppressHydrationWarning!==!0&&Ys(r.textContent,o,e),i=["children",o]):typeof o=="number"&&r.textContent!==""+o&&(a.suppressHydrationWarning!==!0&&Ys(r.textContent,o,e),i=["children",""+o]):Ga.hasOwnProperty(s)&&o!=null&&s==="onScroll"&&ge("scroll",r)}switch(n){case"input":$s(r),qg(r,a,!0);break;case"textarea":$s(r),Vg(r);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(r.onclick=Ro)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{s=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=nE(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=s.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=s.createElement(n,{is:r.is}):(e=s.createElement(n),n==="select"&&(s=e,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):e=s.createElementNS(e,n),e[an]=t,e[ts]=r,CC(e,t,!1,!1),t.stateNode=e;e:{switch(s=dm(n,r),n){case"dialog":ge("cancel",e),ge("close",e),i=r;break;case"iframe":case"object":case"embed":ge("load",e),i=r;break;case"video":case"audio":for(i=0;i<Sa.length;i++)ge(Sa[i],e);i=r;break;case"source":ge("error",e),i=r;break;case"img":case"image":case"link":ge("error",e),ge("load",e),i=r;break;case"details":ge("toggle",e),i=r;break;case"input":Lg(e,r),i=am(e,r),ge("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=je({},r,{value:void 0}),ge("invalid",e);break;case"textarea":Fg(e,r),i=lm(e,r),ge("invalid",e);break;default:i=r}cm(n,i),o=i;for(a in o)if(o.hasOwnProperty(a)){var l=o[a];a==="style"?aE(e,l):a==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&rE(e,l)):a==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Ha(e,l):typeof l=="number"&&Ha(e,""+l):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(Ga.hasOwnProperty(a)?l!=null&&a==="onScroll"&&ge("scroll",e):l!=null&&wv(e,a,l,s))}switch(n){case"input":$s(e),qg(e,r,!1);break;case"textarea":$s(e),Vg(e);break;case"option":r.value!=null&&e.setAttribute("value",""+lr(r.value));break;case"select":e.multiple=!!r.multiple,a=r.value,a!=null?ji(e,!!r.multiple,a,!1):r.defaultValue!=null&&ji(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=Ro)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return tt(t),null;case 6:if(e&&t.stateNode!=null)MC(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(O(166));if(n=Nr(rs.current),Nr(ln.current),Qs(t)){if(r=t.stateNode,n=t.memoizedProps,r[an]=t,(a=r.nodeValue!==n)&&(e=St,e!==null))switch(e.tag){case 3:Ys(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Ys(r.nodeValue,n,(e.mode&1)!==0)}a&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[an]=t,t.stateNode=r}return tt(t),null;case 13:if(be(Ce),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Se&&xt!==null&&t.mode&1&&!(t.flags&128))HE(),Li(),t.flags|=98560,a=!1;else if(a=Qs(t),r!==null&&r.dehydrated!==null){if(e===null){if(!a)throw Error(O(318));if(a=t.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(O(317));a[an]=t}else Li(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;tt(t),a=!1}else Wt!==null&&(Gm(Wt),Wt=null),a=!0;if(!a)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Ce.current&1?Ue===0&&(Ue=3):ty())),t.updateQueue!==null&&(t.flags|=4),tt(t),null);case 4:return Fi(),Lm(e,t),e===null&&Za(t.stateNode.containerInfo),tt(t),null;case 10:return qv(t.type._context),tt(t),null;case 17:return mt(t.type)&&Io(),tt(t),null;case 19:if(be(Ce),a=t.memoizedState,a===null)return tt(t),null;if(r=(t.flags&128)!==0,s=a.rendering,s===null)if(r)pa(a,!1);else{if(Ue!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(s=$o(e),s!==null){for(t.flags|=128,pa(a,!1),r=s.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)a=n,e=r,a.flags&=14680066,s=a.alternate,s===null?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=s.childLanes,a.lanes=s.lanes,a.child=s.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=s.memoizedProps,a.memoizedState=s.memoizedState,a.updateQueue=s.updateQueue,a.type=s.type,e=s.dependencies,a.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return ye(Ce,Ce.current&1|2),t.child}e=e.sibling}a.tail!==null&&Le()>$i&&(t.flags|=128,r=!0,pa(a,!1),t.lanes=4194304)}else{if(!r)if(e=$o(s),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),pa(a,!0),a.tail===null&&a.tailMode==="hidden"&&!s.alternate&&!Se)return tt(t),null}else 2*Le()-a.renderingStartTime>$i&&n!==1073741824&&(t.flags|=128,r=!0,pa(a,!1),t.lanes=4194304);a.isBackwards?(s.sibling=t.child,t.child=s):(n=a.last,n!==null?n.sibling=s:t.child=s,a.last=s)}return a.tail!==null?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=Le(),t.sibling=null,n=Ce.current,ye(Ce,r?n&1|2:n&1),t):(tt(t),null);case 22:case 23:return ey(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?gt&1073741824&&(tt(t),t.subtreeFlags&6&&(t.flags|=8192)):tt(t),null;case 24:return null;case 25:return null}throw Error(O(156,t.tag))}function aR(e,t){switch(Iv(t),t.tag){case 1:return mt(t.type)&&Io(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Fi(),be(pt),be(at),zv(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Bv(t),null;case 13:if(be(Ce),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(O(340));Li()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return be(Ce),null;case 4:return Fi(),null;case 10:return qv(t.type._context),null;case 22:case 23:return ey(),null;case 24:return null;default:return null}}var Zs=!1,rt=!1,sR=typeof WeakSet=="function"?WeakSet:Set,B=null;function Si(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ie(e,t,r)}else n.current=null}function qm(e,t,n){try{n()}catch(r){Ie(e,t,r)}}var j0=!1;function oR(e,t){if(xm=Po,e=RE(),Av(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch{n=null;break e}var s=0,o=-1,l=-1,u=0,c=0,d=e,f=null;t:for(;;){for(var m;d!==n||i!==0&&d.nodeType!==3||(o=s+i),d!==a||r!==0&&d.nodeType!==3||(l=s+r),d.nodeType===3&&(s+=d.nodeValue.length),(m=d.firstChild)!==null;)f=d,d=m;for(;;){if(d===e)break t;if(f===n&&++u===i&&(o=s),f===a&&++c===r&&(l=s),(m=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=m}n=o===-1||l===-1?null:{start:o,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Sm={focusedElem:e,selectionRange:n},Po=!1,B=t;B!==null;)if(t=B,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,B=e;else for(;B!==null;){t=B;try{var v=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var p=v.memoizedProps,x=v.memoizedState,y=t.stateNode,g=y.getSnapshotBeforeUpdate(t.elementType===t.type?p:Gt(t.type,p),x);y.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var b=t.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(O(163))}}catch(k){Ie(t,t.return,k)}if(e=t.sibling,e!==null){e.return=t.return,B=e;break}B=t.return}return v=j0,j0=!1,v}function qa(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,a!==void 0&&qm(t,n,a)}i=i.next}while(i!==r)}}function ml(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function Fm(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function jC(e){var t=e.alternate;t!==null&&(e.alternate=null,jC(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[an],delete t[ts],delete t[Em],delete t[zA],delete t[UA])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function PC(e){return e.tag===5||e.tag===3||e.tag===4}function P0(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||PC(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Vm(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Ro));else if(r!==4&&(e=e.child,e!==null))for(Vm(e,t,n),e=e.sibling;e!==null;)Vm(e,t,n),e=e.sibling}function $m(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for($m(e,t,n),e=e.sibling;e!==null;)$m(e,t,n),e=e.sibling}var Ye=null,Ht=!1;function Bn(e,t,n){for(n=n.child;n!==null;)NC(e,t,n),n=n.sibling}function NC(e,t,n){if(on&&typeof on.onCommitFiberUnmount=="function")try{on.onCommitFiberUnmount(ol,n)}catch{}switch(n.tag){case 5:rt||Si(n,t);case 6:var r=Ye,i=Ht;Ye=null,Bn(e,t,n),Ye=r,Ht=i,Ye!==null&&(Ht?(e=Ye,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Ye.removeChild(n.stateNode));break;case 18:Ye!==null&&(Ht?(e=Ye,n=n.stateNode,e.nodeType===8?Au(e.parentNode,n):e.nodeType===1&&Au(e,n),Qa(e)):Au(Ye,n.stateNode));break;case 4:r=Ye,i=Ht,Ye=n.stateNode.containerInfo,Ht=!0,Bn(e,t,n),Ye=r,Ht=i;break;case 0:case 11:case 14:case 15:if(!rt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var a=i,s=a.destroy;a=a.tag,s!==void 0&&(a&2||a&4)&&qm(n,t,s),i=i.next}while(i!==r)}Bn(e,t,n);break;case 1:if(!rt&&(Si(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){Ie(n,t,o)}Bn(e,t,n);break;case 21:Bn(e,t,n);break;case 22:n.mode&1?(rt=(r=rt)||n.memoizedState!==null,Bn(e,t,n),rt=r):Bn(e,t,n);break;default:Bn(e,t,n)}}function N0(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new sR),t.forEach(function(r){var i=vR.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function zt(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var a=e,s=t,o=s;e:for(;o!==null;){switch(o.tag){case 5:Ye=o.stateNode,Ht=!1;break e;case 3:Ye=o.stateNode.containerInfo,Ht=!0;break e;case 4:Ye=o.stateNode.containerInfo,Ht=!0;break e}o=o.return}if(Ye===null)throw Error(O(160));NC(a,s,i),Ye=null,Ht=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){Ie(i,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)AC(t,e),t=t.sibling}function AC(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(zt(t,e),nn(e),r&4){try{qa(3,e,e.return),ml(3,e)}catch(p){Ie(e,e.return,p)}try{qa(5,e,e.return)}catch(p){Ie(e,e.return,p)}}break;case 1:zt(t,e),nn(e),r&512&&n!==null&&Si(n,n.return);break;case 5:if(zt(t,e),nn(e),r&512&&n!==null&&Si(n,n.return),e.flags&32){var i=e.stateNode;try{Ha(i,"")}catch(p){Ie(e,e.return,p)}}if(r&4&&(i=e.stateNode,i!=null)){var a=e.memoizedProps,s=n!==null?n.memoizedProps:a,o=e.type,l=e.updateQueue;if(e.updateQueue=null,l!==null)try{o==="input"&&a.type==="radio"&&a.name!=null&&eE(i,a),dm(o,s);var u=dm(o,a);for(s=0;s<l.length;s+=2){var c=l[s],d=l[s+1];c==="style"?aE(i,d):c==="dangerouslySetInnerHTML"?rE(i,d):c==="children"?Ha(i,d):wv(i,c,d,u)}switch(o){case"input":sm(i,a);break;case"textarea":tE(i,a);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var m=a.value;m!=null?ji(i,!!a.multiple,m,!1):f!==!!a.multiple&&(a.defaultValue!=null?ji(i,!!a.multiple,a.defaultValue,!0):ji(i,!!a.multiple,a.multiple?[]:"",!1))}i[ts]=a}catch(p){Ie(e,e.return,p)}}break;case 6:if(zt(t,e),nn(e),r&4){if(e.stateNode===null)throw Error(O(162));i=e.stateNode,a=e.memoizedProps;try{i.nodeValue=a}catch(p){Ie(e,e.return,p)}}break;case 3:if(zt(t,e),nn(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Qa(t.containerInfo)}catch(p){Ie(e,e.return,p)}break;case 4:zt(t,e),nn(e);break;case 13:zt(t,e),nn(e),i=e.child,i.flags&8192&&(a=i.memoizedState!==null,i.stateNode.isHidden=a,!a||i.alternate!==null&&i.alternate.memoizedState!==null||(Jv=Le())),r&4&&N0(e);break;case 22:if(c=n!==null&&n.memoizedState!==null,e.mode&1?(rt=(u=rt)||c,zt(t,e),rt=u):zt(t,e),nn(e),r&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!c&&e.mode&1)for(B=e,c=e.child;c!==null;){for(d=B=c;B!==null;){switch(f=B,m=f.child,f.tag){case 0:case 11:case 14:case 15:qa(4,f,f.return);break;case 1:Si(f,f.return);var v=f.stateNode;if(typeof v.componentWillUnmount=="function"){r=f,n=f.return;try{t=r,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(p){Ie(r,n,p)}}break;case 5:Si(f,f.return);break;case 22:if(f.memoizedState!==null){R0(d);continue}}m!==null?(m.return=f,B=m):R0(d)}c=c.sibling}e:for(c=null,d=e;;){if(d.tag===5){if(c===null){c=d;try{i=d.stateNode,u?(a=i.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(o=d.stateNode,l=d.memoizedProps.style,s=l!=null&&l.hasOwnProperty("display")?l.display:null,o.style.display=iE("display",s))}catch(p){Ie(e,e.return,p)}}}else if(d.tag===6){if(c===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(p){Ie(e,e.return,p)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===e)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;d.sibling===null;){if(d.return===null||d.return===e)break e;c===d&&(c=null),d=d.return}c===d&&(c=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:zt(t,e),nn(e),r&4&&N0(e);break;case 21:break;default:zt(t,e),nn(e)}}function nn(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(PC(n)){var r=n;break e}n=n.return}throw Error(O(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Ha(i,""),r.flags&=-33);var a=P0(e);$m(e,a,i);break;case 3:case 4:var s=r.stateNode.containerInfo,o=P0(e);Vm(e,o,s);break;default:throw Error(O(161))}}catch(l){Ie(e,e.return,l)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function lR(e,t,n){B=e,RC(e)}function RC(e,t,n){for(var r=(e.mode&1)!==0;B!==null;){var i=B,a=i.child;if(i.tag===22&&r){var s=i.memoizedState!==null||Zs;if(!s){var o=i.alternate,l=o!==null&&o.memoizedState!==null||rt;o=Zs;var u=rt;if(Zs=s,(rt=l)&&!u)for(B=i;B!==null;)s=B,l=s.child,s.tag===22&&s.memoizedState!==null?I0(i):l!==null?(l.return=s,B=l):I0(i);for(;a!==null;)B=a,RC(a),a=a.sibling;B=i,Zs=o,rt=u}A0(e)}else i.subtreeFlags&8772&&a!==null?(a.return=i,B=a):A0(e)}}function A0(e){for(;B!==null;){var t=B;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:rt||ml(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!rt)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:Gt(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;a!==null&&v0(t,a,r);break;case 3:var s=t.updateQueue;if(s!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}v0(t,s,n)}break;case 5:var o=t.stateNode;if(n===null&&t.flags&4){n=o;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var d=c.dehydrated;d!==null&&Qa(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(O(163))}rt||t.flags&512&&Fm(t)}catch(f){Ie(t,t.return,f)}}if(t===e){B=null;break}if(n=t.sibling,n!==null){n.return=t.return,B=n;break}B=t.return}}function R0(e){for(;B!==null;){var t=B;if(t===e){B=null;break}var n=t.sibling;if(n!==null){n.return=t.return,B=n;break}B=t.return}}function I0(e){for(;B!==null;){var t=B;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{ml(4,t)}catch(l){Ie(t,n,l)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(l){Ie(t,i,l)}}var a=t.return;try{Fm(t)}catch(l){Ie(t,a,l)}break;case 5:var s=t.return;try{Fm(t)}catch(l){Ie(t,s,l)}}}catch(l){Ie(t,t.return,l)}if(t===e){B=null;break}var o=t.sibling;if(o!==null){o.return=t.return,B=o;break}B=t.return}}var uR=Math.ceil,Uo=Rn.ReactCurrentDispatcher,Qv=Rn.ReactCurrentOwner,Ot=Rn.ReactCurrentBatchConfig,se=0,We=null,Ve=null,Xe=0,gt=0,_i=pr(0),Ue=0,os=null,$r=0,vl=0,Xv=0,Fa=null,ft=null,Jv=0,$i=1/0,yn=null,Go=!1,Bm=null,ir=null,eo=!1,Jn=null,Ho=0,Va=0,zm=null,wo=-1,bo=0;function ut(){return se&6?Le():wo!==-1?wo:wo=Le()}function ar(e){return e.mode&1?se&2&&Xe!==0?Xe&-Xe:HA.transition!==null?(bo===0&&(bo=yE()),bo):(e=he,e!==0||(e=window.event,e=e===void 0?16:kE(e.type)),e):1}function Yt(e,t,n,r){if(50<Va)throw Va=0,zm=null,Error(O(185));ps(e,n,r),(!(se&2)||e!==We)&&(e===We&&(!(se&2)&&(vl|=n),Ue===4&&Yn(e,Xe)),vt(e,r),n===1&&se===0&&!(t.mode&1)&&($i=Le()+500,fl&&mr()))}function vt(e,t){var n=e.callbackNode;HN(e,t);var r=jo(e,e===We?Xe:0);if(r===0)n!==null&&zg(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&zg(n),t===1)e.tag===0?GA(D0.bind(null,e)):zE(D0.bind(null,e)),$A(function(){!(se&6)&&mr()}),n=null;else{switch(gE(r)){case 1:n=kv;break;case 4:n=mE;break;case 16:n=Mo;break;case 536870912:n=vE;break;default:n=Mo}n=$C(n,IC.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function IC(e,t){if(wo=-1,bo=0,se&6)throw Error(O(327));var n=e.callbackNode;if(Ii()&&e.callbackNode!==n)return null;var r=jo(e,e===We?Xe:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Wo(e,r);else{t=r;var i=se;se|=2;var a=OC();(We!==e||Xe!==t)&&(yn=null,$i=Le()+500,Ir(e,t));do try{fR();break}catch(o){DC(e,o)}while(!0);Lv(),Uo.current=a,se=i,Ve!==null?t=0:(We=null,Xe=0,t=Ue)}if(t!==0){if(t===2&&(i=vm(e),i!==0&&(r=i,t=Um(e,i))),t===1)throw n=os,Ir(e,0),Yn(e,r),vt(e,Le()),n;if(t===6)Yn(e,r);else{if(i=e.current.alternate,!(r&30)&&!cR(i)&&(t=Wo(e,r),t===2&&(a=vm(e),a!==0&&(r=a,t=Um(e,a))),t===1))throw n=os,Ir(e,0),Yn(e,r),vt(e,Le()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(O(345));case 2:Cr(e,ft,yn);break;case 3:if(Yn(e,r),(r&130023424)===r&&(t=Jv+500-Le(),10<t)){if(jo(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){ut(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=km(Cr.bind(null,e,ft,yn),t);break}Cr(e,ft,yn);break;case 4:if(Yn(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var s=31-Kt(r);a=1<<s,s=t[s],s>i&&(i=s),r&=~a}if(r=i,r=Le()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*uR(r/1960))-r,10<r){e.timeoutHandle=km(Cr.bind(null,e,ft,yn),r);break}Cr(e,ft,yn);break;case 5:Cr(e,ft,yn);break;default:throw Error(O(329))}}}return vt(e,Le()),e.callbackNode===n?IC.bind(null,e):null}function Um(e,t){var n=Fa;return e.current.memoizedState.isDehydrated&&(Ir(e,t).flags|=256),e=Wo(e,t),e!==2&&(t=ft,ft=n,t!==null&&Gm(t)),e}function Gm(e){ft===null?ft=e:ft.push.apply(ft,e)}function cR(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!Qt(a(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Yn(e,t){for(t&=~Xv,t&=~vl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Kt(t),r=1<<n;e[n]=-1,t&=~r}}function D0(e){if(se&6)throw Error(O(327));Ii();var t=jo(e,0);if(!(t&1))return vt(e,Le()),null;var n=Wo(e,t);if(e.tag!==0&&n===2){var r=vm(e);r!==0&&(t=r,n=Um(e,r))}if(n===1)throw n=os,Ir(e,0),Yn(e,t),vt(e,Le()),n;if(n===6)throw Error(O(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Cr(e,ft,yn),vt(e,Le()),null}function Zv(e,t){var n=se;se|=1;try{return e(t)}finally{se=n,se===0&&($i=Le()+500,fl&&mr())}}function Br(e){Jn!==null&&Jn.tag===0&&!(se&6)&&Ii();var t=se;se|=1;var n=Ot.transition,r=he;try{if(Ot.transition=null,he=1,e)return e()}finally{he=r,Ot.transition=n,se=t,!(se&6)&&mr()}}function ey(){gt=_i.current,be(_i)}function Ir(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,VA(n)),Ve!==null)for(n=Ve.return;n!==null;){var r=n;switch(Iv(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Io();break;case 3:Fi(),be(pt),be(at),zv();break;case 5:Bv(r);break;case 4:Fi();break;case 13:be(Ce);break;case 19:be(Ce);break;case 10:qv(r.type._context);break;case 22:case 23:ey()}n=n.return}if(We=e,Ve=e=sr(e.current,null),Xe=gt=t,Ue=0,os=null,Xv=vl=$r=0,ft=Fa=null,Pr!==null){for(t=0;t<Pr.length;t++)if(n=Pr[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,a=n.pending;if(a!==null){var s=a.next;a.next=i,r.next=s}n.pending=r}Pr=null}return e}function DC(e,t){do{var n=Ve;try{if(Lv(),vo.current=zo,Bo){for(var r=Me.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Bo=!1}if(Vr=0,He=ze=Me=null,La=!1,is=0,Qv.current=null,n===null||n.return===null){Ue=1,os=t,Ve=null;break}e:{var a=e,s=n.return,o=n,l=t;if(t=Xe,o.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,c=o,d=c.tag;if(!(c.mode&1)&&(d===0||d===11||d===15)){var f=c.alternate;f?(c.updateQueue=f.updateQueue,c.memoizedState=f.memoizedState,c.lanes=f.lanes):(c.updateQueue=null,c.memoizedState=null)}var m=S0(s);if(m!==null){m.flags&=-257,_0(m,s,o,a,t),m.mode&1&&x0(a,u,t),t=m,l=u;var v=t.updateQueue;if(v===null){var p=new Set;p.add(l),t.updateQueue=p}else v.add(l);break e}else{if(!(t&1)){x0(a,u,t),ty();break e}l=Error(O(426))}}else if(Se&&o.mode&1){var x=S0(s);if(x!==null){!(x.flags&65536)&&(x.flags|=256),_0(x,s,o,a,t),Dv(Vi(l,o));break e}}a=l=Vi(l,o),Ue!==4&&(Ue=2),Fa===null?Fa=[a]:Fa.push(a),a=s;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t;var y=gC(a,l,t);m0(a,y);break e;case 1:o=l;var g=a.type,b=a.stateNode;if(!(a.flags&128)&&(typeof g.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(ir===null||!ir.has(b)))){a.flags|=65536,t&=-t,a.lanes|=t;var k=wC(a,o,t);m0(a,k);break e}}a=a.return}while(a!==null)}qC(n)}catch(_){t=_,Ve===n&&n!==null&&(Ve=n=n.return);continue}break}while(!0)}function OC(){var e=Uo.current;return Uo.current=zo,e===null?zo:e}function ty(){(Ue===0||Ue===3||Ue===2)&&(Ue=4),We===null||!($r&268435455)&&!(vl&268435455)||Yn(We,Xe)}function Wo(e,t){var n=se;se|=2;var r=OC();(We!==e||Xe!==t)&&(yn=null,Ir(e,t));do try{dR();break}catch(i){DC(e,i)}while(!0);if(Lv(),se=n,Uo.current=r,Ve!==null)throw Error(O(261));return We=null,Xe=0,Ue}function dR(){for(;Ve!==null;)LC(Ve)}function fR(){for(;Ve!==null&&!LN();)LC(Ve)}function LC(e){var t=VC(e.alternate,e,gt);e.memoizedProps=e.pendingProps,t===null?qC(e):Ve=t,Qv.current=null}function qC(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=aR(n,t),n!==null){n.flags&=32767,Ve=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Ue=6,Ve=null;return}}else if(n=iR(n,t,gt),n!==null){Ve=n;return}if(t=t.sibling,t!==null){Ve=t;return}Ve=t=e}while(t!==null);Ue===0&&(Ue=5)}function Cr(e,t,n){var r=he,i=Ot.transition;try{Ot.transition=null,he=1,hR(e,t,n,r)}finally{Ot.transition=i,he=r}return null}function hR(e,t,n,r){do Ii();while(Jn!==null);if(se&6)throw Error(O(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(O(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(WN(e,a),e===We&&(Ve=We=null,Xe=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||eo||(eo=!0,$C(Mo,function(){return Ii(),null})),a=(n.flags&15990)!==0,n.subtreeFlags&15990||a){a=Ot.transition,Ot.transition=null;var s=he;he=1;var o=se;se|=4,Qv.current=null,oR(e,n),AC(n,e),RA(Sm),Po=!!xm,Sm=xm=null,e.current=n,lR(n),qN(),se=o,he=s,Ot.transition=a}else e.current=n;if(eo&&(eo=!1,Jn=e,Ho=i),a=e.pendingLanes,a===0&&(ir=null),$N(n.stateNode),vt(e,Le()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Go)throw Go=!1,e=Bm,Bm=null,e;return Ho&1&&e.tag!==0&&Ii(),a=e.pendingLanes,a&1?e===zm?Va++:(Va=0,zm=e):Va=0,mr(),null}function Ii(){if(Jn!==null){var e=gE(Ho),t=Ot.transition,n=he;try{if(Ot.transition=null,he=16>e?16:e,Jn===null)var r=!1;else{if(e=Jn,Jn=null,Ho=0,se&6)throw Error(O(331));var i=se;for(se|=4,B=e.current;B!==null;){var a=B,s=a.child;if(B.flags&16){var o=a.deletions;if(o!==null){for(var l=0;l<o.length;l++){var u=o[l];for(B=u;B!==null;){var c=B;switch(c.tag){case 0:case 11:case 15:qa(8,c,a)}var d=c.child;if(d!==null)d.return=c,B=d;else for(;B!==null;){c=B;var f=c.sibling,m=c.return;if(jC(c),c===u){B=null;break}if(f!==null){f.return=m,B=f;break}B=m}}}var v=a.alternate;if(v!==null){var p=v.child;if(p!==null){v.child=null;do{var x=p.sibling;p.sibling=null,p=x}while(p!==null)}}B=a}}if(a.subtreeFlags&2064&&s!==null)s.return=a,B=s;else e:for(;B!==null;){if(a=B,a.flags&2048)switch(a.tag){case 0:case 11:case 15:qa(9,a,a.return)}var y=a.sibling;if(y!==null){y.return=a.return,B=y;break e}B=a.return}}var g=e.current;for(B=g;B!==null;){s=B;var b=s.child;if(s.subtreeFlags&2064&&b!==null)b.return=s,B=b;else e:for(s=g;B!==null;){if(o=B,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:ml(9,o)}}catch(_){Ie(o,o.return,_)}if(o===s){B=null;break e}var k=o.sibling;if(k!==null){k.return=o.return,B=k;break e}B=o.return}}if(se=i,mr(),on&&typeof on.onPostCommitFiberRoot=="function")try{on.onPostCommitFiberRoot(ol,e)}catch{}r=!0}return r}finally{he=n,Ot.transition=t}}return!1}function O0(e,t,n){t=Vi(n,t),t=gC(e,t,1),e=rr(e,t,1),t=ut(),e!==null&&(ps(e,1,t),vt(e,t))}function Ie(e,t,n){if(e.tag===3)O0(e,e,n);else for(;t!==null;){if(t.tag===3){O0(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ir===null||!ir.has(r))){e=Vi(n,e),e=wC(t,e,1),t=rr(t,e,1),e=ut(),t!==null&&(ps(t,1,e),vt(t,e));break}}t=t.return}}function pR(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=ut(),e.pingedLanes|=e.suspendedLanes&n,We===e&&(Xe&n)===n&&(Ue===4||Ue===3&&(Xe&130023424)===Xe&&500>Le()-Jv?Ir(e,0):Xv|=n),vt(e,t)}function FC(e,t){t===0&&(e.mode&1?(t=Us,Us<<=1,!(Us&130023424)&&(Us=4194304)):t=1);var n=ut();e=jn(e,t),e!==null&&(ps(e,t,n),vt(e,n))}function mR(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),FC(e,n)}function vR(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(O(314))}r!==null&&r.delete(t),FC(e,n)}var VC;VC=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||pt.current)ht=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return ht=!1,rR(e,t,n);ht=!!(e.flags&131072)}else ht=!1,Se&&t.flags&1048576&&UE(t,Lo,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;go(e,t),e=t.pendingProps;var i=Oi(t,at.current);Ri(t,n),i=Gv(null,t,r,e,i,n);var a=Hv();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,mt(r)?(a=!0,Do(t)):a=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Vv(t),i.updater=pl,t.stateNode=i,i._reactInternals=t,Nm(t,r,e,n),t=Im(null,t,r,!0,a,n)):(t.tag=0,Se&&a&&Rv(t),lt(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(go(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=gR(r),e=Gt(r,e),i){case 0:t=Rm(null,t,r,e,n);break e;case 1:t=C0(null,t,r,e,n);break e;case 11:t=k0(null,t,r,e,n);break e;case 14:t=E0(null,t,r,Gt(r.type,e),n);break e}throw Error(O(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Gt(r,i),Rm(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Gt(r,i),C0(e,t,r,i,n);case 3:e:{if(_C(t),e===null)throw Error(O(387));r=t.pendingProps,a=t.memoizedState,i=a.element,QE(e,t),Vo(t,r,null,n);var s=t.memoizedState;if(r=s.element,a.isDehydrated)if(a={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=a,t.memoizedState=a,t.flags&256){i=Vi(Error(O(423)),t),t=T0(e,t,r,n,i);break e}else if(r!==i){i=Vi(Error(O(424)),t),t=T0(e,t,r,n,i);break e}else for(xt=nr(t.stateNode.containerInfo.firstChild),St=t,Se=!0,Wt=null,n=KE(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Li(),r===i){t=Pn(e,t,n);break e}lt(e,t,r,n)}t=t.child}return t;case 5:return XE(t),e===null&&Mm(t),r=t.type,i=t.pendingProps,a=e!==null?e.memoizedProps:null,s=i.children,_m(r,i)?s=null:a!==null&&_m(r,a)&&(t.flags|=32),SC(e,t),lt(e,t,s,n),t.child;case 6:return e===null&&Mm(t),null;case 13:return kC(e,t,n);case 4:return $v(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=qi(t,null,r,n):lt(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Gt(r,i),k0(e,t,r,i,n);case 7:return lt(e,t,t.pendingProps,n),t.child;case 8:return lt(e,t,t.pendingProps.children,n),t.child;case 12:return lt(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,a=t.memoizedProps,s=i.value,ye(qo,r._currentValue),r._currentValue=s,a!==null)if(Qt(a.value,s)){if(a.children===i.children&&!pt.current){t=Pn(e,t,n);break e}}else for(a=t.child,a!==null&&(a.return=t);a!==null;){var o=a.dependencies;if(o!==null){s=a.child;for(var l=o.firstContext;l!==null;){if(l.context===r){if(a.tag===1){l=kn(-1,n&-n),l.tag=2;var u=a.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}a.lanes|=n,l=a.alternate,l!==null&&(l.lanes|=n),jm(a.return,n,t),o.lanes|=n;break}l=l.next}}else if(a.tag===10)s=a.type===t.type?null:a.child;else if(a.tag===18){if(s=a.return,s===null)throw Error(O(341));s.lanes|=n,o=s.alternate,o!==null&&(o.lanes|=n),jm(s,n,t),s=a.sibling}else s=a.child;if(s!==null)s.return=a;else for(s=a;s!==null;){if(s===t){s=null;break}if(a=s.sibling,a!==null){a.return=s.return,s=a;break}s=s.return}a=s}lt(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Ri(t,n),i=Lt(i),r=r(i),t.flags|=1,lt(e,t,r,n),t.child;case 14:return r=t.type,i=Gt(r,t.pendingProps),i=Gt(r.type,i),E0(e,t,r,i,n);case 15:return bC(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Gt(r,i),go(e,t),t.tag=1,mt(r)?(e=!0,Do(t)):e=!1,Ri(t,n),yC(t,r,i),Nm(t,r,i,n),Im(null,t,r,!0,e,n);case 19:return EC(e,t,n);case 22:return xC(e,t,n)}throw Error(O(156,t.tag))};function $C(e,t){return pE(e,t)}function yR(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Dt(e,t,n,r){return new yR(e,t,n,r)}function ny(e){return e=e.prototype,!(!e||!e.isReactComponent)}function gR(e){if(typeof e=="function")return ny(e)?1:0;if(e!=null){if(e=e.$$typeof,e===xv)return 11;if(e===Sv)return 14}return 2}function sr(e,t){var n=e.alternate;return n===null?(n=Dt(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function xo(e,t,n,r,i,a){var s=2;if(r=e,typeof e=="function")ny(e)&&(s=1);else if(typeof e=="string")s=5;else e:switch(e){case hi:return Dr(n.children,i,a,t);case bv:s=8,i|=8;break;case tm:return e=Dt(12,n,t,i|2),e.elementType=tm,e.lanes=a,e;case nm:return e=Dt(13,n,t,i),e.elementType=nm,e.lanes=a,e;case rm:return e=Dt(19,n,t,i),e.elementType=rm,e.lanes=a,e;case Xk:return yl(n,i,a,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Yk:s=10;break e;case Qk:s=9;break e;case xv:s=11;break e;case Sv:s=14;break e;case Hn:s=16,r=null;break e}throw Error(O(130,e==null?e:typeof e,""))}return t=Dt(s,n,t,i),t.elementType=e,t.type=r,t.lanes=a,t}function Dr(e,t,n,r){return e=Dt(7,e,r,t),e.lanes=n,e}function yl(e,t,n,r){return e=Dt(22,e,r,t),e.elementType=Xk,e.lanes=n,e.stateNode={isHidden:!1},e}function Vu(e,t,n){return e=Dt(6,e,null,t),e.lanes=n,e}function $u(e,t,n){return t=Dt(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function wR(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=xu(0),this.expirationTimes=xu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=xu(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function ry(e,t,n,r,i,a,s,o,l){return e=new wR(e,t,n,o,l),t===1?(t=1,a===!0&&(t|=8)):t=0,a=Dt(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Vv(a),e}function bR(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:fi,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function BC(e){if(!e)return ur;e=e._reactInternals;e:{if(Gr(e)!==e||e.tag!==1)throw Error(O(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(mt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(O(171))}if(e.tag===1){var n=e.type;if(mt(n))return BE(e,n,t)}return t}function zC(e,t,n,r,i,a,s,o,l){return e=ry(n,r,!0,e,i,a,s,o,l),e.context=BC(null),n=e.current,r=ut(),i=ar(n),a=kn(r,i),a.callback=t??null,rr(n,a,i),e.current.lanes=i,ps(e,i,r),vt(e,r),e}function gl(e,t,n,r){var i=t.current,a=ut(),s=ar(i);return n=BC(n),t.context===null?t.context=n:t.pendingContext=n,t=kn(a,s),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=rr(i,t,s),e!==null&&(Yt(e,i,s,a),mo(e,i,s)),s}function Ko(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function L0(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function iy(e,t){L0(e,t),(e=e.alternate)&&L0(e,t)}function xR(){return null}var UC=typeof reportError=="function"?reportError:function(e){console.error(e)};function ay(e){this._internalRoot=e}wl.prototype.render=ay.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(O(409));gl(e,t,null,null)};wl.prototype.unmount=ay.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Br(function(){gl(null,e,null,null)}),t[Mn]=null}};function wl(e){this._internalRoot=e}wl.prototype.unstable_scheduleHydration=function(e){if(e){var t=xE();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Kn.length&&t!==0&&t<Kn[n].priority;n++);Kn.splice(n,0,e),n===0&&_E(e)}};function sy(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function bl(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function q0(){}function SR(e,t,n,r,i){if(i){if(typeof r=="function"){var a=r;r=function(){var u=Ko(s);a.call(u)}}var s=zC(t,r,e,0,null,!1,!1,"",q0);return e._reactRootContainer=s,e[Mn]=s.current,Za(e.nodeType===8?e.parentNode:e),Br(),s}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var o=r;r=function(){var u=Ko(l);o.call(u)}}var l=ry(e,0,!1,null,null,!1,!1,"",q0);return e._reactRootContainer=l,e[Mn]=l.current,Za(e.nodeType===8?e.parentNode:e),Br(function(){gl(t,l,n,r)}),l}function xl(e,t,n,r,i){var a=n._reactRootContainer;if(a){var s=a;if(typeof i=="function"){var o=i;i=function(){var l=Ko(s);o.call(l)}}gl(t,s,e,i)}else s=SR(n,t,e,i,r);return Ko(s)}wE=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=xa(t.pendingLanes);n!==0&&(Ev(t,n|1),vt(t,Le()),!(se&6)&&($i=Le()+500,mr()))}break;case 13:Br(function(){var r=jn(e,1);if(r!==null){var i=ut();Yt(r,e,1,i)}}),iy(e,1)}};Cv=function(e){if(e.tag===13){var t=jn(e,134217728);if(t!==null){var n=ut();Yt(t,e,134217728,n)}iy(e,134217728)}};bE=function(e){if(e.tag===13){var t=ar(e),n=jn(e,t);if(n!==null){var r=ut();Yt(n,e,t,r)}iy(e,t)}};xE=function(){return he};SE=function(e,t){var n=he;try{return he=e,t()}finally{he=n}};hm=function(e,t,n){switch(t){case"input":if(sm(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=dl(r);if(!i)throw Error(O(90));Zk(r),sm(r,i)}}}break;case"textarea":tE(e,n);break;case"select":t=n.value,t!=null&&ji(e,!!n.multiple,t,!1)}};lE=Zv;uE=Br;var _R={usingClientEntryPoint:!1,Events:[vs,yi,dl,sE,oE,Zv]},ma={findFiberByHostInstance:jr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},kR={bundleType:ma.bundleType,version:ma.version,rendererPackageName:ma.rendererPackageName,rendererConfig:ma.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Rn.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=fE(e),e===null?null:e.stateNode},findFiberByHostInstance:ma.findFiberByHostInstance||xR,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var to=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!to.isDisabled&&to.supportsFiber)try{ol=to.inject(kR),on=to}catch{}}Ct.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=_R;Ct.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!sy(t))throw Error(O(200));return bR(e,t,null,n)};Ct.createRoot=function(e,t){if(!sy(e))throw Error(O(299));var n=!1,r="",i=UC;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=ry(e,1,!1,null,null,n,!1,r,i),e[Mn]=t.current,Za(e.nodeType===8?e.parentNode:e),new ay(t)};Ct.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(O(188)):(e=Object.keys(e).join(","),Error(O(268,e)));return e=fE(t),e=e===null?null:e.stateNode,e};Ct.flushSync=function(e){return Br(e)};Ct.hydrate=function(e,t,n){if(!bl(t))throw Error(O(200));return xl(null,e,t,!0,n)};Ct.hydrateRoot=function(e,t,n){if(!sy(e))throw Error(O(405));var r=n!=null&&n.hydratedSources||null,i=!1,a="",s=UC;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(a=n.identifierPrefix),n.onRecoverableError!==void 0&&(s=n.onRecoverableError)),t=zC(t,null,e,1,n??null,i,!1,a,s),e[Mn]=t.current,Za(e),r)for(e=0;e<r.length;e++)n=r[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new wl(t)};Ct.render=function(e,t,n){if(!bl(t))throw Error(O(200));return xl(null,e,t,!1,n)};Ct.unmountComponentAtNode=function(e){if(!bl(e))throw Error(O(40));return e._reactRootContainer?(Br(function(){xl(null,null,e,!1,function(){e._reactRootContainer=null,e[Mn]=null})}),!0):!1};Ct.unstable_batchedUpdates=Zv;Ct.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!bl(n))throw Error(O(200));if(e==null||e._reactInternals===void 0)throw Error(O(38));return xl(e,t,n,!1,r)};Ct.version="18.3.1-next-f1338f8080-20240426";function GC(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(GC)}catch(e){console.error(e)}}GC(),Gk.exports=Ct;var ER=Gk.exports,F0=ER;Zp.createRoot=F0.createRoot,Zp.hydrateRoot=F0.hydrateRoot;const CR="modulepreload",TR=function(e){return"/agent-director/"+e},V0={},gs=function(t,n,r){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),o=(s==null?void 0:s.nonce)||(s==null?void 0:s.getAttribute("nonce"));i=Promise.allSettled(n.map(l=>{if(l=TR(l),l in V0)return;V0[l]=!0;const u=l.endsWith(".css"),c=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${c}`))return;const d=document.createElement("link");if(d.rel=u?"stylesheet":CR,u||(d.as="script"),d.crossOrigin="",d.href=l,o&&d.setAttribute("nonce",o),document.head.appendChild(d),u)return new Promise((f,m)=>{d.addEventListener("load",f),d.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${l}`)))})}))}function a(s){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s}return i.then(s=>{for(const o of s||[])o.status==="rejected"&&a(o.reason);return t().catch(a)})},MR=()=>h.jsxs("svg",{className:"logo-mark",width:"54",height:"54",viewBox:"0 0 120 120",role:"img","aria-label":"Agent Director logo",children:[h.jsx("rect",{x:"8",y:"8",width:"104",height:"104",rx:"18",className:"logo-frame"}),h.jsx("rect",{x:"24",y:"28",width:"72",height:"16",rx:"6",className:"logo-bar logo-bar-a"}),h.jsx("rect",{x:"24",y:"52",width:"72",height:"16",rx:"6",className:"logo-bar logo-bar-b"}),h.jsx("rect",{x:"24",y:"76",width:"72",height:"16",rx:"6",className:"logo-bar logo-bar-c"}),h.jsx("circle",{cx:"96",cy:"36",r:"6",className:"logo-node logo-node-a"}),h.jsx("circle",{cx:"96",cy:"60",r:"6",className:"logo-node logo-node-b"}),h.jsx("circle",{cx:"96",cy:"84",r:"6",className:"logo-node logo-node-c"})]});function jR({trace:e,traces:t=[],selectedTraceId:n,onSelectTrace:r,onReload:i,onStartTour:a,onToggleStory:s,onOpenPalette:o,onToggleExplain:l,onShareSession:u,onThemeChange:c,onMotionChange:d,themeMode:f="studio",motionMode:m="balanced",activeSessions:v=1,shareStatus:p=null,handoffStatus:x=null,explainMode:y=!1,storyActive:g=!1,mode:b="cinema",missionCompletion:k,runHealthScore:_=100,modeHotkeys:C="C / F / Space",onCreateHandoffDigest:M}){const T=Math.max(0,Math.min(100,Math.round(_))),j=k?`${k.done}/${k.total} missions`:"Missions n/a";return h.jsxs("header",{className:"header","data-help":!0,"data-help-indicator":!0,"data-tour":"header","data-help-title":"Mission control","data-help-body":"Trace identity, status, and live controls live here. Use Story, Guide, or Explain to orient new viewers.","data-help-placement":"bottom",children:[h.jsxs("div",{className:"header-title",children:[h.jsxs("div",{className:"header-logo",children:[h.jsx(MR,{}),h.jsx("span",{children:"Agent Director"})]}),h.jsx("div",{className:"header-tagline",children:"Cinematic trace intelligence for agent runs."}),h.jsxs("div",{className:"header-meta",children:[h.jsxs("span",{className:"header-run",children:["Run: ",(e==null?void 0:e.id)??"loading"]}),t.length>0?h.jsx("select",{className:"trace-select",value:n??(e==null?void 0:e.id)??"","aria-label":"Select trace",onChange:N=>r==null?void 0:r(N.target.value),"data-help":!0,"data-help-title":"Trace selector","data-help-body":"Switch between available runs to compare different sessions.","data-help-placement":"bottom",children:t.map(N=>h.jsxs("option",{value:N.id,children:[N.name," (",N.id,")"]},N.id))}):null,h.jsx("span",{className:`status-pill status-${(e==null?void 0:e.status)??"loading"}`,children:(e==null?void 0:e.status)??"loading"}),e!=null&&e.replay?h.jsxs("span",{className:"header-replay",title:`Replay from ${e.branchPointStepId??"unknown step"}`,children:["Replay: ",e.replay.strategy]}):null,h.jsxs("span",{className:"header-wall",children:["Wall: ",(e==null?void 0:e.metadata.wallTimeMs)??0,"ms"]}),h.jsxs("span",{className:"header-presence","aria-label":"Active sessions",children:["Live: ",v]}),h.jsxs("span",{className:"header-mode-pill","aria-label":"Current mode",children:["Mode: ",b]}),h.jsxs("span",{className:"header-hotkeys","aria-label":"Mode hotkeys",children:["Keys: ",C]}),h.jsx("span",{className:"header-mission","aria-label":"Mission completion",children:j}),h.jsxs("span",{className:"header-health","aria-label":`Run health score ${T}`,children:[h.jsx("span",{className:"header-health-bar",children:h.jsx("span",{className:"header-health-fill",style:{width:`${T}%`}})}),h.jsxs("span",{children:["Health ",T]})]}),p?h.jsx("span",{className:"header-share-status",children:p}):null,x?h.jsx("span",{className:"header-share-status",children:x}):null]})]}),h.jsxs("div",{className:"header-actions",children:[h.jsxs("label",{className:"theme-picker",children:["Theme",h.jsxs("select",{className:"trace-select",value:f,"aria-label":"Select theme",onChange:N=>c==null?void 0:c(N.target.value),children:[h.jsx("option",{value:"studio",children:"Studio"}),h.jsx("option",{value:"focus",children:"Focus"}),h.jsx("option",{value:"contrast",children:"Contrast"})]})]}),h.jsxs("label",{className:"theme-picker",children:["Motion",h.jsxs("select",{className:"trace-select",value:m,"aria-label":"Select motion profile",onChange:N=>d==null?void 0:d(N.target.value),children:[h.jsx("option",{value:"cinematic",children:"Cinematic"}),h.jsx("option",{value:"balanced",children:"Balanced"}),h.jsx("option",{value:"minimal",children:"Minimal"})]})]}),h.jsx("button",{className:`ghost-button ${g?"active":""}`,type:"button",onClick:s,"aria-pressed":g,"aria-label":"Toggle story mode","data-help":!0,"data-help-title":"Story mode","data-help-body":"Auto-runs a cinematic walkthrough for demos.","data-help-placement":"bottom",children:"Story"}),h.jsx("button",{className:"ghost-button",type:"button",onClick:a,"aria-label":"Start guided tour","data-help":!0,"data-help-title":"Guided tour","data-help-body":"Walk through the interface step by step.","data-help-placement":"bottom",children:"Guide"}),h.jsx("button",{className:"ghost-button",type:"button",onClick:o,"aria-label":"Open command palette","data-help":!0,"data-help-title":"Command palette","data-help-body":"Search and trigger any action instantly.","data-help-placement":"bottom",children:"Command"}),h.jsx("button",{className:`ghost-button ${y?"active":""}`,type:"button",onClick:l,"aria-pressed":y,"aria-label":"Toggle explain mode","data-help":!0,"data-help-title":"Explain mode","data-help-body":"Hover any control to see contextual guidance.","data-help-placement":"bottom",children:"Explain"}),h.jsx("button",{className:"ghost-button",onClick:i,type:"button","aria-label":"Refresh traces",title:"Refresh traces","data-help":!0,"data-help-title":"Refresh","data-help-body":"Reload traces from the data store.","data-help-placement":"bottom",children:"Refresh"}),h.jsx("button",{className:"ghost-button",type:"button",onClick:u,"aria-label":"Copy live session link",title:"Copy live session link",children:"Share"}),h.jsx("button",{className:"ghost-button",type:"button",onClick:M,"aria-label":"Copy session handoff digest",title:"Copy session handoff digest",children:"Handoff"}),h.jsx("a",{className:"ghost-button",href:"/help.html",target:"_blank",rel:"noreferrer","data-help":!0,"data-help-title":"Help","data-help-body":"Open quick docs for first run, key flows, troubleshooting, and shortcuts.","data-help-placement":"bottom",children:"Help"}),null]})]})}function PR({insights:e,investigation:t,onSelectStep:n,onJumpToBottleneck:r,onJumpToError:i}){var f,m,v,p,x;if(!e)return null;const a=e.timing,s=e.ioWarnings??[],o=e.concurrency,l=e.retryPatterns,u=e.costByTool??{},c=e.costByModel??{},d=((f=t==null?void 0:t.hypotheses)==null?void 0:f.slice(0,2))??[];return h.jsxs("section",{className:"insight-strip","data-help":!0,"data-help-indicator":!0,"data-tour":"insights","data-help-title":"Run insights","data-help-body":"Fast diagnostics for latency, cost, errors, and concurrency. Click chips to jump into the trace.","data-help-placement":"bottom",children:[h.jsxs("div",{className:"insight-block","data-help":!0,"data-help-title":"Top latency","data-help-body":"Largest steps by duration; jump straight to the slowest.","data-help-placement":"bottom",children:[h.jsx("span",{className:"insight-label",children:"Top latency"}),h.jsxs("div",{className:"insight-items",children:[e.topLatencySteps.map(y=>h.jsxs("button",{className:"insight-chip",type:"button",title:`Jump to ${y.name}`,onClick:()=>n==null?void 0:n(y.stepId),children:[y.name," (",y.durationMs,"ms)"]},y.stepId)),e.topLatencySteps.length>0?h.jsx("button",{className:"insight-chip",type:"button",onClick:r,title:"Jump to longest step",children:"Jump to bottleneck"}):null]})]}),h.jsxs("div",{className:"insight-block","data-help":!0,"data-help-title":"Cost by type","data-help-body":"Aggregated spend by step class.","data-help-placement":"bottom",children:[h.jsx("span",{className:"insight-label",children:"Cost by type"}),h.jsx("div",{className:"insight-items",children:Object.entries(e.costByType).map(([y,g])=>h.jsxs("span",{className:"insight-chip",title:`Total cost for ${y}`,children:[y,": $",g.toFixed(3)]},y))})]}),Object.keys(u).length?h.jsxs("div",{className:"insight-block","data-help":!0,"data-help-title":"Cost by tool","data-help-body":"Top tools by total spend.","data-help-placement":"bottom",children:[h.jsx("span",{className:"insight-label",children:"Cost by tool"}),h.jsx("div",{className:"insight-items",children:Object.entries(u).sort((y,g)=>g[1]-y[1]).slice(0,3).map(([y,g])=>h.jsxs("span",{className:"insight-chip",title:`Total cost for ${y}`,children:[y,": $",g.toFixed(3)]},y))})]}):null,h.jsxs("div",{className:"insight-block","data-help":!0,"data-help-title":"Errors & retries","data-help-body":"Instant visibility into failed or retried steps.","data-help-placement":"bottom",children:[h.jsx("span",{className:"insight-label",children:"Errors / retries"}),h.jsxs("div",{className:"insight-items",children:[h.jsxs("span",{className:"insight-chip",children:["Errors: ",e.errors]}),h.jsxs("span",{className:"insight-chip",children:["Retries: ",e.retries]}),e.errors>0?h.jsx("button",{className:"insight-chip",type:"button",onClick:i,title:"Jump to first error",children:"Jump to first error"}):null,(m=l==null?void 0:l.topRetries)!=null&&m.length?h.jsxs("span",{className:"insight-chip",title:`Retry rate ${(l.retryRate*100).toFixed(1)}%`,children:["Top retries: ",l.topRetries.length]}):null]})]}),h.jsxs("div",{className:"insight-block","data-help":!0,"data-help-title":"Wall vs work","data-help-body":"Wall time vs summed work to show parallelism.","data-help-placement":"bottom",children:[h.jsx("span",{className:"insight-label",children:"Wall vs work"}),h.jsxs("div",{className:"insight-items",children:[h.jsxs("span",{className:"insight-chip",title:"Wall clock duration",children:["Wall: ",e.wallTimeMs,"ms"]}),h.jsxs("span",{className:"insight-chip",title:"Sum of step durations",children:["Work: ",e.workTimeMs,"ms"]}),e.criticalPathMs!=null?h.jsxs("span",{className:"insight-chip",title:"Longest parent-child chain",children:["Critical: ",e.criticalPathMs,"ms"]}):null]})]}),h.jsxs("div",{className:"insight-block","data-help":!0,"data-help-title":"Health","data-help-body":"Timing and I/O anomalies detected in the trace.","data-help-placement":"bottom",children:[h.jsx("span",{className:"insight-label",children:"Health"}),h.jsxs("div",{className:"insight-items",children:[a!=null&&a.degraded?h.jsx("span",{className:"insight-chip insight-warning",title:a.issues.join(" "),children:"Timing degraded"}):h.jsx("span",{className:"insight-chip",children:"Timing OK"}),s.length>0?h.jsxs("span",{className:"insight-chip insight-warning",title:s.map(y=>y.message).join(" "),children:["IO warnings: ",s.length]}):h.jsx("span",{className:"insight-chip",children:"IO OK"})]})]}),d.length?h.jsxs("div",{className:"insight-block","data-help":!0,"data-help-title":"Investigator","data-help-body":"Automated root-cause hypotheses ranked by severity and confidence.","data-help-placement":"bottom",children:[h.jsx("span",{className:"insight-label",children:"Investigator"}),h.jsxs("div",{className:"insight-items",children:[d.map(y=>h.jsxs("span",{className:"insight-chip",title:y.summary,children:[y.title," (",Math.round(y.confidence*100),"%)"]},y.id)),(p=(v=d[0])==null?void 0:v.evidenceStepIds)!=null&&p[0]?h.jsx("button",{className:"insight-chip",type:"button",onClick:()=>n==null?void 0:n(d[0].evidenceStepIds[0]),children:"Jump to evidence"}):null]})]}):null,(x=o==null?void 0:o.buckets)!=null&&x.length?h.jsxs("div",{className:"insight-block","data-help":!0,"data-help-title":"Parallelism","data-help-body":"How many steps ran concurrently over time.","data-help-placement":"bottom",children:[h.jsx("span",{className:"insight-label",children:"Parallelism"}),h.jsx("div",{className:"insight-items",children:h.jsx("div",{className:"insight-heatmap",title:`Peak concurrency: ${o.peak}`,children:o.buckets.map((y,g)=>h.jsx("span",{className:"heatmap-bar",style:{height:`${Math.max(20,y.active/Math.max(1,o.peak)*48)}px`},title:`Bucket ${g+1}: ${y.active} active`},`${y.startMs}-${y.endMs}`))})})]}):null,Object.keys(c).length?h.jsxs("div",{className:"insight-block","data-help":!0,"data-help-title":"Model cost","data-help-body":"Spend by model family.","data-help-placement":"bottom",children:[h.jsx("span",{className:"insight-label",children:"Model cost"}),h.jsx("div",{className:"insight-items",children:Object.entries(c).map(([y,g])=>h.jsxs("span",{className:"insight-chip",title:`Total cost for ${y}`,children:[y,": $",g.toFixed(3)]},y))})]}):null]})}const NR=["all","llm_call","tool_call","decision","handoff","guardrail"];function AR({query:e,typeFilter:t,onQueryChange:n,onTypeFilterChange:r}){return h.jsxs("div",{className:"search-bar",children:[h.jsx("input",{className:"search-input",placeholder:"Search steps, tools, previews...","aria-label":"Search steps",value:e,onChange:i=>n(i.target.value),"data-help":!0,"data-help-title":"Search","data-help-body":"Filter steps by name, tool, or payload preview. Great for fast recall.","data-help-placement":"bottom"}),h.jsx("select",{className:"search-select",value:t,"aria-label":"Filter by step type",onChange:i=>r(i.target.value),"data-help":!0,"data-help-title":"Type filter","data-help-body":"Narrow the timeline to a specific class of steps (LLM, tool, decision, handoff).","data-help-placement":"bottom",children:NR.map(i=>h.jsx("option",{value:i,children:i},i))})]})}function Sl(e,t,n){const r=Date.parse(e),i=n.map(c=>Date.parse(c.endedAt??c.startedAt)).filter(c=>Number.isFinite(c)),a=t?Date.parse(t):i.length?Math.max(...i):r,s=Math.max(1,a-r),o=n.map(c=>{const d=Math.max(0,Date.parse(c.startedAt)-r),f=Math.max(d,Date.parse(c.endedAt??c.startedAt)-r);return{stepId:c.id,startMs:d,endMs:f}}).sort((c,d)=>c.startMs-d.startMs||c.endMs-d.endMs),l=[],u=[];for(const c of o){let d=l.findIndex(f=>f<=c.startMs);d===-1?(d=l.length,l.push(c.endMs)):l[d]=c.endMs,u.push({stepId:c.stepId,startMs:c.startMs,endMs:c.endMs,lane:d,xPct:c.startMs/s*100,wPct:Math.max(.75,(c.endMs-c.startMs)/s*100)})}return{wallTimeMs:s,intervals:u,laneCount:l.length}}function RR(e){var v;const n=e.steps.map(p=>({stepId:p.id,name:p.name,durationMs:p.durationMs??0})).sort((p,x)=>x.durationMs-p.durationMs).slice(0,3),r={},i={};for(const p of e.steps)((v=p.metrics)==null?void 0:v.costUsd)!=null&&(r[p.type]=(r[p.type]??0)+p.metrics.costUsd,p.type==="tool_call"&&(i[p.name]=(i[p.name]??0)+p.metrics.costUsd));const a=e.steps.filter(p=>p.status==="failed").length,s=e.steps.filter(p=>!!p.retryOfStepId).length,o=e.metadata.wallTimeMs,l=e.metadata.workTimeMs??e.steps.reduce((p,x)=>p+(x.durationMs??0),0),u=DR(e),c=OR(e.steps),d=LR(e.steps),f=qR(e),m=FR(e.steps);return{topLatencySteps:n,costByType:r,costByTool:i,costByModel:{[e.metadata.modelId]:e.metadata.totalCostUsd??0},errors:a,retries:s,wallTimeMs:o,workTimeMs:l,timing:u,ioWarnings:c,criticalPathMs:d,concurrency:f,retryPatterns:m}}function IR(e){var n;const t=(n=e.metrics)==null?void 0:n.costUsd;return t==null?null:`$${t.toFixed(3)}`}function wn(e){if(!e)return null;const t=Date.parse(e);return Number.isNaN(t)?null:t}function DR(e){const t=wn(e.startedAt),n=wn(e.endedAt??void 0),r=[],i=[],a=[];return t==null&&a.push("Trace start time missing or invalid."),e.steps.forEach(s=>{const o=wn(s.startedAt),l=wn(s.endedAt??s.startedAt);if(o==null||l==null){r.push(s.id);return}if(l<o){i.push(s.id);return}t!=null&&o<t&&i.push(s.id),n!=null&&l>n&&i.push(s.id)}),r.length&&a.push(`Missing timestamps on ${r.length} steps.`),i.length&&a.push(`Timestamp skew detected on ${i.length} steps.`),{degraded:!!(r.length||i.length||t==null),issues:a,missingStepIds:r,skewedStepIds:i}}function OR(e){const t=new Map;e.forEach(a=>{a.type==="tool_call"&&a.toolCallId&&t.set(a.toolCallId,a)});const n=new Set,r=new Set,i=[];return e.forEach(a=>{a.type!=="llm_call"||!a.io||((a.io.emittedToolCallIds??[]).forEach(s=>{n.add(s),t.has(s)||i.push({kind:"missing_tool_step",message:`Emitted toolCallId ${s} has no tool step.`,stepId:a.id,toolCallId:s})}),(a.io.consumedToolCallIds??[]).forEach(s=>{r.add(s),t.has(s)||i.push({kind:"missing_tool_step",message:`Consumed toolCallId ${s} has no tool step.`,stepId:a.id,toolCallId:s}),n.has(s)||i.push({kind:"consume_without_emit",message:`Consumed toolCallId ${s} without emission.`,stepId:a.id,toolCallId:s})}))}),t.forEach((a,s)=>{n.has(s)||i.push({kind:"unemitted_tool",message:`Tool step ${a.id} has toolCallId ${s} never emitted.`,stepId:a.id,toolCallId:s}),r.has(s)||i.push({kind:"unconsumed_tool",message:`Tool step ${a.id} has toolCallId ${s} never consumed.`,stepId:a.id,toolCallId:s})}),i}function LR(e){const t=new Map,n=new Map,r=[];e.forEach(s=>{if(t.set(s.id,s.durationMs??0),s.parentStepId){const o=n.get(s.parentStepId)??[];o.push(s.id),n.set(s.parentStepId,o)}else r.push(s.id)});const i=new Map,a=s=>{if(i.has(s))return i.get(s)??0;const l=(n.get(s)??[]).reduce((c,d)=>Math.max(c,a(d)),0),u=(t.get(s)??0)+l;return i.set(s,u),u};return r.length?Math.max(...r.map(s=>a(s))):0}function qR(e){const t=wn(e.startedAt);if(t==null)return{buckets:[],peak:0};const n=wn(e.endedAt??void 0)??Math.max(...e.steps.map(l=>wn(l.endedAt??l.startedAt)??t),t),r=Math.max(1,n-t),i=12,a=Math.max(1,Math.floor(r/i)),s=[];let o=0;for(let l=0;l<i;l+=1){const u=t+l*a,c=u+a;let d=0;e.steps.forEach(f=>{const m=wn(f.startedAt),v=wn(f.endedAt??f.startedAt);m==null||v==null||v>=u&&m<=c&&(d+=1)}),o=Math.max(o,d),s.push({startMs:l*a,endMs:(l+1)*a,active:d})}return{buckets:s,peak:o}}function FR(e){const t={};e.forEach(i=>{i.retryOfStepId&&(t[i.retryOfStepId]=(t[i.retryOfStepId]??0)+1)});const n=Object.values(t).reduce((i,a)=>i+a,0),r=Object.entries(t).sort((i,a)=>a[1]-i[1]).slice(0,3);return{totalRetries:n,retryRate:e.length?n/e.length:0,topRetries:r.map(([i,a])=>({stepId:i,count:a}))}}const VR={llm_call:{label:"LLM",icon:"LLM",description:"Model call"},tool_call:{label:"TOOL",icon:"TOOL",description:"Tool call"},decision:{label:"DEC",icon:"DEC",description:"Decision"},handoff:{label:"HAND",icon:"HAND",description:"Handoff"},guardrail:{label:"GUARD",icon:"GUARD",description:"Guardrail"}};function $R(e){return VR[e]}function BR({type:e,size:t="sm",showLabel:n=!1}){const r=$R(e);return h.jsxs("span",{className:`step-badge step-badge-${e} step-badge-${t}`,title:r.description,children:[h.jsx("span",{className:"step-badge-icon",children:r.icon}),n?h.jsx("span",{className:"step-badge-label",children:r.label}):null]})}function HC({step:e,interval:t,playbackState:n,selected:r,onSelect:i,variant:a="base",diffStatus:s,disabled:o=!1,laneHeight:l=140}){var k,_,C,M,T,j;const u=IR(e),c=((k=e.preview)==null?void 0:k.subtitle)??((_=e.preview)==null?void 0:_.title)??"",d=((C=e.preview)==null?void 0:C.outputPreview)??((M=e.preview)==null?void 0:M.inputPreview)??"",f=s?`step-diff-${s}`:"",m=a==="ghost"?"step-ghost":"",v=t.wPct<8?"step-compact":"",p=e.type.replace("_"," ").toUpperCase(),x=((T=e.metrics)==null?void 0:T.tokensTotal)!=null?`${e.metrics.tokensTotal} tokens`:null,y=e.durationMs!=null?`${e.durationMs}ms`:null,g=[x,y,u].filter(Boolean).join("  "),b=`Click to inspect inputs/outputs and replay from this moment.${g?` ${g}.`:""}`;return h.jsxs("button",{type:"button",className:`step-card step-${e.type} step-${n} ${r?"step-selected":""} ${f} ${m} ${v}`,"data-step-id":e.id,"aria-pressed":r,"aria-hidden":a==="ghost",disabled:o,"data-help":!0,"data-help-title":`${e.name}  ${p}`,"data-help-body":b,"data-help-placement":"top",style:{left:`${t.xPct}%`,width:`${t.wPct}%`,top:`${t.lane*l}px`},onClick:()=>{o||i(e.id)},children:[h.jsxs("div",{className:"step-card-header",children:[h.jsxs("div",{className:"step-title-group",children:[h.jsx(BR,{type:e.type}),h.jsx("span",{className:"step-title",children:e.name})]}),h.jsx("span",{className:`status-pill status-${e.status}`,children:e.status})]}),c?h.jsx("div",{className:"step-subtitle",children:c}):null,h.jsxs("div",{className:"step-metrics",children:[((j=e.metrics)==null?void 0:j.tokensTotal)!=null?h.jsxs("span",{children:[e.metrics.tokensTotal," tok"]}):null,e.durationMs!=null?h.jsxs("span",{children:[e.durationMs,"ms"]}):null,u?h.jsx("span",{children:u}):null]}),d?h.jsx("div",{className:"step-preview",children:d}):null]})}function WC(e,t){return t<e.startMs?"future":t>e.endMs?"past":"active"}const va={type:{order:[],hidden:[]},status:{order:[],hidden:[]},parent:{order:[],hidden:[]}};function oy(e,t){return t==="type"?e.type:t==="status"?e.status:e.parentStepId??"root"}function zR(e,t){const n=new Set;return e.forEach(r=>n.add(oy(r,t))),Array.from(n).sort((r,i)=>r.localeCompare(i))}function $0(e,t,n){const r=new Set(e),i=[...t.filter(s=>r.has(s))];e.forEach(s=>{i.includes(s)||i.push(s)});const a=Array.from(new Set(n.filter(s=>r.has(s))));return{order:i,hidden:a}}const UR=140,GR=132,HR=96,B0={llm_call:1,tool_call:2,decision:3,handoff:4,guardrail:5};function KC(e){return[...e].sort((t,n)=>(B0[t.type]??9)-(B0[n.type]??9))}function WR(e,t,n,r,i){const a=new Map;t.forEach(f=>{var v;const m=oy(f,n);a.has(m)||a.set(m,[]),(v=a.get(m))==null||v.push(f)});const s=Array.from(a.keys()),o=[...r.filter(f=>s.includes(f))];s.forEach(f=>{o.includes(f)||o.push(f)});const l=o.filter(f=>!i.includes(f)),u=new Map;let c=0,d=0;return l.forEach(f=>{const m=a.get(f)??[],v=Sl(e.startedAt,e.endedAt,m);v.intervals.forEach(p=>{u.set(p.stepId,{...p,lane:p.lane+c})}),c+=Math.max(1,v.laneCount)}),d=Math.max(1,c),{intervalsByStepId:u,laneCount:d,visibleGroups:l}}function KR({trace:e,steps:t,selectedStepId:n,onSelectStep:r,playheadPct:i,playheadMs:a,windowRange:s,ghostTrace:o,diff:l,laneStrategy:u="type",laneGroupsOrder:c=[],hiddenLaneGroups:d=[],laneHeight:f=UR,cardHeight:m=GR,compactHeight:v=HR}){const{intervalsByStepId:p,laneCount:x}=WR(e,t,u,c,d),y=Array.from(p.values()),g=new Map(y.map(A=>[A.stepId,A])),b=KC(t),k=e.metadata.wallTimeMs||1,_=new Set((l==null?void 0:l.removedSteps)??[]),C=new Set((l==null?void 0:l.changedSteps)??[]),M=new Set(((l==null?void 0:l.changedPairs)??[]).map(A=>A.rightId)),T=new Set((l==null?void 0:l.addedSteps)??[]);let j=y;if(s){const A=s.endMs-s.startMs,I=Math.max(1e3,A*.15),L=Math.max(0,s.startMs-I),K=s.endMs+I;if(j=y.filter(V=>V.endMs>=L&&V.startMs<=K),n&&!j.some(V=>V.stepId===n)){const V=g.get(n);V&&(j=[...j,V])}}const N=new Set(j.map(A=>A.stepId));return h.jsx("div",{className:"timeline",style:{"--step-card-height":`${m}px`,"--step-compact-height":`${v}px`},children:h.jsxs("div",{className:"timeline-grid",style:{height:`${x*f}px`},"data-help":!0,"data-help-title":"Timeline lanes","data-help-body":"Each lane stacks overlapping steps; width reflects duration.","data-help-placement":"top",children:[h.jsx("div",{className:"playback-cursor",style:{left:`${i}%`}}),b.filter(A=>N.has(A.id)).filter(A=>!d.includes(oy(A,u))).map(A=>{const I=g.get(A.id);if(!I)return null;const L=WC(I,a);return h.jsx(HC,{step:A,interval:I,playbackState:L,selected:n===A.id,diffStatus:_.has(A.id)?"removed":C.has(A.id)?"changed":null,laneHeight:f,onSelect:r},A.id)}),o?h.jsx(YR,{ghostTrace:o,baseWallTimeMs:k,playheadMs:a,windowRange:s,diffAdded:T,diffChanged:M,laneHeight:f}):null]})})}function YR({ghostTrace:e,baseWallTimeMs:t,playheadMs:n,windowRange:r,diffAdded:i,diffChanged:a,laneHeight:s}){const{intervals:o,laneCount:l}=Sl(e.startedAt,e.endedAt,e.steps),u=new Map(o.map(p=>[p.stepId,p])),c=e.metadata.wallTimeMs||1,d=n/t*c;let f=o;if(r){const p=r.endMs-r.startMs,x=Math.max(1e3,p*.15),y=c/t,g=Math.max(0,(r.startMs-x)*y),b=Math.min(c,(r.endMs+x)*y);f=o.filter(k=>k.endMs>=g&&k.startMs<=b)}const m=new Set(f.map(p=>p.stepId)),v=KC(e.steps);return h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"ghost-lanes",style:{height:`${l*s}px`}}),v.filter(p=>m.has(p.id)).map(p=>{const x=u.get(p.id);if(!x)return null;const y=WC(x,d),g=i.has(p.id)?"added":a.has(p.id)?"changed":null;return h.jsx(HC,{step:p,interval:x,playbackState:y,selected:!1,diffStatus:g,variant:"ghost",disabled:!0,laneHeight:s,onSelect:()=>{}},`ghost-${p.id}`)})]})}function QR({trace:e,steps:t,selectedStepId:n,onSelectStep:r,playheadMs:i,windowRange:a,timing:s,ghostTrace:o,diff:l,laneStrategy:u,laneGroupsOrder:c,hiddenLaneGroups:d,onLaneStrategyChange:f,onToggleLaneGroupVisibility:m,onMoveLaneGroup:v}){const p=e.metadata.wallTimeMs||1,x=Math.min(100,Math.max(0,i/p*100)),y=c.filter(g=>!d.includes(g)).length;return h.jsxs("section",{className:"cinema-mode","aria-label":"Cinema mode",children:[s!=null&&s.degraded?h.jsxs("div",{className:"timing-banner",title:s.issues.join(" "),children:["Timing degraded: ",s.issues[0]??"Check timestamps."]}):null,h.jsxs("div",{className:"timeline-studio-panel","data-help":!0,"data-help-title":"Timeline studio","data-help-body":"Regroup lanes by type/status/parent, hide noisy groups, and reorder emphasis.",children:[h.jsxs("label",{className:"timeline-studio-strategy",children:["Lane strategy",h.jsxs("select",{value:u,onChange:g=>f(g.target.value),children:[h.jsx("option",{value:"type",children:"Type"}),h.jsx("option",{value:"status",children:"Status"}),h.jsx("option",{value:"parent",children:"Parent branch"})]})]}),h.jsxs("div",{className:"timeline-studio-summary",children:[y,"/",c.length," groups visible"]}),h.jsx("div",{className:"timeline-studio-groups",children:c.map((g,b)=>{const k=d.includes(g);return h.jsxs("div",{className:`timeline-studio-group ${k?"is-hidden":""}`,children:[h.jsx("button",{type:"button",className:"ghost-button",onClick:()=>m(g),children:k?"Show":"Hide"}),h.jsx("span",{className:"timeline-studio-group-name",children:g}),h.jsx("button",{type:"button",className:"ghost-button",onClick:()=>v(g,"up"),disabled:b===0,children:"Up"}),h.jsx("button",{type:"button",className:"ghost-button",onClick:()=>v(g,"down"),disabled:b===c.length-1,children:"Down"})]},g)})})]}),h.jsx(KR,{trace:e,steps:t,selectedStepId:n,onSelectStep:r,playheadPct:x,playheadMs:i,windowRange:a,ghostTrace:o,diff:l,laneStrategy:u,laneGroupsOrder:c,hiddenLaneGroups:d})]})}const XR=[.5,1,1.5,2,4];function z0({playheadMs:e,wallTimeMs:t,isPlaying:n,speed:r,onToggle:i,onScrub:a,onSpeedChange:s}){const o=l=>{a(Number(l.target.value))};return h.jsxs("div",{className:"playback-controls",children:[h.jsx("button",{className:"ghost-button",type:"button",onClick:i,"aria-label":n?"Pause playback":"Play playback","data-help":!0,"data-help-title":"Playhead","data-help-body":"Start or pause the run to experience timing as it unfolded.","data-help-placement":"bottom",children:n?"Pause":"Play"}),h.jsx("input",{className:"playback-slider",type:"range",min:0,max:t,value:e,"aria-label":"Playback position",onChange:o,"data-help":!0,"data-help-title":"Scrub timeline","data-help-body":"Drag to jump to any moment in the run.","data-help-placement":"bottom"}),h.jsx("select",{className:"playback-speed",value:r,"aria-label":"Playback speed",onChange:l=>s(Number(l.target.value)),"data-help":!0,"data-help-title":"Speed","data-help-body":"Slow down to inspect or speed up to skim.","data-help-placement":"bottom",children:XR.map(l=>h.jsxs("option",{value:l,children:[l,"x"]},l))})]})}function JR(e,t,n,r=60){const{wallTimeMs:i,intervals:a}=Sl(e,t,n),s=new Array(r).fill(0);if(!i)return{buckets:s,wallTimeMs:0};const o=i/r;return!Number.isFinite(o)||o<=0?{buckets:s,wallTimeMs:i}:(a.forEach(l=>{const u=Math.max(0,Math.floor(l.startMs/o)),c=Math.min(r-1,Math.floor(l.endMs/o));for(let d=u;d<=c;d+=1)s[d]+=1}),{buckets:s,wallTimeMs:i})}function ZR(e,t){const n=new Blob([JSON.stringify(t,null,2)],{type:"application/json"}),r=URL.createObjectURL(n),i=document.createElement("a");i.href=r,i.download=e,document.body.appendChild(i),i.click(),i.remove(),URL.revokeObjectURL(r)}function eI(e,t,n="text/plain"){const r=new Blob([t],{type:n}),i=URL.createObjectURL(r),a=document.createElement("a");a.href=i,a.download=e,document.body.appendChild(a),a.click(),a.remove(),URL.revokeObjectURL(i)}const ya=5e3,tI=32;function wt(e,t,n){return Math.min(n,Math.max(t,e))}function di(e,t){const n=new Set;return e.forEach(r=>{n.add(wt(Math.round(r),0,t))}),Array.from(n).sort((r,i)=>r-i).slice(0,tI)}function nI(e,t){if(!e)return{bookmarksMs:[],clipStartMs:null,clipEndMs:null,segments:[]};try{const n=JSON.parse(e),r=di(Array.isArray(n.bookmarksMs)?n.bookmarksMs:[],t),i=typeof n.clipStartMs=="number"?wt(n.clipStartMs,0,t):null,a=typeof n.clipEndMs=="number"?wt(n.clipEndMs,0,t):null,s=Array.isArray(n.segments)?n.segments.filter(o=>typeof(o==null?void 0:o.id)=="string"&&typeof(o==null?void 0:o.startMs)=="number"&&typeof(o==null?void 0:o.endMs)=="number"&&typeof(o==null?void 0:o.label)=="string").map(o=>({...o,startMs:wt(o.startMs,0,t),endMs:wt(o.endMs,0,t)})):[];return{bookmarksMs:r,clipStartMs:i,clipEndMs:i!=null&&a!=null&&a<i?i:a,segments:s}}catch{return{bookmarksMs:[],clipStartMs:null,clipEndMs:null,segments:[]}}}function U0(e,t){const n=Date.parse(e);return Number.isNaN(n)?null:new Date(n+t).toISOString()}function rI({traceStart:e,traceEnd:t,steps:n,playheadMs:r,windowRange:i,windowed:a,spanMs:s,onSpanChange:o,onToggleWindowed:l,onScrub:u,persistenceKey:c,laneStrategy:d="type",visibleLaneGroups:f=[],remotePlayheads:m=[]}){const{buckets:v,wallTimeMs:p}=JR(e,t,n,64),x=Math.max(1,...v),y=wt(s,ya,Math.max(ya,p)),g=(i==null?void 0:i.startMs)??0,b=(i==null?void 0:i.endMs)??p,k=S.useMemo(()=>`agentDirector.timelineStudio.${c??e}`,[c,e]),[_,C]=S.useState([]),[M,T]=S.useState(null),[j,N]=S.useState(null),[A,I]=S.useState([]),[L,K]=S.useState("");S.useEffect(()=>{const F=nI(window.localStorage.getItem(k),p);C(F.bookmarksMs),T(F.clipStartMs),N(F.clipEndMs),I(F.segments)},[k,p]),S.useEffect(()=>{const F={bookmarksMs:di(_,p),clipStartMs:M==null?null:wt(M,0,p),clipEndMs:j==null?null:wt(j,0,p),segments:A};window.localStorage.setItem(k,JSON.stringify(F))},[_,j,M,A,k,p]);const V=p?g/p*100:0,le=p?(b-g)/p*100:100,ie=p?r/p*100:0,R=M!=null&&j!=null?Math.min(M,j):null,q=M!=null&&j!=null?Math.max(M,j):null,G=R!=null&&q!=null&&p?(q-R)/p*100:0,z=R!=null&&p?R/p*100:0,ae=R!=null&&q!=null&&q>R,Pe=F=>{const te=F.currentTarget.getBoundingClientRect(),Q=(F.clientX-te.left)/te.width,qe=wt(Math.round(Q*p),0,p);u(qe)},oe=F=>{if(F.key==="ArrowLeft"){F.preventDefault(),u(wt(r-Math.max(250,Math.round(p*.02)),0,p));return}if(F.key==="ArrowRight"){F.preventDefault(),u(wt(r+Math.max(250,Math.round(p*.02)),0,p));return}if(F.key==="Home"){F.preventDefault(),u(0);return}if(F.key==="End"){F.preventDefault(),u(p);return}(F.key===" "||F.key==="Enter")&&(F.preventDefault(),u(r))},ce=()=>{C(F=>di([...F,r],p))},$=F=>{if(_.length===0)return;const te=di(_,p);if(F==="previous"){const qe=[...te].reverse().find(ne=>ne<r)??te[te.length-1];u(qe);return}const Q=te.find(qe=>qe>r)??te[0];u(Q)},de=()=>{const F=wt(r,0,p);T(F),j!=null&&j<F&&N(F)},Mt=()=>{const F=wt(r,0,p);N(F),M!=null&&M>F&&T(F)},fn=()=>{T(null),N(null)},Zt=()=>{if(!ae||R==null||q==null)return;const F=L.trim()||`Scene ${A.length+1}`,te=`segment-${Math.random().toString(36).slice(2,9)}`;I(Q=>[...Q,{id:te,startMs:R,endMs:q,label:F}]),K("")},gr=F=>{I(te=>te.filter(Q=>Q.id!==F))},Jr=()=>{if(!ae||R==null||q==null)return;const F={type:"agent-director-clip",traceStart:e,traceEnd:t,clip:{startMs:R,endMs:q,startAt:U0(e,R),endAt:U0(e,q)},bookmarksMs:di(_,p).filter(te=>te>=R&&te<=q),playheadMs:r,laneContext:{strategy:d,visibleGroups:f},segments:A.filter(te=>te.endMs>=R&&te.startMs<=q),exportedAt:new Date().toISOString()};ZR(`agent-director-clip-${R}-${q}.json`,F)};return h.jsxs("div",{className:"mini-timeline",children:[h.jsxs("div",{className:"mini-track",onClick:Pe,role:"slider",tabIndex:0,"aria-label":"Timeline density map","aria-valuemin":0,"aria-valuemax":p,"aria-valuenow":r,"aria-valuetext":`${r} milliseconds`,onKeyDown:oe,"data-help":!0,"data-help-title":"Density map","data-help-body":"A compact view of activity density. Click to jump the playhead.","data-help-placement":"top",children:[h.jsx("div",{className:"mini-bars",children:v.map((F,te)=>h.jsx("span",{className:"mini-bar",style:{height:`${F/x*100}%`}},`bucket-${te}`))}),h.jsx("div",{className:"mini-window",style:{left:`${V}%`,width:`${le}%`,opacity:a?1:.4}}),ae?h.jsx("div",{className:"mini-clip-window",style:{left:`${z}%`,width:`${G}%`}}):null,h.jsx("div",{className:"mini-bookmark-markers","data-testid":"timeline-bookmark-markers","aria-hidden":"true",children:di(_,p).map(F=>{const te=p?F/p*100:0;return h.jsx("button",{type:"button",className:"mini-bookmark-marker",style:{left:`${te}%`},onClick:Q=>{Q.stopPropagation(),u(F)},title:`Jump to bookmark at ${F}ms`,"aria-label":`Bookmark ${F} milliseconds`},`bookmark-${F}`)})}),h.jsx("div",{className:"mini-remote-markers","aria-hidden":"true",children:m.map((F,te)=>{const Q=p?F/p*100:0;return h.jsx("span",{className:"mini-remote-marker",style:{left:`${Q}%`}},`remote-${te}`)})}),h.jsx("div",{className:"mini-segments","aria-hidden":"true",children:A.map(F=>{const te=p?F.startMs/p*100:0,Q=p?(F.endMs-F.startMs)/p*100:0;return h.jsx("span",{className:"mini-segment-bar",style:{left:`${te}%`,width:`${Math.max(1,Q)}%`},title:F.label},F.id)})}),h.jsx("div",{className:"mini-playhead",style:{left:`${ie}%`}})]}),h.jsxs("div",{className:"mini-controls",children:[h.jsx("label",{className:"mini-label",children:"Zoom"}),h.jsx("input",{type:"range",min:ya,max:Math.max(ya,p),value:y,"aria-label":"Timeline zoom",onChange:F=>{l(!0),o(Number(F.target.value))},"data-help":!0,"data-help-title":"Zoom window","data-help-body":"Tighten the window to focus on hotspots.","data-help-placement":"top"}),h.jsx("button",{className:"ghost-button",type:"button",onClick:()=>l(!a),title:"Toggle windowed playback",children:a?"Full":"Window"}),h.jsx("button",{className:"ghost-button",type:"button",title:"Reset zoom",onClick:()=>{l(!0),o(Math.min(Math.max(p*.2,ya),6e4))},children:"Reset"}),h.jsx("button",{className:"ghost-button",type:"button",onClick:ce,children:"Add bookmark"}),h.jsx("button",{className:"ghost-button",type:"button",onClick:()=>$("previous"),children:"Previous bookmark"}),h.jsx("button",{className:"ghost-button",type:"button",onClick:()=>$("next"),children:"Next bookmark"}),h.jsx("button",{className:"ghost-button",type:"button",onClick:de,children:"Set clip start"}),h.jsx("button",{className:"ghost-button",type:"button",onClick:Mt,children:"Set clip end"}),h.jsx("button",{className:"ghost-button",type:"button",onClick:fn,children:"Clear clip"}),h.jsx("input",{className:"search-input mini-segment-input",placeholder:"Segment label",value:L,onChange:F=>K(F.target.value),"aria-label":"Segment label"}),h.jsx("button",{className:"ghost-button",type:"button",onClick:Zt,disabled:!ae,children:"Add segment"}),h.jsx("button",{className:"ghost-button",type:"button",onClick:Jr,disabled:!ae,children:"Export clip"})]}),A.length?h.jsx("div",{className:"mini-segment-list",children:A.map(F=>h.jsxs("div",{className:"mini-segment-item",children:[h.jsxs("span",{children:[F.label," (",F.startMs,"ms - ",F.endMs,"ms)"]}),h.jsx("button",{className:"ghost-button",type:"button",onClick:()=>gr(F.id),children:"Remove"})]},F.id))}):null]})}const iI=[{keys:"Space",action:"Play / pause"},{keys:" / ",action:"Step boundary back / forward"},{keys:"Shift +  / ",action:"Jump to start / end"},{keys:"F",action:"Toggle Flow mode"},{keys:"I",action:"Toggle Inspector"},{keys:"S",action:"Story mode"},{keys:"E",action:"Explain mode"},{keys:"T",action:"Start tour"},{keys:"Cmd/Ctrl + K",action:"Open command palette"},{keys:"?",action:"Show shortcuts"},{keys:"Esc",action:"Close modal / inspector"}];function aI({open:e,onClose:t}){const n=S.useRef(null);if(S.useEffect(()=>{var i;e&&((i=n.current)==null||i.focus())},[e]),!e)return null;const r=i=>{var l;if(i.key==="Escape"){i.preventDefault(),t();return}if(i.key!=="Tab")return;const a=Array.from(i.currentTarget.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'));if(a.length===0)return;const s=a.indexOf(document.activeElement),o=i.shiftKey?s<=0?a.length-1:s-1:(s+1)%a.length;(l=a[o])==null||l.focus(),i.preventDefault()};return h.jsx("div",{className:"modal-backdrop",role:"dialog","aria-modal":"true","aria-labelledby":"shortcuts-title",onKeyDown:r,children:h.jsxs("div",{className:"modal",tabIndex:-1,children:[h.jsxs("div",{className:"modal-header",children:[h.jsx("div",{className:"modal-title",id:"shortcuts-title",children:"Keyboard Shortcuts"}),h.jsx("button",{className:"ghost-button",type:"button",onClick:t,ref:n,"aria-label":"Close shortcuts",children:"Close"})]}),h.jsx("div",{className:"modal-body",children:iI.map(i=>h.jsxs("div",{className:"modal-row",children:[h.jsx("span",{className:"modal-keys",children:i.keys}),h.jsx("span",{className:"modal-action",children:i.action})]},i.keys))})]})})}const G0="agentDirector.palette.recent.v1",H0="agentDirector.palette.pinned.v1",sI=8,oI=12,lI=e=>e.trim().toLowerCase();function W0(e){try{const t=JSON.parse(window.localStorage.getItem(e)??"[]");return Array.isArray(t)?t.filter(n=>typeof n=="string"):[]}catch{return[]}}function K0(e,t){window.localStorage.setItem(e,JSON.stringify(t))}function uI(e){const t=new Map;return e.forEach(n=>{var i;const r=n.section;t.has(r)||t.set(r,[]),(i=t.get(r))==null||i.push(n)}),t}function Y0(e,t,n){var i;if(!e.length)return 0;let r=t;for(let a=0;a<e.length;a+=1)if(r=(r+n+e.length)%e.length,!((i=e[r])!=null&&i.disabled))return r;return t}function cI({open:e,onClose:t,actions:n}){var M,T;const[r,i]=S.useState(""),[a,s]=S.useState(0),[o,l]=S.useState([]),[u,c]=S.useState([]),d=S.useRef(null),f=S.useRef(null),m=S.useMemo(()=>{const j=lI(r);return j?n.filter(N=>[N.label,N.description,N.group,N.keys].filter(Boolean).join(" ").toLowerCase().includes(j)):n},[n,r]),v=S.useMemo(()=>{const j=new Map(m.map(L=>[L.id,L])),N=u.map(L=>j.get(L)).filter(L=>!!L).map(L=>({...L,section:"Pinned"})),A=o.map(L=>j.get(L)).filter(L=>!!L).filter(L=>!N.some(K=>K.id===L.id)).map(L=>({...L,section:"Recent"})),I=m.filter(L=>!N.some(K=>K.id===L.id)).filter(L=>!A.some(K=>K.id===L.id)).map(L=>({...L,section:L.group??"General"}));return[...N,...A,...I]},[m,u,o]),p=S.useMemo(()=>uI(v),[v]),x=S.useMemo(()=>n.filter(j=>(j.group??"").toLowerCase()==="macros"||j.id.startsWith("macro-")),[n]);if(S.useEffect(()=>{if(!e)return;i(""),s(0),l(W0(G0)),c(W0(H0));const j=window.setTimeout(()=>{var N;return(N=d.current)==null?void 0:N.focus()},0);return()=>window.clearTimeout(j)},[e]),S.useEffect(()=>{a>=v.length&&s(0)},[a,v.length]),!e)return null;const y=j=>{l(N=>{const A=[j,...N.filter(I=>I!==j)].slice(0,sI);return K0(G0,A),A})},g=j=>{j.disabled||(y(j.id),j.onTrigger(),t())},b=j=>{c(N=>{const A=N.includes(j)?N.filter(I=>I!==j):[j,...N].slice(0,oI);return K0(H0,A),A})},k=j=>{var N,A;if(j.key==="Escape"){j.preventDefault(),t();return}if(j.key==="ArrowDown"){j.preventDefault(),s(I=>Y0(v,I,1));return}if(j.key==="ArrowUp"){j.preventDefault(),s(I=>Y0(v,I,-1));return}if(j.key==="Enter"){j.preventDefault();const I=v[a];I&&g(I);return}if(j.key==="Tab"){const I=Array.from(((N=f.current)==null?void 0:N.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'))??[]);if(!I.length)return;const L=I.indexOf(document.activeElement),K=j.shiftKey?L<=0?I.length-1:L-1:(L+1)%I.length;(A=I[K])==null||A.focus(),j.preventDefault()}},_=(M=v[a])!=null&&M.id?`palette-option-${(T=v[a])==null?void 0:T.id}`:void 0;let C=-1;return h.jsx("div",{className:"modal-backdrop palette-backdrop",role:"dialog","aria-modal":"true","aria-label":"Command palette",onKeyDown:k,onMouseDown:j=>{j.target===j.currentTarget&&t()},children:h.jsxs("div",{className:"palette",ref:f,children:[h.jsxs("div",{className:"palette-header",children:[h.jsxs("div",{children:[h.jsx("div",{className:"palette-title",children:"Command palette"}),h.jsx("div",{className:"palette-subtitle",children:"Search actions, modes, and playbook steps."})]}),h.jsx("button",{className:"ghost-button",type:"button",onClick:t,"aria-label":"Close command palette",children:"Close"})]}),h.jsx("input",{ref:d,className:"palette-input",value:r,onChange:j=>i(j.target.value),placeholder:"Type to filter actions","aria-label":"Search commands",role:"combobox","aria-expanded":"true","aria-controls":"command-palette-list","aria-activedescendant":_,"aria-autocomplete":"list"}),!r.trim()&&x.length>0?h.jsxs("div",{className:"palette-macros",children:[h.jsx("div",{className:"palette-group-title",children:"Quick macros"}),h.jsx("div",{className:"palette-macro-list",children:x.slice(0,3).map(j=>h.jsx("button",{className:"ghost-button palette-macro-item",type:"button",onClick:()=>g(j),children:j.label},j.id))})]}):null,h.jsxs("div",{className:"palette-list",role:"listbox",id:"command-palette-list",children:[v.length===0?h.jsx("div",{className:"palette-empty",children:"No matching commands."}):null,Array.from(p.entries()).map(([j,N])=>h.jsxs("div",{className:"palette-group",children:[h.jsx("div",{className:"palette-group-title",children:j}),h.jsx("div",{className:"palette-group-list",children:N.map(A=>{C+=1;const I=C===a,L=u.includes(A.id);return h.jsxs("button",{id:`palette-option-${A.id}`,className:`palette-item ${I?"active":""}`,type:"button",role:"option","aria-selected":I,onMouseEnter:()=>s(C),onClick:()=>g(A),disabled:A.disabled,children:[h.jsxs("div",{className:"palette-item-main",children:[h.jsx("div",{className:"palette-item-title",children:A.label}),A.description?h.jsx("div",{className:"palette-item-description",children:A.description}):null]}),h.jsxs("div",{className:"palette-item-trailing",children:[A.keys?h.jsx("div",{className:"palette-item-keys",children:A.keys}):null,h.jsx("span",{className:`palette-pin ${L?"active":""}`,role:"button",tabIndex:0,onClick:K=>{K.stopPropagation(),b(A.id)},onKeyDown:K=>{K.key!=="Enter"&&K.key!==" "||(K.preventDefault(),K.stopPropagation(),b(A.id))},"aria-label":L?`Unpin ${A.label}`:`Pin ${A.label}`,title:L?"Unpin command":"Pin command",children:L?"":""})]})]},A.id)})})]},j))]})]})})}function dI(e){return e.length?e.reduce((t,n)=>(n.durationMs??0)>(t.durationMs??0)?n:t,e[0]):null}function fI({trace:e,mode:t,playheadMs:n,selectedStepId:r,compareTrace:i,collapsed:a,onToggleCollapsed:s,onModeChange:o,onSelectStep:l,onJumpToBottleneck:u,onReplay:c,onStartTour:d,priorityQueue:f=[]}){var A;const m=e.steps??[],v=dI(m),p=r??(v==null?void 0:v.id)??((A=m[0])==null?void 0:A.id)??null,x=t==="cinema"||n>0,y=!!r,g=!!i,b=[x,y,g].filter(Boolean).length,k=[x,y,g].findIndex(I=>!I),_=k===-1?2:k,C=[0,1,2].map(I=>[x,y,g][I]?"done":I===_?"active":"next"),M=[{id:"observe",title:"Act I: Observe",summary:"Scrub the timeline to feel the pacing, bottlenecks, and tool choreography.",status:C[0],actionLabel:"Enter cinema",action:()=>o("cinema"),tasks:[{label:"Scrub the timeline",done:n>0},{label:"Stay in Cinema mode",done:t==="cinema"}]},{id:"inspect",title:"Act II: Inspect",summary:"Open the most expensive or failed step and read the payload with context.",status:C[1],actionLabel:v?"Jump to bottleneck":"Select first step",action:()=>{if(r){o("cinema");return}if(v){u();return}p&&(l(p),o("cinema"))},disabled:!p,tasks:[{label:"Open the Inspector",done:!!r},{label:"Jump to the bottleneck",done:!!(v&&r===v.id)}]},{id:"direct",title:"Act III: Direct",summary:"Replay from a decisive step, then compare flows and diffs side-by-side.",status:C[2],actionLabel:i?"Open compare":"Replay from step",action:()=>{if(i){o("compare");return}p&&c(p)},disabled:!p,tasks:[{label:"Replay from a step",done:!!i},{label:"Compare runs side-by-side",done:!!(i&&t==="compare")}]}],T=M[_],N=f.filter(I=>!I.done)[0];return a?h.jsxs("section",{className:"journey-panel journey-collapsed","aria-label":"Director journey","data-help":!0,"data-help-indicator":!0,"data-tour":"journey","data-help-title":"Director journey","data-help-body":"A guided path from observation to replay. Use it to show newcomers what to do first.","data-help-placement":"bottom",children:[h.jsxs("div",{className:"journey-collapsed-main",children:[h.jsx("div",{className:"journey-eyebrow",children:"Director journey"}),h.jsx("div",{className:"journey-collapsed-title",children:"From observe to direct"})]}),h.jsxs("div",{className:"journey-collapsed-actions",children:[h.jsxs("span",{className:"journey-progress-text",children:[b,"/3 complete"]}),N?h.jsxs("span",{className:`journey-priority-chip severity-${N.severity}`,children:["Next priority: ",N.title]}):null,T?h.jsxs("button",{className:"primary-button journey-next",type:"button",onClick:T.action,disabled:T.disabled,children:["Next: ",T.actionLabel]}):null,d?h.jsx("button",{className:"ghost-button",type:"button",onClick:d,children:"Tour"}):null,h.jsx("button",{className:"primary-button journey-expand",type:"button",onClick:s,children:"Expand"})]})]}):h.jsxs("section",{className:"journey-panel","aria-label":"Director journey","data-help":!0,"data-help-indicator":!0,"data-tour":"journey","data-help-title":"Director journey","data-help-body":"A three-act flow that teaches the story: observe, inspect, direct. Each act jumps to the right place.","data-help-placement":"bottom",children:[h.jsxs("div",{className:"journey-head",children:[h.jsxs("div",{children:[h.jsx("div",{className:"journey-eyebrow",children:"Director journey"}),h.jsx("h2",{className:"journey-title",children:"Cut a perfect take in three acts."}),h.jsx("p",{className:"journey-subtitle",children:"Trace the performance, interrogate the moment, then direct a better run."})]}),h.jsxs("div",{className:"journey-head-actions",children:[d?h.jsx("button",{className:"ghost-button",type:"button",onClick:d,children:"Start tour"}):null,h.jsx("button",{className:"ghost-button",type:"button",onClick:s,children:"Collapse"})]})]}),h.jsx("div",{className:"journey-track",children:M.map((I,L)=>{var K;return h.jsxs("div",{className:"journey-card","data-status":I.status,children:[h.jsxs("div",{className:"journey-card-top",children:[h.jsxs("span",{className:"journey-index",children:["0",L+1]}),h.jsx("span",{className:"journey-status",children:I.status})]}),h.jsx("h3",{className:"journey-card-title",children:I.title}),h.jsx("p",{className:"journey-card-body",children:I.summary}),(K=I.tasks)!=null&&K.length?h.jsx("ul",{className:"journey-tasks",children:I.tasks.map(V=>h.jsxs("li",{className:`journey-task ${V.done?"done":""}`,children:[h.jsx("span",{className:"journey-task-icon","aria-hidden":"true",children:V.done?"":""}),h.jsx("span",{children:V.label})]},V.label))}):null,h.jsx("button",{className:"primary-button journey-action",type:"button",onClick:I.action,disabled:I.disabled,children:I.actionLabel})]},I.id)})}),h.jsxs("div",{className:"journey-footer",children:[h.jsxs("div",{children:[h.jsx("div",{className:"journey-progress-label",children:"Progress"}),h.jsx("div",{className:"journey-progress",children:h.jsx("span",{className:"journey-progress-bar",style:{width:`${b/3*100}%`}})})]}),h.jsx("div",{className:"journey-footnote",children:"Tip: Use Flow to spot fan-out, Compare to validate your changes."})]}),f.length?h.jsxs("div",{className:"journey-priority-queue",children:[h.jsxs("div",{className:"journey-priority-head",children:[h.jsx("div",{className:"journey-progress-label",children:"Priority queue"}),h.jsxs("span",{children:[f.filter(I=>I.done).length,"/",f.length," resolved"]})]}),h.jsx("div",{className:"journey-priority-list",children:f.map(I=>h.jsxs("article",{className:`journey-priority-item ${I.done?"done":""}`,children:[h.jsxs("div",{className:"journey-priority-main",children:[h.jsx("span",{className:`journey-priority-chip severity-${I.severity}`,children:I.severity}),h.jsxs("div",{children:[h.jsx("div",{className:"journey-priority-title",children:I.title}),h.jsx("div",{className:"journey-priority-body",children:I.detail})]})]}),h.jsx("button",{className:"ghost-button",type:"button",onClick:I.onAction,disabled:I.done,children:I.done?"Resolved":I.actionLabel})]},I.id))})]}):null]})}const hI=[],pI=[],mI=[],vI={};function yI(e){return e.length?e.reduce((t,n)=>(n.durationMs??0)>(t.durationMs??0)?n:t,e[0]):null}function gI({trace:e,mode:t,selectedStepId:n,onModeChange:r,onSelectStep:i,onJumpToBottleneck:a,onReplay:s,recommendations:o=hI,persona:l="builder",annotations:u=pI,activityFeed:c=mI,onAddAnnotation:d,missionProgress:f=vI,missionCompletion:m,onResetMissions:v,narrative:p="",onAskDirector:x,onExportNarrative:y}){var ce;const g=e.steps??[],b=yI(g),k=n??(b==null?void 0:b.id)??((ce=g[0])==null?void 0:ce.id)??null,_=e.metadata.wallTimeMs??0,C=l==="executive"?"Executive lens":l==="operator"?"Operator lens":"Builder lens",[M,T]=S.useState(""),[j,N]=S.useState(""),[A,I]=S.useState(""),[L,K]=S.useState("overview"),[V,le]=S.useState([]),ie=S.useMemo(()=>c.slice(0,6),[c]),R=(m==null?void 0:m.done)??0,q=R>=3||!!f.inspect,G=R>=5||!!f.collaborate||ie.length>0,z=S.useMemo(()=>o.slice(0,3).map(($,de)=>({id:$.id,step:`${de+1}. ${$.actionLabel}  ${$.title}`})),[o]);S.useEffect(()=>{le($=>$.filter(de=>o.some(Mt=>Mt.id===de)))},[o]);const ae=V.filter($=>o.some(de=>de.id===$)).length,Pe=o.length?Math.round(ae/o.length*100):0,oe=$=>{$.action(),le(de=>de.includes($.id)?de:[...de,$.id])};return h.jsxs("aside",{className:"inspector inspector-empty","data-help":!0,"data-help-indicator":!0,"data-tour":"inspector","data-help-title":"Inspector panel","data-help-body":"Select a step to open detailed payloads, redaction controls, and replay actions.","data-help-placement":"left",children:[h.jsx("div",{className:"inspector-header",children:h.jsxs("div",{children:[h.jsx("div",{className:"inspector-title",children:"Director's notes"}),h.jsxs("div",{className:"inspector-subtitle",children:[C,". Select a step to open deep inspection."]})]})}),h.jsxs("div",{className:"director-tabs",role:"tablist","aria-label":"Director workspace tabs",children:[h.jsx("button",{className:`ghost-button ${L==="overview"?"active":""}`,type:"button",role:"tab","aria-selected":L==="overview",onClick:()=>K("overview"),children:"Overview"}),h.jsx("button",{className:`ghost-button ${L==="narrative"?"active":""}`,type:"button",role:"tab","aria-selected":L==="narrative",onClick:()=>K("narrative"),children:"Narrative"}),h.jsx("button",{className:`ghost-button ${L==="collab"?"active":""}`,type:"button",role:"tab","aria-selected":L==="collab",onClick:()=>K("collab"),children:"Collaboration"})]}),L==="overview"?h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"inspector-section",children:[h.jsx("div",{className:"inspector-section-title",children:"Run summary"}),h.jsxs("div",{className:"inspector-row",children:[h.jsx("span",{children:"Steps"}),h.jsx("span",{children:g.length})]}),h.jsxs("div",{className:"inspector-row",children:[h.jsx("span",{children:"Wall time"}),h.jsxs("span",{children:[_,"ms"]})]}),h.jsxs("div",{className:"inspector-row",children:[h.jsx("span",{children:"Status"}),h.jsx("span",{children:e.status})]})]}),h.jsxs("div",{className:"inspector-section",children:[h.jsx("div",{className:"inspector-section-title",children:"Next actions"}),h.jsxs("div",{className:"director-actions",children:[h.jsx("button",{className:"primary-button",type:"button",onClick:()=>r("cinema"),"data-help":!0,"data-help-title":"Open cinema","data-help-body":"Jump straight into the timeline.","data-help-placement":"right",children:"Open cinema"}),h.jsx("button",{className:"ghost-button",type:"button",onClick:()=>r("flow"),"data-help":!0,"data-help-title":"Open flow","data-help-body":"See the dependency graph of the run.","data-help-placement":"right",children:"Switch to flow"}),h.jsx("button",{className:"ghost-button",type:"button",onClick:()=>{if(!n){if(b){a();return}k&&i(k)}},disabled:!k||!!n,"data-help":!0,"data-help-title":"Jump to bottleneck","data-help-body":"Select the slowest step for inspection.","data-help-placement":"right",children:n?"Inspector open":b?"Jump to bottleneck":"Select first step"}),h.jsx("button",{className:"ghost-button",type:"button",onClick:()=>k&&s(k),disabled:!k||!q,title:q?void 0:"Complete core missions to unlock replay guidance.","data-help":!0,"data-help-title":"Replay","data-help-body":"Branch a replay from a decisive step.","data-help-placement":"right",children:"Replay from step"})]})]}),h.jsxs("div",{className:"inspector-section",children:[h.jsx("div",{className:"inspector-section-title",children:"Mode"}),h.jsxs("div",{className:"director-modes",children:[h.jsx("button",{className:`ghost-button ${t==="cinema"?"active":""}`,type:"button",onClick:()=>r("cinema"),"data-help":!0,"data-help-title":"Cinema mode","data-help-body":"Timeline view for pacing and sequence.","data-help-placement":"right",children:"Cinema"}),h.jsx("button",{className:`ghost-button ${t==="flow"?"active":""}`,type:"button",onClick:()=>r("flow"),"data-help":!0,"data-help-title":"Flow mode","data-help-body":"Graph view for dependencies.","data-help-placement":"right",children:"Flow"}),h.jsx("button",{className:"ghost-button",type:"button",disabled:!0,children:"Compare"})]})]}),h.jsxs("div",{className:"inspector-section",children:[h.jsx("div",{className:"inspector-section-title",children:"Adaptive missions"}),h.jsxs("div",{className:"mission-summary",children:[(m==null?void 0:m.done)??0,"/",(m==null?void 0:m.total)??0," complete",h.jsxs("span",{children:[(m==null?void 0:m.pct)??0,"%"]})]}),h.jsxs("div",{className:"mission-stage",children:["Stage: ",G?"Collaboration":q?"Analysis":"Foundation"]}),h.jsx("div",{className:"mission-grid",children:Object.entries(f).map(([$,de])=>h.jsxs("div",{className:`mission-chip ${de?"done":""}`,children:[h.jsx("span",{children:$}),h.jsx("span",{children:de?"Done":"Pending"})]},$))}),h.jsx("button",{className:"ghost-button",type:"button",onClick:v,children:"Reset missions"})]}),h.jsxs("div",{className:"inspector-section",children:[h.jsx("div",{className:"inspector-section-title",children:"Action plan"}),q?o.length===0?h.jsx("div",{className:"annotation-empty",children:"No recommendations generated yet."}):h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"mission-summary",children:[ae,"/",o.length," complete",h.jsxs("span",{children:[Pe,"%"]})]}),h.jsx("div",{className:"director-recommendations",children:o.map($=>{const de=V.includes($.id);return h.jsxs("article",{className:`director-recommendation tone-${$.tone} ${de?"done":""}`,children:[h.jsx("div",{className:"director-recommendation-title",children:$.title}),h.jsx("p",{className:"director-recommendation-body",children:$.body}),h.jsx("button",{className:"ghost-button",type:"button",onClick:()=>oe($),children:de?"Completed":$.actionLabel})]},$.id)})})]}):h.jsx("div",{className:"annotation-empty",children:"Complete inspect/flow/replay missions to unlock AI narrative tools."}),G?null:h.jsx("div",{className:"annotation-empty",children:"Open another live session to unlock collaboration activity feed."})]})]}):null,L==="narrative"?h.jsxs("div",{className:"inspector-section",children:[h.jsx("div",{className:"inspector-section-title",children:"AI director narrative"}),q?h.jsxs(h.Fragment,{children:[h.jsx("p",{className:"director-recommendation-body",children:p}),z.length?h.jsx("div",{className:"director-guided-plan",children:z.map($=>h.jsx("div",{children:$.step},$.id))}):null,h.jsxs("div",{className:"director-ask-row",children:[h.jsx("input",{className:"search-input",value:j,onChange:$=>N($.target.value),placeholder:"Ask Director (e.g. what is highest risk?)","aria-label":"Ask director question"}),h.jsx("button",{className:"ghost-button",type:"button",onClick:()=>{j.trim()&&I((x==null?void 0:x(j))??"")},children:"Ask"})]}),A?h.jsx("div",{className:"director-answer",children:A}):null,h.jsx("button",{className:"ghost-button",type:"button",onClick:y,children:"Export narrative"})]}):h.jsx("div",{className:"annotation-empty",children:"Complete inspect/flow/replay missions to unlock AI narrative tools."})]}):null,L==="collab"?h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"inspector-section",children:[h.jsx("div",{className:"inspector-section-title",children:"Shared annotations"}),h.jsx("textarea",{value:M,onChange:$=>T($.target.value),rows:3,placeholder:n?"Add note for selected step...":"Add trace-level note...","aria-label":"Shared annotation"}),h.jsx("button",{className:"ghost-button",type:"button",onClick:()=>{const $=M.trim();$&&(d==null||d($,n),T(""))},children:"Add annotation"}),h.jsxs("div",{className:"annotation-list",children:[u.slice(-6).reverse().map($=>h.jsxs("article",{className:"annotation-item",children:[h.jsxs("div",{className:"annotation-meta",children:[h.jsx("span",{children:$.stepId?`step ${$.stepId}`:"trace"}),h.jsx("span",{children:$.authorSessionId})]}),h.jsx("p",{children:$.body})]},$.id)),u.length===0?h.jsx("div",{className:"annotation-empty",children:"No shared annotations yet."}):null]})]}),h.jsxs("div",{className:"inspector-section",children:[h.jsx("div",{className:"inspector-section-title",children:"Collab activity"}),G?h.jsxs("div",{className:"activity-list",children:[ie.map($=>h.jsxs("div",{className:"activity-item",children:[h.jsx("span",{children:$.message}),h.jsx("span",{children:new Date($.timestamp).toLocaleTimeString()})]},$.id)),ie.length===0?h.jsx("div",{className:"annotation-empty",children:"No activity yet."}):null]}):h.jsx("div",{className:"annotation-empty",children:"Open another live session to unlock collaboration activity feed."})]})]}):null]})}const Bu=(e,t,n)=>Math.min(n,Math.max(t,e));function zu(e){return Array.from((e==null?void 0:e.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'))??[]).filter(n=>!(n.hasAttribute("disabled")||n.getAttribute("aria-hidden")==="true"))}function wI({steps:e,open:t,onClose:n,onComplete:r}){const[i,a]=S.useState(0),[s,o]=S.useState(null),[l,u]=S.useState(null),c=S.useRef(null),d=S.useRef(null),f=S.useRef(null),m=S.useMemo(()=>e[i],[e,i]),v=S.useCallback(()=>{if(!t)return;const k=document.querySelector(m.target);if(!k){d.current=null,o(null);return}d.current=k;const _=k.getBoundingClientRect();o(_)},[t,m.target]),p=S.useCallback(()=>{if(!s||!c.current){u(null);return}const k=c.current.offsetWidth,_=c.current.offsetHeight,C=16;let M=Bu(s.left+s.width/2-k/2,C,window.innerWidth-k-C),T=s.bottom+16;m.placement==="top"&&(T=s.top-_-16),m.placement==="left"&&(M=s.left-k-16,T=s.top+s.height/2-_/2),m.placement==="right"&&(M=s.right+16,T=s.top+s.height/2-_/2),T+_>window.innerHeight-C&&(T=s.top-_-16),T<C&&(T=s.bottom+16),M=Bu(M,C,window.innerWidth-k-C),T=Bu(T,C,window.innerHeight-_-C),u({top:T,left:M})},[m.placement,s]);if(S.useEffect(()=>{t&&a(0)},[t]),S.useEffect(()=>{var _,C;if(!t){(C=(_=f.current)==null?void 0:_.focus)==null||C.call(_);return}f.current=document.activeElement;const k=window.setTimeout(()=>{var T;(T=zu(c.current)[0]??c.current)==null||T.focus()},0);return()=>window.clearTimeout(k)},[t]),S.useEffect(()=>{if(!t)return;const k=document.querySelector(m.target);k&&k.scrollIntoView({behavior:"smooth",block:"center",inline:"center"});const _=window.requestAnimationFrame(()=>v());return()=>window.cancelAnimationFrame(_)},[t,m.target,v]),S.useLayoutEffect(()=>{p()},[s,p,m.title]),S.useEffect(()=>{if(!t)return;const k=()=>{v(),p()};return window.addEventListener("resize",k),window.addEventListener("scroll",k,!0),()=>{window.removeEventListener("resize",k),window.removeEventListener("scroll",k,!0)}},[t,v,p]),S.useEffect(()=>{if(!t)return;const k=_=>{var N;if(_.key==="Escape"){_.preventDefault(),n();return}if(_.key!=="Tab")return;const C=zu(c.current);if(!C.length)return;const M=document.activeElement,T=C.indexOf(M),j=_.shiftKey?T<=0?C.length-1:T-1:(T+1)%C.length;(N=C[j])==null||N.focus(),_.preventDefault()};return document.addEventListener("keydown",k,!0),()=>document.removeEventListener("keydown",k,!0)},[n,t]),!t||!m)return null;const x=k=>{var j;if(k.key==="Escape"){k.preventDefault(),n();return}if(k.key!=="Tab")return;const _=zu(c.current);if(_.length===0)return;const C=document.activeElement,M=_.indexOf(C),T=k.shiftKey?M<=0?_.length-1:M-1:(M+1)%_.length;(j=_[T])==null||j.focus(),k.preventDefault()},y=`tour-title-${m.id}`,g=`tour-body-${m.id}`,b=s?{top:s.top-6,left:s.left-6,width:s.width+12,height:s.height+12}:void 0;return h.jsxs("div",{className:"tour-overlay",role:"dialog","aria-modal":"true","aria-label":"Guided tour","aria-labelledby":y,"aria-describedby":g,onKeyDown:x,children:[h.jsx("div",{className:"tour-backdrop",onClick:n}),s?h.jsx("div",{className:"tour-spotlight",style:b}):null,h.jsxs("div",{className:`tour-card ${l?"tour-card-anchored":""}`,ref:c,style:l??void 0,tabIndex:-1,children:[h.jsxs("div",{className:"tour-step",children:["Step ",i+1," of ",e.length]}),h.jsx("div",{className:"tour-title",id:y,children:m.title}),h.jsx("p",{className:"tour-body",id:g,children:m.body}),h.jsxs("div",{className:"tour-actions",children:[h.jsx("button",{className:"ghost-button",type:"button",onClick:()=>a(k=>Math.max(0,k-1)),disabled:i===0,children:"Back"}),h.jsx("button",{className:"ghost-button",type:"button",onClick:n,children:"Skip"}),i===e.length-1?h.jsx("button",{className:"primary-button",type:"button",onClick:r,children:"Finish tour"}):h.jsx("button",{className:"primary-button",type:"button",onClick:()=>a(k=>k+1),children:"Next"})]})]})]})}const Q0=(e,t,n)=>Math.min(n,Math.max(t,e));function bI({enabled:e}){const[t,n]=S.useState(null),[r,i]=S.useState(null),a=S.useRef(null),s=S.useRef(null),o=S.useCallback(()=>{const u=a.current;if(!u){n(null);return}const c=u.getBoundingClientRect(),d=u.dataset.helpTitle??"Context",f=u.dataset.helpBody??"",m=u.dataset.helpPlacement??"right";n({rect:c,title:d,body:f,placement:m})},[]);S.useEffect(()=>{if(!e){a.current=null,n(null);return}const u=v=>{var x,y;const p=(y=(x=v.target)==null?void 0:x.closest)==null?void 0:y.call(x,"[data-help]");if(!p){a.current||n(null);return}a.current!==p&&(a.current=p,o())},c=v=>{var x,y;const p=(y=(x=v.target)==null?void 0:x.closest)==null?void 0:y.call(x,"[data-help]");p&&(a.current=p,o())},d=v=>{var x;const p=v.relatedTarget;(x=p==null?void 0:p.closest)!=null&&x.call(p,"[data-help]")||(a.current=null,n(null))},f=v=>{var x,y;const p=(y=(x=v.target)==null?void 0:x.closest)==null?void 0:y.call(x,"[data-help]");if(!p){a.current=null,n(null);return}a.current=p,o()},m=()=>{a.current&&o()};return window.addEventListener("mousemove",u),window.addEventListener("focusin",c),window.addEventListener("focusout",d),window.addEventListener("pointerdown",f),window.addEventListener("scroll",m,!0),window.addEventListener("resize",m),()=>{window.removeEventListener("mousemove",u),window.removeEventListener("focusin",c),window.removeEventListener("focusout",d),window.removeEventListener("pointerdown",f),window.removeEventListener("scroll",m,!0),window.removeEventListener("resize",m)}},[e,o]);const l=S.useCallback(()=>{if(!t||!s.current){i(null);return}const u=12,c=s.current.offsetWidth,d=s.current.offsetHeight,{rect:f,placement:m}=t;let v=f.right+16,p=f.top+f.height/2-d/2;m==="left"&&(v=f.left-c-16,p=f.top+f.height/2-d/2),m==="top"&&(v=f.left+f.width/2-c/2,p=f.top-d-16),m==="bottom"&&(v=f.left+f.width/2-c/2,p=f.bottom+16),v=Q0(v,u,window.innerWidth-c-u),p=Q0(p,u,window.innerHeight-d-u),i({left:v,top:p})},[t]);return S.useLayoutEffect(()=>{l()},[l]),!e||!t?null:h.jsxs("div",{className:"help-overlay","aria-hidden":"true",children:[h.jsx("div",{className:"help-highlight",style:{top:t.rect.top-6,left:t.rect.left-6,width:t.rect.width+12,height:t.rect.height+12}}),h.jsxs("div",{className:"help-bubble",ref:s,style:r??void 0,"data-placement":t.placement,children:[h.jsx("div",{className:"help-title",children:t.title}),h.jsx("div",{className:"help-body",children:t.body})]})]})}const xI=[{id:"builder",label:"Builder lens",body:"Focus on step payloads, execution paths, and replay control."},{id:"executive",label:"Executive lens",body:"Focus on bottlenecks, risk, and outcome-level run quality."},{id:"operator",label:"Operator lens",body:"Focus on failures, retries, and trace reliability posture."}],SI=[{id:"rapid_triage",label:"Rapid triage",body:"Jump straight to the highest-risk step and start resolution.",estimate:"2-3 min"},{id:"deep_diagnosis",label:"Deep diagnosis",body:"Open flow and guided analysis for full root-cause exploration.",estimate:"8-12 min"},{id:"team_sync",label:"Team sync",body:"Open collaborative mode and prep a handoff workflow.",estimate:"4-6 min"}];function _I({onComplete:e,onStartTour:t,onStartStory:n,persona:r="builder",onPersonaChange:i,launchPath:a="rapid_triage",onLaunchPathChange:s,onStartLaunchPath:o}){const l=()=>{t==null||t(),e()},u=()=>{n==null||n(),e()},c=d=>{s==null||s(d),o==null||o(d),e()};return h.jsx("div",{className:"intro-overlay",role:"dialog","aria-modal":"true","aria-label":"Agent Director intro",children:h.jsxs("div",{className:"intro-card",children:[h.jsx("div",{className:"intro-scan"}),h.jsx("div",{className:"intro-title",children:"Agent Director"}),h.jsx("div",{className:"intro-tagline",children:"Watch your agent think. Then direct it."}),h.jsxs("div",{className:"intro-steps",children:[h.jsxs("div",{className:"intro-step",children:[h.jsx("div",{className:"intro-step-label",children:"Observe"}),h.jsx("div",{className:"intro-step-body",children:"Scrub the timeline to feel pacing and parallelism."})]}),h.jsxs("div",{className:"intro-step",children:[h.jsx("div",{className:"intro-step-label",children:"Inspect"}),h.jsx("div",{className:"intro-step-body",children:"Open the bottleneck to read payloads and costs."})]}),h.jsxs("div",{className:"intro-step",children:[h.jsx("div",{className:"intro-step-label",children:"Direct"}),h.jsx("div",{className:"intro-step-body",children:"Replay from a decisive step and compare runs."})]})]}),h.jsx("div",{className:"intro-personas",role:"group","aria-label":"Select onboarding lens",children:xI.map(d=>h.jsxs("button",{type:"button",className:`ghost-button intro-persona ${r===d.id?"active":""}`,onClick:()=>i==null?void 0:i(d.id),"aria-pressed":r===d.id,"aria-label":d.label,children:[h.jsx("span",{className:"intro-persona-label",children:d.label}),h.jsx("span",{className:"intro-persona-body",children:d.body})]},d.id))}),h.jsx("div",{className:"intro-launch-paths",role:"group","aria-label":"Select launch path",children:SI.map(d=>h.jsxs("article",{className:`intro-path-card ${a===d.id?"active":""}`,children:[h.jsxs("button",{type:"button",className:`ghost-button intro-path-button ${a===d.id?"active":""}`,onClick:()=>s==null?void 0:s(d.id),"aria-pressed":a===d.id,"aria-label":d.label,children:[h.jsx("span",{className:"intro-path-label",children:d.label}),h.jsx("span",{className:"intro-path-estimate",children:d.estimate}),h.jsx("span",{className:"intro-path-body",children:d.body})]}),h.jsxs("button",{className:"primary-button intro-path-start",type:"button",onClick:()=>c(d.id),children:["Start ",d.label]})]},d.id))}),h.jsxs("div",{className:"intro-grid",children:[h.jsx("span",{}),h.jsx("span",{}),h.jsx("span",{}),h.jsx("span",{})]}),h.jsxs("div",{className:"intro-actions",children:[h.jsx("button",{className:"primary-button",type:"button",onClick:l,children:"Start guided tour"}),n?h.jsx("button",{className:"ghost-button",type:"button",onClick:u,children:"Play story mode"}):null,h.jsx("button",{className:"ghost-button",type:"button",onClick:e,children:"Skip intro"})]})]})})}function kI({explainMode:e,storyActive:t,onStartTour:n,onStartStory:r,onToggleExplain:i,onDismiss:a}){return h.jsxs("section",{className:"hero-ribbon","aria-label":"Director briefing","data-help":!0,"data-help-indicator":!0,"data-tour":"hero","data-help-title":"Director briefing","data-help-body":"Start the tour, play story mode, or enable explain to learn the interface instantly.","data-help-placement":"bottom",children:[h.jsxs("div",{className:"hero-ribbon-top",children:[h.jsx("span",{className:"hero-eyebrow",children:"Director briefing"}),h.jsx("button",{className:"ghost-button hero-dismiss",type:"button",onClick:a,children:"Dismiss"})]}),h.jsx("div",{className:"hero-title",children:"Observe. Inspect. Direct."}),h.jsx("div",{className:"hero-subtitle",children:"A cinematic control room for agent traces. See time, read structure, then replay with confidence."}),h.jsxs("div",{className:"hero-pills",children:[h.jsx("span",{className:"hero-pill","data-tone":"observe",children:"Observe"}),h.jsx("span",{className:"hero-pill","data-tone":"inspect",children:"Inspect"}),h.jsx("span",{className:"hero-pill","data-tone":"direct",children:"Direct"})]}),h.jsxs("div",{className:"hero-actions",children:[h.jsx("button",{className:"primary-button",type:"button",onClick:n,children:"Start guided tour"}),h.jsx("button",{className:"ghost-button",type:"button",onClick:r,disabled:t,children:t?"Story running":"Play story mode"}),h.jsxs("button",{className:`ghost-button ${e?"active":""}`,type:"button",onClick:i,"aria-pressed":e,children:["Explain ",e?"On":"Off"]})]})]})}function EI({mode:e,isPlaying:t,storyActive:n,explainMode:r,hidden:i=!1,open:a,onToggleOpen:s,onTogglePlay:o,onStartStory:l,onStopStory:u,onStartTour:c,onOpenPalette:d,onShowShortcuts:f,onToggleExplain:m,onJumpToBottleneck:v}){if(i)return null;const p=t?"Pause":"Play",x=n?"Stop story":"Story mode";return a?h.jsxs("aside",{className:"quick-actions","aria-label":"Quick actions","data-help":!0,"data-help-indicator":!0,"data-tour":"quick-actions","data-help-title":"Quick actions","data-help-body":"Launch story mode, open the command palette, or jump to the bottleneck instantly.","data-help-placement":"left",children:[h.jsxs("div",{className:"quick-actions-header",children:[h.jsxs("div",{children:[h.jsx("div",{className:"quick-actions-title",children:"Quick actions"}),h.jsx("div",{className:"quick-actions-subtitle",children:"Pin demo controls close at hand."})]}),h.jsx("button",{className:"ghost-button",type:"button",onClick:s,"aria-label":"Collapse quick actions",children:"Collapse"})]}),h.jsxs("button",{className:`quick-action ${t?"active":""}`,type:"button",onClick:o,"aria-label":p,"data-help":!0,"data-help-title":"Play or pause","data-help-body":"Start or stop playback from anywhere.","data-help-placement":"left",children:[h.jsx("span",{className:"quick-action-label",children:p}),h.jsx("span",{className:"quick-action-meta",children:e==="flow"?"Cinema":"Space"})]}),h.jsxs("button",{className:`quick-action ${n?"active":""}`,type:"button",onClick:n?u:l,"aria-label":x,"data-help":!0,"data-help-title":"Story mode","data-help-body":"Auto-runs a cinematic walkthrough of the run.","data-help-placement":"left",children:[h.jsx("span",{className:"quick-action-label",children:x}),h.jsx("span",{className:"quick-action-meta",children:"S"})]}),h.jsxs("button",{className:"quick-action",type:"button",onClick:d,"aria-label":"Open command palette","data-help":!0,"data-help-title":"Command palette","data-help-body":"Search every action and jump instantly.","data-help-placement":"left",children:[h.jsx("span",{className:"quick-action-label",children:"Command"}),h.jsx("span",{className:"quick-action-meta",children:"Cmd+K"})]}),h.jsxs("button",{className:"quick-action",type:"button",onClick:c,"aria-label":"Start guided tour","data-help":!0,"data-help-title":"Guided tour","data-help-body":"Walk the interface with a curated tour.","data-help-placement":"left",children:[h.jsx("span",{className:"quick-action-label",children:"Tour"}),h.jsx("span",{className:"quick-action-meta",children:"Guide"})]}),h.jsxs("button",{className:`quick-action ${r?"active":""}`,type:"button",onClick:m,"aria-label":"Toggle explain mode","data-help":!0,"data-help-title":"Explain mode","data-help-body":"Toggle contextual overlays for every control.","data-help-placement":"left",children:[h.jsx("span",{className:"quick-action-label",children:"Explain"}),h.jsx("span",{className:"quick-action-meta",children:r?"On":"Off"})]}),h.jsxs("button",{className:"quick-action",type:"button",onClick:v,"aria-label":"Jump to bottleneck","data-help":!0,"data-help-title":"Bottleneck jump","data-help-body":"Focus instantly on the slowest step.","data-help-placement":"left",children:[h.jsx("span",{className:"quick-action-label",children:"Bottleneck"}),h.jsx("span",{className:"quick-action-meta",children:"Latency"})]}),h.jsxs("button",{className:"quick-action",type:"button",onClick:f,"aria-label":"Show shortcuts","data-help":!0,"data-help-title":"Shortcuts","data-help-body":"See the full keyboard map.","data-help-placement":"left",children:[h.jsx("span",{className:"quick-action-label",children:"Shortcuts"}),h.jsx("span",{className:"quick-action-meta",children:"?"})]})]}):h.jsxs("button",{className:"quick-actions-toggle",type:"button",onClick:s,title:"Open quick actions","aria-expanded":"false","data-help":!0,"data-tour":"quick-actions","data-help-title":"Quick actions","data-help-body":"Open the dock to access demos, shortcuts, and instant actions.","data-help-placement":"left",children:[h.jsx("span",{className:"quick-actions-toggle-label",children:"Actions"}),h.jsx("span",{className:"quick-actions-toggle-meta",children:"Dock"})]})}function CI({active:e,label:t,step:n,total:r,onStop:i,onRestart:a}){if(!e)return null;const s=r>0?(n+1)/r*100:0;return h.jsxs("div",{className:"story-banner",role:"status","aria-live":"polite",children:[h.jsxs("div",{className:"story-banner-main",children:[h.jsx("div",{className:"story-banner-title",children:"Story mode"}),h.jsx("div",{className:"story-banner-step",children:t})]}),h.jsxs("div",{className:"story-banner-actions",children:[h.jsxs("span",{className:"story-banner-count",children:[Math.min(n+1,r),"/",r]}),h.jsx("button",{className:"ghost-button",type:"button",onClick:a,children:"Restart"}),h.jsx("button",{className:"primary-button",type:"button",onClick:i,children:"Stop"})]}),h.jsx("div",{className:"story-banner-progress",children:h.jsx("span",{style:{width:`${s}%`}})})]})}const YC=S.createContext({});function TI(e){const t=S.useRef(null);return t.current===null&&(t.current=e()),t.current}const ly=S.createContext(null),QC=S.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});function MI(e=!0){const t=S.useContext(ly);if(t===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:i}=t,a=S.useId();S.useEffect(()=>{e&&i(a)},[e]);const s=S.useCallback(()=>e&&r&&r(a),[a,r,e]);return!n&&r?[!1,s]:[!0]}const uy=typeof window<"u",jI=uy?S.useLayoutEffect:S.useEffect,_t=e=>e;let XC=_t;function cy(e){let t;return()=>(t===void 0&&(t=e()),t)}const Bi=(e,t,n)=>{const r=t-e;return r===0?1:(n-e)/r},En=e=>e*1e3,Cn=e=>e/1e3,PI={useManualTiming:!1};function NI(e){let t=new Set,n=new Set,r=!1,i=!1;const a=new WeakSet;let s={delta:0,timestamp:0,isProcessing:!1};function o(u){a.has(u)&&(l.schedule(u),e()),u(s)}const l={schedule:(u,c=!1,d=!1)=>{const m=d&&r?t:n;return c&&a.add(u),m.has(u)||m.add(u),u},cancel:u=>{n.delete(u),a.delete(u)},process:u=>{if(s=u,r){i=!0;return}r=!0,[t,n]=[n,t],t.forEach(o),t.clear(),r=!1,i&&(i=!1,l.process(u))}};return l}const no=["read","resolveKeyframes","update","preRender","render","postRender"],AI=40;function JC(e,t){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},a=()=>n=!0,s=no.reduce((y,g)=>(y[g]=NI(a),y),{}),{read:o,resolveKeyframes:l,update:u,preRender:c,render:d,postRender:f}=s,m=()=>{const y=performance.now();n=!1,i.delta=r?1e3/60:Math.max(Math.min(y-i.timestamp,AI),1),i.timestamp=y,i.isProcessing=!0,o.process(i),l.process(i),u.process(i),c.process(i),d.process(i),f.process(i),i.isProcessing=!1,n&&t&&(r=!1,e(m))},v=()=>{n=!0,r=!0,i.isProcessing||e(m)};return{schedule:no.reduce((y,g)=>{const b=s[g];return y[g]=(k,_=!1,C=!1)=>(n||v(),b.schedule(k,_,C)),y},{}),cancel:y=>{for(let g=0;g<no.length;g++)s[no[g]].cancel(y)},state:i,steps:s}}const{schedule:xe,cancel:cr,state:Qe,steps:Uu}=JC(typeof requestAnimationFrame<"u"?requestAnimationFrame:_t,!0),ZC=S.createContext({strict:!1}),X0={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},zi={};for(const e in X0)zi[e]={isEnabled:t=>X0[e].some(n=>!!t[n])};function RI(e){for(const t in e)zi[t]={...zi[t],...e[t]}}const II=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Yo(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||II.has(e)}let eT=e=>!Yo(e);function DI(e){e&&(eT=t=>t.startsWith("on")?!Yo(t):e(t))}try{DI(require("@emotion/is-prop-valid").default)}catch{}function OI(e,t,n){const r={};for(const i in e)i==="values"&&typeof e.values=="object"||(eT(i)||n===!0&&Yo(i)||!t&&!Yo(i)||e.draggable&&i.startsWith("onDrag"))&&(r[i]=e[i]);return r}function LI(e){if(typeof Proxy>"u")return e;const t=new Map,n=(...r)=>e(...r);return new Proxy(n,{get:(r,i)=>i==="create"?e:(t.has(i)||t.set(i,e(i)),t.get(i))})}const _l=S.createContext({});function ls(e){return typeof e=="string"||Array.isArray(e)}function kl(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}const dy=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],fy=["initial",...dy];function El(e){return kl(e.animate)||fy.some(t=>ls(e[t]))}function tT(e){return!!(El(e)||e.variants)}function qI(e,t){if(El(e)){const{initial:n,animate:r}=e;return{initial:n===!1||ls(n)?n:void 0,animate:ls(r)?r:void 0}}return e.inherit!==!1?t:{}}function FI(e){const{initial:t,animate:n}=qI(e,S.useContext(_l));return S.useMemo(()=>({initial:t,animate:n}),[J0(t),J0(n)])}function J0(e){return Array.isArray(e)?e.join(" "):e}const VI=Symbol.for("motionComponentSymbol");function ki(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function $I(e,t,n){return S.useCallback(r=>{r&&e.onMount&&e.onMount(r),t&&(r?t.mount(r):t.unmount()),n&&(typeof n=="function"?n(r):ki(n)&&(n.current=r))},[t])}const hy=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),BI="framerAppearId",nT="data-"+hy(BI),{schedule:py}=JC(queueMicrotask,!1),rT=S.createContext({});function zI(e,t,n,r,i){var a,s;const{visualElement:o}=S.useContext(_l),l=S.useContext(ZC),u=S.useContext(ly),c=S.useContext(QC).reducedMotion,d=S.useRef(null);r=r||l.renderer,!d.current&&r&&(d.current=r(e,{visualState:t,parent:o,props:n,presenceContext:u,blockInitialAnimation:u?u.initial===!1:!1,reducedMotionConfig:c}));const f=d.current,m=S.useContext(rT);f&&!f.projection&&i&&(f.type==="html"||f.type==="svg")&&UI(d.current,n,i,m);const v=S.useRef(!1);S.useInsertionEffect(()=>{f&&v.current&&f.update(n,u)});const p=n[nT],x=S.useRef(!!p&&!(!((a=window.MotionHandoffIsComplete)===null||a===void 0)&&a.call(window,p))&&((s=window.MotionHasOptimisedAnimation)===null||s===void 0?void 0:s.call(window,p)));return jI(()=>{f&&(v.current=!0,window.MotionIsMounted=!0,f.updateFeatures(),py.render(f.render),x.current&&f.animationState&&f.animationState.animateChanges())}),S.useEffect(()=>{f&&(!x.current&&f.animationState&&f.animationState.animateChanges(),x.current&&(queueMicrotask(()=>{var y;(y=window.MotionHandoffMarkAsComplete)===null||y===void 0||y.call(window,p)}),x.current=!1))}),f}function UI(e,t,n,r){const{layoutId:i,layout:a,drag:s,dragConstraints:o,layoutScroll:l,layoutRoot:u}=t;e.projection=new n(e.latestValues,t["data-framer-portal-id"]?void 0:iT(e.parent)),e.projection.setOptions({layoutId:i,layout:a,alwaysMeasureLayout:!!s||o&&ki(o),visualElement:e,animationType:typeof a=="string"?a:"both",initialPromotionConfig:r,layoutScroll:l,layoutRoot:u})}function iT(e){if(e)return e.options.allowProjection!==!1?e.projection:iT(e.parent)}function GI({preloadedFeatures:e,createVisualElement:t,useRender:n,useVisualState:r,Component:i}){var a,s;e&&RI(e);function o(u,c){let d;const f={...S.useContext(QC),...u,layoutId:HI(u)},{isStatic:m}=f,v=FI(u),p=r(u,m);if(!m&&uy){WI();const x=KI(f);d=x.MeasureLayout,v.visualElement=zI(i,p,f,t,x.ProjectionNode)}return h.jsxs(_l.Provider,{value:v,children:[d&&v.visualElement?h.jsx(d,{visualElement:v.visualElement,...f}):null,n(i,u,$I(p,v.visualElement,c),p,m,v.visualElement)]})}o.displayName=`motion.${typeof i=="string"?i:`create(${(s=(a=i.displayName)!==null&&a!==void 0?a:i.name)!==null&&s!==void 0?s:""})`}`;const l=S.forwardRef(o);return l[VI]=i,l}function HI({layoutId:e}){const t=S.useContext(YC).id;return t&&e!==void 0?t+"-"+e:e}function WI(e,t){S.useContext(ZC).strict}function KI(e){const{drag:t,layout:n}=zi;if(!t&&!n)return{};const r={...t,...n};return{MeasureLayout:t!=null&&t.isEnabled(e)||n!=null&&n.isEnabled(e)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const YI=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function my(e){return typeof e!="string"||e.includes("-")?!1:!!(YI.indexOf(e)>-1||/[A-Z]/u.test(e))}function Z0(e){const t=[{},{}];return e==null||e.values.forEach((n,r)=>{t[0][r]=n.get(),t[1][r]=n.getVelocity()}),t}function vy(e,t,n,r){if(typeof t=="function"){const[i,a]=Z0(r);t=t(n!==void 0?n:e.custom,i,a)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[i,a]=Z0(r);t=t(n!==void 0?n:e.custom,i,a)}return t}const Hm=e=>Array.isArray(e),QI=e=>!!(e&&typeof e=="object"&&e.mix&&e.toValue),XI=e=>Hm(e)?e[e.length-1]||0:e,it=e=>!!(e&&e.getVelocity);function So(e){const t=it(e)?e.get():e;return QI(t)?t.toValue():t}function JI({scrapeMotionValuesFromProps:e,createRenderState:t,onUpdate:n},r,i,a){const s={latestValues:ZI(r,i,a,e),renderState:t()};return n&&(s.onMount=o=>n({props:r,current:o,...s}),s.onUpdate=o=>n(o)),s}const aT=e=>(t,n)=>{const r=S.useContext(_l),i=S.useContext(ly),a=()=>JI(e,t,r,i);return n?a():TI(a)};function ZI(e,t,n,r){const i={},a=r(e,{});for(const f in a)i[f]=So(a[f]);let{initial:s,animate:o}=e;const l=El(e),u=tT(e);t&&u&&!l&&e.inherit!==!1&&(s===void 0&&(s=t.initial),o===void 0&&(o=t.animate));let c=n?n.initial===!1:!1;c=c||s===!1;const d=c?o:s;if(d&&typeof d!="boolean"&&!kl(d)){const f=Array.isArray(d)?d:[d];for(let m=0;m<f.length;m++){const v=vy(e,f[m]);if(v){const{transitionEnd:p,transition:x,...y}=v;for(const g in y){let b=y[g];if(Array.isArray(b)){const k=c?b.length-1:0;b=b[k]}b!==null&&(i[g]=b)}for(const g in p)i[g]=p[g]}}}return i}const Ki=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Hr=new Set(Ki),sT=e=>t=>typeof t=="string"&&t.startsWith(e),oT=sT("--"),eD=sT("var(--"),yy=e=>eD(e)?tD.test(e.split("/*")[0].trim()):!1,tD=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,lT=(e,t)=>t&&typeof e=="number"?t.transform(e):e,Nn=(e,t,n)=>n>t?t:n<e?e:n,Yi={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},us={...Yi,transform:e=>Nn(0,1,e)},ro={...Yi,default:1},ws=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),Gn=ws("deg"),un=ws("%"),H=ws("px"),nD=ws("vh"),rD=ws("vw"),ew={...un,parse:e=>un.parse(e)/100,transform:e=>un.transform(e*100)},iD={borderWidth:H,borderTopWidth:H,borderRightWidth:H,borderBottomWidth:H,borderLeftWidth:H,borderRadius:H,radius:H,borderTopLeftRadius:H,borderTopRightRadius:H,borderBottomRightRadius:H,borderBottomLeftRadius:H,width:H,maxWidth:H,height:H,maxHeight:H,top:H,right:H,bottom:H,left:H,padding:H,paddingTop:H,paddingRight:H,paddingBottom:H,paddingLeft:H,margin:H,marginTop:H,marginRight:H,marginBottom:H,marginLeft:H,backgroundPositionX:H,backgroundPositionY:H},aD={rotate:Gn,rotateX:Gn,rotateY:Gn,rotateZ:Gn,scale:ro,scaleX:ro,scaleY:ro,scaleZ:ro,skew:Gn,skewX:Gn,skewY:Gn,distance:H,translateX:H,translateY:H,translateZ:H,x:H,y:H,z:H,perspective:H,transformPerspective:H,opacity:us,originX:ew,originY:ew,originZ:H},tw={...Yi,transform:Math.round},gy={...iD,...aD,zIndex:tw,size:H,fillOpacity:us,strokeOpacity:us,numOctaves:tw},sD={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},oD=Ki.length;function lD(e,t,n){let r="",i=!0;for(let a=0;a<oD;a++){const s=Ki[a],o=e[s];if(o===void 0)continue;let l=!0;if(typeof o=="number"?l=o===(s.startsWith("scale")?1:0):l=parseFloat(o)===0,!l||n){const u=lT(o,gy[s]);if(!l){i=!1;const c=sD[s]||s;r+=`${c}(${u}) `}n&&(t[s]=u)}}return r=r.trim(),n?r=n(t,i?"":r):i&&(r="none"),r}function wy(e,t,n){const{style:r,vars:i,transformOrigin:a}=e;let s=!1,o=!1;for(const l in t){const u=t[l];if(Hr.has(l)){s=!0;continue}else if(oT(l)){i[l]=u;continue}else{const c=lT(u,gy[l]);l.startsWith("origin")?(o=!0,a[l]=c):r[l]=c}}if(t.transform||(s||n?r.transform=lD(t,e.transform,n):r.transform&&(r.transform="none")),o){const{originX:l="50%",originY:u="50%",originZ:c=0}=a;r.transformOrigin=`${l} ${u} ${c}`}}const uD={offset:"stroke-dashoffset",array:"stroke-dasharray"},cD={offset:"strokeDashoffset",array:"strokeDasharray"};function dD(e,t,n=1,r=0,i=!0){e.pathLength=1;const a=i?uD:cD;e[a.offset]=H.transform(-r);const s=H.transform(t),o=H.transform(n);e[a.array]=`${s} ${o}`}function nw(e,t,n){return typeof e=="string"?e:H.transform(t+n*e)}function fD(e,t,n){const r=nw(t,e.x,e.width),i=nw(n,e.y,e.height);return`${r} ${i}`}function by(e,{attrX:t,attrY:n,attrScale:r,originX:i,originY:a,pathLength:s,pathSpacing:o=1,pathOffset:l=0,...u},c,d){if(wy(e,u,d),c){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:f,style:m,dimensions:v}=e;f.transform&&(v&&(m.transform=f.transform),delete f.transform),v&&(i!==void 0||a!==void 0||m.transform)&&(m.transformOrigin=fD(v,i!==void 0?i:.5,a!==void 0?a:.5)),t!==void 0&&(f.x=t),n!==void 0&&(f.y=n),r!==void 0&&(f.scale=r),s!==void 0&&dD(f,s,o,l,!1)}const xy=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),uT=()=>({...xy(),attrs:{}}),Sy=e=>typeof e=="string"&&e.toLowerCase()==="svg";function cT(e,{style:t,vars:n},r,i){Object.assign(e.style,t,i&&i.getProjectionStyles(r));for(const a in n)e.style.setProperty(a,n[a])}const dT=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function fT(e,t,n,r){cT(e,t,void 0,r);for(const i in t.attrs)e.setAttribute(dT.has(i)?i:hy(i),t.attrs[i])}const Qo={};function hD(e){Object.assign(Qo,e)}function hT(e,{layout:t,layoutId:n}){return Hr.has(e)||e.startsWith("origin")||(t||n!==void 0)&&(!!Qo[e]||e==="opacity")}function _y(e,t,n){var r;const{style:i}=e,a={};for(const s in i)(it(i[s])||t.style&&it(t.style[s])||hT(s,e)||((r=n==null?void 0:n.getValue(s))===null||r===void 0?void 0:r.liveStyle)!==void 0)&&(a[s]=i[s]);return a}function pT(e,t,n){const r=_y(e,t,n);for(const i in e)if(it(e[i])||it(t[i])){const a=Ki.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[a]=e[i]}return r}function pD(e,t){try{t.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{t.dimensions={x:0,y:0,width:0,height:0}}}const rw=["x","y","width","height","cx","cy","r"],mD={useVisualState:aT({scrapeMotionValuesFromProps:pT,createRenderState:uT,onUpdate:({props:e,prevProps:t,current:n,renderState:r,latestValues:i})=>{if(!n)return;let a=!!e.drag;if(!a){for(const o in i)if(Hr.has(o)){a=!0;break}}if(!a)return;let s=!t;if(t)for(let o=0;o<rw.length;o++){const l=rw[o];e[l]!==t[l]&&(s=!0)}s&&xe.read(()=>{pD(n,r),xe.render(()=>{by(r,i,Sy(n.tagName),e.transformTemplate),fT(n,r)})})}})},vD={useVisualState:aT({scrapeMotionValuesFromProps:_y,createRenderState:xy})};function mT(e,t,n){for(const r in t)!it(t[r])&&!hT(r,n)&&(e[r]=t[r])}function yD({transformTemplate:e},t){return S.useMemo(()=>{const n=xy();return wy(n,t,e),Object.assign({},n.vars,n.style)},[t])}function gD(e,t){const n=e.style||{},r={};return mT(r,n,e),Object.assign(r,yD(e,t)),r}function wD(e,t){const n={},r=gD(e,t);return e.drag&&e.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=r,n}function bD(e,t,n,r){const i=S.useMemo(()=>{const a=uT();return by(a,t,Sy(r),e.transformTemplate),{...a.attrs,style:{...a.style}}},[t]);if(e.style){const a={};mT(a,e.style,e),i.style={...a,...i.style}}return i}function xD(e=!1){return(n,r,i,{latestValues:a},s)=>{const l=(my(n)?bD:wD)(r,a,s,n),u=OI(r,typeof n=="string",e),c=n!==S.Fragment?{...u,...l,ref:i}:{},{children:d}=r,f=S.useMemo(()=>it(d)?d.get():d,[d]);return S.createElement(n,{...c,children:f})}}function SD(e,t){return function(r,{forwardMotionProps:i}={forwardMotionProps:!1}){const s={...my(r)?mD:vD,preloadedFeatures:e,useRender:xD(i),createVisualElement:t,Component:r};return GI(s)}}function vT(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}function Cl(e,t,n){const r=e.getProps();return vy(r,t,n!==void 0?n:r.custom,e)}const _D=cy(()=>window.ScrollTimeline!==void 0);class kD{constructor(t){this.stop=()=>this.runAll("stop"),this.animations=t.filter(Boolean)}get finished(){return Promise.all(this.animations.map(t=>"finished"in t?t.finished:t))}getAll(t){return this.animations[0][t]}setAll(t,n){for(let r=0;r<this.animations.length;r++)this.animations[r][t]=n}attachTimeline(t,n){const r=this.animations.map(i=>{if(_D()&&i.attachTimeline)return i.attachTimeline(t);if(typeof n=="function")return n(i)});return()=>{r.forEach((i,a)=>{i&&i(),this.animations[a].stop()})}}get time(){return this.getAll("time")}set time(t){this.setAll("time",t)}get speed(){return this.getAll("speed")}set speed(t){this.setAll("speed",t)}get startTime(){return this.getAll("startTime")}get duration(){let t=0;for(let n=0;n<this.animations.length;n++)t=Math.max(t,this.animations[n].duration);return t}runAll(t){this.animations.forEach(n=>n[t]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class ED extends kD{then(t,n){return Promise.all(this.animations).then(t).catch(n)}}function ky(e,t){return e?e[t]||e.default||e:void 0}const Wm=2e4;function yT(e){let t=0;const n=50;let r=e.next(t);for(;!r.done&&t<Wm;)t+=n,r=e.next(t);return t>=Wm?1/0:t}function Ey(e){return typeof e=="function"}function iw(e,t){e.timeline=t,e.onfinish=null}const Cy=e=>Array.isArray(e)&&typeof e[0]=="number",CD={linearEasing:void 0};function TD(e,t){const n=cy(e);return()=>{var r;return(r=CD[t])!==null&&r!==void 0?r:n()}}const Xo=TD(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),gT=(e,t,n=10)=>{let r="";const i=Math.max(Math.round(t/n),2);for(let a=0;a<i;a++)r+=e(Bi(0,i-1,a))+", ";return`linear(${r.substring(0,r.length-2)})`};function wT(e){return!!(typeof e=="function"&&Xo()||!e||typeof e=="string"&&(e in Km||Xo())||Cy(e)||Array.isArray(e)&&e.every(wT))}const _a=([e,t,n,r])=>`cubic-bezier(${e}, ${t}, ${n}, ${r})`,Km={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:_a([0,.65,.55,1]),circOut:_a([.55,0,1,.45]),backIn:_a([.31,.01,.66,-.59]),backOut:_a([.33,1.53,.69,.99])};function bT(e,t){if(e)return typeof e=="function"&&Xo()?gT(e,t):Cy(e)?_a(e):Array.isArray(e)?e.map(n=>bT(n,t)||Km.easeOut):Km[e]}const Ut={x:!1,y:!1};function xT(){return Ut.x||Ut.y}function MD(e,t,n){var r;if(e instanceof Element)return[e];if(typeof e=="string"){let i=document;const a=(r=void 0)!==null&&r!==void 0?r:i.querySelectorAll(e);return a?Array.from(a):[]}return Array.from(e)}function ST(e,t){const n=MD(e),r=new AbortController,i={passive:!0,...t,signal:r.signal};return[n,i,()=>r.abort()]}function aw(e){return t=>{t.pointerType==="touch"||xT()||e(t)}}function jD(e,t,n={}){const[r,i,a]=ST(e,n),s=aw(o=>{const{target:l}=o,u=t(o);if(typeof u!="function"||!l)return;const c=aw(d=>{u(d),l.removeEventListener("pointerleave",c)});l.addEventListener("pointerleave",c,i)});return r.forEach(o=>{o.addEventListener("pointerenter",s,i)}),a}const _T=(e,t)=>t?e===t?!0:_T(e,t.parentElement):!1,Ty=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1,PD=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function ND(e){return PD.has(e.tagName)||e.tabIndex!==-1}const ka=new WeakSet;function sw(e){return t=>{t.key==="Enter"&&e(t)}}function Gu(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const AD=(e,t)=>{const n=e.currentTarget;if(!n)return;const r=sw(()=>{if(ka.has(n))return;Gu(n,"down");const i=sw(()=>{Gu(n,"up")}),a=()=>Gu(n,"cancel");n.addEventListener("keyup",i,t),n.addEventListener("blur",a,t)});n.addEventListener("keydown",r,t),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),t)};function ow(e){return Ty(e)&&!xT()}function RD(e,t,n={}){const[r,i,a]=ST(e,n),s=o=>{const l=o.currentTarget;if(!ow(o)||ka.has(l))return;ka.add(l);const u=t(o),c=(m,v)=>{window.removeEventListener("pointerup",d),window.removeEventListener("pointercancel",f),!(!ow(m)||!ka.has(l))&&(ka.delete(l),typeof u=="function"&&u(m,{success:v}))},d=m=>{c(m,n.useGlobalTarget||_T(l,m.target))},f=m=>{c(m,!1)};window.addEventListener("pointerup",d,i),window.addEventListener("pointercancel",f,i)};return r.forEach(o=>{!ND(o)&&o.getAttribute("tabindex")===null&&(o.tabIndex=0),(n.useGlobalTarget?window:o).addEventListener("pointerdown",s,i),o.addEventListener("focus",u=>AD(u,i),i)}),a}function ID(e){return e==="x"||e==="y"?Ut[e]?null:(Ut[e]=!0,()=>{Ut[e]=!1}):Ut.x||Ut.y?null:(Ut.x=Ut.y=!0,()=>{Ut.x=Ut.y=!1})}const kT=new Set(["width","height","top","left","right","bottom",...Ki]);let _o;function DD(){_o=void 0}const cn={now:()=>(_o===void 0&&cn.set(Qe.isProcessing||PI.useManualTiming?Qe.timestamp:performance.now()),_o),set:e=>{_o=e,queueMicrotask(DD)}};function My(e,t){e.indexOf(t)===-1&&e.push(t)}function jy(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}class Py{constructor(){this.subscriptions=[]}add(t){return My(this.subscriptions,t),()=>jy(this.subscriptions,t)}notify(t,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](t,n,r);else for(let a=0;a<i;a++){const s=this.subscriptions[a];s&&s(t,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function ET(e,t){return t?e*(1e3/t):0}const lw=30,OD=e=>!isNaN(parseFloat(e));class LD{constructor(t,n={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,i=!0)=>{const a=cn.now();this.updatedAt!==a&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(t),this.owner=n.owner}setCurrent(t){this.current=t,this.updatedAt=cn.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=OD(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,n){this.events[t]||(this.events[t]=new Py);const r=this.events[t].add(n);return t==="change"?()=>{r(),xe.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,n){this.passiveEffect=t,this.stopPassiveEffect=n}set(t,n=!0){!n||!this.passiveEffect?this.updateAndNotify(t,n):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-r}jump(t,n=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=cn.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>lw)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,lw);return ET(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(t){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=t(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function cs(e,t){return new LD(e,t)}function qD(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,cs(n))}function FD(e,t){const n=Cl(e,t);let{transitionEnd:r={},transition:i={},...a}=n||{};a={...a,...r};for(const s in a){const o=XI(a[s]);qD(e,s,o)}}function VD(e){return!!(it(e)&&e.add)}function Ym(e,t){const n=e.getValue("willChange");if(VD(n))return n.add(t)}function CT(e){return e.props[nT]}const TT=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,$D=1e-7,BD=12;function zD(e,t,n,r,i){let a,s,o=0;do s=t+(n-t)/2,a=TT(s,r,i)-e,a>0?n=s:t=s;while(Math.abs(a)>$D&&++o<BD);return s}function bs(e,t,n,r){if(e===t&&n===r)return _t;const i=a=>zD(a,0,1,e,n);return a=>a===0||a===1?a:TT(i(a),t,r)}const MT=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,jT=e=>t=>1-e(1-t),PT=bs(.33,1.53,.69,.99),Ny=jT(PT),NT=MT(Ny),AT=e=>(e*=2)<1?.5*Ny(e):.5*(2-Math.pow(2,-10*(e-1))),Ay=e=>1-Math.sin(Math.acos(e)),RT=jT(Ay),IT=MT(Ay),DT=e=>/^0[^.\s]+$/u.test(e);function UD(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||DT(e):!0}const $a=e=>Math.round(e*1e5)/1e5,Ry=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function GD(e){return e==null}const HD=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Iy=(e,t)=>n=>!!(typeof n=="string"&&HD.test(n)&&n.startsWith(e)||t&&!GD(n)&&Object.prototype.hasOwnProperty.call(n,t)),OT=(e,t,n)=>r=>{if(typeof r!="string")return r;const[i,a,s,o]=r.match(Ry);return{[e]:parseFloat(i),[t]:parseFloat(a),[n]:parseFloat(s),alpha:o!==void 0?parseFloat(o):1}},WD=e=>Nn(0,255,e),Hu={...Yi,transform:e=>Math.round(WD(e))},Ar={test:Iy("rgb","red"),parse:OT("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:r=1})=>"rgba("+Hu.transform(e)+", "+Hu.transform(t)+", "+Hu.transform(n)+", "+$a(us.transform(r))+")"};function KD(e){let t="",n="",r="",i="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),r=e.substring(5,7),i=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),r=e.substring(3,4),i=e.substring(4,5),t+=t,n+=n,r+=r,i+=i),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const Qm={test:Iy("#"),parse:KD,transform:Ar.transform},Ei={test:Iy("hsl","hue"),parse:OT("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:r=1})=>"hsla("+Math.round(e)+", "+un.transform($a(t))+", "+un.transform($a(n))+", "+$a(us.transform(r))+")"},nt={test:e=>Ar.test(e)||Qm.test(e)||Ei.test(e),parse:e=>Ar.test(e)?Ar.parse(e):Ei.test(e)?Ei.parse(e):Qm.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?Ar.transform(e):Ei.transform(e)},YD=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function QD(e){var t,n;return isNaN(e)&&typeof e=="string"&&(((t=e.match(Ry))===null||t===void 0?void 0:t.length)||0)+(((n=e.match(YD))===null||n===void 0?void 0:n.length)||0)>0}const LT="number",qT="color",XD="var",JD="var(",uw="${}",ZD=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function ds(e){const t=e.toString(),n=[],r={color:[],number:[],var:[]},i=[];let a=0;const o=t.replace(ZD,l=>(nt.test(l)?(r.color.push(a),i.push(qT),n.push(nt.parse(l))):l.startsWith(JD)?(r.var.push(a),i.push(XD),n.push(l)):(r.number.push(a),i.push(LT),n.push(parseFloat(l))),++a,uw)).split(uw);return{values:n,split:o,indexes:r,types:i}}function FT(e){return ds(e).values}function VT(e){const{split:t,types:n}=ds(e),r=t.length;return i=>{let a="";for(let s=0;s<r;s++)if(a+=t[s],i[s]!==void 0){const o=n[s];o===LT?a+=$a(i[s]):o===qT?a+=nt.transform(i[s]):a+=i[s]}return a}}const e2=e=>typeof e=="number"?0:e;function t2(e){const t=FT(e);return VT(e)(t.map(e2))}const dr={test:QD,parse:FT,createTransformer:VT,getAnimatableNone:t2},n2=new Set(["brightness","contrast","saturate","opacity"]);function r2(e){const[t,n]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[r]=n.match(Ry)||[];if(!r)return e;const i=n.replace(r,"");let a=n2.has(t)?1:0;return r!==n&&(a*=100),t+"("+a+i+")"}const i2=/\b([a-z-]*)\(.*?\)/gu,Xm={...dr,getAnimatableNone:e=>{const t=e.match(i2);return t?t.map(r2).join(" "):e}},a2={...gy,color:nt,backgroundColor:nt,outlineColor:nt,fill:nt,stroke:nt,borderColor:nt,borderTopColor:nt,borderRightColor:nt,borderBottomColor:nt,borderLeftColor:nt,filter:Xm,WebkitFilter:Xm},Dy=e=>a2[e];function $T(e,t){let n=Dy(e);return n!==Xm&&(n=dr),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const s2=new Set(["auto","none","0"]);function o2(e,t,n){let r=0,i;for(;r<e.length&&!i;){const a=e[r];typeof a=="string"&&!s2.has(a)&&ds(a).values.length&&(i=e[r]),r++}if(i&&n)for(const a of t)e[a]=$T(n,i)}const cw=e=>e===Yi||e===H,dw=(e,t)=>parseFloat(e.split(", ")[t]),fw=(e,t)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const i=r.match(/^matrix3d\((.+)\)$/u);if(i)return dw(i[1],t);{const a=r.match(/^matrix\((.+)\)$/u);return a?dw(a[1],e):0}},l2=new Set(["x","y","z"]),u2=Ki.filter(e=>!l2.has(e));function c2(e){const t=[];return u2.forEach(n=>{const r=e.getValue(n);r!==void 0&&(t.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),t}const Ui={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:fw(4,13),y:fw(5,14)};Ui.translateX=Ui.x;Ui.translateY=Ui.y;const Or=new Set;let Jm=!1,Zm=!1;function BT(){if(Zm){const e=Array.from(Or).filter(r=>r.needsMeasurement),t=new Set(e.map(r=>r.element)),n=new Map;t.forEach(r=>{const i=c2(r);i.length&&(n.set(r,i),r.render())}),e.forEach(r=>r.measureInitialState()),t.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([a,s])=>{var o;(o=r.getValue(a))===null||o===void 0||o.set(s)})}),e.forEach(r=>r.measureEndState()),e.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}Zm=!1,Jm=!1,Or.forEach(e=>e.complete()),Or.clear()}function zT(){Or.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(Zm=!0)})}function d2(){zT(),BT()}class Oy{constructor(t,n,r,i,a,s=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...t],this.onComplete=n,this.name=r,this.motionValue=i,this.element=a,this.isAsync=s}scheduleResolve(){this.isScheduled=!0,this.isAsync?(Or.add(this),Jm||(Jm=!0,xe.read(zT),xe.resolveKeyframes(BT))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:n,element:r,motionValue:i}=this;for(let a=0;a<t.length;a++)if(t[a]===null)if(a===0){const s=i==null?void 0:i.get(),o=t[t.length-1];if(s!==void 0)t[0]=s;else if(r&&n){const l=r.readValue(n,o);l!=null&&(t[0]=l)}t[0]===void 0&&(t[0]=o),i&&s===void 0&&i.set(t[0])}else t[a]=t[a-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),Or.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,Or.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const UT=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e),f2=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function h2(e){const t=f2.exec(e);if(!t)return[,];const[,n,r,i]=t;return[`--${n??r}`,i]}function GT(e,t,n=1){const[r,i]=h2(e);if(!r)return;const a=window.getComputedStyle(t).getPropertyValue(r);if(a){const s=a.trim();return UT(s)?parseFloat(s):s}return yy(i)?GT(i,t,n+1):i}const HT=e=>t=>t.test(e),p2={test:e=>e==="auto",parse:e=>e},WT=[Yi,H,un,Gn,rD,nD,p2],hw=e=>WT.find(HT(e));class KT extends Oy{constructor(t,n,r,i,a){super(t,n,r,i,a,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let l=0;l<t.length;l++){let u=t[l];if(typeof u=="string"&&(u=u.trim(),yy(u))){const c=GT(u,n.current);c!==void 0&&(t[l]=c),l===t.length-1&&(this.finalKeyframe=u)}}if(this.resolveNoneKeyframes(),!kT.has(r)||t.length!==2)return;const[i,a]=t,s=hw(i),o=hw(a);if(s!==o)if(cw(s)&&cw(o))for(let l=0;l<t.length;l++){const u=t[l];typeof u=="string"&&(t[l]=parseFloat(u))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:n}=this,r=[];for(let i=0;i<t.length;i++)UD(t[i])&&r.push(i);r.length&&o2(t,r,n)}measureInitialState(){const{element:t,unresolvedKeyframes:n,name:r}=this;if(!t||!t.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Ui[r](t.measureViewportBox(),window.getComputedStyle(t.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&t.getValue(r,i).jump(i,!1)}measureEndState(){var t;const{element:n,name:r,unresolvedKeyframes:i}=this;if(!n||!n.current)return;const a=n.getValue(r);a&&a.jump(this.measuredOrigin,!1);const s=i.length-1,o=i[s];i[s]=Ui[r](n.measureViewportBox(),window.getComputedStyle(n.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),!((t=this.removedTransforms)===null||t===void 0)&&t.length&&this.removedTransforms.forEach(([l,u])=>{n.getValue(l).set(u)}),this.resolveNoneKeyframes()}}const pw=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(dr.test(e)||e==="0")&&!e.startsWith("url("));function m2(e){const t=e[0];if(e.length===1)return!0;for(let n=0;n<e.length;n++)if(e[n]!==t)return!0}function v2(e,t,n,r){const i=e[0];if(i===null)return!1;if(t==="display"||t==="visibility")return!0;const a=e[e.length-1],s=pw(i,t),o=pw(a,t);return!s||!o?!1:m2(e)||(n==="spring"||Ey(n))&&r}const y2=e=>e!==null;function Tl(e,{repeat:t,repeatType:n="loop"},r){const i=e.filter(y2),a=t&&n!=="loop"&&t%2===1?0:i.length-1;return!a||r===void 0?i[a]:r}const g2=40;class YT{constructor({autoplay:t=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:a=0,repeatType:s="loop",...o}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=cn.now(),this.options={autoplay:t,delay:n,type:r,repeat:i,repeatDelay:a,repeatType:s,...o},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>g2?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&d2(),this._resolved}onKeyframesResolved(t,n){this.resolvedAt=cn.now(),this.hasAttemptedResolve=!0;const{name:r,type:i,velocity:a,delay:s,onComplete:o,onUpdate:l,isGenerator:u}=this.options;if(!u&&!v2(t,r,i,a))if(s)this.options.duration=0;else{l&&l(Tl(t,this.options,n)),o&&o(),this.resolveFinishedPromise();return}const c=this.initPlayback(t,n);c!==!1&&(this._resolved={keyframes:t,finalKeyframe:n,...c},this.onPostResolved())}onPostResolved(){}then(t,n){return this.currentFinishedPromise.then(t,n)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(t=>{this.resolveFinishedPromise=t})}}const Te=(e,t,n)=>e+(t-e)*n;function Wu(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function w2({hue:e,saturation:t,lightness:n,alpha:r}){e/=360,t/=100,n/=100;let i=0,a=0,s=0;if(!t)i=a=s=n;else{const o=n<.5?n*(1+t):n+t-n*t,l=2*n-o;i=Wu(l,o,e+1/3),a=Wu(l,o,e),s=Wu(l,o,e-1/3)}return{red:Math.round(i*255),green:Math.round(a*255),blue:Math.round(s*255),alpha:r}}function Jo(e,t){return n=>n>0?t:e}const Ku=(e,t,n)=>{const r=e*e,i=n*(t*t-r)+r;return i<0?0:Math.sqrt(i)},b2=[Qm,Ar,Ei],x2=e=>b2.find(t=>t.test(e));function mw(e){const t=x2(e);if(!t)return!1;let n=t.parse(e);return t===Ei&&(n=w2(n)),n}const vw=(e,t)=>{const n=mw(e),r=mw(t);if(!n||!r)return Jo(e,t);const i={...n};return a=>(i.red=Ku(n.red,r.red,a),i.green=Ku(n.green,r.green,a),i.blue=Ku(n.blue,r.blue,a),i.alpha=Te(n.alpha,r.alpha,a),Ar.transform(i))},S2=(e,t)=>n=>t(e(n)),xs=(...e)=>e.reduce(S2),ev=new Set(["none","hidden"]);function _2(e,t){return ev.has(e)?n=>n<=0?e:t:n=>n>=1?t:e}function k2(e,t){return n=>Te(e,t,n)}function Ly(e){return typeof e=="number"?k2:typeof e=="string"?yy(e)?Jo:nt.test(e)?vw:T2:Array.isArray(e)?QT:typeof e=="object"?nt.test(e)?vw:E2:Jo}function QT(e,t){const n=[...e],r=n.length,i=e.map((a,s)=>Ly(a)(a,t[s]));return a=>{for(let s=0;s<r;s++)n[s]=i[s](a);return n}}function E2(e,t){const n={...e,...t},r={};for(const i in n)e[i]!==void 0&&t[i]!==void 0&&(r[i]=Ly(e[i])(e[i],t[i]));return i=>{for(const a in r)n[a]=r[a](i);return n}}function C2(e,t){var n;const r=[],i={color:0,var:0,number:0};for(let a=0;a<t.values.length;a++){const s=t.types[a],o=e.indexes[s][i[s]],l=(n=e.values[o])!==null&&n!==void 0?n:0;r[a]=l,i[s]++}return r}const T2=(e,t)=>{const n=dr.createTransformer(t),r=ds(e),i=ds(t);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?ev.has(e)&&!i.values.length||ev.has(t)&&!r.values.length?_2(e,t):xs(QT(C2(r,i),i.values),n):Jo(e,t)};function XT(e,t,n){return typeof e=="number"&&typeof t=="number"&&typeof n=="number"?Te(e,t,n):Ly(e)(e,t)}const M2=5;function JT(e,t,n){const r=Math.max(t-M2,0);return ET(n-e(r),t-r)}const Re={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Yu=.001;function j2({duration:e=Re.duration,bounce:t=Re.bounce,velocity:n=Re.velocity,mass:r=Re.mass}){let i,a,s=1-t;s=Nn(Re.minDamping,Re.maxDamping,s),e=Nn(Re.minDuration,Re.maxDuration,Cn(e)),s<1?(i=u=>{const c=u*s,d=c*e,f=c-n,m=tv(u,s),v=Math.exp(-d);return Yu-f/m*v},a=u=>{const d=u*s*e,f=d*n+n,m=Math.pow(s,2)*Math.pow(u,2)*e,v=Math.exp(-d),p=tv(Math.pow(u,2),s);return(-i(u)+Yu>0?-1:1)*((f-m)*v)/p}):(i=u=>{const c=Math.exp(-u*e),d=(u-n)*e+1;return-Yu+c*d},a=u=>{const c=Math.exp(-u*e),d=(n-u)*(e*e);return c*d});const o=5/e,l=N2(i,a,o);if(e=En(e),isNaN(l))return{stiffness:Re.stiffness,damping:Re.damping,duration:e};{const u=Math.pow(l,2)*r;return{stiffness:u,damping:s*2*Math.sqrt(r*u),duration:e}}}const P2=12;function N2(e,t,n){let r=n;for(let i=1;i<P2;i++)r=r-e(r)/t(r);return r}function tv(e,t){return e*Math.sqrt(1-t*t)}const A2=["duration","bounce"],R2=["stiffness","damping","mass"];function yw(e,t){return t.some(n=>e[n]!==void 0)}function I2(e){let t={velocity:Re.velocity,stiffness:Re.stiffness,damping:Re.damping,mass:Re.mass,isResolvedFromDuration:!1,...e};if(!yw(e,R2)&&yw(e,A2))if(e.visualDuration){const n=e.visualDuration,r=2*Math.PI/(n*1.2),i=r*r,a=2*Nn(.05,1,1-(e.bounce||0))*Math.sqrt(i);t={...t,mass:Re.mass,stiffness:i,damping:a}}else{const n=j2(e);t={...t,...n,mass:Re.mass},t.isResolvedFromDuration=!0}return t}function ZT(e=Re.visualDuration,t=Re.bounce){const n=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:r,restDelta:i}=n;const a=n.keyframes[0],s=n.keyframes[n.keyframes.length-1],o={done:!1,value:a},{stiffness:l,damping:u,mass:c,duration:d,velocity:f,isResolvedFromDuration:m}=I2({...n,velocity:-Cn(n.velocity||0)}),v=f||0,p=u/(2*Math.sqrt(l*c)),x=s-a,y=Cn(Math.sqrt(l/c)),g=Math.abs(x)<5;r||(r=g?Re.restSpeed.granular:Re.restSpeed.default),i||(i=g?Re.restDelta.granular:Re.restDelta.default);let b;if(p<1){const _=tv(y,p);b=C=>{const M=Math.exp(-p*y*C);return s-M*((v+p*y*x)/_*Math.sin(_*C)+x*Math.cos(_*C))}}else if(p===1)b=_=>s-Math.exp(-y*_)*(x+(v+y*x)*_);else{const _=y*Math.sqrt(p*p-1);b=C=>{const M=Math.exp(-p*y*C),T=Math.min(_*C,300);return s-M*((v+p*y*x)*Math.sinh(T)+_*x*Math.cosh(T))/_}}const k={calculatedDuration:m&&d||null,next:_=>{const C=b(_);if(m)o.done=_>=d;else{let M=0;p<1&&(M=_===0?En(v):JT(b,_,C));const T=Math.abs(M)<=r,j=Math.abs(s-C)<=i;o.done=T&&j}return o.value=o.done?s:C,o},toString:()=>{const _=Math.min(yT(k),Wm),C=gT(M=>k.next(_*M).value,_,30);return _+"ms "+C}};return k}function gw({keyframes:e,velocity:t=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:a=500,modifyTarget:s,min:o,max:l,restDelta:u=.5,restSpeed:c}){const d=e[0],f={done:!1,value:d},m=T=>o!==void 0&&T<o||l!==void 0&&T>l,v=T=>o===void 0?l:l===void 0||Math.abs(o-T)<Math.abs(l-T)?o:l;let p=n*t;const x=d+p,y=s===void 0?x:s(x);y!==x&&(p=y-d);const g=T=>-p*Math.exp(-T/r),b=T=>y+g(T),k=T=>{const j=g(T),N=b(T);f.done=Math.abs(j)<=u,f.value=f.done?y:N};let _,C;const M=T=>{m(f.value)&&(_=T,C=ZT({keyframes:[f.value,v(f.value)],velocity:JT(b,T,f.value),damping:i,stiffness:a,restDelta:u,restSpeed:c}))};return M(0),{calculatedDuration:null,next:T=>{let j=!1;return!C&&_===void 0&&(j=!0,k(T),M(T)),_!==void 0&&T>=_?C.next(T-_):(!j&&k(T),f)}}}const D2=bs(.42,0,1,1),O2=bs(0,0,.58,1),eM=bs(.42,0,.58,1),L2=e=>Array.isArray(e)&&typeof e[0]!="number",q2={linear:_t,easeIn:D2,easeInOut:eM,easeOut:O2,circIn:Ay,circInOut:IT,circOut:RT,backIn:Ny,backInOut:NT,backOut:PT,anticipate:AT},ww=e=>{if(Cy(e)){XC(e.length===4);const[t,n,r,i]=e;return bs(t,n,r,i)}else if(typeof e=="string")return q2[e];return e};function F2(e,t,n){const r=[],i=n||XT,a=e.length-1;for(let s=0;s<a;s++){let o=i(e[s],e[s+1]);if(t){const l=Array.isArray(t)?t[s]||_t:t;o=xs(l,o)}r.push(o)}return r}function V2(e,t,{clamp:n=!0,ease:r,mixer:i}={}){const a=e.length;if(XC(a===t.length),a===1)return()=>t[0];if(a===2&&t[0]===t[1])return()=>t[1];const s=e[0]===e[1];e[0]>e[a-1]&&(e=[...e].reverse(),t=[...t].reverse());const o=F2(t,r,i),l=o.length,u=c=>{if(s&&c<e[0])return t[0];let d=0;if(l>1)for(;d<e.length-2&&!(c<e[d+1]);d++);const f=Bi(e[d],e[d+1],c);return o[d](f)};return n?c=>u(Nn(e[0],e[a-1],c)):u}function $2(e,t){const n=e[e.length-1];for(let r=1;r<=t;r++){const i=Bi(0,t,r);e.push(Te(n,1,i))}}function B2(e){const t=[0];return $2(t,e.length-1),t}function z2(e,t){return e.map(n=>n*t)}function U2(e,t){return e.map(()=>t||eM).splice(0,e.length-1)}function Zo({duration:e=300,keyframes:t,times:n,ease:r="easeInOut"}){const i=L2(r)?r.map(ww):ww(r),a={done:!1,value:t[0]},s=z2(n&&n.length===t.length?n:B2(t),e),o=V2(s,t,{ease:Array.isArray(i)?i:U2(t,i)});return{calculatedDuration:e,next:l=>(a.value=o(l),a.done=l>=e,a)}}const G2=e=>{const t=({timestamp:n})=>e(n);return{start:()=>xe.update(t,!0),stop:()=>cr(t),now:()=>Qe.isProcessing?Qe.timestamp:cn.now()}},H2={decay:gw,inertia:gw,tween:Zo,keyframes:Zo,spring:ZT},W2=e=>e/100;class qy extends YT{constructor(t){super(t),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:l}=this.options;l&&l()};const{name:n,motionValue:r,element:i,keyframes:a}=this.options,s=(i==null?void 0:i.KeyframeResolver)||Oy,o=(l,u)=>this.onKeyframesResolved(l,u);this.resolver=new s(a,o,n,r,i),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(t){const{type:n="keyframes",repeat:r=0,repeatDelay:i=0,repeatType:a,velocity:s=0}=this.options,o=Ey(n)?n:H2[n]||Zo;let l,u;o!==Zo&&typeof t[0]!="number"&&(l=xs(W2,XT(t[0],t[1])),t=[0,100]);const c=o({...this.options,keyframes:t});a==="mirror"&&(u=o({...this.options,keyframes:[...t].reverse(),velocity:-s})),c.calculatedDuration===null&&(c.calculatedDuration=yT(c));const{calculatedDuration:d}=c,f=d+i,m=f*(r+1)-i;return{generator:c,mirroredGenerator:u,mapPercentToKeyframes:l,calculatedDuration:d,resolvedDuration:f,totalDuration:m}}onPostResolved(){const{autoplay:t=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!t?this.pause():this.state=this.pendingPlayState}tick(t,n=!1){const{resolved:r}=this;if(!r){const{keyframes:T}=this.options;return{done:!0,value:T[T.length-1]}}const{finalKeyframe:i,generator:a,mirroredGenerator:s,mapPercentToKeyframes:o,keyframes:l,calculatedDuration:u,totalDuration:c,resolvedDuration:d}=r;if(this.startTime===null)return a.next(0);const{delay:f,repeat:m,repeatType:v,repeatDelay:p,onUpdate:x}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-c/this.speed,this.startTime)),n?this.currentTime=t:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(t-this.startTime)*this.speed;const y=this.currentTime-f*(this.speed>=0?1:-1),g=this.speed>=0?y<0:y>c;this.currentTime=Math.max(y,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=c);let b=this.currentTime,k=a;if(m){const T=Math.min(this.currentTime,c)/d;let j=Math.floor(T),N=T%1;!N&&T>=1&&(N=1),N===1&&j--,j=Math.min(j,m+1),!!(j%2)&&(v==="reverse"?(N=1-N,p&&(N-=p/d)):v==="mirror"&&(k=s)),b=Nn(0,1,N)*d}const _=g?{done:!1,value:l[0]}:k.next(b);o&&(_.value=o(_.value));let{done:C}=_;!g&&u!==null&&(C=this.speed>=0?this.currentTime>=c:this.currentTime<=0);const M=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&C);return M&&i!==void 0&&(_.value=Tl(l,this.options,i)),x&&x(_.value),M&&this.finish(),_}get duration(){const{resolved:t}=this;return t?Cn(t.calculatedDuration):0}get time(){return Cn(this.currentTime)}set time(t){t=En(t),this.currentTime=t,this.holdTime!==null||this.speed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.speed)}get speed(){return this.playbackSpeed}set speed(t){const n=this.playbackSpeed!==t;this.playbackSpeed=t,n&&(this.time=Cn(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:t=G2,onPlay:n,startTime:r}=this.options;this.driver||(this.driver=t(a=>this.tick(a))),n&&n();const i=this.driver.now();this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=i):this.startTime=r??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var t;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(t=this.currentTime)!==null&&t!==void 0?t:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:t}=this.options;t&&t()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}}const K2=new Set(["opacity","clipPath","filter","transform"]);function Y2(e,t,n,{delay:r=0,duration:i=300,repeat:a=0,repeatType:s="loop",ease:o="easeInOut",times:l}={}){const u={[t]:n};l&&(u.offset=l);const c=bT(o,i);return Array.isArray(c)&&(u.easing=c),e.animate(u,{delay:r,duration:i,easing:Array.isArray(c)?"linear":c,fill:"both",iterations:a+1,direction:s==="reverse"?"alternate":"normal"})}const Q2=cy(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),el=10,X2=2e4;function J2(e){return Ey(e.type)||e.type==="spring"||!wT(e.ease)}function Z2(e,t){const n=new qy({...t,keyframes:e,repeat:0,delay:0,isGenerator:!0});let r={done:!1,value:e[0]};const i=[];let a=0;for(;!r.done&&a<X2;)r=n.sample(a),i.push(r.value),a+=el;return{times:void 0,keyframes:i,duration:a-el,ease:"linear"}}const tM={anticipate:AT,backInOut:NT,circInOut:IT};function eO(e){return e in tM}class bw extends YT{constructor(t){super(t);const{name:n,motionValue:r,element:i,keyframes:a}=this.options;this.resolver=new KT(a,(s,o)=>this.onKeyframesResolved(s,o),n,r,i),this.resolver.scheduleResolve()}initPlayback(t,n){let{duration:r=300,times:i,ease:a,type:s,motionValue:o,name:l,startTime:u}=this.options;if(!o.owner||!o.owner.current)return!1;if(typeof a=="string"&&Xo()&&eO(a)&&(a=tM[a]),J2(this.options)){const{onComplete:d,onUpdate:f,motionValue:m,element:v,...p}=this.options,x=Z2(t,p);t=x.keyframes,t.length===1&&(t[1]=t[0]),r=x.duration,i=x.times,a=x.ease,s="keyframes"}const c=Y2(o.owner.current,l,t,{...this.options,duration:r,times:i,ease:a});return c.startTime=u??this.calcStartTime(),this.pendingTimeline?(iw(c,this.pendingTimeline),this.pendingTimeline=void 0):c.onfinish=()=>{const{onComplete:d}=this.options;o.set(Tl(t,this.options,n)),d&&d(),this.cancel(),this.resolveFinishedPromise()},{animation:c,duration:r,times:i,type:s,ease:a,keyframes:t}}get duration(){const{resolved:t}=this;if(!t)return 0;const{duration:n}=t;return Cn(n)}get time(){const{resolved:t}=this;if(!t)return 0;const{animation:n}=t;return Cn(n.currentTime||0)}set time(t){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.currentTime=En(t)}get speed(){const{resolved:t}=this;if(!t)return 1;const{animation:n}=t;return n.playbackRate}set speed(t){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.playbackRate=t}get state(){const{resolved:t}=this;if(!t)return"idle";const{animation:n}=t;return n.playState}get startTime(){const{resolved:t}=this;if(!t)return null;const{animation:n}=t;return n.startTime}attachTimeline(t){if(!this._resolved)this.pendingTimeline=t;else{const{resolved:n}=this;if(!n)return _t;const{animation:r}=n;iw(r,t)}return _t}play(){if(this.isStopped)return;const{resolved:t}=this;if(!t)return;const{animation:n}=t;n.playState==="finished"&&this.updateFinishedPromise(),n.play()}pause(){const{resolved:t}=this;if(!t)return;const{animation:n}=t;n.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:t}=this;if(!t)return;const{animation:n,keyframes:r,duration:i,type:a,ease:s,times:o}=t;if(n.playState==="idle"||n.playState==="finished")return;if(this.time){const{motionValue:u,onUpdate:c,onComplete:d,element:f,...m}=this.options,v=new qy({...m,keyframes:r,duration:i,type:a,ease:s,times:o,isGenerator:!0}),p=En(this.time);u.setWithVelocity(v.sample(p-el).value,v.sample(p).value,el)}const{onStop:l}=this.options;l&&l(),this.cancel()}complete(){const{resolved:t}=this;t&&t.animation.finish()}cancel(){const{resolved:t}=this;t&&t.animation.cancel()}static supports(t){const{motionValue:n,name:r,repeatDelay:i,repeatType:a,damping:s,type:o}=t;if(!n||!n.owner||!(n.owner.current instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:u}=n.owner.getProps();return Q2()&&r&&K2.has(r)&&!l&&!u&&!i&&a!=="mirror"&&s!==0&&o!=="inertia"}}const tO={type:"spring",stiffness:500,damping:25,restSpeed:10},nO=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),rO={type:"keyframes",duration:.8},iO={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},aO=(e,{keyframes:t})=>t.length>2?rO:Hr.has(e)?e.startsWith("scale")?nO(t[1]):tO:iO;function sO({when:e,delay:t,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:a,repeatType:s,repeatDelay:o,from:l,elapsed:u,...c}){return!!Object.keys(c).length}const Fy=(e,t,n,r={},i,a)=>s=>{const o=ky(r,e)||{},l=o.delay||r.delay||0;let{elapsed:u=0}=r;u=u-En(l);let c={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:t.getVelocity(),...o,delay:-u,onUpdate:f=>{t.set(f),o.onUpdate&&o.onUpdate(f)},onComplete:()=>{s(),o.onComplete&&o.onComplete()},name:e,motionValue:t,element:a?void 0:i};sO(o)||(c={...c,...aO(e,c)}),c.duration&&(c.duration=En(c.duration)),c.repeatDelay&&(c.repeatDelay=En(c.repeatDelay)),c.from!==void 0&&(c.keyframes[0]=c.from);let d=!1;if((c.type===!1||c.duration===0&&!c.repeatDelay)&&(c.duration=0,c.delay===0&&(d=!0)),d&&!a&&t.get()!==void 0){const f=Tl(c.keyframes,o);if(f!==void 0)return xe.update(()=>{c.onUpdate(f),c.onComplete()}),new ED([])}return!a&&bw.supports(c)?new bw(c):new qy(c)};function oO({protectedKeys:e,needsAnimating:t},n){const r=e.hasOwnProperty(n)&&t[n]!==!0;return t[n]=!1,r}function nM(e,t,{delay:n=0,transitionOverride:r,type:i}={}){var a;let{transition:s=e.getDefaultTransition(),transitionEnd:o,...l}=t;r&&(s=r);const u=[],c=i&&e.animationState&&e.animationState.getState()[i];for(const d in l){const f=e.getValue(d,(a=e.latestValues[d])!==null&&a!==void 0?a:null),m=l[d];if(m===void 0||c&&oO(c,d))continue;const v={delay:n,...ky(s||{},d)};let p=!1;if(window.MotionHandoffAnimation){const y=CT(e);if(y){const g=window.MotionHandoffAnimation(y,d,xe);g!==null&&(v.startTime=g,p=!0)}}Ym(e,d),f.start(Fy(d,f,m,e.shouldReduceMotion&&kT.has(d)?{type:!1}:v,e,p));const x=f.animation;x&&u.push(x)}return o&&Promise.all(u).then(()=>{xe.update(()=>{o&&FD(e,o)})}),u}function nv(e,t,n={}){var r;const i=Cl(e,t,n.type==="exit"?(r=e.presenceContext)===null||r===void 0?void 0:r.custom:void 0);let{transition:a=e.getDefaultTransition()||{}}=i||{};n.transitionOverride&&(a=n.transitionOverride);const s=i?()=>Promise.all(nM(e,i,n)):()=>Promise.resolve(),o=e.variantChildren&&e.variantChildren.size?(u=0)=>{const{delayChildren:c=0,staggerChildren:d,staggerDirection:f}=a;return lO(e,t,c+u,d,f,n)}:()=>Promise.resolve(),{when:l}=a;if(l){const[u,c]=l==="beforeChildren"?[s,o]:[o,s];return u().then(()=>c())}else return Promise.all([s(),o(n.delay)])}function lO(e,t,n=0,r=0,i=1,a){const s=[],o=(e.variantChildren.size-1)*r,l=i===1?(u=0)=>u*r:(u=0)=>o-u*r;return Array.from(e.variantChildren).sort(uO).forEach((u,c)=>{u.notify("AnimationStart",t),s.push(nv(u,t,{...a,delay:n+l(c)}).then(()=>u.notify("AnimationComplete",t)))}),Promise.all(s)}function uO(e,t){return e.sortNodePosition(t)}function cO(e,t,n={}){e.notify("AnimationStart",t);let r;if(Array.isArray(t)){const i=t.map(a=>nv(e,a,n));r=Promise.all(i)}else if(typeof t=="string")r=nv(e,t,n);else{const i=typeof t=="function"?Cl(e,t,n.custom):t;r=Promise.all(nM(e,i,n))}return r.then(()=>{e.notify("AnimationComplete",t)})}const dO=fy.length;function rM(e){if(!e)return;if(!e.isControllingVariants){const n=e.parent?rM(e.parent)||{}:{};return e.props.initial!==void 0&&(n.initial=e.props.initial),n}const t={};for(let n=0;n<dO;n++){const r=fy[n],i=e.props[r];(ls(i)||i===!1)&&(t[r]=i)}return t}const fO=[...dy].reverse(),hO=dy.length;function pO(e){return t=>Promise.all(t.map(({animation:n,options:r})=>cO(e,n,r)))}function mO(e){let t=pO(e),n=xw(),r=!0;const i=l=>(u,c)=>{var d;const f=Cl(e,c,l==="exit"?(d=e.presenceContext)===null||d===void 0?void 0:d.custom:void 0);if(f){const{transition:m,transitionEnd:v,...p}=f;u={...u,...p,...v}}return u};function a(l){t=l(e)}function s(l){const{props:u}=e,c=rM(e.parent)||{},d=[],f=new Set;let m={},v=1/0;for(let x=0;x<hO;x++){const y=fO[x],g=n[y],b=u[y]!==void 0?u[y]:c[y],k=ls(b),_=y===l?g.isActive:null;_===!1&&(v=x);let C=b===c[y]&&b!==u[y]&&k;if(C&&r&&e.manuallyAnimateOnMount&&(C=!1),g.protectedKeys={...m},!g.isActive&&_===null||!b&&!g.prevProp||kl(b)||typeof b=="boolean")continue;const M=vO(g.prevProp,b);let T=M||y===l&&g.isActive&&!C&&k||x>v&&k,j=!1;const N=Array.isArray(b)?b:[b];let A=N.reduce(i(y),{});_===!1&&(A={});const{prevResolvedValues:I={}}=g,L={...I,...A},K=ie=>{T=!0,f.has(ie)&&(j=!0,f.delete(ie)),g.needsAnimating[ie]=!0;const R=e.getValue(ie);R&&(R.liveStyle=!1)};for(const ie in L){const R=A[ie],q=I[ie];if(m.hasOwnProperty(ie))continue;let G=!1;Hm(R)&&Hm(q)?G=!vT(R,q):G=R!==q,G?R!=null?K(ie):f.add(ie):R!==void 0&&f.has(ie)?K(ie):g.protectedKeys[ie]=!0}g.prevProp=b,g.prevResolvedValues=A,g.isActive&&(m={...m,...A}),r&&e.blockInitialAnimation&&(T=!1),T&&(!(C&&M)||j)&&d.push(...N.map(ie=>({animation:ie,options:{type:y}})))}if(f.size){const x={};f.forEach(y=>{const g=e.getBaseTarget(y),b=e.getValue(y);b&&(b.liveStyle=!0),x[y]=g??null}),d.push({animation:x})}let p=!!d.length;return r&&(u.initial===!1||u.initial===u.animate)&&!e.manuallyAnimateOnMount&&(p=!1),r=!1,p?t(d):Promise.resolve()}function o(l,u){var c;if(n[l].isActive===u)return Promise.resolve();(c=e.variantChildren)===null||c===void 0||c.forEach(f=>{var m;return(m=f.animationState)===null||m===void 0?void 0:m.setActive(l,u)}),n[l].isActive=u;const d=s(l);for(const f in n)n[f].protectedKeys={};return d}return{animateChanges:s,setActive:o,setAnimateFunction:a,getState:()=>n,reset:()=>{n=xw(),r=!0}}}function vO(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!vT(t,e):!1}function kr(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function xw(){return{animate:kr(!0),whileInView:kr(),whileHover:kr(),whileTap:kr(),whileDrag:kr(),whileFocus:kr(),exit:kr()}}class vr{constructor(t){this.isMounted=!1,this.node=t}update(){}}class yO extends vr{constructor(t){super(t),t.animationState||(t.animationState=mO(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();kl(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:n}=this.node.prevProps||{};t!==n&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)===null||t===void 0||t.call(this)}}let gO=0;class wO extends vr{constructor(){super(...arguments),this.id=gO++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===r)return;const i=this.node.animationState.setActive("exit",!t);n&&!t&&i.then(()=>n(this.id))}mount(){const{register:t}=this.node.presenceContext||{};t&&(this.unmount=t(this.id))}unmount(){}}const bO={animation:{Feature:yO},exit:{Feature:wO}};function fs(e,t,n,r={passive:!0}){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n)}function Ss(e){return{point:{x:e.pageX,y:e.pageY}}}const xO=e=>t=>Ty(t)&&e(t,Ss(t));function Ba(e,t,n,r){return fs(e,t,xO(n),r)}const Sw=(e,t)=>Math.abs(e-t);function SO(e,t){const n=Sw(e.x,t.x),r=Sw(e.y,t.y);return Math.sqrt(n**2+r**2)}class iM{constructor(t,n,{transformPagePoint:r,contextWindow:i,dragSnapToOrigin:a=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const d=Xu(this.lastMoveEventInfo,this.history),f=this.startEvent!==null,m=SO(d.offset,{x:0,y:0})>=3;if(!f&&!m)return;const{point:v}=d,{timestamp:p}=Qe;this.history.push({...v,timestamp:p});const{onStart:x,onMove:y}=this.handlers;f||(x&&x(this.lastMoveEvent,d),this.startEvent=this.lastMoveEvent),y&&y(this.lastMoveEvent,d)},this.handlePointerMove=(d,f)=>{this.lastMoveEvent=d,this.lastMoveEventInfo=Qu(f,this.transformPagePoint),xe.update(this.updatePoint,!0)},this.handlePointerUp=(d,f)=>{this.end();const{onEnd:m,onSessionEnd:v,resumeAnimation:p}=this.handlers;if(this.dragSnapToOrigin&&p&&p(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const x=Xu(d.type==="pointercancel"?this.lastMoveEventInfo:Qu(f,this.transformPagePoint),this.history);this.startEvent&&m&&m(d,x),v&&v(d,x)},!Ty(t))return;this.dragSnapToOrigin=a,this.handlers=n,this.transformPagePoint=r,this.contextWindow=i||window;const s=Ss(t),o=Qu(s,this.transformPagePoint),{point:l}=o,{timestamp:u}=Qe;this.history=[{...l,timestamp:u}];const{onSessionStart:c}=n;c&&c(t,Xu(o,this.history)),this.removeListeners=xs(Ba(this.contextWindow,"pointermove",this.handlePointerMove),Ba(this.contextWindow,"pointerup",this.handlePointerUp),Ba(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),cr(this.updatePoint)}}function Qu(e,t){return t?{point:t(e.point)}:e}function _w(e,t){return{x:e.x-t.x,y:e.y-t.y}}function Xu({point:e},t){return{point:e,delta:_w(e,aM(t)),offset:_w(e,_O(t)),velocity:kO(t,.1)}}function _O(e){return e[0]}function aM(e){return e[e.length-1]}function kO(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,r=null;const i=aM(e);for(;n>=0&&(r=e[n],!(i.timestamp-r.timestamp>En(t)));)n--;if(!r)return{x:0,y:0};const a=Cn(i.timestamp-r.timestamp);if(a===0)return{x:0,y:0};const s={x:(i.x-r.x)/a,y:(i.y-r.y)/a};return s.x===1/0&&(s.x=0),s.y===1/0&&(s.y=0),s}const sM=1e-4,EO=1-sM,CO=1+sM,oM=.01,TO=0-oM,MO=0+oM;function Et(e){return e.max-e.min}function jO(e,t,n){return Math.abs(e-t)<=n}function kw(e,t,n,r=.5){e.origin=r,e.originPoint=Te(t.min,t.max,e.origin),e.scale=Et(n)/Et(t),e.translate=Te(n.min,n.max,e.origin)-e.originPoint,(e.scale>=EO&&e.scale<=CO||isNaN(e.scale))&&(e.scale=1),(e.translate>=TO&&e.translate<=MO||isNaN(e.translate))&&(e.translate=0)}function za(e,t,n,r){kw(e.x,t.x,n.x,r?r.originX:void 0),kw(e.y,t.y,n.y,r?r.originY:void 0)}function Ew(e,t,n){e.min=n.min+t.min,e.max=e.min+Et(t)}function PO(e,t,n){Ew(e.x,t.x,n.x),Ew(e.y,t.y,n.y)}function Cw(e,t,n){e.min=t.min-n.min,e.max=e.min+Et(t)}function Ua(e,t,n){Cw(e.x,t.x,n.x),Cw(e.y,t.y,n.y)}function NO(e,{min:t,max:n},r){return t!==void 0&&e<t?e=r?Te(t,e,r.min):Math.max(e,t):n!==void 0&&e>n&&(e=r?Te(n,e,r.max):Math.min(e,n)),e}function Tw(e,t,n){return{min:t!==void 0?e.min+t:void 0,max:n!==void 0?e.max+n-(e.max-e.min):void 0}}function AO(e,{top:t,left:n,bottom:r,right:i}){return{x:Tw(e.x,n,i),y:Tw(e.y,t,r)}}function Mw(e,t){let n=t.min-e.min,r=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,r]=[r,n]),{min:n,max:r}}function RO(e,t){return{x:Mw(e.x,t.x),y:Mw(e.y,t.y)}}function IO(e,t){let n=.5;const r=Et(e),i=Et(t);return i>r?n=Bi(t.min,t.max-r,e.min):r>i&&(n=Bi(e.min,e.max-i,t.min)),Nn(0,1,n)}function DO(e,t){const n={};return t.min!==void 0&&(n.min=t.min-e.min),t.max!==void 0&&(n.max=t.max-e.min),n}const rv=.35;function OO(e=rv){return e===!1?e=0:e===!0&&(e=rv),{x:jw(e,"left","right"),y:jw(e,"top","bottom")}}function jw(e,t,n){return{min:Pw(e,t),max:Pw(e,n)}}function Pw(e,t){return typeof e=="number"?e:e[t]||0}const Nw=()=>({translate:0,scale:1,origin:0,originPoint:0}),Ci=()=>({x:Nw(),y:Nw()}),Aw=()=>({min:0,max:0}),Oe=()=>({x:Aw(),y:Aw()});function At(e){return[e("x"),e("y")]}function lM({top:e,left:t,right:n,bottom:r}){return{x:{min:t,max:n},y:{min:e,max:r}}}function LO({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function qO(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),r=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function Ju(e){return e===void 0||e===1}function iv({scale:e,scaleX:t,scaleY:n}){return!Ju(e)||!Ju(t)||!Ju(n)}function Tr(e){return iv(e)||uM(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function uM(e){return Rw(e.x)||Rw(e.y)}function Rw(e){return e&&e!=="0%"}function tl(e,t,n){const r=e-n,i=t*r;return n+i}function Iw(e,t,n,r,i){return i!==void 0&&(e=tl(e,i,r)),tl(e,n,r)+t}function av(e,t=0,n=1,r,i){e.min=Iw(e.min,t,n,r,i),e.max=Iw(e.max,t,n,r,i)}function cM(e,{x:t,y:n}){av(e.x,t.translate,t.scale,t.originPoint),av(e.y,n.translate,n.scale,n.originPoint)}const Dw=.999999999999,Ow=1.0000000000001;function FO(e,t,n,r=!1){const i=n.length;if(!i)return;t.x=t.y=1;let a,s;for(let o=0;o<i;o++){a=n[o],s=a.projectionDelta;const{visualElement:l}=a.options;l&&l.props.style&&l.props.style.display==="contents"||(r&&a.options.layoutScroll&&a.scroll&&a!==a.root&&Mi(e,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),s&&(t.x*=s.x.scale,t.y*=s.y.scale,cM(e,s)),r&&Tr(a.latestValues)&&Mi(e,a.latestValues))}t.x<Ow&&t.x>Dw&&(t.x=1),t.y<Ow&&t.y>Dw&&(t.y=1)}function Ti(e,t){e.min=e.min+t,e.max=e.max+t}function Lw(e,t,n,r,i=.5){const a=Te(e.min,e.max,i);av(e,t,n,a,r)}function Mi(e,t){Lw(e.x,t.x,t.scaleX,t.scale,t.originX),Lw(e.y,t.y,t.scaleY,t.scale,t.originY)}function dM(e,t){return lM(qO(e.getBoundingClientRect(),t))}function VO(e,t,n){const r=dM(e,n),{scroll:i}=t;return i&&(Ti(r.x,i.offset.x),Ti(r.y,i.offset.y)),r}const fM=({current:e})=>e?e.ownerDocument.defaultView:null,$O=new WeakMap;class BO{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Oe(),this.visualElement=t}start(t,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const i=c=>{const{dragSnapToOrigin:d}=this.getProps();d?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Ss(c).point)},a=(c,d)=>{const{drag:f,dragPropagation:m,onDragStart:v}=this.getProps();if(f&&!m&&(this.openDragLock&&this.openDragLock(),this.openDragLock=ID(f),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),At(x=>{let y=this.getAxisMotionValue(x).get()||0;if(un.test(y)){const{projection:g}=this.visualElement;if(g&&g.layout){const b=g.layout.layoutBox[x];b&&(y=Et(b)*(parseFloat(y)/100))}}this.originPoint[x]=y}),v&&xe.postRender(()=>v(c,d)),Ym(this.visualElement,"transform");const{animationState:p}=this.visualElement;p&&p.setActive("whileDrag",!0)},s=(c,d)=>{const{dragPropagation:f,dragDirectionLock:m,onDirectionLock:v,onDrag:p}=this.getProps();if(!f&&!this.openDragLock)return;const{offset:x}=d;if(m&&this.currentDirection===null){this.currentDirection=zO(x),this.currentDirection!==null&&v&&v(this.currentDirection);return}this.updateAxis("x",d.point,x),this.updateAxis("y",d.point,x),this.visualElement.render(),p&&p(c,d)},o=(c,d)=>this.stop(c,d),l=()=>At(c=>{var d;return this.getAnimationState(c)==="paused"&&((d=this.getAxisMotionValue(c).animation)===null||d===void 0?void 0:d.play())}),{dragSnapToOrigin:u}=this.getProps();this.panSession=new iM(t,{onSessionStart:i,onStart:a,onMove:s,onSessionEnd:o,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,contextWindow:fM(this.visualElement)})}stop(t,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:i}=n;this.startAnimation(i);const{onDragEnd:a}=this.getProps();a&&xe.postRender(()=>a(t,n))}cancel(){this.isDragging=!1;const{projection:t,animationState:n}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(t,n,r){const{drag:i}=this.getProps();if(!r||!io(t,i,this.currentDirection))return;const a=this.getAxisMotionValue(t);let s=this.originPoint[t]+r[t];this.constraints&&this.constraints[t]&&(s=NO(s,this.constraints[t],this.elastic[t])),a.set(s)}resolveConstraints(){var t;const{dragConstraints:n,dragElastic:r}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(t=this.visualElement.projection)===null||t===void 0?void 0:t.layout,a=this.constraints;n&&ki(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&i?this.constraints=AO(i.layoutBox,n):this.constraints=!1,this.elastic=OO(r),a!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&At(s=>{this.constraints!==!1&&this.getAxisMotionValue(s)&&(this.constraints[s]=DO(i.layoutBox[s],this.constraints[s]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:n}=this.getProps();if(!t||!ki(t))return!1;const r=t.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const a=VO(r,i.root,this.visualElement.getTransformPagePoint());let s=RO(i.layout.layoutBox,a);if(n){const o=n(LO(s));this.hasMutatedConstraints=!!o,o&&(s=lM(o))}return s}startAnimation(t){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:a,dragSnapToOrigin:s,onDragTransitionEnd:o}=this.getProps(),l=this.constraints||{},u=At(c=>{if(!io(c,n,this.currentDirection))return;let d=l&&l[c]||{};s&&(d={min:0,max:0});const f=i?200:1e6,m=i?40:1e7,v={type:"inertia",velocity:r?t[c]:0,bounceStiffness:f,bounceDamping:m,timeConstant:750,restDelta:1,restSpeed:10,...a,...d};return this.startAxisValueAnimation(c,v)});return Promise.all(u).then(o)}startAxisValueAnimation(t,n){const r=this.getAxisMotionValue(t);return Ym(this.visualElement,t),r.start(Fy(t,r,0,n,this.visualElement,!1))}stopAnimation(){At(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){At(t=>{var n;return(n=this.getAxisMotionValue(t).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(t){var n;return(n=this.getAxisMotionValue(t).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(t){const n=`_drag${t.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(t,(r.initial?r.initial[t]:void 0)||0)}snapToCursor(t){At(n=>{const{drag:r}=this.getProps();if(!io(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,a=this.getAxisMotionValue(n);if(i&&i.layout){const{min:s,max:o}=i.layout.layoutBox[n];a.set(t[n]-Te(s,o,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!ki(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};At(s=>{const o=this.getAxisMotionValue(s);if(o&&this.constraints!==!1){const l=o.get();i[s]=IO({min:l,max:l},this.constraints[s])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),At(s=>{if(!io(s,t,null))return;const o=this.getAxisMotionValue(s),{min:l,max:u}=this.constraints[s];o.set(Te(l,u,i[s]))})}addListeners(){if(!this.visualElement.current)return;$O.set(this.visualElement,this);const t=this.visualElement.current,n=Ba(t,"pointerdown",l=>{const{drag:u,dragListener:c=!0}=this.getProps();u&&c&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();ki(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,a=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),xe.read(r);const s=fs(window,"resize",()=>this.scalePositionWithinConstraints()),o=i.addEventListener("didUpdate",({delta:l,hasLayoutChanged:u})=>{this.isDragging&&u&&(At(c=>{const d=this.getAxisMotionValue(c);d&&(this.originPoint[c]+=l[c].translate,d.set(d.get()+l[c].translate))}),this.visualElement.render())});return()=>{s(),n(),a(),o&&o()}}getProps(){const t=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:a=!1,dragElastic:s=rv,dragMomentum:o=!0}=t;return{...t,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:a,dragElastic:s,dragMomentum:o}}}function io(e,t,n){return(t===!0||t===e)&&(n===null||n===e)}function zO(e,t=10){let n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}class UO extends vr{constructor(t){super(t),this.removeGroupControls=_t,this.removeListeners=_t,this.controls=new BO(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||_t}unmount(){this.removeGroupControls(),this.removeListeners()}}const qw=e=>(t,n)=>{e&&xe.postRender(()=>e(t,n))};class GO extends vr{constructor(){super(...arguments),this.removePointerDownListener=_t}onPointerDown(t){this.session=new iM(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:fM(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:qw(t),onStart:qw(n),onMove:r,onEnd:(a,s)=>{delete this.session,i&&xe.postRender(()=>i(a,s))}}}mount(){this.removePointerDownListener=Ba(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const ko={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Fw(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const ga={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(H.test(e))e=parseFloat(e);else return e;const n=Fw(e,t.target.x),r=Fw(e,t.target.y);return`${n}% ${r}%`}},HO={correct:(e,{treeScale:t,projectionDelta:n})=>{const r=e,i=dr.parse(e);if(i.length>5)return r;const a=dr.createTransformer(e),s=typeof i[0]!="number"?1:0,o=n.x.scale*t.x,l=n.y.scale*t.y;i[0+s]/=o,i[1+s]/=l;const u=Te(o,l,.5);return typeof i[2+s]=="number"&&(i[2+s]/=u),typeof i[3+s]=="number"&&(i[3+s]/=u),a(i)}};class WO extends S.Component{componentDidMount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:a}=t;hD(KO),a&&(n.group&&n.group.add(a),r&&r.register&&i&&r.register(a),a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,onExitComplete:()=>this.safeToRemove()})),ko.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:n,visualElement:r,drag:i,isPresent:a}=this.props,s=r.projection;return s&&(s.isPresent=a,i||t.layoutDependency!==n||n===void 0?s.willUpdate():this.safeToRemove(),t.isPresent!==a&&(a?s.promote():s.relegate()||xe.postRender(()=>{const o=s.getStack();(!o||!o.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),py.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=t;i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function hM(e){const[t,n]=MI(),r=S.useContext(YC);return h.jsx(WO,{...e,layoutGroup:r,switchLayoutGroup:S.useContext(rT),isPresent:t,safeToRemove:n})}const KO={borderRadius:{...ga,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:ga,borderTopRightRadius:ga,borderBottomLeftRadius:ga,borderBottomRightRadius:ga,boxShadow:HO};function YO(e,t,n){const r=it(e)?e:cs(e);return r.start(Fy("",r,t,n)),r.animation}function QO(e){return e instanceof SVGElement&&e.tagName!=="svg"}const XO=(e,t)=>e.depth-t.depth;class JO{constructor(){this.children=[],this.isDirty=!1}add(t){My(this.children,t),this.isDirty=!0}remove(t){jy(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(XO),this.isDirty=!1,this.children.forEach(t)}}function ZO(e,t){const n=cn.now(),r=({timestamp:i})=>{const a=i-n;a>=t&&(cr(r),e(a-t))};return xe.read(r,!0),()=>cr(r)}const pM=["TopLeft","TopRight","BottomLeft","BottomRight"],eL=pM.length,Vw=e=>typeof e=="string"?parseFloat(e):e,$w=e=>typeof e=="number"||H.test(e);function tL(e,t,n,r,i,a){i?(e.opacity=Te(0,n.opacity!==void 0?n.opacity:1,nL(r)),e.opacityExit=Te(t.opacity!==void 0?t.opacity:1,0,rL(r))):a&&(e.opacity=Te(t.opacity!==void 0?t.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let s=0;s<eL;s++){const o=`border${pM[s]}Radius`;let l=Bw(t,o),u=Bw(n,o);if(l===void 0&&u===void 0)continue;l||(l=0),u||(u=0),l===0||u===0||$w(l)===$w(u)?(e[o]=Math.max(Te(Vw(l),Vw(u),r),0),(un.test(u)||un.test(l))&&(e[o]+="%")):e[o]=u}(t.rotate||n.rotate)&&(e.rotate=Te(t.rotate||0,n.rotate||0,r))}function Bw(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const nL=mM(0,.5,RT),rL=mM(.5,.95,_t);function mM(e,t,n){return r=>r<e?0:r>t?1:n(Bi(e,t,r))}function zw(e,t){e.min=t.min,e.max=t.max}function Nt(e,t){zw(e.x,t.x),zw(e.y,t.y)}function Uw(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function Gw(e,t,n,r,i){return e-=t,e=tl(e,1/n,r),i!==void 0&&(e=tl(e,1/i,r)),e}function iL(e,t=0,n=1,r=.5,i,a=e,s=e){if(un.test(t)&&(t=parseFloat(t),t=Te(s.min,s.max,t/100)-s.min),typeof t!="number")return;let o=Te(a.min,a.max,r);e===a&&(o-=t),e.min=Gw(e.min,t,n,o,i),e.max=Gw(e.max,t,n,o,i)}function Hw(e,t,[n,r,i],a,s){iL(e,t[n],t[r],t[i],t.scale,a,s)}const aL=["x","scaleX","originX"],sL=["y","scaleY","originY"];function Ww(e,t,n,r){Hw(e.x,t,aL,n?n.x:void 0,r?r.x:void 0),Hw(e.y,t,sL,n?n.y:void 0,r?r.y:void 0)}function Kw(e){return e.translate===0&&e.scale===1}function vM(e){return Kw(e.x)&&Kw(e.y)}function Yw(e,t){return e.min===t.min&&e.max===t.max}function oL(e,t){return Yw(e.x,t.x)&&Yw(e.y,t.y)}function Qw(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function yM(e,t){return Qw(e.x,t.x)&&Qw(e.y,t.y)}function Xw(e){return Et(e.x)/Et(e.y)}function Jw(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class lL{constructor(){this.members=[]}add(t){My(this.members,t),t.scheduleRender()}remove(t){if(jy(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(t){const n=this.members.findIndex(i=>t===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const a=this.members[i];if(a.isPresent!==!1){r=a;break}}return r?(this.promote(r),!0):!1}promote(t,n){const r=this.lead;if(t!==r&&(this.prevLead=r,this.lead=t,t.show(),r)){r.instance&&r.scheduleRender(),t.scheduleRender(),t.resumeFrom=r,n&&(t.resumeFrom.preserveOpacity=!0),r.snapshot&&(t.snapshot=r.snapshot,t.snapshot.latestValues=r.animationValues||r.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:i}=t.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:n,resumingFrom:r}=t;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function uL(e,t,n){let r="";const i=e.x.translate/t.x,a=e.y.translate/t.y,s=(n==null?void 0:n.z)||0;if((i||a||s)&&(r=`translate3d(${i}px, ${a}px, ${s}px) `),(t.x!==1||t.y!==1)&&(r+=`scale(${1/t.x}, ${1/t.y}) `),n){const{transformPerspective:u,rotate:c,rotateX:d,rotateY:f,skewX:m,skewY:v}=n;u&&(r=`perspective(${u}px) ${r}`),c&&(r+=`rotate(${c}deg) `),d&&(r+=`rotateX(${d}deg) `),f&&(r+=`rotateY(${f}deg) `),m&&(r+=`skewX(${m}deg) `),v&&(r+=`skewY(${v}deg) `)}const o=e.x.scale*t.x,l=e.y.scale*t.y;return(o!==1||l!==1)&&(r+=`scale(${o}, ${l})`),r||"none"}const Mr={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},Ea=typeof window<"u"&&window.MotionDebug!==void 0,Zu=["","X","Y","Z"],cL={visibility:"hidden"},Zw=1e3;let dL=0;function ec(e,t,n,r){const{latestValues:i}=t;i[e]&&(n[e]=i[e],t.setStaticValue(e,0),r&&(r[e]=0))}function gM(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const n=CT(t);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:a}=e.options;window.MotionCancelOptimisedAnimation(n,"transform",xe,!(i||a))}const{parent:r}=e;r&&!r.hasCheckedOptimisedAppear&&gM(r)}function wM({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(s={},o=t==null?void 0:t()){this.id=dL++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Ea&&(Mr.totalNodes=Mr.resolvedTargetDeltas=Mr.recalculatedProjection=0),this.nodes.forEach(pL),this.nodes.forEach(wL),this.nodes.forEach(bL),this.nodes.forEach(mL),Ea&&window.MotionDebug.record(Mr)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=s,this.root=o?o.root||o:this,this.path=o?[...o.path,o]:[],this.parent=o,this.depth=o?o.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new JO)}addEventListener(s,o){return this.eventHandlers.has(s)||this.eventHandlers.set(s,new Py),this.eventHandlers.get(s).add(o)}notifyListeners(s,...o){const l=this.eventHandlers.get(s);l&&l.notify(...o)}hasListeners(s){return this.eventHandlers.has(s)}mount(s,o=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=QO(s),this.instance=s;const{layoutId:l,layout:u,visualElement:c}=this.options;if(c&&!c.current&&c.mount(s),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),o&&(u||l)&&(this.isLayoutDirty=!0),e){let d;const f=()=>this.root.updateBlockedByResize=!1;e(s,()=>{this.root.updateBlockedByResize=!0,d&&d(),d=ZO(f,250),ko.hasAnimatedSinceResize&&(ko.hasAnimatedSinceResize=!1,this.nodes.forEach(tb))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&c&&(l||u)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:f,hasRelativeTargetChanged:m,layout:v})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const p=this.options.transition||c.getDefaultTransition()||EL,{onLayoutAnimationStart:x,onLayoutAnimationComplete:y}=c.getProps(),g=!this.targetLayout||!yM(this.targetLayout,v)||m,b=!f&&m;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||b||f&&(g||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(d,b);const k={...ky(p,"layout"),onPlay:x,onComplete:y};(c.shouldReduceMotion||this.options.layoutRoot)&&(k.delay=0,k.type=!1),this.startAnimation(k)}else f||tb(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=v})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const s=this.getStack();s&&s.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,cr(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(xL),this.animationId++)}getTransformTemplate(){const{visualElement:s}=this.options;return s&&s.getProps().transformTemplate}willUpdate(s=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&gM(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let c=0;c<this.path.length;c++){const d=this.path[c];d.shouldResetTransform=!0,d.updateScroll("snapshot"),d.options.layoutRoot&&d.willUpdate(!1)}const{layoutId:o,layout:l}=this.options;if(o===void 0&&!l)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),s&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(eb);return}this.isUpdating||this.nodes.forEach(yL),this.isUpdating=!1,this.nodes.forEach(gL),this.nodes.forEach(fL),this.nodes.forEach(hL),this.clearAllSnapshots();const o=cn.now();Qe.delta=Nn(0,1e3/60,o-Qe.timestamp),Qe.timestamp=o,Qe.isProcessing=!0,Uu.update.process(Qe),Uu.preRender.process(Qe),Uu.render.process(Qe),Qe.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,py.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(vL),this.sharedNodes.forEach(SL)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,xe.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){xe.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const s=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Oe(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:o}=this.options;o&&o.notify("LayoutMeasure",this.layout.layoutBox,s?s.layoutBox:void 0)}updateScroll(s="measure"){let o=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===s&&(o=!1),o){const l=r(this.instance);this.scroll={animationId:this.root.animationId,phase:s,isRoot:l,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!i)return;const s=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,o=this.projectionDelta&&!vM(this.projectionDelta),l=this.getTransformTemplate(),u=l?l(this.latestValues,""):void 0,c=u!==this.prevTransformTemplateValue;s&&(o||Tr(this.latestValues)||c)&&(i(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(s=!0){const o=this.measurePageBox();let l=this.removeElementScroll(o);return s&&(l=this.removeTransform(l)),CL(l),{animationId:this.root.animationId,measuredBox:o,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var s;const{visualElement:o}=this.options;if(!o)return Oe();const l=o.measureViewportBox();if(!(((s=this.scroll)===null||s===void 0?void 0:s.wasRoot)||this.path.some(TL))){const{scroll:c}=this.root;c&&(Ti(l.x,c.offset.x),Ti(l.y,c.offset.y))}return l}removeElementScroll(s){var o;const l=Oe();if(Nt(l,s),!((o=this.scroll)===null||o===void 0)&&o.wasRoot)return l;for(let u=0;u<this.path.length;u++){const c=this.path[u],{scroll:d,options:f}=c;c!==this.root&&d&&f.layoutScroll&&(d.wasRoot&&Nt(l,s),Ti(l.x,d.offset.x),Ti(l.y,d.offset.y))}return l}applyTransform(s,o=!1){const l=Oe();Nt(l,s);for(let u=0;u<this.path.length;u++){const c=this.path[u];!o&&c.options.layoutScroll&&c.scroll&&c!==c.root&&Mi(l,{x:-c.scroll.offset.x,y:-c.scroll.offset.y}),Tr(c.latestValues)&&Mi(l,c.latestValues)}return Tr(this.latestValues)&&Mi(l,this.latestValues),l}removeTransform(s){const o=Oe();Nt(o,s);for(let l=0;l<this.path.length;l++){const u=this.path[l];if(!u.instance||!Tr(u.latestValues))continue;iv(u.latestValues)&&u.updateSnapshot();const c=Oe(),d=u.measurePageBox();Nt(c,d),Ww(o,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,c)}return Tr(this.latestValues)&&Ww(o,this.latestValues),o}setTargetDelta(s){this.targetDelta=s,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(s){this.options={...this.options,...s,crossfade:s.crossfade!==void 0?s.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Qe.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(s=!1){var o;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==l;if(!(s||u&&this.isSharedProjectionDirty||this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:d,layoutId:f}=this.options;if(!(!this.layout||!(d||f))){if(this.resolvedRelativeTargetAt=Qe.timestamp,!this.targetDelta&&!this.relativeTarget){const m=this.getClosestProjectingParent();m&&m.layout&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Oe(),this.relativeTargetOrigin=Oe(),Ua(this.relativeTargetOrigin,this.layout.layoutBox,m.layout.layoutBox),Nt(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=Oe(),this.targetWithTransforms=Oe()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),PO(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Nt(this.target,this.layout.layoutBox),cM(this.target,this.targetDelta)):Nt(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const m=this.getClosestProjectingParent();m&&!!m.resumingFrom==!!this.resumingFrom&&!m.options.layoutScroll&&m.target&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Oe(),this.relativeTargetOrigin=Oe(),Ua(this.relativeTargetOrigin,this.target,m.target),Nt(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Ea&&Mr.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||iv(this.parent.latestValues)||uM(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var s;const o=this.getLead(),l=!!this.resumingFrom||this!==o;let u=!0;if((this.isProjectionDirty||!((s=this.parent)===null||s===void 0)&&s.isProjectionDirty)&&(u=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===Qe.timestamp&&(u=!1),u)return;const{layout:c,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(c||d))return;Nt(this.layoutCorrected,this.layout.layoutBox);const f=this.treeScale.x,m=this.treeScale.y;FO(this.layoutCorrected,this.treeScale,this.path,l),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=Oe());const{target:v}=o;if(!v){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(Uw(this.prevProjectionDelta.x,this.projectionDelta.x),Uw(this.prevProjectionDelta.y,this.projectionDelta.y)),za(this.projectionDelta,this.layoutCorrected,v,this.latestValues),(this.treeScale.x!==f||this.treeScale.y!==m||!Jw(this.projectionDelta.x,this.prevProjectionDelta.x)||!Jw(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",v)),Ea&&Mr.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(s=!0){var o;if((o=this.options.visualElement)===null||o===void 0||o.scheduleRender(),s){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Ci(),this.projectionDelta=Ci(),this.projectionDeltaWithTransform=Ci()}setAnimationOrigin(s,o=!1){const l=this.snapshot,u=l?l.latestValues:{},c={...this.latestValues},d=Ci();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!o;const f=Oe(),m=l?l.source:void 0,v=this.layout?this.layout.source:void 0,p=m!==v,x=this.getStack(),y=!x||x.members.length<=1,g=!!(p&&!y&&this.options.crossfade===!0&&!this.path.some(kL));this.animationProgress=0;let b;this.mixTargetDelta=k=>{const _=k/1e3;nb(d.x,s.x,_),nb(d.y,s.y,_),this.setTargetDelta(d),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Ua(f,this.layout.layoutBox,this.relativeParent.layout.layoutBox),_L(this.relativeTarget,this.relativeTargetOrigin,f,_),b&&oL(this.relativeTarget,b)&&(this.isProjectionDirty=!1),b||(b=Oe()),Nt(b,this.relativeTarget)),p&&(this.animationValues=c,tL(c,u,this.latestValues,_,g,y)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=_},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(s){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(cr(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=xe.update(()=>{ko.hasAnimatedSinceResize=!0,this.currentAnimation=YO(0,Zw,{...s,onUpdate:o=>{this.mixTargetDelta(o),s.onUpdate&&s.onUpdate(o)},onComplete:()=>{s.onComplete&&s.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const s=this.getStack();s&&s.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Zw),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const s=this.getLead();let{targetWithTransforms:o,target:l,layout:u,latestValues:c}=s;if(!(!o||!l||!u)){if(this!==s&&this.layout&&u&&bM(this.options.animationType,this.layout.layoutBox,u.layoutBox)){l=this.target||Oe();const d=Et(this.layout.layoutBox.x);l.x.min=s.target.x.min,l.x.max=l.x.min+d;const f=Et(this.layout.layoutBox.y);l.y.min=s.target.y.min,l.y.max=l.y.min+f}Nt(o,l),Mi(o,c),za(this.projectionDeltaWithTransform,this.layoutCorrected,o,c)}}registerSharedNode(s,o){this.sharedNodes.has(s)||this.sharedNodes.set(s,new lL),this.sharedNodes.get(s).add(o);const u=o.options.initialPromotionConfig;o.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(o):void 0})}isLead(){const s=this.getStack();return s?s.lead===this:!0}getLead(){var s;const{layoutId:o}=this.options;return o?((s=this.getStack())===null||s===void 0?void 0:s.lead)||this:this}getPrevLead(){var s;const{layoutId:o}=this.options;return o?(s=this.getStack())===null||s===void 0?void 0:s.prevLead:void 0}getStack(){const{layoutId:s}=this.options;if(s)return this.root.sharedNodes.get(s)}promote({needsReset:s,transition:o,preserveFollowOpacity:l}={}){const u=this.getStack();u&&u.promote(this,l),s&&(this.projectionDelta=void 0,this.needsReset=!0),o&&this.setOptions({transition:o})}relegate(){const s=this.getStack();return s?s.relegate(this):!1}resetSkewAndRotation(){const{visualElement:s}=this.options;if(!s)return;let o=!1;const{latestValues:l}=s;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(o=!0),!o)return;const u={};l.z&&ec("z",s,u,this.animationValues);for(let c=0;c<Zu.length;c++)ec(`rotate${Zu[c]}`,s,u,this.animationValues),ec(`skew${Zu[c]}`,s,u,this.animationValues);s.render();for(const c in u)s.setStaticValue(c,u[c]),this.animationValues&&(this.animationValues[c]=u[c]);s.scheduleRender()}getProjectionStyles(s){var o,l;if(!this.instance||this.isSVG)return;if(!this.isVisible)return cL;const u={visibility:""},c=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,u.opacity="",u.pointerEvents=So(s==null?void 0:s.pointerEvents)||"",u.transform=c?c(this.latestValues,""):"none",u;const d=this.getLead();if(!this.projectionDelta||!this.layout||!d.target){const p={};return this.options.layoutId&&(p.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,p.pointerEvents=So(s==null?void 0:s.pointerEvents)||""),this.hasProjected&&!Tr(this.latestValues)&&(p.transform=c?c({},""):"none",this.hasProjected=!1),p}const f=d.animationValues||d.latestValues;this.applyTransformsToTarget(),u.transform=uL(this.projectionDeltaWithTransform,this.treeScale,f),c&&(u.transform=c(f,u.transform));const{x:m,y:v}=this.projectionDelta;u.transformOrigin=`${m.origin*100}% ${v.origin*100}% 0`,d.animationValues?u.opacity=d===this?(l=(o=f.opacity)!==null&&o!==void 0?o:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:f.opacityExit:u.opacity=d===this?f.opacity!==void 0?f.opacity:"":f.opacityExit!==void 0?f.opacityExit:0;for(const p in Qo){if(f[p]===void 0)continue;const{correct:x,applyTo:y}=Qo[p],g=u.transform==="none"?f[p]:x(f[p],d);if(y){const b=y.length;for(let k=0;k<b;k++)u[y[k]]=g}else u[p]=g}return this.options.layoutId&&(u.pointerEvents=d===this?So(s==null?void 0:s.pointerEvents)||"":"none"),u}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(s=>{var o;return(o=s.currentAnimation)===null||o===void 0?void 0:o.stop()}),this.root.nodes.forEach(eb),this.root.sharedNodes.clear()}}}function fL(e){e.updateLayout()}function hL(e){var t;const n=((t=e.resumeFrom)===null||t===void 0?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&n&&e.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=e.layout,{animationType:a}=e.options,s=n.source!==e.layout.source;a==="size"?At(d=>{const f=s?n.measuredBox[d]:n.layoutBox[d],m=Et(f);f.min=r[d].min,f.max=f.min+m}):bM(a,n.layoutBox,r)&&At(d=>{const f=s?n.measuredBox[d]:n.layoutBox[d],m=Et(r[d]);f.max=f.min+m,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[d].max=e.relativeTarget[d].min+m)});const o=Ci();za(o,r,n.layoutBox);const l=Ci();s?za(l,e.applyTransform(i,!0),n.measuredBox):za(l,r,n.layoutBox);const u=!vM(o);let c=!1;if(!e.resumeFrom){const d=e.getClosestProjectingParent();if(d&&!d.resumeFrom){const{snapshot:f,layout:m}=d;if(f&&m){const v=Oe();Ua(v,n.layoutBox,f.layoutBox);const p=Oe();Ua(p,r,m.layoutBox),yM(v,p)||(c=!0),d.options.layoutRoot&&(e.relativeTarget=p,e.relativeTargetOrigin=v,e.relativeParent=d)}}}e.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:l,layoutDelta:o,hasLayoutChanged:u,hasRelativeTargetChanged:c})}else if(e.isLead()){const{onExitComplete:r}=e.options;r&&r()}e.options.transition=void 0}function pL(e){Ea&&Mr.totalNodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function mL(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function vL(e){e.clearSnapshot()}function eb(e){e.clearMeasurements()}function yL(e){e.isLayoutDirty=!1}function gL(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function tb(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function wL(e){e.resolveTargetDelta()}function bL(e){e.calcProjection()}function xL(e){e.resetSkewAndRotation()}function SL(e){e.removeLeadSnapshot()}function nb(e,t,n){e.translate=Te(t.translate,0,n),e.scale=Te(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function rb(e,t,n,r){e.min=Te(t.min,n.min,r),e.max=Te(t.max,n.max,r)}function _L(e,t,n,r){rb(e.x,t.x,n.x,r),rb(e.y,t.y,n.y,r)}function kL(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const EL={duration:.45,ease:[.4,0,.1,1]},ib=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),ab=ib("applewebkit/")&&!ib("chrome/")?Math.round:_t;function sb(e){e.min=ab(e.min),e.max=ab(e.max)}function CL(e){sb(e.x),sb(e.y)}function bM(e,t,n){return e==="position"||e==="preserve-aspect"&&!jO(Xw(t),Xw(n),.2)}function TL(e){var t;return e!==e.root&&((t=e.scroll)===null||t===void 0?void 0:t.wasRoot)}const ML=wM({attachResizeListener:(e,t)=>fs(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),tc={current:void 0},xM=wM({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!tc.current){const e=new ML({});e.mount(window),e.setOptions({layoutScroll:!0}),tc.current=e}return tc.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),jL={pan:{Feature:GO},drag:{Feature:UO,ProjectionNode:xM,MeasureLayout:hM}};function ob(e,t,n){const{props:r}=e;e.animationState&&r.whileHover&&e.animationState.setActive("whileHover",n==="Start");const i="onHover"+n,a=r[i];a&&xe.postRender(()=>a(t,Ss(t)))}class PL extends vr{mount(){const{current:t}=this.node;t&&(this.unmount=jD(t,n=>(ob(this.node,n,"Start"),r=>ob(this.node,r,"End"))))}unmount(){}}class NL extends vr{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=xs(fs(this.node.current,"focus",()=>this.onFocus()),fs(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function lb(e,t,n){const{props:r}=e;e.animationState&&r.whileTap&&e.animationState.setActive("whileTap",n==="Start");const i="onTap"+(n==="End"?"":n),a=r[i];a&&xe.postRender(()=>a(t,Ss(t)))}class AL extends vr{mount(){const{current:t}=this.node;t&&(this.unmount=RD(t,n=>(lb(this.node,n,"Start"),(r,{success:i})=>lb(this.node,r,i?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const sv=new WeakMap,nc=new WeakMap,RL=e=>{const t=sv.get(e.target);t&&t(e)},IL=e=>{e.forEach(RL)};function DL({root:e,...t}){const n=e||document;nc.has(n)||nc.set(n,{});const r=nc.get(n),i=JSON.stringify(t);return r[i]||(r[i]=new IntersectionObserver(IL,{root:e,...t})),r[i]}function OL(e,t,n){const r=DL(t);return sv.set(e,n),r.observe(e),()=>{sv.delete(e),r.unobserve(e)}}const LL={some:0,all:1};class qL extends vr{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:a}=t,s={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:LL[i]},o=l=>{const{isIntersecting:u}=l;if(this.isInView===u||(this.isInView=u,a&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:c,onViewportLeave:d}=this.node.getProps(),f=u?c:d;f&&f(l)};return OL(this.node.current,s,o)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:n}=this.node;["amount","margin","root"].some(FL(t,n))&&this.startObserver()}unmount(){}}function FL({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}const VL={inView:{Feature:qL},tap:{Feature:AL},focus:{Feature:NL},hover:{Feature:PL}},$L={layout:{ProjectionNode:xM,MeasureLayout:hM}},ov={current:null},SM={current:!1};function BL(){if(SM.current=!0,!!uy)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>ov.current=e.matches;e.addListener(t),t()}else ov.current=!1}const zL=[...WT,nt,dr],UL=e=>zL.find(HT(e)),ub=new WeakMap;function GL(e,t,n){for(const r in t){const i=t[r],a=n[r];if(it(i))e.addValue(r,i);else if(it(a))e.addValue(r,cs(i,{owner:e}));else if(a!==i)if(e.hasValue(r)){const s=e.getValue(r);s.liveStyle===!0?s.jump(i):s.hasAnimated||s.set(i)}else{const s=e.getStaticValue(r);e.addValue(r,cs(s!==void 0?s:i,{owner:e}))}}for(const r in n)t[r]===void 0&&e.removeValue(r);return t}const cb=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class HL{scrapeMotionValuesFromProps(t,n,r){return{}}constructor({parent:t,props:n,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:a,visualState:s},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Oy,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const m=cn.now();this.renderScheduledAt<m&&(this.renderScheduledAt=m,xe.render(this.render,!1,!0))};const{latestValues:l,renderState:u,onUpdate:c}=s;this.onUpdate=c,this.latestValues=l,this.baseTarget={...l},this.initialValues=n.initial?{...l}:{},this.renderState=u,this.parent=t,this.props=n,this.presenceContext=r,this.depth=t?t.depth+1:0,this.reducedMotionConfig=i,this.options=o,this.blockInitialAnimation=!!a,this.isControllingVariants=El(n),this.isVariantNode=tT(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:d,...f}=this.scrapeMotionValuesFromProps(n,{},this);for(const m in f){const v=f[m];l[m]!==void 0&&it(v)&&v.set(l[m],!1)}}mount(t){this.current=t,ub.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),SM.current||BL(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:ov.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){ub.delete(this.current),this.projection&&this.projection.unmount(),cr(this.notifyUpdate),cr(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const n=this.features[t];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(t,n){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const r=Hr.has(t),i=n.on("change",o=>{this.latestValues[t]=o,this.props.onUpdate&&xe.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),a=n.on("renderRequest",this.scheduleRender);let s;window.MotionCheckAppearSync&&(s=window.MotionCheckAppearSync(this,t,n)),this.valueSubscriptions.set(t,()=>{i(),a(),s&&s(),n.owner&&n.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in zi){const n=zi[t];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[t]&&i&&r(this.props)&&(this.features[t]=new i(this)),this.features[t]){const a=this.features[t];a.isMounted?a.update():(a.mount(),a.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Oe()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,n){this.latestValues[t]=n}update(t,n){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<cb.length;r++){const i=cb[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const a="on"+i,s=t[a];s&&(this.propEventSubscriptions[i]=this.on(i,s))}this.prevMotionValues=GL(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(t),()=>n.variantChildren.delete(t)}addValue(t,n){const r=this.values.get(t);n!==r&&(r&&this.removeValue(t),this.bindToMotionValue(t,n),this.values.set(t,n),this.latestValues[t]=n.get())}removeValue(t){this.values.delete(t);const n=this.valueSubscriptions.get(t);n&&(n(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,n){if(this.props.values&&this.props.values[t])return this.props.values[t];let r=this.values.get(t);return r===void 0&&n!==void 0&&(r=cs(n===null?void 0:n,{owner:this}),this.addValue(t,r)),r}readValue(t,n){var r;let i=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:(r=this.getBaseTargetFromProps(this.props,t))!==null&&r!==void 0?r:this.readValueFromInstance(this.current,t,this.options);return i!=null&&(typeof i=="string"&&(UT(i)||DT(i))?i=parseFloat(i):!UL(i)&&dr.test(n)&&(i=$T(t,n)),this.setBaseTarget(t,it(i)?i.get():i)),it(i)?i.get():i}setBaseTarget(t,n){this.baseTarget[t]=n}getBaseTarget(t){var n;const{initial:r}=this.props;let i;if(typeof r=="string"||typeof r=="object"){const s=vy(this.props,r,(n=this.presenceContext)===null||n===void 0?void 0:n.custom);s&&(i=s[t])}if(r&&i!==void 0)return i;const a=this.getBaseTargetFromProps(this.props,t);return a!==void 0&&!it(a)?a:this.initialValues[t]!==void 0&&i===void 0?void 0:this.baseTarget[t]}on(t,n){return this.events[t]||(this.events[t]=new Py),this.events[t].add(n)}notify(t,...n){this.events[t]&&this.events[t].notify(...n)}}class _M extends HL{constructor(){super(...arguments),this.KeyframeResolver=KT}sortInstanceNodePosition(t,n){return t.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(t,n){return t.style?t.style[n]:void 0}removeValueFromRenderState(t,{vars:n,style:r}){delete n[t],delete r[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;it(t)&&(this.childSubscription=t.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function WL(e){return window.getComputedStyle(e)}class KL extends _M{constructor(){super(...arguments),this.type="html",this.renderInstance=cT}readValueFromInstance(t,n){if(Hr.has(n)){const r=Dy(n);return r&&r.default||0}else{const r=WL(t),i=(oT(n)?r.getPropertyValue(n):r[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(t,{transformPagePoint:n}){return dM(t,n)}build(t,n,r){wy(t,n,r.transformTemplate)}scrapeMotionValuesFromProps(t,n,r){return _y(t,n,r)}}class YL extends _M{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Oe}getBaseTargetFromProps(t,n){return t[n]}readValueFromInstance(t,n){if(Hr.has(n)){const r=Dy(n);return r&&r.default||0}return n=dT.has(n)?n:hy(n),t.getAttribute(n)}scrapeMotionValuesFromProps(t,n,r){return pT(t,n,r)}build(t,n,r){by(t,n,this.isSVGTag,r.transformTemplate)}renderInstance(t,n,r,i){fT(t,n,r,i)}mount(t){this.isSVGTag=Sy(t.tagName),super.mount(t)}}const QL=(e,t)=>my(e)?new YL(t):new KL(t,{allowProjection:e!==S.Fragment}),XL=SD({...bO,...VL,...jL,...$L},QL),JL=LI(XL);function ZL({steps:e,fromRects:t,toRects:n,onComplete:r}){return S.useEffect(()=>{const i=window.setTimeout(r,550);return()=>window.clearTimeout(i)},[r]),h.jsx("div",{className:"morph-layer",children:e.map(i=>{var o;const a=t[i.id],s=n[i.id];return!a||!s?null:h.jsxs(JL.div,{className:`morph-card step-${i.type}`,initial:{left:a.left,top:a.top,width:a.width,height:a.height},animate:{left:s.left,top:s.top,width:s.width,height:s.height},transition:{duration:.5,ease:"easeInOut"},children:[h.jsx("div",{className:"morph-card-title",children:i.name}),h.jsx("div",{className:"morph-card-subtitle",children:((o=i.preview)==null?void 0:o.title)??i.type})]},i.id)})})}function eq({morph:e,onComplete:t,children:n}){return h.jsxs("div",{className:"morph-orchestrator",children:[n,e?h.jsx(ZL,{steps:e.steps,fromRects:e.fromRects,toRects:e.toRects,onComplete:t}):null]})}const tq="demo-trace-overlap-001",nq="Overlap + ToolCallId Demo",rq="2026-01-27T10:00:00.000Z",iq="2026-01-27T10:00:05.000Z",aq="completed",sq={source:"openai_agents",agentName:"DemoAgent",modelId:"gpt-4o-2024-11-20",wallTimeMs:5e3,workTimeMs:7200,totalTokens:1400,totalCostUsd:.018},oq=[{id:"s1",index:0,type:"llm_call",name:"plan",startedAt:"2026-01-27T10:00:00.000Z",endedAt:"2026-01-27T10:00:01.000Z",durationMs:1e3,childStepIds:[],metrics:{tokensTotal:300,costUsd:.004},preview:{title:"LLM: plan",subtitle:"gpt-4o",outputPreview:"I'll fetch two sources..."},status:"completed"},{id:"s2",index:1,type:"llm_call",name:"call_tools",startedAt:"2026-01-27T10:00:01.000Z",endedAt:"2026-01-27T10:00:01.200Z",durationMs:200,childStepIds:[],metrics:{tokensTotal:120,costUsd:.002},preview:{title:"LLM: call tools",outputPreview:"Calling web_search + database_query"},io:{emittedToolCallIds:["tc-001","tc-002"]},status:"completed"},{id:"s3",index:2,type:"tool_call",name:"web_search",toolCallId:"tc-001",startedAt:"2026-01-27T10:00:01.200Z",endedAt:"2026-01-27T10:00:03.200Z",durationMs:2e3,childStepIds:[],metrics:{costUsd:0},preview:{title:"Tool: web_search",inputPreview:'{"q":"EU AI Act"}',outputPreview:"[3 results...]"},status:"completed"},{id:"s4",index:3,type:"tool_call",name:"database_query",toolCallId:"tc-002",startedAt:"2026-01-27T10:00:01.500Z",endedAt:"2026-01-27T10:00:02.700Z",durationMs:1200,childStepIds:[],preview:{title:"Tool: database_query",inputPreview:'{"sql":"SELECT..."}',outputPreview:'{"rows":42}'},status:"completed"},{id:"s5",index:4,type:"llm_call",name:"analyze",startedAt:"2026-01-27T10:00:03.200Z",endedAt:"2026-01-27T10:00:04.600Z",durationMs:1400,childStepIds:[],metrics:{tokensTotal:700,costUsd:.012},preview:{title:"LLM: analyze",outputPreview:"Synthesis based on tool outputs..."},io:{consumedToolCallIds:["tc-001","tc-002"]},status:"completed"}],Ml={id:tq,name:nq,startedAt:rq,endedAt:iq,status:aq,metadata:sq,steps:oq};function kM(e,t){const n=lq(e,t),r=new Set(n.map(d=>d.leftId)),i=new Set(n.map(d=>d.rightId)),a=t.steps.filter(d=>!i.has(d.id)).map(d=>d.id),s=e.steps.filter(d=>!r.has(d.id)).map(d=>d.id),o=n.filter(d=>{const f=e.steps.find(v=>v.id===d.leftId),m=t.steps.find(v=>v.id===d.rightId);return!f||!m?!1:db(f)!==db(m)}),l=o.map(d=>d.leftId),u=(t.metadata.totalCostUsd??0)-(e.metadata.totalCostUsd??0),c=t.metadata.wallTimeMs-e.metadata.wallTimeMs;return{addedSteps:a,removedSteps:s,changedSteps:l,changedPairs:o,alignedSteps:n,costDeltaUsd:u,wallTimeDeltaMs:c}}function lq(e,t){const n=[],r=new Set(e.steps.map(c=>c.id)),i=new Set(t.steps.map(c=>c.id));Array.from(r).forEach(c=>{i.has(c)&&(n.push({leftId:c,rightId:c}),r.delete(c),i.delete(c))});const a=new Map;t.steps.forEach(c=>{c.toolCallId&&a.set(c.toolCallId,c.id)}),e.steps.forEach(c=>{if(!c.toolCallId)return;const d=a.get(c.toolCallId);d&&i.has(d)&&(n.push({leftId:c.id,rightId:d}),r.delete(c.id),i.delete(d))});const s=pb(e),o=pb(t),l=uq(e,t),u={};return i.forEach(c=>{const d=o.get(c);if(!d)return;const f=fb(d.step);f&&(u[f]||(u[f]=[]),u[f].push(c))}),Object.values(u).forEach(c=>{c.sort((d,f)=>{var m,v;return(((m=o.get(d))==null?void 0:m.startMs)??0)-(((v=o.get(f))==null?void 0:v.startMs)??0)})}),Array.from(r).forEach(c=>{var v;const d=s.get(c);if(!d)return;const f=fb(d.step);if(!f||!((v=u[f])!=null&&v.length))return;const m=cq(d,u[f],o,l);m&&(n.push({leftId:c,rightId:m}),r.delete(c),i.delete(m),u[f]=u[f].filter(p=>p!==m))}),n}function db(e){var r,i;const t=((r=e.preview)==null?void 0:r.outputPreview)??null,n=((i=e.metrics)==null?void 0:i.costUsd)??null;return`${e.status}|${t??""}|${n??""}`}function fb(e){return e.type?`${e.type}:${e.name??""}`:null}function hb(e){if(!e)return null;const t=Date.parse(e);return Number.isNaN(t)?null:t}function pb(e){const t=hb(e.startedAt),n=new Map;return e.steps.forEach(r=>{const i=hb(r.startedAt),a=t!=null&&i!=null?i-t:null;n.set(r.id,{step:r,startMs:a})}),n}function uq(e,t){const n=Math.max(e.metadata.wallTimeMs,t.metadata.wallTimeMs,1);return Math.max(1e3,Math.min(5e3,Math.round(n*.1)))}function cq(e,t,n,r){const i=e.startMs;if(i==null)return null;let a=null,s=r+1;return t.forEach(o=>{const l=n.get(o);if(!l||l.startMs==null)return;const u=Math.abs(l.startMs-i);u<s&&(s=u,a=o)}),s<=r?a:null}const dq=new Map,fq=new Map,Lr=new Map;async function hq(){return[Ml]}async function EM(e){return{trace:Ml}}const pq={s1:{role:"assistant",content:"I'll analyze the user's request and create a plan to fetch information from two sources: a web search for current EU AI Act updates and a database query for historical compliance data.",model:"gpt-4o-2024-11-20",usage:{prompt_tokens:150,completion_tokens:150,total_tokens:300},reasoning:"The user wants comprehensive information about AI regulations. I'll use parallel tool calls to maximize efficiency."},s2:{role:"assistant",content:null,tool_calls:[{id:"tc-001",type:"function",function:{name:"web_search",arguments:'{"q":"EU AI Act latest updates 2026"}'}},{id:"tc-002",type:"function",function:{name:"database_query",arguments:`{"sql":"SELECT * FROM compliance_records WHERE region='EU' ORDER BY date DESC LIMIT 10"}`}}],model:"gpt-4o-2024-11-20",usage:{prompt_tokens:80,completion_tokens:40,total_tokens:120}},s3:{tool_call_id:"tc-001",tool_name:"web_search",input:{q:"EU AI Act latest updates 2026"},output:{results:[{title:"EU AI Act Implementation Timeline",url:"https://example.com/ai-act",snippet:"The EU AI Act enters full force in 2026..."},{title:"High-Risk AI Systems Classification",url:"https://example.com/classification",snippet:"New guidance on high-risk categorization..."},{title:"Compliance Deadlines Approaching",url:"https://example.com/deadlines",snippet:"Organizations must comply by August 2026..."}],total_results:3,search_time_ms:1850},status:"success"},s4:{tool_call_id:"tc-002",tool_name:"database_query",input:{sql:"SELECT * FROM compliance_records WHERE region='EU' ORDER BY date DESC LIMIT 10"},output:{rows:[{id:1,company:"TechCorp",status:"compliant",date:"2026-01-15"},{id:2,company:"AIStartup",status:"in_progress",date:"2026-01-10"},{id:3,company:"DataCo",status:"compliant",date:"2026-01-05"}],row_count:42,query_time_ms:1100},status:"success"},s5:{role:"assistant",content:`Based on my analysis of the web search results and database records:

**Key Findings:**
1. The EU AI Act is now in full effect as of 2026
2. High-risk AI systems require specific compliance measures
3. 42 organizations in our database have compliance records

**Recommendations:**
- Review classification of AI systems
- Ensure documentation is complete
- Schedule compliance audit before August deadline`,model:"gpt-4o-2024-11-20",usage:{prompt_tokens:450,completion_tokens:250,total_tokens:700},reasoning:"Synthesized information from both the web search (3 relevant articles) and database query (42 compliance records) to provide actionable insights."}};function mq(e,t){const n=Ml.steps.find(a=>a.id===e);if(!n)return null;const r=pq[e];if(!r)return null;const i=t?vq(r):r;return{...n,data:i}}function vq(e){var n,r;const t=JSON.parse(JSON.stringify(e));return(n=t.input)!=null&&n.sql&&(t.input.sql="[REDACTED]"),(r=t.output)!=null&&r.rows&&(t.output.rows=t.output.rows.map(i=>({...i,company:"[REDACTED]"}))),t.tool_calls&&(t.tool_calls=t.tool_calls.map(i=>({...i,function:{...i.function,arguments:"[REDACTED]"}}))),t}async function yq(e,t,n,r=[],i=!1){return await new Promise(a=>setTimeout(a,150)),mq(t,i)}async function gq(e,t,n){await yq(e,t,"redacted",[],n)}function wq(e,t){return()=>{}}function bq(){dq.clear(),fq.clear()}async function xq(e,t){return null}async function Sq(e){return null}async function yz(e,t){return[]}async function gz(e,t,n,r,i){return null}async function _q(){return[]}async function kq(e,t){return null}async function Eq(e,t,n,r,i){return i?CM(i,t,n,r):null}function CM(e,t,n,r){var v;const i=JSON.parse(JSON.stringify(e)),a=6e4,s=Date.parse("2024-01-01T00:00:00.000Z"),o=Date.parse(e.endedAt??e.startedAt??""),u=(Number.isNaN(o)?s:o)+a,c=new Date(u);i.id=`${e.id}-replay-${u}`,i.parentTraceId=e.id,i.branchPointStepId=t,i.replay={strategy:n,modifiedStepId:t,modifications:r,createdAt:c.toISOString()};const d=p=>{if(!p)return p;const x=Date.parse(p);return Number.isNaN(x)?p:new Date(x+a).toISOString()};i.startedAt=d(i.startedAt)??i.startedAt,i.endedAt=d(i.endedAt);const f=new Set,m=((v=i.steps.find(p=>p.id===t))==null?void 0:v.index)??-1;return n==="live"?i.steps.forEach(p=>{p.index>m&&f.add(p.id)}):n==="hybrid"&&i.steps.forEach(p=>{p.index>m&&f.add(p.id)}),i.steps=i.steps.map(p=>{var y;const x={...p};if(x.startedAt=d(p.startedAt)??p.startedAt,x.endedAt=d(p.endedAt),p.id===t){const g=((y=p.preview)==null?void 0:y.outputPreview)??"";x.preview={...p.preview,outputPreview:`${g} (modified)`.trim()}}return f.has(p.id)&&(x.status="pending",x.endedAt=null,x.durationMs=void 0,x.metrics=void 0,x.preview={...p.preview,outputPreview:"[invalidated for replay]"}),x}),i}async function Cq(e){return jq(e)}async function Tq(e){var t;return((t=Lr.get(e))==null?void 0:t.job)??null}async function mb(e){var t;return((t=Lr.get(e))==null?void 0:t.matrix)??null}async function Mq(e){{const t=Lr.get(e);if(!t)return null;const n={...t.job,status:"canceled",scenarios:t.job.scenarios.map(r=>({...r,status:"canceled",endedAt:r.endedAt??new Date().toISOString()}))};return Lr.set(e,{...t,job:n}),n}}function jq(e){const t=`demo-job-${Date.now()}-${Math.random().toString(36).slice(2,6)}`,n=Ml,r=new Date().toISOString(),i=e.scenarios.map((l,u)=>({id:`demo-scn-${u+1}`,name:l.name,strategy:l.strategy,modifications:l.modifications,status:"running",startedAt:r,endedAt:null,replayTraceId:`${t}-replay-${u+1}`})),a={id:t,traceId:e.traceId,stepId:e.stepId,status:"running",createdAt:r,startedAt:r,endedAt:null,scenarioCount:i.length,completedCount:0,failedCount:0,canceledCount:0,scenarios:i},s=i.map(l=>{const u=CM(n,e.stepId,l.strategy,l.modifications);u.id=l.replayTraceId;const c=kM(n,u),d=n.metadata.totalCostUsd??0,f=u.metadata.totalCostUsd??d,m=n.metadata.errorCount??0,v=u.metadata.errorCount??m,p=n.metadata.retryCount??0,x=u.metadata.retryCount??p,y=u.steps.filter(g=>g.status==="pending").length;return{scenarioId:l.id,name:l.name,strategy:l.strategy,status:"completed",replayTraceId:l.replayTraceId,modifications:l.modifications,error:null,changedStepIds:c.changedSteps,addedStepIds:c.addedSteps,removedStepIds:c.removedSteps,metrics:{costDeltaUsd:f-d,wallTimeDeltaMs:(u.metadata.wallTimeMs??0)-(n.metadata.wallTimeMs??0),errorDelta:v-m,retryDelta:x-p,changedSteps:c.changedSteps.length,addedSteps:c.addedSteps.length,removedSteps:c.removedSteps.length,invalidatedStepCount:y}}}),o={jobId:t,traceId:e.traceId,stepId:e.stepId,rows:s,causalRanking:[]};return Lr.set(t,{job:a,matrix:o}),window.setTimeout(()=>{const l=Lr.get(t);if(!l)return;const u=new Date().toISOString(),c=l.job.scenarios.map(m=>({...m,status:"completed",endedAt:u})),d={...l.job,status:"completed",endedAt:u,completedCount:c.length,scenarios:c},f={...l.matrix,rows:l.matrix.rows.map(m=>({...m,status:"completed"}))};Lr.set(t,{job:d,matrix:f})},600),a}async function Pq(e){return null}async function vb(e){return null}async function Nq(e){return null}async function Aq(e){return null}async function yb(e){return{session:null,conflict:!1,error:null}}async function Rq(e){return null}async function Iq(e){return null}async function Dq(e,t){return null}async function Oq(e){return null}async function Lq(e,t,n){return null}async function qq(){return null}async function Fq(){return null}function Vq(e,t,n){return()=>{}}function $q(){const[e,t]=S.useState(null),[n,r]=S.useState(null),[i,a]=S.useState(!0),[s,o]=S.useState(null),[l,u]=S.useState([]),[c,d]=S.useState(null),f=S.useCallback(async v=>{const p=await EM(),x=(p==null?void 0:p.trace)??null;t(x),r(x?(p==null?void 0:p.insights)??RR(x):null)},[t,r]),m=S.useCallback(async()=>{var v;a(!0),o(null);try{const p=await hq();u(p);const x=((v=p[p.length-1])==null?void 0:v.id)??null,y=c??x;if(!y){t(null),r(null);return}if(!c||c!==y){d(y);return}await f(y)}catch(p){o(p instanceof Error?p.message:"Failed to load trace")}finally{a(!1)}},[c,f]);return S.useEffect(()=>{m()},[m]),S.useEffect(()=>{c&&(a(!0),f(c).catch(v=>{o(v instanceof Error?v.message:"Failed to load trace")}).finally(()=>a(!1)))},[c,f]),S.useEffect(()=>wq(),[c,d]),{trace:e,insights:n,loading:i,error:s,reload:m,traces:l,selectedTraceId:c,setSelectedTraceId:d}}function Ee(e,t){const[n,r]=S.useState(()=>{if(typeof window>"u")return t;try{const i=window.localStorage.getItem(e);return i==null?t:JSON.parse(i)}catch{return t}});return S.useEffect(()=>{try{window.localStorage.setItem(e,JSON.stringify(n))}catch{}},[e,n]),[n,r]}function Vy(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var rc,gb;function Bq(){if(gb)return rc;gb=1;function e(){this.__data__=[],this.size=0}return rc=e,rc}var ic,wb;function Qi(){if(wb)return ic;wb=1;function e(t,n){return t===n||t!==t&&n!==n}return ic=e,ic}var ac,bb;function jl(){if(bb)return ac;bb=1;var e=Qi();function t(n,r){for(var i=n.length;i--;)if(e(n[i][0],r))return i;return-1}return ac=t,ac}var sc,xb;function zq(){if(xb)return sc;xb=1;var e=jl(),t=Array.prototype,n=t.splice;function r(i){var a=this.__data__,s=e(a,i);if(s<0)return!1;var o=a.length-1;return s==o?a.pop():n.call(a,s,1),--this.size,!0}return sc=r,sc}var oc,Sb;function Uq(){if(Sb)return oc;Sb=1;var e=jl();function t(n){var r=this.__data__,i=e(r,n);return i<0?void 0:r[i][1]}return oc=t,oc}var lc,_b;function Gq(){if(_b)return lc;_b=1;var e=jl();function t(n){return e(this.__data__,n)>-1}return lc=t,lc}var uc,kb;function Hq(){if(kb)return uc;kb=1;var e=jl();function t(n,r){var i=this.__data__,a=e(i,n);return a<0?(++this.size,i.push([n,r])):i[a][1]=r,this}return uc=t,uc}var cc,Eb;function Pl(){if(Eb)return cc;Eb=1;var e=Bq(),t=zq(),n=Uq(),r=Gq(),i=Hq();function a(s){var o=-1,l=s==null?0:s.length;for(this.clear();++o<l;){var u=s[o];this.set(u[0],u[1])}}return a.prototype.clear=e,a.prototype.delete=t,a.prototype.get=n,a.prototype.has=r,a.prototype.set=i,cc=a,cc}var dc,Cb;function Wq(){if(Cb)return dc;Cb=1;var e=Pl();function t(){this.__data__=new e,this.size=0}return dc=t,dc}var fc,Tb;function Kq(){if(Tb)return fc;Tb=1;function e(t){var n=this.__data__,r=n.delete(t);return this.size=n.size,r}return fc=e,fc}var hc,Mb;function Yq(){if(Mb)return hc;Mb=1;function e(t){return this.__data__.get(t)}return hc=e,hc}var pc,jb;function Qq(){if(jb)return pc;jb=1;function e(t){return this.__data__.has(t)}return pc=e,pc}var mc,Pb;function TM(){if(Pb)return mc;Pb=1;var e=typeof qs=="object"&&qs&&qs.Object===Object&&qs;return mc=e,mc}var vc,Nb;function Xt(){if(Nb)return vc;Nb=1;var e=TM(),t=typeof self=="object"&&self&&self.Object===Object&&self,n=e||t||Function("return this")();return vc=n,vc}var yc,Ab;function Xi(){if(Ab)return yc;Ab=1;var e=Xt(),t=e.Symbol;return yc=t,yc}var gc,Rb;function Xq(){if(Rb)return gc;Rb=1;var e=Xi(),t=Object.prototype,n=t.hasOwnProperty,r=t.toString,i=e?e.toStringTag:void 0;function a(s){var o=n.call(s,i),l=s[i];try{s[i]=void 0;var u=!0}catch{}var c=r.call(s);return u&&(o?s[i]=l:delete s[i]),c}return gc=a,gc}var wc,Ib;function Jq(){if(Ib)return wc;Ib=1;var e=Object.prototype,t=e.toString;function n(r){return t.call(r)}return wc=n,wc}var bc,Db;function Wr(){if(Db)return bc;Db=1;var e=Xi(),t=Xq(),n=Jq(),r="[object Null]",i="[object Undefined]",a=e?e.toStringTag:void 0;function s(o){return o==null?o===void 0?i:r:a&&a in Object(o)?t(o):n(o)}return bc=s,bc}var xc,Ob;function Ft(){if(Ob)return xc;Ob=1;function e(t){var n=typeof t;return t!=null&&(n=="object"||n=="function")}return xc=e,xc}var Sc,Lb;function _s(){if(Lb)return Sc;Lb=1;var e=Wr(),t=Ft(),n="[object AsyncFunction]",r="[object Function]",i="[object GeneratorFunction]",a="[object Proxy]";function s(o){if(!t(o))return!1;var l=e(o);return l==r||l==i||l==n||l==a}return Sc=s,Sc}var _c,qb;function Zq(){if(qb)return _c;qb=1;var e=Xt(),t=e["__core-js_shared__"];return _c=t,_c}var kc,Fb;function eF(){if(Fb)return kc;Fb=1;var e=Zq(),t=function(){var r=/[^.]+$/.exec(e&&e.keys&&e.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}();function n(r){return!!t&&t in r}return kc=n,kc}var Ec,Vb;function MM(){if(Vb)return Ec;Vb=1;var e=Function.prototype,t=e.toString;function n(r){if(r!=null){try{return t.call(r)}catch{}try{return r+""}catch{}}return""}return Ec=n,Ec}var Cc,$b;function tF(){if($b)return Cc;$b=1;var e=_s(),t=eF(),n=Ft(),r=MM(),i=/[\\^$.*+?()[\]{}|]/g,a=/^\[object .+?Constructor\]$/,s=Function.prototype,o=Object.prototype,l=s.toString,u=o.hasOwnProperty,c=RegExp("^"+l.call(u).replace(i,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function d(f){if(!n(f)||t(f))return!1;var m=e(f)?c:a;return m.test(r(f))}return Cc=d,Cc}var Tc,Bb;function nF(){if(Bb)return Tc;Bb=1;function e(t,n){return t==null?void 0:t[n]}return Tc=e,Tc}var Mc,zb;function Kr(){if(zb)return Mc;zb=1;var e=tF(),t=nF();function n(r,i){var a=t(r,i);return e(a)?a:void 0}return Mc=n,Mc}var jc,Ub;function $y(){if(Ub)return jc;Ub=1;var e=Kr(),t=Xt(),n=e(t,"Map");return jc=n,jc}var Pc,Gb;function Nl(){if(Gb)return Pc;Gb=1;var e=Kr(),t=e(Object,"create");return Pc=t,Pc}var Nc,Hb;function rF(){if(Hb)return Nc;Hb=1;var e=Nl();function t(){this.__data__=e?e(null):{},this.size=0}return Nc=t,Nc}var Ac,Wb;function iF(){if(Wb)return Ac;Wb=1;function e(t){var n=this.has(t)&&delete this.__data__[t];return this.size-=n?1:0,n}return Ac=e,Ac}var Rc,Kb;function aF(){if(Kb)return Rc;Kb=1;var e=Nl(),t="__lodash_hash_undefined__",n=Object.prototype,r=n.hasOwnProperty;function i(a){var s=this.__data__;if(e){var o=s[a];return o===t?void 0:o}return r.call(s,a)?s[a]:void 0}return Rc=i,Rc}var Ic,Yb;function sF(){if(Yb)return Ic;Yb=1;var e=Nl(),t=Object.prototype,n=t.hasOwnProperty;function r(i){var a=this.__data__;return e?a[i]!==void 0:n.call(a,i)}return Ic=r,Ic}var Dc,Qb;function oF(){if(Qb)return Dc;Qb=1;var e=Nl(),t="__lodash_hash_undefined__";function n(r,i){var a=this.__data__;return this.size+=this.has(r)?0:1,a[r]=e&&i===void 0?t:i,this}return Dc=n,Dc}var Oc,Xb;function lF(){if(Xb)return Oc;Xb=1;var e=rF(),t=iF(),n=aF(),r=sF(),i=oF();function a(s){var o=-1,l=s==null?0:s.length;for(this.clear();++o<l;){var u=s[o];this.set(u[0],u[1])}}return a.prototype.clear=e,a.prototype.delete=t,a.prototype.get=n,a.prototype.has=r,a.prototype.set=i,Oc=a,Oc}var Lc,Jb;function uF(){if(Jb)return Lc;Jb=1;var e=lF(),t=Pl(),n=$y();function r(){this.size=0,this.__data__={hash:new e,map:new(n||t),string:new e}}return Lc=r,Lc}var qc,Zb;function cF(){if(Zb)return qc;Zb=1;function e(t){var n=typeof t;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?t!=="__proto__":t===null}return qc=e,qc}var Fc,ex;function Al(){if(ex)return Fc;ex=1;var e=cF();function t(n,r){var i=n.__data__;return e(r)?i[typeof r=="string"?"string":"hash"]:i.map}return Fc=t,Fc}var Vc,tx;function dF(){if(tx)return Vc;tx=1;var e=Al();function t(n){var r=e(this,n).delete(n);return this.size-=r?1:0,r}return Vc=t,Vc}var $c,nx;function fF(){if(nx)return $c;nx=1;var e=Al();function t(n){return e(this,n).get(n)}return $c=t,$c}var Bc,rx;function hF(){if(rx)return Bc;rx=1;var e=Al();function t(n){return e(this,n).has(n)}return Bc=t,Bc}var zc,ix;function pF(){if(ix)return zc;ix=1;var e=Al();function t(n,r){var i=e(this,n),a=i.size;return i.set(n,r),this.size+=i.size==a?0:1,this}return zc=t,zc}var Uc,ax;function By(){if(ax)return Uc;ax=1;var e=uF(),t=dF(),n=fF(),r=hF(),i=pF();function a(s){var o=-1,l=s==null?0:s.length;for(this.clear();++o<l;){var u=s[o];this.set(u[0],u[1])}}return a.prototype.clear=e,a.prototype.delete=t,a.prototype.get=n,a.prototype.has=r,a.prototype.set=i,Uc=a,Uc}var Gc,sx;function mF(){if(sx)return Gc;sx=1;var e=Pl(),t=$y(),n=By(),r=200;function i(a,s){var o=this.__data__;if(o instanceof e){var l=o.__data__;if(!t||l.length<r-1)return l.push([a,s]),this.size=++o.size,this;o=this.__data__=new n(l)}return o.set(a,s),this.size=o.size,this}return Gc=i,Gc}var Hc,ox;function Rl(){if(ox)return Hc;ox=1;var e=Pl(),t=Wq(),n=Kq(),r=Yq(),i=Qq(),a=mF();function s(o){var l=this.__data__=new e(o);this.size=l.size}return s.prototype.clear=t,s.prototype.delete=n,s.prototype.get=r,s.prototype.has=i,s.prototype.set=a,Hc=s,Hc}var Wc,lx;function zy(){if(lx)return Wc;lx=1;function e(t,n){for(var r=-1,i=t==null?0:t.length;++r<i&&n(t[r],r,t)!==!1;);return t}return Wc=e,Wc}var Kc,ux;function jM(){if(ux)return Kc;ux=1;var e=Kr(),t=function(){try{var n=e(Object,"defineProperty");return n({},"",{}),n}catch{}}();return Kc=t,Kc}var Yc,cx;function Il(){if(cx)return Yc;cx=1;var e=jM();function t(n,r,i){r=="__proto__"&&e?e(n,r,{configurable:!0,enumerable:!0,value:i,writable:!0}):n[r]=i}return Yc=t,Yc}var Qc,dx;function Dl(){if(dx)return Qc;dx=1;var e=Il(),t=Qi(),n=Object.prototype,r=n.hasOwnProperty;function i(a,s,o){var l=a[s];(!(r.call(a,s)&&t(l,o))||o===void 0&&!(s in a))&&e(a,s,o)}return Qc=i,Qc}var Xc,fx;function ks(){if(fx)return Xc;fx=1;var e=Dl(),t=Il();function n(r,i,a,s){var o=!a;a||(a={});for(var l=-1,u=i.length;++l<u;){var c=i[l],d=s?s(a[c],r[c],c,a,r):void 0;d===void 0&&(d=r[c]),o?t(a,c,d):e(a,c,d)}return a}return Xc=n,Xc}var Jc,hx;function vF(){if(hx)return Jc;hx=1;function e(t,n){for(var r=-1,i=Array(t);++r<t;)i[r]=n(r);return i}return Jc=e,Jc}var Zc,px;function dn(){if(px)return Zc;px=1;function e(t){return t!=null&&typeof t=="object"}return Zc=e,Zc}var ed,mx;function yF(){if(mx)return ed;mx=1;var e=Wr(),t=dn(),n="[object Arguments]";function r(i){return t(i)&&e(i)==n}return ed=r,ed}var td,vx;function Es(){if(vx)return td;vx=1;var e=yF(),t=dn(),n=Object.prototype,r=n.hasOwnProperty,i=n.propertyIsEnumerable,a=e(function(){return arguments}())?e:function(s){return t(s)&&r.call(s,"callee")&&!i.call(s,"callee")};return td=a,td}var nd,yx;function $e(){if(yx)return nd;yx=1;var e=Array.isArray;return nd=e,nd}var Ca={exports:{}},rd,gx;function gF(){if(gx)return rd;gx=1;function e(){return!1}return rd=e,rd}Ca.exports;var wx;function Ji(){return wx||(wx=1,function(e,t){var n=Xt(),r=gF(),i=t&&!t.nodeType&&t,a=i&&!0&&e&&!e.nodeType&&e,s=a&&a.exports===i,o=s?n.Buffer:void 0,l=o?o.isBuffer:void 0,u=l||r;e.exports=u}(Ca,Ca.exports)),Ca.exports}var id,bx;function Ol(){if(bx)return id;bx=1;var e=9007199254740991,t=/^(?:0|[1-9]\d*)$/;function n(r,i){var a=typeof r;return i=i??e,!!i&&(a=="number"||a!="symbol"&&t.test(r))&&r>-1&&r%1==0&&r<i}return id=n,id}var ad,xx;function Uy(){if(xx)return ad;xx=1;var e=9007199254740991;function t(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=e}return ad=t,ad}var sd,Sx;function wF(){if(Sx)return sd;Sx=1;var e=Wr(),t=Uy(),n=dn(),r="[object Arguments]",i="[object Array]",a="[object Boolean]",s="[object Date]",o="[object Error]",l="[object Function]",u="[object Map]",c="[object Number]",d="[object Object]",f="[object RegExp]",m="[object Set]",v="[object String]",p="[object WeakMap]",x="[object ArrayBuffer]",y="[object DataView]",g="[object Float32Array]",b="[object Float64Array]",k="[object Int8Array]",_="[object Int16Array]",C="[object Int32Array]",M="[object Uint8Array]",T="[object Uint8ClampedArray]",j="[object Uint16Array]",N="[object Uint32Array]",A={};A[g]=A[b]=A[k]=A[_]=A[C]=A[M]=A[T]=A[j]=A[N]=!0,A[r]=A[i]=A[x]=A[a]=A[y]=A[s]=A[o]=A[l]=A[u]=A[c]=A[d]=A[f]=A[m]=A[v]=A[p]=!1;function I(L){return n(L)&&t(L.length)&&!!A[e(L)]}return sd=I,sd}var od,_x;function Ll(){if(_x)return od;_x=1;function e(t){return function(n){return t(n)}}return od=e,od}var Ta={exports:{}};Ta.exports;var kx;function Gy(){return kx||(kx=1,function(e,t){var n=TM(),r=t&&!t.nodeType&&t,i=r&&!0&&e&&!e.nodeType&&e,a=i&&i.exports===r,s=a&&n.process,o=function(){try{var l=i&&i.require&&i.require("util").types;return l||s&&s.binding&&s.binding("util")}catch{}}();e.exports=o}(Ta,Ta.exports)),Ta.exports}var ld,Ex;function Cs(){if(Ex)return ld;Ex=1;var e=wF(),t=Ll(),n=Gy(),r=n&&n.isTypedArray,i=r?t(r):e;return ld=i,ld}var ud,Cx;function PM(){if(Cx)return ud;Cx=1;var e=vF(),t=Es(),n=$e(),r=Ji(),i=Ol(),a=Cs(),s=Object.prototype,o=s.hasOwnProperty;function l(u,c){var d=n(u),f=!d&&t(u),m=!d&&!f&&r(u),v=!d&&!f&&!m&&a(u),p=d||f||m||v,x=p?e(u.length,String):[],y=x.length;for(var g in u)(c||o.call(u,g))&&!(p&&(g=="length"||m&&(g=="offset"||g=="parent")||v&&(g=="buffer"||g=="byteLength"||g=="byteOffset")||i(g,y)))&&x.push(g);return x}return ud=l,ud}var cd,Tx;function ql(){if(Tx)return cd;Tx=1;var e=Object.prototype;function t(n){var r=n&&n.constructor,i=typeof r=="function"&&r.prototype||e;return n===i}return cd=t,cd}var dd,Mx;function NM(){if(Mx)return dd;Mx=1;function e(t,n){return function(r){return t(n(r))}}return dd=e,dd}var fd,jx;function bF(){if(jx)return fd;jx=1;var e=NM(),t=e(Object.keys,Object);return fd=t,fd}var hd,Px;function Hy(){if(Px)return hd;Px=1;var e=ql(),t=bF(),n=Object.prototype,r=n.hasOwnProperty;function i(a){if(!e(a))return t(a);var s=[];for(var o in Object(a))r.call(a,o)&&o!="constructor"&&s.push(o);return s}return hd=i,hd}var pd,Nx;function In(){if(Nx)return pd;Nx=1;var e=_s(),t=Uy();function n(r){return r!=null&&t(r.length)&&!e(r)}return pd=n,pd}var md,Ax;function yr(){if(Ax)return md;Ax=1;var e=PM(),t=Hy(),n=In();function r(i){return n(i)?e(i):t(i)}return md=r,md}var vd,Rx;function xF(){if(Rx)return vd;Rx=1;var e=ks(),t=yr();function n(r,i){return r&&e(i,t(i),r)}return vd=n,vd}var yd,Ix;function SF(){if(Ix)return yd;Ix=1;function e(t){var n=[];if(t!=null)for(var r in Object(t))n.push(r);return n}return yd=e,yd}var gd,Dx;function _F(){if(Dx)return gd;Dx=1;var e=Ft(),t=ql(),n=SF(),r=Object.prototype,i=r.hasOwnProperty;function a(s){if(!e(s))return n(s);var o=t(s),l=[];for(var u in s)u=="constructor"&&(o||!i.call(s,u))||l.push(u);return l}return gd=a,gd}var wd,Ox;function Yr(){if(Ox)return wd;Ox=1;var e=PM(),t=_F(),n=In();function r(i){return n(i)?e(i,!0):t(i)}return wd=r,wd}var bd,Lx;function kF(){if(Lx)return bd;Lx=1;var e=ks(),t=Yr();function n(r,i){return r&&e(i,t(i),r)}return bd=n,bd}var Ma={exports:{}};Ma.exports;var qx;function AM(){return qx||(qx=1,function(e,t){var n=Xt(),r=t&&!t.nodeType&&t,i=r&&!0&&e&&!e.nodeType&&e,a=i&&i.exports===r,s=a?n.Buffer:void 0,o=s?s.allocUnsafe:void 0;function l(u,c){if(c)return u.slice();var d=u.length,f=o?o(d):new u.constructor(d);return u.copy(f),f}e.exports=l}(Ma,Ma.exports)),Ma.exports}var xd,Fx;function RM(){if(Fx)return xd;Fx=1;function e(t,n){var r=-1,i=t.length;for(n||(n=Array(i));++r<i;)n[r]=t[r];return n}return xd=e,xd}var Sd,Vx;function IM(){if(Vx)return Sd;Vx=1;function e(t,n){for(var r=-1,i=t==null?0:t.length,a=0,s=[];++r<i;){var o=t[r];n(o,r,t)&&(s[a++]=o)}return s}return Sd=e,Sd}var _d,$x;function DM(){if($x)return _d;$x=1;function e(){return[]}return _d=e,_d}var kd,Bx;function Wy(){if(Bx)return kd;Bx=1;var e=IM(),t=DM(),n=Object.prototype,r=n.propertyIsEnumerable,i=Object.getOwnPropertySymbols,a=i?function(s){return s==null?[]:(s=Object(s),e(i(s),function(o){return r.call(s,o)}))}:t;return kd=a,kd}var Ed,zx;function EF(){if(zx)return Ed;zx=1;var e=ks(),t=Wy();function n(r,i){return e(r,t(r),i)}return Ed=n,Ed}var Cd,Ux;function Ky(){if(Ux)return Cd;Ux=1;function e(t,n){for(var r=-1,i=n.length,a=t.length;++r<i;)t[a+r]=n[r];return t}return Cd=e,Cd}var Td,Gx;function Fl(){if(Gx)return Td;Gx=1;var e=NM(),t=e(Object.getPrototypeOf,Object);return Td=t,Td}var Md,Hx;function OM(){if(Hx)return Md;Hx=1;var e=Ky(),t=Fl(),n=Wy(),r=DM(),i=Object.getOwnPropertySymbols,a=i?function(s){for(var o=[];s;)e(o,n(s)),s=t(s);return o}:r;return Md=a,Md}var jd,Wx;function CF(){if(Wx)return jd;Wx=1;var e=ks(),t=OM();function n(r,i){return e(r,t(r),i)}return jd=n,jd}var Pd,Kx;function LM(){if(Kx)return Pd;Kx=1;var e=Ky(),t=$e();function n(r,i,a){var s=i(r);return t(r)?s:e(s,a(r))}return Pd=n,Pd}var Nd,Yx;function qM(){if(Yx)return Nd;Yx=1;var e=LM(),t=Wy(),n=yr();function r(i){return e(i,n,t)}return Nd=r,Nd}var Ad,Qx;function TF(){if(Qx)return Ad;Qx=1;var e=LM(),t=OM(),n=Yr();function r(i){return e(i,n,t)}return Ad=r,Ad}var Rd,Xx;function MF(){if(Xx)return Rd;Xx=1;var e=Kr(),t=Xt(),n=e(t,"DataView");return Rd=n,Rd}var Id,Jx;function jF(){if(Jx)return Id;Jx=1;var e=Kr(),t=Xt(),n=e(t,"Promise");return Id=n,Id}var Dd,Zx;function FM(){if(Zx)return Dd;Zx=1;var e=Kr(),t=Xt(),n=e(t,"Set");return Dd=n,Dd}var Od,e1;function PF(){if(e1)return Od;e1=1;var e=Kr(),t=Xt(),n=e(t,"WeakMap");return Od=n,Od}var Ld,t1;function Zi(){if(t1)return Ld;t1=1;var e=MF(),t=$y(),n=jF(),r=FM(),i=PF(),a=Wr(),s=MM(),o="[object Map]",l="[object Object]",u="[object Promise]",c="[object Set]",d="[object WeakMap]",f="[object DataView]",m=s(e),v=s(t),p=s(n),x=s(r),y=s(i),g=a;return(e&&g(new e(new ArrayBuffer(1)))!=f||t&&g(new t)!=o||n&&g(n.resolve())!=u||r&&g(new r)!=c||i&&g(new i)!=d)&&(g=function(b){var k=a(b),_=k==l?b.constructor:void 0,C=_?s(_):"";if(C)switch(C){case m:return f;case v:return o;case p:return u;case x:return c;case y:return d}return k}),Ld=g,Ld}var qd,n1;function NF(){if(n1)return qd;n1=1;var e=Object.prototype,t=e.hasOwnProperty;function n(r){var i=r.length,a=new r.constructor(i);return i&&typeof r[0]=="string"&&t.call(r,"index")&&(a.index=r.index,a.input=r.input),a}return qd=n,qd}var Fd,r1;function VM(){if(r1)return Fd;r1=1;var e=Xt(),t=e.Uint8Array;return Fd=t,Fd}var Vd,i1;function Yy(){if(i1)return Vd;i1=1;var e=VM();function t(n){var r=new n.constructor(n.byteLength);return new e(r).set(new e(n)),r}return Vd=t,Vd}var $d,a1;function AF(){if(a1)return $d;a1=1;var e=Yy();function t(n,r){var i=r?e(n.buffer):n.buffer;return new n.constructor(i,n.byteOffset,n.byteLength)}return $d=t,$d}var Bd,s1;function RF(){if(s1)return Bd;s1=1;var e=/\w*$/;function t(n){var r=new n.constructor(n.source,e.exec(n));return r.lastIndex=n.lastIndex,r}return Bd=t,Bd}var zd,o1;function IF(){if(o1)return zd;o1=1;var e=Xi(),t=e?e.prototype:void 0,n=t?t.valueOf:void 0;function r(i){return n?Object(n.call(i)):{}}return zd=r,zd}var Ud,l1;function $M(){if(l1)return Ud;l1=1;var e=Yy();function t(n,r){var i=r?e(n.buffer):n.buffer;return new n.constructor(i,n.byteOffset,n.length)}return Ud=t,Ud}var Gd,u1;function DF(){if(u1)return Gd;u1=1;var e=Yy(),t=AF(),n=RF(),r=IF(),i=$M(),a="[object Boolean]",s="[object Date]",o="[object Map]",l="[object Number]",u="[object RegExp]",c="[object Set]",d="[object String]",f="[object Symbol]",m="[object ArrayBuffer]",v="[object DataView]",p="[object Float32Array]",x="[object Float64Array]",y="[object Int8Array]",g="[object Int16Array]",b="[object Int32Array]",k="[object Uint8Array]",_="[object Uint8ClampedArray]",C="[object Uint16Array]",M="[object Uint32Array]";function T(j,N,A){var I=j.constructor;switch(N){case m:return e(j);case a:case s:return new I(+j);case v:return t(j,A);case p:case x:case y:case g:case b:case k:case _:case C:case M:return i(j,A);case o:return new I;case l:case d:return new I(j);case u:return n(j);case c:return new I;case f:return r(j)}}return Gd=T,Gd}var Hd,c1;function BM(){if(c1)return Hd;c1=1;var e=Ft(),t=Object.create,n=function(){function r(){}return function(i){if(!e(i))return{};if(t)return t(i);r.prototype=i;var a=new r;return r.prototype=void 0,a}}();return Hd=n,Hd}var Wd,d1;function zM(){if(d1)return Wd;d1=1;var e=BM(),t=Fl(),n=ql();function r(i){return typeof i.constructor=="function"&&!n(i)?e(t(i)):{}}return Wd=r,Wd}var Kd,f1;function OF(){if(f1)return Kd;f1=1;var e=Zi(),t=dn(),n="[object Map]";function r(i){return t(i)&&e(i)==n}return Kd=r,Kd}var Yd,h1;function LF(){if(h1)return Yd;h1=1;var e=OF(),t=Ll(),n=Gy(),r=n&&n.isMap,i=r?t(r):e;return Yd=i,Yd}var Qd,p1;function qF(){if(p1)return Qd;p1=1;var e=Zi(),t=dn(),n="[object Set]";function r(i){return t(i)&&e(i)==n}return Qd=r,Qd}var Xd,m1;function FF(){if(m1)return Xd;m1=1;var e=qF(),t=Ll(),n=Gy(),r=n&&n.isSet,i=r?t(r):e;return Xd=i,Xd}var Jd,v1;function UM(){if(v1)return Jd;v1=1;var e=Rl(),t=zy(),n=Dl(),r=xF(),i=kF(),a=AM(),s=RM(),o=EF(),l=CF(),u=qM(),c=TF(),d=Zi(),f=NF(),m=DF(),v=zM(),p=$e(),x=Ji(),y=LF(),g=Ft(),b=FF(),k=yr(),_=Yr(),C=1,M=2,T=4,j="[object Arguments]",N="[object Array]",A="[object Boolean]",I="[object Date]",L="[object Error]",K="[object Function]",V="[object GeneratorFunction]",le="[object Map]",ie="[object Number]",R="[object Object]",q="[object RegExp]",G="[object Set]",z="[object String]",ae="[object Symbol]",Pe="[object WeakMap]",oe="[object ArrayBuffer]",ce="[object DataView]",$="[object Float32Array]",de="[object Float64Array]",Mt="[object Int8Array]",fn="[object Int16Array]",Zt="[object Int32Array]",gr="[object Uint8Array]",Jr="[object Uint8ClampedArray]",F="[object Uint16Array]",te="[object Uint32Array]",Q={};Q[j]=Q[N]=Q[oe]=Q[ce]=Q[A]=Q[I]=Q[$]=Q[de]=Q[Mt]=Q[fn]=Q[Zt]=Q[le]=Q[ie]=Q[R]=Q[q]=Q[G]=Q[z]=Q[ae]=Q[gr]=Q[Jr]=Q[F]=Q[te]=!0,Q[L]=Q[K]=Q[Pe]=!1;function qe(ne,Fe,On,Kl,$t,Ge){var me,Ln=Fe&C,qn=Fe&M,Yl=Fe&T;if(On&&(me=$t?On(ne,Kl,$t,Ge):On(ne)),me!==void 0)return me;if(!g(ne))return ne;var Zr=p(ne);if(Zr){if(me=f(ne),!Ln)return s(ne,me)}else{var Ze=d(ne),Ms=Ze==K||Ze==V;if(x(ne))return a(ne,Ln);if(Ze==R||Ze==j||Ms&&!$t){if(me=qn||Ms?{}:v(ne),!Ln)return qn?l(ne,i(me,ne)):o(ne,r(me,ne))}else{if(!Q[Ze])return $t?ne:{};me=m(ne,Ze,Ln)}}Ge||(Ge=new e);var ei=Ge.get(ne);if(ei)return ei;Ge.set(ne,me),b(ne)?ne.forEach(function(en){me.add(qe(en,Fe,On,en,ne,Ge))}):y(ne)&&ne.forEach(function(en,Bt){me.set(Bt,qe(en,Fe,On,Bt,ne,Ge))});var ta=Yl?qn?c:u:qn?_:k,wr=Zr?void 0:ta(ne);return t(wr||ne,function(en,Bt){wr&&(Bt=en,en=ne[Bt]),n(me,Bt,qe(en,Fe,On,Bt,ne,Ge))}),me}return Jd=qe,Jd}var Zd,y1;function VF(){if(y1)return Zd;y1=1;var e=UM(),t=4;function n(r){return e(r,t)}return Zd=n,Zd}var ef,g1;function Qy(){if(g1)return ef;g1=1;function e(t){return function(){return t}}return ef=e,ef}var tf,w1;function $F(){if(w1)return tf;w1=1;function e(t){return function(n,r,i){for(var a=-1,s=Object(n),o=i(n),l=o.length;l--;){var u=o[t?l:++a];if(r(s[u],u,s)===!1)break}return n}}return tf=e,tf}var nf,b1;function Xy(){if(b1)return nf;b1=1;var e=$F(),t=e();return nf=t,nf}var rf,x1;function Jy(){if(x1)return rf;x1=1;var e=Xy(),t=yr();function n(r,i){return r&&e(r,i,t)}return rf=n,rf}var af,S1;function BF(){if(S1)return af;S1=1;var e=In();function t(n,r){return function(i,a){if(i==null)return i;if(!e(i))return n(i,a);for(var s=i.length,o=r?s:-1,l=Object(i);(r?o--:++o<s)&&a(l[o],o,l)!==!1;);return i}}return af=t,af}var sf,_1;function Vl(){if(_1)return sf;_1=1;var e=Jy(),t=BF(),n=t(e);return sf=n,sf}var of,k1;function Qr(){if(k1)return of;k1=1;function e(t){return t}return of=e,of}var lf,E1;function GM(){if(E1)return lf;E1=1;var e=Qr();function t(n){return typeof n=="function"?n:e}return lf=t,lf}var uf,C1;function HM(){if(C1)return uf;C1=1;var e=zy(),t=Vl(),n=GM(),r=$e();function i(a,s){var o=r(a)?e:t;return o(a,n(s))}return uf=i,uf}var cf,T1;function WM(){return T1||(T1=1,cf=HM()),cf}var df,M1;function zF(){if(M1)return df;M1=1;var e=Vl();function t(n,r){var i=[];return e(n,function(a,s,o){r(a,s,o)&&i.push(a)}),i}return df=t,df}var ff,j1;function UF(){if(j1)return ff;j1=1;var e="__lodash_hash_undefined__";function t(n){return this.__data__.set(n,e),this}return ff=t,ff}var hf,P1;function GF(){if(P1)return hf;P1=1;function e(t){return this.__data__.has(t)}return hf=e,hf}var pf,N1;function KM(){if(N1)return pf;N1=1;var e=By(),t=UF(),n=GF();function r(i){var a=-1,s=i==null?0:i.length;for(this.__data__=new e;++a<s;)this.add(i[a])}return r.prototype.add=r.prototype.push=t,r.prototype.has=n,pf=r,pf}var mf,A1;function HF(){if(A1)return mf;A1=1;function e(t,n){for(var r=-1,i=t==null?0:t.length;++r<i;)if(n(t[r],r,t))return!0;return!1}return mf=e,mf}var vf,R1;function YM(){if(R1)return vf;R1=1;function e(t,n){return t.has(n)}return vf=e,vf}var yf,I1;function QM(){if(I1)return yf;I1=1;var e=KM(),t=HF(),n=YM(),r=1,i=2;function a(s,o,l,u,c,d){var f=l&r,m=s.length,v=o.length;if(m!=v&&!(f&&v>m))return!1;var p=d.get(s),x=d.get(o);if(p&&x)return p==o&&x==s;var y=-1,g=!0,b=l&i?new e:void 0;for(d.set(s,o),d.set(o,s);++y<m;){var k=s[y],_=o[y];if(u)var C=f?u(_,k,y,o,s,d):u(k,_,y,s,o,d);if(C!==void 0){if(C)continue;g=!1;break}if(b){if(!t(o,function(M,T){if(!n(b,T)&&(k===M||c(k,M,l,u,d)))return b.push(T)})){g=!1;break}}else if(!(k===_||c(k,_,l,u,d))){g=!1;break}}return d.delete(s),d.delete(o),g}return yf=a,yf}var gf,D1;function WF(){if(D1)return gf;D1=1;function e(t){var n=-1,r=Array(t.size);return t.forEach(function(i,a){r[++n]=[a,i]}),r}return gf=e,gf}var wf,O1;function Zy(){if(O1)return wf;O1=1;function e(t){var n=-1,r=Array(t.size);return t.forEach(function(i){r[++n]=i}),r}return wf=e,wf}var bf,L1;function KF(){if(L1)return bf;L1=1;var e=Xi(),t=VM(),n=Qi(),r=QM(),i=WF(),a=Zy(),s=1,o=2,l="[object Boolean]",u="[object Date]",c="[object Error]",d="[object Map]",f="[object Number]",m="[object RegExp]",v="[object Set]",p="[object String]",x="[object Symbol]",y="[object ArrayBuffer]",g="[object DataView]",b=e?e.prototype:void 0,k=b?b.valueOf:void 0;function _(C,M,T,j,N,A,I){switch(T){case g:if(C.byteLength!=M.byteLength||C.byteOffset!=M.byteOffset)return!1;C=C.buffer,M=M.buffer;case y:return!(C.byteLength!=M.byteLength||!A(new t(C),new t(M)));case l:case u:case f:return n(+C,+M);case c:return C.name==M.name&&C.message==M.message;case m:case p:return C==M+"";case d:var L=i;case v:var K=j&s;if(L||(L=a),C.size!=M.size&&!K)return!1;var V=I.get(C);if(V)return V==M;j|=o,I.set(C,M);var le=r(L(C),L(M),j,N,A,I);return I.delete(C),le;case x:if(k)return k.call(C)==k.call(M)}return!1}return bf=_,bf}var xf,q1;function YF(){if(q1)return xf;q1=1;var e=qM(),t=1,n=Object.prototype,r=n.hasOwnProperty;function i(a,s,o,l,u,c){var d=o&t,f=e(a),m=f.length,v=e(s),p=v.length;if(m!=p&&!d)return!1;for(var x=m;x--;){var y=f[x];if(!(d?y in s:r.call(s,y)))return!1}var g=c.get(a),b=c.get(s);if(g&&b)return g==s&&b==a;var k=!0;c.set(a,s),c.set(s,a);for(var _=d;++x<m;){y=f[x];var C=a[y],M=s[y];if(l)var T=d?l(M,C,y,s,a,c):l(C,M,y,a,s,c);if(!(T===void 0?C===M||u(C,M,o,l,c):T)){k=!1;break}_||(_=y=="constructor")}if(k&&!_){var j=a.constructor,N=s.constructor;j!=N&&"constructor"in a&&"constructor"in s&&!(typeof j=="function"&&j instanceof j&&typeof N=="function"&&N instanceof N)&&(k=!1)}return c.delete(a),c.delete(s),k}return xf=i,xf}var Sf,F1;function QF(){if(F1)return Sf;F1=1;var e=Rl(),t=QM(),n=KF(),r=YF(),i=Zi(),a=$e(),s=Ji(),o=Cs(),l=1,u="[object Arguments]",c="[object Array]",d="[object Object]",f=Object.prototype,m=f.hasOwnProperty;function v(p,x,y,g,b,k){var _=a(p),C=a(x),M=_?c:i(p),T=C?c:i(x);M=M==u?d:M,T=T==u?d:T;var j=M==d,N=T==d,A=M==T;if(A&&s(p)){if(!s(x))return!1;_=!0,j=!1}if(A&&!j)return k||(k=new e),_||o(p)?t(p,x,y,g,b,k):n(p,x,M,y,g,b,k);if(!(y&l)){var I=j&&m.call(p,"__wrapped__"),L=N&&m.call(x,"__wrapped__");if(I||L){var K=I?p.value():p,V=L?x.value():x;return k||(k=new e),b(K,V,y,g,k)}}return A?(k||(k=new e),r(p,x,y,g,b,k)):!1}return Sf=v,Sf}var _f,V1;function XM(){if(V1)return _f;V1=1;var e=QF(),t=dn();function n(r,i,a,s,o){return r===i?!0:r==null||i==null||!t(r)&&!t(i)?r!==r&&i!==i:e(r,i,a,s,n,o)}return _f=n,_f}var kf,$1;function XF(){if($1)return kf;$1=1;var e=Rl(),t=XM(),n=1,r=2;function i(a,s,o,l){var u=o.length,c=u,d=!l;if(a==null)return!c;for(a=Object(a);u--;){var f=o[u];if(d&&f[2]?f[1]!==a[f[0]]:!(f[0]in a))return!1}for(;++u<c;){f=o[u];var m=f[0],v=a[m],p=f[1];if(d&&f[2]){if(v===void 0&&!(m in a))return!1}else{var x=new e;if(l)var y=l(v,p,m,a,s,x);if(!(y===void 0?t(p,v,n|r,l,x):y))return!1}}return!0}return kf=i,kf}var Ef,B1;function JM(){if(B1)return Ef;B1=1;var e=Ft();function t(n){return n===n&&!e(n)}return Ef=t,Ef}var Cf,z1;function JF(){if(z1)return Cf;z1=1;var e=JM(),t=yr();function n(r){for(var i=t(r),a=i.length;a--;){var s=i[a],o=r[s];i[a]=[s,o,e(o)]}return i}return Cf=n,Cf}var Tf,U1;function ZM(){if(U1)return Tf;U1=1;function e(t,n){return function(r){return r==null?!1:r[t]===n&&(n!==void 0||t in Object(r))}}return Tf=e,Tf}var Mf,G1;function ZF(){if(G1)return Mf;G1=1;var e=XF(),t=JF(),n=ZM();function r(i){var a=t(i);return a.length==1&&a[0][2]?n(a[0][0],a[0][1]):function(s){return s===i||e(s,i,a)}}return Mf=r,Mf}var jf,H1;function ea(){if(H1)return jf;H1=1;var e=Wr(),t=dn(),n="[object Symbol]";function r(i){return typeof i=="symbol"||t(i)&&e(i)==n}return jf=r,jf}var Pf,W1;function eg(){if(W1)return Pf;W1=1;var e=$e(),t=ea(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function i(a,s){if(e(a))return!1;var o=typeof a;return o=="number"||o=="symbol"||o=="boolean"||a==null||t(a)?!0:r.test(a)||!n.test(a)||s!=null&&a in Object(s)}return Pf=i,Pf}var Nf,K1;function eV(){if(K1)return Nf;K1=1;var e=By(),t="Expected a function";function n(r,i){if(typeof r!="function"||i!=null&&typeof i!="function")throw new TypeError(t);var a=function(){var s=arguments,o=i?i.apply(this,s):s[0],l=a.cache;if(l.has(o))return l.get(o);var u=r.apply(this,s);return a.cache=l.set(o,u)||l,u};return a.cache=new(n.Cache||e),a}return n.Cache=e,Nf=n,Nf}var Af,Y1;function tV(){if(Y1)return Af;Y1=1;var e=eV(),t=500;function n(r){var i=e(r,function(s){return a.size===t&&a.clear(),s}),a=i.cache;return i}return Af=n,Af}var Rf,Q1;function nV(){if(Q1)return Rf;Q1=1;var e=tV(),t=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,n=/\\(\\)?/g,r=e(function(i){var a=[];return i.charCodeAt(0)===46&&a.push(""),i.replace(t,function(s,o,l,u){a.push(l?u.replace(n,"$1"):o||s)}),a});return Rf=r,Rf}var If,X1;function $l(){if(X1)return If;X1=1;function e(t,n){for(var r=-1,i=t==null?0:t.length,a=Array(i);++r<i;)a[r]=n(t[r],r,t);return a}return If=e,If}var Df,J1;function rV(){if(J1)return Df;J1=1;var e=Xi(),t=$l(),n=$e(),r=ea(),i=e?e.prototype:void 0,a=i?i.toString:void 0;function s(o){if(typeof o=="string")return o;if(n(o))return t(o,s)+"";if(r(o))return a?a.call(o):"";var l=o+"";return l=="0"&&1/o==-1/0?"-0":l}return Df=s,Df}var Of,Z1;function ej(){if(Z1)return Of;Z1=1;var e=rV();function t(n){return n==null?"":e(n)}return Of=t,Of}var Lf,eS;function Bl(){if(eS)return Lf;eS=1;var e=$e(),t=eg(),n=nV(),r=ej();function i(a,s){return e(a)?a:t(a,s)?[a]:n(r(a))}return Lf=i,Lf}var qf,tS;function Ts(){if(tS)return qf;tS=1;var e=ea();function t(n){if(typeof n=="string"||e(n))return n;var r=n+"";return r=="0"&&1/n==-1/0?"-0":r}return qf=t,qf}var Ff,nS;function zl(){if(nS)return Ff;nS=1;var e=Bl(),t=Ts();function n(r,i){i=e(i,r);for(var a=0,s=i.length;r!=null&&a<s;)r=r[t(i[a++])];return a&&a==s?r:void 0}return Ff=n,Ff}var Vf,rS;function iV(){if(rS)return Vf;rS=1;var e=zl();function t(n,r,i){var a=n==null?void 0:e(n,r);return a===void 0?i:a}return Vf=t,Vf}var $f,iS;function aV(){if(iS)return $f;iS=1;function e(t,n){return t!=null&&n in Object(t)}return $f=e,$f}var Bf,aS;function tj(){if(aS)return Bf;aS=1;var e=Bl(),t=Es(),n=$e(),r=Ol(),i=Uy(),a=Ts();function s(o,l,u){l=e(l,o);for(var c=-1,d=l.length,f=!1;++c<d;){var m=a(l[c]);if(!(f=o!=null&&u(o,m)))break;o=o[m]}return f||++c!=d?f:(d=o==null?0:o.length,!!d&&i(d)&&r(m,d)&&(n(o)||t(o)))}return Bf=s,Bf}var zf,sS;function nj(){if(sS)return zf;sS=1;var e=aV(),t=tj();function n(r,i){return r!=null&&t(r,i,e)}return zf=n,zf}var Uf,oS;function sV(){if(oS)return Uf;oS=1;var e=XM(),t=iV(),n=nj(),r=eg(),i=JM(),a=ZM(),s=Ts(),o=1,l=2;function u(c,d){return r(c)&&i(d)?a(s(c),d):function(f){var m=t(f,c);return m===void 0&&m===d?n(f,c):e(d,m,o|l)}}return Uf=u,Uf}var Gf,lS;function rj(){if(lS)return Gf;lS=1;function e(t){return function(n){return n==null?void 0:n[t]}}return Gf=e,Gf}var Hf,uS;function oV(){if(uS)return Hf;uS=1;var e=zl();function t(n){return function(r){return e(r,n)}}return Hf=t,Hf}var Wf,cS;function lV(){if(cS)return Wf;cS=1;var e=rj(),t=oV(),n=eg(),r=Ts();function i(a){return n(a)?e(r(a)):t(a)}return Wf=i,Wf}var Kf,dS;function Dn(){if(dS)return Kf;dS=1;var e=ZF(),t=sV(),n=Qr(),r=$e(),i=lV();function a(s){return typeof s=="function"?s:s==null?n:typeof s=="object"?r(s)?t(s[0],s[1]):e(s):i(s)}return Kf=a,Kf}var Yf,fS;function ij(){if(fS)return Yf;fS=1;var e=IM(),t=zF(),n=Dn(),r=$e();function i(a,s){var o=r(a)?e:t;return o(a,n(s,3))}return Yf=i,Yf}var Qf,hS;function uV(){if(hS)return Qf;hS=1;var e=Object.prototype,t=e.hasOwnProperty;function n(r,i){return r!=null&&t.call(r,i)}return Qf=n,Qf}var Xf,pS;function aj(){if(pS)return Xf;pS=1;var e=uV(),t=tj();function n(r,i){return r!=null&&t(r,i,e)}return Xf=n,Xf}var Jf,mS;function cV(){if(mS)return Jf;mS=1;var e=Hy(),t=Zi(),n=Es(),r=$e(),i=In(),a=Ji(),s=ql(),o=Cs(),l="[object Map]",u="[object Set]",c=Object.prototype,d=c.hasOwnProperty;function f(m){if(m==null)return!0;if(i(m)&&(r(m)||typeof m=="string"||typeof m.splice=="function"||a(m)||o(m)||n(m)))return!m.length;var v=t(m);if(v==l||v==u)return!m.size;if(s(m))return!e(m).length;for(var p in m)if(d.call(m,p))return!1;return!0}return Jf=f,Jf}var Zf,vS;function sj(){if(vS)return Zf;vS=1;function e(t){return t===void 0}return Zf=e,Zf}var eh,yS;function oj(){if(yS)return eh;yS=1;var e=Vl(),t=In();function n(r,i){var a=-1,s=t(r)?Array(r.length):[];return e(r,function(o,l,u){s[++a]=i(o,l,u)}),s}return eh=n,eh}var th,gS;function lj(){if(gS)return th;gS=1;var e=$l(),t=Dn(),n=oj(),r=$e();function i(a,s){var o=r(a)?e:n;return o(a,t(s,3))}return th=i,th}var nh,wS;function dV(){if(wS)return nh;wS=1;function e(t,n,r,i){var a=-1,s=t==null?0:t.length;for(i&&s&&(r=t[++a]);++a<s;)r=n(r,t[a],a,t);return r}return nh=e,nh}var rh,bS;function fV(){if(bS)return rh;bS=1;function e(t,n,r,i,a){return a(t,function(s,o,l){r=i?(i=!1,s):n(r,s,o,l)}),r}return rh=e,rh}var ih,xS;function uj(){if(xS)return ih;xS=1;var e=dV(),t=Vl(),n=Dn(),r=fV(),i=$e();function a(s,o,l){var u=i(s)?e:r,c=arguments.length<3;return u(s,n(o,4),l,c,t)}return ih=a,ih}var ah,SS;function hV(){if(SS)return ah;SS=1;var e=Wr(),t=$e(),n=dn(),r="[object String]";function i(a){return typeof a=="string"||!t(a)&&n(a)&&e(a)==r}return ah=i,ah}var sh,_S;function pV(){if(_S)return sh;_S=1;var e=rj(),t=e("length");return sh=t,sh}var oh,kS;function mV(){if(kS)return oh;kS=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",i=t+n+r,a="\\ufe0e\\ufe0f",s="\\u200d",o=RegExp("["+s+e+i+a+"]");function l(u){return o.test(u)}return oh=l,oh}var lh,ES;function vV(){if(ES)return lh;ES=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",i=t+n+r,a="\\ufe0e\\ufe0f",s="["+e+"]",o="["+i+"]",l="\\ud83c[\\udffb-\\udfff]",u="(?:"+o+"|"+l+")",c="[^"+e+"]",d="(?:\\ud83c[\\udde6-\\uddff]){2}",f="[\\ud800-\\udbff][\\udc00-\\udfff]",m="\\u200d",v=u+"?",p="["+a+"]?",x="(?:"+m+"(?:"+[c,d,f].join("|")+")"+p+v+")*",y=p+v+x,g="(?:"+[c+o+"?",o,d,f,s].join("|")+")",b=RegExp(l+"(?="+l+")|"+g+y,"g");function k(_){for(var C=b.lastIndex=0;b.test(_);)++C;return C}return lh=k,lh}var uh,CS;function yV(){if(CS)return uh;CS=1;var e=pV(),t=mV(),n=vV();function r(i){return t(i)?n(i):e(i)}return uh=r,uh}var ch,TS;function gV(){if(TS)return ch;TS=1;var e=Hy(),t=Zi(),n=In(),r=hV(),i=yV(),a="[object Map]",s="[object Set]";function o(l){if(l==null)return 0;if(n(l))return r(l)?i(l):l.length;var u=t(l);return u==a||u==s?l.size:e(l).length}return ch=o,ch}var dh,MS;function wV(){if(MS)return dh;MS=1;var e=zy(),t=BM(),n=Jy(),r=Dn(),i=Fl(),a=$e(),s=Ji(),o=_s(),l=Ft(),u=Cs();function c(d,f,m){var v=a(d),p=v||s(d)||u(d);if(f=r(f,4),m==null){var x=d&&d.constructor;p?m=v?new x:[]:l(d)?m=o(x)?t(i(d)):{}:m={}}return(p?e:n)(d,function(y,g,b){return f(m,y,g,b)}),m}return dh=c,dh}var fh,jS;function bV(){if(jS)return fh;jS=1;var e=Xi(),t=Es(),n=$e(),r=e?e.isConcatSpreadable:void 0;function i(a){return n(a)||t(a)||!!(r&&a&&a[r])}return fh=i,fh}var hh,PS;function tg(){if(PS)return hh;PS=1;var e=Ky(),t=bV();function n(r,i,a,s,o){var l=-1,u=r.length;for(a||(a=t),o||(o=[]);++l<u;){var c=r[l];i>0&&a(c)?i>1?n(c,i-1,a,s,o):e(o,c):s||(o[o.length]=c)}return o}return hh=n,hh}var ph,NS;function xV(){if(NS)return ph;NS=1;function e(t,n,r){switch(r.length){case 0:return t.call(n);case 1:return t.call(n,r[0]);case 2:return t.call(n,r[0],r[1]);case 3:return t.call(n,r[0],r[1],r[2])}return t.apply(n,r)}return ph=e,ph}var mh,AS;function cj(){if(AS)return mh;AS=1;var e=xV(),t=Math.max;function n(r,i,a){return i=t(i===void 0?r.length-1:i,0),function(){for(var s=arguments,o=-1,l=t(s.length-i,0),u=Array(l);++o<l;)u[o]=s[i+o];o=-1;for(var c=Array(i+1);++o<i;)c[o]=s[o];return c[i]=a(u),e(r,this,c)}}return mh=n,mh}var vh,RS;function SV(){if(RS)return vh;RS=1;var e=Qy(),t=jM(),n=Qr(),r=t?function(i,a){return t(i,"toString",{configurable:!0,enumerable:!1,value:e(a),writable:!0})}:n;return vh=r,vh}var yh,IS;function _V(){if(IS)return yh;IS=1;var e=800,t=16,n=Date.now;function r(i){var a=0,s=0;return function(){var o=n(),l=t-(o-s);if(s=o,l>0){if(++a>=e)return arguments[0]}else a=0;return i.apply(void 0,arguments)}}return yh=r,yh}var gh,DS;function dj(){if(DS)return gh;DS=1;var e=SV(),t=_V(),n=t(e);return gh=n,gh}var wh,OS;function Ul(){if(OS)return wh;OS=1;var e=Qr(),t=cj(),n=dj();function r(i,a){return n(t(i,a,e),i+"")}return wh=r,wh}var bh,LS;function fj(){if(LS)return bh;LS=1;function e(t,n,r,i){for(var a=t.length,s=r+(i?1:-1);i?s--:++s<a;)if(n(t[s],s,t))return s;return-1}return bh=e,bh}var xh,qS;function kV(){if(qS)return xh;qS=1;function e(t){return t!==t}return xh=e,xh}var Sh,FS;function EV(){if(FS)return Sh;FS=1;function e(t,n,r){for(var i=r-1,a=t.length;++i<a;)if(t[i]===n)return i;return-1}return Sh=e,Sh}var _h,VS;function CV(){if(VS)return _h;VS=1;var e=fj(),t=kV(),n=EV();function r(i,a,s){return a===a?n(i,a,s):e(i,t,s)}return _h=r,_h}var kh,$S;function TV(){if($S)return kh;$S=1;var e=CV();function t(n,r){var i=n==null?0:n.length;return!!i&&e(n,r,0)>-1}return kh=t,kh}var Eh,BS;function MV(){if(BS)return Eh;BS=1;function e(t,n,r){for(var i=-1,a=t==null?0:t.length;++i<a;)if(r(n,t[i]))return!0;return!1}return Eh=e,Eh}var Ch,zS;function jV(){if(zS)return Ch;zS=1;function e(){}return Ch=e,Ch}var Th,US;function PV(){if(US)return Th;US=1;var e=FM(),t=jV(),n=Zy(),r=1/0,i=e&&1/n(new e([,-0]))[1]==r?function(a){return new e(a)}:t;return Th=i,Th}var Mh,GS;function NV(){if(GS)return Mh;GS=1;var e=KM(),t=TV(),n=MV(),r=YM(),i=PV(),a=Zy(),s=200;function o(l,u,c){var d=-1,f=t,m=l.length,v=!0,p=[],x=p;if(c)v=!1,f=n;else if(m>=s){var y=u?null:i(l);if(y)return a(y);v=!1,f=r,x=new e}else x=u?[]:p;e:for(;++d<m;){var g=l[d],b=u?u(g):g;if(g=c||g!==0?g:0,v&&b===b){for(var k=x.length;k--;)if(x[k]===b)continue e;u&&x.push(b),p.push(g)}else f(x,b,c)||(x!==p&&x.push(b),p.push(g))}return p}return Mh=o,Mh}var jh,HS;function hj(){if(HS)return jh;HS=1;var e=In(),t=dn();function n(r){return t(r)&&e(r)}return jh=n,jh}var Ph,WS;function AV(){if(WS)return Ph;WS=1;var e=tg(),t=Ul(),n=NV(),r=hj(),i=t(function(a){return n(e(a,1,r,!0))});return Ph=i,Ph}var Nh,KS;function RV(){if(KS)return Nh;KS=1;var e=$l();function t(n,r){return e(r,function(i){return n[i]})}return Nh=t,Nh}var Ah,YS;function pj(){if(YS)return Ah;YS=1;var e=RV(),t=yr();function n(r){return r==null?[]:e(r,t(r))}return Ah=n,Ah}var Rh,QS;function Vt(){if(QS)return Rh;QS=1;var e;if(typeof Vy=="function")try{e={clone:VF(),constant:Qy(),each:WM(),filter:ij(),has:aj(),isArray:$e(),isEmpty:cV(),isFunction:_s(),isUndefined:sj(),keys:yr(),map:lj(),reduce:uj(),size:gV(),transform:wV(),union:AV(),values:pj()}}catch{}return e||(e=window._),Rh=e,Rh}var Ih,XS;function ng(){if(XS)return Ih;XS=1;var e=Vt();Ih=i;var t="\0",n="\0",r="";function i(c){this._isDirected=e.has(c,"directed")?c.directed:!0,this._isMultigraph=e.has(c,"multigraph")?c.multigraph:!1,this._isCompound=e.has(c,"compound")?c.compound:!1,this._label=void 0,this._defaultNodeLabelFn=e.constant(void 0),this._defaultEdgeLabelFn=e.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[n]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}i.prototype._nodeCount=0,i.prototype._edgeCount=0,i.prototype.isDirected=function(){return this._isDirected},i.prototype.isMultigraph=function(){return this._isMultigraph},i.prototype.isCompound=function(){return this._isCompound},i.prototype.setGraph=function(c){return this._label=c,this},i.prototype.graph=function(){return this._label},i.prototype.setDefaultNodeLabel=function(c){return e.isFunction(c)||(c=e.constant(c)),this._defaultNodeLabelFn=c,this},i.prototype.nodeCount=function(){return this._nodeCount},i.prototype.nodes=function(){return e.keys(this._nodes)},i.prototype.sources=function(){var c=this;return e.filter(this.nodes(),function(d){return e.isEmpty(c._in[d])})},i.prototype.sinks=function(){var c=this;return e.filter(this.nodes(),function(d){return e.isEmpty(c._out[d])})},i.prototype.setNodes=function(c,d){var f=arguments,m=this;return e.each(c,function(v){f.length>1?m.setNode(v,d):m.setNode(v)}),this},i.prototype.setNode=function(c,d){return e.has(this._nodes,c)?(arguments.length>1&&(this._nodes[c]=d),this):(this._nodes[c]=arguments.length>1?d:this._defaultNodeLabelFn(c),this._isCompound&&(this._parent[c]=n,this._children[c]={},this._children[n][c]=!0),this._in[c]={},this._preds[c]={},this._out[c]={},this._sucs[c]={},++this._nodeCount,this)},i.prototype.node=function(c){return this._nodes[c]},i.prototype.hasNode=function(c){return e.has(this._nodes,c)},i.prototype.removeNode=function(c){var d=this;if(e.has(this._nodes,c)){var f=function(m){d.removeEdge(d._edgeObjs[m])};delete this._nodes[c],this._isCompound&&(this._removeFromParentsChildList(c),delete this._parent[c],e.each(this.children(c),function(m){d.setParent(m)}),delete this._children[c]),e.each(e.keys(this._in[c]),f),delete this._in[c],delete this._preds[c],e.each(e.keys(this._out[c]),f),delete this._out[c],delete this._sucs[c],--this._nodeCount}return this},i.prototype.setParent=function(c,d){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(e.isUndefined(d))d=n;else{d+="";for(var f=d;!e.isUndefined(f);f=this.parent(f))if(f===c)throw new Error("Setting "+d+" as parent of "+c+" would create a cycle");this.setNode(d)}return this.setNode(c),this._removeFromParentsChildList(c),this._parent[c]=d,this._children[d][c]=!0,this},i.prototype._removeFromParentsChildList=function(c){delete this._children[this._parent[c]][c]},i.prototype.parent=function(c){if(this._isCompound){var d=this._parent[c];if(d!==n)return d}},i.prototype.children=function(c){if(e.isUndefined(c)&&(c=n),this._isCompound){var d=this._children[c];if(d)return e.keys(d)}else{if(c===n)return this.nodes();if(this.hasNode(c))return[]}},i.prototype.predecessors=function(c){var d=this._preds[c];if(d)return e.keys(d)},i.prototype.successors=function(c){var d=this._sucs[c];if(d)return e.keys(d)},i.prototype.neighbors=function(c){var d=this.predecessors(c);if(d)return e.union(d,this.successors(c))},i.prototype.isLeaf=function(c){var d;return this.isDirected()?d=this.successors(c):d=this.neighbors(c),d.length===0},i.prototype.filterNodes=function(c){var d=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});d.setGraph(this.graph());var f=this;e.each(this._nodes,function(p,x){c(x)&&d.setNode(x,p)}),e.each(this._edgeObjs,function(p){d.hasNode(p.v)&&d.hasNode(p.w)&&d.setEdge(p,f.edge(p))});var m={};function v(p){var x=f.parent(p);return x===void 0||d.hasNode(x)?(m[p]=x,x):x in m?m[x]:v(x)}return this._isCompound&&e.each(d.nodes(),function(p){d.setParent(p,v(p))}),d},i.prototype.setDefaultEdgeLabel=function(c){return e.isFunction(c)||(c=e.constant(c)),this._defaultEdgeLabelFn=c,this},i.prototype.edgeCount=function(){return this._edgeCount},i.prototype.edges=function(){return e.values(this._edgeObjs)},i.prototype.setPath=function(c,d){var f=this,m=arguments;return e.reduce(c,function(v,p){return m.length>1?f.setEdge(v,p,d):f.setEdge(v,p),p}),this},i.prototype.setEdge=function(){var c,d,f,m,v=!1,p=arguments[0];typeof p=="object"&&p!==null&&"v"in p?(c=p.v,d=p.w,f=p.name,arguments.length===2&&(m=arguments[1],v=!0)):(c=p,d=arguments[1],f=arguments[3],arguments.length>2&&(m=arguments[2],v=!0)),c=""+c,d=""+d,e.isUndefined(f)||(f=""+f);var x=o(this._isDirected,c,d,f);if(e.has(this._edgeLabels,x))return v&&(this._edgeLabels[x]=m),this;if(!e.isUndefined(f)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(c),this.setNode(d),this._edgeLabels[x]=v?m:this._defaultEdgeLabelFn(c,d,f);var y=l(this._isDirected,c,d,f);return c=y.v,d=y.w,Object.freeze(y),this._edgeObjs[x]=y,a(this._preds[d],c),a(this._sucs[c],d),this._in[d][x]=y,this._out[c][x]=y,this._edgeCount++,this},i.prototype.edge=function(c,d,f){var m=arguments.length===1?u(this._isDirected,arguments[0]):o(this._isDirected,c,d,f);return this._edgeLabels[m]},i.prototype.hasEdge=function(c,d,f){var m=arguments.length===1?u(this._isDirected,arguments[0]):o(this._isDirected,c,d,f);return e.has(this._edgeLabels,m)},i.prototype.removeEdge=function(c,d,f){var m=arguments.length===1?u(this._isDirected,arguments[0]):o(this._isDirected,c,d,f),v=this._edgeObjs[m];return v&&(c=v.v,d=v.w,delete this._edgeLabels[m],delete this._edgeObjs[m],s(this._preds[d],c),s(this._sucs[c],d),delete this._in[d][m],delete this._out[c][m],this._edgeCount--),this},i.prototype.inEdges=function(c,d){var f=this._in[c];if(f){var m=e.values(f);return d?e.filter(m,function(v){return v.v===d}):m}},i.prototype.outEdges=function(c,d){var f=this._out[c];if(f){var m=e.values(f);return d?e.filter(m,function(v){return v.w===d}):m}},i.prototype.nodeEdges=function(c,d){var f=this.inEdges(c,d);if(f)return f.concat(this.outEdges(c,d))};function a(c,d){c[d]?c[d]++:c[d]=1}function s(c,d){--c[d]||delete c[d]}function o(c,d,f,m){var v=""+d,p=""+f;if(!c&&v>p){var x=v;v=p,p=x}return v+r+p+r+(e.isUndefined(m)?t:m)}function l(c,d,f,m){var v=""+d,p=""+f;if(!c&&v>p){var x=v;v=p,p=x}var y={v,w:p};return m&&(y.name=m),y}function u(c,d){return o(c,d.v,d.w,d.name)}return Ih}var Dh,JS;function IV(){return JS||(JS=1,Dh="2.1.8"),Dh}var Oh,ZS;function DV(){return ZS||(ZS=1,Oh={Graph:ng(),version:IV()}),Oh}var Lh,e_;function OV(){if(e_)return Lh;e_=1;var e=Vt(),t=ng();Lh={write:n,read:a};function n(s){var o={options:{directed:s.isDirected(),multigraph:s.isMultigraph(),compound:s.isCompound()},nodes:r(s),edges:i(s)};return e.isUndefined(s.graph())||(o.value=e.clone(s.graph())),o}function r(s){return e.map(s.nodes(),function(o){var l=s.node(o),u=s.parent(o),c={v:o};return e.isUndefined(l)||(c.value=l),e.isUndefined(u)||(c.parent=u),c})}function i(s){return e.map(s.edges(),function(o){var l=s.edge(o),u={v:o.v,w:o.w};return e.isUndefined(o.name)||(u.name=o.name),e.isUndefined(l)||(u.value=l),u})}function a(s){var o=new t(s.options).setGraph(s.value);return e.each(s.nodes,function(l){o.setNode(l.v,l.value),l.parent&&o.setParent(l.v,l.parent)}),e.each(s.edges,function(l){o.setEdge({v:l.v,w:l.w,name:l.name},l.value)}),o}return Lh}var qh,t_;function LV(){if(t_)return qh;t_=1;var e=Vt();qh=t;function t(n){var r={},i=[],a;function s(o){e.has(r,o)||(r[o]=!0,a.push(o),e.each(n.successors(o),s),e.each(n.predecessors(o),s))}return e.each(n.nodes(),function(o){a=[],s(o),a.length&&i.push(a)}),i}return qh}var Fh,n_;function mj(){if(n_)return Fh;n_=1;var e=Vt();Fh=t;function t(){this._arr=[],this._keyIndices={}}return t.prototype.size=function(){return this._arr.length},t.prototype.keys=function(){return this._arr.map(function(n){return n.key})},t.prototype.has=function(n){return e.has(this._keyIndices,n)},t.prototype.priority=function(n){var r=this._keyIndices[n];if(r!==void 0)return this._arr[r].priority},t.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key},t.prototype.add=function(n,r){var i=this._keyIndices;if(n=String(n),!e.has(i,n)){var a=this._arr,s=a.length;return i[n]=s,a.push({key:n,priority:r}),this._decrease(s),!0}return!1},t.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var n=this._arr.pop();return delete this._keyIndices[n.key],this._heapify(0),n.key},t.prototype.decrease=function(n,r){var i=this._keyIndices[n];if(r>this._arr[i].priority)throw new Error("New priority is greater than current priority. Key: "+n+" Old: "+this._arr[i].priority+" New: "+r);this._arr[i].priority=r,this._decrease(i)},t.prototype._heapify=function(n){var r=this._arr,i=2*n,a=i+1,s=n;i<r.length&&(s=r[i].priority<r[s].priority?i:s,a<r.length&&(s=r[a].priority<r[s].priority?a:s),s!==n&&(this._swap(n,s),this._heapify(s)))},t.prototype._decrease=function(n){for(var r=this._arr,i=r[n].priority,a;n!==0&&(a=n>>1,!(r[a].priority<i));)this._swap(n,a),n=a},t.prototype._swap=function(n,r){var i=this._arr,a=this._keyIndices,s=i[n],o=i[r];i[n]=o,i[r]=s,a[o.key]=n,a[s.key]=r},Fh}var Vh,r_;function vj(){if(r_)return Vh;r_=1;var e=Vt(),t=mj();Vh=r;var n=e.constant(1);function r(a,s,o,l){return i(a,String(s),o||n,l||function(u){return a.outEdges(u)})}function i(a,s,o,l){var u={},c=new t,d,f,m=function(v){var p=v.v!==d?v.v:v.w,x=u[p],y=o(v),g=f.distance+y;if(y<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+v+" Weight: "+y);g<x.distance&&(x.distance=g,x.predecessor=d,c.decrease(p,g))};for(a.nodes().forEach(function(v){var p=v===s?0:Number.POSITIVE_INFINITY;u[v]={distance:p},c.add(v,p)});c.size()>0&&(d=c.removeMin(),f=u[d],f.distance!==Number.POSITIVE_INFINITY);)l(d).forEach(m);return u}return Vh}var $h,i_;function qV(){if(i_)return $h;i_=1;var e=vj(),t=Vt();$h=n;function n(r,i,a){return t.transform(r.nodes(),function(s,o){s[o]=e(r,o,i,a)},{})}return $h}var Bh,a_;function yj(){if(a_)return Bh;a_=1;var e=Vt();Bh=t;function t(n){var r=0,i=[],a={},s=[];function o(l){var u=a[l]={onStack:!0,lowlink:r,index:r++};if(i.push(l),n.successors(l).forEach(function(f){e.has(a,f)?a[f].onStack&&(u.lowlink=Math.min(u.lowlink,a[f].index)):(o(f),u.lowlink=Math.min(u.lowlink,a[f].lowlink))}),u.lowlink===u.index){var c=[],d;do d=i.pop(),a[d].onStack=!1,c.push(d);while(l!==d);s.push(c)}}return n.nodes().forEach(function(l){e.has(a,l)||o(l)}),s}return Bh}var zh,s_;function FV(){if(s_)return zh;s_=1;var e=Vt(),t=yj();zh=n;function n(r){return e.filter(t(r),function(i){return i.length>1||i.length===1&&r.hasEdge(i[0],i[0])})}return zh}var Uh,o_;function VV(){if(o_)return Uh;o_=1;var e=Vt();Uh=n;var t=e.constant(1);function n(i,a,s){return r(i,a||t,s||function(o){return i.outEdges(o)})}function r(i,a,s){var o={},l=i.nodes();return l.forEach(function(u){o[u]={},o[u][u]={distance:0},l.forEach(function(c){u!==c&&(o[u][c]={distance:Number.POSITIVE_INFINITY})}),s(u).forEach(function(c){var d=c.v===u?c.w:c.v,f=a(c);o[u][d]={distance:f,predecessor:u}})}),l.forEach(function(u){var c=o[u];l.forEach(function(d){var f=o[d];l.forEach(function(m){var v=f[u],p=c[m],x=f[m],y=v.distance+p.distance;y<x.distance&&(x.distance=y,x.predecessor=p.predecessor)})})}),o}return Uh}var Gh,l_;function gj(){if(l_)return Gh;l_=1;var e=Vt();Gh=t,t.CycleException=n;function t(r){var i={},a={},s=[];function o(l){if(e.has(a,l))throw new n;e.has(i,l)||(a[l]=!0,i[l]=!0,e.each(r.predecessors(l),o),delete a[l],s.push(l))}if(e.each(r.sinks(),o),e.size(i)!==r.nodeCount())throw new n;return s}function n(){}return n.prototype=new Error,Gh}var Hh,u_;function $V(){if(u_)return Hh;u_=1;var e=gj();Hh=t;function t(n){try{e(n)}catch(r){if(r instanceof e.CycleException)return!1;throw r}return!0}return Hh}var Wh,c_;function wj(){if(c_)return Wh;c_=1;var e=Vt();Wh=t;function t(r,i,a){e.isArray(i)||(i=[i]);var s=(r.isDirected()?r.successors:r.neighbors).bind(r),o=[],l={};return e.each(i,function(u){if(!r.hasNode(u))throw new Error("Graph does not have node: "+u);n(r,u,a==="post",l,s,o)}),o}function n(r,i,a,s,o,l){e.has(s,i)||(s[i]=!0,a||l.push(i),e.each(o(i),function(u){n(r,u,a,s,o,l)}),a&&l.push(i))}return Wh}var Kh,d_;function BV(){if(d_)return Kh;d_=1;var e=wj();Kh=t;function t(n,r){return e(n,r,"post")}return Kh}var Yh,f_;function zV(){if(f_)return Yh;f_=1;var e=wj();Yh=t;function t(n,r){return e(n,r,"pre")}return Yh}var Qh,h_;function UV(){if(h_)return Qh;h_=1;var e=Vt(),t=ng(),n=mj();Qh=r;function r(i,a){var s=new t,o={},l=new n,u;function c(f){var m=f.v===u?f.w:f.v,v=l.priority(m);if(v!==void 0){var p=a(f);p<v&&(o[m]=u,l.decrease(m,p))}}if(i.nodeCount()===0)return s;e.each(i.nodes(),function(f){l.add(f,Number.POSITIVE_INFINITY),s.setNode(f)}),l.decrease(i.nodes()[0],0);for(var d=!1;l.size()>0;){if(u=l.removeMin(),e.has(o,u))s.setEdge(u,o[u]);else{if(d)throw new Error("Input graph is not connected: "+i);d=!0}i.nodeEdges(u).forEach(c)}return s}return Qh}var Xh,p_;function GV(){return p_||(p_=1,Xh={components:LV(),dijkstra:vj(),dijkstraAll:qV(),findCycles:FV(),floydWarshall:VV(),isAcyclic:$V(),postorder:BV(),preorder:zV(),prim:UV(),tarjan:yj(),topsort:gj()}),Xh}var Jh,m_;function HV(){if(m_)return Jh;m_=1;var e=DV();return Jh={Graph:e.Graph,json:OV(),alg:GV(),version:e.version},Jh}var nl;if(typeof Vy=="function")try{nl=HV()}catch{}nl||(nl=window.graphlib);var Jt=nl,Zh,v_;function WV(){if(v_)return Zh;v_=1;var e=UM(),t=1,n=4;function r(i){return e(i,t|n)}return Zh=r,Zh}var ep,y_;function Gl(){if(y_)return ep;y_=1;var e=Qi(),t=In(),n=Ol(),r=Ft();function i(a,s,o){if(!r(o))return!1;var l=typeof s;return(l=="number"?t(o)&&n(s,o.length):l=="string"&&s in o)?e(o[s],a):!1}return ep=i,ep}var tp,g_;function KV(){if(g_)return tp;g_=1;var e=Ul(),t=Qi(),n=Gl(),r=Yr(),i=Object.prototype,a=i.hasOwnProperty,s=e(function(o,l){o=Object(o);var u=-1,c=l.length,d=c>2?l[2]:void 0;for(d&&n(l[0],l[1],d)&&(c=1);++u<c;)for(var f=l[u],m=r(f),v=-1,p=m.length;++v<p;){var x=m[v],y=o[x];(y===void 0||t(y,i[x])&&!a.call(o,x))&&(o[x]=f[x])}return o});return tp=s,tp}var np,w_;function YV(){if(w_)return np;w_=1;var e=Dn(),t=In(),n=yr();function r(i){return function(a,s,o){var l=Object(a);if(!t(a)){var u=e(s,3);a=n(a),s=function(d){return u(l[d],d,l)}}var c=i(a,s,o);return c>-1?l[u?a[c]:c]:void 0}}return np=r,np}var rp,b_;function QV(){if(b_)return rp;b_=1;var e=/\s/;function t(n){for(var r=n.length;r--&&e.test(n.charAt(r)););return r}return rp=t,rp}var ip,x_;function XV(){if(x_)return ip;x_=1;var e=QV(),t=/^\s+/;function n(r){return r&&r.slice(0,e(r)+1).replace(t,"")}return ip=n,ip}var ap,S_;function JV(){if(S_)return ap;S_=1;var e=XV(),t=Ft(),n=ea(),r=NaN,i=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,s=/^0o[0-7]+$/i,o=parseInt;function l(u){if(typeof u=="number")return u;if(n(u))return r;if(t(u)){var c=typeof u.valueOf=="function"?u.valueOf():u;u=t(c)?c+"":c}if(typeof u!="string")return u===0?u:+u;u=e(u);var d=a.test(u);return d||s.test(u)?o(u.slice(2),d?2:8):i.test(u)?r:+u}return ap=l,ap}var sp,__;function bj(){if(__)return sp;__=1;var e=JV(),t=1/0,n=17976931348623157e292;function r(i){if(!i)return i===0?i:0;if(i=e(i),i===t||i===-t){var a=i<0?-1:1;return a*n}return i===i?i:0}return sp=r,sp}var op,k_;function ZV(){if(k_)return op;k_=1;var e=bj();function t(n){var r=e(n),i=r%1;return r===r?i?r-i:r:0}return op=t,op}var lp,E_;function e3(){if(E_)return lp;E_=1;var e=fj(),t=Dn(),n=ZV(),r=Math.max;function i(a,s,o){var l=a==null?0:a.length;if(!l)return-1;var u=o==null?0:n(o);return u<0&&(u=r(l+u,0)),e(a,t(s,3),u)}return lp=i,lp}var up,C_;function t3(){if(C_)return up;C_=1;var e=YV(),t=e3(),n=e(t);return up=n,up}var cp,T_;function xj(){if(T_)return cp;T_=1;var e=tg();function t(n){var r=n==null?0:n.length;return r?e(n,1):[]}return cp=t,cp}var dp,M_;function n3(){if(M_)return dp;M_=1;var e=Xy(),t=GM(),n=Yr();function r(i,a){return i==null?i:e(i,t(a),n)}return dp=r,dp}var fp,j_;function r3(){if(j_)return fp;j_=1;function e(t){var n=t==null?0:t.length;return n?t[n-1]:void 0}return fp=e,fp}var hp,P_;function i3(){if(P_)return hp;P_=1;var e=Il(),t=Jy(),n=Dn();function r(i,a){var s={};return a=n(a,3),t(i,function(o,l,u){e(s,l,a(o,l,u))}),s}return hp=r,hp}var pp,N_;function rg(){if(N_)return pp;N_=1;var e=ea();function t(n,r,i){for(var a=-1,s=n.length;++a<s;){var o=n[a],l=r(o);if(l!=null&&(u===void 0?l===l&&!e(l):i(l,u)))var u=l,c=o}return c}return pp=t,pp}var mp,A_;function a3(){if(A_)return mp;A_=1;function e(t,n){return t>n}return mp=e,mp}var vp,R_;function s3(){if(R_)return vp;R_=1;var e=rg(),t=a3(),n=Qr();function r(i){return i&&i.length?e(i,n,t):void 0}return vp=r,vp}var yp,I_;function Sj(){if(I_)return yp;I_=1;var e=Il(),t=Qi();function n(r,i,a){(a!==void 0&&!t(r[i],a)||a===void 0&&!(i in r))&&e(r,i,a)}return yp=n,yp}var gp,D_;function o3(){if(D_)return gp;D_=1;var e=Wr(),t=Fl(),n=dn(),r="[object Object]",i=Function.prototype,a=Object.prototype,s=i.toString,o=a.hasOwnProperty,l=s.call(Object);function u(c){if(!n(c)||e(c)!=r)return!1;var d=t(c);if(d===null)return!0;var f=o.call(d,"constructor")&&d.constructor;return typeof f=="function"&&f instanceof f&&s.call(f)==l}return gp=u,gp}var wp,O_;function _j(){if(O_)return wp;O_=1;function e(t,n){if(!(n==="constructor"&&typeof t[n]=="function")&&n!="__proto__")return t[n]}return wp=e,wp}var bp,L_;function l3(){if(L_)return bp;L_=1;var e=ks(),t=Yr();function n(r){return e(r,t(r))}return bp=n,bp}var xp,q_;function u3(){if(q_)return xp;q_=1;var e=Sj(),t=AM(),n=$M(),r=RM(),i=zM(),a=Es(),s=$e(),o=hj(),l=Ji(),u=_s(),c=Ft(),d=o3(),f=Cs(),m=_j(),v=l3();function p(x,y,g,b,k,_,C){var M=m(x,g),T=m(y,g),j=C.get(T);if(j){e(x,g,j);return}var N=_?_(M,T,g+"",x,y,C):void 0,A=N===void 0;if(A){var I=s(T),L=!I&&l(T),K=!I&&!L&&f(T);N=T,I||L||K?s(M)?N=M:o(M)?N=r(M):L?(A=!1,N=t(T,!0)):K?(A=!1,N=n(T,!0)):N=[]:d(T)||a(T)?(N=M,a(M)?N=v(M):(!c(M)||u(M))&&(N=i(T))):A=!1}A&&(C.set(T,N),k(N,T,b,_,C),C.delete(T)),e(x,g,N)}return xp=p,xp}var Sp,F_;function c3(){if(F_)return Sp;F_=1;var e=Rl(),t=Sj(),n=Xy(),r=u3(),i=Ft(),a=Yr(),s=_j();function o(l,u,c,d,f){l!==u&&n(u,function(m,v){if(f||(f=new e),i(m))r(l,u,v,c,o,d,f);else{var p=d?d(s(l,v),m,v+"",l,u,f):void 0;p===void 0&&(p=m),t(l,v,p)}},a)}return Sp=o,Sp}var _p,V_;function d3(){if(V_)return _p;V_=1;var e=Ul(),t=Gl();function n(r){return e(function(i,a){var s=-1,o=a.length,l=o>1?a[o-1]:void 0,u=o>2?a[2]:void 0;for(l=r.length>3&&typeof l=="function"?(o--,l):void 0,u&&t(a[0],a[1],u)&&(l=o<3?void 0:l,o=1),i=Object(i);++s<o;){var c=a[s];c&&r(i,c,s,l)}return i})}return _p=n,_p}var kp,$_;function f3(){if($_)return kp;$_=1;var e=c3(),t=d3(),n=t(function(r,i,a){e(r,i,a)});return kp=n,kp}var Ep,B_;function kj(){if(B_)return Ep;B_=1;function e(t,n){return t<n}return Ep=e,Ep}var Cp,z_;function h3(){if(z_)return Cp;z_=1;var e=rg(),t=kj(),n=Qr();function r(i){return i&&i.length?e(i,n,t):void 0}return Cp=r,Cp}var Tp,U_;function p3(){if(U_)return Tp;U_=1;var e=rg(),t=Dn(),n=kj();function r(i,a){return i&&i.length?e(i,t(a,2),n):void 0}return Tp=r,Tp}var Mp,G_;function m3(){if(G_)return Mp;G_=1;var e=Xt(),t=function(){return e.Date.now()};return Mp=t,Mp}var jp,H_;function v3(){if(H_)return jp;H_=1;var e=Dl(),t=Bl(),n=Ol(),r=Ft(),i=Ts();function a(s,o,l,u){if(!r(s))return s;o=t(o,s);for(var c=-1,d=o.length,f=d-1,m=s;m!=null&&++c<d;){var v=i(o[c]),p=l;if(v==="__proto__"||v==="constructor"||v==="prototype")return s;if(c!=f){var x=m[v];p=u?u(x,v,m):void 0,p===void 0&&(p=r(x)?x:n(o[c+1])?[]:{})}e(m,v,p),m=m[v]}return s}return jp=a,jp}var Pp,W_;function y3(){if(W_)return Pp;W_=1;var e=zl(),t=v3(),n=Bl();function r(i,a,s){for(var o=-1,l=a.length,u={};++o<l;){var c=a[o],d=e(i,c);s(d,c)&&t(u,n(c,i),d)}return u}return Pp=r,Pp}var Np,K_;function g3(){if(K_)return Np;K_=1;var e=y3(),t=nj();function n(r,i){return e(r,i,function(a,s){return t(r,s)})}return Np=n,Np}var Ap,Y_;function w3(){if(Y_)return Ap;Y_=1;var e=xj(),t=cj(),n=dj();function r(i){return n(t(i,void 0,e),i+"")}return Ap=r,Ap}var Rp,Q_;function b3(){if(Q_)return Rp;Q_=1;var e=g3(),t=w3(),n=t(function(r,i){return r==null?{}:e(r,i)});return Rp=n,Rp}var Ip,X_;function x3(){if(X_)return Ip;X_=1;var e=Math.ceil,t=Math.max;function n(r,i,a,s){for(var o=-1,l=t(e((i-r)/(a||1)),0),u=Array(l);l--;)u[s?l:++o]=r,r+=a;return u}return Ip=n,Ip}var Dp,J_;function S3(){if(J_)return Dp;J_=1;var e=x3(),t=Gl(),n=bj();function r(i){return function(a,s,o){return o&&typeof o!="number"&&t(a,s,o)&&(s=o=void 0),a=n(a),s===void 0?(s=a,a=0):s=n(s),o=o===void 0?a<s?1:-1:n(o),e(a,s,o,i)}}return Dp=r,Dp}var Op,Z_;function _3(){if(Z_)return Op;Z_=1;var e=S3(),t=e();return Op=t,Op}var Lp,ek;function k3(){if(ek)return Lp;ek=1;function e(t,n){var r=t.length;for(t.sort(n);r--;)t[r]=t[r].value;return t}return Lp=e,Lp}var qp,tk;function E3(){if(tk)return qp;tk=1;var e=ea();function t(n,r){if(n!==r){var i=n!==void 0,a=n===null,s=n===n,o=e(n),l=r!==void 0,u=r===null,c=r===r,d=e(r);if(!u&&!d&&!o&&n>r||o&&l&&c&&!u&&!d||a&&l&&c||!i&&c||!s)return 1;if(!a&&!o&&!d&&n<r||d&&i&&s&&!a&&!o||u&&i&&s||!l&&s||!c)return-1}return 0}return qp=t,qp}var Fp,nk;function C3(){if(nk)return Fp;nk=1;var e=E3();function t(n,r,i){for(var a=-1,s=n.criteria,o=r.criteria,l=s.length,u=i.length;++a<l;){var c=e(s[a],o[a]);if(c){if(a>=u)return c;var d=i[a];return c*(d=="desc"?-1:1)}}return n.index-r.index}return Fp=t,Fp}var Vp,rk;function T3(){if(rk)return Vp;rk=1;var e=$l(),t=zl(),n=Dn(),r=oj(),i=k3(),a=Ll(),s=C3(),o=Qr(),l=$e();function u(c,d,f){d.length?d=e(d,function(p){return l(p)?function(x){return t(x,p.length===1?p[0]:p)}:p}):d=[o];var m=-1;d=e(d,a(n));var v=r(c,function(p,x,y){var g=e(d,function(b){return b(p)});return{criteria:g,index:++m,value:p}});return i(v,function(p,x){return s(p,x,f)})}return Vp=u,Vp}var $p,ik;function M3(){if(ik)return $p;ik=1;var e=tg(),t=T3(),n=Ul(),r=Gl(),i=n(function(a,s){if(a==null)return[];var o=s.length;return o>1&&r(a,s[0],s[1])?s=[]:o>2&&r(s[0],s[1],s[2])&&(s=[s[0]]),t(a,e(s,1),[])});return $p=i,$p}var Bp,ak;function j3(){if(ak)return Bp;ak=1;var e=ej(),t=0;function n(r){var i=++t;return e(r)+i}return Bp=n,Bp}var zp,sk;function P3(){if(sk)return zp;sk=1;function e(t,n,r){for(var i=-1,a=t.length,s=n.length,o={};++i<a;){var l=i<s?n[i]:void 0;r(o,t[i],l)}return o}return zp=e,zp}var Up,ok;function N3(){if(ok)return Up;ok=1;var e=Dl(),t=P3();function n(r,i){return t(r||[],i||[],e)}return Up=n,Up}var rl;if(typeof Vy=="function")try{rl={cloneDeep:WV(),constant:Qy(),defaults:KV(),each:WM(),filter:ij(),find:t3(),flatten:xj(),forEach:HM(),forIn:n3(),has:aj(),isUndefined:sj(),last:r3(),map:lj(),mapValues:i3(),max:s3(),merge:f3(),min:h3(),minBy:p3(),now:m3(),pick:b3(),range:_3(),reduce:uj(),sortBy:M3(),uniqueId:j3(),values:pj(),zipObject:N3()}}catch{}rl||(rl=window._);var _e=rl,A3=Hl;function Hl(){var e={};e._next=e._prev=e,this._sentinel=e}Hl.prototype.dequeue=function(){var e=this._sentinel,t=e._prev;if(t!==e)return Ej(t),t};Hl.prototype.enqueue=function(e){var t=this._sentinel;e._prev&&e._next&&Ej(e),e._next=t._next,t._next._prev=e,t._next=e,e._prev=t};Hl.prototype.toString=function(){for(var e=[],t=this._sentinel,n=t._prev;n!==t;)e.push(JSON.stringify(n,R3)),n=n._prev;return"["+e.join(", ")+"]"};function Ej(e){e._prev._next=e._next,e._next._prev=e._prev,delete e._next,delete e._prev}function R3(e,t){if(e!=="_next"&&e!=="_prev")return t}var Sn=_e,I3=Jt.Graph,D3=A3,O3=q3,L3=Sn.constant(1);function q3(e,t){if(e.nodeCount()<=1)return[];var n=V3(e,t||L3),r=F3(n.graph,n.buckets,n.zeroIdx);return Sn.flatten(Sn.map(r,function(i){return e.outEdges(i.v,i.w)}),!0)}function F3(e,t,n){for(var r=[],i=t[t.length-1],a=t[0],s;e.nodeCount();){for(;s=a.dequeue();)Gp(e,t,n,s);for(;s=i.dequeue();)Gp(e,t,n,s);if(e.nodeCount()){for(var o=t.length-2;o>0;--o)if(s=t[o].dequeue(),s){r=r.concat(Gp(e,t,n,s,!0));break}}}return r}function Gp(e,t,n,r,i){var a=i?[]:void 0;return Sn.forEach(e.inEdges(r.v),function(s){var o=e.edge(s),l=e.node(s.v);i&&a.push({v:s.v,w:s.w}),l.out-=o,lv(t,n,l)}),Sn.forEach(e.outEdges(r.v),function(s){var o=e.edge(s),l=s.w,u=e.node(l);u.in-=o,lv(t,n,u)}),e.removeNode(r.v),a}function V3(e,t){var n=new I3,r=0,i=0;Sn.forEach(e.nodes(),function(o){n.setNode(o,{v:o,in:0,out:0})}),Sn.forEach(e.edges(),function(o){var l=n.edge(o.v,o.w)||0,u=t(o),c=l+u;n.setEdge(o.v,o.w,c),i=Math.max(i,n.node(o.v).out+=u),r=Math.max(r,n.node(o.w).in+=u)});var a=Sn.range(i+r+3).map(function(){return new D3}),s=r+1;return Sn.forEach(n.nodes(),function(o){lv(a,s,n.node(o))}),{graph:n,buckets:a,zeroIdx:s}}function lv(e,t,n){n.out?n.in?e[n.out-n.in+t].enqueue(n):e[e.length-1].enqueue(n):e[0].enqueue(n)}var Rr=_e,$3=O3,B3={run:z3,undo:G3};function z3(e){var t=e.graph().acyclicer==="greedy"?$3(e,n(e)):U3(e);Rr.forEach(t,function(r){var i=e.edge(r);e.removeEdge(r),i.forwardName=r.name,i.reversed=!0,e.setEdge(r.w,r.v,i,Rr.uniqueId("rev"))});function n(r){return function(i){return r.edge(i).weight}}}function U3(e){var t=[],n={},r={};function i(a){Rr.has(r,a)||(r[a]=!0,n[a]=!0,Rr.forEach(e.outEdges(a),function(s){Rr.has(n,s.w)?t.push(s):i(s.w)}),delete n[a])}return Rr.forEach(e.nodes(),i),t}function G3(e){Rr.forEach(e.edges(),function(t){var n=e.edge(t);if(n.reversed){e.removeEdge(t);var r=n.forwardName;delete n.reversed,delete n.forwardName,e.setEdge(t.w,t.v,n,r)}})}var ue=_e,Cj=Jt.Graph,yt={addDummyNode:Tj,simplify:H3,asNonCompoundGraph:W3,successorWeights:K3,predecessorWeights:Y3,intersectRect:Q3,buildLayerMatrix:X3,normalizeRanks:J3,removeEmptyRanks:Z3,addBorderNode:e$,maxRank:Mj,partition:t$,time:n$,notime:r$};function Tj(e,t,n,r){var i;do i=ue.uniqueId(r);while(e.hasNode(i));return n.dummy=t,e.setNode(i,n),i}function H3(e){var t=new Cj().setGraph(e.graph());return ue.forEach(e.nodes(),function(n){t.setNode(n,e.node(n))}),ue.forEach(e.edges(),function(n){var r=t.edge(n.v,n.w)||{weight:0,minlen:1},i=e.edge(n);t.setEdge(n.v,n.w,{weight:r.weight+i.weight,minlen:Math.max(r.minlen,i.minlen)})}),t}function W3(e){var t=new Cj({multigraph:e.isMultigraph()}).setGraph(e.graph());return ue.forEach(e.nodes(),function(n){e.children(n).length||t.setNode(n,e.node(n))}),ue.forEach(e.edges(),function(n){t.setEdge(n,e.edge(n))}),t}function K3(e){var t=ue.map(e.nodes(),function(n){var r={};return ue.forEach(e.outEdges(n),function(i){r[i.w]=(r[i.w]||0)+e.edge(i).weight}),r});return ue.zipObject(e.nodes(),t)}function Y3(e){var t=ue.map(e.nodes(),function(n){var r={};return ue.forEach(e.inEdges(n),function(i){r[i.v]=(r[i.v]||0)+e.edge(i).weight}),r});return ue.zipObject(e.nodes(),t)}function Q3(e,t){var n=e.x,r=e.y,i=t.x-n,a=t.y-r,s=e.width/2,o=e.height/2;if(!i&&!a)throw new Error("Not possible to find intersection inside of the rectangle");var l,u;return Math.abs(a)*s>Math.abs(i)*o?(a<0&&(o=-o),l=o*i/a,u=o):(i<0&&(s=-s),l=s,u=s*a/i),{x:n+l,y:r+u}}function X3(e){var t=ue.map(ue.range(Mj(e)+1),function(){return[]});return ue.forEach(e.nodes(),function(n){var r=e.node(n),i=r.rank;ue.isUndefined(i)||(t[i][r.order]=n)}),t}function J3(e){var t=ue.min(ue.map(e.nodes(),function(n){return e.node(n).rank}));ue.forEach(e.nodes(),function(n){var r=e.node(n);ue.has(r,"rank")&&(r.rank-=t)})}function Z3(e){var t=ue.min(ue.map(e.nodes(),function(a){return e.node(a).rank})),n=[];ue.forEach(e.nodes(),function(a){var s=e.node(a).rank-t;n[s]||(n[s]=[]),n[s].push(a)});var r=0,i=e.graph().nodeRankFactor;ue.forEach(n,function(a,s){ue.isUndefined(a)&&s%i!==0?--r:r&&ue.forEach(a,function(o){e.node(o).rank+=r})})}function e$(e,t,n,r){var i={width:0,height:0};return arguments.length>=4&&(i.rank=n,i.order=r),Tj(e,"border",i,t)}function Mj(e){return ue.max(ue.map(e.nodes(),function(t){var n=e.node(t).rank;if(!ue.isUndefined(n))return n}))}function t$(e,t){var n={lhs:[],rhs:[]};return ue.forEach(e,function(r){t(r)?n.lhs.push(r):n.rhs.push(r)}),n}function n$(e,t){var n=ue.now();try{return t()}finally{console.log(e+" time: "+(ue.now()-n)+"ms")}}function r$(e,t){return t()}var jj=_e,i$=yt,a$={run:s$,undo:l$};function s$(e){e.graph().dummyChains=[],jj.forEach(e.edges(),function(t){o$(e,t)})}function o$(e,t){var n=t.v,r=e.node(n).rank,i=t.w,a=e.node(i).rank,s=t.name,o=e.edge(t),l=o.labelRank;if(a!==r+1){e.removeEdge(t);var u,c,d;for(d=0,++r;r<a;++d,++r)o.points=[],c={width:0,height:0,edgeLabel:o,edgeObj:t,rank:r},u=i$.addDummyNode(e,"edge",c,"_d"),r===l&&(c.width=o.width,c.height=o.height,c.dummy="edge-label",c.labelpos=o.labelpos),e.setEdge(n,u,{weight:o.weight},s),d===0&&e.graph().dummyChains.push(u),n=u;e.setEdge(n,i,{weight:o.weight},s)}}function l$(e){jj.forEach(e.graph().dummyChains,function(t){var n=e.node(t),r=n.edgeLabel,i;for(e.setEdge(n.edgeObj,r);n.dummy;)i=e.successors(t)[0],e.removeNode(t),r.points.push({x:n.x,y:n.y}),n.dummy==="edge-label"&&(r.x=n.x,r.y=n.y,r.width=n.width,r.height=n.height),t=i,n=e.node(t)})}var ao=_e,Wl={longestPath:u$,slack:c$};function u$(e){var t={};function n(r){var i=e.node(r);if(ao.has(t,r))return i.rank;t[r]=!0;var a=ao.min(ao.map(e.outEdges(r),function(s){return n(s.w)-e.edge(s).minlen}));return(a===Number.POSITIVE_INFINITY||a===void 0||a===null)&&(a=0),i.rank=a}ao.forEach(e.sources(),n)}function c$(e,t){return e.node(t.w).rank-e.node(t.v).rank-e.edge(t).minlen}var il=_e,d$=Jt.Graph,al=Wl.slack,Pj=f$;function f$(e){var t=new d$({directed:!1}),n=e.nodes()[0],r=e.nodeCount();t.setNode(n,{});for(var i,a;h$(t,e)<r;)i=p$(t,e),a=t.hasNode(i.v)?al(e,i):-al(e,i),m$(t,e,a);return t}function h$(e,t){function n(r){il.forEach(t.nodeEdges(r),function(i){var a=i.v,s=r===a?i.w:a;!e.hasNode(s)&&!al(t,i)&&(e.setNode(s,{}),e.setEdge(r,s,{}),n(s))})}return il.forEach(e.nodes(),n),e.nodeCount()}function p$(e,t){return il.minBy(t.edges(),function(n){if(e.hasNode(n.v)!==e.hasNode(n.w))return al(t,n)})}function m$(e,t,n){il.forEach(e.nodes(),function(r){t.node(r).rank+=n})}var An=_e,v$=Pj,y$=Wl.slack,g$=Wl.longestPath,w$=Jt.alg.preorder,b$=Jt.alg.postorder,x$=yt.simplify,S$=Xr;Xr.initLowLimValues=ag;Xr.initCutValues=ig;Xr.calcCutValue=Nj;Xr.leaveEdge=Rj;Xr.enterEdge=Ij;Xr.exchangeEdges=Dj;function Xr(e){e=x$(e),g$(e);var t=v$(e);ag(t),ig(t,e);for(var n,r;n=Rj(t);)r=Ij(t,e,n),Dj(t,e,n,r)}function ig(e,t){var n=b$(e,e.nodes());n=n.slice(0,n.length-1),An.forEach(n,function(r){_$(e,t,r)})}function _$(e,t,n){var r=e.node(n),i=r.parent;e.edge(n,i).cutvalue=Nj(e,t,n)}function Nj(e,t,n){var r=e.node(n),i=r.parent,a=!0,s=t.edge(n,i),o=0;return s||(a=!1,s=t.edge(i,n)),o=s.weight,An.forEach(t.nodeEdges(n),function(l){var u=l.v===n,c=u?l.w:l.v;if(c!==i){var d=u===a,f=t.edge(l).weight;if(o+=d?f:-f,E$(e,n,c)){var m=e.edge(n,c).cutvalue;o+=d?-m:m}}}),o}function ag(e,t){arguments.length<2&&(t=e.nodes()[0]),Aj(e,{},1,t)}function Aj(e,t,n,r,i){var a=n,s=e.node(r);return t[r]=!0,An.forEach(e.neighbors(r),function(o){An.has(t,o)||(n=Aj(e,t,n,o,r))}),s.low=a,s.lim=n++,i?s.parent=i:delete s.parent,n}function Rj(e){return An.find(e.edges(),function(t){return e.edge(t).cutvalue<0})}function Ij(e,t,n){var r=n.v,i=n.w;t.hasEdge(r,i)||(r=n.w,i=n.v);var a=e.node(r),s=e.node(i),o=a,l=!1;a.lim>s.lim&&(o=s,l=!0);var u=An.filter(t.edges(),function(c){return l===lk(e,e.node(c.v),o)&&l!==lk(e,e.node(c.w),o)});return An.minBy(u,function(c){return y$(t,c)})}function Dj(e,t,n,r){var i=n.v,a=n.w;e.removeEdge(i,a),e.setEdge(r.v,r.w,{}),ag(e),ig(e,t),k$(e,t)}function k$(e,t){var n=An.find(e.nodes(),function(i){return!t.node(i).parent}),r=w$(e,n);r=r.slice(1),An.forEach(r,function(i){var a=e.node(i).parent,s=t.edge(i,a),o=!1;s||(s=t.edge(a,i),o=!0),t.node(i).rank=t.node(a).rank+(o?s.minlen:-s.minlen)})}function E$(e,t,n){return e.hasEdge(t,n)}function lk(e,t,n){return n.low<=t.lim&&t.lim<=n.lim}var C$=Wl,Oj=C$.longestPath,T$=Pj,M$=S$,j$=P$;function P$(e){switch(e.graph().ranker){case"network-simplex":uk(e);break;case"tight-tree":A$(e);break;case"longest-path":N$(e);break;default:uk(e)}}var N$=Oj;function A$(e){Oj(e),T$(e)}function uk(e){M$(e)}var uv=_e,R$=I$;function I$(e){var t=O$(e);uv.forEach(e.graph().dummyChains,function(n){for(var r=e.node(n),i=r.edgeObj,a=D$(e,t,i.v,i.w),s=a.path,o=a.lca,l=0,u=s[l],c=!0;n!==i.w;){if(r=e.node(n),c){for(;(u=s[l])!==o&&e.node(u).maxRank<r.rank;)l++;u===o&&(c=!1)}if(!c){for(;l<s.length-1&&e.node(u=s[l+1]).minRank<=r.rank;)l++;u=s[l]}e.setParent(n,u),n=e.successors(n)[0]}})}function D$(e,t,n,r){var i=[],a=[],s=Math.min(t[n].low,t[r].low),o=Math.max(t[n].lim,t[r].lim),l,u;l=n;do l=e.parent(l),i.push(l);while(l&&(t[l].low>s||o>t[l].lim));for(u=l,l=r;(l=e.parent(l))!==u;)a.push(l);return{path:i.concat(a.reverse()),lca:u}}function O$(e){var t={},n=0;function r(i){var a=n;uv.forEach(e.children(i),r),t[i]={low:a,lim:n++}}return uv.forEach(e.children(),r),t}var _n=_e,cv=yt,L$={run:q$,cleanup:$$};function q$(e){var t=cv.addDummyNode(e,"root",{},"_root"),n=F$(e),r=_n.max(_n.values(n))-1,i=2*r+1;e.graph().nestingRoot=t,_n.forEach(e.edges(),function(s){e.edge(s).minlen*=i});var a=V$(e)+1;_n.forEach(e.children(),function(s){Lj(e,t,i,a,r,n,s)}),e.graph().nodeRankFactor=i}function Lj(e,t,n,r,i,a,s){var o=e.children(s);if(!o.length){s!==t&&e.setEdge(t,s,{weight:0,minlen:n});return}var l=cv.addBorderNode(e,"_bt"),u=cv.addBorderNode(e,"_bb"),c=e.node(s);e.setParent(l,s),c.borderTop=l,e.setParent(u,s),c.borderBottom=u,_n.forEach(o,function(d){Lj(e,t,n,r,i,a,d);var f=e.node(d),m=f.borderTop?f.borderTop:d,v=f.borderBottom?f.borderBottom:d,p=f.borderTop?r:2*r,x=m!==v?1:i-a[s]+1;e.setEdge(l,m,{weight:p,minlen:x,nestingEdge:!0}),e.setEdge(v,u,{weight:p,minlen:x,nestingEdge:!0})}),e.parent(s)||e.setEdge(t,l,{weight:0,minlen:i+a[s]})}function F$(e){var t={};function n(r,i){var a=e.children(r);a&&a.length&&_n.forEach(a,function(s){n(s,i+1)}),t[r]=i}return _n.forEach(e.children(),function(r){n(r,1)}),t}function V$(e){return _n.reduce(e.edges(),function(t,n){return t+e.edge(n).weight},0)}function $$(e){var t=e.graph();e.removeNode(t.nestingRoot),delete t.nestingRoot,_n.forEach(e.edges(),function(n){var r=e.edge(n);r.nestingEdge&&e.removeEdge(n)})}var Hp=_e,B$=yt,z$=U$;function U$(e){function t(n){var r=e.children(n),i=e.node(n);if(r.length&&Hp.forEach(r,t),Hp.has(i,"minRank")){i.borderLeft=[],i.borderRight=[];for(var a=i.minRank,s=i.maxRank+1;a<s;++a)ck(e,"borderLeft","_bl",n,i,a),ck(e,"borderRight","_br",n,i,a)}}Hp.forEach(e.children(),t)}function ck(e,t,n,r,i,a){var s={width:0,height:0,rank:a,borderType:t},o=i[t][a-1],l=B$.addDummyNode(e,"border",s,n);i[t][a]=l,e.setParent(l,r),o&&e.setEdge(o,l,{weight:1})}var sn=_e,G$={adjust:H$,undo:W$};function H$(e){var t=e.graph().rankdir.toLowerCase();(t==="lr"||t==="rl")&&qj(e)}function W$(e){var t=e.graph().rankdir.toLowerCase();(t==="bt"||t==="rl")&&K$(e),(t==="lr"||t==="rl")&&(Y$(e),qj(e))}function qj(e){sn.forEach(e.nodes(),function(t){dk(e.node(t))}),sn.forEach(e.edges(),function(t){dk(e.edge(t))})}function dk(e){var t=e.width;e.width=e.height,e.height=t}function K$(e){sn.forEach(e.nodes(),function(t){Wp(e.node(t))}),sn.forEach(e.edges(),function(t){var n=e.edge(t);sn.forEach(n.points,Wp),sn.has(n,"y")&&Wp(n)})}function Wp(e){e.y=-e.y}function Y$(e){sn.forEach(e.nodes(),function(t){Kp(e.node(t))}),sn.forEach(e.edges(),function(t){var n=e.edge(t);sn.forEach(n.points,Kp),sn.has(n,"x")&&Kp(n)})}function Kp(e){var t=e.x;e.x=e.y,e.y=t}var vn=_e,Q$=X$;function X$(e){var t={},n=vn.filter(e.nodes(),function(o){return!e.children(o).length}),r=vn.max(vn.map(n,function(o){return e.node(o).rank})),i=vn.map(vn.range(r+1),function(){return[]});function a(o){if(!vn.has(t,o)){t[o]=!0;var l=e.node(o);i[l.rank].push(o),vn.forEach(e.successors(o),a)}}var s=vn.sortBy(n,function(o){return e.node(o).rank});return vn.forEach(s,a),i}var zn=_e,J$=Z$;function Z$(e,t){for(var n=0,r=1;r<t.length;++r)n+=eB(e,t[r-1],t[r]);return n}function eB(e,t,n){for(var r=zn.zipObject(n,zn.map(n,function(u,c){return c})),i=zn.flatten(zn.map(t,function(u){return zn.sortBy(zn.map(e.outEdges(u),function(c){return{pos:r[c.w],weight:e.edge(c).weight}}),"pos")}),!0),a=1;a<n.length;)a<<=1;var s=2*a-1;a-=1;var o=zn.map(new Array(s),function(){return 0}),l=0;return zn.forEach(i.forEach(function(u){var c=u.pos+a;o[c]+=u.weight;for(var d=0;c>0;)c%2&&(d+=o[c+1]),c=c-1>>1,o[c]+=u.weight;l+=u.weight*d})),l}var fk=_e,tB=nB;function nB(e,t){return fk.map(t,function(n){var r=e.inEdges(n);if(r.length){var i=fk.reduce(r,function(a,s){var o=e.edge(s),l=e.node(s.v);return{sum:a.sum+o.weight*l.order,weight:a.weight+o.weight}},{sum:0,weight:0});return{v:n,barycenter:i.sum/i.weight,weight:i.weight}}else return{v:n}})}var bt=_e,rB=iB;function iB(e,t){var n={};bt.forEach(e,function(i,a){var s=n[i.v]={indegree:0,in:[],out:[],vs:[i.v],i:a};bt.isUndefined(i.barycenter)||(s.barycenter=i.barycenter,s.weight=i.weight)}),bt.forEach(t.edges(),function(i){var a=n[i.v],s=n[i.w];!bt.isUndefined(a)&&!bt.isUndefined(s)&&(s.indegree++,a.out.push(n[i.w]))});var r=bt.filter(n,function(i){return!i.indegree});return aB(r)}function aB(e){var t=[];function n(a){return function(s){s.merged||(bt.isUndefined(s.barycenter)||bt.isUndefined(a.barycenter)||s.barycenter>=a.barycenter)&&sB(a,s)}}function r(a){return function(s){s.in.push(a),--s.indegree===0&&e.push(s)}}for(;e.length;){var i=e.pop();t.push(i),bt.forEach(i.in.reverse(),n(i)),bt.forEach(i.out,r(i))}return bt.map(bt.filter(t,function(a){return!a.merged}),function(a){return bt.pick(a,["vs","i","barycenter","weight"])})}function sB(e,t){var n=0,r=0;e.weight&&(n+=e.barycenter*e.weight,r+=e.weight),t.weight&&(n+=t.barycenter*t.weight,r+=t.weight),e.vs=t.vs.concat(e.vs),e.barycenter=n/r,e.weight=r,e.i=Math.min(t.i,e.i),t.merged=!0}var ja=_e,oB=yt,lB=uB;function uB(e,t){var n=oB.partition(e,function(c){return ja.has(c,"barycenter")}),r=n.lhs,i=ja.sortBy(n.rhs,function(c){return-c.i}),a=[],s=0,o=0,l=0;r.sort(cB(!!t)),l=hk(a,i,l),ja.forEach(r,function(c){l+=c.vs.length,a.push(c.vs),s+=c.barycenter*c.weight,o+=c.weight,l=hk(a,i,l)});var u={vs:ja.flatten(a,!0)};return o&&(u.barycenter=s/o,u.weight=o),u}function hk(e,t,n){for(var r;t.length&&(r=ja.last(t)).i<=n;)t.pop(),e.push(r.vs),n++;return n}function cB(e){return function(t,n){return t.barycenter<n.barycenter?-1:t.barycenter>n.barycenter?1:e?n.i-t.i:t.i-n.i}}var Qn=_e,dB=tB,fB=rB,hB=lB,pB=Fj;function Fj(e,t,n,r){var i=e.children(t),a=e.node(t),s=a?a.borderLeft:void 0,o=a?a.borderRight:void 0,l={};s&&(i=Qn.filter(i,function(v){return v!==s&&v!==o}));var u=dB(e,i);Qn.forEach(u,function(v){if(e.children(v.v).length){var p=Fj(e,v.v,n,r);l[v.v]=p,Qn.has(p,"barycenter")&&vB(v,p)}});var c=fB(u,n);mB(c,l);var d=hB(c,r);if(s&&(d.vs=Qn.flatten([s,d.vs,o],!0),e.predecessors(s).length)){var f=e.node(e.predecessors(s)[0]),m=e.node(e.predecessors(o)[0]);Qn.has(d,"barycenter")||(d.barycenter=0,d.weight=0),d.barycenter=(d.barycenter*d.weight+f.order+m.order)/(d.weight+2),d.weight+=2}return d}function mB(e,t){Qn.forEach(e,function(n){n.vs=Qn.flatten(n.vs.map(function(r){return t[r]?t[r].vs:r}),!0)})}function vB(e,t){Qn.isUndefined(e.barycenter)?(e.barycenter=t.barycenter,e.weight=t.weight):(e.barycenter=(e.barycenter*e.weight+t.barycenter*t.weight)/(e.weight+t.weight),e.weight+=t.weight)}var Pa=_e,yB=Jt.Graph,gB=wB;function wB(e,t,n){var r=bB(e),i=new yB({compound:!0}).setGraph({root:r}).setDefaultNodeLabel(function(a){return e.node(a)});return Pa.forEach(e.nodes(),function(a){var s=e.node(a),o=e.parent(a);(s.rank===t||s.minRank<=t&&t<=s.maxRank)&&(i.setNode(a),i.setParent(a,o||r),Pa.forEach(e[n](a),function(l){var u=l.v===a?l.w:l.v,c=i.edge(u,a),d=Pa.isUndefined(c)?0:c.weight;i.setEdge(u,a,{weight:e.edge(l).weight+d})}),Pa.has(s,"minRank")&&i.setNode(a,{borderLeft:s.borderLeft[t],borderRight:s.borderRight[t]}))}),i}function bB(e){for(var t;e.hasNode(t=Pa.uniqueId("_root")););return t}var xB=_e,SB=_B;function _B(e,t,n){var r={},i;xB.forEach(n,function(a){for(var s=e.parent(a),o,l;s;){if(o=e.parent(s),o?(l=r[o],r[o]=s):(l=i,i=s),l&&l!==s){t.setEdge(l,s);return}s=o}})}var or=_e,kB=Q$,EB=J$,CB=pB,TB=gB,MB=SB,jB=Jt.Graph,pk=yt,PB=NB;function NB(e){var t=pk.maxRank(e),n=mk(e,or.range(1,t+1),"inEdges"),r=mk(e,or.range(t-1,-1,-1),"outEdges"),i=kB(e);vk(e,i);for(var a=Number.POSITIVE_INFINITY,s,o=0,l=0;l<4;++o,++l){AB(o%2?n:r,o%4>=2),i=pk.buildLayerMatrix(e);var u=EB(e,i);u<a&&(l=0,s=or.cloneDeep(i),a=u)}vk(e,s)}function mk(e,t,n){return or.map(t,function(r){return TB(e,r,n)})}function AB(e,t){var n=new jB;or.forEach(e,function(r){var i=r.graph().root,a=CB(r,i,n,t);or.forEach(a.vs,function(s,o){r.node(s).order=o}),MB(r,n,a.vs)})}function vk(e,t){or.forEach(t,function(n){or.forEach(n,function(r,i){e.node(r).order=i})})}var Y=_e,RB=Jt.Graph,IB=yt,DB={positionX:HB};function OB(e,t){var n={};function r(i,a){var s=0,o=0,l=i.length,u=Y.last(a);return Y.forEach(a,function(c,d){var f=qB(e,c),m=f?e.node(f).order:l;(f||c===u)&&(Y.forEach(a.slice(o,d+1),function(v){Y.forEach(e.predecessors(v),function(p){var x=e.node(p),y=x.order;(y<s||m<y)&&!(x.dummy&&e.node(v).dummy)&&Vj(n,p,v)})}),o=d+1,s=m)}),a}return Y.reduce(t,r),n}function LB(e,t){var n={};function r(a,s,o,l,u){var c;Y.forEach(Y.range(s,o),function(d){c=a[d],e.node(c).dummy&&Y.forEach(e.predecessors(c),function(f){var m=e.node(f);m.dummy&&(m.order<l||m.order>u)&&Vj(n,f,c)})})}function i(a,s){var o=-1,l,u=0;return Y.forEach(s,function(c,d){if(e.node(c).dummy==="border"){var f=e.predecessors(c);f.length&&(l=e.node(f[0]).order,r(s,u,d,o,l),u=d,o=l)}r(s,u,s.length,l,a.length)}),s}return Y.reduce(t,i),n}function qB(e,t){if(e.node(t).dummy)return Y.find(e.predecessors(t),function(n){return e.node(n).dummy})}function Vj(e,t,n){if(t>n){var r=t;t=n,n=r}var i=e[t];i||(e[t]=i={}),i[n]=!0}function FB(e,t,n){if(t>n){var r=t;t=n,n=r}return Y.has(e[t],n)}function VB(e,t,n,r){var i={},a={},s={};return Y.forEach(t,function(o){Y.forEach(o,function(l,u){i[l]=l,a[l]=l,s[l]=u})}),Y.forEach(t,function(o){var l=-1;Y.forEach(o,function(u){var c=r(u);if(c.length){c=Y.sortBy(c,function(p){return s[p]});for(var d=(c.length-1)/2,f=Math.floor(d),m=Math.ceil(d);f<=m;++f){var v=c[f];a[u]===u&&l<s[v]&&!FB(n,u,v)&&(a[v]=u,a[u]=i[u]=i[v],l=s[v])}}})}),{root:i,align:a}}function $B(e,t,n,r,i){var a={},s=BB(e,t,n,i),o=i?"borderLeft":"borderRight";function l(d,f){for(var m=s.nodes(),v=m.pop(),p={};v;)p[v]?d(v):(p[v]=!0,m.push(v),m=m.concat(f(v))),v=m.pop()}function u(d){a[d]=s.inEdges(d).reduce(function(f,m){return Math.max(f,a[m.v]+s.edge(m))},0)}function c(d){var f=s.outEdges(d).reduce(function(v,p){return Math.min(v,a[p.w]-s.edge(p))},Number.POSITIVE_INFINITY),m=e.node(d);f!==Number.POSITIVE_INFINITY&&m.borderType!==o&&(a[d]=Math.max(a[d],f))}return l(u,s.predecessors.bind(s)),l(c,s.successors.bind(s)),Y.forEach(r,function(d){a[d]=a[n[d]]}),a}function BB(e,t,n,r){var i=new RB,a=e.graph(),s=WB(a.nodesep,a.edgesep,r);return Y.forEach(t,function(o){var l;Y.forEach(o,function(u){var c=n[u];if(i.setNode(c),l){var d=n[l],f=i.edge(d,c);i.setEdge(d,c,Math.max(s(e,u,l),f||0))}l=u})}),i}function zB(e,t){return Y.minBy(Y.values(t),function(n){var r=Number.NEGATIVE_INFINITY,i=Number.POSITIVE_INFINITY;return Y.forIn(n,function(a,s){var o=KB(e,s)/2;r=Math.max(a+o,r),i=Math.min(a-o,i)}),r-i})}function UB(e,t){var n=Y.values(t),r=Y.min(n),i=Y.max(n);Y.forEach(["u","d"],function(a){Y.forEach(["l","r"],function(s){var o=a+s,l=e[o],u;if(l!==t){var c=Y.values(l);u=s==="l"?r-Y.min(c):i-Y.max(c),u&&(e[o]=Y.mapValues(l,function(d){return d+u}))}})})}function GB(e,t){return Y.mapValues(e.ul,function(n,r){if(t)return e[t.toLowerCase()][r];var i=Y.sortBy(Y.map(e,r));return(i[1]+i[2])/2})}function HB(e){var t=IB.buildLayerMatrix(e),n=Y.merge(OB(e,t),LB(e,t)),r={},i;Y.forEach(["u","d"],function(s){i=s==="u"?t:Y.values(t).reverse(),Y.forEach(["l","r"],function(o){o==="r"&&(i=Y.map(i,function(d){return Y.values(d).reverse()}));var l=(s==="u"?e.predecessors:e.successors).bind(e),u=VB(e,i,n,l),c=$B(e,i,u.root,u.align,o==="r");o==="r"&&(c=Y.mapValues(c,function(d){return-d})),r[s+o]=c})});var a=zB(e,r);return UB(r,a),GB(r,e.graph().align)}function WB(e,t,n){return function(r,i,a){var s=r.node(i),o=r.node(a),l=0,u;if(l+=s.width/2,Y.has(s,"labelpos"))switch(s.labelpos.toLowerCase()){case"l":u=-s.width/2;break;case"r":u=s.width/2;break}if(u&&(l+=n?u:-u),u=0,l+=(s.dummy?t:e)/2,l+=(o.dummy?t:e)/2,l+=o.width/2,Y.has(o,"labelpos"))switch(o.labelpos.toLowerCase()){case"l":u=o.width/2;break;case"r":u=-o.width/2;break}return u&&(l+=n?u:-u),u=0,l}}function KB(e,t){return e.node(t).width}var Na=_e,$j=yt,YB=DB.positionX,QB=XB;function XB(e){e=$j.asNonCompoundGraph(e),JB(e),Na.forEach(YB(e),function(t,n){e.node(n).x=t})}function JB(e){var t=$j.buildLayerMatrix(e),n=e.graph().ranksep,r=0;Na.forEach(t,function(i){var a=Na.max(Na.map(i,function(s){return e.node(s).height}));Na.forEach(i,function(s){e.node(s).y=r+a/2}),r+=a+n})}var Z=_e,yk=B3,gk=a$,ZB=j$,e4=yt.normalizeRanks,t4=R$,n4=yt.removeEmptyRanks,wk=L$,r4=z$,bk=G$,i4=PB,a4=QB,fr=yt,s4=Jt.Graph,o4=l4;function l4(e,t){var n=t&&t.debugTiming?fr.time:fr.notime;n("layout",function(){var r=n("  buildLayoutGraph",function(){return w4(e)});n("  runLayout",function(){u4(r,n)}),n("  updateInputGraph",function(){c4(e,r)})})}function u4(e,t){t("    makeSpaceForEdgeLabels",function(){b4(e)}),t("    removeSelfEdges",function(){j4(e)}),t("    acyclic",function(){yk.run(e)}),t("    nestingGraph.run",function(){wk.run(e)}),t("    rank",function(){ZB(fr.asNonCompoundGraph(e))}),t("    injectEdgeLabelProxies",function(){x4(e)}),t("    removeEmptyRanks",function(){n4(e)}),t("    nestingGraph.cleanup",function(){wk.cleanup(e)}),t("    normalizeRanks",function(){e4(e)}),t("    assignRankMinMax",function(){S4(e)}),t("    removeEdgeLabelProxies",function(){_4(e)}),t("    normalize.run",function(){gk.run(e)}),t("    parentDummyChains",function(){t4(e)}),t("    addBorderSegments",function(){r4(e)}),t("    order",function(){i4(e)}),t("    insertSelfEdges",function(){P4(e)}),t("    adjustCoordinateSystem",function(){bk.adjust(e)}),t("    position",function(){a4(e)}),t("    positionSelfEdges",function(){N4(e)}),t("    removeBorderNodes",function(){M4(e)}),t("    normalize.undo",function(){gk.undo(e)}),t("    fixupEdgeLabelCoords",function(){C4(e)}),t("    undoCoordinateSystem",function(){bk.undo(e)}),t("    translateGraph",function(){k4(e)}),t("    assignNodeIntersects",function(){E4(e)}),t("    reversePoints",function(){T4(e)}),t("    acyclic.undo",function(){yk.undo(e)})}function c4(e,t){Z.forEach(e.nodes(),function(n){var r=e.node(n),i=t.node(n);r&&(r.x=i.x,r.y=i.y,t.children(n).length&&(r.width=i.width,r.height=i.height))}),Z.forEach(e.edges(),function(n){var r=e.edge(n),i=t.edge(n);r.points=i.points,Z.has(i,"x")&&(r.x=i.x,r.y=i.y)}),e.graph().width=t.graph().width,e.graph().height=t.graph().height}var d4=["nodesep","edgesep","ranksep","marginx","marginy"],f4={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},h4=["acyclicer","ranker","rankdir","align"],p4=["width","height"],m4={width:0,height:0},v4=["minlen","weight","width","height","labeloffset"],y4={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},g4=["labelpos"];function w4(e){var t=new s4({multigraph:!0,compound:!0}),n=Qp(e.graph());return t.setGraph(Z.merge({},f4,Yp(n,d4),Z.pick(n,h4))),Z.forEach(e.nodes(),function(r){var i=Qp(e.node(r));t.setNode(r,Z.defaults(Yp(i,p4),m4)),t.setParent(r,e.parent(r))}),Z.forEach(e.edges(),function(r){var i=Qp(e.edge(r));t.setEdge(r,Z.merge({},y4,Yp(i,v4),Z.pick(i,g4)))}),t}function b4(e){var t=e.graph();t.ranksep/=2,Z.forEach(e.edges(),function(n){var r=e.edge(n);r.minlen*=2,r.labelpos.toLowerCase()!=="c"&&(t.rankdir==="TB"||t.rankdir==="BT"?r.width+=r.labeloffset:r.height+=r.labeloffset)})}function x4(e){Z.forEach(e.edges(),function(t){var n=e.edge(t);if(n.width&&n.height){var r=e.node(t.v),i=e.node(t.w),a={rank:(i.rank-r.rank)/2+r.rank,e:t};fr.addDummyNode(e,"edge-proxy",a,"_ep")}})}function S4(e){var t=0;Z.forEach(e.nodes(),function(n){var r=e.node(n);r.borderTop&&(r.minRank=e.node(r.borderTop).rank,r.maxRank=e.node(r.borderBottom).rank,t=Z.max(t,r.maxRank))}),e.graph().maxRank=t}function _4(e){Z.forEach(e.nodes(),function(t){var n=e.node(t);n.dummy==="edge-proxy"&&(e.edge(n.e).labelRank=n.rank,e.removeNode(t))})}function k4(e){var t=Number.POSITIVE_INFINITY,n=0,r=Number.POSITIVE_INFINITY,i=0,a=e.graph(),s=a.marginx||0,o=a.marginy||0;function l(u){var c=u.x,d=u.y,f=u.width,m=u.height;t=Math.min(t,c-f/2),n=Math.max(n,c+f/2),r=Math.min(r,d-m/2),i=Math.max(i,d+m/2)}Z.forEach(e.nodes(),function(u){l(e.node(u))}),Z.forEach(e.edges(),function(u){var c=e.edge(u);Z.has(c,"x")&&l(c)}),t-=s,r-=o,Z.forEach(e.nodes(),function(u){var c=e.node(u);c.x-=t,c.y-=r}),Z.forEach(e.edges(),function(u){var c=e.edge(u);Z.forEach(c.points,function(d){d.x-=t,d.y-=r}),Z.has(c,"x")&&(c.x-=t),Z.has(c,"y")&&(c.y-=r)}),a.width=n-t+s,a.height=i-r+o}function E4(e){Z.forEach(e.edges(),function(t){var n=e.edge(t),r=e.node(t.v),i=e.node(t.w),a,s;n.points?(a=n.points[0],s=n.points[n.points.length-1]):(n.points=[],a=i,s=r),n.points.unshift(fr.intersectRect(r,a)),n.points.push(fr.intersectRect(i,s))})}function C4(e){Z.forEach(e.edges(),function(t){var n=e.edge(t);if(Z.has(n,"x"))switch((n.labelpos==="l"||n.labelpos==="r")&&(n.width-=n.labeloffset),n.labelpos){case"l":n.x-=n.width/2+n.labeloffset;break;case"r":n.x+=n.width/2+n.labeloffset;break}})}function T4(e){Z.forEach(e.edges(),function(t){var n=e.edge(t);n.reversed&&n.points.reverse()})}function M4(e){Z.forEach(e.nodes(),function(t){if(e.children(t).length){var n=e.node(t),r=e.node(n.borderTop),i=e.node(n.borderBottom),a=e.node(Z.last(n.borderLeft)),s=e.node(Z.last(n.borderRight));n.width=Math.abs(s.x-a.x),n.height=Math.abs(i.y-r.y),n.x=a.x+n.width/2,n.y=r.y+n.height/2}}),Z.forEach(e.nodes(),function(t){e.node(t).dummy==="border"&&e.removeNode(t)})}function j4(e){Z.forEach(e.edges(),function(t){if(t.v===t.w){var n=e.node(t.v);n.selfEdges||(n.selfEdges=[]),n.selfEdges.push({e:t,label:e.edge(t)}),e.removeEdge(t)}})}function P4(e){var t=fr.buildLayerMatrix(e);Z.forEach(t,function(n){var r=0;Z.forEach(n,function(i,a){var s=e.node(i);s.order=a+r,Z.forEach(s.selfEdges,function(o){fr.addDummyNode(e,"selfedge",{width:o.label.width,height:o.label.height,rank:s.rank,order:a+ ++r,e:o.e,label:o.label},"_se")}),delete s.selfEdges})})}function N4(e){Z.forEach(e.nodes(),function(t){var n=e.node(t);if(n.dummy==="selfedge"){var r=e.node(n.e.v),i=r.x+r.width/2,a=r.y,s=n.x-i,o=r.height/2;e.setEdge(n.e,n.label),e.removeNode(t),n.label.points=[{x:i+2*s/3,y:a-o},{x:i+5*s/6,y:a-o},{x:i+s,y:a},{x:i+5*s/6,y:a+o},{x:i+2*s/3,y:a+o}],n.label.x=n.x,n.label.y=n.y}})}function Yp(e,t){return Z.mapValues(Z.pick(e,t),Number)}function Qp(e){var t={};return Z.forEach(e,function(n,r){t[r.toLowerCase()]=n}),t}var so=_e,A4=yt,R4=Jt.Graph,I4={debugOrdering:D4};function D4(e){var t=A4.buildLayerMatrix(e),n=new R4({compound:!0,multigraph:!0}).setGraph({});return so.forEach(e.nodes(),function(r){n.setNode(r,{label:r}),n.setParent(r,"layer"+e.node(r).rank)}),so.forEach(e.edges(),function(r){n.setEdge(r.v,r.w,{},r.name)}),so.forEach(t,function(r,i){var a="layer"+i;n.setNode(a,{rank:"same"}),so.reduce(r,function(s,o){return n.setEdge(s,o,{style:"invis"}),o})}),n}var O4="0.8.5",L4={graphlib:Jt,layout:o4,debug:I4,util:{time:yt.time,notime:yt.notime},version:O4};const xk=Rk(L4),Sk=new Map;function q4(e,t){const n=e.map(i=>i.id).join("|"),r=t.map(i=>`${i.source}->${i.target}`).join("|");return`${e.length}:${t.length}:${n}:${r}`}function F4(e,t,n){if(n){const r=q4(e,t),i=Sk.get(n);if(i&&i.signature===r)return i.layout;const a=_k(e,t);return Sk.set(n,{signature:r,layout:a}),a}return _k(e,t)}function _k(e,t){if(e.length>2500){const r=Math.ceil(Math.sqrt(e.length));return e.map((i,a)=>{const s=Math.floor(a/r),o=a%r;return{id:i.id,position:{x:o*260,y:s*160}}})}const n=new xk.graphlib.Graph;return n.setGraph({rankdir:"LR",nodesep:48,ranksep:80}),n.setDefaultEdgeLabel(()=>({})),e.forEach(r=>{n.setNode(r.id,{width:220,height:120})}),t.forEach(r=>{n.setEdge(r.source,r.target)}),xk.layout(n),e.map(r=>{const i=n.node(r.id);return{id:r.id,position:{x:i.x-i.width/2,y:i.y-i.height/2}}})}const Bj="agentDirector.gameplayFunnel.v1";function V4(){try{const e=window.localStorage.getItem(Bj);if(!e)return[];const t=JSON.parse(e);return Array.isArray(t)?t.filter(n=>{if(!n||typeof n!="object")return!1;const r=n;return typeof r.name=="string"&&typeof r.at=="number"&&!!r.metadata&&typeof r.metadata=="object"}):[]}catch{return[]}}function $4(e,t={}){const n={name:e,at:Date.now(),metadata:t},i=[...V4(),n].slice(-200);return window.localStorage.setItem(Bj,JSON.stringify(i)),n}function B4(e){const t=new Map;for(const r of e)r.type==="tool_call"&&r.toolCallId&&t.set(r.toolCallId,r.id);const n=[];for(const r of e)if(!(r.type!=="llm_call"||!r.io)){for(const i of r.io.emittedToolCallIds??[]){const a=t.get(i);a&&n.push({id:`io_emit_${r.id}_${a}`,source:r.id,target:a,kind:"io",toolCallId:i})}for(const i of r.io.consumedToolCallIds??[]){const a=t.get(i);a&&n.push({id:`io_consume_${a}_${r.id}`,source:a,target:r.id,kind:"io",toolCallId:i})}}return n}function z4(e,t,n){const{intervals:r}=Sl(e,t,n),i=new Set;return r.forEach(a=>{i.add(a.startMs),i.add(a.endMs)}),Array.from(i).sort((a,s)=>a-s)}function U4(e,t,n){if(!e.length)return null;if(n===1){for(const r of e)if(r>t+1)return r;return e[e.length-1]}for(let r=e.length-1;r>=0;r-=1){const i=e[r];if(i<t-1)return i}return e[0]}const G4=300,H4=2e3,W4=1.5;function K4(e){const t=G4*Math.pow(W4,Math.max(0,e));return Math.min(H4,Math.round(t))}function Un(e,t){if(!e)return t;try{return JSON.parse(e)}catch{return t}}function kk(e,t){const n=new Map;return[...e,...t].forEach(r=>{const i=n.get(r.id);(!i||r.updatedAt>=i.updatedAt)&&n.set(r.id,r)}),Array.from(n.values()).sort((r,i)=>r.createdAt-i.createdAt)}function Ek(e,t=50){return[...e].sort((n,r)=>r.timestamp-n.timestamp).slice(0,t)}const Y4=[{minDepth:1,maxDepth:1,difficulty:1},{minDepth:2,maxDepth:3,difficulty:2},{minDepth:4,maxDepth:5,difficulty:3},{minDepth:6,maxDepth:7,difficulty:4},{minDepth:8,maxDepth:9,difficulty:5},{minDepth:10,maxDepth:12,difficulty:6},{minDepth:13,maxDepth:16,difficulty:7},{minDepth:17,maxDepth:20,difficulty:8},{minDepth:21,maxDepth:24,difficulty:9},{minDepth:25,maxDepth:Number.MAX_SAFE_INTEGER,difficulty:10}],oo=["latency storm","cache divergence","tool timeout chain","stale prompt vector","schema mismatch surge"],Ck=[{id:"seasonal-incident-sprint",title:"Resolve 3 raid objectives",goal:3,rewardCredits:120},{id:"boss-shutdown",title:"Defeat one boss encounter",goal:1,rewardCredits:200},{id:"guild-push",title:"Complete 2 guild operations",goal:2,rewardCredits:160},{id:"timeline-weaver",title:"Merge 2 timeline forks",goal:2,rewardCredits:150}],Q4={stability_patch:{credits:20,materials:12},precision_lens:{credits:28,materials:16},overclock_core:{credits:42,materials:24}};function we(e,t,n){return Math.min(n,Math.max(t,e))}function X4(e){let t=0;for(let n=0;n<e.length;n+=1)t=(t*31+e.charCodeAt(n))%1e5;return t}function zj(e,t,n){const r=oo[(e+t)%oo.length],i=oo[(e+t+2)%oo.length];return{id:`mission-${t}-${(e+t)%997}`,title:`Scenario Depth ${t}`,difficulty:J4(t),hazards:[r,i,...n.slice(-1)],rewardCredits:60+t*15}}function J4(e){var n;const t=Math.max(1,Math.floor(e));return((n=Y4.find(r=>t>=r.minDepth&&t<=r.maxDepth))==null?void 0:n.difficulty)??10}function Z4(){return[{id:"node-alpha",title:"Signal Fracture",body:"Telemetry divergence emerges across parallel tool paths.",choices:[{id:"alpha-risk",label:"Push aggressive branch optimization",nextNodeId:"node-beta",tensionDelta:12,mutator:"risk-surge"},{id:"alpha-safe",label:"Stabilize and preserve deterministic flow",nextNodeId:"node-beta",tensionDelta:-5,mutator:"stability-first"}]},{id:"node-beta",title:"Protocol Fork",body:"The team must choose speed versus interpretability under pressure.",choices:[{id:"beta-speed",label:"Favor speed and absorb uncertainty",nextNodeId:"node-gamma",tensionDelta:8,mutator:"throughput-boost"},{id:"beta-clarity",label:"Favor clarity and route through guardrails",nextNodeId:"node-gamma",tensionDelta:-3,mutator:"clarity-path"}]},{id:"node-gamma",title:"Final Directive",body:"Command has one move left before the run locks in.",choices:[{id:"gamma-strike",label:"Launch decisive strike sequence",nextNodeId:"node-alpha",tensionDelta:10,mutator:"strike-loop"},{id:"gamma-reset",label:"Reset tempo and rebuild confidence",nextNodeId:"node-alpha",tensionDelta:-6,mutator:"tempo-reset"}]}]}function Uj(e,t){return{...Ck[(e+t)%Ck.length],progress:0,completed:!1}}function Gj(e,t){const n=[...e,t];return Array.from(new Set(n)).slice(-6)}function dv(e,t,n){return{...e,campaign:{...e.campaign,depth:t,mutators:n,currentMission:zj(e.seed,t,n)}}}function Tk(e){const t=X4(e),n=["baseline"];return{seed:t,raid:{party:["director"],roles:{director:"strategist"},objectives:[{id:"obj-root-cause",label:"Identify root cause chain",progress:0,target:100,completed:!1},{id:"obj-recover",label:"Recover operational stability",progress:0,target:100,completed:!1},{id:"obj-harden",label:"Harden replay strategy",progress:0,target:100,completed:!1}],completed:!1},campaign:{depth:1,lives:3,completedMissionIds:[],mutators:n,currentMission:zj(t,1,n)},narrative:{currentNodeId:"node-alpha",nodes:Z4(),history:[],tension:35},skills:{points:6,nodes:[{id:"skill-focus",label:"Focus Matrix",cost:2,requires:[],unlocked:!1},{id:"skill-resilience",label:"Resilience Mesh",cost:2,requires:[],unlocked:!1},{id:"skill-surge",label:"Surge Compiler",cost:3,requires:["skill-focus"],unlocked:!1},{id:"skill-echo",label:"Echo Anticipator",cost:3,requires:["skill-resilience"],unlocked:!1}],loadout:{capacity:3,equipped:[]}},pvp:{round:0,stability:72,sabotage:28,fog:40,winner:null},time:{activeForkId:"primary",forks:[{id:"primary",label:"Primary timeline",playheadMs:0,history:[0]}]},boss:{name:"The Causality Hydra",phase:1,hp:320,maxHp:320,enraged:!1},director:{risk:30,hint:"Start with the bottleneck path and branch cautiously.",recommendedModifier:"stability_patch",lastOutcome:"mixed"},economy:{credits:140,materials:90,crafted:[]},guild:{name:"Trace Guild",members:4,operationsScore:0,eventsCompleted:0},cinematic:{queue:[]},liveops:{season:`Season-${2026+t%2}`,week:1,challenge:Uj(t,1),difficultyFactor:1,rewardMultiplier:1,tuningHistory:[]},safety:{mutedPlayerIds:[],blockedPlayerIds:[],reports:[]},outcome:{status:"in_progress",reason:"Run started. Complete missions and stabilize the incident.",updatedAt:Date.now()},sandbox:{enabled:!1},progression:{xp:0,level:1,nextLevelXp:200,milestones:[]}}}function wz(e,t){return{...e,sandbox:{enabled:t},outcome:t?{status:"in_progress",reason:"Sandbox mode enabled. Penalties are disabled for safe practice runs.",updatedAt:Date.now()}:e.outcome}}function bz(e,t,n){if(!t.trim())return e;const r=e.raid.party.includes(t)?e.raid.party:[...e.raid.party,t];return{...e,raid:{...e.raid,party:r,roles:{...e.raid.roles,[t]:n}}}}function xz(e,t,n){const r=lg(e),i=e.raid.objectives.map(l=>{if(l.id!==t)return l;const u=we(l.progress+n,0,l.target);return{...l,progress:u,completed:u>=l.target}}),a=i.every(l=>l.completed),s=a&&!e.raid.completed?180:0,o={...e,raid:{...e.raid,objectives:i,completed:a},economy:{...e.economy,credits:e.economy.credits+s},outcome:a&&!e.raid.completed?{status:"partial",reason:"Raid objectives completed. Push campaign and boss tracks to close the run.",updatedAt:Date.now()}:r};return a&&!e.raid.completed?zr(o,60):o}function Sz(e,t){const n=ez(e),r=e.campaign.currentMission;if(t){const l=e.campaign.depth+1,u=dv(e,l,e.campaign.mutators),c=l>=5?{status:"win",reason:"Campaign depth target reached. Incident run is stabilized.",updatedAt:Date.now()}:{status:"partial",reason:`Mission ${r.id} cleared. Advance deeper to secure the run.`,updatedAt:Date.now()},d={...u,campaign:{...u.campaign,completedMissionIds:[...u.campaign.completedMissionIds,r.id]},economy:{...u.economy,credits:u.economy.credits+r.rewardCredits,materials:u.economy.materials+14},director:{...u.director,lastOutcome:"success"},outcome:c};return zr(d,120)}const i=n.enabled?e.campaign.lives:we(e.campaign.lives-1,0,3),a=dv(e,e.campaign.depth,Gj(e.campaign.mutators,"failure-loop")),s=n.enabled?{status:"partial",reason:"Sandbox mode active. Failure recorded with no life penalty.",updatedAt:Date.now()}:i<=0?{status:"loss",reason:"No campaign lives remaining. Incident run failed.",updatedAt:Date.now()}:{status:"partial",reason:`Mission failed. ${i} campaign lives remaining.`,updatedAt:Date.now()},o={...a,campaign:{...a.campaign,lives:i},director:{...a.director,lastOutcome:"failure"},outcome:s};return zr(o,40)}function _z(e,t){const n=e.narrative.nodes.find(o=>o.id===e.narrative.currentNodeId),r=n==null?void 0:n.choices.find(o=>o.id===t);if(!n||!r)return e;const i=we(e.narrative.tension+r.tensionDelta,0,100),a=Gj(e.campaign.mutators,r.mutator),s=dv(e,e.campaign.depth,a);return{...s,narrative:{...s.narrative,currentNodeId:r.nextNodeId,history:[...s.narrative.history,{nodeId:n.id,choiceId:r.id}],tension:i}}}function kz(e,t){const n=e.skills.nodes.find(a=>a.id===t);if(!n||n.unlocked)return e;const r=new Set(e.skills.nodes.filter(a=>a.unlocked).map(a=>a.id));return!n.requires.every(a=>r.has(a))||e.skills.points<n.cost?e:{...e,skills:{...e.skills,points:e.skills.points-n.cost,nodes:e.skills.nodes.map(a=>a.id===t?{...a,unlocked:!0}:a)}}}function Ez(e,t){const n=e.skills.nodes.find(r=>r.id===t);return!(n!=null&&n.unlocked)||e.skills.loadout.equipped.includes(t)||e.skills.loadout.equipped.length>=e.skills.loadout.capacity?e:{...e,skills:{...e.skills,loadout:{...e.skills.loadout,equipped:[...e.skills.loadout.equipped,t]}}}}function Cz(e,t){const n=lg(e),r={...e.pvp};t==="sabotage"?(r.sabotage=we(r.sabotage+13,0,100),r.stability=we(r.stability-11,0,100),r.fog=we(r.fog+9,0,100)):t==="stabilize"?(r.stability=we(r.stability+14,0,100),r.sabotage=we(r.sabotage-8,0,100),r.fog=we(r.fog-6,0,100)):(r.fog=we(r.fog-16,0,100),r.stability=we(r.stability+3,0,100),r.sabotage=we(r.sabotage-4,0,100)),r.round+=1,r.stability<=0?r.winner="saboteur":r.sabotage<=0?r.winner="operator":r.round>=10&&(r.winner=r.stability>=r.sabotage?"operator":"saboteur");const i=r.winner==="operator"?{status:"win",reason:"Operator side prevailed in the sabotage conflict.",updatedAt:Date.now()}:r.winner==="saboteur"?{status:"loss",reason:"Saboteur pressure overwhelmed system stability.",updatedAt:Date.now()}:n,a={...e,pvp:r,outcome:i};return zr(a,r.winner?72:12)}function Tz(e,t,n){const r=`fork-${e.time.forks.length+1}`,i={id:r,label:t.trim()||r,playheadMs:we(n,0,36e5),history:[we(n,0,36e5)]};return{...e,time:{...e.time,activeForkId:r,forks:[...e.time.forks,i]}}}function Mz(e,t){const n=e.time.activeForkId,r=e.time.forks.map(i=>{if(i.id!==n)return i;const a=we(i.playheadMs-Math.abs(t),0,36e5);return{...i,playheadMs:a,history:[...i.history,a]}});return{...e,time:{...e.time,forks:r}}}function jz(e,t){if(t==="primary")return e;const n=e.time.forks.find(a=>a.id===t),r=e.time.forks.find(a=>a.id==="primary");if(!n||!r)return e;const i={...r,playheadMs:n.playheadMs,history:[...r.history,n.playheadMs]};return{...e,time:{activeForkId:"primary",forks:[i,...e.time.forks.filter(a=>a.id!=="primary"&&a.id!==t)]}}}function Pz(e,t){const n=lg(e),r=t==="exploit"?42:t==="strike"?24:8,i=we(e.boss.hp-r,0,e.boss.maxHp),a=i/e.boss.maxHp,s=a<=.33?3:a<=.66?2:1,o={...e,boss:{...e.boss,hp:i,phase:s,enraged:s===3||i<=e.boss.maxHp*.2},outcome:i<=0?{status:"win",reason:"Boss encounter cleared. Run secured.",updatedAt:Date.now()}:n};return zr(o,i<=0?180:10)}function Nz(e,t){const n=t.failures*12+t.retries*4+(t.latencyMs>1400?8:0),r=we(e.director.risk+n,0,100),i=t.failures>0?"Prioritize failure triage and run a stabilizing replay branch.":t.latencyMs>1400?"Latency pressure detected. Reduce fan-out and tighten tool boundaries.":"Momentum is stable. Push a high-confidence optimization branch.",a=t.failures>1?"stability_patch":t.latencyMs>1400?"precision_lens":"overclock_core",s=t.failures>0?"failure":"success";return{...e,director:{risk:r,hint:i,recommendedModifier:a,lastOutcome:s}}}function Az(e,t){const n=Q4[t];if(!n||e.economy.credits<n.credits||e.economy.materials<n.materials)return e;const r=e.economy.crafted.includes(t)?e.economy.crafted:[...e.economy.crafted,t];let i={...e,economy:{...e.economy,credits:e.economy.credits-n.credits,materials:e.economy.materials-n.materials,crafted:r}};return t==="stability_patch"&&(i={...i,pvp:{...i.pvp,stability:we(i.pvp.stability+8,0,100)}}),t==="precision_lens"&&(i={...i,raid:{...i.raid,objectives:i.raid.objectives.map((a,s)=>s===0?{...a,progress:we(a.progress+10,0,a.target),completed:we(a.progress+10,0,a.target)>=a.target}:a)}}),t==="overclock_core"&&(i={...i,boss:{...i.boss,hp:we(i.boss.hp-16,0,i.boss.maxHp)}}),zr(i,10)}function Rz(e,t){const n=Math.round(t),r={...e,guild:{...e.guild,operationsScore:e.guild.operationsScore+n,eventsCompleted:e.guild.eventsCompleted+(n>0?1:0)},economy:{...e.economy,credits:e.economy.credits+Math.max(0,n*3)}};return zr(r,Math.max(0,n*6))}function Iz(e,t,n,r){const i={id:`event-${e.cinematic.queue.length+1}-${e.seed%1e3}`,type:t,message:n,intensity:r,at:Date.now()};return{...e,cinematic:{queue:[i,...e.cinematic.queue].slice(0,12)}}}function Dz(e){const t=Hj(e),n=t.week+1,r=Uj(e.seed,n),i=we(t.difficultyFactor??1,.6,1.6),a=we(t.rewardMultiplier??1,.5,2),s={...r,goal:Math.max(1,Math.round(r.goal*i)),rewardCredits:Math.max(1,Math.round(r.rewardCredits*a))};return{...e,liveops:{...t,week:n,challenge:s}}}function Oz(e,t){const n=Hj(e),r=we(t.difficultyFactor,.6,1.6),i=we(t.rewardMultiplier,.5,2),a=n.difficultyFactor||1,s=n.rewardMultiplier||1,o=t.note.trim()||"Operator tuning update",l={...n.challenge,goal:Math.max(1,Math.round(n.challenge.goal/a*r)),rewardCredits:Math.max(1,Math.round(n.challenge.rewardCredits/s*i))},u={id:`tuning-${n.tuningHistory.length+1}-${e.seed%1e3}`,changedAt:Date.now(),difficultyFactor:r,rewardMultiplier:i,note:o};return{...e,liveops:{...n,challenge:l,difficultyFactor:r,rewardMultiplier:i,tuningHistory:[u,...n.tuningHistory].slice(0,20)}}}function Hj(e){var t,n,r,i,a,s;return{season:((t=e.liveops)==null?void 0:t.season)??"Season-2026",week:((n=e.liveops)==null?void 0:n.week)??1,challenge:((r=e.liveops)==null?void 0:r.challenge)??{id:"fallback-liveops",title:"Complete one objective",goal:1,progress:0,rewardCredits:100,completed:!1},difficultyFactor:((i=e.liveops)==null?void 0:i.difficultyFactor)??1,rewardMultiplier:((a=e.liveops)==null?void 0:a.rewardMultiplier)??1,tuningHistory:((s=e.liveops)==null?void 0:s.tuningHistory)??[]}}function sg(e){return e.trim().toLowerCase()}function og(e){return e.safety??{mutedPlayerIds:[],blockedPlayerIds:[],reports:[]}}function lg(e){return e.outcome??{status:"in_progress",reason:"Run in progress.",updatedAt:Date.now()}}function ez(e){return e.sandbox??{enabled:!1}}function tz(e){return e.progression??{xp:0,level:1,nextLevelXp:200,milestones:[]}}function zr(e,t){if(t<=0)return e;const n=tz(e);let r=n.xp+t,i=n.level,a=n.nextLevelXp,s=0;for(;r>=a;)r-=a,i+=1,s+=1,a=i*200;const o=[...n.milestones];return[3,5,10].forEach(l=>{const u=`milestone-level-${l}`;i>=l&&!o.includes(u)&&o.push(u)}),{...e,progression:{xp:r,level:i,nextLevelXp:a,milestones:o},skills:{...e.skills,points:e.skills.points+s}}}function Lz(e,t,n){const r=sg(t),i=n.trim();if(!r||!i)return e;const a=og(e),s={id:`report-${a.reports.length+1}-${e.seed%1e3}`,targetPlayerId:r,reason:i,createdAt:Date.now()};return{...e,safety:{...a,reports:[s,...a.reports].slice(0,40)}}}function qz(e,t){const n=sg(t),r=og(e);return!n||r.mutedPlayerIds.includes(n)?e:{...e,safety:{...r,mutedPlayerIds:[...r.mutedPlayerIds,n]}}}function Fz(e,t){const n=sg(t),r=og(e);return!n||r.blockedPlayerIds.includes(n)?e:{...e,safety:{...r,blockedPlayerIds:[...r.blockedPlayerIds,n],mutedPlayerIds:r.mutedPlayerIds.includes(n)?r.mutedPlayerIds:[...r.mutedPlayerIds,n]}}}const Mk=220,jk=120,fv="agentDirector.presence.v1",nz=2e4,rz=5e3,ci="agentDirector.collab.cursors.v1",Xp="agentDirector.collab.annotations.v1",Jp="agentDirector.collab.activity.v1",iz=S.lazy(()=>gs(()=>import("./index-BUKj4lxY.js"),__vite__mapDeps([0,1]))),az=S.lazy(()=>gs(()=>import("./index-BibOXOCi.js"),[])),sz=S.lazy(()=>gs(()=>import("./index-DEZQ9GOw.js"),[])),oz=S.lazy(()=>gs(()=>import("./index-DUaj6IN7.js"),[])),lz=S.lazy(()=>gs(()=>import("./index-umPQZ1Yh.js"),[]));function lo(){return`scenario-${Math.random().toString(36).slice(2,9)}`}function uz(e){return e.filter(t=>t.parentStepId).map(t=>({source:t.parentStepId,target:t.id}))}function cz(e){const t=[...e].sort((n,r)=>n.index-r.index);return t.slice(1).map((n,r)=>({source:t[r].id,target:n.id}))}function dz(e){const t={},n=e.getBoundingClientRect();return e.querySelectorAll(".step-card").forEach(i=>{const a=i.dataset.stepId;if(!a)return;const s=i.getBoundingClientRect();t[a]={left:s.left-n.left,top:s.top-n.top,width:s.width,height:s.height}}),t}function fz(e,t,n){const r=[...uz(e),...cz(e),...B4(e).map(v=>({source:v.source,target:v.target}))],i=F4(e,r,n),a=t.getBoundingClientRect(),s=Math.min(...i.map(v=>v.position.x)),o=Math.min(...i.map(v=>v.position.y)),l=Math.max(...i.map(v=>v.position.x)),u=Math.max(...i.map(v=>v.position.y)),c=l-s+Mk,d=u-o+jk,f=Math.max(32,(a.width-c)/2),m=Math.max(24,(a.height-d)/2);return i.reduce((v,p)=>(v[p.id]={left:p.position.x-s+f,top:p.position.y-o+m,width:Mk,height:jk},v),{})}function Pk(e,t,n){const r=t.trim().toLowerCase();return e.filter(i=>{var s,o,l;return n!=="all"&&i.type!==n?!1:r?[i.name,(s=i.preview)==null?void 0:s.title,(o=i.preview)==null?void 0:o.outputPreview,(l=i.preview)==null?void 0:l.inputPreview].filter(Boolean).join(" ").toLowerCase().includes(r):!0})}function hz(e,t,n){var u,c,d,f,m,v,p,x,y,g,b,k;const r=e.profiles[t]??e.profiles[((u=e.players[0])==null?void 0:u.player_id)??""]??Object.values(e.profiles)[0],i=e.players.reduce((_,C)=>(_[C.player_id]=C.role,_),{}),a=Object.entries(e.narrative.nodes).map(([_,C])=>({id:_,title:C.title,body:C.title,choices:C.choices.map(M=>({id:M.id,label:M.id,nextNodeId:M.next,tensionDelta:M.tension,mutator:M.modifier}))})),s=e.pvp.winner??null,l=e.telemetry.failures>0?"failure":s?"success":"mixed";return{seed:e.seed,raid:{party:e.players.map(_=>_.player_id),roles:i,objectives:e.raid.objectives.map(_=>({id:_.id,label:_.label,progress:_.progress,target:_.target,completed:_.completed})),completed:e.raid.completed},campaign:{depth:e.campaign.depth,lives:e.campaign.lives,currentMission:{id:e.campaign.current_mission.id,title:e.campaign.current_mission.title,difficulty:e.campaign.current_mission.difficulty,hazards:e.campaign.current_mission.hazards,rewardCredits:e.campaign.current_mission.reward_tokens},completedMissionIds:e.campaign.completed_missions,mutators:[...e.campaign.modifiers,...e.campaign.unlocked_modifiers]},narrative:{currentNodeId:e.narrative.current_node_id,nodes:a.length>0?a:n.narrative.nodes,history:e.narrative.history.map(_=>({nodeId:_.node_id,choiceId:_.choice_id})),tension:e.narrative.tension},skills:{points:(r==null?void 0:r.skill_points)??n.skills.points,nodes:n.skills.nodes.map(_=>({..._,unlocked:!!(r!=null&&r.unlocked_skills.includes(_.id))})),loadout:{capacity:(r==null?void 0:r.loadout_capacity)??n.skills.loadout.capacity,equipped:(r==null?void 0:r.loadout)??[]}},pvp:{round:e.pvp.round,stability:e.pvp.operator_stability,sabotage:e.pvp.sabotage_pressure,fog:e.pvp.fog,winner:s},time:{activeForkId:e.time.active_fork_id,forks:e.time.forks.map(_=>({id:_.id,label:_.label,playheadMs:_.playhead_ms,history:_.history}))},boss:{name:e.boss.name,phase:e.boss.phase,hp:e.boss.hp,maxHp:e.boss.max_hp,enraged:e.boss.enraged},director:{risk:e.director.risk,hint:e.director.hint,recommendedModifier:e.director.hazard_bias,lastOutcome:l},economy:{credits:e.economy.tokens,materials:e.economy.materials,crafted:e.economy.crafted},guild:{name:e.guild.guild_id??"Trace Guild",members:e.players.length,operationsScore:e.guild.operations_score,eventsCompleted:e.guild.events_completed},cinematic:{queue:e.cinematic.events.map(_=>({id:_.id,type:_.type==="critical"||_.type==="success"||_.type==="warning"||_.type==="twist"?_.type:"warning",message:_.message,intensity:_.intensity||1,at:Date.parse(_.at)||Date.now()}))},liveops:{season:e.liveops.season,week:e.liveops.week,challenge:{id:e.liveops.challenge.id,title:e.liveops.challenge.title,goal:e.liveops.challenge.goal,progress:e.liveops.challenge.progress,rewardCredits:e.liveops.challenge.reward,completed:e.liveops.challenge.completed},difficultyFactor:e.liveops.telemetry.difficultyFactor??n.liveops.difficultyFactor??1,rewardMultiplier:e.liveops.telemetry.rewardMultiplier??n.liveops.rewardMultiplier??1,tuningHistory:((c=e.liveops.tuning_history)==null?void 0:c.map(_=>({id:_.id,changedAt:Date.parse(_.changed_at)||Date.now(),difficultyFactor:_.difficultyFactor,rewardMultiplier:_.rewardMultiplier,note:_.note})))??n.liveops.tuningHistory??[]},safety:{mutedPlayerIds:((d=e.safety)==null?void 0:d.muted_player_ids)??n.safety.mutedPlayerIds??[],blockedPlayerIds:((f=e.safety)==null?void 0:f.blocked_player_ids)??n.safety.blockedPlayerIds??[],reports:((v=(m=e.safety)==null?void 0:m.reports)==null?void 0:v.map(_=>({id:_.id,targetPlayerId:_.target_player_id,reason:_.reason,createdAt:Date.parse(_.created_at)||Date.now()})))??n.safety.reports??[]},outcome:e.status==="completed"?{status:e.telemetry.successes>=e.telemetry.failures?"win":"loss",reason:e.telemetry.successes>=e.telemetry.failures?"Session completed with positive outcomes.":"Session completed with unresolved failures.",updatedAt:Date.now()}:e.telemetry.failures>0?{status:"partial",reason:`${e.telemetry.failures} failure signals observed; run still active.`,updatedAt:Date.now()}:n.outcome??{status:"in_progress",reason:"Run in progress.",updatedAt:Date.now()},sandbox:{enabled:((p=e.sandbox)==null?void 0:p.enabled)??((x=n.sandbox)==null?void 0:x.enabled)??!1},progression:{xp:(r==null?void 0:r.xp)??((y=n.progression)==null?void 0:y.xp)??0,level:(r==null?void 0:r.level)??((g=n.progression)==null?void 0:g.level)??1,nextLevelXp:((r==null?void 0:r.level)??((b=n.progression)==null?void 0:b.level)??1)*200,milestones:(r==null?void 0:r.milestones)??((k=n.progression)==null?void 0:k.milestones)??[]}}}function pz(){const e=window.sessionStorage.getItem("agentDirector.sessionId");if(e)return e;const t=`session-${Math.random().toString(36).slice(2,10)}`;return window.sessionStorage.setItem("agentDirector.sessionId",t),t}function Nk(){try{const e=window.localStorage.getItem(fv);if(!e)return{};const t=JSON.parse(e),n={};return Object.entries(t).forEach(([r,i])=>{typeof i=="number"&&(n[r]=i)}),n}catch{return{}}}function Ak(e,t=Date.now()){return Object.fromEntries(Object.entries(e).filter(([,n])=>t-n<nz))}function mz(){var jg,Pg;const{trace:e,insights:t,loading:n,error:r,reload:i,traces:a,selectedTraceId:s,setSelectedTraceId:o}=$q(),[l,u]=Ee("agentDirector.mode","cinema"),[c,d]=S.useState(""),f=S.useDeferredValue(c),[m,v]=S.useState("all"),[p,x]=S.useState(""),[y,g]=S.useState(null),[b,k]=S.useState(null),[_,C]=S.useState(null),[M,T]=S.useState([]),[j,N]=S.useState(""),[A,I]=S.useState(null),[L,K]=S.useState(!1),[V,le]=S.useState(null),[ie,R]=Ee("agentDirector.safeExport",!1),[q,G]=Ee("agentDirector.syncPlayback",!0),[z,ae]=S.useState(null),[Pe,oe]=S.useState(!1),[ce,$]=S.useState(0),[de,Mt]=Ee("agentDirector.speed",1),[fn,Zt]=Ee("agentDirector.windowed",!1),[gr,Jr]=S.useState(2e4),[F,te]=S.useState(!1),[Q,qe]=S.useState(!1),[ne,Fe]=Ee("agentDirector.overlayEnabled",!1),[On,Kl]=Ee("agentDirector.onboarded",!1),[,$t]=Ee("agentDirector.tourCompleted",!1),[Ge,me]=Ee("agentDirector.explainMode",!0),[Ln,qn]=Ee("agentDirector.heroDismissed",!1),[Yl,Zr]=Ee("agentDirector.dockOpen",!1),[Ze,Ms]=Ee("agentDirector.introPersona","builder"),[ei,ta]=Ee("agentDirector.launchPath","rapid_triage"),[wr,en]=Ee("agentDirector.themeMode","studio"),[Bt,Wj]=Ee("agentDirector.motionMode","balanced"),[Be,ug]=Ee("agentDirector.timelineLaneStrategy","type"),[cg,ti]=Ee("agentDirector.timelineStudioConfig",va),[js,st]=Ee("agentDirector.missions",{playback:!1,flow:!1,inspect:!1,matrix:!1,replay:!1,annotate:!1,collaborate:!1}),Ps=!1,[Ns,As]=Ee("agentDirector.introDismissed",Ps),[Ql,Ke]=S.useState(!1),[fe,Rs]=S.useState(null),[Is,Xl]=S.useState([]),[Jl,Zl]=S.useState(null),[Kj,dg]=S.useState(null),[eu,tu]=S.useState(""),[Yj,ni]=S.useState([{id:lo(),name:"Prompt tighter",strategy:"hybrid",modificationsText:'{"prompt":"Return concise response"}'},{id:lo(),name:"Recorded baseline",strategy:"recorded",modificationsText:"{}"}]),[na,nu]=S.useState(null),[jt,fg]=S.useState(null),[Qj,Ds]=S.useState(!1),[Xj,ra]=S.useState(null),[pe,ia]=Ee("agentDirector.gameplayState.v1",Tk("bootstrap")),[ke,hg]=Ee("agentDirector.gameplayTraceId.v1",""),[br]=Ee("agentDirector.gameplayPlayerId.v1",`player-${Math.random().toString(36).slice(2,8)}`),[xr,ri]=Ee("agentDirector.gameplaySessionId.v1",""),[De,Fn]=S.useState(null),[Jj,Ne]=S.useState(null),[Zj,ii]=S.useState(null),[eP,tP]=S.useState(null),[nP,rP]=S.useState(null),[ru,pg]=S.useState(1),[iP,iu]=S.useState(null),[aP,au]=S.useState(null),[mg,su]=S.useState({}),[vg,ou]=S.useState([]),[sP,lu]=S.useState([]),[aa,uu]=S.useState(800),[oP,lP]=S.useState(0),cu=S.useRef(null),yg=S.useRef(null),ai=S.useRef(pz()),gg=S.useRef(0),wg=S.useRef(0),du=S.useRef(!1),bg=S.useRef({}),Vn=S.useMemo(()=>{if(!e)return[];const w=performance.now(),E=Pk(e.steps,f,m);return wg.current=performance.now()-w,E},[e,f,m]),fu=S.useMemo(()=>Vn.slice(0,Math.min(Vn.length,aa)),[aa,Vn]),xg=S.useMemo(()=>{if(!y)return fu;const w=new Set(y.matchedStepIds);return fu.filter(E=>w.has(E.id))},[fu,y]),uP=S.useMemo(()=>z?Pk(z.steps,f,m).slice(0,Math.min(z.steps.length,aa)):[],[z,f,m,aa]),Sg=S.useMemo(()=>e?z4(e.startedAt,e.endedAt,e.steps):[],[e]),cP=S.useMemo(()=>!e||!z?null:kM(e,z),[e,z]),_g=S.useMemo(()=>e?e.steps.find(w=>w.id===V)??null:null,[e,V]),sa=S.useMemo(()=>e?zR(e.steps,Be):[],[e,Be]),si=S.useMemo(()=>{const w=cg[Be]??va[Be];return $0(sa,w.order,w.hidden)},[sa,Be,cg]),dP=S.useMemo(()=>si.order.filter(w=>!si.hidden.includes(w)),[si.hidden,si.order]),Os=S.useMemo(()=>{const w=ai.current;return Object.values(mg).filter(E=>E.sessionId!==w).filter(E=>E.traceId===((e==null?void 0:e.id)??"none")).sort((E,P)=>P.updatedAt-E.updatedAt)},[mg,e==null?void 0:e.id]),fP=S.useMemo(()=>Os.map(w=>w.playheadMs),[Os]),hP=S.useMemo(()=>vg.filter(w=>w.traceId===(e==null?void 0:e.id)),[vg,e==null?void 0:e.id]),kg=S.useMemo(()=>{const w=Object.keys(js).length,E=Object.values(js).filter(Boolean).length;return{done:E,total:w,pct:w>0?Math.round(E/w*100):0}},[js]),hu=S.useMemo(()=>{var W;if(!e)return 100;const w=100,E=Math.min(60,((t==null?void 0:t.errors)??0)*16),P=Math.min(24,((t==null?void 0:t.retries)??0)*6),D=e.metadata.wallTimeMs>6e4?12:e.metadata.wallTimeMs>3e4?6:0,U=(W=t==null?void 0:t.timing)!=null&&W.degraded?8:0;return Math.max(0,Math.min(100,Math.round(w-E-P-D-U)))},[t==null?void 0:t.errors,t==null?void 0:t.retries,(jg=t==null?void 0:t.timing)==null?void 0:jg.degraded,e]),pP=S.useMemo(()=>l==="flow"?"F / C / Space":l==="compare"?"C / Space /  ":l==="matrix"?"G / C / Cmd+K":l==="gameplay"?"G / S / Cmd+K":"C / F / Space",[l]);S.useEffect(()=>{e&&e.id!==ke&&(ia(Tk(e.id)),hg(e.id))},[ke,ia,hg,e]),S.useEffect(()=>{let w=!1;if(!xr){Fn(null);return}return vb().then(E=>{w||(Fn(E),E||Ne("Gameplay session not found."))}),()=>{w=!0}},[xr]),S.useEffect(()=>{if(!xr)return;const w=Vq();return()=>w()},[xr]),S.useEffect(()=>{De&&ia(w=>hz(De,br,w))},[br,De,ia]),S.useEffect(()=>{let w=!1;if(!(De==null?void 0:De.guild.guild_id)){ii(null);return}return Iq().then(P=>{w||ii(P)}),()=>{w=!0}},[De==null?void 0:De.guild.guild_id]),S.useEffect(()=>{let w=!1;const E=async()=>{const[D,U]=await Promise.all([qq(),Fq()]);w||(D&&tP(D),U&&rP(U))};E();const P=window.setInterval(()=>{E()},3e4);return()=>{w=!0,window.clearInterval(P)}},[]),S.useEffect(()=>{g(null),k(null)},[e==null?void 0:e.id]),S.useEffect(()=>{lP(Math.round(wg.current))},[Vn]),S.useEffect(()=>{if(!e)return;const w=Vn.length;if(w<=1200){uu(w);return}uu(800);const E=window.setInterval(()=>{uu(P=>P>=w?(window.clearInterval(E),w):Math.min(w,P+1e3))},70);return()=>window.clearInterval(E)},[Vn.length,e]),S.useEffect(()=>{let w=!1;if(!(e!=null&&e.id)){C(null);return}return Sq(e.id).then(E=>{w||C(E)}),()=>{w=!0}},[e==null?void 0:e.id]),S.useEffect(()=>{let w=!1;return _q().then(E=>{w||(T(E),!j&&E.length>0&&N(E[0].id))}),()=>{w=!0}},[j]),S.useEffect(()=>{yg.current=z},[z]),S.useEffect(()=>(document.body.dataset.theme=wr,()=>{delete document.body.dataset.theme}),[wr]),S.useEffect(()=>(document.body.dataset.motion=Bt,()=>{delete document.body.dataset.motion}),[Bt]),S.useEffect(()=>{const w=ai.current,E=(J=!1)=>{const Ae=Date.now(),mn=Ak(Nk(),Ae);J?delete mn[w]:mn[w]=Ae,window.localStorage.setItem(fv,JSON.stringify(mn)),pg(Math.max(1,Object.keys(mn).length))},P=()=>{const J=Ak(Nk(),Date.now());pg(Math.max(1,Object.keys(J).length))};E();const D=window.setInterval(()=>E(),rz),U=J=>{J.key===fv&&P()},W=()=>{document.visibilityState==="visible"&&E()},ee=()=>E(!0);return window.addEventListener("storage",U),document.addEventListener("visibilitychange",W),window.addEventListener("beforeunload",ee),()=>{window.clearInterval(D),E(!0),window.removeEventListener("storage",U),document.removeEventListener("visibilitychange",W),window.removeEventListener("beforeunload",ee)}},[]),S.useEffect(()=>{l==="compare"&&Zr(!1)},[l,Zr]),S.useEffect(()=>{sa.length!==0&&ti(w=>{const E=w[Be]??va[Be],P=$0(sa,E.order,E.hidden);return P.order.join("|")===E.order.join("|")&&P.hidden.join("|")===E.hidden.join("|")?w:{...w,[Be]:P}})},[sa,Be,ti]),S.useEffect(()=>{su(Un(window.localStorage.getItem(ci),{})),ou(Un(window.localStorage.getItem(Xp),[])),lu(Un(window.localStorage.getItem(Jp),[]))},[]),S.useEffect(()=>{const w=Date.now();if(w-gg.current<120&&Pe)return;gg.current=w;const E=ai.current,P={sessionId:E,traceId:(e==null?void 0:e.id)??"none",mode:l,playheadMs:Math.round(ce),selectedStepId:V,updatedAt:w},U={...Un(window.localStorage.getItem(ci),{}),[E]:P};window.localStorage.setItem(ci,JSON.stringify(U)),su(U)},[Pe,l,ce,V,e==null?void 0:e.id]),S.useEffect(()=>{const w=ai.current;return()=>{const E=Un(window.localStorage.getItem(ci),{});if(!E[w])return;const P={...E};delete P[w],window.localStorage.setItem(ci,JSON.stringify(P))}},[]),S.useEffect(()=>{const w=E=>{if(E.key===ci&&su(Un(E.newValue,{})),E.key===Xp){const P=Un(E.newValue,[]);ou(D=>kk(D,P))}E.key===Jp&&lu(Ek(Un(E.newValue,[])))};return window.addEventListener("storage",w),()=>window.removeEventListener("storage",w)},[]);const X=S.useCallback(w=>{const E={id:`activity-${Math.random().toString(36).slice(2,9)}`,sessionId:ai.current,message:w,timestamp:Date.now()};lu(P=>{const D=Ek([E,...P]);return window.localStorage.setItem(Jp,JSON.stringify(D)),D})},[]),ot=S.useCallback((w,E,P)=>{bg.current[w]||(bg.current[w]=!0,$4(E,P))},[]),hn=S.useCallback(async w=>{if(!e)return;const E=await Eq(e.id,w,"hybrid",{note:"UI replay"},e);E&&(ae(E),Fe(!0),u("flow"),st(P=>P.replay?P:{...P,replay:!0}),X(`Created replay from ${w}`))},[X,st,e,ae,u,Fe]),mP=S.useCallback(async()=>{if(!e)return;if(!p.trim()){g(null),k(null);return}const w=await xq(e.id,p.trim());if(!w){k("TraceQL query failed"),g(null);return}g(w),k(null);const E=w.matchedStepIds[0];E&&(le(E),l!=="cinema"&&u("cinema"))},[l,u,e,p]),vP=S.useCallback(async()=>{if(!e||!j)return;K(!0);const w=await kq(j,e.id);K(!1),w&&I(w.result)},[j,e]),Pt=S.useCallback(()=>{if(!e)return;const w=[...e.steps].sort((E,P)=>(P.durationMs??0)-(E.durationMs??0))[0];w&&(le(w.id),u("cinema"))},[e,u]),Eg=S.useCallback(()=>{if(!e||e.steps.length===0)return null;const w=[...e.steps].sort((E,P)=>(P.durationMs??0)-(E.durationMs??0))[0];return(w==null?void 0:w.id)??null},[e]),Sr=S.useCallback(()=>{if(!e)return;const w=e.steps.find(E=>E.status==="failed");w&&(le(w.id),u("cinema"))},[e,u]),pu=S.useCallback(async()=>{if(!e)return;const w=new URL(window.location.href);w.searchParams.set("trace",s??e.id),w.searchParams.set("mode",l),V?w.searchParams.set("step",V):w.searchParams.delete("step");try{await navigator.clipboard.writeText(w.toString()),iu("Live link copied")}catch{window.prompt("Copy live session link",w.toString()),iu("Live link ready")}window.setTimeout(()=>iu(null),1800)},[l,V,s,e]),yP=S.useCallback(w=>{ug(w),X(`Switched lane strategy to ${w}`)},[X,ug]),gP=S.useCallback(w=>{ti(E=>{const P=E[Be]??va[Be],D=P.hidden.includes(w)?P.hidden.filter(U=>U!==w):[...P.hidden,w];return{...E,[Be]:{...P,hidden:D}}}),X(`Toggled lane visibility for ${w}`)},[X,Be,ti]),wP=S.useCallback(async w=>{if(!e)return;const E=await Pq({traceId:e.id,name:w.trim()||"Night Ops"});if(!E){Ne("Failed to create gameplay session.");return}Fn(E),ri(E.id),Ne(null),X(`Created gameplay session ${E.id}`)},[X,br,ri,e]),bP=S.useCallback(async(w,E,P)=>{if(!w.trim()){Ne("Session id is required.");return}const D=await Nq({sessionId:w.trim(),playerId:E.trim()});if(!D){Ne("Failed to join gameplay session.");return}Fn(D),ri(D.id),Ne(null),X(`Joined gameplay session ${D.id} as ${E}`)},[X,ri]),xP=S.useCallback(async()=>{if(!xr)return;if(!await Aq()){Ne("Failed to leave gameplay session.");return}Fn(null),ri(""),Ne(null),X(`Left gameplay session ${xr}`)},[X,br,xr,ri]),SP=S.useCallback(async(w,E)=>{if(!(De!=null&&De.id))return;const P=await yb({sessionId:De.id,expectedVersion:De.version});if(P.session){Fn(P.session),Ne(null),X(`Gameplay action: ${w}`);return}if(P.conflict){const D=await vb(De.id);D&&Fn(D),Ne("Session changed by another player. Synced latest state.");return}Ne(P.error??"Gameplay action failed.")},[X,br,De]),_P=S.useCallback(async(w,E)=>{if(!w.trim()||!E.trim()){Ne("Guild id and name are required.");return}const P=await Rq({guildId:w.trim(),name:E.trim()});if(!P){Ne("Failed to create guild.");return}if(ii(P),De){const D=await yb({sessionId:De.id,payload:{guild_id:P.id},expectedVersion:De.version});D.session&&Fn(D.session)}Ne(null),X(`Created guild ${P.id}`)},[X,br,De]),kP=S.useCallback(async(w,E)=>{if(!w.trim()||!E.trim()){Ne("Guild id and player id are required.");return}const P=await Dq(w.trim(),E.trim());if(!P){Ne("Failed to join guild.");return}ii(P),Ne(null),X(`Joined guild ${P.id} as ${E}`)},[X]),EP=S.useCallback(async(w,E,P)=>{if(!w.trim()||!E.trim()||!P.trim()){Ne("Guild id, title, and schedule are required.");return}const D=await Oq({guildId:w.trim(),title:E.trim(),scheduledAt:P.trim()});if(!D){Ne("Failed to schedule guild event.");return}ii(D.guild),Ne(null),X(`Scheduled guild event ${D.event.id}`)},[X]),CP=S.useCallback(async(w,E,P)=>{const D=await Lq();if(!D){Ne("Failed to complete guild event.");return}ii(D),Ne(null),X(`Completed guild event ${E}`)},[X]),TP=S.useCallback((w,E)=>{ti(P=>{const D=P[Be]??va[Be],U=[...D.order],W=U.indexOf(w);if(W===-1)return P;const ee=E==="up"?W-1:W+1;if(ee<0||ee>=U.length)return P;const[J]=U.splice(W,1);return U.splice(ee,0,J),{...P,[Be]:{...D,order:U}}}),X(`Moved lane group ${w} ${E}`)},[X,Be,ti]),MP=S.useCallback(()=>{st({playback:!1,flow:!1,inspect:!1,matrix:!1,replay:!1,annotate:!1,collaborate:!1}),X("Reset onboarding missions")},[X,st]),jP=S.useCallback((w,E)=>{if(!e||!w.trim())return;const P=Date.now(),D={id:`annotation-${Math.random().toString(36).slice(2,9)}`,traceId:e.id,stepId:E,body:w.trim(),authorSessionId:ai.current,createdAt:P,updatedAt:P};ou(U=>{const W=kk(U,[D]);return window.localStorage.setItem(Xp,JSON.stringify(W)),W}),st(U=>U.annotate?U:{...U,annotate:!0}),X(E?`Added annotation on step ${E}`:"Added trace annotation")},[X,st,e]),PP=S.useCallback((w,E)=>{ni(P=>P.map(D=>D.id===w?{...D,...E}:D))},[]),NP=S.useCallback(w=>{ni(w)},[]),AP=S.useCallback(()=>{ni(w=>[...w,{id:lo(),name:`Scenario ${w.length+1}`,strategy:"hybrid",modificationsText:"{}"}])},[]),RP=S.useCallback(w=>{ni(E=>E.length<=1?E:E.filter(P=>P.id!==w))},[]),IP=S.useCallback(w=>{ni(E=>{const P=E.findIndex(ee=>ee.id===w);if(P===-1)return E;const D=E[P],U={...D,id:lo(),name:`${D.name} copy`},W=[...E];return W.splice(P+1,0,U),W})},[]),DP=S.useCallback((w,E)=>{ni(P=>{const D=P.findIndex(J=>J.id===w);if(D===-1)return P;const U=E==="up"?D-1:D+1;if(U<0||U>=P.length)return P;const W=[...P],[ee]=W.splice(D,1);return W.splice(U,0,ee),W})},[]),OP=S.useCallback(async w=>{var P;if(!e)return;const E=eu||V||((P=e.steps[0])==null?void 0:P.id);if(!E){ra("Select an anchor step before running the matrix.");return}try{Ds(!0),ra(null);const D=await Cq({traceId:e.id,stepId:E,scenarios:w});if(!D)throw new Error("Failed to create replay job.");nu(D);let U=D;for(let ee=0;ee<30&&!(U.status!=="queued"&&U.status!=="running");ee+=1){const J=K4(ee);await new Promise(mn=>window.setTimeout(mn,J));const Ae=await Tq(D.id);if(!Ae)break;U=Ae,nu(Ae)}const W=await mb(D.id);if(!W)throw new Error("Replay job finished but matrix summary is unavailable.");fg(W),u("matrix"),X(`Ran matrix with ${w.length} scenario(s) from ${E}`)}catch(D){ra(D instanceof Error?D.message:"Failed to run replay matrix.")}finally{Ds(!1)}},[X,eu,V,e,u]),LP=S.useCallback(async()=>{if(na){Ds(!0);try{const w=await Mq(na.id);if(!w){ra("Failed to cancel replay job.");return}nu(w);const E=await mb(w.id);E&&fg(E),X(`Canceled matrix job ${na.id}`)}finally{Ds(!1)}}},[X,na]),qP=S.useCallback(async w=>{const E=await EM();if(!(E!=null&&E.trace)){ra("Could not load replay trace for compare view.");return}ae(E.trace),Fe(!0),u("compare"),X(`Opened matrix compare trace ${w}`)},[X,u,Fe]),ve=S.useCallback(w=>{if(!(w===l||!e)){if((w==="flow"||w==="matrix"||w==="gameplay")&&oe(!1),w==="flow"&&l==="cinema"&&cu.current){const E=cu.current,P=dz(E),D=fz(e.steps,E,e.id);dg({steps:e.steps,fromRects:P,toRects:D}),X("Morphed cinema to flow");return}u(w),X(`Switched mode to ${w}`)}},[X,l,e,oe,u]),oa=S.useCallback(async w=>{if(ta(w),w==="rapid_triage"){me(!0),ve("cinema"),Sr(),e!=null&&e.steps.some(E=>E.status==="failed")||Pt(),X("Started rapid triage launch path");return}if(w==="deep_diagnosis"){me(!0),ve("flow"),Ke(!0),X("Started deep diagnosis launch path");return}G(!0),ve("matrix"),await pu(),X("Started team sync launch path")},[X,ve,Pt,Sr,me,ta,G,pu,e]),mu=S.useCallback(()=>{l==="flow"&&ve("cinema"),oe(w=>!w)},[l,ve]),$n=S.useCallback(()=>{Rs(null),Xl([]),Zl(null),oe(!1)},[oe]),Cg=S.useCallback(w=>[{id:"setup",label:"Opening the reel",duration:1100,action:()=>{me(!0),oe(!1),$(0),le(null),Fe(!1),Mt(1),e&&e.steps.length<500&&Zt(!1),ve("cinema")}},{id:"pace",label:"Pacing the timeline",duration:2200,action:()=>{ve("cinema"),oe(!0),Mt(1.1)}},{id:"bottleneck",label:"Freeze on the bottleneck",duration:1600,action:()=>{oe(!1),Pt()}},{id:"inspect",label:"Inspect the moment",duration:1600,action:()=>{w&&le(w)}},{id:"flow",label:"Morph into flow",duration:2100,action:()=>{ve("flow")}},{id:"replay",label:"Directors Cut replay",duration:2200,action:async()=>{if(!e)return;!yg.current&&w&&await hn(w),Fe(!0),u("compare")}},{id:"compare",label:"Compare the cut",duration:2e3,action:()=>{oe(!0),Mt(1)}},{id:"finale",label:"Final frame",duration:1100,action:()=>{oe(!1)}}],[ve,hn,Pt,me,oe,u,Fe,$,le,Mt,Zt,e]),oi=S.useCallback(()=>{var E;if(!e)return;const w=V??Eg()??((E=e.steps[0])==null?void 0:E.id)??null;Xl(Cg(w)),Rs({active:!0,step:0}),Zl(e.id),Ke(!1),te(!1),qe(!1)},[Cg,Eg,V,e,qe,te,Xl,Rs,Zl,Ke]),li=S.useCallback(()=>{if(fe!=null&&fe.active){$n();return}oi()},[oi,$n,fe==null?void 0:fe.active]),FP=S.useMemo(()=>{const E=[{id:"header",title:"Mission control",body:`Confirm run status and metadata. ${{builder:"Focus on payload flow, tool-call sequencing, and replay-ready steps.",executive:"Focus on bottlenecks, risk signals, and run-level outcome changes.",operator:"Focus on failure patterns, retries, and runtime reliability posture."}[Ze]}`,target:'[data-tour="header"]',placement:"bottom"}];return Ln||E.push({id:"hero",title:"Director briefing",body:"Choose Tour, Story mode, or Explain to ramp up quickly.",target:'[data-tour="hero"]',placement:"bottom"}),E.push({id:"insights",title:"Fast diagnosis",body:Ze==="executive"?"Jump straight to bottlenecks and high-cost segments for fast executive readouts.":Ze==="operator"?"Jump to failures and retries first, then inspect impacted steps.":"Jump straight to bottlenecks, errors, and high-cost steps with one click.",target:'[data-tour="insights"]',placement:"bottom"},{id:"journey",title:"Director journey",body:"A narrative path that teaches how to watch, inspect, and direct a better run.",target:'[data-tour="journey"]',placement:"bottom"},{id:"toolbar",title:"Filters + modes",body:"Search, filter, and switch between Cinema, Flow, and Compare as the story evolves.",target:'[data-tour="toolbar"]',placement:"bottom"},{id:"quick-actions",title:"Quick actions",body:"Launch Story Mode, open the command palette, or jump to bottlenecks instantly.",target:'[data-tour="quick-actions"]',placement:"left"},{id:"stage",title:"Cinema stage",body:"The timeline shows every step as a scene. Scrub to see pacing and concurrency.",target:'[data-tour="stage"]',placement:"top"},{id:"inspector",title:"Inspector",body:Ze==="executive"?"Open key moments to validate outcome impact and communication-ready summaries.":"Open any step to read payloads, apply redaction, and replay from that moment.",target:'[data-tour="inspector"]',placement:"left"},{id:"compare",title:"Compare runs",body:z?"Compare is live. Review deltas in cost, steps, and wall time side by side.":"Replay from a step to unlock compare mode and validate improvements.",target:'[data-tour="compare"]',placement:"top"}),E},[z,Ln,Ze]),VP=S.useCallback(()=>{dg(null),u("flow")},[u]),tn=S.useMemo(()=>{var D,U,W,ee;if(!e)return[];const w=[],E=[...e.steps].sort((J,Ae)=>(Ae.durationMs??0)-(J.durationMs??0))[0],P=e.steps.find(J=>J.status==="failed");if(P&&V!==P.id&&w.push({id:"jump-error",title:"Investigate first failure",body:`${P.name} failed and should be inspected before optimization work.`,actionLabel:"Open failed step",tone:"warning",action:Sr}),E&&V!==E.id&&w.push({id:"jump-bottleneck",title:"Tackle latency bottleneck",body:`${E.name} is the slowest scene in this run and the best optimization target.`,actionLabel:"Open bottleneck",tone:"priority",action:Pt}),(D=_==null?void 0:_.hypotheses)!=null&&D[0]){const J=_.hypotheses[0];w.push({id:"investigate-hypothesis",title:J.title,body:J.summary,actionLabel:"Inspect evidence",tone:"info",action:()=>{const Ae=J.evidenceStepIds[0];Ae&&(le(Ae),l!=="cinema"&&u("cinema"))}})}if(l!=="matrix"&&w.push({id:"matrix-experiment",title:"Run scenario matrix",body:"Compare prompt and strategy alternatives from one anchor step to rank causal impact.",actionLabel:"Open matrix",tone:"info",action:()=>{var J;tu(V??((J=e.steps[0])==null?void 0:J.id)??""),u("matrix")}}),!z&&(V||(U=e.steps[0])!=null&&U.id)){const J=V??((W=e.steps[0])==null?void 0:W.id)??null;J&&w.push({id:"run-replay",title:"Create director replay",body:"Branch a replay trace and validate whether your change improves the run.",actionLabel:"Replay from step",tone:"info",action:()=>{hn(J)}})}if((ee=jt==null?void 0:jt.causalRanking)!=null&&ee.length){const J=jt.causalRanking[0];w.push({id:"causal-factor",title:`Top causal factor: ${J.factor}`,body:`Confidence ${(J.confidence*100).toFixed(0)}% across ${J.evidence.samples} sample(s).`,actionLabel:"View matrix",tone:"priority",action:()=>u("matrix")})}return w.slice(0,4)},[z,hn,_,Pt,Sr,l,jt,V,e,u]),$P=S.useMemo(()=>tn.map((w,E)=>{const P=w.tone==="warning"?"high":w.tone==="priority"?"medium":"low";return{id:`priority-${w.id}`,title:w.title,detail:w.body,severity:P,actionLabel:w.actionLabel,onAction:w.action,done:E===0?w.id==="jump-error"&&!!V||w.id==="jump-bottleneck"&&!!V:!1}}),[tn,V]),_r=S.useMemo(()=>{var W,ee;if(!e)return"No trace loaded.";const w=[...e.steps].sort((J,Ae)=>(Ae.durationMs??0)-(J.durationMs??0))[0],E=e.steps.filter(J=>J.status==="failed").length,P=(W=_==null?void 0:_.hypotheses)==null?void 0:W[0],D=(ee=jt==null?void 0:jt.causalRanking)==null?void 0:ee[0];return[`Run ${e.id} completed with ${e.steps.length} steps across ${e.metadata.wallTimeMs}ms.`,w?`Primary latency driver: ${w.name} (${w.durationMs??0}ms).`:null,E>0?`Observed ${E} failed step(s), indicating reliability risk.`:"No failed steps observed.",P?`Top investigation hypothesis: ${P.title} (${P.severity}).`:null,D?`Highest ranked causal factor from matrix: ${D.factor} (${(D.confidence*100).toFixed(0)}% confidence).`:null,"Recommended plan: inspect bottleneck evidence, validate with replay matrix, and lock in mitigations."].filter(Boolean).join(" ")},[_,jt==null?void 0:jt.causalRanking,e]),BP=S.useCallback(w=>{var P,D;const E=w.toLowerCase();if(!e)return"No trace is loaded yet.";if(E.includes("bottleneck")||E.includes("slow")){const U=[...e.steps].sort((W,ee)=>(ee.durationMs??0)-(W.durationMs??0))[0];return U?`The primary bottleneck is ${U.name} at ${U.durationMs??0}ms. Prioritize this step for optimization and replay validation.`:"No bottleneck could be determined from current trace data."}if(E.includes("risk")||E.includes("failure")||E.includes("error")){const U=e.steps.filter(W=>W.status==="failed");return U.length?`Risk is concentrated in ${U.length} failed step(s), starting at ${((P=U[0])==null?void 0:P.name)??"unknown"}.`:"Failure risk appears low for this run; no failed steps were observed."}return E.includes("cost")?`Recorded run cost is ${(e.metadata.totalCostUsd??0).toFixed(4)} USD. Use matrix scenarios to evaluate cheaper prompt/strategy options.`:E.includes("next")||E.includes("action")?tn.length?`Next action: ${((D=tn[0])==null?void 0:D.title)??"Open matrix"}.`:"Next action: open Cinema mode, inspect bottleneck, then run the matrix.":_r},[_r,tn,e]),zP=S.useCallback(()=>{if(!e)return;const w=`# Director Narrative

${_r}

## Recommended Actions
${tn.map(E=>`- ${E.title}: ${E.body}`).join(`
`)}`;eI(`agent-director-narrative-${e.id}.md`,w,"text/markdown")},[_r,tn,e]),Ls=S.useCallback(async()=>{if(!e)return;const w=tn[0],E=e.steps.filter(U=>U.status==="failed").length,D=[`Session handoff (${new Date().toISOString()})`,`Trace: ${e.id}`,`Mode: ${l}`,`Selected step: ${V??"none"}`,`Run health: ${hu}/100`,`Failures: ${E}`,`Wall time: ${e.metadata.wallTimeMs}ms`,`Top recommendation: ${w?`${w.title} -> ${w.actionLabel}`:"None"}`,`Narrative: ${_r}`].join(`
`);try{await navigator.clipboard.writeText(D),au("Handoff digest copied")}catch{window.prompt("Copy handoff digest",D),au("Handoff digest ready")}window.setTimeout(()=>au(null),2200)},[_r,tn,l,hu,V,e]);S.useEffect(()=>{var P;if(!e)return;bq(),$(0),oe(!1);const w=Math.min(Math.max((e.metadata.wallTimeMs||1)*.2,5e3),6e4);Jr(w),e.steps.length>500&&Zt(!0),z||Fe(!1),l==="compare"&&!z&&u("cinema");const E=V&&e.steps.some(D=>D.id===V)?V:((P=e.steps[0])==null?void 0:P.id)??"";tu(D=>D&&e.steps.some(U=>U.id===D)?D:E)},[e,z,l,V,u,Zt,Fe]),S.useEffect(()=>(document.body.classList.toggle("explain-mode",Ge),()=>{document.body.classList.remove("explain-mode")}),[Ge]),S.useEffect(()=>(document.body.classList.toggle("story-mode",!!(fe!=null&&fe.active)),()=>{document.body.classList.remove("story-mode")}),[fe==null?void 0:fe.active]),S.useEffect(()=>{if(!(fe!=null&&fe.active))return;const w=Is[fe.step];if(!w){$n();return}Promise.resolve(w.action());const E=window.setTimeout(()=>{Rs(P=>P&&P.active?{...P,step:P.step+1}:P)},w.duration);return()=>window.clearTimeout(E)},[Is,$n,fe]),S.useEffect(()=>{fe!=null&&fe.active&&(!e||!Jl||e.id!==Jl&&$n())},[fe==null?void 0:fe.active,e,Jl,$n]),S.useEffect(()=>{Ns||Ps||ot(`tutorial_start:${(e==null?void 0:e.id)||ke||pe.seed}`,"funnel.tutorial_start",{traceId:(e==null?void 0:e.id)||ke||"unknown",persona:Ze,launchPath:ei})},[ot,pe.seed,ke,Ns,Ze,ei,Ps,e==null?void 0:e.id]),S.useEffect(()=>{ce>0&&st(w=>w.playback?w:{...w,playback:!0})},[ce,st]),S.useEffect(()=>{l==="flow"&&st(w=>w.flow?w:{...w,flow:!0}),l==="matrix"&&st(w=>w.matrix?w:{...w,matrix:!0})},[l,st]),S.useEffect(()=>{V&&st(w=>w.inspect?w:{...w,inspect:!0})},[V,st]),S.useEffect(()=>{ru>1&&st(w=>w.collaborate?w:{...w,collaborate:!0})},[ru,st]),S.useEffect(()=>{ot(`session_start:${ke||pe.seed}`,"funnel.session_start",{traceId:ke||(e==null?void 0:e.id)||"unknown",seed:pe.seed})},[ot,pe.seed,ke,e==null?void 0:e.id]),S.useEffect(()=>{pe.raid.objectives.some(E=>E.progress>0)&&ot(`objective_progress:${ke||pe.seed}`,"funnel.first_objective_progress",{traceId:ke||(e==null?void 0:e.id)||"unknown"})},[ot,pe.raid.objectives,pe.seed,ke,e==null?void 0:e.id]),S.useEffect(()=>{pe.outcome.status!=="in_progress"&&(ot(`first_outcome:${ke||pe.seed}`,"funnel.first_mission_outcome",{status:pe.outcome.status,reason:pe.outcome.reason}),(pe.outcome.status==="win"||pe.outcome.status==="loss")&&ot(`run_outcome:${ke||pe.seed}`,"funnel.run_outcome",{status:pe.outcome.status,reason:pe.outcome.reason}))},[ot,pe.outcome.reason,pe.outcome.status,pe.seed,ke]),S.useEffect(()=>{if(!q||Pe||du.current)return;const w=Os[0];if(!w||w.traceId!==(e==null?void 0:e.id))return;const E=Math.abs(w.playheadMs-ce),P=w.mode!==l,D=(w.selectedStepId??null)!==(V??null);E<600&&!P&&!D||(du.current=!0,$(w.playheadMs),(w.mode==="cinema"||w.mode==="flow"||w.mode==="compare"||w.mode==="matrix"||w.mode==="gameplay")&&u(w.mode),le(w.selectedStepId??null),window.setTimeout(()=>{du.current=!1},180))},[Pe,l,ce,Os,V,u,q,e==null?void 0:e.id]),S.useEffect(()=>{if(!e)return;const E=Date.parse(e.startedAt)+ce;let P=0,D=Number.POSITIVE_INFINITY;e.steps.forEach((W,ee)=>{const J=Date.parse(W.startedAt),Ae=Date.parse(W.endedAt??W.startedAt);if(E>=J&&E<=Ae){P=ee,D=0;return}const mn=Math.min(Math.abs(E-J),Math.abs(E-Ae));mn<D&&(D=mn,P=ee)}),[P,P-1,P+1].filter(W=>W>=0&&W<e.steps.length).forEach(W=>{const ee=e.steps[W];ee&&gq(e.id,ee.id,ie)})},[e,ce,ie]),S.useEffect(()=>{if(!e||!Pe||l!=="cinema"&&l!=="compare")return;const w=(z==null?void 0:z.metadata.wallTimeMs)??0,E=l==="compare"?Math.max(e.metadata.wallTimeMs||1,w||1):e.metadata.wallTimeMs||1;let P=0,D=performance.now();const U=W=>{const ee=(W-D)*de;D=W,$(J=>{const Ae=J+ee;return Ae>=E?(oe(!1),E):Ae}),P=requestAnimationFrame(U)};return P=requestAnimationFrame(U),()=>cancelAnimationFrame(P)},[e,z,Pe,de,l]),S.useEffect(()=>{const w=E=>{var W;const P=E.target,D=(W=P==null?void 0:P.tagName)==null?void 0:W.toLowerCase();if(!(D==="input"||D==="textarea"||D==="select"||P!=null&&P.isContentEditable)){if((E.metaKey||E.ctrlKey)&&E.key.toLowerCase()==="k"){E.preventDefault(),qe(ee=>!ee);return}if(E.key==="?"||E.key==="/"&&E.shiftKey){E.preventDefault(),te(!0);return}if(E.key.toLowerCase()==="s"){E.preventDefault(),li();return}if(E.key.toLowerCase()==="e"){E.preventDefault(),me(ee=>!ee);return}if(E.key.toLowerCase()==="t"){E.preventDefault(),Ke(!0);return}if(E.key==="Escape"){if(Ql){Ke(!1),$t(!0);return}te(!1),qe(!1),le(null);return}if(E.key===" "){E.preventDefault(),(l==="cinema"||l==="compare")&&oe(ee=>!ee);return}if(E.key.toLowerCase()==="f"){E.preventDefault(),l==="flow"?u("cinema"):l==="cinema"&&ve("flow");return}if(E.key.toLowerCase()==="c"){E.preventDefault(),l!=="cinema"&&u("cinema");return}if(E.key.toLowerCase()==="g"){E.preventDefault(),ve("gameplay");return}if(E.key.toLowerCase()==="i"){E.preventDefault(),V?le(null):e!=null&&e.steps.length&&le(e.steps[0].id);return}if(E.key==="ArrowLeft"||E.key==="ArrowRight"){if(E.preventDefault(),!e)return;const ee=e.metadata.wallTimeMs||1;if(E.shiftKey){$(E.key==="ArrowLeft"?0:ee),oe(!1),u("cinema");return}const J=E.key==="ArrowRight"?1:-1,Ae=U4(Sg,ce,J);Ae!=null&&($(Ae),oe(!1),u("cinema"))}}};return window.addEventListener("keydown",w),()=>window.removeEventListener("keydown",w)},[l,V,e,ce,Sg,ve,u,me,qe,Ke,$t,Ql,li]);const Tg=S.useMemo(()=>{if(!e||!fn||c)return null;const w=e.metadata.wallTimeMs||1,E=Math.min(Math.max(gr,5e3),w);let P=Math.max(0,ce-E/2);const D=Math.min(w,P+E);return D-P<E&&(P=Math.max(0,D-E)),{startMs:P,endMs:D}},[e,fn,ce,c,gr]),pn=!!(fe!=null&&fe.active),Mg=(fe==null?void 0:fe.step)??0,UP=((Pg=Is[Mg])==null?void 0:Pg.label)??"Wrapping up",GP=Is.length,HP=c!==f,WP=`${Math.min(Vn.length,aa)}/${Vn.length}`,KP=S.useMemo(()=>[{id:"macro-rapid-triage",label:"Run rapid triage launch path",description:"Jump to the highest-risk step and start mitigation.",group:"Macros",onTrigger:()=>{oa("rapid_triage")}},{id:"macro-deep-diagnosis",label:"Run deep diagnosis launch path",description:"Open flow analysis and guided tour.",group:"Macros",onTrigger:()=>{oa("deep_diagnosis")}},{id:"macro-team-sync",label:"Run team sync launch path",description:"Enable sync mode and generate shareable context.",group:"Macros",onTrigger:()=>{oa("team_sync")}},{id:"story-toggle",label:pn?"Stop story mode":"Start story mode",description:"Auto-runs a cinematic walkthrough.",group:"Story",keys:"S",onTrigger:li},{id:"tour-start",label:"Start guided tour",description:"Walk the interface step by step.",group:"Onboarding",keys:"T",onTrigger:()=>Ke(!0)},{id:"explain-toggle",label:Ge?"Disable explain mode":"Enable explain mode",description:"Toggle contextual overlays.",group:"Onboarding",keys:"E",onTrigger:()=>me(w=>!w)},{id:"shortcuts",label:"Show shortcuts",description:"Open the keyboard map.",group:"Onboarding",keys:"?",onTrigger:()=>te(!0)},{id:"playback-toggle",label:Pe?"Pause playback":"Play playback",description:"Start or stop the run.",group:"Playback",keys:"Space",onTrigger:mu},{id:"mode-cinema",label:"Switch to Cinema",description:"Timeline playback view.",group:"Modes",keys:"C",onTrigger:()=>ve("cinema")},{id:"mode-flow",label:"Switch to Flow",description:"Graph dependency view.",group:"Modes",keys:"F",onTrigger:()=>ve("flow")},{id:"mode-compare",label:"Open Compare",description:"Side-by-side diff view.",group:"Modes",onTrigger:()=>ve("compare"),disabled:!z},{id:"mode-matrix",label:"Open Matrix",description:"Counterfactual replay matrix view.",group:"Modes",onTrigger:()=>ve("matrix")},{id:"mode-gameplay",label:"Open Gameplay",description:"World-class gameplay mechanics control center.",group:"Modes",keys:"G",onTrigger:()=>ve("gameplay")},{id:"jump-bottleneck",label:"Jump to bottleneck",description:"Select the slowest step.",group:"Navigation",onTrigger:Pt},{id:"jump-error",label:"Jump to error",description:"Select the first failed step.",group:"Navigation",onTrigger:Sr},{id:"replay-step",label:"Replay from selected step",description:"Branch a Directors Cut.",group:"Tools",onTrigger:()=>V&&hn(V),disabled:!V},{id:"overlay-toggle",label:ne?"Hide overlay":"Show overlay",description:"Ghost diff in Cinema/Flow.",group:"Tools",onTrigger:()=>Fe(w=>!w),disabled:!z},{id:"safe-export",label:ie?"Disable safe export":"Enable safe export",description:"Redact sensitive payloads.",group:"Safety",onTrigger:()=>R(w=>!w)},{id:"reload",label:"Reload traces",description:"Refresh trace data.",group:"Meta",onTrigger:i},{id:"handoff-digest",label:"Copy handoff digest",description:"Capture mode, risk summary, and next actions for teammates.",group:"Meta",keys:"H",onTrigger:()=>{Ls()}}],[Ls,pn,li,Ge,Pe,mu,ve,z,Pt,Sr,V,hn,ne,ie,i,me,Fe,R,te,Ke,oa]),YP=S.useCallback(()=>{ot(`tutorial_skip:intro:${(e==null?void 0:e.id)||ke||pe.seed}`,"funnel.tutorial_skip",{traceId:(e==null?void 0:e.id)||ke||"unknown",source:"intro_overlay"}),As(!0)},[ot,pe.seed,ke,As,e==null?void 0:e.id]),QP=S.useCallback(()=>{As(!0),Ke(!0)},[As,Ke]),XP=S.useCallback(()=>{ot(`tutorial_skip:tour:${(e==null?void 0:e.id)||ke||pe.seed}`,"funnel.tutorial_skip",{traceId:(e==null?void 0:e.id)||ke||"unknown",source:"guided_tour"}),Ke(!1),$t(!0)},[ot,pe.seed,ke,$t,e==null?void 0:e.id]),JP=S.useCallback(()=>{ot(`tutorial_complete:${(e==null?void 0:e.id)||ke||pe.seed}`,"funnel.tutorial_complete",{traceId:(e==null?void 0:e.id)||ke||"unknown"}),Ke(!1),$t(!0)},[ot,pe.seed,ke,$t,e==null?void 0:e.id]);return n?h.jsx("div",{className:"loading",children:"Loading trace..."}):!r&&!e&&a.length===0?h.jsxs("div",{className:"error",children:[h.jsx("h2",{children:"No traces yet"}),h.jsx("p",{children:"Ingest your first trace, then reload to begin the Observe  Inspect  Direct workflow."}),h.jsxs("div",{className:"error-actions",children:[h.jsx("button",{className:"primary-button",type:"button",onClick:i,children:"Retry"}),h.jsx("a",{className:"ghost-button",href:"/help.html",target:"_blank",rel:"noreferrer",children:"Open help"})]})]}):r||!e?h.jsxs("div",{className:"error",children:[h.jsx("p",{children:r??"Failed to load trace."}),h.jsxs("div",{className:"error-actions",children:[h.jsx("button",{className:"primary-button",type:"button",onClick:i,children:"Retry"}),h.jsx("a",{className:"ghost-button",href:"/help.html",target:"_blank",rel:"noreferrer",children:"Open help"})]})]}):h.jsxs("div",{className:`app theme-${wr} ${Ge?"explain-mode":""} ${l==="compare"?"mode-compare":""} ${l==="matrix"?"mode-matrix":""} ${l==="gameplay"?"mode-gameplay":""}`,children:[h.jsx(jR,{trace:e,traces:a,selectedTraceId:s,onSelectTrace:o,onReload:i,onStartTour:()=>Ke(!0),onToggleStory:li,onOpenPalette:()=>qe(!0),onToggleExplain:()=>me(w=>!w),onShareSession:pu,onCreateHandoffDigest:()=>void Ls(),onThemeChange:en,onMotionChange:Wj,themeMode:wr,motionMode:Bt,activeSessions:ru,shareStatus:iP,handoffStatus:aP,explainMode:Ge,storyActive:pn,mode:l,missionCompletion:kg,runHealthScore:hu,modeHotkeys:pP}),!Ns&&!Ps?h.jsx(_I,{onComplete:YP,onStartTour:QP,onStartStory:oi,persona:Ze,onPersonaChange:Ms,launchPath:ei,onLaunchPathChange:ta,onStartLaunchPath:w=>void oa(w)}):null,Ns&&!Ln?h.jsx(kI,{explainMode:Ge,storyActive:pn,onStartTour:()=>{qn(!0),Ke(!0)},onStartStory:()=>{qn(!0),oi()},onToggleExplain:()=>me(w=>!w),onDismiss:()=>qn(!0)}):null,h.jsx(wI,{steps:FP,open:Ql,onClose:XP,onComplete:JP}),h.jsx(bI,{enabled:Ge}),h.jsx(CI,{active:pn,label:UP,step:Mg,total:GP,onStop:$n,onRestart:oi}),h.jsx(PR,{insights:t,investigation:_,onSelectStep:w=>{le(w),l!=="cinema"&&u("cinema")},onJumpToError:Sr,onJumpToBottleneck:Pt}),h.jsx(fI,{trace:e,mode:l==="matrix"||l==="gameplay"?"cinema":l,playheadMs:ce,selectedStepId:V,compareTrace:z,collapsed:On,onToggleCollapsed:()=>Kl(w=>!w),onModeChange:ve,onSelectStep:w=>{le(w),l!=="cinema"&&u("cinema")},onJumpToBottleneck:Pt,onReplay:hn,onStartTour:()=>Ke(!0),priorityQueue:$P}),h.jsxs("div",{className:"toolbar","data-help":!0,"data-help-indicator":!0,"data-tour":"toolbar","data-help-title":"Search + filters","data-help-body":"Filter by step type, enable Safe export, and jump between Cinema, Flow, Compare, and Matrix.","data-help-placement":"bottom",children:[h.jsx(AR,{query:c,typeFilter:m,onQueryChange:d,onTypeFilterChange:v}),h.jsxs("div",{className:"toolbar-actions",children:[h.jsx("input",{className:"search-input",value:p,onChange:w=>x(w.target.value),placeholder:"TraceQL (example: type=tool_call and duration_ms>800)","aria-label":"TraceQL query"}),h.jsx("button",{className:"ghost-button",type:"button",onClick:()=>void mP(),children:"Run TraceQL"}),y?h.jsxs("span",{className:"status-badge",children:[y.matchCount," match(es)"]}):null,HP?h.jsx("span",{className:"status-badge",children:"Filtering..."}):null,h.jsxs("span",{className:"status-badge",children:["Hydration ",WP]}),h.jsxs("span",{className:"status-badge",children:["Filter ",oP,"ms"]}),y?h.jsx("button",{className:"ghost-button",type:"button",onClick:()=>{x(""),g(null),k(null)},children:"Clear TraceQL"}):null,b?h.jsx("span",{className:"status-badge warn",children:b}):null,h.jsxs("select",{className:"search-select",value:j,onChange:w=>N(w.target.value),"aria-label":"Extension selector",children:[h.jsx("option",{value:"",children:"Select extension"}),M.map(w=>h.jsx("option",{value:w.id,children:w.name},w.id))]}),h.jsx("button",{className:"ghost-button",type:"button",onClick:()=>void vP(),disabled:!e||!j||L,children:L?"Running extension...":"Run extension"}),h.jsx("button",{className:`ghost-button ${l==="cinema"?"active":""}`,type:"button","aria-pressed":l==="cinema",title:"Timeline playback",onClick:()=>ve("cinema"),"data-help":!0,"data-help-title":"Cinema mode","data-help-body":"Timeline view with step cards ordered by time.","data-help-placement":"bottom",children:"Cinema"}),h.jsx("button",{className:`ghost-button ${l==="flow"?"active":""}`,type:"button","aria-pressed":l==="flow",title:"Graph view",onClick:()=>ve("flow"),"data-help":!0,"data-help-title":"Flow mode","data-help-body":"Dependency graph of steps and tool calls.","data-help-placement":"bottom",children:"Flow"}),h.jsx("button",{className:`ghost-button ${l==="compare"?"active":""}`,type:"button","aria-pressed":l==="compare",title:z?"Side-by-side compare":"Run a replay to enable compare",onClick:()=>ve("compare"),disabled:!z,"data-tour":"compare","data-help":!0,"data-help-title":"Compare mode","data-help-body":"Side-by-side view after a replay. Enabled once you replay.","data-help-placement":"bottom",children:"Compare"}),h.jsx("button",{className:`ghost-button ${l==="matrix"?"active":""}`,type:"button","aria-pressed":l==="matrix",title:"Counterfactual replay matrix",onClick:()=>ve("matrix"),"data-help":!0,"data-help-title":"Matrix mode","data-help-body":"Run multiple replay scenarios and rank likely causal factors.","data-help-placement":"bottom",children:"Matrix"}),h.jsx("button",{className:`ghost-button ${l==="gameplay"?"active":""}`,type:"button","aria-pressed":l==="gameplay",title:"Gameplay mechanics command center",onClick:()=>ve("gameplay"),"data-help":!0,"data-help-title":"Gameplay mode","data-help-body":"Command raids, campaign, pvp, time forks, boss runs, economy, and liveops.","data-help-placement":"bottom",children:"Gameplay"}),h.jsxs("label",{className:"toggle",title:"Redact payloads and disable raw views for safe sharing","data-help":!0,"data-help-title":"Safe export","data-help-body":"Redacts secrets and disables raw payload views for safe sharing.","data-help-placement":"bottom",children:[h.jsx("input",{type:"checkbox",checked:ie,onChange:()=>R(w=>!w)}),"Safe export"]}),e.steps.length>200||fn?h.jsxs("label",{className:"toggle",title:"Window steps around the playhead for large traces","data-help":!0,"data-help-title":"Windowed mode","data-help-body":"Limits rendering to a playhead window for large traces.","data-help-placement":"bottom",children:[h.jsx("input",{type:"checkbox",checked:fn,onChange:()=>Zt(w=>!w)}),"Windowed"]}):null,z?h.jsxs("label",{className:"toggle",title:"Show ghost overlay of replay in Cinema/Flow","data-help":!0,"data-help-title":"Overlay replay","data-help-body":"Layer the replay over the base run to spot differences.","data-help-placement":"bottom",children:[h.jsx("input",{type:"checkbox",checked:ne,onChange:()=>Fe(w=>!w)}),"Overlay"]}):null,h.jsxs("label",{className:"toggle",title:"Follow active collaborator cursor and mode updates",children:[h.jsx("input",{type:"checkbox",checked:q,onChange:()=>G(w=>!w)}),"Sync playback"]})]})]}),A?h.jsxs("div",{className:"inspector-section",children:[h.jsx("div",{className:"inspector-section-title",children:"Extension output"}),h.jsx("pre",{className:"inspector-json",children:JSON.stringify(A,null,2)})]}):null,l==="cinema"?h.jsxs("div",{className:"playback-stack","data-tour":"playback",children:[h.jsx("div",{"data-help":!0,"data-help-title":"Playback controls","data-help-body":"Play, pause, scrub, and adjust speed to feel the rhythm of the run.","data-help-placement":"bottom",children:h.jsx(z0,{playheadMs:ce,wallTimeMs:e.metadata.wallTimeMs||1,isPlaying:Pe,speed:de,onToggle:()=>oe(w=>!w),onScrub:w=>$(w),onSpeedChange:Mt})}),h.jsx("div",{"data-help":!0,"data-help-title":"Density map","data-help-body":"Zoom into hotspots and keep long traces readable with windowing.","data-help-placement":"bottom",children:h.jsx(rI,{traceStart:e.startedAt,traceEnd:e.endedAt,steps:e.steps,playheadMs:ce,windowRange:Tg,windowed:fn,spanMs:gr,onSpanChange:Jr,onToggleWindowed:Zt,onScrub:w=>$(w),persistenceKey:e.id,laneStrategy:Be,visibleLaneGroups:dP,remotePlayheads:fP})})]}):null,l==="compare"&&z?h.jsx("div",{"data-help":!0,"data-help-title":"Compare playback","data-help-body":"Sync both runs to evaluate improvements at identical timestamps.","data-help-placement":"bottom",children:h.jsx(z0,{playheadMs:ce,wallTimeMs:Math.max(e.metadata.wallTimeMs||1,z.metadata.wallTimeMs||1),isPlaying:Pe,speed:de,onToggle:()=>oe(w=>!w),onScrub:w=>$(w),onSpeedChange:Mt})}):null,h.jsxs("main",{className:`stage ${l==="compare"?"stage-compare":""} motion-fade-in`,role:"main",children:[h.jsx("div",{className:"main motion-slide-up",ref:cu,"data-help":!0,"data-help-indicator":!0,"data-tour":"stage","data-help-title":"Trace stage","data-help-body":"Every step becomes a scene. Hover or click to open deep inspection.","data-help-placement":"top",children:h.jsx(eq,{morph:Kj,onComplete:VP,children:h.jsxs(S.Suspense,{fallback:h.jsx("div",{className:"loading",children:"Loading view..."}),children:[l==="cinema"?h.jsx(QR,{trace:e,steps:xg,selectedStepId:V,onSelectStep:w=>le(w),playheadMs:ce,windowRange:Tg,timing:t==null?void 0:t.timing,ghostTrace:ne?z:null,diff:cP,laneStrategy:Be,laneGroupsOrder:si.order,hiddenLaneGroups:si.hidden,onLaneStrategyChange:yP,onToggleLaneGroupVisibility:gP,onMoveLaneGroup:TP}):null,l==="flow"?h.jsx(iz,{steps:xg,selectedStepId:V,onSelectStep:w=>le(w),baseTrace:e,compareTrace:z,compareSteps:uP,overlayEnabled:ne,onToggleOverlay:()=>Fe(w=>!w)}):null,l==="compare"&&z?h.jsx(az,{baseTrace:e,compareTrace:z,playheadMs:ce,safeExport:ie,onExit:()=>{u("cinema"),ae(null)}}):null,l==="matrix"?h.jsx(oz,{steps:e.steps,anchorStepId:eu,onAnchorStepChange:tu,scenarios:Yj,onScenarioChange:PP,onDuplicateScenario:IP,onMoveScenario:DP,onAddScenario:AP,onRemoveScenario:RP,onRun:OP,onCancel:LP,onReplaceScenarios:NP,loading:Qj,error:Xj,job:na,matrix:jt,safeExport:ie,onOpenCompare:qP}):null,l==="gameplay"?h.jsx(lz,{state:pe,playheadMs:ce,onUpdate:w=>ia(E=>w(E)),session:De,playerId:br,sessionError:Jj,onCreateSession:wP,onJoinSession:bP,onLeaveSession:xP,onDispatchAction:SP,guild:Zj,onCreateGuild:_P,onJoinGuild:kP,onScheduleGuildEvent:EP,onCompleteGuildEvent:CP,observability:eP,analytics:nP}):null]})})}),h.jsx(S.Suspense,{fallback:h.jsx("div",{className:"loading",children:"Loading panel..."}),children:l==="compare"||l==="matrix"||l==="gameplay"?null:_g?h.jsx(sz,{traceId:e.id,step:_g,safeExport:ie,onClose:()=>le(null),onReplay:hn}):h.jsx(gI,{trace:e,mode:l,selectedStepId:V,onModeChange:ve,onSelectStep:w=>le(w),onJumpToBottleneck:Pt,onReplay:hn,recommendations:tn,persona:Ze,annotations:hP,activityFeed:sP,onAddAnnotation:jP,missionProgress:js,missionCompletion:kg,onResetMissions:MP,narrative:_r,onAskDirector:BP,onExportNarrative:zP})})]}),h.jsxs("div",{className:"mobile-quick-rail","aria-label":"Mobile quick actions",children:[h.jsx("button",{className:`ghost-button ${pn?"active":""}`,type:"button",onClick:li,"aria-label":pn?"Stop story mode":"Start story mode",children:pn?"Stop Story":"Story"}),h.jsx("button",{className:"ghost-button",type:"button",onClick:()=>Ke(!0),"aria-label":"Start guided tour",children:"Guide"}),h.jsx("button",{className:"ghost-button",type:"button",onClick:()=>qe(!0),"aria-label":"Open command palette",children:"Command"}),h.jsx("button",{className:"ghost-button",type:"button",onClick:()=>void Ls(),"aria-label":"Copy handoff digest",children:"Handoff"})]}),h.jsx(EI,{mode:l==="matrix"||l==="gameplay"?"cinema":l,isPlaying:Pe,storyActive:pn,explainMode:Ge,hidden:l==="compare",open:Yl,onToggleOpen:()=>Zr(w=>!w),onTogglePlay:mu,onStartStory:oi,onStopStory:$n,onStartTour:()=>Ke(!0),onOpenPalette:()=>qe(!0),onShowShortcuts:()=>te(!0),onToggleExplain:()=>me(w=>!w),onJumpToBottleneck:Pt}),h.jsx(cI,{open:Q,onClose:()=>qe(!1),actions:KP}),h.jsx(aI,{open:F,onClose:()=>te(!1)})]})}Zp.createRoot(document.getElementById("root")).render(h.jsx(pN.StrictMode,{children:h.jsx(mz,{})}));export{Rz as A,Iz as B,Dz as C,Oz as D,qz as E,Fz as F,Lz as G,pN as R,BR as S,KR as T,F4 as a,B4 as b,ZR as c,kM as d,gz as e,yz as f,Rk as g,yq as h,eI as i,h as j,bz as k,wz as l,xz as m,Sz as n,_z as o,Ez as p,Cz as q,S as r,IR as s,Tz as t,kz as u,Mz as v,jz as w,Pz as x,Nz as y,Az as z};
