import{r as n,j as e,k as Y,l as J,m as B,n as ee,u as ae,o as se,p as M,q as le,t as te,v as ie,w as S,x as ne,y as R,z as L,A as W,B as ce}from"./index-D_RQsZ8y.js";function re(s,u,h){return Math.min(h,Math.max(u,s))}function de({state:s,playheadMs:u,onUpdate:h,session:i,playerId:r,sessionError:P,onCreateSession:x,onJoinSession:o,onLeaveSession:j,onDispatchAction:g,guild:d,onCreateGuild:y,onJoinGuild:v,onScheduleGuildEvent:k,onCompleteGuildEvent:N}){const[m,O]=n.useState(""),[C,H]=n.useState("strategist"),[f,U]=n.useState("alt path"),[I,Z]=n.useState("Night Ops"),[q,$]=n.useState(""),[A,V]=n.useState("operator"),[b,D]=n.useState("guild-night-ops"),[F,G]=n.useState("Night Ops Guild"),[T,K]=n.useState("Weekly Raid Drill"),[w,Q]=n.useState("2026-02-16T20:00:00Z"),E=!!(i!=null&&i.id&&g),l=(a,t,c)=>{if(E){g==null||g(a,t);return}h(c)},p=n.useMemo(()=>s.narrative.nodes.find(a=>a.id===s.narrative.currentNodeId),[s.narrative.currentNodeId,s.narrative.nodes]),_=n.useMemo(()=>{var c;const a=[s.raid.completed,s.campaign.depth>=3,s.narrative.history.length>=2,s.skills.loadout.equipped.length>=2,s.pvp.round>=3||s.pvp.winner!=null,s.time.forks.length>=2||((c=s.time.forks[0])==null?void 0:c.history.length)>1,s.boss.hp<s.boss.maxHp,s.director.lastOutcome!=="mixed",s.economy.crafted.length>=1,s.guild.operationsScore>0,s.cinematic.queue.length>=1,s.liveops.week>=2],t=a.filter(Boolean).length;return{done:t,total:a.length,pct:Math.round(t/a.length*100)}},[s]);return e.jsxs("section",{className:"gameplay-mode",children:[e.jsxs("header",{className:"gameplay-header",children:[e.jsxs("div",{children:[e.jsx("h2",{children:"Gameplay Command Center"}),e.jsx("p",{children:"World-class mechanics stack: raids, campaign, narrative, PvP, time control, boss runs, and liveops."}),e.jsxs("div",{className:"gameplay-inline",children:[e.jsx("input",{className:"search-input",value:I,onChange:a=>Z(a.target.value),placeholder:"Session name","aria-label":"Session name"}),e.jsx("button",{className:"ghost-button",type:"button",onClick:()=>x==null?void 0:x(I),children:"Create multiplayer session"}),e.jsx("input",{className:"search-input",value:q,onChange:a=>$(a.target.value),placeholder:"Session id","aria-label":"Join session id"}),e.jsxs("select",{value:A,onChange:a=>V(a.target.value),children:[e.jsx("option",{value:"strategist",children:"Strategist"}),e.jsx("option",{value:"operator",children:"Operator"}),e.jsx("option",{value:"analyst",children:"Analyst"}),e.jsx("option",{value:"saboteur",children:"Saboteur"})]}),e.jsx("button",{className:"ghost-button",type:"button",onClick:()=>o==null?void 0:o(q,r??"director",A),children:"Join session"}),i!=null&&i.id?e.jsx("button",{className:"ghost-button",type:"button",onClick:()=>j==null?void 0:j(),children:"Leave session"}):null]}),e.jsxs("p",{children:["Session: ",(i==null?void 0:i.id)??"local-only"," ",r?`• Player ${r}`:""," ",i?`• Version ${i.version}`:""]}),P?e.jsx("p",{children:P}):null]}),e.jsxs("div",{className:"gameplay-completion","aria-label":"Gameplay completion",children:[e.jsxs("strong",{children:[_.done,"/",_.total]}),e.jsxs("span",{children:[_.pct,"% complete"]})]})]}),e.jsxs("div",{className:"gameplay-grid",children:[e.jsxs("article",{className:"gameplay-card",children:[e.jsx("h3",{children:"1) Co-op Incident Raids"}),e.jsxs("p",{children:["Party: ",s.raid.party.length," members"]}),e.jsxs("div",{className:"gameplay-inline",children:[e.jsx("input",{className:"search-input",value:m,onChange:a=>O(a.target.value),placeholder:"Member name","aria-label":"Raid member name"}),e.jsxs("select",{value:C,onChange:a=>H(a.target.value),children:[e.jsx("option",{value:"strategist",children:"Strategist"}),e.jsx("option",{value:"operator",children:"Operator"}),e.jsx("option",{value:"analyst",children:"Analyst"}),e.jsx("option",{value:"saboteur",children:"Saboteur"})]}),e.jsx("button",{className:"ghost-button",type:"button",onClick:()=>{m.trim()&&(E?o==null||o((i==null?void 0:i.id)??"",m.trim(),C):h(a=>Y(a,m.trim(),C)),O(""))},children:"Add member"})]}),e.jsx("div",{className:"gameplay-objectives",children:s.raid.objectives.map(a=>e.jsxs("div",{className:"gameplay-objective",children:[e.jsx("span",{children:a.label}),e.jsxs("span",{children:[a.progress,"/",a.target]}),e.jsx("button",{className:"ghost-button",type:"button",onClick:()=>l("raid.objective_progress",{objective_id:a.id,delta:25},t=>J(t,a.id,25)),children:"+25"})]},a.id))})]}),e.jsxs("article",{className:"gameplay-card",children:[e.jsx("h3",{children:"2) Roguelike Scenario Campaign"}),e.jsxs("p",{children:["Depth ",s.campaign.depth," • Lives ",s.campaign.lives]}),e.jsxs("p",{children:[s.campaign.currentMission.title," (difficulty ",s.campaign.currentMission.difficulty,")"]}),e.jsxs("div",{className:"gameplay-inline",children:[e.jsx("button",{className:"primary-button",type:"button",onClick:()=>l("campaign.resolve_mission",{success:!0},a=>B(a,!0)),children:"Mission success"}),e.jsx("button",{className:"ghost-button",type:"button",onClick:()=>l("campaign.resolve_mission",{success:!1},a=>B(a,!1)),children:"Mission fail"})]})]}),e.jsxs("article",{className:"gameplay-card",children:[e.jsx("h3",{children:"3) Branching Narrative Director"}),e.jsx("p",{children:p==null?void 0:p.title}),e.jsxs("p",{children:["Tension ",s.narrative.tension]}),e.jsx("div",{className:"gameplay-list",children:((p==null?void 0:p.choices)??[]).map(a=>e.jsx("button",{className:"ghost-button",type:"button",onClick:()=>l("narrative.choose",{choice_id:a.id},t=>ee(t,a.id)),children:a.label},a.id))})]}),e.jsxs("article",{className:"gameplay-card",children:[e.jsx("h3",{children:"4) Skill Tree + Loadout"}),e.jsxs("p",{children:["Points ",s.skills.points," • Equipped ",s.skills.loadout.equipped.length,"/",s.skills.loadout.capacity]}),e.jsx("div",{className:"gameplay-list",children:s.skills.nodes.map(a=>e.jsxs("div",{className:"gameplay-node",children:[e.jsxs("span",{children:[a.label," (",a.cost,")"]}),e.jsx("button",{className:"ghost-button",type:"button",onClick:()=>l("skills.unlock",{player_id:r??"director",skill_id:a.id},t=>ae(t,a.id)),children:a.unlocked?"Unlocked":"Unlock"}),e.jsx("button",{className:"ghost-button",type:"button",onClick:()=>l("skills.equip",{player_id:r??"director",skill_id:a.id},t=>se(t,a.id)),children:"Equip"})]},a.id))})]}),e.jsxs("article",{className:"gameplay-card",children:[e.jsx("h3",{children:"5) Asymmetric PvP"}),e.jsxs("p",{children:["Round ",s.pvp.round," • Stability ",s.pvp.stability," • Sabotage ",s.pvp.sabotage]}),e.jsxs("div",{className:"gameplay-inline",children:[e.jsx("button",{className:"ghost-button",type:"button",onClick:()=>l("pvp.act",{action:"sabotage"},a=>M(a,"sabotage")),children:"Sabotage"}),e.jsx("button",{className:"ghost-button",type:"button",onClick:()=>l("pvp.act",{action:"stabilize"},a=>M(a,"stabilize")),children:"Stabilize"}),e.jsx("button",{className:"ghost-button",type:"button",onClick:()=>l("pvp.act",{action:"scan"},a=>M(a,"scan")),children:"Scan"})]})]}),e.jsxs("article",{className:"gameplay-card",children:[e.jsx("h3",{children:"6) Time Manipulation"}),e.jsxs("p",{children:["Active fork: ",s.time.activeForkId]}),e.jsxs("div",{className:"gameplay-inline",children:[e.jsx("input",{className:"search-input",value:f,onChange:a=>U(a.target.value),"aria-label":"Fork label"}),e.jsx("button",{className:"ghost-button",type:"button",onClick:()=>l("time.create_fork",{label:f,playhead_ms:u},a=>le(a,f,u)),children:"Create fork"}),e.jsx("button",{className:"ghost-button",type:"button",onClick:()=>l("time.rewind",{amount_ms:1e3},a=>te(a,1e3)),children:"Rewind 1s"}),e.jsx("button",{className:"ghost-button",type:"button",onClick:()=>l("time.merge",{fork_id:s.time.activeForkId},a=>ie(a,a.time.activeForkId)),children:"Merge"})]})]}),e.jsxs("article",{className:"gameplay-card",children:[e.jsx("h3",{children:"7) Boss Encounter Runs"}),e.jsxs("p",{children:[s.boss.name," • Phase ",s.boss.phase," • HP ",s.boss.hp,"/",s.boss.maxHp]}),e.jsxs("div",{className:"gameplay-inline",children:[e.jsx("button",{className:"ghost-button",type:"button",onClick:()=>l("boss.act",{action:"strike"},a=>S(a,"strike")),children:"Strike"}),e.jsx("button",{className:"ghost-button",type:"button",onClick:()=>l("boss.act",{action:"shield"},a=>S(a,"shield")),children:"Shield"}),e.jsx("button",{className:"ghost-button",type:"button",onClick:()=>l("boss.act",{action:"exploit"},a=>S(a,"exploit")),children:"Exploit"})]})]}),e.jsxs("article",{className:"gameplay-card",children:[e.jsx("h3",{children:"8) Adaptive AI Dungeon Master"}),e.jsxs("p",{children:["Risk ",s.director.risk," • Outcome ",s.director.lastOutcome]}),e.jsx("p",{children:s.director.hint}),e.jsx("button",{className:"ghost-button",type:"button",onClick:()=>{var z;const a=s.pvp.sabotage>s.pvp.stability?2:0,t=Math.floor((((z=s.raid.objectives[0])==null?void 0:z.progress)??0)/40),c=900+s.pvp.fog*10;l("director.evaluate",{failures:a,retries:t,latency_ms:c},X=>ne(X,{failures:a,retries:t,latencyMs:c}))},children:"Recompute guidance"})]}),e.jsxs("article",{className:"gameplay-card",children:[e.jsx("h3",{children:"9) Mission Economy + Crafting"}),e.jsxs("p",{children:["Credits ",s.economy.credits," • Materials ",s.economy.materials]}),e.jsxs("div",{className:"gameplay-inline",children:[e.jsx("button",{className:"ghost-button",type:"button",onClick:()=>l("economy.craft",{recipe_id:"stability_patch"},a=>R(a,"stability_patch")),children:"Craft stability patch"}),e.jsx("button",{className:"ghost-button",type:"button",onClick:()=>l("economy.craft",{recipe_id:"precision_lens"},a=>R(a,"precision_lens")),children:"Craft precision lens"}),e.jsx("button",{className:"ghost-button",type:"button",onClick:()=>l("economy.craft",{recipe_id:"overclock_core"},a=>R(a,"overclock_core")),children:"Craft overclock core"})]})]}),e.jsxs("article",{className:"gameplay-card",children:[e.jsx("h3",{children:"10) Guild Operations"}),e.jsxs("p",{children:[s.guild.name," • Ops score ",s.guild.operationsScore," • Events ",s.guild.eventsCompleted]}),e.jsxs("div",{className:"gameplay-inline",children:[e.jsx("input",{className:"search-input",value:b,onChange:a=>D(a.target.value),placeholder:"Guild id","aria-label":"Guild id"}),e.jsx("input",{className:"search-input",value:F,onChange:a=>G(a.target.value),placeholder:"Guild name","aria-label":"Guild name"}),e.jsx("button",{className:"ghost-button",type:"button",onClick:()=>y==null?void 0:y(b,F),children:"Create guild"}),e.jsx("button",{className:"ghost-button",type:"button",onClick:()=>v==null?void 0:v(b,m.trim()||r||"director"),children:"Join guild"})]}),e.jsxs("div",{className:"gameplay-inline",children:[e.jsx("input",{className:"search-input",value:T,onChange:a=>K(a.target.value),placeholder:"Event title","aria-label":"Guild event title"}),e.jsx("input",{className:"search-input",value:w,onChange:a=>Q(a.target.value),placeholder:"2026-02-16T20:00:00Z","aria-label":"Guild event schedule"}),e.jsx("button",{className:"ghost-button",type:"button",onClick:()=>k==null?void 0:k(b,T,w),children:"Schedule event"})]}),d?e.jsxs("div",{className:"gameplay-list",children:[e.jsxs("p",{children:[d.member_count," members • Score ",d.operations_score]}),d.scoreboard.slice(0,4).map(a=>e.jsxs("div",{className:"gameplay-node",children:[e.jsx("span",{children:a.player_id}),e.jsx("span",{children:a.score})]},a.player_id)),d.events.slice(-3).map(a=>e.jsxs("div",{className:"gameplay-node",children:[e.jsx("span",{children:a.title}),e.jsx("button",{className:"ghost-button",type:"button",onClick:()=>N==null?void 0:N(d.id,a.id,10),children:"Complete"})]},a.id))]}):null,e.jsxs("div",{className:"gameplay-inline",children:[e.jsx("button",{className:"ghost-button",type:"button",onClick:()=>l("guild.op",{impact:6},a=>L(a,6)),children:"Positive op"}),e.jsx("button",{className:"ghost-button",type:"button",onClick:()=>l("guild.op",{impact:-3},a=>L(a,-3)),children:"Risky op"})]})]}),e.jsxs("article",{className:"gameplay-card",children:[e.jsx("h3",{children:"11) Cinematic Event Engine"}),e.jsxs("p",{children:[s.cinematic.queue.length," queued events"]}),e.jsxs("div",{className:"gameplay-inline",children:[e.jsx("button",{className:"ghost-button",type:"button",onClick:()=>l("cinematic.emit",{event_type:"critical",message:"Critical cascade detected",intensity:3},a=>W(a,"critical","Critical cascade detected",3)),children:"Critical beat"}),e.jsx("button",{className:"ghost-button",type:"button",onClick:()=>l("cinematic.emit",{event_type:"success",message:"System stabilizing",intensity:2},a=>W(a,"success","System stabilizing",2)),children:"Success beat"})]})]}),e.jsxs("article",{className:"gameplay-card",children:[e.jsx("h3",{children:"12) Seasonal LiveOps"}),e.jsxs("p",{children:[s.liveops.season," • Week ",s.liveops.week]}),e.jsx("p",{children:s.liveops.challenge.title}),e.jsxs("div",{className:"gameplay-inline",children:[e.jsx("button",{className:"ghost-button",type:"button",onClick:()=>l("liveops.advance_week",{},a=>ce(a)),children:"Next week"}),e.jsx("button",{className:"ghost-button",type:"button",onClick:()=>l("liveops.progress",{delta:1},a=>({...a,liveops:{...a.liveops,challenge:{...a.liveops.challenge,progress:re(a.liveops.challenge.progress+1,0,a.liveops.challenge.goal),completed:a.liveops.challenge.progress+1>=a.liveops.challenge.goal}}})),children:"Progress challenge"})]})]})]})]})}export{de as default};
