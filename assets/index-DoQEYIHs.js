const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-BuvLURcw.js","assets/index-B5DZHykP.css"])))=>i.map(i=>d[i]);
(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var ja=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function lk(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var uk={exports:{}},Jo={},ck={exports:{}},oe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fa=Symbol.for("react.element"),aM=Symbol.for("react.portal"),oM=Symbol.for("react.fragment"),lM=Symbol.for("react.strict_mode"),uM=Symbol.for("react.profiler"),cM=Symbol.for("react.provider"),dM=Symbol.for("react.context"),fM=Symbol.for("react.forward_ref"),hM=Symbol.for("react.suspense"),pM=Symbol.for("react.memo"),mM=Symbol.for("react.lazy"),uy=Symbol.iterator;function vM(e){return e===null||typeof e!="object"?null:(e=uy&&e[uy]||e["@@iterator"],typeof e=="function"?e:null)}var dk={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},fk=Object.assign,hk={};function Fi(e,t,n){this.props=e,this.context=t,this.refs=hk,this.updater=n||dk}Fi.prototype.isReactComponent={};Fi.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Fi.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function pk(){}pk.prototype=Fi.prototype;function Jm(e,t,n){this.props=e,this.context=t,this.refs=hk,this.updater=n||dk}var Xm=Jm.prototype=new pk;Xm.constructor=Jm;fk(Xm,Fi.prototype);Xm.isPureReactComponent=!0;var cy=Array.isArray,mk=Object.prototype.hasOwnProperty,Zm={current:null},vk={key:!0,ref:!0,__self:!0,__source:!0};function gk(e,t,n){var r,i={},s=null,a=null;if(t!=null)for(r in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(s=""+t.key),t)mk.call(t,r)&&!vk.hasOwnProperty(r)&&(i[r]=t[r]);var o=arguments.length-2;if(o===1)i.children=n;else if(1<o){for(var l=Array(o),u=0;u<o;u++)l[u]=arguments[u+2];i.children=l}if(e&&e.defaultProps)for(r in o=e.defaultProps,o)i[r]===void 0&&(i[r]=o[r]);return{$$typeof:fa,type:e,key:s,ref:a,props:i,_owner:Zm.current}}function gM(e,t){return{$$typeof:fa,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function ev(e){return typeof e=="object"&&e!==null&&e.$$typeof===fa}function yM(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var dy=/\/+/g;function Zl(e,t){return typeof e=="object"&&e!==null&&e.key!=null?yM(""+e.key):t.toString(36)}function eo(e,t,n,r,i){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(s){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case fa:case aM:a=!0}}if(a)return a=e,i=i(a),e=r===""?"."+Zl(a,0):r,cy(i)?(n="",e!=null&&(n=e.replace(dy,"$&/")+"/"),eo(i,t,n,"",function(u){return u})):i!=null&&(ev(i)&&(i=gM(i,n+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(dy,"$&/")+"/")+e)),t.push(i)),1;if(a=0,r=r===""?".":r+":",cy(e))for(var o=0;o<e.length;o++){s=e[o];var l=r+Zl(s,o);a+=eo(s,t,n,l,i)}else if(l=vM(e),typeof l=="function")for(e=l.call(e),o=0;!(s=e.next()).done;)s=s.value,l=r+Zl(s,o++),a+=eo(s,t,n,l,i);else if(s==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function Na(e,t,n){if(e==null)return e;var r=[],i=0;return eo(e,r,"","",function(s){return t.call(n,s,i++)}),r}function xM(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var ht={current:null},to={transition:null},wM={ReactCurrentDispatcher:ht,ReactCurrentBatchConfig:to,ReactCurrentOwner:Zm};function yk(){throw Error("act(...) is not supported in production builds of React.")}oe.Children={map:Na,forEach:function(e,t,n){Na(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Na(e,function(){t++}),t},toArray:function(e){return Na(e,function(t){return t})||[]},only:function(e){if(!ev(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};oe.Component=Fi;oe.Fragment=oM;oe.Profiler=uM;oe.PureComponent=Jm;oe.StrictMode=lM;oe.Suspense=hM;oe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=wM;oe.act=yk;oe.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=fk({},e.props),i=e.key,s=e.ref,a=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,a=Zm.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var o=e.type.defaultProps;for(l in t)mk.call(t,l)&&!vk.hasOwnProperty(l)&&(r[l]=t[l]===void 0&&o!==void 0?o[l]:t[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){o=Array(l);for(var u=0;u<l;u++)o[u]=arguments[u+2];r.children=o}return{$$typeof:fa,type:e.type,key:i,ref:s,props:r,_owner:a}};oe.createContext=function(e){return e={$$typeof:dM,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:cM,_context:e},e.Consumer=e};oe.createElement=gk;oe.createFactory=function(e){var t=gk.bind(null,e);return t.type=e,t};oe.createRef=function(){return{current:null}};oe.forwardRef=function(e){return{$$typeof:fM,render:e}};oe.isValidElement=ev;oe.lazy=function(e){return{$$typeof:mM,_payload:{_status:-1,_result:e},_init:xM}};oe.memo=function(e,t){return{$$typeof:pM,type:e,compare:t===void 0?null:t}};oe.startTransition=function(e){var t=to.transition;to.transition={};try{e()}finally{to.transition=t}};oe.unstable_act=yk;oe.useCallback=function(e,t){return ht.current.useCallback(e,t)};oe.useContext=function(e){return ht.current.useContext(e)};oe.useDebugValue=function(){};oe.useDeferredValue=function(e){return ht.current.useDeferredValue(e)};oe.useEffect=function(e,t){return ht.current.useEffect(e,t)};oe.useId=function(){return ht.current.useId()};oe.useImperativeHandle=function(e,t,n){return ht.current.useImperativeHandle(e,t,n)};oe.useInsertionEffect=function(e,t){return ht.current.useInsertionEffect(e,t)};oe.useLayoutEffect=function(e,t){return ht.current.useLayoutEffect(e,t)};oe.useMemo=function(e,t){return ht.current.useMemo(e,t)};oe.useReducer=function(e,t,n){return ht.current.useReducer(e,t,n)};oe.useRef=function(e){return ht.current.useRef(e)};oe.useState=function(e){return ht.current.useState(e)};oe.useSyncExternalStore=function(e,t,n){return ht.current.useSyncExternalStore(e,t,n)};oe.useTransition=function(){return ht.current.useTransition()};oe.version="18.3.1";ck.exports=oe;var _=ck.exports;const bM=lk(_);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var SM=_,_M=Symbol.for("react.element"),kM=Symbol.for("react.fragment"),CM=Object.prototype.hasOwnProperty,EM=SM.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,TM={key:!0,ref:!0,__self:!0,__source:!0};function xk(e,t,n){var r,i={},s=null,a=null;n!==void 0&&(s=""+n),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(a=t.ref);for(r in t)CM.call(t,r)&&!TM.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:_M,type:e,key:s,ref:a,props:i,_owner:EM.current}}Jo.Fragment=kM;Jo.jsx=xk;Jo.jsxs=xk;uk.exports=Jo;var f=uk.exports,Op={},wk={exports:{}},Pt={},bk={exports:{}},Sk={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(A,I){var z=A.length;A.push(I);e:for(;0<z;){var U=z-1>>>1,re=A[U];if(0<i(re,I))A[U]=I,A[z]=re,z=U;else break e}}function n(A){return A.length===0?null:A[0]}function r(A){if(A.length===0)return null;var I=A[0],z=A.pop();if(z!==I){A[0]=z;e:for(var U=0,re=A.length,Te=re>>>1;U<Te;){var ue=2*(U+1)-1,ge=A[ue],xe=ue+1,tt=A[xe];if(0>i(ge,z))xe<re&&0>i(tt,ge)?(A[U]=tt,A[xe]=z,U=xe):(A[U]=ge,A[ue]=z,U=ue);else if(xe<re&&0>i(tt,z))A[U]=tt,A[xe]=z,U=xe;else break e}}return I}function i(A,I){var z=A.sortIndex-I.sortIndex;return z!==0?z:A.id-I.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var a=Date,o=a.now();e.unstable_now=function(){return a.now()-o}}var l=[],u=[],c=1,d=null,h=3,m=!1,g=!1,p=!1,w=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(A){for(var I=n(u);I!==null;){if(I.callback===null)r(u);else if(I.startTime<=A)r(u),I.sortIndex=I.expirationTime,t(l,I);else break;I=n(u)}}function S(A){if(p=!1,x(A),!g)if(n(l)!==null)g=!0,le(k);else{var I=n(u);I!==null&&se(S,I.startTime-A)}}function k(A,I){g=!1,p&&(p=!1,v(T),T=-1),m=!0;var z=h;try{for(x(I),d=n(l);d!==null&&(!(d.expirationTime>I)||A&&!R());){var U=d.callback;if(typeof U=="function"){d.callback=null,h=d.priorityLevel;var re=U(d.expirationTime<=I);I=e.unstable_now(),typeof re=="function"?d.callback=re:d===n(l)&&r(l),x(I)}else r(l);d=n(l)}if(d!==null)var Te=!0;else{var ue=n(u);ue!==null&&se(S,ue.startTime-I),Te=!1}return Te}finally{d=null,h=z,m=!1}}var E=!1,j=null,T=-1,M=5,D=-1;function R(){return!(e.unstable_now()-D<M)}function H(){if(j!==null){var A=e.unstable_now();D=A;var I=!0;try{I=j(!0,A)}finally{I?Y():(E=!1,j=null)}}else E=!1}var Y;if(typeof y=="function")Y=function(){y(H)};else if(typeof MessageChannel<"u"){var pe=new MessageChannel,F=pe.port2;pe.port1.onmessage=H,Y=function(){F.postMessage(null)}}else Y=function(){w(H,0)};function le(A){j=A,E||(E=!0,Y())}function se(A,I){T=w(function(){A(e.unstable_now())},I)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(A){A.callback=null},e.unstable_continueExecution=function(){g||m||(g=!0,le(k))},e.unstable_forceFrameRate=function(A){0>A||125<A?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<A?Math.floor(1e3/A):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return n(l)},e.unstable_next=function(A){switch(h){case 1:case 2:case 3:var I=3;break;default:I=h}var z=h;h=I;try{return A()}finally{h=z}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(A,I){switch(A){case 1:case 2:case 3:case 4:case 5:break;default:A=3}var z=h;h=A;try{return I()}finally{h=z}},e.unstable_scheduleCallback=function(A,I,z){var U=e.unstable_now();switch(typeof z=="object"&&z!==null?(z=z.delay,z=typeof z=="number"&&0<z?U+z:U):z=U,A){case 1:var re=-1;break;case 2:re=250;break;case 5:re=1073741823;break;case 4:re=1e4;break;default:re=5e3}return re=z+re,A={id:c++,callback:I,priorityLevel:A,startTime:z,expirationTime:re,sortIndex:-1},z>U?(A.sortIndex=z,t(u,A),n(l)===null&&A===n(u)&&(p?(v(T),T=-1):p=!0,se(S,z-U))):(A.sortIndex=re,t(l,A),g||m||(g=!0,le(k))),A},e.unstable_shouldYield=R,e.unstable_wrapCallback=function(A){var I=h;return function(){var z=h;h=I;try{return A.apply(this,arguments)}finally{h=z}}}})(Sk);bk.exports=Sk;var jM=bk.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var NM=_,Nt=jM;function L(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var _k=new Set,Us={};function Vr(e,t){Ni(e,t),Ni(e+"Capture",t)}function Ni(e,t){for(Us[e]=t,e=0;e<t.length;e++)_k.add(t[e])}var Mn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),qp=Object.prototype.hasOwnProperty,MM=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,fy={},hy={};function PM(e){return qp.call(hy,e)?!0:qp.call(fy,e)?!1:MM.test(e)?hy[e]=!0:(fy[e]=!0,!1)}function RM(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function AM(e,t,n,r){if(t===null||typeof t>"u"||RM(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function pt(e,t,n,r,i,s,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=a}var et={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){et[e]=new pt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];et[t]=new pt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){et[e]=new pt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){et[e]=new pt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){et[e]=new pt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){et[e]=new pt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){et[e]=new pt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){et[e]=new pt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){et[e]=new pt(e,5,!1,e.toLowerCase(),null,!1,!1)});var tv=/[\-:]([a-z])/g;function nv(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(tv,nv);et[t]=new pt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(tv,nv);et[t]=new pt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(tv,nv);et[t]=new pt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){et[e]=new pt(e,1,!1,e.toLowerCase(),null,!1,!1)});et.xlinkHref=new pt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){et[e]=new pt(e,1,!1,e.toLowerCase(),null,!0,!0)});function rv(e,t,n,r){var i=et.hasOwnProperty(t)?et[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(AM(t,n,i,r)&&(n=null),r||i===null?PM(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,r=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Ln=NM.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ma=Symbol.for("react.element"),ai=Symbol.for("react.portal"),oi=Symbol.for("react.fragment"),iv=Symbol.for("react.strict_mode"),Fp=Symbol.for("react.profiler"),kk=Symbol.for("react.provider"),Ck=Symbol.for("react.context"),sv=Symbol.for("react.forward_ref"),Vp=Symbol.for("react.suspense"),Bp=Symbol.for("react.suspense_list"),av=Symbol.for("react.memo"),Kn=Symbol.for("react.lazy"),Ek=Symbol.for("react.offscreen"),py=Symbol.iterator;function ss(e){return e===null||typeof e!="object"?null:(e=py&&e[py]||e["@@iterator"],typeof e=="function"?e:null)}var Pe=Object.assign,eu;function gs(e){if(eu===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);eu=t&&t[1]||""}return`
`+eu+e}var tu=!1;function nu(e,t){if(!e||tu)return"";tu=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=r.stack.split(`
`),a=i.length-1,o=s.length-1;1<=a&&0<=o&&i[a]!==s[o];)o--;for(;1<=a&&0<=o;a--,o--)if(i[a]!==s[o]){if(a!==1||o!==1)do if(a--,o--,0>o||i[a]!==s[o]){var l=`
`+i[a].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}while(1<=a&&0<=o);break}}}finally{tu=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?gs(e):""}function IM(e){switch(e.tag){case 5:return gs(e.type);case 16:return gs("Lazy");case 13:return gs("Suspense");case 19:return gs("SuspenseList");case 0:case 2:case 15:return e=nu(e.type,!1),e;case 11:return e=nu(e.type.render,!1),e;case 1:return e=nu(e.type,!0),e;default:return""}}function $p(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case oi:return"Fragment";case ai:return"Portal";case Fp:return"Profiler";case iv:return"StrictMode";case Vp:return"Suspense";case Bp:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Ck:return(e.displayName||"Context")+".Consumer";case kk:return(e._context.displayName||"Context")+".Provider";case sv:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case av:return t=e.displayName||null,t!==null?t:$p(e.type)||"Memo";case Kn:t=e._payload,e=e._init;try{return $p(e(t))}catch{}}return null}function DM(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return $p(t);case 8:return t===iv?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function ur(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Tk(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function LM(e){var t=Tk(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(a){r=""+a,s.call(this,a)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Pa(e){e._valueTracker||(e._valueTracker=LM(e))}function jk(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Tk(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function vo(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Up(e,t){var n=t.checked;return Pe({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function my(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=ur(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Nk(e,t){t=t.checked,t!=null&&rv(e,"checked",t,!1)}function zp(e,t){Nk(e,t);var n=ur(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Gp(e,t.type,n):t.hasOwnProperty("defaultValue")&&Gp(e,t.type,ur(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function vy(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Gp(e,t,n){(t!=="number"||vo(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var ys=Array.isArray;function _i(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+ur(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function Hp(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(L(91));return Pe({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function gy(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(L(92));if(ys(n)){if(1<n.length)throw Error(L(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:ur(n)}}function Mk(e,t){var n=ur(t.value),r=ur(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function yy(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Pk(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Kp(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Pk(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Ra,Rk=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Ra=Ra||document.createElement("div"),Ra.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Ra.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function zs(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Ms={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},OM=["Webkit","ms","Moz","O"];Object.keys(Ms).forEach(function(e){OM.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Ms[t]=Ms[e]})});function Ak(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Ms.hasOwnProperty(e)&&Ms[e]?(""+t).trim():t+"px"}function Ik(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=Ak(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}var qM=Pe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Wp(e,t){if(t){if(qM[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(L(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(L(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(L(61))}if(t.style!=null&&typeof t.style!="object")throw Error(L(62))}}function Yp(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Qp=null;function ov(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Jp=null,ki=null,Ci=null;function xy(e){if(e=ma(e)){if(typeof Jp!="function")throw Error(L(280));var t=e.stateNode;t&&(t=nl(t),Jp(e.stateNode,e.type,t))}}function Dk(e){ki?Ci?Ci.push(e):Ci=[e]:ki=e}function Lk(){if(ki){var e=ki,t=Ci;if(Ci=ki=null,xy(e),t)for(e=0;e<t.length;e++)xy(t[e])}}function Ok(e,t){return e(t)}function qk(){}var ru=!1;function Fk(e,t,n){if(ru)return e(t,n);ru=!0;try{return Ok(e,t,n)}finally{ru=!1,(ki!==null||Ci!==null)&&(qk(),Lk())}}function Gs(e,t){var n=e.stateNode;if(n===null)return null;var r=nl(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(L(231,t,typeof n));return n}var Xp=!1;if(Mn)try{var as={};Object.defineProperty(as,"passive",{get:function(){Xp=!0}}),window.addEventListener("test",as,as),window.removeEventListener("test",as,as)}catch{Xp=!1}function FM(e,t,n,r,i,s,a,o,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(c){this.onError(c)}}var Ps=!1,go=null,yo=!1,Zp=null,VM={onError:function(e){Ps=!0,go=e}};function BM(e,t,n,r,i,s,a,o,l){Ps=!1,go=null,FM.apply(VM,arguments)}function $M(e,t,n,r,i,s,a,o,l){if(BM.apply(this,arguments),Ps){if(Ps){var u=go;Ps=!1,go=null}else throw Error(L(198));yo||(yo=!0,Zp=u)}}function Br(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Vk(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function wy(e){if(Br(e)!==e)throw Error(L(188))}function UM(e){var t=e.alternate;if(!t){if(t=Br(e),t===null)throw Error(L(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return wy(i),e;if(s===r)return wy(i),t;s=s.sibling}throw Error(L(188))}if(n.return!==r.return)n=i,r=s;else{for(var a=!1,o=i.child;o;){if(o===n){a=!0,n=i,r=s;break}if(o===r){a=!0,r=i,n=s;break}o=o.sibling}if(!a){for(o=s.child;o;){if(o===n){a=!0,n=s,r=i;break}if(o===r){a=!0,r=s,n=i;break}o=o.sibling}if(!a)throw Error(L(189))}}if(n.alternate!==r)throw Error(L(190))}if(n.tag!==3)throw Error(L(188));return n.stateNode.current===n?e:t}function Bk(e){return e=UM(e),e!==null?$k(e):null}function $k(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=$k(e);if(t!==null)return t;e=e.sibling}return null}var Uk=Nt.unstable_scheduleCallback,by=Nt.unstable_cancelCallback,zM=Nt.unstable_shouldYield,GM=Nt.unstable_requestPaint,Ve=Nt.unstable_now,HM=Nt.unstable_getCurrentPriorityLevel,lv=Nt.unstable_ImmediatePriority,zk=Nt.unstable_UserBlockingPriority,xo=Nt.unstable_NormalPriority,KM=Nt.unstable_LowPriority,Gk=Nt.unstable_IdlePriority,Xo=null,dn=null;function WM(e){if(dn&&typeof dn.onCommitFiberRoot=="function")try{dn.onCommitFiberRoot(Xo,e,void 0,(e.current.flags&128)===128)}catch{}}var Xt=Math.clz32?Math.clz32:JM,YM=Math.log,QM=Math.LN2;function JM(e){return e>>>=0,e===0?32:31-(YM(e)/QM|0)|0}var Aa=64,Ia=4194304;function xs(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function wo(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,a=n&268435455;if(a!==0){var o=a&~i;o!==0?r=xs(o):(s&=a,s!==0&&(r=xs(s)))}else a=n&~i,a!==0?r=xs(a):s!==0&&(r=xs(s));if(r===0)return 0;if(t!==0&&t!==r&&!(t&i)&&(i=r&-r,s=t&-t,i>=s||i===16&&(s&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Xt(t),i=1<<n,r|=e[n],t&=~i;return r}function XM(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ZM(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var a=31-Xt(s),o=1<<a,l=i[a];l===-1?(!(o&n)||o&r)&&(i[a]=XM(o,t)):l<=t&&(e.expiredLanes|=o),s&=~o}}function em(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Hk(){var e=Aa;return Aa<<=1,!(Aa&4194240)&&(Aa=64),e}function iu(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function ha(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Xt(t),e[t]=n}function eP(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-Xt(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}function uv(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Xt(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var ve=0;function Kk(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Wk,cv,Yk,Qk,Jk,tm=!1,Da=[],er=null,tr=null,nr=null,Hs=new Map,Ks=new Map,Yn=[],tP="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Sy(e,t){switch(e){case"focusin":case"focusout":er=null;break;case"dragenter":case"dragleave":tr=null;break;case"mouseover":case"mouseout":nr=null;break;case"pointerover":case"pointerout":Hs.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ks.delete(t.pointerId)}}function os(e,t,n,r,i,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},t!==null&&(t=ma(t),t!==null&&cv(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function nP(e,t,n,r,i){switch(t){case"focusin":return er=os(er,e,t,n,r,i),!0;case"dragenter":return tr=os(tr,e,t,n,r,i),!0;case"mouseover":return nr=os(nr,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return Hs.set(s,os(Hs.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Ks.set(s,os(Ks.get(s)||null,e,t,n,r,i)),!0}return!1}function Xk(e){var t=Er(e.target);if(t!==null){var n=Br(t);if(n!==null){if(t=n.tag,t===13){if(t=Vk(n),t!==null){e.blockedOn=t,Jk(e.priority,function(){Yk(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function no(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=nm(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Qp=r,n.target.dispatchEvent(r),Qp=null}else return t=ma(n),t!==null&&cv(t),e.blockedOn=n,!1;t.shift()}return!0}function _y(e,t,n){no(e)&&n.delete(t)}function rP(){tm=!1,er!==null&&no(er)&&(er=null),tr!==null&&no(tr)&&(tr=null),nr!==null&&no(nr)&&(nr=null),Hs.forEach(_y),Ks.forEach(_y)}function ls(e,t){e.blockedOn===t&&(e.blockedOn=null,tm||(tm=!0,Nt.unstable_scheduleCallback(Nt.unstable_NormalPriority,rP)))}function Ws(e){function t(i){return ls(i,e)}if(0<Da.length){ls(Da[0],e);for(var n=1;n<Da.length;n++){var r=Da[n];r.blockedOn===e&&(r.blockedOn=null)}}for(er!==null&&ls(er,e),tr!==null&&ls(tr,e),nr!==null&&ls(nr,e),Hs.forEach(t),Ks.forEach(t),n=0;n<Yn.length;n++)r=Yn[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Yn.length&&(n=Yn[0],n.blockedOn===null);)Xk(n),n.blockedOn===null&&Yn.shift()}var Ei=Ln.ReactCurrentBatchConfig,bo=!0;function iP(e,t,n,r){var i=ve,s=Ei.transition;Ei.transition=null;try{ve=1,dv(e,t,n,r)}finally{ve=i,Ei.transition=s}}function sP(e,t,n,r){var i=ve,s=Ei.transition;Ei.transition=null;try{ve=4,dv(e,t,n,r)}finally{ve=i,Ei.transition=s}}function dv(e,t,n,r){if(bo){var i=nm(e,t,n,r);if(i===null)pu(e,t,r,So,n),Sy(e,r);else if(nP(i,e,t,n,r))r.stopPropagation();else if(Sy(e,r),t&4&&-1<tP.indexOf(e)){for(;i!==null;){var s=ma(i);if(s!==null&&Wk(s),s=nm(e,t,n,r),s===null&&pu(e,t,r,So,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else pu(e,t,r,null,n)}}var So=null;function nm(e,t,n,r){if(So=null,e=ov(r),e=Er(e),e!==null)if(t=Br(e),t===null)e=null;else if(n=t.tag,n===13){if(e=Vk(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return So=e,null}function Zk(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(HM()){case lv:return 1;case zk:return 4;case xo:case KM:return 16;case Gk:return 536870912;default:return 16}default:return 16}}var Xn=null,fv=null,ro=null;function eC(){if(ro)return ro;var e,t=fv,n=t.length,r,i="value"in Xn?Xn.value:Xn.textContent,s=i.length;for(e=0;e<n&&t[e]===i[e];e++);var a=n-e;for(r=1;r<=a&&t[n-r]===i[s-r];r++);return ro=i.slice(e,1<r?1-r:void 0)}function io(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function La(){return!0}function ky(){return!1}function Rt(e){function t(n,r,i,s,a){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var o in e)e.hasOwnProperty(o)&&(n=e[o],this[o]=n?n(s):s[o]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?La:ky,this.isPropagationStopped=ky,this}return Pe(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=La)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=La)},persist:function(){},isPersistent:La}),t}var Vi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},hv=Rt(Vi),pa=Pe({},Vi,{view:0,detail:0}),aP=Rt(pa),su,au,us,Zo=Pe({},pa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:pv,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==us&&(us&&e.type==="mousemove"?(su=e.screenX-us.screenX,au=e.screenY-us.screenY):au=su=0,us=e),su)},movementY:function(e){return"movementY"in e?e.movementY:au}}),Cy=Rt(Zo),oP=Pe({},Zo,{dataTransfer:0}),lP=Rt(oP),uP=Pe({},pa,{relatedTarget:0}),ou=Rt(uP),cP=Pe({},Vi,{animationName:0,elapsedTime:0,pseudoElement:0}),dP=Rt(cP),fP=Pe({},Vi,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),hP=Rt(fP),pP=Pe({},Vi,{data:0}),Ey=Rt(pP),mP={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},vP={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},gP={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function yP(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=gP[e])?!!t[e]:!1}function pv(){return yP}var xP=Pe({},pa,{key:function(e){if(e.key){var t=mP[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=io(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?vP[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:pv,charCode:function(e){return e.type==="keypress"?io(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?io(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),wP=Rt(xP),bP=Pe({},Zo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ty=Rt(bP),SP=Pe({},pa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:pv}),_P=Rt(SP),kP=Pe({},Vi,{propertyName:0,elapsedTime:0,pseudoElement:0}),CP=Rt(kP),EP=Pe({},Zo,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),TP=Rt(EP),jP=[9,13,27,32],mv=Mn&&"CompositionEvent"in window,Rs=null;Mn&&"documentMode"in document&&(Rs=document.documentMode);var NP=Mn&&"TextEvent"in window&&!Rs,tC=Mn&&(!mv||Rs&&8<Rs&&11>=Rs),jy=" ",Ny=!1;function nC(e,t){switch(e){case"keyup":return jP.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function rC(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var li=!1;function MP(e,t){switch(e){case"compositionend":return rC(t);case"keypress":return t.which!==32?null:(Ny=!0,jy);case"textInput":return e=t.data,e===jy&&Ny?null:e;default:return null}}function PP(e,t){if(li)return e==="compositionend"||!mv&&nC(e,t)?(e=eC(),ro=fv=Xn=null,li=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return tC&&t.locale!=="ko"?null:t.data;default:return null}}var RP={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function My(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!RP[e.type]:t==="textarea"}function iC(e,t,n,r){Dk(r),t=_o(t,"onChange"),0<t.length&&(n=new hv("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var As=null,Ys=null;function AP(e){mC(e,0)}function el(e){var t=di(e);if(jk(t))return e}function IP(e,t){if(e==="change")return t}var sC=!1;if(Mn){var lu;if(Mn){var uu="oninput"in document;if(!uu){var Py=document.createElement("div");Py.setAttribute("oninput","return;"),uu=typeof Py.oninput=="function"}lu=uu}else lu=!1;sC=lu&&(!document.documentMode||9<document.documentMode)}function Ry(){As&&(As.detachEvent("onpropertychange",aC),Ys=As=null)}function aC(e){if(e.propertyName==="value"&&el(Ys)){var t=[];iC(t,Ys,e,ov(e)),Fk(AP,t)}}function DP(e,t,n){e==="focusin"?(Ry(),As=t,Ys=n,As.attachEvent("onpropertychange",aC)):e==="focusout"&&Ry()}function LP(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return el(Ys)}function OP(e,t){if(e==="click")return el(t)}function qP(e,t){if(e==="input"||e==="change")return el(t)}function FP(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var en=typeof Object.is=="function"?Object.is:FP;function Qs(e,t){if(en(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!qp.call(t,i)||!en(e[i],t[i]))return!1}return!0}function Ay(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Iy(e,t){var n=Ay(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Ay(n)}}function oC(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?oC(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function lC(){for(var e=window,t=vo();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=vo(e.document)}return t}function vv(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function VP(e){var t=lC(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&oC(n.ownerDocument.documentElement,n)){if(r!==null&&vv(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=Iy(n,s);var a=Iy(n,r);i&&a&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var BP=Mn&&"documentMode"in document&&11>=document.documentMode,ui=null,rm=null,Is=null,im=!1;function Dy(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;im||ui==null||ui!==vo(r)||(r=ui,"selectionStart"in r&&vv(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Is&&Qs(Is,r)||(Is=r,r=_o(rm,"onSelect"),0<r.length&&(t=new hv("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=ui)))}function Oa(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var ci={animationend:Oa("Animation","AnimationEnd"),animationiteration:Oa("Animation","AnimationIteration"),animationstart:Oa("Animation","AnimationStart"),transitionend:Oa("Transition","TransitionEnd")},cu={},uC={};Mn&&(uC=document.createElement("div").style,"AnimationEvent"in window||(delete ci.animationend.animation,delete ci.animationiteration.animation,delete ci.animationstart.animation),"TransitionEvent"in window||delete ci.transitionend.transition);function tl(e){if(cu[e])return cu[e];if(!ci[e])return e;var t=ci[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in uC)return cu[e]=t[n];return e}var cC=tl("animationend"),dC=tl("animationiteration"),fC=tl("animationstart"),hC=tl("transitionend"),pC=new Map,Ly="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function pr(e,t){pC.set(e,t),Vr(t,[e])}for(var du=0;du<Ly.length;du++){var fu=Ly[du],$P=fu.toLowerCase(),UP=fu[0].toUpperCase()+fu.slice(1);pr($P,"on"+UP)}pr(cC,"onAnimationEnd");pr(dC,"onAnimationIteration");pr(fC,"onAnimationStart");pr("dblclick","onDoubleClick");pr("focusin","onFocus");pr("focusout","onBlur");pr(hC,"onTransitionEnd");Ni("onMouseEnter",["mouseout","mouseover"]);Ni("onMouseLeave",["mouseout","mouseover"]);Ni("onPointerEnter",["pointerout","pointerover"]);Ni("onPointerLeave",["pointerout","pointerover"]);Vr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Vr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Vr("onBeforeInput",["compositionend","keypress","textInput","paste"]);Vr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Vr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Vr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ws="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),zP=new Set("cancel close invalid load scroll toggle".split(" ").concat(ws));function Oy(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,$M(r,t,void 0,e),e.currentTarget=null}function mC(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var a=r.length-1;0<=a;a--){var o=r[a],l=o.instance,u=o.currentTarget;if(o=o.listener,l!==s&&i.isPropagationStopped())break e;Oy(i,o,u),s=l}else for(a=0;a<r.length;a++){if(o=r[a],l=o.instance,u=o.currentTarget,o=o.listener,l!==s&&i.isPropagationStopped())break e;Oy(i,o,u),s=l}}}if(yo)throw e=Zp,yo=!1,Zp=null,e}function Se(e,t){var n=t[um];n===void 0&&(n=t[um]=new Set);var r=e+"__bubble";n.has(r)||(vC(t,e,2,!1),n.add(r))}function hu(e,t,n){var r=0;t&&(r|=4),vC(n,e,r,t)}var qa="_reactListening"+Math.random().toString(36).slice(2);function Js(e){if(!e[qa]){e[qa]=!0,_k.forEach(function(n){n!=="selectionchange"&&(zP.has(n)||hu(n,!1,e),hu(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[qa]||(t[qa]=!0,hu("selectionchange",!1,t))}}function vC(e,t,n,r){switch(Zk(t)){case 1:var i=iP;break;case 4:i=sP;break;default:i=dv}n=i.bind(null,t,n,e),i=void 0,!Xp||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function pu(e,t,n,r,i){var s=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var o=r.stateNode.containerInfo;if(o===i||o.nodeType===8&&o.parentNode===i)break;if(a===4)for(a=r.return;a!==null;){var l=a.tag;if((l===3||l===4)&&(l=a.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;a=a.return}for(;o!==null;){if(a=Er(o),a===null)return;if(l=a.tag,l===5||l===6){r=s=a;continue e}o=o.parentNode}}r=r.return}Fk(function(){var u=s,c=ov(n),d=[];e:{var h=pC.get(e);if(h!==void 0){var m=hv,g=e;switch(e){case"keypress":if(io(n)===0)break e;case"keydown":case"keyup":m=wP;break;case"focusin":g="focus",m=ou;break;case"focusout":g="blur",m=ou;break;case"beforeblur":case"afterblur":m=ou;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=Cy;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=lP;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=_P;break;case cC:case dC:case fC:m=dP;break;case hC:m=CP;break;case"scroll":m=aP;break;case"wheel":m=TP;break;case"copy":case"cut":case"paste":m=hP;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=Ty}var p=(t&4)!==0,w=!p&&e==="scroll",v=p?h!==null?h+"Capture":null:h;p=[];for(var y=u,x;y!==null;){x=y;var S=x.stateNode;if(x.tag===5&&S!==null&&(x=S,v!==null&&(S=Gs(y,v),S!=null&&p.push(Xs(y,S,x)))),w)break;y=y.return}0<p.length&&(h=new m(h,g,null,n,c),d.push({event:h,listeners:p}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",m=e==="mouseout"||e==="pointerout",h&&n!==Qp&&(g=n.relatedTarget||n.fromElement)&&(Er(g)||g[Pn]))break e;if((m||h)&&(h=c.window===c?c:(h=c.ownerDocument)?h.defaultView||h.parentWindow:window,m?(g=n.relatedTarget||n.toElement,m=u,g=g?Er(g):null,g!==null&&(w=Br(g),g!==w||g.tag!==5&&g.tag!==6)&&(g=null)):(m=null,g=u),m!==g)){if(p=Cy,S="onMouseLeave",v="onMouseEnter",y="mouse",(e==="pointerout"||e==="pointerover")&&(p=Ty,S="onPointerLeave",v="onPointerEnter",y="pointer"),w=m==null?h:di(m),x=g==null?h:di(g),h=new p(S,y+"leave",m,n,c),h.target=w,h.relatedTarget=x,S=null,Er(c)===u&&(p=new p(v,y+"enter",g,n,c),p.target=x,p.relatedTarget=w,S=p),w=S,m&&g)t:{for(p=m,v=g,y=0,x=p;x;x=ri(x))y++;for(x=0,S=v;S;S=ri(S))x++;for(;0<y-x;)p=ri(p),y--;for(;0<x-y;)v=ri(v),x--;for(;y--;){if(p===v||v!==null&&p===v.alternate)break t;p=ri(p),v=ri(v)}p=null}else p=null;m!==null&&qy(d,h,m,p,!1),g!==null&&w!==null&&qy(d,w,g,p,!0)}}e:{if(h=u?di(u):window,m=h.nodeName&&h.nodeName.toLowerCase(),m==="select"||m==="input"&&h.type==="file")var k=IP;else if(My(h))if(sC)k=qP;else{k=LP;var E=DP}else(m=h.nodeName)&&m.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(k=OP);if(k&&(k=k(e,u))){iC(d,k,n,c);break e}E&&E(e,h,u),e==="focusout"&&(E=h._wrapperState)&&E.controlled&&h.type==="number"&&Gp(h,"number",h.value)}switch(E=u?di(u):window,e){case"focusin":(My(E)||E.contentEditable==="true")&&(ui=E,rm=u,Is=null);break;case"focusout":Is=rm=ui=null;break;case"mousedown":im=!0;break;case"contextmenu":case"mouseup":case"dragend":im=!1,Dy(d,n,c);break;case"selectionchange":if(BP)break;case"keydown":case"keyup":Dy(d,n,c)}var j;if(mv)e:{switch(e){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else li?nC(e,n)&&(T="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(T="onCompositionStart");T&&(tC&&n.locale!=="ko"&&(li||T!=="onCompositionStart"?T==="onCompositionEnd"&&li&&(j=eC()):(Xn=c,fv="value"in Xn?Xn.value:Xn.textContent,li=!0)),E=_o(u,T),0<E.length&&(T=new Ey(T,e,null,n,c),d.push({event:T,listeners:E}),j?T.data=j:(j=rC(n),j!==null&&(T.data=j)))),(j=NP?MP(e,n):PP(e,n))&&(u=_o(u,"onBeforeInput"),0<u.length&&(c=new Ey("onBeforeInput","beforeinput",null,n,c),d.push({event:c,listeners:u}),c.data=j))}mC(d,t)})}function Xs(e,t,n){return{instance:e,listener:t,currentTarget:n}}function _o(e,t){for(var n=t+"Capture",r=[];e!==null;){var i=e,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Gs(e,n),s!=null&&r.unshift(Xs(e,s,i)),s=Gs(e,t),s!=null&&r.push(Xs(e,s,i))),e=e.return}return r}function ri(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function qy(e,t,n,r,i){for(var s=t._reactName,a=[];n!==null&&n!==r;){var o=n,l=o.alternate,u=o.stateNode;if(l!==null&&l===r)break;o.tag===5&&u!==null&&(o=u,i?(l=Gs(n,s),l!=null&&a.unshift(Xs(n,l,o))):i||(l=Gs(n,s),l!=null&&a.push(Xs(n,l,o)))),n=n.return}a.length!==0&&e.push({event:t,listeners:a})}var GP=/\r\n?/g,HP=/\u0000|\uFFFD/g;function Fy(e){return(typeof e=="string"?e:""+e).replace(GP,`
`).replace(HP,"")}function Fa(e,t,n){if(t=Fy(t),Fy(e)!==t&&n)throw Error(L(425))}function ko(){}var sm=null,am=null;function om(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var lm=typeof setTimeout=="function"?setTimeout:void 0,KP=typeof clearTimeout=="function"?clearTimeout:void 0,Vy=typeof Promise=="function"?Promise:void 0,WP=typeof queueMicrotask=="function"?queueMicrotask:typeof Vy<"u"?function(e){return Vy.resolve(null).then(e).catch(YP)}:lm;function YP(e){setTimeout(function(){throw e})}function mu(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){e.removeChild(i),Ws(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Ws(t)}function rr(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function By(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Bi=Math.random().toString(36).slice(2),un="__reactFiber$"+Bi,Zs="__reactProps$"+Bi,Pn="__reactContainer$"+Bi,um="__reactEvents$"+Bi,QP="__reactListeners$"+Bi,JP="__reactHandles$"+Bi;function Er(e){var t=e[un];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Pn]||n[un]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=By(e);e!==null;){if(n=e[un])return n;e=By(e)}return t}e=n,n=e.parentNode}return null}function ma(e){return e=e[un]||e[Pn],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function di(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(L(33))}function nl(e){return e[Zs]||null}var cm=[],fi=-1;function mr(e){return{current:e}}function _e(e){0>fi||(e.current=cm[fi],cm[fi]=null,fi--)}function we(e,t){fi++,cm[fi]=e.current,e.current=t}var cr={},ut=mr(cr),yt=mr(!1),Dr=cr;function Mi(e,t){var n=e.type.contextTypes;if(!n)return cr;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=t[s];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function xt(e){return e=e.childContextTypes,e!=null}function Co(){_e(yt),_e(ut)}function $y(e,t,n){if(ut.current!==cr)throw Error(L(168));we(ut,t),we(yt,n)}function gC(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(L(108,DM(e)||"Unknown",i));return Pe({},n,r)}function Eo(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||cr,Dr=ut.current,we(ut,e),we(yt,yt.current),!0}function Uy(e,t,n){var r=e.stateNode;if(!r)throw Error(L(169));n?(e=gC(e,t,Dr),r.__reactInternalMemoizedMergedChildContext=e,_e(yt),_e(ut),we(ut,e)):_e(yt),we(yt,n)}var bn=null,rl=!1,vu=!1;function yC(e){bn===null?bn=[e]:bn.push(e)}function XP(e){rl=!0,yC(e)}function vr(){if(!vu&&bn!==null){vu=!0;var e=0,t=ve;try{var n=bn;for(ve=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}bn=null,rl=!1}catch(i){throw bn!==null&&(bn=bn.slice(e+1)),Uk(lv,vr),i}finally{ve=t,vu=!1}}return null}var hi=[],pi=0,To=null,jo=0,qt=[],Ft=0,Lr=null,_n=1,kn="";function Sr(e,t){hi[pi++]=jo,hi[pi++]=To,To=e,jo=t}function xC(e,t,n){qt[Ft++]=_n,qt[Ft++]=kn,qt[Ft++]=Lr,Lr=e;var r=_n;e=kn;var i=32-Xt(r)-1;r&=~(1<<i),n+=1;var s=32-Xt(t)+i;if(30<s){var a=i-i%5;s=(r&(1<<a)-1).toString(32),r>>=a,i-=a,_n=1<<32-Xt(t)+i|n<<i|r,kn=s+e}else _n=1<<s|n<<i|r,kn=e}function gv(e){e.return!==null&&(Sr(e,1),xC(e,1,0))}function yv(e){for(;e===To;)To=hi[--pi],hi[pi]=null,jo=hi[--pi],hi[pi]=null;for(;e===Lr;)Lr=qt[--Ft],qt[Ft]=null,kn=qt[--Ft],qt[Ft]=null,_n=qt[--Ft],qt[Ft]=null}var Tt=null,Et=null,Ce=!1,Jt=null;function wC(e,t){var n=Vt(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function zy(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Tt=e,Et=rr(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Tt=e,Et=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Lr!==null?{id:_n,overflow:kn}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Vt(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Tt=e,Et=null,!0):!1;default:return!1}}function dm(e){return(e.mode&1)!==0&&(e.flags&128)===0}function fm(e){if(Ce){var t=Et;if(t){var n=t;if(!zy(e,t)){if(dm(e))throw Error(L(418));t=rr(n.nextSibling);var r=Tt;t&&zy(e,t)?wC(r,n):(e.flags=e.flags&-4097|2,Ce=!1,Tt=e)}}else{if(dm(e))throw Error(L(418));e.flags=e.flags&-4097|2,Ce=!1,Tt=e}}}function Gy(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Tt=e}function Va(e){if(e!==Tt)return!1;if(!Ce)return Gy(e),Ce=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!om(e.type,e.memoizedProps)),t&&(t=Et)){if(dm(e))throw bC(),Error(L(418));for(;t;)wC(e,t),t=rr(t.nextSibling)}if(Gy(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(L(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Et=rr(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Et=null}}else Et=Tt?rr(e.stateNode.nextSibling):null;return!0}function bC(){for(var e=Et;e;)e=rr(e.nextSibling)}function Pi(){Et=Tt=null,Ce=!1}function xv(e){Jt===null?Jt=[e]:Jt.push(e)}var ZP=Ln.ReactCurrentBatchConfig;function cs(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(L(309));var r=n.stateNode}if(!r)throw Error(L(147,e));var i=r,s=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(a){var o=i.refs;a===null?delete o[s]:o[s]=a},t._stringRef=s,t)}if(typeof e!="string")throw Error(L(284));if(!n._owner)throw Error(L(290,e))}return e}function Ba(e,t){throw e=Object.prototype.toString.call(t),Error(L(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Hy(e){var t=e._init;return t(e._payload)}function SC(e){function t(v,y){if(e){var x=v.deletions;x===null?(v.deletions=[y],v.flags|=16):x.push(y)}}function n(v,y){if(!e)return null;for(;y!==null;)t(v,y),y=y.sibling;return null}function r(v,y){for(v=new Map;y!==null;)y.key!==null?v.set(y.key,y):v.set(y.index,y),y=y.sibling;return v}function i(v,y){return v=or(v,y),v.index=0,v.sibling=null,v}function s(v,y,x){return v.index=x,e?(x=v.alternate,x!==null?(x=x.index,x<y?(v.flags|=2,y):x):(v.flags|=2,y)):(v.flags|=1048576,y)}function a(v){return e&&v.alternate===null&&(v.flags|=2),v}function o(v,y,x,S){return y===null||y.tag!==6?(y=_u(x,v.mode,S),y.return=v,y):(y=i(y,x),y.return=v,y)}function l(v,y,x,S){var k=x.type;return k===oi?c(v,y,x.props.children,S,x.key):y!==null&&(y.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===Kn&&Hy(k)===y.type)?(S=i(y,x.props),S.ref=cs(v,y,x),S.return=v,S):(S=fo(x.type,x.key,x.props,null,v.mode,S),S.ref=cs(v,y,x),S.return=v,S)}function u(v,y,x,S){return y===null||y.tag!==4||y.stateNode.containerInfo!==x.containerInfo||y.stateNode.implementation!==x.implementation?(y=ku(x,v.mode,S),y.return=v,y):(y=i(y,x.children||[]),y.return=v,y)}function c(v,y,x,S,k){return y===null||y.tag!==7?(y=Rr(x,v.mode,S,k),y.return=v,y):(y=i(y,x),y.return=v,y)}function d(v,y,x){if(typeof y=="string"&&y!==""||typeof y=="number")return y=_u(""+y,v.mode,x),y.return=v,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Ma:return x=fo(y.type,y.key,y.props,null,v.mode,x),x.ref=cs(v,null,y),x.return=v,x;case ai:return y=ku(y,v.mode,x),y.return=v,y;case Kn:var S=y._init;return d(v,S(y._payload),x)}if(ys(y)||ss(y))return y=Rr(y,v.mode,x,null),y.return=v,y;Ba(v,y)}return null}function h(v,y,x,S){var k=y!==null?y.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return k!==null?null:o(v,y,""+x,S);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Ma:return x.key===k?l(v,y,x,S):null;case ai:return x.key===k?u(v,y,x,S):null;case Kn:return k=x._init,h(v,y,k(x._payload),S)}if(ys(x)||ss(x))return k!==null?null:c(v,y,x,S,null);Ba(v,x)}return null}function m(v,y,x,S,k){if(typeof S=="string"&&S!==""||typeof S=="number")return v=v.get(x)||null,o(y,v,""+S,k);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Ma:return v=v.get(S.key===null?x:S.key)||null,l(y,v,S,k);case ai:return v=v.get(S.key===null?x:S.key)||null,u(y,v,S,k);case Kn:var E=S._init;return m(v,y,x,E(S._payload),k)}if(ys(S)||ss(S))return v=v.get(x)||null,c(y,v,S,k,null);Ba(y,S)}return null}function g(v,y,x,S){for(var k=null,E=null,j=y,T=y=0,M=null;j!==null&&T<x.length;T++){j.index>T?(M=j,j=null):M=j.sibling;var D=h(v,j,x[T],S);if(D===null){j===null&&(j=M);break}e&&j&&D.alternate===null&&t(v,j),y=s(D,y,T),E===null?k=D:E.sibling=D,E=D,j=M}if(T===x.length)return n(v,j),Ce&&Sr(v,T),k;if(j===null){for(;T<x.length;T++)j=d(v,x[T],S),j!==null&&(y=s(j,y,T),E===null?k=j:E.sibling=j,E=j);return Ce&&Sr(v,T),k}for(j=r(v,j);T<x.length;T++)M=m(j,v,T,x[T],S),M!==null&&(e&&M.alternate!==null&&j.delete(M.key===null?T:M.key),y=s(M,y,T),E===null?k=M:E.sibling=M,E=M);return e&&j.forEach(function(R){return t(v,R)}),Ce&&Sr(v,T),k}function p(v,y,x,S){var k=ss(x);if(typeof k!="function")throw Error(L(150));if(x=k.call(x),x==null)throw Error(L(151));for(var E=k=null,j=y,T=y=0,M=null,D=x.next();j!==null&&!D.done;T++,D=x.next()){j.index>T?(M=j,j=null):M=j.sibling;var R=h(v,j,D.value,S);if(R===null){j===null&&(j=M);break}e&&j&&R.alternate===null&&t(v,j),y=s(R,y,T),E===null?k=R:E.sibling=R,E=R,j=M}if(D.done)return n(v,j),Ce&&Sr(v,T),k;if(j===null){for(;!D.done;T++,D=x.next())D=d(v,D.value,S),D!==null&&(y=s(D,y,T),E===null?k=D:E.sibling=D,E=D);return Ce&&Sr(v,T),k}for(j=r(v,j);!D.done;T++,D=x.next())D=m(j,v,T,D.value,S),D!==null&&(e&&D.alternate!==null&&j.delete(D.key===null?T:D.key),y=s(D,y,T),E===null?k=D:E.sibling=D,E=D);return e&&j.forEach(function(H){return t(v,H)}),Ce&&Sr(v,T),k}function w(v,y,x,S){if(typeof x=="object"&&x!==null&&x.type===oi&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case Ma:e:{for(var k=x.key,E=y;E!==null;){if(E.key===k){if(k=x.type,k===oi){if(E.tag===7){n(v,E.sibling),y=i(E,x.props.children),y.return=v,v=y;break e}}else if(E.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===Kn&&Hy(k)===E.type){n(v,E.sibling),y=i(E,x.props),y.ref=cs(v,E,x),y.return=v,v=y;break e}n(v,E);break}else t(v,E);E=E.sibling}x.type===oi?(y=Rr(x.props.children,v.mode,S,x.key),y.return=v,v=y):(S=fo(x.type,x.key,x.props,null,v.mode,S),S.ref=cs(v,y,x),S.return=v,v=S)}return a(v);case ai:e:{for(E=x.key;y!==null;){if(y.key===E)if(y.tag===4&&y.stateNode.containerInfo===x.containerInfo&&y.stateNode.implementation===x.implementation){n(v,y.sibling),y=i(y,x.children||[]),y.return=v,v=y;break e}else{n(v,y);break}else t(v,y);y=y.sibling}y=ku(x,v.mode,S),y.return=v,v=y}return a(v);case Kn:return E=x._init,w(v,y,E(x._payload),S)}if(ys(x))return g(v,y,x,S);if(ss(x))return p(v,y,x,S);Ba(v,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,y!==null&&y.tag===6?(n(v,y.sibling),y=i(y,x),y.return=v,v=y):(n(v,y),y=_u(x,v.mode,S),y.return=v,v=y),a(v)):n(v,y)}return w}var Ri=SC(!0),_C=SC(!1),No=mr(null),Mo=null,mi=null,wv=null;function bv(){wv=mi=Mo=null}function Sv(e){var t=No.current;_e(No),e._currentValue=t}function hm(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ti(e,t){Mo=e,wv=mi=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(gt=!0),e.firstContext=null)}function $t(e){var t=e._currentValue;if(wv!==e)if(e={context:e,memoizedValue:t,next:null},mi===null){if(Mo===null)throw Error(L(308));mi=e,Mo.dependencies={lanes:0,firstContext:e}}else mi=mi.next=e;return t}var Tr=null;function _v(e){Tr===null?Tr=[e]:Tr.push(e)}function kC(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,_v(t)):(n.next=i.next,i.next=n),t.interleaved=n,Rn(e,r)}function Rn(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Wn=!1;function kv(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function CC(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Tn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function ir(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,de&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Rn(e,n)}return i=r.interleaved,i===null?(t.next=t,_v(r)):(t.next=i.next,i.next=t),r.interleaved=t,Rn(e,n)}function so(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,uv(e,n)}}function Ky(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=a:s=s.next=a,n=n.next}while(n!==null);s===null?i=s=t:s=s.next=t}else i=s=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Po(e,t,n,r){var i=e.updateQueue;Wn=!1;var s=i.firstBaseUpdate,a=i.lastBaseUpdate,o=i.shared.pending;if(o!==null){i.shared.pending=null;var l=o,u=l.next;l.next=null,a===null?s=u:a.next=u,a=l;var c=e.alternate;c!==null&&(c=c.updateQueue,o=c.lastBaseUpdate,o!==a&&(o===null?c.firstBaseUpdate=u:o.next=u,c.lastBaseUpdate=l))}if(s!==null){var d=i.baseState;a=0,c=u=l=null,o=s;do{var h=o.lane,m=o.eventTime;if((r&h)===h){c!==null&&(c=c.next={eventTime:m,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var g=e,p=o;switch(h=t,m=n,p.tag){case 1:if(g=p.payload,typeof g=="function"){d=g.call(m,d,h);break e}d=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=p.payload,h=typeof g=="function"?g.call(m,d,h):g,h==null)break e;d=Pe({},d,h);break e;case 2:Wn=!0}}o.callback!==null&&o.lane!==0&&(e.flags|=64,h=i.effects,h===null?i.effects=[o]:h.push(o))}else m={eventTime:m,lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},c===null?(u=c=m,l=d):c=c.next=m,a|=h;if(o=o.next,o===null){if(o=i.shared.pending,o===null)break;h=o,o=h.next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}while(!0);if(c===null&&(l=d),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,t=i.shared.interleaved,t!==null){i=t;do a|=i.lane,i=i.next;while(i!==t)}else s===null&&(i.shared.lanes=0);qr|=a,e.lanes=a,e.memoizedState=d}}function Wy(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(L(191,i));i.call(r)}}}var va={},fn=mr(va),ea=mr(va),ta=mr(va);function jr(e){if(e===va)throw Error(L(174));return e}function Cv(e,t){switch(we(ta,t),we(ea,e),we(fn,va),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Kp(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Kp(t,e)}_e(fn),we(fn,t)}function Ai(){_e(fn),_e(ea),_e(ta)}function EC(e){jr(ta.current);var t=jr(fn.current),n=Kp(t,e.type);t!==n&&(we(ea,e),we(fn,n))}function Ev(e){ea.current===e&&(_e(fn),_e(ea))}var je=mr(0);function Ro(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var gu=[];function Tv(){for(var e=0;e<gu.length;e++)gu[e]._workInProgressVersionPrimary=null;gu.length=0}var ao=Ln.ReactCurrentDispatcher,yu=Ln.ReactCurrentBatchConfig,Or=0,Me=null,Ge=null,We=null,Ao=!1,Ds=!1,na=0,eR=0;function it(){throw Error(L(321))}function jv(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!en(e[n],t[n]))return!1;return!0}function Nv(e,t,n,r,i,s){if(Or=s,Me=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ao.current=e===null||e.memoizedState===null?iR:sR,e=n(r,i),Ds){s=0;do{if(Ds=!1,na=0,25<=s)throw Error(L(301));s+=1,We=Ge=null,t.updateQueue=null,ao.current=aR,e=n(r,i)}while(Ds)}if(ao.current=Io,t=Ge!==null&&Ge.next!==null,Or=0,We=Ge=Me=null,Ao=!1,t)throw Error(L(300));return e}function Mv(){var e=na!==0;return na=0,e}function ln(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return We===null?Me.memoizedState=We=e:We=We.next=e,We}function Ut(){if(Ge===null){var e=Me.alternate;e=e!==null?e.memoizedState:null}else e=Ge.next;var t=We===null?Me.memoizedState:We.next;if(t!==null)We=t,Ge=e;else{if(e===null)throw Error(L(310));Ge=e,e={memoizedState:Ge.memoizedState,baseState:Ge.baseState,baseQueue:Ge.baseQueue,queue:Ge.queue,next:null},We===null?Me.memoizedState=We=e:We=We.next=e}return We}function ra(e,t){return typeof t=="function"?t(e):t}function xu(e){var t=Ut(),n=t.queue;if(n===null)throw Error(L(311));n.lastRenderedReducer=e;var r=Ge,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var a=i.next;i.next=s.next,s.next=a}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var o=a=null,l=null,u=s;do{var c=u.lane;if((Or&c)===c)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var d={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(o=l=d,a=r):l=l.next=d,Me.lanes|=c,qr|=c}u=u.next}while(u!==null&&u!==s);l===null?a=r:l.next=o,en(r,t.memoizedState)||(gt=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=l,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do s=i.lane,Me.lanes|=s,qr|=s,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function wu(e){var t=Ut(),n=t.queue;if(n===null)throw Error(L(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(i!==null){n.pending=null;var a=i=i.next;do s=e(s,a.action),a=a.next;while(a!==i);en(s,t.memoizedState)||(gt=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function TC(){}function jC(e,t){var n=Me,r=Ut(),i=t(),s=!en(r.memoizedState,i);if(s&&(r.memoizedState=i,gt=!0),r=r.queue,Pv(PC.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||We!==null&&We.memoizedState.tag&1){if(n.flags|=2048,ia(9,MC.bind(null,n,r,i,t),void 0,null),Ye===null)throw Error(L(349));Or&30||NC(n,t,i)}return i}function NC(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Me.updateQueue,t===null?(t={lastEffect:null,stores:null},Me.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function MC(e,t,n,r){t.value=n,t.getSnapshot=r,RC(t)&&AC(e)}function PC(e,t,n){return n(function(){RC(t)&&AC(e)})}function RC(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!en(e,n)}catch{return!0}}function AC(e){var t=Rn(e,1);t!==null&&Zt(t,e,1,-1)}function Yy(e){var t=ln();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ra,lastRenderedState:e},t.queue=e,e=e.dispatch=rR.bind(null,Me,e),[t.memoizedState,e]}function ia(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Me.updateQueue,t===null?(t={lastEffect:null,stores:null},Me.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function IC(){return Ut().memoizedState}function oo(e,t,n,r){var i=ln();Me.flags|=e,i.memoizedState=ia(1|t,n,void 0,r===void 0?null:r)}function il(e,t,n,r){var i=Ut();r=r===void 0?null:r;var s=void 0;if(Ge!==null){var a=Ge.memoizedState;if(s=a.destroy,r!==null&&jv(r,a.deps)){i.memoizedState=ia(t,n,s,r);return}}Me.flags|=e,i.memoizedState=ia(1|t,n,s,r)}function Qy(e,t){return oo(8390656,8,e,t)}function Pv(e,t){return il(2048,8,e,t)}function DC(e,t){return il(4,2,e,t)}function LC(e,t){return il(4,4,e,t)}function OC(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function qC(e,t,n){return n=n!=null?n.concat([e]):null,il(4,4,OC.bind(null,t,e),n)}function Rv(){}function FC(e,t){var n=Ut();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&jv(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function VC(e,t){var n=Ut();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&jv(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function BC(e,t,n){return Or&21?(en(n,t)||(n=Hk(),Me.lanes|=n,qr|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,gt=!0),e.memoizedState=n)}function tR(e,t){var n=ve;ve=n!==0&&4>n?n:4,e(!0);var r=yu.transition;yu.transition={};try{e(!1),t()}finally{ve=n,yu.transition=r}}function $C(){return Ut().memoizedState}function nR(e,t,n){var r=ar(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},UC(e))zC(t,n);else if(n=kC(e,t,n,r),n!==null){var i=ft();Zt(n,e,r,i),GC(n,t,r)}}function rR(e,t,n){var r=ar(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(UC(e))zC(t,i);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var a=t.lastRenderedState,o=s(a,n);if(i.hasEagerState=!0,i.eagerState=o,en(o,a)){var l=t.interleaved;l===null?(i.next=i,_v(t)):(i.next=l.next,l.next=i),t.interleaved=i;return}}catch{}finally{}n=kC(e,t,i,r),n!==null&&(i=ft(),Zt(n,e,r,i),GC(n,t,r))}}function UC(e){var t=e.alternate;return e===Me||t!==null&&t===Me}function zC(e,t){Ds=Ao=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function GC(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,uv(e,n)}}var Io={readContext:$t,useCallback:it,useContext:it,useEffect:it,useImperativeHandle:it,useInsertionEffect:it,useLayoutEffect:it,useMemo:it,useReducer:it,useRef:it,useState:it,useDebugValue:it,useDeferredValue:it,useTransition:it,useMutableSource:it,useSyncExternalStore:it,useId:it,unstable_isNewReconciler:!1},iR={readContext:$t,useCallback:function(e,t){return ln().memoizedState=[e,t===void 0?null:t],e},useContext:$t,useEffect:Qy,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,oo(4194308,4,OC.bind(null,t,e),n)},useLayoutEffect:function(e,t){return oo(4194308,4,e,t)},useInsertionEffect:function(e,t){return oo(4,2,e,t)},useMemo:function(e,t){var n=ln();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=ln();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=nR.bind(null,Me,e),[r.memoizedState,e]},useRef:function(e){var t=ln();return e={current:e},t.memoizedState=e},useState:Yy,useDebugValue:Rv,useDeferredValue:function(e){return ln().memoizedState=e},useTransition:function(){var e=Yy(!1),t=e[0];return e=tR.bind(null,e[1]),ln().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Me,i=ln();if(Ce){if(n===void 0)throw Error(L(407));n=n()}else{if(n=t(),Ye===null)throw Error(L(349));Or&30||NC(r,t,n)}i.memoizedState=n;var s={value:n,getSnapshot:t};return i.queue=s,Qy(PC.bind(null,r,s,e),[e]),r.flags|=2048,ia(9,MC.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=ln(),t=Ye.identifierPrefix;if(Ce){var n=kn,r=_n;n=(r&~(1<<32-Xt(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=na++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=eR++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},sR={readContext:$t,useCallback:FC,useContext:$t,useEffect:Pv,useImperativeHandle:qC,useInsertionEffect:DC,useLayoutEffect:LC,useMemo:VC,useReducer:xu,useRef:IC,useState:function(){return xu(ra)},useDebugValue:Rv,useDeferredValue:function(e){var t=Ut();return BC(t,Ge.memoizedState,e)},useTransition:function(){var e=xu(ra)[0],t=Ut().memoizedState;return[e,t]},useMutableSource:TC,useSyncExternalStore:jC,useId:$C,unstable_isNewReconciler:!1},aR={readContext:$t,useCallback:FC,useContext:$t,useEffect:Pv,useImperativeHandle:qC,useInsertionEffect:DC,useLayoutEffect:LC,useMemo:VC,useReducer:wu,useRef:IC,useState:function(){return wu(ra)},useDebugValue:Rv,useDeferredValue:function(e){var t=Ut();return Ge===null?t.memoizedState=e:BC(t,Ge.memoizedState,e)},useTransition:function(){var e=wu(ra)[0],t=Ut().memoizedState;return[e,t]},useMutableSource:TC,useSyncExternalStore:jC,useId:$C,unstable_isNewReconciler:!1};function Yt(e,t){if(e&&e.defaultProps){t=Pe({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function pm(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Pe({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var sl={isMounted:function(e){return(e=e._reactInternals)?Br(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ft(),i=ar(e),s=Tn(r,i);s.payload=t,n!=null&&(s.callback=n),t=ir(e,s,i),t!==null&&(Zt(t,e,i,r),so(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ft(),i=ar(e),s=Tn(r,i);s.tag=1,s.payload=t,n!=null&&(s.callback=n),t=ir(e,s,i),t!==null&&(Zt(t,e,i,r),so(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ft(),r=ar(e),i=Tn(n,r);i.tag=2,t!=null&&(i.callback=t),t=ir(e,i,r),t!==null&&(Zt(t,e,r,n),so(t,e,r))}};function Jy(e,t,n,r,i,s,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,s,a):t.prototype&&t.prototype.isPureReactComponent?!Qs(n,r)||!Qs(i,s):!0}function HC(e,t,n){var r=!1,i=cr,s=t.contextType;return typeof s=="object"&&s!==null?s=$t(s):(i=xt(t)?Dr:ut.current,r=t.contextTypes,s=(r=r!=null)?Mi(e,i):cr),t=new t(n,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=sl,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function Xy(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&sl.enqueueReplaceState(t,t.state,null)}function mm(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},kv(e);var s=t.contextType;typeof s=="object"&&s!==null?i.context=$t(s):(s=xt(t)?Dr:ut.current,i.context=Mi(e,s)),i.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(pm(e,t,s,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&sl.enqueueReplaceState(i,i.state,null),Po(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function Ii(e,t){try{var n="",r=t;do n+=IM(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:t,stack:i,digest:null}}function bu(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function vm(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var oR=typeof WeakMap=="function"?WeakMap:Map;function KC(e,t,n){n=Tn(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Lo||(Lo=!0,Em=r),vm(e,t)},n}function WC(e,t,n){n=Tn(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){vm(e,t)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){vm(e,t),typeof r!="function"&&(sr===null?sr=new Set([this]):sr.add(this));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),n}function Zy(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new oR;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=bR.bind(null,e,t,n),t.then(e,e))}function e0(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function t0(e,t,n,r,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Tn(-1,1),t.tag=2,ir(n,t,1))),n.lanes|=1),e)}var lR=Ln.ReactCurrentOwner,gt=!1;function dt(e,t,n,r){t.child=e===null?_C(t,null,n,r):Ri(t,e.child,n,r)}function n0(e,t,n,r,i){n=n.render;var s=t.ref;return Ti(t,i),r=Nv(e,t,n,r,s,i),n=Mv(),e!==null&&!gt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,An(e,t,i)):(Ce&&n&&gv(t),t.flags|=1,dt(e,t,r,i),t.child)}function r0(e,t,n,r,i){if(e===null){var s=n.type;return typeof s=="function"&&!Vv(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=s,YC(e,t,s,r,i)):(e=fo(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!(e.lanes&i)){var a=s.memoizedProps;if(n=n.compare,n=n!==null?n:Qs,n(a,r)&&e.ref===t.ref)return An(e,t,i)}return t.flags|=1,e=or(s,r),e.ref=t.ref,e.return=t,t.child=e}function YC(e,t,n,r,i){if(e!==null){var s=e.memoizedProps;if(Qs(s,r)&&e.ref===t.ref)if(gt=!1,t.pendingProps=r=s,(e.lanes&i)!==0)e.flags&131072&&(gt=!0);else return t.lanes=e.lanes,An(e,t,i)}return gm(e,t,n,r,i)}function QC(e,t,n){var r=t.pendingProps,i=r.children,s=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},we(gi,_t),_t|=n;else{if(!(n&1073741824))return e=s!==null?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,we(gi,_t),_t|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,we(gi,_t),_t|=r}else s!==null?(r=s.baseLanes|n,t.memoizedState=null):r=n,we(gi,_t),_t|=r;return dt(e,t,i,n),t.child}function JC(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function gm(e,t,n,r,i){var s=xt(n)?Dr:ut.current;return s=Mi(t,s),Ti(t,i),n=Nv(e,t,n,r,s,i),r=Mv(),e!==null&&!gt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,An(e,t,i)):(Ce&&r&&gv(t),t.flags|=1,dt(e,t,n,i),t.child)}function i0(e,t,n,r,i){if(xt(n)){var s=!0;Eo(t)}else s=!1;if(Ti(t,i),t.stateNode===null)lo(e,t),HC(t,n,r),mm(t,n,r,i),r=!0;else if(e===null){var a=t.stateNode,o=t.memoizedProps;a.props=o;var l=a.context,u=n.contextType;typeof u=="object"&&u!==null?u=$t(u):(u=xt(n)?Dr:ut.current,u=Mi(t,u));var c=n.getDerivedStateFromProps,d=typeof c=="function"||typeof a.getSnapshotBeforeUpdate=="function";d||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==r||l!==u)&&Xy(t,a,r,u),Wn=!1;var h=t.memoizedState;a.state=h,Po(t,r,a,i),l=t.memoizedState,o!==r||h!==l||yt.current||Wn?(typeof c=="function"&&(pm(t,n,c,r),l=t.memoizedState),(o=Wn||Jy(t,n,o,r,h,l,u))?(d||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),a.props=r,a.state=l,a.context=u,r=o):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,CC(e,t),o=t.memoizedProps,u=t.type===t.elementType?o:Yt(t.type,o),a.props=u,d=t.pendingProps,h=a.context,l=n.contextType,typeof l=="object"&&l!==null?l=$t(l):(l=xt(n)?Dr:ut.current,l=Mi(t,l));var m=n.getDerivedStateFromProps;(c=typeof m=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==d||h!==l)&&Xy(t,a,r,l),Wn=!1,h=t.memoizedState,a.state=h,Po(t,r,a,i);var g=t.memoizedState;o!==d||h!==g||yt.current||Wn?(typeof m=="function"&&(pm(t,n,m,r),g=t.memoizedState),(u=Wn||Jy(t,n,u,r,h,g,l)||!1)?(c||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,g,l),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,g,l)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=g),a.props=r,a.state=g,a.context=l,r=u):(typeof a.componentDidUpdate!="function"||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return ym(e,t,n,r,s,i)}function ym(e,t,n,r,i,s){JC(e,t);var a=(t.flags&128)!==0;if(!r&&!a)return i&&Uy(t,n,!1),An(e,t,s);r=t.stateNode,lR.current=t;var o=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&a?(t.child=Ri(t,e.child,null,s),t.child=Ri(t,null,o,s)):dt(e,t,o,s),t.memoizedState=r.state,i&&Uy(t,n,!0),t.child}function XC(e){var t=e.stateNode;t.pendingContext?$y(e,t.pendingContext,t.pendingContext!==t.context):t.context&&$y(e,t.context,!1),Cv(e,t.containerInfo)}function s0(e,t,n,r,i){return Pi(),xv(i),t.flags|=256,dt(e,t,n,r),t.child}var xm={dehydrated:null,treeContext:null,retryLane:0};function wm(e){return{baseLanes:e,cachePool:null,transitions:null}}function ZC(e,t,n){var r=t.pendingProps,i=je.current,s=!1,a=(t.flags&128)!==0,o;if((o=a)||(o=e!==null&&e.memoizedState===null?!1:(i&2)!==0),o?(s=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),we(je,i&1),e===null)return fm(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(a=r.children,e=r.fallback,s?(r=t.mode,s=t.child,a={mode:"hidden",children:a},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=a):s=ll(a,r,0,null),e=Rr(e,r,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=wm(n),t.memoizedState=xm,e):Av(t,a));if(i=e.memoizedState,i!==null&&(o=i.dehydrated,o!==null))return uR(e,t,a,r,o,i,n);if(s){s=r.fallback,a=t.mode,i=e.child,o=i.sibling;var l={mode:"hidden",children:r.children};return!(a&1)&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=l,t.deletions=null):(r=or(i,l),r.subtreeFlags=i.subtreeFlags&14680064),o!==null?s=or(o,s):(s=Rr(s,a,n,null),s.flags|=2),s.return=t,r.return=t,r.sibling=s,t.child=r,r=s,s=t.child,a=e.child.memoizedState,a=a===null?wm(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},s.memoizedState=a,s.childLanes=e.childLanes&~n,t.memoizedState=xm,r}return s=e.child,e=s.sibling,r=or(s,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Av(e,t){return t=ll({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function $a(e,t,n,r){return r!==null&&xv(r),Ri(t,e.child,null,n),e=Av(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function uR(e,t,n,r,i,s,a){if(n)return t.flags&256?(t.flags&=-257,r=bu(Error(L(422))),$a(e,t,a,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(s=r.fallback,i=t.mode,r=ll({mode:"visible",children:r.children},i,0,null),s=Rr(s,i,a,null),s.flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,t.mode&1&&Ri(t,e.child,null,a),t.child.memoizedState=wm(a),t.memoizedState=xm,s);if(!(t.mode&1))return $a(e,t,a,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var o=r.dgst;return r=o,s=Error(L(419)),r=bu(s,r,void 0),$a(e,t,a,r)}if(o=(a&e.childLanes)!==0,gt||o){if(r=Ye,r!==null){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|a)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Rn(e,i),Zt(r,e,i,-1))}return Fv(),r=bu(Error(L(421))),$a(e,t,a,r)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=SR.bind(null,e),i._reactRetry=t,null):(e=s.treeContext,Et=rr(i.nextSibling),Tt=t,Ce=!0,Jt=null,e!==null&&(qt[Ft++]=_n,qt[Ft++]=kn,qt[Ft++]=Lr,_n=e.id,kn=e.overflow,Lr=t),t=Av(t,r.children),t.flags|=4096,t)}function a0(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),hm(e.return,t,n)}function Su(e,t,n,r,i){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function eE(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(dt(e,t,r.children,n),r=je.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&a0(e,n,t);else if(e.tag===19)a0(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(we(je,r),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&Ro(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Su(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&Ro(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Su(t,!0,n,null,s);break;case"together":Su(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function lo(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function An(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),qr|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(L(153));if(t.child!==null){for(e=t.child,n=or(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=or(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function cR(e,t,n){switch(t.tag){case 3:XC(t),Pi();break;case 5:EC(t);break;case 1:xt(t.type)&&Eo(t);break;case 4:Cv(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;we(No,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(we(je,je.current&1),t.flags|=128,null):n&t.child.childLanes?ZC(e,t,n):(we(je,je.current&1),e=An(e,t,n),e!==null?e.sibling:null);we(je,je.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return eE(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),we(je,je.current),r)break;return null;case 22:case 23:return t.lanes=0,QC(e,t,n)}return An(e,t,n)}var tE,bm,nE,rE;tE=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};bm=function(){};nE=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,jr(fn.current);var s=null;switch(n){case"input":i=Up(e,i),r=Up(e,r),s=[];break;case"select":i=Pe({},i,{value:void 0}),r=Pe({},r,{value:void 0}),s=[];break;case"textarea":i=Hp(e,i),r=Hp(e,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=ko)}Wp(n,r);var a;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var o=i[u];for(a in o)o.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Us.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var l=r[u];if(o=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&l!==o&&(l!=null||o!=null))if(u==="style")if(o){for(a in o)!o.hasOwnProperty(a)||l&&l.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in l)l.hasOwnProperty(a)&&o[a]!==l[a]&&(n||(n={}),n[a]=l[a])}else n||(s||(s=[]),s.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,o=o?o.__html:void 0,l!=null&&o!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Us.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&Se("scroll",e),s||o===l||(s=[])):(s=s||[]).push(u,l))}n&&(s=s||[]).push("style",n);var u=s;(t.updateQueue=u)&&(t.flags|=4)}};rE=function(e,t,n,r){n!==r&&(t.flags|=4)};function ds(e,t){if(!Ce)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function st(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function dR(e,t,n){var r=t.pendingProps;switch(yv(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return st(t),null;case 1:return xt(t.type)&&Co(),st(t),null;case 3:return r=t.stateNode,Ai(),_e(yt),_e(ut),Tv(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Va(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Jt!==null&&(Nm(Jt),Jt=null))),bm(e,t),st(t),null;case 5:Ev(t);var i=jr(ta.current);if(n=t.type,e!==null&&t.stateNode!=null)nE(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(L(166));return st(t),null}if(e=jr(fn.current),Va(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[un]=t,r[Zs]=s,e=(t.mode&1)!==0,n){case"dialog":Se("cancel",r),Se("close",r);break;case"iframe":case"object":case"embed":Se("load",r);break;case"video":case"audio":for(i=0;i<ws.length;i++)Se(ws[i],r);break;case"source":Se("error",r);break;case"img":case"image":case"link":Se("error",r),Se("load",r);break;case"details":Se("toggle",r);break;case"input":my(r,s),Se("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Se("invalid",r);break;case"textarea":gy(r,s),Se("invalid",r)}Wp(n,s),i=null;for(var a in s)if(s.hasOwnProperty(a)){var o=s[a];a==="children"?typeof o=="string"?r.textContent!==o&&(s.suppressHydrationWarning!==!0&&Fa(r.textContent,o,e),i=["children",o]):typeof o=="number"&&r.textContent!==""+o&&(s.suppressHydrationWarning!==!0&&Fa(r.textContent,o,e),i=["children",""+o]):Us.hasOwnProperty(a)&&o!=null&&a==="onScroll"&&Se("scroll",r)}switch(n){case"input":Pa(r),vy(r,s,!0);break;case"textarea":Pa(r),yy(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=ko)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{a=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Pk(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=a.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=a.createElement(n,{is:r.is}):(e=a.createElement(n),n==="select"&&(a=e,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):e=a.createElementNS(e,n),e[un]=t,e[Zs]=r,tE(e,t,!1,!1),t.stateNode=e;e:{switch(a=Yp(n,r),n){case"dialog":Se("cancel",e),Se("close",e),i=r;break;case"iframe":case"object":case"embed":Se("load",e),i=r;break;case"video":case"audio":for(i=0;i<ws.length;i++)Se(ws[i],e);i=r;break;case"source":Se("error",e),i=r;break;case"img":case"image":case"link":Se("error",e),Se("load",e),i=r;break;case"details":Se("toggle",e),i=r;break;case"input":my(e,r),i=Up(e,r),Se("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=Pe({},r,{value:void 0}),Se("invalid",e);break;case"textarea":gy(e,r),i=Hp(e,r),Se("invalid",e);break;default:i=r}Wp(n,i),o=i;for(s in o)if(o.hasOwnProperty(s)){var l=o[s];s==="style"?Ik(e,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&Rk(e,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&zs(e,l):typeof l=="number"&&zs(e,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Us.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Se("scroll",e):l!=null&&rv(e,s,l,a))}switch(n){case"input":Pa(e),vy(e,r,!1);break;case"textarea":Pa(e),yy(e);break;case"option":r.value!=null&&e.setAttribute("value",""+ur(r.value));break;case"select":e.multiple=!!r.multiple,s=r.value,s!=null?_i(e,!!r.multiple,s,!1):r.defaultValue!=null&&_i(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=ko)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return st(t),null;case 6:if(e&&t.stateNode!=null)rE(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(L(166));if(n=jr(ta.current),jr(fn.current),Va(t)){if(r=t.stateNode,n=t.memoizedProps,r[un]=t,(s=r.nodeValue!==n)&&(e=Tt,e!==null))switch(e.tag){case 3:Fa(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Fa(r.nodeValue,n,(e.mode&1)!==0)}s&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[un]=t,t.stateNode=r}return st(t),null;case 13:if(_e(je),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ce&&Et!==null&&t.mode&1&&!(t.flags&128))bC(),Pi(),t.flags|=98560,s=!1;else if(s=Va(t),r!==null&&r.dehydrated!==null){if(e===null){if(!s)throw Error(L(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(L(317));s[un]=t}else Pi(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;st(t),s=!1}else Jt!==null&&(Nm(Jt),Jt=null),s=!0;if(!s)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||je.current&1?He===0&&(He=3):Fv())),t.updateQueue!==null&&(t.flags|=4),st(t),null);case 4:return Ai(),bm(e,t),e===null&&Js(t.stateNode.containerInfo),st(t),null;case 10:return Sv(t.type._context),st(t),null;case 17:return xt(t.type)&&Co(),st(t),null;case 19:if(_e(je),s=t.memoizedState,s===null)return st(t),null;if(r=(t.flags&128)!==0,a=s.rendering,a===null)if(r)ds(s,!1);else{if(He!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(a=Ro(e),a!==null){for(t.flags|=128,ds(s,!1),r=a.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)s=n,e=r,s.flags&=14680066,a=s.alternate,a===null?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=a.childLanes,s.lanes=a.lanes,s.child=a.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=a.memoizedProps,s.memoizedState=a.memoizedState,s.updateQueue=a.updateQueue,s.type=a.type,e=a.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return we(je,je.current&1|2),t.child}e=e.sibling}s.tail!==null&&Ve()>Di&&(t.flags|=128,r=!0,ds(s,!1),t.lanes=4194304)}else{if(!r)if(e=Ro(a),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),ds(s,!0),s.tail===null&&s.tailMode==="hidden"&&!a.alternate&&!Ce)return st(t),null}else 2*Ve()-s.renderingStartTime>Di&&n!==1073741824&&(t.flags|=128,r=!0,ds(s,!1),t.lanes=4194304);s.isBackwards?(a.sibling=t.child,t.child=a):(n=s.last,n!==null?n.sibling=a:t.child=a,s.last=a)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=Ve(),t.sibling=null,n=je.current,we(je,r?n&1|2:n&1),t):(st(t),null);case 22:case 23:return qv(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?_t&1073741824&&(st(t),t.subtreeFlags&6&&(t.flags|=8192)):st(t),null;case 24:return null;case 25:return null}throw Error(L(156,t.tag))}function fR(e,t){switch(yv(t),t.tag){case 1:return xt(t.type)&&Co(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Ai(),_e(yt),_e(ut),Tv(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Ev(t),null;case 13:if(_e(je),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(L(340));Pi()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return _e(je),null;case 4:return Ai(),null;case 10:return Sv(t.type._context),null;case 22:case 23:return qv(),null;case 24:return null;default:return null}}var Ua=!1,ot=!1,hR=typeof WeakSet=="function"?WeakSet:Set,$=null;function vi(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){De(e,t,r)}else n.current=null}function Sm(e,t,n){try{n()}catch(r){De(e,t,r)}}var o0=!1;function pR(e,t){if(sm=bo,e=lC(),vv(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var a=0,o=-1,l=-1,u=0,c=0,d=e,h=null;t:for(;;){for(var m;d!==n||i!==0&&d.nodeType!==3||(o=a+i),d!==s||r!==0&&d.nodeType!==3||(l=a+r),d.nodeType===3&&(a+=d.nodeValue.length),(m=d.firstChild)!==null;)h=d,d=m;for(;;){if(d===e)break t;if(h===n&&++u===i&&(o=a),h===s&&++c===r&&(l=a),(m=d.nextSibling)!==null)break;d=h,h=d.parentNode}d=m}n=o===-1||l===-1?null:{start:o,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(am={focusedElem:e,selectionRange:n},bo=!1,$=t;$!==null;)if(t=$,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,$=e;else for(;$!==null;){t=$;try{var g=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var p=g.memoizedProps,w=g.memoizedState,v=t.stateNode,y=v.getSnapshotBeforeUpdate(t.elementType===t.type?p:Yt(t.type,p),w);v.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var x=t.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(L(163))}}catch(S){De(t,t.return,S)}if(e=t.sibling,e!==null){e.return=t.return,$=e;break}$=t.return}return g=o0,o0=!1,g}function Ls(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,s!==void 0&&Sm(t,n,s)}i=i.next}while(i!==r)}}function al(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function _m(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function iE(e){var t=e.alternate;t!==null&&(e.alternate=null,iE(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[un],delete t[Zs],delete t[um],delete t[QP],delete t[JP])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function sE(e){return e.tag===5||e.tag===3||e.tag===4}function l0(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||sE(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function km(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=ko));else if(r!==4&&(e=e.child,e!==null))for(km(e,t,n),e=e.sibling;e!==null;)km(e,t,n),e=e.sibling}function Cm(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(Cm(e,t,n),e=e.sibling;e!==null;)Cm(e,t,n),e=e.sibling}var Je=null,Qt=!1;function Un(e,t,n){for(n=n.child;n!==null;)aE(e,t,n),n=n.sibling}function aE(e,t,n){if(dn&&typeof dn.onCommitFiberUnmount=="function")try{dn.onCommitFiberUnmount(Xo,n)}catch{}switch(n.tag){case 5:ot||vi(n,t);case 6:var r=Je,i=Qt;Je=null,Un(e,t,n),Je=r,Qt=i,Je!==null&&(Qt?(e=Je,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Je.removeChild(n.stateNode));break;case 18:Je!==null&&(Qt?(e=Je,n=n.stateNode,e.nodeType===8?mu(e.parentNode,n):e.nodeType===1&&mu(e,n),Ws(e)):mu(Je,n.stateNode));break;case 4:r=Je,i=Qt,Je=n.stateNode.containerInfo,Qt=!0,Un(e,t,n),Je=r,Qt=i;break;case 0:case 11:case 14:case 15:if(!ot&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,a=s.destroy;s=s.tag,a!==void 0&&(s&2||s&4)&&Sm(n,t,a),i=i.next}while(i!==r)}Un(e,t,n);break;case 1:if(!ot&&(vi(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){De(n,t,o)}Un(e,t,n);break;case 21:Un(e,t,n);break;case 22:n.mode&1?(ot=(r=ot)||n.memoizedState!==null,Un(e,t,n),ot=r):Un(e,t,n);break;default:Un(e,t,n)}}function u0(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new hR),t.forEach(function(r){var i=_R.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Kt(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=e,a=t,o=a;e:for(;o!==null;){switch(o.tag){case 5:Je=o.stateNode,Qt=!1;break e;case 3:Je=o.stateNode.containerInfo,Qt=!0;break e;case 4:Je=o.stateNode.containerInfo,Qt=!0;break e}o=o.return}if(Je===null)throw Error(L(160));aE(s,a,i),Je=null,Qt=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){De(i,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)oE(t,e),t=t.sibling}function oE(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Kt(t,e),on(e),r&4){try{Ls(3,e,e.return),al(3,e)}catch(p){De(e,e.return,p)}try{Ls(5,e,e.return)}catch(p){De(e,e.return,p)}}break;case 1:Kt(t,e),on(e),r&512&&n!==null&&vi(n,n.return);break;case 5:if(Kt(t,e),on(e),r&512&&n!==null&&vi(n,n.return),e.flags&32){var i=e.stateNode;try{zs(i,"")}catch(p){De(e,e.return,p)}}if(r&4&&(i=e.stateNode,i!=null)){var s=e.memoizedProps,a=n!==null?n.memoizedProps:s,o=e.type,l=e.updateQueue;if(e.updateQueue=null,l!==null)try{o==="input"&&s.type==="radio"&&s.name!=null&&Nk(i,s),Yp(o,a);var u=Yp(o,s);for(a=0;a<l.length;a+=2){var c=l[a],d=l[a+1];c==="style"?Ik(i,d):c==="dangerouslySetInnerHTML"?Rk(i,d):c==="children"?zs(i,d):rv(i,c,d,u)}switch(o){case"input":zp(i,s);break;case"textarea":Mk(i,s);break;case"select":var h=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var m=s.value;m!=null?_i(i,!!s.multiple,m,!1):h!==!!s.multiple&&(s.defaultValue!=null?_i(i,!!s.multiple,s.defaultValue,!0):_i(i,!!s.multiple,s.multiple?[]:"",!1))}i[Zs]=s}catch(p){De(e,e.return,p)}}break;case 6:if(Kt(t,e),on(e),r&4){if(e.stateNode===null)throw Error(L(162));i=e.stateNode,s=e.memoizedProps;try{i.nodeValue=s}catch(p){De(e,e.return,p)}}break;case 3:if(Kt(t,e),on(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ws(t.containerInfo)}catch(p){De(e,e.return,p)}break;case 4:Kt(t,e),on(e);break;case 13:Kt(t,e),on(e),i=e.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Lv=Ve())),r&4&&u0(e);break;case 22:if(c=n!==null&&n.memoizedState!==null,e.mode&1?(ot=(u=ot)||c,Kt(t,e),ot=u):Kt(t,e),on(e),r&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!c&&e.mode&1)for($=e,c=e.child;c!==null;){for(d=$=c;$!==null;){switch(h=$,m=h.child,h.tag){case 0:case 11:case 14:case 15:Ls(4,h,h.return);break;case 1:vi(h,h.return);var g=h.stateNode;if(typeof g.componentWillUnmount=="function"){r=h,n=h.return;try{t=r,g.props=t.memoizedProps,g.state=t.memoizedState,g.componentWillUnmount()}catch(p){De(r,n,p)}}break;case 5:vi(h,h.return);break;case 22:if(h.memoizedState!==null){d0(d);continue}}m!==null?(m.return=h,$=m):d0(d)}c=c.sibling}e:for(c=null,d=e;;){if(d.tag===5){if(c===null){c=d;try{i=d.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(o=d.stateNode,l=d.memoizedProps.style,a=l!=null&&l.hasOwnProperty("display")?l.display:null,o.style.display=Ak("display",a))}catch(p){De(e,e.return,p)}}}else if(d.tag===6){if(c===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(p){De(e,e.return,p)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===e)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;d.sibling===null;){if(d.return===null||d.return===e)break e;c===d&&(c=null),d=d.return}c===d&&(c=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Kt(t,e),on(e),r&4&&u0(e);break;case 21:break;default:Kt(t,e),on(e)}}function on(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(sE(n)){var r=n;break e}n=n.return}throw Error(L(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(zs(i,""),r.flags&=-33);var s=l0(e);Cm(e,s,i);break;case 3:case 4:var a=r.stateNode.containerInfo,o=l0(e);km(e,o,a);break;default:throw Error(L(161))}}catch(l){De(e,e.return,l)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function mR(e,t,n){$=e,lE(e)}function lE(e,t,n){for(var r=(e.mode&1)!==0;$!==null;){var i=$,s=i.child;if(i.tag===22&&r){var a=i.memoizedState!==null||Ua;if(!a){var o=i.alternate,l=o!==null&&o.memoizedState!==null||ot;o=Ua;var u=ot;if(Ua=a,(ot=l)&&!u)for($=i;$!==null;)a=$,l=a.child,a.tag===22&&a.memoizedState!==null?f0(i):l!==null?(l.return=a,$=l):f0(i);for(;s!==null;)$=s,lE(s),s=s.sibling;$=i,Ua=o,ot=u}c0(e)}else i.subtreeFlags&8772&&s!==null?(s.return=i,$=s):c0(e)}}function c0(e){for(;$!==null;){var t=$;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:ot||al(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!ot)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:Yt(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&Wy(t,s,r);break;case 3:var a=t.updateQueue;if(a!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Wy(t,a,n)}break;case 5:var o=t.stateNode;if(n===null&&t.flags&4){n=o;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var d=c.dehydrated;d!==null&&Ws(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(L(163))}ot||t.flags&512&&_m(t)}catch(h){De(t,t.return,h)}}if(t===e){$=null;break}if(n=t.sibling,n!==null){n.return=t.return,$=n;break}$=t.return}}function d0(e){for(;$!==null;){var t=$;if(t===e){$=null;break}var n=t.sibling;if(n!==null){n.return=t.return,$=n;break}$=t.return}}function f0(e){for(;$!==null;){var t=$;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{al(4,t)}catch(l){De(t,n,l)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(l){De(t,i,l)}}var s=t.return;try{_m(t)}catch(l){De(t,s,l)}break;case 5:var a=t.return;try{_m(t)}catch(l){De(t,a,l)}}}catch(l){De(t,t.return,l)}if(t===e){$=null;break}var o=t.sibling;if(o!==null){o.return=t.return,$=o;break}$=t.return}}var vR=Math.ceil,Do=Ln.ReactCurrentDispatcher,Iv=Ln.ReactCurrentOwner,Bt=Ln.ReactCurrentBatchConfig,de=0,Ye=null,$e=null,Ze=0,_t=0,gi=mr(0),He=0,sa=null,qr=0,ol=0,Dv=0,Os=null,vt=null,Lv=0,Di=1/0,wn=null,Lo=!1,Em=null,sr=null,za=!1,Zn=null,Oo=0,qs=0,Tm=null,uo=-1,co=0;function ft(){return de&6?Ve():uo!==-1?uo:uo=Ve()}function ar(e){return e.mode&1?de&2&&Ze!==0?Ze&-Ze:ZP.transition!==null?(co===0&&(co=Hk()),co):(e=ve,e!==0||(e=window.event,e=e===void 0?16:Zk(e.type)),e):1}function Zt(e,t,n,r){if(50<qs)throw qs=0,Tm=null,Error(L(185));ha(e,n,r),(!(de&2)||e!==Ye)&&(e===Ye&&(!(de&2)&&(ol|=n),He===4&&Qn(e,Ze)),wt(e,r),n===1&&de===0&&!(t.mode&1)&&(Di=Ve()+500,rl&&vr()))}function wt(e,t){var n=e.callbackNode;ZM(e,t);var r=wo(e,e===Ye?Ze:0);if(r===0)n!==null&&by(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&by(n),t===1)e.tag===0?XP(h0.bind(null,e)):yC(h0.bind(null,e)),WP(function(){!(de&6)&&vr()}),n=null;else{switch(Kk(r)){case 1:n=lv;break;case 4:n=zk;break;case 16:n=xo;break;case 536870912:n=Gk;break;default:n=xo}n=vE(n,uE.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function uE(e,t){if(uo=-1,co=0,de&6)throw Error(L(327));var n=e.callbackNode;if(ji()&&e.callbackNode!==n)return null;var r=wo(e,e===Ye?Ze:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=qo(e,r);else{t=r;var i=de;de|=2;var s=dE();(Ye!==e||Ze!==t)&&(wn=null,Di=Ve()+500,Pr(e,t));do try{xR();break}catch(o){cE(e,o)}while(!0);bv(),Do.current=s,de=i,$e!==null?t=0:(Ye=null,Ze=0,t=He)}if(t!==0){if(t===2&&(i=em(e),i!==0&&(r=i,t=jm(e,i))),t===1)throw n=sa,Pr(e,0),Qn(e,r),wt(e,Ve()),n;if(t===6)Qn(e,r);else{if(i=e.current.alternate,!(r&30)&&!gR(i)&&(t=qo(e,r),t===2&&(s=em(e),s!==0&&(r=s,t=jm(e,s))),t===1))throw n=sa,Pr(e,0),Qn(e,r),wt(e,Ve()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(L(345));case 2:_r(e,vt,wn);break;case 3:if(Qn(e,r),(r&130023424)===r&&(t=Lv+500-Ve(),10<t)){if(wo(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){ft(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=lm(_r.bind(null,e,vt,wn),t);break}_r(e,vt,wn);break;case 4:if(Qn(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var a=31-Xt(r);s=1<<a,a=t[a],a>i&&(i=a),r&=~s}if(r=i,r=Ve()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*vR(r/1960))-r,10<r){e.timeoutHandle=lm(_r.bind(null,e,vt,wn),r);break}_r(e,vt,wn);break;case 5:_r(e,vt,wn);break;default:throw Error(L(329))}}}return wt(e,Ve()),e.callbackNode===n?uE.bind(null,e):null}function jm(e,t){var n=Os;return e.current.memoizedState.isDehydrated&&(Pr(e,t).flags|=256),e=qo(e,t),e!==2&&(t=vt,vt=n,t!==null&&Nm(t)),e}function Nm(e){vt===null?vt=e:vt.push.apply(vt,e)}function gR(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!en(s(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Qn(e,t){for(t&=~Dv,t&=~ol,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Xt(t),r=1<<n;e[n]=-1,t&=~r}}function h0(e){if(de&6)throw Error(L(327));ji();var t=wo(e,0);if(!(t&1))return wt(e,Ve()),null;var n=qo(e,t);if(e.tag!==0&&n===2){var r=em(e);r!==0&&(t=r,n=jm(e,r))}if(n===1)throw n=sa,Pr(e,0),Qn(e,t),wt(e,Ve()),n;if(n===6)throw Error(L(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,_r(e,vt,wn),wt(e,Ve()),null}function Ov(e,t){var n=de;de|=1;try{return e(t)}finally{de=n,de===0&&(Di=Ve()+500,rl&&vr())}}function Fr(e){Zn!==null&&Zn.tag===0&&!(de&6)&&ji();var t=de;de|=1;var n=Bt.transition,r=ve;try{if(Bt.transition=null,ve=1,e)return e()}finally{ve=r,Bt.transition=n,de=t,!(de&6)&&vr()}}function qv(){_t=gi.current,_e(gi)}function Pr(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,KP(n)),$e!==null)for(n=$e.return;n!==null;){var r=n;switch(yv(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Co();break;case 3:Ai(),_e(yt),_e(ut),Tv();break;case 5:Ev(r);break;case 4:Ai();break;case 13:_e(je);break;case 19:_e(je);break;case 10:Sv(r.type._context);break;case 22:case 23:qv()}n=n.return}if(Ye=e,$e=e=or(e.current,null),Ze=_t=t,He=0,sa=null,Dv=ol=qr=0,vt=Os=null,Tr!==null){for(t=0;t<Tr.length;t++)if(n=Tr[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var a=s.next;s.next=i,r.next=a}n.pending=r}Tr=null}return e}function cE(e,t){do{var n=$e;try{if(bv(),ao.current=Io,Ao){for(var r=Me.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Ao=!1}if(Or=0,We=Ge=Me=null,Ds=!1,na=0,Iv.current=null,n===null||n.return===null){He=1,sa=t,$e=null;break}e:{var s=e,a=n.return,o=n,l=t;if(t=Ze,o.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,c=o,d=c.tag;if(!(c.mode&1)&&(d===0||d===11||d===15)){var h=c.alternate;h?(c.updateQueue=h.updateQueue,c.memoizedState=h.memoizedState,c.lanes=h.lanes):(c.updateQueue=null,c.memoizedState=null)}var m=e0(a);if(m!==null){m.flags&=-257,t0(m,a,o,s,t),m.mode&1&&Zy(s,u,t),t=m,l=u;var g=t.updateQueue;if(g===null){var p=new Set;p.add(l),t.updateQueue=p}else g.add(l);break e}else{if(!(t&1)){Zy(s,u,t),Fv();break e}l=Error(L(426))}}else if(Ce&&o.mode&1){var w=e0(a);if(w!==null){!(w.flags&65536)&&(w.flags|=256),t0(w,a,o,s,t),xv(Ii(l,o));break e}}s=l=Ii(l,o),He!==4&&(He=2),Os===null?Os=[s]:Os.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var v=KC(s,l,t);Ky(s,v);break e;case 1:o=l;var y=s.type,x=s.stateNode;if(!(s.flags&128)&&(typeof y.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(sr===null||!sr.has(x)))){s.flags|=65536,t&=-t,s.lanes|=t;var S=WC(s,o,t);Ky(s,S);break e}}s=s.return}while(s!==null)}hE(n)}catch(k){t=k,$e===n&&n!==null&&($e=n=n.return);continue}break}while(!0)}function dE(){var e=Do.current;return Do.current=Io,e===null?Io:e}function Fv(){(He===0||He===3||He===2)&&(He=4),Ye===null||!(qr&268435455)&&!(ol&268435455)||Qn(Ye,Ze)}function qo(e,t){var n=de;de|=2;var r=dE();(Ye!==e||Ze!==t)&&(wn=null,Pr(e,t));do try{yR();break}catch(i){cE(e,i)}while(!0);if(bv(),de=n,Do.current=r,$e!==null)throw Error(L(261));return Ye=null,Ze=0,He}function yR(){for(;$e!==null;)fE($e)}function xR(){for(;$e!==null&&!zM();)fE($e)}function fE(e){var t=mE(e.alternate,e,_t);e.memoizedProps=e.pendingProps,t===null?hE(e):$e=t,Iv.current=null}function hE(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=fR(n,t),n!==null){n.flags&=32767,$e=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{He=6,$e=null;return}}else if(n=dR(n,t,_t),n!==null){$e=n;return}if(t=t.sibling,t!==null){$e=t;return}$e=t=e}while(t!==null);He===0&&(He=5)}function _r(e,t,n){var r=ve,i=Bt.transition;try{Bt.transition=null,ve=1,wR(e,t,n,r)}finally{Bt.transition=i,ve=r}return null}function wR(e,t,n,r){do ji();while(Zn!==null);if(de&6)throw Error(L(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(L(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(eP(e,s),e===Ye&&($e=Ye=null,Ze=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||za||(za=!0,vE(xo,function(){return ji(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Bt.transition,Bt.transition=null;var a=ve;ve=1;var o=de;de|=4,Iv.current=null,pR(e,n),oE(n,e),VP(am),bo=!!sm,am=sm=null,e.current=n,mR(n),GM(),de=o,ve=a,Bt.transition=s}else e.current=n;if(za&&(za=!1,Zn=e,Oo=i),s=e.pendingLanes,s===0&&(sr=null),WM(n.stateNode),wt(e,Ve()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Lo)throw Lo=!1,e=Em,Em=null,e;return Oo&1&&e.tag!==0&&ji(),s=e.pendingLanes,s&1?e===Tm?qs++:(qs=0,Tm=e):qs=0,vr(),null}function ji(){if(Zn!==null){var e=Kk(Oo),t=Bt.transition,n=ve;try{if(Bt.transition=null,ve=16>e?16:e,Zn===null)var r=!1;else{if(e=Zn,Zn=null,Oo=0,de&6)throw Error(L(331));var i=de;for(de|=4,$=e.current;$!==null;){var s=$,a=s.child;if($.flags&16){var o=s.deletions;if(o!==null){for(var l=0;l<o.length;l++){var u=o[l];for($=u;$!==null;){var c=$;switch(c.tag){case 0:case 11:case 15:Ls(8,c,s)}var d=c.child;if(d!==null)d.return=c,$=d;else for(;$!==null;){c=$;var h=c.sibling,m=c.return;if(iE(c),c===u){$=null;break}if(h!==null){h.return=m,$=h;break}$=m}}}var g=s.alternate;if(g!==null){var p=g.child;if(p!==null){g.child=null;do{var w=p.sibling;p.sibling=null,p=w}while(p!==null)}}$=s}}if(s.subtreeFlags&2064&&a!==null)a.return=s,$=a;else e:for(;$!==null;){if(s=$,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Ls(9,s,s.return)}var v=s.sibling;if(v!==null){v.return=s.return,$=v;break e}$=s.return}}var y=e.current;for($=y;$!==null;){a=$;var x=a.child;if(a.subtreeFlags&2064&&x!==null)x.return=a,$=x;else e:for(a=y;$!==null;){if(o=$,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:al(9,o)}}catch(k){De(o,o.return,k)}if(o===a){$=null;break e}var S=o.sibling;if(S!==null){S.return=o.return,$=S;break e}$=o.return}}if(de=i,vr(),dn&&typeof dn.onPostCommitFiberRoot=="function")try{dn.onPostCommitFiberRoot(Xo,e)}catch{}r=!0}return r}finally{ve=n,Bt.transition=t}}return!1}function p0(e,t,n){t=Ii(n,t),t=KC(e,t,1),e=ir(e,t,1),t=ft(),e!==null&&(ha(e,1,t),wt(e,t))}function De(e,t,n){if(e.tag===3)p0(e,e,n);else for(;t!==null;){if(t.tag===3){p0(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(sr===null||!sr.has(r))){e=Ii(n,e),e=WC(t,e,1),t=ir(t,e,1),e=ft(),t!==null&&(ha(t,1,e),wt(t,e));break}}t=t.return}}function bR(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=ft(),e.pingedLanes|=e.suspendedLanes&n,Ye===e&&(Ze&n)===n&&(He===4||He===3&&(Ze&130023424)===Ze&&500>Ve()-Lv?Pr(e,0):Dv|=n),wt(e,t)}function pE(e,t){t===0&&(e.mode&1?(t=Ia,Ia<<=1,!(Ia&130023424)&&(Ia=4194304)):t=1);var n=ft();e=Rn(e,t),e!==null&&(ha(e,t,n),wt(e,n))}function SR(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),pE(e,n)}function _R(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(L(314))}r!==null&&r.delete(t),pE(e,n)}var mE;mE=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||yt.current)gt=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return gt=!1,cR(e,t,n);gt=!!(e.flags&131072)}else gt=!1,Ce&&t.flags&1048576&&xC(t,jo,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;lo(e,t),e=t.pendingProps;var i=Mi(t,ut.current);Ti(t,n),i=Nv(null,t,r,e,i,n);var s=Mv();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,xt(r)?(s=!0,Eo(t)):s=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,kv(t),i.updater=sl,t.stateNode=i,i._reactInternals=t,mm(t,r,e,n),t=ym(null,t,r,!0,s,n)):(t.tag=0,Ce&&s&&gv(t),dt(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(lo(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=CR(r),e=Yt(r,e),i){case 0:t=gm(null,t,r,e,n);break e;case 1:t=i0(null,t,r,e,n);break e;case 11:t=n0(null,t,r,e,n);break e;case 14:t=r0(null,t,r,Yt(r.type,e),n);break e}throw Error(L(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Yt(r,i),gm(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Yt(r,i),i0(e,t,r,i,n);case 3:e:{if(XC(t),e===null)throw Error(L(387));r=t.pendingProps,s=t.memoizedState,i=s.element,CC(e,t),Po(t,r,null,n);var a=t.memoizedState;if(r=a.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){i=Ii(Error(L(423)),t),t=s0(e,t,r,n,i);break e}else if(r!==i){i=Ii(Error(L(424)),t),t=s0(e,t,r,n,i);break e}else for(Et=rr(t.stateNode.containerInfo.firstChild),Tt=t,Ce=!0,Jt=null,n=_C(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Pi(),r===i){t=An(e,t,n);break e}dt(e,t,r,n)}t=t.child}return t;case 5:return EC(t),e===null&&fm(t),r=t.type,i=t.pendingProps,s=e!==null?e.memoizedProps:null,a=i.children,om(r,i)?a=null:s!==null&&om(r,s)&&(t.flags|=32),JC(e,t),dt(e,t,a,n),t.child;case 6:return e===null&&fm(t),null;case 13:return ZC(e,t,n);case 4:return Cv(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Ri(t,null,r,n):dt(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Yt(r,i),n0(e,t,r,i,n);case 7:return dt(e,t,t.pendingProps,n),t.child;case 8:return dt(e,t,t.pendingProps.children,n),t.child;case 12:return dt(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,s=t.memoizedProps,a=i.value,we(No,r._currentValue),r._currentValue=a,s!==null)if(en(s.value,a)){if(s.children===i.children&&!yt.current){t=An(e,t,n);break e}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var o=s.dependencies;if(o!==null){a=s.child;for(var l=o.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=Tn(-1,n&-n),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),hm(s.return,n,t),o.lanes|=n;break}l=l.next}}else if(s.tag===10)a=s.type===t.type?null:s.child;else if(s.tag===18){if(a=s.return,a===null)throw Error(L(341));a.lanes|=n,o=a.alternate,o!==null&&(o.lanes|=n),hm(a,n,t),a=s.sibling}else a=s.child;if(a!==null)a.return=s;else for(a=s;a!==null;){if(a===t){a=null;break}if(s=a.sibling,s!==null){s.return=a.return,a=s;break}a=a.return}s=a}dt(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Ti(t,n),i=$t(i),r=r(i),t.flags|=1,dt(e,t,r,n),t.child;case 14:return r=t.type,i=Yt(r,t.pendingProps),i=Yt(r.type,i),r0(e,t,r,i,n);case 15:return YC(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Yt(r,i),lo(e,t),t.tag=1,xt(r)?(e=!0,Eo(t)):e=!1,Ti(t,n),HC(t,r,i),mm(t,r,i,n),ym(null,t,r,!0,e,n);case 19:return eE(e,t,n);case 22:return QC(e,t,n)}throw Error(L(156,t.tag))};function vE(e,t){return Uk(e,t)}function kR(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Vt(e,t,n,r){return new kR(e,t,n,r)}function Vv(e){return e=e.prototype,!(!e||!e.isReactComponent)}function CR(e){if(typeof e=="function")return Vv(e)?1:0;if(e!=null){if(e=e.$$typeof,e===sv)return 11;if(e===av)return 14}return 2}function or(e,t){var n=e.alternate;return n===null?(n=Vt(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function fo(e,t,n,r,i,s){var a=2;if(r=e,typeof e=="function")Vv(e)&&(a=1);else if(typeof e=="string")a=5;else e:switch(e){case oi:return Rr(n.children,i,s,t);case iv:a=8,i|=8;break;case Fp:return e=Vt(12,n,t,i|2),e.elementType=Fp,e.lanes=s,e;case Vp:return e=Vt(13,n,t,i),e.elementType=Vp,e.lanes=s,e;case Bp:return e=Vt(19,n,t,i),e.elementType=Bp,e.lanes=s,e;case Ek:return ll(n,i,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case kk:a=10;break e;case Ck:a=9;break e;case sv:a=11;break e;case av:a=14;break e;case Kn:a=16,r=null;break e}throw Error(L(130,e==null?e:typeof e,""))}return t=Vt(a,n,t,i),t.elementType=e,t.type=r,t.lanes=s,t}function Rr(e,t,n,r){return e=Vt(7,e,r,t),e.lanes=n,e}function ll(e,t,n,r){return e=Vt(22,e,r,t),e.elementType=Ek,e.lanes=n,e.stateNode={isHidden:!1},e}function _u(e,t,n){return e=Vt(6,e,null,t),e.lanes=n,e}function ku(e,t,n){return t=Vt(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function ER(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=iu(0),this.expirationTimes=iu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=iu(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Bv(e,t,n,r,i,s,a,o,l){return e=new ER(e,t,n,o,l),t===1?(t=1,s===!0&&(t|=8)):t=0,s=Vt(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},kv(s),e}function TR(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ai,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function gE(e){if(!e)return cr;e=e._reactInternals;e:{if(Br(e)!==e||e.tag!==1)throw Error(L(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(xt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(L(171))}if(e.tag===1){var n=e.type;if(xt(n))return gC(e,n,t)}return t}function yE(e,t,n,r,i,s,a,o,l){return e=Bv(n,r,!0,e,i,s,a,o,l),e.context=gE(null),n=e.current,r=ft(),i=ar(n),s=Tn(r,i),s.callback=t??null,ir(n,s,i),e.current.lanes=i,ha(e,i,r),wt(e,r),e}function ul(e,t,n,r){var i=t.current,s=ft(),a=ar(i);return n=gE(n),t.context===null?t.context=n:t.pendingContext=n,t=Tn(s,a),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=ir(i,t,a),e!==null&&(Zt(e,i,a,s),so(e,i,a)),a}function Fo(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function m0(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function $v(e,t){m0(e,t),(e=e.alternate)&&m0(e,t)}function jR(){return null}var xE=typeof reportError=="function"?reportError:function(e){console.error(e)};function Uv(e){this._internalRoot=e}cl.prototype.render=Uv.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(L(409));ul(e,t,null,null)};cl.prototype.unmount=Uv.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Fr(function(){ul(null,e,null,null)}),t[Pn]=null}};function cl(e){this._internalRoot=e}cl.prototype.unstable_scheduleHydration=function(e){if(e){var t=Qk();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Yn.length&&t!==0&&t<Yn[n].priority;n++);Yn.splice(n,0,e),n===0&&Xk(e)}};function zv(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function dl(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function v0(){}function NR(e,t,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var u=Fo(a);s.call(u)}}var a=yE(t,r,e,0,null,!1,!1,"",v0);return e._reactRootContainer=a,e[Pn]=a.current,Js(e.nodeType===8?e.parentNode:e),Fr(),a}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var o=r;r=function(){var u=Fo(l);o.call(u)}}var l=Bv(e,0,!1,null,null,!1,!1,"",v0);return e._reactRootContainer=l,e[Pn]=l.current,Js(e.nodeType===8?e.parentNode:e),Fr(function(){ul(t,l,n,r)}),l}function fl(e,t,n,r,i){var s=n._reactRootContainer;if(s){var a=s;if(typeof i=="function"){var o=i;i=function(){var l=Fo(a);o.call(l)}}ul(t,a,e,i)}else a=NR(n,t,e,i,r);return Fo(a)}Wk=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=xs(t.pendingLanes);n!==0&&(uv(t,n|1),wt(t,Ve()),!(de&6)&&(Di=Ve()+500,vr()))}break;case 13:Fr(function(){var r=Rn(e,1);if(r!==null){var i=ft();Zt(r,e,1,i)}}),$v(e,1)}};cv=function(e){if(e.tag===13){var t=Rn(e,134217728);if(t!==null){var n=ft();Zt(t,e,134217728,n)}$v(e,134217728)}};Yk=function(e){if(e.tag===13){var t=ar(e),n=Rn(e,t);if(n!==null){var r=ft();Zt(n,e,t,r)}$v(e,t)}};Qk=function(){return ve};Jk=function(e,t){var n=ve;try{return ve=e,t()}finally{ve=n}};Jp=function(e,t,n){switch(t){case"input":if(zp(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=nl(r);if(!i)throw Error(L(90));jk(r),zp(r,i)}}}break;case"textarea":Mk(e,n);break;case"select":t=n.value,t!=null&&_i(e,!!n.multiple,t,!1)}};Ok=Ov;qk=Fr;var MR={usingClientEntryPoint:!1,Events:[ma,di,nl,Dk,Lk,Ov]},fs={findFiberByHostInstance:Er,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},PR={bundleType:fs.bundleType,version:fs.version,rendererPackageName:fs.rendererPackageName,rendererConfig:fs.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ln.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Bk(e),e===null?null:e.stateNode},findFiberByHostInstance:fs.findFiberByHostInstance||jR,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ga=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ga.isDisabled&&Ga.supportsFiber)try{Xo=Ga.inject(PR),dn=Ga}catch{}}Pt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=MR;Pt.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!zv(t))throw Error(L(200));return TR(e,t,null,n)};Pt.createRoot=function(e,t){if(!zv(e))throw Error(L(299));var n=!1,r="",i=xE;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=Bv(e,1,!1,null,null,n,!1,r,i),e[Pn]=t.current,Js(e.nodeType===8?e.parentNode:e),new Uv(t)};Pt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(L(188)):(e=Object.keys(e).join(","),Error(L(268,e)));return e=Bk(t),e=e===null?null:e.stateNode,e};Pt.flushSync=function(e){return Fr(e)};Pt.hydrate=function(e,t,n){if(!dl(t))throw Error(L(200));return fl(null,e,t,!0,n)};Pt.hydrateRoot=function(e,t,n){if(!zv(e))throw Error(L(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",a=xE;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),t=yE(t,null,e,1,n??null,i,!1,s,a),e[Pn]=t.current,Js(e),r)for(e=0;e<r.length;e++)n=r[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new cl(t)};Pt.render=function(e,t,n){if(!dl(t))throw Error(L(200));return fl(null,e,t,!1,n)};Pt.unmountComponentAtNode=function(e){if(!dl(e))throw Error(L(40));return e._reactRootContainer?(Fr(function(){fl(null,null,e,!1,function(){e._reactRootContainer=null,e[Pn]=null})}),!0):!1};Pt.unstable_batchedUpdates=Ov;Pt.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!dl(n))throw Error(L(200));if(e==null||e._reactInternals===void 0)throw Error(L(38));return fl(e,t,n,!1,r)};Pt.version="18.3.1-next-f1338f8080-20240426";function wE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(wE)}catch(e){console.error(e)}}wE(),wk.exports=Pt;var RR=wk.exports,g0=RR;Op.createRoot=g0.createRoot,Op.hydrateRoot=g0.hydrateRoot;const AR="modulepreload",IR=function(e){return"/agent-director/"+e},y0={},Gv=function(t,n,r){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),o=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));i=Promise.allSettled(n.map(l=>{if(l=IR(l),l in y0)return;y0[l]=!0;const u=l.endsWith(".css"),c=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${c}`))return;const d=document.createElement("link");if(d.rel=u?"stylesheet":AR,u||(d.as="script"),d.crossOrigin="",d.href=l,o&&d.setAttribute("nonce",o),document.head.appendChild(d),u)return new Promise((h,m)=>{d.addEventListener("load",h),d.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${l}`)))})}))}function s(a){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a}return i.then(a=>{for(const o of a||[])o.status==="rejected"&&s(o.reason);return t().catch(s)})},DR=()=>f.jsxs("svg",{className:"logo-mark",width:"54",height:"54",viewBox:"0 0 120 120",role:"img","aria-label":"Agent Director logo",children:[f.jsx("rect",{x:"8",y:"8",width:"104",height:"104",rx:"18",className:"logo-frame"}),f.jsx("rect",{x:"24",y:"28",width:"72",height:"16",rx:"6",className:"logo-bar logo-bar-a"}),f.jsx("rect",{x:"24",y:"52",width:"72",height:"16",rx:"6",className:"logo-bar logo-bar-b"}),f.jsx("rect",{x:"24",y:"76",width:"72",height:"16",rx:"6",className:"logo-bar logo-bar-c"}),f.jsx("circle",{cx:"96",cy:"36",r:"6",className:"logo-node logo-node-a"}),f.jsx("circle",{cx:"96",cy:"60",r:"6",className:"logo-node logo-node-b"}),f.jsx("circle",{cx:"96",cy:"84",r:"6",className:"logo-node logo-node-c"})]});function LR({trace:e,traces:t=[],selectedTraceId:n,onSelectTrace:r,onReload:i,onStartTour:s,onToggleStory:a,onOpenPalette:o,onToggleExplain:l,onShareSession:u,onThemeChange:c,themeMode:d="studio",activeSessions:h=1,shareStatus:m=null,explainMode:g=!1,storyActive:p=!1}){return f.jsxs("header",{className:"header","data-help":!0,"data-help-indicator":!0,"data-tour":"header","data-help-title":"Mission control","data-help-body":"Trace identity, status, and live controls live here. Use Story, Guide, or Explain to orient new viewers.","data-help-placement":"bottom",children:[f.jsxs("div",{className:"header-title",children:[f.jsxs("div",{className:"header-logo",children:[f.jsx(DR,{}),f.jsx("span",{children:"Agent Director"})]}),f.jsx("div",{className:"header-tagline",children:"Cinematic trace intelligence for agent runs."}),f.jsxs("div",{className:"header-meta",children:[f.jsxs("span",{className:"header-run",children:["Run: ",(e==null?void 0:e.id)??"loading"]}),t.length>0?f.jsx("select",{className:"trace-select",value:n??(e==null?void 0:e.id)??"","aria-label":"Select trace",onChange:w=>r==null?void 0:r(w.target.value),"data-help":!0,"data-help-title":"Trace selector","data-help-body":"Switch between available runs to compare different sessions.","data-help-placement":"bottom",children:t.map(w=>f.jsxs("option",{value:w.id,children:[w.name," (",w.id,")"]},w.id))}):null,f.jsx("span",{className:`status-pill status-${(e==null?void 0:e.status)??"loading"}`,children:(e==null?void 0:e.status)??"loading"}),e!=null&&e.replay?f.jsxs("span",{className:"header-replay",title:`Replay from ${e.branchPointStepId??"unknown step"}`,children:["Replay: ",e.replay.strategy]}):null,f.jsxs("span",{className:"header-wall",children:["Wall: ",(e==null?void 0:e.metadata.wallTimeMs)??0,"ms"]}),f.jsxs("span",{className:"header-presence","aria-label":"Active sessions",children:["Live: ",h]}),m?f.jsx("span",{className:"header-share-status",children:m}):null]})]}),f.jsxs("div",{className:"header-actions",children:[f.jsxs("label",{className:"theme-picker",children:["Theme",f.jsxs("select",{className:"trace-select",value:d,"aria-label":"Select theme",onChange:w=>c==null?void 0:c(w.target.value),children:[f.jsx("option",{value:"studio",children:"Studio"}),f.jsx("option",{value:"focus",children:"Focus"}),f.jsx("option",{value:"contrast",children:"Contrast"})]})]}),f.jsx("button",{className:`ghost-button ${p?"active":""}`,type:"button",onClick:a,"aria-pressed":p,"aria-label":"Toggle story mode","data-help":!0,"data-help-title":"Story mode","data-help-body":"Auto-runs a cinematic walkthrough for demos.","data-help-placement":"bottom",children:"Story"}),f.jsx("button",{className:"ghost-button",type:"button",onClick:s,"aria-label":"Start guided tour","data-help":!0,"data-help-title":"Guided tour","data-help-body":"Walk through the interface step by step.","data-help-placement":"bottom",children:"Guide"}),f.jsx("button",{className:"ghost-button",type:"button",onClick:o,"aria-label":"Open command palette","data-help":!0,"data-help-title":"Command palette","data-help-body":"Search and trigger any action instantly.","data-help-placement":"bottom",children:"Command"}),f.jsx("button",{className:`ghost-button ${g?"active":""}`,type:"button",onClick:l,"aria-pressed":g,"aria-label":"Toggle explain mode","data-help":!0,"data-help-title":"Explain mode","data-help-body":"Hover any control to see contextual guidance.","data-help-placement":"bottom",children:"Explain"}),f.jsx("button",{className:"ghost-button",onClick:i,type:"button","aria-label":"Refresh traces",title:"Refresh traces","data-help":!0,"data-help-title":"Refresh","data-help-body":"Reload traces from the data store.","data-help-placement":"bottom",children:"Refresh"}),f.jsx("button",{className:"ghost-button",type:"button",onClick:u,"aria-label":"Copy live session link",title:"Copy live session link",children:"Share"}),f.jsx("a",{className:"ghost-button",href:"/help.html",target:"_blank",rel:"noreferrer","data-help":!0,"data-help-title":"Help","data-help-body":"Open quick docs for first run, key flows, troubleshooting, and shortcuts.","data-help-placement":"bottom",children:"Help"}),null]})]})}function OR({insights:e,investigation:t,onSelectStep:n,onJumpToBottleneck:r,onJumpToError:i}){var h,m,g,p,w;if(!e)return null;const s=e.timing,a=e.ioWarnings??[],o=e.concurrency,l=e.retryPatterns,u=e.costByTool??{},c=e.costByModel??{},d=((h=t==null?void 0:t.hypotheses)==null?void 0:h.slice(0,2))??[];return f.jsxs("section",{className:"insight-strip","data-help":!0,"data-help-indicator":!0,"data-tour":"insights","data-help-title":"Run insights","data-help-body":"Fast diagnostics for latency, cost, errors, and concurrency. Click chips to jump into the trace.","data-help-placement":"bottom",children:[f.jsxs("div",{className:"insight-block","data-help":!0,"data-help-title":"Top latency","data-help-body":"Largest steps by duration; jump straight to the slowest.","data-help-placement":"bottom",children:[f.jsx("span",{className:"insight-label",children:"Top latency"}),f.jsxs("div",{className:"insight-items",children:[e.topLatencySteps.map(v=>f.jsxs("button",{className:"insight-chip",type:"button",title:`Jump to ${v.name}`,onClick:()=>n==null?void 0:n(v.stepId),children:[v.name," (",v.durationMs,"ms)"]},v.stepId)),e.topLatencySteps.length>0?f.jsx("button",{className:"insight-chip",type:"button",onClick:r,title:"Jump to longest step",children:"Jump to bottleneck"}):null]})]}),f.jsxs("div",{className:"insight-block","data-help":!0,"data-help-title":"Cost by type","data-help-body":"Aggregated spend by step class.","data-help-placement":"bottom",children:[f.jsx("span",{className:"insight-label",children:"Cost by type"}),f.jsx("div",{className:"insight-items",children:Object.entries(e.costByType).map(([v,y])=>f.jsxs("span",{className:"insight-chip",title:`Total cost for ${v}`,children:[v,": $",y.toFixed(3)]},v))})]}),Object.keys(u).length?f.jsxs("div",{className:"insight-block","data-help":!0,"data-help-title":"Cost by tool","data-help-body":"Top tools by total spend.","data-help-placement":"bottom",children:[f.jsx("span",{className:"insight-label",children:"Cost by tool"}),f.jsx("div",{className:"insight-items",children:Object.entries(u).sort((v,y)=>y[1]-v[1]).slice(0,3).map(([v,y])=>f.jsxs("span",{className:"insight-chip",title:`Total cost for ${v}`,children:[v,": $",y.toFixed(3)]},v))})]}):null,f.jsxs("div",{className:"insight-block","data-help":!0,"data-help-title":"Errors & retries","data-help-body":"Instant visibility into failed or retried steps.","data-help-placement":"bottom",children:[f.jsx("span",{className:"insight-label",children:"Errors / retries"}),f.jsxs("div",{className:"insight-items",children:[f.jsxs("span",{className:"insight-chip",children:["Errors: ",e.errors]}),f.jsxs("span",{className:"insight-chip",children:["Retries: ",e.retries]}),e.errors>0?f.jsx("button",{className:"insight-chip",type:"button",onClick:i,title:"Jump to first error",children:"Jump to first error"}):null,(m=l==null?void 0:l.topRetries)!=null&&m.length?f.jsxs("span",{className:"insight-chip",title:`Retry rate ${(l.retryRate*100).toFixed(1)}%`,children:["Top retries: ",l.topRetries.length]}):null]})]}),f.jsxs("div",{className:"insight-block","data-help":!0,"data-help-title":"Wall vs work","data-help-body":"Wall time vs summed work to show parallelism.","data-help-placement":"bottom",children:[f.jsx("span",{className:"insight-label",children:"Wall vs work"}),f.jsxs("div",{className:"insight-items",children:[f.jsxs("span",{className:"insight-chip",title:"Wall clock duration",children:["Wall: ",e.wallTimeMs,"ms"]}),f.jsxs("span",{className:"insight-chip",title:"Sum of step durations",children:["Work: ",e.workTimeMs,"ms"]}),e.criticalPathMs!=null?f.jsxs("span",{className:"insight-chip",title:"Longest parent-child chain",children:["Critical: ",e.criticalPathMs,"ms"]}):null]})]}),f.jsxs("div",{className:"insight-block","data-help":!0,"data-help-title":"Health","data-help-body":"Timing and I/O anomalies detected in the trace.","data-help-placement":"bottom",children:[f.jsx("span",{className:"insight-label",children:"Health"}),f.jsxs("div",{className:"insight-items",children:[s!=null&&s.degraded?f.jsx("span",{className:"insight-chip insight-warning",title:s.issues.join(" "),children:"Timing degraded"}):f.jsx("span",{className:"insight-chip",children:"Timing OK"}),a.length>0?f.jsxs("span",{className:"insight-chip insight-warning",title:a.map(v=>v.message).join(" "),children:["IO warnings: ",a.length]}):f.jsx("span",{className:"insight-chip",children:"IO OK"})]})]}),d.length?f.jsxs("div",{className:"insight-block","data-help":!0,"data-help-title":"Investigator","data-help-body":"Automated root-cause hypotheses ranked by severity and confidence.","data-help-placement":"bottom",children:[f.jsx("span",{className:"insight-label",children:"Investigator"}),f.jsxs("div",{className:"insight-items",children:[d.map(v=>f.jsxs("span",{className:"insight-chip",title:v.summary,children:[v.title," (",Math.round(v.confidence*100),"%)"]},v.id)),(p=(g=d[0])==null?void 0:g.evidenceStepIds)!=null&&p[0]?f.jsx("button",{className:"insight-chip",type:"button",onClick:()=>n==null?void 0:n(d[0].evidenceStepIds[0]),children:"Jump to evidence"}):null]})]}):null,(w=o==null?void 0:o.buckets)!=null&&w.length?f.jsxs("div",{className:"insight-block","data-help":!0,"data-help-title":"Parallelism","data-help-body":"How many steps ran concurrently over time.","data-help-placement":"bottom",children:[f.jsx("span",{className:"insight-label",children:"Parallelism"}),f.jsx("div",{className:"insight-items",children:f.jsx("div",{className:"insight-heatmap",title:`Peak concurrency: ${o.peak}`,children:o.buckets.map((v,y)=>f.jsx("span",{className:"heatmap-bar",style:{height:`${Math.max(20,v.active/Math.max(1,o.peak)*48)}px`},title:`Bucket ${y+1}: ${v.active} active`},`${v.startMs}-${v.endMs}`))})})]}):null,Object.keys(c).length?f.jsxs("div",{className:"insight-block","data-help":!0,"data-help-title":"Model cost","data-help-body":"Spend by model family.","data-help-placement":"bottom",children:[f.jsx("span",{className:"insight-label",children:"Model cost"}),f.jsx("div",{className:"insight-items",children:Object.entries(c).map(([v,y])=>f.jsxs("span",{className:"insight-chip",title:`Total cost for ${v}`,children:[v,": $",y.toFixed(3)]},v))})]}):null]})}const qR=["all","llm_call","tool_call","decision","handoff","guardrail"];function FR({query:e,typeFilter:t,onQueryChange:n,onTypeFilterChange:r}){return f.jsxs("div",{className:"search-bar",children:[f.jsx("input",{className:"search-input",placeholder:"Search steps, tools, previews...","aria-label":"Search steps",value:e,onChange:i=>n(i.target.value),"data-help":!0,"data-help-title":"Search","data-help-body":"Filter steps by name, tool, or payload preview. Great for fast recall.","data-help-placement":"bottom"}),f.jsx("select",{className:"search-select",value:t,"aria-label":"Filter by step type",onChange:i=>r(i.target.value),"data-help":!0,"data-help-title":"Type filter","data-help-body":"Narrow the timeline to a specific class of steps (LLM, tool, decision, handoff).","data-help-placement":"bottom",children:qR.map(i=>f.jsx("option",{value:i,children:i},i))})]})}function hl(e,t,n){const r=Date.parse(e),i=n.map(c=>Date.parse(c.endedAt??c.startedAt)).filter(c=>Number.isFinite(c)),s=t?Date.parse(t):i.length?Math.max(...i):r,a=Math.max(1,s-r),o=n.map(c=>{const d=Math.max(0,Date.parse(c.startedAt)-r),h=Math.max(d,Date.parse(c.endedAt??c.startedAt)-r);return{stepId:c.id,startMs:d,endMs:h}}).sort((c,d)=>c.startMs-d.startMs||c.endMs-d.endMs),l=[],u=[];for(const c of o){let d=l.findIndex(h=>h<=c.startMs);d===-1?(d=l.length,l.push(c.endMs)):l[d]=c.endMs,u.push({stepId:c.stepId,startMs:c.startMs,endMs:c.endMs,lane:d,xPct:c.startMs/a*100,wPct:Math.max(.75,(c.endMs-c.startMs)/a*100)})}return{wallTimeMs:a,intervals:u,laneCount:l.length}}function VR(e){var g;const n=e.steps.map(p=>({stepId:p.id,name:p.name,durationMs:p.durationMs??0})).sort((p,w)=>w.durationMs-p.durationMs).slice(0,3),r={},i={};for(const p of e.steps)((g=p.metrics)==null?void 0:g.costUsd)!=null&&(r[p.type]=(r[p.type]??0)+p.metrics.costUsd,p.type==="tool_call"&&(i[p.name]=(i[p.name]??0)+p.metrics.costUsd));const s=e.steps.filter(p=>p.status==="failed").length,a=e.steps.filter(p=>!!p.retryOfStepId).length,o=e.metadata.wallTimeMs,l=e.metadata.workTimeMs??e.steps.reduce((p,w)=>p+(w.durationMs??0),0),u=$R(e),c=UR(e.steps),d=zR(e.steps),h=GR(e),m=HR(e.steps);return{topLatencySteps:n,costByType:r,costByTool:i,costByModel:{[e.metadata.modelId]:e.metadata.totalCostUsd??0},errors:s,retries:a,wallTimeMs:o,workTimeMs:l,timing:u,ioWarnings:c,criticalPathMs:d,concurrency:h,retryPatterns:m}}function BR(e){var n;const t=(n=e.metrics)==null?void 0:n.costUsd;return t==null?null:`$${t.toFixed(3)}`}function Sn(e){if(!e)return null;const t=Date.parse(e);return Number.isNaN(t)?null:t}function $R(e){const t=Sn(e.startedAt),n=Sn(e.endedAt??void 0),r=[],i=[],s=[];return t==null&&s.push("Trace start time missing or invalid."),e.steps.forEach(a=>{const o=Sn(a.startedAt),l=Sn(a.endedAt??a.startedAt);if(o==null||l==null){r.push(a.id);return}if(l<o){i.push(a.id);return}t!=null&&o<t&&i.push(a.id),n!=null&&l>n&&i.push(a.id)}),r.length&&s.push(`Missing timestamps on ${r.length} steps.`),i.length&&s.push(`Timestamp skew detected on ${i.length} steps.`),{degraded:!!(r.length||i.length||t==null),issues:s,missingStepIds:r,skewedStepIds:i}}function UR(e){const t=new Map;e.forEach(s=>{s.type==="tool_call"&&s.toolCallId&&t.set(s.toolCallId,s)});const n=new Set,r=new Set,i=[];return e.forEach(s=>{s.type!=="llm_call"||!s.io||((s.io.emittedToolCallIds??[]).forEach(a=>{n.add(a),t.has(a)||i.push({kind:"missing_tool_step",message:`Emitted toolCallId ${a} has no tool step.`,stepId:s.id,toolCallId:a})}),(s.io.consumedToolCallIds??[]).forEach(a=>{r.add(a),t.has(a)||i.push({kind:"missing_tool_step",message:`Consumed toolCallId ${a} has no tool step.`,stepId:s.id,toolCallId:a}),n.has(a)||i.push({kind:"consume_without_emit",message:`Consumed toolCallId ${a} without emission.`,stepId:s.id,toolCallId:a})}))}),t.forEach((s,a)=>{n.has(a)||i.push({kind:"unemitted_tool",message:`Tool step ${s.id} has toolCallId ${a} never emitted.`,stepId:s.id,toolCallId:a}),r.has(a)||i.push({kind:"unconsumed_tool",message:`Tool step ${s.id} has toolCallId ${a} never consumed.`,stepId:s.id,toolCallId:a})}),i}function zR(e){const t=new Map,n=new Map,r=[];e.forEach(a=>{if(t.set(a.id,a.durationMs??0),a.parentStepId){const o=n.get(a.parentStepId)??[];o.push(a.id),n.set(a.parentStepId,o)}else r.push(a.id)});const i=new Map,s=a=>{if(i.has(a))return i.get(a)??0;const l=(n.get(a)??[]).reduce((c,d)=>Math.max(c,s(d)),0),u=(t.get(a)??0)+l;return i.set(a,u),u};return r.length?Math.max(...r.map(a=>s(a))):0}function GR(e){const t=Sn(e.startedAt);if(t==null)return{buckets:[],peak:0};const n=Sn(e.endedAt??void 0)??Math.max(...e.steps.map(l=>Sn(l.endedAt??l.startedAt)??t),t),r=Math.max(1,n-t),i=12,s=Math.max(1,Math.floor(r/i)),a=[];let o=0;for(let l=0;l<i;l+=1){const u=t+l*s,c=u+s;let d=0;e.steps.forEach(h=>{const m=Sn(h.startedAt),g=Sn(h.endedAt??h.startedAt);m==null||g==null||g>=u&&m<=c&&(d+=1)}),o=Math.max(o,d),a.push({startMs:l*s,endMs:(l+1)*s,active:d})}return{buckets:a,peak:o}}function HR(e){const t={};e.forEach(i=>{i.retryOfStepId&&(t[i.retryOfStepId]=(t[i.retryOfStepId]??0)+1)});const n=Object.values(t).reduce((i,s)=>i+s,0),r=Object.entries(t).sort((i,s)=>s[1]-i[1]).slice(0,3);return{totalRetries:n,retryRate:e.length?n/e.length:0,topRetries:r.map(([i,s])=>({stepId:i,count:s}))}}const KR={llm_call:{label:"LLM",icon:"LLM",description:"Model call"},tool_call:{label:"TOOL",icon:"TOOL",description:"Tool call"},decision:{label:"DEC",icon:"DEC",description:"Decision"},handoff:{label:"HAND",icon:"HAND",description:"Handoff"},guardrail:{label:"GUARD",icon:"GUARD",description:"Guardrail"}};function WR(e){return KR[e]}function YR({type:e,size:t="sm",showLabel:n=!1}){const r=WR(e);return f.jsxs("span",{className:`step-badge step-badge-${e} step-badge-${t}`,title:r.description,children:[f.jsx("span",{className:"step-badge-icon",children:r.icon}),n?f.jsx("span",{className:"step-badge-label",children:r.label}):null]})}function bE({step:e,interval:t,playbackState:n,selected:r,onSelect:i,variant:s="base",diffStatus:a,disabled:o=!1,laneHeight:l=140}){var S,k,E,j,T,M;const u=BR(e),c=((S=e.preview)==null?void 0:S.subtitle)??((k=e.preview)==null?void 0:k.title)??"",d=((E=e.preview)==null?void 0:E.outputPreview)??((j=e.preview)==null?void 0:j.inputPreview)??"",h=a?`step-diff-${a}`:"",m=s==="ghost"?"step-ghost":"",g=t.wPct<8?"step-compact":"",p=e.type.replace("_"," ").toUpperCase(),w=((T=e.metrics)==null?void 0:T.tokensTotal)!=null?`${e.metrics.tokensTotal} tokens`:null,v=e.durationMs!=null?`${e.durationMs}ms`:null,y=[w,v,u].filter(Boolean).join("  "),x=`Click to inspect inputs/outputs and replay from this moment.${y?` ${y}.`:""}`;return f.jsxs("button",{type:"button",className:`step-card step-${e.type} step-${n} ${r?"step-selected":""} ${h} ${m} ${g}`,"data-step-id":e.id,"aria-pressed":r,"aria-hidden":s==="ghost",disabled:o,"data-help":!0,"data-help-title":`${e.name}  ${p}`,"data-help-body":x,"data-help-placement":"top",style:{left:`${t.xPct}%`,width:`${t.wPct}%`,top:`${t.lane*l}px`},onClick:()=>{o||i(e.id)},children:[f.jsxs("div",{className:"step-card-header",children:[f.jsxs("div",{className:"step-title-group",children:[f.jsx(YR,{type:e.type}),f.jsx("span",{className:"step-title",children:e.name})]}),f.jsx("span",{className:`status-pill status-${e.status}`,children:e.status})]}),c?f.jsx("div",{className:"step-subtitle",children:c}):null,f.jsxs("div",{className:"step-metrics",children:[((M=e.metrics)==null?void 0:M.tokensTotal)!=null?f.jsxs("span",{children:[e.metrics.tokensTotal," tok"]}):null,e.durationMs!=null?f.jsxs("span",{children:[e.durationMs,"ms"]}):null,u?f.jsx("span",{children:u}):null]}),d?f.jsx("div",{className:"step-preview",children:d}):null]})}function SE(e,t){return t<e.startMs?"future":t>e.endMs?"past":"active"}const hs={type:{order:[],hidden:[]},status:{order:[],hidden:[]},parent:{order:[],hidden:[]}};function Hv(e,t){return t==="type"?e.type:t==="status"?e.status:e.parentStepId??"root"}function QR(e,t){const n=new Set;return e.forEach(r=>n.add(Hv(r,t))),Array.from(n).sort((r,i)=>r.localeCompare(i))}function x0(e,t,n){const r=new Set(e),i=[...t.filter(a=>r.has(a))];e.forEach(a=>{i.includes(a)||i.push(a)});const s=Array.from(new Set(n.filter(a=>r.has(a))));return{order:i,hidden:s}}const JR=140,XR=132,ZR=96,w0={llm_call:1,tool_call:2,decision:3,handoff:4,guardrail:5};function _E(e){return[...e].sort((t,n)=>(w0[t.type]??9)-(w0[n.type]??9))}function eA(e,t,n,r,i){const s=new Map;t.forEach(h=>{var g;const m=Hv(h,n);s.has(m)||s.set(m,[]),(g=s.get(m))==null||g.push(h)});const a=Array.from(s.keys()),o=[...r.filter(h=>a.includes(h))];a.forEach(h=>{o.includes(h)||o.push(h)});const l=o.filter(h=>!i.includes(h)),u=new Map;let c=0,d=0;return l.forEach(h=>{const m=s.get(h)??[],g=hl(e.startedAt,e.endedAt,m);g.intervals.forEach(p=>{u.set(p.stepId,{...p,lane:p.lane+c})}),c+=Math.max(1,g.laneCount)}),d=Math.max(1,c),{intervalsByStepId:u,laneCount:d,visibleGroups:l}}function tA({trace:e,steps:t,selectedStepId:n,onSelectStep:r,playheadPct:i,playheadMs:s,windowRange:a,ghostTrace:o,diff:l,laneStrategy:u="type",laneGroupsOrder:c=[],hiddenLaneGroups:d=[],laneHeight:h=JR,cardHeight:m=XR,compactHeight:g=ZR}){const{intervalsByStepId:p,laneCount:w}=eA(e,t,u,c,d),v=Array.from(p.values()),y=new Map(v.map(R=>[R.stepId,R])),x=_E(t),S=e.metadata.wallTimeMs||1,k=new Set((l==null?void 0:l.removedSteps)??[]),E=new Set((l==null?void 0:l.changedSteps)??[]),j=new Set(((l==null?void 0:l.changedPairs)??[]).map(R=>R.rightId)),T=new Set((l==null?void 0:l.addedSteps)??[]);let M=v;if(a){const R=a.endMs-a.startMs,H=Math.max(1e3,R*.15),Y=Math.max(0,a.startMs-H),pe=a.endMs+H;if(M=v.filter(F=>F.endMs>=Y&&F.startMs<=pe),n&&!M.some(F=>F.stepId===n)){const F=y.get(n);F&&(M=[...M,F])}}const D=new Set(M.map(R=>R.stepId));return f.jsx("div",{className:"timeline",style:{"--step-card-height":`${m}px`,"--step-compact-height":`${g}px`},children:f.jsxs("div",{className:"timeline-grid",style:{height:`${w*h}px`},"data-help":!0,"data-help-title":"Timeline lanes","data-help-body":"Each lane stacks overlapping steps; width reflects duration.","data-help-placement":"top",children:[f.jsx("div",{className:"playback-cursor",style:{left:`${i}%`}}),x.filter(R=>D.has(R.id)).filter(R=>!d.includes(Hv(R,u))).map(R=>{const H=y.get(R.id);if(!H)return null;const Y=SE(H,s);return f.jsx(bE,{step:R,interval:H,playbackState:Y,selected:n===R.id,diffStatus:k.has(R.id)?"removed":E.has(R.id)?"changed":null,laneHeight:h,onSelect:r},R.id)}),o?f.jsx(nA,{ghostTrace:o,baseWallTimeMs:S,playheadMs:s,windowRange:a,diffAdded:T,diffChanged:j,laneHeight:h}):null]})})}function nA({ghostTrace:e,baseWallTimeMs:t,playheadMs:n,windowRange:r,diffAdded:i,diffChanged:s,laneHeight:a}){const{intervals:o,laneCount:l}=hl(e.startedAt,e.endedAt,e.steps),u=new Map(o.map(p=>[p.stepId,p])),c=e.metadata.wallTimeMs||1,d=n/t*c;let h=o;if(r){const p=r.endMs-r.startMs,w=Math.max(1e3,p*.15),v=c/t,y=Math.max(0,(r.startMs-w)*v),x=Math.min(c,(r.endMs+w)*v);h=o.filter(S=>S.endMs>=y&&S.startMs<=x)}const m=new Set(h.map(p=>p.stepId)),g=_E(e.steps);return f.jsxs(f.Fragment,{children:[f.jsx("div",{className:"ghost-lanes",style:{height:`${l*a}px`}}),g.filter(p=>m.has(p.id)).map(p=>{const w=u.get(p.id);if(!w)return null;const v=SE(w,d),y=i.has(p.id)?"added":s.has(p.id)?"changed":null;return f.jsx(bE,{step:p,interval:w,playbackState:v,selected:!1,diffStatus:y,variant:"ghost",disabled:!0,laneHeight:a,onSelect:()=>{}},`ghost-${p.id}`)})]})}function rA({trace:e,steps:t,selectedStepId:n,onSelectStep:r,playheadMs:i,windowRange:s,timing:a,ghostTrace:o,diff:l,laneStrategy:u,laneGroupsOrder:c,hiddenLaneGroups:d,onLaneStrategyChange:h,onToggleLaneGroupVisibility:m,onMoveLaneGroup:g}){const p=e.metadata.wallTimeMs||1,w=Math.min(100,Math.max(0,i/p*100)),v=c.filter(y=>!d.includes(y)).length;return f.jsxs("section",{className:"cinema-mode","aria-label":"Cinema mode",children:[a!=null&&a.degraded?f.jsxs("div",{className:"timing-banner",title:a.issues.join(" "),children:["Timing degraded: ",a.issues[0]??"Check timestamps."]}):null,f.jsxs("div",{className:"timeline-studio-panel","data-help":!0,"data-help-title":"Timeline studio","data-help-body":"Regroup lanes by type/status/parent, hide noisy groups, and reorder emphasis.",children:[f.jsxs("label",{className:"timeline-studio-strategy",children:["Lane strategy",f.jsxs("select",{value:u,onChange:y=>h(y.target.value),children:[f.jsx("option",{value:"type",children:"Type"}),f.jsx("option",{value:"status",children:"Status"}),f.jsx("option",{value:"parent",children:"Parent branch"})]})]}),f.jsxs("div",{className:"timeline-studio-summary",children:[v,"/",c.length," groups visible"]}),f.jsx("div",{className:"timeline-studio-groups",children:c.map((y,x)=>{const S=d.includes(y);return f.jsxs("div",{className:`timeline-studio-group ${S?"is-hidden":""}`,children:[f.jsx("button",{type:"button",className:"ghost-button",onClick:()=>m(y),children:S?"Show":"Hide"}),f.jsx("span",{className:"timeline-studio-group-name",children:y}),f.jsx("button",{type:"button",className:"ghost-button",onClick:()=>g(y,"up"),disabled:x===0,children:"Up"}),f.jsx("button",{type:"button",className:"ghost-button",onClick:()=>g(y,"down"),disabled:x===c.length-1,children:"Down"})]},y)})})]}),f.jsx(tA,{trace:e,steps:t,selectedStepId:n,onSelectStep:r,playheadPct:w,playheadMs:i,windowRange:s,ghostTrace:o,diff:l,laneStrategy:u,laneGroupsOrder:c,hiddenLaneGroups:d})]})}const iA=[.5,1,1.5,2,4];function b0({playheadMs:e,wallTimeMs:t,isPlaying:n,speed:r,onToggle:i,onScrub:s,onSpeedChange:a}){const o=l=>{s(Number(l.target.value))};return f.jsxs("div",{className:"playback-controls",children:[f.jsx("button",{className:"ghost-button",type:"button",onClick:i,"aria-label":n?"Pause playback":"Play playback","data-help":!0,"data-help-title":"Playhead","data-help-body":"Start or pause the run to experience timing as it unfolded.","data-help-placement":"bottom",children:n?"Pause":"Play"}),f.jsx("input",{className:"playback-slider",type:"range",min:0,max:t,value:e,"aria-label":"Playback position",onChange:o,"data-help":!0,"data-help-title":"Scrub timeline","data-help-body":"Drag to jump to any moment in the run.","data-help-placement":"bottom"}),f.jsx("select",{className:"playback-speed",value:r,"aria-label":"Playback speed",onChange:l=>a(Number(l.target.value)),"data-help":!0,"data-help-title":"Speed","data-help-body":"Slow down to inspect or speed up to skim.","data-help-placement":"bottom",children:iA.map(l=>f.jsxs("option",{value:l,children:[l,"x"]},l))})]})}function sA(e,t,n,r=60){const{wallTimeMs:i,intervals:s}=hl(e,t,n),a=new Array(r).fill(0);if(!i)return{buckets:a,wallTimeMs:0};const o=i/r;return!Number.isFinite(o)||o<=0?{buckets:a,wallTimeMs:i}:(s.forEach(l=>{const u=Math.max(0,Math.floor(l.startMs/o)),c=Math.min(r-1,Math.floor(l.endMs/o));for(let d=u;d<=c;d+=1)a[d]+=1}),{buckets:a,wallTimeMs:i})}function Mm(e,t){const n=new Blob([JSON.stringify(t,null,2)],{type:"application/json"}),r=URL.createObjectURL(n),i=document.createElement("a");i.href=r,i.download=e,document.body.appendChild(i),i.click(),i.remove(),URL.revokeObjectURL(r)}function kE(e,t,n="text/plain"){const r=new Blob([t],{type:n}),i=URL.createObjectURL(r),s=document.createElement("a");s.href=i,s.download=e,document.body.appendChild(s),s.click(),s.remove(),URL.revokeObjectURL(i)}const ps=5e3,aA=32;function kt(e,t,n){return Math.min(n,Math.max(t,e))}function si(e,t){const n=new Set;return e.forEach(r=>{n.add(kt(Math.round(r),0,t))}),Array.from(n).sort((r,i)=>r-i).slice(0,aA)}function oA(e,t){if(!e)return{bookmarksMs:[],clipStartMs:null,clipEndMs:null,segments:[]};try{const n=JSON.parse(e),r=si(Array.isArray(n.bookmarksMs)?n.bookmarksMs:[],t),i=typeof n.clipStartMs=="number"?kt(n.clipStartMs,0,t):null,s=typeof n.clipEndMs=="number"?kt(n.clipEndMs,0,t):null,a=Array.isArray(n.segments)?n.segments.filter(o=>typeof(o==null?void 0:o.id)=="string"&&typeof(o==null?void 0:o.startMs)=="number"&&typeof(o==null?void 0:o.endMs)=="number"&&typeof(o==null?void 0:o.label)=="string").map(o=>({...o,startMs:kt(o.startMs,0,t),endMs:kt(o.endMs,0,t)})):[];return{bookmarksMs:r,clipStartMs:i,clipEndMs:i!=null&&s!=null&&s<i?i:s,segments:a}}catch{return{bookmarksMs:[],clipStartMs:null,clipEndMs:null,segments:[]}}}function S0(e,t){const n=Date.parse(e);return Number.isNaN(n)?null:new Date(n+t).toISOString()}function lA({traceStart:e,traceEnd:t,steps:n,playheadMs:r,windowRange:i,windowed:s,spanMs:a,onSpanChange:o,onToggleWindowed:l,onScrub:u,persistenceKey:c,laneStrategy:d="type",visibleLaneGroups:h=[],remotePlayheads:m=[]}){const{buckets:g,wallTimeMs:p}=sA(e,t,n,64),w=Math.max(1,...g),v=kt(a,ps,Math.max(ps,p)),y=(i==null?void 0:i.startMs)??0,x=(i==null?void 0:i.endMs)??p,S=_.useMemo(()=>`agentDirector.timelineStudio.${c??e}`,[c,e]),[k,E]=_.useState([]),[j,T]=_.useState(null),[M,D]=_.useState(null),[R,H]=_.useState([]),[Y,pe]=_.useState("");_.useEffect(()=>{const O=oA(window.localStorage.getItem(S),p);E(O.bookmarksMs),T(O.clipStartMs),D(O.clipEndMs),H(O.segments)},[S,p]),_.useEffect(()=>{const O={bookmarksMs:si(k,p),clipStartMs:j==null?null:kt(j,0,p),clipEndMs:M==null?null:kt(M,0,p),segments:R};window.localStorage.setItem(S,JSON.stringify(O))},[k,M,j,R,S,p]);const F=p?y/p*100:0,le=p?(x-y)/p*100:100,se=p?r/p*100:0,A=j!=null&&M!=null?Math.min(j,M):null,I=j!=null&&M!=null?Math.max(j,M):null,z=A!=null&&I!=null&&p?(I-A)/p*100:0,U=A!=null&&p?A/p*100:0,re=A!=null&&I!=null&&I>A,Te=O=>{const ee=O.currentTarget.getBoundingClientRect(),J=(O.clientX-ee.left)/ee.width,Le=kt(Math.round(J*p),0,p);u(Le)},ue=O=>{if(O.key==="ArrowLeft"){O.preventDefault(),u(kt(r-Math.max(250,Math.round(p*.02)),0,p));return}if(O.key==="ArrowRight"){O.preventDefault(),u(kt(r+Math.max(250,Math.round(p*.02)),0,p));return}if(O.key==="Home"){O.preventDefault(),u(0);return}if(O.key==="End"){O.preventDefault(),u(p);return}(O.key===" "||O.key==="Enter")&&(O.preventDefault(),u(r))},ge=()=>{E(O=>si([...O,r],p))},xe=O=>{if(k.length===0)return;const ee=si(k,p);if(O==="previous"){const Le=[...ee].reverse().find(te=>te<r)??ee[ee.length-1];u(Le);return}const J=ee.find(Le=>Le>r)??ee[0];u(J)},tt=()=>{const O=kt(r,0,p);T(O),M!=null&&M<O&&D(O)},nt=()=>{const O=kt(r,0,p);D(O),j!=null&&j>O&&T(O)},ct=()=>{T(null),D(null)},At=()=>{if(!re||A==null||I==null)return;const O=Y.trim()||`Scene ${R.length+1}`,ee=`segment-${Math.random().toString(36).slice(2,9)}`;H(J=>[...J,{id:ee,startMs:A,endMs:I,label:O}]),pe("")},vn=O=>{H(ee=>ee.filter(J=>J.id!==O))},Fn=()=>{if(!re||A==null||I==null)return;const O={type:"agent-director-clip",traceStart:e,traceEnd:t,clip:{startMs:A,endMs:I,startAt:S0(e,A),endAt:S0(e,I)},bookmarksMs:si(k,p).filter(ee=>ee>=A&&ee<=I),playheadMs:r,laneContext:{strategy:d,visibleGroups:h},segments:R.filter(ee=>ee.endMs>=A&&ee.startMs<=I),exportedAt:new Date().toISOString()};Mm(`agent-director-clip-${A}-${I}.json`,O)};return f.jsxs("div",{className:"mini-timeline",children:[f.jsxs("div",{className:"mini-track",onClick:Te,role:"slider",tabIndex:0,"aria-label":"Timeline density map","aria-valuemin":0,"aria-valuemax":p,"aria-valuenow":r,"aria-valuetext":`${r} milliseconds`,onKeyDown:ue,"data-help":!0,"data-help-title":"Density map","data-help-body":"A compact view of activity density. Click to jump the playhead.","data-help-placement":"top",children:[f.jsx("div",{className:"mini-bars",children:g.map((O,ee)=>f.jsx("span",{className:"mini-bar",style:{height:`${O/w*100}%`}},`bucket-${ee}`))}),f.jsx("div",{className:"mini-window",style:{left:`${F}%`,width:`${le}%`,opacity:s?1:.4}}),re?f.jsx("div",{className:"mini-clip-window",style:{left:`${U}%`,width:`${z}%`}}):null,f.jsx("div",{className:"mini-bookmark-markers","data-testid":"timeline-bookmark-markers","aria-hidden":"true",children:si(k,p).map(O=>{const ee=p?O/p*100:0;return f.jsx("button",{type:"button",className:"mini-bookmark-marker",style:{left:`${ee}%`},onClick:J=>{J.stopPropagation(),u(O)},title:`Jump to bookmark at ${O}ms`,"aria-label":`Bookmark ${O} milliseconds`},`bookmark-${O}`)})}),f.jsx("div",{className:"mini-remote-markers","aria-hidden":"true",children:m.map((O,ee)=>{const J=p?O/p*100:0;return f.jsx("span",{className:"mini-remote-marker",style:{left:`${J}%`}},`remote-${ee}`)})}),f.jsx("div",{className:"mini-segments","aria-hidden":"true",children:R.map(O=>{const ee=p?O.startMs/p*100:0,J=p?(O.endMs-O.startMs)/p*100:0;return f.jsx("span",{className:"mini-segment-bar",style:{left:`${ee}%`,width:`${Math.max(1,J)}%`},title:O.label},O.id)})}),f.jsx("div",{className:"mini-playhead",style:{left:`${se}%`}})]}),f.jsxs("div",{className:"mini-controls",children:[f.jsx("label",{className:"mini-label",children:"Zoom"}),f.jsx("input",{type:"range",min:ps,max:Math.max(ps,p),value:v,"aria-label":"Timeline zoom",onChange:O=>{l(!0),o(Number(O.target.value))},"data-help":!0,"data-help-title":"Zoom window","data-help-body":"Tighten the window to focus on hotspots.","data-help-placement":"top"}),f.jsx("button",{className:"ghost-button",type:"button",onClick:()=>l(!s),title:"Toggle windowed playback",children:s?"Full":"Window"}),f.jsx("button",{className:"ghost-button",type:"button",title:"Reset zoom",onClick:()=>{l(!0),o(Math.min(Math.max(p*.2,ps),6e4))},children:"Reset"}),f.jsx("button",{className:"ghost-button",type:"button",onClick:ge,children:"Add bookmark"}),f.jsx("button",{className:"ghost-button",type:"button",onClick:()=>xe("previous"),children:"Previous bookmark"}),f.jsx("button",{className:"ghost-button",type:"button",onClick:()=>xe("next"),children:"Next bookmark"}),f.jsx("button",{className:"ghost-button",type:"button",onClick:tt,children:"Set clip start"}),f.jsx("button",{className:"ghost-button",type:"button",onClick:nt,children:"Set clip end"}),f.jsx("button",{className:"ghost-button",type:"button",onClick:ct,children:"Clear clip"}),f.jsx("input",{className:"search-input mini-segment-input",placeholder:"Segment label",value:Y,onChange:O=>pe(O.target.value),"aria-label":"Segment label"}),f.jsx("button",{className:"ghost-button",type:"button",onClick:At,disabled:!re,children:"Add segment"}),f.jsx("button",{className:"ghost-button",type:"button",onClick:Fn,disabled:!re,children:"Export clip"})]}),R.length?f.jsx("div",{className:"mini-segment-list",children:R.map(O=>f.jsxs("div",{className:"mini-segment-item",children:[f.jsxs("span",{children:[O.label," (",O.startMs,"ms - ",O.endMs,"ms)"]}),f.jsx("button",{className:"ghost-button",type:"button",onClick:()=>vn(O.id),children:"Remove"})]},O.id))}):null]})}const uA=[{keys:"Space",action:"Play / pause"},{keys:" / ",action:"Step boundary back / forward"},{keys:"Shift +  / ",action:"Jump to start / end"},{keys:"F",action:"Toggle Flow mode"},{keys:"I",action:"Toggle Inspector"},{keys:"S",action:"Story mode"},{keys:"E",action:"Explain mode"},{keys:"T",action:"Start tour"},{keys:"Cmd/Ctrl + K",action:"Open command palette"},{keys:"?",action:"Show shortcuts"},{keys:"Esc",action:"Close modal / inspector"}];function cA({open:e,onClose:t}){const n=_.useRef(null);if(_.useEffect(()=>{var i;e&&((i=n.current)==null||i.focus())},[e]),!e)return null;const r=i=>{var l;if(i.key==="Escape"){i.preventDefault(),t();return}if(i.key!=="Tab")return;const s=Array.from(i.currentTarget.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'));if(s.length===0)return;const a=s.indexOf(document.activeElement),o=i.shiftKey?a<=0?s.length-1:a-1:(a+1)%s.length;(l=s[o])==null||l.focus(),i.preventDefault()};return f.jsx("div",{className:"modal-backdrop",role:"dialog","aria-modal":"true","aria-labelledby":"shortcuts-title",onKeyDown:r,children:f.jsxs("div",{className:"modal",tabIndex:-1,children:[f.jsxs("div",{className:"modal-header",children:[f.jsx("div",{className:"modal-title",id:"shortcuts-title",children:"Keyboard Shortcuts"}),f.jsx("button",{className:"ghost-button",type:"button",onClick:t,ref:n,"aria-label":"Close shortcuts",children:"Close"})]}),f.jsx("div",{className:"modal-body",children:uA.map(i=>f.jsxs("div",{className:"modal-row",children:[f.jsx("span",{className:"modal-keys",children:i.keys}),f.jsx("span",{className:"modal-action",children:i.action})]},i.keys))})]})})}const dA=e=>e.trim().toLowerCase();function fA(e){const t=new Map;return e.forEach(n=>{var i;const r=n.group??"General";t.has(r)||t.set(r,[]),(i=t.get(r))==null||i.push(n)}),t}function _0(e,t,n){var i;if(!e.length)return 0;let r=t;for(let s=0;s<e.length;s+=1)if(r=(r+n+e.length)%e.length,!((i=e[r])!=null&&i.disabled))return r;return t}function hA({open:e,onClose:t,actions:n}){var p,w;const[r,i]=_.useState(""),[s,a]=_.useState(0),o=_.useRef(null),l=_.useRef(null),u=_.useMemo(()=>{const v=dA(r);return v?n.filter(y=>[y.label,y.description,y.group,y.keys].filter(Boolean).join(" ").toLowerCase().includes(v)):n},[n,r]),c=_.useMemo(()=>fA(u),[u]);if(_.useEffect(()=>{if(!e)return;i(""),a(0);const v=window.setTimeout(()=>{var y;return(y=o.current)==null?void 0:y.focus()},0);return()=>window.clearTimeout(v)},[e]),_.useEffect(()=>{s>=u.length&&a(0)},[s,u.length]),!e)return null;const d=v=>{v.disabled||(v.onTrigger(),t())},h=v=>{var y,x;if(v.key==="Escape"){v.preventDefault(),t();return}if(v.key==="ArrowDown"){v.preventDefault(),a(S=>_0(u,S,1));return}if(v.key==="ArrowUp"){v.preventDefault(),a(S=>_0(u,S,-1));return}if(v.key==="Enter"){v.preventDefault();const S=u[s];S&&d(S);return}if(v.key==="Tab"){const S=Array.from(((y=l.current)==null?void 0:y.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'))??[]);if(!S.length)return;const k=S.indexOf(document.activeElement),E=v.shiftKey?k<=0?S.length-1:k-1:(k+1)%S.length;(x=S[E])==null||x.focus(),v.preventDefault()}},m=(p=u[s])!=null&&p.id?`palette-option-${(w=u[s])==null?void 0:w.id}`:void 0;let g=-1;return f.jsx("div",{className:"modal-backdrop palette-backdrop",role:"dialog","aria-modal":"true","aria-label":"Command palette",onKeyDown:h,onMouseDown:v=>{v.target===v.currentTarget&&t()},children:f.jsxs("div",{className:"palette",ref:l,children:[f.jsxs("div",{className:"palette-header",children:[f.jsxs("div",{children:[f.jsx("div",{className:"palette-title",children:"Command palette"}),f.jsx("div",{className:"palette-subtitle",children:"Search actions, modes, and playbook steps."})]}),f.jsx("button",{className:"ghost-button",type:"button",onClick:t,"aria-label":"Close command palette",children:"Close"})]}),f.jsx("input",{ref:o,className:"palette-input",value:r,onChange:v=>i(v.target.value),placeholder:"Type to filter actions","aria-label":"Search commands",role:"combobox","aria-expanded":"true","aria-controls":"command-palette-list","aria-activedescendant":m,"aria-autocomplete":"list"}),f.jsxs("div",{className:"palette-list",role:"listbox",id:"command-palette-list",children:[u.length===0?f.jsx("div",{className:"palette-empty",children:"No matching commands."}):null,Array.from(c.entries()).map(([v,y])=>f.jsxs("div",{className:"palette-group",children:[f.jsx("div",{className:"palette-group-title",children:v}),f.jsx("div",{className:"palette-group-list",children:y.map(x=>{g+=1;const S=g===s;return f.jsxs("button",{id:`palette-option-${x.id}`,className:`palette-item ${S?"active":""}`,type:"button",role:"option","aria-selected":S,onMouseEnter:()=>a(g),onClick:()=>d(x),disabled:x.disabled,children:[f.jsxs("div",{className:"palette-item-main",children:[f.jsx("div",{className:"palette-item-title",children:x.label}),x.description?f.jsx("div",{className:"palette-item-description",children:x.description}):null]}),x.keys?f.jsx("div",{className:"palette-item-keys",children:x.keys}):null]},x.id)})})]},v))]})]})})}function pA(e){return e.length?e.reduce((t,n)=>(n.durationMs??0)>(t.durationMs??0)?n:t,e[0]):null}function mA({trace:e,mode:t,playheadMs:n,selectedStepId:r,compareTrace:i,collapsed:s,onToggleCollapsed:a,onModeChange:o,onSelectStep:l,onJumpToBottleneck:u,onReplay:c,onStartTour:d}){var T;const h=e.steps??[],m=pA(h),g=r??(m==null?void 0:m.id)??((T=h[0])==null?void 0:T.id)??null,p=t==="cinema"||n>0,w=!!r,v=!!i,y=[p,w,v].filter(Boolean).length,x=[p,w,v].findIndex(M=>!M),S=x===-1?2:x,k=[0,1,2].map(M=>[p,w,v][M]?"done":M===S?"active":"next"),E=[{id:"observe",title:"Act I: Observe",summary:"Scrub the timeline to feel the pacing, bottlenecks, and tool choreography.",status:k[0],actionLabel:"Enter cinema",action:()=>o("cinema"),tasks:[{label:"Scrub the timeline",done:n>0},{label:"Stay in Cinema mode",done:t==="cinema"}]},{id:"inspect",title:"Act II: Inspect",summary:"Open the most expensive or failed step and read the payload with context.",status:k[1],actionLabel:m?"Jump to bottleneck":"Select first step",action:()=>{if(r){o("cinema");return}if(m){u();return}g&&(l(g),o("cinema"))},disabled:!g,tasks:[{label:"Open the Inspector",done:!!r},{label:"Jump to the bottleneck",done:!!(m&&r===m.id)}]},{id:"direct",title:"Act III: Direct",summary:"Replay from a decisive step, then compare flows and diffs side-by-side.",status:k[2],actionLabel:i?"Open compare":"Replay from step",action:()=>{if(i){o("compare");return}g&&c(g)},disabled:!g,tasks:[{label:"Replay from a step",done:!!i},{label:"Compare runs side-by-side",done:!!(i&&t==="compare")}]}],j=E[S];return s?f.jsxs("section",{className:"journey-panel journey-collapsed","aria-label":"Director journey","data-help":!0,"data-help-indicator":!0,"data-tour":"journey","data-help-title":"Director journey","data-help-body":"A guided path from observation to replay. Use it to show newcomers what to do first.","data-help-placement":"bottom",children:[f.jsxs("div",{className:"journey-collapsed-main",children:[f.jsx("div",{className:"journey-eyebrow",children:"Director journey"}),f.jsx("div",{className:"journey-collapsed-title",children:"From observe to direct"})]}),f.jsxs("div",{className:"journey-collapsed-actions",children:[f.jsxs("span",{className:"journey-progress-text",children:[y,"/3 complete"]}),j?f.jsxs("button",{className:"primary-button journey-next",type:"button",onClick:j.action,disabled:j.disabled,children:["Next: ",j.actionLabel]}):null,d?f.jsx("button",{className:"ghost-button",type:"button",onClick:d,children:"Tour"}):null,f.jsx("button",{className:"primary-button journey-expand",type:"button",onClick:a,children:"Expand"})]})]}):f.jsxs("section",{className:"journey-panel","aria-label":"Director journey","data-help":!0,"data-help-indicator":!0,"data-tour":"journey","data-help-title":"Director journey","data-help-body":"A three-act flow that teaches the story: observe, inspect, direct. Each act jumps to the right place.","data-help-placement":"bottom",children:[f.jsxs("div",{className:"journey-head",children:[f.jsxs("div",{children:[f.jsx("div",{className:"journey-eyebrow",children:"Director journey"}),f.jsx("h2",{className:"journey-title",children:"Cut a perfect take in three acts."}),f.jsx("p",{className:"journey-subtitle",children:"Trace the performance, interrogate the moment, then direct a better run."})]}),f.jsxs("div",{className:"journey-head-actions",children:[d?f.jsx("button",{className:"ghost-button",type:"button",onClick:d,children:"Start tour"}):null,f.jsx("button",{className:"ghost-button",type:"button",onClick:a,children:"Collapse"})]})]}),f.jsx("div",{className:"journey-track",children:E.map((M,D)=>{var R;return f.jsxs("div",{className:"journey-card","data-status":M.status,children:[f.jsxs("div",{className:"journey-card-top",children:[f.jsxs("span",{className:"journey-index",children:["0",D+1]}),f.jsx("span",{className:"journey-status",children:M.status})]}),f.jsx("h3",{className:"journey-card-title",children:M.title}),f.jsx("p",{className:"journey-card-body",children:M.summary}),(R=M.tasks)!=null&&R.length?f.jsx("ul",{className:"journey-tasks",children:M.tasks.map(H=>f.jsxs("li",{className:`journey-task ${H.done?"done":""}`,children:[f.jsx("span",{className:"journey-task-icon","aria-hidden":"true",children:H.done?"":""}),f.jsx("span",{children:H.label})]},H.label))}):null,f.jsx("button",{className:"primary-button journey-action",type:"button",onClick:M.action,disabled:M.disabled,children:M.actionLabel})]},M.id)})}),f.jsxs("div",{className:"journey-footer",children:[f.jsxs("div",{children:[f.jsx("div",{className:"journey-progress-label",children:"Progress"}),f.jsx("div",{className:"journey-progress",children:f.jsx("span",{className:"journey-progress-bar",style:{width:`${y/3*100}%`}})})]}),f.jsx("div",{className:"journey-footnote",children:"Tip: Use Flow to spot fan-out, Compare to validate your changes."})]})]})}function vA(e){return e.length?e.reduce((t,n)=>(n.durationMs??0)>(t.durationMs??0)?n:t,e[0]):null}function gA({trace:e,mode:t,selectedStepId:n,onModeChange:r,onSelectStep:i,onJumpToBottleneck:s,onReplay:a,recommendations:o=[],persona:l="builder",annotations:u=[],activityFeed:c=[],onAddAnnotation:d,missionProgress:h={},missionCompletion:m,onResetMissions:g,narrative:p="",onAskDirector:w,onExportNarrative:v}){var A;const y=e.steps??[],x=vA(y),S=n??(x==null?void 0:x.id)??((A=y[0])==null?void 0:A.id)??null,k=e.metadata.wallTimeMs??0,E=l==="executive"?"Executive lens":l==="operator"?"Operator lens":"Builder lens",[j,T]=_.useState(""),[M,D]=_.useState(""),[R,H]=_.useState(""),Y=_.useMemo(()=>c.slice(0,6),[c]),pe=(m==null?void 0:m.done)??0,F=pe>=3||!!h.inspect,le=pe>=5||!!h.collaborate||Y.length>0,se=_.useMemo(()=>o.slice(0,3).map((I,z)=>({id:I.id,step:`${z+1}. ${I.actionLabel}  ${I.title}`})),[o]);return f.jsxs("aside",{className:"inspector inspector-empty","data-help":!0,"data-help-indicator":!0,"data-tour":"inspector","data-help-title":"Inspector panel","data-help-body":"Select a step to open detailed payloads, redaction controls, and replay actions.","data-help-placement":"left",children:[f.jsx("div",{className:"inspector-header",children:f.jsxs("div",{children:[f.jsx("div",{className:"inspector-title",children:"Director's notes"}),f.jsxs("div",{className:"inspector-subtitle",children:[E,". Select a step to open deep inspection."]})]})}),f.jsxs("div",{className:"inspector-section",children:[f.jsx("div",{className:"inspector-section-title",children:"Run summary"}),f.jsxs("div",{className:"inspector-row",children:[f.jsx("span",{children:"Steps"}),f.jsx("span",{children:y.length})]}),f.jsxs("div",{className:"inspector-row",children:[f.jsx("span",{children:"Wall time"}),f.jsxs("span",{children:[k,"ms"]})]}),f.jsxs("div",{className:"inspector-row",children:[f.jsx("span",{children:"Status"}),f.jsx("span",{children:e.status})]})]}),f.jsxs("div",{className:"inspector-section",children:[f.jsx("div",{className:"inspector-section-title",children:"Next actions"}),f.jsxs("div",{className:"director-actions",children:[f.jsx("button",{className:"primary-button",type:"button",onClick:()=>r("cinema"),"data-help":!0,"data-help-title":"Open cinema","data-help-body":"Jump straight into the timeline.","data-help-placement":"right",children:"Open cinema"}),f.jsx("button",{className:"ghost-button",type:"button",onClick:()=>r("flow"),"data-help":!0,"data-help-title":"Open flow","data-help-body":"See the dependency graph of the run.","data-help-placement":"right",children:"Switch to flow"}),f.jsx("button",{className:"ghost-button",type:"button",onClick:()=>{if(!n){if(x){s();return}S&&i(S)}},disabled:!S||!!n,"data-help":!0,"data-help-title":"Jump to bottleneck","data-help-body":"Select the slowest step for inspection.","data-help-placement":"right",children:n?"Inspector open":x?"Jump to bottleneck":"Select first step"}),f.jsx("button",{className:"ghost-button",type:"button",onClick:()=>S&&a(S),disabled:!S||!F,title:F?void 0:"Complete core missions to unlock replay guidance.","data-help":!0,"data-help-title":"Replay","data-help-body":"Branch a replay from a decisive step.","data-help-placement":"right",children:"Replay from step"})]})]}),f.jsxs("div",{className:"inspector-section",children:[f.jsx("div",{className:"inspector-section-title",children:"Mode"}),f.jsxs("div",{className:"director-modes",children:[f.jsx("button",{className:`ghost-button ${t==="cinema"?"active":""}`,type:"button",onClick:()=>r("cinema"),"data-help":!0,"data-help-title":"Cinema mode","data-help-body":"Timeline view for pacing and sequence.","data-help-placement":"right",children:"Cinema"}),f.jsx("button",{className:`ghost-button ${t==="flow"?"active":""}`,type:"button",onClick:()=>r("flow"),"data-help":!0,"data-help-title":"Flow mode","data-help-body":"Graph view for dependencies.","data-help-placement":"right",children:"Flow"}),f.jsx("button",{className:"ghost-button",type:"button",disabled:!0,children:"Compare"})]})]}),f.jsxs("div",{className:"inspector-section",children:[f.jsx("div",{className:"inspector-section-title",children:"Adaptive missions"}),f.jsxs("div",{className:"mission-summary",children:[(m==null?void 0:m.done)??0,"/",(m==null?void 0:m.total)??0," complete",f.jsxs("span",{children:[(m==null?void 0:m.pct)??0,"%"]})]}),f.jsxs("div",{className:"mission-stage",children:["Stage: ",le?"Collaboration":F?"Analysis":"Foundation"]}),f.jsx("div",{className:"mission-grid",children:Object.entries(h).map(([I,z])=>f.jsxs("div",{className:`mission-chip ${z?"done":""}`,children:[f.jsx("span",{children:I}),f.jsx("span",{children:z?"Done":"Pending"})]},I))}),f.jsx("button",{className:"ghost-button",type:"button",onClick:g,children:"Reset missions"})]}),F&&o.length?f.jsxs("div",{className:"inspector-section",children:[f.jsx("div",{className:"inspector-section-title",children:"Recommended next moves"}),f.jsx("div",{className:"director-recommendations",children:o.map(I=>f.jsxs("article",{className:`director-recommendation tone-${I.tone}`,children:[f.jsx("div",{className:"director-recommendation-title",children:I.title}),f.jsx("p",{className:"director-recommendation-body",children:I.body}),f.jsx("button",{className:"ghost-button",type:"button",onClick:I.action,children:I.actionLabel})]},I.id))})]}):null,f.jsxs("div",{className:"inspector-section",children:[f.jsx("div",{className:"inspector-section-title",children:"AI director narrative"}),F?f.jsxs(f.Fragment,{children:[f.jsx("p",{className:"director-recommendation-body",children:p}),se.length?f.jsx("div",{className:"director-guided-plan",children:se.map(I=>f.jsx("div",{children:I.step},I.id))}):null,f.jsxs("div",{className:"director-ask-row",children:[f.jsx("input",{className:"search-input",value:M,onChange:I=>D(I.target.value),placeholder:"Ask Director (e.g. what is highest risk?)","aria-label":"Ask director question"}),f.jsx("button",{className:"ghost-button",type:"button",onClick:()=>{M.trim()&&H((w==null?void 0:w(M))??"")},children:"Ask"})]}),R?f.jsx("div",{className:"director-answer",children:R}):null,f.jsx("button",{className:"ghost-button",type:"button",onClick:v,children:"Export narrative"})]}):f.jsx("div",{className:"annotation-empty",children:"Complete inspect/flow/replay missions to unlock AI narrative tools."})]}),f.jsxs("div",{className:"inspector-section",children:[f.jsx("div",{className:"inspector-section-title",children:"Shared annotations"}),f.jsx("textarea",{value:j,onChange:I=>T(I.target.value),rows:3,placeholder:n?"Add note for selected step...":"Add trace-level note...","aria-label":"Shared annotation"}),f.jsx("button",{className:"ghost-button",type:"button",onClick:()=>{const I=j.trim();I&&(d==null||d(I,n),T(""))},children:"Add annotation"}),f.jsxs("div",{className:"annotation-list",children:[u.slice(-6).reverse().map(I=>f.jsxs("article",{className:"annotation-item",children:[f.jsxs("div",{className:"annotation-meta",children:[f.jsx("span",{children:I.stepId?`step ${I.stepId}`:"trace"}),f.jsx("span",{children:I.authorSessionId})]}),f.jsx("p",{children:I.body})]},I.id)),u.length===0?f.jsx("div",{className:"annotation-empty",children:"No shared annotations yet."}):null]})]}),f.jsxs("div",{className:"inspector-section",children:[f.jsx("div",{className:"inspector-section-title",children:"Collab activity"}),le?f.jsxs("div",{className:"activity-list",children:[Y.map(I=>f.jsxs("div",{className:"activity-item",children:[f.jsx("span",{children:I.message}),f.jsx("span",{children:new Date(I.timestamp).toLocaleTimeString()})]},I.id)),Y.length===0?f.jsx("div",{className:"annotation-empty",children:"No activity yet."}):null]}):f.jsx("div",{className:"annotation-empty",children:"Open another live session to unlock collaboration activity feed."})]})]})}const Cu=(e,t,n)=>Math.min(n,Math.max(t,e));function yA({steps:e,open:t,onClose:n,onComplete:r}){const[i,s]=_.useState(0),[a,o]=_.useState(null),[l,u]=_.useState(null),c=_.useRef(null),d=_.useRef(null),h=_.useRef(null),m=_.useMemo(()=>e[i],[e,i]),g=_.useCallback(()=>{if(!t)return;const S=document.querySelector(m.target);if(!S){d.current=null,o(null);return}d.current=S;const k=S.getBoundingClientRect();o(k)},[t,m.target]),p=_.useCallback(()=>{if(!a||!c.current){u(null);return}const S=c.current.offsetWidth,k=c.current.offsetHeight,E=16;let j=Cu(a.left+a.width/2-S/2,E,window.innerWidth-S-E),T=a.bottom+16;m.placement==="top"&&(T=a.top-k-16),m.placement==="left"&&(j=a.left-S-16,T=a.top+a.height/2-k/2),m.placement==="right"&&(j=a.right+16,T=a.top+a.height/2-k/2),T+k>window.innerHeight-E&&(T=a.top-k-16),T<E&&(T=a.bottom+16),j=Cu(j,E,window.innerWidth-S-E),T=Cu(T,E,window.innerHeight-k-E),u({top:T,left:j})},[m.placement,a]);if(_.useEffect(()=>{t&&s(0)},[t]),_.useEffect(()=>{var k,E;if(!t){(E=(k=h.current)==null?void 0:k.focus)==null||E.call(k);return}h.current=document.activeElement;const S=window.setTimeout(()=>{var T,M;(M=((T=c.current)==null?void 0:T.querySelector('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'))??c.current)==null||M.focus()},0);return()=>window.clearTimeout(S)},[t]),_.useEffect(()=>{if(!t)return;const S=document.querySelector(m.target);S&&S.scrollIntoView({behavior:"smooth",block:"center",inline:"center"});const k=window.requestAnimationFrame(()=>g());return()=>window.cancelAnimationFrame(k)},[t,m.target,g]),_.useLayoutEffect(()=>{p()},[a,p,m.title]),_.useEffect(()=>{if(!t)return;const S=()=>{g(),p()};return window.addEventListener("resize",S),window.addEventListener("scroll",S,!0),()=>{window.removeEventListener("resize",S),window.removeEventListener("scroll",S,!0)}},[t,g,p]),!t||!m)return null;const w=S=>{var M,D;if(S.key==="Escape"){S.preventDefault(),n();return}if(S.key!=="Tab")return;const k=Array.from(((M=c.current)==null?void 0:M.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'))??[]);if(k.length===0)return;const E=document.activeElement,j=k.indexOf(E),T=S.shiftKey?j<=0?k.length-1:j-1:(j+1)%k.length;(D=k[T])==null||D.focus(),S.preventDefault()},v=`tour-title-${m.id}`,y=`tour-body-${m.id}`,x=a?{top:a.top-6,left:a.left-6,width:a.width+12,height:a.height+12}:void 0;return f.jsxs("div",{className:"tour-overlay",role:"dialog","aria-modal":"true","aria-label":"Guided tour","aria-labelledby":v,"aria-describedby":y,onKeyDown:w,children:[f.jsx("div",{className:"tour-backdrop",onClick:n}),a?f.jsx("div",{className:"tour-spotlight",style:x}):null,f.jsxs("div",{className:`tour-card ${l?"tour-card-anchored":""}`,ref:c,style:l??void 0,tabIndex:-1,children:[f.jsxs("div",{className:"tour-step",children:["Step ",i+1," of ",e.length]}),f.jsx("div",{className:"tour-title",id:v,children:m.title}),f.jsx("p",{className:"tour-body",id:y,children:m.body}),f.jsxs("div",{className:"tour-actions",children:[f.jsx("button",{className:"ghost-button",type:"button",onClick:()=>s(S=>Math.max(0,S-1)),disabled:i===0,children:"Back"}),f.jsx("button",{className:"ghost-button",type:"button",onClick:n,children:"Skip"}),i===e.length-1?f.jsx("button",{className:"primary-button",type:"button",onClick:r,children:"Finish tour"}):f.jsx("button",{className:"primary-button",type:"button",onClick:()=>s(S=>S+1),children:"Next"})]})]})]})}const k0=(e,t,n)=>Math.min(n,Math.max(t,e));function xA({enabled:e}){const[t,n]=_.useState(null),[r,i]=_.useState(null),s=_.useRef(null),a=_.useRef(null),o=_.useCallback(()=>{const u=s.current;if(!u){n(null);return}const c=u.getBoundingClientRect(),d=u.dataset.helpTitle??"Context",h=u.dataset.helpBody??"",m=u.dataset.helpPlacement??"right";n({rect:c,title:d,body:h,placement:m})},[]);_.useEffect(()=>{if(!e){s.current=null,n(null);return}const u=g=>{var w,v;const p=(v=(w=g.target)==null?void 0:w.closest)==null?void 0:v.call(w,"[data-help]");if(!p){s.current||n(null);return}s.current!==p&&(s.current=p,o())},c=g=>{var w,v;const p=(v=(w=g.target)==null?void 0:w.closest)==null?void 0:v.call(w,"[data-help]");p&&(s.current=p,o())},d=g=>{var w;const p=g.relatedTarget;(w=p==null?void 0:p.closest)!=null&&w.call(p,"[data-help]")||(s.current=null,n(null))},h=g=>{var w,v;const p=(v=(w=g.target)==null?void 0:w.closest)==null?void 0:v.call(w,"[data-help]");if(!p){s.current=null,n(null);return}s.current=p,o()},m=()=>{s.current&&o()};return window.addEventListener("mousemove",u),window.addEventListener("focusin",c),window.addEventListener("focusout",d),window.addEventListener("pointerdown",h),window.addEventListener("scroll",m,!0),window.addEventListener("resize",m),()=>{window.removeEventListener("mousemove",u),window.removeEventListener("focusin",c),window.removeEventListener("focusout",d),window.removeEventListener("pointerdown",h),window.removeEventListener("scroll",m,!0),window.removeEventListener("resize",m)}},[e,o]);const l=_.useCallback(()=>{if(!t||!a.current){i(null);return}const u=12,c=a.current.offsetWidth,d=a.current.offsetHeight,{rect:h,placement:m}=t;let g=h.right+16,p=h.top+h.height/2-d/2;m==="left"&&(g=h.left-c-16,p=h.top+h.height/2-d/2),m==="top"&&(g=h.left+h.width/2-c/2,p=h.top-d-16),m==="bottom"&&(g=h.left+h.width/2-c/2,p=h.bottom+16),g=k0(g,u,window.innerWidth-c-u),p=k0(p,u,window.innerHeight-d-u),i({left:g,top:p})},[t]);return _.useLayoutEffect(()=>{l()},[l]),!e||!t?null:f.jsxs("div",{className:"help-overlay","aria-hidden":"true",children:[f.jsx("div",{className:"help-highlight",style:{top:t.rect.top-6,left:t.rect.left-6,width:t.rect.width+12,height:t.rect.height+12}}),f.jsxs("div",{className:"help-bubble",ref:a,style:r??void 0,"data-placement":t.placement,children:[f.jsx("div",{className:"help-title",children:t.title}),f.jsx("div",{className:"help-body",children:t.body})]})]})}const wA=[{id:"builder",label:"Builder lens",body:"Focus on step payloads, execution paths, and replay control."},{id:"executive",label:"Executive lens",body:"Focus on bottlenecks, risk, and outcome-level run quality."},{id:"operator",label:"Operator lens",body:"Focus on failures, retries, and trace reliability posture."}];function bA({onComplete:e,onStartTour:t,onStartStory:n,persona:r="builder",onPersonaChange:i}){const s=()=>{t==null||t(),e()},a=()=>{n==null||n(),e()};return f.jsx("div",{className:"intro-overlay",role:"dialog","aria-modal":"true","aria-label":"Agent Director intro",children:f.jsxs("div",{className:"intro-card",children:[f.jsx("div",{className:"intro-scan"}),f.jsx("div",{className:"intro-title",children:"Agent Director"}),f.jsx("div",{className:"intro-tagline",children:"Watch your agent think. Then direct it."}),f.jsxs("div",{className:"intro-steps",children:[f.jsxs("div",{className:"intro-step",children:[f.jsx("div",{className:"intro-step-label",children:"Observe"}),f.jsx("div",{className:"intro-step-body",children:"Scrub the timeline to feel pacing and parallelism."})]}),f.jsxs("div",{className:"intro-step",children:[f.jsx("div",{className:"intro-step-label",children:"Inspect"}),f.jsx("div",{className:"intro-step-body",children:"Open the bottleneck to read payloads and costs."})]}),f.jsxs("div",{className:"intro-step",children:[f.jsx("div",{className:"intro-step-label",children:"Direct"}),f.jsx("div",{className:"intro-step-body",children:"Replay from a decisive step and compare runs."})]})]}),f.jsx("div",{className:"intro-personas",role:"group","aria-label":"Select onboarding lens",children:wA.map(o=>f.jsxs("button",{type:"button",className:`ghost-button intro-persona ${r===o.id?"active":""}`,onClick:()=>i==null?void 0:i(o.id),"aria-pressed":r===o.id,"aria-label":o.label,children:[f.jsx("span",{className:"intro-persona-label",children:o.label}),f.jsx("span",{className:"intro-persona-body",children:o.body})]},o.id))}),f.jsxs("div",{className:"intro-grid",children:[f.jsx("span",{}),f.jsx("span",{}),f.jsx("span",{}),f.jsx("span",{})]}),f.jsxs("div",{className:"intro-actions",children:[f.jsx("button",{className:"primary-button",type:"button",onClick:s,children:"Start guided tour"}),n?f.jsx("button",{className:"ghost-button",type:"button",onClick:a,children:"Play story mode"}):null,f.jsx("button",{className:"ghost-button",type:"button",onClick:e,children:"Skip intro"})]})]})})}function SA({explainMode:e,storyActive:t,onStartTour:n,onStartStory:r,onToggleExplain:i,onDismiss:s}){return f.jsxs("section",{className:"hero-ribbon","aria-label":"Director briefing","data-help":!0,"data-help-indicator":!0,"data-tour":"hero","data-help-title":"Director briefing","data-help-body":"Start the tour, play story mode, or enable explain to learn the interface instantly.","data-help-placement":"bottom",children:[f.jsxs("div",{className:"hero-ribbon-top",children:[f.jsx("span",{className:"hero-eyebrow",children:"Director briefing"}),f.jsx("button",{className:"ghost-button hero-dismiss",type:"button",onClick:s,children:"Dismiss"})]}),f.jsx("div",{className:"hero-title",children:"Observe. Inspect. Direct."}),f.jsx("div",{className:"hero-subtitle",children:"A cinematic control room for agent traces. See time, read structure, then replay with confidence."}),f.jsxs("div",{className:"hero-pills",children:[f.jsx("span",{className:"hero-pill","data-tone":"observe",children:"Observe"}),f.jsx("span",{className:"hero-pill","data-tone":"inspect",children:"Inspect"}),f.jsx("span",{className:"hero-pill","data-tone":"direct",children:"Direct"})]}),f.jsxs("div",{className:"hero-actions",children:[f.jsx("button",{className:"primary-button",type:"button",onClick:n,children:"Start guided tour"}),f.jsx("button",{className:"ghost-button",type:"button",onClick:r,disabled:t,children:t?"Story running":"Play story mode"}),f.jsxs("button",{className:`ghost-button ${e?"active":""}`,type:"button",onClick:i,"aria-pressed":e,children:["Explain ",e?"On":"Off"]})]})]})}function _A({mode:e,isPlaying:t,storyActive:n,explainMode:r,hidden:i=!1,open:s,onToggleOpen:a,onTogglePlay:o,onStartStory:l,onStopStory:u,onStartTour:c,onOpenPalette:d,onShowShortcuts:h,onToggleExplain:m,onJumpToBottleneck:g}){if(i)return null;const p=t?"Pause":"Play",w=n?"Stop story":"Story mode";return s?f.jsxs("aside",{className:"quick-actions","aria-label":"Quick actions","data-help":!0,"data-help-indicator":!0,"data-tour":"quick-actions","data-help-title":"Quick actions","data-help-body":"Launch story mode, open the command palette, or jump to the bottleneck instantly.","data-help-placement":"left",children:[f.jsxs("div",{className:"quick-actions-header",children:[f.jsxs("div",{children:[f.jsx("div",{className:"quick-actions-title",children:"Quick actions"}),f.jsx("div",{className:"quick-actions-subtitle",children:"Pin demo controls close at hand."})]}),f.jsx("button",{className:"ghost-button",type:"button",onClick:a,"aria-label":"Collapse quick actions",children:"Collapse"})]}),f.jsxs("button",{className:`quick-action ${t?"active":""}`,type:"button",onClick:o,"aria-label":p,"data-help":!0,"data-help-title":"Play or pause","data-help-body":"Start or stop playback from anywhere.","data-help-placement":"left",children:[f.jsx("span",{className:"quick-action-label",children:p}),f.jsx("span",{className:"quick-action-meta",children:e==="flow"?"Cinema":"Space"})]}),f.jsxs("button",{className:`quick-action ${n?"active":""}`,type:"button",onClick:n?u:l,"aria-label":w,"data-help":!0,"data-help-title":"Story mode","data-help-body":"Auto-runs a cinematic walkthrough of the run.","data-help-placement":"left",children:[f.jsx("span",{className:"quick-action-label",children:w}),f.jsx("span",{className:"quick-action-meta",children:"S"})]}),f.jsxs("button",{className:"quick-action",type:"button",onClick:d,"aria-label":"Open command palette","data-help":!0,"data-help-title":"Command palette","data-help-body":"Search every action and jump instantly.","data-help-placement":"left",children:[f.jsx("span",{className:"quick-action-label",children:"Command"}),f.jsx("span",{className:"quick-action-meta",children:"Cmd+K"})]}),f.jsxs("button",{className:"quick-action",type:"button",onClick:c,"aria-label":"Start guided tour","data-help":!0,"data-help-title":"Guided tour","data-help-body":"Walk the interface with a curated tour.","data-help-placement":"left",children:[f.jsx("span",{className:"quick-action-label",children:"Tour"}),f.jsx("span",{className:"quick-action-meta",children:"Guide"})]}),f.jsxs("button",{className:`quick-action ${r?"active":""}`,type:"button",onClick:m,"aria-label":"Toggle explain mode","data-help":!0,"data-help-title":"Explain mode","data-help-body":"Toggle contextual overlays for every control.","data-help-placement":"left",children:[f.jsx("span",{className:"quick-action-label",children:"Explain"}),f.jsx("span",{className:"quick-action-meta",children:r?"On":"Off"})]}),f.jsxs("button",{className:"quick-action",type:"button",onClick:g,"aria-label":"Jump to bottleneck","data-help":!0,"data-help-title":"Bottleneck jump","data-help-body":"Focus instantly on the slowest step.","data-help-placement":"left",children:[f.jsx("span",{className:"quick-action-label",children:"Bottleneck"}),f.jsx("span",{className:"quick-action-meta",children:"Latency"})]}),f.jsxs("button",{className:"quick-action",type:"button",onClick:h,"aria-label":"Show shortcuts","data-help":!0,"data-help-title":"Shortcuts","data-help-body":"See the full keyboard map.","data-help-placement":"left",children:[f.jsx("span",{className:"quick-action-label",children:"Shortcuts"}),f.jsx("span",{className:"quick-action-meta",children:"?"})]})]}):f.jsxs("button",{className:"quick-actions-toggle",type:"button",onClick:a,title:"Open quick actions","aria-expanded":"false","data-help":!0,"data-tour":"quick-actions","data-help-title":"Quick actions","data-help-body":"Open the dock to access demos, shortcuts, and instant actions.","data-help-placement":"left",children:[f.jsx("span",{className:"quick-actions-toggle-label",children:"Actions"}),f.jsx("span",{className:"quick-actions-toggle-meta",children:"Dock"})]})}function kA({active:e,label:t,step:n,total:r,onStop:i,onRestart:s}){if(!e)return null;const a=r>0?(n+1)/r*100:0;return f.jsxs("div",{className:"story-banner",role:"status","aria-live":"polite",children:[f.jsxs("div",{className:"story-banner-main",children:[f.jsx("div",{className:"story-banner-title",children:"Story mode"}),f.jsx("div",{className:"story-banner-step",children:t})]}),f.jsxs("div",{className:"story-banner-actions",children:[f.jsxs("span",{className:"story-banner-count",children:[Math.min(n+1,r),"/",r]}),f.jsx("button",{className:"ghost-button",type:"button",onClick:s,children:"Restart"}),f.jsx("button",{className:"primary-button",type:"button",onClick:i,children:"Stop"})]}),f.jsx("div",{className:"story-banner-progress",children:f.jsx("span",{style:{width:`${a}%`}})})]})}const CE=/token|secret|password|api[_-]?key|authorization|bearer|session|cookie|private|ssh|credentials/i;function Kv(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}function CA(e){const t=[],n=new WeakSet,r=(i,s)=>{if(Array.isArray(i)){i.forEach((a,o)=>{r(a,`${s}[${o}]`)});return}Kv(i)&&(n.has(i)||(n.add(i),Object.entries(i).forEach(([a,o])=>{const l=s?`${s}.${a}`:a;CE.test(a)&&t.push(l),r(o,l)})))};return r(e,""),t}function EE(e){const t=new WeakMap,n=r=>{if(Array.isArray(r))return r.map(s=>n(s));if(!Kv(r))return r;if(t.has(r))return t.get(r);const i={};return t.set(r,i),Object.entries(r).forEach(([s,a])=>{CE.test(s)?i[s]="[REDACTED]":i[s]=n(a)}),i};return n(e)}function Wv(e){return Kv(e)}function C0(e){return e==null||Number.isNaN(e)?"n/a":e.toString()}function EA(e){return e==null||Number.isNaN(e)?"n/a":e.toFixed(3)}function TA(e,t){return t?EE(e):e}function jA({job:e,matrix:t,safeExport:n,sensitiveKeys:r,anchorStepName:i}){const s=t.rows.map(a=>({scenarioId:a.scenarioId,name:a.name,strategy:a.strategy,status:a.status,replayTraceId:a.replayTraceId,modifications:TA(a.modifications,n),error:a.error??null,changedStepIds:a.changedStepIds,addedStepIds:a.addedStepIds,removedStepIds:a.removedStepIds,metrics:a.metrics}));return{generatedAt:new Date().toISOString(),safeExport:n,redaction:{safeExport:n,sensitiveKeys:r,policy:n?"redacted":"raw"},job:e?{id:e.id,status:e.status,createdAt:e.createdAt,startedAt:e.startedAt??null,endedAt:e.endedAt??null,scenarioCount:e.scenarioCount,completedCount:e.completedCount,failedCount:e.failedCount,canceledCount:e.canceledCount}:null,base:{traceId:t.traceId,stepId:t.stepId,anchorStepName:i??null},rows:s,causalRanking:t.causalRanking}}function NA({job:e,matrix:t,safeExport:n,anchorStepName:r}){const i=[],s=new Date().toISOString();return i.push("# Counterfactual Replay Matrix"),i.push(""),i.push(`Generated: ${s}`),i.push(`Safe export: ${n?"on":"off"}`),i.push(""),i.push("## Base trace"),i.push(`- Trace: ${t.traceId}`),i.push(`- Anchor step: ${r??t.stepId}`),i.push(""),e&&(i.push("## Job status"),i.push(`- Job: ${e.id}`),i.push(`- Status: ${e.status}`),i.push(`- Scenarios: ${e.scenarioCount} (completed ${e.completedCount}, failed ${e.failedCount}, canceled ${e.canceledCount})`),i.push("")),i.push("## Scenario outcomes"),i.push("| Scenario | Status | Wall  (ms) | Cost  (USD) | Errors  | Changed |"),i.push("| --- | --- | --- | --- | --- | --- |"),t.rows.forEach(a=>{i.push(`| ${a.name} | ${a.status} | ${C0(a.metrics.wallTimeDeltaMs)} | ${EA(a.metrics.costDeltaUsd)} | ${C0(a.metrics.errorDelta)} | ${a.metrics.changedSteps} |`)}),i.push(""),i.push("## Causal ranking"),t.causalRanking.length?t.causalRanking.slice(0,10).forEach(a=>{i.push(`- ${a.factor}: score ${a.score.toFixed(3)}, confidence ${(a.confidence*100).toFixed(0)}% (samples ${a.evidence.samples})`)}):i.push("- No causal ranking available."),i.push(""),i.push("## Redaction"),i.push(`Safe export: ${n?"enabled":"disabled"}.`),i.push(""),i.join(`
`)}const E0=["recorded","live","hybrid"],Ha=25,ms=[{id:"prompt-tighten",label:"Prompt tighten",description:"Shorten or focus the assistant response",name:"Prompt tighter",strategy:"hybrid",modifications:{prompt:"Return concise response"}},{id:"tool-timeout",label:"Tool timeout",description:"Extend tool timeout for flaky calls",name:"Tool timeout 45s",strategy:"live",modifications:{toolTimeoutMs:45e3}},{id:"recorded-baseline",label:"Recorded baseline",description:"Pure recorded replay for determinism",name:"Recorded baseline",strategy:"recorded",modifications:{}}],Ka=[{id:"latency-sweep",label:"Latency sweep",description:"Evaluate timeout adjustments across three live variants.",scenarios:[{name:"Timeout 15s",strategy:"live",modifications:{toolTimeoutMs:15e3}},{name:"Timeout 30s",strategy:"live",modifications:{toolTimeoutMs:3e4}},{name:"Timeout 45s",strategy:"live",modifications:{toolTimeoutMs:45e3}}]},{id:"prompt-spectrum",label:"Prompt spectrum",description:"Compare concise, balanced, and verbose response shaping.",scenarios:[{name:"Concise prompt",strategy:"hybrid",modifications:{prompt:"Return concise response"}},{name:"Balanced prompt",strategy:"hybrid",modifications:{prompt:"Return balanced detail response"}},{name:"Verbose prompt",strategy:"hybrid",modifications:{prompt:"Return comprehensive detailed response"}}]}];function T0(e){return e??Number.POSITIVE_INFINITY}function Eu(){return`scenario-${Math.random().toString(36).slice(2,9)}`}function Tu(e){const t=e.trim();if(!t)return{value:{}};try{const n=JSON.parse(t);return Wv(n)?{value:n}:{error:"Modifications must be a JSON object."}}catch{return{error:"Modifications must be valid JSON."}}}function aa(e,t=""){const n=[];return Object.entries(e).forEach(([r,i])=>{const s=t?`${t}.${r}`:r;if(typeof i=="string"||typeof i=="number"||typeof i=="boolean"||i==null){n.push({path:s,value:i});return}Wv(i)&&n.push(...aa(i,s))}),n}function MA(e,t,n){const r=t.split(".").filter(Boolean);if(r.length===0)return e;const i=JSON.parse(JSON.stringify(e));let s=i;for(let a=0;a<r.length-1;a+=1){const o=r[a],l=s[o];Wv(l)||(s[o]={}),s=s[o]}return s[r[r.length-1]]=n,i}function PA(e){const t=e.trim();if(t==="true")return!0;if(t==="false")return!1;if(t==="null")return null;const n=Number(t);return!Number.isNaN(n)&&t!==""?n:e}function j0(e,t){const n=new Map(aa(e).map(i=>[i.path,i.value]));return aa(t).filter(i=>n.get(i.path)!==i.value).map(i=>({path:i.path,from:n.get(i.path)??null,to:i.value}))}function RA(e){return e===null?"null":typeof e=="string"?"string":typeof e=="number"?"number":typeof e=="boolean"?"boolean":"unknown"}function AA(e){return`${e.strategy}::${JSON.stringify(e.modifications)}`}function IA(e){const t=new Map;return e.scenarios.forEach(n=>{aa(n.modifications).forEach(r=>{const i=t.get(r.path)??new Set;i.add(RA(r.value)),t.set(r.path,i)})}),Array.from(t.entries()).filter(([,n])=>n.size>1).map(([n])=>n)}function N0(e,t){const n=t.get(e);return n?n.name:e}function DA({steps:e,anchorStepId:t,onAnchorStepChange:n,scenarios:r,onScenarioChange:i,onDuplicateScenario:s,onMoveScenario:a,onAddScenario:o,onRemoveScenario:l,onReplaceScenarios:u,onRun:c,onCancel:d,loading:h,error:m,job:g,matrix:p,safeExport:w,onOpenCompare:v}){var sn,Yr,be,mt;const[y,x]=_.useState("wallTimeDeltaMs"),[S,k]=_.useState(!0),[E,j]=_.useState(null),[T,M]=_.useState(((sn=ms[0])==null?void 0:sn.id)??""),[D,R]=_.useState(((Yr=Ka[0])==null?void 0:Yr.id)??""),[H,Y]=_.useState(null),[pe,F]=_.useState(null),[le,se]=_.useState({}),[A,I]=_.useState(25),z=_.useRef(null),U=_.useMemo(()=>new Map(e.map(N=>[N.id,N])),[e]),re=_.useMemo(()=>{const N=r.map((G,B)=>G.name.trim()||`Scenario ${B+1}`),V=new Map;return N.forEach(G=>{const B=G.toLowerCase();V.set(B,(V.get(B)??0)+1)}),r.map((G,B)=>{const me=N[B],Oe=me.toLowerCase(),ce=Tu(G.modificationsText),rt=[];ce.error&&rt.push(ce.error),(V.get(Oe)??0)>1&&rt.push(`Duplicate scenario name: ${me}`);const Ke=ce.value??{},ae=ce.value?CA(ce.value):[];return{id:G.id,name:me,parsedModifications:Ke,errors:rt,sensitiveKeys:ae}})},[r]),Te=re.reduce((N,V)=>N+V.errors.length,0),ue=r.length>Ha?`Scenario limit exceeded (${r.length}/${Ha}).`:null,ge=Te>0||!!ue,xe=ue||(Te>0?"Fix scenario errors before running.":null),tt=!h&&r.length>0&&!ge,nt=_.useMemo(()=>{const V=[...(p==null?void 0:p.rows)??[]];return V.sort((G,B)=>{if(y==="name")return S?G.name.localeCompare(B.name):B.name.localeCompare(G.name);if(y==="changedSteps"){const ce=G.metrics.changedSteps,rt=B.metrics.changedSteps;return S?ce-rt:rt-ce}const me=T0(G.metrics[y]),Oe=T0(B.metrics[y]);return S?me-Oe:Oe-me}),V},[p==null?void 0:p.rows,y,S]);_.useEffect(()=>{I(25)},[p==null?void 0:p.jobId,y,S]);const ct=N=>{if(N===y){k(V=>!V);return}x(N),k(!0)},At=re.map((N,V)=>{var G;return{name:N.name,strategy:((G=r[V])==null?void 0:G.strategy)??"hybrid",modifications:N.parsedModifications}}),vn=()=>{tt&&c(At)},Fn=()=>{const N=ms.find(V=>V.id===T)??ms[0];N&&u([...r,{id:Eu(),name:N.name,strategy:N.strategy,modificationsText:JSON.stringify(N.modifications,null,2)}])},O=()=>{const N=Ka.find(ce=>ce.id===D);if(!N){Y("Select a valid profile.");return}const V=N.scenarios.map(ce=>ce.name.toLowerCase());if(new Set(V).size!==V.length){Y("Profile has duplicate scenario names.");return}const B=N.scenarios.map(ce=>AA(ce));if(new Set(B).size!==B.length){Y("Profile has duplicate scenario payloads.");return}const me=IA(N);if(me.length>0){Y(`Profile has conflicting scalar types: ${me.slice(0,3).join(", ")}`);return}const Oe=N.scenarios.map(ce=>({id:Eu(),name:ce.name,strategy:ce.strategy,modificationsText:JSON.stringify(ce.modifications,null,2)}));u(Oe),Y(null),c(Oe.map(ce=>({name:ce.name,strategy:ce.strategy,modifications:Tu(ce.modificationsText).value??{}})))},ee=(N,V,G)=>{const B=r.find(ce=>ce.id===N);if(!B)return;const me=Tu(B.modificationsText);if(!me.value)return;const Oe=MA(me.value,V,PA(G));i(N,{modificationsText:JSON.stringify(Oe,null,2)})},J=()=>{const N={version:1,anchorStepId:t,scenarios:r.map(V=>({name:V.name,strategy:V.strategy,modificationsText:V.modificationsText}))};Mm(`agent-director-scenarios-${t||"matrix"}.json`,N)},Le=async N=>{var G;const V=(G=N.target.files)==null?void 0:G[0];if(V){N.target.value="";try{const B=await V.text(),me=JSON.parse(B),Oe=Array.isArray(me.scenarios)?me.scenarios:Array.isArray(me)?me:null;if(!Oe||Oe.length===0){F("Scenario file must include a scenarios array.");return}if(Oe.length>Ha){F(`Scenario file exceeds ${Ha} scenarios.`);return}const ce=Oe.map((rt,Ke)=>{if(!rt||typeof rt!="object")throw new Error("Scenario entries must be objects.");const ae=rt,Qr=String(ae.name??`Scenario ${Ke+1}`),wr=String(ae.strategy??"hybrid"),Qi=E0.includes(wr)?wr:"hybrid",Ji=typeof ae.modificationsText=="string"?ae.modificationsText:JSON.stringify(ae.modifications??{},null,2);return{id:Eu(),name:Qr,strategy:Qi,modificationsText:Ji}});typeof me.anchorStepId=="string"&&U.has(me.anchorStepId)&&n(me.anchorStepId),u(ce),F(null)}catch(B){F(B instanceof Error?B.message:"Failed to import scenario file.")}}},te=_.useMemo(()=>{const N=re.flatMap(V=>V.sensitiveKeys);return Array.from(new Set(N))},[re]),Re=_.useMemo(()=>{const N=(p==null?void 0:p.causalRanking)??[];return N.length===0?1:Math.max(1,...N.map(V=>Math.abs(V.score)))},[p==null?void 0:p.causalRanking]),Ht=((be=re[0])==null?void 0:be.parsedModifications)??{},xr=_.useMemo(()=>Object.entries(le).filter(([,V])=>V!==0).reduce((V,[G,B])=>{const me=p==null?void 0:p.causalRanking.find(rt=>rt.factor===G),Oe=(me==null?void 0:me.score)??0,ce=B/100;return V.wallTimeMs+=Oe*ce*1400,V.costUsd+=Oe*ce*.04,V.errorDelta+=Oe*ce*.7,V},{wallTimeMs:0,costUsd:0,errorDelta:0}),[p==null?void 0:p.causalRanking,le]),St=_.useMemo(()=>{const N=new Map;return((p==null?void 0:p.rows)??[]).forEach(V=>{const G=Math.abs(V.metrics.wallTimeDeltaMs??0)+Math.abs((V.metrics.costDeltaUsd??0)*1e3)+Math.abs(V.metrics.errorDelta??0)*400;V.changedStepIds.forEach(B=>{N.set(B,(N.get(B)??0)+Math.max(1,G))})}),Array.from(N.entries()).sort((V,G)=>G[1]-V[1]).slice(0,10)},[p==null?void 0:p.rows]),Be=Math.max(1,...St.map(([,N])=>N),1),ye=_.useMemo(()=>((p==null?void 0:p.causalRanking)??[]).slice(0,5).map(N=>({id:N.factor,text:`${N.factor} -> ${N.evidence.examples[0]??"observed change"} -> outcome`,confidence:N.confidence})),[p==null?void 0:p.causalRanking]),It=nt.slice(0,A),rn=()=>{var G;if(!p)return;const N=((G=U.get(t))==null?void 0:G.name)??null,V=jA({job:g,matrix:p,safeExport:w,sensitiveKeys:te,anchorStepName:N});Mm(`agent-director-matrix-${p.jobId}.json`,V)},Yi=()=>{var G;if(!p)return;const N=((G=U.get(t))==null?void 0:G.name)??null,V=NA({job:g,matrix:p,safeExport:w,anchorStepName:N});kE(`agent-director-matrix-${p.jobId}.md`,V,"text/markdown")},Vn=(g==null?void 0:g.status)==="queued"||(g==null?void 0:g.status)==="running",fe=E?((p==null?void 0:p.rows)??[]).find(N=>N.scenarioId===E)??null:null,Wr=fe?w?EE(fe.modifications):fe.modifications:null;return f.jsxs("section",{className:"matrix-mode","data-help":!0,"data-help-title":"Matrix mode","data-help-body":"Run multiple replay scenarios from one anchor and compare outcome deltas with causal ranking.","data-help-placement":"top",children:[f.jsxs("div",{className:"matrix-panel",children:[f.jsxs("div",{className:"matrix-panel-header",children:[f.jsx("h2",{children:"Counterfactual Replay Matrix"}),f.jsx("div",{className:"matrix-job-state",children:g?f.jsxs(f.Fragment,{children:[f.jsxs("span",{className:`status-pill status-${g.status}`,children:["Job: ",g.status]}),f.jsxs("span",{children:[g.completedCount,"/",g.scenarioCount," completed"]}),g.failedCount?f.jsxs("span",{children:[g.failedCount," failed"]}):null,g.canceledCount?f.jsxs("span",{children:[g.canceledCount," canceled"]}):null]}):f.jsx("span",{children:"No job yet"})})]}),f.jsxs("div",{className:"matrix-controls",children:[f.jsxs("label",{children:["Anchor step",f.jsx("select",{value:t,onChange:N=>n(N.target.value),children:e.map(N=>f.jsxs("option",{value:N.id,children:[N.name," (",N.id,")"]},N.id))})]}),f.jsxs("label",{children:["Preset",f.jsx("select",{value:T,onChange:N=>M(N.target.value),"data-help":!0,"data-help-title":"Scenario presets","data-help-body":"Insert common experiments like prompt tweaks or recorded baselines.","data-help-placement":"bottom",children:ms.map(N=>f.jsx("option",{value:N.id,children:N.label},N.id))})]}),f.jsxs("label",{children:["Batch profile",f.jsx("select",{value:D,onChange:N=>R(N.target.value),children:Ka.map(N=>f.jsx("option",{value:N.id,children:N.label},N.id))})]}),f.jsx("button",{type:"button",className:"ghost-button",onClick:Fn,disabled:h,"data-help":!0,"data-help-title":"Add preset","data-help-body":"Append the selected preset as a new scenario.","data-help-placement":"bottom",children:"Add preset"}),f.jsx("button",{type:"button",className:"ghost-button",onClick:O,disabled:h,"data-help":!0,"data-help-title":"Run batch profile","data-help-body":"Loads and executes a predefined scenario orchestration profile.","data-help-placement":"bottom",children:"Run profile"}),f.jsxs("div",{className:"matrix-actions",children:[f.jsx("button",{type:"button",className:"primary-button",onClick:vn,disabled:!tt,"data-help":!0,"data-help-title":"Run matrix","data-help-body":"Execute all scenarios sequentially and gather outcome deltas.","data-help-placement":"bottom",children:h?"Running...":"Run matrix"}),f.jsx("button",{type:"button",className:"ghost-button",onClick:o,disabled:h,children:"Add scenario"}),f.jsx("button",{type:"button",className:"ghost-button",onClick:d,disabled:!Vn||h,children:"Cancel job"}),f.jsx("button",{type:"button",className:"ghost-button",onClick:J,"data-help":!0,"data-help-title":"Export scenarios","data-help-body":"Download the scenario set as JSON for reuse.","data-help-placement":"bottom",children:"Export scenarios"}),f.jsx("button",{type:"button",className:"ghost-button",onClick:()=>{var N;return(N=z.current)==null?void 0:N.click()},"data-help":!0,"data-help-title":"Import scenarios","data-help-body":"Load a scenario JSON file to repopulate the builder.","data-help-placement":"bottom",children:"Import scenarios"}),f.jsx("input",{ref:z,type:"file",accept:"application/json",onChange:Le,className:"matrix-file-input"}),f.jsx("button",{type:"button",className:"ghost-button",onClick:rn,disabled:!p,"data-help":!0,"data-help-title":"Export matrix","data-help-body":"Download the full matrix JSON with redaction metadata.","data-help-placement":"bottom",children:"Export matrix"}),f.jsx("button",{type:"button",className:"ghost-button",onClick:Yi,disabled:!p,"data-help":!0,"data-help-title":"Export summary","data-help-body":"Download a markdown summary for sharing.","data-help-placement":"bottom",children:"Export summary"})]})]}),f.jsxs("div",{className:"matrix-presets",children:[ms.map(N=>f.jsxs("div",{className:"matrix-preset",children:[f.jsx("strong",{children:N.label}),f.jsx("span",{children:N.description})]},N.id)),Ka.filter(N=>N.id===D).map(N=>f.jsxs("div",{className:"matrix-preset profile",children:[f.jsx("strong",{children:N.label}),f.jsx("span",{children:N.description})]},N.id))]}),f.jsx("div",{className:"matrix-scenarios",children:r.map((N,V)=>{const G=re[V];return f.jsxs("article",{className:"matrix-scenario",children:[f.jsxs("div",{className:"matrix-scenario-head",children:[f.jsx("input",{value:N.name,onChange:B=>i(N.id,{name:B.target.value}),placeholder:"Scenario name"}),f.jsx("select",{value:N.strategy,onChange:B=>i(N.id,{strategy:B.target.value}),children:E0.map(B=>f.jsx("option",{value:B,children:B},B))})]}),f.jsx("textarea",{value:N.modificationsText,onChange:B=>i(N.id,{modificationsText:B.target.value}),rows:3,spellCheck:!1,"aria-label":`Scenario ${N.name} modifications`}),G?f.jsxs("div",{className:"matrix-schema-editor",children:[f.jsx("strong",{children:"Schema-aware scalar editor"}),f.jsx("div",{className:"matrix-schema-grid",children:aa(G.parsedModifications).slice(0,8).map(B=>f.jsxs("label",{className:"matrix-schema-field",children:[f.jsx("span",{children:B.path}),f.jsx("input",{value:String(B.value??""),onChange:me=>ee(N.id,B.path,me.target.value)})]},`${N.id}-${B.path}`))})]}):null,f.jsxs("div",{className:"matrix-diff-preview",children:[f.jsx("strong",{children:"Diff vs baseline"}),f.jsxs("div",{className:"matrix-diff-list",children:[j0(Ht,(G==null?void 0:G.parsedModifications)??{}).slice(0,6).map(B=>f.jsxs("div",{className:"matrix-diff-item",children:[f.jsx("span",{children:B.path}),f.jsxs("span",{children:[String(B.from)," ","->"," ",String(B.to)]})]},`${N.id}-${B.path}`)),j0(Ht,(G==null?void 0:G.parsedModifications)??{}).length===0?f.jsx("div",{className:"matrix-diff-item",children:"No scalar changes from baseline."}):null]})]}),G!=null&&G.errors.length?f.jsx("div",{className:"matrix-scenario-error",children:G.errors.map(B=>f.jsx("div",{children:B},B))}):null,G!=null&&G.sensitiveKeys.length?f.jsxs("div",{className:"matrix-scenario-warning",children:["Sensitive keys: ",G.sensitiveKeys.join(", ")]}):null,f.jsxs("div",{className:"matrix-scenario-actions",children:[f.jsx("button",{type:"button",className:"ghost-button",onClick:()=>s(N.id),disabled:h,children:"Duplicate scenario"}),f.jsx("button",{type:"button",className:"ghost-button",onClick:()=>a(N.id,"up"),disabled:h||V===0,children:"Move scenario up"}),f.jsx("button",{type:"button",className:"ghost-button",onClick:()=>a(N.id,"down"),disabled:h||V===r.length-1,children:"Move scenario down"}),f.jsx("button",{type:"button",className:"ghost-button",onClick:()=>l(N.id),disabled:r.length<=1,children:"Remove"})]})]},N.id)})}),xe?f.jsx("div",{className:"error-banner",children:xe}):null,pe?f.jsx("div",{className:"error-banner",children:pe}):null,H?f.jsx("div",{className:"error-banner",children:H}):null,m?f.jsx("div",{className:"error-banner",children:m}):null]}),f.jsxs("div",{className:"matrix-results",children:[f.jsxs("div",{className:"matrix-table-wrap",children:[f.jsxs("table",{className:"matrix-table",children:[f.jsx("thead",{children:f.jsxs("tr",{children:[f.jsx("th",{children:f.jsx("button",{type:"button",className:"table-sort",onClick:()=>ct("name"),children:"Scenario"})}),f.jsx("th",{children:"Status"}),f.jsx("th",{children:f.jsx("button",{type:"button",className:"table-sort",onClick:()=>ct("wallTimeDeltaMs"),children:"Wall  (ms)"})}),f.jsx("th",{children:f.jsx("button",{type:"button",className:"table-sort",onClick:()=>ct("costDeltaUsd"),children:"Cost  (USD)"})}),f.jsx("th",{children:f.jsx("button",{type:"button",className:"table-sort",onClick:()=>ct("errorDelta"),children:"Errors "})}),f.jsx("th",{children:f.jsx("button",{type:"button",className:"table-sort",onClick:()=>ct("changedSteps"),children:"Changed"})}),f.jsx("th",{children:"Details"}),f.jsx("th",{children:"Compare"})]})}),f.jsx("tbody",{children:nt.length===0?f.jsx("tr",{children:f.jsx("td",{colSpan:8,children:"No matrix results yet. Run a job to populate this table."})}):It.map(N=>f.jsxs("tr",{children:[f.jsx("td",{children:N.name}),f.jsx("td",{title:N.error??void 0,children:N.status}),f.jsx("td",{children:N.metrics.wallTimeDeltaMs??"n/a"}),f.jsx("td",{children:N.metrics.costDeltaUsd??"n/a"}),f.jsx("td",{children:N.metrics.errorDelta??"n/a"}),f.jsx("td",{children:N.metrics.changedSteps}),f.jsx("td",{children:f.jsx("button",{type:"button",className:"ghost-button",onClick:()=>j(N.scenarioId),children:"Details"})}),f.jsx("td",{children:f.jsx("button",{type:"button",className:"ghost-button",disabled:!N.replayTraceId,onClick:()=>N.replayTraceId&&v(N.replayTraceId),children:"Open"})})]},N.scenarioId))})]}),nt.length>It.length?f.jsx("div",{className:"matrix-table-more",children:f.jsxs("button",{type:"button",className:"ghost-button",onClick:()=>I(N=>Math.min(nt.length,N+25)),children:["Load more rows (",It.length,"/",nt.length,")"]})}):null]}),f.jsxs("aside",{className:"matrix-causal",children:[f.jsx("h3",{children:"Causal ranking"}),(mt=p==null?void 0:p.causalRanking)!=null&&mt.length?f.jsxs(f.Fragment,{children:[f.jsx("ul",{children:p.causalRanking.slice(0,8).map(N=>f.jsxs("li",{children:[f.jsxs("div",{className:"factor-row",children:[f.jsx("strong",{children:N.factor}),f.jsxs("span",{children:["score ",N.score.toFixed(3)]})]}),f.jsx("div",{className:"factor-bar-track",role:"presentation",children:f.jsx("div",{className:`factor-bar-fill ${N.score>=0?"positive":"negative"}`,style:{width:`${Math.max(6,Math.abs(N.score)/Re*100)}%`}})}),f.jsxs("div",{className:"factor-meta",children:["confidence ",(N.confidence*100).toFixed(0),"%  samples ",N.evidence.samples]}),f.jsx("input",{type:"range",min:-100,max:100,value:le[N.factor]??0,"aria-label":`Simulate ${N.factor}`,onChange:V=>se(G=>({...G,[N.factor]:Number(V.target.value)}))}),N.evidence.examples.length?f.jsx("div",{className:"factor-chips",children:N.evidence.examples.map(V=>f.jsx("span",{className:"factor-chip",children:V},V))}):null]},N.factor))}),f.jsxs("div",{className:"matrix-projected",children:[f.jsx("h4",{children:"Projected impact (simulation)"}),f.jsxs("div",{className:"matrix-projected-grid",children:[f.jsxs("span",{children:["Wall  ",xr.wallTimeMs.toFixed(0)," ms"]}),f.jsxs("span",{children:["Cost  ",xr.costUsd.toFixed(3)," USD"]}),f.jsxs("span",{children:["Error  ",xr.errorDelta.toFixed(2)]})]})]}),f.jsxs("div",{className:"matrix-heatmap",children:[f.jsx("h4",{children:"Step influence heatmap"}),St.map(([N,V])=>f.jsxs("div",{className:"matrix-heatmap-row",children:[f.jsx("span",{children:N0(N,U)}),f.jsx("span",{className:"matrix-heatmap-bar",style:{width:`${Math.max(5,V/Be*100)}%`}})]},N)),St.length===0?f.jsx("p",{children:"No influence data yet."}):null]}),f.jsxs("div",{className:"matrix-paths",children:[f.jsx("h4",{children:"Causal path explorer"}),ye.map(N=>f.jsxs("div",{className:"matrix-path-item",children:[f.jsx("span",{children:N.text}),f.jsxs("span",{children:[(N.confidence*100).toFixed(0),"%"]})]},N.id)),ye.length===0?f.jsx("p",{children:"No paths available."}):null]})]}):f.jsx("p",{children:"No causal ranking yet."})]}),fe?f.jsxs("aside",{className:"matrix-detail",role:"dialog","aria-label":"Scenario details",children:[f.jsxs("div",{className:"matrix-detail-header",children:[f.jsxs("div",{children:[f.jsx("h3",{children:"Scenario details"}),f.jsxs("p",{className:"matrix-detail-subtitle",children:[fe.name,"  ",fe.status]})]}),f.jsx("button",{type:"button",className:"ghost-button",onClick:()=>j(null),children:"Close"})]}),f.jsxs("div",{className:"matrix-detail-grid",children:[f.jsxs("div",{className:"matrix-detail-block",children:[f.jsx("h4",{children:"Modifications"}),w?f.jsx("p",{className:"matrix-detail-note",children:"Safe export enabled: sensitive keys are redacted."}):null,f.jsx("pre",{children:JSON.stringify(Wr??{},null,2)})]}),f.jsxs("div",{className:"matrix-detail-block",children:[f.jsx("h4",{children:"Change summary"}),f.jsxs("div",{className:"matrix-detail-metrics",children:[f.jsxs("span",{children:["Changed: ",fe.metrics.changedSteps]}),f.jsxs("span",{children:["Added: ",fe.metrics.addedSteps]}),f.jsxs("span",{children:["Removed: ",fe.metrics.removedSteps]}),f.jsxs("span",{children:["Invalidated: ",fe.metrics.invalidatedStepCount]})]}),f.jsxs("div",{className:"matrix-detail-steps",children:[f.jsx("strong",{children:"Top changed steps"}),f.jsx("div",{className:"matrix-step-chips",children:fe.changedStepIds.length?fe.changedStepIds.slice(0,6).map(N=>f.jsx("span",{className:"matrix-step-chip",title:N,children:N0(N,U)},N)):f.jsx("span",{className:"matrix-step-chip",children:"None"})}),fe.changedStepIds.length>6?f.jsxs("div",{className:"matrix-step-more",children:["+",fe.changedStepIds.length-6," more steps changed"]}):null]}),fe.error?f.jsx("div",{className:"matrix-detail-error",children:fe.error}):null]})]})]}):null]})]})}const TE=_.createContext({});function LA(e){const t=_.useRef(null);return t.current===null&&(t.current=e()),t.current}const Yv=_.createContext(null),jE=_.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});function OA(e=!0){const t=_.useContext(Yv);if(t===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:i}=t,s=_.useId();_.useEffect(()=>{e&&i(s)},[e]);const a=_.useCallback(()=>e&&r&&r(s),[s,r,e]);return!n&&r?[!1,a]:[!0]}const Qv=typeof window<"u",qA=Qv?_.useLayoutEffect:_.useEffect,jt=e=>e;let NE=jt;function Jv(e){let t;return()=>(t===void 0&&(t=e()),t)}const Li=(e,t,n)=>{const r=t-e;return r===0?1:(n-e)/r},jn=e=>e*1e3,Nn=e=>e/1e3,FA={useManualTiming:!1};function VA(e){let t=new Set,n=new Set,r=!1,i=!1;const s=new WeakSet;let a={delta:0,timestamp:0,isProcessing:!1};function o(u){s.has(u)&&(l.schedule(u),e()),u(a)}const l={schedule:(u,c=!1,d=!1)=>{const m=d&&r?t:n;return c&&s.add(u),m.has(u)||m.add(u),u},cancel:u=>{n.delete(u),s.delete(u)},process:u=>{if(a=u,r){i=!0;return}r=!0,[t,n]=[n,t],t.forEach(o),t.clear(),r=!1,i&&(i=!1,l.process(u))}};return l}const Wa=["read","resolveKeyframes","update","preRender","render","postRender"],BA=40;function ME(e,t){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=()=>n=!0,a=Wa.reduce((v,y)=>(v[y]=VA(s),v),{}),{read:o,resolveKeyframes:l,update:u,preRender:c,render:d,postRender:h}=a,m=()=>{const v=performance.now();n=!1,i.delta=r?1e3/60:Math.max(Math.min(v-i.timestamp,BA),1),i.timestamp=v,i.isProcessing=!0,o.process(i),l.process(i),u.process(i),c.process(i),d.process(i),h.process(i),i.isProcessing=!1,n&&t&&(r=!1,e(m))},g=()=>{n=!0,r=!0,i.isProcessing||e(m)};return{schedule:Wa.reduce((v,y)=>{const x=a[y];return v[y]=(S,k=!1,E=!1)=>(n||g(),x.schedule(S,k,E)),v},{}),cancel:v=>{for(let y=0;y<Wa.length;y++)a[Wa[y]].cancel(v)},state:i,steps:a}}const{schedule:ke,cancel:dr,state:Xe,steps:ju}=ME(typeof requestAnimationFrame<"u"?requestAnimationFrame:jt,!0),PE=_.createContext({strict:!1}),M0={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Oi={};for(const e in M0)Oi[e]={isEnabled:t=>M0[e].some(n=>!!t[n])};function $A(e){for(const t in e)Oi[t]={...Oi[t],...e[t]}}const UA=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Vo(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||UA.has(e)}let RE=e=>!Vo(e);function zA(e){e&&(RE=t=>t.startsWith("on")?!Vo(t):e(t))}try{zA(require("@emotion/is-prop-valid").default)}catch{}function GA(e,t,n){const r={};for(const i in e)i==="values"&&typeof e.values=="object"||(RE(i)||n===!0&&Vo(i)||!t&&!Vo(i)||e.draggable&&i.startsWith("onDrag"))&&(r[i]=e[i]);return r}function HA(e){if(typeof Proxy>"u")return e;const t=new Map,n=(...r)=>e(...r);return new Proxy(n,{get:(r,i)=>i==="create"?e:(t.has(i)||t.set(i,e(i)),t.get(i))})}const pl=_.createContext({});function oa(e){return typeof e=="string"||Array.isArray(e)}function ml(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}const Xv=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Zv=["initial",...Xv];function vl(e){return ml(e.animate)||Zv.some(t=>oa(e[t]))}function AE(e){return!!(vl(e)||e.variants)}function KA(e,t){if(vl(e)){const{initial:n,animate:r}=e;return{initial:n===!1||oa(n)?n:void 0,animate:oa(r)?r:void 0}}return e.inherit!==!1?t:{}}function WA(e){const{initial:t,animate:n}=KA(e,_.useContext(pl));return _.useMemo(()=>({initial:t,animate:n}),[P0(t),P0(n)])}function P0(e){return Array.isArray(e)?e.join(" "):e}const YA=Symbol.for("motionComponentSymbol");function yi(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function QA(e,t,n){return _.useCallback(r=>{r&&e.onMount&&e.onMount(r),t&&(r?t.mount(r):t.unmount()),n&&(typeof n=="function"?n(r):yi(n)&&(n.current=r))},[t])}const eg=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),JA="framerAppearId",IE="data-"+eg(JA),{schedule:tg}=ME(queueMicrotask,!1),DE=_.createContext({});function XA(e,t,n,r,i){var s,a;const{visualElement:o}=_.useContext(pl),l=_.useContext(PE),u=_.useContext(Yv),c=_.useContext(jE).reducedMotion,d=_.useRef(null);r=r||l.renderer,!d.current&&r&&(d.current=r(e,{visualState:t,parent:o,props:n,presenceContext:u,blockInitialAnimation:u?u.initial===!1:!1,reducedMotionConfig:c}));const h=d.current,m=_.useContext(DE);h&&!h.projection&&i&&(h.type==="html"||h.type==="svg")&&ZA(d.current,n,i,m);const g=_.useRef(!1);_.useInsertionEffect(()=>{h&&g.current&&h.update(n,u)});const p=n[IE],w=_.useRef(!!p&&!(!((s=window.MotionHandoffIsComplete)===null||s===void 0)&&s.call(window,p))&&((a=window.MotionHasOptimisedAnimation)===null||a===void 0?void 0:a.call(window,p)));return qA(()=>{h&&(g.current=!0,window.MotionIsMounted=!0,h.updateFeatures(),tg.render(h.render),w.current&&h.animationState&&h.animationState.animateChanges())}),_.useEffect(()=>{h&&(!w.current&&h.animationState&&h.animationState.animateChanges(),w.current&&(queueMicrotask(()=>{var v;(v=window.MotionHandoffMarkAsComplete)===null||v===void 0||v.call(window,p)}),w.current=!1))}),h}function ZA(e,t,n,r){const{layoutId:i,layout:s,drag:a,dragConstraints:o,layoutScroll:l,layoutRoot:u}=t;e.projection=new n(e.latestValues,t["data-framer-portal-id"]?void 0:LE(e.parent)),e.projection.setOptions({layoutId:i,layout:s,alwaysMeasureLayout:!!a||o&&yi(o),visualElement:e,animationType:typeof s=="string"?s:"both",initialPromotionConfig:r,layoutScroll:l,layoutRoot:u})}function LE(e){if(e)return e.options.allowProjection!==!1?e.projection:LE(e.parent)}function eI({preloadedFeatures:e,createVisualElement:t,useRender:n,useVisualState:r,Component:i}){var s,a;e&&$A(e);function o(u,c){let d;const h={..._.useContext(jE),...u,layoutId:tI(u)},{isStatic:m}=h,g=WA(u),p=r(u,m);if(!m&&Qv){nI();const w=rI(h);d=w.MeasureLayout,g.visualElement=XA(i,p,h,t,w.ProjectionNode)}return f.jsxs(pl.Provider,{value:g,children:[d&&g.visualElement?f.jsx(d,{visualElement:g.visualElement,...h}):null,n(i,u,QA(p,g.visualElement,c),p,m,g.visualElement)]})}o.displayName=`motion.${typeof i=="string"?i:`create(${(a=(s=i.displayName)!==null&&s!==void 0?s:i.name)!==null&&a!==void 0?a:""})`}`;const l=_.forwardRef(o);return l[YA]=i,l}function tI({layoutId:e}){const t=_.useContext(TE).id;return t&&e!==void 0?t+"-"+e:e}function nI(e,t){_.useContext(PE).strict}function rI(e){const{drag:t,layout:n}=Oi;if(!t&&!n)return{};const r={...t,...n};return{MeasureLayout:t!=null&&t.isEnabled(e)||n!=null&&n.isEnabled(e)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const iI=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function ng(e){return typeof e!="string"||e.includes("-")?!1:!!(iI.indexOf(e)>-1||/[A-Z]/u.test(e))}function R0(e){const t=[{},{}];return e==null||e.values.forEach((n,r)=>{t[0][r]=n.get(),t[1][r]=n.getVelocity()}),t}function rg(e,t,n,r){if(typeof t=="function"){const[i,s]=R0(r);t=t(n!==void 0?n:e.custom,i,s)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[i,s]=R0(r);t=t(n!==void 0?n:e.custom,i,s)}return t}const Pm=e=>Array.isArray(e),sI=e=>!!(e&&typeof e=="object"&&e.mix&&e.toValue),aI=e=>Pm(e)?e[e.length-1]||0:e,lt=e=>!!(e&&e.getVelocity);function ho(e){const t=lt(e)?e.get():e;return sI(t)?t.toValue():t}function oI({scrapeMotionValuesFromProps:e,createRenderState:t,onUpdate:n},r,i,s){const a={latestValues:lI(r,i,s,e),renderState:t()};return n&&(a.onMount=o=>n({props:r,current:o,...a}),a.onUpdate=o=>n(o)),a}const OE=e=>(t,n)=>{const r=_.useContext(pl),i=_.useContext(Yv),s=()=>oI(e,t,r,i);return n?s():LA(s)};function lI(e,t,n,r){const i={},s=r(e,{});for(const h in s)i[h]=ho(s[h]);let{initial:a,animate:o}=e;const l=vl(e),u=AE(e);t&&u&&!l&&e.inherit!==!1&&(a===void 0&&(a=t.initial),o===void 0&&(o=t.animate));let c=n?n.initial===!1:!1;c=c||a===!1;const d=c?o:a;if(d&&typeof d!="boolean"&&!ml(d)){const h=Array.isArray(d)?d:[d];for(let m=0;m<h.length;m++){const g=rg(e,h[m]);if(g){const{transitionEnd:p,transition:w,...v}=g;for(const y in v){let x=v[y];if(Array.isArray(x)){const S=c?x.length-1:0;x=x[S]}x!==null&&(i[y]=x)}for(const y in p)i[y]=p[y]}}}return i}const $i=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],$r=new Set($i),qE=e=>t=>typeof t=="string"&&t.startsWith(e),FE=qE("--"),uI=qE("var(--"),ig=e=>uI(e)?cI.test(e.split("/*")[0].trim()):!1,cI=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,VE=(e,t)=>t&&typeof e=="number"?t.transform(e):e,In=(e,t,n)=>n>t?t:n<e?e:n,Ui={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},la={...Ui,transform:e=>In(0,1,e)},Ya={...Ui,default:1},ga=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),Hn=ga("deg"),hn=ga("%"),K=ga("px"),dI=ga("vh"),fI=ga("vw"),A0={...hn,parse:e=>hn.parse(e)/100,transform:e=>hn.transform(e*100)},hI={borderWidth:K,borderTopWidth:K,borderRightWidth:K,borderBottomWidth:K,borderLeftWidth:K,borderRadius:K,radius:K,borderTopLeftRadius:K,borderTopRightRadius:K,borderBottomRightRadius:K,borderBottomLeftRadius:K,width:K,maxWidth:K,height:K,maxHeight:K,top:K,right:K,bottom:K,left:K,padding:K,paddingTop:K,paddingRight:K,paddingBottom:K,paddingLeft:K,margin:K,marginTop:K,marginRight:K,marginBottom:K,marginLeft:K,backgroundPositionX:K,backgroundPositionY:K},pI={rotate:Hn,rotateX:Hn,rotateY:Hn,rotateZ:Hn,scale:Ya,scaleX:Ya,scaleY:Ya,scaleZ:Ya,skew:Hn,skewX:Hn,skewY:Hn,distance:K,translateX:K,translateY:K,translateZ:K,x:K,y:K,z:K,perspective:K,transformPerspective:K,opacity:la,originX:A0,originY:A0,originZ:K},I0={...Ui,transform:Math.round},sg={...hI,...pI,zIndex:I0,size:K,fillOpacity:la,strokeOpacity:la,numOctaves:I0},mI={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},vI=$i.length;function gI(e,t,n){let r="",i=!0;for(let s=0;s<vI;s++){const a=$i[s],o=e[a];if(o===void 0)continue;let l=!0;if(typeof o=="number"?l=o===(a.startsWith("scale")?1:0):l=parseFloat(o)===0,!l||n){const u=VE(o,sg[a]);if(!l){i=!1;const c=mI[a]||a;r+=`${c}(${u}) `}n&&(t[a]=u)}}return r=r.trim(),n?r=n(t,i?"":r):i&&(r="none"),r}function ag(e,t,n){const{style:r,vars:i,transformOrigin:s}=e;let a=!1,o=!1;for(const l in t){const u=t[l];if($r.has(l)){a=!0;continue}else if(FE(l)){i[l]=u;continue}else{const c=VE(u,sg[l]);l.startsWith("origin")?(o=!0,s[l]=c):r[l]=c}}if(t.transform||(a||n?r.transform=gI(t,e.transform,n):r.transform&&(r.transform="none")),o){const{originX:l="50%",originY:u="50%",originZ:c=0}=s;r.transformOrigin=`${l} ${u} ${c}`}}const yI={offset:"stroke-dashoffset",array:"stroke-dasharray"},xI={offset:"strokeDashoffset",array:"strokeDasharray"};function wI(e,t,n=1,r=0,i=!0){e.pathLength=1;const s=i?yI:xI;e[s.offset]=K.transform(-r);const a=K.transform(t),o=K.transform(n);e[s.array]=`${a} ${o}`}function D0(e,t,n){return typeof e=="string"?e:K.transform(t+n*e)}function bI(e,t,n){const r=D0(t,e.x,e.width),i=D0(n,e.y,e.height);return`${r} ${i}`}function og(e,{attrX:t,attrY:n,attrScale:r,originX:i,originY:s,pathLength:a,pathSpacing:o=1,pathOffset:l=0,...u},c,d){if(ag(e,u,d),c){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:h,style:m,dimensions:g}=e;h.transform&&(g&&(m.transform=h.transform),delete h.transform),g&&(i!==void 0||s!==void 0||m.transform)&&(m.transformOrigin=bI(g,i!==void 0?i:.5,s!==void 0?s:.5)),t!==void 0&&(h.x=t),n!==void 0&&(h.y=n),r!==void 0&&(h.scale=r),a!==void 0&&wI(h,a,o,l,!1)}const lg=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),BE=()=>({...lg(),attrs:{}}),ug=e=>typeof e=="string"&&e.toLowerCase()==="svg";function $E(e,{style:t,vars:n},r,i){Object.assign(e.style,t,i&&i.getProjectionStyles(r));for(const s in n)e.style.setProperty(s,n[s])}const UE=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function zE(e,t,n,r){$E(e,t,void 0,r);for(const i in t.attrs)e.setAttribute(UE.has(i)?i:eg(i),t.attrs[i])}const Bo={};function SI(e){Object.assign(Bo,e)}function GE(e,{layout:t,layoutId:n}){return $r.has(e)||e.startsWith("origin")||(t||n!==void 0)&&(!!Bo[e]||e==="opacity")}function cg(e,t,n){var r;const{style:i}=e,s={};for(const a in i)(lt(i[a])||t.style&&lt(t.style[a])||GE(a,e)||((r=n==null?void 0:n.getValue(a))===null||r===void 0?void 0:r.liveStyle)!==void 0)&&(s[a]=i[a]);return s}function HE(e,t,n){const r=cg(e,t,n);for(const i in e)if(lt(e[i])||lt(t[i])){const s=$i.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[s]=e[i]}return r}function _I(e,t){try{t.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{t.dimensions={x:0,y:0,width:0,height:0}}}const L0=["x","y","width","height","cx","cy","r"],kI={useVisualState:OE({scrapeMotionValuesFromProps:HE,createRenderState:BE,onUpdate:({props:e,prevProps:t,current:n,renderState:r,latestValues:i})=>{if(!n)return;let s=!!e.drag;if(!s){for(const o in i)if($r.has(o)){s=!0;break}}if(!s)return;let a=!t;if(t)for(let o=0;o<L0.length;o++){const l=L0[o];e[l]!==t[l]&&(a=!0)}a&&ke.read(()=>{_I(n,r),ke.render(()=>{og(r,i,ug(n.tagName),e.transformTemplate),zE(n,r)})})}})},CI={useVisualState:OE({scrapeMotionValuesFromProps:cg,createRenderState:lg})};function KE(e,t,n){for(const r in t)!lt(t[r])&&!GE(r,n)&&(e[r]=t[r])}function EI({transformTemplate:e},t){return _.useMemo(()=>{const n=lg();return ag(n,t,e),Object.assign({},n.vars,n.style)},[t])}function TI(e,t){const n=e.style||{},r={};return KE(r,n,e),Object.assign(r,EI(e,t)),r}function jI(e,t){const n={},r=TI(e,t);return e.drag&&e.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=r,n}function NI(e,t,n,r){const i=_.useMemo(()=>{const s=BE();return og(s,t,ug(r),e.transformTemplate),{...s.attrs,style:{...s.style}}},[t]);if(e.style){const s={};KE(s,e.style,e),i.style={...s,...i.style}}return i}function MI(e=!1){return(n,r,i,{latestValues:s},a)=>{const l=(ng(n)?NI:jI)(r,s,a,n),u=GA(r,typeof n=="string",e),c=n!==_.Fragment?{...u,...l,ref:i}:{},{children:d}=r,h=_.useMemo(()=>lt(d)?d.get():d,[d]);return _.createElement(n,{...c,children:h})}}function PI(e,t){return function(r,{forwardMotionProps:i}={forwardMotionProps:!1}){const a={...ng(r)?kI:CI,preloadedFeatures:e,useRender:MI(i),createVisualElement:t,Component:r};return eI(a)}}function WE(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}function gl(e,t,n){const r=e.getProps();return rg(r,t,n!==void 0?n:r.custom,e)}const RI=Jv(()=>window.ScrollTimeline!==void 0);class AI{constructor(t){this.stop=()=>this.runAll("stop"),this.animations=t.filter(Boolean)}get finished(){return Promise.all(this.animations.map(t=>"finished"in t?t.finished:t))}getAll(t){return this.animations[0][t]}setAll(t,n){for(let r=0;r<this.animations.length;r++)this.animations[r][t]=n}attachTimeline(t,n){const r=this.animations.map(i=>{if(RI()&&i.attachTimeline)return i.attachTimeline(t);if(typeof n=="function")return n(i)});return()=>{r.forEach((i,s)=>{i&&i(),this.animations[s].stop()})}}get time(){return this.getAll("time")}set time(t){this.setAll("time",t)}get speed(){return this.getAll("speed")}set speed(t){this.setAll("speed",t)}get startTime(){return this.getAll("startTime")}get duration(){let t=0;for(let n=0;n<this.animations.length;n++)t=Math.max(t,this.animations[n].duration);return t}runAll(t){this.animations.forEach(n=>n[t]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class II extends AI{then(t,n){return Promise.all(this.animations).then(t).catch(n)}}function dg(e,t){return e?e[t]||e.default||e:void 0}const Rm=2e4;function YE(e){let t=0;const n=50;let r=e.next(t);for(;!r.done&&t<Rm;)t+=n,r=e.next(t);return t>=Rm?1/0:t}function fg(e){return typeof e=="function"}function O0(e,t){e.timeline=t,e.onfinish=null}const hg=e=>Array.isArray(e)&&typeof e[0]=="number",DI={linearEasing:void 0};function LI(e,t){const n=Jv(e);return()=>{var r;return(r=DI[t])!==null&&r!==void 0?r:n()}}const $o=LI(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),QE=(e,t,n=10)=>{let r="";const i=Math.max(Math.round(t/n),2);for(let s=0;s<i;s++)r+=e(Li(0,i-1,s))+", ";return`linear(${r.substring(0,r.length-2)})`};function JE(e){return!!(typeof e=="function"&&$o()||!e||typeof e=="string"&&(e in Am||$o())||hg(e)||Array.isArray(e)&&e.every(JE))}const bs=([e,t,n,r])=>`cubic-bezier(${e}, ${t}, ${n}, ${r})`,Am={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:bs([0,.65,.55,1]),circOut:bs([.55,0,1,.45]),backIn:bs([.31,.01,.66,-.59]),backOut:bs([.33,1.53,.69,.99])};function XE(e,t){if(e)return typeof e=="function"&&$o()?QE(e,t):hg(e)?bs(e):Array.isArray(e)?e.map(n=>XE(n,t)||Am.easeOut):Am[e]}const Wt={x:!1,y:!1};function ZE(){return Wt.x||Wt.y}function OI(e,t,n){var r;if(e instanceof Element)return[e];if(typeof e=="string"){let i=document;const s=(r=void 0)!==null&&r!==void 0?r:i.querySelectorAll(e);return s?Array.from(s):[]}return Array.from(e)}function eT(e,t){const n=OI(e),r=new AbortController,i={passive:!0,...t,signal:r.signal};return[n,i,()=>r.abort()]}function q0(e){return t=>{t.pointerType==="touch"||ZE()||e(t)}}function qI(e,t,n={}){const[r,i,s]=eT(e,n),a=q0(o=>{const{target:l}=o,u=t(o);if(typeof u!="function"||!l)return;const c=q0(d=>{u(d),l.removeEventListener("pointerleave",c)});l.addEventListener("pointerleave",c,i)});return r.forEach(o=>{o.addEventListener("pointerenter",a,i)}),s}const tT=(e,t)=>t?e===t?!0:tT(e,t.parentElement):!1,pg=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1,FI=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function VI(e){return FI.has(e.tagName)||e.tabIndex!==-1}const Ss=new WeakSet;function F0(e){return t=>{t.key==="Enter"&&e(t)}}function Nu(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const BI=(e,t)=>{const n=e.currentTarget;if(!n)return;const r=F0(()=>{if(Ss.has(n))return;Nu(n,"down");const i=F0(()=>{Nu(n,"up")}),s=()=>Nu(n,"cancel");n.addEventListener("keyup",i,t),n.addEventListener("blur",s,t)});n.addEventListener("keydown",r,t),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),t)};function V0(e){return pg(e)&&!ZE()}function $I(e,t,n={}){const[r,i,s]=eT(e,n),a=o=>{const l=o.currentTarget;if(!V0(o)||Ss.has(l))return;Ss.add(l);const u=t(o),c=(m,g)=>{window.removeEventListener("pointerup",d),window.removeEventListener("pointercancel",h),!(!V0(m)||!Ss.has(l))&&(Ss.delete(l),typeof u=="function"&&u(m,{success:g}))},d=m=>{c(m,n.useGlobalTarget||tT(l,m.target))},h=m=>{c(m,!1)};window.addEventListener("pointerup",d,i),window.addEventListener("pointercancel",h,i)};return r.forEach(o=>{!VI(o)&&o.getAttribute("tabindex")===null&&(o.tabIndex=0),(n.useGlobalTarget?window:o).addEventListener("pointerdown",a,i),o.addEventListener("focus",u=>BI(u,i),i)}),s}function UI(e){return e==="x"||e==="y"?Wt[e]?null:(Wt[e]=!0,()=>{Wt[e]=!1}):Wt.x||Wt.y?null:(Wt.x=Wt.y=!0,()=>{Wt.x=Wt.y=!1})}const nT=new Set(["width","height","top","left","right","bottom",...$i]);let po;function zI(){po=void 0}const pn={now:()=>(po===void 0&&pn.set(Xe.isProcessing||FA.useManualTiming?Xe.timestamp:performance.now()),po),set:e=>{po=e,queueMicrotask(zI)}};function mg(e,t){e.indexOf(t)===-1&&e.push(t)}function vg(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}class gg{constructor(){this.subscriptions=[]}add(t){return mg(this.subscriptions,t),()=>vg(this.subscriptions,t)}notify(t,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](t,n,r);else for(let s=0;s<i;s++){const a=this.subscriptions[s];a&&a(t,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function rT(e,t){return t?e*(1e3/t):0}const B0=30,GI=e=>!isNaN(parseFloat(e));class HI{constructor(t,n={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,i=!0)=>{const s=pn.now();this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(t),this.owner=n.owner}setCurrent(t){this.current=t,this.updatedAt=pn.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=GI(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,n){this.events[t]||(this.events[t]=new gg);const r=this.events[t].add(n);return t==="change"?()=>{r(),ke.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,n){this.passiveEffect=t,this.stopPassiveEffect=n}set(t,n=!0){!n||!this.passiveEffect?this.updateAndNotify(t,n):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-r}jump(t,n=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=pn.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>B0)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,B0);return rT(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(t){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=t(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function ua(e,t){return new HI(e,t)}function KI(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,ua(n))}function WI(e,t){const n=gl(e,t);let{transitionEnd:r={},transition:i={},...s}=n||{};s={...s,...r};for(const a in s){const o=aI(s[a]);KI(e,a,o)}}function YI(e){return!!(lt(e)&&e.add)}function Im(e,t){const n=e.getValue("willChange");if(YI(n))return n.add(t)}function iT(e){return e.props[IE]}const sT=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,QI=1e-7,JI=12;function XI(e,t,n,r,i){let s,a,o=0;do a=t+(n-t)/2,s=sT(a,r,i)-e,s>0?n=a:t=a;while(Math.abs(s)>QI&&++o<JI);return a}function ya(e,t,n,r){if(e===t&&n===r)return jt;const i=s=>XI(s,0,1,e,n);return s=>s===0||s===1?s:sT(i(s),t,r)}const aT=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,oT=e=>t=>1-e(1-t),lT=ya(.33,1.53,.69,.99),yg=oT(lT),uT=aT(yg),cT=e=>(e*=2)<1?.5*yg(e):.5*(2-Math.pow(2,-10*(e-1))),xg=e=>1-Math.sin(Math.acos(e)),dT=oT(xg),fT=aT(xg),hT=e=>/^0[^.\s]+$/u.test(e);function ZI(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||hT(e):!0}const Fs=e=>Math.round(e*1e5)/1e5,wg=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function eD(e){return e==null}const tD=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,bg=(e,t)=>n=>!!(typeof n=="string"&&tD.test(n)&&n.startsWith(e)||t&&!eD(n)&&Object.prototype.hasOwnProperty.call(n,t)),pT=(e,t,n)=>r=>{if(typeof r!="string")return r;const[i,s,a,o]=r.match(wg);return{[e]:parseFloat(i),[t]:parseFloat(s),[n]:parseFloat(a),alpha:o!==void 0?parseFloat(o):1}},nD=e=>In(0,255,e),Mu={...Ui,transform:e=>Math.round(nD(e))},Nr={test:bg("rgb","red"),parse:pT("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:r=1})=>"rgba("+Mu.transform(e)+", "+Mu.transform(t)+", "+Mu.transform(n)+", "+Fs(la.transform(r))+")"};function rD(e){let t="",n="",r="",i="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),r=e.substring(5,7),i=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),r=e.substring(3,4),i=e.substring(4,5),t+=t,n+=n,r+=r,i+=i),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const Dm={test:bg("#"),parse:rD,transform:Nr.transform},xi={test:bg("hsl","hue"),parse:pT("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:r=1})=>"hsla("+Math.round(e)+", "+hn.transform(Fs(t))+", "+hn.transform(Fs(n))+", "+Fs(la.transform(r))+")"},at={test:e=>Nr.test(e)||Dm.test(e)||xi.test(e),parse:e=>Nr.test(e)?Nr.parse(e):xi.test(e)?xi.parse(e):Dm.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?Nr.transform(e):xi.transform(e)},iD=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function sD(e){var t,n;return isNaN(e)&&typeof e=="string"&&(((t=e.match(wg))===null||t===void 0?void 0:t.length)||0)+(((n=e.match(iD))===null||n===void 0?void 0:n.length)||0)>0}const mT="number",vT="color",aD="var",oD="var(",$0="${}",lD=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function ca(e){const t=e.toString(),n=[],r={color:[],number:[],var:[]},i=[];let s=0;const o=t.replace(lD,l=>(at.test(l)?(r.color.push(s),i.push(vT),n.push(at.parse(l))):l.startsWith(oD)?(r.var.push(s),i.push(aD),n.push(l)):(r.number.push(s),i.push(mT),n.push(parseFloat(l))),++s,$0)).split($0);return{values:n,split:o,indexes:r,types:i}}function gT(e){return ca(e).values}function yT(e){const{split:t,types:n}=ca(e),r=t.length;return i=>{let s="";for(let a=0;a<r;a++)if(s+=t[a],i[a]!==void 0){const o=n[a];o===mT?s+=Fs(i[a]):o===vT?s+=at.transform(i[a]):s+=i[a]}return s}}const uD=e=>typeof e=="number"?0:e;function cD(e){const t=gT(e);return yT(e)(t.map(uD))}const fr={test:sD,parse:gT,createTransformer:yT,getAnimatableNone:cD},dD=new Set(["brightness","contrast","saturate","opacity"]);function fD(e){const[t,n]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[r]=n.match(wg)||[];if(!r)return e;const i=n.replace(r,"");let s=dD.has(t)?1:0;return r!==n&&(s*=100),t+"("+s+i+")"}const hD=/\b([a-z-]*)\(.*?\)/gu,Lm={...fr,getAnimatableNone:e=>{const t=e.match(hD);return t?t.map(fD).join(" "):e}},pD={...sg,color:at,backgroundColor:at,outlineColor:at,fill:at,stroke:at,borderColor:at,borderTopColor:at,borderRightColor:at,borderBottomColor:at,borderLeftColor:at,filter:Lm,WebkitFilter:Lm},Sg=e=>pD[e];function xT(e,t){let n=Sg(e);return n!==Lm&&(n=fr),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const mD=new Set(["auto","none","0"]);function vD(e,t,n){let r=0,i;for(;r<e.length&&!i;){const s=e[r];typeof s=="string"&&!mD.has(s)&&ca(s).values.length&&(i=e[r]),r++}if(i&&n)for(const s of t)e[s]=xT(n,i)}const U0=e=>e===Ui||e===K,z0=(e,t)=>parseFloat(e.split(", ")[t]),G0=(e,t)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const i=r.match(/^matrix3d\((.+)\)$/u);if(i)return z0(i[1],t);{const s=r.match(/^matrix\((.+)\)$/u);return s?z0(s[1],e):0}},gD=new Set(["x","y","z"]),yD=$i.filter(e=>!gD.has(e));function xD(e){const t=[];return yD.forEach(n=>{const r=e.getValue(n);r!==void 0&&(t.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),t}const qi={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:G0(4,13),y:G0(5,14)};qi.translateX=qi.x;qi.translateY=qi.y;const Ar=new Set;let Om=!1,qm=!1;function wT(){if(qm){const e=Array.from(Ar).filter(r=>r.needsMeasurement),t=new Set(e.map(r=>r.element)),n=new Map;t.forEach(r=>{const i=xD(r);i.length&&(n.set(r,i),r.render())}),e.forEach(r=>r.measureInitialState()),t.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([s,a])=>{var o;(o=r.getValue(s))===null||o===void 0||o.set(a)})}),e.forEach(r=>r.measureEndState()),e.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}qm=!1,Om=!1,Ar.forEach(e=>e.complete()),Ar.clear()}function bT(){Ar.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(qm=!0)})}function wD(){bT(),wT()}class _g{constructor(t,n,r,i,s,a=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...t],this.onComplete=n,this.name=r,this.motionValue=i,this.element=s,this.isAsync=a}scheduleResolve(){this.isScheduled=!0,this.isAsync?(Ar.add(this),Om||(Om=!0,ke.read(bT),ke.resolveKeyframes(wT))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:n,element:r,motionValue:i}=this;for(let s=0;s<t.length;s++)if(t[s]===null)if(s===0){const a=i==null?void 0:i.get(),o=t[t.length-1];if(a!==void 0)t[0]=a;else if(r&&n){const l=r.readValue(n,o);l!=null&&(t[0]=l)}t[0]===void 0&&(t[0]=o),i&&a===void 0&&i.set(t[0])}else t[s]=t[s-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),Ar.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,Ar.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const ST=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e),bD=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function SD(e){const t=bD.exec(e);if(!t)return[,];const[,n,r,i]=t;return[`--${n??r}`,i]}function _T(e,t,n=1){const[r,i]=SD(e);if(!r)return;const s=window.getComputedStyle(t).getPropertyValue(r);if(s){const a=s.trim();return ST(a)?parseFloat(a):a}return ig(i)?_T(i,t,n+1):i}const kT=e=>t=>t.test(e),_D={test:e=>e==="auto",parse:e=>e},CT=[Ui,K,hn,Hn,fI,dI,_D],H0=e=>CT.find(kT(e));class ET extends _g{constructor(t,n,r,i,s){super(t,n,r,i,s,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let l=0;l<t.length;l++){let u=t[l];if(typeof u=="string"&&(u=u.trim(),ig(u))){const c=_T(u,n.current);c!==void 0&&(t[l]=c),l===t.length-1&&(this.finalKeyframe=u)}}if(this.resolveNoneKeyframes(),!nT.has(r)||t.length!==2)return;const[i,s]=t,a=H0(i),o=H0(s);if(a!==o)if(U0(a)&&U0(o))for(let l=0;l<t.length;l++){const u=t[l];typeof u=="string"&&(t[l]=parseFloat(u))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:n}=this,r=[];for(let i=0;i<t.length;i++)ZI(t[i])&&r.push(i);r.length&&vD(t,r,n)}measureInitialState(){const{element:t,unresolvedKeyframes:n,name:r}=this;if(!t||!t.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=qi[r](t.measureViewportBox(),window.getComputedStyle(t.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&t.getValue(r,i).jump(i,!1)}measureEndState(){var t;const{element:n,name:r,unresolvedKeyframes:i}=this;if(!n||!n.current)return;const s=n.getValue(r);s&&s.jump(this.measuredOrigin,!1);const a=i.length-1,o=i[a];i[a]=qi[r](n.measureViewportBox(),window.getComputedStyle(n.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),!((t=this.removedTransforms)===null||t===void 0)&&t.length&&this.removedTransforms.forEach(([l,u])=>{n.getValue(l).set(u)}),this.resolveNoneKeyframes()}}const K0=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(fr.test(e)||e==="0")&&!e.startsWith("url("));function kD(e){const t=e[0];if(e.length===1)return!0;for(let n=0;n<e.length;n++)if(e[n]!==t)return!0}function CD(e,t,n,r){const i=e[0];if(i===null)return!1;if(t==="display"||t==="visibility")return!0;const s=e[e.length-1],a=K0(i,t),o=K0(s,t);return!a||!o?!1:kD(e)||(n==="spring"||fg(n))&&r}const ED=e=>e!==null;function yl(e,{repeat:t,repeatType:n="loop"},r){const i=e.filter(ED),s=t&&n!=="loop"&&t%2===1?0:i.length-1;return!s||r===void 0?i[s]:r}const TD=40;class TT{constructor({autoplay:t=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:s=0,repeatType:a="loop",...o}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=pn.now(),this.options={autoplay:t,delay:n,type:r,repeat:i,repeatDelay:s,repeatType:a,...o},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>TD?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&wD(),this._resolved}onKeyframesResolved(t,n){this.resolvedAt=pn.now(),this.hasAttemptedResolve=!0;const{name:r,type:i,velocity:s,delay:a,onComplete:o,onUpdate:l,isGenerator:u}=this.options;if(!u&&!CD(t,r,i,s))if(a)this.options.duration=0;else{l&&l(yl(t,this.options,n)),o&&o(),this.resolveFinishedPromise();return}const c=this.initPlayback(t,n);c!==!1&&(this._resolved={keyframes:t,finalKeyframe:n,...c},this.onPostResolved())}onPostResolved(){}then(t,n){return this.currentFinishedPromise.then(t,n)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(t=>{this.resolveFinishedPromise=t})}}const Ne=(e,t,n)=>e+(t-e)*n;function Pu(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function jD({hue:e,saturation:t,lightness:n,alpha:r}){e/=360,t/=100,n/=100;let i=0,s=0,a=0;if(!t)i=s=a=n;else{const o=n<.5?n*(1+t):n+t-n*t,l=2*n-o;i=Pu(l,o,e+1/3),s=Pu(l,o,e),a=Pu(l,o,e-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(a*255),alpha:r}}function Uo(e,t){return n=>n>0?t:e}const Ru=(e,t,n)=>{const r=e*e,i=n*(t*t-r)+r;return i<0?0:Math.sqrt(i)},ND=[Dm,Nr,xi],MD=e=>ND.find(t=>t.test(e));function W0(e){const t=MD(e);if(!t)return!1;let n=t.parse(e);return t===xi&&(n=jD(n)),n}const Y0=(e,t)=>{const n=W0(e),r=W0(t);if(!n||!r)return Uo(e,t);const i={...n};return s=>(i.red=Ru(n.red,r.red,s),i.green=Ru(n.green,r.green,s),i.blue=Ru(n.blue,r.blue,s),i.alpha=Ne(n.alpha,r.alpha,s),Nr.transform(i))},PD=(e,t)=>n=>t(e(n)),xa=(...e)=>e.reduce(PD),Fm=new Set(["none","hidden"]);function RD(e,t){return Fm.has(e)?n=>n<=0?e:t:n=>n>=1?t:e}function AD(e,t){return n=>Ne(e,t,n)}function kg(e){return typeof e=="number"?AD:typeof e=="string"?ig(e)?Uo:at.test(e)?Y0:LD:Array.isArray(e)?jT:typeof e=="object"?at.test(e)?Y0:ID:Uo}function jT(e,t){const n=[...e],r=n.length,i=e.map((s,a)=>kg(s)(s,t[a]));return s=>{for(let a=0;a<r;a++)n[a]=i[a](s);return n}}function ID(e,t){const n={...e,...t},r={};for(const i in n)e[i]!==void 0&&t[i]!==void 0&&(r[i]=kg(e[i])(e[i],t[i]));return i=>{for(const s in r)n[s]=r[s](i);return n}}function DD(e,t){var n;const r=[],i={color:0,var:0,number:0};for(let s=0;s<t.values.length;s++){const a=t.types[s],o=e.indexes[a][i[a]],l=(n=e.values[o])!==null&&n!==void 0?n:0;r[s]=l,i[a]++}return r}const LD=(e,t)=>{const n=fr.createTransformer(t),r=ca(e),i=ca(t);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?Fm.has(e)&&!i.values.length||Fm.has(t)&&!r.values.length?RD(e,t):xa(jT(DD(r,i),i.values),n):Uo(e,t)};function NT(e,t,n){return typeof e=="number"&&typeof t=="number"&&typeof n=="number"?Ne(e,t,n):kg(e)(e,t)}const OD=5;function MT(e,t,n){const r=Math.max(t-OD,0);return rT(n-e(r),t-r)}const Ie={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Au=.001;function qD({duration:e=Ie.duration,bounce:t=Ie.bounce,velocity:n=Ie.velocity,mass:r=Ie.mass}){let i,s,a=1-t;a=In(Ie.minDamping,Ie.maxDamping,a),e=In(Ie.minDuration,Ie.maxDuration,Nn(e)),a<1?(i=u=>{const c=u*a,d=c*e,h=c-n,m=Vm(u,a),g=Math.exp(-d);return Au-h/m*g},s=u=>{const d=u*a*e,h=d*n+n,m=Math.pow(a,2)*Math.pow(u,2)*e,g=Math.exp(-d),p=Vm(Math.pow(u,2),a);return(-i(u)+Au>0?-1:1)*((h-m)*g)/p}):(i=u=>{const c=Math.exp(-u*e),d=(u-n)*e+1;return-Au+c*d},s=u=>{const c=Math.exp(-u*e),d=(n-u)*(e*e);return c*d});const o=5/e,l=VD(i,s,o);if(e=jn(e),isNaN(l))return{stiffness:Ie.stiffness,damping:Ie.damping,duration:e};{const u=Math.pow(l,2)*r;return{stiffness:u,damping:a*2*Math.sqrt(r*u),duration:e}}}const FD=12;function VD(e,t,n){let r=n;for(let i=1;i<FD;i++)r=r-e(r)/t(r);return r}function Vm(e,t){return e*Math.sqrt(1-t*t)}const BD=["duration","bounce"],$D=["stiffness","damping","mass"];function Q0(e,t){return t.some(n=>e[n]!==void 0)}function UD(e){let t={velocity:Ie.velocity,stiffness:Ie.stiffness,damping:Ie.damping,mass:Ie.mass,isResolvedFromDuration:!1,...e};if(!Q0(e,$D)&&Q0(e,BD))if(e.visualDuration){const n=e.visualDuration,r=2*Math.PI/(n*1.2),i=r*r,s=2*In(.05,1,1-(e.bounce||0))*Math.sqrt(i);t={...t,mass:Ie.mass,stiffness:i,damping:s}}else{const n=qD(e);t={...t,...n,mass:Ie.mass},t.isResolvedFromDuration=!0}return t}function PT(e=Ie.visualDuration,t=Ie.bounce){const n=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:r,restDelta:i}=n;const s=n.keyframes[0],a=n.keyframes[n.keyframes.length-1],o={done:!1,value:s},{stiffness:l,damping:u,mass:c,duration:d,velocity:h,isResolvedFromDuration:m}=UD({...n,velocity:-Nn(n.velocity||0)}),g=h||0,p=u/(2*Math.sqrt(l*c)),w=a-s,v=Nn(Math.sqrt(l/c)),y=Math.abs(w)<5;r||(r=y?Ie.restSpeed.granular:Ie.restSpeed.default),i||(i=y?Ie.restDelta.granular:Ie.restDelta.default);let x;if(p<1){const k=Vm(v,p);x=E=>{const j=Math.exp(-p*v*E);return a-j*((g+p*v*w)/k*Math.sin(k*E)+w*Math.cos(k*E))}}else if(p===1)x=k=>a-Math.exp(-v*k)*(w+(g+v*w)*k);else{const k=v*Math.sqrt(p*p-1);x=E=>{const j=Math.exp(-p*v*E),T=Math.min(k*E,300);return a-j*((g+p*v*w)*Math.sinh(T)+k*w*Math.cosh(T))/k}}const S={calculatedDuration:m&&d||null,next:k=>{const E=x(k);if(m)o.done=k>=d;else{let j=0;p<1&&(j=k===0?jn(g):MT(x,k,E));const T=Math.abs(j)<=r,M=Math.abs(a-E)<=i;o.done=T&&M}return o.value=o.done?a:E,o},toString:()=>{const k=Math.min(YE(S),Rm),E=QE(j=>S.next(k*j).value,k,30);return k+"ms "+E}};return S}function J0({keyframes:e,velocity:t=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:a,min:o,max:l,restDelta:u=.5,restSpeed:c}){const d=e[0],h={done:!1,value:d},m=T=>o!==void 0&&T<o||l!==void 0&&T>l,g=T=>o===void 0?l:l===void 0||Math.abs(o-T)<Math.abs(l-T)?o:l;let p=n*t;const w=d+p,v=a===void 0?w:a(w);v!==w&&(p=v-d);const y=T=>-p*Math.exp(-T/r),x=T=>v+y(T),S=T=>{const M=y(T),D=x(T);h.done=Math.abs(M)<=u,h.value=h.done?v:D};let k,E;const j=T=>{m(h.value)&&(k=T,E=PT({keyframes:[h.value,g(h.value)],velocity:MT(x,T,h.value),damping:i,stiffness:s,restDelta:u,restSpeed:c}))};return j(0),{calculatedDuration:null,next:T=>{let M=!1;return!E&&k===void 0&&(M=!0,S(T),j(T)),k!==void 0&&T>=k?E.next(T-k):(!M&&S(T),h)}}}const zD=ya(.42,0,1,1),GD=ya(0,0,.58,1),RT=ya(.42,0,.58,1),HD=e=>Array.isArray(e)&&typeof e[0]!="number",KD={linear:jt,easeIn:zD,easeInOut:RT,easeOut:GD,circIn:xg,circInOut:fT,circOut:dT,backIn:yg,backInOut:uT,backOut:lT,anticipate:cT},X0=e=>{if(hg(e)){NE(e.length===4);const[t,n,r,i]=e;return ya(t,n,r,i)}else if(typeof e=="string")return KD[e];return e};function WD(e,t,n){const r=[],i=n||NT,s=e.length-1;for(let a=0;a<s;a++){let o=i(e[a],e[a+1]);if(t){const l=Array.isArray(t)?t[a]||jt:t;o=xa(l,o)}r.push(o)}return r}function YD(e,t,{clamp:n=!0,ease:r,mixer:i}={}){const s=e.length;if(NE(s===t.length),s===1)return()=>t[0];if(s===2&&t[0]===t[1])return()=>t[1];const a=e[0]===e[1];e[0]>e[s-1]&&(e=[...e].reverse(),t=[...t].reverse());const o=WD(t,r,i),l=o.length,u=c=>{if(a&&c<e[0])return t[0];let d=0;if(l>1)for(;d<e.length-2&&!(c<e[d+1]);d++);const h=Li(e[d],e[d+1],c);return o[d](h)};return n?c=>u(In(e[0],e[s-1],c)):u}function QD(e,t){const n=e[e.length-1];for(let r=1;r<=t;r++){const i=Li(0,t,r);e.push(Ne(n,1,i))}}function JD(e){const t=[0];return QD(t,e.length-1),t}function XD(e,t){return e.map(n=>n*t)}function ZD(e,t){return e.map(()=>t||RT).splice(0,e.length-1)}function zo({duration:e=300,keyframes:t,times:n,ease:r="easeInOut"}){const i=HD(r)?r.map(X0):X0(r),s={done:!1,value:t[0]},a=XD(n&&n.length===t.length?n:JD(t),e),o=YD(a,t,{ease:Array.isArray(i)?i:ZD(t,i)});return{calculatedDuration:e,next:l=>(s.value=o(l),s.done=l>=e,s)}}const eL=e=>{const t=({timestamp:n})=>e(n);return{start:()=>ke.update(t,!0),stop:()=>dr(t),now:()=>Xe.isProcessing?Xe.timestamp:pn.now()}},tL={decay:J0,inertia:J0,tween:zo,keyframes:zo,spring:PT},nL=e=>e/100;class Cg extends TT{constructor(t){super(t),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:l}=this.options;l&&l()};const{name:n,motionValue:r,element:i,keyframes:s}=this.options,a=(i==null?void 0:i.KeyframeResolver)||_g,o=(l,u)=>this.onKeyframesResolved(l,u);this.resolver=new a(s,o,n,r,i),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(t){const{type:n="keyframes",repeat:r=0,repeatDelay:i=0,repeatType:s,velocity:a=0}=this.options,o=fg(n)?n:tL[n]||zo;let l,u;o!==zo&&typeof t[0]!="number"&&(l=xa(nL,NT(t[0],t[1])),t=[0,100]);const c=o({...this.options,keyframes:t});s==="mirror"&&(u=o({...this.options,keyframes:[...t].reverse(),velocity:-a})),c.calculatedDuration===null&&(c.calculatedDuration=YE(c));const{calculatedDuration:d}=c,h=d+i,m=h*(r+1)-i;return{generator:c,mirroredGenerator:u,mapPercentToKeyframes:l,calculatedDuration:d,resolvedDuration:h,totalDuration:m}}onPostResolved(){const{autoplay:t=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!t?this.pause():this.state=this.pendingPlayState}tick(t,n=!1){const{resolved:r}=this;if(!r){const{keyframes:T}=this.options;return{done:!0,value:T[T.length-1]}}const{finalKeyframe:i,generator:s,mirroredGenerator:a,mapPercentToKeyframes:o,keyframes:l,calculatedDuration:u,totalDuration:c,resolvedDuration:d}=r;if(this.startTime===null)return s.next(0);const{delay:h,repeat:m,repeatType:g,repeatDelay:p,onUpdate:w}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-c/this.speed,this.startTime)),n?this.currentTime=t:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(t-this.startTime)*this.speed;const v=this.currentTime-h*(this.speed>=0?1:-1),y=this.speed>=0?v<0:v>c;this.currentTime=Math.max(v,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=c);let x=this.currentTime,S=s;if(m){const T=Math.min(this.currentTime,c)/d;let M=Math.floor(T),D=T%1;!D&&T>=1&&(D=1),D===1&&M--,M=Math.min(M,m+1),!!(M%2)&&(g==="reverse"?(D=1-D,p&&(D-=p/d)):g==="mirror"&&(S=a)),x=In(0,1,D)*d}const k=y?{done:!1,value:l[0]}:S.next(x);o&&(k.value=o(k.value));let{done:E}=k;!y&&u!==null&&(E=this.speed>=0?this.currentTime>=c:this.currentTime<=0);const j=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&E);return j&&i!==void 0&&(k.value=yl(l,this.options,i)),w&&w(k.value),j&&this.finish(),k}get duration(){const{resolved:t}=this;return t?Nn(t.calculatedDuration):0}get time(){return Nn(this.currentTime)}set time(t){t=jn(t),this.currentTime=t,this.holdTime!==null||this.speed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.speed)}get speed(){return this.playbackSpeed}set speed(t){const n=this.playbackSpeed!==t;this.playbackSpeed=t,n&&(this.time=Nn(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:t=eL,onPlay:n,startTime:r}=this.options;this.driver||(this.driver=t(s=>this.tick(s))),n&&n();const i=this.driver.now();this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=i):this.startTime=r??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var t;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(t=this.currentTime)!==null&&t!==void 0?t:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:t}=this.options;t&&t()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}}const rL=new Set(["opacity","clipPath","filter","transform"]);function iL(e,t,n,{delay:r=0,duration:i=300,repeat:s=0,repeatType:a="loop",ease:o="easeInOut",times:l}={}){const u={[t]:n};l&&(u.offset=l);const c=XE(o,i);return Array.isArray(c)&&(u.easing=c),e.animate(u,{delay:r,duration:i,easing:Array.isArray(c)?"linear":c,fill:"both",iterations:s+1,direction:a==="reverse"?"alternate":"normal"})}const sL=Jv(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),Go=10,aL=2e4;function oL(e){return fg(e.type)||e.type==="spring"||!JE(e.ease)}function lL(e,t){const n=new Cg({...t,keyframes:e,repeat:0,delay:0,isGenerator:!0});let r={done:!1,value:e[0]};const i=[];let s=0;for(;!r.done&&s<aL;)r=n.sample(s),i.push(r.value),s+=Go;return{times:void 0,keyframes:i,duration:s-Go,ease:"linear"}}const AT={anticipate:cT,backInOut:uT,circInOut:fT};function uL(e){return e in AT}class Z0 extends TT{constructor(t){super(t);const{name:n,motionValue:r,element:i,keyframes:s}=this.options;this.resolver=new ET(s,(a,o)=>this.onKeyframesResolved(a,o),n,r,i),this.resolver.scheduleResolve()}initPlayback(t,n){let{duration:r=300,times:i,ease:s,type:a,motionValue:o,name:l,startTime:u}=this.options;if(!o.owner||!o.owner.current)return!1;if(typeof s=="string"&&$o()&&uL(s)&&(s=AT[s]),oL(this.options)){const{onComplete:d,onUpdate:h,motionValue:m,element:g,...p}=this.options,w=lL(t,p);t=w.keyframes,t.length===1&&(t[1]=t[0]),r=w.duration,i=w.times,s=w.ease,a="keyframes"}const c=iL(o.owner.current,l,t,{...this.options,duration:r,times:i,ease:s});return c.startTime=u??this.calcStartTime(),this.pendingTimeline?(O0(c,this.pendingTimeline),this.pendingTimeline=void 0):c.onfinish=()=>{const{onComplete:d}=this.options;o.set(yl(t,this.options,n)),d&&d(),this.cancel(),this.resolveFinishedPromise()},{animation:c,duration:r,times:i,type:a,ease:s,keyframes:t}}get duration(){const{resolved:t}=this;if(!t)return 0;const{duration:n}=t;return Nn(n)}get time(){const{resolved:t}=this;if(!t)return 0;const{animation:n}=t;return Nn(n.currentTime||0)}set time(t){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.currentTime=jn(t)}get speed(){const{resolved:t}=this;if(!t)return 1;const{animation:n}=t;return n.playbackRate}set speed(t){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.playbackRate=t}get state(){const{resolved:t}=this;if(!t)return"idle";const{animation:n}=t;return n.playState}get startTime(){const{resolved:t}=this;if(!t)return null;const{animation:n}=t;return n.startTime}attachTimeline(t){if(!this._resolved)this.pendingTimeline=t;else{const{resolved:n}=this;if(!n)return jt;const{animation:r}=n;O0(r,t)}return jt}play(){if(this.isStopped)return;const{resolved:t}=this;if(!t)return;const{animation:n}=t;n.playState==="finished"&&this.updateFinishedPromise(),n.play()}pause(){const{resolved:t}=this;if(!t)return;const{animation:n}=t;n.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:t}=this;if(!t)return;const{animation:n,keyframes:r,duration:i,type:s,ease:a,times:o}=t;if(n.playState==="idle"||n.playState==="finished")return;if(this.time){const{motionValue:u,onUpdate:c,onComplete:d,element:h,...m}=this.options,g=new Cg({...m,keyframes:r,duration:i,type:s,ease:a,times:o,isGenerator:!0}),p=jn(this.time);u.setWithVelocity(g.sample(p-Go).value,g.sample(p).value,Go)}const{onStop:l}=this.options;l&&l(),this.cancel()}complete(){const{resolved:t}=this;t&&t.animation.finish()}cancel(){const{resolved:t}=this;t&&t.animation.cancel()}static supports(t){const{motionValue:n,name:r,repeatDelay:i,repeatType:s,damping:a,type:o}=t;if(!n||!n.owner||!(n.owner.current instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:u}=n.owner.getProps();return sL()&&r&&rL.has(r)&&!l&&!u&&!i&&s!=="mirror"&&a!==0&&o!=="inertia"}}const cL={type:"spring",stiffness:500,damping:25,restSpeed:10},dL=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),fL={type:"keyframes",duration:.8},hL={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},pL=(e,{keyframes:t})=>t.length>2?fL:$r.has(e)?e.startsWith("scale")?dL(t[1]):cL:hL;function mL({when:e,delay:t,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:s,repeatType:a,repeatDelay:o,from:l,elapsed:u,...c}){return!!Object.keys(c).length}const Eg=(e,t,n,r={},i,s)=>a=>{const o=dg(r,e)||{},l=o.delay||r.delay||0;let{elapsed:u=0}=r;u=u-jn(l);let c={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:t.getVelocity(),...o,delay:-u,onUpdate:h=>{t.set(h),o.onUpdate&&o.onUpdate(h)},onComplete:()=>{a(),o.onComplete&&o.onComplete()},name:e,motionValue:t,element:s?void 0:i};mL(o)||(c={...c,...pL(e,c)}),c.duration&&(c.duration=jn(c.duration)),c.repeatDelay&&(c.repeatDelay=jn(c.repeatDelay)),c.from!==void 0&&(c.keyframes[0]=c.from);let d=!1;if((c.type===!1||c.duration===0&&!c.repeatDelay)&&(c.duration=0,c.delay===0&&(d=!0)),d&&!s&&t.get()!==void 0){const h=yl(c.keyframes,o);if(h!==void 0)return ke.update(()=>{c.onUpdate(h),c.onComplete()}),new II([])}return!s&&Z0.supports(c)?new Z0(c):new Cg(c)};function vL({protectedKeys:e,needsAnimating:t},n){const r=e.hasOwnProperty(n)&&t[n]!==!0;return t[n]=!1,r}function IT(e,t,{delay:n=0,transitionOverride:r,type:i}={}){var s;let{transition:a=e.getDefaultTransition(),transitionEnd:o,...l}=t;r&&(a=r);const u=[],c=i&&e.animationState&&e.animationState.getState()[i];for(const d in l){const h=e.getValue(d,(s=e.latestValues[d])!==null&&s!==void 0?s:null),m=l[d];if(m===void 0||c&&vL(c,d))continue;const g={delay:n,...dg(a||{},d)};let p=!1;if(window.MotionHandoffAnimation){const v=iT(e);if(v){const y=window.MotionHandoffAnimation(v,d,ke);y!==null&&(g.startTime=y,p=!0)}}Im(e,d),h.start(Eg(d,h,m,e.shouldReduceMotion&&nT.has(d)?{type:!1}:g,e,p));const w=h.animation;w&&u.push(w)}return o&&Promise.all(u).then(()=>{ke.update(()=>{o&&WI(e,o)})}),u}function Bm(e,t,n={}){var r;const i=gl(e,t,n.type==="exit"?(r=e.presenceContext)===null||r===void 0?void 0:r.custom:void 0);let{transition:s=e.getDefaultTransition()||{}}=i||{};n.transitionOverride&&(s=n.transitionOverride);const a=i?()=>Promise.all(IT(e,i,n)):()=>Promise.resolve(),o=e.variantChildren&&e.variantChildren.size?(u=0)=>{const{delayChildren:c=0,staggerChildren:d,staggerDirection:h}=s;return gL(e,t,c+u,d,h,n)}:()=>Promise.resolve(),{when:l}=s;if(l){const[u,c]=l==="beforeChildren"?[a,o]:[o,a];return u().then(()=>c())}else return Promise.all([a(),o(n.delay)])}function gL(e,t,n=0,r=0,i=1,s){const a=[],o=(e.variantChildren.size-1)*r,l=i===1?(u=0)=>u*r:(u=0)=>o-u*r;return Array.from(e.variantChildren).sort(yL).forEach((u,c)=>{u.notify("AnimationStart",t),a.push(Bm(u,t,{...s,delay:n+l(c)}).then(()=>u.notify("AnimationComplete",t)))}),Promise.all(a)}function yL(e,t){return e.sortNodePosition(t)}function xL(e,t,n={}){e.notify("AnimationStart",t);let r;if(Array.isArray(t)){const i=t.map(s=>Bm(e,s,n));r=Promise.all(i)}else if(typeof t=="string")r=Bm(e,t,n);else{const i=typeof t=="function"?gl(e,t,n.custom):t;r=Promise.all(IT(e,i,n))}return r.then(()=>{e.notify("AnimationComplete",t)})}const wL=Zv.length;function DT(e){if(!e)return;if(!e.isControllingVariants){const n=e.parent?DT(e.parent)||{}:{};return e.props.initial!==void 0&&(n.initial=e.props.initial),n}const t={};for(let n=0;n<wL;n++){const r=Zv[n],i=e.props[r];(oa(i)||i===!1)&&(t[r]=i)}return t}const bL=[...Xv].reverse(),SL=Xv.length;function _L(e){return t=>Promise.all(t.map(({animation:n,options:r})=>xL(e,n,r)))}function kL(e){let t=_L(e),n=ex(),r=!0;const i=l=>(u,c)=>{var d;const h=gl(e,c,l==="exit"?(d=e.presenceContext)===null||d===void 0?void 0:d.custom:void 0);if(h){const{transition:m,transitionEnd:g,...p}=h;u={...u,...p,...g}}return u};function s(l){t=l(e)}function a(l){const{props:u}=e,c=DT(e.parent)||{},d=[],h=new Set;let m={},g=1/0;for(let w=0;w<SL;w++){const v=bL[w],y=n[v],x=u[v]!==void 0?u[v]:c[v],S=oa(x),k=v===l?y.isActive:null;k===!1&&(g=w);let E=x===c[v]&&x!==u[v]&&S;if(E&&r&&e.manuallyAnimateOnMount&&(E=!1),y.protectedKeys={...m},!y.isActive&&k===null||!x&&!y.prevProp||ml(x)||typeof x=="boolean")continue;const j=CL(y.prevProp,x);let T=j||v===l&&y.isActive&&!E&&S||w>g&&S,M=!1;const D=Array.isArray(x)?x:[x];let R=D.reduce(i(v),{});k===!1&&(R={});const{prevResolvedValues:H={}}=y,Y={...H,...R},pe=se=>{T=!0,h.has(se)&&(M=!0,h.delete(se)),y.needsAnimating[se]=!0;const A=e.getValue(se);A&&(A.liveStyle=!1)};for(const se in Y){const A=R[se],I=H[se];if(m.hasOwnProperty(se))continue;let z=!1;Pm(A)&&Pm(I)?z=!WE(A,I):z=A!==I,z?A!=null?pe(se):h.add(se):A!==void 0&&h.has(se)?pe(se):y.protectedKeys[se]=!0}y.prevProp=x,y.prevResolvedValues=R,y.isActive&&(m={...m,...R}),r&&e.blockInitialAnimation&&(T=!1),T&&(!(E&&j)||M)&&d.push(...D.map(se=>({animation:se,options:{type:v}})))}if(h.size){const w={};h.forEach(v=>{const y=e.getBaseTarget(v),x=e.getValue(v);x&&(x.liveStyle=!0),w[v]=y??null}),d.push({animation:w})}let p=!!d.length;return r&&(u.initial===!1||u.initial===u.animate)&&!e.manuallyAnimateOnMount&&(p=!1),r=!1,p?t(d):Promise.resolve()}function o(l,u){var c;if(n[l].isActive===u)return Promise.resolve();(c=e.variantChildren)===null||c===void 0||c.forEach(h=>{var m;return(m=h.animationState)===null||m===void 0?void 0:m.setActive(l,u)}),n[l].isActive=u;const d=a(l);for(const h in n)n[h].protectedKeys={};return d}return{animateChanges:a,setActive:o,setAnimateFunction:s,getState:()=>n,reset:()=>{n=ex(),r=!0}}}function CL(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!WE(t,e):!1}function br(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function ex(){return{animate:br(!0),whileInView:br(),whileHover:br(),whileTap:br(),whileDrag:br(),whileFocus:br(),exit:br()}}class gr{constructor(t){this.isMounted=!1,this.node=t}update(){}}class EL extends gr{constructor(t){super(t),t.animationState||(t.animationState=kL(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();ml(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:n}=this.node.prevProps||{};t!==n&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)===null||t===void 0||t.call(this)}}let TL=0;class jL extends gr{constructor(){super(...arguments),this.id=TL++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===r)return;const i=this.node.animationState.setActive("exit",!t);n&&!t&&i.then(()=>n(this.id))}mount(){const{register:t}=this.node.presenceContext||{};t&&(this.unmount=t(this.id))}unmount(){}}const NL={animation:{Feature:EL},exit:{Feature:jL}};function da(e,t,n,r={passive:!0}){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n)}function wa(e){return{point:{x:e.pageX,y:e.pageY}}}const ML=e=>t=>pg(t)&&e(t,wa(t));function Vs(e,t,n,r){return da(e,t,ML(n),r)}const tx=(e,t)=>Math.abs(e-t);function PL(e,t){const n=tx(e.x,t.x),r=tx(e.y,t.y);return Math.sqrt(n**2+r**2)}class LT{constructor(t,n,{transformPagePoint:r,contextWindow:i,dragSnapToOrigin:s=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const d=Du(this.lastMoveEventInfo,this.history),h=this.startEvent!==null,m=PL(d.offset,{x:0,y:0})>=3;if(!h&&!m)return;const{point:g}=d,{timestamp:p}=Xe;this.history.push({...g,timestamp:p});const{onStart:w,onMove:v}=this.handlers;h||(w&&w(this.lastMoveEvent,d),this.startEvent=this.lastMoveEvent),v&&v(this.lastMoveEvent,d)},this.handlePointerMove=(d,h)=>{this.lastMoveEvent=d,this.lastMoveEventInfo=Iu(h,this.transformPagePoint),ke.update(this.updatePoint,!0)},this.handlePointerUp=(d,h)=>{this.end();const{onEnd:m,onSessionEnd:g,resumeAnimation:p}=this.handlers;if(this.dragSnapToOrigin&&p&&p(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const w=Du(d.type==="pointercancel"?this.lastMoveEventInfo:Iu(h,this.transformPagePoint),this.history);this.startEvent&&m&&m(d,w),g&&g(d,w)},!pg(t))return;this.dragSnapToOrigin=s,this.handlers=n,this.transformPagePoint=r,this.contextWindow=i||window;const a=wa(t),o=Iu(a,this.transformPagePoint),{point:l}=o,{timestamp:u}=Xe;this.history=[{...l,timestamp:u}];const{onSessionStart:c}=n;c&&c(t,Du(o,this.history)),this.removeListeners=xa(Vs(this.contextWindow,"pointermove",this.handlePointerMove),Vs(this.contextWindow,"pointerup",this.handlePointerUp),Vs(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),dr(this.updatePoint)}}function Iu(e,t){return t?{point:t(e.point)}:e}function nx(e,t){return{x:e.x-t.x,y:e.y-t.y}}function Du({point:e},t){return{point:e,delta:nx(e,OT(t)),offset:nx(e,RL(t)),velocity:AL(t,.1)}}function RL(e){return e[0]}function OT(e){return e[e.length-1]}function AL(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,r=null;const i=OT(e);for(;n>=0&&(r=e[n],!(i.timestamp-r.timestamp>jn(t)));)n--;if(!r)return{x:0,y:0};const s=Nn(i.timestamp-r.timestamp);if(s===0)return{x:0,y:0};const a={x:(i.x-r.x)/s,y:(i.y-r.y)/s};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}const qT=1e-4,IL=1-qT,DL=1+qT,FT=.01,LL=0-FT,OL=0+FT;function Mt(e){return e.max-e.min}function qL(e,t,n){return Math.abs(e-t)<=n}function rx(e,t,n,r=.5){e.origin=r,e.originPoint=Ne(t.min,t.max,e.origin),e.scale=Mt(n)/Mt(t),e.translate=Ne(n.min,n.max,e.origin)-e.originPoint,(e.scale>=IL&&e.scale<=DL||isNaN(e.scale))&&(e.scale=1),(e.translate>=LL&&e.translate<=OL||isNaN(e.translate))&&(e.translate=0)}function Bs(e,t,n,r){rx(e.x,t.x,n.x,r?r.originX:void 0),rx(e.y,t.y,n.y,r?r.originY:void 0)}function ix(e,t,n){e.min=n.min+t.min,e.max=e.min+Mt(t)}function FL(e,t,n){ix(e.x,t.x,n.x),ix(e.y,t.y,n.y)}function sx(e,t,n){e.min=t.min-n.min,e.max=e.min+Mt(t)}function $s(e,t,n){sx(e.x,t.x,n.x),sx(e.y,t.y,n.y)}function VL(e,{min:t,max:n},r){return t!==void 0&&e<t?e=r?Ne(t,e,r.min):Math.max(e,t):n!==void 0&&e>n&&(e=r?Ne(n,e,r.max):Math.min(e,n)),e}function ax(e,t,n){return{min:t!==void 0?e.min+t:void 0,max:n!==void 0?e.max+n-(e.max-e.min):void 0}}function BL(e,{top:t,left:n,bottom:r,right:i}){return{x:ax(e.x,n,i),y:ax(e.y,t,r)}}function ox(e,t){let n=t.min-e.min,r=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,r]=[r,n]),{min:n,max:r}}function $L(e,t){return{x:ox(e.x,t.x),y:ox(e.y,t.y)}}function UL(e,t){let n=.5;const r=Mt(e),i=Mt(t);return i>r?n=Li(t.min,t.max-r,e.min):r>i&&(n=Li(e.min,e.max-i,t.min)),In(0,1,n)}function zL(e,t){const n={};return t.min!==void 0&&(n.min=t.min-e.min),t.max!==void 0&&(n.max=t.max-e.min),n}const $m=.35;function GL(e=$m){return e===!1?e=0:e===!0&&(e=$m),{x:lx(e,"left","right"),y:lx(e,"top","bottom")}}function lx(e,t,n){return{min:ux(e,t),max:ux(e,n)}}function ux(e,t){return typeof e=="number"?e:e[t]||0}const cx=()=>({translate:0,scale:1,origin:0,originPoint:0}),wi=()=>({x:cx(),y:cx()}),dx=()=>({min:0,max:0}),Fe=()=>({x:dx(),y:dx()});function Ot(e){return[e("x"),e("y")]}function VT({top:e,left:t,right:n,bottom:r}){return{x:{min:t,max:n},y:{min:e,max:r}}}function HL({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function KL(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),r=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function Lu(e){return e===void 0||e===1}function Um({scale:e,scaleX:t,scaleY:n}){return!Lu(e)||!Lu(t)||!Lu(n)}function kr(e){return Um(e)||BT(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function BT(e){return fx(e.x)||fx(e.y)}function fx(e){return e&&e!=="0%"}function Ho(e,t,n){const r=e-n,i=t*r;return n+i}function hx(e,t,n,r,i){return i!==void 0&&(e=Ho(e,i,r)),Ho(e,n,r)+t}function zm(e,t=0,n=1,r,i){e.min=hx(e.min,t,n,r,i),e.max=hx(e.max,t,n,r,i)}function $T(e,{x:t,y:n}){zm(e.x,t.translate,t.scale,t.originPoint),zm(e.y,n.translate,n.scale,n.originPoint)}const px=.999999999999,mx=1.0000000000001;function WL(e,t,n,r=!1){const i=n.length;if(!i)return;t.x=t.y=1;let s,a;for(let o=0;o<i;o++){s=n[o],a=s.projectionDelta;const{visualElement:l}=s.options;l&&l.props.style&&l.props.style.display==="contents"||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&Si(e,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),a&&(t.x*=a.x.scale,t.y*=a.y.scale,$T(e,a)),r&&kr(s.latestValues)&&Si(e,s.latestValues))}t.x<mx&&t.x>px&&(t.x=1),t.y<mx&&t.y>px&&(t.y=1)}function bi(e,t){e.min=e.min+t,e.max=e.max+t}function vx(e,t,n,r,i=.5){const s=Ne(e.min,e.max,i);zm(e,t,n,s,r)}function Si(e,t){vx(e.x,t.x,t.scaleX,t.scale,t.originX),vx(e.y,t.y,t.scaleY,t.scale,t.originY)}function UT(e,t){return VT(KL(e.getBoundingClientRect(),t))}function YL(e,t,n){const r=UT(e,n),{scroll:i}=t;return i&&(bi(r.x,i.offset.x),bi(r.y,i.offset.y)),r}const zT=({current:e})=>e?e.ownerDocument.defaultView:null,QL=new WeakMap;class JL{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Fe(),this.visualElement=t}start(t,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const i=c=>{const{dragSnapToOrigin:d}=this.getProps();d?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(wa(c).point)},s=(c,d)=>{const{drag:h,dragPropagation:m,onDragStart:g}=this.getProps();if(h&&!m&&(this.openDragLock&&this.openDragLock(),this.openDragLock=UI(h),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Ot(w=>{let v=this.getAxisMotionValue(w).get()||0;if(hn.test(v)){const{projection:y}=this.visualElement;if(y&&y.layout){const x=y.layout.layoutBox[w];x&&(v=Mt(x)*(parseFloat(v)/100))}}this.originPoint[w]=v}),g&&ke.postRender(()=>g(c,d)),Im(this.visualElement,"transform");const{animationState:p}=this.visualElement;p&&p.setActive("whileDrag",!0)},a=(c,d)=>{const{dragPropagation:h,dragDirectionLock:m,onDirectionLock:g,onDrag:p}=this.getProps();if(!h&&!this.openDragLock)return;const{offset:w}=d;if(m&&this.currentDirection===null){this.currentDirection=XL(w),this.currentDirection!==null&&g&&g(this.currentDirection);return}this.updateAxis("x",d.point,w),this.updateAxis("y",d.point,w),this.visualElement.render(),p&&p(c,d)},o=(c,d)=>this.stop(c,d),l=()=>Ot(c=>{var d;return this.getAnimationState(c)==="paused"&&((d=this.getAxisMotionValue(c).animation)===null||d===void 0?void 0:d.play())}),{dragSnapToOrigin:u}=this.getProps();this.panSession=new LT(t,{onSessionStart:i,onStart:s,onMove:a,onSessionEnd:o,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,contextWindow:zT(this.visualElement)})}stop(t,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:i}=n;this.startAnimation(i);const{onDragEnd:s}=this.getProps();s&&ke.postRender(()=>s(t,n))}cancel(){this.isDragging=!1;const{projection:t,animationState:n}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(t,n,r){const{drag:i}=this.getProps();if(!r||!Qa(t,i,this.currentDirection))return;const s=this.getAxisMotionValue(t);let a=this.originPoint[t]+r[t];this.constraints&&this.constraints[t]&&(a=VL(a,this.constraints[t],this.elastic[t])),s.set(a)}resolveConstraints(){var t;const{dragConstraints:n,dragElastic:r}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(t=this.visualElement.projection)===null||t===void 0?void 0:t.layout,s=this.constraints;n&&yi(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&i?this.constraints=BL(i.layoutBox,n):this.constraints=!1,this.elastic=GL(r),s!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&Ot(a=>{this.constraints!==!1&&this.getAxisMotionValue(a)&&(this.constraints[a]=zL(i.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:n}=this.getProps();if(!t||!yi(t))return!1;const r=t.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=YL(r,i.root,this.visualElement.getTransformPagePoint());let a=$L(i.layout.layoutBox,s);if(n){const o=n(HL(a));this.hasMutatedConstraints=!!o,o&&(a=VT(o))}return a}startAnimation(t){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:s,dragSnapToOrigin:a,onDragTransitionEnd:o}=this.getProps(),l=this.constraints||{},u=Ot(c=>{if(!Qa(c,n,this.currentDirection))return;let d=l&&l[c]||{};a&&(d={min:0,max:0});const h=i?200:1e6,m=i?40:1e7,g={type:"inertia",velocity:r?t[c]:0,bounceStiffness:h,bounceDamping:m,timeConstant:750,restDelta:1,restSpeed:10,...s,...d};return this.startAxisValueAnimation(c,g)});return Promise.all(u).then(o)}startAxisValueAnimation(t,n){const r=this.getAxisMotionValue(t);return Im(this.visualElement,t),r.start(Eg(t,r,0,n,this.visualElement,!1))}stopAnimation(){Ot(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){Ot(t=>{var n;return(n=this.getAxisMotionValue(t).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(t){var n;return(n=this.getAxisMotionValue(t).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(t){const n=`_drag${t.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(t,(r.initial?r.initial[t]:void 0)||0)}snapToCursor(t){Ot(n=>{const{drag:r}=this.getProps();if(!Qa(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(n);if(i&&i.layout){const{min:a,max:o}=i.layout.layoutBox[n];s.set(t[n]-Ne(a,o,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!yi(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};Ot(a=>{const o=this.getAxisMotionValue(a);if(o&&this.constraints!==!1){const l=o.get();i[a]=UL({min:l,max:l},this.constraints[a])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Ot(a=>{if(!Qa(a,t,null))return;const o=this.getAxisMotionValue(a),{min:l,max:u}=this.constraints[a];o.set(Ne(l,u,i[a]))})}addListeners(){if(!this.visualElement.current)return;QL.set(this.visualElement,this);const t=this.visualElement.current,n=Vs(t,"pointerdown",l=>{const{drag:u,dragListener:c=!0}=this.getProps();u&&c&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();yi(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,s=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),ke.read(r);const a=da(window,"resize",()=>this.scalePositionWithinConstraints()),o=i.addEventListener("didUpdate",({delta:l,hasLayoutChanged:u})=>{this.isDragging&&u&&(Ot(c=>{const d=this.getAxisMotionValue(c);d&&(this.originPoint[c]+=l[c].translate,d.set(d.get()+l[c].translate))}),this.visualElement.render())});return()=>{a(),n(),s(),o&&o()}}getProps(){const t=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:a=$m,dragMomentum:o=!0}=t;return{...t,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:s,dragElastic:a,dragMomentum:o}}}function Qa(e,t,n){return(t===!0||t===e)&&(n===null||n===e)}function XL(e,t=10){let n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}class ZL extends gr{constructor(t){super(t),this.removeGroupControls=jt,this.removeListeners=jt,this.controls=new JL(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||jt}unmount(){this.removeGroupControls(),this.removeListeners()}}const gx=e=>(t,n)=>{e&&ke.postRender(()=>e(t,n))};class eO extends gr{constructor(){super(...arguments),this.removePointerDownListener=jt}onPointerDown(t){this.session=new LT(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:zT(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:gx(t),onStart:gx(n),onMove:r,onEnd:(s,a)=>{delete this.session,i&&ke.postRender(()=>i(s,a))}}}mount(){this.removePointerDownListener=Vs(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const mo={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function yx(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const vs={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(K.test(e))e=parseFloat(e);else return e;const n=yx(e,t.target.x),r=yx(e,t.target.y);return`${n}% ${r}%`}},tO={correct:(e,{treeScale:t,projectionDelta:n})=>{const r=e,i=fr.parse(e);if(i.length>5)return r;const s=fr.createTransformer(e),a=typeof i[0]!="number"?1:0,o=n.x.scale*t.x,l=n.y.scale*t.y;i[0+a]/=o,i[1+a]/=l;const u=Ne(o,l,.5);return typeof i[2+a]=="number"&&(i[2+a]/=u),typeof i[3+a]=="number"&&(i[3+a]/=u),s(i)}};class nO extends _.Component{componentDidMount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:s}=t;SI(rO),s&&(n.group&&n.group.add(s),r&&r.register&&i&&r.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),mo.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:n,visualElement:r,drag:i,isPresent:s}=this.props,a=r.projection;return a&&(a.isPresent=s,i||t.layoutDependency!==n||n===void 0?a.willUpdate():this.safeToRemove(),t.isPresent!==s&&(s?a.promote():a.relegate()||ke.postRender(()=>{const o=a.getStack();(!o||!o.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),tg.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=t;i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function GT(e){const[t,n]=OA(),r=_.useContext(TE);return f.jsx(nO,{...e,layoutGroup:r,switchLayoutGroup:_.useContext(DE),isPresent:t,safeToRemove:n})}const rO={borderRadius:{...vs,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:vs,borderTopRightRadius:vs,borderBottomLeftRadius:vs,borderBottomRightRadius:vs,boxShadow:tO};function iO(e,t,n){const r=lt(e)?e:ua(e);return r.start(Eg("",r,t,n)),r.animation}function sO(e){return e instanceof SVGElement&&e.tagName!=="svg"}const aO=(e,t)=>e.depth-t.depth;class oO{constructor(){this.children=[],this.isDirty=!1}add(t){mg(this.children,t),this.isDirty=!0}remove(t){vg(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(aO),this.isDirty=!1,this.children.forEach(t)}}function lO(e,t){const n=pn.now(),r=({timestamp:i})=>{const s=i-n;s>=t&&(dr(r),e(s-t))};return ke.read(r,!0),()=>dr(r)}const HT=["TopLeft","TopRight","BottomLeft","BottomRight"],uO=HT.length,xx=e=>typeof e=="string"?parseFloat(e):e,wx=e=>typeof e=="number"||K.test(e);function cO(e,t,n,r,i,s){i?(e.opacity=Ne(0,n.opacity!==void 0?n.opacity:1,dO(r)),e.opacityExit=Ne(t.opacity!==void 0?t.opacity:1,0,fO(r))):s&&(e.opacity=Ne(t.opacity!==void 0?t.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let a=0;a<uO;a++){const o=`border${HT[a]}Radius`;let l=bx(t,o),u=bx(n,o);if(l===void 0&&u===void 0)continue;l||(l=0),u||(u=0),l===0||u===0||wx(l)===wx(u)?(e[o]=Math.max(Ne(xx(l),xx(u),r),0),(hn.test(u)||hn.test(l))&&(e[o]+="%")):e[o]=u}(t.rotate||n.rotate)&&(e.rotate=Ne(t.rotate||0,n.rotate||0,r))}function bx(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const dO=KT(0,.5,dT),fO=KT(.5,.95,jt);function KT(e,t,n){return r=>r<e?0:r>t?1:n(Li(e,t,r))}function Sx(e,t){e.min=t.min,e.max=t.max}function Lt(e,t){Sx(e.x,t.x),Sx(e.y,t.y)}function _x(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function kx(e,t,n,r,i){return e-=t,e=Ho(e,1/n,r),i!==void 0&&(e=Ho(e,1/i,r)),e}function hO(e,t=0,n=1,r=.5,i,s=e,a=e){if(hn.test(t)&&(t=parseFloat(t),t=Ne(a.min,a.max,t/100)-a.min),typeof t!="number")return;let o=Ne(s.min,s.max,r);e===s&&(o-=t),e.min=kx(e.min,t,n,o,i),e.max=kx(e.max,t,n,o,i)}function Cx(e,t,[n,r,i],s,a){hO(e,t[n],t[r],t[i],t.scale,s,a)}const pO=["x","scaleX","originX"],mO=["y","scaleY","originY"];function Ex(e,t,n,r){Cx(e.x,t,pO,n?n.x:void 0,r?r.x:void 0),Cx(e.y,t,mO,n?n.y:void 0,r?r.y:void 0)}function Tx(e){return e.translate===0&&e.scale===1}function WT(e){return Tx(e.x)&&Tx(e.y)}function jx(e,t){return e.min===t.min&&e.max===t.max}function vO(e,t){return jx(e.x,t.x)&&jx(e.y,t.y)}function Nx(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function YT(e,t){return Nx(e.x,t.x)&&Nx(e.y,t.y)}function Mx(e){return Mt(e.x)/Mt(e.y)}function Px(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class gO{constructor(){this.members=[]}add(t){mg(this.members,t),t.scheduleRender()}remove(t){if(vg(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(t){const n=this.members.findIndex(i=>t===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const s=this.members[i];if(s.isPresent!==!1){r=s;break}}return r?(this.promote(r),!0):!1}promote(t,n){const r=this.lead;if(t!==r&&(this.prevLead=r,this.lead=t,t.show(),r)){r.instance&&r.scheduleRender(),t.scheduleRender(),t.resumeFrom=r,n&&(t.resumeFrom.preserveOpacity=!0),r.snapshot&&(t.snapshot=r.snapshot,t.snapshot.latestValues=r.animationValues||r.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:i}=t.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:n,resumingFrom:r}=t;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function yO(e,t,n){let r="";const i=e.x.translate/t.x,s=e.y.translate/t.y,a=(n==null?void 0:n.z)||0;if((i||s||a)&&(r=`translate3d(${i}px, ${s}px, ${a}px) `),(t.x!==1||t.y!==1)&&(r+=`scale(${1/t.x}, ${1/t.y}) `),n){const{transformPerspective:u,rotate:c,rotateX:d,rotateY:h,skewX:m,skewY:g}=n;u&&(r=`perspective(${u}px) ${r}`),c&&(r+=`rotate(${c}deg) `),d&&(r+=`rotateX(${d}deg) `),h&&(r+=`rotateY(${h}deg) `),m&&(r+=`skewX(${m}deg) `),g&&(r+=`skewY(${g}deg) `)}const o=e.x.scale*t.x,l=e.y.scale*t.y;return(o!==1||l!==1)&&(r+=`scale(${o}, ${l})`),r||"none"}const Cr={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},_s=typeof window<"u"&&window.MotionDebug!==void 0,Ou=["","X","Y","Z"],xO={visibility:"hidden"},Rx=1e3;let wO=0;function qu(e,t,n,r){const{latestValues:i}=t;i[e]&&(n[e]=i[e],t.setStaticValue(e,0),r&&(r[e]=0))}function QT(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const n=iT(t);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:s}=e.options;window.MotionCancelOptimisedAnimation(n,"transform",ke,!(i||s))}const{parent:r}=e;r&&!r.hasCheckedOptimisedAppear&&QT(r)}function JT({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(a={},o=t==null?void 0:t()){this.id=wO++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,_s&&(Cr.totalNodes=Cr.resolvedTargetDeltas=Cr.recalculatedProjection=0),this.nodes.forEach(_O),this.nodes.forEach(jO),this.nodes.forEach(NO),this.nodes.forEach(kO),_s&&window.MotionDebug.record(Cr)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=a,this.root=o?o.root||o:this,this.path=o?[...o.path,o]:[],this.parent=o,this.depth=o?o.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new oO)}addEventListener(a,o){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new gg),this.eventHandlers.get(a).add(o)}notifyListeners(a,...o){const l=this.eventHandlers.get(a);l&&l.notify(...o)}hasListeners(a){return this.eventHandlers.has(a)}mount(a,o=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=sO(a),this.instance=a;const{layoutId:l,layout:u,visualElement:c}=this.options;if(c&&!c.current&&c.mount(a),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),o&&(u||l)&&(this.isLayoutDirty=!0),e){let d;const h=()=>this.root.updateBlockedByResize=!1;e(a,()=>{this.root.updateBlockedByResize=!0,d&&d(),d=lO(h,250),mo.hasAnimatedSinceResize&&(mo.hasAnimatedSinceResize=!1,this.nodes.forEach(Ix))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&c&&(l||u)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:h,hasRelativeTargetChanged:m,layout:g})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const p=this.options.transition||c.getDefaultTransition()||IO,{onLayoutAnimationStart:w,onLayoutAnimationComplete:v}=c.getProps(),y=!this.targetLayout||!YT(this.targetLayout,g)||m,x=!h&&m;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||x||h&&(y||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(d,x);const S={...dg(p,"layout"),onPlay:w,onComplete:v};(c.shouldReduceMotion||this.options.layoutRoot)&&(S.delay=0,S.type=!1),this.startAnimation(S)}else h||Ix(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=g})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const a=this.getStack();a&&a.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,dr(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(MO),this.animationId++)}getTransformTemplate(){const{visualElement:a}=this.options;return a&&a.getProps().transformTemplate}willUpdate(a=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&QT(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let c=0;c<this.path.length;c++){const d=this.path[c];d.shouldResetTransform=!0,d.updateScroll("snapshot"),d.options.layoutRoot&&d.willUpdate(!1)}const{layoutId:o,layout:l}=this.options;if(o===void 0&&!l)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),a&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Ax);return}this.isUpdating||this.nodes.forEach(EO),this.isUpdating=!1,this.nodes.forEach(TO),this.nodes.forEach(bO),this.nodes.forEach(SO),this.clearAllSnapshots();const o=pn.now();Xe.delta=In(0,1e3/60,o-Xe.timestamp),Xe.timestamp=o,Xe.isProcessing=!0,ju.update.process(Xe),ju.preRender.process(Xe),ju.render.process(Xe),Xe.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,tg.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(CO),this.sharedNodes.forEach(PO)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,ke.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){ke.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const a=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Fe(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:o}=this.options;o&&o.notify("LayoutMeasure",this.layout.layoutBox,a?a.layoutBox:void 0)}updateScroll(a="measure"){let o=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===a&&(o=!1),o){const l=r(this.instance);this.scroll={animationId:this.root.animationId,phase:a,isRoot:l,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!i)return;const a=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,o=this.projectionDelta&&!WT(this.projectionDelta),l=this.getTransformTemplate(),u=l?l(this.latestValues,""):void 0,c=u!==this.prevTransformTemplateValue;a&&(o||kr(this.latestValues)||c)&&(i(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(a=!0){const o=this.measurePageBox();let l=this.removeElementScroll(o);return a&&(l=this.removeTransform(l)),DO(l),{animationId:this.root.animationId,measuredBox:o,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var a;const{visualElement:o}=this.options;if(!o)return Fe();const l=o.measureViewportBox();if(!(((a=this.scroll)===null||a===void 0?void 0:a.wasRoot)||this.path.some(LO))){const{scroll:c}=this.root;c&&(bi(l.x,c.offset.x),bi(l.y,c.offset.y))}return l}removeElementScroll(a){var o;const l=Fe();if(Lt(l,a),!((o=this.scroll)===null||o===void 0)&&o.wasRoot)return l;for(let u=0;u<this.path.length;u++){const c=this.path[u],{scroll:d,options:h}=c;c!==this.root&&d&&h.layoutScroll&&(d.wasRoot&&Lt(l,a),bi(l.x,d.offset.x),bi(l.y,d.offset.y))}return l}applyTransform(a,o=!1){const l=Fe();Lt(l,a);for(let u=0;u<this.path.length;u++){const c=this.path[u];!o&&c.options.layoutScroll&&c.scroll&&c!==c.root&&Si(l,{x:-c.scroll.offset.x,y:-c.scroll.offset.y}),kr(c.latestValues)&&Si(l,c.latestValues)}return kr(this.latestValues)&&Si(l,this.latestValues),l}removeTransform(a){const o=Fe();Lt(o,a);for(let l=0;l<this.path.length;l++){const u=this.path[l];if(!u.instance||!kr(u.latestValues))continue;Um(u.latestValues)&&u.updateSnapshot();const c=Fe(),d=u.measurePageBox();Lt(c,d),Ex(o,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,c)}return kr(this.latestValues)&&Ex(o,this.latestValues),o}setTargetDelta(a){this.targetDelta=a,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(a){this.options={...this.options,...a,crossfade:a.crossfade!==void 0?a.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Xe.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(a=!1){var o;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==l;if(!(a||u&&this.isSharedProjectionDirty||this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:d,layoutId:h}=this.options;if(!(!this.layout||!(d||h))){if(this.resolvedRelativeTargetAt=Xe.timestamp,!this.targetDelta&&!this.relativeTarget){const m=this.getClosestProjectingParent();m&&m.layout&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Fe(),this.relativeTargetOrigin=Fe(),$s(this.relativeTargetOrigin,this.layout.layoutBox,m.layout.layoutBox),Lt(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=Fe(),this.targetWithTransforms=Fe()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),FL(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Lt(this.target,this.layout.layoutBox),$T(this.target,this.targetDelta)):Lt(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const m=this.getClosestProjectingParent();m&&!!m.resumingFrom==!!this.resumingFrom&&!m.options.layoutScroll&&m.target&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Fe(),this.relativeTargetOrigin=Fe(),$s(this.relativeTargetOrigin,this.target,m.target),Lt(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}_s&&Cr.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||Um(this.parent.latestValues)||BT(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var a;const o=this.getLead(),l=!!this.resumingFrom||this!==o;let u=!0;if((this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty)&&(u=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===Xe.timestamp&&(u=!1),u)return;const{layout:c,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(c||d))return;Lt(this.layoutCorrected,this.layout.layoutBox);const h=this.treeScale.x,m=this.treeScale.y;WL(this.layoutCorrected,this.treeScale,this.path,l),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=Fe());const{target:g}=o;if(!g){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(_x(this.prevProjectionDelta.x,this.projectionDelta.x),_x(this.prevProjectionDelta.y,this.projectionDelta.y)),Bs(this.projectionDelta,this.layoutCorrected,g,this.latestValues),(this.treeScale.x!==h||this.treeScale.y!==m||!Px(this.projectionDelta.x,this.prevProjectionDelta.x)||!Px(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",g)),_s&&Cr.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(a=!0){var o;if((o=this.options.visualElement)===null||o===void 0||o.scheduleRender(),a){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=wi(),this.projectionDelta=wi(),this.projectionDeltaWithTransform=wi()}setAnimationOrigin(a,o=!1){const l=this.snapshot,u=l?l.latestValues:{},c={...this.latestValues},d=wi();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!o;const h=Fe(),m=l?l.source:void 0,g=this.layout?this.layout.source:void 0,p=m!==g,w=this.getStack(),v=!w||w.members.length<=1,y=!!(p&&!v&&this.options.crossfade===!0&&!this.path.some(AO));this.animationProgress=0;let x;this.mixTargetDelta=S=>{const k=S/1e3;Dx(d.x,a.x,k),Dx(d.y,a.y,k),this.setTargetDelta(d),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&($s(h,this.layout.layoutBox,this.relativeParent.layout.layoutBox),RO(this.relativeTarget,this.relativeTargetOrigin,h,k),x&&vO(this.relativeTarget,x)&&(this.isProjectionDirty=!1),x||(x=Fe()),Lt(x,this.relativeTarget)),p&&(this.animationValues=c,cO(c,u,this.latestValues,k,y,v)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=k},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(a){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(dr(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=ke.update(()=>{mo.hasAnimatedSinceResize=!0,this.currentAnimation=iO(0,Rx,{...a,onUpdate:o=>{this.mixTargetDelta(o),a.onUpdate&&a.onUpdate(o)},onComplete:()=>{a.onComplete&&a.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const a=this.getStack();a&&a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Rx),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const a=this.getLead();let{targetWithTransforms:o,target:l,layout:u,latestValues:c}=a;if(!(!o||!l||!u)){if(this!==a&&this.layout&&u&&XT(this.options.animationType,this.layout.layoutBox,u.layoutBox)){l=this.target||Fe();const d=Mt(this.layout.layoutBox.x);l.x.min=a.target.x.min,l.x.max=l.x.min+d;const h=Mt(this.layout.layoutBox.y);l.y.min=a.target.y.min,l.y.max=l.y.min+h}Lt(o,l),Si(o,c),Bs(this.projectionDeltaWithTransform,this.layoutCorrected,o,c)}}registerSharedNode(a,o){this.sharedNodes.has(a)||this.sharedNodes.set(a,new gO),this.sharedNodes.get(a).add(o);const u=o.options.initialPromotionConfig;o.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(o):void 0})}isLead(){const a=this.getStack();return a?a.lead===this:!0}getLead(){var a;const{layoutId:o}=this.options;return o?((a=this.getStack())===null||a===void 0?void 0:a.lead)||this:this}getPrevLead(){var a;const{layoutId:o}=this.options;return o?(a=this.getStack())===null||a===void 0?void 0:a.prevLead:void 0}getStack(){const{layoutId:a}=this.options;if(a)return this.root.sharedNodes.get(a)}promote({needsReset:a,transition:o,preserveFollowOpacity:l}={}){const u=this.getStack();u&&u.promote(this,l),a&&(this.projectionDelta=void 0,this.needsReset=!0),o&&this.setOptions({transition:o})}relegate(){const a=this.getStack();return a?a.relegate(this):!1}resetSkewAndRotation(){const{visualElement:a}=this.options;if(!a)return;let o=!1;const{latestValues:l}=a;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(o=!0),!o)return;const u={};l.z&&qu("z",a,u,this.animationValues);for(let c=0;c<Ou.length;c++)qu(`rotate${Ou[c]}`,a,u,this.animationValues),qu(`skew${Ou[c]}`,a,u,this.animationValues);a.render();for(const c in u)a.setStaticValue(c,u[c]),this.animationValues&&(this.animationValues[c]=u[c]);a.scheduleRender()}getProjectionStyles(a){var o,l;if(!this.instance||this.isSVG)return;if(!this.isVisible)return xO;const u={visibility:""},c=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,u.opacity="",u.pointerEvents=ho(a==null?void 0:a.pointerEvents)||"",u.transform=c?c(this.latestValues,""):"none",u;const d=this.getLead();if(!this.projectionDelta||!this.layout||!d.target){const p={};return this.options.layoutId&&(p.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,p.pointerEvents=ho(a==null?void 0:a.pointerEvents)||""),this.hasProjected&&!kr(this.latestValues)&&(p.transform=c?c({},""):"none",this.hasProjected=!1),p}const h=d.animationValues||d.latestValues;this.applyTransformsToTarget(),u.transform=yO(this.projectionDeltaWithTransform,this.treeScale,h),c&&(u.transform=c(h,u.transform));const{x:m,y:g}=this.projectionDelta;u.transformOrigin=`${m.origin*100}% ${g.origin*100}% 0`,d.animationValues?u.opacity=d===this?(l=(o=h.opacity)!==null&&o!==void 0?o:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:h.opacityExit:u.opacity=d===this?h.opacity!==void 0?h.opacity:"":h.opacityExit!==void 0?h.opacityExit:0;for(const p in Bo){if(h[p]===void 0)continue;const{correct:w,applyTo:v}=Bo[p],y=u.transform==="none"?h[p]:w(h[p],d);if(v){const x=v.length;for(let S=0;S<x;S++)u[v[S]]=y}else u[p]=y}return this.options.layoutId&&(u.pointerEvents=d===this?ho(a==null?void 0:a.pointerEvents)||"":"none"),u}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(a=>{var o;return(o=a.currentAnimation)===null||o===void 0?void 0:o.stop()}),this.root.nodes.forEach(Ax),this.root.sharedNodes.clear()}}}function bO(e){e.updateLayout()}function SO(e){var t;const n=((t=e.resumeFrom)===null||t===void 0?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&n&&e.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=e.layout,{animationType:s}=e.options,a=n.source!==e.layout.source;s==="size"?Ot(d=>{const h=a?n.measuredBox[d]:n.layoutBox[d],m=Mt(h);h.min=r[d].min,h.max=h.min+m}):XT(s,n.layoutBox,r)&&Ot(d=>{const h=a?n.measuredBox[d]:n.layoutBox[d],m=Mt(r[d]);h.max=h.min+m,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[d].max=e.relativeTarget[d].min+m)});const o=wi();Bs(o,r,n.layoutBox);const l=wi();a?Bs(l,e.applyTransform(i,!0),n.measuredBox):Bs(l,r,n.layoutBox);const u=!WT(o);let c=!1;if(!e.resumeFrom){const d=e.getClosestProjectingParent();if(d&&!d.resumeFrom){const{snapshot:h,layout:m}=d;if(h&&m){const g=Fe();$s(g,n.layoutBox,h.layoutBox);const p=Fe();$s(p,r,m.layoutBox),YT(g,p)||(c=!0),d.options.layoutRoot&&(e.relativeTarget=p,e.relativeTargetOrigin=g,e.relativeParent=d)}}}e.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:l,layoutDelta:o,hasLayoutChanged:u,hasRelativeTargetChanged:c})}else if(e.isLead()){const{onExitComplete:r}=e.options;r&&r()}e.options.transition=void 0}function _O(e){_s&&Cr.totalNodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function kO(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function CO(e){e.clearSnapshot()}function Ax(e){e.clearMeasurements()}function EO(e){e.isLayoutDirty=!1}function TO(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function Ix(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function jO(e){e.resolveTargetDelta()}function NO(e){e.calcProjection()}function MO(e){e.resetSkewAndRotation()}function PO(e){e.removeLeadSnapshot()}function Dx(e,t,n){e.translate=Ne(t.translate,0,n),e.scale=Ne(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function Lx(e,t,n,r){e.min=Ne(t.min,n.min,r),e.max=Ne(t.max,n.max,r)}function RO(e,t,n,r){Lx(e.x,t.x,n.x,r),Lx(e.y,t.y,n.y,r)}function AO(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const IO={duration:.45,ease:[.4,0,.1,1]},Ox=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),qx=Ox("applewebkit/")&&!Ox("chrome/")?Math.round:jt;function Fx(e){e.min=qx(e.min),e.max=qx(e.max)}function DO(e){Fx(e.x),Fx(e.y)}function XT(e,t,n){return e==="position"||e==="preserve-aspect"&&!qL(Mx(t),Mx(n),.2)}function LO(e){var t;return e!==e.root&&((t=e.scroll)===null||t===void 0?void 0:t.wasRoot)}const OO=JT({attachResizeListener:(e,t)=>da(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Fu={current:void 0},ZT=JT({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!Fu.current){const e=new OO({});e.mount(window),e.setOptions({layoutScroll:!0}),Fu.current=e}return Fu.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),qO={pan:{Feature:eO},drag:{Feature:ZL,ProjectionNode:ZT,MeasureLayout:GT}};function Vx(e,t,n){const{props:r}=e;e.animationState&&r.whileHover&&e.animationState.setActive("whileHover",n==="Start");const i="onHover"+n,s=r[i];s&&ke.postRender(()=>s(t,wa(t)))}class FO extends gr{mount(){const{current:t}=this.node;t&&(this.unmount=qI(t,n=>(Vx(this.node,n,"Start"),r=>Vx(this.node,r,"End"))))}unmount(){}}class VO extends gr{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=xa(da(this.node.current,"focus",()=>this.onFocus()),da(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function Bx(e,t,n){const{props:r}=e;e.animationState&&r.whileTap&&e.animationState.setActive("whileTap",n==="Start");const i="onTap"+(n==="End"?"":n),s=r[i];s&&ke.postRender(()=>s(t,wa(t)))}class BO extends gr{mount(){const{current:t}=this.node;t&&(this.unmount=$I(t,n=>(Bx(this.node,n,"Start"),(r,{success:i})=>Bx(this.node,r,i?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Gm=new WeakMap,Vu=new WeakMap,$O=e=>{const t=Gm.get(e.target);t&&t(e)},UO=e=>{e.forEach($O)};function zO({root:e,...t}){const n=e||document;Vu.has(n)||Vu.set(n,{});const r=Vu.get(n),i=JSON.stringify(t);return r[i]||(r[i]=new IntersectionObserver(UO,{root:e,...t})),r[i]}function GO(e,t,n){const r=zO(t);return Gm.set(e,n),r.observe(e),()=>{Gm.delete(e),r.unobserve(e)}}const HO={some:0,all:1};class KO extends gr{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:s}=t,a={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:HO[i]},o=l=>{const{isIntersecting:u}=l;if(this.isInView===u||(this.isInView=u,s&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:c,onViewportLeave:d}=this.node.getProps(),h=u?c:d;h&&h(l)};return GO(this.node.current,a,o)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:n}=this.node;["amount","margin","root"].some(WO(t,n))&&this.startObserver()}unmount(){}}function WO({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}const YO={inView:{Feature:KO},tap:{Feature:BO},focus:{Feature:VO},hover:{Feature:FO}},QO={layout:{ProjectionNode:ZT,MeasureLayout:GT}},Hm={current:null},ej={current:!1};function JO(){if(ej.current=!0,!!Qv)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>Hm.current=e.matches;e.addListener(t),t()}else Hm.current=!1}const XO=[...CT,at,fr],ZO=e=>XO.find(kT(e)),$x=new WeakMap;function e2(e,t,n){for(const r in t){const i=t[r],s=n[r];if(lt(i))e.addValue(r,i);else if(lt(s))e.addValue(r,ua(i,{owner:e}));else if(s!==i)if(e.hasValue(r)){const a=e.getValue(r);a.liveStyle===!0?a.jump(i):a.hasAnimated||a.set(i)}else{const a=e.getStaticValue(r);e.addValue(r,ua(a!==void 0?a:i,{owner:e}))}}for(const r in n)t[r]===void 0&&e.removeValue(r);return t}const Ux=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class t2{scrapeMotionValuesFromProps(t,n,r){return{}}constructor({parent:t,props:n,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:s,visualState:a},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=_g,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const m=pn.now();this.renderScheduledAt<m&&(this.renderScheduledAt=m,ke.render(this.render,!1,!0))};const{latestValues:l,renderState:u,onUpdate:c}=a;this.onUpdate=c,this.latestValues=l,this.baseTarget={...l},this.initialValues=n.initial?{...l}:{},this.renderState=u,this.parent=t,this.props=n,this.presenceContext=r,this.depth=t?t.depth+1:0,this.reducedMotionConfig=i,this.options=o,this.blockInitialAnimation=!!s,this.isControllingVariants=vl(n),this.isVariantNode=AE(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:d,...h}=this.scrapeMotionValuesFromProps(n,{},this);for(const m in h){const g=h[m];l[m]!==void 0&&lt(g)&&g.set(l[m],!1)}}mount(t){this.current=t,$x.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),ej.current||JO(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Hm.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){$x.delete(this.current),this.projection&&this.projection.unmount(),dr(this.notifyUpdate),dr(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const n=this.features[t];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(t,n){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const r=$r.has(t),i=n.on("change",o=>{this.latestValues[t]=o,this.props.onUpdate&&ke.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),s=n.on("renderRequest",this.scheduleRender);let a;window.MotionCheckAppearSync&&(a=window.MotionCheckAppearSync(this,t,n)),this.valueSubscriptions.set(t,()=>{i(),s(),a&&a(),n.owner&&n.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in Oi){const n=Oi[t];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[t]&&i&&r(this.props)&&(this.features[t]=new i(this)),this.features[t]){const s=this.features[t];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Fe()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,n){this.latestValues[t]=n}update(t,n){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<Ux.length;r++){const i=Ux[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s="on"+i,a=t[s];a&&(this.propEventSubscriptions[i]=this.on(i,a))}this.prevMotionValues=e2(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(t),()=>n.variantChildren.delete(t)}addValue(t,n){const r=this.values.get(t);n!==r&&(r&&this.removeValue(t),this.bindToMotionValue(t,n),this.values.set(t,n),this.latestValues[t]=n.get())}removeValue(t){this.values.delete(t);const n=this.valueSubscriptions.get(t);n&&(n(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,n){if(this.props.values&&this.props.values[t])return this.props.values[t];let r=this.values.get(t);return r===void 0&&n!==void 0&&(r=ua(n===null?void 0:n,{owner:this}),this.addValue(t,r)),r}readValue(t,n){var r;let i=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:(r=this.getBaseTargetFromProps(this.props,t))!==null&&r!==void 0?r:this.readValueFromInstance(this.current,t,this.options);return i!=null&&(typeof i=="string"&&(ST(i)||hT(i))?i=parseFloat(i):!ZO(i)&&fr.test(n)&&(i=xT(t,n)),this.setBaseTarget(t,lt(i)?i.get():i)),lt(i)?i.get():i}setBaseTarget(t,n){this.baseTarget[t]=n}getBaseTarget(t){var n;const{initial:r}=this.props;let i;if(typeof r=="string"||typeof r=="object"){const a=rg(this.props,r,(n=this.presenceContext)===null||n===void 0?void 0:n.custom);a&&(i=a[t])}if(r&&i!==void 0)return i;const s=this.getBaseTargetFromProps(this.props,t);return s!==void 0&&!lt(s)?s:this.initialValues[t]!==void 0&&i===void 0?void 0:this.baseTarget[t]}on(t,n){return this.events[t]||(this.events[t]=new gg),this.events[t].add(n)}notify(t,...n){this.events[t]&&this.events[t].notify(...n)}}class tj extends t2{constructor(){super(...arguments),this.KeyframeResolver=ET}sortInstanceNodePosition(t,n){return t.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(t,n){return t.style?t.style[n]:void 0}removeValueFromRenderState(t,{vars:n,style:r}){delete n[t],delete r[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;lt(t)&&(this.childSubscription=t.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function n2(e){return window.getComputedStyle(e)}class r2 extends tj{constructor(){super(...arguments),this.type="html",this.renderInstance=$E}readValueFromInstance(t,n){if($r.has(n)){const r=Sg(n);return r&&r.default||0}else{const r=n2(t),i=(FE(n)?r.getPropertyValue(n):r[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(t,{transformPagePoint:n}){return UT(t,n)}build(t,n,r){ag(t,n,r.transformTemplate)}scrapeMotionValuesFromProps(t,n,r){return cg(t,n,r)}}class i2 extends tj{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Fe}getBaseTargetFromProps(t,n){return t[n]}readValueFromInstance(t,n){if($r.has(n)){const r=Sg(n);return r&&r.default||0}return n=UE.has(n)?n:eg(n),t.getAttribute(n)}scrapeMotionValuesFromProps(t,n,r){return HE(t,n,r)}build(t,n,r){og(t,n,this.isSVGTag,r.transformTemplate)}renderInstance(t,n,r,i){zE(t,n,r,i)}mount(t){this.isSVGTag=ug(t.tagName),super.mount(t)}}const s2=(e,t)=>ng(e)?new i2(t):new r2(t,{allowProjection:e!==_.Fragment}),a2=PI({...NL,...YO,...qO,...QO},s2),o2=HA(a2);function l2({steps:e,fromRects:t,toRects:n,onComplete:r}){return _.useEffect(()=>{const i=window.setTimeout(r,550);return()=>window.clearTimeout(i)},[r]),f.jsx("div",{className:"morph-layer",children:e.map(i=>{var o;const s=t[i.id],a=n[i.id];return!s||!a?null:f.jsxs(o2.div,{className:`morph-card step-${i.type}`,initial:{left:s.left,top:s.top,width:s.width,height:s.height},animate:{left:a.left,top:a.top,width:a.width,height:a.height},transition:{duration:.5,ease:"easeInOut"},children:[f.jsx("div",{className:"morph-card-title",children:i.name}),f.jsx("div",{className:"morph-card-subtitle",children:((o=i.preview)==null?void 0:o.title)??i.type})]},i.id)})})}function u2({morph:e,onComplete:t,children:n}){return f.jsxs("div",{className:"morph-orchestrator",children:[n,e?f.jsx(l2,{steps:e.steps,fromRects:e.fromRects,toRects:e.toRects,onComplete:t}):null]})}const c2="demo-trace-overlap-001",d2="Overlap + ToolCallId Demo",f2="2026-01-27T10:00:00.000Z",h2="2026-01-27T10:00:05.000Z",p2="completed",m2={source:"openai_agents",agentName:"DemoAgent",modelId:"gpt-4o-2024-11-20",wallTimeMs:5e3,workTimeMs:7200,totalTokens:1400,totalCostUsd:.018},v2=[{id:"s1",index:0,type:"llm_call",name:"plan",startedAt:"2026-01-27T10:00:00.000Z",endedAt:"2026-01-27T10:00:01.000Z",durationMs:1e3,childStepIds:[],metrics:{tokensTotal:300,costUsd:.004},preview:{title:"LLM: plan",subtitle:"gpt-4o",outputPreview:"I'll fetch two sources..."},status:"completed"},{id:"s2",index:1,type:"llm_call",name:"call_tools",startedAt:"2026-01-27T10:00:01.000Z",endedAt:"2026-01-27T10:00:01.200Z",durationMs:200,childStepIds:[],metrics:{tokensTotal:120,costUsd:.002},preview:{title:"LLM: call tools",outputPreview:"Calling web_search + database_query"},io:{emittedToolCallIds:["tc-001","tc-002"]},status:"completed"},{id:"s3",index:2,type:"tool_call",name:"web_search",toolCallId:"tc-001",startedAt:"2026-01-27T10:00:01.200Z",endedAt:"2026-01-27T10:00:03.200Z",durationMs:2e3,childStepIds:[],metrics:{costUsd:0},preview:{title:"Tool: web_search",inputPreview:'{"q":"EU AI Act"}',outputPreview:"[3 results...]"},status:"completed"},{id:"s4",index:3,type:"tool_call",name:"database_query",toolCallId:"tc-002",startedAt:"2026-01-27T10:00:01.500Z",endedAt:"2026-01-27T10:00:02.700Z",durationMs:1200,childStepIds:[],preview:{title:"Tool: database_query",inputPreview:'{"sql":"SELECT..."}',outputPreview:'{"rows":42}'},status:"completed"},{id:"s5",index:4,type:"llm_call",name:"analyze",startedAt:"2026-01-27T10:00:03.200Z",endedAt:"2026-01-27T10:00:04.600Z",durationMs:1400,childStepIds:[],metrics:{tokensTotal:700,costUsd:.012},preview:{title:"LLM: analyze",outputPreview:"Synthesis based on tool outputs..."},io:{consumedToolCallIds:["tc-001","tc-002"]},status:"completed"}],xl={id:c2,name:d2,startedAt:f2,endedAt:h2,status:p2,metadata:m2,steps:v2};function nj(e,t){const n=g2(e,t),r=new Set(n.map(d=>d.leftId)),i=new Set(n.map(d=>d.rightId)),s=t.steps.filter(d=>!i.has(d.id)).map(d=>d.id),a=e.steps.filter(d=>!r.has(d.id)).map(d=>d.id),o=n.filter(d=>{const h=e.steps.find(g=>g.id===d.leftId),m=t.steps.find(g=>g.id===d.rightId);return!h||!m?!1:zx(h)!==zx(m)}),l=o.map(d=>d.leftId),u=(t.metadata.totalCostUsd??0)-(e.metadata.totalCostUsd??0),c=t.metadata.wallTimeMs-e.metadata.wallTimeMs;return{addedSteps:s,removedSteps:a,changedSteps:l,changedPairs:o,alignedSteps:n,costDeltaUsd:u,wallTimeDeltaMs:c}}function g2(e,t){const n=[],r=new Set(e.steps.map(c=>c.id)),i=new Set(t.steps.map(c=>c.id));Array.from(r).forEach(c=>{i.has(c)&&(n.push({leftId:c,rightId:c}),r.delete(c),i.delete(c))});const s=new Map;t.steps.forEach(c=>{c.toolCallId&&s.set(c.toolCallId,c.id)}),e.steps.forEach(c=>{if(!c.toolCallId)return;const d=s.get(c.toolCallId);d&&i.has(d)&&(n.push({leftId:c.id,rightId:d}),r.delete(c.id),i.delete(d))});const a=Kx(e),o=Kx(t),l=y2(e,t),u={};return i.forEach(c=>{const d=o.get(c);if(!d)return;const h=Gx(d.step);h&&(u[h]||(u[h]=[]),u[h].push(c))}),Object.values(u).forEach(c=>{c.sort((d,h)=>{var m,g;return(((m=o.get(d))==null?void 0:m.startMs)??0)-(((g=o.get(h))==null?void 0:g.startMs)??0)})}),Array.from(r).forEach(c=>{var g;const d=a.get(c);if(!d)return;const h=Gx(d.step);if(!h||!((g=u[h])!=null&&g.length))return;const m=x2(d,u[h],o,l);m&&(n.push({leftId:c,rightId:m}),r.delete(c),i.delete(m),u[h]=u[h].filter(p=>p!==m))}),n}function zx(e){var r,i;const t=((r=e.preview)==null?void 0:r.outputPreview)??null,n=((i=e.metrics)==null?void 0:i.costUsd)??null;return`${e.status}|${t??""}|${n??""}`}function Gx(e){return e.type?`${e.type}:${e.name??""}`:null}function Hx(e){if(!e)return null;const t=Date.parse(e);return Number.isNaN(t)?null:t}function Kx(e){const t=Hx(e.startedAt),n=new Map;return e.steps.forEach(r=>{const i=Hx(r.startedAt),s=t!=null&&i!=null?i-t:null;n.set(r.id,{step:r,startMs:s})}),n}function y2(e,t){const n=Math.max(e.metadata.wallTimeMs,t.metadata.wallTimeMs,1);return Math.max(1e3,Math.min(5e3,Math.round(n*.1)))}function x2(e,t,n,r){const i=e.startMs;if(i==null)return null;let s=null,a=r+1;return t.forEach(o=>{const l=n.get(o);if(!l||l.startMs==null)return;const u=Math.abs(l.startMs-i);u<a&&(a=u,s=o)}),a<=r?s:null}const w2=new Map,b2=new Map,Ir=new Map;async function S2(){return[xl]}async function rj(e){return{trace:xl}}const _2={s1:{role:"assistant",content:"I'll analyze the user's request and create a plan to fetch information from two sources: a web search for current EU AI Act updates and a database query for historical compliance data.",model:"gpt-4o-2024-11-20",usage:{prompt_tokens:150,completion_tokens:150,total_tokens:300},reasoning:"The user wants comprehensive information about AI regulations. I'll use parallel tool calls to maximize efficiency."},s2:{role:"assistant",content:null,tool_calls:[{id:"tc-001",type:"function",function:{name:"web_search",arguments:'{"q":"EU AI Act latest updates 2026"}'}},{id:"tc-002",type:"function",function:{name:"database_query",arguments:`{"sql":"SELECT * FROM compliance_records WHERE region='EU' ORDER BY date DESC LIMIT 10"}`}}],model:"gpt-4o-2024-11-20",usage:{prompt_tokens:80,completion_tokens:40,total_tokens:120}},s3:{tool_call_id:"tc-001",tool_name:"web_search",input:{q:"EU AI Act latest updates 2026"},output:{results:[{title:"EU AI Act Implementation Timeline",url:"https://example.com/ai-act",snippet:"The EU AI Act enters full force in 2026..."},{title:"High-Risk AI Systems Classification",url:"https://example.com/classification",snippet:"New guidance on high-risk categorization..."},{title:"Compliance Deadlines Approaching",url:"https://example.com/deadlines",snippet:"Organizations must comply by August 2026..."}],total_results:3,search_time_ms:1850},status:"success"},s4:{tool_call_id:"tc-002",tool_name:"database_query",input:{sql:"SELECT * FROM compliance_records WHERE region='EU' ORDER BY date DESC LIMIT 10"},output:{rows:[{id:1,company:"TechCorp",status:"compliant",date:"2026-01-15"},{id:2,company:"AIStartup",status:"in_progress",date:"2026-01-10"},{id:3,company:"DataCo",status:"compliant",date:"2026-01-05"}],row_count:42,query_time_ms:1100},status:"success"},s5:{role:"assistant",content:`Based on my analysis of the web search results and database records:

**Key Findings:**
1. The EU AI Act is now in full effect as of 2026
2. High-risk AI systems require specific compliance measures
3. 42 organizations in our database have compliance records

**Recommendations:**
- Review classification of AI systems
- Ensure documentation is complete
- Schedule compliance audit before August deadline`,model:"gpt-4o-2024-11-20",usage:{prompt_tokens:450,completion_tokens:250,total_tokens:700},reasoning:"Synthesized information from both the web search (3 relevant articles) and database query (42 compliance records) to provide actionable insights."}};function k2(e,t){const n=xl.steps.find(s=>s.id===e);if(!n)return null;const r=_2[e];if(!r)return null;const i=t?C2(r):r;return{...n,data:i}}function C2(e){var n,r;const t=JSON.parse(JSON.stringify(e));return(n=t.input)!=null&&n.sql&&(t.input.sql="[REDACTED]"),(r=t.output)!=null&&r.rows&&(t.output.rows=t.output.rows.map(i=>({...i,company:"[REDACTED]"}))),t.tool_calls&&(t.tool_calls=t.tool_calls.map(i=>({...i,function:{...i.function,arguments:"[REDACTED]"}}))),t}async function E2(e,t,n,r=[],i=!1){return await new Promise(s=>setTimeout(s,150)),k2(t,i)}async function T2(e,t,n){await E2(e,t,"redacted",[],n)}function j2(e,t){return()=>{}}function N2(){w2.clear(),b2.clear()}async function M2(e,t){return null}async function P2(e){return null}async function r4(e,t){return[]}async function i4(e,t,n,r,i){return null}async function R2(){return[]}async function A2(e,t){return null}async function I2(e,t,n,r,i){return i?ij(i,t,n,r):null}function ij(e,t,n,r){var g;const i=JSON.parse(JSON.stringify(e)),s=6e4,a=Date.parse("2024-01-01T00:00:00.000Z"),o=Date.parse(e.endedAt??e.startedAt??""),u=(Number.isNaN(o)?a:o)+s,c=new Date(u);i.id=`${e.id}-replay-${u}`,i.parentTraceId=e.id,i.branchPointStepId=t,i.replay={strategy:n,modifiedStepId:t,modifications:r,createdAt:c.toISOString()};const d=p=>{if(!p)return p;const w=Date.parse(p);return Number.isNaN(w)?p:new Date(w+s).toISOString()};i.startedAt=d(i.startedAt)??i.startedAt,i.endedAt=d(i.endedAt);const h=new Set,m=((g=i.steps.find(p=>p.id===t))==null?void 0:g.index)??-1;return n==="live"?i.steps.forEach(p=>{p.index>m&&h.add(p.id)}):n==="hybrid"&&i.steps.forEach(p=>{p.index>m&&h.add(p.id)}),i.steps=i.steps.map(p=>{var v;const w={...p};if(w.startedAt=d(p.startedAt)??p.startedAt,w.endedAt=d(p.endedAt),p.id===t){const y=((v=p.preview)==null?void 0:v.outputPreview)??"";w.preview={...p.preview,outputPreview:`${y} (modified)`.trim()}}return h.has(p.id)&&(w.status="pending",w.endedAt=null,w.durationMs=void 0,w.metrics=void 0,w.preview={...p.preview,outputPreview:"[invalidated for replay]"}),w}),i}async function D2(e){return q2(e)}async function L2(e){var t;return((t=Ir.get(e))==null?void 0:t.job)??null}async function Wx(e){var t;return((t=Ir.get(e))==null?void 0:t.matrix)??null}async function O2(e){{const t=Ir.get(e);if(!t)return null;const n={...t.job,status:"canceled",scenarios:t.job.scenarios.map(r=>({...r,status:"canceled",endedAt:r.endedAt??new Date().toISOString()}))};return Ir.set(e,{...t,job:n}),n}}function q2(e){const t=`demo-job-${Date.now()}-${Math.random().toString(36).slice(2,6)}`,n=xl,r=new Date().toISOString(),i=e.scenarios.map((l,u)=>({id:`demo-scn-${u+1}`,name:l.name,strategy:l.strategy,modifications:l.modifications,status:"running",startedAt:r,endedAt:null,replayTraceId:`${t}-replay-${u+1}`})),s={id:t,traceId:e.traceId,stepId:e.stepId,status:"running",createdAt:r,startedAt:r,endedAt:null,scenarioCount:i.length,completedCount:0,failedCount:0,canceledCount:0,scenarios:i},a=i.map(l=>{const u=ij(n,e.stepId,l.strategy,l.modifications);u.id=l.replayTraceId;const c=nj(n,u),d=n.metadata.totalCostUsd??0,h=u.metadata.totalCostUsd??d,m=n.metadata.errorCount??0,g=u.metadata.errorCount??m,p=n.metadata.retryCount??0,w=u.metadata.retryCount??p,v=u.steps.filter(y=>y.status==="pending").length;return{scenarioId:l.id,name:l.name,strategy:l.strategy,status:"completed",replayTraceId:l.replayTraceId,modifications:l.modifications,error:null,changedStepIds:c.changedSteps,addedStepIds:c.addedSteps,removedStepIds:c.removedSteps,metrics:{costDeltaUsd:h-d,wallTimeDeltaMs:(u.metadata.wallTimeMs??0)-(n.metadata.wallTimeMs??0),errorDelta:g-m,retryDelta:w-p,changedSteps:c.changedSteps.length,addedSteps:c.addedSteps.length,removedSteps:c.removedSteps.length,invalidatedStepCount:v}}}),o={jobId:t,traceId:e.traceId,stepId:e.stepId,rows:a,causalRanking:[]};return Ir.set(t,{job:s,matrix:o}),window.setTimeout(()=>{const l=Ir.get(t);if(!l)return;const u=new Date().toISOString(),c=l.job.scenarios.map(m=>({...m,status:"completed",endedAt:u})),d={...l.job,status:"completed",endedAt:u,completedCount:c.length,scenarios:c},h={...l.matrix,rows:l.matrix.rows.map(m=>({...m,status:"completed"}))};Ir.set(t,{job:d,matrix:h})},600),s}function F2(){const[e,t]=_.useState(null),[n,r]=_.useState(null),[i,s]=_.useState(!0),[a,o]=_.useState(null),[l,u]=_.useState([]),[c,d]=_.useState(null),h=_.useCallback(async g=>{const p=await rj(),w=(p==null?void 0:p.trace)??null;t(w),r(w?(p==null?void 0:p.insights)??VR(w):null)},[t,r]),m=_.useCallback(async()=>{var g;s(!0),o(null);try{const p=await S2();u(p);const w=((g=p[p.length-1])==null?void 0:g.id)??null,v=c??w;if(!v){t(null),r(null);return}if(!c||c!==v){d(v);return}await h(v)}catch(p){o(p instanceof Error?p.message:"Failed to load trace")}finally{s(!1)}},[c,h]);return _.useEffect(()=>{m()},[m]),_.useEffect(()=>{c&&(s(!0),h(c).catch(g=>{o(g instanceof Error?g.message:"Failed to load trace")}).finally(()=>s(!1)))},[c,h]),_.useEffect(()=>j2(),[c,d]),{trace:e,insights:n,loading:i,error:a,reload:m,traces:l,selectedTraceId:c,setSelectedTraceId:d}}function Qe(e,t){const[n,r]=_.useState(()=>{if(typeof window>"u")return t;try{const i=window.localStorage.getItem(e);return i==null?t:JSON.parse(i)}catch{return t}});return _.useEffect(()=>{try{window.localStorage.setItem(e,JSON.stringify(n))}catch{}},[e,n]),[n,r]}function Tg(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Bu,Yx;function V2(){if(Yx)return Bu;Yx=1;function e(){this.__data__=[],this.size=0}return Bu=e,Bu}var $u,Qx;function zi(){if(Qx)return $u;Qx=1;function e(t,n){return t===n||t!==t&&n!==n}return $u=e,$u}var Uu,Jx;function wl(){if(Jx)return Uu;Jx=1;var e=zi();function t(n,r){for(var i=n.length;i--;)if(e(n[i][0],r))return i;return-1}return Uu=t,Uu}var zu,Xx;function B2(){if(Xx)return zu;Xx=1;var e=wl(),t=Array.prototype,n=t.splice;function r(i){var s=this.__data__,a=e(s,i);if(a<0)return!1;var o=s.length-1;return a==o?s.pop():n.call(s,a,1),--this.size,!0}return zu=r,zu}var Gu,Zx;function $2(){if(Zx)return Gu;Zx=1;var e=wl();function t(n){var r=this.__data__,i=e(r,n);return i<0?void 0:r[i][1]}return Gu=t,Gu}var Hu,ew;function U2(){if(ew)return Hu;ew=1;var e=wl();function t(n){return e(this.__data__,n)>-1}return Hu=t,Hu}var Ku,tw;function z2(){if(tw)return Ku;tw=1;var e=wl();function t(n,r){var i=this.__data__,s=e(i,n);return s<0?(++this.size,i.push([n,r])):i[s][1]=r,this}return Ku=t,Ku}var Wu,nw;function bl(){if(nw)return Wu;nw=1;var e=V2(),t=B2(),n=$2(),r=U2(),i=z2();function s(a){var o=-1,l=a==null?0:a.length;for(this.clear();++o<l;){var u=a[o];this.set(u[0],u[1])}}return s.prototype.clear=e,s.prototype.delete=t,s.prototype.get=n,s.prototype.has=r,s.prototype.set=i,Wu=s,Wu}var Yu,rw;function G2(){if(rw)return Yu;rw=1;var e=bl();function t(){this.__data__=new e,this.size=0}return Yu=t,Yu}var Qu,iw;function H2(){if(iw)return Qu;iw=1;function e(t){var n=this.__data__,r=n.delete(t);return this.size=n.size,r}return Qu=e,Qu}var Ju,sw;function K2(){if(sw)return Ju;sw=1;function e(t){return this.__data__.get(t)}return Ju=e,Ju}var Xu,aw;function W2(){if(aw)return Xu;aw=1;function e(t){return this.__data__.has(t)}return Xu=e,Xu}var Zu,ow;function sj(){if(ow)return Zu;ow=1;var e=typeof ja=="object"&&ja&&ja.Object===Object&&ja;return Zu=e,Zu}var ec,lw;function tn(){if(lw)return ec;lw=1;var e=sj(),t=typeof self=="object"&&self&&self.Object===Object&&self,n=e||t||Function("return this")();return ec=n,ec}var tc,uw;function Gi(){if(uw)return tc;uw=1;var e=tn(),t=e.Symbol;return tc=t,tc}var nc,cw;function Y2(){if(cw)return nc;cw=1;var e=Gi(),t=Object.prototype,n=t.hasOwnProperty,r=t.toString,i=e?e.toStringTag:void 0;function s(a){var o=n.call(a,i),l=a[i];try{a[i]=void 0;var u=!0}catch{}var c=r.call(a);return u&&(o?a[i]=l:delete a[i]),c}return nc=s,nc}var rc,dw;function Q2(){if(dw)return rc;dw=1;var e=Object.prototype,t=e.toString;function n(r){return t.call(r)}return rc=n,rc}var ic,fw;function Ur(){if(fw)return ic;fw=1;var e=Gi(),t=Y2(),n=Q2(),r="[object Null]",i="[object Undefined]",s=e?e.toStringTag:void 0;function a(o){return o==null?o===void 0?i:r:s&&s in Object(o)?t(o):n(o)}return ic=a,ic}var sc,hw;function zt(){if(hw)return sc;hw=1;function e(t){var n=typeof t;return t!=null&&(n=="object"||n=="function")}return sc=e,sc}var ac,pw;function ba(){if(pw)return ac;pw=1;var e=Ur(),t=zt(),n="[object AsyncFunction]",r="[object Function]",i="[object GeneratorFunction]",s="[object Proxy]";function a(o){if(!t(o))return!1;var l=e(o);return l==r||l==i||l==n||l==s}return ac=a,ac}var oc,mw;function J2(){if(mw)return oc;mw=1;var e=tn(),t=e["__core-js_shared__"];return oc=t,oc}var lc,vw;function X2(){if(vw)return lc;vw=1;var e=J2(),t=function(){var r=/[^.]+$/.exec(e&&e.keys&&e.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}();function n(r){return!!t&&t in r}return lc=n,lc}var uc,gw;function aj(){if(gw)return uc;gw=1;var e=Function.prototype,t=e.toString;function n(r){if(r!=null){try{return t.call(r)}catch{}try{return r+""}catch{}}return""}return uc=n,uc}var cc,yw;function Z2(){if(yw)return cc;yw=1;var e=ba(),t=X2(),n=zt(),r=aj(),i=/[\\^$.*+?()[\]{}|]/g,s=/^\[object .+?Constructor\]$/,a=Function.prototype,o=Object.prototype,l=a.toString,u=o.hasOwnProperty,c=RegExp("^"+l.call(u).replace(i,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function d(h){if(!n(h)||t(h))return!1;var m=e(h)?c:s;return m.test(r(h))}return cc=d,cc}var dc,xw;function eq(){if(xw)return dc;xw=1;function e(t,n){return t==null?void 0:t[n]}return dc=e,dc}var fc,ww;function zr(){if(ww)return fc;ww=1;var e=Z2(),t=eq();function n(r,i){var s=t(r,i);return e(s)?s:void 0}return fc=n,fc}var hc,bw;function jg(){if(bw)return hc;bw=1;var e=zr(),t=tn(),n=e(t,"Map");return hc=n,hc}var pc,Sw;function Sl(){if(Sw)return pc;Sw=1;var e=zr(),t=e(Object,"create");return pc=t,pc}var mc,_w;function tq(){if(_w)return mc;_w=1;var e=Sl();function t(){this.__data__=e?e(null):{},this.size=0}return mc=t,mc}var vc,kw;function nq(){if(kw)return vc;kw=1;function e(t){var n=this.has(t)&&delete this.__data__[t];return this.size-=n?1:0,n}return vc=e,vc}var gc,Cw;function rq(){if(Cw)return gc;Cw=1;var e=Sl(),t="__lodash_hash_undefined__",n=Object.prototype,r=n.hasOwnProperty;function i(s){var a=this.__data__;if(e){var o=a[s];return o===t?void 0:o}return r.call(a,s)?a[s]:void 0}return gc=i,gc}var yc,Ew;function iq(){if(Ew)return yc;Ew=1;var e=Sl(),t=Object.prototype,n=t.hasOwnProperty;function r(i){var s=this.__data__;return e?s[i]!==void 0:n.call(s,i)}return yc=r,yc}var xc,Tw;function sq(){if(Tw)return xc;Tw=1;var e=Sl(),t="__lodash_hash_undefined__";function n(r,i){var s=this.__data__;return this.size+=this.has(r)?0:1,s[r]=e&&i===void 0?t:i,this}return xc=n,xc}var wc,jw;function aq(){if(jw)return wc;jw=1;var e=tq(),t=nq(),n=rq(),r=iq(),i=sq();function s(a){var o=-1,l=a==null?0:a.length;for(this.clear();++o<l;){var u=a[o];this.set(u[0],u[1])}}return s.prototype.clear=e,s.prototype.delete=t,s.prototype.get=n,s.prototype.has=r,s.prototype.set=i,wc=s,wc}var bc,Nw;function oq(){if(Nw)return bc;Nw=1;var e=aq(),t=bl(),n=jg();function r(){this.size=0,this.__data__={hash:new e,map:new(n||t),string:new e}}return bc=r,bc}var Sc,Mw;function lq(){if(Mw)return Sc;Mw=1;function e(t){var n=typeof t;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?t!=="__proto__":t===null}return Sc=e,Sc}var _c,Pw;function _l(){if(Pw)return _c;Pw=1;var e=lq();function t(n,r){var i=n.__data__;return e(r)?i[typeof r=="string"?"string":"hash"]:i.map}return _c=t,_c}var kc,Rw;function uq(){if(Rw)return kc;Rw=1;var e=_l();function t(n){var r=e(this,n).delete(n);return this.size-=r?1:0,r}return kc=t,kc}var Cc,Aw;function cq(){if(Aw)return Cc;Aw=1;var e=_l();function t(n){return e(this,n).get(n)}return Cc=t,Cc}var Ec,Iw;function dq(){if(Iw)return Ec;Iw=1;var e=_l();function t(n){return e(this,n).has(n)}return Ec=t,Ec}var Tc,Dw;function fq(){if(Dw)return Tc;Dw=1;var e=_l();function t(n,r){var i=e(this,n),s=i.size;return i.set(n,r),this.size+=i.size==s?0:1,this}return Tc=t,Tc}var jc,Lw;function Ng(){if(Lw)return jc;Lw=1;var e=oq(),t=uq(),n=cq(),r=dq(),i=fq();function s(a){var o=-1,l=a==null?0:a.length;for(this.clear();++o<l;){var u=a[o];this.set(u[0],u[1])}}return s.prototype.clear=e,s.prototype.delete=t,s.prototype.get=n,s.prototype.has=r,s.prototype.set=i,jc=s,jc}var Nc,Ow;function hq(){if(Ow)return Nc;Ow=1;var e=bl(),t=jg(),n=Ng(),r=200;function i(s,a){var o=this.__data__;if(o instanceof e){var l=o.__data__;if(!t||l.length<r-1)return l.push([s,a]),this.size=++o.size,this;o=this.__data__=new n(l)}return o.set(s,a),this.size=o.size,this}return Nc=i,Nc}var Mc,qw;function kl(){if(qw)return Mc;qw=1;var e=bl(),t=G2(),n=H2(),r=K2(),i=W2(),s=hq();function a(o){var l=this.__data__=new e(o);this.size=l.size}return a.prototype.clear=t,a.prototype.delete=n,a.prototype.get=r,a.prototype.has=i,a.prototype.set=s,Mc=a,Mc}var Pc,Fw;function Mg(){if(Fw)return Pc;Fw=1;function e(t,n){for(var r=-1,i=t==null?0:t.length;++r<i&&n(t[r],r,t)!==!1;);return t}return Pc=e,Pc}var Rc,Vw;function oj(){if(Vw)return Rc;Vw=1;var e=zr(),t=function(){try{var n=e(Object,"defineProperty");return n({},"",{}),n}catch{}}();return Rc=t,Rc}var Ac,Bw;function Cl(){if(Bw)return Ac;Bw=1;var e=oj();function t(n,r,i){r=="__proto__"&&e?e(n,r,{configurable:!0,enumerable:!0,value:i,writable:!0}):n[r]=i}return Ac=t,Ac}var Ic,$w;function El(){if($w)return Ic;$w=1;var e=Cl(),t=zi(),n=Object.prototype,r=n.hasOwnProperty;function i(s,a,o){var l=s[a];(!(r.call(s,a)&&t(l,o))||o===void 0&&!(a in s))&&e(s,a,o)}return Ic=i,Ic}var Dc,Uw;function Sa(){if(Uw)return Dc;Uw=1;var e=El(),t=Cl();function n(r,i,s,a){var o=!s;s||(s={});for(var l=-1,u=i.length;++l<u;){var c=i[l],d=a?a(s[c],r[c],c,s,r):void 0;d===void 0&&(d=r[c]),o?t(s,c,d):e(s,c,d)}return s}return Dc=n,Dc}var Lc,zw;function pq(){if(zw)return Lc;zw=1;function e(t,n){for(var r=-1,i=Array(t);++r<t;)i[r]=n(r);return i}return Lc=e,Lc}var Oc,Gw;function mn(){if(Gw)return Oc;Gw=1;function e(t){return t!=null&&typeof t=="object"}return Oc=e,Oc}var qc,Hw;function mq(){if(Hw)return qc;Hw=1;var e=Ur(),t=mn(),n="[object Arguments]";function r(i){return t(i)&&e(i)==n}return qc=r,qc}var Fc,Kw;function _a(){if(Kw)return Fc;Kw=1;var e=mq(),t=mn(),n=Object.prototype,r=n.hasOwnProperty,i=n.propertyIsEnumerable,s=e(function(){return arguments}())?e:function(a){return t(a)&&r.call(a,"callee")&&!i.call(a,"callee")};return Fc=s,Fc}var Vc,Ww;function Ue(){if(Ww)return Vc;Ww=1;var e=Array.isArray;return Vc=e,Vc}var ks={exports:{}},Bc,Yw;function vq(){if(Yw)return Bc;Yw=1;function e(){return!1}return Bc=e,Bc}ks.exports;var Qw;function Hi(){return Qw||(Qw=1,function(e,t){var n=tn(),r=vq(),i=t&&!t.nodeType&&t,s=i&&!0&&e&&!e.nodeType&&e,a=s&&s.exports===i,o=a?n.Buffer:void 0,l=o?o.isBuffer:void 0,u=l||r;e.exports=u}(ks,ks.exports)),ks.exports}var $c,Jw;function Tl(){if(Jw)return $c;Jw=1;var e=9007199254740991,t=/^(?:0|[1-9]\d*)$/;function n(r,i){var s=typeof r;return i=i??e,!!i&&(s=="number"||s!="symbol"&&t.test(r))&&r>-1&&r%1==0&&r<i}return $c=n,$c}var Uc,Xw;function Pg(){if(Xw)return Uc;Xw=1;var e=9007199254740991;function t(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=e}return Uc=t,Uc}var zc,Zw;function gq(){if(Zw)return zc;Zw=1;var e=Ur(),t=Pg(),n=mn(),r="[object Arguments]",i="[object Array]",s="[object Boolean]",a="[object Date]",o="[object Error]",l="[object Function]",u="[object Map]",c="[object Number]",d="[object Object]",h="[object RegExp]",m="[object Set]",g="[object String]",p="[object WeakMap]",w="[object ArrayBuffer]",v="[object DataView]",y="[object Float32Array]",x="[object Float64Array]",S="[object Int8Array]",k="[object Int16Array]",E="[object Int32Array]",j="[object Uint8Array]",T="[object Uint8ClampedArray]",M="[object Uint16Array]",D="[object Uint32Array]",R={};R[y]=R[x]=R[S]=R[k]=R[E]=R[j]=R[T]=R[M]=R[D]=!0,R[r]=R[i]=R[w]=R[s]=R[v]=R[a]=R[o]=R[l]=R[u]=R[c]=R[d]=R[h]=R[m]=R[g]=R[p]=!1;function H(Y){return n(Y)&&t(Y.length)&&!!R[e(Y)]}return zc=H,zc}var Gc,eb;function jl(){if(eb)return Gc;eb=1;function e(t){return function(n){return t(n)}}return Gc=e,Gc}var Cs={exports:{}};Cs.exports;var tb;function Rg(){return tb||(tb=1,function(e,t){var n=sj(),r=t&&!t.nodeType&&t,i=r&&!0&&e&&!e.nodeType&&e,s=i&&i.exports===r,a=s&&n.process,o=function(){try{var l=i&&i.require&&i.require("util").types;return l||a&&a.binding&&a.binding("util")}catch{}}();e.exports=o}(Cs,Cs.exports)),Cs.exports}var Hc,nb;function ka(){if(nb)return Hc;nb=1;var e=gq(),t=jl(),n=Rg(),r=n&&n.isTypedArray,i=r?t(r):e;return Hc=i,Hc}var Kc,rb;function lj(){if(rb)return Kc;rb=1;var e=pq(),t=_a(),n=Ue(),r=Hi(),i=Tl(),s=ka(),a=Object.prototype,o=a.hasOwnProperty;function l(u,c){var d=n(u),h=!d&&t(u),m=!d&&!h&&r(u),g=!d&&!h&&!m&&s(u),p=d||h||m||g,w=p?e(u.length,String):[],v=w.length;for(var y in u)(c||o.call(u,y))&&!(p&&(y=="length"||m&&(y=="offset"||y=="parent")||g&&(y=="buffer"||y=="byteLength"||y=="byteOffset")||i(y,v)))&&w.push(y);return w}return Kc=l,Kc}var Wc,ib;function Nl(){if(ib)return Wc;ib=1;var e=Object.prototype;function t(n){var r=n&&n.constructor,i=typeof r=="function"&&r.prototype||e;return n===i}return Wc=t,Wc}var Yc,sb;function uj(){if(sb)return Yc;sb=1;function e(t,n){return function(r){return t(n(r))}}return Yc=e,Yc}var Qc,ab;function yq(){if(ab)return Qc;ab=1;var e=uj(),t=e(Object.keys,Object);return Qc=t,Qc}var Jc,ob;function Ag(){if(ob)return Jc;ob=1;var e=Nl(),t=yq(),n=Object.prototype,r=n.hasOwnProperty;function i(s){if(!e(s))return t(s);var a=[];for(var o in Object(s))r.call(s,o)&&o!="constructor"&&a.push(o);return a}return Jc=i,Jc}var Xc,lb;function On(){if(lb)return Xc;lb=1;var e=ba(),t=Pg();function n(r){return r!=null&&t(r.length)&&!e(r)}return Xc=n,Xc}var Zc,ub;function yr(){if(ub)return Zc;ub=1;var e=lj(),t=Ag(),n=On();function r(i){return n(i)?e(i):t(i)}return Zc=r,Zc}var ed,cb;function xq(){if(cb)return ed;cb=1;var e=Sa(),t=yr();function n(r,i){return r&&e(i,t(i),r)}return ed=n,ed}var td,db;function wq(){if(db)return td;db=1;function e(t){var n=[];if(t!=null)for(var r in Object(t))n.push(r);return n}return td=e,td}var nd,fb;function bq(){if(fb)return nd;fb=1;var e=zt(),t=Nl(),n=wq(),r=Object.prototype,i=r.hasOwnProperty;function s(a){if(!e(a))return n(a);var o=t(a),l=[];for(var u in a)u=="constructor"&&(o||!i.call(a,u))||l.push(u);return l}return nd=s,nd}var rd,hb;function Gr(){if(hb)return rd;hb=1;var e=lj(),t=bq(),n=On();function r(i){return n(i)?e(i,!0):t(i)}return rd=r,rd}var id,pb;function Sq(){if(pb)return id;pb=1;var e=Sa(),t=Gr();function n(r,i){return r&&e(i,t(i),r)}return id=n,id}var Es={exports:{}};Es.exports;var mb;function cj(){return mb||(mb=1,function(e,t){var n=tn(),r=t&&!t.nodeType&&t,i=r&&!0&&e&&!e.nodeType&&e,s=i&&i.exports===r,a=s?n.Buffer:void 0,o=a?a.allocUnsafe:void 0;function l(u,c){if(c)return u.slice();var d=u.length,h=o?o(d):new u.constructor(d);return u.copy(h),h}e.exports=l}(Es,Es.exports)),Es.exports}var sd,vb;function dj(){if(vb)return sd;vb=1;function e(t,n){var r=-1,i=t.length;for(n||(n=Array(i));++r<i;)n[r]=t[r];return n}return sd=e,sd}var ad,gb;function fj(){if(gb)return ad;gb=1;function e(t,n){for(var r=-1,i=t==null?0:t.length,s=0,a=[];++r<i;){var o=t[r];n(o,r,t)&&(a[s++]=o)}return a}return ad=e,ad}var od,yb;function hj(){if(yb)return od;yb=1;function e(){return[]}return od=e,od}var ld,xb;function Ig(){if(xb)return ld;xb=1;var e=fj(),t=hj(),n=Object.prototype,r=n.propertyIsEnumerable,i=Object.getOwnPropertySymbols,s=i?function(a){return a==null?[]:(a=Object(a),e(i(a),function(o){return r.call(a,o)}))}:t;return ld=s,ld}var ud,wb;function _q(){if(wb)return ud;wb=1;var e=Sa(),t=Ig();function n(r,i){return e(r,t(r),i)}return ud=n,ud}var cd,bb;function Dg(){if(bb)return cd;bb=1;function e(t,n){for(var r=-1,i=n.length,s=t.length;++r<i;)t[s+r]=n[r];return t}return cd=e,cd}var dd,Sb;function Ml(){if(Sb)return dd;Sb=1;var e=uj(),t=e(Object.getPrototypeOf,Object);return dd=t,dd}var fd,_b;function pj(){if(_b)return fd;_b=1;var e=Dg(),t=Ml(),n=Ig(),r=hj(),i=Object.getOwnPropertySymbols,s=i?function(a){for(var o=[];a;)e(o,n(a)),a=t(a);return o}:r;return fd=s,fd}var hd,kb;function kq(){if(kb)return hd;kb=1;var e=Sa(),t=pj();function n(r,i){return e(r,t(r),i)}return hd=n,hd}var pd,Cb;function mj(){if(Cb)return pd;Cb=1;var e=Dg(),t=Ue();function n(r,i,s){var a=i(r);return t(r)?a:e(a,s(r))}return pd=n,pd}var md,Eb;function vj(){if(Eb)return md;Eb=1;var e=mj(),t=Ig(),n=yr();function r(i){return e(i,n,t)}return md=r,md}var vd,Tb;function Cq(){if(Tb)return vd;Tb=1;var e=mj(),t=pj(),n=Gr();function r(i){return e(i,n,t)}return vd=r,vd}var gd,jb;function Eq(){if(jb)return gd;jb=1;var e=zr(),t=tn(),n=e(t,"DataView");return gd=n,gd}var yd,Nb;function Tq(){if(Nb)return yd;Nb=1;var e=zr(),t=tn(),n=e(t,"Promise");return yd=n,yd}var xd,Mb;function gj(){if(Mb)return xd;Mb=1;var e=zr(),t=tn(),n=e(t,"Set");return xd=n,xd}var wd,Pb;function jq(){if(Pb)return wd;Pb=1;var e=zr(),t=tn(),n=e(t,"WeakMap");return wd=n,wd}var bd,Rb;function Ki(){if(Rb)return bd;Rb=1;var e=Eq(),t=jg(),n=Tq(),r=gj(),i=jq(),s=Ur(),a=aj(),o="[object Map]",l="[object Object]",u="[object Promise]",c="[object Set]",d="[object WeakMap]",h="[object DataView]",m=a(e),g=a(t),p=a(n),w=a(r),v=a(i),y=s;return(e&&y(new e(new ArrayBuffer(1)))!=h||t&&y(new t)!=o||n&&y(n.resolve())!=u||r&&y(new r)!=c||i&&y(new i)!=d)&&(y=function(x){var S=s(x),k=S==l?x.constructor:void 0,E=k?a(k):"";if(E)switch(E){case m:return h;case g:return o;case p:return u;case w:return c;case v:return d}return S}),bd=y,bd}var Sd,Ab;function Nq(){if(Ab)return Sd;Ab=1;var e=Object.prototype,t=e.hasOwnProperty;function n(r){var i=r.length,s=new r.constructor(i);return i&&typeof r[0]=="string"&&t.call(r,"index")&&(s.index=r.index,s.input=r.input),s}return Sd=n,Sd}var _d,Ib;function yj(){if(Ib)return _d;Ib=1;var e=tn(),t=e.Uint8Array;return _d=t,_d}var kd,Db;function Lg(){if(Db)return kd;Db=1;var e=yj();function t(n){var r=new n.constructor(n.byteLength);return new e(r).set(new e(n)),r}return kd=t,kd}var Cd,Lb;function Mq(){if(Lb)return Cd;Lb=1;var e=Lg();function t(n,r){var i=r?e(n.buffer):n.buffer;return new n.constructor(i,n.byteOffset,n.byteLength)}return Cd=t,Cd}var Ed,Ob;function Pq(){if(Ob)return Ed;Ob=1;var e=/\w*$/;function t(n){var r=new n.constructor(n.source,e.exec(n));return r.lastIndex=n.lastIndex,r}return Ed=t,Ed}var Td,qb;function Rq(){if(qb)return Td;qb=1;var e=Gi(),t=e?e.prototype:void 0,n=t?t.valueOf:void 0;function r(i){return n?Object(n.call(i)):{}}return Td=r,Td}var jd,Fb;function xj(){if(Fb)return jd;Fb=1;var e=Lg();function t(n,r){var i=r?e(n.buffer):n.buffer;return new n.constructor(i,n.byteOffset,n.length)}return jd=t,jd}var Nd,Vb;function Aq(){if(Vb)return Nd;Vb=1;var e=Lg(),t=Mq(),n=Pq(),r=Rq(),i=xj(),s="[object Boolean]",a="[object Date]",o="[object Map]",l="[object Number]",u="[object RegExp]",c="[object Set]",d="[object String]",h="[object Symbol]",m="[object ArrayBuffer]",g="[object DataView]",p="[object Float32Array]",w="[object Float64Array]",v="[object Int8Array]",y="[object Int16Array]",x="[object Int32Array]",S="[object Uint8Array]",k="[object Uint8ClampedArray]",E="[object Uint16Array]",j="[object Uint32Array]";function T(M,D,R){var H=M.constructor;switch(D){case m:return e(M);case s:case a:return new H(+M);case g:return t(M,R);case p:case w:case v:case y:case x:case S:case k:case E:case j:return i(M,R);case o:return new H;case l:case d:return new H(M);case u:return n(M);case c:return new H;case h:return r(M)}}return Nd=T,Nd}var Md,Bb;function wj(){if(Bb)return Md;Bb=1;var e=zt(),t=Object.create,n=function(){function r(){}return function(i){if(!e(i))return{};if(t)return t(i);r.prototype=i;var s=new r;return r.prototype=void 0,s}}();return Md=n,Md}var Pd,$b;function bj(){if($b)return Pd;$b=1;var e=wj(),t=Ml(),n=Nl();function r(i){return typeof i.constructor=="function"&&!n(i)?e(t(i)):{}}return Pd=r,Pd}var Rd,Ub;function Iq(){if(Ub)return Rd;Ub=1;var e=Ki(),t=mn(),n="[object Map]";function r(i){return t(i)&&e(i)==n}return Rd=r,Rd}var Ad,zb;function Dq(){if(zb)return Ad;zb=1;var e=Iq(),t=jl(),n=Rg(),r=n&&n.isMap,i=r?t(r):e;return Ad=i,Ad}var Id,Gb;function Lq(){if(Gb)return Id;Gb=1;var e=Ki(),t=mn(),n="[object Set]";function r(i){return t(i)&&e(i)==n}return Id=r,Id}var Dd,Hb;function Oq(){if(Hb)return Dd;Hb=1;var e=Lq(),t=jl(),n=Rg(),r=n&&n.isSet,i=r?t(r):e;return Dd=i,Dd}var Ld,Kb;function Sj(){if(Kb)return Ld;Kb=1;var e=kl(),t=Mg(),n=El(),r=xq(),i=Sq(),s=cj(),a=dj(),o=_q(),l=kq(),u=vj(),c=Cq(),d=Ki(),h=Nq(),m=Aq(),g=bj(),p=Ue(),w=Hi(),v=Dq(),y=zt(),x=Oq(),S=yr(),k=Gr(),E=1,j=2,T=4,M="[object Arguments]",D="[object Array]",R="[object Boolean]",H="[object Date]",Y="[object Error]",pe="[object Function]",F="[object GeneratorFunction]",le="[object Map]",se="[object Number]",A="[object Object]",I="[object RegExp]",z="[object Set]",U="[object String]",re="[object Symbol]",Te="[object WeakMap]",ue="[object ArrayBuffer]",ge="[object DataView]",xe="[object Float32Array]",tt="[object Float64Array]",nt="[object Int8Array]",ct="[object Int16Array]",At="[object Int32Array]",vn="[object Uint8Array]",Fn="[object Uint8ClampedArray]",O="[object Uint16Array]",ee="[object Uint32Array]",J={};J[M]=J[D]=J[ue]=J[ge]=J[R]=J[H]=J[xe]=J[tt]=J[nt]=J[ct]=J[At]=J[le]=J[se]=J[A]=J[I]=J[z]=J[U]=J[re]=J[vn]=J[Fn]=J[O]=J[ee]=!0,J[Y]=J[pe]=J[Te]=!1;function Le(te,Re,Ht,xr,St,Be){var ye,It=Re&E,rn=Re&j,Yi=Re&T;if(Ht&&(ye=St?Ht(te,xr,St,Be):Ht(te)),ye!==void 0)return ye;if(!y(te))return te;var Vn=p(te);if(Vn){if(ye=h(te),!It)return a(te,ye)}else{var fe=d(te),Wr=fe==pe||fe==F;if(w(te))return s(te,It);if(fe==A||fe==M||Wr&&!St){if(ye=rn||Wr?{}:g(te),!It)return rn?l(te,i(ye,te)):o(te,r(ye,te))}else{if(!J[fe])return St?te:{};ye=m(te,fe,It)}}Be||(Be=new e);var sn=Be.get(te);if(sn)return sn;Be.set(te,ye),x(te)?te.forEach(function(mt){ye.add(Le(mt,Re,Ht,mt,te,Be))}):v(te)&&te.forEach(function(mt,N){ye.set(N,Le(mt,Re,Ht,N,te,Be))});var Yr=Yi?rn?c:u:rn?k:S,be=Vn?void 0:Yr(te);return t(be||te,function(mt,N){be&&(N=mt,mt=te[N]),n(ye,N,Le(mt,Re,Ht,N,te,Be))}),ye}return Ld=Le,Ld}var Od,Wb;function qq(){if(Wb)return Od;Wb=1;var e=Sj(),t=4;function n(r){return e(r,t)}return Od=n,Od}var qd,Yb;function Og(){if(Yb)return qd;Yb=1;function e(t){return function(){return t}}return qd=e,qd}var Fd,Qb;function Fq(){if(Qb)return Fd;Qb=1;function e(t){return function(n,r,i){for(var s=-1,a=Object(n),o=i(n),l=o.length;l--;){var u=o[t?l:++s];if(r(a[u],u,a)===!1)break}return n}}return Fd=e,Fd}var Vd,Jb;function qg(){if(Jb)return Vd;Jb=1;var e=Fq(),t=e();return Vd=t,Vd}var Bd,Xb;function Fg(){if(Xb)return Bd;Xb=1;var e=qg(),t=yr();function n(r,i){return r&&e(r,i,t)}return Bd=n,Bd}var $d,Zb;function Vq(){if(Zb)return $d;Zb=1;var e=On();function t(n,r){return function(i,s){if(i==null)return i;if(!e(i))return n(i,s);for(var a=i.length,o=r?a:-1,l=Object(i);(r?o--:++o<a)&&s(l[o],o,l)!==!1;);return i}}return $d=t,$d}var Ud,e1;function Pl(){if(e1)return Ud;e1=1;var e=Fg(),t=Vq(),n=t(e);return Ud=n,Ud}var zd,t1;function Hr(){if(t1)return zd;t1=1;function e(t){return t}return zd=e,zd}var Gd,n1;function _j(){if(n1)return Gd;n1=1;var e=Hr();function t(n){return typeof n=="function"?n:e}return Gd=t,Gd}var Hd,r1;function kj(){if(r1)return Hd;r1=1;var e=Mg(),t=Pl(),n=_j(),r=Ue();function i(s,a){var o=r(s)?e:t;return o(s,n(a))}return Hd=i,Hd}var Kd,i1;function Cj(){return i1||(i1=1,Kd=kj()),Kd}var Wd,s1;function Bq(){if(s1)return Wd;s1=1;var e=Pl();function t(n,r){var i=[];return e(n,function(s,a,o){r(s,a,o)&&i.push(s)}),i}return Wd=t,Wd}var Yd,a1;function $q(){if(a1)return Yd;a1=1;var e="__lodash_hash_undefined__";function t(n){return this.__data__.set(n,e),this}return Yd=t,Yd}var Qd,o1;function Uq(){if(o1)return Qd;o1=1;function e(t){return this.__data__.has(t)}return Qd=e,Qd}var Jd,l1;function Ej(){if(l1)return Jd;l1=1;var e=Ng(),t=$q(),n=Uq();function r(i){var s=-1,a=i==null?0:i.length;for(this.__data__=new e;++s<a;)this.add(i[s])}return r.prototype.add=r.prototype.push=t,r.prototype.has=n,Jd=r,Jd}var Xd,u1;function zq(){if(u1)return Xd;u1=1;function e(t,n){for(var r=-1,i=t==null?0:t.length;++r<i;)if(n(t[r],r,t))return!0;return!1}return Xd=e,Xd}var Zd,c1;function Tj(){if(c1)return Zd;c1=1;function e(t,n){return t.has(n)}return Zd=e,Zd}var ef,d1;function jj(){if(d1)return ef;d1=1;var e=Ej(),t=zq(),n=Tj(),r=1,i=2;function s(a,o,l,u,c,d){var h=l&r,m=a.length,g=o.length;if(m!=g&&!(h&&g>m))return!1;var p=d.get(a),w=d.get(o);if(p&&w)return p==o&&w==a;var v=-1,y=!0,x=l&i?new e:void 0;for(d.set(a,o),d.set(o,a);++v<m;){var S=a[v],k=o[v];if(u)var E=h?u(k,S,v,o,a,d):u(S,k,v,a,o,d);if(E!==void 0){if(E)continue;y=!1;break}if(x){if(!t(o,function(j,T){if(!n(x,T)&&(S===j||c(S,j,l,u,d)))return x.push(T)})){y=!1;break}}else if(!(S===k||c(S,k,l,u,d))){y=!1;break}}return d.delete(a),d.delete(o),y}return ef=s,ef}var tf,f1;function Gq(){if(f1)return tf;f1=1;function e(t){var n=-1,r=Array(t.size);return t.forEach(function(i,s){r[++n]=[s,i]}),r}return tf=e,tf}var nf,h1;function Vg(){if(h1)return nf;h1=1;function e(t){var n=-1,r=Array(t.size);return t.forEach(function(i){r[++n]=i}),r}return nf=e,nf}var rf,p1;function Hq(){if(p1)return rf;p1=1;var e=Gi(),t=yj(),n=zi(),r=jj(),i=Gq(),s=Vg(),a=1,o=2,l="[object Boolean]",u="[object Date]",c="[object Error]",d="[object Map]",h="[object Number]",m="[object RegExp]",g="[object Set]",p="[object String]",w="[object Symbol]",v="[object ArrayBuffer]",y="[object DataView]",x=e?e.prototype:void 0,S=x?x.valueOf:void 0;function k(E,j,T,M,D,R,H){switch(T){case y:if(E.byteLength!=j.byteLength||E.byteOffset!=j.byteOffset)return!1;E=E.buffer,j=j.buffer;case v:return!(E.byteLength!=j.byteLength||!R(new t(E),new t(j)));case l:case u:case h:return n(+E,+j);case c:return E.name==j.name&&E.message==j.message;case m:case p:return E==j+"";case d:var Y=i;case g:var pe=M&a;if(Y||(Y=s),E.size!=j.size&&!pe)return!1;var F=H.get(E);if(F)return F==j;M|=o,H.set(E,j);var le=r(Y(E),Y(j),M,D,R,H);return H.delete(E),le;case w:if(S)return S.call(E)==S.call(j)}return!1}return rf=k,rf}var sf,m1;function Kq(){if(m1)return sf;m1=1;var e=vj(),t=1,n=Object.prototype,r=n.hasOwnProperty;function i(s,a,o,l,u,c){var d=o&t,h=e(s),m=h.length,g=e(a),p=g.length;if(m!=p&&!d)return!1;for(var w=m;w--;){var v=h[w];if(!(d?v in a:r.call(a,v)))return!1}var y=c.get(s),x=c.get(a);if(y&&x)return y==a&&x==s;var S=!0;c.set(s,a),c.set(a,s);for(var k=d;++w<m;){v=h[w];var E=s[v],j=a[v];if(l)var T=d?l(j,E,v,a,s,c):l(E,j,v,s,a,c);if(!(T===void 0?E===j||u(E,j,o,l,c):T)){S=!1;break}k||(k=v=="constructor")}if(S&&!k){var M=s.constructor,D=a.constructor;M!=D&&"constructor"in s&&"constructor"in a&&!(typeof M=="function"&&M instanceof M&&typeof D=="function"&&D instanceof D)&&(S=!1)}return c.delete(s),c.delete(a),S}return sf=i,sf}var af,v1;function Wq(){if(v1)return af;v1=1;var e=kl(),t=jj(),n=Hq(),r=Kq(),i=Ki(),s=Ue(),a=Hi(),o=ka(),l=1,u="[object Arguments]",c="[object Array]",d="[object Object]",h=Object.prototype,m=h.hasOwnProperty;function g(p,w,v,y,x,S){var k=s(p),E=s(w),j=k?c:i(p),T=E?c:i(w);j=j==u?d:j,T=T==u?d:T;var M=j==d,D=T==d,R=j==T;if(R&&a(p)){if(!a(w))return!1;k=!0,M=!1}if(R&&!M)return S||(S=new e),k||o(p)?t(p,w,v,y,x,S):n(p,w,j,v,y,x,S);if(!(v&l)){var H=M&&m.call(p,"__wrapped__"),Y=D&&m.call(w,"__wrapped__");if(H||Y){var pe=H?p.value():p,F=Y?w.value():w;return S||(S=new e),x(pe,F,v,y,S)}}return R?(S||(S=new e),r(p,w,v,y,x,S)):!1}return af=g,af}var of,g1;function Nj(){if(g1)return of;g1=1;var e=Wq(),t=mn();function n(r,i,s,a,o){return r===i?!0:r==null||i==null||!t(r)&&!t(i)?r!==r&&i!==i:e(r,i,s,a,n,o)}return of=n,of}var lf,y1;function Yq(){if(y1)return lf;y1=1;var e=kl(),t=Nj(),n=1,r=2;function i(s,a,o,l){var u=o.length,c=u,d=!l;if(s==null)return!c;for(s=Object(s);u--;){var h=o[u];if(d&&h[2]?h[1]!==s[h[0]]:!(h[0]in s))return!1}for(;++u<c;){h=o[u];var m=h[0],g=s[m],p=h[1];if(d&&h[2]){if(g===void 0&&!(m in s))return!1}else{var w=new e;if(l)var v=l(g,p,m,s,a,w);if(!(v===void 0?t(p,g,n|r,l,w):v))return!1}}return!0}return lf=i,lf}var uf,x1;function Mj(){if(x1)return uf;x1=1;var e=zt();function t(n){return n===n&&!e(n)}return uf=t,uf}var cf,w1;function Qq(){if(w1)return cf;w1=1;var e=Mj(),t=yr();function n(r){for(var i=t(r),s=i.length;s--;){var a=i[s],o=r[a];i[s]=[a,o,e(o)]}return i}return cf=n,cf}var df,b1;function Pj(){if(b1)return df;b1=1;function e(t,n){return function(r){return r==null?!1:r[t]===n&&(n!==void 0||t in Object(r))}}return df=e,df}var ff,S1;function Jq(){if(S1)return ff;S1=1;var e=Yq(),t=Qq(),n=Pj();function r(i){var s=t(i);return s.length==1&&s[0][2]?n(s[0][0],s[0][1]):function(a){return a===i||e(a,i,s)}}return ff=r,ff}var hf,_1;function Wi(){if(_1)return hf;_1=1;var e=Ur(),t=mn(),n="[object Symbol]";function r(i){return typeof i=="symbol"||t(i)&&e(i)==n}return hf=r,hf}var pf,k1;function Bg(){if(k1)return pf;k1=1;var e=Ue(),t=Wi(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function i(s,a){if(e(s))return!1;var o=typeof s;return o=="number"||o=="symbol"||o=="boolean"||s==null||t(s)?!0:r.test(s)||!n.test(s)||a!=null&&s in Object(a)}return pf=i,pf}var mf,C1;function Xq(){if(C1)return mf;C1=1;var e=Ng(),t="Expected a function";function n(r,i){if(typeof r!="function"||i!=null&&typeof i!="function")throw new TypeError(t);var s=function(){var a=arguments,o=i?i.apply(this,a):a[0],l=s.cache;if(l.has(o))return l.get(o);var u=r.apply(this,a);return s.cache=l.set(o,u)||l,u};return s.cache=new(n.Cache||e),s}return n.Cache=e,mf=n,mf}var vf,E1;function Zq(){if(E1)return vf;E1=1;var e=Xq(),t=500;function n(r){var i=e(r,function(a){return s.size===t&&s.clear(),a}),s=i.cache;return i}return vf=n,vf}var gf,T1;function eF(){if(T1)return gf;T1=1;var e=Zq(),t=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,n=/\\(\\)?/g,r=e(function(i){var s=[];return i.charCodeAt(0)===46&&s.push(""),i.replace(t,function(a,o,l,u){s.push(l?u.replace(n,"$1"):o||a)}),s});return gf=r,gf}var yf,j1;function Rl(){if(j1)return yf;j1=1;function e(t,n){for(var r=-1,i=t==null?0:t.length,s=Array(i);++r<i;)s[r]=n(t[r],r,t);return s}return yf=e,yf}var xf,N1;function tF(){if(N1)return xf;N1=1;var e=Gi(),t=Rl(),n=Ue(),r=Wi(),i=e?e.prototype:void 0,s=i?i.toString:void 0;function a(o){if(typeof o=="string")return o;if(n(o))return t(o,a)+"";if(r(o))return s?s.call(o):"";var l=o+"";return l=="0"&&1/o==-1/0?"-0":l}return xf=a,xf}var wf,M1;function Rj(){if(M1)return wf;M1=1;var e=tF();function t(n){return n==null?"":e(n)}return wf=t,wf}var bf,P1;function Al(){if(P1)return bf;P1=1;var e=Ue(),t=Bg(),n=eF(),r=Rj();function i(s,a){return e(s)?s:t(s,a)?[s]:n(r(s))}return bf=i,bf}var Sf,R1;function Ca(){if(R1)return Sf;R1=1;var e=Wi();function t(n){if(typeof n=="string"||e(n))return n;var r=n+"";return r=="0"&&1/n==-1/0?"-0":r}return Sf=t,Sf}var _f,A1;function Il(){if(A1)return _f;A1=1;var e=Al(),t=Ca();function n(r,i){i=e(i,r);for(var s=0,a=i.length;r!=null&&s<a;)r=r[t(i[s++])];return s&&s==a?r:void 0}return _f=n,_f}var kf,I1;function nF(){if(I1)return kf;I1=1;var e=Il();function t(n,r,i){var s=n==null?void 0:e(n,r);return s===void 0?i:s}return kf=t,kf}var Cf,D1;function rF(){if(D1)return Cf;D1=1;function e(t,n){return t!=null&&n in Object(t)}return Cf=e,Cf}var Ef,L1;function Aj(){if(L1)return Ef;L1=1;var e=Al(),t=_a(),n=Ue(),r=Tl(),i=Pg(),s=Ca();function a(o,l,u){l=e(l,o);for(var c=-1,d=l.length,h=!1;++c<d;){var m=s(l[c]);if(!(h=o!=null&&u(o,m)))break;o=o[m]}return h||++c!=d?h:(d=o==null?0:o.length,!!d&&i(d)&&r(m,d)&&(n(o)||t(o)))}return Ef=a,Ef}var Tf,O1;function Ij(){if(O1)return Tf;O1=1;var e=rF(),t=Aj();function n(r,i){return r!=null&&t(r,i,e)}return Tf=n,Tf}var jf,q1;function iF(){if(q1)return jf;q1=1;var e=Nj(),t=nF(),n=Ij(),r=Bg(),i=Mj(),s=Pj(),a=Ca(),o=1,l=2;function u(c,d){return r(c)&&i(d)?s(a(c),d):function(h){var m=t(h,c);return m===void 0&&m===d?n(h,c):e(d,m,o|l)}}return jf=u,jf}var Nf,F1;function Dj(){if(F1)return Nf;F1=1;function e(t){return function(n){return n==null?void 0:n[t]}}return Nf=e,Nf}var Mf,V1;function sF(){if(V1)return Mf;V1=1;var e=Il();function t(n){return function(r){return e(r,n)}}return Mf=t,Mf}var Pf,B1;function aF(){if(B1)return Pf;B1=1;var e=Dj(),t=sF(),n=Bg(),r=Ca();function i(s){return n(s)?e(r(s)):t(s)}return Pf=i,Pf}var Rf,$1;function qn(){if($1)return Rf;$1=1;var e=Jq(),t=iF(),n=Hr(),r=Ue(),i=aF();function s(a){return typeof a=="function"?a:a==null?n:typeof a=="object"?r(a)?t(a[0],a[1]):e(a):i(a)}return Rf=s,Rf}var Af,U1;function Lj(){if(U1)return Af;U1=1;var e=fj(),t=Bq(),n=qn(),r=Ue();function i(s,a){var o=r(s)?e:t;return o(s,n(a,3))}return Af=i,Af}var If,z1;function oF(){if(z1)return If;z1=1;var e=Object.prototype,t=e.hasOwnProperty;function n(r,i){return r!=null&&t.call(r,i)}return If=n,If}var Df,G1;function Oj(){if(G1)return Df;G1=1;var e=oF(),t=Aj();function n(r,i){return r!=null&&t(r,i,e)}return Df=n,Df}var Lf,H1;function lF(){if(H1)return Lf;H1=1;var e=Ag(),t=Ki(),n=_a(),r=Ue(),i=On(),s=Hi(),a=Nl(),o=ka(),l="[object Map]",u="[object Set]",c=Object.prototype,d=c.hasOwnProperty;function h(m){if(m==null)return!0;if(i(m)&&(r(m)||typeof m=="string"||typeof m.splice=="function"||s(m)||o(m)||n(m)))return!m.length;var g=t(m);if(g==l||g==u)return!m.size;if(a(m))return!e(m).length;for(var p in m)if(d.call(m,p))return!1;return!0}return Lf=h,Lf}var Of,K1;function qj(){if(K1)return Of;K1=1;function e(t){return t===void 0}return Of=e,Of}var qf,W1;function Fj(){if(W1)return qf;W1=1;var e=Pl(),t=On();function n(r,i){var s=-1,a=t(r)?Array(r.length):[];return e(r,function(o,l,u){a[++s]=i(o,l,u)}),a}return qf=n,qf}var Ff,Y1;function Vj(){if(Y1)return Ff;Y1=1;var e=Rl(),t=qn(),n=Fj(),r=Ue();function i(s,a){var o=r(s)?e:n;return o(s,t(a,3))}return Ff=i,Ff}var Vf,Q1;function uF(){if(Q1)return Vf;Q1=1;function e(t,n,r,i){var s=-1,a=t==null?0:t.length;for(i&&a&&(r=t[++s]);++s<a;)r=n(r,t[s],s,t);return r}return Vf=e,Vf}var Bf,J1;function cF(){if(J1)return Bf;J1=1;function e(t,n,r,i,s){return s(t,function(a,o,l){r=i?(i=!1,a):n(r,a,o,l)}),r}return Bf=e,Bf}var $f,X1;function Bj(){if(X1)return $f;X1=1;var e=uF(),t=Pl(),n=qn(),r=cF(),i=Ue();function s(a,o,l){var u=i(a)?e:r,c=arguments.length<3;return u(a,n(o,4),l,c,t)}return $f=s,$f}var Uf,Z1;function dF(){if(Z1)return Uf;Z1=1;var e=Ur(),t=Ue(),n=mn(),r="[object String]";function i(s){return typeof s=="string"||!t(s)&&n(s)&&e(s)==r}return Uf=i,Uf}var zf,eS;function fF(){if(eS)return zf;eS=1;var e=Dj(),t=e("length");return zf=t,zf}var Gf,tS;function hF(){if(tS)return Gf;tS=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",i=t+n+r,s="\\ufe0e\\ufe0f",a="\\u200d",o=RegExp("["+a+e+i+s+"]");function l(u){return o.test(u)}return Gf=l,Gf}var Hf,nS;function pF(){if(nS)return Hf;nS=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",i=t+n+r,s="\\ufe0e\\ufe0f",a="["+e+"]",o="["+i+"]",l="\\ud83c[\\udffb-\\udfff]",u="(?:"+o+"|"+l+")",c="[^"+e+"]",d="(?:\\ud83c[\\udde6-\\uddff]){2}",h="[\\ud800-\\udbff][\\udc00-\\udfff]",m="\\u200d",g=u+"?",p="["+s+"]?",w="(?:"+m+"(?:"+[c,d,h].join("|")+")"+p+g+")*",v=p+g+w,y="(?:"+[c+o+"?",o,d,h,a].join("|")+")",x=RegExp(l+"(?="+l+")|"+y+v,"g");function S(k){for(var E=x.lastIndex=0;x.test(k);)++E;return E}return Hf=S,Hf}var Kf,rS;function mF(){if(rS)return Kf;rS=1;var e=fF(),t=hF(),n=pF();function r(i){return t(i)?n(i):e(i)}return Kf=r,Kf}var Wf,iS;function vF(){if(iS)return Wf;iS=1;var e=Ag(),t=Ki(),n=On(),r=dF(),i=mF(),s="[object Map]",a="[object Set]";function o(l){if(l==null)return 0;if(n(l))return r(l)?i(l):l.length;var u=t(l);return u==s||u==a?l.size:e(l).length}return Wf=o,Wf}var Yf,sS;function gF(){if(sS)return Yf;sS=1;var e=Mg(),t=wj(),n=Fg(),r=qn(),i=Ml(),s=Ue(),a=Hi(),o=ba(),l=zt(),u=ka();function c(d,h,m){var g=s(d),p=g||a(d)||u(d);if(h=r(h,4),m==null){var w=d&&d.constructor;p?m=g?new w:[]:l(d)?m=o(w)?t(i(d)):{}:m={}}return(p?e:n)(d,function(v,y,x){return h(m,v,y,x)}),m}return Yf=c,Yf}var Qf,aS;function yF(){if(aS)return Qf;aS=1;var e=Gi(),t=_a(),n=Ue(),r=e?e.isConcatSpreadable:void 0;function i(s){return n(s)||t(s)||!!(r&&s&&s[r])}return Qf=i,Qf}var Jf,oS;function $g(){if(oS)return Jf;oS=1;var e=Dg(),t=yF();function n(r,i,s,a,o){var l=-1,u=r.length;for(s||(s=t),o||(o=[]);++l<u;){var c=r[l];i>0&&s(c)?i>1?n(c,i-1,s,a,o):e(o,c):a||(o[o.length]=c)}return o}return Jf=n,Jf}var Xf,lS;function xF(){if(lS)return Xf;lS=1;function e(t,n,r){switch(r.length){case 0:return t.call(n);case 1:return t.call(n,r[0]);case 2:return t.call(n,r[0],r[1]);case 3:return t.call(n,r[0],r[1],r[2])}return t.apply(n,r)}return Xf=e,Xf}var Zf,uS;function $j(){if(uS)return Zf;uS=1;var e=xF(),t=Math.max;function n(r,i,s){return i=t(i===void 0?r.length-1:i,0),function(){for(var a=arguments,o=-1,l=t(a.length-i,0),u=Array(l);++o<l;)u[o]=a[i+o];o=-1;for(var c=Array(i+1);++o<i;)c[o]=a[o];return c[i]=s(u),e(r,this,c)}}return Zf=n,Zf}var eh,cS;function wF(){if(cS)return eh;cS=1;var e=Og(),t=oj(),n=Hr(),r=t?function(i,s){return t(i,"toString",{configurable:!0,enumerable:!1,value:e(s),writable:!0})}:n;return eh=r,eh}var th,dS;function bF(){if(dS)return th;dS=1;var e=800,t=16,n=Date.now;function r(i){var s=0,a=0;return function(){var o=n(),l=t-(o-a);if(a=o,l>0){if(++s>=e)return arguments[0]}else s=0;return i.apply(void 0,arguments)}}return th=r,th}var nh,fS;function Uj(){if(fS)return nh;fS=1;var e=wF(),t=bF(),n=t(e);return nh=n,nh}var rh,hS;function Dl(){if(hS)return rh;hS=1;var e=Hr(),t=$j(),n=Uj();function r(i,s){return n(t(i,s,e),i+"")}return rh=r,rh}var ih,pS;function zj(){if(pS)return ih;pS=1;function e(t,n,r,i){for(var s=t.length,a=r+(i?1:-1);i?a--:++a<s;)if(n(t[a],a,t))return a;return-1}return ih=e,ih}var sh,mS;function SF(){if(mS)return sh;mS=1;function e(t){return t!==t}return sh=e,sh}var ah,vS;function _F(){if(vS)return ah;vS=1;function e(t,n,r){for(var i=r-1,s=t.length;++i<s;)if(t[i]===n)return i;return-1}return ah=e,ah}var oh,gS;function kF(){if(gS)return oh;gS=1;var e=zj(),t=SF(),n=_F();function r(i,s,a){return s===s?n(i,s,a):e(i,t,a)}return oh=r,oh}var lh,yS;function CF(){if(yS)return lh;yS=1;var e=kF();function t(n,r){var i=n==null?0:n.length;return!!i&&e(n,r,0)>-1}return lh=t,lh}var uh,xS;function EF(){if(xS)return uh;xS=1;function e(t,n,r){for(var i=-1,s=t==null?0:t.length;++i<s;)if(r(n,t[i]))return!0;return!1}return uh=e,uh}var ch,wS;function TF(){if(wS)return ch;wS=1;function e(){}return ch=e,ch}var dh,bS;function jF(){if(bS)return dh;bS=1;var e=gj(),t=TF(),n=Vg(),r=1/0,i=e&&1/n(new e([,-0]))[1]==r?function(s){return new e(s)}:t;return dh=i,dh}var fh,SS;function NF(){if(SS)return fh;SS=1;var e=Ej(),t=CF(),n=EF(),r=Tj(),i=jF(),s=Vg(),a=200;function o(l,u,c){var d=-1,h=t,m=l.length,g=!0,p=[],w=p;if(c)g=!1,h=n;else if(m>=a){var v=u?null:i(l);if(v)return s(v);g=!1,h=r,w=new e}else w=u?[]:p;e:for(;++d<m;){var y=l[d],x=u?u(y):y;if(y=c||y!==0?y:0,g&&x===x){for(var S=w.length;S--;)if(w[S]===x)continue e;u&&w.push(x),p.push(y)}else h(w,x,c)||(w!==p&&w.push(x),p.push(y))}return p}return fh=o,fh}var hh,_S;function Gj(){if(_S)return hh;_S=1;var e=On(),t=mn();function n(r){return t(r)&&e(r)}return hh=n,hh}var ph,kS;function MF(){if(kS)return ph;kS=1;var e=$g(),t=Dl(),n=NF(),r=Gj(),i=t(function(s){return n(e(s,1,r,!0))});return ph=i,ph}var mh,CS;function PF(){if(CS)return mh;CS=1;var e=Rl();function t(n,r){return e(r,function(i){return n[i]})}return mh=t,mh}var vh,ES;function Hj(){if(ES)return vh;ES=1;var e=PF(),t=yr();function n(r){return r==null?[]:e(r,t(r))}return vh=n,vh}var gh,TS;function Gt(){if(TS)return gh;TS=1;var e;if(typeof Tg=="function")try{e={clone:qq(),constant:Og(),each:Cj(),filter:Lj(),has:Oj(),isArray:Ue(),isEmpty:lF(),isFunction:ba(),isUndefined:qj(),keys:yr(),map:Vj(),reduce:Bj(),size:vF(),transform:gF(),union:MF(),values:Hj()}}catch{}return e||(e=window._),gh=e,gh}var yh,jS;function Ug(){if(jS)return yh;jS=1;var e=Gt();yh=i;var t="\0",n="\0",r="";function i(c){this._isDirected=e.has(c,"directed")?c.directed:!0,this._isMultigraph=e.has(c,"multigraph")?c.multigraph:!1,this._isCompound=e.has(c,"compound")?c.compound:!1,this._label=void 0,this._defaultNodeLabelFn=e.constant(void 0),this._defaultEdgeLabelFn=e.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[n]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}i.prototype._nodeCount=0,i.prototype._edgeCount=0,i.prototype.isDirected=function(){return this._isDirected},i.prototype.isMultigraph=function(){return this._isMultigraph},i.prototype.isCompound=function(){return this._isCompound},i.prototype.setGraph=function(c){return this._label=c,this},i.prototype.graph=function(){return this._label},i.prototype.setDefaultNodeLabel=function(c){return e.isFunction(c)||(c=e.constant(c)),this._defaultNodeLabelFn=c,this},i.prototype.nodeCount=function(){return this._nodeCount},i.prototype.nodes=function(){return e.keys(this._nodes)},i.prototype.sources=function(){var c=this;return e.filter(this.nodes(),function(d){return e.isEmpty(c._in[d])})},i.prototype.sinks=function(){var c=this;return e.filter(this.nodes(),function(d){return e.isEmpty(c._out[d])})},i.prototype.setNodes=function(c,d){var h=arguments,m=this;return e.each(c,function(g){h.length>1?m.setNode(g,d):m.setNode(g)}),this},i.prototype.setNode=function(c,d){return e.has(this._nodes,c)?(arguments.length>1&&(this._nodes[c]=d),this):(this._nodes[c]=arguments.length>1?d:this._defaultNodeLabelFn(c),this._isCompound&&(this._parent[c]=n,this._children[c]={},this._children[n][c]=!0),this._in[c]={},this._preds[c]={},this._out[c]={},this._sucs[c]={},++this._nodeCount,this)},i.prototype.node=function(c){return this._nodes[c]},i.prototype.hasNode=function(c){return e.has(this._nodes,c)},i.prototype.removeNode=function(c){var d=this;if(e.has(this._nodes,c)){var h=function(m){d.removeEdge(d._edgeObjs[m])};delete this._nodes[c],this._isCompound&&(this._removeFromParentsChildList(c),delete this._parent[c],e.each(this.children(c),function(m){d.setParent(m)}),delete this._children[c]),e.each(e.keys(this._in[c]),h),delete this._in[c],delete this._preds[c],e.each(e.keys(this._out[c]),h),delete this._out[c],delete this._sucs[c],--this._nodeCount}return this},i.prototype.setParent=function(c,d){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(e.isUndefined(d))d=n;else{d+="";for(var h=d;!e.isUndefined(h);h=this.parent(h))if(h===c)throw new Error("Setting "+d+" as parent of "+c+" would create a cycle");this.setNode(d)}return this.setNode(c),this._removeFromParentsChildList(c),this._parent[c]=d,this._children[d][c]=!0,this},i.prototype._removeFromParentsChildList=function(c){delete this._children[this._parent[c]][c]},i.prototype.parent=function(c){if(this._isCompound){var d=this._parent[c];if(d!==n)return d}},i.prototype.children=function(c){if(e.isUndefined(c)&&(c=n),this._isCompound){var d=this._children[c];if(d)return e.keys(d)}else{if(c===n)return this.nodes();if(this.hasNode(c))return[]}},i.prototype.predecessors=function(c){var d=this._preds[c];if(d)return e.keys(d)},i.prototype.successors=function(c){var d=this._sucs[c];if(d)return e.keys(d)},i.prototype.neighbors=function(c){var d=this.predecessors(c);if(d)return e.union(d,this.successors(c))},i.prototype.isLeaf=function(c){var d;return this.isDirected()?d=this.successors(c):d=this.neighbors(c),d.length===0},i.prototype.filterNodes=function(c){var d=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});d.setGraph(this.graph());var h=this;e.each(this._nodes,function(p,w){c(w)&&d.setNode(w,p)}),e.each(this._edgeObjs,function(p){d.hasNode(p.v)&&d.hasNode(p.w)&&d.setEdge(p,h.edge(p))});var m={};function g(p){var w=h.parent(p);return w===void 0||d.hasNode(w)?(m[p]=w,w):w in m?m[w]:g(w)}return this._isCompound&&e.each(d.nodes(),function(p){d.setParent(p,g(p))}),d},i.prototype.setDefaultEdgeLabel=function(c){return e.isFunction(c)||(c=e.constant(c)),this._defaultEdgeLabelFn=c,this},i.prototype.edgeCount=function(){return this._edgeCount},i.prototype.edges=function(){return e.values(this._edgeObjs)},i.prototype.setPath=function(c,d){var h=this,m=arguments;return e.reduce(c,function(g,p){return m.length>1?h.setEdge(g,p,d):h.setEdge(g,p),p}),this},i.prototype.setEdge=function(){var c,d,h,m,g=!1,p=arguments[0];typeof p=="object"&&p!==null&&"v"in p?(c=p.v,d=p.w,h=p.name,arguments.length===2&&(m=arguments[1],g=!0)):(c=p,d=arguments[1],h=arguments[3],arguments.length>2&&(m=arguments[2],g=!0)),c=""+c,d=""+d,e.isUndefined(h)||(h=""+h);var w=o(this._isDirected,c,d,h);if(e.has(this._edgeLabels,w))return g&&(this._edgeLabels[w]=m),this;if(!e.isUndefined(h)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(c),this.setNode(d),this._edgeLabels[w]=g?m:this._defaultEdgeLabelFn(c,d,h);var v=l(this._isDirected,c,d,h);return c=v.v,d=v.w,Object.freeze(v),this._edgeObjs[w]=v,s(this._preds[d],c),s(this._sucs[c],d),this._in[d][w]=v,this._out[c][w]=v,this._edgeCount++,this},i.prototype.edge=function(c,d,h){var m=arguments.length===1?u(this._isDirected,arguments[0]):o(this._isDirected,c,d,h);return this._edgeLabels[m]},i.prototype.hasEdge=function(c,d,h){var m=arguments.length===1?u(this._isDirected,arguments[0]):o(this._isDirected,c,d,h);return e.has(this._edgeLabels,m)},i.prototype.removeEdge=function(c,d,h){var m=arguments.length===1?u(this._isDirected,arguments[0]):o(this._isDirected,c,d,h),g=this._edgeObjs[m];return g&&(c=g.v,d=g.w,delete this._edgeLabels[m],delete this._edgeObjs[m],a(this._preds[d],c),a(this._sucs[c],d),delete this._in[d][m],delete this._out[c][m],this._edgeCount--),this},i.prototype.inEdges=function(c,d){var h=this._in[c];if(h){var m=e.values(h);return d?e.filter(m,function(g){return g.v===d}):m}},i.prototype.outEdges=function(c,d){var h=this._out[c];if(h){var m=e.values(h);return d?e.filter(m,function(g){return g.w===d}):m}},i.prototype.nodeEdges=function(c,d){var h=this.inEdges(c,d);if(h)return h.concat(this.outEdges(c,d))};function s(c,d){c[d]?c[d]++:c[d]=1}function a(c,d){--c[d]||delete c[d]}function o(c,d,h,m){var g=""+d,p=""+h;if(!c&&g>p){var w=g;g=p,p=w}return g+r+p+r+(e.isUndefined(m)?t:m)}function l(c,d,h,m){var g=""+d,p=""+h;if(!c&&g>p){var w=g;g=p,p=w}var v={v:g,w:p};return m&&(v.name=m),v}function u(c,d){return o(c,d.v,d.w,d.name)}return yh}var xh,NS;function RF(){return NS||(NS=1,xh="2.1.8"),xh}var wh,MS;function AF(){return MS||(MS=1,wh={Graph:Ug(),version:RF()}),wh}var bh,PS;function IF(){if(PS)return bh;PS=1;var e=Gt(),t=Ug();bh={write:n,read:s};function n(a){var o={options:{directed:a.isDirected(),multigraph:a.isMultigraph(),compound:a.isCompound()},nodes:r(a),edges:i(a)};return e.isUndefined(a.graph())||(o.value=e.clone(a.graph())),o}function r(a){return e.map(a.nodes(),function(o){var l=a.node(o),u=a.parent(o),c={v:o};return e.isUndefined(l)||(c.value=l),e.isUndefined(u)||(c.parent=u),c})}function i(a){return e.map(a.edges(),function(o){var l=a.edge(o),u={v:o.v,w:o.w};return e.isUndefined(o.name)||(u.name=o.name),e.isUndefined(l)||(u.value=l),u})}function s(a){var o=new t(a.options).setGraph(a.value);return e.each(a.nodes,function(l){o.setNode(l.v,l.value),l.parent&&o.setParent(l.v,l.parent)}),e.each(a.edges,function(l){o.setEdge({v:l.v,w:l.w,name:l.name},l.value)}),o}return bh}var Sh,RS;function DF(){if(RS)return Sh;RS=1;var e=Gt();Sh=t;function t(n){var r={},i=[],s;function a(o){e.has(r,o)||(r[o]=!0,s.push(o),e.each(n.successors(o),a),e.each(n.predecessors(o),a))}return e.each(n.nodes(),function(o){s=[],a(o),s.length&&i.push(s)}),i}return Sh}var _h,AS;function Kj(){if(AS)return _h;AS=1;var e=Gt();_h=t;function t(){this._arr=[],this._keyIndices={}}return t.prototype.size=function(){return this._arr.length},t.prototype.keys=function(){return this._arr.map(function(n){return n.key})},t.prototype.has=function(n){return e.has(this._keyIndices,n)},t.prototype.priority=function(n){var r=this._keyIndices[n];if(r!==void 0)return this._arr[r].priority},t.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key},t.prototype.add=function(n,r){var i=this._keyIndices;if(n=String(n),!e.has(i,n)){var s=this._arr,a=s.length;return i[n]=a,s.push({key:n,priority:r}),this._decrease(a),!0}return!1},t.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var n=this._arr.pop();return delete this._keyIndices[n.key],this._heapify(0),n.key},t.prototype.decrease=function(n,r){var i=this._keyIndices[n];if(r>this._arr[i].priority)throw new Error("New priority is greater than current priority. Key: "+n+" Old: "+this._arr[i].priority+" New: "+r);this._arr[i].priority=r,this._decrease(i)},t.prototype._heapify=function(n){var r=this._arr,i=2*n,s=i+1,a=n;i<r.length&&(a=r[i].priority<r[a].priority?i:a,s<r.length&&(a=r[s].priority<r[a].priority?s:a),a!==n&&(this._swap(n,a),this._heapify(a)))},t.prototype._decrease=function(n){for(var r=this._arr,i=r[n].priority,s;n!==0&&(s=n>>1,!(r[s].priority<i));)this._swap(n,s),n=s},t.prototype._swap=function(n,r){var i=this._arr,s=this._keyIndices,a=i[n],o=i[r];i[n]=o,i[r]=a,s[o.key]=n,s[a.key]=r},_h}var kh,IS;function Wj(){if(IS)return kh;IS=1;var e=Gt(),t=Kj();kh=r;var n=e.constant(1);function r(s,a,o,l){return i(s,String(a),o||n,l||function(u){return s.outEdges(u)})}function i(s,a,o,l){var u={},c=new t,d,h,m=function(g){var p=g.v!==d?g.v:g.w,w=u[p],v=o(g),y=h.distance+v;if(v<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+g+" Weight: "+v);y<w.distance&&(w.distance=y,w.predecessor=d,c.decrease(p,y))};for(s.nodes().forEach(function(g){var p=g===a?0:Number.POSITIVE_INFINITY;u[g]={distance:p},c.add(g,p)});c.size()>0&&(d=c.removeMin(),h=u[d],h.distance!==Number.POSITIVE_INFINITY);)l(d).forEach(m);return u}return kh}var Ch,DS;function LF(){if(DS)return Ch;DS=1;var e=Wj(),t=Gt();Ch=n;function n(r,i,s){return t.transform(r.nodes(),function(a,o){a[o]=e(r,o,i,s)},{})}return Ch}var Eh,LS;function Yj(){if(LS)return Eh;LS=1;var e=Gt();Eh=t;function t(n){var r=0,i=[],s={},a=[];function o(l){var u=s[l]={onStack:!0,lowlink:r,index:r++};if(i.push(l),n.successors(l).forEach(function(h){e.has(s,h)?s[h].onStack&&(u.lowlink=Math.min(u.lowlink,s[h].index)):(o(h),u.lowlink=Math.min(u.lowlink,s[h].lowlink))}),u.lowlink===u.index){var c=[],d;do d=i.pop(),s[d].onStack=!1,c.push(d);while(l!==d);a.push(c)}}return n.nodes().forEach(function(l){e.has(s,l)||o(l)}),a}return Eh}var Th,OS;function OF(){if(OS)return Th;OS=1;var e=Gt(),t=Yj();Th=n;function n(r){return e.filter(t(r),function(i){return i.length>1||i.length===1&&r.hasEdge(i[0],i[0])})}return Th}var jh,qS;function qF(){if(qS)return jh;qS=1;var e=Gt();jh=n;var t=e.constant(1);function n(i,s,a){return r(i,s||t,a||function(o){return i.outEdges(o)})}function r(i,s,a){var o={},l=i.nodes();return l.forEach(function(u){o[u]={},o[u][u]={distance:0},l.forEach(function(c){u!==c&&(o[u][c]={distance:Number.POSITIVE_INFINITY})}),a(u).forEach(function(c){var d=c.v===u?c.w:c.v,h=s(c);o[u][d]={distance:h,predecessor:u}})}),l.forEach(function(u){var c=o[u];l.forEach(function(d){var h=o[d];l.forEach(function(m){var g=h[u],p=c[m],w=h[m],v=g.distance+p.distance;v<w.distance&&(w.distance=v,w.predecessor=p.predecessor)})})}),o}return jh}var Nh,FS;function Qj(){if(FS)return Nh;FS=1;var e=Gt();Nh=t,t.CycleException=n;function t(r){var i={},s={},a=[];function o(l){if(e.has(s,l))throw new n;e.has(i,l)||(s[l]=!0,i[l]=!0,e.each(r.predecessors(l),o),delete s[l],a.push(l))}if(e.each(r.sinks(),o),e.size(i)!==r.nodeCount())throw new n;return a}function n(){}return n.prototype=new Error,Nh}var Mh,VS;function FF(){if(VS)return Mh;VS=1;var e=Qj();Mh=t;function t(n){try{e(n)}catch(r){if(r instanceof e.CycleException)return!1;throw r}return!0}return Mh}var Ph,BS;function Jj(){if(BS)return Ph;BS=1;var e=Gt();Ph=t;function t(r,i,s){e.isArray(i)||(i=[i]);var a=(r.isDirected()?r.successors:r.neighbors).bind(r),o=[],l={};return e.each(i,function(u){if(!r.hasNode(u))throw new Error("Graph does not have node: "+u);n(r,u,s==="post",l,a,o)}),o}function n(r,i,s,a,o,l){e.has(a,i)||(a[i]=!0,s||l.push(i),e.each(o(i),function(u){n(r,u,s,a,o,l)}),s&&l.push(i))}return Ph}var Rh,$S;function VF(){if($S)return Rh;$S=1;var e=Jj();Rh=t;function t(n,r){return e(n,r,"post")}return Rh}var Ah,US;function BF(){if(US)return Ah;US=1;var e=Jj();Ah=t;function t(n,r){return e(n,r,"pre")}return Ah}var Ih,zS;function $F(){if(zS)return Ih;zS=1;var e=Gt(),t=Ug(),n=Kj();Ih=r;function r(i,s){var a=new t,o={},l=new n,u;function c(h){var m=h.v===u?h.w:h.v,g=l.priority(m);if(g!==void 0){var p=s(h);p<g&&(o[m]=u,l.decrease(m,p))}}if(i.nodeCount()===0)return a;e.each(i.nodes(),function(h){l.add(h,Number.POSITIVE_INFINITY),a.setNode(h)}),l.decrease(i.nodes()[0],0);for(var d=!1;l.size()>0;){if(u=l.removeMin(),e.has(o,u))a.setEdge(u,o[u]);else{if(d)throw new Error("Input graph is not connected: "+i);d=!0}i.nodeEdges(u).forEach(c)}return a}return Ih}var Dh,GS;function UF(){return GS||(GS=1,Dh={components:DF(),dijkstra:Wj(),dijkstraAll:LF(),findCycles:OF(),floydWarshall:qF(),isAcyclic:FF(),postorder:VF(),preorder:BF(),prim:$F(),tarjan:Yj(),topsort:Qj()}),Dh}var Lh,HS;function zF(){if(HS)return Lh;HS=1;var e=AF();return Lh={Graph:e.Graph,json:IF(),alg:UF(),version:e.version},Lh}var Ko;if(typeof Tg=="function")try{Ko=zF()}catch{}Ko||(Ko=window.graphlib);var nn=Ko,Oh,KS;function GF(){if(KS)return Oh;KS=1;var e=Sj(),t=1,n=4;function r(i){return e(i,t|n)}return Oh=r,Oh}var qh,WS;function Ll(){if(WS)return qh;WS=1;var e=zi(),t=On(),n=Tl(),r=zt();function i(s,a,o){if(!r(o))return!1;var l=typeof a;return(l=="number"?t(o)&&n(a,o.length):l=="string"&&a in o)?e(o[a],s):!1}return qh=i,qh}var Fh,YS;function HF(){if(YS)return Fh;YS=1;var e=Dl(),t=zi(),n=Ll(),r=Gr(),i=Object.prototype,s=i.hasOwnProperty,a=e(function(o,l){o=Object(o);var u=-1,c=l.length,d=c>2?l[2]:void 0;for(d&&n(l[0],l[1],d)&&(c=1);++u<c;)for(var h=l[u],m=r(h),g=-1,p=m.length;++g<p;){var w=m[g],v=o[w];(v===void 0||t(v,i[w])&&!s.call(o,w))&&(o[w]=h[w])}return o});return Fh=a,Fh}var Vh,QS;function KF(){if(QS)return Vh;QS=1;var e=qn(),t=On(),n=yr();function r(i){return function(s,a,o){var l=Object(s);if(!t(s)){var u=e(a,3);s=n(s),a=function(d){return u(l[d],d,l)}}var c=i(s,a,o);return c>-1?l[u?s[c]:c]:void 0}}return Vh=r,Vh}var Bh,JS;function WF(){if(JS)return Bh;JS=1;var e=/\s/;function t(n){for(var r=n.length;r--&&e.test(n.charAt(r)););return r}return Bh=t,Bh}var $h,XS;function YF(){if(XS)return $h;XS=1;var e=WF(),t=/^\s+/;function n(r){return r&&r.slice(0,e(r)+1).replace(t,"")}return $h=n,$h}var Uh,ZS;function QF(){if(ZS)return Uh;ZS=1;var e=YF(),t=zt(),n=Wi(),r=NaN,i=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,a=/^0o[0-7]+$/i,o=parseInt;function l(u){if(typeof u=="number")return u;if(n(u))return r;if(t(u)){var c=typeof u.valueOf=="function"?u.valueOf():u;u=t(c)?c+"":c}if(typeof u!="string")return u===0?u:+u;u=e(u);var d=s.test(u);return d||a.test(u)?o(u.slice(2),d?2:8):i.test(u)?r:+u}return Uh=l,Uh}var zh,e_;function Xj(){if(e_)return zh;e_=1;var e=QF(),t=1/0,n=17976931348623157e292;function r(i){if(!i)return i===0?i:0;if(i=e(i),i===t||i===-t){var s=i<0?-1:1;return s*n}return i===i?i:0}return zh=r,zh}var Gh,t_;function JF(){if(t_)return Gh;t_=1;var e=Xj();function t(n){var r=e(n),i=r%1;return r===r?i?r-i:r:0}return Gh=t,Gh}var Hh,n_;function XF(){if(n_)return Hh;n_=1;var e=zj(),t=qn(),n=JF(),r=Math.max;function i(s,a,o){var l=s==null?0:s.length;if(!l)return-1;var u=o==null?0:n(o);return u<0&&(u=r(l+u,0)),e(s,t(a,3),u)}return Hh=i,Hh}var Kh,r_;function ZF(){if(r_)return Kh;r_=1;var e=KF(),t=XF(),n=e(t);return Kh=n,Kh}var Wh,i_;function Zj(){if(i_)return Wh;i_=1;var e=$g();function t(n){var r=n==null?0:n.length;return r?e(n,1):[]}return Wh=t,Wh}var Yh,s_;function eV(){if(s_)return Yh;s_=1;var e=qg(),t=_j(),n=Gr();function r(i,s){return i==null?i:e(i,t(s),n)}return Yh=r,Yh}var Qh,a_;function tV(){if(a_)return Qh;a_=1;function e(t){var n=t==null?0:t.length;return n?t[n-1]:void 0}return Qh=e,Qh}var Jh,o_;function nV(){if(o_)return Jh;o_=1;var e=Cl(),t=Fg(),n=qn();function r(i,s){var a={};return s=n(s,3),t(i,function(o,l,u){e(a,l,s(o,l,u))}),a}return Jh=r,Jh}var Xh,l_;function zg(){if(l_)return Xh;l_=1;var e=Wi();function t(n,r,i){for(var s=-1,a=n.length;++s<a;){var o=n[s],l=r(o);if(l!=null&&(u===void 0?l===l&&!e(l):i(l,u)))var u=l,c=o}return c}return Xh=t,Xh}var Zh,u_;function rV(){if(u_)return Zh;u_=1;function e(t,n){return t>n}return Zh=e,Zh}var ep,c_;function iV(){if(c_)return ep;c_=1;var e=zg(),t=rV(),n=Hr();function r(i){return i&&i.length?e(i,n,t):void 0}return ep=r,ep}var tp,d_;function eN(){if(d_)return tp;d_=1;var e=Cl(),t=zi();function n(r,i,s){(s!==void 0&&!t(r[i],s)||s===void 0&&!(i in r))&&e(r,i,s)}return tp=n,tp}var np,f_;function sV(){if(f_)return np;f_=1;var e=Ur(),t=Ml(),n=mn(),r="[object Object]",i=Function.prototype,s=Object.prototype,a=i.toString,o=s.hasOwnProperty,l=a.call(Object);function u(c){if(!n(c)||e(c)!=r)return!1;var d=t(c);if(d===null)return!0;var h=o.call(d,"constructor")&&d.constructor;return typeof h=="function"&&h instanceof h&&a.call(h)==l}return np=u,np}var rp,h_;function tN(){if(h_)return rp;h_=1;function e(t,n){if(!(n==="constructor"&&typeof t[n]=="function")&&n!="__proto__")return t[n]}return rp=e,rp}var ip,p_;function aV(){if(p_)return ip;p_=1;var e=Sa(),t=Gr();function n(r){return e(r,t(r))}return ip=n,ip}var sp,m_;function oV(){if(m_)return sp;m_=1;var e=eN(),t=cj(),n=xj(),r=dj(),i=bj(),s=_a(),a=Ue(),o=Gj(),l=Hi(),u=ba(),c=zt(),d=sV(),h=ka(),m=tN(),g=aV();function p(w,v,y,x,S,k,E){var j=m(w,y),T=m(v,y),M=E.get(T);if(M){e(w,y,M);return}var D=k?k(j,T,y+"",w,v,E):void 0,R=D===void 0;if(R){var H=a(T),Y=!H&&l(T),pe=!H&&!Y&&h(T);D=T,H||Y||pe?a(j)?D=j:o(j)?D=r(j):Y?(R=!1,D=t(T,!0)):pe?(R=!1,D=n(T,!0)):D=[]:d(T)||s(T)?(D=j,s(j)?D=g(j):(!c(j)||u(j))&&(D=i(T))):R=!1}R&&(E.set(T,D),S(D,T,x,k,E),E.delete(T)),e(w,y,D)}return sp=p,sp}var ap,v_;function lV(){if(v_)return ap;v_=1;var e=kl(),t=eN(),n=qg(),r=oV(),i=zt(),s=Gr(),a=tN();function o(l,u,c,d,h){l!==u&&n(u,function(m,g){if(h||(h=new e),i(m))r(l,u,g,c,o,d,h);else{var p=d?d(a(l,g),m,g+"",l,u,h):void 0;p===void 0&&(p=m),t(l,g,p)}},s)}return ap=o,ap}var op,g_;function uV(){if(g_)return op;g_=1;var e=Dl(),t=Ll();function n(r){return e(function(i,s){var a=-1,o=s.length,l=o>1?s[o-1]:void 0,u=o>2?s[2]:void 0;for(l=r.length>3&&typeof l=="function"?(o--,l):void 0,u&&t(s[0],s[1],u)&&(l=o<3?void 0:l,o=1),i=Object(i);++a<o;){var c=s[a];c&&r(i,c,a,l)}return i})}return op=n,op}var lp,y_;function cV(){if(y_)return lp;y_=1;var e=lV(),t=uV(),n=t(function(r,i,s){e(r,i,s)});return lp=n,lp}var up,x_;function nN(){if(x_)return up;x_=1;function e(t,n){return t<n}return up=e,up}var cp,w_;function dV(){if(w_)return cp;w_=1;var e=zg(),t=nN(),n=Hr();function r(i){return i&&i.length?e(i,n,t):void 0}return cp=r,cp}var dp,b_;function fV(){if(b_)return dp;b_=1;var e=zg(),t=qn(),n=nN();function r(i,s){return i&&i.length?e(i,t(s,2),n):void 0}return dp=r,dp}var fp,S_;function hV(){if(S_)return fp;S_=1;var e=tn(),t=function(){return e.Date.now()};return fp=t,fp}var hp,__;function pV(){if(__)return hp;__=1;var e=El(),t=Al(),n=Tl(),r=zt(),i=Ca();function s(a,o,l,u){if(!r(a))return a;o=t(o,a);for(var c=-1,d=o.length,h=d-1,m=a;m!=null&&++c<d;){var g=i(o[c]),p=l;if(g==="__proto__"||g==="constructor"||g==="prototype")return a;if(c!=h){var w=m[g];p=u?u(w,g,m):void 0,p===void 0&&(p=r(w)?w:n(o[c+1])?[]:{})}e(m,g,p),m=m[g]}return a}return hp=s,hp}var pp,k_;function mV(){if(k_)return pp;k_=1;var e=Il(),t=pV(),n=Al();function r(i,s,a){for(var o=-1,l=s.length,u={};++o<l;){var c=s[o],d=e(i,c);a(d,c)&&t(u,n(c,i),d)}return u}return pp=r,pp}var mp,C_;function vV(){if(C_)return mp;C_=1;var e=mV(),t=Ij();function n(r,i){return e(r,i,function(s,a){return t(r,a)})}return mp=n,mp}var vp,E_;function gV(){if(E_)return vp;E_=1;var e=Zj(),t=$j(),n=Uj();function r(i){return n(t(i,void 0,e),i+"")}return vp=r,vp}var gp,T_;function yV(){if(T_)return gp;T_=1;var e=vV(),t=gV(),n=t(function(r,i){return r==null?{}:e(r,i)});return gp=n,gp}var yp,j_;function xV(){if(j_)return yp;j_=1;var e=Math.ceil,t=Math.max;function n(r,i,s,a){for(var o=-1,l=t(e((i-r)/(s||1)),0),u=Array(l);l--;)u[a?l:++o]=r,r+=s;return u}return yp=n,yp}var xp,N_;function wV(){if(N_)return xp;N_=1;var e=xV(),t=Ll(),n=Xj();function r(i){return function(s,a,o){return o&&typeof o!="number"&&t(s,a,o)&&(a=o=void 0),s=n(s),a===void 0?(a=s,s=0):a=n(a),o=o===void 0?s<a?1:-1:n(o),e(s,a,o,i)}}return xp=r,xp}var wp,M_;function bV(){if(M_)return wp;M_=1;var e=wV(),t=e();return wp=t,wp}var bp,P_;function SV(){if(P_)return bp;P_=1;function e(t,n){var r=t.length;for(t.sort(n);r--;)t[r]=t[r].value;return t}return bp=e,bp}var Sp,R_;function _V(){if(R_)return Sp;R_=1;var e=Wi();function t(n,r){if(n!==r){var i=n!==void 0,s=n===null,a=n===n,o=e(n),l=r!==void 0,u=r===null,c=r===r,d=e(r);if(!u&&!d&&!o&&n>r||o&&l&&c&&!u&&!d||s&&l&&c||!i&&c||!a)return 1;if(!s&&!o&&!d&&n<r||d&&i&&a&&!s&&!o||u&&i&&a||!l&&a||!c)return-1}return 0}return Sp=t,Sp}var _p,A_;function kV(){if(A_)return _p;A_=1;var e=_V();function t(n,r,i){for(var s=-1,a=n.criteria,o=r.criteria,l=a.length,u=i.length;++s<l;){var c=e(a[s],o[s]);if(c){if(s>=u)return c;var d=i[s];return c*(d=="desc"?-1:1)}}return n.index-r.index}return _p=t,_p}var kp,I_;function CV(){if(I_)return kp;I_=1;var e=Rl(),t=Il(),n=qn(),r=Fj(),i=SV(),s=jl(),a=kV(),o=Hr(),l=Ue();function u(c,d,h){d.length?d=e(d,function(p){return l(p)?function(w){return t(w,p.length===1?p[0]:p)}:p}):d=[o];var m=-1;d=e(d,s(n));var g=r(c,function(p,w,v){var y=e(d,function(x){return x(p)});return{criteria:y,index:++m,value:p}});return i(g,function(p,w){return a(p,w,h)})}return kp=u,kp}var Cp,D_;function EV(){if(D_)return Cp;D_=1;var e=$g(),t=CV(),n=Dl(),r=Ll(),i=n(function(s,a){if(s==null)return[];var o=a.length;return o>1&&r(s,a[0],a[1])?a=[]:o>2&&r(a[0],a[1],a[2])&&(a=[a[0]]),t(s,e(a,1),[])});return Cp=i,Cp}var Ep,L_;function TV(){if(L_)return Ep;L_=1;var e=Rj(),t=0;function n(r){var i=++t;return e(r)+i}return Ep=n,Ep}var Tp,O_;function jV(){if(O_)return Tp;O_=1;function e(t,n,r){for(var i=-1,s=t.length,a=n.length,o={};++i<s;){var l=i<a?n[i]:void 0;r(o,t[i],l)}return o}return Tp=e,Tp}var jp,q_;function NV(){if(q_)return jp;q_=1;var e=El(),t=jV();function n(r,i){return t(r||[],i||[],e)}return jp=n,jp}var Wo;if(typeof Tg=="function")try{Wo={cloneDeep:GF(),constant:Og(),defaults:HF(),each:Cj(),filter:Lj(),find:ZF(),flatten:Zj(),forEach:kj(),forIn:eV(),has:Oj(),isUndefined:qj(),last:tV(),map:Vj(),mapValues:nV(),max:iV(),merge:cV(),min:dV(),minBy:fV(),now:hV(),pick:yV(),range:bV(),reduce:Bj(),sortBy:EV(),uniqueId:TV(),values:Hj(),zipObject:NV()}}catch{}Wo||(Wo=window._);var Ee=Wo,MV=Ol;function Ol(){var e={};e._next=e._prev=e,this._sentinel=e}Ol.prototype.dequeue=function(){var e=this._sentinel,t=e._prev;if(t!==e)return rN(t),t};Ol.prototype.enqueue=function(e){var t=this._sentinel;e._prev&&e._next&&rN(e),e._next=t._next,t._next._prev=e,t._next=e,e._prev=t};Ol.prototype.toString=function(){for(var e=[],t=this._sentinel,n=t._prev;n!==t;)e.push(JSON.stringify(n,PV)),n=n._prev;return"["+e.join(", ")+"]"};function rN(e){e._prev._next=e._next,e._next._prev=e._prev,delete e._next,delete e._prev}function PV(e,t){if(e!=="_next"&&e!=="_prev")return t}var Cn=Ee,RV=nn.Graph,AV=MV,IV=LV,DV=Cn.constant(1);function LV(e,t){if(e.nodeCount()<=1)return[];var n=qV(e,t||DV),r=OV(n.graph,n.buckets,n.zeroIdx);return Cn.flatten(Cn.map(r,function(i){return e.outEdges(i.v,i.w)}),!0)}function OV(e,t,n){for(var r=[],i=t[t.length-1],s=t[0],a;e.nodeCount();){for(;a=s.dequeue();)Np(e,t,n,a);for(;a=i.dequeue();)Np(e,t,n,a);if(e.nodeCount()){for(var o=t.length-2;o>0;--o)if(a=t[o].dequeue(),a){r=r.concat(Np(e,t,n,a,!0));break}}}return r}function Np(e,t,n,r,i){var s=i?[]:void 0;return Cn.forEach(e.inEdges(r.v),function(a){var o=e.edge(a),l=e.node(a.v);i&&s.push({v:a.v,w:a.w}),l.out-=o,Km(t,n,l)}),Cn.forEach(e.outEdges(r.v),function(a){var o=e.edge(a),l=a.w,u=e.node(l);u.in-=o,Km(t,n,u)}),e.removeNode(r.v),s}function qV(e,t){var n=new RV,r=0,i=0;Cn.forEach(e.nodes(),function(o){n.setNode(o,{v:o,in:0,out:0})}),Cn.forEach(e.edges(),function(o){var l=n.edge(o.v,o.w)||0,u=t(o),c=l+u;n.setEdge(o.v,o.w,c),i=Math.max(i,n.node(o.v).out+=u),r=Math.max(r,n.node(o.w).in+=u)});var s=Cn.range(i+r+3).map(function(){return new AV}),a=r+1;return Cn.forEach(n.nodes(),function(o){Km(s,a,n.node(o))}),{graph:n,buckets:s,zeroIdx:a}}function Km(e,t,n){n.out?n.in?e[n.out-n.in+t].enqueue(n):e[e.length-1].enqueue(n):e[0].enqueue(n)}var Mr=Ee,FV=IV,VV={run:BV,undo:UV};function BV(e){var t=e.graph().acyclicer==="greedy"?FV(e,n(e)):$V(e);Mr.forEach(t,function(r){var i=e.edge(r);e.removeEdge(r),i.forwardName=r.name,i.reversed=!0,e.setEdge(r.w,r.v,i,Mr.uniqueId("rev"))});function n(r){return function(i){return r.edge(i).weight}}}function $V(e){var t=[],n={},r={};function i(s){Mr.has(r,s)||(r[s]=!0,n[s]=!0,Mr.forEach(e.outEdges(s),function(a){Mr.has(n,a.w)?t.push(a):i(a.w)}),delete n[s])}return Mr.forEach(e.nodes(),i),t}function UV(e){Mr.forEach(e.edges(),function(t){var n=e.edge(t);if(n.reversed){e.removeEdge(t);var r=n.forwardName;delete n.reversed,delete n.forwardName,e.setEdge(t.w,t.v,n,r)}})}var he=Ee,iN=nn.Graph,bt={addDummyNode:sN,simplify:zV,asNonCompoundGraph:GV,successorWeights:HV,predecessorWeights:KV,intersectRect:WV,buildLayerMatrix:YV,normalizeRanks:QV,removeEmptyRanks:JV,addBorderNode:XV,maxRank:aN,partition:ZV,time:e3,notime:t3};function sN(e,t,n,r){var i;do i=he.uniqueId(r);while(e.hasNode(i));return n.dummy=t,e.setNode(i,n),i}function zV(e){var t=new iN().setGraph(e.graph());return he.forEach(e.nodes(),function(n){t.setNode(n,e.node(n))}),he.forEach(e.edges(),function(n){var r=t.edge(n.v,n.w)||{weight:0,minlen:1},i=e.edge(n);t.setEdge(n.v,n.w,{weight:r.weight+i.weight,minlen:Math.max(r.minlen,i.minlen)})}),t}function GV(e){var t=new iN({multigraph:e.isMultigraph()}).setGraph(e.graph());return he.forEach(e.nodes(),function(n){e.children(n).length||t.setNode(n,e.node(n))}),he.forEach(e.edges(),function(n){t.setEdge(n,e.edge(n))}),t}function HV(e){var t=he.map(e.nodes(),function(n){var r={};return he.forEach(e.outEdges(n),function(i){r[i.w]=(r[i.w]||0)+e.edge(i).weight}),r});return he.zipObject(e.nodes(),t)}function KV(e){var t=he.map(e.nodes(),function(n){var r={};return he.forEach(e.inEdges(n),function(i){r[i.v]=(r[i.v]||0)+e.edge(i).weight}),r});return he.zipObject(e.nodes(),t)}function WV(e,t){var n=e.x,r=e.y,i=t.x-n,s=t.y-r,a=e.width/2,o=e.height/2;if(!i&&!s)throw new Error("Not possible to find intersection inside of the rectangle");var l,u;return Math.abs(s)*a>Math.abs(i)*o?(s<0&&(o=-o),l=o*i/s,u=o):(i<0&&(a=-a),l=a,u=a*s/i),{x:n+l,y:r+u}}function YV(e){var t=he.map(he.range(aN(e)+1),function(){return[]});return he.forEach(e.nodes(),function(n){var r=e.node(n),i=r.rank;he.isUndefined(i)||(t[i][r.order]=n)}),t}function QV(e){var t=he.min(he.map(e.nodes(),function(n){return e.node(n).rank}));he.forEach(e.nodes(),function(n){var r=e.node(n);he.has(r,"rank")&&(r.rank-=t)})}function JV(e){var t=he.min(he.map(e.nodes(),function(s){return e.node(s).rank})),n=[];he.forEach(e.nodes(),function(s){var a=e.node(s).rank-t;n[a]||(n[a]=[]),n[a].push(s)});var r=0,i=e.graph().nodeRankFactor;he.forEach(n,function(s,a){he.isUndefined(s)&&a%i!==0?--r:r&&he.forEach(s,function(o){e.node(o).rank+=r})})}function XV(e,t,n,r){var i={width:0,height:0};return arguments.length>=4&&(i.rank=n,i.order=r),sN(e,"border",i,t)}function aN(e){return he.max(he.map(e.nodes(),function(t){var n=e.node(t).rank;if(!he.isUndefined(n))return n}))}function ZV(e,t){var n={lhs:[],rhs:[]};return he.forEach(e,function(r){t(r)?n.lhs.push(r):n.rhs.push(r)}),n}function e3(e,t){var n=he.now();try{return t()}finally{console.log(e+" time: "+(he.now()-n)+"ms")}}function t3(e,t){return t()}var oN=Ee,n3=bt,r3={run:i3,undo:a3};function i3(e){e.graph().dummyChains=[],oN.forEach(e.edges(),function(t){s3(e,t)})}function s3(e,t){var n=t.v,r=e.node(n).rank,i=t.w,s=e.node(i).rank,a=t.name,o=e.edge(t),l=o.labelRank;if(s!==r+1){e.removeEdge(t);var u,c,d;for(d=0,++r;r<s;++d,++r)o.points=[],c={width:0,height:0,edgeLabel:o,edgeObj:t,rank:r},u=n3.addDummyNode(e,"edge",c,"_d"),r===l&&(c.width=o.width,c.height=o.height,c.dummy="edge-label",c.labelpos=o.labelpos),e.setEdge(n,u,{weight:o.weight},a),d===0&&e.graph().dummyChains.push(u),n=u;e.setEdge(n,i,{weight:o.weight},a)}}function a3(e){oN.forEach(e.graph().dummyChains,function(t){var n=e.node(t),r=n.edgeLabel,i;for(e.setEdge(n.edgeObj,r);n.dummy;)i=e.successors(t)[0],e.removeNode(t),r.points.push({x:n.x,y:n.y}),n.dummy==="edge-label"&&(r.x=n.x,r.y=n.y,r.width=n.width,r.height=n.height),t=i,n=e.node(t)})}var Ja=Ee,ql={longestPath:o3,slack:l3};function o3(e){var t={};function n(r){var i=e.node(r);if(Ja.has(t,r))return i.rank;t[r]=!0;var s=Ja.min(Ja.map(e.outEdges(r),function(a){return n(a.w)-e.edge(a).minlen}));return(s===Number.POSITIVE_INFINITY||s===void 0||s===null)&&(s=0),i.rank=s}Ja.forEach(e.sources(),n)}function l3(e,t){return e.node(t.w).rank-e.node(t.v).rank-e.edge(t).minlen}var Yo=Ee,u3=nn.Graph,Qo=ql.slack,lN=c3;function c3(e){var t=new u3({directed:!1}),n=e.nodes()[0],r=e.nodeCount();t.setNode(n,{});for(var i,s;d3(t,e)<r;)i=f3(t,e),s=t.hasNode(i.v)?Qo(e,i):-Qo(e,i),h3(t,e,s);return t}function d3(e,t){function n(r){Yo.forEach(t.nodeEdges(r),function(i){var s=i.v,a=r===s?i.w:s;!e.hasNode(a)&&!Qo(t,i)&&(e.setNode(a,{}),e.setEdge(r,a,{}),n(a))})}return Yo.forEach(e.nodes(),n),e.nodeCount()}function f3(e,t){return Yo.minBy(t.edges(),function(n){if(e.hasNode(n.v)!==e.hasNode(n.w))return Qo(t,n)})}function h3(e,t,n){Yo.forEach(e.nodes(),function(r){t.node(r).rank+=n})}var Dn=Ee,p3=lN,m3=ql.slack,v3=ql.longestPath,g3=nn.alg.preorder,y3=nn.alg.postorder,x3=bt.simplify,w3=Kr;Kr.initLowLimValues=Hg;Kr.initCutValues=Gg;Kr.calcCutValue=uN;Kr.leaveEdge=dN;Kr.enterEdge=fN;Kr.exchangeEdges=hN;function Kr(e){e=x3(e),v3(e);var t=p3(e);Hg(t),Gg(t,e);for(var n,r;n=dN(t);)r=fN(t,e,n),hN(t,e,n,r)}function Gg(e,t){var n=y3(e,e.nodes());n=n.slice(0,n.length-1),Dn.forEach(n,function(r){b3(e,t,r)})}function b3(e,t,n){var r=e.node(n),i=r.parent;e.edge(n,i).cutvalue=uN(e,t,n)}function uN(e,t,n){var r=e.node(n),i=r.parent,s=!0,a=t.edge(n,i),o=0;return a||(s=!1,a=t.edge(i,n)),o=a.weight,Dn.forEach(t.nodeEdges(n),function(l){var u=l.v===n,c=u?l.w:l.v;if(c!==i){var d=u===s,h=t.edge(l).weight;if(o+=d?h:-h,_3(e,n,c)){var m=e.edge(n,c).cutvalue;o+=d?-m:m}}}),o}function Hg(e,t){arguments.length<2&&(t=e.nodes()[0]),cN(e,{},1,t)}function cN(e,t,n,r,i){var s=n,a=e.node(r);return t[r]=!0,Dn.forEach(e.neighbors(r),function(o){Dn.has(t,o)||(n=cN(e,t,n,o,r))}),a.low=s,a.lim=n++,i?a.parent=i:delete a.parent,n}function dN(e){return Dn.find(e.edges(),function(t){return e.edge(t).cutvalue<0})}function fN(e,t,n){var r=n.v,i=n.w;t.hasEdge(r,i)||(r=n.w,i=n.v);var s=e.node(r),a=e.node(i),o=s,l=!1;s.lim>a.lim&&(o=a,l=!0);var u=Dn.filter(t.edges(),function(c){return l===F_(e,e.node(c.v),o)&&l!==F_(e,e.node(c.w),o)});return Dn.minBy(u,function(c){return m3(t,c)})}function hN(e,t,n,r){var i=n.v,s=n.w;e.removeEdge(i,s),e.setEdge(r.v,r.w,{}),Hg(e),Gg(e,t),S3(e,t)}function S3(e,t){var n=Dn.find(e.nodes(),function(i){return!t.node(i).parent}),r=g3(e,n);r=r.slice(1),Dn.forEach(r,function(i){var s=e.node(i).parent,a=t.edge(i,s),o=!1;a||(a=t.edge(s,i),o=!0),t.node(i).rank=t.node(s).rank+(o?a.minlen:-a.minlen)})}function _3(e,t,n){return e.hasEdge(t,n)}function F_(e,t,n){return n.low<=t.lim&&t.lim<=n.lim}var k3=ql,pN=k3.longestPath,C3=lN,E3=w3,T3=j3;function j3(e){switch(e.graph().ranker){case"network-simplex":V_(e);break;case"tight-tree":M3(e);break;case"longest-path":N3(e);break;default:V_(e)}}var N3=pN;function M3(e){pN(e),C3(e)}function V_(e){E3(e)}var Wm=Ee,P3=R3;function R3(e){var t=I3(e);Wm.forEach(e.graph().dummyChains,function(n){for(var r=e.node(n),i=r.edgeObj,s=A3(e,t,i.v,i.w),a=s.path,o=s.lca,l=0,u=a[l],c=!0;n!==i.w;){if(r=e.node(n),c){for(;(u=a[l])!==o&&e.node(u).maxRank<r.rank;)l++;u===o&&(c=!1)}if(!c){for(;l<a.length-1&&e.node(u=a[l+1]).minRank<=r.rank;)l++;u=a[l]}e.setParent(n,u),n=e.successors(n)[0]}})}function A3(e,t,n,r){var i=[],s=[],a=Math.min(t[n].low,t[r].low),o=Math.max(t[n].lim,t[r].lim),l,u;l=n;do l=e.parent(l),i.push(l);while(l&&(t[l].low>a||o>t[l].lim));for(u=l,l=r;(l=e.parent(l))!==u;)s.push(l);return{path:i.concat(s.reverse()),lca:u}}function I3(e){var t={},n=0;function r(i){var s=n;Wm.forEach(e.children(i),r),t[i]={low:s,lim:n++}}return Wm.forEach(e.children(),r),t}var En=Ee,Ym=bt,D3={run:L3,cleanup:F3};function L3(e){var t=Ym.addDummyNode(e,"root",{},"_root"),n=O3(e),r=En.max(En.values(n))-1,i=2*r+1;e.graph().nestingRoot=t,En.forEach(e.edges(),function(a){e.edge(a).minlen*=i});var s=q3(e)+1;En.forEach(e.children(),function(a){mN(e,t,i,s,r,n,a)}),e.graph().nodeRankFactor=i}function mN(e,t,n,r,i,s,a){var o=e.children(a);if(!o.length){a!==t&&e.setEdge(t,a,{weight:0,minlen:n});return}var l=Ym.addBorderNode(e,"_bt"),u=Ym.addBorderNode(e,"_bb"),c=e.node(a);e.setParent(l,a),c.borderTop=l,e.setParent(u,a),c.borderBottom=u,En.forEach(o,function(d){mN(e,t,n,r,i,s,d);var h=e.node(d),m=h.borderTop?h.borderTop:d,g=h.borderBottom?h.borderBottom:d,p=h.borderTop?r:2*r,w=m!==g?1:i-s[a]+1;e.setEdge(l,m,{weight:p,minlen:w,nestingEdge:!0}),e.setEdge(g,u,{weight:p,minlen:w,nestingEdge:!0})}),e.parent(a)||e.setEdge(t,l,{weight:0,minlen:i+s[a]})}function O3(e){var t={};function n(r,i){var s=e.children(r);s&&s.length&&En.forEach(s,function(a){n(a,i+1)}),t[r]=i}return En.forEach(e.children(),function(r){n(r,1)}),t}function q3(e){return En.reduce(e.edges(),function(t,n){return t+e.edge(n).weight},0)}function F3(e){var t=e.graph();e.removeNode(t.nestingRoot),delete t.nestingRoot,En.forEach(e.edges(),function(n){var r=e.edge(n);r.nestingEdge&&e.removeEdge(n)})}var Mp=Ee,V3=bt,B3=$3;function $3(e){function t(n){var r=e.children(n),i=e.node(n);if(r.length&&Mp.forEach(r,t),Mp.has(i,"minRank")){i.borderLeft=[],i.borderRight=[];for(var s=i.minRank,a=i.maxRank+1;s<a;++s)B_(e,"borderLeft","_bl",n,i,s),B_(e,"borderRight","_br",n,i,s)}}Mp.forEach(e.children(),t)}function B_(e,t,n,r,i,s){var a={width:0,height:0,rank:s,borderType:t},o=i[t][s-1],l=V3.addDummyNode(e,"border",a,n);i[t][s]=l,e.setParent(l,r),o&&e.setEdge(o,l,{weight:1})}var cn=Ee,U3={adjust:z3,undo:G3};function z3(e){var t=e.graph().rankdir.toLowerCase();(t==="lr"||t==="rl")&&vN(e)}function G3(e){var t=e.graph().rankdir.toLowerCase();(t==="bt"||t==="rl")&&H3(e),(t==="lr"||t==="rl")&&(K3(e),vN(e))}function vN(e){cn.forEach(e.nodes(),function(t){$_(e.node(t))}),cn.forEach(e.edges(),function(t){$_(e.edge(t))})}function $_(e){var t=e.width;e.width=e.height,e.height=t}function H3(e){cn.forEach(e.nodes(),function(t){Pp(e.node(t))}),cn.forEach(e.edges(),function(t){var n=e.edge(t);cn.forEach(n.points,Pp),cn.has(n,"y")&&Pp(n)})}function Pp(e){e.y=-e.y}function K3(e){cn.forEach(e.nodes(),function(t){Rp(e.node(t))}),cn.forEach(e.edges(),function(t){var n=e.edge(t);cn.forEach(n.points,Rp),cn.has(n,"x")&&Rp(n)})}function Rp(e){var t=e.x;e.x=e.y,e.y=t}var xn=Ee,W3=Y3;function Y3(e){var t={},n=xn.filter(e.nodes(),function(o){return!e.children(o).length}),r=xn.max(xn.map(n,function(o){return e.node(o).rank})),i=xn.map(xn.range(r+1),function(){return[]});function s(o){if(!xn.has(t,o)){t[o]=!0;var l=e.node(o);i[l.rank].push(o),xn.forEach(e.successors(o),s)}}var a=xn.sortBy(n,function(o){return e.node(o).rank});return xn.forEach(a,s),i}var zn=Ee,Q3=J3;function J3(e,t){for(var n=0,r=1;r<t.length;++r)n+=X3(e,t[r-1],t[r]);return n}function X3(e,t,n){for(var r=zn.zipObject(n,zn.map(n,function(u,c){return c})),i=zn.flatten(zn.map(t,function(u){return zn.sortBy(zn.map(e.outEdges(u),function(c){return{pos:r[c.w],weight:e.edge(c).weight}}),"pos")}),!0),s=1;s<n.length;)s<<=1;var a=2*s-1;s-=1;var o=zn.map(new Array(a),function(){return 0}),l=0;return zn.forEach(i.forEach(function(u){var c=u.pos+s;o[c]+=u.weight;for(var d=0;c>0;)c%2&&(d+=o[c+1]),c=c-1>>1,o[c]+=u.weight;l+=u.weight*d})),l}var U_=Ee,Z3=eB;function eB(e,t){return U_.map(t,function(n){var r=e.inEdges(n);if(r.length){var i=U_.reduce(r,function(s,a){var o=e.edge(a),l=e.node(a.v);return{sum:s.sum+o.weight*l.order,weight:s.weight+o.weight}},{sum:0,weight:0});return{v:n,barycenter:i.sum/i.weight,weight:i.weight}}else return{v:n}})}var Ct=Ee,tB=nB;function nB(e,t){var n={};Ct.forEach(e,function(i,s){var a=n[i.v]={indegree:0,in:[],out:[],vs:[i.v],i:s};Ct.isUndefined(i.barycenter)||(a.barycenter=i.barycenter,a.weight=i.weight)}),Ct.forEach(t.edges(),function(i){var s=n[i.v],a=n[i.w];!Ct.isUndefined(s)&&!Ct.isUndefined(a)&&(a.indegree++,s.out.push(n[i.w]))});var r=Ct.filter(n,function(i){return!i.indegree});return rB(r)}function rB(e){var t=[];function n(s){return function(a){a.merged||(Ct.isUndefined(a.barycenter)||Ct.isUndefined(s.barycenter)||a.barycenter>=s.barycenter)&&iB(s,a)}}function r(s){return function(a){a.in.push(s),--a.indegree===0&&e.push(a)}}for(;e.length;){var i=e.pop();t.push(i),Ct.forEach(i.in.reverse(),n(i)),Ct.forEach(i.out,r(i))}return Ct.map(Ct.filter(t,function(s){return!s.merged}),function(s){return Ct.pick(s,["vs","i","barycenter","weight"])})}function iB(e,t){var n=0,r=0;e.weight&&(n+=e.barycenter*e.weight,r+=e.weight),t.weight&&(n+=t.barycenter*t.weight,r+=t.weight),e.vs=t.vs.concat(e.vs),e.barycenter=n/r,e.weight=r,e.i=Math.min(t.i,e.i),t.merged=!0}var Ts=Ee,sB=bt,aB=oB;function oB(e,t){var n=sB.partition(e,function(c){return Ts.has(c,"barycenter")}),r=n.lhs,i=Ts.sortBy(n.rhs,function(c){return-c.i}),s=[],a=0,o=0,l=0;r.sort(lB(!!t)),l=z_(s,i,l),Ts.forEach(r,function(c){l+=c.vs.length,s.push(c.vs),a+=c.barycenter*c.weight,o+=c.weight,l=z_(s,i,l)});var u={vs:Ts.flatten(s,!0)};return o&&(u.barycenter=a/o,u.weight=o),u}function z_(e,t,n){for(var r;t.length&&(r=Ts.last(t)).i<=n;)t.pop(),e.push(r.vs),n++;return n}function lB(e){return function(t,n){return t.barycenter<n.barycenter?-1:t.barycenter>n.barycenter?1:e?n.i-t.i:t.i-n.i}}var Jn=Ee,uB=Z3,cB=tB,dB=aB,fB=gN;function gN(e,t,n,r){var i=e.children(t),s=e.node(t),a=s?s.borderLeft:void 0,o=s?s.borderRight:void 0,l={};a&&(i=Jn.filter(i,function(g){return g!==a&&g!==o}));var u=uB(e,i);Jn.forEach(u,function(g){if(e.children(g.v).length){var p=gN(e,g.v,n,r);l[g.v]=p,Jn.has(p,"barycenter")&&pB(g,p)}});var c=cB(u,n);hB(c,l);var d=dB(c,r);if(a&&(d.vs=Jn.flatten([a,d.vs,o],!0),e.predecessors(a).length)){var h=e.node(e.predecessors(a)[0]),m=e.node(e.predecessors(o)[0]);Jn.has(d,"barycenter")||(d.barycenter=0,d.weight=0),d.barycenter=(d.barycenter*d.weight+h.order+m.order)/(d.weight+2),d.weight+=2}return d}function hB(e,t){Jn.forEach(e,function(n){n.vs=Jn.flatten(n.vs.map(function(r){return t[r]?t[r].vs:r}),!0)})}function pB(e,t){Jn.isUndefined(e.barycenter)?(e.barycenter=t.barycenter,e.weight=t.weight):(e.barycenter=(e.barycenter*e.weight+t.barycenter*t.weight)/(e.weight+t.weight),e.weight+=t.weight)}var js=Ee,mB=nn.Graph,vB=gB;function gB(e,t,n){var r=yB(e),i=new mB({compound:!0}).setGraph({root:r}).setDefaultNodeLabel(function(s){return e.node(s)});return js.forEach(e.nodes(),function(s){var a=e.node(s),o=e.parent(s);(a.rank===t||a.minRank<=t&&t<=a.maxRank)&&(i.setNode(s),i.setParent(s,o||r),js.forEach(e[n](s),function(l){var u=l.v===s?l.w:l.v,c=i.edge(u,s),d=js.isUndefined(c)?0:c.weight;i.setEdge(u,s,{weight:e.edge(l).weight+d})}),js.has(a,"minRank")&&i.setNode(s,{borderLeft:a.borderLeft[t],borderRight:a.borderRight[t]}))}),i}function yB(e){for(var t;e.hasNode(t=js.uniqueId("_root")););return t}var xB=Ee,wB=bB;function bB(e,t,n){var r={},i;xB.forEach(n,function(s){for(var a=e.parent(s),o,l;a;){if(o=e.parent(a),o?(l=r[o],r[o]=a):(l=i,i=a),l&&l!==a){t.setEdge(l,a);return}a=o}})}var lr=Ee,SB=W3,_B=Q3,kB=fB,CB=vB,EB=wB,TB=nn.Graph,G_=bt,jB=NB;function NB(e){var t=G_.maxRank(e),n=H_(e,lr.range(1,t+1),"inEdges"),r=H_(e,lr.range(t-1,-1,-1),"outEdges"),i=SB(e);K_(e,i);for(var s=Number.POSITIVE_INFINITY,a,o=0,l=0;l<4;++o,++l){MB(o%2?n:r,o%4>=2),i=G_.buildLayerMatrix(e);var u=_B(e,i);u<s&&(l=0,a=lr.cloneDeep(i),s=u)}K_(e,a)}function H_(e,t,n){return lr.map(t,function(r){return CB(e,r,n)})}function MB(e,t){var n=new TB;lr.forEach(e,function(r){var i=r.graph().root,s=kB(r,i,n,t);lr.forEach(s.vs,function(a,o){r.node(a).order=o}),EB(r,n,s.vs)})}function K_(e,t){lr.forEach(t,function(n){lr.forEach(n,function(r,i){e.node(r).order=i})})}var X=Ee,PB=nn.Graph,RB=bt,AB={positionX:zB};function IB(e,t){var n={};function r(i,s){var a=0,o=0,l=i.length,u=X.last(s);return X.forEach(s,function(c,d){var h=LB(e,c),m=h?e.node(h).order:l;(h||c===u)&&(X.forEach(s.slice(o,d+1),function(g){X.forEach(e.predecessors(g),function(p){var w=e.node(p),v=w.order;(v<a||m<v)&&!(w.dummy&&e.node(g).dummy)&&yN(n,p,g)})}),o=d+1,a=m)}),s}return X.reduce(t,r),n}function DB(e,t){var n={};function r(s,a,o,l,u){var c;X.forEach(X.range(a,o),function(d){c=s[d],e.node(c).dummy&&X.forEach(e.predecessors(c),function(h){var m=e.node(h);m.dummy&&(m.order<l||m.order>u)&&yN(n,h,c)})})}function i(s,a){var o=-1,l,u=0;return X.forEach(a,function(c,d){if(e.node(c).dummy==="border"){var h=e.predecessors(c);h.length&&(l=e.node(h[0]).order,r(a,u,d,o,l),u=d,o=l)}r(a,u,a.length,l,s.length)}),a}return X.reduce(t,i),n}function LB(e,t){if(e.node(t).dummy)return X.find(e.predecessors(t),function(n){return e.node(n).dummy})}function yN(e,t,n){if(t>n){var r=t;t=n,n=r}var i=e[t];i||(e[t]=i={}),i[n]=!0}function OB(e,t,n){if(t>n){var r=t;t=n,n=r}return X.has(e[t],n)}function qB(e,t,n,r){var i={},s={},a={};return X.forEach(t,function(o){X.forEach(o,function(l,u){i[l]=l,s[l]=l,a[l]=u})}),X.forEach(t,function(o){var l=-1;X.forEach(o,function(u){var c=r(u);if(c.length){c=X.sortBy(c,function(p){return a[p]});for(var d=(c.length-1)/2,h=Math.floor(d),m=Math.ceil(d);h<=m;++h){var g=c[h];s[u]===u&&l<a[g]&&!OB(n,u,g)&&(s[g]=u,s[u]=i[u]=i[g],l=a[g])}}})}),{root:i,align:s}}function FB(e,t,n,r,i){var s={},a=VB(e,t,n,i),o=i?"borderLeft":"borderRight";function l(d,h){for(var m=a.nodes(),g=m.pop(),p={};g;)p[g]?d(g):(p[g]=!0,m.push(g),m=m.concat(h(g))),g=m.pop()}function u(d){s[d]=a.inEdges(d).reduce(function(h,m){return Math.max(h,s[m.v]+a.edge(m))},0)}function c(d){var h=a.outEdges(d).reduce(function(g,p){return Math.min(g,s[p.w]-a.edge(p))},Number.POSITIVE_INFINITY),m=e.node(d);h!==Number.POSITIVE_INFINITY&&m.borderType!==o&&(s[d]=Math.max(s[d],h))}return l(u,a.predecessors.bind(a)),l(c,a.successors.bind(a)),X.forEach(r,function(d){s[d]=s[n[d]]}),s}function VB(e,t,n,r){var i=new PB,s=e.graph(),a=GB(s.nodesep,s.edgesep,r);return X.forEach(t,function(o){var l;X.forEach(o,function(u){var c=n[u];if(i.setNode(c),l){var d=n[l],h=i.edge(d,c);i.setEdge(d,c,Math.max(a(e,u,l),h||0))}l=u})}),i}function BB(e,t){return X.minBy(X.values(t),function(n){var r=Number.NEGATIVE_INFINITY,i=Number.POSITIVE_INFINITY;return X.forIn(n,function(s,a){var o=HB(e,a)/2;r=Math.max(s+o,r),i=Math.min(s-o,i)}),r-i})}function $B(e,t){var n=X.values(t),r=X.min(n),i=X.max(n);X.forEach(["u","d"],function(s){X.forEach(["l","r"],function(a){var o=s+a,l=e[o],u;if(l!==t){var c=X.values(l);u=a==="l"?r-X.min(c):i-X.max(c),u&&(e[o]=X.mapValues(l,function(d){return d+u}))}})})}function UB(e,t){return X.mapValues(e.ul,function(n,r){if(t)return e[t.toLowerCase()][r];var i=X.sortBy(X.map(e,r));return(i[1]+i[2])/2})}function zB(e){var t=RB.buildLayerMatrix(e),n=X.merge(IB(e,t),DB(e,t)),r={},i;X.forEach(["u","d"],function(a){i=a==="u"?t:X.values(t).reverse(),X.forEach(["l","r"],function(o){o==="r"&&(i=X.map(i,function(d){return X.values(d).reverse()}));var l=(a==="u"?e.predecessors:e.successors).bind(e),u=qB(e,i,n,l),c=FB(e,i,u.root,u.align,o==="r");o==="r"&&(c=X.mapValues(c,function(d){return-d})),r[a+o]=c})});var s=BB(e,r);return $B(r,s),UB(r,e.graph().align)}function GB(e,t,n){return function(r,i,s){var a=r.node(i),o=r.node(s),l=0,u;if(l+=a.width/2,X.has(a,"labelpos"))switch(a.labelpos.toLowerCase()){case"l":u=-a.width/2;break;case"r":u=a.width/2;break}if(u&&(l+=n?u:-u),u=0,l+=(a.dummy?t:e)/2,l+=(o.dummy?t:e)/2,l+=o.width/2,X.has(o,"labelpos"))switch(o.labelpos.toLowerCase()){case"l":u=o.width/2;break;case"r":u=-o.width/2;break}return u&&(l+=n?u:-u),u=0,l}}function HB(e,t){return e.node(t).width}var Ns=Ee,xN=bt,KB=AB.positionX,WB=YB;function YB(e){e=xN.asNonCompoundGraph(e),QB(e),Ns.forEach(KB(e),function(t,n){e.node(n).x=t})}function QB(e){var t=xN.buildLayerMatrix(e),n=e.graph().ranksep,r=0;Ns.forEach(t,function(i){var s=Ns.max(Ns.map(i,function(a){return e.node(a).height}));Ns.forEach(i,function(a){e.node(a).y=r+s/2}),r+=s+n})}var ne=Ee,W_=VV,Y_=r3,JB=T3,XB=bt.normalizeRanks,ZB=P3,e$=bt.removeEmptyRanks,Q_=D3,t$=B3,J_=U3,n$=jB,r$=WB,hr=bt,i$=nn.Graph,s$=a$;function a$(e,t){var n=t&&t.debugTiming?hr.time:hr.notime;n("layout",function(){var r=n("  buildLayoutGraph",function(){return g$(e)});n("  runLayout",function(){o$(r,n)}),n("  updateInputGraph",function(){l$(e,r)})})}function o$(e,t){t("    makeSpaceForEdgeLabels",function(){y$(e)}),t("    removeSelfEdges",function(){T$(e)}),t("    acyclic",function(){W_.run(e)}),t("    nestingGraph.run",function(){Q_.run(e)}),t("    rank",function(){JB(hr.asNonCompoundGraph(e))}),t("    injectEdgeLabelProxies",function(){x$(e)}),t("    removeEmptyRanks",function(){e$(e)}),t("    nestingGraph.cleanup",function(){Q_.cleanup(e)}),t("    normalizeRanks",function(){XB(e)}),t("    assignRankMinMax",function(){w$(e)}),t("    removeEdgeLabelProxies",function(){b$(e)}),t("    normalize.run",function(){Y_.run(e)}),t("    parentDummyChains",function(){ZB(e)}),t("    addBorderSegments",function(){t$(e)}),t("    order",function(){n$(e)}),t("    insertSelfEdges",function(){j$(e)}),t("    adjustCoordinateSystem",function(){J_.adjust(e)}),t("    position",function(){r$(e)}),t("    positionSelfEdges",function(){N$(e)}),t("    removeBorderNodes",function(){E$(e)}),t("    normalize.undo",function(){Y_.undo(e)}),t("    fixupEdgeLabelCoords",function(){k$(e)}),t("    undoCoordinateSystem",function(){J_.undo(e)}),t("    translateGraph",function(){S$(e)}),t("    assignNodeIntersects",function(){_$(e)}),t("    reversePoints",function(){C$(e)}),t("    acyclic.undo",function(){W_.undo(e)})}function l$(e,t){ne.forEach(e.nodes(),function(n){var r=e.node(n),i=t.node(n);r&&(r.x=i.x,r.y=i.y,t.children(n).length&&(r.width=i.width,r.height=i.height))}),ne.forEach(e.edges(),function(n){var r=e.edge(n),i=t.edge(n);r.points=i.points,ne.has(i,"x")&&(r.x=i.x,r.y=i.y)}),e.graph().width=t.graph().width,e.graph().height=t.graph().height}var u$=["nodesep","edgesep","ranksep","marginx","marginy"],c$={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},d$=["acyclicer","ranker","rankdir","align"],f$=["width","height"],h$={width:0,height:0},p$=["minlen","weight","width","height","labeloffset"],m$={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},v$=["labelpos"];function g$(e){var t=new i$({multigraph:!0,compound:!0}),n=Ip(e.graph());return t.setGraph(ne.merge({},c$,Ap(n,u$),ne.pick(n,d$))),ne.forEach(e.nodes(),function(r){var i=Ip(e.node(r));t.setNode(r,ne.defaults(Ap(i,f$),h$)),t.setParent(r,e.parent(r))}),ne.forEach(e.edges(),function(r){var i=Ip(e.edge(r));t.setEdge(r,ne.merge({},m$,Ap(i,p$),ne.pick(i,v$)))}),t}function y$(e){var t=e.graph();t.ranksep/=2,ne.forEach(e.edges(),function(n){var r=e.edge(n);r.minlen*=2,r.labelpos.toLowerCase()!=="c"&&(t.rankdir==="TB"||t.rankdir==="BT"?r.width+=r.labeloffset:r.height+=r.labeloffset)})}function x$(e){ne.forEach(e.edges(),function(t){var n=e.edge(t);if(n.width&&n.height){var r=e.node(t.v),i=e.node(t.w),s={rank:(i.rank-r.rank)/2+r.rank,e:t};hr.addDummyNode(e,"edge-proxy",s,"_ep")}})}function w$(e){var t=0;ne.forEach(e.nodes(),function(n){var r=e.node(n);r.borderTop&&(r.minRank=e.node(r.borderTop).rank,r.maxRank=e.node(r.borderBottom).rank,t=ne.max(t,r.maxRank))}),e.graph().maxRank=t}function b$(e){ne.forEach(e.nodes(),function(t){var n=e.node(t);n.dummy==="edge-proxy"&&(e.edge(n.e).labelRank=n.rank,e.removeNode(t))})}function S$(e){var t=Number.POSITIVE_INFINITY,n=0,r=Number.POSITIVE_INFINITY,i=0,s=e.graph(),a=s.marginx||0,o=s.marginy||0;function l(u){var c=u.x,d=u.y,h=u.width,m=u.height;t=Math.min(t,c-h/2),n=Math.max(n,c+h/2),r=Math.min(r,d-m/2),i=Math.max(i,d+m/2)}ne.forEach(e.nodes(),function(u){l(e.node(u))}),ne.forEach(e.edges(),function(u){var c=e.edge(u);ne.has(c,"x")&&l(c)}),t-=a,r-=o,ne.forEach(e.nodes(),function(u){var c=e.node(u);c.x-=t,c.y-=r}),ne.forEach(e.edges(),function(u){var c=e.edge(u);ne.forEach(c.points,function(d){d.x-=t,d.y-=r}),ne.has(c,"x")&&(c.x-=t),ne.has(c,"y")&&(c.y-=r)}),s.width=n-t+a,s.height=i-r+o}function _$(e){ne.forEach(e.edges(),function(t){var n=e.edge(t),r=e.node(t.v),i=e.node(t.w),s,a;n.points?(s=n.points[0],a=n.points[n.points.length-1]):(n.points=[],s=i,a=r),n.points.unshift(hr.intersectRect(r,s)),n.points.push(hr.intersectRect(i,a))})}function k$(e){ne.forEach(e.edges(),function(t){var n=e.edge(t);if(ne.has(n,"x"))switch((n.labelpos==="l"||n.labelpos==="r")&&(n.width-=n.labeloffset),n.labelpos){case"l":n.x-=n.width/2+n.labeloffset;break;case"r":n.x+=n.width/2+n.labeloffset;break}})}function C$(e){ne.forEach(e.edges(),function(t){var n=e.edge(t);n.reversed&&n.points.reverse()})}function E$(e){ne.forEach(e.nodes(),function(t){if(e.children(t).length){var n=e.node(t),r=e.node(n.borderTop),i=e.node(n.borderBottom),s=e.node(ne.last(n.borderLeft)),a=e.node(ne.last(n.borderRight));n.width=Math.abs(a.x-s.x),n.height=Math.abs(i.y-r.y),n.x=s.x+n.width/2,n.y=r.y+n.height/2}}),ne.forEach(e.nodes(),function(t){e.node(t).dummy==="border"&&e.removeNode(t)})}function T$(e){ne.forEach(e.edges(),function(t){if(t.v===t.w){var n=e.node(t.v);n.selfEdges||(n.selfEdges=[]),n.selfEdges.push({e:t,label:e.edge(t)}),e.removeEdge(t)}})}function j$(e){var t=hr.buildLayerMatrix(e);ne.forEach(t,function(n){var r=0;ne.forEach(n,function(i,s){var a=e.node(i);a.order=s+r,ne.forEach(a.selfEdges,function(o){hr.addDummyNode(e,"selfedge",{width:o.label.width,height:o.label.height,rank:a.rank,order:s+ ++r,e:o.e,label:o.label},"_se")}),delete a.selfEdges})})}function N$(e){ne.forEach(e.nodes(),function(t){var n=e.node(t);if(n.dummy==="selfedge"){var r=e.node(n.e.v),i=r.x+r.width/2,s=r.y,a=n.x-i,o=r.height/2;e.setEdge(n.e,n.label),e.removeNode(t),n.label.points=[{x:i+2*a/3,y:s-o},{x:i+5*a/6,y:s-o},{x:i+a,y:s},{x:i+5*a/6,y:s+o},{x:i+2*a/3,y:s+o}],n.label.x=n.x,n.label.y=n.y}})}function Ap(e,t){return ne.mapValues(ne.pick(e,t),Number)}function Ip(e){var t={};return ne.forEach(e,function(n,r){t[r.toLowerCase()]=n}),t}var Xa=Ee,M$=bt,P$=nn.Graph,R$={debugOrdering:A$};function A$(e){var t=M$.buildLayerMatrix(e),n=new P$({compound:!0,multigraph:!0}).setGraph({});return Xa.forEach(e.nodes(),function(r){n.setNode(r,{label:r}),n.setParent(r,"layer"+e.node(r).rank)}),Xa.forEach(e.edges(),function(r){n.setEdge(r.v,r.w,{},r.name)}),Xa.forEach(t,function(r,i){var s="layer"+i;n.setNode(s,{rank:"same"}),Xa.reduce(r,function(a,o){return n.setEdge(a,o,{style:"invis"}),o})}),n}var I$="0.8.5",D$={graphlib:nn,layout:s$,debug:R$,util:{time:bt.time,notime:bt.notime},version:I$};const X_=lk(D$),Z_=new Map;function L$(e,t){const n=e.map(i=>i.id).join("|"),r=t.map(i=>`${i.source}->${i.target}`).join("|");return`${e.length}:${t.length}:${n}:${r}`}function O$(e,t,n){if(n){const r=L$(e,t),i=Z_.get(n);if(i&&i.signature===r)return i.layout;const s=ek(e,t);return Z_.set(n,{signature:r,layout:s}),s}return ek(e,t)}function ek(e,t){if(e.length>2500){const r=Math.ceil(Math.sqrt(e.length));return e.map((i,s)=>{const a=Math.floor(s/r),o=s%r;return{id:i.id,position:{x:o*260,y:a*160}}})}const n=new X_.graphlib.Graph;return n.setGraph({rankdir:"LR",nodesep:48,ranksep:80}),n.setDefaultEdgeLabel(()=>({})),e.forEach(r=>{n.setNode(r.id,{width:220,height:120})}),t.forEach(r=>{n.setEdge(r.source,r.target)}),X_.layout(n),e.map(r=>{const i=n.node(r.id);return{id:r.id,position:{x:i.x-i.width/2,y:i.y-i.height/2}}})}function q$(e){const t=new Map;for(const r of e)r.type==="tool_call"&&r.toolCallId&&t.set(r.toolCallId,r.id);const n=[];for(const r of e)if(!(r.type!=="llm_call"||!r.io)){for(const i of r.io.emittedToolCallIds??[]){const s=t.get(i);s&&n.push({id:`io_emit_${r.id}_${s}`,source:r.id,target:s,kind:"io",toolCallId:i})}for(const i of r.io.consumedToolCallIds??[]){const s=t.get(i);s&&n.push({id:`io_consume_${s}_${r.id}`,source:s,target:r.id,kind:"io",toolCallId:i})}}return n}function F$(e,t,n){const{intervals:r}=hl(e,t,n),i=new Set;return r.forEach(s=>{i.add(s.startMs),i.add(s.endMs)}),Array.from(i).sort((s,a)=>s-a)}function V$(e,t,n){if(!e.length)return null;if(n===1){for(const r of e)if(r>t+1)return r;return e[e.length-1]}for(let r=e.length-1;r>=0;r-=1){const i=e[r];if(i<t-1)return i}return e[0]}const B$=300,$$=2e3,U$=1.5;function z$(e){const t=B$*Math.pow(U$,Math.max(0,e));return Math.min($$,Math.round(t))}function Gn(e,t){if(!e)return t;try{return JSON.parse(e)}catch{return t}}function tk(e,t){const n=new Map;return[...e,...t].forEach(r=>{const i=n.get(r.id);(!i||r.updatedAt>=i.updatedAt)&&n.set(r.id,r)}),Array.from(n.values()).sort((r,i)=>r.createdAt-i.createdAt)}function nk(e,t=50){return[...e].sort((n,r)=>r.timestamp-n.timestamp).slice(0,t)}const rk=220,ik=120,Qm="agentDirector.presence.v1",G$=2e4,H$=5e3,ii="agentDirector.collab.cursors.v1",Dp="agentDirector.collab.annotations.v1",Lp="agentDirector.collab.activity.v1",K$=_.lazy(()=>Gv(()=>import("./index-BuvLURcw.js"),__vite__mapDeps([0,1]))),W$=_.lazy(()=>Gv(()=>import("./index-C8INN9qU.js"),[])),Y$=_.lazy(()=>Gv(()=>import("./index-DaslPCPh.js"),[]));function Za(){return`scenario-${Math.random().toString(36).slice(2,9)}`}function Q$(e){return e.filter(t=>t.parentStepId).map(t=>({source:t.parentStepId,target:t.id}))}function J$(e){const t=[...e].sort((n,r)=>n.index-r.index);return t.slice(1).map((n,r)=>({source:t[r].id,target:n.id}))}function X$(e){const t={},n=e.getBoundingClientRect();return e.querySelectorAll(".step-card").forEach(i=>{const s=i.dataset.stepId;if(!s)return;const a=i.getBoundingClientRect();t[s]={left:a.left-n.left,top:a.top-n.top,width:a.width,height:a.height}}),t}function Z$(e,t,n){const r=[...Q$(e),...J$(e),...q$(e).map(g=>({source:g.source,target:g.target}))],i=O$(e,r,n),s=t.getBoundingClientRect(),a=Math.min(...i.map(g=>g.position.x)),o=Math.min(...i.map(g=>g.position.y)),l=Math.max(...i.map(g=>g.position.x)),u=Math.max(...i.map(g=>g.position.y)),c=l-a+rk,d=u-o+ik,h=Math.max(32,(s.width-c)/2),m=Math.max(24,(s.height-d)/2);return i.reduce((g,p)=>(g[p.id]={left:p.position.x-a+h,top:p.position.y-o+m,width:rk,height:ik},g),{})}function sk(e,t,n){const r=t.trim().toLowerCase();return e.filter(i=>{var a,o,l;return n!=="all"&&i.type!==n?!1:r?[i.name,(a=i.preview)==null?void 0:a.title,(o=i.preview)==null?void 0:o.outputPreview,(l=i.preview)==null?void 0:l.inputPreview].filter(Boolean).join(" ").toLowerCase().includes(r):!0})}function e4(){const e=window.sessionStorage.getItem("agentDirector.sessionId");if(e)return e;const t=`session-${Math.random().toString(36).slice(2,10)}`;return window.sessionStorage.setItem("agentDirector.sessionId",t),t}function ak(){try{const e=window.localStorage.getItem(Qm);if(!e)return{};const t=JSON.parse(e),n={};return Object.entries(t).forEach(([r,i])=>{typeof i=="number"&&(n[r]=i)}),n}catch{return{}}}function ok(e,t=Date.now()){return Object.fromEntries(Object.entries(e).filter(([,n])=>t-n<G$))}function t4(){var ly;const{trace:e,insights:t,loading:n,error:r,reload:i,traces:s,selectedTraceId:a,setSelectedTraceId:o}=F2(),[l,u]=Qe("agentDirector.mode","cinema"),[c,d]=_.useState(""),h=_.useDeferredValue(c),[m,g]=_.useState("all"),[p,w]=_.useState(""),[v,y]=_.useState(null),[x,S]=_.useState(null),[k,E]=_.useState(null),[j,T]=_.useState([]),[M,D]=_.useState(""),[R,H]=_.useState(null),[Y,pe]=_.useState(!1),[F,le]=_.useState(null),[se,A]=Qe("agentDirector.safeExport",!1),[I,z]=Qe("agentDirector.syncPlayback",!0),[U,re]=_.useState(null),[Te,ue]=_.useState(!1),[ge,xe]=_.useState(0),[tt,nt]=Qe("agentDirector.speed",1),[ct,At]=Qe("agentDirector.windowed",!1),[vn,Fn]=_.useState(2e4),[O,ee]=_.useState(!1),[J,Le]=_.useState(!1),[te,Re]=Qe("agentDirector.overlayEnabled",!1),[Ht,xr]=Qe("agentDirector.onboarded",!1),[,St]=Qe("agentDirector.tourCompleted",!1),[Be,ye]=Qe("agentDirector.explainMode",!0),[It,rn]=Qe("agentDirector.heroDismissed",!1),[Yi,Vn]=Qe("agentDirector.dockOpen",!1),[fe,Wr]=Qe("agentDirector.introPersona","builder"),[sn,Yr]=Qe("agentDirector.themeMode","studio"),[be,mt]=Qe("agentDirector.timelineLaneStrategy","type"),[N,V]=Qe("agentDirector.timelineStudioConfig",hs),[G,B]=Qe("agentDirector.missions",{playback:!1,flow:!1,inspect:!1,matrix:!1,replay:!1,annotate:!1,collaborate:!1}),me=!1,[Oe,ce]=Qe("agentDirector.introDismissed",me),[rt,Ke]=_.useState(!1),[ae,Qr]=_.useState(null),[wr,Qi]=_.useState([]),[Ji,Fl]=_.useState(null),[wN,Kg]=_.useState(null),[Vl,Bl]=_.useState(""),[bN,Jr]=_.useState([{id:Za(),name:"Prompt tighter",strategy:"hybrid",modificationsText:'{"prompt":"Return concise response"}'},{id:Za(),name:"Recorded baseline",strategy:"recorded",modificationsText:"{}"}]),[Xi,$l]=_.useState(null),[Dt,Wg]=_.useState(null),[SN,Ea]=_.useState(!1),[_N,Zi]=_.useState(null),[Ul,Yg]=_.useState(1),[kN,zl]=_.useState(null),[Qg,Gl]=_.useState({}),[Jg,Hl]=_.useState([]),[CN,Kl]=_.useState([]),[es,Wl]=_.useState(800),[EN,TN]=_.useState(0),Yl=_.useRef(null),Xg=_.useRef(null),Xr=_.useRef(e4()),Zg=_.useRef(0),ey=_.useRef(0),Ql=_.useRef(!1),Bn=_.useMemo(()=>{if(!e)return[];const b=performance.now(),C=sk(e.steps,h,m);return ey.current=performance.now()-b,C},[e,h,m]),Jl=_.useMemo(()=>Bn.slice(0,Math.min(Bn.length,es)),[es,Bn]),ty=_.useMemo(()=>{if(!v)return Jl;const b=new Set(v.matchedStepIds);return Jl.filter(C=>b.has(C.id))},[Jl,v]),jN=_.useMemo(()=>U?sk(U.steps,h,m).slice(0,Math.min(U.steps.length,es)):[],[U,h,m,es]),ny=_.useMemo(()=>e?F$(e.startedAt,e.endedAt,e.steps):[],[e]),NN=_.useMemo(()=>!e||!U?null:nj(e,U),[e,U]),ry=_.useMemo(()=>e?e.steps.find(b=>b.id===F)??null:null,[e,F]),ts=_.useMemo(()=>e?QR(e.steps,be):[],[e,be]),Zr=_.useMemo(()=>{const b=N[be]??hs[be];return x0(ts,b.order,b.hidden)},[ts,be,N]),MN=_.useMemo(()=>Zr.order.filter(b=>!Zr.hidden.includes(b)),[Zr.hidden,Zr.order]),Ta=_.useMemo(()=>{const b=Xr.current;return Object.values(Qg).filter(C=>C.sessionId!==b).filter(C=>C.traceId===((e==null?void 0:e.id)??"none")).sort((C,P)=>P.updatedAt-C.updatedAt)},[Qg,e==null?void 0:e.id]),PN=_.useMemo(()=>Ta.map(b=>b.playheadMs),[Ta]),RN=_.useMemo(()=>Jg.filter(b=>b.traceId===(e==null?void 0:e.id)),[Jg,e==null?void 0:e.id]),AN=_.useMemo(()=>{const b=Object.keys(G).length,C=Object.values(G).filter(Boolean).length;return{done:C,total:b,pct:b>0?Math.round(C/b*100):0}},[G]);_.useEffect(()=>{y(null),S(null)},[e==null?void 0:e.id]),_.useEffect(()=>{TN(Math.round(ey.current))},[Bn]),_.useEffect(()=>{if(!e)return;const b=Bn.length;if(b<=1200){Wl(b);return}Wl(800);const C=window.setInterval(()=>{Wl(P=>P>=b?(window.clearInterval(C),b):Math.min(b,P+1e3))},70);return()=>window.clearInterval(C)},[Bn.length,e]),_.useEffect(()=>{let b=!1;if(!(e!=null&&e.id)){E(null);return}return P2(e.id).then(C=>{b||E(C)}),()=>{b=!0}},[e==null?void 0:e.id]),_.useEffect(()=>{let b=!1;return R2().then(C=>{b||(T(C),!M&&C.length>0&&D(C[0].id))}),()=>{b=!0}},[M]),_.useEffect(()=>{Xg.current=U},[U]),_.useEffect(()=>(document.body.dataset.theme=sn,()=>{delete document.body.dataset.theme}),[sn]),_.useEffect(()=>{const b=Xr.current,C=(Z=!1)=>{const Ae=Date.now(),yn=ok(ak(),Ae);Z?delete yn[b]:yn[b]=Ae,window.localStorage.setItem(Qm,JSON.stringify(yn)),Yg(Math.max(1,Object.keys(yn).length))},P=()=>{const Z=ok(ak(),Date.now());Yg(Math.max(1,Object.keys(Z).length))};C();const q=window.setInterval(()=>C(),H$),W=Z=>{Z.key===Qm&&P()},Q=()=>{document.visibilityState==="visible"&&C()},ie=()=>C(!0);return window.addEventListener("storage",W),document.addEventListener("visibilitychange",Q),window.addEventListener("beforeunload",ie),()=>{window.clearInterval(q),C(!0),window.removeEventListener("storage",W),document.removeEventListener("visibilitychange",Q),window.removeEventListener("beforeunload",ie)}},[]),_.useEffect(()=>{l==="compare"&&Vn(!1)},[l,Vn]),_.useEffect(()=>{ts.length!==0&&V(b=>{const C=b[be]??hs[be],P=x0(ts,C.order,C.hidden);return P.order.join("|")===C.order.join("|")&&P.hidden.join("|")===C.hidden.join("|")?b:{...b,[be]:P}})},[ts,be,V]),_.useEffect(()=>{Gl(Gn(window.localStorage.getItem(ii),{})),Hl(Gn(window.localStorage.getItem(Dp),[])),Kl(Gn(window.localStorage.getItem(Lp),[]))},[]),_.useEffect(()=>{const b=Date.now();if(b-Zg.current<120&&Te)return;Zg.current=b;const C=Xr.current,P={sessionId:C,traceId:(e==null?void 0:e.id)??"none",mode:l,playheadMs:Math.round(ge),selectedStepId:F,updatedAt:b},W={...Gn(window.localStorage.getItem(ii),{}),[C]:P};window.localStorage.setItem(ii,JSON.stringify(W)),Gl(W)},[Te,l,ge,F,e==null?void 0:e.id]),_.useEffect(()=>{const b=Xr.current;return()=>{const C=Gn(window.localStorage.getItem(ii),{});if(!C[b])return;const P={...C};delete P[b],window.localStorage.setItem(ii,JSON.stringify(P))}},[]),_.useEffect(()=>{const b=C=>{if(C.key===ii&&Gl(Gn(C.newValue,{})),C.key===Dp){const P=Gn(C.newValue,[]);Hl(q=>tk(q,P))}C.key===Lp&&Kl(nk(Gn(C.newValue,[])))};return window.addEventListener("storage",b),()=>window.removeEventListener("storage",b)},[]);const qe=_.useCallback(b=>{const C={id:`activity-${Math.random().toString(36).slice(2,9)}`,sessionId:Xr.current,message:b,timestamp:Date.now()};Kl(P=>{const q=nk([C,...P]);return window.localStorage.setItem(Lp,JSON.stringify(q)),q})},[]),gn=_.useCallback(async b=>{if(!e)return;const C=await I2(e.id,b,"hybrid",{note:"UI replay"},e);C&&(re(C),Re(!0),u("flow"),B(P=>P.replay?P:{...P,replay:!0}),qe(`Created replay from ${b}`))},[qe,B,e,re,u,Re]),IN=_.useCallback(async()=>{if(!e)return;if(!p.trim()){y(null),S(null);return}const b=await M2(e.id,p.trim());if(!b){S("TraceQL query failed"),y(null);return}y(b),S(null);const C=b.matchedStepIds[0];C&&(le(C),l!=="cinema"&&u("cinema"))},[l,u,e,p]),DN=_.useCallback(async()=>{if(!e||!M)return;pe(!0);const b=await A2(M,e.id);pe(!1),b&&H(b.result)},[M,e]),an=_.useCallback(()=>{if(!e)return;const b=[...e.steps].sort((C,P)=>(P.durationMs??0)-(C.durationMs??0))[0];b&&(le(b.id),u("cinema"))},[e,u]),iy=_.useCallback(()=>{if(!e||e.steps.length===0)return null;const b=[...e.steps].sort((C,P)=>(P.durationMs??0)-(C.durationMs??0))[0];return(b==null?void 0:b.id)??null},[e]),ns=_.useCallback(()=>{if(!e)return;const b=e.steps.find(C=>C.status==="failed");b&&(le(b.id),u("cinema"))},[e,u]),LN=_.useCallback(async()=>{if(!e)return;const b=new URL(window.location.href);b.searchParams.set("trace",a??e.id),b.searchParams.set("mode",l),F?b.searchParams.set("step",F):b.searchParams.delete("step");try{await navigator.clipboard.writeText(b.toString()),zl("Live link copied")}catch{window.prompt("Copy live session link",b.toString()),zl("Live link ready")}window.setTimeout(()=>zl(null),1800)},[l,F,a,e]),ON=_.useCallback(b=>{mt(b),qe(`Switched lane strategy to ${b}`)},[qe,mt]),qN=_.useCallback(b=>{V(C=>{const P=C[be]??hs[be],q=P.hidden.includes(b)?P.hidden.filter(W=>W!==b):[...P.hidden,b];return{...C,[be]:{...P,hidden:q}}}),qe(`Toggled lane visibility for ${b}`)},[qe,be,V]),FN=_.useCallback((b,C)=>{V(P=>{const q=P[be]??hs[be],W=[...q.order],Q=W.indexOf(b);if(Q===-1)return P;const ie=C==="up"?Q-1:Q+1;if(ie<0||ie>=W.length)return P;const[Z]=W.splice(Q,1);return W.splice(ie,0,Z),{...P,[be]:{...q,order:W}}}),qe(`Moved lane group ${b} ${C}`)},[qe,be,V]),VN=_.useCallback(()=>{B({playback:!1,flow:!1,inspect:!1,matrix:!1,replay:!1,annotate:!1,collaborate:!1}),qe("Reset onboarding missions")},[qe,B]),BN=_.useCallback((b,C)=>{if(!e||!b.trim())return;const P=Date.now(),q={id:`annotation-${Math.random().toString(36).slice(2,9)}`,traceId:e.id,stepId:C,body:b.trim(),authorSessionId:Xr.current,createdAt:P,updatedAt:P};Hl(W=>{const Q=tk(W,[q]);return window.localStorage.setItem(Dp,JSON.stringify(Q)),Q}),B(W=>W.annotate?W:{...W,annotate:!0}),qe(C?`Added annotation on step ${C}`:"Added trace annotation")},[qe,B,e]),$N=_.useCallback((b,C)=>{Jr(P=>P.map(q=>q.id===b?{...q,...C}:q))},[]),UN=_.useCallback(b=>{Jr(b)},[]),zN=_.useCallback(()=>{Jr(b=>[...b,{id:Za(),name:`Scenario ${b.length+1}`,strategy:"hybrid",modificationsText:"{}"}])},[]),GN=_.useCallback(b=>{Jr(C=>C.length<=1?C:C.filter(P=>P.id!==b))},[]),HN=_.useCallback(b=>{Jr(C=>{const P=C.findIndex(ie=>ie.id===b);if(P===-1)return C;const q=C[P],W={...q,id:Za(),name:`${q.name} copy`},Q=[...C];return Q.splice(P+1,0,W),Q})},[]),KN=_.useCallback((b,C)=>{Jr(P=>{const q=P.findIndex(Z=>Z.id===b);if(q===-1)return P;const W=C==="up"?q-1:q+1;if(W<0||W>=P.length)return P;const Q=[...P],[ie]=Q.splice(q,1);return Q.splice(W,0,ie),Q})},[]),WN=_.useCallback(async b=>{var P;if(!e)return;const C=Vl||F||((P=e.steps[0])==null?void 0:P.id);if(!C){Zi("Select an anchor step before running the matrix.");return}try{Ea(!0),Zi(null);const q=await D2({traceId:e.id,stepId:C,scenarios:b});if(!q)throw new Error("Failed to create replay job.");$l(q);let W=q;for(let ie=0;ie<30&&!(W.status!=="queued"&&W.status!=="running");ie+=1){const Z=z$(ie);await new Promise(yn=>window.setTimeout(yn,Z));const Ae=await L2(q.id);if(!Ae)break;W=Ae,$l(Ae)}const Q=await Wx(q.id);if(!Q)throw new Error("Replay job finished but matrix summary is unavailable.");Wg(Q),u("matrix"),qe(`Ran matrix with ${b.length} scenario(s) from ${C}`)}catch(q){Zi(q instanceof Error?q.message:"Failed to run replay matrix.")}finally{Ea(!1)}},[qe,Vl,F,e,u]),YN=_.useCallback(async()=>{if(Xi){Ea(!0);try{const b=await O2(Xi.id);if(!b){Zi("Failed to cancel replay job.");return}$l(b);const C=await Wx(b.id);C&&Wg(C),qe(`Canceled matrix job ${Xi.id}`)}finally{Ea(!1)}}},[qe,Xi]),QN=_.useCallback(async b=>{const C=await rj();if(!(C!=null&&C.trace)){Zi("Could not load replay trace for compare view.");return}re(C.trace),Re(!0),u("compare"),qe(`Opened matrix compare trace ${b}`)},[qe,u,Re]),ze=_.useCallback(b=>{if(!(b===l||!e)){if((b==="flow"||b==="matrix")&&ue(!1),b==="flow"&&l==="cinema"&&Yl.current){const C=Yl.current,P=X$(C),q=Z$(e.steps,C,e.id);Kg({steps:e.steps,fromRects:P,toRects:q}),qe("Morphed cinema to flow");return}u(b),qe(`Switched mode to ${b}`)}},[qe,l,e,ue,u]),Xl=_.useCallback(()=>{l==="flow"&&ze("cinema"),ue(b=>!b)},[l,ze]),$n=_.useCallback(()=>{Qr(null),Qi([]),Fl(null),ue(!1)},[ue]),sy=_.useCallback(b=>[{id:"setup",label:"Opening the reel",duration:1100,action:()=>{ye(!0),ue(!1),xe(0),le(null),Re(!1),nt(1),e&&e.steps.length<500&&At(!1),ze("cinema")}},{id:"pace",label:"Pacing the timeline",duration:2200,action:()=>{ze("cinema"),ue(!0),nt(1.1)}},{id:"bottleneck",label:"Freeze on the bottleneck",duration:1600,action:()=>{ue(!1),an()}},{id:"inspect",label:"Inspect the moment",duration:1600,action:()=>{b&&le(b)}},{id:"flow",label:"Morph into flow",duration:2100,action:()=>{ze("flow")}},{id:"replay",label:"Directors Cut replay",duration:2200,action:async()=>{if(!e)return;!Xg.current&&b&&await gn(b),Re(!0),u("compare")}},{id:"compare",label:"Compare the cut",duration:2e3,action:()=>{ue(!0),nt(1)}},{id:"finale",label:"Final frame",duration:1100,action:()=>{ue(!1)}}],[ze,gn,an,ye,ue,u,Re,xe,le,nt,At,e]),ei=_.useCallback(()=>{var C;if(!e)return;const b=F??iy()??((C=e.steps[0])==null?void 0:C.id)??null;Qi(sy(b)),Qr({active:!0,step:0}),Fl(e.id),Ke(!1),ee(!1),Le(!1)},[sy,iy,F,e,Le,ee,Qi,Qr,Fl,Ke]),rs=_.useCallback(()=>{if(ae!=null&&ae.active){$n();return}ei()},[ei,$n,ae==null?void 0:ae.active]),JN=_.useMemo(()=>{const C=[{id:"header",title:"Mission control",body:`Confirm run status and metadata. ${{builder:"Focus on payload flow, tool-call sequencing, and replay-ready steps.",executive:"Focus on bottlenecks, risk signals, and run-level outcome changes.",operator:"Focus on failure patterns, retries, and runtime reliability posture."}[fe]}`,target:'[data-tour="header"]',placement:"bottom"}];return It||C.push({id:"hero",title:"Director briefing",body:"Choose Tour, Story mode, or Explain to ramp up quickly.",target:'[data-tour="hero"]',placement:"bottom"}),C.push({id:"insights",title:"Fast diagnosis",body:fe==="executive"?"Jump straight to bottlenecks and high-cost segments for fast executive readouts.":fe==="operator"?"Jump to failures and retries first, then inspect impacted steps.":"Jump straight to bottlenecks, errors, and high-cost steps with one click.",target:'[data-tour="insights"]',placement:"bottom"},{id:"journey",title:"Director journey",body:"A narrative path that teaches how to watch, inspect, and direct a better run.",target:'[data-tour="journey"]',placement:"bottom"},{id:"toolbar",title:"Filters + modes",body:"Search, filter, and switch between Cinema, Flow, and Compare as the story evolves.",target:'[data-tour="toolbar"]',placement:"bottom"},{id:"quick-actions",title:"Quick actions",body:"Launch Story Mode, open the command palette, or jump to bottlenecks instantly.",target:'[data-tour="quick-actions"]',placement:"left"},{id:"stage",title:"Cinema stage",body:"The timeline shows every step as a scene. Scrub to see pacing and concurrency.",target:'[data-tour="stage"]',placement:"top"},{id:"inspector",title:"Inspector",body:fe==="executive"?"Open key moments to validate outcome impact and communication-ready summaries.":"Open any step to read payloads, apply redaction, and replay from that moment.",target:'[data-tour="inspector"]',placement:"left"},{id:"compare",title:"Compare runs",body:U?"Compare is live. Review deltas in cost, steps, and wall time side by side.":"Replay from a step to unlock compare mode and validate improvements.",target:'[data-tour="compare"]',placement:"top"}),C},[U,It,fe]),XN=_.useCallback(()=>{Kg(null),u("flow")},[u]),ti=_.useMemo(()=>{var q,W,Q,ie;if(!e)return[];const b=[],C=[...e.steps].sort((Z,Ae)=>(Ae.durationMs??0)-(Z.durationMs??0))[0],P=e.steps.find(Z=>Z.status==="failed");if(P&&F!==P.id&&b.push({id:"jump-error",title:"Investigate first failure",body:`${P.name} failed and should be inspected before optimization work.`,actionLabel:"Open failed step",tone:"warning",action:ns}),C&&F!==C.id&&b.push({id:"jump-bottleneck",title:"Tackle latency bottleneck",body:`${C.name} is the slowest scene in this run and the best optimization target.`,actionLabel:"Open bottleneck",tone:"priority",action:an}),(q=k==null?void 0:k.hypotheses)!=null&&q[0]){const Z=k.hypotheses[0];b.push({id:"investigate-hypothesis",title:Z.title,body:Z.summary,actionLabel:"Inspect evidence",tone:"info",action:()=>{const Ae=Z.evidenceStepIds[0];Ae&&(le(Ae),l!=="cinema"&&u("cinema"))}})}if(l!=="matrix"&&b.push({id:"matrix-experiment",title:"Run scenario matrix",body:"Compare prompt and strategy alternatives from one anchor step to rank causal impact.",actionLabel:"Open matrix",tone:"info",action:()=>{var Z;Bl(F??((Z=e.steps[0])==null?void 0:Z.id)??""),u("matrix")}}),!U&&(F||(W=e.steps[0])!=null&&W.id)){const Z=F??((Q=e.steps[0])==null?void 0:Q.id)??null;Z&&b.push({id:"run-replay",title:"Create director replay",body:"Branch a replay trace and validate whether your change improves the run.",actionLabel:"Replay from step",tone:"info",action:()=>{gn(Z)}})}if((ie=Dt==null?void 0:Dt.causalRanking)!=null&&ie.length){const Z=Dt.causalRanking[0];b.push({id:"causal-factor",title:`Top causal factor: ${Z.factor}`,body:`Confidence ${(Z.confidence*100).toFixed(0)}% across ${Z.evidence.samples} sample(s).`,actionLabel:"View matrix",tone:"priority",action:()=>u("matrix")})}return b.slice(0,4)},[U,gn,k,an,ns,l,Dt,F,e,u]),is=_.useMemo(()=>{var Q,ie;if(!e)return"No trace loaded.";const b=[...e.steps].sort((Z,Ae)=>(Ae.durationMs??0)-(Z.durationMs??0))[0],C=e.steps.filter(Z=>Z.status==="failed").length,P=(Q=k==null?void 0:k.hypotheses)==null?void 0:Q[0],q=(ie=Dt==null?void 0:Dt.causalRanking)==null?void 0:ie[0];return[`Run ${e.id} completed with ${e.steps.length} steps across ${e.metadata.wallTimeMs}ms.`,b?`Primary latency driver: ${b.name} (${b.durationMs??0}ms).`:null,C>0?`Observed ${C} failed step(s), indicating reliability risk.`:"No failed steps observed.",P?`Top investigation hypothesis: ${P.title} (${P.severity}).`:null,q?`Highest ranked causal factor from matrix: ${q.factor} (${(q.confidence*100).toFixed(0)}% confidence).`:null,"Recommended plan: inspect bottleneck evidence, validate with replay matrix, and lock in mitigations."].filter(Boolean).join(" ")},[k,Dt==null?void 0:Dt.causalRanking,e]),ZN=_.useCallback(b=>{var P,q;const C=b.toLowerCase();if(!e)return"No trace is loaded yet.";if(C.includes("bottleneck")||C.includes("slow")){const W=[...e.steps].sort((Q,ie)=>(ie.durationMs??0)-(Q.durationMs??0))[0];return W?`The primary bottleneck is ${W.name} at ${W.durationMs??0}ms. Prioritize this step for optimization and replay validation.`:"No bottleneck could be determined from current trace data."}if(C.includes("risk")||C.includes("failure")||C.includes("error")){const W=e.steps.filter(Q=>Q.status==="failed");return W.length?`Risk is concentrated in ${W.length} failed step(s), starting at ${((P=W[0])==null?void 0:P.name)??"unknown"}.`:"Failure risk appears low for this run; no failed steps were observed."}return C.includes("cost")?`Recorded run cost is ${(e.metadata.totalCostUsd??0).toFixed(4)} USD. Use matrix scenarios to evaluate cheaper prompt/strategy options.`:C.includes("next")||C.includes("action")?ti.length?`Next action: ${((q=ti[0])==null?void 0:q.title)??"Open matrix"}.`:"Next action: open Cinema mode, inspect bottleneck, then run the matrix.":is},[is,ti,e]),eM=_.useCallback(()=>{if(!e)return;const b=`# Director Narrative

${is}

## Recommended Actions
${ti.map(C=>`- ${C.title}: ${C.body}`).join(`
`)}`;kE(`agent-director-narrative-${e.id}.md`,b,"text/markdown")},[is,ti,e]);_.useEffect(()=>{var P;if(!e)return;N2(),xe(0),ue(!1);const b=Math.min(Math.max((e.metadata.wallTimeMs||1)*.2,5e3),6e4);Fn(b),e.steps.length>500&&At(!0),U||Re(!1),l==="compare"&&!U&&u("cinema");const C=F&&e.steps.some(q=>q.id===F)?F:((P=e.steps[0])==null?void 0:P.id)??"";Bl(q=>q&&e.steps.some(W=>W.id===q)?q:C)},[e,U,l,F,u,At,Re]),_.useEffect(()=>(document.body.classList.toggle("explain-mode",Be),()=>{document.body.classList.remove("explain-mode")}),[Be]),_.useEffect(()=>(document.body.classList.toggle("story-mode",!!(ae!=null&&ae.active)),()=>{document.body.classList.remove("story-mode")}),[ae==null?void 0:ae.active]),_.useEffect(()=>{if(!(ae!=null&&ae.active))return;const b=wr[ae.step];if(!b){$n();return}Promise.resolve(b.action());const C=window.setTimeout(()=>{Qr(P=>P&&P.active?{...P,step:P.step+1}:P)},b.duration);return()=>window.clearTimeout(C)},[wr,$n,ae]),_.useEffect(()=>{ae!=null&&ae.active&&(!e||!Ji||e.id!==Ji&&$n())},[ae==null?void 0:ae.active,e,Ji,$n]),_.useEffect(()=>{ge>0&&B(b=>b.playback?b:{...b,playback:!0})},[ge,B]),_.useEffect(()=>{l==="flow"&&B(b=>b.flow?b:{...b,flow:!0}),l==="matrix"&&B(b=>b.matrix?b:{...b,matrix:!0})},[l,B]),_.useEffect(()=>{F&&B(b=>b.inspect?b:{...b,inspect:!0})},[F,B]),_.useEffect(()=>{Ul>1&&B(b=>b.collaborate?b:{...b,collaborate:!0})},[Ul,B]),_.useEffect(()=>{if(!I||Te||Ql.current)return;const b=Ta[0];if(!b||b.traceId!==(e==null?void 0:e.id))return;const C=Math.abs(b.playheadMs-ge),P=b.mode!==l,q=(b.selectedStepId??null)!==(F??null);C<600&&!P&&!q||(Ql.current=!0,xe(b.playheadMs),(b.mode==="cinema"||b.mode==="flow"||b.mode==="compare"||b.mode==="matrix")&&u(b.mode),le(b.selectedStepId??null),window.setTimeout(()=>{Ql.current=!1},180))},[Te,l,ge,Ta,F,u,I,e==null?void 0:e.id]),_.useEffect(()=>{if(!e)return;const C=Date.parse(e.startedAt)+ge;let P=0,q=Number.POSITIVE_INFINITY;e.steps.forEach((Q,ie)=>{const Z=Date.parse(Q.startedAt),Ae=Date.parse(Q.endedAt??Q.startedAt);if(C>=Z&&C<=Ae){P=ie,q=0;return}const yn=Math.min(Math.abs(C-Z),Math.abs(C-Ae));yn<q&&(q=yn,P=ie)}),[P,P-1,P+1].filter(Q=>Q>=0&&Q<e.steps.length).forEach(Q=>{const ie=e.steps[Q];ie&&T2(e.id,ie.id,se)})},[e,ge,se]),_.useEffect(()=>{if(!e||!Te||l!=="cinema"&&l!=="compare")return;const b=(U==null?void 0:U.metadata.wallTimeMs)??0,C=l==="compare"?Math.max(e.metadata.wallTimeMs||1,b||1):e.metadata.wallTimeMs||1;let P=0,q=performance.now();const W=Q=>{const ie=(Q-q)*tt;q=Q,xe(Z=>{const Ae=Z+ie;return Ae>=C?(ue(!1),C):Ae}),P=requestAnimationFrame(W)};return P=requestAnimationFrame(W),()=>cancelAnimationFrame(P)},[e,U,Te,tt,l]),_.useEffect(()=>{const b=C=>{var Q;const P=C.target,q=(Q=P==null?void 0:P.tagName)==null?void 0:Q.toLowerCase();if(!(q==="input"||q==="textarea"||q==="select"||P!=null&&P.isContentEditable)){if((C.metaKey||C.ctrlKey)&&C.key.toLowerCase()==="k"){C.preventDefault(),Le(ie=>!ie);return}if(C.key==="?"||C.key==="/"&&C.shiftKey){C.preventDefault(),ee(!0);return}if(C.key.toLowerCase()==="s"){C.preventDefault(),rs();return}if(C.key.toLowerCase()==="e"){C.preventDefault(),ye(ie=>!ie);return}if(C.key.toLowerCase()==="t"){C.preventDefault(),Ke(!0);return}if(C.key==="Escape"){if(rt){Ke(!1),St(!0);return}ee(!1),Le(!1),le(null);return}if(C.key===" "){C.preventDefault(),(l==="cinema"||l==="compare")&&ue(ie=>!ie);return}if(C.key.toLowerCase()==="f"){C.preventDefault(),l==="flow"?u("cinema"):l==="cinema"&&ze("flow");return}if(C.key.toLowerCase()==="c"){C.preventDefault(),l!=="cinema"&&u("cinema");return}if(C.key.toLowerCase()==="i"){C.preventDefault(),F?le(null):e!=null&&e.steps.length&&le(e.steps[0].id);return}if(C.key==="ArrowLeft"||C.key==="ArrowRight"){if(C.preventDefault(),!e)return;const ie=e.metadata.wallTimeMs||1;if(C.shiftKey){xe(C.key==="ArrowLeft"?0:ie),ue(!1),u("cinema");return}const Z=C.key==="ArrowRight"?1:-1,Ae=V$(ny,ge,Z);Ae!=null&&(xe(Ae),ue(!1),u("cinema"))}}};return window.addEventListener("keydown",b),()=>window.removeEventListener("keydown",b)},[l,F,e,ge,ny,ze,u,ye,Le,Ke,St,rt,rs]);const ay=_.useMemo(()=>{if(!e||!ct||c)return null;const b=e.metadata.wallTimeMs||1,C=Math.min(Math.max(vn,5e3),b);let P=Math.max(0,ge-C/2);const q=Math.min(b,P+C);return q-P<C&&(P=Math.max(0,q-C)),{startMs:P,endMs:q}},[e,ct,ge,c,vn]),ni=!!(ae!=null&&ae.active),oy=(ae==null?void 0:ae.step)??0,tM=((ly=wr[oy])==null?void 0:ly.label)??"Wrapping up",nM=wr.length,rM=c!==h,iM=`${Math.min(Bn.length,es)}/${Bn.length}`,sM=_.useMemo(()=>[{id:"story-toggle",label:ni?"Stop story mode":"Start story mode",description:"Auto-runs a cinematic walkthrough.",group:"Story",keys:"S",onTrigger:rs},{id:"tour-start",label:"Start guided tour",description:"Walk the interface step by step.",group:"Onboarding",keys:"T",onTrigger:()=>Ke(!0)},{id:"explain-toggle",label:Be?"Disable explain mode":"Enable explain mode",description:"Toggle contextual overlays.",group:"Onboarding",keys:"E",onTrigger:()=>ye(b=>!b)},{id:"shortcuts",label:"Show shortcuts",description:"Open the keyboard map.",group:"Onboarding",keys:"?",onTrigger:()=>ee(!0)},{id:"playback-toggle",label:Te?"Pause playback":"Play playback",description:"Start or stop the run.",group:"Playback",keys:"Space",onTrigger:Xl},{id:"mode-cinema",label:"Switch to Cinema",description:"Timeline playback view.",group:"Modes",keys:"C",onTrigger:()=>ze("cinema")},{id:"mode-flow",label:"Switch to Flow",description:"Graph dependency view.",group:"Modes",keys:"F",onTrigger:()=>ze("flow")},{id:"mode-compare",label:"Open Compare",description:"Side-by-side diff view.",group:"Modes",onTrigger:()=>ze("compare"),disabled:!U},{id:"mode-matrix",label:"Open Matrix",description:"Counterfactual replay matrix view.",group:"Modes",onTrigger:()=>ze("matrix")},{id:"jump-bottleneck",label:"Jump to bottleneck",description:"Select the slowest step.",group:"Navigation",onTrigger:an},{id:"jump-error",label:"Jump to error",description:"Select the first failed step.",group:"Navigation",onTrigger:ns},{id:"replay-step",label:"Replay from selected step",description:"Branch a Directors Cut.",group:"Tools",onTrigger:()=>F&&gn(F),disabled:!F},{id:"overlay-toggle",label:te?"Hide overlay":"Show overlay",description:"Ghost diff in Cinema/Flow.",group:"Tools",onTrigger:()=>Re(b=>!b),disabled:!U},{id:"safe-export",label:se?"Disable safe export":"Enable safe export",description:"Redact sensitive payloads.",group:"Safety",onTrigger:()=>A(b=>!b)},{id:"reload",label:"Reload traces",description:"Refresh trace data.",group:"Meta",onTrigger:i}],[ni,rs,Be,Te,Xl,ze,U,an,ns,F,gn,te,se,i,ye,Re,A,ee,Ke]);return n?f.jsx("div",{className:"loading",children:"Loading trace..."}):!r&&!e&&s.length===0?f.jsxs("div",{className:"error",children:[f.jsx("h2",{children:"No traces yet"}),f.jsx("p",{children:"Ingest your first trace, then reload to begin the Observe  Inspect  Direct workflow."}),f.jsxs("div",{className:"error-actions",children:[f.jsx("button",{className:"primary-button",type:"button",onClick:i,children:"Retry"}),f.jsx("a",{className:"ghost-button",href:"/help.html",target:"_blank",rel:"noreferrer",children:"Open help"})]})]}):r||!e?f.jsxs("div",{className:"error",children:[f.jsx("p",{children:r??"Failed to load trace."}),f.jsxs("div",{className:"error-actions",children:[f.jsx("button",{className:"primary-button",type:"button",onClick:i,children:"Retry"}),f.jsx("a",{className:"ghost-button",href:"/help.html",target:"_blank",rel:"noreferrer",children:"Open help"})]})]}):f.jsxs("div",{className:`app theme-${sn} ${Be?"explain-mode":""} ${l==="compare"?"mode-compare":""} ${l==="matrix"?"mode-matrix":""}`,children:[f.jsx(LR,{trace:e,traces:s,selectedTraceId:a,onSelectTrace:o,onReload:i,onStartTour:()=>Ke(!0),onToggleStory:rs,onOpenPalette:()=>Le(!0),onToggleExplain:()=>ye(b=>!b),onShareSession:LN,onThemeChange:Yr,themeMode:sn,activeSessions:Ul,shareStatus:kN,explainMode:Be,storyActive:ni}),!Oe&&!me?f.jsx(bA,{onComplete:()=>ce(!0),onStartTour:()=>{ce(!0),Ke(!0)},onStartStory:ei,persona:fe,onPersonaChange:Wr}):null,Oe&&!It?f.jsx(SA,{explainMode:Be,storyActive:ni,onStartTour:()=>{rn(!0),Ke(!0)},onStartStory:()=>{rn(!0),ei()},onToggleExplain:()=>ye(b=>!b),onDismiss:()=>rn(!0)}):null,f.jsx(yA,{steps:JN,open:rt,onClose:()=>{Ke(!1),St(!0)},onComplete:()=>{Ke(!1),St(!0)}}),f.jsx(xA,{enabled:Be}),f.jsx(kA,{active:ni,label:tM,step:oy,total:nM,onStop:$n,onRestart:ei}),f.jsx(OR,{insights:t,investigation:k,onSelectStep:b=>{le(b),l!=="cinema"&&u("cinema")},onJumpToError:ns,onJumpToBottleneck:an}),f.jsx(mA,{trace:e,mode:l==="matrix"?"cinema":l,playheadMs:ge,selectedStepId:F,compareTrace:U,collapsed:Ht,onToggleCollapsed:()=>xr(b=>!b),onModeChange:ze,onSelectStep:b=>{le(b),l!=="cinema"&&u("cinema")},onJumpToBottleneck:an,onReplay:gn,onStartTour:()=>Ke(!0)}),f.jsxs("div",{className:"toolbar","data-help":!0,"data-help-indicator":!0,"data-tour":"toolbar","data-help-title":"Search + filters","data-help-body":"Filter by step type, enable Safe export, and jump between Cinema, Flow, Compare, and Matrix.","data-help-placement":"bottom",children:[f.jsx(FR,{query:c,typeFilter:m,onQueryChange:d,onTypeFilterChange:g}),f.jsxs("div",{className:"toolbar-actions",children:[f.jsx("input",{className:"search-input",value:p,onChange:b=>w(b.target.value),placeholder:"TraceQL (example: type=tool_call and duration_ms>800)","aria-label":"TraceQL query"}),f.jsx("button",{className:"ghost-button",type:"button",onClick:()=>void IN(),children:"Run TraceQL"}),v?f.jsxs("span",{className:"status-badge",children:[v.matchCount," match(es)"]}):null,rM?f.jsx("span",{className:"status-badge",children:"Filtering..."}):null,f.jsxs("span",{className:"status-badge",children:["Hydration ",iM]}),f.jsxs("span",{className:"status-badge",children:["Filter ",EN,"ms"]}),v?f.jsx("button",{className:"ghost-button",type:"button",onClick:()=>{w(""),y(null),S(null)},children:"Clear TraceQL"}):null,x?f.jsx("span",{className:"status-badge warn",children:x}):null,f.jsxs("select",{className:"search-select",value:M,onChange:b=>D(b.target.value),"aria-label":"Extension selector",children:[f.jsx("option",{value:"",children:"Select extension"}),j.map(b=>f.jsx("option",{value:b.id,children:b.name},b.id))]}),f.jsx("button",{className:"ghost-button",type:"button",onClick:()=>void DN(),disabled:!e||!M||Y,children:Y?"Running extension...":"Run extension"}),f.jsx("button",{className:`ghost-button ${l==="cinema"?"active":""}`,type:"button","aria-pressed":l==="cinema",title:"Timeline playback",onClick:()=>ze("cinema"),"data-help":!0,"data-help-title":"Cinema mode","data-help-body":"Timeline view with step cards ordered by time.","data-help-placement":"bottom",children:"Cinema"}),f.jsx("button",{className:`ghost-button ${l==="flow"?"active":""}`,type:"button","aria-pressed":l==="flow",title:"Graph view",onClick:()=>ze("flow"),"data-help":!0,"data-help-title":"Flow mode","data-help-body":"Dependency graph of steps and tool calls.","data-help-placement":"bottom",children:"Flow"}),f.jsx("button",{className:`ghost-button ${l==="compare"?"active":""}`,type:"button","aria-pressed":l==="compare",title:U?"Side-by-side compare":"Run a replay to enable compare",onClick:()=>ze("compare"),disabled:!U,"data-tour":"compare","data-help":!0,"data-help-title":"Compare mode","data-help-body":"Side-by-side view after a replay. Enabled once you replay.","data-help-placement":"bottom",children:"Compare"}),f.jsx("button",{className:`ghost-button ${l==="matrix"?"active":""}`,type:"button","aria-pressed":l==="matrix",title:"Counterfactual replay matrix",onClick:()=>ze("matrix"),"data-help":!0,"data-help-title":"Matrix mode","data-help-body":"Run multiple replay scenarios and rank likely causal factors.","data-help-placement":"bottom",children:"Matrix"}),f.jsxs("label",{className:"toggle",title:"Redact payloads and disable raw views for safe sharing","data-help":!0,"data-help-title":"Safe export","data-help-body":"Redacts secrets and disables raw payload views for safe sharing.","data-help-placement":"bottom",children:[f.jsx("input",{type:"checkbox",checked:se,onChange:()=>A(b=>!b)}),"Safe export"]}),e.steps.length>200||ct?f.jsxs("label",{className:"toggle",title:"Window steps around the playhead for large traces","data-help":!0,"data-help-title":"Windowed mode","data-help-body":"Limits rendering to a playhead window for large traces.","data-help-placement":"bottom",children:[f.jsx("input",{type:"checkbox",checked:ct,onChange:()=>At(b=>!b)}),"Windowed"]}):null,U?f.jsxs("label",{className:"toggle",title:"Show ghost overlay of replay in Cinema/Flow","data-help":!0,"data-help-title":"Overlay replay","data-help-body":"Layer the replay over the base run to spot differences.","data-help-placement":"bottom",children:[f.jsx("input",{type:"checkbox",checked:te,onChange:()=>Re(b=>!b)}),"Overlay"]}):null,f.jsxs("label",{className:"toggle",title:"Follow active collaborator cursor and mode updates",children:[f.jsx("input",{type:"checkbox",checked:I,onChange:()=>z(b=>!b)}),"Sync playback"]})]})]}),R?f.jsxs("div",{className:"inspector-section",children:[f.jsx("div",{className:"inspector-section-title",children:"Extension output"}),f.jsx("pre",{className:"inspector-json",children:JSON.stringify(R,null,2)})]}):null,l==="cinema"?f.jsxs("div",{className:"playback-stack","data-tour":"playback",children:[f.jsx("div",{"data-help":!0,"data-help-title":"Playback controls","data-help-body":"Play, pause, scrub, and adjust speed to feel the rhythm of the run.","data-help-placement":"bottom",children:f.jsx(b0,{playheadMs:ge,wallTimeMs:e.metadata.wallTimeMs||1,isPlaying:Te,speed:tt,onToggle:()=>ue(b=>!b),onScrub:b=>xe(b),onSpeedChange:nt})}),f.jsx("div",{"data-help":!0,"data-help-title":"Density map","data-help-body":"Zoom into hotspots and keep long traces readable with windowing.","data-help-placement":"bottom",children:f.jsx(lA,{traceStart:e.startedAt,traceEnd:e.endedAt,steps:e.steps,playheadMs:ge,windowRange:ay,windowed:ct,spanMs:vn,onSpanChange:Fn,onToggleWindowed:At,onScrub:b=>xe(b),persistenceKey:e.id,laneStrategy:be,visibleLaneGroups:MN,remotePlayheads:PN})})]}):null,l==="compare"&&U?f.jsx("div",{"data-help":!0,"data-help-title":"Compare playback","data-help-body":"Sync both runs to evaluate improvements at identical timestamps.","data-help-placement":"bottom",children:f.jsx(b0,{playheadMs:ge,wallTimeMs:Math.max(e.metadata.wallTimeMs||1,U.metadata.wallTimeMs||1),isPlaying:Te,speed:tt,onToggle:()=>ue(b=>!b),onScrub:b=>xe(b),onSpeedChange:nt})}):null,f.jsxs("main",{className:`stage ${l==="compare"?"stage-compare":""} motion-fade-in`,role:"main",children:[f.jsx("div",{className:"main motion-slide-up",ref:Yl,"data-help":!0,"data-help-indicator":!0,"data-tour":"stage","data-help-title":"Trace stage","data-help-body":"Every step becomes a scene. Hover or click to open deep inspection.","data-help-placement":"top",children:f.jsx(u2,{morph:wN,onComplete:XN,children:f.jsxs(_.Suspense,{fallback:f.jsx("div",{className:"loading",children:"Loading view..."}),children:[l==="cinema"?f.jsx(rA,{trace:e,steps:ty,selectedStepId:F,onSelectStep:b=>le(b),playheadMs:ge,windowRange:ay,timing:t==null?void 0:t.timing,ghostTrace:te?U:null,diff:NN,laneStrategy:be,laneGroupsOrder:Zr.order,hiddenLaneGroups:Zr.hidden,onLaneStrategyChange:ON,onToggleLaneGroupVisibility:qN,onMoveLaneGroup:FN}):null,l==="flow"?f.jsx(K$,{steps:ty,selectedStepId:F,onSelectStep:b=>le(b),baseTrace:e,compareTrace:U,compareSteps:jN,overlayEnabled:te,onToggleOverlay:()=>Re(b=>!b)}):null,l==="compare"&&U?f.jsx(W$,{baseTrace:e,compareTrace:U,playheadMs:ge,safeExport:se,onExit:()=>{u("cinema"),re(null)}}):null,l==="matrix"?f.jsx(DA,{steps:e.steps,anchorStepId:Vl,onAnchorStepChange:Bl,scenarios:bN,onScenarioChange:$N,onDuplicateScenario:HN,onMoveScenario:KN,onAddScenario:zN,onRemoveScenario:GN,onRun:WN,onCancel:YN,onReplaceScenarios:UN,loading:SN,error:_N,job:Xi,matrix:Dt,safeExport:se,onOpenCompare:QN}):null]})})}),f.jsx(_.Suspense,{fallback:f.jsx("div",{className:"loading",children:"Loading panel..."}),children:l==="compare"||l==="matrix"?null:ry?f.jsx(Y$,{traceId:e.id,step:ry,safeExport:se,onClose:()=>le(null),onReplay:gn}):f.jsx(gA,{trace:e,mode:l,selectedStepId:F,onModeChange:ze,onSelectStep:b=>le(b),onJumpToBottleneck:an,onReplay:gn,recommendations:ti,persona:fe,annotations:RN,activityFeed:CN,onAddAnnotation:BN,missionProgress:G,missionCompletion:AN,onResetMissions:VN,narrative:is,onAskDirector:ZN,onExportNarrative:eM})})]}),f.jsx(_A,{mode:l==="matrix"?"cinema":l,isPlaying:Te,storyActive:ni,explainMode:Be,hidden:l==="compare",open:Yi,onToggleOpen:()=>Vn(b=>!b),onTogglePlay:Xl,onStartStory:ei,onStopStory:$n,onStartTour:()=>Ke(!0),onOpenPalette:()=>Le(!0),onShowShortcuts:()=>ee(!0),onToggleExplain:()=>ye(b=>!b),onJumpToBottleneck:an}),f.jsx(hA,{open:J,onClose:()=>Le(!1),actions:sM}),f.jsx(cA,{open:O,onClose:()=>ee(!1)})]})}Op.createRoot(document.getElementById("root")).render(f.jsx(bM.StrictMode,{children:f.jsx(t4,{})}));export{bM as R,YR as S,tA as T,O$ as a,q$ as b,Mm as c,nj as d,i4 as e,r4 as f,lk as g,E2 as h,f as j,_ as r,BR as s};
