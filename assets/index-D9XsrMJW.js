const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-NA2YFadK.js","assets/index-B5DZHykP.css"])))=>i.map(i=>d[i]);
(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var Na=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Sk(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var _k={exports:{}},Zo={},kk={exports:{}},oe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ha=Symbol.for("react.element"),kM=Symbol.for("react.portal"),CM=Symbol.for("react.fragment"),EM=Symbol.for("react.strict_mode"),TM=Symbol.for("react.profiler"),jM=Symbol.for("react.provider"),NM=Symbol.for("react.context"),MM=Symbol.for("react.forward_ref"),PM=Symbol.for("react.suspense"),RM=Symbol.for("react.memo"),AM=Symbol.for("react.lazy"),yy=Symbol.iterator;function IM(e){return e===null||typeof e!="object"?null:(e=yy&&e[yy]||e["@@iterator"],typeof e=="function"?e:null)}var Ck={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Ek=Object.assign,Tk={};function Vi(e,t,n){this.props=e,this.context=t,this.refs=Tk,this.updater=n||Ck}Vi.prototype.isReactComponent={};Vi.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Vi.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function jk(){}jk.prototype=Vi.prototype;function iv(e,t,n){this.props=e,this.context=t,this.refs=Tk,this.updater=n||Ck}var sv=iv.prototype=new jk;sv.constructor=iv;Ek(sv,Vi.prototype);sv.isPureReactComponent=!0;var xy=Array.isArray,Nk=Object.prototype.hasOwnProperty,av={current:null},Mk={key:!0,ref:!0,__self:!0,__source:!0};function Pk(e,t,n){var r,i={},s=null,a=null;if(t!=null)for(r in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(s=""+t.key),t)Nk.call(t,r)&&!Mk.hasOwnProperty(r)&&(i[r]=t[r]);var o=arguments.length-2;if(o===1)i.children=n;else if(1<o){for(var l=Array(o),u=0;u<o;u++)l[u]=arguments[u+2];i.children=l}if(e&&e.defaultProps)for(r in o=e.defaultProps,o)i[r]===void 0&&(i[r]=o[r]);return{$$typeof:ha,type:e,key:s,ref:a,props:i,_owner:av.current}}function DM(e,t){return{$$typeof:ha,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function ov(e){return typeof e=="object"&&e!==null&&e.$$typeof===ha}function LM(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var by=/\/+/g;function nu(e,t){return typeof e=="object"&&e!==null&&e.key!=null?LM(""+e.key):t.toString(36)}function no(e,t,n,r,i){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(s){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case ha:case kM:a=!0}}if(a)return a=e,i=i(a),e=r===""?"."+nu(a,0):r,xy(i)?(n="",e!=null&&(n=e.replace(by,"$&/")+"/"),no(i,t,n,"",function(u){return u})):i!=null&&(ov(i)&&(i=DM(i,n+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(by,"$&/")+"/")+e)),t.push(i)),1;if(a=0,r=r===""?".":r+":",xy(e))for(var o=0;o<e.length;o++){s=e[o];var l=r+nu(s,o);a+=no(s,t,n,l,i)}else if(l=IM(e),typeof l=="function")for(e=l.call(e),o=0;!(s=e.next()).done;)s=s.value,l=r+nu(s,o++),a+=no(s,t,n,l,i);else if(s==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function Ma(e,t,n){if(e==null)return e;var r=[],i=0;return no(e,r,"","",function(s){return t.call(n,s,i++)}),r}function OM(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var pt={current:null},ro={transition:null},qM={ReactCurrentDispatcher:pt,ReactCurrentBatchConfig:ro,ReactCurrentOwner:av};function Rk(){throw Error("act(...) is not supported in production builds of React.")}oe.Children={map:Ma,forEach:function(e,t,n){Ma(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Ma(e,function(){t++}),t},toArray:function(e){return Ma(e,function(t){return t})||[]},only:function(e){if(!ov(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};oe.Component=Vi;oe.Fragment=CM;oe.Profiler=TM;oe.PureComponent=iv;oe.StrictMode=EM;oe.Suspense=PM;oe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=qM;oe.act=Rk;oe.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=Ek({},e.props),i=e.key,s=e.ref,a=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,a=av.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var o=e.type.defaultProps;for(l in t)Nk.call(t,l)&&!Mk.hasOwnProperty(l)&&(r[l]=t[l]===void 0&&o!==void 0?o[l]:t[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){o=Array(l);for(var u=0;u<l;u++)o[u]=arguments[u+2];r.children=o}return{$$typeof:ha,type:e.type,key:i,ref:s,props:r,_owner:a}};oe.createContext=function(e){return e={$$typeof:NM,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:jM,_context:e},e.Consumer=e};oe.createElement=Pk;oe.createFactory=function(e){var t=Pk.bind(null,e);return t.type=e,t};oe.createRef=function(){return{current:null}};oe.forwardRef=function(e){return{$$typeof:MM,render:e}};oe.isValidElement=ov;oe.lazy=function(e){return{$$typeof:AM,_payload:{_status:-1,_result:e},_init:OM}};oe.memo=function(e,t){return{$$typeof:RM,type:e,compare:t===void 0?null:t}};oe.startTransition=function(e){var t=ro.transition;ro.transition={};try{e()}finally{ro.transition=t}};oe.unstable_act=Rk;oe.useCallback=function(e,t){return pt.current.useCallback(e,t)};oe.useContext=function(e){return pt.current.useContext(e)};oe.useDebugValue=function(){};oe.useDeferredValue=function(e){return pt.current.useDeferredValue(e)};oe.useEffect=function(e,t){return pt.current.useEffect(e,t)};oe.useId=function(){return pt.current.useId()};oe.useImperativeHandle=function(e,t,n){return pt.current.useImperativeHandle(e,t,n)};oe.useInsertionEffect=function(e,t){return pt.current.useInsertionEffect(e,t)};oe.useLayoutEffect=function(e,t){return pt.current.useLayoutEffect(e,t)};oe.useMemo=function(e,t){return pt.current.useMemo(e,t)};oe.useReducer=function(e,t,n){return pt.current.useReducer(e,t,n)};oe.useRef=function(e){return pt.current.useRef(e)};oe.useState=function(e){return pt.current.useState(e)};oe.useSyncExternalStore=function(e,t,n){return pt.current.useSyncExternalStore(e,t,n)};oe.useTransition=function(){return pt.current.useTransition()};oe.version="18.3.1";kk.exports=oe;var S=kk.exports;const FM=Sk(S);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var VM=S,$M=Symbol.for("react.element"),BM=Symbol.for("react.fragment"),zM=Object.prototype.hasOwnProperty,UM=VM.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,GM={key:!0,ref:!0,__self:!0,__source:!0};function Ak(e,t,n){var r,i={},s=null,a=null;n!==void 0&&(s=""+n),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(a=t.ref);for(r in t)zM.call(t,r)&&!GM.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:$M,type:e,key:s,ref:a,props:i,_owner:UM.current}}Zo.Fragment=BM;Zo.jsx=Ak;Zo.jsxs=Ak;_k.exports=Zo;var f=_k.exports,zp={},Ik={exports:{}},Rt={},Dk={exports:{}},Lk={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(A,I){var U=A.length;A.push(I);e:for(;0<U;){var z=U-1>>>1,re=A[z];if(0<i(re,I))A[z]=I,A[U]=re,U=z;else break e}}function n(A){return A.length===0?null:A[0]}function r(A){if(A.length===0)return null;var I=A[0],U=A.pop();if(U!==I){A[0]=U;e:for(var z=0,re=A.length,Te=re>>>1;z<Te;){var ue=2*(z+1)-1,me=A[ue],xe=ue+1,nt=A[xe];if(0>i(me,U))xe<re&&0>i(nt,me)?(A[z]=nt,A[xe]=U,z=xe):(A[z]=me,A[ue]=U,z=ue);else if(xe<re&&0>i(nt,U))A[z]=nt,A[xe]=U,z=xe;else break e}}return I}function i(A,I){var U=A.sortIndex-I.sortIndex;return U!==0?U:A.id-I.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var a=Date,o=a.now();e.unstable_now=function(){return a.now()-o}}var l=[],u=[],c=1,d=null,h=3,m=!1,g=!1,p=!1,b=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(A){for(var I=n(u);I!==null;){if(I.callback===null)r(u);else if(I.startTime<=A)r(u),I.sortIndex=I.expirationTime,t(l,I);else break;I=n(u)}}function _(A){if(p=!1,x(A),!g)if(n(l)!==null)g=!0,le(k);else{var I=n(u);I!==null&&se(_,I.startTime-A)}}function k(A,I){g=!1,p&&(p=!1,v(T),T=-1),m=!0;var U=h;try{for(x(I),d=n(l);d!==null&&(!(d.expirationTime>I)||A&&!R());){var z=d.callback;if(typeof z=="function"){d.callback=null,h=d.priorityLevel;var re=z(d.expirationTime<=I);I=e.unstable_now(),typeof re=="function"?d.callback=re:d===n(l)&&r(l),x(I)}else r(l);d=n(l)}if(d!==null)var Te=!0;else{var ue=n(u);ue!==null&&se(_,ue.startTime-I),Te=!1}return Te}finally{d=null,h=U,m=!1}}var E=!1,j=null,T=-1,M=5,D=-1;function R(){return!(e.unstable_now()-D<M)}function H(){if(j!==null){var A=e.unstable_now();D=A;var I=!0;try{I=j(!0,A)}finally{I?Y():(E=!1,j=null)}}else E=!1}var Y;if(typeof y=="function")Y=function(){y(H)};else if(typeof MessageChannel<"u"){var pe=new MessageChannel,F=pe.port2;pe.port1.onmessage=H,Y=function(){F.postMessage(null)}}else Y=function(){b(H,0)};function le(A){j=A,E||(E=!0,Y())}function se(A,I){T=b(function(){A(e.unstable_now())},I)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(A){A.callback=null},e.unstable_continueExecution=function(){g||m||(g=!0,le(k))},e.unstable_forceFrameRate=function(A){0>A||125<A?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<A?Math.floor(1e3/A):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return n(l)},e.unstable_next=function(A){switch(h){case 1:case 2:case 3:var I=3;break;default:I=h}var U=h;h=I;try{return A()}finally{h=U}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(A,I){switch(A){case 1:case 2:case 3:case 4:case 5:break;default:A=3}var U=h;h=A;try{return I()}finally{h=U}},e.unstable_scheduleCallback=function(A,I,U){var z=e.unstable_now();switch(typeof U=="object"&&U!==null?(U=U.delay,U=typeof U=="number"&&0<U?z+U:z):U=z,A){case 1:var re=-1;break;case 2:re=250;break;case 5:re=1073741823;break;case 4:re=1e4;break;default:re=5e3}return re=U+re,A={id:c++,callback:I,priorityLevel:A,startTime:U,expirationTime:re,sortIndex:-1},U>z?(A.sortIndex=U,t(u,A),n(l)===null&&A===n(u)&&(p?(v(T),T=-1):p=!0,se(_,U-z))):(A.sortIndex=re,t(l,A),g||m||(g=!0,le(k))),A},e.unstable_shouldYield=R,e.unstable_wrapCallback=function(A){var I=h;return function(){var U=h;h=I;try{return A.apply(this,arguments)}finally{h=U}}}})(Lk);Dk.exports=Lk;var HM=Dk.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var WM=S,Mt=HM;function L(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Ok=new Set,Us={};function $r(e,t){Mi(e,t),Mi(e+"Capture",t)}function Mi(e,t){for(Us[e]=t,e=0;e<t.length;e++)Ok.add(t[e])}var Pn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Up=Object.prototype.hasOwnProperty,KM=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,wy={},Sy={};function YM(e){return Up.call(Sy,e)?!0:Up.call(wy,e)?!1:KM.test(e)?Sy[e]=!0:(wy[e]=!0,!1)}function QM(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function JM(e,t,n,r){if(t===null||typeof t>"u"||QM(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function mt(e,t,n,r,i,s,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=a}var tt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){tt[e]=new mt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];tt[t]=new mt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){tt[e]=new mt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){tt[e]=new mt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){tt[e]=new mt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){tt[e]=new mt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){tt[e]=new mt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){tt[e]=new mt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){tt[e]=new mt(e,5,!1,e.toLowerCase(),null,!1,!1)});var lv=/[\-:]([a-z])/g;function uv(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(lv,uv);tt[t]=new mt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(lv,uv);tt[t]=new mt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(lv,uv);tt[t]=new mt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){tt[e]=new mt(e,1,!1,e.toLowerCase(),null,!1,!1)});tt.xlinkHref=new mt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){tt[e]=new mt(e,1,!1,e.toLowerCase(),null,!0,!0)});function cv(e,t,n,r){var i=tt.hasOwnProperty(t)?tt[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(JM(t,n,i,r)&&(n=null),r||i===null?YM(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,r=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var On=WM.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Pa=Symbol.for("react.element"),oi=Symbol.for("react.portal"),li=Symbol.for("react.fragment"),dv=Symbol.for("react.strict_mode"),Gp=Symbol.for("react.profiler"),qk=Symbol.for("react.provider"),Fk=Symbol.for("react.context"),fv=Symbol.for("react.forward_ref"),Hp=Symbol.for("react.suspense"),Wp=Symbol.for("react.suspense_list"),hv=Symbol.for("react.memo"),Kn=Symbol.for("react.lazy"),Vk=Symbol.for("react.offscreen"),_y=Symbol.iterator;function as(e){return e===null||typeof e!="object"?null:(e=_y&&e[_y]||e["@@iterator"],typeof e=="function"?e:null)}var Pe=Object.assign,ru;function ys(e){if(ru===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);ru=t&&t[1]||""}return`
`+ru+e}var iu=!1;function su(e,t){if(!e||iu)return"";iu=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=r.stack.split(`
`),a=i.length-1,o=s.length-1;1<=a&&0<=o&&i[a]!==s[o];)o--;for(;1<=a&&0<=o;a--,o--)if(i[a]!==s[o]){if(a!==1||o!==1)do if(a--,o--,0>o||i[a]!==s[o]){var l=`
`+i[a].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}while(1<=a&&0<=o);break}}}finally{iu=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?ys(e):""}function XM(e){switch(e.tag){case 5:return ys(e.type);case 16:return ys("Lazy");case 13:return ys("Suspense");case 19:return ys("SuspenseList");case 0:case 2:case 15:return e=su(e.type,!1),e;case 11:return e=su(e.type.render,!1),e;case 1:return e=su(e.type,!0),e;default:return""}}function Kp(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case li:return"Fragment";case oi:return"Portal";case Gp:return"Profiler";case dv:return"StrictMode";case Hp:return"Suspense";case Wp:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Fk:return(e.displayName||"Context")+".Consumer";case qk:return(e._context.displayName||"Context")+".Provider";case fv:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case hv:return t=e.displayName||null,t!==null?t:Kp(e.type)||"Memo";case Kn:t=e._payload,e=e._init;try{return Kp(e(t))}catch{}}return null}function ZM(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Kp(t);case 8:return t===dv?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function cr(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function $k(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function eP(e){var t=$k(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(a){r=""+a,s.call(this,a)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Ra(e){e._valueTracker||(e._valueTracker=eP(e))}function Bk(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=$k(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function yo(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Yp(e,t){var n=t.checked;return Pe({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function ky(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=cr(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function zk(e,t){t=t.checked,t!=null&&cv(e,"checked",t,!1)}function Qp(e,t){zk(e,t);var n=cr(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Jp(e,t.type,n):t.hasOwnProperty("defaultValue")&&Jp(e,t.type,cr(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Cy(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Jp(e,t,n){(t!=="number"||yo(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var xs=Array.isArray;function ki(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+cr(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function Xp(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(L(91));return Pe({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Ey(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(L(92));if(xs(n)){if(1<n.length)throw Error(L(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:cr(n)}}function Uk(e,t){var n=cr(t.value),r=cr(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function Ty(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Gk(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Zp(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Gk(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Aa,Hk=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Aa=Aa||document.createElement("div"),Aa.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Aa.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Gs(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Ps={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},tP=["Webkit","ms","Moz","O"];Object.keys(Ps).forEach(function(e){tP.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Ps[t]=Ps[e]})});function Wk(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Ps.hasOwnProperty(e)&&Ps[e]?(""+t).trim():t+"px"}function Kk(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=Wk(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}var nP=Pe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function em(e,t){if(t){if(nP[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(L(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(L(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(L(61))}if(t.style!=null&&typeof t.style!="object")throw Error(L(62))}}function tm(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var nm=null;function pv(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var rm=null,Ci=null,Ei=null;function jy(e){if(e=va(e)){if(typeof rm!="function")throw Error(L(280));var t=e.stateNode;t&&(t=il(t),rm(e.stateNode,e.type,t))}}function Yk(e){Ci?Ei?Ei.push(e):Ei=[e]:Ci=e}function Qk(){if(Ci){var e=Ci,t=Ei;if(Ei=Ci=null,jy(e),t)for(e=0;e<t.length;e++)jy(t[e])}}function Jk(e,t){return e(t)}function Xk(){}var au=!1;function Zk(e,t,n){if(au)return e(t,n);au=!0;try{return Jk(e,t,n)}finally{au=!1,(Ci!==null||Ei!==null)&&(Xk(),Qk())}}function Hs(e,t){var n=e.stateNode;if(n===null)return null;var r=il(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(L(231,t,typeof n));return n}var im=!1;if(Pn)try{var os={};Object.defineProperty(os,"passive",{get:function(){im=!0}}),window.addEventListener("test",os,os),window.removeEventListener("test",os,os)}catch{im=!1}function rP(e,t,n,r,i,s,a,o,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(c){this.onError(c)}}var Rs=!1,xo=null,bo=!1,sm=null,iP={onError:function(e){Rs=!0,xo=e}};function sP(e,t,n,r,i,s,a,o,l){Rs=!1,xo=null,rP.apply(iP,arguments)}function aP(e,t,n,r,i,s,a,o,l){if(sP.apply(this,arguments),Rs){if(Rs){var u=xo;Rs=!1,xo=null}else throw Error(L(198));bo||(bo=!0,sm=u)}}function Br(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function eC(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Ny(e){if(Br(e)!==e)throw Error(L(188))}function oP(e){var t=e.alternate;if(!t){if(t=Br(e),t===null)throw Error(L(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Ny(i),e;if(s===r)return Ny(i),t;s=s.sibling}throw Error(L(188))}if(n.return!==r.return)n=i,r=s;else{for(var a=!1,o=i.child;o;){if(o===n){a=!0,n=i,r=s;break}if(o===r){a=!0,r=i,n=s;break}o=o.sibling}if(!a){for(o=s.child;o;){if(o===n){a=!0,n=s,r=i;break}if(o===r){a=!0,r=s,n=i;break}o=o.sibling}if(!a)throw Error(L(189))}}if(n.alternate!==r)throw Error(L(190))}if(n.tag!==3)throw Error(L(188));return n.stateNode.current===n?e:t}function tC(e){return e=oP(e),e!==null?nC(e):null}function nC(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=nC(e);if(t!==null)return t;e=e.sibling}return null}var rC=Mt.unstable_scheduleCallback,My=Mt.unstable_cancelCallback,lP=Mt.unstable_shouldYield,uP=Mt.unstable_requestPaint,Be=Mt.unstable_now,cP=Mt.unstable_getCurrentPriorityLevel,mv=Mt.unstable_ImmediatePriority,iC=Mt.unstable_UserBlockingPriority,wo=Mt.unstable_NormalPriority,dP=Mt.unstable_LowPriority,sC=Mt.unstable_IdlePriority,el=null,fn=null;function fP(e){if(fn&&typeof fn.onCommitFiberRoot=="function")try{fn.onCommitFiberRoot(el,e,void 0,(e.current.flags&128)===128)}catch{}}var Zt=Math.clz32?Math.clz32:mP,hP=Math.log,pP=Math.LN2;function mP(e){return e>>>=0,e===0?32:31-(hP(e)/pP|0)|0}var Ia=64,Da=4194304;function bs(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function So(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,a=n&268435455;if(a!==0){var o=a&~i;o!==0?r=bs(o):(s&=a,s!==0&&(r=bs(s)))}else a=n&~i,a!==0?r=bs(a):s!==0&&(r=bs(s));if(r===0)return 0;if(t!==0&&t!==r&&!(t&i)&&(i=r&-r,s=t&-t,i>=s||i===16&&(s&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Zt(t),i=1<<n,r|=e[n],t&=~i;return r}function vP(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function gP(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var a=31-Zt(s),o=1<<a,l=i[a];l===-1?(!(o&n)||o&r)&&(i[a]=vP(o,t)):l<=t&&(e.expiredLanes|=o),s&=~o}}function am(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function aC(){var e=Ia;return Ia<<=1,!(Ia&4194240)&&(Ia=64),e}function ou(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function pa(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Zt(t),e[t]=n}function yP(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-Zt(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}function vv(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Zt(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var ge=0;function oC(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var lC,gv,uC,cC,dC,om=!1,La=[],tr=null,nr=null,rr=null,Ws=new Map,Ks=new Map,Qn=[],xP="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Py(e,t){switch(e){case"focusin":case"focusout":tr=null;break;case"dragenter":case"dragleave":nr=null;break;case"mouseover":case"mouseout":rr=null;break;case"pointerover":case"pointerout":Ws.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ks.delete(t.pointerId)}}function ls(e,t,n,r,i,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},t!==null&&(t=va(t),t!==null&&gv(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function bP(e,t,n,r,i){switch(t){case"focusin":return tr=ls(tr,e,t,n,r,i),!0;case"dragenter":return nr=ls(nr,e,t,n,r,i),!0;case"mouseover":return rr=ls(rr,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return Ws.set(s,ls(Ws.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Ks.set(s,ls(Ks.get(s)||null,e,t,n,r,i)),!0}return!1}function fC(e){var t=Tr(e.target);if(t!==null){var n=Br(t);if(n!==null){if(t=n.tag,t===13){if(t=eC(n),t!==null){e.blockedOn=t,dC(e.priority,function(){uC(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function io(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=lm(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);nm=r,n.target.dispatchEvent(r),nm=null}else return t=va(n),t!==null&&gv(t),e.blockedOn=n,!1;t.shift()}return!0}function Ry(e,t,n){io(e)&&n.delete(t)}function wP(){om=!1,tr!==null&&io(tr)&&(tr=null),nr!==null&&io(nr)&&(nr=null),rr!==null&&io(rr)&&(rr=null),Ws.forEach(Ry),Ks.forEach(Ry)}function us(e,t){e.blockedOn===t&&(e.blockedOn=null,om||(om=!0,Mt.unstable_scheduleCallback(Mt.unstable_NormalPriority,wP)))}function Ys(e){function t(i){return us(i,e)}if(0<La.length){us(La[0],e);for(var n=1;n<La.length;n++){var r=La[n];r.blockedOn===e&&(r.blockedOn=null)}}for(tr!==null&&us(tr,e),nr!==null&&us(nr,e),rr!==null&&us(rr,e),Ws.forEach(t),Ks.forEach(t),n=0;n<Qn.length;n++)r=Qn[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Qn.length&&(n=Qn[0],n.blockedOn===null);)fC(n),n.blockedOn===null&&Qn.shift()}var Ti=On.ReactCurrentBatchConfig,_o=!0;function SP(e,t,n,r){var i=ge,s=Ti.transition;Ti.transition=null;try{ge=1,yv(e,t,n,r)}finally{ge=i,Ti.transition=s}}function _P(e,t,n,r){var i=ge,s=Ti.transition;Ti.transition=null;try{ge=4,yv(e,t,n,r)}finally{ge=i,Ti.transition=s}}function yv(e,t,n,r){if(_o){var i=lm(e,t,n,r);if(i===null)gu(e,t,r,ko,n),Py(e,r);else if(bP(i,e,t,n,r))r.stopPropagation();else if(Py(e,r),t&4&&-1<xP.indexOf(e)){for(;i!==null;){var s=va(i);if(s!==null&&lC(s),s=lm(e,t,n,r),s===null&&gu(e,t,r,ko,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else gu(e,t,r,null,n)}}var ko=null;function lm(e,t,n,r){if(ko=null,e=pv(r),e=Tr(e),e!==null)if(t=Br(e),t===null)e=null;else if(n=t.tag,n===13){if(e=eC(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return ko=e,null}function hC(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(cP()){case mv:return 1;case iC:return 4;case wo:case dP:return 16;case sC:return 536870912;default:return 16}default:return 16}}var Zn=null,xv=null,so=null;function pC(){if(so)return so;var e,t=xv,n=t.length,r,i="value"in Zn?Zn.value:Zn.textContent,s=i.length;for(e=0;e<n&&t[e]===i[e];e++);var a=n-e;for(r=1;r<=a&&t[n-r]===i[s-r];r++);return so=i.slice(e,1<r?1-r:void 0)}function ao(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Oa(){return!0}function Ay(){return!1}function At(e){function t(n,r,i,s,a){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var o in e)e.hasOwnProperty(o)&&(n=e[o],this[o]=n?n(s):s[o]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Oa:Ay,this.isPropagationStopped=Ay,this}return Pe(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Oa)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Oa)},persist:function(){},isPersistent:Oa}),t}var $i={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},bv=At($i),ma=Pe({},$i,{view:0,detail:0}),kP=At(ma),lu,uu,cs,tl=Pe({},ma,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:wv,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==cs&&(cs&&e.type==="mousemove"?(lu=e.screenX-cs.screenX,uu=e.screenY-cs.screenY):uu=lu=0,cs=e),lu)},movementY:function(e){return"movementY"in e?e.movementY:uu}}),Iy=At(tl),CP=Pe({},tl,{dataTransfer:0}),EP=At(CP),TP=Pe({},ma,{relatedTarget:0}),cu=At(TP),jP=Pe({},$i,{animationName:0,elapsedTime:0,pseudoElement:0}),NP=At(jP),MP=Pe({},$i,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),PP=At(MP),RP=Pe({},$i,{data:0}),Dy=At(RP),AP={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},IP={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},DP={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function LP(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=DP[e])?!!t[e]:!1}function wv(){return LP}var OP=Pe({},ma,{key:function(e){if(e.key){var t=AP[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=ao(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?IP[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:wv,charCode:function(e){return e.type==="keypress"?ao(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ao(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),qP=At(OP),FP=Pe({},tl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ly=At(FP),VP=Pe({},ma,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:wv}),$P=At(VP),BP=Pe({},$i,{propertyName:0,elapsedTime:0,pseudoElement:0}),zP=At(BP),UP=Pe({},tl,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),GP=At(UP),HP=[9,13,27,32],Sv=Pn&&"CompositionEvent"in window,As=null;Pn&&"documentMode"in document&&(As=document.documentMode);var WP=Pn&&"TextEvent"in window&&!As,mC=Pn&&(!Sv||As&&8<As&&11>=As),Oy=" ",qy=!1;function vC(e,t){switch(e){case"keyup":return HP.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function gC(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ui=!1;function KP(e,t){switch(e){case"compositionend":return gC(t);case"keypress":return t.which!==32?null:(qy=!0,Oy);case"textInput":return e=t.data,e===Oy&&qy?null:e;default:return null}}function YP(e,t){if(ui)return e==="compositionend"||!Sv&&vC(e,t)?(e=pC(),so=xv=Zn=null,ui=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return mC&&t.locale!=="ko"?null:t.data;default:return null}}var QP={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Fy(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!QP[e.type]:t==="textarea"}function yC(e,t,n,r){Yk(r),t=Co(t,"onChange"),0<t.length&&(n=new bv("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Is=null,Qs=null;function JP(e){NC(e,0)}function nl(e){var t=fi(e);if(Bk(t))return e}function XP(e,t){if(e==="change")return t}var xC=!1;if(Pn){var du;if(Pn){var fu="oninput"in document;if(!fu){var Vy=document.createElement("div");Vy.setAttribute("oninput","return;"),fu=typeof Vy.oninput=="function"}du=fu}else du=!1;xC=du&&(!document.documentMode||9<document.documentMode)}function $y(){Is&&(Is.detachEvent("onpropertychange",bC),Qs=Is=null)}function bC(e){if(e.propertyName==="value"&&nl(Qs)){var t=[];yC(t,Qs,e,pv(e)),Zk(JP,t)}}function ZP(e,t,n){e==="focusin"?($y(),Is=t,Qs=n,Is.attachEvent("onpropertychange",bC)):e==="focusout"&&$y()}function eR(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return nl(Qs)}function tR(e,t){if(e==="click")return nl(t)}function nR(e,t){if(e==="input"||e==="change")return nl(t)}function rR(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var tn=typeof Object.is=="function"?Object.is:rR;function Js(e,t){if(tn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Up.call(t,i)||!tn(e[i],t[i]))return!1}return!0}function By(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function zy(e,t){var n=By(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=By(n)}}function wC(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?wC(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function SC(){for(var e=window,t=yo();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=yo(e.document)}return t}function _v(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function iR(e){var t=SC(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&wC(n.ownerDocument.documentElement,n)){if(r!==null&&_v(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=zy(n,s);var a=zy(n,r);i&&a&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var sR=Pn&&"documentMode"in document&&11>=document.documentMode,ci=null,um=null,Ds=null,cm=!1;function Uy(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;cm||ci==null||ci!==yo(r)||(r=ci,"selectionStart"in r&&_v(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Ds&&Js(Ds,r)||(Ds=r,r=Co(um,"onSelect"),0<r.length&&(t=new bv("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=ci)))}function qa(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var di={animationend:qa("Animation","AnimationEnd"),animationiteration:qa("Animation","AnimationIteration"),animationstart:qa("Animation","AnimationStart"),transitionend:qa("Transition","TransitionEnd")},hu={},_C={};Pn&&(_C=document.createElement("div").style,"AnimationEvent"in window||(delete di.animationend.animation,delete di.animationiteration.animation,delete di.animationstart.animation),"TransitionEvent"in window||delete di.transitionend.transition);function rl(e){if(hu[e])return hu[e];if(!di[e])return e;var t=di[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in _C)return hu[e]=t[n];return e}var kC=rl("animationend"),CC=rl("animationiteration"),EC=rl("animationstart"),TC=rl("transitionend"),jC=new Map,Gy="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function mr(e,t){jC.set(e,t),$r(t,[e])}for(var pu=0;pu<Gy.length;pu++){var mu=Gy[pu],aR=mu.toLowerCase(),oR=mu[0].toUpperCase()+mu.slice(1);mr(aR,"on"+oR)}mr(kC,"onAnimationEnd");mr(CC,"onAnimationIteration");mr(EC,"onAnimationStart");mr("dblclick","onDoubleClick");mr("focusin","onFocus");mr("focusout","onBlur");mr(TC,"onTransitionEnd");Mi("onMouseEnter",["mouseout","mouseover"]);Mi("onMouseLeave",["mouseout","mouseover"]);Mi("onPointerEnter",["pointerout","pointerover"]);Mi("onPointerLeave",["pointerout","pointerover"]);$r("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));$r("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));$r("onBeforeInput",["compositionend","keypress","textInput","paste"]);$r("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));$r("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));$r("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ws="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),lR=new Set("cancel close invalid load scroll toggle".split(" ").concat(ws));function Hy(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,aP(r,t,void 0,e),e.currentTarget=null}function NC(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var a=r.length-1;0<=a;a--){var o=r[a],l=o.instance,u=o.currentTarget;if(o=o.listener,l!==s&&i.isPropagationStopped())break e;Hy(i,o,u),s=l}else for(a=0;a<r.length;a++){if(o=r[a],l=o.instance,u=o.currentTarget,o=o.listener,l!==s&&i.isPropagationStopped())break e;Hy(i,o,u),s=l}}}if(bo)throw e=sm,bo=!1,sm=null,e}function Se(e,t){var n=t[mm];n===void 0&&(n=t[mm]=new Set);var r=e+"__bubble";n.has(r)||(MC(t,e,2,!1),n.add(r))}function vu(e,t,n){var r=0;t&&(r|=4),MC(n,e,r,t)}var Fa="_reactListening"+Math.random().toString(36).slice(2);function Xs(e){if(!e[Fa]){e[Fa]=!0,Ok.forEach(function(n){n!=="selectionchange"&&(lR.has(n)||vu(n,!1,e),vu(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Fa]||(t[Fa]=!0,vu("selectionchange",!1,t))}}function MC(e,t,n,r){switch(hC(t)){case 1:var i=SP;break;case 4:i=_P;break;default:i=yv}n=i.bind(null,t,n,e),i=void 0,!im||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function gu(e,t,n,r,i){var s=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var o=r.stateNode.containerInfo;if(o===i||o.nodeType===8&&o.parentNode===i)break;if(a===4)for(a=r.return;a!==null;){var l=a.tag;if((l===3||l===4)&&(l=a.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;a=a.return}for(;o!==null;){if(a=Tr(o),a===null)return;if(l=a.tag,l===5||l===6){r=s=a;continue e}o=o.parentNode}}r=r.return}Zk(function(){var u=s,c=pv(n),d=[];e:{var h=jC.get(e);if(h!==void 0){var m=bv,g=e;switch(e){case"keypress":if(ao(n)===0)break e;case"keydown":case"keyup":m=qP;break;case"focusin":g="focus",m=cu;break;case"focusout":g="blur",m=cu;break;case"beforeblur":case"afterblur":m=cu;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=Iy;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=EP;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=$P;break;case kC:case CC:case EC:m=NP;break;case TC:m=zP;break;case"scroll":m=kP;break;case"wheel":m=GP;break;case"copy":case"cut":case"paste":m=PP;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=Ly}var p=(t&4)!==0,b=!p&&e==="scroll",v=p?h!==null?h+"Capture":null:h;p=[];for(var y=u,x;y!==null;){x=y;var _=x.stateNode;if(x.tag===5&&_!==null&&(x=_,v!==null&&(_=Hs(y,v),_!=null&&p.push(Zs(y,_,x)))),b)break;y=y.return}0<p.length&&(h=new m(h,g,null,n,c),d.push({event:h,listeners:p}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",m=e==="mouseout"||e==="pointerout",h&&n!==nm&&(g=n.relatedTarget||n.fromElement)&&(Tr(g)||g[Rn]))break e;if((m||h)&&(h=c.window===c?c:(h=c.ownerDocument)?h.defaultView||h.parentWindow:window,m?(g=n.relatedTarget||n.toElement,m=u,g=g?Tr(g):null,g!==null&&(b=Br(g),g!==b||g.tag!==5&&g.tag!==6)&&(g=null)):(m=null,g=u),m!==g)){if(p=Iy,_="onMouseLeave",v="onMouseEnter",y="mouse",(e==="pointerout"||e==="pointerover")&&(p=Ly,_="onPointerLeave",v="onPointerEnter",y="pointer"),b=m==null?h:fi(m),x=g==null?h:fi(g),h=new p(_,y+"leave",m,n,c),h.target=b,h.relatedTarget=x,_=null,Tr(c)===u&&(p=new p(v,y+"enter",g,n,c),p.target=x,p.relatedTarget=b,_=p),b=_,m&&g)t:{for(p=m,v=g,y=0,x=p;x;x=ii(x))y++;for(x=0,_=v;_;_=ii(_))x++;for(;0<y-x;)p=ii(p),y--;for(;0<x-y;)v=ii(v),x--;for(;y--;){if(p===v||v!==null&&p===v.alternate)break t;p=ii(p),v=ii(v)}p=null}else p=null;m!==null&&Wy(d,h,m,p,!1),g!==null&&b!==null&&Wy(d,b,g,p,!0)}}e:{if(h=u?fi(u):window,m=h.nodeName&&h.nodeName.toLowerCase(),m==="select"||m==="input"&&h.type==="file")var k=XP;else if(Fy(h))if(xC)k=nR;else{k=eR;var E=ZP}else(m=h.nodeName)&&m.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(k=tR);if(k&&(k=k(e,u))){yC(d,k,n,c);break e}E&&E(e,h,u),e==="focusout"&&(E=h._wrapperState)&&E.controlled&&h.type==="number"&&Jp(h,"number",h.value)}switch(E=u?fi(u):window,e){case"focusin":(Fy(E)||E.contentEditable==="true")&&(ci=E,um=u,Ds=null);break;case"focusout":Ds=um=ci=null;break;case"mousedown":cm=!0;break;case"contextmenu":case"mouseup":case"dragend":cm=!1,Uy(d,n,c);break;case"selectionchange":if(sR)break;case"keydown":case"keyup":Uy(d,n,c)}var j;if(Sv)e:{switch(e){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else ui?vC(e,n)&&(T="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(T="onCompositionStart");T&&(mC&&n.locale!=="ko"&&(ui||T!=="onCompositionStart"?T==="onCompositionEnd"&&ui&&(j=pC()):(Zn=c,xv="value"in Zn?Zn.value:Zn.textContent,ui=!0)),E=Co(u,T),0<E.length&&(T=new Dy(T,e,null,n,c),d.push({event:T,listeners:E}),j?T.data=j:(j=gC(n),j!==null&&(T.data=j)))),(j=WP?KP(e,n):YP(e,n))&&(u=Co(u,"onBeforeInput"),0<u.length&&(c=new Dy("onBeforeInput","beforeinput",null,n,c),d.push({event:c,listeners:u}),c.data=j))}NC(d,t)})}function Zs(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Co(e,t){for(var n=t+"Capture",r=[];e!==null;){var i=e,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Hs(e,n),s!=null&&r.unshift(Zs(e,s,i)),s=Hs(e,t),s!=null&&r.push(Zs(e,s,i))),e=e.return}return r}function ii(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Wy(e,t,n,r,i){for(var s=t._reactName,a=[];n!==null&&n!==r;){var o=n,l=o.alternate,u=o.stateNode;if(l!==null&&l===r)break;o.tag===5&&u!==null&&(o=u,i?(l=Hs(n,s),l!=null&&a.unshift(Zs(n,l,o))):i||(l=Hs(n,s),l!=null&&a.push(Zs(n,l,o)))),n=n.return}a.length!==0&&e.push({event:t,listeners:a})}var uR=/\r\n?/g,cR=/\u0000|\uFFFD/g;function Ky(e){return(typeof e=="string"?e:""+e).replace(uR,`
`).replace(cR,"")}function Va(e,t,n){if(t=Ky(t),Ky(e)!==t&&n)throw Error(L(425))}function Eo(){}var dm=null,fm=null;function hm(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var pm=typeof setTimeout=="function"?setTimeout:void 0,dR=typeof clearTimeout=="function"?clearTimeout:void 0,Yy=typeof Promise=="function"?Promise:void 0,fR=typeof queueMicrotask=="function"?queueMicrotask:typeof Yy<"u"?function(e){return Yy.resolve(null).then(e).catch(hR)}:pm;function hR(e){setTimeout(function(){throw e})}function yu(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){e.removeChild(i),Ys(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Ys(t)}function ir(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Qy(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Bi=Math.random().toString(36).slice(2),cn="__reactFiber$"+Bi,ea="__reactProps$"+Bi,Rn="__reactContainer$"+Bi,mm="__reactEvents$"+Bi,pR="__reactListeners$"+Bi,mR="__reactHandles$"+Bi;function Tr(e){var t=e[cn];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Rn]||n[cn]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Qy(e);e!==null;){if(n=e[cn])return n;e=Qy(e)}return t}e=n,n=e.parentNode}return null}function va(e){return e=e[cn]||e[Rn],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function fi(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(L(33))}function il(e){return e[ea]||null}var vm=[],hi=-1;function vr(e){return{current:e}}function _e(e){0>hi||(e.current=vm[hi],vm[hi]=null,hi--)}function be(e,t){hi++,vm[hi]=e.current,e.current=t}var dr={},ct=vr(dr),xt=vr(!1),Lr=dr;function Pi(e,t){var n=e.type.contextTypes;if(!n)return dr;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=t[s];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function bt(e){return e=e.childContextTypes,e!=null}function To(){_e(xt),_e(ct)}function Jy(e,t,n){if(ct.current!==dr)throw Error(L(168));be(ct,t),be(xt,n)}function PC(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(L(108,ZM(e)||"Unknown",i));return Pe({},n,r)}function jo(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||dr,Lr=ct.current,be(ct,e),be(xt,xt.current),!0}function Xy(e,t,n){var r=e.stateNode;if(!r)throw Error(L(169));n?(e=PC(e,t,Lr),r.__reactInternalMemoizedMergedChildContext=e,_e(xt),_e(ct),be(ct,e)):_e(xt),be(xt,n)}var Sn=null,sl=!1,xu=!1;function RC(e){Sn===null?Sn=[e]:Sn.push(e)}function vR(e){sl=!0,RC(e)}function gr(){if(!xu&&Sn!==null){xu=!0;var e=0,t=ge;try{var n=Sn;for(ge=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Sn=null,sl=!1}catch(i){throw Sn!==null&&(Sn=Sn.slice(e+1)),rC(mv,gr),i}finally{ge=t,xu=!1}}return null}var pi=[],mi=0,No=null,Mo=0,Ft=[],Vt=0,Or=null,kn=1,Cn="";function _r(e,t){pi[mi++]=Mo,pi[mi++]=No,No=e,Mo=t}function AC(e,t,n){Ft[Vt++]=kn,Ft[Vt++]=Cn,Ft[Vt++]=Or,Or=e;var r=kn;e=Cn;var i=32-Zt(r)-1;r&=~(1<<i),n+=1;var s=32-Zt(t)+i;if(30<s){var a=i-i%5;s=(r&(1<<a)-1).toString(32),r>>=a,i-=a,kn=1<<32-Zt(t)+i|n<<i|r,Cn=s+e}else kn=1<<s|n<<i|r,Cn=e}function kv(e){e.return!==null&&(_r(e,1),AC(e,1,0))}function Cv(e){for(;e===No;)No=pi[--mi],pi[mi]=null,Mo=pi[--mi],pi[mi]=null;for(;e===Or;)Or=Ft[--Vt],Ft[Vt]=null,Cn=Ft[--Vt],Ft[Vt]=null,kn=Ft[--Vt],Ft[Vt]=null}var jt=null,Tt=null,Ce=!1,Xt=null;function IC(e,t){var n=$t(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Zy(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,jt=e,Tt=ir(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,jt=e,Tt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Or!==null?{id:kn,overflow:Cn}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=$t(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,jt=e,Tt=null,!0):!1;default:return!1}}function gm(e){return(e.mode&1)!==0&&(e.flags&128)===0}function ym(e){if(Ce){var t=Tt;if(t){var n=t;if(!Zy(e,t)){if(gm(e))throw Error(L(418));t=ir(n.nextSibling);var r=jt;t&&Zy(e,t)?IC(r,n):(e.flags=e.flags&-4097|2,Ce=!1,jt=e)}}else{if(gm(e))throw Error(L(418));e.flags=e.flags&-4097|2,Ce=!1,jt=e}}}function e0(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;jt=e}function $a(e){if(e!==jt)return!1;if(!Ce)return e0(e),Ce=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!hm(e.type,e.memoizedProps)),t&&(t=Tt)){if(gm(e))throw DC(),Error(L(418));for(;t;)IC(e,t),t=ir(t.nextSibling)}if(e0(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(L(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Tt=ir(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Tt=null}}else Tt=jt?ir(e.stateNode.nextSibling):null;return!0}function DC(){for(var e=Tt;e;)e=ir(e.nextSibling)}function Ri(){Tt=jt=null,Ce=!1}function Ev(e){Xt===null?Xt=[e]:Xt.push(e)}var gR=On.ReactCurrentBatchConfig;function ds(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(L(309));var r=n.stateNode}if(!r)throw Error(L(147,e));var i=r,s=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(a){var o=i.refs;a===null?delete o[s]:o[s]=a},t._stringRef=s,t)}if(typeof e!="string")throw Error(L(284));if(!n._owner)throw Error(L(290,e))}return e}function Ba(e,t){throw e=Object.prototype.toString.call(t),Error(L(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function t0(e){var t=e._init;return t(e._payload)}function LC(e){function t(v,y){if(e){var x=v.deletions;x===null?(v.deletions=[y],v.flags|=16):x.push(y)}}function n(v,y){if(!e)return null;for(;y!==null;)t(v,y),y=y.sibling;return null}function r(v,y){for(v=new Map;y!==null;)y.key!==null?v.set(y.key,y):v.set(y.index,y),y=y.sibling;return v}function i(v,y){return v=lr(v,y),v.index=0,v.sibling=null,v}function s(v,y,x){return v.index=x,e?(x=v.alternate,x!==null?(x=x.index,x<y?(v.flags|=2,y):x):(v.flags|=2,y)):(v.flags|=1048576,y)}function a(v){return e&&v.alternate===null&&(v.flags|=2),v}function o(v,y,x,_){return y===null||y.tag!==6?(y=Eu(x,v.mode,_),y.return=v,y):(y=i(y,x),y.return=v,y)}function l(v,y,x,_){var k=x.type;return k===li?c(v,y,x.props.children,_,x.key):y!==null&&(y.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===Kn&&t0(k)===y.type)?(_=i(y,x.props),_.ref=ds(v,y,x),_.return=v,_):(_=po(x.type,x.key,x.props,null,v.mode,_),_.ref=ds(v,y,x),_.return=v,_)}function u(v,y,x,_){return y===null||y.tag!==4||y.stateNode.containerInfo!==x.containerInfo||y.stateNode.implementation!==x.implementation?(y=Tu(x,v.mode,_),y.return=v,y):(y=i(y,x.children||[]),y.return=v,y)}function c(v,y,x,_,k){return y===null||y.tag!==7?(y=Ar(x,v.mode,_,k),y.return=v,y):(y=i(y,x),y.return=v,y)}function d(v,y,x){if(typeof y=="string"&&y!==""||typeof y=="number")return y=Eu(""+y,v.mode,x),y.return=v,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Pa:return x=po(y.type,y.key,y.props,null,v.mode,x),x.ref=ds(v,null,y),x.return=v,x;case oi:return y=Tu(y,v.mode,x),y.return=v,y;case Kn:var _=y._init;return d(v,_(y._payload),x)}if(xs(y)||as(y))return y=Ar(y,v.mode,x,null),y.return=v,y;Ba(v,y)}return null}function h(v,y,x,_){var k=y!==null?y.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return k!==null?null:o(v,y,""+x,_);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Pa:return x.key===k?l(v,y,x,_):null;case oi:return x.key===k?u(v,y,x,_):null;case Kn:return k=x._init,h(v,y,k(x._payload),_)}if(xs(x)||as(x))return k!==null?null:c(v,y,x,_,null);Ba(v,x)}return null}function m(v,y,x,_,k){if(typeof _=="string"&&_!==""||typeof _=="number")return v=v.get(x)||null,o(y,v,""+_,k);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Pa:return v=v.get(_.key===null?x:_.key)||null,l(y,v,_,k);case oi:return v=v.get(_.key===null?x:_.key)||null,u(y,v,_,k);case Kn:var E=_._init;return m(v,y,x,E(_._payload),k)}if(xs(_)||as(_))return v=v.get(x)||null,c(y,v,_,k,null);Ba(y,_)}return null}function g(v,y,x,_){for(var k=null,E=null,j=y,T=y=0,M=null;j!==null&&T<x.length;T++){j.index>T?(M=j,j=null):M=j.sibling;var D=h(v,j,x[T],_);if(D===null){j===null&&(j=M);break}e&&j&&D.alternate===null&&t(v,j),y=s(D,y,T),E===null?k=D:E.sibling=D,E=D,j=M}if(T===x.length)return n(v,j),Ce&&_r(v,T),k;if(j===null){for(;T<x.length;T++)j=d(v,x[T],_),j!==null&&(y=s(j,y,T),E===null?k=j:E.sibling=j,E=j);return Ce&&_r(v,T),k}for(j=r(v,j);T<x.length;T++)M=m(j,v,T,x[T],_),M!==null&&(e&&M.alternate!==null&&j.delete(M.key===null?T:M.key),y=s(M,y,T),E===null?k=M:E.sibling=M,E=M);return e&&j.forEach(function(R){return t(v,R)}),Ce&&_r(v,T),k}function p(v,y,x,_){var k=as(x);if(typeof k!="function")throw Error(L(150));if(x=k.call(x),x==null)throw Error(L(151));for(var E=k=null,j=y,T=y=0,M=null,D=x.next();j!==null&&!D.done;T++,D=x.next()){j.index>T?(M=j,j=null):M=j.sibling;var R=h(v,j,D.value,_);if(R===null){j===null&&(j=M);break}e&&j&&R.alternate===null&&t(v,j),y=s(R,y,T),E===null?k=R:E.sibling=R,E=R,j=M}if(D.done)return n(v,j),Ce&&_r(v,T),k;if(j===null){for(;!D.done;T++,D=x.next())D=d(v,D.value,_),D!==null&&(y=s(D,y,T),E===null?k=D:E.sibling=D,E=D);return Ce&&_r(v,T),k}for(j=r(v,j);!D.done;T++,D=x.next())D=m(j,v,T,D.value,_),D!==null&&(e&&D.alternate!==null&&j.delete(D.key===null?T:D.key),y=s(D,y,T),E===null?k=D:E.sibling=D,E=D);return e&&j.forEach(function(H){return t(v,H)}),Ce&&_r(v,T),k}function b(v,y,x,_){if(typeof x=="object"&&x!==null&&x.type===li&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case Pa:e:{for(var k=x.key,E=y;E!==null;){if(E.key===k){if(k=x.type,k===li){if(E.tag===7){n(v,E.sibling),y=i(E,x.props.children),y.return=v,v=y;break e}}else if(E.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===Kn&&t0(k)===E.type){n(v,E.sibling),y=i(E,x.props),y.ref=ds(v,E,x),y.return=v,v=y;break e}n(v,E);break}else t(v,E);E=E.sibling}x.type===li?(y=Ar(x.props.children,v.mode,_,x.key),y.return=v,v=y):(_=po(x.type,x.key,x.props,null,v.mode,_),_.ref=ds(v,y,x),_.return=v,v=_)}return a(v);case oi:e:{for(E=x.key;y!==null;){if(y.key===E)if(y.tag===4&&y.stateNode.containerInfo===x.containerInfo&&y.stateNode.implementation===x.implementation){n(v,y.sibling),y=i(y,x.children||[]),y.return=v,v=y;break e}else{n(v,y);break}else t(v,y);y=y.sibling}y=Tu(x,v.mode,_),y.return=v,v=y}return a(v);case Kn:return E=x._init,b(v,y,E(x._payload),_)}if(xs(x))return g(v,y,x,_);if(as(x))return p(v,y,x,_);Ba(v,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,y!==null&&y.tag===6?(n(v,y.sibling),y=i(y,x),y.return=v,v=y):(n(v,y),y=Eu(x,v.mode,_),y.return=v,v=y),a(v)):n(v,y)}return b}var Ai=LC(!0),OC=LC(!1),Po=vr(null),Ro=null,vi=null,Tv=null;function jv(){Tv=vi=Ro=null}function Nv(e){var t=Po.current;_e(Po),e._currentValue=t}function xm(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function ji(e,t){Ro=e,Tv=vi=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(yt=!0),e.firstContext=null)}function zt(e){var t=e._currentValue;if(Tv!==e)if(e={context:e,memoizedValue:t,next:null},vi===null){if(Ro===null)throw Error(L(308));vi=e,Ro.dependencies={lanes:0,firstContext:e}}else vi=vi.next=e;return t}var jr=null;function Mv(e){jr===null?jr=[e]:jr.push(e)}function qC(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,Mv(t)):(n.next=i.next,i.next=n),t.interleaved=n,An(e,r)}function An(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Yn=!1;function Pv(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function FC(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function jn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function sr(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,de&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,An(e,n)}return i=r.interleaved,i===null?(t.next=t,Mv(r)):(t.next=i.next,i.next=t),r.interleaved=t,An(e,n)}function oo(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,vv(e,n)}}function n0(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=a:s=s.next=a,n=n.next}while(n!==null);s===null?i=s=t:s=s.next=t}else i=s=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Ao(e,t,n,r){var i=e.updateQueue;Yn=!1;var s=i.firstBaseUpdate,a=i.lastBaseUpdate,o=i.shared.pending;if(o!==null){i.shared.pending=null;var l=o,u=l.next;l.next=null,a===null?s=u:a.next=u,a=l;var c=e.alternate;c!==null&&(c=c.updateQueue,o=c.lastBaseUpdate,o!==a&&(o===null?c.firstBaseUpdate=u:o.next=u,c.lastBaseUpdate=l))}if(s!==null){var d=i.baseState;a=0,c=u=l=null,o=s;do{var h=o.lane,m=o.eventTime;if((r&h)===h){c!==null&&(c=c.next={eventTime:m,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var g=e,p=o;switch(h=t,m=n,p.tag){case 1:if(g=p.payload,typeof g=="function"){d=g.call(m,d,h);break e}d=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=p.payload,h=typeof g=="function"?g.call(m,d,h):g,h==null)break e;d=Pe({},d,h);break e;case 2:Yn=!0}}o.callback!==null&&o.lane!==0&&(e.flags|=64,h=i.effects,h===null?i.effects=[o]:h.push(o))}else m={eventTime:m,lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},c===null?(u=c=m,l=d):c=c.next=m,a|=h;if(o=o.next,o===null){if(o=i.shared.pending,o===null)break;h=o,o=h.next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}while(!0);if(c===null&&(l=d),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,t=i.shared.interleaved,t!==null){i=t;do a|=i.lane,i=i.next;while(i!==t)}else s===null&&(i.shared.lanes=0);Fr|=a,e.lanes=a,e.memoizedState=d}}function r0(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(L(191,i));i.call(r)}}}var ga={},hn=vr(ga),ta=vr(ga),na=vr(ga);function Nr(e){if(e===ga)throw Error(L(174));return e}function Rv(e,t){switch(be(na,t),be(ta,e),be(hn,ga),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Zp(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Zp(t,e)}_e(hn),be(hn,t)}function Ii(){_e(hn),_e(ta),_e(na)}function VC(e){Nr(na.current);var t=Nr(hn.current),n=Zp(t,e.type);t!==n&&(be(ta,e),be(hn,n))}function Av(e){ta.current===e&&(_e(hn),_e(ta))}var je=vr(0);function Io(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var bu=[];function Iv(){for(var e=0;e<bu.length;e++)bu[e]._workInProgressVersionPrimary=null;bu.length=0}var lo=On.ReactCurrentDispatcher,wu=On.ReactCurrentBatchConfig,qr=0,Me=null,We=null,Qe=null,Do=!1,Ls=!1,ra=0,yR=0;function st(){throw Error(L(321))}function Dv(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!tn(e[n],t[n]))return!1;return!0}function Lv(e,t,n,r,i,s){if(qr=s,Me=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,lo.current=e===null||e.memoizedState===null?SR:_R,e=n(r,i),Ls){s=0;do{if(Ls=!1,ra=0,25<=s)throw Error(L(301));s+=1,Qe=We=null,t.updateQueue=null,lo.current=kR,e=n(r,i)}while(Ls)}if(lo.current=Lo,t=We!==null&&We.next!==null,qr=0,Qe=We=Me=null,Do=!1,t)throw Error(L(300));return e}function Ov(){var e=ra!==0;return ra=0,e}function un(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Qe===null?Me.memoizedState=Qe=e:Qe=Qe.next=e,Qe}function Ut(){if(We===null){var e=Me.alternate;e=e!==null?e.memoizedState:null}else e=We.next;var t=Qe===null?Me.memoizedState:Qe.next;if(t!==null)Qe=t,We=e;else{if(e===null)throw Error(L(310));We=e,e={memoizedState:We.memoizedState,baseState:We.baseState,baseQueue:We.baseQueue,queue:We.queue,next:null},Qe===null?Me.memoizedState=Qe=e:Qe=Qe.next=e}return Qe}function ia(e,t){return typeof t=="function"?t(e):t}function Su(e){var t=Ut(),n=t.queue;if(n===null)throw Error(L(311));n.lastRenderedReducer=e;var r=We,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var a=i.next;i.next=s.next,s.next=a}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var o=a=null,l=null,u=s;do{var c=u.lane;if((qr&c)===c)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var d={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(o=l=d,a=r):l=l.next=d,Me.lanes|=c,Fr|=c}u=u.next}while(u!==null&&u!==s);l===null?a=r:l.next=o,tn(r,t.memoizedState)||(yt=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=l,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do s=i.lane,Me.lanes|=s,Fr|=s,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function _u(e){var t=Ut(),n=t.queue;if(n===null)throw Error(L(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(i!==null){n.pending=null;var a=i=i.next;do s=e(s,a.action),a=a.next;while(a!==i);tn(s,t.memoizedState)||(yt=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function $C(){}function BC(e,t){var n=Me,r=Ut(),i=t(),s=!tn(r.memoizedState,i);if(s&&(r.memoizedState=i,yt=!0),r=r.queue,qv(GC.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||Qe!==null&&Qe.memoizedState.tag&1){if(n.flags|=2048,sa(9,UC.bind(null,n,r,i,t),void 0,null),Je===null)throw Error(L(349));qr&30||zC(n,t,i)}return i}function zC(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Me.updateQueue,t===null?(t={lastEffect:null,stores:null},Me.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function UC(e,t,n,r){t.value=n,t.getSnapshot=r,HC(t)&&WC(e)}function GC(e,t,n){return n(function(){HC(t)&&WC(e)})}function HC(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!tn(e,n)}catch{return!0}}function WC(e){var t=An(e,1);t!==null&&en(t,e,1,-1)}function i0(e){var t=un();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ia,lastRenderedState:e},t.queue=e,e=e.dispatch=wR.bind(null,Me,e),[t.memoizedState,e]}function sa(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Me.updateQueue,t===null?(t={lastEffect:null,stores:null},Me.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function KC(){return Ut().memoizedState}function uo(e,t,n,r){var i=un();Me.flags|=e,i.memoizedState=sa(1|t,n,void 0,r===void 0?null:r)}function al(e,t,n,r){var i=Ut();r=r===void 0?null:r;var s=void 0;if(We!==null){var a=We.memoizedState;if(s=a.destroy,r!==null&&Dv(r,a.deps)){i.memoizedState=sa(t,n,s,r);return}}Me.flags|=e,i.memoizedState=sa(1|t,n,s,r)}function s0(e,t){return uo(8390656,8,e,t)}function qv(e,t){return al(2048,8,e,t)}function YC(e,t){return al(4,2,e,t)}function QC(e,t){return al(4,4,e,t)}function JC(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function XC(e,t,n){return n=n!=null?n.concat([e]):null,al(4,4,JC.bind(null,t,e),n)}function Fv(){}function ZC(e,t){var n=Ut();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Dv(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function eE(e,t){var n=Ut();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Dv(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function tE(e,t,n){return qr&21?(tn(n,t)||(n=aC(),Me.lanes|=n,Fr|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,yt=!0),e.memoizedState=n)}function xR(e,t){var n=ge;ge=n!==0&&4>n?n:4,e(!0);var r=wu.transition;wu.transition={};try{e(!1),t()}finally{ge=n,wu.transition=r}}function nE(){return Ut().memoizedState}function bR(e,t,n){var r=or(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},rE(e))iE(t,n);else if(n=qC(e,t,n,r),n!==null){var i=ht();en(n,e,r,i),sE(n,t,r)}}function wR(e,t,n){var r=or(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(rE(e))iE(t,i);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var a=t.lastRenderedState,o=s(a,n);if(i.hasEagerState=!0,i.eagerState=o,tn(o,a)){var l=t.interleaved;l===null?(i.next=i,Mv(t)):(i.next=l.next,l.next=i),t.interleaved=i;return}}catch{}finally{}n=qC(e,t,i,r),n!==null&&(i=ht(),en(n,e,r,i),sE(n,t,r))}}function rE(e){var t=e.alternate;return e===Me||t!==null&&t===Me}function iE(e,t){Ls=Do=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function sE(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,vv(e,n)}}var Lo={readContext:zt,useCallback:st,useContext:st,useEffect:st,useImperativeHandle:st,useInsertionEffect:st,useLayoutEffect:st,useMemo:st,useReducer:st,useRef:st,useState:st,useDebugValue:st,useDeferredValue:st,useTransition:st,useMutableSource:st,useSyncExternalStore:st,useId:st,unstable_isNewReconciler:!1},SR={readContext:zt,useCallback:function(e,t){return un().memoizedState=[e,t===void 0?null:t],e},useContext:zt,useEffect:s0,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,uo(4194308,4,JC.bind(null,t,e),n)},useLayoutEffect:function(e,t){return uo(4194308,4,e,t)},useInsertionEffect:function(e,t){return uo(4,2,e,t)},useMemo:function(e,t){var n=un();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=un();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=bR.bind(null,Me,e),[r.memoizedState,e]},useRef:function(e){var t=un();return e={current:e},t.memoizedState=e},useState:i0,useDebugValue:Fv,useDeferredValue:function(e){return un().memoizedState=e},useTransition:function(){var e=i0(!1),t=e[0];return e=xR.bind(null,e[1]),un().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Me,i=un();if(Ce){if(n===void 0)throw Error(L(407));n=n()}else{if(n=t(),Je===null)throw Error(L(349));qr&30||zC(r,t,n)}i.memoizedState=n;var s={value:n,getSnapshot:t};return i.queue=s,s0(GC.bind(null,r,s,e),[e]),r.flags|=2048,sa(9,UC.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=un(),t=Je.identifierPrefix;if(Ce){var n=Cn,r=kn;n=(r&~(1<<32-Zt(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=ra++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=yR++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},_R={readContext:zt,useCallback:ZC,useContext:zt,useEffect:qv,useImperativeHandle:XC,useInsertionEffect:YC,useLayoutEffect:QC,useMemo:eE,useReducer:Su,useRef:KC,useState:function(){return Su(ia)},useDebugValue:Fv,useDeferredValue:function(e){var t=Ut();return tE(t,We.memoizedState,e)},useTransition:function(){var e=Su(ia)[0],t=Ut().memoizedState;return[e,t]},useMutableSource:$C,useSyncExternalStore:BC,useId:nE,unstable_isNewReconciler:!1},kR={readContext:zt,useCallback:ZC,useContext:zt,useEffect:qv,useImperativeHandle:XC,useInsertionEffect:YC,useLayoutEffect:QC,useMemo:eE,useReducer:_u,useRef:KC,useState:function(){return _u(ia)},useDebugValue:Fv,useDeferredValue:function(e){var t=Ut();return We===null?t.memoizedState=e:tE(t,We.memoizedState,e)},useTransition:function(){var e=_u(ia)[0],t=Ut().memoizedState;return[e,t]},useMutableSource:$C,useSyncExternalStore:BC,useId:nE,unstable_isNewReconciler:!1};function Qt(e,t){if(e&&e.defaultProps){t=Pe({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function bm(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Pe({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var ol={isMounted:function(e){return(e=e._reactInternals)?Br(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ht(),i=or(e),s=jn(r,i);s.payload=t,n!=null&&(s.callback=n),t=sr(e,s,i),t!==null&&(en(t,e,i,r),oo(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ht(),i=or(e),s=jn(r,i);s.tag=1,s.payload=t,n!=null&&(s.callback=n),t=sr(e,s,i),t!==null&&(en(t,e,i,r),oo(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ht(),r=or(e),i=jn(n,r);i.tag=2,t!=null&&(i.callback=t),t=sr(e,i,r),t!==null&&(en(t,e,r,n),oo(t,e,r))}};function a0(e,t,n,r,i,s,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,s,a):t.prototype&&t.prototype.isPureReactComponent?!Js(n,r)||!Js(i,s):!0}function aE(e,t,n){var r=!1,i=dr,s=t.contextType;return typeof s=="object"&&s!==null?s=zt(s):(i=bt(t)?Lr:ct.current,r=t.contextTypes,s=(r=r!=null)?Pi(e,i):dr),t=new t(n,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=ol,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function o0(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ol.enqueueReplaceState(t,t.state,null)}function wm(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},Pv(e);var s=t.contextType;typeof s=="object"&&s!==null?i.context=zt(s):(s=bt(t)?Lr:ct.current,i.context=Pi(e,s)),i.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(bm(e,t,s,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&ol.enqueueReplaceState(i,i.state,null),Ao(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function Di(e,t){try{var n="",r=t;do n+=XM(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:t,stack:i,digest:null}}function ku(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Sm(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var CR=typeof WeakMap=="function"?WeakMap:Map;function oE(e,t,n){n=jn(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){qo||(qo=!0,Rm=r),Sm(e,t)},n}function lE(e,t,n){n=jn(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){Sm(e,t)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Sm(e,t),typeof r!="function"&&(ar===null?ar=new Set([this]):ar.add(this));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),n}function l0(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new CR;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=FR.bind(null,e,t,n),t.then(e,e))}function u0(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function c0(e,t,n,r,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=jn(-1,1),t.tag=2,sr(n,t,1))),n.lanes|=1),e)}var ER=On.ReactCurrentOwner,yt=!1;function ft(e,t,n,r){t.child=e===null?OC(t,null,n,r):Ai(t,e.child,n,r)}function d0(e,t,n,r,i){n=n.render;var s=t.ref;return ji(t,i),r=Lv(e,t,n,r,s,i),n=Ov(),e!==null&&!yt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,In(e,t,i)):(Ce&&n&&kv(t),t.flags|=1,ft(e,t,r,i),t.child)}function f0(e,t,n,r,i){if(e===null){var s=n.type;return typeof s=="function"&&!Wv(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=s,uE(e,t,s,r,i)):(e=po(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!(e.lanes&i)){var a=s.memoizedProps;if(n=n.compare,n=n!==null?n:Js,n(a,r)&&e.ref===t.ref)return In(e,t,i)}return t.flags|=1,e=lr(s,r),e.ref=t.ref,e.return=t,t.child=e}function uE(e,t,n,r,i){if(e!==null){var s=e.memoizedProps;if(Js(s,r)&&e.ref===t.ref)if(yt=!1,t.pendingProps=r=s,(e.lanes&i)!==0)e.flags&131072&&(yt=!0);else return t.lanes=e.lanes,In(e,t,i)}return _m(e,t,n,r,i)}function cE(e,t,n){var r=t.pendingProps,i=r.children,s=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},be(yi,kt),kt|=n;else{if(!(n&1073741824))return e=s!==null?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,be(yi,kt),kt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,be(yi,kt),kt|=r}else s!==null?(r=s.baseLanes|n,t.memoizedState=null):r=n,be(yi,kt),kt|=r;return ft(e,t,i,n),t.child}function dE(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function _m(e,t,n,r,i){var s=bt(n)?Lr:ct.current;return s=Pi(t,s),ji(t,i),n=Lv(e,t,n,r,s,i),r=Ov(),e!==null&&!yt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,In(e,t,i)):(Ce&&r&&kv(t),t.flags|=1,ft(e,t,n,i),t.child)}function h0(e,t,n,r,i){if(bt(n)){var s=!0;jo(t)}else s=!1;if(ji(t,i),t.stateNode===null)co(e,t),aE(t,n,r),wm(t,n,r,i),r=!0;else if(e===null){var a=t.stateNode,o=t.memoizedProps;a.props=o;var l=a.context,u=n.contextType;typeof u=="object"&&u!==null?u=zt(u):(u=bt(n)?Lr:ct.current,u=Pi(t,u));var c=n.getDerivedStateFromProps,d=typeof c=="function"||typeof a.getSnapshotBeforeUpdate=="function";d||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==r||l!==u)&&o0(t,a,r,u),Yn=!1;var h=t.memoizedState;a.state=h,Ao(t,r,a,i),l=t.memoizedState,o!==r||h!==l||xt.current||Yn?(typeof c=="function"&&(bm(t,n,c,r),l=t.memoizedState),(o=Yn||a0(t,n,o,r,h,l,u))?(d||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),a.props=r,a.state=l,a.context=u,r=o):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,FC(e,t),o=t.memoizedProps,u=t.type===t.elementType?o:Qt(t.type,o),a.props=u,d=t.pendingProps,h=a.context,l=n.contextType,typeof l=="object"&&l!==null?l=zt(l):(l=bt(n)?Lr:ct.current,l=Pi(t,l));var m=n.getDerivedStateFromProps;(c=typeof m=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==d||h!==l)&&o0(t,a,r,l),Yn=!1,h=t.memoizedState,a.state=h,Ao(t,r,a,i);var g=t.memoizedState;o!==d||h!==g||xt.current||Yn?(typeof m=="function"&&(bm(t,n,m,r),g=t.memoizedState),(u=Yn||a0(t,n,u,r,h,g,l)||!1)?(c||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,g,l),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,g,l)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=g),a.props=r,a.state=g,a.context=l,r=u):(typeof a.componentDidUpdate!="function"||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return km(e,t,n,r,s,i)}function km(e,t,n,r,i,s){dE(e,t);var a=(t.flags&128)!==0;if(!r&&!a)return i&&Xy(t,n,!1),In(e,t,s);r=t.stateNode,ER.current=t;var o=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&a?(t.child=Ai(t,e.child,null,s),t.child=Ai(t,null,o,s)):ft(e,t,o,s),t.memoizedState=r.state,i&&Xy(t,n,!0),t.child}function fE(e){var t=e.stateNode;t.pendingContext?Jy(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Jy(e,t.context,!1),Rv(e,t.containerInfo)}function p0(e,t,n,r,i){return Ri(),Ev(i),t.flags|=256,ft(e,t,n,r),t.child}var Cm={dehydrated:null,treeContext:null,retryLane:0};function Em(e){return{baseLanes:e,cachePool:null,transitions:null}}function hE(e,t,n){var r=t.pendingProps,i=je.current,s=!1,a=(t.flags&128)!==0,o;if((o=a)||(o=e!==null&&e.memoizedState===null?!1:(i&2)!==0),o?(s=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),be(je,i&1),e===null)return ym(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(a=r.children,e=r.fallback,s?(r=t.mode,s=t.child,a={mode:"hidden",children:a},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=a):s=cl(a,r,0,null),e=Ar(e,r,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Em(n),t.memoizedState=Cm,e):Vv(t,a));if(i=e.memoizedState,i!==null&&(o=i.dehydrated,o!==null))return TR(e,t,a,r,o,i,n);if(s){s=r.fallback,a=t.mode,i=e.child,o=i.sibling;var l={mode:"hidden",children:r.children};return!(a&1)&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=l,t.deletions=null):(r=lr(i,l),r.subtreeFlags=i.subtreeFlags&14680064),o!==null?s=lr(o,s):(s=Ar(s,a,n,null),s.flags|=2),s.return=t,r.return=t,r.sibling=s,t.child=r,r=s,s=t.child,a=e.child.memoizedState,a=a===null?Em(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},s.memoizedState=a,s.childLanes=e.childLanes&~n,t.memoizedState=Cm,r}return s=e.child,e=s.sibling,r=lr(s,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Vv(e,t){return t=cl({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function za(e,t,n,r){return r!==null&&Ev(r),Ai(t,e.child,null,n),e=Vv(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function TR(e,t,n,r,i,s,a){if(n)return t.flags&256?(t.flags&=-257,r=ku(Error(L(422))),za(e,t,a,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(s=r.fallback,i=t.mode,r=cl({mode:"visible",children:r.children},i,0,null),s=Ar(s,i,a,null),s.flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,t.mode&1&&Ai(t,e.child,null,a),t.child.memoizedState=Em(a),t.memoizedState=Cm,s);if(!(t.mode&1))return za(e,t,a,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var o=r.dgst;return r=o,s=Error(L(419)),r=ku(s,r,void 0),za(e,t,a,r)}if(o=(a&e.childLanes)!==0,yt||o){if(r=Je,r!==null){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|a)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,An(e,i),en(r,e,i,-1))}return Hv(),r=ku(Error(L(421))),za(e,t,a,r)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=VR.bind(null,e),i._reactRetry=t,null):(e=s.treeContext,Tt=ir(i.nextSibling),jt=t,Ce=!0,Xt=null,e!==null&&(Ft[Vt++]=kn,Ft[Vt++]=Cn,Ft[Vt++]=Or,kn=e.id,Cn=e.overflow,Or=t),t=Vv(t,r.children),t.flags|=4096,t)}function m0(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),xm(e.return,t,n)}function Cu(e,t,n,r,i){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function pE(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(ft(e,t,r.children,n),r=je.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&m0(e,n,t);else if(e.tag===19)m0(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(be(je,r),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&Io(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Cu(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&Io(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Cu(t,!0,n,null,s);break;case"together":Cu(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function co(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function In(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Fr|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(L(153));if(t.child!==null){for(e=t.child,n=lr(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=lr(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function jR(e,t,n){switch(t.tag){case 3:fE(t),Ri();break;case 5:VC(t);break;case 1:bt(t.type)&&jo(t);break;case 4:Rv(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;be(Po,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(be(je,je.current&1),t.flags|=128,null):n&t.child.childLanes?hE(e,t,n):(be(je,je.current&1),e=In(e,t,n),e!==null?e.sibling:null);be(je,je.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return pE(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),be(je,je.current),r)break;return null;case 22:case 23:return t.lanes=0,cE(e,t,n)}return In(e,t,n)}var mE,Tm,vE,gE;mE=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Tm=function(){};vE=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Nr(hn.current);var s=null;switch(n){case"input":i=Yp(e,i),r=Yp(e,r),s=[];break;case"select":i=Pe({},i,{value:void 0}),r=Pe({},r,{value:void 0}),s=[];break;case"textarea":i=Xp(e,i),r=Xp(e,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Eo)}em(n,r);var a;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var o=i[u];for(a in o)o.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Us.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var l=r[u];if(o=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&l!==o&&(l!=null||o!=null))if(u==="style")if(o){for(a in o)!o.hasOwnProperty(a)||l&&l.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in l)l.hasOwnProperty(a)&&o[a]!==l[a]&&(n||(n={}),n[a]=l[a])}else n||(s||(s=[]),s.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,o=o?o.__html:void 0,l!=null&&o!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Us.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&Se("scroll",e),s||o===l||(s=[])):(s=s||[]).push(u,l))}n&&(s=s||[]).push("style",n);var u=s;(t.updateQueue=u)&&(t.flags|=4)}};gE=function(e,t,n,r){n!==r&&(t.flags|=4)};function fs(e,t){if(!Ce)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function at(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function NR(e,t,n){var r=t.pendingProps;switch(Cv(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return at(t),null;case 1:return bt(t.type)&&To(),at(t),null;case 3:return r=t.stateNode,Ii(),_e(xt),_e(ct),Iv(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&($a(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Xt!==null&&(Dm(Xt),Xt=null))),Tm(e,t),at(t),null;case 5:Av(t);var i=Nr(na.current);if(n=t.type,e!==null&&t.stateNode!=null)vE(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(L(166));return at(t),null}if(e=Nr(hn.current),$a(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[cn]=t,r[ea]=s,e=(t.mode&1)!==0,n){case"dialog":Se("cancel",r),Se("close",r);break;case"iframe":case"object":case"embed":Se("load",r);break;case"video":case"audio":for(i=0;i<ws.length;i++)Se(ws[i],r);break;case"source":Se("error",r);break;case"img":case"image":case"link":Se("error",r),Se("load",r);break;case"details":Se("toggle",r);break;case"input":ky(r,s),Se("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Se("invalid",r);break;case"textarea":Ey(r,s),Se("invalid",r)}em(n,s),i=null;for(var a in s)if(s.hasOwnProperty(a)){var o=s[a];a==="children"?typeof o=="string"?r.textContent!==o&&(s.suppressHydrationWarning!==!0&&Va(r.textContent,o,e),i=["children",o]):typeof o=="number"&&r.textContent!==""+o&&(s.suppressHydrationWarning!==!0&&Va(r.textContent,o,e),i=["children",""+o]):Us.hasOwnProperty(a)&&o!=null&&a==="onScroll"&&Se("scroll",r)}switch(n){case"input":Ra(r),Cy(r,s,!0);break;case"textarea":Ra(r),Ty(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Eo)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{a=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Gk(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=a.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=a.createElement(n,{is:r.is}):(e=a.createElement(n),n==="select"&&(a=e,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):e=a.createElementNS(e,n),e[cn]=t,e[ea]=r,mE(e,t,!1,!1),t.stateNode=e;e:{switch(a=tm(n,r),n){case"dialog":Se("cancel",e),Se("close",e),i=r;break;case"iframe":case"object":case"embed":Se("load",e),i=r;break;case"video":case"audio":for(i=0;i<ws.length;i++)Se(ws[i],e);i=r;break;case"source":Se("error",e),i=r;break;case"img":case"image":case"link":Se("error",e),Se("load",e),i=r;break;case"details":Se("toggle",e),i=r;break;case"input":ky(e,r),i=Yp(e,r),Se("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=Pe({},r,{value:void 0}),Se("invalid",e);break;case"textarea":Ey(e,r),i=Xp(e,r),Se("invalid",e);break;default:i=r}em(n,i),o=i;for(s in o)if(o.hasOwnProperty(s)){var l=o[s];s==="style"?Kk(e,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&Hk(e,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Gs(e,l):typeof l=="number"&&Gs(e,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Us.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Se("scroll",e):l!=null&&cv(e,s,l,a))}switch(n){case"input":Ra(e),Cy(e,r,!1);break;case"textarea":Ra(e),Ty(e);break;case"option":r.value!=null&&e.setAttribute("value",""+cr(r.value));break;case"select":e.multiple=!!r.multiple,s=r.value,s!=null?ki(e,!!r.multiple,s,!1):r.defaultValue!=null&&ki(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=Eo)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return at(t),null;case 6:if(e&&t.stateNode!=null)gE(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(L(166));if(n=Nr(na.current),Nr(hn.current),$a(t)){if(r=t.stateNode,n=t.memoizedProps,r[cn]=t,(s=r.nodeValue!==n)&&(e=jt,e!==null))switch(e.tag){case 3:Va(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Va(r.nodeValue,n,(e.mode&1)!==0)}s&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[cn]=t,t.stateNode=r}return at(t),null;case 13:if(_e(je),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ce&&Tt!==null&&t.mode&1&&!(t.flags&128))DC(),Ri(),t.flags|=98560,s=!1;else if(s=$a(t),r!==null&&r.dehydrated!==null){if(e===null){if(!s)throw Error(L(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(L(317));s[cn]=t}else Ri(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;at(t),s=!1}else Xt!==null&&(Dm(Xt),Xt=null),s=!0;if(!s)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||je.current&1?Ke===0&&(Ke=3):Hv())),t.updateQueue!==null&&(t.flags|=4),at(t),null);case 4:return Ii(),Tm(e,t),e===null&&Xs(t.stateNode.containerInfo),at(t),null;case 10:return Nv(t.type._context),at(t),null;case 17:return bt(t.type)&&To(),at(t),null;case 19:if(_e(je),s=t.memoizedState,s===null)return at(t),null;if(r=(t.flags&128)!==0,a=s.rendering,a===null)if(r)fs(s,!1);else{if(Ke!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(a=Io(e),a!==null){for(t.flags|=128,fs(s,!1),r=a.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)s=n,e=r,s.flags&=14680066,a=s.alternate,a===null?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=a.childLanes,s.lanes=a.lanes,s.child=a.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=a.memoizedProps,s.memoizedState=a.memoizedState,s.updateQueue=a.updateQueue,s.type=a.type,e=a.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return be(je,je.current&1|2),t.child}e=e.sibling}s.tail!==null&&Be()>Li&&(t.flags|=128,r=!0,fs(s,!1),t.lanes=4194304)}else{if(!r)if(e=Io(a),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),fs(s,!0),s.tail===null&&s.tailMode==="hidden"&&!a.alternate&&!Ce)return at(t),null}else 2*Be()-s.renderingStartTime>Li&&n!==1073741824&&(t.flags|=128,r=!0,fs(s,!1),t.lanes=4194304);s.isBackwards?(a.sibling=t.child,t.child=a):(n=s.last,n!==null?n.sibling=a:t.child=a,s.last=a)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=Be(),t.sibling=null,n=je.current,be(je,r?n&1|2:n&1),t):(at(t),null);case 22:case 23:return Gv(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?kt&1073741824&&(at(t),t.subtreeFlags&6&&(t.flags|=8192)):at(t),null;case 24:return null;case 25:return null}throw Error(L(156,t.tag))}function MR(e,t){switch(Cv(t),t.tag){case 1:return bt(t.type)&&To(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Ii(),_e(xt),_e(ct),Iv(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Av(t),null;case 13:if(_e(je),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(L(340));Ri()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return _e(je),null;case 4:return Ii(),null;case 10:return Nv(t.type._context),null;case 22:case 23:return Gv(),null;case 24:return null;default:return null}}var Ua=!1,lt=!1,PR=typeof WeakSet=="function"?WeakSet:Set,B=null;function gi(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Le(e,t,r)}else n.current=null}function jm(e,t,n){try{n()}catch(r){Le(e,t,r)}}var v0=!1;function RR(e,t){if(dm=_o,e=SC(),_v(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var a=0,o=-1,l=-1,u=0,c=0,d=e,h=null;t:for(;;){for(var m;d!==n||i!==0&&d.nodeType!==3||(o=a+i),d!==s||r!==0&&d.nodeType!==3||(l=a+r),d.nodeType===3&&(a+=d.nodeValue.length),(m=d.firstChild)!==null;)h=d,d=m;for(;;){if(d===e)break t;if(h===n&&++u===i&&(o=a),h===s&&++c===r&&(l=a),(m=d.nextSibling)!==null)break;d=h,h=d.parentNode}d=m}n=o===-1||l===-1?null:{start:o,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(fm={focusedElem:e,selectionRange:n},_o=!1,B=t;B!==null;)if(t=B,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,B=e;else for(;B!==null;){t=B;try{var g=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var p=g.memoizedProps,b=g.memoizedState,v=t.stateNode,y=v.getSnapshotBeforeUpdate(t.elementType===t.type?p:Qt(t.type,p),b);v.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var x=t.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(L(163))}}catch(_){Le(t,t.return,_)}if(e=t.sibling,e!==null){e.return=t.return,B=e;break}B=t.return}return g=v0,v0=!1,g}function Os(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,s!==void 0&&jm(t,n,s)}i=i.next}while(i!==r)}}function ll(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function Nm(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function yE(e){var t=e.alternate;t!==null&&(e.alternate=null,yE(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[cn],delete t[ea],delete t[mm],delete t[pR],delete t[mR])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function xE(e){return e.tag===5||e.tag===3||e.tag===4}function g0(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||xE(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Mm(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Eo));else if(r!==4&&(e=e.child,e!==null))for(Mm(e,t,n),e=e.sibling;e!==null;)Mm(e,t,n),e=e.sibling}function Pm(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(Pm(e,t,n),e=e.sibling;e!==null;)Pm(e,t,n),e=e.sibling}var Xe=null,Jt=!1;function Un(e,t,n){for(n=n.child;n!==null;)bE(e,t,n),n=n.sibling}function bE(e,t,n){if(fn&&typeof fn.onCommitFiberUnmount=="function")try{fn.onCommitFiberUnmount(el,n)}catch{}switch(n.tag){case 5:lt||gi(n,t);case 6:var r=Xe,i=Jt;Xe=null,Un(e,t,n),Xe=r,Jt=i,Xe!==null&&(Jt?(e=Xe,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Xe.removeChild(n.stateNode));break;case 18:Xe!==null&&(Jt?(e=Xe,n=n.stateNode,e.nodeType===8?yu(e.parentNode,n):e.nodeType===1&&yu(e,n),Ys(e)):yu(Xe,n.stateNode));break;case 4:r=Xe,i=Jt,Xe=n.stateNode.containerInfo,Jt=!0,Un(e,t,n),Xe=r,Jt=i;break;case 0:case 11:case 14:case 15:if(!lt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,a=s.destroy;s=s.tag,a!==void 0&&(s&2||s&4)&&jm(n,t,a),i=i.next}while(i!==r)}Un(e,t,n);break;case 1:if(!lt&&(gi(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){Le(n,t,o)}Un(e,t,n);break;case 21:Un(e,t,n);break;case 22:n.mode&1?(lt=(r=lt)||n.memoizedState!==null,Un(e,t,n),lt=r):Un(e,t,n);break;default:Un(e,t,n)}}function y0(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new PR),t.forEach(function(r){var i=$R.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Kt(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=e,a=t,o=a;e:for(;o!==null;){switch(o.tag){case 5:Xe=o.stateNode,Jt=!1;break e;case 3:Xe=o.stateNode.containerInfo,Jt=!0;break e;case 4:Xe=o.stateNode.containerInfo,Jt=!0;break e}o=o.return}if(Xe===null)throw Error(L(160));bE(s,a,i),Xe=null,Jt=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){Le(i,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)wE(t,e),t=t.sibling}function wE(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Kt(t,e),ln(e),r&4){try{Os(3,e,e.return),ll(3,e)}catch(p){Le(e,e.return,p)}try{Os(5,e,e.return)}catch(p){Le(e,e.return,p)}}break;case 1:Kt(t,e),ln(e),r&512&&n!==null&&gi(n,n.return);break;case 5:if(Kt(t,e),ln(e),r&512&&n!==null&&gi(n,n.return),e.flags&32){var i=e.stateNode;try{Gs(i,"")}catch(p){Le(e,e.return,p)}}if(r&4&&(i=e.stateNode,i!=null)){var s=e.memoizedProps,a=n!==null?n.memoizedProps:s,o=e.type,l=e.updateQueue;if(e.updateQueue=null,l!==null)try{o==="input"&&s.type==="radio"&&s.name!=null&&zk(i,s),tm(o,a);var u=tm(o,s);for(a=0;a<l.length;a+=2){var c=l[a],d=l[a+1];c==="style"?Kk(i,d):c==="dangerouslySetInnerHTML"?Hk(i,d):c==="children"?Gs(i,d):cv(i,c,d,u)}switch(o){case"input":Qp(i,s);break;case"textarea":Uk(i,s);break;case"select":var h=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var m=s.value;m!=null?ki(i,!!s.multiple,m,!1):h!==!!s.multiple&&(s.defaultValue!=null?ki(i,!!s.multiple,s.defaultValue,!0):ki(i,!!s.multiple,s.multiple?[]:"",!1))}i[ea]=s}catch(p){Le(e,e.return,p)}}break;case 6:if(Kt(t,e),ln(e),r&4){if(e.stateNode===null)throw Error(L(162));i=e.stateNode,s=e.memoizedProps;try{i.nodeValue=s}catch(p){Le(e,e.return,p)}}break;case 3:if(Kt(t,e),ln(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ys(t.containerInfo)}catch(p){Le(e,e.return,p)}break;case 4:Kt(t,e),ln(e);break;case 13:Kt(t,e),ln(e),i=e.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(zv=Be())),r&4&&y0(e);break;case 22:if(c=n!==null&&n.memoizedState!==null,e.mode&1?(lt=(u=lt)||c,Kt(t,e),lt=u):Kt(t,e),ln(e),r&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!c&&e.mode&1)for(B=e,c=e.child;c!==null;){for(d=B=c;B!==null;){switch(h=B,m=h.child,h.tag){case 0:case 11:case 14:case 15:Os(4,h,h.return);break;case 1:gi(h,h.return);var g=h.stateNode;if(typeof g.componentWillUnmount=="function"){r=h,n=h.return;try{t=r,g.props=t.memoizedProps,g.state=t.memoizedState,g.componentWillUnmount()}catch(p){Le(r,n,p)}}break;case 5:gi(h,h.return);break;case 22:if(h.memoizedState!==null){b0(d);continue}}m!==null?(m.return=h,B=m):b0(d)}c=c.sibling}e:for(c=null,d=e;;){if(d.tag===5){if(c===null){c=d;try{i=d.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(o=d.stateNode,l=d.memoizedProps.style,a=l!=null&&l.hasOwnProperty("display")?l.display:null,o.style.display=Wk("display",a))}catch(p){Le(e,e.return,p)}}}else if(d.tag===6){if(c===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(p){Le(e,e.return,p)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===e)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;d.sibling===null;){if(d.return===null||d.return===e)break e;c===d&&(c=null),d=d.return}c===d&&(c=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Kt(t,e),ln(e),r&4&&y0(e);break;case 21:break;default:Kt(t,e),ln(e)}}function ln(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(xE(n)){var r=n;break e}n=n.return}throw Error(L(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Gs(i,""),r.flags&=-33);var s=g0(e);Pm(e,s,i);break;case 3:case 4:var a=r.stateNode.containerInfo,o=g0(e);Mm(e,o,a);break;default:throw Error(L(161))}}catch(l){Le(e,e.return,l)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function AR(e,t,n){B=e,SE(e)}function SE(e,t,n){for(var r=(e.mode&1)!==0;B!==null;){var i=B,s=i.child;if(i.tag===22&&r){var a=i.memoizedState!==null||Ua;if(!a){var o=i.alternate,l=o!==null&&o.memoizedState!==null||lt;o=Ua;var u=lt;if(Ua=a,(lt=l)&&!u)for(B=i;B!==null;)a=B,l=a.child,a.tag===22&&a.memoizedState!==null?w0(i):l!==null?(l.return=a,B=l):w0(i);for(;s!==null;)B=s,SE(s),s=s.sibling;B=i,Ua=o,lt=u}x0(e)}else i.subtreeFlags&8772&&s!==null?(s.return=i,B=s):x0(e)}}function x0(e){for(;B!==null;){var t=B;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:lt||ll(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!lt)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:Qt(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&r0(t,s,r);break;case 3:var a=t.updateQueue;if(a!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}r0(t,a,n)}break;case 5:var o=t.stateNode;if(n===null&&t.flags&4){n=o;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var d=c.dehydrated;d!==null&&Ys(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(L(163))}lt||t.flags&512&&Nm(t)}catch(h){Le(t,t.return,h)}}if(t===e){B=null;break}if(n=t.sibling,n!==null){n.return=t.return,B=n;break}B=t.return}}function b0(e){for(;B!==null;){var t=B;if(t===e){B=null;break}var n=t.sibling;if(n!==null){n.return=t.return,B=n;break}B=t.return}}function w0(e){for(;B!==null;){var t=B;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{ll(4,t)}catch(l){Le(t,n,l)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(l){Le(t,i,l)}}var s=t.return;try{Nm(t)}catch(l){Le(t,s,l)}break;case 5:var a=t.return;try{Nm(t)}catch(l){Le(t,a,l)}}}catch(l){Le(t,t.return,l)}if(t===e){B=null;break}var o=t.sibling;if(o!==null){o.return=t.return,B=o;break}B=t.return}}var IR=Math.ceil,Oo=On.ReactCurrentDispatcher,$v=On.ReactCurrentOwner,Bt=On.ReactCurrentBatchConfig,de=0,Je=null,Ue=null,et=0,kt=0,yi=vr(0),Ke=0,aa=null,Fr=0,ul=0,Bv=0,qs=null,gt=null,zv=0,Li=1/0,wn=null,qo=!1,Rm=null,ar=null,Ga=!1,er=null,Fo=0,Fs=0,Am=null,fo=-1,ho=0;function ht(){return de&6?Be():fo!==-1?fo:fo=Be()}function or(e){return e.mode&1?de&2&&et!==0?et&-et:gR.transition!==null?(ho===0&&(ho=aC()),ho):(e=ge,e!==0||(e=window.event,e=e===void 0?16:hC(e.type)),e):1}function en(e,t,n,r){if(50<Fs)throw Fs=0,Am=null,Error(L(185));pa(e,n,r),(!(de&2)||e!==Je)&&(e===Je&&(!(de&2)&&(ul|=n),Ke===4&&Jn(e,et)),wt(e,r),n===1&&de===0&&!(t.mode&1)&&(Li=Be()+500,sl&&gr()))}function wt(e,t){var n=e.callbackNode;gP(e,t);var r=So(e,e===Je?et:0);if(r===0)n!==null&&My(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&My(n),t===1)e.tag===0?vR(S0.bind(null,e)):RC(S0.bind(null,e)),fR(function(){!(de&6)&&gr()}),n=null;else{switch(oC(r)){case 1:n=mv;break;case 4:n=iC;break;case 16:n=wo;break;case 536870912:n=sC;break;default:n=wo}n=ME(n,_E.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function _E(e,t){if(fo=-1,ho=0,de&6)throw Error(L(327));var n=e.callbackNode;if(Ni()&&e.callbackNode!==n)return null;var r=So(e,e===Je?et:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Vo(e,r);else{t=r;var i=de;de|=2;var s=CE();(Je!==e||et!==t)&&(wn=null,Li=Be()+500,Rr(e,t));do try{OR();break}catch(o){kE(e,o)}while(!0);jv(),Oo.current=s,de=i,Ue!==null?t=0:(Je=null,et=0,t=Ke)}if(t!==0){if(t===2&&(i=am(e),i!==0&&(r=i,t=Im(e,i))),t===1)throw n=aa,Rr(e,0),Jn(e,r),wt(e,Be()),n;if(t===6)Jn(e,r);else{if(i=e.current.alternate,!(r&30)&&!DR(i)&&(t=Vo(e,r),t===2&&(s=am(e),s!==0&&(r=s,t=Im(e,s))),t===1))throw n=aa,Rr(e,0),Jn(e,r),wt(e,Be()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(L(345));case 2:kr(e,gt,wn);break;case 3:if(Jn(e,r),(r&130023424)===r&&(t=zv+500-Be(),10<t)){if(So(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){ht(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=pm(kr.bind(null,e,gt,wn),t);break}kr(e,gt,wn);break;case 4:if(Jn(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var a=31-Zt(r);s=1<<a,a=t[a],a>i&&(i=a),r&=~s}if(r=i,r=Be()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*IR(r/1960))-r,10<r){e.timeoutHandle=pm(kr.bind(null,e,gt,wn),r);break}kr(e,gt,wn);break;case 5:kr(e,gt,wn);break;default:throw Error(L(329))}}}return wt(e,Be()),e.callbackNode===n?_E.bind(null,e):null}function Im(e,t){var n=qs;return e.current.memoizedState.isDehydrated&&(Rr(e,t).flags|=256),e=Vo(e,t),e!==2&&(t=gt,gt=n,t!==null&&Dm(t)),e}function Dm(e){gt===null?gt=e:gt.push.apply(gt,e)}function DR(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!tn(s(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Jn(e,t){for(t&=~Bv,t&=~ul,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Zt(t),r=1<<n;e[n]=-1,t&=~r}}function S0(e){if(de&6)throw Error(L(327));Ni();var t=So(e,0);if(!(t&1))return wt(e,Be()),null;var n=Vo(e,t);if(e.tag!==0&&n===2){var r=am(e);r!==0&&(t=r,n=Im(e,r))}if(n===1)throw n=aa,Rr(e,0),Jn(e,t),wt(e,Be()),n;if(n===6)throw Error(L(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,kr(e,gt,wn),wt(e,Be()),null}function Uv(e,t){var n=de;de|=1;try{return e(t)}finally{de=n,de===0&&(Li=Be()+500,sl&&gr())}}function Vr(e){er!==null&&er.tag===0&&!(de&6)&&Ni();var t=de;de|=1;var n=Bt.transition,r=ge;try{if(Bt.transition=null,ge=1,e)return e()}finally{ge=r,Bt.transition=n,de=t,!(de&6)&&gr()}}function Gv(){kt=yi.current,_e(yi)}function Rr(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,dR(n)),Ue!==null)for(n=Ue.return;n!==null;){var r=n;switch(Cv(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&To();break;case 3:Ii(),_e(xt),_e(ct),Iv();break;case 5:Av(r);break;case 4:Ii();break;case 13:_e(je);break;case 19:_e(je);break;case 10:Nv(r.type._context);break;case 22:case 23:Gv()}n=n.return}if(Je=e,Ue=e=lr(e.current,null),et=kt=t,Ke=0,aa=null,Bv=ul=Fr=0,gt=qs=null,jr!==null){for(t=0;t<jr.length;t++)if(n=jr[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var a=s.next;s.next=i,r.next=a}n.pending=r}jr=null}return e}function kE(e,t){do{var n=Ue;try{if(jv(),lo.current=Lo,Do){for(var r=Me.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Do=!1}if(qr=0,Qe=We=Me=null,Ls=!1,ra=0,$v.current=null,n===null||n.return===null){Ke=1,aa=t,Ue=null;break}e:{var s=e,a=n.return,o=n,l=t;if(t=et,o.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,c=o,d=c.tag;if(!(c.mode&1)&&(d===0||d===11||d===15)){var h=c.alternate;h?(c.updateQueue=h.updateQueue,c.memoizedState=h.memoizedState,c.lanes=h.lanes):(c.updateQueue=null,c.memoizedState=null)}var m=u0(a);if(m!==null){m.flags&=-257,c0(m,a,o,s,t),m.mode&1&&l0(s,u,t),t=m,l=u;var g=t.updateQueue;if(g===null){var p=new Set;p.add(l),t.updateQueue=p}else g.add(l);break e}else{if(!(t&1)){l0(s,u,t),Hv();break e}l=Error(L(426))}}else if(Ce&&o.mode&1){var b=u0(a);if(b!==null){!(b.flags&65536)&&(b.flags|=256),c0(b,a,o,s,t),Ev(Di(l,o));break e}}s=l=Di(l,o),Ke!==4&&(Ke=2),qs===null?qs=[s]:qs.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var v=oE(s,l,t);n0(s,v);break e;case 1:o=l;var y=s.type,x=s.stateNode;if(!(s.flags&128)&&(typeof y.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(ar===null||!ar.has(x)))){s.flags|=65536,t&=-t,s.lanes|=t;var _=lE(s,o,t);n0(s,_);break e}}s=s.return}while(s!==null)}TE(n)}catch(k){t=k,Ue===n&&n!==null&&(Ue=n=n.return);continue}break}while(!0)}function CE(){var e=Oo.current;return Oo.current=Lo,e===null?Lo:e}function Hv(){(Ke===0||Ke===3||Ke===2)&&(Ke=4),Je===null||!(Fr&268435455)&&!(ul&268435455)||Jn(Je,et)}function Vo(e,t){var n=de;de|=2;var r=CE();(Je!==e||et!==t)&&(wn=null,Rr(e,t));do try{LR();break}catch(i){kE(e,i)}while(!0);if(jv(),de=n,Oo.current=r,Ue!==null)throw Error(L(261));return Je=null,et=0,Ke}function LR(){for(;Ue!==null;)EE(Ue)}function OR(){for(;Ue!==null&&!lP();)EE(Ue)}function EE(e){var t=NE(e.alternate,e,kt);e.memoizedProps=e.pendingProps,t===null?TE(e):Ue=t,$v.current=null}function TE(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=MR(n,t),n!==null){n.flags&=32767,Ue=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Ke=6,Ue=null;return}}else if(n=NR(n,t,kt),n!==null){Ue=n;return}if(t=t.sibling,t!==null){Ue=t;return}Ue=t=e}while(t!==null);Ke===0&&(Ke=5)}function kr(e,t,n){var r=ge,i=Bt.transition;try{Bt.transition=null,ge=1,qR(e,t,n,r)}finally{Bt.transition=i,ge=r}return null}function qR(e,t,n,r){do Ni();while(er!==null);if(de&6)throw Error(L(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(L(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(yP(e,s),e===Je&&(Ue=Je=null,et=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Ga||(Ga=!0,ME(wo,function(){return Ni(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Bt.transition,Bt.transition=null;var a=ge;ge=1;var o=de;de|=4,$v.current=null,RR(e,n),wE(n,e),iR(fm),_o=!!dm,fm=dm=null,e.current=n,AR(n),uP(),de=o,ge=a,Bt.transition=s}else e.current=n;if(Ga&&(Ga=!1,er=e,Fo=i),s=e.pendingLanes,s===0&&(ar=null),fP(n.stateNode),wt(e,Be()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(qo)throw qo=!1,e=Rm,Rm=null,e;return Fo&1&&e.tag!==0&&Ni(),s=e.pendingLanes,s&1?e===Am?Fs++:(Fs=0,Am=e):Fs=0,gr(),null}function Ni(){if(er!==null){var e=oC(Fo),t=Bt.transition,n=ge;try{if(Bt.transition=null,ge=16>e?16:e,er===null)var r=!1;else{if(e=er,er=null,Fo=0,de&6)throw Error(L(331));var i=de;for(de|=4,B=e.current;B!==null;){var s=B,a=s.child;if(B.flags&16){var o=s.deletions;if(o!==null){for(var l=0;l<o.length;l++){var u=o[l];for(B=u;B!==null;){var c=B;switch(c.tag){case 0:case 11:case 15:Os(8,c,s)}var d=c.child;if(d!==null)d.return=c,B=d;else for(;B!==null;){c=B;var h=c.sibling,m=c.return;if(yE(c),c===u){B=null;break}if(h!==null){h.return=m,B=h;break}B=m}}}var g=s.alternate;if(g!==null){var p=g.child;if(p!==null){g.child=null;do{var b=p.sibling;p.sibling=null,p=b}while(p!==null)}}B=s}}if(s.subtreeFlags&2064&&a!==null)a.return=s,B=a;else e:for(;B!==null;){if(s=B,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Os(9,s,s.return)}var v=s.sibling;if(v!==null){v.return=s.return,B=v;break e}B=s.return}}var y=e.current;for(B=y;B!==null;){a=B;var x=a.child;if(a.subtreeFlags&2064&&x!==null)x.return=a,B=x;else e:for(a=y;B!==null;){if(o=B,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:ll(9,o)}}catch(k){Le(o,o.return,k)}if(o===a){B=null;break e}var _=o.sibling;if(_!==null){_.return=o.return,B=_;break e}B=o.return}}if(de=i,gr(),fn&&typeof fn.onPostCommitFiberRoot=="function")try{fn.onPostCommitFiberRoot(el,e)}catch{}r=!0}return r}finally{ge=n,Bt.transition=t}}return!1}function _0(e,t,n){t=Di(n,t),t=oE(e,t,1),e=sr(e,t,1),t=ht(),e!==null&&(pa(e,1,t),wt(e,t))}function Le(e,t,n){if(e.tag===3)_0(e,e,n);else for(;t!==null;){if(t.tag===3){_0(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ar===null||!ar.has(r))){e=Di(n,e),e=lE(t,e,1),t=sr(t,e,1),e=ht(),t!==null&&(pa(t,1,e),wt(t,e));break}}t=t.return}}function FR(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=ht(),e.pingedLanes|=e.suspendedLanes&n,Je===e&&(et&n)===n&&(Ke===4||Ke===3&&(et&130023424)===et&&500>Be()-zv?Rr(e,0):Bv|=n),wt(e,t)}function jE(e,t){t===0&&(e.mode&1?(t=Da,Da<<=1,!(Da&130023424)&&(Da=4194304)):t=1);var n=ht();e=An(e,t),e!==null&&(pa(e,t,n),wt(e,n))}function VR(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),jE(e,n)}function $R(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(L(314))}r!==null&&r.delete(t),jE(e,n)}var NE;NE=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||xt.current)yt=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return yt=!1,jR(e,t,n);yt=!!(e.flags&131072)}else yt=!1,Ce&&t.flags&1048576&&AC(t,Mo,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;co(e,t),e=t.pendingProps;var i=Pi(t,ct.current);ji(t,n),i=Lv(null,t,r,e,i,n);var s=Ov();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,bt(r)?(s=!0,jo(t)):s=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Pv(t),i.updater=ol,t.stateNode=i,i._reactInternals=t,wm(t,r,e,n),t=km(null,t,r,!0,s,n)):(t.tag=0,Ce&&s&&kv(t),ft(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(co(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=zR(r),e=Qt(r,e),i){case 0:t=_m(null,t,r,e,n);break e;case 1:t=h0(null,t,r,e,n);break e;case 11:t=d0(null,t,r,e,n);break e;case 14:t=f0(null,t,r,Qt(r.type,e),n);break e}throw Error(L(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Qt(r,i),_m(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Qt(r,i),h0(e,t,r,i,n);case 3:e:{if(fE(t),e===null)throw Error(L(387));r=t.pendingProps,s=t.memoizedState,i=s.element,FC(e,t),Ao(t,r,null,n);var a=t.memoizedState;if(r=a.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){i=Di(Error(L(423)),t),t=p0(e,t,r,n,i);break e}else if(r!==i){i=Di(Error(L(424)),t),t=p0(e,t,r,n,i);break e}else for(Tt=ir(t.stateNode.containerInfo.firstChild),jt=t,Ce=!0,Xt=null,n=OC(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ri(),r===i){t=In(e,t,n);break e}ft(e,t,r,n)}t=t.child}return t;case 5:return VC(t),e===null&&ym(t),r=t.type,i=t.pendingProps,s=e!==null?e.memoizedProps:null,a=i.children,hm(r,i)?a=null:s!==null&&hm(r,s)&&(t.flags|=32),dE(e,t),ft(e,t,a,n),t.child;case 6:return e===null&&ym(t),null;case 13:return hE(e,t,n);case 4:return Rv(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Ai(t,null,r,n):ft(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Qt(r,i),d0(e,t,r,i,n);case 7:return ft(e,t,t.pendingProps,n),t.child;case 8:return ft(e,t,t.pendingProps.children,n),t.child;case 12:return ft(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,s=t.memoizedProps,a=i.value,be(Po,r._currentValue),r._currentValue=a,s!==null)if(tn(s.value,a)){if(s.children===i.children&&!xt.current){t=In(e,t,n);break e}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var o=s.dependencies;if(o!==null){a=s.child;for(var l=o.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=jn(-1,n&-n),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),xm(s.return,n,t),o.lanes|=n;break}l=l.next}}else if(s.tag===10)a=s.type===t.type?null:s.child;else if(s.tag===18){if(a=s.return,a===null)throw Error(L(341));a.lanes|=n,o=a.alternate,o!==null&&(o.lanes|=n),xm(a,n,t),a=s.sibling}else a=s.child;if(a!==null)a.return=s;else for(a=s;a!==null;){if(a===t){a=null;break}if(s=a.sibling,s!==null){s.return=a.return,a=s;break}a=a.return}s=a}ft(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,ji(t,n),i=zt(i),r=r(i),t.flags|=1,ft(e,t,r,n),t.child;case 14:return r=t.type,i=Qt(r,t.pendingProps),i=Qt(r.type,i),f0(e,t,r,i,n);case 15:return uE(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Qt(r,i),co(e,t),t.tag=1,bt(r)?(e=!0,jo(t)):e=!1,ji(t,n),aE(t,r,i),wm(t,r,i,n),km(null,t,r,!0,e,n);case 19:return pE(e,t,n);case 22:return cE(e,t,n)}throw Error(L(156,t.tag))};function ME(e,t){return rC(e,t)}function BR(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function $t(e,t,n,r){return new BR(e,t,n,r)}function Wv(e){return e=e.prototype,!(!e||!e.isReactComponent)}function zR(e){if(typeof e=="function")return Wv(e)?1:0;if(e!=null){if(e=e.$$typeof,e===fv)return 11;if(e===hv)return 14}return 2}function lr(e,t){var n=e.alternate;return n===null?(n=$t(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function po(e,t,n,r,i,s){var a=2;if(r=e,typeof e=="function")Wv(e)&&(a=1);else if(typeof e=="string")a=5;else e:switch(e){case li:return Ar(n.children,i,s,t);case dv:a=8,i|=8;break;case Gp:return e=$t(12,n,t,i|2),e.elementType=Gp,e.lanes=s,e;case Hp:return e=$t(13,n,t,i),e.elementType=Hp,e.lanes=s,e;case Wp:return e=$t(19,n,t,i),e.elementType=Wp,e.lanes=s,e;case Vk:return cl(n,i,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case qk:a=10;break e;case Fk:a=9;break e;case fv:a=11;break e;case hv:a=14;break e;case Kn:a=16,r=null;break e}throw Error(L(130,e==null?e:typeof e,""))}return t=$t(a,n,t,i),t.elementType=e,t.type=r,t.lanes=s,t}function Ar(e,t,n,r){return e=$t(7,e,r,t),e.lanes=n,e}function cl(e,t,n,r){return e=$t(22,e,r,t),e.elementType=Vk,e.lanes=n,e.stateNode={isHidden:!1},e}function Eu(e,t,n){return e=$t(6,e,null,t),e.lanes=n,e}function Tu(e,t,n){return t=$t(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function UR(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ou(0),this.expirationTimes=ou(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ou(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Kv(e,t,n,r,i,s,a,o,l){return e=new UR(e,t,n,o,l),t===1?(t=1,s===!0&&(t|=8)):t=0,s=$t(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Pv(s),e}function GR(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:oi,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function PE(e){if(!e)return dr;e=e._reactInternals;e:{if(Br(e)!==e||e.tag!==1)throw Error(L(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(bt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(L(171))}if(e.tag===1){var n=e.type;if(bt(n))return PC(e,n,t)}return t}function RE(e,t,n,r,i,s,a,o,l){return e=Kv(n,r,!0,e,i,s,a,o,l),e.context=PE(null),n=e.current,r=ht(),i=or(n),s=jn(r,i),s.callback=t??null,sr(n,s,i),e.current.lanes=i,pa(e,i,r),wt(e,r),e}function dl(e,t,n,r){var i=t.current,s=ht(),a=or(i);return n=PE(n),t.context===null?t.context=n:t.pendingContext=n,t=jn(s,a),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=sr(i,t,a),e!==null&&(en(e,i,a,s),oo(e,i,a)),a}function $o(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function k0(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Yv(e,t){k0(e,t),(e=e.alternate)&&k0(e,t)}function HR(){return null}var AE=typeof reportError=="function"?reportError:function(e){console.error(e)};function Qv(e){this._internalRoot=e}fl.prototype.render=Qv.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(L(409));dl(e,t,null,null)};fl.prototype.unmount=Qv.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Vr(function(){dl(null,e,null,null)}),t[Rn]=null}};function fl(e){this._internalRoot=e}fl.prototype.unstable_scheduleHydration=function(e){if(e){var t=cC();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Qn.length&&t!==0&&t<Qn[n].priority;n++);Qn.splice(n,0,e),n===0&&fC(e)}};function Jv(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function hl(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function C0(){}function WR(e,t,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var u=$o(a);s.call(u)}}var a=RE(t,r,e,0,null,!1,!1,"",C0);return e._reactRootContainer=a,e[Rn]=a.current,Xs(e.nodeType===8?e.parentNode:e),Vr(),a}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var o=r;r=function(){var u=$o(l);o.call(u)}}var l=Kv(e,0,!1,null,null,!1,!1,"",C0);return e._reactRootContainer=l,e[Rn]=l.current,Xs(e.nodeType===8?e.parentNode:e),Vr(function(){dl(t,l,n,r)}),l}function pl(e,t,n,r,i){var s=n._reactRootContainer;if(s){var a=s;if(typeof i=="function"){var o=i;i=function(){var l=$o(a);o.call(l)}}dl(t,a,e,i)}else a=WR(n,t,e,i,r);return $o(a)}lC=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=bs(t.pendingLanes);n!==0&&(vv(t,n|1),wt(t,Be()),!(de&6)&&(Li=Be()+500,gr()))}break;case 13:Vr(function(){var r=An(e,1);if(r!==null){var i=ht();en(r,e,1,i)}}),Yv(e,1)}};gv=function(e){if(e.tag===13){var t=An(e,134217728);if(t!==null){var n=ht();en(t,e,134217728,n)}Yv(e,134217728)}};uC=function(e){if(e.tag===13){var t=or(e),n=An(e,t);if(n!==null){var r=ht();en(n,e,t,r)}Yv(e,t)}};cC=function(){return ge};dC=function(e,t){var n=ge;try{return ge=e,t()}finally{ge=n}};rm=function(e,t,n){switch(t){case"input":if(Qp(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=il(r);if(!i)throw Error(L(90));Bk(r),Qp(r,i)}}}break;case"textarea":Uk(e,n);break;case"select":t=n.value,t!=null&&ki(e,!!n.multiple,t,!1)}};Jk=Uv;Xk=Vr;var KR={usingClientEntryPoint:!1,Events:[va,fi,il,Yk,Qk,Uv]},hs={findFiberByHostInstance:Tr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},YR={bundleType:hs.bundleType,version:hs.version,rendererPackageName:hs.rendererPackageName,rendererConfig:hs.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:On.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=tC(e),e===null?null:e.stateNode},findFiberByHostInstance:hs.findFiberByHostInstance||HR,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ha=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ha.isDisabled&&Ha.supportsFiber)try{el=Ha.inject(YR),fn=Ha}catch{}}Rt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=KR;Rt.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Jv(t))throw Error(L(200));return GR(e,t,null,n)};Rt.createRoot=function(e,t){if(!Jv(e))throw Error(L(299));var n=!1,r="",i=AE;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=Kv(e,1,!1,null,null,n,!1,r,i),e[Rn]=t.current,Xs(e.nodeType===8?e.parentNode:e),new Qv(t)};Rt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(L(188)):(e=Object.keys(e).join(","),Error(L(268,e)));return e=tC(t),e=e===null?null:e.stateNode,e};Rt.flushSync=function(e){return Vr(e)};Rt.hydrate=function(e,t,n){if(!hl(t))throw Error(L(200));return pl(null,e,t,!0,n)};Rt.hydrateRoot=function(e,t,n){if(!Jv(e))throw Error(L(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",a=AE;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),t=RE(t,null,e,1,n??null,i,!1,s,a),e[Rn]=t.current,Xs(e),r)for(e=0;e<r.length;e++)n=r[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new fl(t)};Rt.render=function(e,t,n){if(!hl(t))throw Error(L(200));return pl(null,e,t,!1,n)};Rt.unmountComponentAtNode=function(e){if(!hl(e))throw Error(L(40));return e._reactRootContainer?(Vr(function(){pl(null,null,e,!1,function(){e._reactRootContainer=null,e[Rn]=null})}),!0):!1};Rt.unstable_batchedUpdates=Uv;Rt.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!hl(n))throw Error(L(200));if(e==null||e._reactInternals===void 0)throw Error(L(38));return pl(e,t,n,!1,r)};Rt.version="18.3.1-next-f1338f8080-20240426";function IE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(IE)}catch(e){console.error(e)}}IE(),Ik.exports=Rt;var QR=Ik.exports,E0=QR;zp.createRoot=E0.createRoot,zp.hydrateRoot=E0.hydrateRoot;const JR="modulepreload",XR=function(e){return"/agent-director/"+e},T0={},Xv=function(t,n,r){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),o=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));i=Promise.allSettled(n.map(l=>{if(l=XR(l),l in T0)return;T0[l]=!0;const u=l.endsWith(".css"),c=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${c}`))return;const d=document.createElement("link");if(d.rel=u?"stylesheet":JR,u||(d.as="script"),d.crossOrigin="",d.href=l,o&&d.setAttribute("nonce",o),document.head.appendChild(d),u)return new Promise((h,m)=>{d.addEventListener("load",h),d.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${l}`)))})}))}function s(a){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a}return i.then(a=>{for(const o of a||[])o.status==="rejected"&&s(o.reason);return t().catch(s)})},ZR=()=>f.jsxs("svg",{className:"logo-mark",width:"54",height:"54",viewBox:"0 0 120 120",role:"img","aria-label":"Agent Director logo",children:[f.jsx("rect",{x:"8",y:"8",width:"104",height:"104",rx:"18",className:"logo-frame"}),f.jsx("rect",{x:"24",y:"28",width:"72",height:"16",rx:"6",className:"logo-bar logo-bar-a"}),f.jsx("rect",{x:"24",y:"52",width:"72",height:"16",rx:"6",className:"logo-bar logo-bar-b"}),f.jsx("rect",{x:"24",y:"76",width:"72",height:"16",rx:"6",className:"logo-bar logo-bar-c"}),f.jsx("circle",{cx:"96",cy:"36",r:"6",className:"logo-node logo-node-a"}),f.jsx("circle",{cx:"96",cy:"60",r:"6",className:"logo-node logo-node-b"}),f.jsx("circle",{cx:"96",cy:"84",r:"6",className:"logo-node logo-node-c"})]});function eA({trace:e,traces:t=[],selectedTraceId:n,onSelectTrace:r,onReload:i,onStartTour:s,onToggleStory:a,onOpenPalette:o,onToggleExplain:l,onShareSession:u,onThemeChange:c,themeMode:d="studio",activeSessions:h=1,shareStatus:m=null,explainMode:g=!1,storyActive:p=!1}){return f.jsxs("header",{className:"header","data-help":!0,"data-help-indicator":!0,"data-tour":"header","data-help-title":"Mission control","data-help-body":"Trace identity, status, and live controls live here. Use Story, Guide, or Explain to orient new viewers.","data-help-placement":"bottom",children:[f.jsxs("div",{className:"header-title",children:[f.jsxs("div",{className:"header-logo",children:[f.jsx(ZR,{}),f.jsx("span",{children:"Agent Director"})]}),f.jsx("div",{className:"header-tagline",children:"Cinematic trace intelligence for agent runs."}),f.jsxs("div",{className:"header-meta",children:[f.jsxs("span",{className:"header-run",children:["Run: ",(e==null?void 0:e.id)??"loading"]}),t.length>0?f.jsx("select",{className:"trace-select",value:n??(e==null?void 0:e.id)??"","aria-label":"Select trace",onChange:b=>r==null?void 0:r(b.target.value),"data-help":!0,"data-help-title":"Trace selector","data-help-body":"Switch between available runs to compare different sessions.","data-help-placement":"bottom",children:t.map(b=>f.jsxs("option",{value:b.id,children:[b.name," (",b.id,")"]},b.id))}):null,f.jsx("span",{className:`status-pill status-${(e==null?void 0:e.status)??"loading"}`,children:(e==null?void 0:e.status)??"loading"}),e!=null&&e.replay?f.jsxs("span",{className:"header-replay",title:`Replay from ${e.branchPointStepId??"unknown step"}`,children:["Replay: ",e.replay.strategy]}):null,f.jsxs("span",{className:"header-wall",children:["Wall: ",(e==null?void 0:e.metadata.wallTimeMs)??0,"ms"]}),f.jsxs("span",{className:"header-presence","aria-label":"Active sessions",children:["Live: ",h]}),m?f.jsx("span",{className:"header-share-status",children:m}):null]})]}),f.jsxs("div",{className:"header-actions",children:[f.jsxs("label",{className:"theme-picker",children:["Theme",f.jsxs("select",{className:"trace-select",value:d,"aria-label":"Select theme",onChange:b=>c==null?void 0:c(b.target.value),children:[f.jsx("option",{value:"studio",children:"Studio"}),f.jsx("option",{value:"focus",children:"Focus"}),f.jsx("option",{value:"contrast",children:"Contrast"})]})]}),f.jsx("button",{className:`ghost-button ${p?"active":""}`,type:"button",onClick:a,"aria-pressed":p,"aria-label":"Toggle story mode","data-help":!0,"data-help-title":"Story mode","data-help-body":"Auto-runs a cinematic walkthrough for demos.","data-help-placement":"bottom",children:"Story"}),f.jsx("button",{className:"ghost-button",type:"button",onClick:s,"aria-label":"Start guided tour","data-help":!0,"data-help-title":"Guided tour","data-help-body":"Walk through the interface step by step.","data-help-placement":"bottom",children:"Guide"}),f.jsx("button",{className:"ghost-button",type:"button",onClick:o,"aria-label":"Open command palette","data-help":!0,"data-help-title":"Command palette","data-help-body":"Search and trigger any action instantly.","data-help-placement":"bottom",children:"Command"}),f.jsx("button",{className:`ghost-button ${g?"active":""}`,type:"button",onClick:l,"aria-pressed":g,"aria-label":"Toggle explain mode","data-help":!0,"data-help-title":"Explain mode","data-help-body":"Hover any control to see contextual guidance.","data-help-placement":"bottom",children:"Explain"}),f.jsx("button",{className:"ghost-button",onClick:i,type:"button","aria-label":"Refresh traces",title:"Refresh traces","data-help":!0,"data-help-title":"Refresh","data-help-body":"Reload traces from the data store.","data-help-placement":"bottom",children:"Refresh"}),f.jsx("button",{className:"ghost-button",type:"button",onClick:u,"aria-label":"Copy live session link",title:"Copy live session link",children:"Share"}),f.jsx("a",{className:"ghost-button",href:"/help.html",target:"_blank",rel:"noreferrer","data-help":!0,"data-help-title":"Help","data-help-body":"Open quick docs for first run, key flows, troubleshooting, and shortcuts.","data-help-placement":"bottom",children:"Help"}),null]})]})}function tA({insights:e,investigation:t,onSelectStep:n,onJumpToBottleneck:r,onJumpToError:i}){var h,m,g,p,b;if(!e)return null;const s=e.timing,a=e.ioWarnings??[],o=e.concurrency,l=e.retryPatterns,u=e.costByTool??{},c=e.costByModel??{},d=((h=t==null?void 0:t.hypotheses)==null?void 0:h.slice(0,2))??[];return f.jsxs("section",{className:"insight-strip","data-help":!0,"data-help-indicator":!0,"data-tour":"insights","data-help-title":"Run insights","data-help-body":"Fast diagnostics for latency, cost, errors, and concurrency. Click chips to jump into the trace.","data-help-placement":"bottom",children:[f.jsxs("div",{className:"insight-block","data-help":!0,"data-help-title":"Top latency","data-help-body":"Largest steps by duration; jump straight to the slowest.","data-help-placement":"bottom",children:[f.jsx("span",{className:"insight-label",children:"Top latency"}),f.jsxs("div",{className:"insight-items",children:[e.topLatencySteps.map(v=>f.jsxs("button",{className:"insight-chip",type:"button",title:`Jump to ${v.name}`,onClick:()=>n==null?void 0:n(v.stepId),children:[v.name," (",v.durationMs,"ms)"]},v.stepId)),e.topLatencySteps.length>0?f.jsx("button",{className:"insight-chip",type:"button",onClick:r,title:"Jump to longest step",children:"Jump to bottleneck"}):null]})]}),f.jsxs("div",{className:"insight-block","data-help":!0,"data-help-title":"Cost by type","data-help-body":"Aggregated spend by step class.","data-help-placement":"bottom",children:[f.jsx("span",{className:"insight-label",children:"Cost by type"}),f.jsx("div",{className:"insight-items",children:Object.entries(e.costByType).map(([v,y])=>f.jsxs("span",{className:"insight-chip",title:`Total cost for ${v}`,children:[v,": $",y.toFixed(3)]},v))})]}),Object.keys(u).length?f.jsxs("div",{className:"insight-block","data-help":!0,"data-help-title":"Cost by tool","data-help-body":"Top tools by total spend.","data-help-placement":"bottom",children:[f.jsx("span",{className:"insight-label",children:"Cost by tool"}),f.jsx("div",{className:"insight-items",children:Object.entries(u).sort((v,y)=>y[1]-v[1]).slice(0,3).map(([v,y])=>f.jsxs("span",{className:"insight-chip",title:`Total cost for ${v}`,children:[v,": $",y.toFixed(3)]},v))})]}):null,f.jsxs("div",{className:"insight-block","data-help":!0,"data-help-title":"Errors & retries","data-help-body":"Instant visibility into failed or retried steps.","data-help-placement":"bottom",children:[f.jsx("span",{className:"insight-label",children:"Errors / retries"}),f.jsxs("div",{className:"insight-items",children:[f.jsxs("span",{className:"insight-chip",children:["Errors: ",e.errors]}),f.jsxs("span",{className:"insight-chip",children:["Retries: ",e.retries]}),e.errors>0?f.jsx("button",{className:"insight-chip",type:"button",onClick:i,title:"Jump to first error",children:"Jump to first error"}):null,(m=l==null?void 0:l.topRetries)!=null&&m.length?f.jsxs("span",{className:"insight-chip",title:`Retry rate ${(l.retryRate*100).toFixed(1)}%`,children:["Top retries: ",l.topRetries.length]}):null]})]}),f.jsxs("div",{className:"insight-block","data-help":!0,"data-help-title":"Wall vs work","data-help-body":"Wall time vs summed work to show parallelism.","data-help-placement":"bottom",children:[f.jsx("span",{className:"insight-label",children:"Wall vs work"}),f.jsxs("div",{className:"insight-items",children:[f.jsxs("span",{className:"insight-chip",title:"Wall clock duration",children:["Wall: ",e.wallTimeMs,"ms"]}),f.jsxs("span",{className:"insight-chip",title:"Sum of step durations",children:["Work: ",e.workTimeMs,"ms"]}),e.criticalPathMs!=null?f.jsxs("span",{className:"insight-chip",title:"Longest parent-child chain",children:["Critical: ",e.criticalPathMs,"ms"]}):null]})]}),f.jsxs("div",{className:"insight-block","data-help":!0,"data-help-title":"Health","data-help-body":"Timing and I/O anomalies detected in the trace.","data-help-placement":"bottom",children:[f.jsx("span",{className:"insight-label",children:"Health"}),f.jsxs("div",{className:"insight-items",children:[s!=null&&s.degraded?f.jsx("span",{className:"insight-chip insight-warning",title:s.issues.join(" "),children:"Timing degraded"}):f.jsx("span",{className:"insight-chip",children:"Timing OK"}),a.length>0?f.jsxs("span",{className:"insight-chip insight-warning",title:a.map(v=>v.message).join(" "),children:["IO warnings: ",a.length]}):f.jsx("span",{className:"insight-chip",children:"IO OK"})]})]}),d.length?f.jsxs("div",{className:"insight-block","data-help":!0,"data-help-title":"Investigator","data-help-body":"Automated root-cause hypotheses ranked by severity and confidence.","data-help-placement":"bottom",children:[f.jsx("span",{className:"insight-label",children:"Investigator"}),f.jsxs("div",{className:"insight-items",children:[d.map(v=>f.jsxs("span",{className:"insight-chip",title:v.summary,children:[v.title," (",Math.round(v.confidence*100),"%)"]},v.id)),(p=(g=d[0])==null?void 0:g.evidenceStepIds)!=null&&p[0]?f.jsx("button",{className:"insight-chip",type:"button",onClick:()=>n==null?void 0:n(d[0].evidenceStepIds[0]),children:"Jump to evidence"}):null]})]}):null,(b=o==null?void 0:o.buckets)!=null&&b.length?f.jsxs("div",{className:"insight-block","data-help":!0,"data-help-title":"Parallelism","data-help-body":"How many steps ran concurrently over time.","data-help-placement":"bottom",children:[f.jsx("span",{className:"insight-label",children:"Parallelism"}),f.jsx("div",{className:"insight-items",children:f.jsx("div",{className:"insight-heatmap",title:`Peak concurrency: ${o.peak}`,children:o.buckets.map((v,y)=>f.jsx("span",{className:"heatmap-bar",style:{height:`${Math.max(20,v.active/Math.max(1,o.peak)*48)}px`},title:`Bucket ${y+1}: ${v.active} active`},`${v.startMs}-${v.endMs}`))})})]}):null,Object.keys(c).length?f.jsxs("div",{className:"insight-block","data-help":!0,"data-help-title":"Model cost","data-help-body":"Spend by model family.","data-help-placement":"bottom",children:[f.jsx("span",{className:"insight-label",children:"Model cost"}),f.jsx("div",{className:"insight-items",children:Object.entries(c).map(([v,y])=>f.jsxs("span",{className:"insight-chip",title:`Total cost for ${v}`,children:[v,": $",y.toFixed(3)]},v))})]}):null]})}const nA=["all","llm_call","tool_call","decision","handoff","guardrail"];function rA({query:e,typeFilter:t,onQueryChange:n,onTypeFilterChange:r}){return f.jsxs("div",{className:"search-bar",children:[f.jsx("input",{className:"search-input",placeholder:"Search steps, tools, previews...","aria-label":"Search steps",value:e,onChange:i=>n(i.target.value),"data-help":!0,"data-help-title":"Search","data-help-body":"Filter steps by name, tool, or payload preview. Great for fast recall.","data-help-placement":"bottom"}),f.jsx("select",{className:"search-select",value:t,"aria-label":"Filter by step type",onChange:i=>r(i.target.value),"data-help":!0,"data-help-title":"Type filter","data-help-body":"Narrow the timeline to a specific class of steps (LLM, tool, decision, handoff).","data-help-placement":"bottom",children:nA.map(i=>f.jsx("option",{value:i,children:i},i))})]})}function ml(e,t,n){const r=Date.parse(e),i=n.map(c=>Date.parse(c.endedAt??c.startedAt)).filter(c=>Number.isFinite(c)),s=t?Date.parse(t):i.length?Math.max(...i):r,a=Math.max(1,s-r),o=n.map(c=>{const d=Math.max(0,Date.parse(c.startedAt)-r),h=Math.max(d,Date.parse(c.endedAt??c.startedAt)-r);return{stepId:c.id,startMs:d,endMs:h}}).sort((c,d)=>c.startMs-d.startMs||c.endMs-d.endMs),l=[],u=[];for(const c of o){let d=l.findIndex(h=>h<=c.startMs);d===-1?(d=l.length,l.push(c.endMs)):l[d]=c.endMs,u.push({stepId:c.stepId,startMs:c.startMs,endMs:c.endMs,lane:d,xPct:c.startMs/a*100,wPct:Math.max(.75,(c.endMs-c.startMs)/a*100)})}return{wallTimeMs:a,intervals:u,laneCount:l.length}}function iA(e){var g;const n=e.steps.map(p=>({stepId:p.id,name:p.name,durationMs:p.durationMs??0})).sort((p,b)=>b.durationMs-p.durationMs).slice(0,3),r={},i={};for(const p of e.steps)((g=p.metrics)==null?void 0:g.costUsd)!=null&&(r[p.type]=(r[p.type]??0)+p.metrics.costUsd,p.type==="tool_call"&&(i[p.name]=(i[p.name]??0)+p.metrics.costUsd));const s=e.steps.filter(p=>p.status==="failed").length,a=e.steps.filter(p=>!!p.retryOfStepId).length,o=e.metadata.wallTimeMs,l=e.metadata.workTimeMs??e.steps.reduce((p,b)=>p+(b.durationMs??0),0),u=aA(e),c=oA(e.steps),d=lA(e.steps),h=uA(e),m=cA(e.steps);return{topLatencySteps:n,costByType:r,costByTool:i,costByModel:{[e.metadata.modelId]:e.metadata.totalCostUsd??0},errors:s,retries:a,wallTimeMs:o,workTimeMs:l,timing:u,ioWarnings:c,criticalPathMs:d,concurrency:h,retryPatterns:m}}function sA(e){var n;const t=(n=e.metrics)==null?void 0:n.costUsd;return t==null?null:`$${t.toFixed(3)}`}function _n(e){if(!e)return null;const t=Date.parse(e);return Number.isNaN(t)?null:t}function aA(e){const t=_n(e.startedAt),n=_n(e.endedAt??void 0),r=[],i=[],s=[];return t==null&&s.push("Trace start time missing or invalid."),e.steps.forEach(a=>{const o=_n(a.startedAt),l=_n(a.endedAt??a.startedAt);if(o==null||l==null){r.push(a.id);return}if(l<o){i.push(a.id);return}t!=null&&o<t&&i.push(a.id),n!=null&&l>n&&i.push(a.id)}),r.length&&s.push(`Missing timestamps on ${r.length} steps.`),i.length&&s.push(`Timestamp skew detected on ${i.length} steps.`),{degraded:!!(r.length||i.length||t==null),issues:s,missingStepIds:r,skewedStepIds:i}}function oA(e){const t=new Map;e.forEach(s=>{s.type==="tool_call"&&s.toolCallId&&t.set(s.toolCallId,s)});const n=new Set,r=new Set,i=[];return e.forEach(s=>{s.type!=="llm_call"||!s.io||((s.io.emittedToolCallIds??[]).forEach(a=>{n.add(a),t.has(a)||i.push({kind:"missing_tool_step",message:`Emitted toolCallId ${a} has no tool step.`,stepId:s.id,toolCallId:a})}),(s.io.consumedToolCallIds??[]).forEach(a=>{r.add(a),t.has(a)||i.push({kind:"missing_tool_step",message:`Consumed toolCallId ${a} has no tool step.`,stepId:s.id,toolCallId:a}),n.has(a)||i.push({kind:"consume_without_emit",message:`Consumed toolCallId ${a} without emission.`,stepId:s.id,toolCallId:a})}))}),t.forEach((s,a)=>{n.has(a)||i.push({kind:"unemitted_tool",message:`Tool step ${s.id} has toolCallId ${a} never emitted.`,stepId:s.id,toolCallId:a}),r.has(a)||i.push({kind:"unconsumed_tool",message:`Tool step ${s.id} has toolCallId ${a} never consumed.`,stepId:s.id,toolCallId:a})}),i}function lA(e){const t=new Map,n=new Map,r=[];e.forEach(a=>{if(t.set(a.id,a.durationMs??0),a.parentStepId){const o=n.get(a.parentStepId)??[];o.push(a.id),n.set(a.parentStepId,o)}else r.push(a.id)});const i=new Map,s=a=>{if(i.has(a))return i.get(a)??0;const l=(n.get(a)??[]).reduce((c,d)=>Math.max(c,s(d)),0),u=(t.get(a)??0)+l;return i.set(a,u),u};return r.length?Math.max(...r.map(a=>s(a))):0}function uA(e){const t=_n(e.startedAt);if(t==null)return{buckets:[],peak:0};const n=_n(e.endedAt??void 0)??Math.max(...e.steps.map(l=>_n(l.endedAt??l.startedAt)??t),t),r=Math.max(1,n-t),i=12,s=Math.max(1,Math.floor(r/i)),a=[];let o=0;for(let l=0;l<i;l+=1){const u=t+l*s,c=u+s;let d=0;e.steps.forEach(h=>{const m=_n(h.startedAt),g=_n(h.endedAt??h.startedAt);m==null||g==null||g>=u&&m<=c&&(d+=1)}),o=Math.max(o,d),a.push({startMs:l*s,endMs:(l+1)*s,active:d})}return{buckets:a,peak:o}}function cA(e){const t={};e.forEach(i=>{i.retryOfStepId&&(t[i.retryOfStepId]=(t[i.retryOfStepId]??0)+1)});const n=Object.values(t).reduce((i,s)=>i+s,0),r=Object.entries(t).sort((i,s)=>s[1]-i[1]).slice(0,3);return{totalRetries:n,retryRate:e.length?n/e.length:0,topRetries:r.map(([i,s])=>({stepId:i,count:s}))}}const dA={llm_call:{label:"LLM",icon:"LLM",description:"Model call"},tool_call:{label:"TOOL",icon:"TOOL",description:"Tool call"},decision:{label:"DEC",icon:"DEC",description:"Decision"},handoff:{label:"HAND",icon:"HAND",description:"Handoff"},guardrail:{label:"GUARD",icon:"GUARD",description:"Guardrail"}};function fA(e){return dA[e]}function hA({type:e,size:t="sm",showLabel:n=!1}){const r=fA(e);return f.jsxs("span",{className:`step-badge step-badge-${e} step-badge-${t}`,title:r.description,children:[f.jsx("span",{className:"step-badge-icon",children:r.icon}),n?f.jsx("span",{className:"step-badge-label",children:r.label}):null]})}function DE({step:e,interval:t,playbackState:n,selected:r,onSelect:i,variant:s="base",diffStatus:a,disabled:o=!1,laneHeight:l=140}){var _,k,E,j,T,M;const u=sA(e),c=((_=e.preview)==null?void 0:_.subtitle)??((k=e.preview)==null?void 0:k.title)??"",d=((E=e.preview)==null?void 0:E.outputPreview)??((j=e.preview)==null?void 0:j.inputPreview)??"",h=a?`step-diff-${a}`:"",m=s==="ghost"?"step-ghost":"",g=t.wPct<8?"step-compact":"",p=e.type.replace("_"," ").toUpperCase(),b=((T=e.metrics)==null?void 0:T.tokensTotal)!=null?`${e.metrics.tokensTotal} tokens`:null,v=e.durationMs!=null?`${e.durationMs}ms`:null,y=[b,v,u].filter(Boolean).join("  "),x=`Click to inspect inputs/outputs and replay from this moment.${y?` ${y}.`:""}`;return f.jsxs("button",{type:"button",className:`step-card step-${e.type} step-${n} ${r?"step-selected":""} ${h} ${m} ${g}`,"data-step-id":e.id,"aria-pressed":r,"aria-hidden":s==="ghost",disabled:o,"data-help":!0,"data-help-title":`${e.name}  ${p}`,"data-help-body":x,"data-help-placement":"top",style:{left:`${t.xPct}%`,width:`${t.wPct}%`,top:`${t.lane*l}px`},onClick:()=>{o||i(e.id)},children:[f.jsxs("div",{className:"step-card-header",children:[f.jsxs("div",{className:"step-title-group",children:[f.jsx(hA,{type:e.type}),f.jsx("span",{className:"step-title",children:e.name})]}),f.jsx("span",{className:`status-pill status-${e.status}`,children:e.status})]}),c?f.jsx("div",{className:"step-subtitle",children:c}):null,f.jsxs("div",{className:"step-metrics",children:[((M=e.metrics)==null?void 0:M.tokensTotal)!=null?f.jsxs("span",{children:[e.metrics.tokensTotal," tok"]}):null,e.durationMs!=null?f.jsxs("span",{children:[e.durationMs,"ms"]}):null,u?f.jsx("span",{children:u}):null]}),d?f.jsx("div",{className:"step-preview",children:d}):null]})}function LE(e,t){return t<e.startMs?"future":t>e.endMs?"past":"active"}const ps={type:{order:[],hidden:[]},status:{order:[],hidden:[]},parent:{order:[],hidden:[]}};function Zv(e,t){return t==="type"?e.type:t==="status"?e.status:e.parentStepId??"root"}function pA(e,t){const n=new Set;return e.forEach(r=>n.add(Zv(r,t))),Array.from(n).sort((r,i)=>r.localeCompare(i))}function j0(e,t,n){const r=new Set(e),i=[...t.filter(a=>r.has(a))];e.forEach(a=>{i.includes(a)||i.push(a)});const s=Array.from(new Set(n.filter(a=>r.has(a))));return{order:i,hidden:s}}const mA=140,vA=132,gA=96,N0={llm_call:1,tool_call:2,decision:3,handoff:4,guardrail:5};function OE(e){return[...e].sort((t,n)=>(N0[t.type]??9)-(N0[n.type]??9))}function yA(e,t,n,r,i){const s=new Map;t.forEach(h=>{var g;const m=Zv(h,n);s.has(m)||s.set(m,[]),(g=s.get(m))==null||g.push(h)});const a=Array.from(s.keys()),o=[...r.filter(h=>a.includes(h))];a.forEach(h=>{o.includes(h)||o.push(h)});const l=o.filter(h=>!i.includes(h)),u=new Map;let c=0,d=0;return l.forEach(h=>{const m=s.get(h)??[],g=ml(e.startedAt,e.endedAt,m);g.intervals.forEach(p=>{u.set(p.stepId,{...p,lane:p.lane+c})}),c+=Math.max(1,g.laneCount)}),d=Math.max(1,c),{intervalsByStepId:u,laneCount:d,visibleGroups:l}}function xA({trace:e,steps:t,selectedStepId:n,onSelectStep:r,playheadPct:i,playheadMs:s,windowRange:a,ghostTrace:o,diff:l,laneStrategy:u="type",laneGroupsOrder:c=[],hiddenLaneGroups:d=[],laneHeight:h=mA,cardHeight:m=vA,compactHeight:g=gA}){const{intervalsByStepId:p,laneCount:b}=yA(e,t,u,c,d),v=Array.from(p.values()),y=new Map(v.map(R=>[R.stepId,R])),x=OE(t),_=e.metadata.wallTimeMs||1,k=new Set((l==null?void 0:l.removedSteps)??[]),E=new Set((l==null?void 0:l.changedSteps)??[]),j=new Set(((l==null?void 0:l.changedPairs)??[]).map(R=>R.rightId)),T=new Set((l==null?void 0:l.addedSteps)??[]);let M=v;if(a){const R=a.endMs-a.startMs,H=Math.max(1e3,R*.15),Y=Math.max(0,a.startMs-H),pe=a.endMs+H;if(M=v.filter(F=>F.endMs>=Y&&F.startMs<=pe),n&&!M.some(F=>F.stepId===n)){const F=y.get(n);F&&(M=[...M,F])}}const D=new Set(M.map(R=>R.stepId));return f.jsx("div",{className:"timeline",style:{"--step-card-height":`${m}px`,"--step-compact-height":`${g}px`},children:f.jsxs("div",{className:"timeline-grid",style:{height:`${b*h}px`},"data-help":!0,"data-help-title":"Timeline lanes","data-help-body":"Each lane stacks overlapping steps; width reflects duration.","data-help-placement":"top",children:[f.jsx("div",{className:"playback-cursor",style:{left:`${i}%`}}),x.filter(R=>D.has(R.id)).filter(R=>!d.includes(Zv(R,u))).map(R=>{const H=y.get(R.id);if(!H)return null;const Y=LE(H,s);return f.jsx(DE,{step:R,interval:H,playbackState:Y,selected:n===R.id,diffStatus:k.has(R.id)?"removed":E.has(R.id)?"changed":null,laneHeight:h,onSelect:r},R.id)}),o?f.jsx(bA,{ghostTrace:o,baseWallTimeMs:_,playheadMs:s,windowRange:a,diffAdded:T,diffChanged:j,laneHeight:h}):null]})})}function bA({ghostTrace:e,baseWallTimeMs:t,playheadMs:n,windowRange:r,diffAdded:i,diffChanged:s,laneHeight:a}){const{intervals:o,laneCount:l}=ml(e.startedAt,e.endedAt,e.steps),u=new Map(o.map(p=>[p.stepId,p])),c=e.metadata.wallTimeMs||1,d=n/t*c;let h=o;if(r){const p=r.endMs-r.startMs,b=Math.max(1e3,p*.15),v=c/t,y=Math.max(0,(r.startMs-b)*v),x=Math.min(c,(r.endMs+b)*v);h=o.filter(_=>_.endMs>=y&&_.startMs<=x)}const m=new Set(h.map(p=>p.stepId)),g=OE(e.steps);return f.jsxs(f.Fragment,{children:[f.jsx("div",{className:"ghost-lanes",style:{height:`${l*a}px`}}),g.filter(p=>m.has(p.id)).map(p=>{const b=u.get(p.id);if(!b)return null;const v=LE(b,d),y=i.has(p.id)?"added":s.has(p.id)?"changed":null;return f.jsx(DE,{step:p,interval:b,playbackState:v,selected:!1,diffStatus:y,variant:"ghost",disabled:!0,laneHeight:a,onSelect:()=>{}},`ghost-${p.id}`)})]})}function wA({trace:e,steps:t,selectedStepId:n,onSelectStep:r,playheadMs:i,windowRange:s,timing:a,ghostTrace:o,diff:l,laneStrategy:u,laneGroupsOrder:c,hiddenLaneGroups:d,onLaneStrategyChange:h,onToggleLaneGroupVisibility:m,onMoveLaneGroup:g}){const p=e.metadata.wallTimeMs||1,b=Math.min(100,Math.max(0,i/p*100)),v=c.filter(y=>!d.includes(y)).length;return f.jsxs("section",{className:"cinema-mode","aria-label":"Cinema mode",children:[a!=null&&a.degraded?f.jsxs("div",{className:"timing-banner",title:a.issues.join(" "),children:["Timing degraded: ",a.issues[0]??"Check timestamps."]}):null,f.jsxs("div",{className:"timeline-studio-panel","data-help":!0,"data-help-title":"Timeline studio","data-help-body":"Regroup lanes by type/status/parent, hide noisy groups, and reorder emphasis.",children:[f.jsxs("label",{className:"timeline-studio-strategy",children:["Lane strategy",f.jsxs("select",{value:u,onChange:y=>h(y.target.value),children:[f.jsx("option",{value:"type",children:"Type"}),f.jsx("option",{value:"status",children:"Status"}),f.jsx("option",{value:"parent",children:"Parent branch"})]})]}),f.jsxs("div",{className:"timeline-studio-summary",children:[v,"/",c.length," groups visible"]}),f.jsx("div",{className:"timeline-studio-groups",children:c.map((y,x)=>{const _=d.includes(y);return f.jsxs("div",{className:`timeline-studio-group ${_?"is-hidden":""}`,children:[f.jsx("button",{type:"button",className:"ghost-button",onClick:()=>m(y),children:_?"Show":"Hide"}),f.jsx("span",{className:"timeline-studio-group-name",children:y}),f.jsx("button",{type:"button",className:"ghost-button",onClick:()=>g(y,"up"),disabled:x===0,children:"Up"}),f.jsx("button",{type:"button",className:"ghost-button",onClick:()=>g(y,"down"),disabled:x===c.length-1,children:"Down"})]},y)})})]}),f.jsx(xA,{trace:e,steps:t,selectedStepId:n,onSelectStep:r,playheadPct:b,playheadMs:i,windowRange:s,ghostTrace:o,diff:l,laneStrategy:u,laneGroupsOrder:c,hiddenLaneGroups:d})]})}const SA=[.5,1,1.5,2,4];function M0({playheadMs:e,wallTimeMs:t,isPlaying:n,speed:r,onToggle:i,onScrub:s,onSpeedChange:a}){const o=l=>{s(Number(l.target.value))};return f.jsxs("div",{className:"playback-controls",children:[f.jsx("button",{className:"ghost-button",type:"button",onClick:i,"aria-label":n?"Pause playback":"Play playback","data-help":!0,"data-help-title":"Playhead","data-help-body":"Start or pause the run to experience timing as it unfolded.","data-help-placement":"bottom",children:n?"Pause":"Play"}),f.jsx("input",{className:"playback-slider",type:"range",min:0,max:t,value:e,"aria-label":"Playback position",onChange:o,"data-help":!0,"data-help-title":"Scrub timeline","data-help-body":"Drag to jump to any moment in the run.","data-help-placement":"bottom"}),f.jsx("select",{className:"playback-speed",value:r,"aria-label":"Playback speed",onChange:l=>a(Number(l.target.value)),"data-help":!0,"data-help-title":"Speed","data-help-body":"Slow down to inspect or speed up to skim.","data-help-placement":"bottom",children:SA.map(l=>f.jsxs("option",{value:l,children:[l,"x"]},l))})]})}function _A(e,t,n,r=60){const{wallTimeMs:i,intervals:s}=ml(e,t,n),a=new Array(r).fill(0);if(!i)return{buckets:a,wallTimeMs:0};const o=i/r;return!Number.isFinite(o)||o<=0?{buckets:a,wallTimeMs:i}:(s.forEach(l=>{const u=Math.max(0,Math.floor(l.startMs/o)),c=Math.min(r-1,Math.floor(l.endMs/o));for(let d=u;d<=c;d+=1)a[d]+=1}),{buckets:a,wallTimeMs:i})}function Lm(e,t){const n=new Blob([JSON.stringify(t,null,2)],{type:"application/json"}),r=URL.createObjectURL(n),i=document.createElement("a");i.href=r,i.download=e,document.body.appendChild(i),i.click(),i.remove(),URL.revokeObjectURL(r)}function qE(e,t,n="text/plain"){const r=new Blob([t],{type:n}),i=URL.createObjectURL(r),s=document.createElement("a");s.href=i,s.download=e,document.body.appendChild(s),s.click(),s.remove(),URL.revokeObjectURL(i)}const ms=5e3,kA=32;function Ct(e,t,n){return Math.min(n,Math.max(t,e))}function ai(e,t){const n=new Set;return e.forEach(r=>{n.add(Ct(Math.round(r),0,t))}),Array.from(n).sort((r,i)=>r-i).slice(0,kA)}function CA(e,t){if(!e)return{bookmarksMs:[],clipStartMs:null,clipEndMs:null,segments:[]};try{const n=JSON.parse(e),r=ai(Array.isArray(n.bookmarksMs)?n.bookmarksMs:[],t),i=typeof n.clipStartMs=="number"?Ct(n.clipStartMs,0,t):null,s=typeof n.clipEndMs=="number"?Ct(n.clipEndMs,0,t):null,a=Array.isArray(n.segments)?n.segments.filter(o=>typeof(o==null?void 0:o.id)=="string"&&typeof(o==null?void 0:o.startMs)=="number"&&typeof(o==null?void 0:o.endMs)=="number"&&typeof(o==null?void 0:o.label)=="string").map(o=>({...o,startMs:Ct(o.startMs,0,t),endMs:Ct(o.endMs,0,t)})):[];return{bookmarksMs:r,clipStartMs:i,clipEndMs:i!=null&&s!=null&&s<i?i:s,segments:a}}catch{return{bookmarksMs:[],clipStartMs:null,clipEndMs:null,segments:[]}}}function P0(e,t){const n=Date.parse(e);return Number.isNaN(n)?null:new Date(n+t).toISOString()}function EA({traceStart:e,traceEnd:t,steps:n,playheadMs:r,windowRange:i,windowed:s,spanMs:a,onSpanChange:o,onToggleWindowed:l,onScrub:u,persistenceKey:c,laneStrategy:d="type",visibleLaneGroups:h=[],remotePlayheads:m=[]}){const{buckets:g,wallTimeMs:p}=_A(e,t,n,64),b=Math.max(1,...g),v=Ct(a,ms,Math.max(ms,p)),y=(i==null?void 0:i.startMs)??0,x=(i==null?void 0:i.endMs)??p,_=S.useMemo(()=>`agentDirector.timelineStudio.${c??e}`,[c,e]),[k,E]=S.useState([]),[j,T]=S.useState(null),[M,D]=S.useState(null),[R,H]=S.useState([]),[Y,pe]=S.useState("");S.useEffect(()=>{const O=CA(window.localStorage.getItem(_),p);E(O.bookmarksMs),T(O.clipStartMs),D(O.clipEndMs),H(O.segments)},[_,p]),S.useEffect(()=>{const O={bookmarksMs:ai(k,p),clipStartMs:j==null?null:Ct(j,0,p),clipEndMs:M==null?null:Ct(M,0,p),segments:R};window.localStorage.setItem(_,JSON.stringify(O))},[k,M,j,R,_,p]);const F=p?y/p*100:0,le=p?(x-y)/p*100:100,se=p?r/p*100:0,A=j!=null&&M!=null?Math.min(j,M):null,I=j!=null&&M!=null?Math.max(j,M):null,U=A!=null&&I!=null&&p?(I-A)/p*100:0,z=A!=null&&p?A/p*100:0,re=A!=null&&I!=null&&I>A,Te=O=>{const ee=O.currentTarget.getBoundingClientRect(),J=(O.clientX-ee.left)/ee.width,qe=Ct(Math.round(J*p),0,p);u(qe)},ue=O=>{if(O.key==="ArrowLeft"){O.preventDefault(),u(Ct(r-Math.max(250,Math.round(p*.02)),0,p));return}if(O.key==="ArrowRight"){O.preventDefault(),u(Ct(r+Math.max(250,Math.round(p*.02)),0,p));return}if(O.key==="Home"){O.preventDefault(),u(0);return}if(O.key==="End"){O.preventDefault(),u(p);return}(O.key===" "||O.key==="Enter")&&(O.preventDefault(),u(r))},me=()=>{E(O=>ai([...O,r],p))},xe=O=>{if(k.length===0)return;const ee=ai(k,p);if(O==="previous"){const qe=[...ee].reverse().find(te=>te<r)??ee[ee.length-1];u(qe);return}const J=ee.find(qe=>qe>r)??ee[0];u(J)},nt=()=>{const O=Ct(r,0,p);T(O),M!=null&&M<O&&D(O)},rt=()=>{const O=Ct(r,0,p);D(O),j!=null&&j>O&&T(O)},dt=()=>{T(null),D(null)},It=()=>{if(!re||A==null||I==null)return;const O=Y.trim()||`Scene ${R.length+1}`,ee=`segment-${Math.random().toString(36).slice(2,9)}`;H(J=>[...J,{id:ee,startMs:A,endMs:I,label:O}]),pe("")},gn=O=>{H(ee=>ee.filter(J=>J.id!==O))},Vn=()=>{if(!re||A==null||I==null)return;const O={type:"agent-director-clip",traceStart:e,traceEnd:t,clip:{startMs:A,endMs:I,startAt:P0(e,A),endAt:P0(e,I)},bookmarksMs:ai(k,p).filter(ee=>ee>=A&&ee<=I),playheadMs:r,laneContext:{strategy:d,visibleGroups:h},segments:R.filter(ee=>ee.endMs>=A&&ee.startMs<=I),exportedAt:new Date().toISOString()};Lm(`agent-director-clip-${A}-${I}.json`,O)};return f.jsxs("div",{className:"mini-timeline",children:[f.jsxs("div",{className:"mini-track",onClick:Te,role:"slider",tabIndex:0,"aria-label":"Timeline density map","aria-valuemin":0,"aria-valuemax":p,"aria-valuenow":r,"aria-valuetext":`${r} milliseconds`,onKeyDown:ue,"data-help":!0,"data-help-title":"Density map","data-help-body":"A compact view of activity density. Click to jump the playhead.","data-help-placement":"top",children:[f.jsx("div",{className:"mini-bars",children:g.map((O,ee)=>f.jsx("span",{className:"mini-bar",style:{height:`${O/b*100}%`}},`bucket-${ee}`))}),f.jsx("div",{className:"mini-window",style:{left:`${F}%`,width:`${le}%`,opacity:s?1:.4}}),re?f.jsx("div",{className:"mini-clip-window",style:{left:`${z}%`,width:`${U}%`}}):null,f.jsx("div",{className:"mini-bookmark-markers","data-testid":"timeline-bookmark-markers","aria-hidden":"true",children:ai(k,p).map(O=>{const ee=p?O/p*100:0;return f.jsx("button",{type:"button",className:"mini-bookmark-marker",style:{left:`${ee}%`},onClick:J=>{J.stopPropagation(),u(O)},title:`Jump to bookmark at ${O}ms`,"aria-label":`Bookmark ${O} milliseconds`},`bookmark-${O}`)})}),f.jsx("div",{className:"mini-remote-markers","aria-hidden":"true",children:m.map((O,ee)=>{const J=p?O/p*100:0;return f.jsx("span",{className:"mini-remote-marker",style:{left:`${J}%`}},`remote-${ee}`)})}),f.jsx("div",{className:"mini-segments","aria-hidden":"true",children:R.map(O=>{const ee=p?O.startMs/p*100:0,J=p?(O.endMs-O.startMs)/p*100:0;return f.jsx("span",{className:"mini-segment-bar",style:{left:`${ee}%`,width:`${Math.max(1,J)}%`},title:O.label},O.id)})}),f.jsx("div",{className:"mini-playhead",style:{left:`${se}%`}})]}),f.jsxs("div",{className:"mini-controls",children:[f.jsx("label",{className:"mini-label",children:"Zoom"}),f.jsx("input",{type:"range",min:ms,max:Math.max(ms,p),value:v,"aria-label":"Timeline zoom",onChange:O=>{l(!0),o(Number(O.target.value))},"data-help":!0,"data-help-title":"Zoom window","data-help-body":"Tighten the window to focus on hotspots.","data-help-placement":"top"}),f.jsx("button",{className:"ghost-button",type:"button",onClick:()=>l(!s),title:"Toggle windowed playback",children:s?"Full":"Window"}),f.jsx("button",{className:"ghost-button",type:"button",title:"Reset zoom",onClick:()=>{l(!0),o(Math.min(Math.max(p*.2,ms),6e4))},children:"Reset"}),f.jsx("button",{className:"ghost-button",type:"button",onClick:me,children:"Add bookmark"}),f.jsx("button",{className:"ghost-button",type:"button",onClick:()=>xe("previous"),children:"Previous bookmark"}),f.jsx("button",{className:"ghost-button",type:"button",onClick:()=>xe("next"),children:"Next bookmark"}),f.jsx("button",{className:"ghost-button",type:"button",onClick:nt,children:"Set clip start"}),f.jsx("button",{className:"ghost-button",type:"button",onClick:rt,children:"Set clip end"}),f.jsx("button",{className:"ghost-button",type:"button",onClick:dt,children:"Clear clip"}),f.jsx("input",{className:"search-input mini-segment-input",placeholder:"Segment label",value:Y,onChange:O=>pe(O.target.value),"aria-label":"Segment label"}),f.jsx("button",{className:"ghost-button",type:"button",onClick:It,disabled:!re,children:"Add segment"}),f.jsx("button",{className:"ghost-button",type:"button",onClick:Vn,disabled:!re,children:"Export clip"})]}),R.length?f.jsx("div",{className:"mini-segment-list",children:R.map(O=>f.jsxs("div",{className:"mini-segment-item",children:[f.jsxs("span",{children:[O.label," (",O.startMs,"ms - ",O.endMs,"ms)"]}),f.jsx("button",{className:"ghost-button",type:"button",onClick:()=>gn(O.id),children:"Remove"})]},O.id))}):null]})}const TA=[{keys:"Space",action:"Play / pause"},{keys:" / ",action:"Step boundary back / forward"},{keys:"Shift +  / ",action:"Jump to start / end"},{keys:"F",action:"Toggle Flow mode"},{keys:"I",action:"Toggle Inspector"},{keys:"S",action:"Story mode"},{keys:"E",action:"Explain mode"},{keys:"T",action:"Start tour"},{keys:"Cmd/Ctrl + K",action:"Open command palette"},{keys:"?",action:"Show shortcuts"},{keys:"Esc",action:"Close modal / inspector"}];function jA({open:e,onClose:t}){const n=S.useRef(null);if(S.useEffect(()=>{var i;e&&((i=n.current)==null||i.focus())},[e]),!e)return null;const r=i=>{var l;if(i.key==="Escape"){i.preventDefault(),t();return}if(i.key!=="Tab")return;const s=Array.from(i.currentTarget.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'));if(s.length===0)return;const a=s.indexOf(document.activeElement),o=i.shiftKey?a<=0?s.length-1:a-1:(a+1)%s.length;(l=s[o])==null||l.focus(),i.preventDefault()};return f.jsx("div",{className:"modal-backdrop",role:"dialog","aria-modal":"true","aria-labelledby":"shortcuts-title",onKeyDown:r,children:f.jsxs("div",{className:"modal",tabIndex:-1,children:[f.jsxs("div",{className:"modal-header",children:[f.jsx("div",{className:"modal-title",id:"shortcuts-title",children:"Keyboard Shortcuts"}),f.jsx("button",{className:"ghost-button",type:"button",onClick:t,ref:n,"aria-label":"Close shortcuts",children:"Close"})]}),f.jsx("div",{className:"modal-body",children:TA.map(i=>f.jsxs("div",{className:"modal-row",children:[f.jsx("span",{className:"modal-keys",children:i.keys}),f.jsx("span",{className:"modal-action",children:i.action})]},i.keys))})]})})}const NA=e=>e.trim().toLowerCase();function MA(e){const t=new Map;return e.forEach(n=>{var i;const r=n.group??"General";t.has(r)||t.set(r,[]),(i=t.get(r))==null||i.push(n)}),t}function R0(e,t,n){var i;if(!e.length)return 0;let r=t;for(let s=0;s<e.length;s+=1)if(r=(r+n+e.length)%e.length,!((i=e[r])!=null&&i.disabled))return r;return t}function PA({open:e,onClose:t,actions:n}){var p,b;const[r,i]=S.useState(""),[s,a]=S.useState(0),o=S.useRef(null),l=S.useRef(null),u=S.useMemo(()=>{const v=NA(r);return v?n.filter(y=>[y.label,y.description,y.group,y.keys].filter(Boolean).join(" ").toLowerCase().includes(v)):n},[n,r]),c=S.useMemo(()=>MA(u),[u]);if(S.useEffect(()=>{if(!e)return;i(""),a(0);const v=window.setTimeout(()=>{var y;return(y=o.current)==null?void 0:y.focus()},0);return()=>window.clearTimeout(v)},[e]),S.useEffect(()=>{s>=u.length&&a(0)},[s,u.length]),!e)return null;const d=v=>{v.disabled||(v.onTrigger(),t())},h=v=>{var y,x;if(v.key==="Escape"){v.preventDefault(),t();return}if(v.key==="ArrowDown"){v.preventDefault(),a(_=>R0(u,_,1));return}if(v.key==="ArrowUp"){v.preventDefault(),a(_=>R0(u,_,-1));return}if(v.key==="Enter"){v.preventDefault();const _=u[s];_&&d(_);return}if(v.key==="Tab"){const _=Array.from(((y=l.current)==null?void 0:y.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'))??[]);if(!_.length)return;const k=_.indexOf(document.activeElement),E=v.shiftKey?k<=0?_.length-1:k-1:(k+1)%_.length;(x=_[E])==null||x.focus(),v.preventDefault()}},m=(p=u[s])!=null&&p.id?`palette-option-${(b=u[s])==null?void 0:b.id}`:void 0;let g=-1;return f.jsx("div",{className:"modal-backdrop palette-backdrop",role:"dialog","aria-modal":"true","aria-label":"Command palette",onKeyDown:h,onMouseDown:v=>{v.target===v.currentTarget&&t()},children:f.jsxs("div",{className:"palette",ref:l,children:[f.jsxs("div",{className:"palette-header",children:[f.jsxs("div",{children:[f.jsx("div",{className:"palette-title",children:"Command palette"}),f.jsx("div",{className:"palette-subtitle",children:"Search actions, modes, and playbook steps."})]}),f.jsx("button",{className:"ghost-button",type:"button",onClick:t,"aria-label":"Close command palette",children:"Close"})]}),f.jsx("input",{ref:o,className:"palette-input",value:r,onChange:v=>i(v.target.value),placeholder:"Type to filter actions","aria-label":"Search commands",role:"combobox","aria-expanded":"true","aria-controls":"command-palette-list","aria-activedescendant":m,"aria-autocomplete":"list"}),f.jsxs("div",{className:"palette-list",role:"listbox",id:"command-palette-list",children:[u.length===0?f.jsx("div",{className:"palette-empty",children:"No matching commands."}):null,Array.from(c.entries()).map(([v,y])=>f.jsxs("div",{className:"palette-group",children:[f.jsx("div",{className:"palette-group-title",children:v}),f.jsx("div",{className:"palette-group-list",children:y.map(x=>{g+=1;const _=g===s;return f.jsxs("button",{id:`palette-option-${x.id}`,className:`palette-item ${_?"active":""}`,type:"button",role:"option","aria-selected":_,onMouseEnter:()=>a(g),onClick:()=>d(x),disabled:x.disabled,children:[f.jsxs("div",{className:"palette-item-main",children:[f.jsx("div",{className:"palette-item-title",children:x.label}),x.description?f.jsx("div",{className:"palette-item-description",children:x.description}):null]}),x.keys?f.jsx("div",{className:"palette-item-keys",children:x.keys}):null]},x.id)})})]},v))]})]})})}function RA(e){return e.length?e.reduce((t,n)=>(n.durationMs??0)>(t.durationMs??0)?n:t,e[0]):null}function AA({trace:e,mode:t,playheadMs:n,selectedStepId:r,compareTrace:i,collapsed:s,onToggleCollapsed:a,onModeChange:o,onSelectStep:l,onJumpToBottleneck:u,onReplay:c,onStartTour:d}){var T;const h=e.steps??[],m=RA(h),g=r??(m==null?void 0:m.id)??((T=h[0])==null?void 0:T.id)??null,p=t==="cinema"||n>0,b=!!r,v=!!i,y=[p,b,v].filter(Boolean).length,x=[p,b,v].findIndex(M=>!M),_=x===-1?2:x,k=[0,1,2].map(M=>[p,b,v][M]?"done":M===_?"active":"next"),E=[{id:"observe",title:"Act I: Observe",summary:"Scrub the timeline to feel the pacing, bottlenecks, and tool choreography.",status:k[0],actionLabel:"Enter cinema",action:()=>o("cinema"),tasks:[{label:"Scrub the timeline",done:n>0},{label:"Stay in Cinema mode",done:t==="cinema"}]},{id:"inspect",title:"Act II: Inspect",summary:"Open the most expensive or failed step and read the payload with context.",status:k[1],actionLabel:m?"Jump to bottleneck":"Select first step",action:()=>{if(r){o("cinema");return}if(m){u();return}g&&(l(g),o("cinema"))},disabled:!g,tasks:[{label:"Open the Inspector",done:!!r},{label:"Jump to the bottleneck",done:!!(m&&r===m.id)}]},{id:"direct",title:"Act III: Direct",summary:"Replay from a decisive step, then compare flows and diffs side-by-side.",status:k[2],actionLabel:i?"Open compare":"Replay from step",action:()=>{if(i){o("compare");return}g&&c(g)},disabled:!g,tasks:[{label:"Replay from a step",done:!!i},{label:"Compare runs side-by-side",done:!!(i&&t==="compare")}]}],j=E[_];return s?f.jsxs("section",{className:"journey-panel journey-collapsed","aria-label":"Director journey","data-help":!0,"data-help-indicator":!0,"data-tour":"journey","data-help-title":"Director journey","data-help-body":"A guided path from observation to replay. Use it to show newcomers what to do first.","data-help-placement":"bottom",children:[f.jsxs("div",{className:"journey-collapsed-main",children:[f.jsx("div",{className:"journey-eyebrow",children:"Director journey"}),f.jsx("div",{className:"journey-collapsed-title",children:"From observe to direct"})]}),f.jsxs("div",{className:"journey-collapsed-actions",children:[f.jsxs("span",{className:"journey-progress-text",children:[y,"/3 complete"]}),j?f.jsxs("button",{className:"primary-button journey-next",type:"button",onClick:j.action,disabled:j.disabled,children:["Next: ",j.actionLabel]}):null,d?f.jsx("button",{className:"ghost-button",type:"button",onClick:d,children:"Tour"}):null,f.jsx("button",{className:"primary-button journey-expand",type:"button",onClick:a,children:"Expand"})]})]}):f.jsxs("section",{className:"journey-panel","aria-label":"Director journey","data-help":!0,"data-help-indicator":!0,"data-tour":"journey","data-help-title":"Director journey","data-help-body":"A three-act flow that teaches the story: observe, inspect, direct. Each act jumps to the right place.","data-help-placement":"bottom",children:[f.jsxs("div",{className:"journey-head",children:[f.jsxs("div",{children:[f.jsx("div",{className:"journey-eyebrow",children:"Director journey"}),f.jsx("h2",{className:"journey-title",children:"Cut a perfect take in three acts."}),f.jsx("p",{className:"journey-subtitle",children:"Trace the performance, interrogate the moment, then direct a better run."})]}),f.jsxs("div",{className:"journey-head-actions",children:[d?f.jsx("button",{className:"ghost-button",type:"button",onClick:d,children:"Start tour"}):null,f.jsx("button",{className:"ghost-button",type:"button",onClick:a,children:"Collapse"})]})]}),f.jsx("div",{className:"journey-track",children:E.map((M,D)=>{var R;return f.jsxs("div",{className:"journey-card","data-status":M.status,children:[f.jsxs("div",{className:"journey-card-top",children:[f.jsxs("span",{className:"journey-index",children:["0",D+1]}),f.jsx("span",{className:"journey-status",children:M.status})]}),f.jsx("h3",{className:"journey-card-title",children:M.title}),f.jsx("p",{className:"journey-card-body",children:M.summary}),(R=M.tasks)!=null&&R.length?f.jsx("ul",{className:"journey-tasks",children:M.tasks.map(H=>f.jsxs("li",{className:`journey-task ${H.done?"done":""}`,children:[f.jsx("span",{className:"journey-task-icon","aria-hidden":"true",children:H.done?"":""}),f.jsx("span",{children:H.label})]},H.label))}):null,f.jsx("button",{className:"primary-button journey-action",type:"button",onClick:M.action,disabled:M.disabled,children:M.actionLabel})]},M.id)})}),f.jsxs("div",{className:"journey-footer",children:[f.jsxs("div",{children:[f.jsx("div",{className:"journey-progress-label",children:"Progress"}),f.jsx("div",{className:"journey-progress",children:f.jsx("span",{className:"journey-progress-bar",style:{width:`${y/3*100}%`}})})]}),f.jsx("div",{className:"journey-footnote",children:"Tip: Use Flow to spot fan-out, Compare to validate your changes."})]})]})}function IA(e){return e.length?e.reduce((t,n)=>(n.durationMs??0)>(t.durationMs??0)?n:t,e[0]):null}function DA({trace:e,mode:t,selectedStepId:n,onModeChange:r,onSelectStep:i,onJumpToBottleneck:s,onReplay:a,recommendations:o=[],persona:l="builder",annotations:u=[],activityFeed:c=[],onAddAnnotation:d,missionProgress:h={},missionCompletion:m,onResetMissions:g,narrative:p="",onAskDirector:b,onExportNarrative:v}){var A;const y=e.steps??[],x=IA(y),_=n??(x==null?void 0:x.id)??((A=y[0])==null?void 0:A.id)??null,k=e.metadata.wallTimeMs??0,E=l==="executive"?"Executive lens":l==="operator"?"Operator lens":"Builder lens",[j,T]=S.useState(""),[M,D]=S.useState(""),[R,H]=S.useState(""),Y=S.useMemo(()=>c.slice(0,6),[c]),pe=(m==null?void 0:m.done)??0,F=pe>=3||!!h.inspect,le=pe>=5||!!h.collaborate||Y.length>0,se=S.useMemo(()=>o.slice(0,3).map((I,U)=>({id:I.id,step:`${U+1}. ${I.actionLabel}  ${I.title}`})),[o]);return f.jsxs("aside",{className:"inspector inspector-empty","data-help":!0,"data-help-indicator":!0,"data-tour":"inspector","data-help-title":"Inspector panel","data-help-body":"Select a step to open detailed payloads, redaction controls, and replay actions.","data-help-placement":"left",children:[f.jsx("div",{className:"inspector-header",children:f.jsxs("div",{children:[f.jsx("div",{className:"inspector-title",children:"Director's notes"}),f.jsxs("div",{className:"inspector-subtitle",children:[E,". Select a step to open deep inspection."]})]})}),f.jsxs("div",{className:"inspector-section",children:[f.jsx("div",{className:"inspector-section-title",children:"Run summary"}),f.jsxs("div",{className:"inspector-row",children:[f.jsx("span",{children:"Steps"}),f.jsx("span",{children:y.length})]}),f.jsxs("div",{className:"inspector-row",children:[f.jsx("span",{children:"Wall time"}),f.jsxs("span",{children:[k,"ms"]})]}),f.jsxs("div",{className:"inspector-row",children:[f.jsx("span",{children:"Status"}),f.jsx("span",{children:e.status})]})]}),f.jsxs("div",{className:"inspector-section",children:[f.jsx("div",{className:"inspector-section-title",children:"Next actions"}),f.jsxs("div",{className:"director-actions",children:[f.jsx("button",{className:"primary-button",type:"button",onClick:()=>r("cinema"),"data-help":!0,"data-help-title":"Open cinema","data-help-body":"Jump straight into the timeline.","data-help-placement":"right",children:"Open cinema"}),f.jsx("button",{className:"ghost-button",type:"button",onClick:()=>r("flow"),"data-help":!0,"data-help-title":"Open flow","data-help-body":"See the dependency graph of the run.","data-help-placement":"right",children:"Switch to flow"}),f.jsx("button",{className:"ghost-button",type:"button",onClick:()=>{if(!n){if(x){s();return}_&&i(_)}},disabled:!_||!!n,"data-help":!0,"data-help-title":"Jump to bottleneck","data-help-body":"Select the slowest step for inspection.","data-help-placement":"right",children:n?"Inspector open":x?"Jump to bottleneck":"Select first step"}),f.jsx("button",{className:"ghost-button",type:"button",onClick:()=>_&&a(_),disabled:!_||!F,title:F?void 0:"Complete core missions to unlock replay guidance.","data-help":!0,"data-help-title":"Replay","data-help-body":"Branch a replay from a decisive step.","data-help-placement":"right",children:"Replay from step"})]})]}),f.jsxs("div",{className:"inspector-section",children:[f.jsx("div",{className:"inspector-section-title",children:"Mode"}),f.jsxs("div",{className:"director-modes",children:[f.jsx("button",{className:`ghost-button ${t==="cinema"?"active":""}`,type:"button",onClick:()=>r("cinema"),"data-help":!0,"data-help-title":"Cinema mode","data-help-body":"Timeline view for pacing and sequence.","data-help-placement":"right",children:"Cinema"}),f.jsx("button",{className:`ghost-button ${t==="flow"?"active":""}`,type:"button",onClick:()=>r("flow"),"data-help":!0,"data-help-title":"Flow mode","data-help-body":"Graph view for dependencies.","data-help-placement":"right",children:"Flow"}),f.jsx("button",{className:"ghost-button",type:"button",disabled:!0,children:"Compare"})]})]}),f.jsxs("div",{className:"inspector-section",children:[f.jsx("div",{className:"inspector-section-title",children:"Adaptive missions"}),f.jsxs("div",{className:"mission-summary",children:[(m==null?void 0:m.done)??0,"/",(m==null?void 0:m.total)??0," complete",f.jsxs("span",{children:[(m==null?void 0:m.pct)??0,"%"]})]}),f.jsxs("div",{className:"mission-stage",children:["Stage: ",le?"Collaboration":F?"Analysis":"Foundation"]}),f.jsx("div",{className:"mission-grid",children:Object.entries(h).map(([I,U])=>f.jsxs("div",{className:`mission-chip ${U?"done":""}`,children:[f.jsx("span",{children:I}),f.jsx("span",{children:U?"Done":"Pending"})]},I))}),f.jsx("button",{className:"ghost-button",type:"button",onClick:g,children:"Reset missions"})]}),F&&o.length?f.jsxs("div",{className:"inspector-section",children:[f.jsx("div",{className:"inspector-section-title",children:"Recommended next moves"}),f.jsx("div",{className:"director-recommendations",children:o.map(I=>f.jsxs("article",{className:`director-recommendation tone-${I.tone}`,children:[f.jsx("div",{className:"director-recommendation-title",children:I.title}),f.jsx("p",{className:"director-recommendation-body",children:I.body}),f.jsx("button",{className:"ghost-button",type:"button",onClick:I.action,children:I.actionLabel})]},I.id))})]}):null,f.jsxs("div",{className:"inspector-section",children:[f.jsx("div",{className:"inspector-section-title",children:"AI director narrative"}),F?f.jsxs(f.Fragment,{children:[f.jsx("p",{className:"director-recommendation-body",children:p}),se.length?f.jsx("div",{className:"director-guided-plan",children:se.map(I=>f.jsx("div",{children:I.step},I.id))}):null,f.jsxs("div",{className:"director-ask-row",children:[f.jsx("input",{className:"search-input",value:M,onChange:I=>D(I.target.value),placeholder:"Ask Director (e.g. what is highest risk?)","aria-label":"Ask director question"}),f.jsx("button",{className:"ghost-button",type:"button",onClick:()=>{M.trim()&&H((b==null?void 0:b(M))??"")},children:"Ask"})]}),R?f.jsx("div",{className:"director-answer",children:R}):null,f.jsx("button",{className:"ghost-button",type:"button",onClick:v,children:"Export narrative"})]}):f.jsx("div",{className:"annotation-empty",children:"Complete inspect/flow/replay missions to unlock AI narrative tools."})]}),f.jsxs("div",{className:"inspector-section",children:[f.jsx("div",{className:"inspector-section-title",children:"Shared annotations"}),f.jsx("textarea",{value:j,onChange:I=>T(I.target.value),rows:3,placeholder:n?"Add note for selected step...":"Add trace-level note...","aria-label":"Shared annotation"}),f.jsx("button",{className:"ghost-button",type:"button",onClick:()=>{const I=j.trim();I&&(d==null||d(I,n),T(""))},children:"Add annotation"}),f.jsxs("div",{className:"annotation-list",children:[u.slice(-6).reverse().map(I=>f.jsxs("article",{className:"annotation-item",children:[f.jsxs("div",{className:"annotation-meta",children:[f.jsx("span",{children:I.stepId?`step ${I.stepId}`:"trace"}),f.jsx("span",{children:I.authorSessionId})]}),f.jsx("p",{children:I.body})]},I.id)),u.length===0?f.jsx("div",{className:"annotation-empty",children:"No shared annotations yet."}):null]})]}),f.jsxs("div",{className:"inspector-section",children:[f.jsx("div",{className:"inspector-section-title",children:"Collab activity"}),le?f.jsxs("div",{className:"activity-list",children:[Y.map(I=>f.jsxs("div",{className:"activity-item",children:[f.jsx("span",{children:I.message}),f.jsx("span",{children:new Date(I.timestamp).toLocaleTimeString()})]},I.id)),Y.length===0?f.jsx("div",{className:"annotation-empty",children:"No activity yet."}):null]}):f.jsx("div",{className:"annotation-empty",children:"Open another live session to unlock collaboration activity feed."})]})]})}const ju=(e,t,n)=>Math.min(n,Math.max(t,e));function LA({steps:e,open:t,onClose:n,onComplete:r}){const[i,s]=S.useState(0),[a,o]=S.useState(null),[l,u]=S.useState(null),c=S.useRef(null),d=S.useRef(null),h=S.useRef(null),m=S.useMemo(()=>e[i],[e,i]),g=S.useCallback(()=>{if(!t)return;const _=document.querySelector(m.target);if(!_){d.current=null,o(null);return}d.current=_;const k=_.getBoundingClientRect();o(k)},[t,m.target]),p=S.useCallback(()=>{if(!a||!c.current){u(null);return}const _=c.current.offsetWidth,k=c.current.offsetHeight,E=16;let j=ju(a.left+a.width/2-_/2,E,window.innerWidth-_-E),T=a.bottom+16;m.placement==="top"&&(T=a.top-k-16),m.placement==="left"&&(j=a.left-_-16,T=a.top+a.height/2-k/2),m.placement==="right"&&(j=a.right+16,T=a.top+a.height/2-k/2),T+k>window.innerHeight-E&&(T=a.top-k-16),T<E&&(T=a.bottom+16),j=ju(j,E,window.innerWidth-_-E),T=ju(T,E,window.innerHeight-k-E),u({top:T,left:j})},[m.placement,a]);if(S.useEffect(()=>{t&&s(0)},[t]),S.useEffect(()=>{var k,E;if(!t){(E=(k=h.current)==null?void 0:k.focus)==null||E.call(k);return}h.current=document.activeElement;const _=window.setTimeout(()=>{var T,M;(M=((T=c.current)==null?void 0:T.querySelector('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'))??c.current)==null||M.focus()},0);return()=>window.clearTimeout(_)},[t]),S.useEffect(()=>{if(!t)return;const _=document.querySelector(m.target);_&&_.scrollIntoView({behavior:"smooth",block:"center",inline:"center"});const k=window.requestAnimationFrame(()=>g());return()=>window.cancelAnimationFrame(k)},[t,m.target,g]),S.useLayoutEffect(()=>{p()},[a,p,m.title]),S.useEffect(()=>{if(!t)return;const _=()=>{g(),p()};return window.addEventListener("resize",_),window.addEventListener("scroll",_,!0),()=>{window.removeEventListener("resize",_),window.removeEventListener("scroll",_,!0)}},[t,g,p]),!t||!m)return null;const b=_=>{var M,D;if(_.key==="Escape"){_.preventDefault(),n();return}if(_.key!=="Tab")return;const k=Array.from(((M=c.current)==null?void 0:M.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'))??[]);if(k.length===0)return;const E=document.activeElement,j=k.indexOf(E),T=_.shiftKey?j<=0?k.length-1:j-1:(j+1)%k.length;(D=k[T])==null||D.focus(),_.preventDefault()},v=`tour-title-${m.id}`,y=`tour-body-${m.id}`,x=a?{top:a.top-6,left:a.left-6,width:a.width+12,height:a.height+12}:void 0;return f.jsxs("div",{className:"tour-overlay",role:"dialog","aria-modal":"true","aria-label":"Guided tour","aria-labelledby":v,"aria-describedby":y,onKeyDown:b,children:[f.jsx("div",{className:"tour-backdrop",onClick:n}),a?f.jsx("div",{className:"tour-spotlight",style:x}):null,f.jsxs("div",{className:`tour-card ${l?"tour-card-anchored":""}`,ref:c,style:l??void 0,tabIndex:-1,children:[f.jsxs("div",{className:"tour-step",children:["Step ",i+1," of ",e.length]}),f.jsx("div",{className:"tour-title",id:v,children:m.title}),f.jsx("p",{className:"tour-body",id:y,children:m.body}),f.jsxs("div",{className:"tour-actions",children:[f.jsx("button",{className:"ghost-button",type:"button",onClick:()=>s(_=>Math.max(0,_-1)),disabled:i===0,children:"Back"}),f.jsx("button",{className:"ghost-button",type:"button",onClick:n,children:"Skip"}),i===e.length-1?f.jsx("button",{className:"primary-button",type:"button",onClick:r,children:"Finish tour"}):f.jsx("button",{className:"primary-button",type:"button",onClick:()=>s(_=>_+1),children:"Next"})]})]})]})}const A0=(e,t,n)=>Math.min(n,Math.max(t,e));function OA({enabled:e}){const[t,n]=S.useState(null),[r,i]=S.useState(null),s=S.useRef(null),a=S.useRef(null),o=S.useCallback(()=>{const u=s.current;if(!u){n(null);return}const c=u.getBoundingClientRect(),d=u.dataset.helpTitle??"Context",h=u.dataset.helpBody??"",m=u.dataset.helpPlacement??"right";n({rect:c,title:d,body:h,placement:m})},[]);S.useEffect(()=>{if(!e){s.current=null,n(null);return}const u=g=>{var b,v;const p=(v=(b=g.target)==null?void 0:b.closest)==null?void 0:v.call(b,"[data-help]");if(!p){s.current||n(null);return}s.current!==p&&(s.current=p,o())},c=g=>{var b,v;const p=(v=(b=g.target)==null?void 0:b.closest)==null?void 0:v.call(b,"[data-help]");p&&(s.current=p,o())},d=g=>{var b;const p=g.relatedTarget;(b=p==null?void 0:p.closest)!=null&&b.call(p,"[data-help]")||(s.current=null,n(null))},h=g=>{var b,v;const p=(v=(b=g.target)==null?void 0:b.closest)==null?void 0:v.call(b,"[data-help]");if(!p){s.current=null,n(null);return}s.current=p,o()},m=()=>{s.current&&o()};return window.addEventListener("mousemove",u),window.addEventListener("focusin",c),window.addEventListener("focusout",d),window.addEventListener("pointerdown",h),window.addEventListener("scroll",m,!0),window.addEventListener("resize",m),()=>{window.removeEventListener("mousemove",u),window.removeEventListener("focusin",c),window.removeEventListener("focusout",d),window.removeEventListener("pointerdown",h),window.removeEventListener("scroll",m,!0),window.removeEventListener("resize",m)}},[e,o]);const l=S.useCallback(()=>{if(!t||!a.current){i(null);return}const u=12,c=a.current.offsetWidth,d=a.current.offsetHeight,{rect:h,placement:m}=t;let g=h.right+16,p=h.top+h.height/2-d/2;m==="left"&&(g=h.left-c-16,p=h.top+h.height/2-d/2),m==="top"&&(g=h.left+h.width/2-c/2,p=h.top-d-16),m==="bottom"&&(g=h.left+h.width/2-c/2,p=h.bottom+16),g=A0(g,u,window.innerWidth-c-u),p=A0(p,u,window.innerHeight-d-u),i({left:g,top:p})},[t]);return S.useLayoutEffect(()=>{l()},[l]),!e||!t?null:f.jsxs("div",{className:"help-overlay","aria-hidden":"true",children:[f.jsx("div",{className:"help-highlight",style:{top:t.rect.top-6,left:t.rect.left-6,width:t.rect.width+12,height:t.rect.height+12}}),f.jsxs("div",{className:"help-bubble",ref:a,style:r??void 0,"data-placement":t.placement,children:[f.jsx("div",{className:"help-title",children:t.title}),f.jsx("div",{className:"help-body",children:t.body})]})]})}const qA=[{id:"builder",label:"Builder lens",body:"Focus on step payloads, execution paths, and replay control."},{id:"executive",label:"Executive lens",body:"Focus on bottlenecks, risk, and outcome-level run quality."},{id:"operator",label:"Operator lens",body:"Focus on failures, retries, and trace reliability posture."}];function FA({onComplete:e,onStartTour:t,onStartStory:n,persona:r="builder",onPersonaChange:i}){const s=()=>{t==null||t(),e()},a=()=>{n==null||n(),e()};return f.jsx("div",{className:"intro-overlay",role:"dialog","aria-modal":"true","aria-label":"Agent Director intro",children:f.jsxs("div",{className:"intro-card",children:[f.jsx("div",{className:"intro-scan"}),f.jsx("div",{className:"intro-title",children:"Agent Director"}),f.jsx("div",{className:"intro-tagline",children:"Watch your agent think. Then direct it."}),f.jsxs("div",{className:"intro-steps",children:[f.jsxs("div",{className:"intro-step",children:[f.jsx("div",{className:"intro-step-label",children:"Observe"}),f.jsx("div",{className:"intro-step-body",children:"Scrub the timeline to feel pacing and parallelism."})]}),f.jsxs("div",{className:"intro-step",children:[f.jsx("div",{className:"intro-step-label",children:"Inspect"}),f.jsx("div",{className:"intro-step-body",children:"Open the bottleneck to read payloads and costs."})]}),f.jsxs("div",{className:"intro-step",children:[f.jsx("div",{className:"intro-step-label",children:"Direct"}),f.jsx("div",{className:"intro-step-body",children:"Replay from a decisive step and compare runs."})]})]}),f.jsx("div",{className:"intro-personas",role:"group","aria-label":"Select onboarding lens",children:qA.map(o=>f.jsxs("button",{type:"button",className:`ghost-button intro-persona ${r===o.id?"active":""}`,onClick:()=>i==null?void 0:i(o.id),"aria-pressed":r===o.id,"aria-label":o.label,children:[f.jsx("span",{className:"intro-persona-label",children:o.label}),f.jsx("span",{className:"intro-persona-body",children:o.body})]},o.id))}),f.jsxs("div",{className:"intro-grid",children:[f.jsx("span",{}),f.jsx("span",{}),f.jsx("span",{}),f.jsx("span",{})]}),f.jsxs("div",{className:"intro-actions",children:[f.jsx("button",{className:"primary-button",type:"button",onClick:s,children:"Start guided tour"}),n?f.jsx("button",{className:"ghost-button",type:"button",onClick:a,children:"Play story mode"}):null,f.jsx("button",{className:"ghost-button",type:"button",onClick:e,children:"Skip intro"})]})]})})}function VA({explainMode:e,storyActive:t,onStartTour:n,onStartStory:r,onToggleExplain:i,onDismiss:s}){return f.jsxs("section",{className:"hero-ribbon","aria-label":"Director briefing","data-help":!0,"data-help-indicator":!0,"data-tour":"hero","data-help-title":"Director briefing","data-help-body":"Start the tour, play story mode, or enable explain to learn the interface instantly.","data-help-placement":"bottom",children:[f.jsxs("div",{className:"hero-ribbon-top",children:[f.jsx("span",{className:"hero-eyebrow",children:"Director briefing"}),f.jsx("button",{className:"ghost-button hero-dismiss",type:"button",onClick:s,children:"Dismiss"})]}),f.jsx("div",{className:"hero-title",children:"Observe. Inspect. Direct."}),f.jsx("div",{className:"hero-subtitle",children:"A cinematic control room for agent traces. See time, read structure, then replay with confidence."}),f.jsxs("div",{className:"hero-pills",children:[f.jsx("span",{className:"hero-pill","data-tone":"observe",children:"Observe"}),f.jsx("span",{className:"hero-pill","data-tone":"inspect",children:"Inspect"}),f.jsx("span",{className:"hero-pill","data-tone":"direct",children:"Direct"})]}),f.jsxs("div",{className:"hero-actions",children:[f.jsx("button",{className:"primary-button",type:"button",onClick:n,children:"Start guided tour"}),f.jsx("button",{className:"ghost-button",type:"button",onClick:r,disabled:t,children:t?"Story running":"Play story mode"}),f.jsxs("button",{className:`ghost-button ${e?"active":""}`,type:"button",onClick:i,"aria-pressed":e,children:["Explain ",e?"On":"Off"]})]})]})}function $A({mode:e,isPlaying:t,storyActive:n,explainMode:r,hidden:i=!1,open:s,onToggleOpen:a,onTogglePlay:o,onStartStory:l,onStopStory:u,onStartTour:c,onOpenPalette:d,onShowShortcuts:h,onToggleExplain:m,onJumpToBottleneck:g}){if(i)return null;const p=t?"Pause":"Play",b=n?"Stop story":"Story mode";return s?f.jsxs("aside",{className:"quick-actions","aria-label":"Quick actions","data-help":!0,"data-help-indicator":!0,"data-tour":"quick-actions","data-help-title":"Quick actions","data-help-body":"Launch story mode, open the command palette, or jump to the bottleneck instantly.","data-help-placement":"left",children:[f.jsxs("div",{className:"quick-actions-header",children:[f.jsxs("div",{children:[f.jsx("div",{className:"quick-actions-title",children:"Quick actions"}),f.jsx("div",{className:"quick-actions-subtitle",children:"Pin demo controls close at hand."})]}),f.jsx("button",{className:"ghost-button",type:"button",onClick:a,"aria-label":"Collapse quick actions",children:"Collapse"})]}),f.jsxs("button",{className:`quick-action ${t?"active":""}`,type:"button",onClick:o,"aria-label":p,"data-help":!0,"data-help-title":"Play or pause","data-help-body":"Start or stop playback from anywhere.","data-help-placement":"left",children:[f.jsx("span",{className:"quick-action-label",children:p}),f.jsx("span",{className:"quick-action-meta",children:e==="flow"?"Cinema":"Space"})]}),f.jsxs("button",{className:`quick-action ${n?"active":""}`,type:"button",onClick:n?u:l,"aria-label":b,"data-help":!0,"data-help-title":"Story mode","data-help-body":"Auto-runs a cinematic walkthrough of the run.","data-help-placement":"left",children:[f.jsx("span",{className:"quick-action-label",children:b}),f.jsx("span",{className:"quick-action-meta",children:"S"})]}),f.jsxs("button",{className:"quick-action",type:"button",onClick:d,"aria-label":"Open command palette","data-help":!0,"data-help-title":"Command palette","data-help-body":"Search every action and jump instantly.","data-help-placement":"left",children:[f.jsx("span",{className:"quick-action-label",children:"Command"}),f.jsx("span",{className:"quick-action-meta",children:"Cmd+K"})]}),f.jsxs("button",{className:"quick-action",type:"button",onClick:c,"aria-label":"Start guided tour","data-help":!0,"data-help-title":"Guided tour","data-help-body":"Walk the interface with a curated tour.","data-help-placement":"left",children:[f.jsx("span",{className:"quick-action-label",children:"Tour"}),f.jsx("span",{className:"quick-action-meta",children:"Guide"})]}),f.jsxs("button",{className:`quick-action ${r?"active":""}`,type:"button",onClick:m,"aria-label":"Toggle explain mode","data-help":!0,"data-help-title":"Explain mode","data-help-body":"Toggle contextual overlays for every control.","data-help-placement":"left",children:[f.jsx("span",{className:"quick-action-label",children:"Explain"}),f.jsx("span",{className:"quick-action-meta",children:r?"On":"Off"})]}),f.jsxs("button",{className:"quick-action",type:"button",onClick:g,"aria-label":"Jump to bottleneck","data-help":!0,"data-help-title":"Bottleneck jump","data-help-body":"Focus instantly on the slowest step.","data-help-placement":"left",children:[f.jsx("span",{className:"quick-action-label",children:"Bottleneck"}),f.jsx("span",{className:"quick-action-meta",children:"Latency"})]}),f.jsxs("button",{className:"quick-action",type:"button",onClick:h,"aria-label":"Show shortcuts","data-help":!0,"data-help-title":"Shortcuts","data-help-body":"See the full keyboard map.","data-help-placement":"left",children:[f.jsx("span",{className:"quick-action-label",children:"Shortcuts"}),f.jsx("span",{className:"quick-action-meta",children:"?"})]})]}):f.jsxs("button",{className:"quick-actions-toggle",type:"button",onClick:a,title:"Open quick actions","aria-expanded":"false","data-help":!0,"data-tour":"quick-actions","data-help-title":"Quick actions","data-help-body":"Open the dock to access demos, shortcuts, and instant actions.","data-help-placement":"left",children:[f.jsx("span",{className:"quick-actions-toggle-label",children:"Actions"}),f.jsx("span",{className:"quick-actions-toggle-meta",children:"Dock"})]})}function BA({active:e,label:t,step:n,total:r,onStop:i,onRestart:s}){if(!e)return null;const a=r>0?(n+1)/r*100:0;return f.jsxs("div",{className:"story-banner",role:"status","aria-live":"polite",children:[f.jsxs("div",{className:"story-banner-main",children:[f.jsx("div",{className:"story-banner-title",children:"Story mode"}),f.jsx("div",{className:"story-banner-step",children:t})]}),f.jsxs("div",{className:"story-banner-actions",children:[f.jsxs("span",{className:"story-banner-count",children:[Math.min(n+1,r),"/",r]}),f.jsx("button",{className:"ghost-button",type:"button",onClick:s,children:"Restart"}),f.jsx("button",{className:"primary-button",type:"button",onClick:i,children:"Stop"})]}),f.jsx("div",{className:"story-banner-progress",children:f.jsx("span",{style:{width:`${a}%`}})})]})}const FE=/token|secret|password|api[_-]?key|authorization|bearer|session|cookie|private|ssh|credentials/i;function eg(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}function zA(e){const t=[],n=new WeakSet,r=(i,s)=>{if(Array.isArray(i)){i.forEach((a,o)=>{r(a,`${s}[${o}]`)});return}eg(i)&&(n.has(i)||(n.add(i),Object.entries(i).forEach(([a,o])=>{const l=s?`${s}.${a}`:a;FE.test(a)&&t.push(l),r(o,l)})))};return r(e,""),t}function VE(e){const t=new WeakMap,n=r=>{if(Array.isArray(r))return r.map(s=>n(s));if(!eg(r))return r;if(t.has(r))return t.get(r);const i={};return t.set(r,i),Object.entries(r).forEach(([s,a])=>{FE.test(s)?i[s]="[REDACTED]":i[s]=n(a)}),i};return n(e)}function tg(e){return eg(e)}function I0(e){return e==null||Number.isNaN(e)?"n/a":e.toString()}function UA(e){return e==null||Number.isNaN(e)?"n/a":e.toFixed(3)}function GA(e,t){return t?VE(e):e}function HA({job:e,matrix:t,safeExport:n,sensitiveKeys:r,anchorStepName:i}){const s=t.rows.map(a=>({scenarioId:a.scenarioId,name:a.name,strategy:a.strategy,status:a.status,replayTraceId:a.replayTraceId,modifications:GA(a.modifications,n),error:a.error??null,changedStepIds:a.changedStepIds,addedStepIds:a.addedStepIds,removedStepIds:a.removedStepIds,metrics:a.metrics}));return{generatedAt:new Date().toISOString(),safeExport:n,redaction:{safeExport:n,sensitiveKeys:r,policy:n?"redacted":"raw"},job:e?{id:e.id,status:e.status,createdAt:e.createdAt,startedAt:e.startedAt??null,endedAt:e.endedAt??null,scenarioCount:e.scenarioCount,completedCount:e.completedCount,failedCount:e.failedCount,canceledCount:e.canceledCount}:null,base:{traceId:t.traceId,stepId:t.stepId,anchorStepName:i??null},rows:s,causalRanking:t.causalRanking}}function WA({job:e,matrix:t,safeExport:n,anchorStepName:r}){const i=[],s=new Date().toISOString();return i.push("# Counterfactual Replay Matrix"),i.push(""),i.push(`Generated: ${s}`),i.push(`Safe export: ${n?"on":"off"}`),i.push(""),i.push("## Base trace"),i.push(`- Trace: ${t.traceId}`),i.push(`- Anchor step: ${r??t.stepId}`),i.push(""),e&&(i.push("## Job status"),i.push(`- Job: ${e.id}`),i.push(`- Status: ${e.status}`),i.push(`- Scenarios: ${e.scenarioCount} (completed ${e.completedCount}, failed ${e.failedCount}, canceled ${e.canceledCount})`),i.push("")),i.push("## Scenario outcomes"),i.push("| Scenario | Status | Wall  (ms) | Cost  (USD) | Errors  | Changed |"),i.push("| --- | --- | --- | --- | --- | --- |"),t.rows.forEach(a=>{i.push(`| ${a.name} | ${a.status} | ${I0(a.metrics.wallTimeDeltaMs)} | ${UA(a.metrics.costDeltaUsd)} | ${I0(a.metrics.errorDelta)} | ${a.metrics.changedSteps} |`)}),i.push(""),i.push("## Causal ranking"),t.causalRanking.length?t.causalRanking.slice(0,10).forEach(a=>{i.push(`- ${a.factor}: score ${a.score.toFixed(3)}, confidence ${(a.confidence*100).toFixed(0)}% (samples ${a.evidence.samples})`)}):i.push("- No causal ranking available."),i.push(""),i.push("## Redaction"),i.push(`Safe export: ${n?"enabled":"disabled"}.`),i.push(""),i.join(`
`)}const D0=["recorded","live","hybrid"],Wa=25,vs=[{id:"prompt-tighten",label:"Prompt tighten",description:"Shorten or focus the assistant response",name:"Prompt tighter",strategy:"hybrid",modifications:{prompt:"Return concise response"}},{id:"tool-timeout",label:"Tool timeout",description:"Extend tool timeout for flaky calls",name:"Tool timeout 45s",strategy:"live",modifications:{toolTimeoutMs:45e3}},{id:"recorded-baseline",label:"Recorded baseline",description:"Pure recorded replay for determinism",name:"Recorded baseline",strategy:"recorded",modifications:{}}],Ka=[{id:"latency-sweep",label:"Latency sweep",description:"Evaluate timeout adjustments across three live variants.",scenarios:[{name:"Timeout 15s",strategy:"live",modifications:{toolTimeoutMs:15e3}},{name:"Timeout 30s",strategy:"live",modifications:{toolTimeoutMs:3e4}},{name:"Timeout 45s",strategy:"live",modifications:{toolTimeoutMs:45e3}}]},{id:"prompt-spectrum",label:"Prompt spectrum",description:"Compare concise, balanced, and verbose response shaping.",scenarios:[{name:"Concise prompt",strategy:"hybrid",modifications:{prompt:"Return concise response"}},{name:"Balanced prompt",strategy:"hybrid",modifications:{prompt:"Return balanced detail response"}},{name:"Verbose prompt",strategy:"hybrid",modifications:{prompt:"Return comprehensive detailed response"}}]}];function L0(e){return e??Number.POSITIVE_INFINITY}function Nu(){return`scenario-${Math.random().toString(36).slice(2,9)}`}function Mu(e){const t=e.trim();if(!t)return{value:{}};try{const n=JSON.parse(t);return tg(n)?{value:n}:{error:"Modifications must be a JSON object."}}catch{return{error:"Modifications must be valid JSON."}}}function oa(e,t=""){const n=[];return Object.entries(e).forEach(([r,i])=>{const s=t?`${t}.${r}`:r;if(typeof i=="string"||typeof i=="number"||typeof i=="boolean"||i==null){n.push({path:s,value:i});return}tg(i)&&n.push(...oa(i,s))}),n}function KA(e,t,n){const r=t.split(".").filter(Boolean);if(r.length===0)return e;const i=JSON.parse(JSON.stringify(e));let s=i;for(let a=0;a<r.length-1;a+=1){const o=r[a],l=s[o];tg(l)||(s[o]={}),s=s[o]}return s[r[r.length-1]]=n,i}function YA(e){const t=e.trim();if(t==="true")return!0;if(t==="false")return!1;if(t==="null")return null;const n=Number(t);return!Number.isNaN(n)&&t!==""?n:e}function O0(e,t){const n=new Map(oa(e).map(i=>[i.path,i.value]));return oa(t).filter(i=>n.get(i.path)!==i.value).map(i=>({path:i.path,from:n.get(i.path)??null,to:i.value}))}function QA(e){return e===null?"null":typeof e=="string"?"string":typeof e=="number"?"number":typeof e=="boolean"?"boolean":"unknown"}function JA(e){return`${e.strategy}::${JSON.stringify(e.modifications)}`}function XA(e){const t=new Map;return e.scenarios.forEach(n=>{oa(n.modifications).forEach(r=>{const i=t.get(r.path)??new Set;i.add(QA(r.value)),t.set(r.path,i)})}),Array.from(t.entries()).filter(([,n])=>n.size>1).map(([n])=>n)}function q0(e,t){const n=t.get(e);return n?n.name:e}function ZA({steps:e,anchorStepId:t,onAnchorStepChange:n,scenarios:r,onScenarioChange:i,onDuplicateScenario:s,onMoveScenario:a,onAddScenario:o,onRemoveScenario:l,onReplaceScenarios:u,onRun:c,onCancel:d,loading:h,error:m,job:g,matrix:p,safeExport:b,onOpenCompare:v}){var an,Qr,we,vt;const[y,x]=S.useState("wallTimeDeltaMs"),[_,k]=S.useState(!0),[E,j]=S.useState(null),[T,M]=S.useState(((an=vs[0])==null?void 0:an.id)??""),[D,R]=S.useState(((Qr=Ka[0])==null?void 0:Qr.id)??""),[H,Y]=S.useState(null),[pe,F]=S.useState(null),[le,se]=S.useState({}),[A,I]=S.useState(25),U=S.useRef(null),z=S.useMemo(()=>new Map(e.map(N=>[N.id,N])),[e]),re=S.useMemo(()=>{const N=r.map((G,$)=>G.name.trim()||`Scenario ${$+1}`),V=new Map;return N.forEach(G=>{const $=G.toLowerCase();V.set($,(V.get($)??0)+1)}),r.map((G,$)=>{const ve=N[$],Fe=ve.toLowerCase(),ce=Mu(G.modificationsText),it=[];ce.error&&it.push(ce.error),(V.get(Fe)??0)>1&&it.push(`Duplicate scenario name: ${ve}`);const Ye=ce.value??{},ae=ce.value?zA(ce.value):[];return{id:G.id,name:ve,parsedModifications:Ye,errors:it,sensitiveKeys:ae}})},[r]),Te=re.reduce((N,V)=>N+V.errors.length,0),ue=r.length>Wa?`Scenario limit exceeded (${r.length}/${Wa}).`:null,me=Te>0||!!ue,xe=ue||(Te>0?"Fix scenario errors before running.":null),nt=!h&&r.length>0&&!me,rt=S.useMemo(()=>{const V=[...(p==null?void 0:p.rows)??[]];return V.sort((G,$)=>{if(y==="name")return _?G.name.localeCompare($.name):$.name.localeCompare(G.name);if(y==="changedSteps"){const ce=G.metrics.changedSteps,it=$.metrics.changedSteps;return _?ce-it:it-ce}const ve=L0(G.metrics[y]),Fe=L0($.metrics[y]);return _?ve-Fe:Fe-ve}),V},[p==null?void 0:p.rows,y,_]);S.useEffect(()=>{I(25)},[p==null?void 0:p.jobId,y,_]);const dt=N=>{if(N===y){k(V=>!V);return}x(N),k(!0)},It=re.map((N,V)=>{var G;return{name:N.name,strategy:((G=r[V])==null?void 0:G.strategy)??"hybrid",modifications:N.parsedModifications}}),gn=()=>{nt&&c(It)},Vn=()=>{const N=vs.find(V=>V.id===T)??vs[0];N&&u([...r,{id:Nu(),name:N.name,strategy:N.strategy,modificationsText:JSON.stringify(N.modifications,null,2)}])},O=()=>{const N=Ka.find(ce=>ce.id===D);if(!N){Y("Select a valid profile.");return}const V=N.scenarios.map(ce=>ce.name.toLowerCase());if(new Set(V).size!==V.length){Y("Profile has duplicate scenario names.");return}const $=N.scenarios.map(ce=>JA(ce));if(new Set($).size!==$.length){Y("Profile has duplicate scenario payloads.");return}const ve=XA(N);if(ve.length>0){Y(`Profile has conflicting scalar types: ${ve.slice(0,3).join(", ")}`);return}const Fe=N.scenarios.map(ce=>({id:Nu(),name:ce.name,strategy:ce.strategy,modificationsText:JSON.stringify(ce.modifications,null,2)}));u(Fe),Y(null),c(Fe.map(ce=>({name:ce.name,strategy:ce.strategy,modifications:Mu(ce.modificationsText).value??{}})))},ee=(N,V,G)=>{const $=r.find(ce=>ce.id===N);if(!$)return;const ve=Mu($.modificationsText);if(!ve.value)return;const Fe=KA(ve.value,V,YA(G));i(N,{modificationsText:JSON.stringify(Fe,null,2)})},J=()=>{const N={version:1,anchorStepId:t,scenarios:r.map(V=>({name:V.name,strategy:V.strategy,modificationsText:V.modificationsText}))};Lm(`agent-director-scenarios-${t||"matrix"}.json`,N)},qe=async N=>{var G;const V=(G=N.target.files)==null?void 0:G[0];if(V){N.target.value="";try{const $=await V.text(),ve=JSON.parse($),Fe=Array.isArray(ve.scenarios)?ve.scenarios:Array.isArray(ve)?ve:null;if(!Fe||Fe.length===0){F("Scenario file must include a scenarios array.");return}if(Fe.length>Wa){F(`Scenario file exceeds ${Wa} scenarios.`);return}const ce=Fe.map((it,Ye)=>{if(!it||typeof it!="object")throw new Error("Scenario entries must be objects.");const ae=it,Jr=String(ae.name??`Scenario ${Ye+1}`),wr=String(ae.strategy??"hybrid"),Ji=D0.includes(wr)?wr:"hybrid",Xi=typeof ae.modificationsText=="string"?ae.modificationsText:JSON.stringify(ae.modifications??{},null,2);return{id:Nu(),name:Jr,strategy:Ji,modificationsText:Xi}});typeof ve.anchorStepId=="string"&&z.has(ve.anchorStepId)&&n(ve.anchorStepId),u(ce),F(null)}catch($){F($ instanceof Error?$.message:"Failed to import scenario file.")}}},te=S.useMemo(()=>{const N=re.flatMap(V=>V.sensitiveKeys);return Array.from(new Set(N))},[re]),Re=S.useMemo(()=>{const N=(p==null?void 0:p.causalRanking)??[];return N.length===0?1:Math.max(1,...N.map(V=>Math.abs(V.score)))},[p==null?void 0:p.causalRanking]),Wt=((we=re[0])==null?void 0:we.parsedModifications)??{},br=S.useMemo(()=>Object.entries(le).filter(([,V])=>V!==0).reduce((V,[G,$])=>{const ve=p==null?void 0:p.causalRanking.find(it=>it.factor===G),Fe=(ve==null?void 0:ve.score)??0,ce=$/100;return V.wallTimeMs+=Fe*ce*1400,V.costUsd+=Fe*ce*.04,V.errorDelta+=Fe*ce*.7,V},{wallTimeMs:0,costUsd:0,errorDelta:0}),[p==null?void 0:p.causalRanking,le]),_t=S.useMemo(()=>{const N=new Map;return((p==null?void 0:p.rows)??[]).forEach(V=>{const G=Math.abs(V.metrics.wallTimeDeltaMs??0)+Math.abs((V.metrics.costDeltaUsd??0)*1e3)+Math.abs(V.metrics.errorDelta??0)*400;V.changedStepIds.forEach($=>{N.set($,(N.get($)??0)+Math.max(1,G))})}),Array.from(N.entries()).sort((V,G)=>G[1]-V[1]).slice(0,10)},[p==null?void 0:p.rows]),ze=Math.max(1,..._t.map(([,N])=>N),1),ye=S.useMemo(()=>((p==null?void 0:p.causalRanking)??[]).slice(0,5).map(N=>({id:N.factor,text:`${N.factor} -> ${N.evidence.examples[0]??"observed change"} -> outcome`,confidence:N.confidence})),[p==null?void 0:p.causalRanking]),Dt=rt.slice(0,A),sn=()=>{var G;if(!p)return;const N=((G=z.get(t))==null?void 0:G.name)??null,V=HA({job:g,matrix:p,safeExport:b,sensitiveKeys:te,anchorStepName:N});Lm(`agent-director-matrix-${p.jobId}.json`,V)},Qi=()=>{var G;if(!p)return;const N=((G=z.get(t))==null?void 0:G.name)??null,V=WA({job:g,matrix:p,safeExport:b,anchorStepName:N});qE(`agent-director-matrix-${p.jobId}.md`,V,"text/markdown")},$n=(g==null?void 0:g.status)==="queued"||(g==null?void 0:g.status)==="running",fe=E?((p==null?void 0:p.rows)??[]).find(N=>N.scenarioId===E)??null:null,Yr=fe?b?VE(fe.modifications):fe.modifications:null;return f.jsxs("section",{className:"matrix-mode","data-help":!0,"data-help-title":"Matrix mode","data-help-body":"Run multiple replay scenarios from one anchor and compare outcome deltas with causal ranking.","data-help-placement":"top",children:[f.jsxs("div",{className:"matrix-panel",children:[f.jsxs("div",{className:"matrix-panel-header",children:[f.jsx("h2",{children:"Counterfactual Replay Matrix"}),f.jsx("div",{className:"matrix-job-state",children:g?f.jsxs(f.Fragment,{children:[f.jsxs("span",{className:`status-pill status-${g.status}`,children:["Job: ",g.status]}),f.jsxs("span",{children:[g.completedCount,"/",g.scenarioCount," completed"]}),g.failedCount?f.jsxs("span",{children:[g.failedCount," failed"]}):null,g.canceledCount?f.jsxs("span",{children:[g.canceledCount," canceled"]}):null]}):f.jsx("span",{children:"No job yet"})})]}),f.jsxs("div",{className:"matrix-controls",children:[f.jsxs("label",{children:["Anchor step",f.jsx("select",{value:t,onChange:N=>n(N.target.value),children:e.map(N=>f.jsxs("option",{value:N.id,children:[N.name," (",N.id,")"]},N.id))})]}),f.jsxs("label",{children:["Preset",f.jsx("select",{value:T,onChange:N=>M(N.target.value),"data-help":!0,"data-help-title":"Scenario presets","data-help-body":"Insert common experiments like prompt tweaks or recorded baselines.","data-help-placement":"bottom",children:vs.map(N=>f.jsx("option",{value:N.id,children:N.label},N.id))})]}),f.jsxs("label",{children:["Batch profile",f.jsx("select",{value:D,onChange:N=>R(N.target.value),children:Ka.map(N=>f.jsx("option",{value:N.id,children:N.label},N.id))})]}),f.jsx("button",{type:"button",className:"ghost-button",onClick:Vn,disabled:h,"data-help":!0,"data-help-title":"Add preset","data-help-body":"Append the selected preset as a new scenario.","data-help-placement":"bottom",children:"Add preset"}),f.jsx("button",{type:"button",className:"ghost-button",onClick:O,disabled:h,"data-help":!0,"data-help-title":"Run batch profile","data-help-body":"Loads and executes a predefined scenario orchestration profile.","data-help-placement":"bottom",children:"Run profile"}),f.jsxs("div",{className:"matrix-actions",children:[f.jsx("button",{type:"button",className:"primary-button",onClick:gn,disabled:!nt,"data-help":!0,"data-help-title":"Run matrix","data-help-body":"Execute all scenarios sequentially and gather outcome deltas.","data-help-placement":"bottom",children:h?"Running...":"Run matrix"}),f.jsx("button",{type:"button",className:"ghost-button",onClick:o,disabled:h,children:"Add scenario"}),f.jsx("button",{type:"button",className:"ghost-button",onClick:d,disabled:!$n||h,children:"Cancel job"}),f.jsx("button",{type:"button",className:"ghost-button",onClick:J,"data-help":!0,"data-help-title":"Export scenarios","data-help-body":"Download the scenario set as JSON for reuse.","data-help-placement":"bottom",children:"Export scenarios"}),f.jsx("button",{type:"button",className:"ghost-button",onClick:()=>{var N;return(N=U.current)==null?void 0:N.click()},"data-help":!0,"data-help-title":"Import scenarios","data-help-body":"Load a scenario JSON file to repopulate the builder.","data-help-placement":"bottom",children:"Import scenarios"}),f.jsx("input",{ref:U,type:"file",accept:"application/json",onChange:qe,className:"matrix-file-input"}),f.jsx("button",{type:"button",className:"ghost-button",onClick:sn,disabled:!p,"data-help":!0,"data-help-title":"Export matrix","data-help-body":"Download the full matrix JSON with redaction metadata.","data-help-placement":"bottom",children:"Export matrix"}),f.jsx("button",{type:"button",className:"ghost-button",onClick:Qi,disabled:!p,"data-help":!0,"data-help-title":"Export summary","data-help-body":"Download a markdown summary for sharing.","data-help-placement":"bottom",children:"Export summary"})]})]}),f.jsxs("div",{className:"matrix-presets",children:[vs.map(N=>f.jsxs("div",{className:"matrix-preset",children:[f.jsx("strong",{children:N.label}),f.jsx("span",{children:N.description})]},N.id)),Ka.filter(N=>N.id===D).map(N=>f.jsxs("div",{className:"matrix-preset profile",children:[f.jsx("strong",{children:N.label}),f.jsx("span",{children:N.description})]},N.id))]}),f.jsx("div",{className:"matrix-scenarios",children:r.map((N,V)=>{const G=re[V];return f.jsxs("article",{className:"matrix-scenario",children:[f.jsxs("div",{className:"matrix-scenario-head",children:[f.jsx("input",{value:N.name,onChange:$=>i(N.id,{name:$.target.value}),placeholder:"Scenario name"}),f.jsx("select",{value:N.strategy,onChange:$=>i(N.id,{strategy:$.target.value}),children:D0.map($=>f.jsx("option",{value:$,children:$},$))})]}),f.jsx("textarea",{value:N.modificationsText,onChange:$=>i(N.id,{modificationsText:$.target.value}),rows:3,spellCheck:!1,"aria-label":`Scenario ${N.name} modifications`}),G?f.jsxs("div",{className:"matrix-schema-editor",children:[f.jsx("strong",{children:"Schema-aware scalar editor"}),f.jsx("div",{className:"matrix-schema-grid",children:oa(G.parsedModifications).slice(0,8).map($=>f.jsxs("label",{className:"matrix-schema-field",children:[f.jsx("span",{children:$.path}),f.jsx("input",{value:String($.value??""),onChange:ve=>ee(N.id,$.path,ve.target.value)})]},`${N.id}-${$.path}`))})]}):null,f.jsxs("div",{className:"matrix-diff-preview",children:[f.jsx("strong",{children:"Diff vs baseline"}),f.jsxs("div",{className:"matrix-diff-list",children:[O0(Wt,(G==null?void 0:G.parsedModifications)??{}).slice(0,6).map($=>f.jsxs("div",{className:"matrix-diff-item",children:[f.jsx("span",{children:$.path}),f.jsxs("span",{children:[String($.from)," ","->"," ",String($.to)]})]},`${N.id}-${$.path}`)),O0(Wt,(G==null?void 0:G.parsedModifications)??{}).length===0?f.jsx("div",{className:"matrix-diff-item",children:"No scalar changes from baseline."}):null]})]}),G!=null&&G.errors.length?f.jsx("div",{className:"matrix-scenario-error",children:G.errors.map($=>f.jsx("div",{children:$},$))}):null,G!=null&&G.sensitiveKeys.length?f.jsxs("div",{className:"matrix-scenario-warning",children:["Sensitive keys: ",G.sensitiveKeys.join(", ")]}):null,f.jsxs("div",{className:"matrix-scenario-actions",children:[f.jsx("button",{type:"button",className:"ghost-button",onClick:()=>s(N.id),disabled:h,children:"Duplicate scenario"}),f.jsx("button",{type:"button",className:"ghost-button",onClick:()=>a(N.id,"up"),disabled:h||V===0,children:"Move scenario up"}),f.jsx("button",{type:"button",className:"ghost-button",onClick:()=>a(N.id,"down"),disabled:h||V===r.length-1,children:"Move scenario down"}),f.jsx("button",{type:"button",className:"ghost-button",onClick:()=>l(N.id),disabled:r.length<=1,children:"Remove"})]})]},N.id)})}),xe?f.jsx("div",{className:"error-banner",children:xe}):null,pe?f.jsx("div",{className:"error-banner",children:pe}):null,H?f.jsx("div",{className:"error-banner",children:H}):null,m?f.jsx("div",{className:"error-banner",children:m}):null]}),f.jsxs("div",{className:"matrix-results",children:[f.jsxs("div",{className:"matrix-table-wrap",children:[f.jsxs("table",{className:"matrix-table",children:[f.jsx("thead",{children:f.jsxs("tr",{children:[f.jsx("th",{children:f.jsx("button",{type:"button",className:"table-sort",onClick:()=>dt("name"),children:"Scenario"})}),f.jsx("th",{children:"Status"}),f.jsx("th",{children:f.jsx("button",{type:"button",className:"table-sort",onClick:()=>dt("wallTimeDeltaMs"),children:"Wall  (ms)"})}),f.jsx("th",{children:f.jsx("button",{type:"button",className:"table-sort",onClick:()=>dt("costDeltaUsd"),children:"Cost  (USD)"})}),f.jsx("th",{children:f.jsx("button",{type:"button",className:"table-sort",onClick:()=>dt("errorDelta"),children:"Errors "})}),f.jsx("th",{children:f.jsx("button",{type:"button",className:"table-sort",onClick:()=>dt("changedSteps"),children:"Changed"})}),f.jsx("th",{children:"Details"}),f.jsx("th",{children:"Compare"})]})}),f.jsx("tbody",{children:rt.length===0?f.jsx("tr",{children:f.jsx("td",{colSpan:8,children:"No matrix results yet. Run a job to populate this table."})}):Dt.map(N=>f.jsxs("tr",{children:[f.jsx("td",{children:N.name}),f.jsx("td",{title:N.error??void 0,children:N.status}),f.jsx("td",{children:N.metrics.wallTimeDeltaMs??"n/a"}),f.jsx("td",{children:N.metrics.costDeltaUsd??"n/a"}),f.jsx("td",{children:N.metrics.errorDelta??"n/a"}),f.jsx("td",{children:N.metrics.changedSteps}),f.jsx("td",{children:f.jsx("button",{type:"button",className:"ghost-button",onClick:()=>j(N.scenarioId),children:"Details"})}),f.jsx("td",{children:f.jsx("button",{type:"button",className:"ghost-button",disabled:!N.replayTraceId,onClick:()=>N.replayTraceId&&v(N.replayTraceId),children:"Open"})})]},N.scenarioId))})]}),rt.length>Dt.length?f.jsx("div",{className:"matrix-table-more",children:f.jsxs("button",{type:"button",className:"ghost-button",onClick:()=>I(N=>Math.min(rt.length,N+25)),children:["Load more rows (",Dt.length,"/",rt.length,")"]})}):null]}),f.jsxs("aside",{className:"matrix-causal",children:[f.jsx("h3",{children:"Causal ranking"}),(vt=p==null?void 0:p.causalRanking)!=null&&vt.length?f.jsxs(f.Fragment,{children:[f.jsx("ul",{children:p.causalRanking.slice(0,8).map(N=>f.jsxs("li",{children:[f.jsxs("div",{className:"factor-row",children:[f.jsx("strong",{children:N.factor}),f.jsxs("span",{children:["score ",N.score.toFixed(3)]})]}),f.jsx("div",{className:"factor-bar-track",role:"presentation",children:f.jsx("div",{className:`factor-bar-fill ${N.score>=0?"positive":"negative"}`,style:{width:`${Math.max(6,Math.abs(N.score)/Re*100)}%`}})}),f.jsxs("div",{className:"factor-meta",children:["confidence ",(N.confidence*100).toFixed(0),"%  samples ",N.evidence.samples]}),f.jsx("input",{type:"range",min:-100,max:100,value:le[N.factor]??0,"aria-label":`Simulate ${N.factor}`,onChange:V=>se(G=>({...G,[N.factor]:Number(V.target.value)}))}),N.evidence.examples.length?f.jsx("div",{className:"factor-chips",children:N.evidence.examples.map(V=>f.jsx("span",{className:"factor-chip",children:V},V))}):null]},N.factor))}),f.jsxs("div",{className:"matrix-projected",children:[f.jsx("h4",{children:"Projected impact (simulation)"}),f.jsxs("div",{className:"matrix-projected-grid",children:[f.jsxs("span",{children:["Wall  ",br.wallTimeMs.toFixed(0)," ms"]}),f.jsxs("span",{children:["Cost  ",br.costUsd.toFixed(3)," USD"]}),f.jsxs("span",{children:["Error  ",br.errorDelta.toFixed(2)]})]})]}),f.jsxs("div",{className:"matrix-heatmap",children:[f.jsx("h4",{children:"Step influence heatmap"}),_t.map(([N,V])=>f.jsxs("div",{className:"matrix-heatmap-row",children:[f.jsx("span",{children:q0(N,z)}),f.jsx("span",{className:"matrix-heatmap-bar",style:{width:`${Math.max(5,V/ze*100)}%`}})]},N)),_t.length===0?f.jsx("p",{children:"No influence data yet."}):null]}),f.jsxs("div",{className:"matrix-paths",children:[f.jsx("h4",{children:"Causal path explorer"}),ye.map(N=>f.jsxs("div",{className:"matrix-path-item",children:[f.jsx("span",{children:N.text}),f.jsxs("span",{children:[(N.confidence*100).toFixed(0),"%"]})]},N.id)),ye.length===0?f.jsx("p",{children:"No paths available."}):null]})]}):f.jsx("p",{children:"No causal ranking yet."})]}),fe?f.jsxs("aside",{className:"matrix-detail",role:"dialog","aria-label":"Scenario details",children:[f.jsxs("div",{className:"matrix-detail-header",children:[f.jsxs("div",{children:[f.jsx("h3",{children:"Scenario details"}),f.jsxs("p",{className:"matrix-detail-subtitle",children:[fe.name,"  ",fe.status]})]}),f.jsx("button",{type:"button",className:"ghost-button",onClick:()=>j(null),children:"Close"})]}),f.jsxs("div",{className:"matrix-detail-grid",children:[f.jsxs("div",{className:"matrix-detail-block",children:[f.jsx("h4",{children:"Modifications"}),b?f.jsx("p",{className:"matrix-detail-note",children:"Safe export enabled: sensitive keys are redacted."}):null,f.jsx("pre",{children:JSON.stringify(Yr??{},null,2)})]}),f.jsxs("div",{className:"matrix-detail-block",children:[f.jsx("h4",{children:"Change summary"}),f.jsxs("div",{className:"matrix-detail-metrics",children:[f.jsxs("span",{children:["Changed: ",fe.metrics.changedSteps]}),f.jsxs("span",{children:["Added: ",fe.metrics.addedSteps]}),f.jsxs("span",{children:["Removed: ",fe.metrics.removedSteps]}),f.jsxs("span",{children:["Invalidated: ",fe.metrics.invalidatedStepCount]})]}),f.jsxs("div",{className:"matrix-detail-steps",children:[f.jsx("strong",{children:"Top changed steps"}),f.jsx("div",{className:"matrix-step-chips",children:fe.changedStepIds.length?fe.changedStepIds.slice(0,6).map(N=>f.jsx("span",{className:"matrix-step-chip",title:N,children:q0(N,z)},N)):f.jsx("span",{className:"matrix-step-chip",children:"None"})}),fe.changedStepIds.length>6?f.jsxs("div",{className:"matrix-step-more",children:["+",fe.changedStepIds.length-6," more steps changed"]}):null]}),fe.error?f.jsx("div",{className:"matrix-detail-error",children:fe.error}):null]})]})]}):null]})]})}const Ya=["latency storm","cache divergence","tool timeout chain","stale prompt vector","schema mismatch surge"],F0=[{id:"seasonal-incident-sprint",title:"Resolve 3 raid objectives",goal:3,rewardCredits:120},{id:"boss-shutdown",title:"Defeat one boss encounter",goal:1,rewardCredits:200},{id:"guild-push",title:"Complete 2 guild operations",goal:2,rewardCredits:160},{id:"timeline-weaver",title:"Merge 2 timeline forks",goal:2,rewardCredits:150}],eI={stability_patch:{credits:20,materials:12},precision_lens:{credits:28,materials:16},overclock_core:{credits:42,materials:24}};function Oe(e,t,n){return Math.min(n,Math.max(t,e))}function tI(e){let t=0;for(let n=0;n<e.length;n+=1)t=(t*31+e.charCodeAt(n))%1e5;return t}function $E(e,t,n){const r=Ya[(e+t)%Ya.length],i=Ya[(e+t+2)%Ya.length];return{id:`mission-${t}-${(e+t)%997}`,title:`Scenario Depth ${t}`,difficulty:Oe(1+Math.floor(t/2),1,10),hazards:[r,i,...n.slice(-1)],rewardCredits:60+t*15}}function nI(){return[{id:"node-alpha",title:"Signal Fracture",body:"Telemetry divergence emerges across parallel tool paths.",choices:[{id:"alpha-risk",label:"Push aggressive branch optimization",nextNodeId:"node-beta",tensionDelta:12,mutator:"risk-surge"},{id:"alpha-safe",label:"Stabilize and preserve deterministic flow",nextNodeId:"node-beta",tensionDelta:-5,mutator:"stability-first"}]},{id:"node-beta",title:"Protocol Fork",body:"The team must choose speed versus interpretability under pressure.",choices:[{id:"beta-speed",label:"Favor speed and absorb uncertainty",nextNodeId:"node-gamma",tensionDelta:8,mutator:"throughput-boost"},{id:"beta-clarity",label:"Favor clarity and route through guardrails",nextNodeId:"node-gamma",tensionDelta:-3,mutator:"clarity-path"}]},{id:"node-gamma",title:"Final Directive",body:"Command has one move left before the run locks in.",choices:[{id:"gamma-strike",label:"Launch decisive strike sequence",nextNodeId:"node-alpha",tensionDelta:10,mutator:"strike-loop"},{id:"gamma-reset",label:"Reset tempo and rebuild confidence",nextNodeId:"node-alpha",tensionDelta:-6,mutator:"tempo-reset"}]}]}function BE(e,t){return{...F0[(e+t)%F0.length],progress:0,completed:!1}}function zE(e,t){const n=[...e,t];return Array.from(new Set(n)).slice(-6)}function Om(e,t,n){return{...e,campaign:{...e.campaign,depth:t,mutators:n,currentMission:$E(e.seed,t,n)}}}function V0(e){const t=tI(e),n=["baseline"];return{seed:t,raid:{party:["director"],roles:{director:"strategist"},objectives:[{id:"obj-root-cause",label:"Identify root cause chain",progress:0,target:100,completed:!1},{id:"obj-recover",label:"Recover operational stability",progress:0,target:100,completed:!1},{id:"obj-harden",label:"Harden replay strategy",progress:0,target:100,completed:!1}],completed:!1},campaign:{depth:1,lives:3,completedMissionIds:[],mutators:n,currentMission:$E(t,1,n)},narrative:{currentNodeId:"node-alpha",nodes:nI(),history:[],tension:35},skills:{points:6,nodes:[{id:"skill-focus",label:"Focus Matrix",cost:2,requires:[],unlocked:!1},{id:"skill-resilience",label:"Resilience Mesh",cost:2,requires:[],unlocked:!1},{id:"skill-surge",label:"Surge Compiler",cost:3,requires:["skill-focus"],unlocked:!1},{id:"skill-echo",label:"Echo Anticipator",cost:3,requires:["skill-resilience"],unlocked:!1}],loadout:{capacity:3,equipped:[]}},pvp:{round:0,stability:72,sabotage:28,fog:40,winner:null},time:{activeForkId:"primary",forks:[{id:"primary",label:"Primary timeline",playheadMs:0,history:[0]}]},boss:{name:"The Causality Hydra",phase:1,hp:320,maxHp:320,enraged:!1},director:{risk:30,hint:"Start with the bottleneck path and branch cautiously.",recommendedModifier:"stability_patch",lastOutcome:"mixed"},economy:{credits:140,materials:90,crafted:[]},guild:{name:"Trace Guild",members:4,operationsScore:0,eventsCompleted:0},cinematic:{queue:[]},liveops:{season:`Season-${2026+t%2}`,week:1,challenge:BE(t,1)}}}function rI(e,t,n){if(!t.trim())return e;const r=e.raid.party.includes(t)?e.raid.party:[...e.raid.party,t];return{...e,raid:{...e.raid,party:r,roles:{...e.raid.roles,[t]:n}}}}function iI(e,t,n){const r=e.raid.objectives.map(a=>{if(a.id!==t)return a;const o=Oe(a.progress+n,0,a.target);return{...a,progress:o,completed:o>=a.target}}),i=r.every(a=>a.completed),s=i&&!e.raid.completed?180:0;return{...e,raid:{...e.raid,objectives:r,completed:i},economy:{...e.economy,credits:e.economy.credits+s}}}function $0(e,t){const n=e.campaign.currentMission;if(t){const s=e.campaign.depth+1,a=Om(e,s,e.campaign.mutators);return{...a,campaign:{...a.campaign,completedMissionIds:[...a.campaign.completedMissionIds,n.id]},economy:{...a.economy,credits:a.economy.credits+n.rewardCredits,materials:a.economy.materials+14},director:{...a.director,lastOutcome:"success"}}}const r=Oe(e.campaign.lives-1,0,3),i=Om(e,e.campaign.depth,zE(e.campaign.mutators,"failure-loop"));return{...i,campaign:{...i.campaign,lives:r},director:{...i.director,lastOutcome:"failure"}}}function sI(e,t){const n=e.narrative.nodes.find(o=>o.id===e.narrative.currentNodeId),r=n==null?void 0:n.choices.find(o=>o.id===t);if(!n||!r)return e;const i=Oe(e.narrative.tension+r.tensionDelta,0,100),s=zE(e.campaign.mutators,r.mutator),a=Om(e,e.campaign.depth,s);return{...a,narrative:{...a.narrative,currentNodeId:r.nextNodeId,history:[...a.narrative.history,{nodeId:n.id,choiceId:r.id}],tension:i}}}function aI(e,t){const n=e.skills.nodes.find(s=>s.id===t);if(!n||n.unlocked)return e;const r=new Set(e.skills.nodes.filter(s=>s.unlocked).map(s=>s.id));return!n.requires.every(s=>r.has(s))||e.skills.points<n.cost?e:{...e,skills:{...e.skills,points:e.skills.points-n.cost,nodes:e.skills.nodes.map(s=>s.id===t?{...s,unlocked:!0}:s)}}}function oI(e,t){const n=e.skills.nodes.find(r=>r.id===t);return!(n!=null&&n.unlocked)||e.skills.loadout.equipped.includes(t)||e.skills.loadout.equipped.length>=e.skills.loadout.capacity?e:{...e,skills:{...e.skills,loadout:{...e.skills.loadout,equipped:[...e.skills.loadout.equipped,t]}}}}function Pu(e,t){const n={...e.pvp};return t==="sabotage"?(n.sabotage=Oe(n.sabotage+13,0,100),n.stability=Oe(n.stability-11,0,100),n.fog=Oe(n.fog+9,0,100)):t==="stabilize"?(n.stability=Oe(n.stability+14,0,100),n.sabotage=Oe(n.sabotage-8,0,100),n.fog=Oe(n.fog-6,0,100)):(n.fog=Oe(n.fog-16,0,100),n.stability=Oe(n.stability+3,0,100),n.sabotage=Oe(n.sabotage-4,0,100)),n.round+=1,n.stability<=0?n.winner="saboteur":n.sabotage<=0?n.winner="operator":n.round>=10&&(n.winner=n.stability>=n.sabotage?"operator":"saboteur"),{...e,pvp:n}}function lI(e,t,n){const r=`fork-${e.time.forks.length+1}`,i={id:r,label:t.trim()||r,playheadMs:Oe(n,0,36e5),history:[Oe(n,0,36e5)]};return{...e,time:{...e.time,activeForkId:r,forks:[...e.time.forks,i]}}}function uI(e,t){const n=e.time.activeForkId,r=e.time.forks.map(i=>{if(i.id!==n)return i;const s=Oe(i.playheadMs-Math.abs(t),0,36e5);return{...i,playheadMs:s,history:[...i.history,s]}});return{...e,time:{...e.time,forks:r}}}function cI(e,t){if(t==="primary")return e;const n=e.time.forks.find(s=>s.id===t),r=e.time.forks.find(s=>s.id==="primary");if(!n||!r)return e;const i={...r,playheadMs:n.playheadMs,history:[...r.history,n.playheadMs]};return{...e,time:{activeForkId:"primary",forks:[i,...e.time.forks.filter(s=>s.id!=="primary"&&s.id!==t)]}}}function Ru(e,t){const n=t==="exploit"?42:t==="strike"?24:8,r=Oe(e.boss.hp-n,0,e.boss.maxHp),i=r/e.boss.maxHp,s=i<=.33?3:i<=.66?2:1;return{...e,boss:{...e.boss,hp:r,phase:s,enraged:s===3||r<=e.boss.maxHp*.2}}}function dI(e,t){const n=t.failures*12+t.retries*4+(t.latencyMs>1400?8:0),r=Oe(e.director.risk+n,0,100),i=t.failures>0?"Prioritize failure triage and run a stabilizing replay branch.":t.latencyMs>1400?"Latency pressure detected. Reduce fan-out and tighten tool boundaries.":"Momentum is stable. Push a high-confidence optimization branch.",s=t.failures>1?"stability_patch":t.latencyMs>1400?"precision_lens":"overclock_core",a=t.failures>0?"failure":"success";return{...e,director:{risk:r,hint:i,recommendedModifier:s,lastOutcome:a}}}function Au(e,t){const n=eI[t];if(!n||e.economy.credits<n.credits||e.economy.materials<n.materials)return e;const r=e.economy.crafted.includes(t)?e.economy.crafted:[...e.economy.crafted,t];let i={...e,economy:{...e.economy,credits:e.economy.credits-n.credits,materials:e.economy.materials-n.materials,crafted:r}};return t==="stability_patch"&&(i={...i,pvp:{...i.pvp,stability:Oe(i.pvp.stability+8,0,100)}}),t==="precision_lens"&&(i={...i,raid:{...i.raid,objectives:i.raid.objectives.map((s,a)=>a===0?{...s,progress:Oe(s.progress+10,0,s.target),completed:Oe(s.progress+10,0,s.target)>=s.target}:s)}}),t==="overclock_core"&&(i={...i,boss:{...i.boss,hp:Oe(i.boss.hp-16,0,i.boss.maxHp)}}),i}function B0(e,t){const n=Math.round(t);return{...e,guild:{...e.guild,operationsScore:e.guild.operationsScore+n,eventsCompleted:e.guild.eventsCompleted+(n>0?1:0)},economy:{...e.economy,credits:e.economy.credits+Math.max(0,n*3)}}}function z0(e,t,n,r){const i={id:`event-${e.cinematic.queue.length+1}-${e.seed%1e3}`,type:t,message:n,intensity:r,at:Date.now()};return{...e,cinematic:{queue:[i,...e.cinematic.queue].slice(0,12)}}}function fI(e){const t=e.liveops.week+1,n=BE(e.seed,t);return{...e,liveops:{...e.liveops,week:t,challenge:n}}}function hI(e,t,n){return Math.min(n,Math.max(t,e))}function pI({state:e,playheadMs:t,onUpdate:n}){const[r,i]=S.useState(""),[s,a]=S.useState("strategist"),[o,l]=S.useState("alt path"),u=S.useMemo(()=>e.narrative.nodes.find(d=>d.id===e.narrative.currentNodeId),[e.narrative.currentNodeId,e.narrative.nodes]),c=S.useMemo(()=>{var m;const d=[e.raid.completed,e.campaign.depth>=3,e.narrative.history.length>=2,e.skills.loadout.equipped.length>=2,e.pvp.round>=3||e.pvp.winner!=null,e.time.forks.length>=2||((m=e.time.forks[0])==null?void 0:m.history.length)>1,e.boss.hp<e.boss.maxHp,e.director.lastOutcome!=="mixed",e.economy.crafted.length>=1,e.guild.operationsScore>0,e.cinematic.queue.length>=1,e.liveops.week>=2],h=d.filter(Boolean).length;return{done:h,total:d.length,pct:Math.round(h/d.length*100)}},[e]);return f.jsxs("section",{className:"gameplay-mode",children:[f.jsxs("header",{className:"gameplay-header",children:[f.jsxs("div",{children:[f.jsx("h2",{children:"Gameplay Command Center"}),f.jsx("p",{children:"World-class mechanics stack: raids, campaign, narrative, PvP, time control, boss runs, and liveops."})]}),f.jsxs("div",{className:"gameplay-completion","aria-label":"Gameplay completion",children:[f.jsxs("strong",{children:[c.done,"/",c.total]}),f.jsxs("span",{children:[c.pct,"% complete"]})]})]}),f.jsxs("div",{className:"gameplay-grid",children:[f.jsxs("article",{className:"gameplay-card",children:[f.jsx("h3",{children:"1) Co-op Incident Raids"}),f.jsxs("p",{children:["Party: ",e.raid.party.length," members"]}),f.jsxs("div",{className:"gameplay-inline",children:[f.jsx("input",{className:"search-input",value:r,onChange:d=>i(d.target.value),placeholder:"Member name","aria-label":"Raid member name"}),f.jsxs("select",{value:s,onChange:d=>a(d.target.value),children:[f.jsx("option",{value:"strategist",children:"Strategist"}),f.jsx("option",{value:"operator",children:"Operator"}),f.jsx("option",{value:"analyst",children:"Analyst"}),f.jsx("option",{value:"saboteur",children:"Saboteur"})]}),f.jsx("button",{className:"ghost-button",type:"button",onClick:()=>{r.trim()&&(n(d=>rI(d,r.trim(),s)),i(""))},children:"Add member"})]}),f.jsx("div",{className:"gameplay-objectives",children:e.raid.objectives.map(d=>f.jsxs("div",{className:"gameplay-objective",children:[f.jsx("span",{children:d.label}),f.jsxs("span",{children:[d.progress,"/",d.target]}),f.jsx("button",{className:"ghost-button",type:"button",onClick:()=>n(h=>iI(h,d.id,25)),children:"+25"})]},d.id))})]}),f.jsxs("article",{className:"gameplay-card",children:[f.jsx("h3",{children:"2) Roguelike Scenario Campaign"}),f.jsxs("p",{children:["Depth ",e.campaign.depth,"  Lives ",e.campaign.lives]}),f.jsxs("p",{children:[e.campaign.currentMission.title," (difficulty ",e.campaign.currentMission.difficulty,")"]}),f.jsxs("div",{className:"gameplay-inline",children:[f.jsx("button",{className:"primary-button",type:"button",onClick:()=>n(d=>$0(d,!0)),children:"Mission success"}),f.jsx("button",{className:"ghost-button",type:"button",onClick:()=>n(d=>$0(d,!1)),children:"Mission fail"})]})]}),f.jsxs("article",{className:"gameplay-card",children:[f.jsx("h3",{children:"3) Branching Narrative Director"}),f.jsx("p",{children:u==null?void 0:u.title}),f.jsxs("p",{children:["Tension ",e.narrative.tension]}),f.jsx("div",{className:"gameplay-list",children:((u==null?void 0:u.choices)??[]).map(d=>f.jsx("button",{className:"ghost-button",type:"button",onClick:()=>n(h=>sI(h,d.id)),children:d.label},d.id))})]}),f.jsxs("article",{className:"gameplay-card",children:[f.jsx("h3",{children:"4) Skill Tree + Loadout"}),f.jsxs("p",{children:["Points ",e.skills.points,"  Equipped ",e.skills.loadout.equipped.length,"/",e.skills.loadout.capacity]}),f.jsx("div",{className:"gameplay-list",children:e.skills.nodes.map(d=>f.jsxs("div",{className:"gameplay-node",children:[f.jsxs("span",{children:[d.label," (",d.cost,")"]}),f.jsx("button",{className:"ghost-button",type:"button",onClick:()=>n(h=>aI(h,d.id)),children:d.unlocked?"Unlocked":"Unlock"}),f.jsx("button",{className:"ghost-button",type:"button",onClick:()=>n(h=>oI(h,d.id)),children:"Equip"})]},d.id))})]}),f.jsxs("article",{className:"gameplay-card",children:[f.jsx("h3",{children:"5) Asymmetric PvP"}),f.jsxs("p",{children:["Round ",e.pvp.round,"  Stability ",e.pvp.stability,"  Sabotage ",e.pvp.sabotage]}),f.jsxs("div",{className:"gameplay-inline",children:[f.jsx("button",{className:"ghost-button",type:"button",onClick:()=>n(d=>Pu(d,"sabotage")),children:"Sabotage"}),f.jsx("button",{className:"ghost-button",type:"button",onClick:()=>n(d=>Pu(d,"stabilize")),children:"Stabilize"}),f.jsx("button",{className:"ghost-button",type:"button",onClick:()=>n(d=>Pu(d,"scan")),children:"Scan"})]})]}),f.jsxs("article",{className:"gameplay-card",children:[f.jsx("h3",{children:"6) Time Manipulation"}),f.jsxs("p",{children:["Active fork: ",e.time.activeForkId]}),f.jsxs("div",{className:"gameplay-inline",children:[f.jsx("input",{className:"search-input",value:o,onChange:d=>l(d.target.value),"aria-label":"Fork label"}),f.jsx("button",{className:"ghost-button",type:"button",onClick:()=>n(d=>lI(d,o,t)),children:"Create fork"}),f.jsx("button",{className:"ghost-button",type:"button",onClick:()=>n(d=>uI(d,1e3)),children:"Rewind 1s"}),f.jsx("button",{className:"ghost-button",type:"button",onClick:()=>n(d=>cI(d,d.time.activeForkId)),children:"Merge"})]})]}),f.jsxs("article",{className:"gameplay-card",children:[f.jsx("h3",{children:"7) Boss Encounter Runs"}),f.jsxs("p",{children:[e.boss.name,"  Phase ",e.boss.phase,"  HP ",e.boss.hp,"/",e.boss.maxHp]}),f.jsxs("div",{className:"gameplay-inline",children:[f.jsx("button",{className:"ghost-button",type:"button",onClick:()=>n(d=>Ru(d,"strike")),children:"Strike"}),f.jsx("button",{className:"ghost-button",type:"button",onClick:()=>n(d=>Ru(d,"shield")),children:"Shield"}),f.jsx("button",{className:"ghost-button",type:"button",onClick:()=>n(d=>Ru(d,"exploit")),children:"Exploit"})]})]}),f.jsxs("article",{className:"gameplay-card",children:[f.jsx("h3",{children:"8) Adaptive AI Dungeon Master"}),f.jsxs("p",{children:["Risk ",e.director.risk,"  Outcome ",e.director.lastOutcome]}),f.jsx("p",{children:e.director.hint}),f.jsx("button",{className:"ghost-button",type:"button",onClick:()=>n(d=>{var h;return dI(d,{failures:d.pvp.sabotage>d.pvp.stability?2:0,retries:Math.floor(((h=d.raid.objectives[0])==null?void 0:h.progress)??0/40),latencyMs:900+d.pvp.fog*10})}),children:"Recompute guidance"})]}),f.jsxs("article",{className:"gameplay-card",children:[f.jsx("h3",{children:"9) Mission Economy + Crafting"}),f.jsxs("p",{children:["Credits ",e.economy.credits,"  Materials ",e.economy.materials]}),f.jsxs("div",{className:"gameplay-inline",children:[f.jsx("button",{className:"ghost-button",type:"button",onClick:()=>n(d=>Au(d,"stability_patch")),children:"Craft stability patch"}),f.jsx("button",{className:"ghost-button",type:"button",onClick:()=>n(d=>Au(d,"precision_lens")),children:"Craft precision lens"}),f.jsx("button",{className:"ghost-button",type:"button",onClick:()=>n(d=>Au(d,"overclock_core")),children:"Craft overclock core"})]})]}),f.jsxs("article",{className:"gameplay-card",children:[f.jsx("h3",{children:"10) Guild Operations"}),f.jsxs("p",{children:[e.guild.name,"  Ops score ",e.guild.operationsScore,"  Events ",e.guild.eventsCompleted]}),f.jsxs("div",{className:"gameplay-inline",children:[f.jsx("button",{className:"ghost-button",type:"button",onClick:()=>n(d=>B0(d,6)),children:"Positive op"}),f.jsx("button",{className:"ghost-button",type:"button",onClick:()=>n(d=>B0(d,-3)),children:"Risky op"})]})]}),f.jsxs("article",{className:"gameplay-card",children:[f.jsx("h3",{children:"11) Cinematic Event Engine"}),f.jsxs("p",{children:[e.cinematic.queue.length," queued events"]}),f.jsxs("div",{className:"gameplay-inline",children:[f.jsx("button",{className:"ghost-button",type:"button",onClick:()=>n(d=>z0(d,"critical","Critical cascade detected",3)),children:"Critical beat"}),f.jsx("button",{className:"ghost-button",type:"button",onClick:()=>n(d=>z0(d,"success","System stabilizing",2)),children:"Success beat"})]})]}),f.jsxs("article",{className:"gameplay-card",children:[f.jsx("h3",{children:"12) Seasonal LiveOps"}),f.jsxs("p",{children:[e.liveops.season,"  Week ",e.liveops.week]}),f.jsx("p",{children:e.liveops.challenge.title}),f.jsxs("div",{className:"gameplay-inline",children:[f.jsx("button",{className:"ghost-button",type:"button",onClick:()=>n(d=>fI(d)),children:"Next week"}),f.jsx("button",{className:"ghost-button",type:"button",onClick:()=>n(d=>({...d,liveops:{...d.liveops,challenge:{...d.liveops.challenge,progress:hI(d.liveops.challenge.progress+1,0,d.liveops.challenge.goal),completed:d.liveops.challenge.progress+1>=d.liveops.challenge.goal}}})),children:"Progress challenge"})]})]})]})]})}const UE=S.createContext({});function mI(e){const t=S.useRef(null);return t.current===null&&(t.current=e()),t.current}const ng=S.createContext(null),GE=S.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});function vI(e=!0){const t=S.useContext(ng);if(t===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:i}=t,s=S.useId();S.useEffect(()=>{e&&i(s)},[e]);const a=S.useCallback(()=>e&&r&&r(s),[s,r,e]);return!n&&r?[!1,a]:[!0]}const rg=typeof window<"u",gI=rg?S.useLayoutEffect:S.useEffect,Nt=e=>e;let HE=Nt;function ig(e){let t;return()=>(t===void 0&&(t=e()),t)}const Oi=(e,t,n)=>{const r=t-e;return r===0?1:(n-e)/r},Nn=e=>e*1e3,Mn=e=>e/1e3,yI={useManualTiming:!1};function xI(e){let t=new Set,n=new Set,r=!1,i=!1;const s=new WeakSet;let a={delta:0,timestamp:0,isProcessing:!1};function o(u){s.has(u)&&(l.schedule(u),e()),u(a)}const l={schedule:(u,c=!1,d=!1)=>{const m=d&&r?t:n;return c&&s.add(u),m.has(u)||m.add(u),u},cancel:u=>{n.delete(u),s.delete(u)},process:u=>{if(a=u,r){i=!0;return}r=!0,[t,n]=[n,t],t.forEach(o),t.clear(),r=!1,i&&(i=!1,l.process(u))}};return l}const Qa=["read","resolveKeyframes","update","preRender","render","postRender"],bI=40;function WE(e,t){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=()=>n=!0,a=Qa.reduce((v,y)=>(v[y]=xI(s),v),{}),{read:o,resolveKeyframes:l,update:u,preRender:c,render:d,postRender:h}=a,m=()=>{const v=performance.now();n=!1,i.delta=r?1e3/60:Math.max(Math.min(v-i.timestamp,bI),1),i.timestamp=v,i.isProcessing=!0,o.process(i),l.process(i),u.process(i),c.process(i),d.process(i),h.process(i),i.isProcessing=!1,n&&t&&(r=!1,e(m))},g=()=>{n=!0,r=!0,i.isProcessing||e(m)};return{schedule:Qa.reduce((v,y)=>{const x=a[y];return v[y]=(_,k=!1,E=!1)=>(n||g(),x.schedule(_,k,E)),v},{}),cancel:v=>{for(let y=0;y<Qa.length;y++)a[Qa[y]].cancel(v)},state:i,steps:a}}const{schedule:ke,cancel:fr,state:Ze,steps:Iu}=WE(typeof requestAnimationFrame<"u"?requestAnimationFrame:Nt,!0),KE=S.createContext({strict:!1}),U0={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},qi={};for(const e in U0)qi[e]={isEnabled:t=>U0[e].some(n=>!!t[n])};function wI(e){for(const t in e)qi[t]={...qi[t],...e[t]}}const SI=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Bo(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||SI.has(e)}let YE=e=>!Bo(e);function _I(e){e&&(YE=t=>t.startsWith("on")?!Bo(t):e(t))}try{_I(require("@emotion/is-prop-valid").default)}catch{}function kI(e,t,n){const r={};for(const i in e)i==="values"&&typeof e.values=="object"||(YE(i)||n===!0&&Bo(i)||!t&&!Bo(i)||e.draggable&&i.startsWith("onDrag"))&&(r[i]=e[i]);return r}function CI(e){if(typeof Proxy>"u")return e;const t=new Map,n=(...r)=>e(...r);return new Proxy(n,{get:(r,i)=>i==="create"?e:(t.has(i)||t.set(i,e(i)),t.get(i))})}const vl=S.createContext({});function la(e){return typeof e=="string"||Array.isArray(e)}function gl(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}const sg=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],ag=["initial",...sg];function yl(e){return gl(e.animate)||ag.some(t=>la(e[t]))}function QE(e){return!!(yl(e)||e.variants)}function EI(e,t){if(yl(e)){const{initial:n,animate:r}=e;return{initial:n===!1||la(n)?n:void 0,animate:la(r)?r:void 0}}return e.inherit!==!1?t:{}}function TI(e){const{initial:t,animate:n}=EI(e,S.useContext(vl));return S.useMemo(()=>({initial:t,animate:n}),[G0(t),G0(n)])}function G0(e){return Array.isArray(e)?e.join(" "):e}const jI=Symbol.for("motionComponentSymbol");function xi(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function NI(e,t,n){return S.useCallback(r=>{r&&e.onMount&&e.onMount(r),t&&(r?t.mount(r):t.unmount()),n&&(typeof n=="function"?n(r):xi(n)&&(n.current=r))},[t])}const og=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),MI="framerAppearId",JE="data-"+og(MI),{schedule:lg}=WE(queueMicrotask,!1),XE=S.createContext({});function PI(e,t,n,r,i){var s,a;const{visualElement:o}=S.useContext(vl),l=S.useContext(KE),u=S.useContext(ng),c=S.useContext(GE).reducedMotion,d=S.useRef(null);r=r||l.renderer,!d.current&&r&&(d.current=r(e,{visualState:t,parent:o,props:n,presenceContext:u,blockInitialAnimation:u?u.initial===!1:!1,reducedMotionConfig:c}));const h=d.current,m=S.useContext(XE);h&&!h.projection&&i&&(h.type==="html"||h.type==="svg")&&RI(d.current,n,i,m);const g=S.useRef(!1);S.useInsertionEffect(()=>{h&&g.current&&h.update(n,u)});const p=n[JE],b=S.useRef(!!p&&!(!((s=window.MotionHandoffIsComplete)===null||s===void 0)&&s.call(window,p))&&((a=window.MotionHasOptimisedAnimation)===null||a===void 0?void 0:a.call(window,p)));return gI(()=>{h&&(g.current=!0,window.MotionIsMounted=!0,h.updateFeatures(),lg.render(h.render),b.current&&h.animationState&&h.animationState.animateChanges())}),S.useEffect(()=>{h&&(!b.current&&h.animationState&&h.animationState.animateChanges(),b.current&&(queueMicrotask(()=>{var v;(v=window.MotionHandoffMarkAsComplete)===null||v===void 0||v.call(window,p)}),b.current=!1))}),h}function RI(e,t,n,r){const{layoutId:i,layout:s,drag:a,dragConstraints:o,layoutScroll:l,layoutRoot:u}=t;e.projection=new n(e.latestValues,t["data-framer-portal-id"]?void 0:ZE(e.parent)),e.projection.setOptions({layoutId:i,layout:s,alwaysMeasureLayout:!!a||o&&xi(o),visualElement:e,animationType:typeof s=="string"?s:"both",initialPromotionConfig:r,layoutScroll:l,layoutRoot:u})}function ZE(e){if(e)return e.options.allowProjection!==!1?e.projection:ZE(e.parent)}function AI({preloadedFeatures:e,createVisualElement:t,useRender:n,useVisualState:r,Component:i}){var s,a;e&&wI(e);function o(u,c){let d;const h={...S.useContext(GE),...u,layoutId:II(u)},{isStatic:m}=h,g=TI(u),p=r(u,m);if(!m&&rg){DI();const b=LI(h);d=b.MeasureLayout,g.visualElement=PI(i,p,h,t,b.ProjectionNode)}return f.jsxs(vl.Provider,{value:g,children:[d&&g.visualElement?f.jsx(d,{visualElement:g.visualElement,...h}):null,n(i,u,NI(p,g.visualElement,c),p,m,g.visualElement)]})}o.displayName=`motion.${typeof i=="string"?i:`create(${(a=(s=i.displayName)!==null&&s!==void 0?s:i.name)!==null&&a!==void 0?a:""})`}`;const l=S.forwardRef(o);return l[jI]=i,l}function II({layoutId:e}){const t=S.useContext(UE).id;return t&&e!==void 0?t+"-"+e:e}function DI(e,t){S.useContext(KE).strict}function LI(e){const{drag:t,layout:n}=qi;if(!t&&!n)return{};const r={...t,...n};return{MeasureLayout:t!=null&&t.isEnabled(e)||n!=null&&n.isEnabled(e)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const OI=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function ug(e){return typeof e!="string"||e.includes("-")?!1:!!(OI.indexOf(e)>-1||/[A-Z]/u.test(e))}function H0(e){const t=[{},{}];return e==null||e.values.forEach((n,r)=>{t[0][r]=n.get(),t[1][r]=n.getVelocity()}),t}function cg(e,t,n,r){if(typeof t=="function"){const[i,s]=H0(r);t=t(n!==void 0?n:e.custom,i,s)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[i,s]=H0(r);t=t(n!==void 0?n:e.custom,i,s)}return t}const qm=e=>Array.isArray(e),qI=e=>!!(e&&typeof e=="object"&&e.mix&&e.toValue),FI=e=>qm(e)?e[e.length-1]||0:e,ut=e=>!!(e&&e.getVelocity);function mo(e){const t=ut(e)?e.get():e;return qI(t)?t.toValue():t}function VI({scrapeMotionValuesFromProps:e,createRenderState:t,onUpdate:n},r,i,s){const a={latestValues:$I(r,i,s,e),renderState:t()};return n&&(a.onMount=o=>n({props:r,current:o,...a}),a.onUpdate=o=>n(o)),a}const eT=e=>(t,n)=>{const r=S.useContext(vl),i=S.useContext(ng),s=()=>VI(e,t,r,i);return n?s():mI(s)};function $I(e,t,n,r){const i={},s=r(e,{});for(const h in s)i[h]=mo(s[h]);let{initial:a,animate:o}=e;const l=yl(e),u=QE(e);t&&u&&!l&&e.inherit!==!1&&(a===void 0&&(a=t.initial),o===void 0&&(o=t.animate));let c=n?n.initial===!1:!1;c=c||a===!1;const d=c?o:a;if(d&&typeof d!="boolean"&&!gl(d)){const h=Array.isArray(d)?d:[d];for(let m=0;m<h.length;m++){const g=cg(e,h[m]);if(g){const{transitionEnd:p,transition:b,...v}=g;for(const y in v){let x=v[y];if(Array.isArray(x)){const _=c?x.length-1:0;x=x[_]}x!==null&&(i[y]=x)}for(const y in p)i[y]=p[y]}}}return i}const zi=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],zr=new Set(zi),tT=e=>t=>typeof t=="string"&&t.startsWith(e),nT=tT("--"),BI=tT("var(--"),dg=e=>BI(e)?zI.test(e.split("/*")[0].trim()):!1,zI=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,rT=(e,t)=>t&&typeof e=="number"?t.transform(e):e,Dn=(e,t,n)=>n>t?t:n<e?e:n,Ui={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},ua={...Ui,transform:e=>Dn(0,1,e)},Ja={...Ui,default:1},ya=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),Wn=ya("deg"),pn=ya("%"),W=ya("px"),UI=ya("vh"),GI=ya("vw"),W0={...pn,parse:e=>pn.parse(e)/100,transform:e=>pn.transform(e*100)},HI={borderWidth:W,borderTopWidth:W,borderRightWidth:W,borderBottomWidth:W,borderLeftWidth:W,borderRadius:W,radius:W,borderTopLeftRadius:W,borderTopRightRadius:W,borderBottomRightRadius:W,borderBottomLeftRadius:W,width:W,maxWidth:W,height:W,maxHeight:W,top:W,right:W,bottom:W,left:W,padding:W,paddingTop:W,paddingRight:W,paddingBottom:W,paddingLeft:W,margin:W,marginTop:W,marginRight:W,marginBottom:W,marginLeft:W,backgroundPositionX:W,backgroundPositionY:W},WI={rotate:Wn,rotateX:Wn,rotateY:Wn,rotateZ:Wn,scale:Ja,scaleX:Ja,scaleY:Ja,scaleZ:Ja,skew:Wn,skewX:Wn,skewY:Wn,distance:W,translateX:W,translateY:W,translateZ:W,x:W,y:W,z:W,perspective:W,transformPerspective:W,opacity:ua,originX:W0,originY:W0,originZ:W},K0={...Ui,transform:Math.round},fg={...HI,...WI,zIndex:K0,size:W,fillOpacity:ua,strokeOpacity:ua,numOctaves:K0},KI={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},YI=zi.length;function QI(e,t,n){let r="",i=!0;for(let s=0;s<YI;s++){const a=zi[s],o=e[a];if(o===void 0)continue;let l=!0;if(typeof o=="number"?l=o===(a.startsWith("scale")?1:0):l=parseFloat(o)===0,!l||n){const u=rT(o,fg[a]);if(!l){i=!1;const c=KI[a]||a;r+=`${c}(${u}) `}n&&(t[a]=u)}}return r=r.trim(),n?r=n(t,i?"":r):i&&(r="none"),r}function hg(e,t,n){const{style:r,vars:i,transformOrigin:s}=e;let a=!1,o=!1;for(const l in t){const u=t[l];if(zr.has(l)){a=!0;continue}else if(nT(l)){i[l]=u;continue}else{const c=rT(u,fg[l]);l.startsWith("origin")?(o=!0,s[l]=c):r[l]=c}}if(t.transform||(a||n?r.transform=QI(t,e.transform,n):r.transform&&(r.transform="none")),o){const{originX:l="50%",originY:u="50%",originZ:c=0}=s;r.transformOrigin=`${l} ${u} ${c}`}}const JI={offset:"stroke-dashoffset",array:"stroke-dasharray"},XI={offset:"strokeDashoffset",array:"strokeDasharray"};function ZI(e,t,n=1,r=0,i=!0){e.pathLength=1;const s=i?JI:XI;e[s.offset]=W.transform(-r);const a=W.transform(t),o=W.transform(n);e[s.array]=`${a} ${o}`}function Y0(e,t,n){return typeof e=="string"?e:W.transform(t+n*e)}function eD(e,t,n){const r=Y0(t,e.x,e.width),i=Y0(n,e.y,e.height);return`${r} ${i}`}function pg(e,{attrX:t,attrY:n,attrScale:r,originX:i,originY:s,pathLength:a,pathSpacing:o=1,pathOffset:l=0,...u},c,d){if(hg(e,u,d),c){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:h,style:m,dimensions:g}=e;h.transform&&(g&&(m.transform=h.transform),delete h.transform),g&&(i!==void 0||s!==void 0||m.transform)&&(m.transformOrigin=eD(g,i!==void 0?i:.5,s!==void 0?s:.5)),t!==void 0&&(h.x=t),n!==void 0&&(h.y=n),r!==void 0&&(h.scale=r),a!==void 0&&ZI(h,a,o,l,!1)}const mg=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),iT=()=>({...mg(),attrs:{}}),vg=e=>typeof e=="string"&&e.toLowerCase()==="svg";function sT(e,{style:t,vars:n},r,i){Object.assign(e.style,t,i&&i.getProjectionStyles(r));for(const s in n)e.style.setProperty(s,n[s])}const aT=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function oT(e,t,n,r){sT(e,t,void 0,r);for(const i in t.attrs)e.setAttribute(aT.has(i)?i:og(i),t.attrs[i])}const zo={};function tD(e){Object.assign(zo,e)}function lT(e,{layout:t,layoutId:n}){return zr.has(e)||e.startsWith("origin")||(t||n!==void 0)&&(!!zo[e]||e==="opacity")}function gg(e,t,n){var r;const{style:i}=e,s={};for(const a in i)(ut(i[a])||t.style&&ut(t.style[a])||lT(a,e)||((r=n==null?void 0:n.getValue(a))===null||r===void 0?void 0:r.liveStyle)!==void 0)&&(s[a]=i[a]);return s}function uT(e,t,n){const r=gg(e,t,n);for(const i in e)if(ut(e[i])||ut(t[i])){const s=zi.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[s]=e[i]}return r}function nD(e,t){try{t.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{t.dimensions={x:0,y:0,width:0,height:0}}}const Q0=["x","y","width","height","cx","cy","r"],rD={useVisualState:eT({scrapeMotionValuesFromProps:uT,createRenderState:iT,onUpdate:({props:e,prevProps:t,current:n,renderState:r,latestValues:i})=>{if(!n)return;let s=!!e.drag;if(!s){for(const o in i)if(zr.has(o)){s=!0;break}}if(!s)return;let a=!t;if(t)for(let o=0;o<Q0.length;o++){const l=Q0[o];e[l]!==t[l]&&(a=!0)}a&&ke.read(()=>{nD(n,r),ke.render(()=>{pg(r,i,vg(n.tagName),e.transformTemplate),oT(n,r)})})}})},iD={useVisualState:eT({scrapeMotionValuesFromProps:gg,createRenderState:mg})};function cT(e,t,n){for(const r in t)!ut(t[r])&&!lT(r,n)&&(e[r]=t[r])}function sD({transformTemplate:e},t){return S.useMemo(()=>{const n=mg();return hg(n,t,e),Object.assign({},n.vars,n.style)},[t])}function aD(e,t){const n=e.style||{},r={};return cT(r,n,e),Object.assign(r,sD(e,t)),r}function oD(e,t){const n={},r=aD(e,t);return e.drag&&e.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=r,n}function lD(e,t,n,r){const i=S.useMemo(()=>{const s=iT();return pg(s,t,vg(r),e.transformTemplate),{...s.attrs,style:{...s.style}}},[t]);if(e.style){const s={};cT(s,e.style,e),i.style={...s,...i.style}}return i}function uD(e=!1){return(n,r,i,{latestValues:s},a)=>{const l=(ug(n)?lD:oD)(r,s,a,n),u=kI(r,typeof n=="string",e),c=n!==S.Fragment?{...u,...l,ref:i}:{},{children:d}=r,h=S.useMemo(()=>ut(d)?d.get():d,[d]);return S.createElement(n,{...c,children:h})}}function cD(e,t){return function(r,{forwardMotionProps:i}={forwardMotionProps:!1}){const a={...ug(r)?rD:iD,preloadedFeatures:e,useRender:uD(i),createVisualElement:t,Component:r};return AI(a)}}function dT(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}function xl(e,t,n){const r=e.getProps();return cg(r,t,n!==void 0?n:r.custom,e)}const dD=ig(()=>window.ScrollTimeline!==void 0);class fD{constructor(t){this.stop=()=>this.runAll("stop"),this.animations=t.filter(Boolean)}get finished(){return Promise.all(this.animations.map(t=>"finished"in t?t.finished:t))}getAll(t){return this.animations[0][t]}setAll(t,n){for(let r=0;r<this.animations.length;r++)this.animations[r][t]=n}attachTimeline(t,n){const r=this.animations.map(i=>{if(dD()&&i.attachTimeline)return i.attachTimeline(t);if(typeof n=="function")return n(i)});return()=>{r.forEach((i,s)=>{i&&i(),this.animations[s].stop()})}}get time(){return this.getAll("time")}set time(t){this.setAll("time",t)}get speed(){return this.getAll("speed")}set speed(t){this.setAll("speed",t)}get startTime(){return this.getAll("startTime")}get duration(){let t=0;for(let n=0;n<this.animations.length;n++)t=Math.max(t,this.animations[n].duration);return t}runAll(t){this.animations.forEach(n=>n[t]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class hD extends fD{then(t,n){return Promise.all(this.animations).then(t).catch(n)}}function yg(e,t){return e?e[t]||e.default||e:void 0}const Fm=2e4;function fT(e){let t=0;const n=50;let r=e.next(t);for(;!r.done&&t<Fm;)t+=n,r=e.next(t);return t>=Fm?1/0:t}function xg(e){return typeof e=="function"}function J0(e,t){e.timeline=t,e.onfinish=null}const bg=e=>Array.isArray(e)&&typeof e[0]=="number",pD={linearEasing:void 0};function mD(e,t){const n=ig(e);return()=>{var r;return(r=pD[t])!==null&&r!==void 0?r:n()}}const Uo=mD(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),hT=(e,t,n=10)=>{let r="";const i=Math.max(Math.round(t/n),2);for(let s=0;s<i;s++)r+=e(Oi(0,i-1,s))+", ";return`linear(${r.substring(0,r.length-2)})`};function pT(e){return!!(typeof e=="function"&&Uo()||!e||typeof e=="string"&&(e in Vm||Uo())||bg(e)||Array.isArray(e)&&e.every(pT))}const Ss=([e,t,n,r])=>`cubic-bezier(${e}, ${t}, ${n}, ${r})`,Vm={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Ss([0,.65,.55,1]),circOut:Ss([.55,0,1,.45]),backIn:Ss([.31,.01,.66,-.59]),backOut:Ss([.33,1.53,.69,.99])};function mT(e,t){if(e)return typeof e=="function"&&Uo()?hT(e,t):bg(e)?Ss(e):Array.isArray(e)?e.map(n=>mT(n,t)||Vm.easeOut):Vm[e]}const Yt={x:!1,y:!1};function vT(){return Yt.x||Yt.y}function vD(e,t,n){var r;if(e instanceof Element)return[e];if(typeof e=="string"){let i=document;const s=(r=void 0)!==null&&r!==void 0?r:i.querySelectorAll(e);return s?Array.from(s):[]}return Array.from(e)}function gT(e,t){const n=vD(e),r=new AbortController,i={passive:!0,...t,signal:r.signal};return[n,i,()=>r.abort()]}function X0(e){return t=>{t.pointerType==="touch"||vT()||e(t)}}function gD(e,t,n={}){const[r,i,s]=gT(e,n),a=X0(o=>{const{target:l}=o,u=t(o);if(typeof u!="function"||!l)return;const c=X0(d=>{u(d),l.removeEventListener("pointerleave",c)});l.addEventListener("pointerleave",c,i)});return r.forEach(o=>{o.addEventListener("pointerenter",a,i)}),s}const yT=(e,t)=>t?e===t?!0:yT(e,t.parentElement):!1,wg=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1,yD=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function xD(e){return yD.has(e.tagName)||e.tabIndex!==-1}const _s=new WeakSet;function Z0(e){return t=>{t.key==="Enter"&&e(t)}}function Du(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const bD=(e,t)=>{const n=e.currentTarget;if(!n)return;const r=Z0(()=>{if(_s.has(n))return;Du(n,"down");const i=Z0(()=>{Du(n,"up")}),s=()=>Du(n,"cancel");n.addEventListener("keyup",i,t),n.addEventListener("blur",s,t)});n.addEventListener("keydown",r,t),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),t)};function ex(e){return wg(e)&&!vT()}function wD(e,t,n={}){const[r,i,s]=gT(e,n),a=o=>{const l=o.currentTarget;if(!ex(o)||_s.has(l))return;_s.add(l);const u=t(o),c=(m,g)=>{window.removeEventListener("pointerup",d),window.removeEventListener("pointercancel",h),!(!ex(m)||!_s.has(l))&&(_s.delete(l),typeof u=="function"&&u(m,{success:g}))},d=m=>{c(m,n.useGlobalTarget||yT(l,m.target))},h=m=>{c(m,!1)};window.addEventListener("pointerup",d,i),window.addEventListener("pointercancel",h,i)};return r.forEach(o=>{!xD(o)&&o.getAttribute("tabindex")===null&&(o.tabIndex=0),(n.useGlobalTarget?window:o).addEventListener("pointerdown",a,i),o.addEventListener("focus",u=>bD(u,i),i)}),s}function SD(e){return e==="x"||e==="y"?Yt[e]?null:(Yt[e]=!0,()=>{Yt[e]=!1}):Yt.x||Yt.y?null:(Yt.x=Yt.y=!0,()=>{Yt.x=Yt.y=!1})}const xT=new Set(["width","height","top","left","right","bottom",...zi]);let vo;function _D(){vo=void 0}const mn={now:()=>(vo===void 0&&mn.set(Ze.isProcessing||yI.useManualTiming?Ze.timestamp:performance.now()),vo),set:e=>{vo=e,queueMicrotask(_D)}};function Sg(e,t){e.indexOf(t)===-1&&e.push(t)}function _g(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}class kg{constructor(){this.subscriptions=[]}add(t){return Sg(this.subscriptions,t),()=>_g(this.subscriptions,t)}notify(t,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](t,n,r);else for(let s=0;s<i;s++){const a=this.subscriptions[s];a&&a(t,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function bT(e,t){return t?e*(1e3/t):0}const tx=30,kD=e=>!isNaN(parseFloat(e));class CD{constructor(t,n={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,i=!0)=>{const s=mn.now();this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(t),this.owner=n.owner}setCurrent(t){this.current=t,this.updatedAt=mn.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=kD(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,n){this.events[t]||(this.events[t]=new kg);const r=this.events[t].add(n);return t==="change"?()=>{r(),ke.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,n){this.passiveEffect=t,this.stopPassiveEffect=n}set(t,n=!0){!n||!this.passiveEffect?this.updateAndNotify(t,n):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-r}jump(t,n=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=mn.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>tx)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,tx);return bT(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(t){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=t(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function ca(e,t){return new CD(e,t)}function ED(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,ca(n))}function TD(e,t){const n=xl(e,t);let{transitionEnd:r={},transition:i={},...s}=n||{};s={...s,...r};for(const a in s){const o=FI(s[a]);ED(e,a,o)}}function jD(e){return!!(ut(e)&&e.add)}function $m(e,t){const n=e.getValue("willChange");if(jD(n))return n.add(t)}function wT(e){return e.props[JE]}const ST=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,ND=1e-7,MD=12;function PD(e,t,n,r,i){let s,a,o=0;do a=t+(n-t)/2,s=ST(a,r,i)-e,s>0?n=a:t=a;while(Math.abs(s)>ND&&++o<MD);return a}function xa(e,t,n,r){if(e===t&&n===r)return Nt;const i=s=>PD(s,0,1,e,n);return s=>s===0||s===1?s:ST(i(s),t,r)}const _T=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,kT=e=>t=>1-e(1-t),CT=xa(.33,1.53,.69,.99),Cg=kT(CT),ET=_T(Cg),TT=e=>(e*=2)<1?.5*Cg(e):.5*(2-Math.pow(2,-10*(e-1))),Eg=e=>1-Math.sin(Math.acos(e)),jT=kT(Eg),NT=_T(Eg),MT=e=>/^0[^.\s]+$/u.test(e);function RD(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||MT(e):!0}const Vs=e=>Math.round(e*1e5)/1e5,Tg=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function AD(e){return e==null}const ID=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,jg=(e,t)=>n=>!!(typeof n=="string"&&ID.test(n)&&n.startsWith(e)||t&&!AD(n)&&Object.prototype.hasOwnProperty.call(n,t)),PT=(e,t,n)=>r=>{if(typeof r!="string")return r;const[i,s,a,o]=r.match(Tg);return{[e]:parseFloat(i),[t]:parseFloat(s),[n]:parseFloat(a),alpha:o!==void 0?parseFloat(o):1}},DD=e=>Dn(0,255,e),Lu={...Ui,transform:e=>Math.round(DD(e))},Mr={test:jg("rgb","red"),parse:PT("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:r=1})=>"rgba("+Lu.transform(e)+", "+Lu.transform(t)+", "+Lu.transform(n)+", "+Vs(ua.transform(r))+")"};function LD(e){let t="",n="",r="",i="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),r=e.substring(5,7),i=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),r=e.substring(3,4),i=e.substring(4,5),t+=t,n+=n,r+=r,i+=i),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const Bm={test:jg("#"),parse:LD,transform:Mr.transform},bi={test:jg("hsl","hue"),parse:PT("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:r=1})=>"hsla("+Math.round(e)+", "+pn.transform(Vs(t))+", "+pn.transform(Vs(n))+", "+Vs(ua.transform(r))+")"},ot={test:e=>Mr.test(e)||Bm.test(e)||bi.test(e),parse:e=>Mr.test(e)?Mr.parse(e):bi.test(e)?bi.parse(e):Bm.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?Mr.transform(e):bi.transform(e)},OD=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function qD(e){var t,n;return isNaN(e)&&typeof e=="string"&&(((t=e.match(Tg))===null||t===void 0?void 0:t.length)||0)+(((n=e.match(OD))===null||n===void 0?void 0:n.length)||0)>0}const RT="number",AT="color",FD="var",VD="var(",nx="${}",$D=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function da(e){const t=e.toString(),n=[],r={color:[],number:[],var:[]},i=[];let s=0;const o=t.replace($D,l=>(ot.test(l)?(r.color.push(s),i.push(AT),n.push(ot.parse(l))):l.startsWith(VD)?(r.var.push(s),i.push(FD),n.push(l)):(r.number.push(s),i.push(RT),n.push(parseFloat(l))),++s,nx)).split(nx);return{values:n,split:o,indexes:r,types:i}}function IT(e){return da(e).values}function DT(e){const{split:t,types:n}=da(e),r=t.length;return i=>{let s="";for(let a=0;a<r;a++)if(s+=t[a],i[a]!==void 0){const o=n[a];o===RT?s+=Vs(i[a]):o===AT?s+=ot.transform(i[a]):s+=i[a]}return s}}const BD=e=>typeof e=="number"?0:e;function zD(e){const t=IT(e);return DT(e)(t.map(BD))}const hr={test:qD,parse:IT,createTransformer:DT,getAnimatableNone:zD},UD=new Set(["brightness","contrast","saturate","opacity"]);function GD(e){const[t,n]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[r]=n.match(Tg)||[];if(!r)return e;const i=n.replace(r,"");let s=UD.has(t)?1:0;return r!==n&&(s*=100),t+"("+s+i+")"}const HD=/\b([a-z-]*)\(.*?\)/gu,zm={...hr,getAnimatableNone:e=>{const t=e.match(HD);return t?t.map(GD).join(" "):e}},WD={...fg,color:ot,backgroundColor:ot,outlineColor:ot,fill:ot,stroke:ot,borderColor:ot,borderTopColor:ot,borderRightColor:ot,borderBottomColor:ot,borderLeftColor:ot,filter:zm,WebkitFilter:zm},Ng=e=>WD[e];function LT(e,t){let n=Ng(e);return n!==zm&&(n=hr),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const KD=new Set(["auto","none","0"]);function YD(e,t,n){let r=0,i;for(;r<e.length&&!i;){const s=e[r];typeof s=="string"&&!KD.has(s)&&da(s).values.length&&(i=e[r]),r++}if(i&&n)for(const s of t)e[s]=LT(n,i)}const rx=e=>e===Ui||e===W,ix=(e,t)=>parseFloat(e.split(", ")[t]),sx=(e,t)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const i=r.match(/^matrix3d\((.+)\)$/u);if(i)return ix(i[1],t);{const s=r.match(/^matrix\((.+)\)$/u);return s?ix(s[1],e):0}},QD=new Set(["x","y","z"]),JD=zi.filter(e=>!QD.has(e));function XD(e){const t=[];return JD.forEach(n=>{const r=e.getValue(n);r!==void 0&&(t.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),t}const Fi={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:sx(4,13),y:sx(5,14)};Fi.translateX=Fi.x;Fi.translateY=Fi.y;const Ir=new Set;let Um=!1,Gm=!1;function OT(){if(Gm){const e=Array.from(Ir).filter(r=>r.needsMeasurement),t=new Set(e.map(r=>r.element)),n=new Map;t.forEach(r=>{const i=XD(r);i.length&&(n.set(r,i),r.render())}),e.forEach(r=>r.measureInitialState()),t.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([s,a])=>{var o;(o=r.getValue(s))===null||o===void 0||o.set(a)})}),e.forEach(r=>r.measureEndState()),e.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}Gm=!1,Um=!1,Ir.forEach(e=>e.complete()),Ir.clear()}function qT(){Ir.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(Gm=!0)})}function ZD(){qT(),OT()}class Mg{constructor(t,n,r,i,s,a=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...t],this.onComplete=n,this.name=r,this.motionValue=i,this.element=s,this.isAsync=a}scheduleResolve(){this.isScheduled=!0,this.isAsync?(Ir.add(this),Um||(Um=!0,ke.read(qT),ke.resolveKeyframes(OT))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:n,element:r,motionValue:i}=this;for(let s=0;s<t.length;s++)if(t[s]===null)if(s===0){const a=i==null?void 0:i.get(),o=t[t.length-1];if(a!==void 0)t[0]=a;else if(r&&n){const l=r.readValue(n,o);l!=null&&(t[0]=l)}t[0]===void 0&&(t[0]=o),i&&a===void 0&&i.set(t[0])}else t[s]=t[s-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),Ir.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,Ir.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const FT=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e),e2=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function t2(e){const t=e2.exec(e);if(!t)return[,];const[,n,r,i]=t;return[`--${n??r}`,i]}function VT(e,t,n=1){const[r,i]=t2(e);if(!r)return;const s=window.getComputedStyle(t).getPropertyValue(r);if(s){const a=s.trim();return FT(a)?parseFloat(a):a}return dg(i)?VT(i,t,n+1):i}const $T=e=>t=>t.test(e),n2={test:e=>e==="auto",parse:e=>e},BT=[Ui,W,pn,Wn,GI,UI,n2],ax=e=>BT.find($T(e));class zT extends Mg{constructor(t,n,r,i,s){super(t,n,r,i,s,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let l=0;l<t.length;l++){let u=t[l];if(typeof u=="string"&&(u=u.trim(),dg(u))){const c=VT(u,n.current);c!==void 0&&(t[l]=c),l===t.length-1&&(this.finalKeyframe=u)}}if(this.resolveNoneKeyframes(),!xT.has(r)||t.length!==2)return;const[i,s]=t,a=ax(i),o=ax(s);if(a!==o)if(rx(a)&&rx(o))for(let l=0;l<t.length;l++){const u=t[l];typeof u=="string"&&(t[l]=parseFloat(u))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:n}=this,r=[];for(let i=0;i<t.length;i++)RD(t[i])&&r.push(i);r.length&&YD(t,r,n)}measureInitialState(){const{element:t,unresolvedKeyframes:n,name:r}=this;if(!t||!t.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Fi[r](t.measureViewportBox(),window.getComputedStyle(t.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&t.getValue(r,i).jump(i,!1)}measureEndState(){var t;const{element:n,name:r,unresolvedKeyframes:i}=this;if(!n||!n.current)return;const s=n.getValue(r);s&&s.jump(this.measuredOrigin,!1);const a=i.length-1,o=i[a];i[a]=Fi[r](n.measureViewportBox(),window.getComputedStyle(n.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),!((t=this.removedTransforms)===null||t===void 0)&&t.length&&this.removedTransforms.forEach(([l,u])=>{n.getValue(l).set(u)}),this.resolveNoneKeyframes()}}const ox=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(hr.test(e)||e==="0")&&!e.startsWith("url("));function r2(e){const t=e[0];if(e.length===1)return!0;for(let n=0;n<e.length;n++)if(e[n]!==t)return!0}function i2(e,t,n,r){const i=e[0];if(i===null)return!1;if(t==="display"||t==="visibility")return!0;const s=e[e.length-1],a=ox(i,t),o=ox(s,t);return!a||!o?!1:r2(e)||(n==="spring"||xg(n))&&r}const s2=e=>e!==null;function bl(e,{repeat:t,repeatType:n="loop"},r){const i=e.filter(s2),s=t&&n!=="loop"&&t%2===1?0:i.length-1;return!s||r===void 0?i[s]:r}const a2=40;class UT{constructor({autoplay:t=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:s=0,repeatType:a="loop",...o}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=mn.now(),this.options={autoplay:t,delay:n,type:r,repeat:i,repeatDelay:s,repeatType:a,...o},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>a2?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&ZD(),this._resolved}onKeyframesResolved(t,n){this.resolvedAt=mn.now(),this.hasAttemptedResolve=!0;const{name:r,type:i,velocity:s,delay:a,onComplete:o,onUpdate:l,isGenerator:u}=this.options;if(!u&&!i2(t,r,i,s))if(a)this.options.duration=0;else{l&&l(bl(t,this.options,n)),o&&o(),this.resolveFinishedPromise();return}const c=this.initPlayback(t,n);c!==!1&&(this._resolved={keyframes:t,finalKeyframe:n,...c},this.onPostResolved())}onPostResolved(){}then(t,n){return this.currentFinishedPromise.then(t,n)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(t=>{this.resolveFinishedPromise=t})}}const Ne=(e,t,n)=>e+(t-e)*n;function Ou(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function o2({hue:e,saturation:t,lightness:n,alpha:r}){e/=360,t/=100,n/=100;let i=0,s=0,a=0;if(!t)i=s=a=n;else{const o=n<.5?n*(1+t):n+t-n*t,l=2*n-o;i=Ou(l,o,e+1/3),s=Ou(l,o,e),a=Ou(l,o,e-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(a*255),alpha:r}}function Go(e,t){return n=>n>0?t:e}const qu=(e,t,n)=>{const r=e*e,i=n*(t*t-r)+r;return i<0?0:Math.sqrt(i)},l2=[Bm,Mr,bi],u2=e=>l2.find(t=>t.test(e));function lx(e){const t=u2(e);if(!t)return!1;let n=t.parse(e);return t===bi&&(n=o2(n)),n}const ux=(e,t)=>{const n=lx(e),r=lx(t);if(!n||!r)return Go(e,t);const i={...n};return s=>(i.red=qu(n.red,r.red,s),i.green=qu(n.green,r.green,s),i.blue=qu(n.blue,r.blue,s),i.alpha=Ne(n.alpha,r.alpha,s),Mr.transform(i))},c2=(e,t)=>n=>t(e(n)),ba=(...e)=>e.reduce(c2),Hm=new Set(["none","hidden"]);function d2(e,t){return Hm.has(e)?n=>n<=0?e:t:n=>n>=1?t:e}function f2(e,t){return n=>Ne(e,t,n)}function Pg(e){return typeof e=="number"?f2:typeof e=="string"?dg(e)?Go:ot.test(e)?ux:m2:Array.isArray(e)?GT:typeof e=="object"?ot.test(e)?ux:h2:Go}function GT(e,t){const n=[...e],r=n.length,i=e.map((s,a)=>Pg(s)(s,t[a]));return s=>{for(let a=0;a<r;a++)n[a]=i[a](s);return n}}function h2(e,t){const n={...e,...t},r={};for(const i in n)e[i]!==void 0&&t[i]!==void 0&&(r[i]=Pg(e[i])(e[i],t[i]));return i=>{for(const s in r)n[s]=r[s](i);return n}}function p2(e,t){var n;const r=[],i={color:0,var:0,number:0};for(let s=0;s<t.values.length;s++){const a=t.types[s],o=e.indexes[a][i[a]],l=(n=e.values[o])!==null&&n!==void 0?n:0;r[s]=l,i[a]++}return r}const m2=(e,t)=>{const n=hr.createTransformer(t),r=da(e),i=da(t);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?Hm.has(e)&&!i.values.length||Hm.has(t)&&!r.values.length?d2(e,t):ba(GT(p2(r,i),i.values),n):Go(e,t)};function HT(e,t,n){return typeof e=="number"&&typeof t=="number"&&typeof n=="number"?Ne(e,t,n):Pg(e)(e,t)}const v2=5;function WT(e,t,n){const r=Math.max(t-v2,0);return bT(n-e(r),t-r)}const De={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Fu=.001;function g2({duration:e=De.duration,bounce:t=De.bounce,velocity:n=De.velocity,mass:r=De.mass}){let i,s,a=1-t;a=Dn(De.minDamping,De.maxDamping,a),e=Dn(De.minDuration,De.maxDuration,Mn(e)),a<1?(i=u=>{const c=u*a,d=c*e,h=c-n,m=Wm(u,a),g=Math.exp(-d);return Fu-h/m*g},s=u=>{const d=u*a*e,h=d*n+n,m=Math.pow(a,2)*Math.pow(u,2)*e,g=Math.exp(-d),p=Wm(Math.pow(u,2),a);return(-i(u)+Fu>0?-1:1)*((h-m)*g)/p}):(i=u=>{const c=Math.exp(-u*e),d=(u-n)*e+1;return-Fu+c*d},s=u=>{const c=Math.exp(-u*e),d=(n-u)*(e*e);return c*d});const o=5/e,l=x2(i,s,o);if(e=Nn(e),isNaN(l))return{stiffness:De.stiffness,damping:De.damping,duration:e};{const u=Math.pow(l,2)*r;return{stiffness:u,damping:a*2*Math.sqrt(r*u),duration:e}}}const y2=12;function x2(e,t,n){let r=n;for(let i=1;i<y2;i++)r=r-e(r)/t(r);return r}function Wm(e,t){return e*Math.sqrt(1-t*t)}const b2=["duration","bounce"],w2=["stiffness","damping","mass"];function cx(e,t){return t.some(n=>e[n]!==void 0)}function S2(e){let t={velocity:De.velocity,stiffness:De.stiffness,damping:De.damping,mass:De.mass,isResolvedFromDuration:!1,...e};if(!cx(e,w2)&&cx(e,b2))if(e.visualDuration){const n=e.visualDuration,r=2*Math.PI/(n*1.2),i=r*r,s=2*Dn(.05,1,1-(e.bounce||0))*Math.sqrt(i);t={...t,mass:De.mass,stiffness:i,damping:s}}else{const n=g2(e);t={...t,...n,mass:De.mass},t.isResolvedFromDuration=!0}return t}function KT(e=De.visualDuration,t=De.bounce){const n=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:r,restDelta:i}=n;const s=n.keyframes[0],a=n.keyframes[n.keyframes.length-1],o={done:!1,value:s},{stiffness:l,damping:u,mass:c,duration:d,velocity:h,isResolvedFromDuration:m}=S2({...n,velocity:-Mn(n.velocity||0)}),g=h||0,p=u/(2*Math.sqrt(l*c)),b=a-s,v=Mn(Math.sqrt(l/c)),y=Math.abs(b)<5;r||(r=y?De.restSpeed.granular:De.restSpeed.default),i||(i=y?De.restDelta.granular:De.restDelta.default);let x;if(p<1){const k=Wm(v,p);x=E=>{const j=Math.exp(-p*v*E);return a-j*((g+p*v*b)/k*Math.sin(k*E)+b*Math.cos(k*E))}}else if(p===1)x=k=>a-Math.exp(-v*k)*(b+(g+v*b)*k);else{const k=v*Math.sqrt(p*p-1);x=E=>{const j=Math.exp(-p*v*E),T=Math.min(k*E,300);return a-j*((g+p*v*b)*Math.sinh(T)+k*b*Math.cosh(T))/k}}const _={calculatedDuration:m&&d||null,next:k=>{const E=x(k);if(m)o.done=k>=d;else{let j=0;p<1&&(j=k===0?Nn(g):WT(x,k,E));const T=Math.abs(j)<=r,M=Math.abs(a-E)<=i;o.done=T&&M}return o.value=o.done?a:E,o},toString:()=>{const k=Math.min(fT(_),Fm),E=hT(j=>_.next(k*j).value,k,30);return k+"ms "+E}};return _}function dx({keyframes:e,velocity:t=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:a,min:o,max:l,restDelta:u=.5,restSpeed:c}){const d=e[0],h={done:!1,value:d},m=T=>o!==void 0&&T<o||l!==void 0&&T>l,g=T=>o===void 0?l:l===void 0||Math.abs(o-T)<Math.abs(l-T)?o:l;let p=n*t;const b=d+p,v=a===void 0?b:a(b);v!==b&&(p=v-d);const y=T=>-p*Math.exp(-T/r),x=T=>v+y(T),_=T=>{const M=y(T),D=x(T);h.done=Math.abs(M)<=u,h.value=h.done?v:D};let k,E;const j=T=>{m(h.value)&&(k=T,E=KT({keyframes:[h.value,g(h.value)],velocity:WT(x,T,h.value),damping:i,stiffness:s,restDelta:u,restSpeed:c}))};return j(0),{calculatedDuration:null,next:T=>{let M=!1;return!E&&k===void 0&&(M=!0,_(T),j(T)),k!==void 0&&T>=k?E.next(T-k):(!M&&_(T),h)}}}const _2=xa(.42,0,1,1),k2=xa(0,0,.58,1),YT=xa(.42,0,.58,1),C2=e=>Array.isArray(e)&&typeof e[0]!="number",E2={linear:Nt,easeIn:_2,easeInOut:YT,easeOut:k2,circIn:Eg,circInOut:NT,circOut:jT,backIn:Cg,backInOut:ET,backOut:CT,anticipate:TT},fx=e=>{if(bg(e)){HE(e.length===4);const[t,n,r,i]=e;return xa(t,n,r,i)}else if(typeof e=="string")return E2[e];return e};function T2(e,t,n){const r=[],i=n||HT,s=e.length-1;for(let a=0;a<s;a++){let o=i(e[a],e[a+1]);if(t){const l=Array.isArray(t)?t[a]||Nt:t;o=ba(l,o)}r.push(o)}return r}function j2(e,t,{clamp:n=!0,ease:r,mixer:i}={}){const s=e.length;if(HE(s===t.length),s===1)return()=>t[0];if(s===2&&t[0]===t[1])return()=>t[1];const a=e[0]===e[1];e[0]>e[s-1]&&(e=[...e].reverse(),t=[...t].reverse());const o=T2(t,r,i),l=o.length,u=c=>{if(a&&c<e[0])return t[0];let d=0;if(l>1)for(;d<e.length-2&&!(c<e[d+1]);d++);const h=Oi(e[d],e[d+1],c);return o[d](h)};return n?c=>u(Dn(e[0],e[s-1],c)):u}function N2(e,t){const n=e[e.length-1];for(let r=1;r<=t;r++){const i=Oi(0,t,r);e.push(Ne(n,1,i))}}function M2(e){const t=[0];return N2(t,e.length-1),t}function P2(e,t){return e.map(n=>n*t)}function R2(e,t){return e.map(()=>t||YT).splice(0,e.length-1)}function Ho({duration:e=300,keyframes:t,times:n,ease:r="easeInOut"}){const i=C2(r)?r.map(fx):fx(r),s={done:!1,value:t[0]},a=P2(n&&n.length===t.length?n:M2(t),e),o=j2(a,t,{ease:Array.isArray(i)?i:R2(t,i)});return{calculatedDuration:e,next:l=>(s.value=o(l),s.done=l>=e,s)}}const A2=e=>{const t=({timestamp:n})=>e(n);return{start:()=>ke.update(t,!0),stop:()=>fr(t),now:()=>Ze.isProcessing?Ze.timestamp:mn.now()}},I2={decay:dx,inertia:dx,tween:Ho,keyframes:Ho,spring:KT},D2=e=>e/100;class Rg extends UT{constructor(t){super(t),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:l}=this.options;l&&l()};const{name:n,motionValue:r,element:i,keyframes:s}=this.options,a=(i==null?void 0:i.KeyframeResolver)||Mg,o=(l,u)=>this.onKeyframesResolved(l,u);this.resolver=new a(s,o,n,r,i),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(t){const{type:n="keyframes",repeat:r=0,repeatDelay:i=0,repeatType:s,velocity:a=0}=this.options,o=xg(n)?n:I2[n]||Ho;let l,u;o!==Ho&&typeof t[0]!="number"&&(l=ba(D2,HT(t[0],t[1])),t=[0,100]);const c=o({...this.options,keyframes:t});s==="mirror"&&(u=o({...this.options,keyframes:[...t].reverse(),velocity:-a})),c.calculatedDuration===null&&(c.calculatedDuration=fT(c));const{calculatedDuration:d}=c,h=d+i,m=h*(r+1)-i;return{generator:c,mirroredGenerator:u,mapPercentToKeyframes:l,calculatedDuration:d,resolvedDuration:h,totalDuration:m}}onPostResolved(){const{autoplay:t=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!t?this.pause():this.state=this.pendingPlayState}tick(t,n=!1){const{resolved:r}=this;if(!r){const{keyframes:T}=this.options;return{done:!0,value:T[T.length-1]}}const{finalKeyframe:i,generator:s,mirroredGenerator:a,mapPercentToKeyframes:o,keyframes:l,calculatedDuration:u,totalDuration:c,resolvedDuration:d}=r;if(this.startTime===null)return s.next(0);const{delay:h,repeat:m,repeatType:g,repeatDelay:p,onUpdate:b}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-c/this.speed,this.startTime)),n?this.currentTime=t:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(t-this.startTime)*this.speed;const v=this.currentTime-h*(this.speed>=0?1:-1),y=this.speed>=0?v<0:v>c;this.currentTime=Math.max(v,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=c);let x=this.currentTime,_=s;if(m){const T=Math.min(this.currentTime,c)/d;let M=Math.floor(T),D=T%1;!D&&T>=1&&(D=1),D===1&&M--,M=Math.min(M,m+1),!!(M%2)&&(g==="reverse"?(D=1-D,p&&(D-=p/d)):g==="mirror"&&(_=a)),x=Dn(0,1,D)*d}const k=y?{done:!1,value:l[0]}:_.next(x);o&&(k.value=o(k.value));let{done:E}=k;!y&&u!==null&&(E=this.speed>=0?this.currentTime>=c:this.currentTime<=0);const j=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&E);return j&&i!==void 0&&(k.value=bl(l,this.options,i)),b&&b(k.value),j&&this.finish(),k}get duration(){const{resolved:t}=this;return t?Mn(t.calculatedDuration):0}get time(){return Mn(this.currentTime)}set time(t){t=Nn(t),this.currentTime=t,this.holdTime!==null||this.speed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.speed)}get speed(){return this.playbackSpeed}set speed(t){const n=this.playbackSpeed!==t;this.playbackSpeed=t,n&&(this.time=Mn(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:t=A2,onPlay:n,startTime:r}=this.options;this.driver||(this.driver=t(s=>this.tick(s))),n&&n();const i=this.driver.now();this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=i):this.startTime=r??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var t;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(t=this.currentTime)!==null&&t!==void 0?t:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:t}=this.options;t&&t()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}}const L2=new Set(["opacity","clipPath","filter","transform"]);function O2(e,t,n,{delay:r=0,duration:i=300,repeat:s=0,repeatType:a="loop",ease:o="easeInOut",times:l}={}){const u={[t]:n};l&&(u.offset=l);const c=mT(o,i);return Array.isArray(c)&&(u.easing=c),e.animate(u,{delay:r,duration:i,easing:Array.isArray(c)?"linear":c,fill:"both",iterations:s+1,direction:a==="reverse"?"alternate":"normal"})}const q2=ig(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),Wo=10,F2=2e4;function V2(e){return xg(e.type)||e.type==="spring"||!pT(e.ease)}function $2(e,t){const n=new Rg({...t,keyframes:e,repeat:0,delay:0,isGenerator:!0});let r={done:!1,value:e[0]};const i=[];let s=0;for(;!r.done&&s<F2;)r=n.sample(s),i.push(r.value),s+=Wo;return{times:void 0,keyframes:i,duration:s-Wo,ease:"linear"}}const QT={anticipate:TT,backInOut:ET,circInOut:NT};function B2(e){return e in QT}class hx extends UT{constructor(t){super(t);const{name:n,motionValue:r,element:i,keyframes:s}=this.options;this.resolver=new zT(s,(a,o)=>this.onKeyframesResolved(a,o),n,r,i),this.resolver.scheduleResolve()}initPlayback(t,n){let{duration:r=300,times:i,ease:s,type:a,motionValue:o,name:l,startTime:u}=this.options;if(!o.owner||!o.owner.current)return!1;if(typeof s=="string"&&Uo()&&B2(s)&&(s=QT[s]),V2(this.options)){const{onComplete:d,onUpdate:h,motionValue:m,element:g,...p}=this.options,b=$2(t,p);t=b.keyframes,t.length===1&&(t[1]=t[0]),r=b.duration,i=b.times,s=b.ease,a="keyframes"}const c=O2(o.owner.current,l,t,{...this.options,duration:r,times:i,ease:s});return c.startTime=u??this.calcStartTime(),this.pendingTimeline?(J0(c,this.pendingTimeline),this.pendingTimeline=void 0):c.onfinish=()=>{const{onComplete:d}=this.options;o.set(bl(t,this.options,n)),d&&d(),this.cancel(),this.resolveFinishedPromise()},{animation:c,duration:r,times:i,type:a,ease:s,keyframes:t}}get duration(){const{resolved:t}=this;if(!t)return 0;const{duration:n}=t;return Mn(n)}get time(){const{resolved:t}=this;if(!t)return 0;const{animation:n}=t;return Mn(n.currentTime||0)}set time(t){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.currentTime=Nn(t)}get speed(){const{resolved:t}=this;if(!t)return 1;const{animation:n}=t;return n.playbackRate}set speed(t){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.playbackRate=t}get state(){const{resolved:t}=this;if(!t)return"idle";const{animation:n}=t;return n.playState}get startTime(){const{resolved:t}=this;if(!t)return null;const{animation:n}=t;return n.startTime}attachTimeline(t){if(!this._resolved)this.pendingTimeline=t;else{const{resolved:n}=this;if(!n)return Nt;const{animation:r}=n;J0(r,t)}return Nt}play(){if(this.isStopped)return;const{resolved:t}=this;if(!t)return;const{animation:n}=t;n.playState==="finished"&&this.updateFinishedPromise(),n.play()}pause(){const{resolved:t}=this;if(!t)return;const{animation:n}=t;n.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:t}=this;if(!t)return;const{animation:n,keyframes:r,duration:i,type:s,ease:a,times:o}=t;if(n.playState==="idle"||n.playState==="finished")return;if(this.time){const{motionValue:u,onUpdate:c,onComplete:d,element:h,...m}=this.options,g=new Rg({...m,keyframes:r,duration:i,type:s,ease:a,times:o,isGenerator:!0}),p=Nn(this.time);u.setWithVelocity(g.sample(p-Wo).value,g.sample(p).value,Wo)}const{onStop:l}=this.options;l&&l(),this.cancel()}complete(){const{resolved:t}=this;t&&t.animation.finish()}cancel(){const{resolved:t}=this;t&&t.animation.cancel()}static supports(t){const{motionValue:n,name:r,repeatDelay:i,repeatType:s,damping:a,type:o}=t;if(!n||!n.owner||!(n.owner.current instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:u}=n.owner.getProps();return q2()&&r&&L2.has(r)&&!l&&!u&&!i&&s!=="mirror"&&a!==0&&o!=="inertia"}}const z2={type:"spring",stiffness:500,damping:25,restSpeed:10},U2=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),G2={type:"keyframes",duration:.8},H2={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},W2=(e,{keyframes:t})=>t.length>2?G2:zr.has(e)?e.startsWith("scale")?U2(t[1]):z2:H2;function K2({when:e,delay:t,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:s,repeatType:a,repeatDelay:o,from:l,elapsed:u,...c}){return!!Object.keys(c).length}const Ag=(e,t,n,r={},i,s)=>a=>{const o=yg(r,e)||{},l=o.delay||r.delay||0;let{elapsed:u=0}=r;u=u-Nn(l);let c={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:t.getVelocity(),...o,delay:-u,onUpdate:h=>{t.set(h),o.onUpdate&&o.onUpdate(h)},onComplete:()=>{a(),o.onComplete&&o.onComplete()},name:e,motionValue:t,element:s?void 0:i};K2(o)||(c={...c,...W2(e,c)}),c.duration&&(c.duration=Nn(c.duration)),c.repeatDelay&&(c.repeatDelay=Nn(c.repeatDelay)),c.from!==void 0&&(c.keyframes[0]=c.from);let d=!1;if((c.type===!1||c.duration===0&&!c.repeatDelay)&&(c.duration=0,c.delay===0&&(d=!0)),d&&!s&&t.get()!==void 0){const h=bl(c.keyframes,o);if(h!==void 0)return ke.update(()=>{c.onUpdate(h),c.onComplete()}),new hD([])}return!s&&hx.supports(c)?new hx(c):new Rg(c)};function Y2({protectedKeys:e,needsAnimating:t},n){const r=e.hasOwnProperty(n)&&t[n]!==!0;return t[n]=!1,r}function JT(e,t,{delay:n=0,transitionOverride:r,type:i}={}){var s;let{transition:a=e.getDefaultTransition(),transitionEnd:o,...l}=t;r&&(a=r);const u=[],c=i&&e.animationState&&e.animationState.getState()[i];for(const d in l){const h=e.getValue(d,(s=e.latestValues[d])!==null&&s!==void 0?s:null),m=l[d];if(m===void 0||c&&Y2(c,d))continue;const g={delay:n,...yg(a||{},d)};let p=!1;if(window.MotionHandoffAnimation){const v=wT(e);if(v){const y=window.MotionHandoffAnimation(v,d,ke);y!==null&&(g.startTime=y,p=!0)}}$m(e,d),h.start(Ag(d,h,m,e.shouldReduceMotion&&xT.has(d)?{type:!1}:g,e,p));const b=h.animation;b&&u.push(b)}return o&&Promise.all(u).then(()=>{ke.update(()=>{o&&TD(e,o)})}),u}function Km(e,t,n={}){var r;const i=xl(e,t,n.type==="exit"?(r=e.presenceContext)===null||r===void 0?void 0:r.custom:void 0);let{transition:s=e.getDefaultTransition()||{}}=i||{};n.transitionOverride&&(s=n.transitionOverride);const a=i?()=>Promise.all(JT(e,i,n)):()=>Promise.resolve(),o=e.variantChildren&&e.variantChildren.size?(u=0)=>{const{delayChildren:c=0,staggerChildren:d,staggerDirection:h}=s;return Q2(e,t,c+u,d,h,n)}:()=>Promise.resolve(),{when:l}=s;if(l){const[u,c]=l==="beforeChildren"?[a,o]:[o,a];return u().then(()=>c())}else return Promise.all([a(),o(n.delay)])}function Q2(e,t,n=0,r=0,i=1,s){const a=[],o=(e.variantChildren.size-1)*r,l=i===1?(u=0)=>u*r:(u=0)=>o-u*r;return Array.from(e.variantChildren).sort(J2).forEach((u,c)=>{u.notify("AnimationStart",t),a.push(Km(u,t,{...s,delay:n+l(c)}).then(()=>u.notify("AnimationComplete",t)))}),Promise.all(a)}function J2(e,t){return e.sortNodePosition(t)}function X2(e,t,n={}){e.notify("AnimationStart",t);let r;if(Array.isArray(t)){const i=t.map(s=>Km(e,s,n));r=Promise.all(i)}else if(typeof t=="string")r=Km(e,t,n);else{const i=typeof t=="function"?xl(e,t,n.custom):t;r=Promise.all(JT(e,i,n))}return r.then(()=>{e.notify("AnimationComplete",t)})}const Z2=ag.length;function XT(e){if(!e)return;if(!e.isControllingVariants){const n=e.parent?XT(e.parent)||{}:{};return e.props.initial!==void 0&&(n.initial=e.props.initial),n}const t={};for(let n=0;n<Z2;n++){const r=ag[n],i=e.props[r];(la(i)||i===!1)&&(t[r]=i)}return t}const eL=[...sg].reverse(),tL=sg.length;function nL(e){return t=>Promise.all(t.map(({animation:n,options:r})=>X2(e,n,r)))}function rL(e){let t=nL(e),n=px(),r=!0;const i=l=>(u,c)=>{var d;const h=xl(e,c,l==="exit"?(d=e.presenceContext)===null||d===void 0?void 0:d.custom:void 0);if(h){const{transition:m,transitionEnd:g,...p}=h;u={...u,...p,...g}}return u};function s(l){t=l(e)}function a(l){const{props:u}=e,c=XT(e.parent)||{},d=[],h=new Set;let m={},g=1/0;for(let b=0;b<tL;b++){const v=eL[b],y=n[v],x=u[v]!==void 0?u[v]:c[v],_=la(x),k=v===l?y.isActive:null;k===!1&&(g=b);let E=x===c[v]&&x!==u[v]&&_;if(E&&r&&e.manuallyAnimateOnMount&&(E=!1),y.protectedKeys={...m},!y.isActive&&k===null||!x&&!y.prevProp||gl(x)||typeof x=="boolean")continue;const j=iL(y.prevProp,x);let T=j||v===l&&y.isActive&&!E&&_||b>g&&_,M=!1;const D=Array.isArray(x)?x:[x];let R=D.reduce(i(v),{});k===!1&&(R={});const{prevResolvedValues:H={}}=y,Y={...H,...R},pe=se=>{T=!0,h.has(se)&&(M=!0,h.delete(se)),y.needsAnimating[se]=!0;const A=e.getValue(se);A&&(A.liveStyle=!1)};for(const se in Y){const A=R[se],I=H[se];if(m.hasOwnProperty(se))continue;let U=!1;qm(A)&&qm(I)?U=!dT(A,I):U=A!==I,U?A!=null?pe(se):h.add(se):A!==void 0&&h.has(se)?pe(se):y.protectedKeys[se]=!0}y.prevProp=x,y.prevResolvedValues=R,y.isActive&&(m={...m,...R}),r&&e.blockInitialAnimation&&(T=!1),T&&(!(E&&j)||M)&&d.push(...D.map(se=>({animation:se,options:{type:v}})))}if(h.size){const b={};h.forEach(v=>{const y=e.getBaseTarget(v),x=e.getValue(v);x&&(x.liveStyle=!0),b[v]=y??null}),d.push({animation:b})}let p=!!d.length;return r&&(u.initial===!1||u.initial===u.animate)&&!e.manuallyAnimateOnMount&&(p=!1),r=!1,p?t(d):Promise.resolve()}function o(l,u){var c;if(n[l].isActive===u)return Promise.resolve();(c=e.variantChildren)===null||c===void 0||c.forEach(h=>{var m;return(m=h.animationState)===null||m===void 0?void 0:m.setActive(l,u)}),n[l].isActive=u;const d=a(l);for(const h in n)n[h].protectedKeys={};return d}return{animateChanges:a,setActive:o,setAnimateFunction:s,getState:()=>n,reset:()=>{n=px(),r=!0}}}function iL(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!dT(t,e):!1}function Sr(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function px(){return{animate:Sr(!0),whileInView:Sr(),whileHover:Sr(),whileTap:Sr(),whileDrag:Sr(),whileFocus:Sr(),exit:Sr()}}class yr{constructor(t){this.isMounted=!1,this.node=t}update(){}}class sL extends yr{constructor(t){super(t),t.animationState||(t.animationState=rL(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();gl(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:n}=this.node.prevProps||{};t!==n&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)===null||t===void 0||t.call(this)}}let aL=0;class oL extends yr{constructor(){super(...arguments),this.id=aL++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===r)return;const i=this.node.animationState.setActive("exit",!t);n&&!t&&i.then(()=>n(this.id))}mount(){const{register:t}=this.node.presenceContext||{};t&&(this.unmount=t(this.id))}unmount(){}}const lL={animation:{Feature:sL},exit:{Feature:oL}};function fa(e,t,n,r={passive:!0}){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n)}function wa(e){return{point:{x:e.pageX,y:e.pageY}}}const uL=e=>t=>wg(t)&&e(t,wa(t));function $s(e,t,n,r){return fa(e,t,uL(n),r)}const mx=(e,t)=>Math.abs(e-t);function cL(e,t){const n=mx(e.x,t.x),r=mx(e.y,t.y);return Math.sqrt(n**2+r**2)}class ZT{constructor(t,n,{transformPagePoint:r,contextWindow:i,dragSnapToOrigin:s=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const d=$u(this.lastMoveEventInfo,this.history),h=this.startEvent!==null,m=cL(d.offset,{x:0,y:0})>=3;if(!h&&!m)return;const{point:g}=d,{timestamp:p}=Ze;this.history.push({...g,timestamp:p});const{onStart:b,onMove:v}=this.handlers;h||(b&&b(this.lastMoveEvent,d),this.startEvent=this.lastMoveEvent),v&&v(this.lastMoveEvent,d)},this.handlePointerMove=(d,h)=>{this.lastMoveEvent=d,this.lastMoveEventInfo=Vu(h,this.transformPagePoint),ke.update(this.updatePoint,!0)},this.handlePointerUp=(d,h)=>{this.end();const{onEnd:m,onSessionEnd:g,resumeAnimation:p}=this.handlers;if(this.dragSnapToOrigin&&p&&p(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const b=$u(d.type==="pointercancel"?this.lastMoveEventInfo:Vu(h,this.transformPagePoint),this.history);this.startEvent&&m&&m(d,b),g&&g(d,b)},!wg(t))return;this.dragSnapToOrigin=s,this.handlers=n,this.transformPagePoint=r,this.contextWindow=i||window;const a=wa(t),o=Vu(a,this.transformPagePoint),{point:l}=o,{timestamp:u}=Ze;this.history=[{...l,timestamp:u}];const{onSessionStart:c}=n;c&&c(t,$u(o,this.history)),this.removeListeners=ba($s(this.contextWindow,"pointermove",this.handlePointerMove),$s(this.contextWindow,"pointerup",this.handlePointerUp),$s(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),fr(this.updatePoint)}}function Vu(e,t){return t?{point:t(e.point)}:e}function vx(e,t){return{x:e.x-t.x,y:e.y-t.y}}function $u({point:e},t){return{point:e,delta:vx(e,ej(t)),offset:vx(e,dL(t)),velocity:fL(t,.1)}}function dL(e){return e[0]}function ej(e){return e[e.length-1]}function fL(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,r=null;const i=ej(e);for(;n>=0&&(r=e[n],!(i.timestamp-r.timestamp>Nn(t)));)n--;if(!r)return{x:0,y:0};const s=Mn(i.timestamp-r.timestamp);if(s===0)return{x:0,y:0};const a={x:(i.x-r.x)/s,y:(i.y-r.y)/s};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}const tj=1e-4,hL=1-tj,pL=1+tj,nj=.01,mL=0-nj,vL=0+nj;function Pt(e){return e.max-e.min}function gL(e,t,n){return Math.abs(e-t)<=n}function gx(e,t,n,r=.5){e.origin=r,e.originPoint=Ne(t.min,t.max,e.origin),e.scale=Pt(n)/Pt(t),e.translate=Ne(n.min,n.max,e.origin)-e.originPoint,(e.scale>=hL&&e.scale<=pL||isNaN(e.scale))&&(e.scale=1),(e.translate>=mL&&e.translate<=vL||isNaN(e.translate))&&(e.translate=0)}function Bs(e,t,n,r){gx(e.x,t.x,n.x,r?r.originX:void 0),gx(e.y,t.y,n.y,r?r.originY:void 0)}function yx(e,t,n){e.min=n.min+t.min,e.max=e.min+Pt(t)}function yL(e,t,n){yx(e.x,t.x,n.x),yx(e.y,t.y,n.y)}function xx(e,t,n){e.min=t.min-n.min,e.max=e.min+Pt(t)}function zs(e,t,n){xx(e.x,t.x,n.x),xx(e.y,t.y,n.y)}function xL(e,{min:t,max:n},r){return t!==void 0&&e<t?e=r?Ne(t,e,r.min):Math.max(e,t):n!==void 0&&e>n&&(e=r?Ne(n,e,r.max):Math.min(e,n)),e}function bx(e,t,n){return{min:t!==void 0?e.min+t:void 0,max:n!==void 0?e.max+n-(e.max-e.min):void 0}}function bL(e,{top:t,left:n,bottom:r,right:i}){return{x:bx(e.x,n,i),y:bx(e.y,t,r)}}function wx(e,t){let n=t.min-e.min,r=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,r]=[r,n]),{min:n,max:r}}function wL(e,t){return{x:wx(e.x,t.x),y:wx(e.y,t.y)}}function SL(e,t){let n=.5;const r=Pt(e),i=Pt(t);return i>r?n=Oi(t.min,t.max-r,e.min):r>i&&(n=Oi(e.min,e.max-i,t.min)),Dn(0,1,n)}function _L(e,t){const n={};return t.min!==void 0&&(n.min=t.min-e.min),t.max!==void 0&&(n.max=t.max-e.min),n}const Ym=.35;function kL(e=Ym){return e===!1?e=0:e===!0&&(e=Ym),{x:Sx(e,"left","right"),y:Sx(e,"top","bottom")}}function Sx(e,t,n){return{min:_x(e,t),max:_x(e,n)}}function _x(e,t){return typeof e=="number"?e:e[t]||0}const kx=()=>({translate:0,scale:1,origin:0,originPoint:0}),wi=()=>({x:kx(),y:kx()}),Cx=()=>({min:0,max:0}),$e=()=>({x:Cx(),y:Cx()});function qt(e){return[e("x"),e("y")]}function rj({top:e,left:t,right:n,bottom:r}){return{x:{min:t,max:n},y:{min:e,max:r}}}function CL({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function EL(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),r=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function Bu(e){return e===void 0||e===1}function Qm({scale:e,scaleX:t,scaleY:n}){return!Bu(e)||!Bu(t)||!Bu(n)}function Cr(e){return Qm(e)||ij(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function ij(e){return Ex(e.x)||Ex(e.y)}function Ex(e){return e&&e!=="0%"}function Ko(e,t,n){const r=e-n,i=t*r;return n+i}function Tx(e,t,n,r,i){return i!==void 0&&(e=Ko(e,i,r)),Ko(e,n,r)+t}function Jm(e,t=0,n=1,r,i){e.min=Tx(e.min,t,n,r,i),e.max=Tx(e.max,t,n,r,i)}function sj(e,{x:t,y:n}){Jm(e.x,t.translate,t.scale,t.originPoint),Jm(e.y,n.translate,n.scale,n.originPoint)}const jx=.999999999999,Nx=1.0000000000001;function TL(e,t,n,r=!1){const i=n.length;if(!i)return;t.x=t.y=1;let s,a;for(let o=0;o<i;o++){s=n[o],a=s.projectionDelta;const{visualElement:l}=s.options;l&&l.props.style&&l.props.style.display==="contents"||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&_i(e,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),a&&(t.x*=a.x.scale,t.y*=a.y.scale,sj(e,a)),r&&Cr(s.latestValues)&&_i(e,s.latestValues))}t.x<Nx&&t.x>jx&&(t.x=1),t.y<Nx&&t.y>jx&&(t.y=1)}function Si(e,t){e.min=e.min+t,e.max=e.max+t}function Mx(e,t,n,r,i=.5){const s=Ne(e.min,e.max,i);Jm(e,t,n,s,r)}function _i(e,t){Mx(e.x,t.x,t.scaleX,t.scale,t.originX),Mx(e.y,t.y,t.scaleY,t.scale,t.originY)}function aj(e,t){return rj(EL(e.getBoundingClientRect(),t))}function jL(e,t,n){const r=aj(e,n),{scroll:i}=t;return i&&(Si(r.x,i.offset.x),Si(r.y,i.offset.y)),r}const oj=({current:e})=>e?e.ownerDocument.defaultView:null,NL=new WeakMap;class ML{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=$e(),this.visualElement=t}start(t,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const i=c=>{const{dragSnapToOrigin:d}=this.getProps();d?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(wa(c).point)},s=(c,d)=>{const{drag:h,dragPropagation:m,onDragStart:g}=this.getProps();if(h&&!m&&(this.openDragLock&&this.openDragLock(),this.openDragLock=SD(h),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),qt(b=>{let v=this.getAxisMotionValue(b).get()||0;if(pn.test(v)){const{projection:y}=this.visualElement;if(y&&y.layout){const x=y.layout.layoutBox[b];x&&(v=Pt(x)*(parseFloat(v)/100))}}this.originPoint[b]=v}),g&&ke.postRender(()=>g(c,d)),$m(this.visualElement,"transform");const{animationState:p}=this.visualElement;p&&p.setActive("whileDrag",!0)},a=(c,d)=>{const{dragPropagation:h,dragDirectionLock:m,onDirectionLock:g,onDrag:p}=this.getProps();if(!h&&!this.openDragLock)return;const{offset:b}=d;if(m&&this.currentDirection===null){this.currentDirection=PL(b),this.currentDirection!==null&&g&&g(this.currentDirection);return}this.updateAxis("x",d.point,b),this.updateAxis("y",d.point,b),this.visualElement.render(),p&&p(c,d)},o=(c,d)=>this.stop(c,d),l=()=>qt(c=>{var d;return this.getAnimationState(c)==="paused"&&((d=this.getAxisMotionValue(c).animation)===null||d===void 0?void 0:d.play())}),{dragSnapToOrigin:u}=this.getProps();this.panSession=new ZT(t,{onSessionStart:i,onStart:s,onMove:a,onSessionEnd:o,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,contextWindow:oj(this.visualElement)})}stop(t,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:i}=n;this.startAnimation(i);const{onDragEnd:s}=this.getProps();s&&ke.postRender(()=>s(t,n))}cancel(){this.isDragging=!1;const{projection:t,animationState:n}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(t,n,r){const{drag:i}=this.getProps();if(!r||!Xa(t,i,this.currentDirection))return;const s=this.getAxisMotionValue(t);let a=this.originPoint[t]+r[t];this.constraints&&this.constraints[t]&&(a=xL(a,this.constraints[t],this.elastic[t])),s.set(a)}resolveConstraints(){var t;const{dragConstraints:n,dragElastic:r}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(t=this.visualElement.projection)===null||t===void 0?void 0:t.layout,s=this.constraints;n&&xi(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&i?this.constraints=bL(i.layoutBox,n):this.constraints=!1,this.elastic=kL(r),s!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&qt(a=>{this.constraints!==!1&&this.getAxisMotionValue(a)&&(this.constraints[a]=_L(i.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:n}=this.getProps();if(!t||!xi(t))return!1;const r=t.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=jL(r,i.root,this.visualElement.getTransformPagePoint());let a=wL(i.layout.layoutBox,s);if(n){const o=n(CL(a));this.hasMutatedConstraints=!!o,o&&(a=rj(o))}return a}startAnimation(t){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:s,dragSnapToOrigin:a,onDragTransitionEnd:o}=this.getProps(),l=this.constraints||{},u=qt(c=>{if(!Xa(c,n,this.currentDirection))return;let d=l&&l[c]||{};a&&(d={min:0,max:0});const h=i?200:1e6,m=i?40:1e7,g={type:"inertia",velocity:r?t[c]:0,bounceStiffness:h,bounceDamping:m,timeConstant:750,restDelta:1,restSpeed:10,...s,...d};return this.startAxisValueAnimation(c,g)});return Promise.all(u).then(o)}startAxisValueAnimation(t,n){const r=this.getAxisMotionValue(t);return $m(this.visualElement,t),r.start(Ag(t,r,0,n,this.visualElement,!1))}stopAnimation(){qt(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){qt(t=>{var n;return(n=this.getAxisMotionValue(t).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(t){var n;return(n=this.getAxisMotionValue(t).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(t){const n=`_drag${t.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(t,(r.initial?r.initial[t]:void 0)||0)}snapToCursor(t){qt(n=>{const{drag:r}=this.getProps();if(!Xa(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(n);if(i&&i.layout){const{min:a,max:o}=i.layout.layoutBox[n];s.set(t[n]-Ne(a,o,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!xi(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};qt(a=>{const o=this.getAxisMotionValue(a);if(o&&this.constraints!==!1){const l=o.get();i[a]=SL({min:l,max:l},this.constraints[a])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),qt(a=>{if(!Xa(a,t,null))return;const o=this.getAxisMotionValue(a),{min:l,max:u}=this.constraints[a];o.set(Ne(l,u,i[a]))})}addListeners(){if(!this.visualElement.current)return;NL.set(this.visualElement,this);const t=this.visualElement.current,n=$s(t,"pointerdown",l=>{const{drag:u,dragListener:c=!0}=this.getProps();u&&c&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();xi(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,s=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),ke.read(r);const a=fa(window,"resize",()=>this.scalePositionWithinConstraints()),o=i.addEventListener("didUpdate",({delta:l,hasLayoutChanged:u})=>{this.isDragging&&u&&(qt(c=>{const d=this.getAxisMotionValue(c);d&&(this.originPoint[c]+=l[c].translate,d.set(d.get()+l[c].translate))}),this.visualElement.render())});return()=>{a(),n(),s(),o&&o()}}getProps(){const t=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:a=Ym,dragMomentum:o=!0}=t;return{...t,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:s,dragElastic:a,dragMomentum:o}}}function Xa(e,t,n){return(t===!0||t===e)&&(n===null||n===e)}function PL(e,t=10){let n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}class RL extends yr{constructor(t){super(t),this.removeGroupControls=Nt,this.removeListeners=Nt,this.controls=new ML(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Nt}unmount(){this.removeGroupControls(),this.removeListeners()}}const Px=e=>(t,n)=>{e&&ke.postRender(()=>e(t,n))};class AL extends yr{constructor(){super(...arguments),this.removePointerDownListener=Nt}onPointerDown(t){this.session=new ZT(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:oj(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:Px(t),onStart:Px(n),onMove:r,onEnd:(s,a)=>{delete this.session,i&&ke.postRender(()=>i(s,a))}}}mount(){this.removePointerDownListener=$s(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const go={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Rx(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const gs={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(W.test(e))e=parseFloat(e);else return e;const n=Rx(e,t.target.x),r=Rx(e,t.target.y);return`${n}% ${r}%`}},IL={correct:(e,{treeScale:t,projectionDelta:n})=>{const r=e,i=hr.parse(e);if(i.length>5)return r;const s=hr.createTransformer(e),a=typeof i[0]!="number"?1:0,o=n.x.scale*t.x,l=n.y.scale*t.y;i[0+a]/=o,i[1+a]/=l;const u=Ne(o,l,.5);return typeof i[2+a]=="number"&&(i[2+a]/=u),typeof i[3+a]=="number"&&(i[3+a]/=u),s(i)}};class DL extends S.Component{componentDidMount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:s}=t;tD(LL),s&&(n.group&&n.group.add(s),r&&r.register&&i&&r.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),go.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:n,visualElement:r,drag:i,isPresent:s}=this.props,a=r.projection;return a&&(a.isPresent=s,i||t.layoutDependency!==n||n===void 0?a.willUpdate():this.safeToRemove(),t.isPresent!==s&&(s?a.promote():a.relegate()||ke.postRender(()=>{const o=a.getStack();(!o||!o.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),lg.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=t;i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function lj(e){const[t,n]=vI(),r=S.useContext(UE);return f.jsx(DL,{...e,layoutGroup:r,switchLayoutGroup:S.useContext(XE),isPresent:t,safeToRemove:n})}const LL={borderRadius:{...gs,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:gs,borderTopRightRadius:gs,borderBottomLeftRadius:gs,borderBottomRightRadius:gs,boxShadow:IL};function OL(e,t,n){const r=ut(e)?e:ca(e);return r.start(Ag("",r,t,n)),r.animation}function qL(e){return e instanceof SVGElement&&e.tagName!=="svg"}const FL=(e,t)=>e.depth-t.depth;class VL{constructor(){this.children=[],this.isDirty=!1}add(t){Sg(this.children,t),this.isDirty=!0}remove(t){_g(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(FL),this.isDirty=!1,this.children.forEach(t)}}function $L(e,t){const n=mn.now(),r=({timestamp:i})=>{const s=i-n;s>=t&&(fr(r),e(s-t))};return ke.read(r,!0),()=>fr(r)}const uj=["TopLeft","TopRight","BottomLeft","BottomRight"],BL=uj.length,Ax=e=>typeof e=="string"?parseFloat(e):e,Ix=e=>typeof e=="number"||W.test(e);function zL(e,t,n,r,i,s){i?(e.opacity=Ne(0,n.opacity!==void 0?n.opacity:1,UL(r)),e.opacityExit=Ne(t.opacity!==void 0?t.opacity:1,0,GL(r))):s&&(e.opacity=Ne(t.opacity!==void 0?t.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let a=0;a<BL;a++){const o=`border${uj[a]}Radius`;let l=Dx(t,o),u=Dx(n,o);if(l===void 0&&u===void 0)continue;l||(l=0),u||(u=0),l===0||u===0||Ix(l)===Ix(u)?(e[o]=Math.max(Ne(Ax(l),Ax(u),r),0),(pn.test(u)||pn.test(l))&&(e[o]+="%")):e[o]=u}(t.rotate||n.rotate)&&(e.rotate=Ne(t.rotate||0,n.rotate||0,r))}function Dx(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const UL=cj(0,.5,jT),GL=cj(.5,.95,Nt);function cj(e,t,n){return r=>r<e?0:r>t?1:n(Oi(e,t,r))}function Lx(e,t){e.min=t.min,e.max=t.max}function Ot(e,t){Lx(e.x,t.x),Lx(e.y,t.y)}function Ox(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function qx(e,t,n,r,i){return e-=t,e=Ko(e,1/n,r),i!==void 0&&(e=Ko(e,1/i,r)),e}function HL(e,t=0,n=1,r=.5,i,s=e,a=e){if(pn.test(t)&&(t=parseFloat(t),t=Ne(a.min,a.max,t/100)-a.min),typeof t!="number")return;let o=Ne(s.min,s.max,r);e===s&&(o-=t),e.min=qx(e.min,t,n,o,i),e.max=qx(e.max,t,n,o,i)}function Fx(e,t,[n,r,i],s,a){HL(e,t[n],t[r],t[i],t.scale,s,a)}const WL=["x","scaleX","originX"],KL=["y","scaleY","originY"];function Vx(e,t,n,r){Fx(e.x,t,WL,n?n.x:void 0,r?r.x:void 0),Fx(e.y,t,KL,n?n.y:void 0,r?r.y:void 0)}function $x(e){return e.translate===0&&e.scale===1}function dj(e){return $x(e.x)&&$x(e.y)}function Bx(e,t){return e.min===t.min&&e.max===t.max}function YL(e,t){return Bx(e.x,t.x)&&Bx(e.y,t.y)}function zx(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function fj(e,t){return zx(e.x,t.x)&&zx(e.y,t.y)}function Ux(e){return Pt(e.x)/Pt(e.y)}function Gx(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class QL{constructor(){this.members=[]}add(t){Sg(this.members,t),t.scheduleRender()}remove(t){if(_g(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(t){const n=this.members.findIndex(i=>t===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const s=this.members[i];if(s.isPresent!==!1){r=s;break}}return r?(this.promote(r),!0):!1}promote(t,n){const r=this.lead;if(t!==r&&(this.prevLead=r,this.lead=t,t.show(),r)){r.instance&&r.scheduleRender(),t.scheduleRender(),t.resumeFrom=r,n&&(t.resumeFrom.preserveOpacity=!0),r.snapshot&&(t.snapshot=r.snapshot,t.snapshot.latestValues=r.animationValues||r.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:i}=t.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:n,resumingFrom:r}=t;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function JL(e,t,n){let r="";const i=e.x.translate/t.x,s=e.y.translate/t.y,a=(n==null?void 0:n.z)||0;if((i||s||a)&&(r=`translate3d(${i}px, ${s}px, ${a}px) `),(t.x!==1||t.y!==1)&&(r+=`scale(${1/t.x}, ${1/t.y}) `),n){const{transformPerspective:u,rotate:c,rotateX:d,rotateY:h,skewX:m,skewY:g}=n;u&&(r=`perspective(${u}px) ${r}`),c&&(r+=`rotate(${c}deg) `),d&&(r+=`rotateX(${d}deg) `),h&&(r+=`rotateY(${h}deg) `),m&&(r+=`skewX(${m}deg) `),g&&(r+=`skewY(${g}deg) `)}const o=e.x.scale*t.x,l=e.y.scale*t.y;return(o!==1||l!==1)&&(r+=`scale(${o}, ${l})`),r||"none"}const Er={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},ks=typeof window<"u"&&window.MotionDebug!==void 0,zu=["","X","Y","Z"],XL={visibility:"hidden"},Hx=1e3;let ZL=0;function Uu(e,t,n,r){const{latestValues:i}=t;i[e]&&(n[e]=i[e],t.setStaticValue(e,0),r&&(r[e]=0))}function hj(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const n=wT(t);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:s}=e.options;window.MotionCancelOptimisedAnimation(n,"transform",ke,!(i||s))}const{parent:r}=e;r&&!r.hasCheckedOptimisedAppear&&hj(r)}function pj({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(a={},o=t==null?void 0:t()){this.id=ZL++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,ks&&(Er.totalNodes=Er.resolvedTargetDeltas=Er.recalculatedProjection=0),this.nodes.forEach(nO),this.nodes.forEach(oO),this.nodes.forEach(lO),this.nodes.forEach(rO),ks&&window.MotionDebug.record(Er)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=a,this.root=o?o.root||o:this,this.path=o?[...o.path,o]:[],this.parent=o,this.depth=o?o.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new VL)}addEventListener(a,o){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new kg),this.eventHandlers.get(a).add(o)}notifyListeners(a,...o){const l=this.eventHandlers.get(a);l&&l.notify(...o)}hasListeners(a){return this.eventHandlers.has(a)}mount(a,o=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=qL(a),this.instance=a;const{layoutId:l,layout:u,visualElement:c}=this.options;if(c&&!c.current&&c.mount(a),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),o&&(u||l)&&(this.isLayoutDirty=!0),e){let d;const h=()=>this.root.updateBlockedByResize=!1;e(a,()=>{this.root.updateBlockedByResize=!0,d&&d(),d=$L(h,250),go.hasAnimatedSinceResize&&(go.hasAnimatedSinceResize=!1,this.nodes.forEach(Kx))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&c&&(l||u)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:h,hasRelativeTargetChanged:m,layout:g})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const p=this.options.transition||c.getDefaultTransition()||hO,{onLayoutAnimationStart:b,onLayoutAnimationComplete:v}=c.getProps(),y=!this.targetLayout||!fj(this.targetLayout,g)||m,x=!h&&m;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||x||h&&(y||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(d,x);const _={...yg(p,"layout"),onPlay:b,onComplete:v};(c.shouldReduceMotion||this.options.layoutRoot)&&(_.delay=0,_.type=!1),this.startAnimation(_)}else h||Kx(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=g})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const a=this.getStack();a&&a.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,fr(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(uO),this.animationId++)}getTransformTemplate(){const{visualElement:a}=this.options;return a&&a.getProps().transformTemplate}willUpdate(a=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&hj(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let c=0;c<this.path.length;c++){const d=this.path[c];d.shouldResetTransform=!0,d.updateScroll("snapshot"),d.options.layoutRoot&&d.willUpdate(!1)}const{layoutId:o,layout:l}=this.options;if(o===void 0&&!l)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),a&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Wx);return}this.isUpdating||this.nodes.forEach(sO),this.isUpdating=!1,this.nodes.forEach(aO),this.nodes.forEach(eO),this.nodes.forEach(tO),this.clearAllSnapshots();const o=mn.now();Ze.delta=Dn(0,1e3/60,o-Ze.timestamp),Ze.timestamp=o,Ze.isProcessing=!0,Iu.update.process(Ze),Iu.preRender.process(Ze),Iu.render.process(Ze),Ze.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,lg.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(iO),this.sharedNodes.forEach(cO)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,ke.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){ke.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const a=this.layout;this.layout=this.measure(!1),this.layoutCorrected=$e(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:o}=this.options;o&&o.notify("LayoutMeasure",this.layout.layoutBox,a?a.layoutBox:void 0)}updateScroll(a="measure"){let o=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===a&&(o=!1),o){const l=r(this.instance);this.scroll={animationId:this.root.animationId,phase:a,isRoot:l,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!i)return;const a=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,o=this.projectionDelta&&!dj(this.projectionDelta),l=this.getTransformTemplate(),u=l?l(this.latestValues,""):void 0,c=u!==this.prevTransformTemplateValue;a&&(o||Cr(this.latestValues)||c)&&(i(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(a=!0){const o=this.measurePageBox();let l=this.removeElementScroll(o);return a&&(l=this.removeTransform(l)),pO(l),{animationId:this.root.animationId,measuredBox:o,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var a;const{visualElement:o}=this.options;if(!o)return $e();const l=o.measureViewportBox();if(!(((a=this.scroll)===null||a===void 0?void 0:a.wasRoot)||this.path.some(mO))){const{scroll:c}=this.root;c&&(Si(l.x,c.offset.x),Si(l.y,c.offset.y))}return l}removeElementScroll(a){var o;const l=$e();if(Ot(l,a),!((o=this.scroll)===null||o===void 0)&&o.wasRoot)return l;for(let u=0;u<this.path.length;u++){const c=this.path[u],{scroll:d,options:h}=c;c!==this.root&&d&&h.layoutScroll&&(d.wasRoot&&Ot(l,a),Si(l.x,d.offset.x),Si(l.y,d.offset.y))}return l}applyTransform(a,o=!1){const l=$e();Ot(l,a);for(let u=0;u<this.path.length;u++){const c=this.path[u];!o&&c.options.layoutScroll&&c.scroll&&c!==c.root&&_i(l,{x:-c.scroll.offset.x,y:-c.scroll.offset.y}),Cr(c.latestValues)&&_i(l,c.latestValues)}return Cr(this.latestValues)&&_i(l,this.latestValues),l}removeTransform(a){const o=$e();Ot(o,a);for(let l=0;l<this.path.length;l++){const u=this.path[l];if(!u.instance||!Cr(u.latestValues))continue;Qm(u.latestValues)&&u.updateSnapshot();const c=$e(),d=u.measurePageBox();Ot(c,d),Vx(o,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,c)}return Cr(this.latestValues)&&Vx(o,this.latestValues),o}setTargetDelta(a){this.targetDelta=a,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(a){this.options={...this.options,...a,crossfade:a.crossfade!==void 0?a.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Ze.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(a=!1){var o;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==l;if(!(a||u&&this.isSharedProjectionDirty||this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:d,layoutId:h}=this.options;if(!(!this.layout||!(d||h))){if(this.resolvedRelativeTargetAt=Ze.timestamp,!this.targetDelta&&!this.relativeTarget){const m=this.getClosestProjectingParent();m&&m.layout&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=$e(),this.relativeTargetOrigin=$e(),zs(this.relativeTargetOrigin,this.layout.layoutBox,m.layout.layoutBox),Ot(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=$e(),this.targetWithTransforms=$e()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),yL(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Ot(this.target,this.layout.layoutBox),sj(this.target,this.targetDelta)):Ot(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const m=this.getClosestProjectingParent();m&&!!m.resumingFrom==!!this.resumingFrom&&!m.options.layoutScroll&&m.target&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=$e(),this.relativeTargetOrigin=$e(),zs(this.relativeTargetOrigin,this.target,m.target),Ot(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}ks&&Er.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||Qm(this.parent.latestValues)||ij(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var a;const o=this.getLead(),l=!!this.resumingFrom||this!==o;let u=!0;if((this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty)&&(u=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===Ze.timestamp&&(u=!1),u)return;const{layout:c,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(c||d))return;Ot(this.layoutCorrected,this.layout.layoutBox);const h=this.treeScale.x,m=this.treeScale.y;TL(this.layoutCorrected,this.treeScale,this.path,l),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=$e());const{target:g}=o;if(!g){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(Ox(this.prevProjectionDelta.x,this.projectionDelta.x),Ox(this.prevProjectionDelta.y,this.projectionDelta.y)),Bs(this.projectionDelta,this.layoutCorrected,g,this.latestValues),(this.treeScale.x!==h||this.treeScale.y!==m||!Gx(this.projectionDelta.x,this.prevProjectionDelta.x)||!Gx(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",g)),ks&&Er.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(a=!0){var o;if((o=this.options.visualElement)===null||o===void 0||o.scheduleRender(),a){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=wi(),this.projectionDelta=wi(),this.projectionDeltaWithTransform=wi()}setAnimationOrigin(a,o=!1){const l=this.snapshot,u=l?l.latestValues:{},c={...this.latestValues},d=wi();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!o;const h=$e(),m=l?l.source:void 0,g=this.layout?this.layout.source:void 0,p=m!==g,b=this.getStack(),v=!b||b.members.length<=1,y=!!(p&&!v&&this.options.crossfade===!0&&!this.path.some(fO));this.animationProgress=0;let x;this.mixTargetDelta=_=>{const k=_/1e3;Yx(d.x,a.x,k),Yx(d.y,a.y,k),this.setTargetDelta(d),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(zs(h,this.layout.layoutBox,this.relativeParent.layout.layoutBox),dO(this.relativeTarget,this.relativeTargetOrigin,h,k),x&&YL(this.relativeTarget,x)&&(this.isProjectionDirty=!1),x||(x=$e()),Ot(x,this.relativeTarget)),p&&(this.animationValues=c,zL(c,u,this.latestValues,k,y,v)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=k},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(a){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(fr(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=ke.update(()=>{go.hasAnimatedSinceResize=!0,this.currentAnimation=OL(0,Hx,{...a,onUpdate:o=>{this.mixTargetDelta(o),a.onUpdate&&a.onUpdate(o)},onComplete:()=>{a.onComplete&&a.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const a=this.getStack();a&&a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Hx),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const a=this.getLead();let{targetWithTransforms:o,target:l,layout:u,latestValues:c}=a;if(!(!o||!l||!u)){if(this!==a&&this.layout&&u&&mj(this.options.animationType,this.layout.layoutBox,u.layoutBox)){l=this.target||$e();const d=Pt(this.layout.layoutBox.x);l.x.min=a.target.x.min,l.x.max=l.x.min+d;const h=Pt(this.layout.layoutBox.y);l.y.min=a.target.y.min,l.y.max=l.y.min+h}Ot(o,l),_i(o,c),Bs(this.projectionDeltaWithTransform,this.layoutCorrected,o,c)}}registerSharedNode(a,o){this.sharedNodes.has(a)||this.sharedNodes.set(a,new QL),this.sharedNodes.get(a).add(o);const u=o.options.initialPromotionConfig;o.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(o):void 0})}isLead(){const a=this.getStack();return a?a.lead===this:!0}getLead(){var a;const{layoutId:o}=this.options;return o?((a=this.getStack())===null||a===void 0?void 0:a.lead)||this:this}getPrevLead(){var a;const{layoutId:o}=this.options;return o?(a=this.getStack())===null||a===void 0?void 0:a.prevLead:void 0}getStack(){const{layoutId:a}=this.options;if(a)return this.root.sharedNodes.get(a)}promote({needsReset:a,transition:o,preserveFollowOpacity:l}={}){const u=this.getStack();u&&u.promote(this,l),a&&(this.projectionDelta=void 0,this.needsReset=!0),o&&this.setOptions({transition:o})}relegate(){const a=this.getStack();return a?a.relegate(this):!1}resetSkewAndRotation(){const{visualElement:a}=this.options;if(!a)return;let o=!1;const{latestValues:l}=a;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(o=!0),!o)return;const u={};l.z&&Uu("z",a,u,this.animationValues);for(let c=0;c<zu.length;c++)Uu(`rotate${zu[c]}`,a,u,this.animationValues),Uu(`skew${zu[c]}`,a,u,this.animationValues);a.render();for(const c in u)a.setStaticValue(c,u[c]),this.animationValues&&(this.animationValues[c]=u[c]);a.scheduleRender()}getProjectionStyles(a){var o,l;if(!this.instance||this.isSVG)return;if(!this.isVisible)return XL;const u={visibility:""},c=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,u.opacity="",u.pointerEvents=mo(a==null?void 0:a.pointerEvents)||"",u.transform=c?c(this.latestValues,""):"none",u;const d=this.getLead();if(!this.projectionDelta||!this.layout||!d.target){const p={};return this.options.layoutId&&(p.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,p.pointerEvents=mo(a==null?void 0:a.pointerEvents)||""),this.hasProjected&&!Cr(this.latestValues)&&(p.transform=c?c({},""):"none",this.hasProjected=!1),p}const h=d.animationValues||d.latestValues;this.applyTransformsToTarget(),u.transform=JL(this.projectionDeltaWithTransform,this.treeScale,h),c&&(u.transform=c(h,u.transform));const{x:m,y:g}=this.projectionDelta;u.transformOrigin=`${m.origin*100}% ${g.origin*100}% 0`,d.animationValues?u.opacity=d===this?(l=(o=h.opacity)!==null&&o!==void 0?o:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:h.opacityExit:u.opacity=d===this?h.opacity!==void 0?h.opacity:"":h.opacityExit!==void 0?h.opacityExit:0;for(const p in zo){if(h[p]===void 0)continue;const{correct:b,applyTo:v}=zo[p],y=u.transform==="none"?h[p]:b(h[p],d);if(v){const x=v.length;for(let _=0;_<x;_++)u[v[_]]=y}else u[p]=y}return this.options.layoutId&&(u.pointerEvents=d===this?mo(a==null?void 0:a.pointerEvents)||"":"none"),u}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(a=>{var o;return(o=a.currentAnimation)===null||o===void 0?void 0:o.stop()}),this.root.nodes.forEach(Wx),this.root.sharedNodes.clear()}}}function eO(e){e.updateLayout()}function tO(e){var t;const n=((t=e.resumeFrom)===null||t===void 0?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&n&&e.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=e.layout,{animationType:s}=e.options,a=n.source!==e.layout.source;s==="size"?qt(d=>{const h=a?n.measuredBox[d]:n.layoutBox[d],m=Pt(h);h.min=r[d].min,h.max=h.min+m}):mj(s,n.layoutBox,r)&&qt(d=>{const h=a?n.measuredBox[d]:n.layoutBox[d],m=Pt(r[d]);h.max=h.min+m,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[d].max=e.relativeTarget[d].min+m)});const o=wi();Bs(o,r,n.layoutBox);const l=wi();a?Bs(l,e.applyTransform(i,!0),n.measuredBox):Bs(l,r,n.layoutBox);const u=!dj(o);let c=!1;if(!e.resumeFrom){const d=e.getClosestProjectingParent();if(d&&!d.resumeFrom){const{snapshot:h,layout:m}=d;if(h&&m){const g=$e();zs(g,n.layoutBox,h.layoutBox);const p=$e();zs(p,r,m.layoutBox),fj(g,p)||(c=!0),d.options.layoutRoot&&(e.relativeTarget=p,e.relativeTargetOrigin=g,e.relativeParent=d)}}}e.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:l,layoutDelta:o,hasLayoutChanged:u,hasRelativeTargetChanged:c})}else if(e.isLead()){const{onExitComplete:r}=e.options;r&&r()}e.options.transition=void 0}function nO(e){ks&&Er.totalNodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function rO(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function iO(e){e.clearSnapshot()}function Wx(e){e.clearMeasurements()}function sO(e){e.isLayoutDirty=!1}function aO(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function Kx(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function oO(e){e.resolveTargetDelta()}function lO(e){e.calcProjection()}function uO(e){e.resetSkewAndRotation()}function cO(e){e.removeLeadSnapshot()}function Yx(e,t,n){e.translate=Ne(t.translate,0,n),e.scale=Ne(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function Qx(e,t,n,r){e.min=Ne(t.min,n.min,r),e.max=Ne(t.max,n.max,r)}function dO(e,t,n,r){Qx(e.x,t.x,n.x,r),Qx(e.y,t.y,n.y,r)}function fO(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const hO={duration:.45,ease:[.4,0,.1,1]},Jx=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),Xx=Jx("applewebkit/")&&!Jx("chrome/")?Math.round:Nt;function Zx(e){e.min=Xx(e.min),e.max=Xx(e.max)}function pO(e){Zx(e.x),Zx(e.y)}function mj(e,t,n){return e==="position"||e==="preserve-aspect"&&!gL(Ux(t),Ux(n),.2)}function mO(e){var t;return e!==e.root&&((t=e.scroll)===null||t===void 0?void 0:t.wasRoot)}const vO=pj({attachResizeListener:(e,t)=>fa(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Gu={current:void 0},vj=pj({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!Gu.current){const e=new vO({});e.mount(window),e.setOptions({layoutScroll:!0}),Gu.current=e}return Gu.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),gO={pan:{Feature:AL},drag:{Feature:RL,ProjectionNode:vj,MeasureLayout:lj}};function eb(e,t,n){const{props:r}=e;e.animationState&&r.whileHover&&e.animationState.setActive("whileHover",n==="Start");const i="onHover"+n,s=r[i];s&&ke.postRender(()=>s(t,wa(t)))}class yO extends yr{mount(){const{current:t}=this.node;t&&(this.unmount=gD(t,n=>(eb(this.node,n,"Start"),r=>eb(this.node,r,"End"))))}unmount(){}}class xO extends yr{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=ba(fa(this.node.current,"focus",()=>this.onFocus()),fa(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function tb(e,t,n){const{props:r}=e;e.animationState&&r.whileTap&&e.animationState.setActive("whileTap",n==="Start");const i="onTap"+(n==="End"?"":n),s=r[i];s&&ke.postRender(()=>s(t,wa(t)))}class bO extends yr{mount(){const{current:t}=this.node;t&&(this.unmount=wD(t,n=>(tb(this.node,n,"Start"),(r,{success:i})=>tb(this.node,r,i?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Xm=new WeakMap,Hu=new WeakMap,wO=e=>{const t=Xm.get(e.target);t&&t(e)},SO=e=>{e.forEach(wO)};function _O({root:e,...t}){const n=e||document;Hu.has(n)||Hu.set(n,{});const r=Hu.get(n),i=JSON.stringify(t);return r[i]||(r[i]=new IntersectionObserver(SO,{root:e,...t})),r[i]}function kO(e,t,n){const r=_O(t);return Xm.set(e,n),r.observe(e),()=>{Xm.delete(e),r.unobserve(e)}}const CO={some:0,all:1};class EO extends yr{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:s}=t,a={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:CO[i]},o=l=>{const{isIntersecting:u}=l;if(this.isInView===u||(this.isInView=u,s&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:c,onViewportLeave:d}=this.node.getProps(),h=u?c:d;h&&h(l)};return kO(this.node.current,a,o)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:n}=this.node;["amount","margin","root"].some(TO(t,n))&&this.startObserver()}unmount(){}}function TO({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}const jO={inView:{Feature:EO},tap:{Feature:bO},focus:{Feature:xO},hover:{Feature:yO}},NO={layout:{ProjectionNode:vj,MeasureLayout:lj}},Zm={current:null},gj={current:!1};function MO(){if(gj.current=!0,!!rg)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>Zm.current=e.matches;e.addListener(t),t()}else Zm.current=!1}const PO=[...BT,ot,hr],RO=e=>PO.find($T(e)),nb=new WeakMap;function AO(e,t,n){for(const r in t){const i=t[r],s=n[r];if(ut(i))e.addValue(r,i);else if(ut(s))e.addValue(r,ca(i,{owner:e}));else if(s!==i)if(e.hasValue(r)){const a=e.getValue(r);a.liveStyle===!0?a.jump(i):a.hasAnimated||a.set(i)}else{const a=e.getStaticValue(r);e.addValue(r,ca(a!==void 0?a:i,{owner:e}))}}for(const r in n)t[r]===void 0&&e.removeValue(r);return t}const rb=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class IO{scrapeMotionValuesFromProps(t,n,r){return{}}constructor({parent:t,props:n,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:s,visualState:a},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Mg,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const m=mn.now();this.renderScheduledAt<m&&(this.renderScheduledAt=m,ke.render(this.render,!1,!0))};const{latestValues:l,renderState:u,onUpdate:c}=a;this.onUpdate=c,this.latestValues=l,this.baseTarget={...l},this.initialValues=n.initial?{...l}:{},this.renderState=u,this.parent=t,this.props=n,this.presenceContext=r,this.depth=t?t.depth+1:0,this.reducedMotionConfig=i,this.options=o,this.blockInitialAnimation=!!s,this.isControllingVariants=yl(n),this.isVariantNode=QE(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:d,...h}=this.scrapeMotionValuesFromProps(n,{},this);for(const m in h){const g=h[m];l[m]!==void 0&&ut(g)&&g.set(l[m],!1)}}mount(t){this.current=t,nb.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),gj.current||MO(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Zm.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){nb.delete(this.current),this.projection&&this.projection.unmount(),fr(this.notifyUpdate),fr(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const n=this.features[t];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(t,n){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const r=zr.has(t),i=n.on("change",o=>{this.latestValues[t]=o,this.props.onUpdate&&ke.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),s=n.on("renderRequest",this.scheduleRender);let a;window.MotionCheckAppearSync&&(a=window.MotionCheckAppearSync(this,t,n)),this.valueSubscriptions.set(t,()=>{i(),s(),a&&a(),n.owner&&n.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in qi){const n=qi[t];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[t]&&i&&r(this.props)&&(this.features[t]=new i(this)),this.features[t]){const s=this.features[t];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):$e()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,n){this.latestValues[t]=n}update(t,n){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<rb.length;r++){const i=rb[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s="on"+i,a=t[s];a&&(this.propEventSubscriptions[i]=this.on(i,a))}this.prevMotionValues=AO(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(t),()=>n.variantChildren.delete(t)}addValue(t,n){const r=this.values.get(t);n!==r&&(r&&this.removeValue(t),this.bindToMotionValue(t,n),this.values.set(t,n),this.latestValues[t]=n.get())}removeValue(t){this.values.delete(t);const n=this.valueSubscriptions.get(t);n&&(n(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,n){if(this.props.values&&this.props.values[t])return this.props.values[t];let r=this.values.get(t);return r===void 0&&n!==void 0&&(r=ca(n===null?void 0:n,{owner:this}),this.addValue(t,r)),r}readValue(t,n){var r;let i=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:(r=this.getBaseTargetFromProps(this.props,t))!==null&&r!==void 0?r:this.readValueFromInstance(this.current,t,this.options);return i!=null&&(typeof i=="string"&&(FT(i)||MT(i))?i=parseFloat(i):!RO(i)&&hr.test(n)&&(i=LT(t,n)),this.setBaseTarget(t,ut(i)?i.get():i)),ut(i)?i.get():i}setBaseTarget(t,n){this.baseTarget[t]=n}getBaseTarget(t){var n;const{initial:r}=this.props;let i;if(typeof r=="string"||typeof r=="object"){const a=cg(this.props,r,(n=this.presenceContext)===null||n===void 0?void 0:n.custom);a&&(i=a[t])}if(r&&i!==void 0)return i;const s=this.getBaseTargetFromProps(this.props,t);return s!==void 0&&!ut(s)?s:this.initialValues[t]!==void 0&&i===void 0?void 0:this.baseTarget[t]}on(t,n){return this.events[t]||(this.events[t]=new kg),this.events[t].add(n)}notify(t,...n){this.events[t]&&this.events[t].notify(...n)}}class yj extends IO{constructor(){super(...arguments),this.KeyframeResolver=zT}sortInstanceNodePosition(t,n){return t.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(t,n){return t.style?t.style[n]:void 0}removeValueFromRenderState(t,{vars:n,style:r}){delete n[t],delete r[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;ut(t)&&(this.childSubscription=t.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function DO(e){return window.getComputedStyle(e)}class LO extends yj{constructor(){super(...arguments),this.type="html",this.renderInstance=sT}readValueFromInstance(t,n){if(zr.has(n)){const r=Ng(n);return r&&r.default||0}else{const r=DO(t),i=(nT(n)?r.getPropertyValue(n):r[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(t,{transformPagePoint:n}){return aj(t,n)}build(t,n,r){hg(t,n,r.transformTemplate)}scrapeMotionValuesFromProps(t,n,r){return gg(t,n,r)}}class OO extends yj{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=$e}getBaseTargetFromProps(t,n){return t[n]}readValueFromInstance(t,n){if(zr.has(n)){const r=Ng(n);return r&&r.default||0}return n=aT.has(n)?n:og(n),t.getAttribute(n)}scrapeMotionValuesFromProps(t,n,r){return uT(t,n,r)}build(t,n,r){pg(t,n,this.isSVGTag,r.transformTemplate)}renderInstance(t,n,r,i){oT(t,n,r,i)}mount(t){this.isSVGTag=vg(t.tagName),super.mount(t)}}const qO=(e,t)=>ug(e)?new OO(t):new LO(t,{allowProjection:e!==S.Fragment}),FO=cD({...lL,...jO,...gO,...NO},qO),VO=CI(FO);function $O({steps:e,fromRects:t,toRects:n,onComplete:r}){return S.useEffect(()=>{const i=window.setTimeout(r,550);return()=>window.clearTimeout(i)},[r]),f.jsx("div",{className:"morph-layer",children:e.map(i=>{var o;const s=t[i.id],a=n[i.id];return!s||!a?null:f.jsxs(VO.div,{className:`morph-card step-${i.type}`,initial:{left:s.left,top:s.top,width:s.width,height:s.height},animate:{left:a.left,top:a.top,width:a.width,height:a.height},transition:{duration:.5,ease:"easeInOut"},children:[f.jsx("div",{className:"morph-card-title",children:i.name}),f.jsx("div",{className:"morph-card-subtitle",children:((o=i.preview)==null?void 0:o.title)??i.type})]},i.id)})})}function BO({morph:e,onComplete:t,children:n}){return f.jsxs("div",{className:"morph-orchestrator",children:[n,e?f.jsx($O,{steps:e.steps,fromRects:e.fromRects,toRects:e.toRects,onComplete:t}):null]})}const zO="demo-trace-overlap-001",UO="Overlap + ToolCallId Demo",GO="2026-01-27T10:00:00.000Z",HO="2026-01-27T10:00:05.000Z",WO="completed",KO={source:"openai_agents",agentName:"DemoAgent",modelId:"gpt-4o-2024-11-20",wallTimeMs:5e3,workTimeMs:7200,totalTokens:1400,totalCostUsd:.018},YO=[{id:"s1",index:0,type:"llm_call",name:"plan",startedAt:"2026-01-27T10:00:00.000Z",endedAt:"2026-01-27T10:00:01.000Z",durationMs:1e3,childStepIds:[],metrics:{tokensTotal:300,costUsd:.004},preview:{title:"LLM: plan",subtitle:"gpt-4o",outputPreview:"I'll fetch two sources..."},status:"completed"},{id:"s2",index:1,type:"llm_call",name:"call_tools",startedAt:"2026-01-27T10:00:01.000Z",endedAt:"2026-01-27T10:00:01.200Z",durationMs:200,childStepIds:[],metrics:{tokensTotal:120,costUsd:.002},preview:{title:"LLM: call tools",outputPreview:"Calling web_search + database_query"},io:{emittedToolCallIds:["tc-001","tc-002"]},status:"completed"},{id:"s3",index:2,type:"tool_call",name:"web_search",toolCallId:"tc-001",startedAt:"2026-01-27T10:00:01.200Z",endedAt:"2026-01-27T10:00:03.200Z",durationMs:2e3,childStepIds:[],metrics:{costUsd:0},preview:{title:"Tool: web_search",inputPreview:'{"q":"EU AI Act"}',outputPreview:"[3 results...]"},status:"completed"},{id:"s4",index:3,type:"tool_call",name:"database_query",toolCallId:"tc-002",startedAt:"2026-01-27T10:00:01.500Z",endedAt:"2026-01-27T10:00:02.700Z",durationMs:1200,childStepIds:[],preview:{title:"Tool: database_query",inputPreview:'{"sql":"SELECT..."}',outputPreview:'{"rows":42}'},status:"completed"},{id:"s5",index:4,type:"llm_call",name:"analyze",startedAt:"2026-01-27T10:00:03.200Z",endedAt:"2026-01-27T10:00:04.600Z",durationMs:1400,childStepIds:[],metrics:{tokensTotal:700,costUsd:.012},preview:{title:"LLM: analyze",outputPreview:"Synthesis based on tool outputs..."},io:{consumedToolCallIds:["tc-001","tc-002"]},status:"completed"}],wl={id:zO,name:UO,startedAt:GO,endedAt:HO,status:WO,metadata:KO,steps:YO};function xj(e,t){const n=QO(e,t),r=new Set(n.map(d=>d.leftId)),i=new Set(n.map(d=>d.rightId)),s=t.steps.filter(d=>!i.has(d.id)).map(d=>d.id),a=e.steps.filter(d=>!r.has(d.id)).map(d=>d.id),o=n.filter(d=>{const h=e.steps.find(g=>g.id===d.leftId),m=t.steps.find(g=>g.id===d.rightId);return!h||!m?!1:ib(h)!==ib(m)}),l=o.map(d=>d.leftId),u=(t.metadata.totalCostUsd??0)-(e.metadata.totalCostUsd??0),c=t.metadata.wallTimeMs-e.metadata.wallTimeMs;return{addedSteps:s,removedSteps:a,changedSteps:l,changedPairs:o,alignedSteps:n,costDeltaUsd:u,wallTimeDeltaMs:c}}function QO(e,t){const n=[],r=new Set(e.steps.map(c=>c.id)),i=new Set(t.steps.map(c=>c.id));Array.from(r).forEach(c=>{i.has(c)&&(n.push({leftId:c,rightId:c}),r.delete(c),i.delete(c))});const s=new Map;t.steps.forEach(c=>{c.toolCallId&&s.set(c.toolCallId,c.id)}),e.steps.forEach(c=>{if(!c.toolCallId)return;const d=s.get(c.toolCallId);d&&i.has(d)&&(n.push({leftId:c.id,rightId:d}),r.delete(c.id),i.delete(d))});const a=ob(e),o=ob(t),l=JO(e,t),u={};return i.forEach(c=>{const d=o.get(c);if(!d)return;const h=sb(d.step);h&&(u[h]||(u[h]=[]),u[h].push(c))}),Object.values(u).forEach(c=>{c.sort((d,h)=>{var m,g;return(((m=o.get(d))==null?void 0:m.startMs)??0)-(((g=o.get(h))==null?void 0:g.startMs)??0)})}),Array.from(r).forEach(c=>{var g;const d=a.get(c);if(!d)return;const h=sb(d.step);if(!h||!((g=u[h])!=null&&g.length))return;const m=XO(d,u[h],o,l);m&&(n.push({leftId:c,rightId:m}),r.delete(c),i.delete(m),u[h]=u[h].filter(p=>p!==m))}),n}function ib(e){var r,i;const t=((r=e.preview)==null?void 0:r.outputPreview)??null,n=((i=e.metrics)==null?void 0:i.costUsd)??null;return`${e.status}|${t??""}|${n??""}`}function sb(e){return e.type?`${e.type}:${e.name??""}`:null}function ab(e){if(!e)return null;const t=Date.parse(e);return Number.isNaN(t)?null:t}function ob(e){const t=ab(e.startedAt),n=new Map;return e.steps.forEach(r=>{const i=ab(r.startedAt),s=t!=null&&i!=null?i-t:null;n.set(r.id,{step:r,startMs:s})}),n}function JO(e,t){const n=Math.max(e.metadata.wallTimeMs,t.metadata.wallTimeMs,1);return Math.max(1e3,Math.min(5e3,Math.round(n*.1)))}function XO(e,t,n,r){const i=e.startMs;if(i==null)return null;let s=null,a=r+1;return t.forEach(o=>{const l=n.get(o);if(!l||l.startMs==null)return;const u=Math.abs(l.startMs-i);u<a&&(a=u,s=o)}),a<=r?s:null}const ZO=new Map,eq=new Map,Dr=new Map;async function tq(){return[wl]}async function bj(e){return{trace:wl}}const nq={s1:{role:"assistant",content:"I'll analyze the user's request and create a plan to fetch information from two sources: a web search for current EU AI Act updates and a database query for historical compliance data.",model:"gpt-4o-2024-11-20",usage:{prompt_tokens:150,completion_tokens:150,total_tokens:300},reasoning:"The user wants comprehensive information about AI regulations. I'll use parallel tool calls to maximize efficiency."},s2:{role:"assistant",content:null,tool_calls:[{id:"tc-001",type:"function",function:{name:"web_search",arguments:'{"q":"EU AI Act latest updates 2026"}'}},{id:"tc-002",type:"function",function:{name:"database_query",arguments:`{"sql":"SELECT * FROM compliance_records WHERE region='EU' ORDER BY date DESC LIMIT 10"}`}}],model:"gpt-4o-2024-11-20",usage:{prompt_tokens:80,completion_tokens:40,total_tokens:120}},s3:{tool_call_id:"tc-001",tool_name:"web_search",input:{q:"EU AI Act latest updates 2026"},output:{results:[{title:"EU AI Act Implementation Timeline",url:"https://example.com/ai-act",snippet:"The EU AI Act enters full force in 2026..."},{title:"High-Risk AI Systems Classification",url:"https://example.com/classification",snippet:"New guidance on high-risk categorization..."},{title:"Compliance Deadlines Approaching",url:"https://example.com/deadlines",snippet:"Organizations must comply by August 2026..."}],total_results:3,search_time_ms:1850},status:"success"},s4:{tool_call_id:"tc-002",tool_name:"database_query",input:{sql:"SELECT * FROM compliance_records WHERE region='EU' ORDER BY date DESC LIMIT 10"},output:{rows:[{id:1,company:"TechCorp",status:"compliant",date:"2026-01-15"},{id:2,company:"AIStartup",status:"in_progress",date:"2026-01-10"},{id:3,company:"DataCo",status:"compliant",date:"2026-01-05"}],row_count:42,query_time_ms:1100},status:"success"},s5:{role:"assistant",content:`Based on my analysis of the web search results and database records:

**Key Findings:**
1. The EU AI Act is now in full effect as of 2026
2. High-risk AI systems require specific compliance measures
3. 42 organizations in our database have compliance records

**Recommendations:**
- Review classification of AI systems
- Ensure documentation is complete
- Schedule compliance audit before August deadline`,model:"gpt-4o-2024-11-20",usage:{prompt_tokens:450,completion_tokens:250,total_tokens:700},reasoning:"Synthesized information from both the web search (3 relevant articles) and database query (42 compliance records) to provide actionable insights."}};function rq(e,t){const n=wl.steps.find(s=>s.id===e);if(!n)return null;const r=nq[e];if(!r)return null;const i=t?iq(r):r;return{...n,data:i}}function iq(e){var n,r;const t=JSON.parse(JSON.stringify(e));return(n=t.input)!=null&&n.sql&&(t.input.sql="[REDACTED]"),(r=t.output)!=null&&r.rows&&(t.output.rows=t.output.rows.map(i=>({...i,company:"[REDACTED]"}))),t.tool_calls&&(t.tool_calls=t.tool_calls.map(i=>({...i,function:{...i.function,arguments:"[REDACTED]"}}))),t}async function sq(e,t,n,r=[],i=!1){return await new Promise(s=>setTimeout(s,150)),rq(t,i)}async function aq(e,t,n){await sq(e,t,"redacted",[],n)}function oq(e,t){return()=>{}}function lq(){ZO.clear(),eq.clear()}async function uq(e,t){return null}async function cq(e){return null}async function L4(e,t){return[]}async function O4(e,t,n,r,i){return null}async function dq(){return[]}async function fq(e,t){return null}async function hq(e,t,n,r,i){return i?wj(i,t,n,r):null}function wj(e,t,n,r){var g;const i=JSON.parse(JSON.stringify(e)),s=6e4,a=Date.parse("2024-01-01T00:00:00.000Z"),o=Date.parse(e.endedAt??e.startedAt??""),u=(Number.isNaN(o)?a:o)+s,c=new Date(u);i.id=`${e.id}-replay-${u}`,i.parentTraceId=e.id,i.branchPointStepId=t,i.replay={strategy:n,modifiedStepId:t,modifications:r,createdAt:c.toISOString()};const d=p=>{if(!p)return p;const b=Date.parse(p);return Number.isNaN(b)?p:new Date(b+s).toISOString()};i.startedAt=d(i.startedAt)??i.startedAt,i.endedAt=d(i.endedAt);const h=new Set,m=((g=i.steps.find(p=>p.id===t))==null?void 0:g.index)??-1;return n==="live"?i.steps.forEach(p=>{p.index>m&&h.add(p.id)}):n==="hybrid"&&i.steps.forEach(p=>{p.index>m&&h.add(p.id)}),i.steps=i.steps.map(p=>{var v;const b={...p};if(b.startedAt=d(p.startedAt)??p.startedAt,b.endedAt=d(p.endedAt),p.id===t){const y=((v=p.preview)==null?void 0:v.outputPreview)??"";b.preview={...p.preview,outputPreview:`${y} (modified)`.trim()}}return h.has(p.id)&&(b.status="pending",b.endedAt=null,b.durationMs=void 0,b.metrics=void 0,b.preview={...p.preview,outputPreview:"[invalidated for replay]"}),b}),i}async function pq(e){return gq(e)}async function mq(e){var t;return((t=Dr.get(e))==null?void 0:t.job)??null}async function lb(e){var t;return((t=Dr.get(e))==null?void 0:t.matrix)??null}async function vq(e){{const t=Dr.get(e);if(!t)return null;const n={...t.job,status:"canceled",scenarios:t.job.scenarios.map(r=>({...r,status:"canceled",endedAt:r.endedAt??new Date().toISOString()}))};return Dr.set(e,{...t,job:n}),n}}function gq(e){const t=`demo-job-${Date.now()}-${Math.random().toString(36).slice(2,6)}`,n=wl,r=new Date().toISOString(),i=e.scenarios.map((l,u)=>({id:`demo-scn-${u+1}`,name:l.name,strategy:l.strategy,modifications:l.modifications,status:"running",startedAt:r,endedAt:null,replayTraceId:`${t}-replay-${u+1}`})),s={id:t,traceId:e.traceId,stepId:e.stepId,status:"running",createdAt:r,startedAt:r,endedAt:null,scenarioCount:i.length,completedCount:0,failedCount:0,canceledCount:0,scenarios:i},a=i.map(l=>{const u=wj(n,e.stepId,l.strategy,l.modifications);u.id=l.replayTraceId;const c=xj(n,u),d=n.metadata.totalCostUsd??0,h=u.metadata.totalCostUsd??d,m=n.metadata.errorCount??0,g=u.metadata.errorCount??m,p=n.metadata.retryCount??0,b=u.metadata.retryCount??p,v=u.steps.filter(y=>y.status==="pending").length;return{scenarioId:l.id,name:l.name,strategy:l.strategy,status:"completed",replayTraceId:l.replayTraceId,modifications:l.modifications,error:null,changedStepIds:c.changedSteps,addedStepIds:c.addedSteps,removedStepIds:c.removedSteps,metrics:{costDeltaUsd:h-d,wallTimeDeltaMs:(u.metadata.wallTimeMs??0)-(n.metadata.wallTimeMs??0),errorDelta:g-m,retryDelta:b-p,changedSteps:c.changedSteps.length,addedSteps:c.addedSteps.length,removedSteps:c.removedSteps.length,invalidatedStepCount:v}}}),o={jobId:t,traceId:e.traceId,stepId:e.stepId,rows:a,causalRanking:[]};return Dr.set(t,{job:s,matrix:o}),window.setTimeout(()=>{const l=Dr.get(t);if(!l)return;const u=new Date().toISOString(),c=l.job.scenarios.map(m=>({...m,status:"completed",endedAt:u})),d={...l.job,status:"completed",endedAt:u,completedCount:c.length,scenarios:c},h={...l.matrix,rows:l.matrix.rows.map(m=>({...m,status:"completed"}))};Dr.set(t,{job:d,matrix:h})},600),s}function yq(){const[e,t]=S.useState(null),[n,r]=S.useState(null),[i,s]=S.useState(!0),[a,o]=S.useState(null),[l,u]=S.useState([]),[c,d]=S.useState(null),h=S.useCallback(async g=>{const p=await bj(),b=(p==null?void 0:p.trace)??null;t(b),r(b?(p==null?void 0:p.insights)??iA(b):null)},[t,r]),m=S.useCallback(async()=>{var g;s(!0),o(null);try{const p=await tq();u(p);const b=((g=p[p.length-1])==null?void 0:g.id)??null,v=c??b;if(!v){t(null),r(null);return}if(!c||c!==v){d(v);return}await h(v)}catch(p){o(p instanceof Error?p.message:"Failed to load trace")}finally{s(!1)}},[c,h]);return S.useEffect(()=>{m()},[m]),S.useEffect(()=>{c&&(s(!0),h(c).catch(g=>{o(g instanceof Error?g.message:"Failed to load trace")}).finally(()=>s(!1)))},[c,h]),S.useEffect(()=>oq(),[c,d]),{trace:e,insights:n,loading:i,error:a,reload:m,traces:l,selectedTraceId:c,setSelectedTraceId:d}}function He(e,t){const[n,r]=S.useState(()=>{if(typeof window>"u")return t;try{const i=window.localStorage.getItem(e);return i==null?t:JSON.parse(i)}catch{return t}});return S.useEffect(()=>{try{window.localStorage.setItem(e,JSON.stringify(n))}catch{}},[e,n]),[n,r]}function Ig(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Wu,ub;function xq(){if(ub)return Wu;ub=1;function e(){this.__data__=[],this.size=0}return Wu=e,Wu}var Ku,cb;function Gi(){if(cb)return Ku;cb=1;function e(t,n){return t===n||t!==t&&n!==n}return Ku=e,Ku}var Yu,db;function Sl(){if(db)return Yu;db=1;var e=Gi();function t(n,r){for(var i=n.length;i--;)if(e(n[i][0],r))return i;return-1}return Yu=t,Yu}var Qu,fb;function bq(){if(fb)return Qu;fb=1;var e=Sl(),t=Array.prototype,n=t.splice;function r(i){var s=this.__data__,a=e(s,i);if(a<0)return!1;var o=s.length-1;return a==o?s.pop():n.call(s,a,1),--this.size,!0}return Qu=r,Qu}var Ju,hb;function wq(){if(hb)return Ju;hb=1;var e=Sl();function t(n){var r=this.__data__,i=e(r,n);return i<0?void 0:r[i][1]}return Ju=t,Ju}var Xu,pb;function Sq(){if(pb)return Xu;pb=1;var e=Sl();function t(n){return e(this.__data__,n)>-1}return Xu=t,Xu}var Zu,mb;function _q(){if(mb)return Zu;mb=1;var e=Sl();function t(n,r){var i=this.__data__,s=e(i,n);return s<0?(++this.size,i.push([n,r])):i[s][1]=r,this}return Zu=t,Zu}var ec,vb;function _l(){if(vb)return ec;vb=1;var e=xq(),t=bq(),n=wq(),r=Sq(),i=_q();function s(a){var o=-1,l=a==null?0:a.length;for(this.clear();++o<l;){var u=a[o];this.set(u[0],u[1])}}return s.prototype.clear=e,s.prototype.delete=t,s.prototype.get=n,s.prototype.has=r,s.prototype.set=i,ec=s,ec}var tc,gb;function kq(){if(gb)return tc;gb=1;var e=_l();function t(){this.__data__=new e,this.size=0}return tc=t,tc}var nc,yb;function Cq(){if(yb)return nc;yb=1;function e(t){var n=this.__data__,r=n.delete(t);return this.size=n.size,r}return nc=e,nc}var rc,xb;function Eq(){if(xb)return rc;xb=1;function e(t){return this.__data__.get(t)}return rc=e,rc}var ic,bb;function Tq(){if(bb)return ic;bb=1;function e(t){return this.__data__.has(t)}return ic=e,ic}var sc,wb;function Sj(){if(wb)return sc;wb=1;var e=typeof Na=="object"&&Na&&Na.Object===Object&&Na;return sc=e,sc}var ac,Sb;function nn(){if(Sb)return ac;Sb=1;var e=Sj(),t=typeof self=="object"&&self&&self.Object===Object&&self,n=e||t||Function("return this")();return ac=n,ac}var oc,_b;function Hi(){if(_b)return oc;_b=1;var e=nn(),t=e.Symbol;return oc=t,oc}var lc,kb;function jq(){if(kb)return lc;kb=1;var e=Hi(),t=Object.prototype,n=t.hasOwnProperty,r=t.toString,i=e?e.toStringTag:void 0;function s(a){var o=n.call(a,i),l=a[i];try{a[i]=void 0;var u=!0}catch{}var c=r.call(a);return u&&(o?a[i]=l:delete a[i]),c}return lc=s,lc}var uc,Cb;function Nq(){if(Cb)return uc;Cb=1;var e=Object.prototype,t=e.toString;function n(r){return t.call(r)}return uc=n,uc}var cc,Eb;function Ur(){if(Eb)return cc;Eb=1;var e=Hi(),t=jq(),n=Nq(),r="[object Null]",i="[object Undefined]",s=e?e.toStringTag:void 0;function a(o){return o==null?o===void 0?i:r:s&&s in Object(o)?t(o):n(o)}return cc=a,cc}var dc,Tb;function Gt(){if(Tb)return dc;Tb=1;function e(t){var n=typeof t;return t!=null&&(n=="object"||n=="function")}return dc=e,dc}var fc,jb;function Sa(){if(jb)return fc;jb=1;var e=Ur(),t=Gt(),n="[object AsyncFunction]",r="[object Function]",i="[object GeneratorFunction]",s="[object Proxy]";function a(o){if(!t(o))return!1;var l=e(o);return l==r||l==i||l==n||l==s}return fc=a,fc}var hc,Nb;function Mq(){if(Nb)return hc;Nb=1;var e=nn(),t=e["__core-js_shared__"];return hc=t,hc}var pc,Mb;function Pq(){if(Mb)return pc;Mb=1;var e=Mq(),t=function(){var r=/[^.]+$/.exec(e&&e.keys&&e.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}();function n(r){return!!t&&t in r}return pc=n,pc}var mc,Pb;function _j(){if(Pb)return mc;Pb=1;var e=Function.prototype,t=e.toString;function n(r){if(r!=null){try{return t.call(r)}catch{}try{return r+""}catch{}}return""}return mc=n,mc}var vc,Rb;function Rq(){if(Rb)return vc;Rb=1;var e=Sa(),t=Pq(),n=Gt(),r=_j(),i=/[\\^$.*+?()[\]{}|]/g,s=/^\[object .+?Constructor\]$/,a=Function.prototype,o=Object.prototype,l=a.toString,u=o.hasOwnProperty,c=RegExp("^"+l.call(u).replace(i,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function d(h){if(!n(h)||t(h))return!1;var m=e(h)?c:s;return m.test(r(h))}return vc=d,vc}var gc,Ab;function Aq(){if(Ab)return gc;Ab=1;function e(t,n){return t==null?void 0:t[n]}return gc=e,gc}var yc,Ib;function Gr(){if(Ib)return yc;Ib=1;var e=Rq(),t=Aq();function n(r,i){var s=t(r,i);return e(s)?s:void 0}return yc=n,yc}var xc,Db;function Dg(){if(Db)return xc;Db=1;var e=Gr(),t=nn(),n=e(t,"Map");return xc=n,xc}var bc,Lb;function kl(){if(Lb)return bc;Lb=1;var e=Gr(),t=e(Object,"create");return bc=t,bc}var wc,Ob;function Iq(){if(Ob)return wc;Ob=1;var e=kl();function t(){this.__data__=e?e(null):{},this.size=0}return wc=t,wc}var Sc,qb;function Dq(){if(qb)return Sc;qb=1;function e(t){var n=this.has(t)&&delete this.__data__[t];return this.size-=n?1:0,n}return Sc=e,Sc}var _c,Fb;function Lq(){if(Fb)return _c;Fb=1;var e=kl(),t="__lodash_hash_undefined__",n=Object.prototype,r=n.hasOwnProperty;function i(s){var a=this.__data__;if(e){var o=a[s];return o===t?void 0:o}return r.call(a,s)?a[s]:void 0}return _c=i,_c}var kc,Vb;function Oq(){if(Vb)return kc;Vb=1;var e=kl(),t=Object.prototype,n=t.hasOwnProperty;function r(i){var s=this.__data__;return e?s[i]!==void 0:n.call(s,i)}return kc=r,kc}var Cc,$b;function qq(){if($b)return Cc;$b=1;var e=kl(),t="__lodash_hash_undefined__";function n(r,i){var s=this.__data__;return this.size+=this.has(r)?0:1,s[r]=e&&i===void 0?t:i,this}return Cc=n,Cc}var Ec,Bb;function Fq(){if(Bb)return Ec;Bb=1;var e=Iq(),t=Dq(),n=Lq(),r=Oq(),i=qq();function s(a){var o=-1,l=a==null?0:a.length;for(this.clear();++o<l;){var u=a[o];this.set(u[0],u[1])}}return s.prototype.clear=e,s.prototype.delete=t,s.prototype.get=n,s.prototype.has=r,s.prototype.set=i,Ec=s,Ec}var Tc,zb;function Vq(){if(zb)return Tc;zb=1;var e=Fq(),t=_l(),n=Dg();function r(){this.size=0,this.__data__={hash:new e,map:new(n||t),string:new e}}return Tc=r,Tc}var jc,Ub;function $q(){if(Ub)return jc;Ub=1;function e(t){var n=typeof t;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?t!=="__proto__":t===null}return jc=e,jc}var Nc,Gb;function Cl(){if(Gb)return Nc;Gb=1;var e=$q();function t(n,r){var i=n.__data__;return e(r)?i[typeof r=="string"?"string":"hash"]:i.map}return Nc=t,Nc}var Mc,Hb;function Bq(){if(Hb)return Mc;Hb=1;var e=Cl();function t(n){var r=e(this,n).delete(n);return this.size-=r?1:0,r}return Mc=t,Mc}var Pc,Wb;function zq(){if(Wb)return Pc;Wb=1;var e=Cl();function t(n){return e(this,n).get(n)}return Pc=t,Pc}var Rc,Kb;function Uq(){if(Kb)return Rc;Kb=1;var e=Cl();function t(n){return e(this,n).has(n)}return Rc=t,Rc}var Ac,Yb;function Gq(){if(Yb)return Ac;Yb=1;var e=Cl();function t(n,r){var i=e(this,n),s=i.size;return i.set(n,r),this.size+=i.size==s?0:1,this}return Ac=t,Ac}var Ic,Qb;function Lg(){if(Qb)return Ic;Qb=1;var e=Vq(),t=Bq(),n=zq(),r=Uq(),i=Gq();function s(a){var o=-1,l=a==null?0:a.length;for(this.clear();++o<l;){var u=a[o];this.set(u[0],u[1])}}return s.prototype.clear=e,s.prototype.delete=t,s.prototype.get=n,s.prototype.has=r,s.prototype.set=i,Ic=s,Ic}var Dc,Jb;function Hq(){if(Jb)return Dc;Jb=1;var e=_l(),t=Dg(),n=Lg(),r=200;function i(s,a){var o=this.__data__;if(o instanceof e){var l=o.__data__;if(!t||l.length<r-1)return l.push([s,a]),this.size=++o.size,this;o=this.__data__=new n(l)}return o.set(s,a),this.size=o.size,this}return Dc=i,Dc}var Lc,Xb;function El(){if(Xb)return Lc;Xb=1;var e=_l(),t=kq(),n=Cq(),r=Eq(),i=Tq(),s=Hq();function a(o){var l=this.__data__=new e(o);this.size=l.size}return a.prototype.clear=t,a.prototype.delete=n,a.prototype.get=r,a.prototype.has=i,a.prototype.set=s,Lc=a,Lc}var Oc,Zb;function Og(){if(Zb)return Oc;Zb=1;function e(t,n){for(var r=-1,i=t==null?0:t.length;++r<i&&n(t[r],r,t)!==!1;);return t}return Oc=e,Oc}var qc,ew;function kj(){if(ew)return qc;ew=1;var e=Gr(),t=function(){try{var n=e(Object,"defineProperty");return n({},"",{}),n}catch{}}();return qc=t,qc}var Fc,tw;function Tl(){if(tw)return Fc;tw=1;var e=kj();function t(n,r,i){r=="__proto__"&&e?e(n,r,{configurable:!0,enumerable:!0,value:i,writable:!0}):n[r]=i}return Fc=t,Fc}var Vc,nw;function jl(){if(nw)return Vc;nw=1;var e=Tl(),t=Gi(),n=Object.prototype,r=n.hasOwnProperty;function i(s,a,o){var l=s[a];(!(r.call(s,a)&&t(l,o))||o===void 0&&!(a in s))&&e(s,a,o)}return Vc=i,Vc}var $c,rw;function _a(){if(rw)return $c;rw=1;var e=jl(),t=Tl();function n(r,i,s,a){var o=!s;s||(s={});for(var l=-1,u=i.length;++l<u;){var c=i[l],d=a?a(s[c],r[c],c,s,r):void 0;d===void 0&&(d=r[c]),o?t(s,c,d):e(s,c,d)}return s}return $c=n,$c}var Bc,iw;function Wq(){if(iw)return Bc;iw=1;function e(t,n){for(var r=-1,i=Array(t);++r<t;)i[r]=n(r);return i}return Bc=e,Bc}var zc,sw;function vn(){if(sw)return zc;sw=1;function e(t){return t!=null&&typeof t=="object"}return zc=e,zc}var Uc,aw;function Kq(){if(aw)return Uc;aw=1;var e=Ur(),t=vn(),n="[object Arguments]";function r(i){return t(i)&&e(i)==n}return Uc=r,Uc}var Gc,ow;function ka(){if(ow)return Gc;ow=1;var e=Kq(),t=vn(),n=Object.prototype,r=n.hasOwnProperty,i=n.propertyIsEnumerable,s=e(function(){return arguments}())?e:function(a){return t(a)&&r.call(a,"callee")&&!i.call(a,"callee")};return Gc=s,Gc}var Hc,lw;function Ge(){if(lw)return Hc;lw=1;var e=Array.isArray;return Hc=e,Hc}var Cs={exports:{}},Wc,uw;function Yq(){if(uw)return Wc;uw=1;function e(){return!1}return Wc=e,Wc}Cs.exports;var cw;function Wi(){return cw||(cw=1,function(e,t){var n=nn(),r=Yq(),i=t&&!t.nodeType&&t,s=i&&!0&&e&&!e.nodeType&&e,a=s&&s.exports===i,o=a?n.Buffer:void 0,l=o?o.isBuffer:void 0,u=l||r;e.exports=u}(Cs,Cs.exports)),Cs.exports}var Kc,dw;function Nl(){if(dw)return Kc;dw=1;var e=9007199254740991,t=/^(?:0|[1-9]\d*)$/;function n(r,i){var s=typeof r;return i=i??e,!!i&&(s=="number"||s!="symbol"&&t.test(r))&&r>-1&&r%1==0&&r<i}return Kc=n,Kc}var Yc,fw;function qg(){if(fw)return Yc;fw=1;var e=9007199254740991;function t(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=e}return Yc=t,Yc}var Qc,hw;function Qq(){if(hw)return Qc;hw=1;var e=Ur(),t=qg(),n=vn(),r="[object Arguments]",i="[object Array]",s="[object Boolean]",a="[object Date]",o="[object Error]",l="[object Function]",u="[object Map]",c="[object Number]",d="[object Object]",h="[object RegExp]",m="[object Set]",g="[object String]",p="[object WeakMap]",b="[object ArrayBuffer]",v="[object DataView]",y="[object Float32Array]",x="[object Float64Array]",_="[object Int8Array]",k="[object Int16Array]",E="[object Int32Array]",j="[object Uint8Array]",T="[object Uint8ClampedArray]",M="[object Uint16Array]",D="[object Uint32Array]",R={};R[y]=R[x]=R[_]=R[k]=R[E]=R[j]=R[T]=R[M]=R[D]=!0,R[r]=R[i]=R[b]=R[s]=R[v]=R[a]=R[o]=R[l]=R[u]=R[c]=R[d]=R[h]=R[m]=R[g]=R[p]=!1;function H(Y){return n(Y)&&t(Y.length)&&!!R[e(Y)]}return Qc=H,Qc}var Jc,pw;function Ml(){if(pw)return Jc;pw=1;function e(t){return function(n){return t(n)}}return Jc=e,Jc}var Es={exports:{}};Es.exports;var mw;function Fg(){return mw||(mw=1,function(e,t){var n=Sj(),r=t&&!t.nodeType&&t,i=r&&!0&&e&&!e.nodeType&&e,s=i&&i.exports===r,a=s&&n.process,o=function(){try{var l=i&&i.require&&i.require("util").types;return l||a&&a.binding&&a.binding("util")}catch{}}();e.exports=o}(Es,Es.exports)),Es.exports}var Xc,vw;function Ca(){if(vw)return Xc;vw=1;var e=Qq(),t=Ml(),n=Fg(),r=n&&n.isTypedArray,i=r?t(r):e;return Xc=i,Xc}var Zc,gw;function Cj(){if(gw)return Zc;gw=1;var e=Wq(),t=ka(),n=Ge(),r=Wi(),i=Nl(),s=Ca(),a=Object.prototype,o=a.hasOwnProperty;function l(u,c){var d=n(u),h=!d&&t(u),m=!d&&!h&&r(u),g=!d&&!h&&!m&&s(u),p=d||h||m||g,b=p?e(u.length,String):[],v=b.length;for(var y in u)(c||o.call(u,y))&&!(p&&(y=="length"||m&&(y=="offset"||y=="parent")||g&&(y=="buffer"||y=="byteLength"||y=="byteOffset")||i(y,v)))&&b.push(y);return b}return Zc=l,Zc}var ed,yw;function Pl(){if(yw)return ed;yw=1;var e=Object.prototype;function t(n){var r=n&&n.constructor,i=typeof r=="function"&&r.prototype||e;return n===i}return ed=t,ed}var td,xw;function Ej(){if(xw)return td;xw=1;function e(t,n){return function(r){return t(n(r))}}return td=e,td}var nd,bw;function Jq(){if(bw)return nd;bw=1;var e=Ej(),t=e(Object.keys,Object);return nd=t,nd}var rd,ww;function Vg(){if(ww)return rd;ww=1;var e=Pl(),t=Jq(),n=Object.prototype,r=n.hasOwnProperty;function i(s){if(!e(s))return t(s);var a=[];for(var o in Object(s))r.call(s,o)&&o!="constructor"&&a.push(o);return a}return rd=i,rd}var id,Sw;function qn(){if(Sw)return id;Sw=1;var e=Sa(),t=qg();function n(r){return r!=null&&t(r.length)&&!e(r)}return id=n,id}var sd,_w;function xr(){if(_w)return sd;_w=1;var e=Cj(),t=Vg(),n=qn();function r(i){return n(i)?e(i):t(i)}return sd=r,sd}var ad,kw;function Xq(){if(kw)return ad;kw=1;var e=_a(),t=xr();function n(r,i){return r&&e(i,t(i),r)}return ad=n,ad}var od,Cw;function Zq(){if(Cw)return od;Cw=1;function e(t){var n=[];if(t!=null)for(var r in Object(t))n.push(r);return n}return od=e,od}var ld,Ew;function eF(){if(Ew)return ld;Ew=1;var e=Gt(),t=Pl(),n=Zq(),r=Object.prototype,i=r.hasOwnProperty;function s(a){if(!e(a))return n(a);var o=t(a),l=[];for(var u in a)u=="constructor"&&(o||!i.call(a,u))||l.push(u);return l}return ld=s,ld}var ud,Tw;function Hr(){if(Tw)return ud;Tw=1;var e=Cj(),t=eF(),n=qn();function r(i){return n(i)?e(i,!0):t(i)}return ud=r,ud}var cd,jw;function tF(){if(jw)return cd;jw=1;var e=_a(),t=Hr();function n(r,i){return r&&e(i,t(i),r)}return cd=n,cd}var Ts={exports:{}};Ts.exports;var Nw;function Tj(){return Nw||(Nw=1,function(e,t){var n=nn(),r=t&&!t.nodeType&&t,i=r&&!0&&e&&!e.nodeType&&e,s=i&&i.exports===r,a=s?n.Buffer:void 0,o=a?a.allocUnsafe:void 0;function l(u,c){if(c)return u.slice();var d=u.length,h=o?o(d):new u.constructor(d);return u.copy(h),h}e.exports=l}(Ts,Ts.exports)),Ts.exports}var dd,Mw;function jj(){if(Mw)return dd;Mw=1;function e(t,n){var r=-1,i=t.length;for(n||(n=Array(i));++r<i;)n[r]=t[r];return n}return dd=e,dd}var fd,Pw;function Nj(){if(Pw)return fd;Pw=1;function e(t,n){for(var r=-1,i=t==null?0:t.length,s=0,a=[];++r<i;){var o=t[r];n(o,r,t)&&(a[s++]=o)}return a}return fd=e,fd}var hd,Rw;function Mj(){if(Rw)return hd;Rw=1;function e(){return[]}return hd=e,hd}var pd,Aw;function $g(){if(Aw)return pd;Aw=1;var e=Nj(),t=Mj(),n=Object.prototype,r=n.propertyIsEnumerable,i=Object.getOwnPropertySymbols,s=i?function(a){return a==null?[]:(a=Object(a),e(i(a),function(o){return r.call(a,o)}))}:t;return pd=s,pd}var md,Iw;function nF(){if(Iw)return md;Iw=1;var e=_a(),t=$g();function n(r,i){return e(r,t(r),i)}return md=n,md}var vd,Dw;function Bg(){if(Dw)return vd;Dw=1;function e(t,n){for(var r=-1,i=n.length,s=t.length;++r<i;)t[s+r]=n[r];return t}return vd=e,vd}var gd,Lw;function Rl(){if(Lw)return gd;Lw=1;var e=Ej(),t=e(Object.getPrototypeOf,Object);return gd=t,gd}var yd,Ow;function Pj(){if(Ow)return yd;Ow=1;var e=Bg(),t=Rl(),n=$g(),r=Mj(),i=Object.getOwnPropertySymbols,s=i?function(a){for(var o=[];a;)e(o,n(a)),a=t(a);return o}:r;return yd=s,yd}var xd,qw;function rF(){if(qw)return xd;qw=1;var e=_a(),t=Pj();function n(r,i){return e(r,t(r),i)}return xd=n,xd}var bd,Fw;function Rj(){if(Fw)return bd;Fw=1;var e=Bg(),t=Ge();function n(r,i,s){var a=i(r);return t(r)?a:e(a,s(r))}return bd=n,bd}var wd,Vw;function Aj(){if(Vw)return wd;Vw=1;var e=Rj(),t=$g(),n=xr();function r(i){return e(i,n,t)}return wd=r,wd}var Sd,$w;function iF(){if($w)return Sd;$w=1;var e=Rj(),t=Pj(),n=Hr();function r(i){return e(i,n,t)}return Sd=r,Sd}var _d,Bw;function sF(){if(Bw)return _d;Bw=1;var e=Gr(),t=nn(),n=e(t,"DataView");return _d=n,_d}var kd,zw;function aF(){if(zw)return kd;zw=1;var e=Gr(),t=nn(),n=e(t,"Promise");return kd=n,kd}var Cd,Uw;function Ij(){if(Uw)return Cd;Uw=1;var e=Gr(),t=nn(),n=e(t,"Set");return Cd=n,Cd}var Ed,Gw;function oF(){if(Gw)return Ed;Gw=1;var e=Gr(),t=nn(),n=e(t,"WeakMap");return Ed=n,Ed}var Td,Hw;function Ki(){if(Hw)return Td;Hw=1;var e=sF(),t=Dg(),n=aF(),r=Ij(),i=oF(),s=Ur(),a=_j(),o="[object Map]",l="[object Object]",u="[object Promise]",c="[object Set]",d="[object WeakMap]",h="[object DataView]",m=a(e),g=a(t),p=a(n),b=a(r),v=a(i),y=s;return(e&&y(new e(new ArrayBuffer(1)))!=h||t&&y(new t)!=o||n&&y(n.resolve())!=u||r&&y(new r)!=c||i&&y(new i)!=d)&&(y=function(x){var _=s(x),k=_==l?x.constructor:void 0,E=k?a(k):"";if(E)switch(E){case m:return h;case g:return o;case p:return u;case b:return c;case v:return d}return _}),Td=y,Td}var jd,Ww;function lF(){if(Ww)return jd;Ww=1;var e=Object.prototype,t=e.hasOwnProperty;function n(r){var i=r.length,s=new r.constructor(i);return i&&typeof r[0]=="string"&&t.call(r,"index")&&(s.index=r.index,s.input=r.input),s}return jd=n,jd}var Nd,Kw;function Dj(){if(Kw)return Nd;Kw=1;var e=nn(),t=e.Uint8Array;return Nd=t,Nd}var Md,Yw;function zg(){if(Yw)return Md;Yw=1;var e=Dj();function t(n){var r=new n.constructor(n.byteLength);return new e(r).set(new e(n)),r}return Md=t,Md}var Pd,Qw;function uF(){if(Qw)return Pd;Qw=1;var e=zg();function t(n,r){var i=r?e(n.buffer):n.buffer;return new n.constructor(i,n.byteOffset,n.byteLength)}return Pd=t,Pd}var Rd,Jw;function cF(){if(Jw)return Rd;Jw=1;var e=/\w*$/;function t(n){var r=new n.constructor(n.source,e.exec(n));return r.lastIndex=n.lastIndex,r}return Rd=t,Rd}var Ad,Xw;function dF(){if(Xw)return Ad;Xw=1;var e=Hi(),t=e?e.prototype:void 0,n=t?t.valueOf:void 0;function r(i){return n?Object(n.call(i)):{}}return Ad=r,Ad}var Id,Zw;function Lj(){if(Zw)return Id;Zw=1;var e=zg();function t(n,r){var i=r?e(n.buffer):n.buffer;return new n.constructor(i,n.byteOffset,n.length)}return Id=t,Id}var Dd,e1;function fF(){if(e1)return Dd;e1=1;var e=zg(),t=uF(),n=cF(),r=dF(),i=Lj(),s="[object Boolean]",a="[object Date]",o="[object Map]",l="[object Number]",u="[object RegExp]",c="[object Set]",d="[object String]",h="[object Symbol]",m="[object ArrayBuffer]",g="[object DataView]",p="[object Float32Array]",b="[object Float64Array]",v="[object Int8Array]",y="[object Int16Array]",x="[object Int32Array]",_="[object Uint8Array]",k="[object Uint8ClampedArray]",E="[object Uint16Array]",j="[object Uint32Array]";function T(M,D,R){var H=M.constructor;switch(D){case m:return e(M);case s:case a:return new H(+M);case g:return t(M,R);case p:case b:case v:case y:case x:case _:case k:case E:case j:return i(M,R);case o:return new H;case l:case d:return new H(M);case u:return n(M);case c:return new H;case h:return r(M)}}return Dd=T,Dd}var Ld,t1;function Oj(){if(t1)return Ld;t1=1;var e=Gt(),t=Object.create,n=function(){function r(){}return function(i){if(!e(i))return{};if(t)return t(i);r.prototype=i;var s=new r;return r.prototype=void 0,s}}();return Ld=n,Ld}var Od,n1;function qj(){if(n1)return Od;n1=1;var e=Oj(),t=Rl(),n=Pl();function r(i){return typeof i.constructor=="function"&&!n(i)?e(t(i)):{}}return Od=r,Od}var qd,r1;function hF(){if(r1)return qd;r1=1;var e=Ki(),t=vn(),n="[object Map]";function r(i){return t(i)&&e(i)==n}return qd=r,qd}var Fd,i1;function pF(){if(i1)return Fd;i1=1;var e=hF(),t=Ml(),n=Fg(),r=n&&n.isMap,i=r?t(r):e;return Fd=i,Fd}var Vd,s1;function mF(){if(s1)return Vd;s1=1;var e=Ki(),t=vn(),n="[object Set]";function r(i){return t(i)&&e(i)==n}return Vd=r,Vd}var $d,a1;function vF(){if(a1)return $d;a1=1;var e=mF(),t=Ml(),n=Fg(),r=n&&n.isSet,i=r?t(r):e;return $d=i,$d}var Bd,o1;function Fj(){if(o1)return Bd;o1=1;var e=El(),t=Og(),n=jl(),r=Xq(),i=tF(),s=Tj(),a=jj(),o=nF(),l=rF(),u=Aj(),c=iF(),d=Ki(),h=lF(),m=fF(),g=qj(),p=Ge(),b=Wi(),v=pF(),y=Gt(),x=vF(),_=xr(),k=Hr(),E=1,j=2,T=4,M="[object Arguments]",D="[object Array]",R="[object Boolean]",H="[object Date]",Y="[object Error]",pe="[object Function]",F="[object GeneratorFunction]",le="[object Map]",se="[object Number]",A="[object Object]",I="[object RegExp]",U="[object Set]",z="[object String]",re="[object Symbol]",Te="[object WeakMap]",ue="[object ArrayBuffer]",me="[object DataView]",xe="[object Float32Array]",nt="[object Float64Array]",rt="[object Int8Array]",dt="[object Int16Array]",It="[object Int32Array]",gn="[object Uint8Array]",Vn="[object Uint8ClampedArray]",O="[object Uint16Array]",ee="[object Uint32Array]",J={};J[M]=J[D]=J[ue]=J[me]=J[R]=J[H]=J[xe]=J[nt]=J[rt]=J[dt]=J[It]=J[le]=J[se]=J[A]=J[I]=J[U]=J[z]=J[re]=J[gn]=J[Vn]=J[O]=J[ee]=!0,J[Y]=J[pe]=J[Te]=!1;function qe(te,Re,Wt,br,_t,ze){var ye,Dt=Re&E,sn=Re&j,Qi=Re&T;if(Wt&&(ye=_t?Wt(te,br,_t,ze):Wt(te)),ye!==void 0)return ye;if(!y(te))return te;var $n=p(te);if($n){if(ye=h(te),!Dt)return a(te,ye)}else{var fe=d(te),Yr=fe==pe||fe==F;if(b(te))return s(te,Dt);if(fe==A||fe==M||Yr&&!_t){if(ye=sn||Yr?{}:g(te),!Dt)return sn?l(te,i(ye,te)):o(te,r(ye,te))}else{if(!J[fe])return _t?te:{};ye=m(te,fe,Dt)}}ze||(ze=new e);var an=ze.get(te);if(an)return an;ze.set(te,ye),x(te)?te.forEach(function(vt){ye.add(qe(vt,Re,Wt,vt,te,ze))}):v(te)&&te.forEach(function(vt,N){ye.set(N,qe(vt,Re,Wt,N,te,ze))});var Qr=Qi?sn?c:u:sn?k:_,we=$n?void 0:Qr(te);return t(we||te,function(vt,N){we&&(N=vt,vt=te[N]),n(ye,N,qe(vt,Re,Wt,N,te,ze))}),ye}return Bd=qe,Bd}var zd,l1;function gF(){if(l1)return zd;l1=1;var e=Fj(),t=4;function n(r){return e(r,t)}return zd=n,zd}var Ud,u1;function Ug(){if(u1)return Ud;u1=1;function e(t){return function(){return t}}return Ud=e,Ud}var Gd,c1;function yF(){if(c1)return Gd;c1=1;function e(t){return function(n,r,i){for(var s=-1,a=Object(n),o=i(n),l=o.length;l--;){var u=o[t?l:++s];if(r(a[u],u,a)===!1)break}return n}}return Gd=e,Gd}var Hd,d1;function Gg(){if(d1)return Hd;d1=1;var e=yF(),t=e();return Hd=t,Hd}var Wd,f1;function Hg(){if(f1)return Wd;f1=1;var e=Gg(),t=xr();function n(r,i){return r&&e(r,i,t)}return Wd=n,Wd}var Kd,h1;function xF(){if(h1)return Kd;h1=1;var e=qn();function t(n,r){return function(i,s){if(i==null)return i;if(!e(i))return n(i,s);for(var a=i.length,o=r?a:-1,l=Object(i);(r?o--:++o<a)&&s(l[o],o,l)!==!1;);return i}}return Kd=t,Kd}var Yd,p1;function Al(){if(p1)return Yd;p1=1;var e=Hg(),t=xF(),n=t(e);return Yd=n,Yd}var Qd,m1;function Wr(){if(m1)return Qd;m1=1;function e(t){return t}return Qd=e,Qd}var Jd,v1;function Vj(){if(v1)return Jd;v1=1;var e=Wr();function t(n){return typeof n=="function"?n:e}return Jd=t,Jd}var Xd,g1;function $j(){if(g1)return Xd;g1=1;var e=Og(),t=Al(),n=Vj(),r=Ge();function i(s,a){var o=r(s)?e:t;return o(s,n(a))}return Xd=i,Xd}var Zd,y1;function Bj(){return y1||(y1=1,Zd=$j()),Zd}var ef,x1;function bF(){if(x1)return ef;x1=1;var e=Al();function t(n,r){var i=[];return e(n,function(s,a,o){r(s,a,o)&&i.push(s)}),i}return ef=t,ef}var tf,b1;function wF(){if(b1)return tf;b1=1;var e="__lodash_hash_undefined__";function t(n){return this.__data__.set(n,e),this}return tf=t,tf}var nf,w1;function SF(){if(w1)return nf;w1=1;function e(t){return this.__data__.has(t)}return nf=e,nf}var rf,S1;function zj(){if(S1)return rf;S1=1;var e=Lg(),t=wF(),n=SF();function r(i){var s=-1,a=i==null?0:i.length;for(this.__data__=new e;++s<a;)this.add(i[s])}return r.prototype.add=r.prototype.push=t,r.prototype.has=n,rf=r,rf}var sf,_1;function _F(){if(_1)return sf;_1=1;function e(t,n){for(var r=-1,i=t==null?0:t.length;++r<i;)if(n(t[r],r,t))return!0;return!1}return sf=e,sf}var af,k1;function Uj(){if(k1)return af;k1=1;function e(t,n){return t.has(n)}return af=e,af}var of,C1;function Gj(){if(C1)return of;C1=1;var e=zj(),t=_F(),n=Uj(),r=1,i=2;function s(a,o,l,u,c,d){var h=l&r,m=a.length,g=o.length;if(m!=g&&!(h&&g>m))return!1;var p=d.get(a),b=d.get(o);if(p&&b)return p==o&&b==a;var v=-1,y=!0,x=l&i?new e:void 0;for(d.set(a,o),d.set(o,a);++v<m;){var _=a[v],k=o[v];if(u)var E=h?u(k,_,v,o,a,d):u(_,k,v,a,o,d);if(E!==void 0){if(E)continue;y=!1;break}if(x){if(!t(o,function(j,T){if(!n(x,T)&&(_===j||c(_,j,l,u,d)))return x.push(T)})){y=!1;break}}else if(!(_===k||c(_,k,l,u,d))){y=!1;break}}return d.delete(a),d.delete(o),y}return of=s,of}var lf,E1;function kF(){if(E1)return lf;E1=1;function e(t){var n=-1,r=Array(t.size);return t.forEach(function(i,s){r[++n]=[s,i]}),r}return lf=e,lf}var uf,T1;function Wg(){if(T1)return uf;T1=1;function e(t){var n=-1,r=Array(t.size);return t.forEach(function(i){r[++n]=i}),r}return uf=e,uf}var cf,j1;function CF(){if(j1)return cf;j1=1;var e=Hi(),t=Dj(),n=Gi(),r=Gj(),i=kF(),s=Wg(),a=1,o=2,l="[object Boolean]",u="[object Date]",c="[object Error]",d="[object Map]",h="[object Number]",m="[object RegExp]",g="[object Set]",p="[object String]",b="[object Symbol]",v="[object ArrayBuffer]",y="[object DataView]",x=e?e.prototype:void 0,_=x?x.valueOf:void 0;function k(E,j,T,M,D,R,H){switch(T){case y:if(E.byteLength!=j.byteLength||E.byteOffset!=j.byteOffset)return!1;E=E.buffer,j=j.buffer;case v:return!(E.byteLength!=j.byteLength||!R(new t(E),new t(j)));case l:case u:case h:return n(+E,+j);case c:return E.name==j.name&&E.message==j.message;case m:case p:return E==j+"";case d:var Y=i;case g:var pe=M&a;if(Y||(Y=s),E.size!=j.size&&!pe)return!1;var F=H.get(E);if(F)return F==j;M|=o,H.set(E,j);var le=r(Y(E),Y(j),M,D,R,H);return H.delete(E),le;case b:if(_)return _.call(E)==_.call(j)}return!1}return cf=k,cf}var df,N1;function EF(){if(N1)return df;N1=1;var e=Aj(),t=1,n=Object.prototype,r=n.hasOwnProperty;function i(s,a,o,l,u,c){var d=o&t,h=e(s),m=h.length,g=e(a),p=g.length;if(m!=p&&!d)return!1;for(var b=m;b--;){var v=h[b];if(!(d?v in a:r.call(a,v)))return!1}var y=c.get(s),x=c.get(a);if(y&&x)return y==a&&x==s;var _=!0;c.set(s,a),c.set(a,s);for(var k=d;++b<m;){v=h[b];var E=s[v],j=a[v];if(l)var T=d?l(j,E,v,a,s,c):l(E,j,v,s,a,c);if(!(T===void 0?E===j||u(E,j,o,l,c):T)){_=!1;break}k||(k=v=="constructor")}if(_&&!k){var M=s.constructor,D=a.constructor;M!=D&&"constructor"in s&&"constructor"in a&&!(typeof M=="function"&&M instanceof M&&typeof D=="function"&&D instanceof D)&&(_=!1)}return c.delete(s),c.delete(a),_}return df=i,df}var ff,M1;function TF(){if(M1)return ff;M1=1;var e=El(),t=Gj(),n=CF(),r=EF(),i=Ki(),s=Ge(),a=Wi(),o=Ca(),l=1,u="[object Arguments]",c="[object Array]",d="[object Object]",h=Object.prototype,m=h.hasOwnProperty;function g(p,b,v,y,x,_){var k=s(p),E=s(b),j=k?c:i(p),T=E?c:i(b);j=j==u?d:j,T=T==u?d:T;var M=j==d,D=T==d,R=j==T;if(R&&a(p)){if(!a(b))return!1;k=!0,M=!1}if(R&&!M)return _||(_=new e),k||o(p)?t(p,b,v,y,x,_):n(p,b,j,v,y,x,_);if(!(v&l)){var H=M&&m.call(p,"__wrapped__"),Y=D&&m.call(b,"__wrapped__");if(H||Y){var pe=H?p.value():p,F=Y?b.value():b;return _||(_=new e),x(pe,F,v,y,_)}}return R?(_||(_=new e),r(p,b,v,y,x,_)):!1}return ff=g,ff}var hf,P1;function Hj(){if(P1)return hf;P1=1;var e=TF(),t=vn();function n(r,i,s,a,o){return r===i?!0:r==null||i==null||!t(r)&&!t(i)?r!==r&&i!==i:e(r,i,s,a,n,o)}return hf=n,hf}var pf,R1;function jF(){if(R1)return pf;R1=1;var e=El(),t=Hj(),n=1,r=2;function i(s,a,o,l){var u=o.length,c=u,d=!l;if(s==null)return!c;for(s=Object(s);u--;){var h=o[u];if(d&&h[2]?h[1]!==s[h[0]]:!(h[0]in s))return!1}for(;++u<c;){h=o[u];var m=h[0],g=s[m],p=h[1];if(d&&h[2]){if(g===void 0&&!(m in s))return!1}else{var b=new e;if(l)var v=l(g,p,m,s,a,b);if(!(v===void 0?t(p,g,n|r,l,b):v))return!1}}return!0}return pf=i,pf}var mf,A1;function Wj(){if(A1)return mf;A1=1;var e=Gt();function t(n){return n===n&&!e(n)}return mf=t,mf}var vf,I1;function NF(){if(I1)return vf;I1=1;var e=Wj(),t=xr();function n(r){for(var i=t(r),s=i.length;s--;){var a=i[s],o=r[a];i[s]=[a,o,e(o)]}return i}return vf=n,vf}var gf,D1;function Kj(){if(D1)return gf;D1=1;function e(t,n){return function(r){return r==null?!1:r[t]===n&&(n!==void 0||t in Object(r))}}return gf=e,gf}var yf,L1;function MF(){if(L1)return yf;L1=1;var e=jF(),t=NF(),n=Kj();function r(i){var s=t(i);return s.length==1&&s[0][2]?n(s[0][0],s[0][1]):function(a){return a===i||e(a,i,s)}}return yf=r,yf}var xf,O1;function Yi(){if(O1)return xf;O1=1;var e=Ur(),t=vn(),n="[object Symbol]";function r(i){return typeof i=="symbol"||t(i)&&e(i)==n}return xf=r,xf}var bf,q1;function Kg(){if(q1)return bf;q1=1;var e=Ge(),t=Yi(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function i(s,a){if(e(s))return!1;var o=typeof s;return o=="number"||o=="symbol"||o=="boolean"||s==null||t(s)?!0:r.test(s)||!n.test(s)||a!=null&&s in Object(a)}return bf=i,bf}var wf,F1;function PF(){if(F1)return wf;F1=1;var e=Lg(),t="Expected a function";function n(r,i){if(typeof r!="function"||i!=null&&typeof i!="function")throw new TypeError(t);var s=function(){var a=arguments,o=i?i.apply(this,a):a[0],l=s.cache;if(l.has(o))return l.get(o);var u=r.apply(this,a);return s.cache=l.set(o,u)||l,u};return s.cache=new(n.Cache||e),s}return n.Cache=e,wf=n,wf}var Sf,V1;function RF(){if(V1)return Sf;V1=1;var e=PF(),t=500;function n(r){var i=e(r,function(a){return s.size===t&&s.clear(),a}),s=i.cache;return i}return Sf=n,Sf}var _f,$1;function AF(){if($1)return _f;$1=1;var e=RF(),t=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,n=/\\(\\)?/g,r=e(function(i){var s=[];return i.charCodeAt(0)===46&&s.push(""),i.replace(t,function(a,o,l,u){s.push(l?u.replace(n,"$1"):o||a)}),s});return _f=r,_f}var kf,B1;function Il(){if(B1)return kf;B1=1;function e(t,n){for(var r=-1,i=t==null?0:t.length,s=Array(i);++r<i;)s[r]=n(t[r],r,t);return s}return kf=e,kf}var Cf,z1;function IF(){if(z1)return Cf;z1=1;var e=Hi(),t=Il(),n=Ge(),r=Yi(),i=e?e.prototype:void 0,s=i?i.toString:void 0;function a(o){if(typeof o=="string")return o;if(n(o))return t(o,a)+"";if(r(o))return s?s.call(o):"";var l=o+"";return l=="0"&&1/o==-1/0?"-0":l}return Cf=a,Cf}var Ef,U1;function Yj(){if(U1)return Ef;U1=1;var e=IF();function t(n){return n==null?"":e(n)}return Ef=t,Ef}var Tf,G1;function Dl(){if(G1)return Tf;G1=1;var e=Ge(),t=Kg(),n=AF(),r=Yj();function i(s,a){return e(s)?s:t(s,a)?[s]:n(r(s))}return Tf=i,Tf}var jf,H1;function Ea(){if(H1)return jf;H1=1;var e=Yi();function t(n){if(typeof n=="string"||e(n))return n;var r=n+"";return r=="0"&&1/n==-1/0?"-0":r}return jf=t,jf}var Nf,W1;function Ll(){if(W1)return Nf;W1=1;var e=Dl(),t=Ea();function n(r,i){i=e(i,r);for(var s=0,a=i.length;r!=null&&s<a;)r=r[t(i[s++])];return s&&s==a?r:void 0}return Nf=n,Nf}var Mf,K1;function DF(){if(K1)return Mf;K1=1;var e=Ll();function t(n,r,i){var s=n==null?void 0:e(n,r);return s===void 0?i:s}return Mf=t,Mf}var Pf,Y1;function LF(){if(Y1)return Pf;Y1=1;function e(t,n){return t!=null&&n in Object(t)}return Pf=e,Pf}var Rf,Q1;function Qj(){if(Q1)return Rf;Q1=1;var e=Dl(),t=ka(),n=Ge(),r=Nl(),i=qg(),s=Ea();function a(o,l,u){l=e(l,o);for(var c=-1,d=l.length,h=!1;++c<d;){var m=s(l[c]);if(!(h=o!=null&&u(o,m)))break;o=o[m]}return h||++c!=d?h:(d=o==null?0:o.length,!!d&&i(d)&&r(m,d)&&(n(o)||t(o)))}return Rf=a,Rf}var Af,J1;function Jj(){if(J1)return Af;J1=1;var e=LF(),t=Qj();function n(r,i){return r!=null&&t(r,i,e)}return Af=n,Af}var If,X1;function OF(){if(X1)return If;X1=1;var e=Hj(),t=DF(),n=Jj(),r=Kg(),i=Wj(),s=Kj(),a=Ea(),o=1,l=2;function u(c,d){return r(c)&&i(d)?s(a(c),d):function(h){var m=t(h,c);return m===void 0&&m===d?n(h,c):e(d,m,o|l)}}return If=u,If}var Df,Z1;function Xj(){if(Z1)return Df;Z1=1;function e(t){return function(n){return n==null?void 0:n[t]}}return Df=e,Df}var Lf,eS;function qF(){if(eS)return Lf;eS=1;var e=Ll();function t(n){return function(r){return e(r,n)}}return Lf=t,Lf}var Of,tS;function FF(){if(tS)return Of;tS=1;var e=Xj(),t=qF(),n=Kg(),r=Ea();function i(s){return n(s)?e(r(s)):t(s)}return Of=i,Of}var qf,nS;function Fn(){if(nS)return qf;nS=1;var e=MF(),t=OF(),n=Wr(),r=Ge(),i=FF();function s(a){return typeof a=="function"?a:a==null?n:typeof a=="object"?r(a)?t(a[0],a[1]):e(a):i(a)}return qf=s,qf}var Ff,rS;function Zj(){if(rS)return Ff;rS=1;var e=Nj(),t=bF(),n=Fn(),r=Ge();function i(s,a){var o=r(s)?e:t;return o(s,n(a,3))}return Ff=i,Ff}var Vf,iS;function VF(){if(iS)return Vf;iS=1;var e=Object.prototype,t=e.hasOwnProperty;function n(r,i){return r!=null&&t.call(r,i)}return Vf=n,Vf}var $f,sS;function eN(){if(sS)return $f;sS=1;var e=VF(),t=Qj();function n(r,i){return r!=null&&t(r,i,e)}return $f=n,$f}var Bf,aS;function $F(){if(aS)return Bf;aS=1;var e=Vg(),t=Ki(),n=ka(),r=Ge(),i=qn(),s=Wi(),a=Pl(),o=Ca(),l="[object Map]",u="[object Set]",c=Object.prototype,d=c.hasOwnProperty;function h(m){if(m==null)return!0;if(i(m)&&(r(m)||typeof m=="string"||typeof m.splice=="function"||s(m)||o(m)||n(m)))return!m.length;var g=t(m);if(g==l||g==u)return!m.size;if(a(m))return!e(m).length;for(var p in m)if(d.call(m,p))return!1;return!0}return Bf=h,Bf}var zf,oS;function tN(){if(oS)return zf;oS=1;function e(t){return t===void 0}return zf=e,zf}var Uf,lS;function nN(){if(lS)return Uf;lS=1;var e=Al(),t=qn();function n(r,i){var s=-1,a=t(r)?Array(r.length):[];return e(r,function(o,l,u){a[++s]=i(o,l,u)}),a}return Uf=n,Uf}var Gf,uS;function rN(){if(uS)return Gf;uS=1;var e=Il(),t=Fn(),n=nN(),r=Ge();function i(s,a){var o=r(s)?e:n;return o(s,t(a,3))}return Gf=i,Gf}var Hf,cS;function BF(){if(cS)return Hf;cS=1;function e(t,n,r,i){var s=-1,a=t==null?0:t.length;for(i&&a&&(r=t[++s]);++s<a;)r=n(r,t[s],s,t);return r}return Hf=e,Hf}var Wf,dS;function zF(){if(dS)return Wf;dS=1;function e(t,n,r,i,s){return s(t,function(a,o,l){r=i?(i=!1,a):n(r,a,o,l)}),r}return Wf=e,Wf}var Kf,fS;function iN(){if(fS)return Kf;fS=1;var e=BF(),t=Al(),n=Fn(),r=zF(),i=Ge();function s(a,o,l){var u=i(a)?e:r,c=arguments.length<3;return u(a,n(o,4),l,c,t)}return Kf=s,Kf}var Yf,hS;function UF(){if(hS)return Yf;hS=1;var e=Ur(),t=Ge(),n=vn(),r="[object String]";function i(s){return typeof s=="string"||!t(s)&&n(s)&&e(s)==r}return Yf=i,Yf}var Qf,pS;function GF(){if(pS)return Qf;pS=1;var e=Xj(),t=e("length");return Qf=t,Qf}var Jf,mS;function HF(){if(mS)return Jf;mS=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",i=t+n+r,s="\\ufe0e\\ufe0f",a="\\u200d",o=RegExp("["+a+e+i+s+"]");function l(u){return o.test(u)}return Jf=l,Jf}var Xf,vS;function WF(){if(vS)return Xf;vS=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",i=t+n+r,s="\\ufe0e\\ufe0f",a="["+e+"]",o="["+i+"]",l="\\ud83c[\\udffb-\\udfff]",u="(?:"+o+"|"+l+")",c="[^"+e+"]",d="(?:\\ud83c[\\udde6-\\uddff]){2}",h="[\\ud800-\\udbff][\\udc00-\\udfff]",m="\\u200d",g=u+"?",p="["+s+"]?",b="(?:"+m+"(?:"+[c,d,h].join("|")+")"+p+g+")*",v=p+g+b,y="(?:"+[c+o+"?",o,d,h,a].join("|")+")",x=RegExp(l+"(?="+l+")|"+y+v,"g");function _(k){for(var E=x.lastIndex=0;x.test(k);)++E;return E}return Xf=_,Xf}var Zf,gS;function KF(){if(gS)return Zf;gS=1;var e=GF(),t=HF(),n=WF();function r(i){return t(i)?n(i):e(i)}return Zf=r,Zf}var eh,yS;function YF(){if(yS)return eh;yS=1;var e=Vg(),t=Ki(),n=qn(),r=UF(),i=KF(),s="[object Map]",a="[object Set]";function o(l){if(l==null)return 0;if(n(l))return r(l)?i(l):l.length;var u=t(l);return u==s||u==a?l.size:e(l).length}return eh=o,eh}var th,xS;function QF(){if(xS)return th;xS=1;var e=Og(),t=Oj(),n=Hg(),r=Fn(),i=Rl(),s=Ge(),a=Wi(),o=Sa(),l=Gt(),u=Ca();function c(d,h,m){var g=s(d),p=g||a(d)||u(d);if(h=r(h,4),m==null){var b=d&&d.constructor;p?m=g?new b:[]:l(d)?m=o(b)?t(i(d)):{}:m={}}return(p?e:n)(d,function(v,y,x){return h(m,v,y,x)}),m}return th=c,th}var nh,bS;function JF(){if(bS)return nh;bS=1;var e=Hi(),t=ka(),n=Ge(),r=e?e.isConcatSpreadable:void 0;function i(s){return n(s)||t(s)||!!(r&&s&&s[r])}return nh=i,nh}var rh,wS;function Yg(){if(wS)return rh;wS=1;var e=Bg(),t=JF();function n(r,i,s,a,o){var l=-1,u=r.length;for(s||(s=t),o||(o=[]);++l<u;){var c=r[l];i>0&&s(c)?i>1?n(c,i-1,s,a,o):e(o,c):a||(o[o.length]=c)}return o}return rh=n,rh}var ih,SS;function XF(){if(SS)return ih;SS=1;function e(t,n,r){switch(r.length){case 0:return t.call(n);case 1:return t.call(n,r[0]);case 2:return t.call(n,r[0],r[1]);case 3:return t.call(n,r[0],r[1],r[2])}return t.apply(n,r)}return ih=e,ih}var sh,_S;function sN(){if(_S)return sh;_S=1;var e=XF(),t=Math.max;function n(r,i,s){return i=t(i===void 0?r.length-1:i,0),function(){for(var a=arguments,o=-1,l=t(a.length-i,0),u=Array(l);++o<l;)u[o]=a[i+o];o=-1;for(var c=Array(i+1);++o<i;)c[o]=a[o];return c[i]=s(u),e(r,this,c)}}return sh=n,sh}var ah,kS;function ZF(){if(kS)return ah;kS=1;var e=Ug(),t=kj(),n=Wr(),r=t?function(i,s){return t(i,"toString",{configurable:!0,enumerable:!1,value:e(s),writable:!0})}:n;return ah=r,ah}var oh,CS;function e3(){if(CS)return oh;CS=1;var e=800,t=16,n=Date.now;function r(i){var s=0,a=0;return function(){var o=n(),l=t-(o-a);if(a=o,l>0){if(++s>=e)return arguments[0]}else s=0;return i.apply(void 0,arguments)}}return oh=r,oh}var lh,ES;function aN(){if(ES)return lh;ES=1;var e=ZF(),t=e3(),n=t(e);return lh=n,lh}var uh,TS;function Ol(){if(TS)return uh;TS=1;var e=Wr(),t=sN(),n=aN();function r(i,s){return n(t(i,s,e),i+"")}return uh=r,uh}var ch,jS;function oN(){if(jS)return ch;jS=1;function e(t,n,r,i){for(var s=t.length,a=r+(i?1:-1);i?a--:++a<s;)if(n(t[a],a,t))return a;return-1}return ch=e,ch}var dh,NS;function t3(){if(NS)return dh;NS=1;function e(t){return t!==t}return dh=e,dh}var fh,MS;function n3(){if(MS)return fh;MS=1;function e(t,n,r){for(var i=r-1,s=t.length;++i<s;)if(t[i]===n)return i;return-1}return fh=e,fh}var hh,PS;function r3(){if(PS)return hh;PS=1;var e=oN(),t=t3(),n=n3();function r(i,s,a){return s===s?n(i,s,a):e(i,t,a)}return hh=r,hh}var ph,RS;function i3(){if(RS)return ph;RS=1;var e=r3();function t(n,r){var i=n==null?0:n.length;return!!i&&e(n,r,0)>-1}return ph=t,ph}var mh,AS;function s3(){if(AS)return mh;AS=1;function e(t,n,r){for(var i=-1,s=t==null?0:t.length;++i<s;)if(r(n,t[i]))return!0;return!1}return mh=e,mh}var vh,IS;function a3(){if(IS)return vh;IS=1;function e(){}return vh=e,vh}var gh,DS;function o3(){if(DS)return gh;DS=1;var e=Ij(),t=a3(),n=Wg(),r=1/0,i=e&&1/n(new e([,-0]))[1]==r?function(s){return new e(s)}:t;return gh=i,gh}var yh,LS;function l3(){if(LS)return yh;LS=1;var e=zj(),t=i3(),n=s3(),r=Uj(),i=o3(),s=Wg(),a=200;function o(l,u,c){var d=-1,h=t,m=l.length,g=!0,p=[],b=p;if(c)g=!1,h=n;else if(m>=a){var v=u?null:i(l);if(v)return s(v);g=!1,h=r,b=new e}else b=u?[]:p;e:for(;++d<m;){var y=l[d],x=u?u(y):y;if(y=c||y!==0?y:0,g&&x===x){for(var _=b.length;_--;)if(b[_]===x)continue e;u&&b.push(x),p.push(y)}else h(b,x,c)||(b!==p&&b.push(x),p.push(y))}return p}return yh=o,yh}var xh,OS;function lN(){if(OS)return xh;OS=1;var e=qn(),t=vn();function n(r){return t(r)&&e(r)}return xh=n,xh}var bh,qS;function u3(){if(qS)return bh;qS=1;var e=Yg(),t=Ol(),n=l3(),r=lN(),i=t(function(s){return n(e(s,1,r,!0))});return bh=i,bh}var wh,FS;function c3(){if(FS)return wh;FS=1;var e=Il();function t(n,r){return e(r,function(i){return n[i]})}return wh=t,wh}var Sh,VS;function uN(){if(VS)return Sh;VS=1;var e=c3(),t=xr();function n(r){return r==null?[]:e(r,t(r))}return Sh=n,Sh}var _h,$S;function Ht(){if($S)return _h;$S=1;var e;if(typeof Ig=="function")try{e={clone:gF(),constant:Ug(),each:Bj(),filter:Zj(),has:eN(),isArray:Ge(),isEmpty:$F(),isFunction:Sa(),isUndefined:tN(),keys:xr(),map:rN(),reduce:iN(),size:YF(),transform:QF(),union:u3(),values:uN()}}catch{}return e||(e=window._),_h=e,_h}var kh,BS;function Qg(){if(BS)return kh;BS=1;var e=Ht();kh=i;var t="\0",n="\0",r="";function i(c){this._isDirected=e.has(c,"directed")?c.directed:!0,this._isMultigraph=e.has(c,"multigraph")?c.multigraph:!1,this._isCompound=e.has(c,"compound")?c.compound:!1,this._label=void 0,this._defaultNodeLabelFn=e.constant(void 0),this._defaultEdgeLabelFn=e.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[n]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}i.prototype._nodeCount=0,i.prototype._edgeCount=0,i.prototype.isDirected=function(){return this._isDirected},i.prototype.isMultigraph=function(){return this._isMultigraph},i.prototype.isCompound=function(){return this._isCompound},i.prototype.setGraph=function(c){return this._label=c,this},i.prototype.graph=function(){return this._label},i.prototype.setDefaultNodeLabel=function(c){return e.isFunction(c)||(c=e.constant(c)),this._defaultNodeLabelFn=c,this},i.prototype.nodeCount=function(){return this._nodeCount},i.prototype.nodes=function(){return e.keys(this._nodes)},i.prototype.sources=function(){var c=this;return e.filter(this.nodes(),function(d){return e.isEmpty(c._in[d])})},i.prototype.sinks=function(){var c=this;return e.filter(this.nodes(),function(d){return e.isEmpty(c._out[d])})},i.prototype.setNodes=function(c,d){var h=arguments,m=this;return e.each(c,function(g){h.length>1?m.setNode(g,d):m.setNode(g)}),this},i.prototype.setNode=function(c,d){return e.has(this._nodes,c)?(arguments.length>1&&(this._nodes[c]=d),this):(this._nodes[c]=arguments.length>1?d:this._defaultNodeLabelFn(c),this._isCompound&&(this._parent[c]=n,this._children[c]={},this._children[n][c]=!0),this._in[c]={},this._preds[c]={},this._out[c]={},this._sucs[c]={},++this._nodeCount,this)},i.prototype.node=function(c){return this._nodes[c]},i.prototype.hasNode=function(c){return e.has(this._nodes,c)},i.prototype.removeNode=function(c){var d=this;if(e.has(this._nodes,c)){var h=function(m){d.removeEdge(d._edgeObjs[m])};delete this._nodes[c],this._isCompound&&(this._removeFromParentsChildList(c),delete this._parent[c],e.each(this.children(c),function(m){d.setParent(m)}),delete this._children[c]),e.each(e.keys(this._in[c]),h),delete this._in[c],delete this._preds[c],e.each(e.keys(this._out[c]),h),delete this._out[c],delete this._sucs[c],--this._nodeCount}return this},i.prototype.setParent=function(c,d){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(e.isUndefined(d))d=n;else{d+="";for(var h=d;!e.isUndefined(h);h=this.parent(h))if(h===c)throw new Error("Setting "+d+" as parent of "+c+" would create a cycle");this.setNode(d)}return this.setNode(c),this._removeFromParentsChildList(c),this._parent[c]=d,this._children[d][c]=!0,this},i.prototype._removeFromParentsChildList=function(c){delete this._children[this._parent[c]][c]},i.prototype.parent=function(c){if(this._isCompound){var d=this._parent[c];if(d!==n)return d}},i.prototype.children=function(c){if(e.isUndefined(c)&&(c=n),this._isCompound){var d=this._children[c];if(d)return e.keys(d)}else{if(c===n)return this.nodes();if(this.hasNode(c))return[]}},i.prototype.predecessors=function(c){var d=this._preds[c];if(d)return e.keys(d)},i.prototype.successors=function(c){var d=this._sucs[c];if(d)return e.keys(d)},i.prototype.neighbors=function(c){var d=this.predecessors(c);if(d)return e.union(d,this.successors(c))},i.prototype.isLeaf=function(c){var d;return this.isDirected()?d=this.successors(c):d=this.neighbors(c),d.length===0},i.prototype.filterNodes=function(c){var d=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});d.setGraph(this.graph());var h=this;e.each(this._nodes,function(p,b){c(b)&&d.setNode(b,p)}),e.each(this._edgeObjs,function(p){d.hasNode(p.v)&&d.hasNode(p.w)&&d.setEdge(p,h.edge(p))});var m={};function g(p){var b=h.parent(p);return b===void 0||d.hasNode(b)?(m[p]=b,b):b in m?m[b]:g(b)}return this._isCompound&&e.each(d.nodes(),function(p){d.setParent(p,g(p))}),d},i.prototype.setDefaultEdgeLabel=function(c){return e.isFunction(c)||(c=e.constant(c)),this._defaultEdgeLabelFn=c,this},i.prototype.edgeCount=function(){return this._edgeCount},i.prototype.edges=function(){return e.values(this._edgeObjs)},i.prototype.setPath=function(c,d){var h=this,m=arguments;return e.reduce(c,function(g,p){return m.length>1?h.setEdge(g,p,d):h.setEdge(g,p),p}),this},i.prototype.setEdge=function(){var c,d,h,m,g=!1,p=arguments[0];typeof p=="object"&&p!==null&&"v"in p?(c=p.v,d=p.w,h=p.name,arguments.length===2&&(m=arguments[1],g=!0)):(c=p,d=arguments[1],h=arguments[3],arguments.length>2&&(m=arguments[2],g=!0)),c=""+c,d=""+d,e.isUndefined(h)||(h=""+h);var b=o(this._isDirected,c,d,h);if(e.has(this._edgeLabels,b))return g&&(this._edgeLabels[b]=m),this;if(!e.isUndefined(h)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(c),this.setNode(d),this._edgeLabels[b]=g?m:this._defaultEdgeLabelFn(c,d,h);var v=l(this._isDirected,c,d,h);return c=v.v,d=v.w,Object.freeze(v),this._edgeObjs[b]=v,s(this._preds[d],c),s(this._sucs[c],d),this._in[d][b]=v,this._out[c][b]=v,this._edgeCount++,this},i.prototype.edge=function(c,d,h){var m=arguments.length===1?u(this._isDirected,arguments[0]):o(this._isDirected,c,d,h);return this._edgeLabels[m]},i.prototype.hasEdge=function(c,d,h){var m=arguments.length===1?u(this._isDirected,arguments[0]):o(this._isDirected,c,d,h);return e.has(this._edgeLabels,m)},i.prototype.removeEdge=function(c,d,h){var m=arguments.length===1?u(this._isDirected,arguments[0]):o(this._isDirected,c,d,h),g=this._edgeObjs[m];return g&&(c=g.v,d=g.w,delete this._edgeLabels[m],delete this._edgeObjs[m],a(this._preds[d],c),a(this._sucs[c],d),delete this._in[d][m],delete this._out[c][m],this._edgeCount--),this},i.prototype.inEdges=function(c,d){var h=this._in[c];if(h){var m=e.values(h);return d?e.filter(m,function(g){return g.v===d}):m}},i.prototype.outEdges=function(c,d){var h=this._out[c];if(h){var m=e.values(h);return d?e.filter(m,function(g){return g.w===d}):m}},i.prototype.nodeEdges=function(c,d){var h=this.inEdges(c,d);if(h)return h.concat(this.outEdges(c,d))};function s(c,d){c[d]?c[d]++:c[d]=1}function a(c,d){--c[d]||delete c[d]}function o(c,d,h,m){var g=""+d,p=""+h;if(!c&&g>p){var b=g;g=p,p=b}return g+r+p+r+(e.isUndefined(m)?t:m)}function l(c,d,h,m){var g=""+d,p=""+h;if(!c&&g>p){var b=g;g=p,p=b}var v={v:g,w:p};return m&&(v.name=m),v}function u(c,d){return o(c,d.v,d.w,d.name)}return kh}var Ch,zS;function d3(){return zS||(zS=1,Ch="2.1.8"),Ch}var Eh,US;function f3(){return US||(US=1,Eh={Graph:Qg(),version:d3()}),Eh}var Th,GS;function h3(){if(GS)return Th;GS=1;var e=Ht(),t=Qg();Th={write:n,read:s};function n(a){var o={options:{directed:a.isDirected(),multigraph:a.isMultigraph(),compound:a.isCompound()},nodes:r(a),edges:i(a)};return e.isUndefined(a.graph())||(o.value=e.clone(a.graph())),o}function r(a){return e.map(a.nodes(),function(o){var l=a.node(o),u=a.parent(o),c={v:o};return e.isUndefined(l)||(c.value=l),e.isUndefined(u)||(c.parent=u),c})}function i(a){return e.map(a.edges(),function(o){var l=a.edge(o),u={v:o.v,w:o.w};return e.isUndefined(o.name)||(u.name=o.name),e.isUndefined(l)||(u.value=l),u})}function s(a){var o=new t(a.options).setGraph(a.value);return e.each(a.nodes,function(l){o.setNode(l.v,l.value),l.parent&&o.setParent(l.v,l.parent)}),e.each(a.edges,function(l){o.setEdge({v:l.v,w:l.w,name:l.name},l.value)}),o}return Th}var jh,HS;function p3(){if(HS)return jh;HS=1;var e=Ht();jh=t;function t(n){var r={},i=[],s;function a(o){e.has(r,o)||(r[o]=!0,s.push(o),e.each(n.successors(o),a),e.each(n.predecessors(o),a))}return e.each(n.nodes(),function(o){s=[],a(o),s.length&&i.push(s)}),i}return jh}var Nh,WS;function cN(){if(WS)return Nh;WS=1;var e=Ht();Nh=t;function t(){this._arr=[],this._keyIndices={}}return t.prototype.size=function(){return this._arr.length},t.prototype.keys=function(){return this._arr.map(function(n){return n.key})},t.prototype.has=function(n){return e.has(this._keyIndices,n)},t.prototype.priority=function(n){var r=this._keyIndices[n];if(r!==void 0)return this._arr[r].priority},t.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key},t.prototype.add=function(n,r){var i=this._keyIndices;if(n=String(n),!e.has(i,n)){var s=this._arr,a=s.length;return i[n]=a,s.push({key:n,priority:r}),this._decrease(a),!0}return!1},t.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var n=this._arr.pop();return delete this._keyIndices[n.key],this._heapify(0),n.key},t.prototype.decrease=function(n,r){var i=this._keyIndices[n];if(r>this._arr[i].priority)throw new Error("New priority is greater than current priority. Key: "+n+" Old: "+this._arr[i].priority+" New: "+r);this._arr[i].priority=r,this._decrease(i)},t.prototype._heapify=function(n){var r=this._arr,i=2*n,s=i+1,a=n;i<r.length&&(a=r[i].priority<r[a].priority?i:a,s<r.length&&(a=r[s].priority<r[a].priority?s:a),a!==n&&(this._swap(n,a),this._heapify(a)))},t.prototype._decrease=function(n){for(var r=this._arr,i=r[n].priority,s;n!==0&&(s=n>>1,!(r[s].priority<i));)this._swap(n,s),n=s},t.prototype._swap=function(n,r){var i=this._arr,s=this._keyIndices,a=i[n],o=i[r];i[n]=o,i[r]=a,s[o.key]=n,s[a.key]=r},Nh}var Mh,KS;function dN(){if(KS)return Mh;KS=1;var e=Ht(),t=cN();Mh=r;var n=e.constant(1);function r(s,a,o,l){return i(s,String(a),o||n,l||function(u){return s.outEdges(u)})}function i(s,a,o,l){var u={},c=new t,d,h,m=function(g){var p=g.v!==d?g.v:g.w,b=u[p],v=o(g),y=h.distance+v;if(v<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+g+" Weight: "+v);y<b.distance&&(b.distance=y,b.predecessor=d,c.decrease(p,y))};for(s.nodes().forEach(function(g){var p=g===a?0:Number.POSITIVE_INFINITY;u[g]={distance:p},c.add(g,p)});c.size()>0&&(d=c.removeMin(),h=u[d],h.distance!==Number.POSITIVE_INFINITY);)l(d).forEach(m);return u}return Mh}var Ph,YS;function m3(){if(YS)return Ph;YS=1;var e=dN(),t=Ht();Ph=n;function n(r,i,s){return t.transform(r.nodes(),function(a,o){a[o]=e(r,o,i,s)},{})}return Ph}var Rh,QS;function fN(){if(QS)return Rh;QS=1;var e=Ht();Rh=t;function t(n){var r=0,i=[],s={},a=[];function o(l){var u=s[l]={onStack:!0,lowlink:r,index:r++};if(i.push(l),n.successors(l).forEach(function(h){e.has(s,h)?s[h].onStack&&(u.lowlink=Math.min(u.lowlink,s[h].index)):(o(h),u.lowlink=Math.min(u.lowlink,s[h].lowlink))}),u.lowlink===u.index){var c=[],d;do d=i.pop(),s[d].onStack=!1,c.push(d);while(l!==d);a.push(c)}}return n.nodes().forEach(function(l){e.has(s,l)||o(l)}),a}return Rh}var Ah,JS;function v3(){if(JS)return Ah;JS=1;var e=Ht(),t=fN();Ah=n;function n(r){return e.filter(t(r),function(i){return i.length>1||i.length===1&&r.hasEdge(i[0],i[0])})}return Ah}var Ih,XS;function g3(){if(XS)return Ih;XS=1;var e=Ht();Ih=n;var t=e.constant(1);function n(i,s,a){return r(i,s||t,a||function(o){return i.outEdges(o)})}function r(i,s,a){var o={},l=i.nodes();return l.forEach(function(u){o[u]={},o[u][u]={distance:0},l.forEach(function(c){u!==c&&(o[u][c]={distance:Number.POSITIVE_INFINITY})}),a(u).forEach(function(c){var d=c.v===u?c.w:c.v,h=s(c);o[u][d]={distance:h,predecessor:u}})}),l.forEach(function(u){var c=o[u];l.forEach(function(d){var h=o[d];l.forEach(function(m){var g=h[u],p=c[m],b=h[m],v=g.distance+p.distance;v<b.distance&&(b.distance=v,b.predecessor=p.predecessor)})})}),o}return Ih}var Dh,ZS;function hN(){if(ZS)return Dh;ZS=1;var e=Ht();Dh=t,t.CycleException=n;function t(r){var i={},s={},a=[];function o(l){if(e.has(s,l))throw new n;e.has(i,l)||(s[l]=!0,i[l]=!0,e.each(r.predecessors(l),o),delete s[l],a.push(l))}if(e.each(r.sinks(),o),e.size(i)!==r.nodeCount())throw new n;return a}function n(){}return n.prototype=new Error,Dh}var Lh,e_;function y3(){if(e_)return Lh;e_=1;var e=hN();Lh=t;function t(n){try{e(n)}catch(r){if(r instanceof e.CycleException)return!1;throw r}return!0}return Lh}var Oh,t_;function pN(){if(t_)return Oh;t_=1;var e=Ht();Oh=t;function t(r,i,s){e.isArray(i)||(i=[i]);var a=(r.isDirected()?r.successors:r.neighbors).bind(r),o=[],l={};return e.each(i,function(u){if(!r.hasNode(u))throw new Error("Graph does not have node: "+u);n(r,u,s==="post",l,a,o)}),o}function n(r,i,s,a,o,l){e.has(a,i)||(a[i]=!0,s||l.push(i),e.each(o(i),function(u){n(r,u,s,a,o,l)}),s&&l.push(i))}return Oh}var qh,n_;function x3(){if(n_)return qh;n_=1;var e=pN();qh=t;function t(n,r){return e(n,r,"post")}return qh}var Fh,r_;function b3(){if(r_)return Fh;r_=1;var e=pN();Fh=t;function t(n,r){return e(n,r,"pre")}return Fh}var Vh,i_;function w3(){if(i_)return Vh;i_=1;var e=Ht(),t=Qg(),n=cN();Vh=r;function r(i,s){var a=new t,o={},l=new n,u;function c(h){var m=h.v===u?h.w:h.v,g=l.priority(m);if(g!==void 0){var p=s(h);p<g&&(o[m]=u,l.decrease(m,p))}}if(i.nodeCount()===0)return a;e.each(i.nodes(),function(h){l.add(h,Number.POSITIVE_INFINITY),a.setNode(h)}),l.decrease(i.nodes()[0],0);for(var d=!1;l.size()>0;){if(u=l.removeMin(),e.has(o,u))a.setEdge(u,o[u]);else{if(d)throw new Error("Input graph is not connected: "+i);d=!0}i.nodeEdges(u).forEach(c)}return a}return Vh}var $h,s_;function S3(){return s_||(s_=1,$h={components:p3(),dijkstra:dN(),dijkstraAll:m3(),findCycles:v3(),floydWarshall:g3(),isAcyclic:y3(),postorder:x3(),preorder:b3(),prim:w3(),tarjan:fN(),topsort:hN()}),$h}var Bh,a_;function _3(){if(a_)return Bh;a_=1;var e=f3();return Bh={Graph:e.Graph,json:h3(),alg:S3(),version:e.version},Bh}var Yo;if(typeof Ig=="function")try{Yo=_3()}catch{}Yo||(Yo=window.graphlib);var rn=Yo,zh,o_;function k3(){if(o_)return zh;o_=1;var e=Fj(),t=1,n=4;function r(i){return e(i,t|n)}return zh=r,zh}var Uh,l_;function ql(){if(l_)return Uh;l_=1;var e=Gi(),t=qn(),n=Nl(),r=Gt();function i(s,a,o){if(!r(o))return!1;var l=typeof a;return(l=="number"?t(o)&&n(a,o.length):l=="string"&&a in o)?e(o[a],s):!1}return Uh=i,Uh}var Gh,u_;function C3(){if(u_)return Gh;u_=1;var e=Ol(),t=Gi(),n=ql(),r=Hr(),i=Object.prototype,s=i.hasOwnProperty,a=e(function(o,l){o=Object(o);var u=-1,c=l.length,d=c>2?l[2]:void 0;for(d&&n(l[0],l[1],d)&&(c=1);++u<c;)for(var h=l[u],m=r(h),g=-1,p=m.length;++g<p;){var b=m[g],v=o[b];(v===void 0||t(v,i[b])&&!s.call(o,b))&&(o[b]=h[b])}return o});return Gh=a,Gh}var Hh,c_;function E3(){if(c_)return Hh;c_=1;var e=Fn(),t=qn(),n=xr();function r(i){return function(s,a,o){var l=Object(s);if(!t(s)){var u=e(a,3);s=n(s),a=function(d){return u(l[d],d,l)}}var c=i(s,a,o);return c>-1?l[u?s[c]:c]:void 0}}return Hh=r,Hh}var Wh,d_;function T3(){if(d_)return Wh;d_=1;var e=/\s/;function t(n){for(var r=n.length;r--&&e.test(n.charAt(r)););return r}return Wh=t,Wh}var Kh,f_;function j3(){if(f_)return Kh;f_=1;var e=T3(),t=/^\s+/;function n(r){return r&&r.slice(0,e(r)+1).replace(t,"")}return Kh=n,Kh}var Yh,h_;function N3(){if(h_)return Yh;h_=1;var e=j3(),t=Gt(),n=Yi(),r=NaN,i=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,a=/^0o[0-7]+$/i,o=parseInt;function l(u){if(typeof u=="number")return u;if(n(u))return r;if(t(u)){var c=typeof u.valueOf=="function"?u.valueOf():u;u=t(c)?c+"":c}if(typeof u!="string")return u===0?u:+u;u=e(u);var d=s.test(u);return d||a.test(u)?o(u.slice(2),d?2:8):i.test(u)?r:+u}return Yh=l,Yh}var Qh,p_;function mN(){if(p_)return Qh;p_=1;var e=N3(),t=1/0,n=17976931348623157e292;function r(i){if(!i)return i===0?i:0;if(i=e(i),i===t||i===-t){var s=i<0?-1:1;return s*n}return i===i?i:0}return Qh=r,Qh}var Jh,m_;function M3(){if(m_)return Jh;m_=1;var e=mN();function t(n){var r=e(n),i=r%1;return r===r?i?r-i:r:0}return Jh=t,Jh}var Xh,v_;function P3(){if(v_)return Xh;v_=1;var e=oN(),t=Fn(),n=M3(),r=Math.max;function i(s,a,o){var l=s==null?0:s.length;if(!l)return-1;var u=o==null?0:n(o);return u<0&&(u=r(l+u,0)),e(s,t(a,3),u)}return Xh=i,Xh}var Zh,g_;function R3(){if(g_)return Zh;g_=1;var e=E3(),t=P3(),n=e(t);return Zh=n,Zh}var ep,y_;function vN(){if(y_)return ep;y_=1;var e=Yg();function t(n){var r=n==null?0:n.length;return r?e(n,1):[]}return ep=t,ep}var tp,x_;function A3(){if(x_)return tp;x_=1;var e=Gg(),t=Vj(),n=Hr();function r(i,s){return i==null?i:e(i,t(s),n)}return tp=r,tp}var np,b_;function I3(){if(b_)return np;b_=1;function e(t){var n=t==null?0:t.length;return n?t[n-1]:void 0}return np=e,np}var rp,w_;function D3(){if(w_)return rp;w_=1;var e=Tl(),t=Hg(),n=Fn();function r(i,s){var a={};return s=n(s,3),t(i,function(o,l,u){e(a,l,s(o,l,u))}),a}return rp=r,rp}var ip,S_;function Jg(){if(S_)return ip;S_=1;var e=Yi();function t(n,r,i){for(var s=-1,a=n.length;++s<a;){var o=n[s],l=r(o);if(l!=null&&(u===void 0?l===l&&!e(l):i(l,u)))var u=l,c=o}return c}return ip=t,ip}var sp,__;function L3(){if(__)return sp;__=1;function e(t,n){return t>n}return sp=e,sp}var ap,k_;function O3(){if(k_)return ap;k_=1;var e=Jg(),t=L3(),n=Wr();function r(i){return i&&i.length?e(i,n,t):void 0}return ap=r,ap}var op,C_;function gN(){if(C_)return op;C_=1;var e=Tl(),t=Gi();function n(r,i,s){(s!==void 0&&!t(r[i],s)||s===void 0&&!(i in r))&&e(r,i,s)}return op=n,op}var lp,E_;function q3(){if(E_)return lp;E_=1;var e=Ur(),t=Rl(),n=vn(),r="[object Object]",i=Function.prototype,s=Object.prototype,a=i.toString,o=s.hasOwnProperty,l=a.call(Object);function u(c){if(!n(c)||e(c)!=r)return!1;var d=t(c);if(d===null)return!0;var h=o.call(d,"constructor")&&d.constructor;return typeof h=="function"&&h instanceof h&&a.call(h)==l}return lp=u,lp}var up,T_;function yN(){if(T_)return up;T_=1;function e(t,n){if(!(n==="constructor"&&typeof t[n]=="function")&&n!="__proto__")return t[n]}return up=e,up}var cp,j_;function F3(){if(j_)return cp;j_=1;var e=_a(),t=Hr();function n(r){return e(r,t(r))}return cp=n,cp}var dp,N_;function V3(){if(N_)return dp;N_=1;var e=gN(),t=Tj(),n=Lj(),r=jj(),i=qj(),s=ka(),a=Ge(),o=lN(),l=Wi(),u=Sa(),c=Gt(),d=q3(),h=Ca(),m=yN(),g=F3();function p(b,v,y,x,_,k,E){var j=m(b,y),T=m(v,y),M=E.get(T);if(M){e(b,y,M);return}var D=k?k(j,T,y+"",b,v,E):void 0,R=D===void 0;if(R){var H=a(T),Y=!H&&l(T),pe=!H&&!Y&&h(T);D=T,H||Y||pe?a(j)?D=j:o(j)?D=r(j):Y?(R=!1,D=t(T,!0)):pe?(R=!1,D=n(T,!0)):D=[]:d(T)||s(T)?(D=j,s(j)?D=g(j):(!c(j)||u(j))&&(D=i(T))):R=!1}R&&(E.set(T,D),_(D,T,x,k,E),E.delete(T)),e(b,y,D)}return dp=p,dp}var fp,M_;function $3(){if(M_)return fp;M_=1;var e=El(),t=gN(),n=Gg(),r=V3(),i=Gt(),s=Hr(),a=yN();function o(l,u,c,d,h){l!==u&&n(u,function(m,g){if(h||(h=new e),i(m))r(l,u,g,c,o,d,h);else{var p=d?d(a(l,g),m,g+"",l,u,h):void 0;p===void 0&&(p=m),t(l,g,p)}},s)}return fp=o,fp}var hp,P_;function B3(){if(P_)return hp;P_=1;var e=Ol(),t=ql();function n(r){return e(function(i,s){var a=-1,o=s.length,l=o>1?s[o-1]:void 0,u=o>2?s[2]:void 0;for(l=r.length>3&&typeof l=="function"?(o--,l):void 0,u&&t(s[0],s[1],u)&&(l=o<3?void 0:l,o=1),i=Object(i);++a<o;){var c=s[a];c&&r(i,c,a,l)}return i})}return hp=n,hp}var pp,R_;function z3(){if(R_)return pp;R_=1;var e=$3(),t=B3(),n=t(function(r,i,s){e(r,i,s)});return pp=n,pp}var mp,A_;function xN(){if(A_)return mp;A_=1;function e(t,n){return t<n}return mp=e,mp}var vp,I_;function U3(){if(I_)return vp;I_=1;var e=Jg(),t=xN(),n=Wr();function r(i){return i&&i.length?e(i,n,t):void 0}return vp=r,vp}var gp,D_;function G3(){if(D_)return gp;D_=1;var e=Jg(),t=Fn(),n=xN();function r(i,s){return i&&i.length?e(i,t(s,2),n):void 0}return gp=r,gp}var yp,L_;function H3(){if(L_)return yp;L_=1;var e=nn(),t=function(){return e.Date.now()};return yp=t,yp}var xp,O_;function W3(){if(O_)return xp;O_=1;var e=jl(),t=Dl(),n=Nl(),r=Gt(),i=Ea();function s(a,o,l,u){if(!r(a))return a;o=t(o,a);for(var c=-1,d=o.length,h=d-1,m=a;m!=null&&++c<d;){var g=i(o[c]),p=l;if(g==="__proto__"||g==="constructor"||g==="prototype")return a;if(c!=h){var b=m[g];p=u?u(b,g,m):void 0,p===void 0&&(p=r(b)?b:n(o[c+1])?[]:{})}e(m,g,p),m=m[g]}return a}return xp=s,xp}var bp,q_;function K3(){if(q_)return bp;q_=1;var e=Ll(),t=W3(),n=Dl();function r(i,s,a){for(var o=-1,l=s.length,u={};++o<l;){var c=s[o],d=e(i,c);a(d,c)&&t(u,n(c,i),d)}return u}return bp=r,bp}var wp,F_;function Y3(){if(F_)return wp;F_=1;var e=K3(),t=Jj();function n(r,i){return e(r,i,function(s,a){return t(r,a)})}return wp=n,wp}var Sp,V_;function Q3(){if(V_)return Sp;V_=1;var e=vN(),t=sN(),n=aN();function r(i){return n(t(i,void 0,e),i+"")}return Sp=r,Sp}var _p,$_;function J3(){if($_)return _p;$_=1;var e=Y3(),t=Q3(),n=t(function(r,i){return r==null?{}:e(r,i)});return _p=n,_p}var kp,B_;function X3(){if(B_)return kp;B_=1;var e=Math.ceil,t=Math.max;function n(r,i,s,a){for(var o=-1,l=t(e((i-r)/(s||1)),0),u=Array(l);l--;)u[a?l:++o]=r,r+=s;return u}return kp=n,kp}var Cp,z_;function Z3(){if(z_)return Cp;z_=1;var e=X3(),t=ql(),n=mN();function r(i){return function(s,a,o){return o&&typeof o!="number"&&t(s,a,o)&&(a=o=void 0),s=n(s),a===void 0?(a=s,s=0):a=n(a),o=o===void 0?s<a?1:-1:n(o),e(s,a,o,i)}}return Cp=r,Cp}var Ep,U_;function eV(){if(U_)return Ep;U_=1;var e=Z3(),t=e();return Ep=t,Ep}var Tp,G_;function tV(){if(G_)return Tp;G_=1;function e(t,n){var r=t.length;for(t.sort(n);r--;)t[r]=t[r].value;return t}return Tp=e,Tp}var jp,H_;function nV(){if(H_)return jp;H_=1;var e=Yi();function t(n,r){if(n!==r){var i=n!==void 0,s=n===null,a=n===n,o=e(n),l=r!==void 0,u=r===null,c=r===r,d=e(r);if(!u&&!d&&!o&&n>r||o&&l&&c&&!u&&!d||s&&l&&c||!i&&c||!a)return 1;if(!s&&!o&&!d&&n<r||d&&i&&a&&!s&&!o||u&&i&&a||!l&&a||!c)return-1}return 0}return jp=t,jp}var Np,W_;function rV(){if(W_)return Np;W_=1;var e=nV();function t(n,r,i){for(var s=-1,a=n.criteria,o=r.criteria,l=a.length,u=i.length;++s<l;){var c=e(a[s],o[s]);if(c){if(s>=u)return c;var d=i[s];return c*(d=="desc"?-1:1)}}return n.index-r.index}return Np=t,Np}var Mp,K_;function iV(){if(K_)return Mp;K_=1;var e=Il(),t=Ll(),n=Fn(),r=nN(),i=tV(),s=Ml(),a=rV(),o=Wr(),l=Ge();function u(c,d,h){d.length?d=e(d,function(p){return l(p)?function(b){return t(b,p.length===1?p[0]:p)}:p}):d=[o];var m=-1;d=e(d,s(n));var g=r(c,function(p,b,v){var y=e(d,function(x){return x(p)});return{criteria:y,index:++m,value:p}});return i(g,function(p,b){return a(p,b,h)})}return Mp=u,Mp}var Pp,Y_;function sV(){if(Y_)return Pp;Y_=1;var e=Yg(),t=iV(),n=Ol(),r=ql(),i=n(function(s,a){if(s==null)return[];var o=a.length;return o>1&&r(s,a[0],a[1])?a=[]:o>2&&r(a[0],a[1],a[2])&&(a=[a[0]]),t(s,e(a,1),[])});return Pp=i,Pp}var Rp,Q_;function aV(){if(Q_)return Rp;Q_=1;var e=Yj(),t=0;function n(r){var i=++t;return e(r)+i}return Rp=n,Rp}var Ap,J_;function oV(){if(J_)return Ap;J_=1;function e(t,n,r){for(var i=-1,s=t.length,a=n.length,o={};++i<s;){var l=i<a?n[i]:void 0;r(o,t[i],l)}return o}return Ap=e,Ap}var Ip,X_;function lV(){if(X_)return Ip;X_=1;var e=jl(),t=oV();function n(r,i){return t(r||[],i||[],e)}return Ip=n,Ip}var Qo;if(typeof Ig=="function")try{Qo={cloneDeep:k3(),constant:Ug(),defaults:C3(),each:Bj(),filter:Zj(),find:R3(),flatten:vN(),forEach:$j(),forIn:A3(),has:eN(),isUndefined:tN(),last:I3(),map:rN(),mapValues:D3(),max:O3(),merge:z3(),min:U3(),minBy:G3(),now:H3(),pick:J3(),range:eV(),reduce:iN(),sortBy:sV(),uniqueId:aV(),values:uN(),zipObject:lV()}}catch{}Qo||(Qo=window._);var Ee=Qo,uV=Fl;function Fl(){var e={};e._next=e._prev=e,this._sentinel=e}Fl.prototype.dequeue=function(){var e=this._sentinel,t=e._prev;if(t!==e)return bN(t),t};Fl.prototype.enqueue=function(e){var t=this._sentinel;e._prev&&e._next&&bN(e),e._next=t._next,t._next._prev=e,t._next=e,e._prev=t};Fl.prototype.toString=function(){for(var e=[],t=this._sentinel,n=t._prev;n!==t;)e.push(JSON.stringify(n,cV)),n=n._prev;return"["+e.join(", ")+"]"};function bN(e){e._prev._next=e._next,e._next._prev=e._prev,delete e._next,delete e._prev}function cV(e,t){if(e!=="_next"&&e!=="_prev")return t}var En=Ee,dV=rn.Graph,fV=uV,hV=mV,pV=En.constant(1);function mV(e,t){if(e.nodeCount()<=1)return[];var n=gV(e,t||pV),r=vV(n.graph,n.buckets,n.zeroIdx);return En.flatten(En.map(r,function(i){return e.outEdges(i.v,i.w)}),!0)}function vV(e,t,n){for(var r=[],i=t[t.length-1],s=t[0],a;e.nodeCount();){for(;a=s.dequeue();)Dp(e,t,n,a);for(;a=i.dequeue();)Dp(e,t,n,a);if(e.nodeCount()){for(var o=t.length-2;o>0;--o)if(a=t[o].dequeue(),a){r=r.concat(Dp(e,t,n,a,!0));break}}}return r}function Dp(e,t,n,r,i){var s=i?[]:void 0;return En.forEach(e.inEdges(r.v),function(a){var o=e.edge(a),l=e.node(a.v);i&&s.push({v:a.v,w:a.w}),l.out-=o,ev(t,n,l)}),En.forEach(e.outEdges(r.v),function(a){var o=e.edge(a),l=a.w,u=e.node(l);u.in-=o,ev(t,n,u)}),e.removeNode(r.v),s}function gV(e,t){var n=new dV,r=0,i=0;En.forEach(e.nodes(),function(o){n.setNode(o,{v:o,in:0,out:0})}),En.forEach(e.edges(),function(o){var l=n.edge(o.v,o.w)||0,u=t(o),c=l+u;n.setEdge(o.v,o.w,c),i=Math.max(i,n.node(o.v).out+=u),r=Math.max(r,n.node(o.w).in+=u)});var s=En.range(i+r+3).map(function(){return new fV}),a=r+1;return En.forEach(n.nodes(),function(o){ev(s,a,n.node(o))}),{graph:n,buckets:s,zeroIdx:a}}function ev(e,t,n){n.out?n.in?e[n.out-n.in+t].enqueue(n):e[e.length-1].enqueue(n):e[0].enqueue(n)}var Pr=Ee,yV=hV,xV={run:bV,undo:SV};function bV(e){var t=e.graph().acyclicer==="greedy"?yV(e,n(e)):wV(e);Pr.forEach(t,function(r){var i=e.edge(r);e.removeEdge(r),i.forwardName=r.name,i.reversed=!0,e.setEdge(r.w,r.v,i,Pr.uniqueId("rev"))});function n(r){return function(i){return r.edge(i).weight}}}function wV(e){var t=[],n={},r={};function i(s){Pr.has(r,s)||(r[s]=!0,n[s]=!0,Pr.forEach(e.outEdges(s),function(a){Pr.has(n,a.w)?t.push(a):i(a.w)}),delete n[s])}return Pr.forEach(e.nodes(),i),t}function SV(e){Pr.forEach(e.edges(),function(t){var n=e.edge(t);if(n.reversed){e.removeEdge(t);var r=n.forwardName;delete n.reversed,delete n.forwardName,e.setEdge(t.w,t.v,n,r)}})}var he=Ee,wN=rn.Graph,St={addDummyNode:SN,simplify:_V,asNonCompoundGraph:kV,successorWeights:CV,predecessorWeights:EV,intersectRect:TV,buildLayerMatrix:jV,normalizeRanks:NV,removeEmptyRanks:MV,addBorderNode:PV,maxRank:_N,partition:RV,time:AV,notime:IV};function SN(e,t,n,r){var i;do i=he.uniqueId(r);while(e.hasNode(i));return n.dummy=t,e.setNode(i,n),i}function _V(e){var t=new wN().setGraph(e.graph());return he.forEach(e.nodes(),function(n){t.setNode(n,e.node(n))}),he.forEach(e.edges(),function(n){var r=t.edge(n.v,n.w)||{weight:0,minlen:1},i=e.edge(n);t.setEdge(n.v,n.w,{weight:r.weight+i.weight,minlen:Math.max(r.minlen,i.minlen)})}),t}function kV(e){var t=new wN({multigraph:e.isMultigraph()}).setGraph(e.graph());return he.forEach(e.nodes(),function(n){e.children(n).length||t.setNode(n,e.node(n))}),he.forEach(e.edges(),function(n){t.setEdge(n,e.edge(n))}),t}function CV(e){var t=he.map(e.nodes(),function(n){var r={};return he.forEach(e.outEdges(n),function(i){r[i.w]=(r[i.w]||0)+e.edge(i).weight}),r});return he.zipObject(e.nodes(),t)}function EV(e){var t=he.map(e.nodes(),function(n){var r={};return he.forEach(e.inEdges(n),function(i){r[i.v]=(r[i.v]||0)+e.edge(i).weight}),r});return he.zipObject(e.nodes(),t)}function TV(e,t){var n=e.x,r=e.y,i=t.x-n,s=t.y-r,a=e.width/2,o=e.height/2;if(!i&&!s)throw new Error("Not possible to find intersection inside of the rectangle");var l,u;return Math.abs(s)*a>Math.abs(i)*o?(s<0&&(o=-o),l=o*i/s,u=o):(i<0&&(a=-a),l=a,u=a*s/i),{x:n+l,y:r+u}}function jV(e){var t=he.map(he.range(_N(e)+1),function(){return[]});return he.forEach(e.nodes(),function(n){var r=e.node(n),i=r.rank;he.isUndefined(i)||(t[i][r.order]=n)}),t}function NV(e){var t=he.min(he.map(e.nodes(),function(n){return e.node(n).rank}));he.forEach(e.nodes(),function(n){var r=e.node(n);he.has(r,"rank")&&(r.rank-=t)})}function MV(e){var t=he.min(he.map(e.nodes(),function(s){return e.node(s).rank})),n=[];he.forEach(e.nodes(),function(s){var a=e.node(s).rank-t;n[a]||(n[a]=[]),n[a].push(s)});var r=0,i=e.graph().nodeRankFactor;he.forEach(n,function(s,a){he.isUndefined(s)&&a%i!==0?--r:r&&he.forEach(s,function(o){e.node(o).rank+=r})})}function PV(e,t,n,r){var i={width:0,height:0};return arguments.length>=4&&(i.rank=n,i.order=r),SN(e,"border",i,t)}function _N(e){return he.max(he.map(e.nodes(),function(t){var n=e.node(t).rank;if(!he.isUndefined(n))return n}))}function RV(e,t){var n={lhs:[],rhs:[]};return he.forEach(e,function(r){t(r)?n.lhs.push(r):n.rhs.push(r)}),n}function AV(e,t){var n=he.now();try{return t()}finally{console.log(e+" time: "+(he.now()-n)+"ms")}}function IV(e,t){return t()}var kN=Ee,DV=St,LV={run:OV,undo:FV};function OV(e){e.graph().dummyChains=[],kN.forEach(e.edges(),function(t){qV(e,t)})}function qV(e,t){var n=t.v,r=e.node(n).rank,i=t.w,s=e.node(i).rank,a=t.name,o=e.edge(t),l=o.labelRank;if(s!==r+1){e.removeEdge(t);var u,c,d;for(d=0,++r;r<s;++d,++r)o.points=[],c={width:0,height:0,edgeLabel:o,edgeObj:t,rank:r},u=DV.addDummyNode(e,"edge",c,"_d"),r===l&&(c.width=o.width,c.height=o.height,c.dummy="edge-label",c.labelpos=o.labelpos),e.setEdge(n,u,{weight:o.weight},a),d===0&&e.graph().dummyChains.push(u),n=u;e.setEdge(n,i,{weight:o.weight},a)}}function FV(e){kN.forEach(e.graph().dummyChains,function(t){var n=e.node(t),r=n.edgeLabel,i;for(e.setEdge(n.edgeObj,r);n.dummy;)i=e.successors(t)[0],e.removeNode(t),r.points.push({x:n.x,y:n.y}),n.dummy==="edge-label"&&(r.x=n.x,r.y=n.y,r.width=n.width,r.height=n.height),t=i,n=e.node(t)})}var Za=Ee,Vl={longestPath:VV,slack:$V};function VV(e){var t={};function n(r){var i=e.node(r);if(Za.has(t,r))return i.rank;t[r]=!0;var s=Za.min(Za.map(e.outEdges(r),function(a){return n(a.w)-e.edge(a).minlen}));return(s===Number.POSITIVE_INFINITY||s===void 0||s===null)&&(s=0),i.rank=s}Za.forEach(e.sources(),n)}function $V(e,t){return e.node(t.w).rank-e.node(t.v).rank-e.edge(t).minlen}var Jo=Ee,BV=rn.Graph,Xo=Vl.slack,CN=zV;function zV(e){var t=new BV({directed:!1}),n=e.nodes()[0],r=e.nodeCount();t.setNode(n,{});for(var i,s;UV(t,e)<r;)i=GV(t,e),s=t.hasNode(i.v)?Xo(e,i):-Xo(e,i),HV(t,e,s);return t}function UV(e,t){function n(r){Jo.forEach(t.nodeEdges(r),function(i){var s=i.v,a=r===s?i.w:s;!e.hasNode(a)&&!Xo(t,i)&&(e.setNode(a,{}),e.setEdge(r,a,{}),n(a))})}return Jo.forEach(e.nodes(),n),e.nodeCount()}function GV(e,t){return Jo.minBy(t.edges(),function(n){if(e.hasNode(n.v)!==e.hasNode(n.w))return Xo(t,n)})}function HV(e,t,n){Jo.forEach(e.nodes(),function(r){t.node(r).rank+=n})}var Ln=Ee,WV=CN,KV=Vl.slack,YV=Vl.longestPath,QV=rn.alg.preorder,JV=rn.alg.postorder,XV=St.simplify,ZV=Kr;Kr.initLowLimValues=Zg;Kr.initCutValues=Xg;Kr.calcCutValue=EN;Kr.leaveEdge=jN;Kr.enterEdge=NN;Kr.exchangeEdges=MN;function Kr(e){e=XV(e),YV(e);var t=WV(e);Zg(t),Xg(t,e);for(var n,r;n=jN(t);)r=NN(t,e,n),MN(t,e,n,r)}function Xg(e,t){var n=JV(e,e.nodes());n=n.slice(0,n.length-1),Ln.forEach(n,function(r){e$(e,t,r)})}function e$(e,t,n){var r=e.node(n),i=r.parent;e.edge(n,i).cutvalue=EN(e,t,n)}function EN(e,t,n){var r=e.node(n),i=r.parent,s=!0,a=t.edge(n,i),o=0;return a||(s=!1,a=t.edge(i,n)),o=a.weight,Ln.forEach(t.nodeEdges(n),function(l){var u=l.v===n,c=u?l.w:l.v;if(c!==i){var d=u===s,h=t.edge(l).weight;if(o+=d?h:-h,n$(e,n,c)){var m=e.edge(n,c).cutvalue;o+=d?-m:m}}}),o}function Zg(e,t){arguments.length<2&&(t=e.nodes()[0]),TN(e,{},1,t)}function TN(e,t,n,r,i){var s=n,a=e.node(r);return t[r]=!0,Ln.forEach(e.neighbors(r),function(o){Ln.has(t,o)||(n=TN(e,t,n,o,r))}),a.low=s,a.lim=n++,i?a.parent=i:delete a.parent,n}function jN(e){return Ln.find(e.edges(),function(t){return e.edge(t).cutvalue<0})}function NN(e,t,n){var r=n.v,i=n.w;t.hasEdge(r,i)||(r=n.w,i=n.v);var s=e.node(r),a=e.node(i),o=s,l=!1;s.lim>a.lim&&(o=a,l=!0);var u=Ln.filter(t.edges(),function(c){return l===Z_(e,e.node(c.v),o)&&l!==Z_(e,e.node(c.w),o)});return Ln.minBy(u,function(c){return KV(t,c)})}function MN(e,t,n,r){var i=n.v,s=n.w;e.removeEdge(i,s),e.setEdge(r.v,r.w,{}),Zg(e),Xg(e,t),t$(e,t)}function t$(e,t){var n=Ln.find(e.nodes(),function(i){return!t.node(i).parent}),r=QV(e,n);r=r.slice(1),Ln.forEach(r,function(i){var s=e.node(i).parent,a=t.edge(i,s),o=!1;a||(a=t.edge(s,i),o=!0),t.node(i).rank=t.node(s).rank+(o?a.minlen:-a.minlen)})}function n$(e,t,n){return e.hasEdge(t,n)}function Z_(e,t,n){return n.low<=t.lim&&t.lim<=n.lim}var r$=Vl,PN=r$.longestPath,i$=CN,s$=ZV,a$=o$;function o$(e){switch(e.graph().ranker){case"network-simplex":ek(e);break;case"tight-tree":u$(e);break;case"longest-path":l$(e);break;default:ek(e)}}var l$=PN;function u$(e){PN(e),i$(e)}function ek(e){s$(e)}var tv=Ee,c$=d$;function d$(e){var t=h$(e);tv.forEach(e.graph().dummyChains,function(n){for(var r=e.node(n),i=r.edgeObj,s=f$(e,t,i.v,i.w),a=s.path,o=s.lca,l=0,u=a[l],c=!0;n!==i.w;){if(r=e.node(n),c){for(;(u=a[l])!==o&&e.node(u).maxRank<r.rank;)l++;u===o&&(c=!1)}if(!c){for(;l<a.length-1&&e.node(u=a[l+1]).minRank<=r.rank;)l++;u=a[l]}e.setParent(n,u),n=e.successors(n)[0]}})}function f$(e,t,n,r){var i=[],s=[],a=Math.min(t[n].low,t[r].low),o=Math.max(t[n].lim,t[r].lim),l,u;l=n;do l=e.parent(l),i.push(l);while(l&&(t[l].low>a||o>t[l].lim));for(u=l,l=r;(l=e.parent(l))!==u;)s.push(l);return{path:i.concat(s.reverse()),lca:u}}function h$(e){var t={},n=0;function r(i){var s=n;tv.forEach(e.children(i),r),t[i]={low:s,lim:n++}}return tv.forEach(e.children(),r),t}var Tn=Ee,nv=St,p$={run:m$,cleanup:y$};function m$(e){var t=nv.addDummyNode(e,"root",{},"_root"),n=v$(e),r=Tn.max(Tn.values(n))-1,i=2*r+1;e.graph().nestingRoot=t,Tn.forEach(e.edges(),function(a){e.edge(a).minlen*=i});var s=g$(e)+1;Tn.forEach(e.children(),function(a){RN(e,t,i,s,r,n,a)}),e.graph().nodeRankFactor=i}function RN(e,t,n,r,i,s,a){var o=e.children(a);if(!o.length){a!==t&&e.setEdge(t,a,{weight:0,minlen:n});return}var l=nv.addBorderNode(e,"_bt"),u=nv.addBorderNode(e,"_bb"),c=e.node(a);e.setParent(l,a),c.borderTop=l,e.setParent(u,a),c.borderBottom=u,Tn.forEach(o,function(d){RN(e,t,n,r,i,s,d);var h=e.node(d),m=h.borderTop?h.borderTop:d,g=h.borderBottom?h.borderBottom:d,p=h.borderTop?r:2*r,b=m!==g?1:i-s[a]+1;e.setEdge(l,m,{weight:p,minlen:b,nestingEdge:!0}),e.setEdge(g,u,{weight:p,minlen:b,nestingEdge:!0})}),e.parent(a)||e.setEdge(t,l,{weight:0,minlen:i+s[a]})}function v$(e){var t={};function n(r,i){var s=e.children(r);s&&s.length&&Tn.forEach(s,function(a){n(a,i+1)}),t[r]=i}return Tn.forEach(e.children(),function(r){n(r,1)}),t}function g$(e){return Tn.reduce(e.edges(),function(t,n){return t+e.edge(n).weight},0)}function y$(e){var t=e.graph();e.removeNode(t.nestingRoot),delete t.nestingRoot,Tn.forEach(e.edges(),function(n){var r=e.edge(n);r.nestingEdge&&e.removeEdge(n)})}var Lp=Ee,x$=St,b$=w$;function w$(e){function t(n){var r=e.children(n),i=e.node(n);if(r.length&&Lp.forEach(r,t),Lp.has(i,"minRank")){i.borderLeft=[],i.borderRight=[];for(var s=i.minRank,a=i.maxRank+1;s<a;++s)tk(e,"borderLeft","_bl",n,i,s),tk(e,"borderRight","_br",n,i,s)}}Lp.forEach(e.children(),t)}function tk(e,t,n,r,i,s){var a={width:0,height:0,rank:s,borderType:t},o=i[t][s-1],l=x$.addDummyNode(e,"border",a,n);i[t][s]=l,e.setParent(l,r),o&&e.setEdge(o,l,{weight:1})}var dn=Ee,S$={adjust:_$,undo:k$};function _$(e){var t=e.graph().rankdir.toLowerCase();(t==="lr"||t==="rl")&&AN(e)}function k$(e){var t=e.graph().rankdir.toLowerCase();(t==="bt"||t==="rl")&&C$(e),(t==="lr"||t==="rl")&&(E$(e),AN(e))}function AN(e){dn.forEach(e.nodes(),function(t){nk(e.node(t))}),dn.forEach(e.edges(),function(t){nk(e.edge(t))})}function nk(e){var t=e.width;e.width=e.height,e.height=t}function C$(e){dn.forEach(e.nodes(),function(t){Op(e.node(t))}),dn.forEach(e.edges(),function(t){var n=e.edge(t);dn.forEach(n.points,Op),dn.has(n,"y")&&Op(n)})}function Op(e){e.y=-e.y}function E$(e){dn.forEach(e.nodes(),function(t){qp(e.node(t))}),dn.forEach(e.edges(),function(t){var n=e.edge(t);dn.forEach(n.points,qp),dn.has(n,"x")&&qp(n)})}function qp(e){var t=e.x;e.x=e.y,e.y=t}var bn=Ee,T$=j$;function j$(e){var t={},n=bn.filter(e.nodes(),function(o){return!e.children(o).length}),r=bn.max(bn.map(n,function(o){return e.node(o).rank})),i=bn.map(bn.range(r+1),function(){return[]});function s(o){if(!bn.has(t,o)){t[o]=!0;var l=e.node(o);i[l.rank].push(o),bn.forEach(e.successors(o),s)}}var a=bn.sortBy(n,function(o){return e.node(o).rank});return bn.forEach(a,s),i}var Gn=Ee,N$=M$;function M$(e,t){for(var n=0,r=1;r<t.length;++r)n+=P$(e,t[r-1],t[r]);return n}function P$(e,t,n){for(var r=Gn.zipObject(n,Gn.map(n,function(u,c){return c})),i=Gn.flatten(Gn.map(t,function(u){return Gn.sortBy(Gn.map(e.outEdges(u),function(c){return{pos:r[c.w],weight:e.edge(c).weight}}),"pos")}),!0),s=1;s<n.length;)s<<=1;var a=2*s-1;s-=1;var o=Gn.map(new Array(a),function(){return 0}),l=0;return Gn.forEach(i.forEach(function(u){var c=u.pos+s;o[c]+=u.weight;for(var d=0;c>0;)c%2&&(d+=o[c+1]),c=c-1>>1,o[c]+=u.weight;l+=u.weight*d})),l}var rk=Ee,R$=A$;function A$(e,t){return rk.map(t,function(n){var r=e.inEdges(n);if(r.length){var i=rk.reduce(r,function(s,a){var o=e.edge(a),l=e.node(a.v);return{sum:s.sum+o.weight*l.order,weight:s.weight+o.weight}},{sum:0,weight:0});return{v:n,barycenter:i.sum/i.weight,weight:i.weight}}else return{v:n}})}var Et=Ee,I$=D$;function D$(e,t){var n={};Et.forEach(e,function(i,s){var a=n[i.v]={indegree:0,in:[],out:[],vs:[i.v],i:s};Et.isUndefined(i.barycenter)||(a.barycenter=i.barycenter,a.weight=i.weight)}),Et.forEach(t.edges(),function(i){var s=n[i.v],a=n[i.w];!Et.isUndefined(s)&&!Et.isUndefined(a)&&(a.indegree++,s.out.push(n[i.w]))});var r=Et.filter(n,function(i){return!i.indegree});return L$(r)}function L$(e){var t=[];function n(s){return function(a){a.merged||(Et.isUndefined(a.barycenter)||Et.isUndefined(s.barycenter)||a.barycenter>=s.barycenter)&&O$(s,a)}}function r(s){return function(a){a.in.push(s),--a.indegree===0&&e.push(a)}}for(;e.length;){var i=e.pop();t.push(i),Et.forEach(i.in.reverse(),n(i)),Et.forEach(i.out,r(i))}return Et.map(Et.filter(t,function(s){return!s.merged}),function(s){return Et.pick(s,["vs","i","barycenter","weight"])})}function O$(e,t){var n=0,r=0;e.weight&&(n+=e.barycenter*e.weight,r+=e.weight),t.weight&&(n+=t.barycenter*t.weight,r+=t.weight),e.vs=t.vs.concat(e.vs),e.barycenter=n/r,e.weight=r,e.i=Math.min(t.i,e.i),t.merged=!0}var js=Ee,q$=St,F$=V$;function V$(e,t){var n=q$.partition(e,function(c){return js.has(c,"barycenter")}),r=n.lhs,i=js.sortBy(n.rhs,function(c){return-c.i}),s=[],a=0,o=0,l=0;r.sort($$(!!t)),l=ik(s,i,l),js.forEach(r,function(c){l+=c.vs.length,s.push(c.vs),a+=c.barycenter*c.weight,o+=c.weight,l=ik(s,i,l)});var u={vs:js.flatten(s,!0)};return o&&(u.barycenter=a/o,u.weight=o),u}function ik(e,t,n){for(var r;t.length&&(r=js.last(t)).i<=n;)t.pop(),e.push(r.vs),n++;return n}function $$(e){return function(t,n){return t.barycenter<n.barycenter?-1:t.barycenter>n.barycenter?1:e?n.i-t.i:t.i-n.i}}var Xn=Ee,B$=R$,z$=I$,U$=F$,G$=IN;function IN(e,t,n,r){var i=e.children(t),s=e.node(t),a=s?s.borderLeft:void 0,o=s?s.borderRight:void 0,l={};a&&(i=Xn.filter(i,function(g){return g!==a&&g!==o}));var u=B$(e,i);Xn.forEach(u,function(g){if(e.children(g.v).length){var p=IN(e,g.v,n,r);l[g.v]=p,Xn.has(p,"barycenter")&&W$(g,p)}});var c=z$(u,n);H$(c,l);var d=U$(c,r);if(a&&(d.vs=Xn.flatten([a,d.vs,o],!0),e.predecessors(a).length)){var h=e.node(e.predecessors(a)[0]),m=e.node(e.predecessors(o)[0]);Xn.has(d,"barycenter")||(d.barycenter=0,d.weight=0),d.barycenter=(d.barycenter*d.weight+h.order+m.order)/(d.weight+2),d.weight+=2}return d}function H$(e,t){Xn.forEach(e,function(n){n.vs=Xn.flatten(n.vs.map(function(r){return t[r]?t[r].vs:r}),!0)})}function W$(e,t){Xn.isUndefined(e.barycenter)?(e.barycenter=t.barycenter,e.weight=t.weight):(e.barycenter=(e.barycenter*e.weight+t.barycenter*t.weight)/(e.weight+t.weight),e.weight+=t.weight)}var Ns=Ee,K$=rn.Graph,Y$=Q$;function Q$(e,t,n){var r=J$(e),i=new K$({compound:!0}).setGraph({root:r}).setDefaultNodeLabel(function(s){return e.node(s)});return Ns.forEach(e.nodes(),function(s){var a=e.node(s),o=e.parent(s);(a.rank===t||a.minRank<=t&&t<=a.maxRank)&&(i.setNode(s),i.setParent(s,o||r),Ns.forEach(e[n](s),function(l){var u=l.v===s?l.w:l.v,c=i.edge(u,s),d=Ns.isUndefined(c)?0:c.weight;i.setEdge(u,s,{weight:e.edge(l).weight+d})}),Ns.has(a,"minRank")&&i.setNode(s,{borderLeft:a.borderLeft[t],borderRight:a.borderRight[t]}))}),i}function J$(e){for(var t;e.hasNode(t=Ns.uniqueId("_root")););return t}var X$=Ee,Z$=eB;function eB(e,t,n){var r={},i;X$.forEach(n,function(s){for(var a=e.parent(s),o,l;a;){if(o=e.parent(a),o?(l=r[o],r[o]=a):(l=i,i=a),l&&l!==a){t.setEdge(l,a);return}a=o}})}var ur=Ee,tB=T$,nB=N$,rB=G$,iB=Y$,sB=Z$,aB=rn.Graph,sk=St,oB=lB;function lB(e){var t=sk.maxRank(e),n=ak(e,ur.range(1,t+1),"inEdges"),r=ak(e,ur.range(t-1,-1,-1),"outEdges"),i=tB(e);ok(e,i);for(var s=Number.POSITIVE_INFINITY,a,o=0,l=0;l<4;++o,++l){uB(o%2?n:r,o%4>=2),i=sk.buildLayerMatrix(e);var u=nB(e,i);u<s&&(l=0,a=ur.cloneDeep(i),s=u)}ok(e,a)}function ak(e,t,n){return ur.map(t,function(r){return iB(e,r,n)})}function uB(e,t){var n=new aB;ur.forEach(e,function(r){var i=r.graph().root,s=rB(r,i,n,t);ur.forEach(s.vs,function(a,o){r.node(a).order=o}),sB(r,n,s.vs)})}function ok(e,t){ur.forEach(t,function(n){ur.forEach(n,function(r,i){e.node(r).order=i})})}var X=Ee,cB=rn.Graph,dB=St,fB={positionX:_B};function hB(e,t){var n={};function r(i,s){var a=0,o=0,l=i.length,u=X.last(s);return X.forEach(s,function(c,d){var h=mB(e,c),m=h?e.node(h).order:l;(h||c===u)&&(X.forEach(s.slice(o,d+1),function(g){X.forEach(e.predecessors(g),function(p){var b=e.node(p),v=b.order;(v<a||m<v)&&!(b.dummy&&e.node(g).dummy)&&DN(n,p,g)})}),o=d+1,a=m)}),s}return X.reduce(t,r),n}function pB(e,t){var n={};function r(s,a,o,l,u){var c;X.forEach(X.range(a,o),function(d){c=s[d],e.node(c).dummy&&X.forEach(e.predecessors(c),function(h){var m=e.node(h);m.dummy&&(m.order<l||m.order>u)&&DN(n,h,c)})})}function i(s,a){var o=-1,l,u=0;return X.forEach(a,function(c,d){if(e.node(c).dummy==="border"){var h=e.predecessors(c);h.length&&(l=e.node(h[0]).order,r(a,u,d,o,l),u=d,o=l)}r(a,u,a.length,l,s.length)}),a}return X.reduce(t,i),n}function mB(e,t){if(e.node(t).dummy)return X.find(e.predecessors(t),function(n){return e.node(n).dummy})}function DN(e,t,n){if(t>n){var r=t;t=n,n=r}var i=e[t];i||(e[t]=i={}),i[n]=!0}function vB(e,t,n){if(t>n){var r=t;t=n,n=r}return X.has(e[t],n)}function gB(e,t,n,r){var i={},s={},a={};return X.forEach(t,function(o){X.forEach(o,function(l,u){i[l]=l,s[l]=l,a[l]=u})}),X.forEach(t,function(o){var l=-1;X.forEach(o,function(u){var c=r(u);if(c.length){c=X.sortBy(c,function(p){return a[p]});for(var d=(c.length-1)/2,h=Math.floor(d),m=Math.ceil(d);h<=m;++h){var g=c[h];s[u]===u&&l<a[g]&&!vB(n,u,g)&&(s[g]=u,s[u]=i[u]=i[g],l=a[g])}}})}),{root:i,align:s}}function yB(e,t,n,r,i){var s={},a=xB(e,t,n,i),o=i?"borderLeft":"borderRight";function l(d,h){for(var m=a.nodes(),g=m.pop(),p={};g;)p[g]?d(g):(p[g]=!0,m.push(g),m=m.concat(h(g))),g=m.pop()}function u(d){s[d]=a.inEdges(d).reduce(function(h,m){return Math.max(h,s[m.v]+a.edge(m))},0)}function c(d){var h=a.outEdges(d).reduce(function(g,p){return Math.min(g,s[p.w]-a.edge(p))},Number.POSITIVE_INFINITY),m=e.node(d);h!==Number.POSITIVE_INFINITY&&m.borderType!==o&&(s[d]=Math.max(s[d],h))}return l(u,a.predecessors.bind(a)),l(c,a.successors.bind(a)),X.forEach(r,function(d){s[d]=s[n[d]]}),s}function xB(e,t,n,r){var i=new cB,s=e.graph(),a=kB(s.nodesep,s.edgesep,r);return X.forEach(t,function(o){var l;X.forEach(o,function(u){var c=n[u];if(i.setNode(c),l){var d=n[l],h=i.edge(d,c);i.setEdge(d,c,Math.max(a(e,u,l),h||0))}l=u})}),i}function bB(e,t){return X.minBy(X.values(t),function(n){var r=Number.NEGATIVE_INFINITY,i=Number.POSITIVE_INFINITY;return X.forIn(n,function(s,a){var o=CB(e,a)/2;r=Math.max(s+o,r),i=Math.min(s-o,i)}),r-i})}function wB(e,t){var n=X.values(t),r=X.min(n),i=X.max(n);X.forEach(["u","d"],function(s){X.forEach(["l","r"],function(a){var o=s+a,l=e[o],u;if(l!==t){var c=X.values(l);u=a==="l"?r-X.min(c):i-X.max(c),u&&(e[o]=X.mapValues(l,function(d){return d+u}))}})})}function SB(e,t){return X.mapValues(e.ul,function(n,r){if(t)return e[t.toLowerCase()][r];var i=X.sortBy(X.map(e,r));return(i[1]+i[2])/2})}function _B(e){var t=dB.buildLayerMatrix(e),n=X.merge(hB(e,t),pB(e,t)),r={},i;X.forEach(["u","d"],function(a){i=a==="u"?t:X.values(t).reverse(),X.forEach(["l","r"],function(o){o==="r"&&(i=X.map(i,function(d){return X.values(d).reverse()}));var l=(a==="u"?e.predecessors:e.successors).bind(e),u=gB(e,i,n,l),c=yB(e,i,u.root,u.align,o==="r");o==="r"&&(c=X.mapValues(c,function(d){return-d})),r[a+o]=c})});var s=bB(e,r);return wB(r,s),SB(r,e.graph().align)}function kB(e,t,n){return function(r,i,s){var a=r.node(i),o=r.node(s),l=0,u;if(l+=a.width/2,X.has(a,"labelpos"))switch(a.labelpos.toLowerCase()){case"l":u=-a.width/2;break;case"r":u=a.width/2;break}if(u&&(l+=n?u:-u),u=0,l+=(a.dummy?t:e)/2,l+=(o.dummy?t:e)/2,l+=o.width/2,X.has(o,"labelpos"))switch(o.labelpos.toLowerCase()){case"l":u=o.width/2;break;case"r":u=-o.width/2;break}return u&&(l+=n?u:-u),u=0,l}}function CB(e,t){return e.node(t).width}var Ms=Ee,LN=St,EB=fB.positionX,TB=jB;function jB(e){e=LN.asNonCompoundGraph(e),NB(e),Ms.forEach(EB(e),function(t,n){e.node(n).x=t})}function NB(e){var t=LN.buildLayerMatrix(e),n=e.graph().ranksep,r=0;Ms.forEach(t,function(i){var s=Ms.max(Ms.map(i,function(a){return e.node(a).height}));Ms.forEach(i,function(a){e.node(a).y=r+s/2}),r+=s+n})}var ne=Ee,lk=xV,uk=LV,MB=a$,PB=St.normalizeRanks,RB=c$,AB=St.removeEmptyRanks,ck=p$,IB=b$,dk=S$,DB=oB,LB=TB,pr=St,OB=rn.Graph,qB=FB;function FB(e,t){var n=t&&t.debugTiming?pr.time:pr.notime;n("layout",function(){var r=n("  buildLayoutGraph",function(){return QB(e)});n("  runLayout",function(){VB(r,n)}),n("  updateInputGraph",function(){$B(e,r)})})}function VB(e,t){t("    makeSpaceForEdgeLabels",function(){JB(e)}),t("    removeSelfEdges",function(){a4(e)}),t("    acyclic",function(){lk.run(e)}),t("    nestingGraph.run",function(){ck.run(e)}),t("    rank",function(){MB(pr.asNonCompoundGraph(e))}),t("    injectEdgeLabelProxies",function(){XB(e)}),t("    removeEmptyRanks",function(){AB(e)}),t("    nestingGraph.cleanup",function(){ck.cleanup(e)}),t("    normalizeRanks",function(){PB(e)}),t("    assignRankMinMax",function(){ZB(e)}),t("    removeEdgeLabelProxies",function(){e4(e)}),t("    normalize.run",function(){uk.run(e)}),t("    parentDummyChains",function(){RB(e)}),t("    addBorderSegments",function(){IB(e)}),t("    order",function(){DB(e)}),t("    insertSelfEdges",function(){o4(e)}),t("    adjustCoordinateSystem",function(){dk.adjust(e)}),t("    position",function(){LB(e)}),t("    positionSelfEdges",function(){l4(e)}),t("    removeBorderNodes",function(){s4(e)}),t("    normalize.undo",function(){uk.undo(e)}),t("    fixupEdgeLabelCoords",function(){r4(e)}),t("    undoCoordinateSystem",function(){dk.undo(e)}),t("    translateGraph",function(){t4(e)}),t("    assignNodeIntersects",function(){n4(e)}),t("    reversePoints",function(){i4(e)}),t("    acyclic.undo",function(){lk.undo(e)})}function $B(e,t){ne.forEach(e.nodes(),function(n){var r=e.node(n),i=t.node(n);r&&(r.x=i.x,r.y=i.y,t.children(n).length&&(r.width=i.width,r.height=i.height))}),ne.forEach(e.edges(),function(n){var r=e.edge(n),i=t.edge(n);r.points=i.points,ne.has(i,"x")&&(r.x=i.x,r.y=i.y)}),e.graph().width=t.graph().width,e.graph().height=t.graph().height}var BB=["nodesep","edgesep","ranksep","marginx","marginy"],zB={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},UB=["acyclicer","ranker","rankdir","align"],GB=["width","height"],HB={width:0,height:0},WB=["minlen","weight","width","height","labeloffset"],KB={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},YB=["labelpos"];function QB(e){var t=new OB({multigraph:!0,compound:!0}),n=Vp(e.graph());return t.setGraph(ne.merge({},zB,Fp(n,BB),ne.pick(n,UB))),ne.forEach(e.nodes(),function(r){var i=Vp(e.node(r));t.setNode(r,ne.defaults(Fp(i,GB),HB)),t.setParent(r,e.parent(r))}),ne.forEach(e.edges(),function(r){var i=Vp(e.edge(r));t.setEdge(r,ne.merge({},KB,Fp(i,WB),ne.pick(i,YB)))}),t}function JB(e){var t=e.graph();t.ranksep/=2,ne.forEach(e.edges(),function(n){var r=e.edge(n);r.minlen*=2,r.labelpos.toLowerCase()!=="c"&&(t.rankdir==="TB"||t.rankdir==="BT"?r.width+=r.labeloffset:r.height+=r.labeloffset)})}function XB(e){ne.forEach(e.edges(),function(t){var n=e.edge(t);if(n.width&&n.height){var r=e.node(t.v),i=e.node(t.w),s={rank:(i.rank-r.rank)/2+r.rank,e:t};pr.addDummyNode(e,"edge-proxy",s,"_ep")}})}function ZB(e){var t=0;ne.forEach(e.nodes(),function(n){var r=e.node(n);r.borderTop&&(r.minRank=e.node(r.borderTop).rank,r.maxRank=e.node(r.borderBottom).rank,t=ne.max(t,r.maxRank))}),e.graph().maxRank=t}function e4(e){ne.forEach(e.nodes(),function(t){var n=e.node(t);n.dummy==="edge-proxy"&&(e.edge(n.e).labelRank=n.rank,e.removeNode(t))})}function t4(e){var t=Number.POSITIVE_INFINITY,n=0,r=Number.POSITIVE_INFINITY,i=0,s=e.graph(),a=s.marginx||0,o=s.marginy||0;function l(u){var c=u.x,d=u.y,h=u.width,m=u.height;t=Math.min(t,c-h/2),n=Math.max(n,c+h/2),r=Math.min(r,d-m/2),i=Math.max(i,d+m/2)}ne.forEach(e.nodes(),function(u){l(e.node(u))}),ne.forEach(e.edges(),function(u){var c=e.edge(u);ne.has(c,"x")&&l(c)}),t-=a,r-=o,ne.forEach(e.nodes(),function(u){var c=e.node(u);c.x-=t,c.y-=r}),ne.forEach(e.edges(),function(u){var c=e.edge(u);ne.forEach(c.points,function(d){d.x-=t,d.y-=r}),ne.has(c,"x")&&(c.x-=t),ne.has(c,"y")&&(c.y-=r)}),s.width=n-t+a,s.height=i-r+o}function n4(e){ne.forEach(e.edges(),function(t){var n=e.edge(t),r=e.node(t.v),i=e.node(t.w),s,a;n.points?(s=n.points[0],a=n.points[n.points.length-1]):(n.points=[],s=i,a=r),n.points.unshift(pr.intersectRect(r,s)),n.points.push(pr.intersectRect(i,a))})}function r4(e){ne.forEach(e.edges(),function(t){var n=e.edge(t);if(ne.has(n,"x"))switch((n.labelpos==="l"||n.labelpos==="r")&&(n.width-=n.labeloffset),n.labelpos){case"l":n.x-=n.width/2+n.labeloffset;break;case"r":n.x+=n.width/2+n.labeloffset;break}})}function i4(e){ne.forEach(e.edges(),function(t){var n=e.edge(t);n.reversed&&n.points.reverse()})}function s4(e){ne.forEach(e.nodes(),function(t){if(e.children(t).length){var n=e.node(t),r=e.node(n.borderTop),i=e.node(n.borderBottom),s=e.node(ne.last(n.borderLeft)),a=e.node(ne.last(n.borderRight));n.width=Math.abs(a.x-s.x),n.height=Math.abs(i.y-r.y),n.x=s.x+n.width/2,n.y=r.y+n.height/2}}),ne.forEach(e.nodes(),function(t){e.node(t).dummy==="border"&&e.removeNode(t)})}function a4(e){ne.forEach(e.edges(),function(t){if(t.v===t.w){var n=e.node(t.v);n.selfEdges||(n.selfEdges=[]),n.selfEdges.push({e:t,label:e.edge(t)}),e.removeEdge(t)}})}function o4(e){var t=pr.buildLayerMatrix(e);ne.forEach(t,function(n){var r=0;ne.forEach(n,function(i,s){var a=e.node(i);a.order=s+r,ne.forEach(a.selfEdges,function(o){pr.addDummyNode(e,"selfedge",{width:o.label.width,height:o.label.height,rank:a.rank,order:s+ ++r,e:o.e,label:o.label},"_se")}),delete a.selfEdges})})}function l4(e){ne.forEach(e.nodes(),function(t){var n=e.node(t);if(n.dummy==="selfedge"){var r=e.node(n.e.v),i=r.x+r.width/2,s=r.y,a=n.x-i,o=r.height/2;e.setEdge(n.e,n.label),e.removeNode(t),n.label.points=[{x:i+2*a/3,y:s-o},{x:i+5*a/6,y:s-o},{x:i+a,y:s},{x:i+5*a/6,y:s+o},{x:i+2*a/3,y:s+o}],n.label.x=n.x,n.label.y=n.y}})}function Fp(e,t){return ne.mapValues(ne.pick(e,t),Number)}function Vp(e){var t={};return ne.forEach(e,function(n,r){t[r.toLowerCase()]=n}),t}var eo=Ee,u4=St,c4=rn.Graph,d4={debugOrdering:f4};function f4(e){var t=u4.buildLayerMatrix(e),n=new c4({compound:!0,multigraph:!0}).setGraph({});return eo.forEach(e.nodes(),function(r){n.setNode(r,{label:r}),n.setParent(r,"layer"+e.node(r).rank)}),eo.forEach(e.edges(),function(r){n.setEdge(r.v,r.w,{},r.name)}),eo.forEach(t,function(r,i){var s="layer"+i;n.setNode(s,{rank:"same"}),eo.reduce(r,function(a,o){return n.setEdge(a,o,{style:"invis"}),o})}),n}var h4="0.8.5",p4={graphlib:rn,layout:qB,debug:d4,util:{time:St.time,notime:St.notime},version:h4};const fk=Sk(p4),hk=new Map;function m4(e,t){const n=e.map(i=>i.id).join("|"),r=t.map(i=>`${i.source}->${i.target}`).join("|");return`${e.length}:${t.length}:${n}:${r}`}function v4(e,t,n){if(n){const r=m4(e,t),i=hk.get(n);if(i&&i.signature===r)return i.layout;const s=pk(e,t);return hk.set(n,{signature:r,layout:s}),s}return pk(e,t)}function pk(e,t){if(e.length>2500){const r=Math.ceil(Math.sqrt(e.length));return e.map((i,s)=>{const a=Math.floor(s/r),o=s%r;return{id:i.id,position:{x:o*260,y:a*160}}})}const n=new fk.graphlib.Graph;return n.setGraph({rankdir:"LR",nodesep:48,ranksep:80}),n.setDefaultEdgeLabel(()=>({})),e.forEach(r=>{n.setNode(r.id,{width:220,height:120})}),t.forEach(r=>{n.setEdge(r.source,r.target)}),fk.layout(n),e.map(r=>{const i=n.node(r.id);return{id:r.id,position:{x:i.x-i.width/2,y:i.y-i.height/2}}})}function g4(e){const t=new Map;for(const r of e)r.type==="tool_call"&&r.toolCallId&&t.set(r.toolCallId,r.id);const n=[];for(const r of e)if(!(r.type!=="llm_call"||!r.io)){for(const i of r.io.emittedToolCallIds??[]){const s=t.get(i);s&&n.push({id:`io_emit_${r.id}_${s}`,source:r.id,target:s,kind:"io",toolCallId:i})}for(const i of r.io.consumedToolCallIds??[]){const s=t.get(i);s&&n.push({id:`io_consume_${s}_${r.id}`,source:s,target:r.id,kind:"io",toolCallId:i})}}return n}function y4(e,t,n){const{intervals:r}=ml(e,t,n),i=new Set;return r.forEach(s=>{i.add(s.startMs),i.add(s.endMs)}),Array.from(i).sort((s,a)=>s-a)}function x4(e,t,n){if(!e.length)return null;if(n===1){for(const r of e)if(r>t+1)return r;return e[e.length-1]}for(let r=e.length-1;r>=0;r-=1){const i=e[r];if(i<t-1)return i}return e[0]}const b4=300,w4=2e3,S4=1.5;function _4(e){const t=b4*Math.pow(S4,Math.max(0,e));return Math.min(w4,Math.round(t))}function Hn(e,t){if(!e)return t;try{return JSON.parse(e)}catch{return t}}function mk(e,t){const n=new Map;return[...e,...t].forEach(r=>{const i=n.get(r.id);(!i||r.updatedAt>=i.updatedAt)&&n.set(r.id,r)}),Array.from(n.values()).sort((r,i)=>r.createdAt-i.createdAt)}function vk(e,t=50){return[...e].sort((n,r)=>r.timestamp-n.timestamp).slice(0,t)}const gk=220,yk=120,rv="agentDirector.presence.v1",k4=2e4,C4=5e3,si="agentDirector.collab.cursors.v1",$p="agentDirector.collab.annotations.v1",Bp="agentDirector.collab.activity.v1",E4=S.lazy(()=>Xv(()=>import("./index-NA2YFadK.js"),__vite__mapDeps([0,1]))),T4=S.lazy(()=>Xv(()=>import("./index-DGwNu-P9.js"),[])),j4=S.lazy(()=>Xv(()=>import("./index-Bfo7peAl.js"),[]));function to(){return`scenario-${Math.random().toString(36).slice(2,9)}`}function N4(e){return e.filter(t=>t.parentStepId).map(t=>({source:t.parentStepId,target:t.id}))}function M4(e){const t=[...e].sort((n,r)=>n.index-r.index);return t.slice(1).map((n,r)=>({source:t[r].id,target:n.id}))}function P4(e){const t={},n=e.getBoundingClientRect();return e.querySelectorAll(".step-card").forEach(i=>{const s=i.dataset.stepId;if(!s)return;const a=i.getBoundingClientRect();t[s]={left:a.left-n.left,top:a.top-n.top,width:a.width,height:a.height}}),t}function R4(e,t,n){const r=[...N4(e),...M4(e),...g4(e).map(g=>({source:g.source,target:g.target}))],i=v4(e,r,n),s=t.getBoundingClientRect(),a=Math.min(...i.map(g=>g.position.x)),o=Math.min(...i.map(g=>g.position.y)),l=Math.max(...i.map(g=>g.position.x)),u=Math.max(...i.map(g=>g.position.y)),c=l-a+gk,d=u-o+yk,h=Math.max(32,(s.width-c)/2),m=Math.max(24,(s.height-d)/2);return i.reduce((g,p)=>(g[p.id]={left:p.position.x-a+h,top:p.position.y-o+m,width:gk,height:yk},g),{})}function xk(e,t,n){const r=t.trim().toLowerCase();return e.filter(i=>{var a,o,l;return n!=="all"&&i.type!==n?!1:r?[i.name,(a=i.preview)==null?void 0:a.title,(o=i.preview)==null?void 0:o.outputPreview,(l=i.preview)==null?void 0:l.inputPreview].filter(Boolean).join(" ").toLowerCase().includes(r):!0})}function A4(){const e=window.sessionStorage.getItem("agentDirector.sessionId");if(e)return e;const t=`session-${Math.random().toString(36).slice(2,10)}`;return window.sessionStorage.setItem("agentDirector.sessionId",t),t}function bk(){try{const e=window.localStorage.getItem(rv);if(!e)return{};const t=JSON.parse(e),n={};return Object.entries(t).forEach(([r,i])=>{typeof i=="number"&&(n[r]=i)}),n}catch{return{}}}function wk(e,t=Date.now()){return Object.fromEntries(Object.entries(e).filter(([,n])=>t-n<k4))}function I4(){var gy;const{trace:e,insights:t,loading:n,error:r,reload:i,traces:s,selectedTraceId:a,setSelectedTraceId:o}=yq(),[l,u]=He("agentDirector.mode","cinema"),[c,d]=S.useState(""),h=S.useDeferredValue(c),[m,g]=S.useState("all"),[p,b]=S.useState(""),[v,y]=S.useState(null),[x,_]=S.useState(null),[k,E]=S.useState(null),[j,T]=S.useState([]),[M,D]=S.useState(""),[R,H]=S.useState(null),[Y,pe]=S.useState(!1),[F,le]=S.useState(null),[se,A]=He("agentDirector.safeExport",!1),[I,U]=He("agentDirector.syncPlayback",!0),[z,re]=S.useState(null),[Te,ue]=S.useState(!1),[me,xe]=S.useState(0),[nt,rt]=He("agentDirector.speed",1),[dt,It]=He("agentDirector.windowed",!1),[gn,Vn]=S.useState(2e4),[O,ee]=S.useState(!1),[J,qe]=S.useState(!1),[te,Re]=He("agentDirector.overlayEnabled",!1),[Wt,br]=He("agentDirector.onboarded",!1),[,_t]=He("agentDirector.tourCompleted",!1),[ze,ye]=He("agentDirector.explainMode",!0),[Dt,sn]=He("agentDirector.heroDismissed",!1),[Qi,$n]=He("agentDirector.dockOpen",!1),[fe,Yr]=He("agentDirector.introPersona","builder"),[an,Qr]=He("agentDirector.themeMode","studio"),[we,vt]=He("agentDirector.timelineLaneStrategy","type"),[N,V]=He("agentDirector.timelineStudioConfig",ps),[G,$]=He("agentDirector.missions",{playback:!1,flow:!1,inspect:!1,matrix:!1,replay:!1,annotate:!1,collaborate:!1}),ve=!1,[Fe,ce]=He("agentDirector.introDismissed",ve),[it,Ye]=S.useState(!1),[ae,Jr]=S.useState(null),[wr,Ji]=S.useState([]),[Xi,$l]=S.useState(null),[ON,ey]=S.useState(null),[Bl,zl]=S.useState(""),[qN,Xr]=S.useState([{id:to(),name:"Prompt tighter",strategy:"hybrid",modificationsText:'{"prompt":"Return concise response"}'},{id:to(),name:"Recorded baseline",strategy:"recorded",modificationsText:"{}"}]),[Zi,Ul]=S.useState(null),[Lt,ty]=S.useState(null),[FN,Ta]=S.useState(!1),[VN,es]=S.useState(null),[$N,Gl]=He("agentDirector.gameplayState.v1",V0("bootstrap")),[ny,ry]=He("agentDirector.gameplayTraceId.v1",""),[Hl,iy]=S.useState(1),[BN,Wl]=S.useState(null),[sy,Kl]=S.useState({}),[ay,Yl]=S.useState([]),[zN,Ql]=S.useState([]),[ts,Jl]=S.useState(800),[UN,GN]=S.useState(0),Xl=S.useRef(null),oy=S.useRef(null),Zr=S.useRef(A4()),ly=S.useRef(0),uy=S.useRef(0),Zl=S.useRef(!1),Bn=S.useMemo(()=>{if(!e)return[];const w=performance.now(),C=xk(e.steps,h,m);return uy.current=performance.now()-w,C},[e,h,m]),eu=S.useMemo(()=>Bn.slice(0,Math.min(Bn.length,ts)),[ts,Bn]),cy=S.useMemo(()=>{if(!v)return eu;const w=new Set(v.matchedStepIds);return eu.filter(C=>w.has(C.id))},[eu,v]),HN=S.useMemo(()=>z?xk(z.steps,h,m).slice(0,Math.min(z.steps.length,ts)):[],[z,h,m,ts]),dy=S.useMemo(()=>e?y4(e.startedAt,e.endedAt,e.steps):[],[e]),WN=S.useMemo(()=>!e||!z?null:xj(e,z),[e,z]),fy=S.useMemo(()=>e?e.steps.find(w=>w.id===F)??null:null,[e,F]),ns=S.useMemo(()=>e?pA(e.steps,we):[],[e,we]),ei=S.useMemo(()=>{const w=N[we]??ps[we];return j0(ns,w.order,w.hidden)},[ns,we,N]),KN=S.useMemo(()=>ei.order.filter(w=>!ei.hidden.includes(w)),[ei.hidden,ei.order]),ja=S.useMemo(()=>{const w=Zr.current;return Object.values(sy).filter(C=>C.sessionId!==w).filter(C=>C.traceId===((e==null?void 0:e.id)??"none")).sort((C,P)=>P.updatedAt-C.updatedAt)},[sy,e==null?void 0:e.id]),YN=S.useMemo(()=>ja.map(w=>w.playheadMs),[ja]),QN=S.useMemo(()=>ay.filter(w=>w.traceId===(e==null?void 0:e.id)),[ay,e==null?void 0:e.id]),JN=S.useMemo(()=>{const w=Object.keys(G).length,C=Object.values(G).filter(Boolean).length;return{done:C,total:w,pct:w>0?Math.round(C/w*100):0}},[G]);S.useEffect(()=>{e&&e.id!==ny&&(Gl(V0(e.id)),ry(e.id))},[ny,Gl,ry,e]),S.useEffect(()=>{y(null),_(null)},[e==null?void 0:e.id]),S.useEffect(()=>{GN(Math.round(uy.current))},[Bn]),S.useEffect(()=>{if(!e)return;const w=Bn.length;if(w<=1200){Jl(w);return}Jl(800);const C=window.setInterval(()=>{Jl(P=>P>=w?(window.clearInterval(C),w):Math.min(w,P+1e3))},70);return()=>window.clearInterval(C)},[Bn.length,e]),S.useEffect(()=>{let w=!1;if(!(e!=null&&e.id)){E(null);return}return cq(e.id).then(C=>{w||E(C)}),()=>{w=!0}},[e==null?void 0:e.id]),S.useEffect(()=>{let w=!1;return dq().then(C=>{w||(T(C),!M&&C.length>0&&D(C[0].id))}),()=>{w=!0}},[M]),S.useEffect(()=>{oy.current=z},[z]),S.useEffect(()=>(document.body.dataset.theme=an,()=>{delete document.body.dataset.theme}),[an]),S.useEffect(()=>{const w=Zr.current,C=(Z=!1)=>{const Ie=Date.now(),xn=wk(bk(),Ie);Z?delete xn[w]:xn[w]=Ie,window.localStorage.setItem(rv,JSON.stringify(xn)),iy(Math.max(1,Object.keys(xn).length))},P=()=>{const Z=wk(bk(),Date.now());iy(Math.max(1,Object.keys(Z).length))};C();const q=window.setInterval(()=>C(),C4),K=Z=>{Z.key===rv&&P()},Q=()=>{document.visibilityState==="visible"&&C()},ie=()=>C(!0);return window.addEventListener("storage",K),document.addEventListener("visibilitychange",Q),window.addEventListener("beforeunload",ie),()=>{window.clearInterval(q),C(!0),window.removeEventListener("storage",K),document.removeEventListener("visibilitychange",Q),window.removeEventListener("beforeunload",ie)}},[]),S.useEffect(()=>{l==="compare"&&$n(!1)},[l,$n]),S.useEffect(()=>{ns.length!==0&&V(w=>{const C=w[we]??ps[we],P=j0(ns,C.order,C.hidden);return P.order.join("|")===C.order.join("|")&&P.hidden.join("|")===C.hidden.join("|")?w:{...w,[we]:P}})},[ns,we,V]),S.useEffect(()=>{Kl(Hn(window.localStorage.getItem(si),{})),Yl(Hn(window.localStorage.getItem($p),[])),Ql(Hn(window.localStorage.getItem(Bp),[]))},[]),S.useEffect(()=>{const w=Date.now();if(w-ly.current<120&&Te)return;ly.current=w;const C=Zr.current,P={sessionId:C,traceId:(e==null?void 0:e.id)??"none",mode:l,playheadMs:Math.round(me),selectedStepId:F,updatedAt:w},K={...Hn(window.localStorage.getItem(si),{}),[C]:P};window.localStorage.setItem(si,JSON.stringify(K)),Kl(K)},[Te,l,me,F,e==null?void 0:e.id]),S.useEffect(()=>{const w=Zr.current;return()=>{const C=Hn(window.localStorage.getItem(si),{});if(!C[w])return;const P={...C};delete P[w],window.localStorage.setItem(si,JSON.stringify(P))}},[]),S.useEffect(()=>{const w=C=>{if(C.key===si&&Kl(Hn(C.newValue,{})),C.key===$p){const P=Hn(C.newValue,[]);Yl(q=>mk(q,P))}C.key===Bp&&Ql(vk(Hn(C.newValue,[])))};return window.addEventListener("storage",w),()=>window.removeEventListener("storage",w)},[]);const Ve=S.useCallback(w=>{const C={id:`activity-${Math.random().toString(36).slice(2,9)}`,sessionId:Zr.current,message:w,timestamp:Date.now()};Ql(P=>{const q=vk([C,...P]);return window.localStorage.setItem(Bp,JSON.stringify(q)),q})},[]),yn=S.useCallback(async w=>{if(!e)return;const C=await hq(e.id,w,"hybrid",{note:"UI replay"},e);C&&(re(C),Re(!0),u("flow"),$(P=>P.replay?P:{...P,replay:!0}),Ve(`Created replay from ${w}`))},[Ve,$,e,re,u,Re]),XN=S.useCallback(async()=>{if(!e)return;if(!p.trim()){y(null),_(null);return}const w=await uq(e.id,p.trim());if(!w){_("TraceQL query failed"),y(null);return}y(w),_(null);const C=w.matchedStepIds[0];C&&(le(C),l!=="cinema"&&u("cinema"))},[l,u,e,p]),ZN=S.useCallback(async()=>{if(!e||!M)return;pe(!0);const w=await fq(M,e.id);pe(!1),w&&H(w.result)},[M,e]),on=S.useCallback(()=>{if(!e)return;const w=[...e.steps].sort((C,P)=>(P.durationMs??0)-(C.durationMs??0))[0];w&&(le(w.id),u("cinema"))},[e,u]),hy=S.useCallback(()=>{if(!e||e.steps.length===0)return null;const w=[...e.steps].sort((C,P)=>(P.durationMs??0)-(C.durationMs??0))[0];return(w==null?void 0:w.id)??null},[e]),rs=S.useCallback(()=>{if(!e)return;const w=e.steps.find(C=>C.status==="failed");w&&(le(w.id),u("cinema"))},[e,u]),eM=S.useCallback(async()=>{if(!e)return;const w=new URL(window.location.href);w.searchParams.set("trace",a??e.id),w.searchParams.set("mode",l),F?w.searchParams.set("step",F):w.searchParams.delete("step");try{await navigator.clipboard.writeText(w.toString()),Wl("Live link copied")}catch{window.prompt("Copy live session link",w.toString()),Wl("Live link ready")}window.setTimeout(()=>Wl(null),1800)},[l,F,a,e]),tM=S.useCallback(w=>{vt(w),Ve(`Switched lane strategy to ${w}`)},[Ve,vt]),nM=S.useCallback(w=>{V(C=>{const P=C[we]??ps[we],q=P.hidden.includes(w)?P.hidden.filter(K=>K!==w):[...P.hidden,w];return{...C,[we]:{...P,hidden:q}}}),Ve(`Toggled lane visibility for ${w}`)},[Ve,we,V]),rM=S.useCallback((w,C)=>{V(P=>{const q=P[we]??ps[we],K=[...q.order],Q=K.indexOf(w);if(Q===-1)return P;const ie=C==="up"?Q-1:Q+1;if(ie<0||ie>=K.length)return P;const[Z]=K.splice(Q,1);return K.splice(ie,0,Z),{...P,[we]:{...q,order:K}}}),Ve(`Moved lane group ${w} ${C}`)},[Ve,we,V]),iM=S.useCallback(()=>{$({playback:!1,flow:!1,inspect:!1,matrix:!1,replay:!1,annotate:!1,collaborate:!1}),Ve("Reset onboarding missions")},[Ve,$]),sM=S.useCallback((w,C)=>{if(!e||!w.trim())return;const P=Date.now(),q={id:`annotation-${Math.random().toString(36).slice(2,9)}`,traceId:e.id,stepId:C,body:w.trim(),authorSessionId:Zr.current,createdAt:P,updatedAt:P};Yl(K=>{const Q=mk(K,[q]);return window.localStorage.setItem($p,JSON.stringify(Q)),Q}),$(K=>K.annotate?K:{...K,annotate:!0}),Ve(C?`Added annotation on step ${C}`:"Added trace annotation")},[Ve,$,e]),aM=S.useCallback((w,C)=>{Xr(P=>P.map(q=>q.id===w?{...q,...C}:q))},[]),oM=S.useCallback(w=>{Xr(w)},[]),lM=S.useCallback(()=>{Xr(w=>[...w,{id:to(),name:`Scenario ${w.length+1}`,strategy:"hybrid",modificationsText:"{}"}])},[]),uM=S.useCallback(w=>{Xr(C=>C.length<=1?C:C.filter(P=>P.id!==w))},[]),cM=S.useCallback(w=>{Xr(C=>{const P=C.findIndex(ie=>ie.id===w);if(P===-1)return C;const q=C[P],K={...q,id:to(),name:`${q.name} copy`},Q=[...C];return Q.splice(P+1,0,K),Q})},[]),dM=S.useCallback((w,C)=>{Xr(P=>{const q=P.findIndex(Z=>Z.id===w);if(q===-1)return P;const K=C==="up"?q-1:q+1;if(K<0||K>=P.length)return P;const Q=[...P],[ie]=Q.splice(q,1);return Q.splice(K,0,ie),Q})},[]),fM=S.useCallback(async w=>{var P;if(!e)return;const C=Bl||F||((P=e.steps[0])==null?void 0:P.id);if(!C){es("Select an anchor step before running the matrix.");return}try{Ta(!0),es(null);const q=await pq({traceId:e.id,stepId:C,scenarios:w});if(!q)throw new Error("Failed to create replay job.");Ul(q);let K=q;for(let ie=0;ie<30&&!(K.status!=="queued"&&K.status!=="running");ie+=1){const Z=_4(ie);await new Promise(xn=>window.setTimeout(xn,Z));const Ie=await mq(q.id);if(!Ie)break;K=Ie,Ul(Ie)}const Q=await lb(q.id);if(!Q)throw new Error("Replay job finished but matrix summary is unavailable.");ty(Q),u("matrix"),Ve(`Ran matrix with ${w.length} scenario(s) from ${C}`)}catch(q){es(q instanceof Error?q.message:"Failed to run replay matrix.")}finally{Ta(!1)}},[Ve,Bl,F,e,u]),hM=S.useCallback(async()=>{if(Zi){Ta(!0);try{const w=await vq(Zi.id);if(!w){es("Failed to cancel replay job.");return}Ul(w);const C=await lb(w.id);C&&ty(C),Ve(`Canceled matrix job ${Zi.id}`)}finally{Ta(!1)}}},[Ve,Zi]),pM=S.useCallback(async w=>{const C=await bj();if(!(C!=null&&C.trace)){es("Could not load replay trace for compare view.");return}re(C.trace),Re(!0),u("compare"),Ve(`Opened matrix compare trace ${w}`)},[Ve,u,Re]),Ae=S.useCallback(w=>{if(!(w===l||!e)){if((w==="flow"||w==="matrix"||w==="gameplay")&&ue(!1),w==="flow"&&l==="cinema"&&Xl.current){const C=Xl.current,P=P4(C),q=R4(e.steps,C,e.id);ey({steps:e.steps,fromRects:P,toRects:q}),Ve("Morphed cinema to flow");return}u(w),Ve(`Switched mode to ${w}`)}},[Ve,l,e,ue,u]),tu=S.useCallback(()=>{l==="flow"&&Ae("cinema"),ue(w=>!w)},[l,Ae]),zn=S.useCallback(()=>{Jr(null),Ji([]),$l(null),ue(!1)},[ue]),py=S.useCallback(w=>[{id:"setup",label:"Opening the reel",duration:1100,action:()=>{ye(!0),ue(!1),xe(0),le(null),Re(!1),rt(1),e&&e.steps.length<500&&It(!1),Ae("cinema")}},{id:"pace",label:"Pacing the timeline",duration:2200,action:()=>{Ae("cinema"),ue(!0),rt(1.1)}},{id:"bottleneck",label:"Freeze on the bottleneck",duration:1600,action:()=>{ue(!1),on()}},{id:"inspect",label:"Inspect the moment",duration:1600,action:()=>{w&&le(w)}},{id:"flow",label:"Morph into flow",duration:2100,action:()=>{Ae("flow")}},{id:"replay",label:"Directors Cut replay",duration:2200,action:async()=>{if(!e)return;!oy.current&&w&&await yn(w),Re(!0),u("compare")}},{id:"compare",label:"Compare the cut",duration:2e3,action:()=>{ue(!0),rt(1)}},{id:"finale",label:"Final frame",duration:1100,action:()=>{ue(!1)}}],[Ae,yn,on,ye,ue,u,Re,xe,le,rt,It,e]),ti=S.useCallback(()=>{var C;if(!e)return;const w=F??hy()??((C=e.steps[0])==null?void 0:C.id)??null;Ji(py(w)),Jr({active:!0,step:0}),$l(e.id),Ye(!1),ee(!1),qe(!1)},[py,hy,F,e,qe,ee,Ji,Jr,$l,Ye]),is=S.useCallback(()=>{if(ae!=null&&ae.active){zn();return}ti()},[ti,zn,ae==null?void 0:ae.active]),mM=S.useMemo(()=>{const C=[{id:"header",title:"Mission control",body:`Confirm run status and metadata. ${{builder:"Focus on payload flow, tool-call sequencing, and replay-ready steps.",executive:"Focus on bottlenecks, risk signals, and run-level outcome changes.",operator:"Focus on failure patterns, retries, and runtime reliability posture."}[fe]}`,target:'[data-tour="header"]',placement:"bottom"}];return Dt||C.push({id:"hero",title:"Director briefing",body:"Choose Tour, Story mode, or Explain to ramp up quickly.",target:'[data-tour="hero"]',placement:"bottom"}),C.push({id:"insights",title:"Fast diagnosis",body:fe==="executive"?"Jump straight to bottlenecks and high-cost segments for fast executive readouts.":fe==="operator"?"Jump to failures and retries first, then inspect impacted steps.":"Jump straight to bottlenecks, errors, and high-cost steps with one click.",target:'[data-tour="insights"]',placement:"bottom"},{id:"journey",title:"Director journey",body:"A narrative path that teaches how to watch, inspect, and direct a better run.",target:'[data-tour="journey"]',placement:"bottom"},{id:"toolbar",title:"Filters + modes",body:"Search, filter, and switch between Cinema, Flow, and Compare as the story evolves.",target:'[data-tour="toolbar"]',placement:"bottom"},{id:"quick-actions",title:"Quick actions",body:"Launch Story Mode, open the command palette, or jump to bottlenecks instantly.",target:'[data-tour="quick-actions"]',placement:"left"},{id:"stage",title:"Cinema stage",body:"The timeline shows every step as a scene. Scrub to see pacing and concurrency.",target:'[data-tour="stage"]',placement:"top"},{id:"inspector",title:"Inspector",body:fe==="executive"?"Open key moments to validate outcome impact and communication-ready summaries.":"Open any step to read payloads, apply redaction, and replay from that moment.",target:'[data-tour="inspector"]',placement:"left"},{id:"compare",title:"Compare runs",body:z?"Compare is live. Review deltas in cost, steps, and wall time side by side.":"Replay from a step to unlock compare mode and validate improvements.",target:'[data-tour="compare"]',placement:"top"}),C},[z,Dt,fe]),vM=S.useCallback(()=>{ey(null),u("flow")},[u]),ni=S.useMemo(()=>{var q,K,Q,ie;if(!e)return[];const w=[],C=[...e.steps].sort((Z,Ie)=>(Ie.durationMs??0)-(Z.durationMs??0))[0],P=e.steps.find(Z=>Z.status==="failed");if(P&&F!==P.id&&w.push({id:"jump-error",title:"Investigate first failure",body:`${P.name} failed and should be inspected before optimization work.`,actionLabel:"Open failed step",tone:"warning",action:rs}),C&&F!==C.id&&w.push({id:"jump-bottleneck",title:"Tackle latency bottleneck",body:`${C.name} is the slowest scene in this run and the best optimization target.`,actionLabel:"Open bottleneck",tone:"priority",action:on}),(q=k==null?void 0:k.hypotheses)!=null&&q[0]){const Z=k.hypotheses[0];w.push({id:"investigate-hypothesis",title:Z.title,body:Z.summary,actionLabel:"Inspect evidence",tone:"info",action:()=>{const Ie=Z.evidenceStepIds[0];Ie&&(le(Ie),l!=="cinema"&&u("cinema"))}})}if(l!=="matrix"&&w.push({id:"matrix-experiment",title:"Run scenario matrix",body:"Compare prompt and strategy alternatives from one anchor step to rank causal impact.",actionLabel:"Open matrix",tone:"info",action:()=>{var Z;zl(F??((Z=e.steps[0])==null?void 0:Z.id)??""),u("matrix")}}),!z&&(F||(K=e.steps[0])!=null&&K.id)){const Z=F??((Q=e.steps[0])==null?void 0:Q.id)??null;Z&&w.push({id:"run-replay",title:"Create director replay",body:"Branch a replay trace and validate whether your change improves the run.",actionLabel:"Replay from step",tone:"info",action:()=>{yn(Z)}})}if((ie=Lt==null?void 0:Lt.causalRanking)!=null&&ie.length){const Z=Lt.causalRanking[0];w.push({id:"causal-factor",title:`Top causal factor: ${Z.factor}`,body:`Confidence ${(Z.confidence*100).toFixed(0)}% across ${Z.evidence.samples} sample(s).`,actionLabel:"View matrix",tone:"priority",action:()=>u("matrix")})}return w.slice(0,4)},[z,yn,k,on,rs,l,Lt,F,e,u]),ss=S.useMemo(()=>{var Q,ie;if(!e)return"No trace loaded.";const w=[...e.steps].sort((Z,Ie)=>(Ie.durationMs??0)-(Z.durationMs??0))[0],C=e.steps.filter(Z=>Z.status==="failed").length,P=(Q=k==null?void 0:k.hypotheses)==null?void 0:Q[0],q=(ie=Lt==null?void 0:Lt.causalRanking)==null?void 0:ie[0];return[`Run ${e.id} completed with ${e.steps.length} steps across ${e.metadata.wallTimeMs}ms.`,w?`Primary latency driver: ${w.name} (${w.durationMs??0}ms).`:null,C>0?`Observed ${C} failed step(s), indicating reliability risk.`:"No failed steps observed.",P?`Top investigation hypothesis: ${P.title} (${P.severity}).`:null,q?`Highest ranked causal factor from matrix: ${q.factor} (${(q.confidence*100).toFixed(0)}% confidence).`:null,"Recommended plan: inspect bottleneck evidence, validate with replay matrix, and lock in mitigations."].filter(Boolean).join(" ")},[k,Lt==null?void 0:Lt.causalRanking,e]),gM=S.useCallback(w=>{var P,q;const C=w.toLowerCase();if(!e)return"No trace is loaded yet.";if(C.includes("bottleneck")||C.includes("slow")){const K=[...e.steps].sort((Q,ie)=>(ie.durationMs??0)-(Q.durationMs??0))[0];return K?`The primary bottleneck is ${K.name} at ${K.durationMs??0}ms. Prioritize this step for optimization and replay validation.`:"No bottleneck could be determined from current trace data."}if(C.includes("risk")||C.includes("failure")||C.includes("error")){const K=e.steps.filter(Q=>Q.status==="failed");return K.length?`Risk is concentrated in ${K.length} failed step(s), starting at ${((P=K[0])==null?void 0:P.name)??"unknown"}.`:"Failure risk appears low for this run; no failed steps were observed."}return C.includes("cost")?`Recorded run cost is ${(e.metadata.totalCostUsd??0).toFixed(4)} USD. Use matrix scenarios to evaluate cheaper prompt/strategy options.`:C.includes("next")||C.includes("action")?ni.length?`Next action: ${((q=ni[0])==null?void 0:q.title)??"Open matrix"}.`:"Next action: open Cinema mode, inspect bottleneck, then run the matrix.":ss},[ss,ni,e]),yM=S.useCallback(()=>{if(!e)return;const w=`# Director Narrative

${ss}

## Recommended Actions
${ni.map(C=>`- ${C.title}: ${C.body}`).join(`
`)}`;qE(`agent-director-narrative-${e.id}.md`,w,"text/markdown")},[ss,ni,e]);S.useEffect(()=>{var P;if(!e)return;lq(),xe(0),ue(!1);const w=Math.min(Math.max((e.metadata.wallTimeMs||1)*.2,5e3),6e4);Vn(w),e.steps.length>500&&It(!0),z||Re(!1),l==="compare"&&!z&&u("cinema");const C=F&&e.steps.some(q=>q.id===F)?F:((P=e.steps[0])==null?void 0:P.id)??"";zl(q=>q&&e.steps.some(K=>K.id===q)?q:C)},[e,z,l,F,u,It,Re]),S.useEffect(()=>(document.body.classList.toggle("explain-mode",ze),()=>{document.body.classList.remove("explain-mode")}),[ze]),S.useEffect(()=>(document.body.classList.toggle("story-mode",!!(ae!=null&&ae.active)),()=>{document.body.classList.remove("story-mode")}),[ae==null?void 0:ae.active]),S.useEffect(()=>{if(!(ae!=null&&ae.active))return;const w=wr[ae.step];if(!w){zn();return}Promise.resolve(w.action());const C=window.setTimeout(()=>{Jr(P=>P&&P.active?{...P,step:P.step+1}:P)},w.duration);return()=>window.clearTimeout(C)},[wr,zn,ae]),S.useEffect(()=>{ae!=null&&ae.active&&(!e||!Xi||e.id!==Xi&&zn())},[ae==null?void 0:ae.active,e,Xi,zn]),S.useEffect(()=>{me>0&&$(w=>w.playback?w:{...w,playback:!0})},[me,$]),S.useEffect(()=>{l==="flow"&&$(w=>w.flow?w:{...w,flow:!0}),l==="matrix"&&$(w=>w.matrix?w:{...w,matrix:!0})},[l,$]),S.useEffect(()=>{F&&$(w=>w.inspect?w:{...w,inspect:!0})},[F,$]),S.useEffect(()=>{Hl>1&&$(w=>w.collaborate?w:{...w,collaborate:!0})},[Hl,$]),S.useEffect(()=>{if(!I||Te||Zl.current)return;const w=ja[0];if(!w||w.traceId!==(e==null?void 0:e.id))return;const C=Math.abs(w.playheadMs-me),P=w.mode!==l,q=(w.selectedStepId??null)!==(F??null);C<600&&!P&&!q||(Zl.current=!0,xe(w.playheadMs),(w.mode==="cinema"||w.mode==="flow"||w.mode==="compare"||w.mode==="matrix"||w.mode==="gameplay")&&u(w.mode),le(w.selectedStepId??null),window.setTimeout(()=>{Zl.current=!1},180))},[Te,l,me,ja,F,u,I,e==null?void 0:e.id]),S.useEffect(()=>{if(!e)return;const C=Date.parse(e.startedAt)+me;let P=0,q=Number.POSITIVE_INFINITY;e.steps.forEach((Q,ie)=>{const Z=Date.parse(Q.startedAt),Ie=Date.parse(Q.endedAt??Q.startedAt);if(C>=Z&&C<=Ie){P=ie,q=0;return}const xn=Math.min(Math.abs(C-Z),Math.abs(C-Ie));xn<q&&(q=xn,P=ie)}),[P,P-1,P+1].filter(Q=>Q>=0&&Q<e.steps.length).forEach(Q=>{const ie=e.steps[Q];ie&&aq(e.id,ie.id,se)})},[e,me,se]),S.useEffect(()=>{if(!e||!Te||l!=="cinema"&&l!=="compare")return;const w=(z==null?void 0:z.metadata.wallTimeMs)??0,C=l==="compare"?Math.max(e.metadata.wallTimeMs||1,w||1):e.metadata.wallTimeMs||1;let P=0,q=performance.now();const K=Q=>{const ie=(Q-q)*nt;q=Q,xe(Z=>{const Ie=Z+ie;return Ie>=C?(ue(!1),C):Ie}),P=requestAnimationFrame(K)};return P=requestAnimationFrame(K),()=>cancelAnimationFrame(P)},[e,z,Te,nt,l]),S.useEffect(()=>{const w=C=>{var Q;const P=C.target,q=(Q=P==null?void 0:P.tagName)==null?void 0:Q.toLowerCase();if(!(q==="input"||q==="textarea"||q==="select"||P!=null&&P.isContentEditable)){if((C.metaKey||C.ctrlKey)&&C.key.toLowerCase()==="k"){C.preventDefault(),qe(ie=>!ie);return}if(C.key==="?"||C.key==="/"&&C.shiftKey){C.preventDefault(),ee(!0);return}if(C.key.toLowerCase()==="s"){C.preventDefault(),is();return}if(C.key.toLowerCase()==="e"){C.preventDefault(),ye(ie=>!ie);return}if(C.key.toLowerCase()==="t"){C.preventDefault(),Ye(!0);return}if(C.key==="Escape"){if(it){Ye(!1),_t(!0);return}ee(!1),qe(!1),le(null);return}if(C.key===" "){C.preventDefault(),(l==="cinema"||l==="compare")&&ue(ie=>!ie);return}if(C.key.toLowerCase()==="f"){C.preventDefault(),l==="flow"?u("cinema"):l==="cinema"&&Ae("flow");return}if(C.key.toLowerCase()==="c"){C.preventDefault(),l!=="cinema"&&u("cinema");return}if(C.key.toLowerCase()==="g"){C.preventDefault(),Ae("gameplay");return}if(C.key.toLowerCase()==="i"){C.preventDefault(),F?le(null):e!=null&&e.steps.length&&le(e.steps[0].id);return}if(C.key==="ArrowLeft"||C.key==="ArrowRight"){if(C.preventDefault(),!e)return;const ie=e.metadata.wallTimeMs||1;if(C.shiftKey){xe(C.key==="ArrowLeft"?0:ie),ue(!1),u("cinema");return}const Z=C.key==="ArrowRight"?1:-1,Ie=x4(dy,me,Z);Ie!=null&&(xe(Ie),ue(!1),u("cinema"))}}};return window.addEventListener("keydown",w),()=>window.removeEventListener("keydown",w)},[l,F,e,me,dy,Ae,u,ye,qe,Ye,_t,it,is]);const my=S.useMemo(()=>{if(!e||!dt||c)return null;const w=e.metadata.wallTimeMs||1,C=Math.min(Math.max(gn,5e3),w);let P=Math.max(0,me-C/2);const q=Math.min(w,P+C);return q-P<C&&(P=Math.max(0,q-C)),{startMs:P,endMs:q}},[e,dt,me,c,gn]),ri=!!(ae!=null&&ae.active),vy=(ae==null?void 0:ae.step)??0,xM=((gy=wr[vy])==null?void 0:gy.label)??"Wrapping up",bM=wr.length,wM=c!==h,SM=`${Math.min(Bn.length,ts)}/${Bn.length}`,_M=S.useMemo(()=>[{id:"story-toggle",label:ri?"Stop story mode":"Start story mode",description:"Auto-runs a cinematic walkthrough.",group:"Story",keys:"S",onTrigger:is},{id:"tour-start",label:"Start guided tour",description:"Walk the interface step by step.",group:"Onboarding",keys:"T",onTrigger:()=>Ye(!0)},{id:"explain-toggle",label:ze?"Disable explain mode":"Enable explain mode",description:"Toggle contextual overlays.",group:"Onboarding",keys:"E",onTrigger:()=>ye(w=>!w)},{id:"shortcuts",label:"Show shortcuts",description:"Open the keyboard map.",group:"Onboarding",keys:"?",onTrigger:()=>ee(!0)},{id:"playback-toggle",label:Te?"Pause playback":"Play playback",description:"Start or stop the run.",group:"Playback",keys:"Space",onTrigger:tu},{id:"mode-cinema",label:"Switch to Cinema",description:"Timeline playback view.",group:"Modes",keys:"C",onTrigger:()=>Ae("cinema")},{id:"mode-flow",label:"Switch to Flow",description:"Graph dependency view.",group:"Modes",keys:"F",onTrigger:()=>Ae("flow")},{id:"mode-compare",label:"Open Compare",description:"Side-by-side diff view.",group:"Modes",onTrigger:()=>Ae("compare"),disabled:!z},{id:"mode-matrix",label:"Open Matrix",description:"Counterfactual replay matrix view.",group:"Modes",onTrigger:()=>Ae("matrix")},{id:"mode-gameplay",label:"Open Gameplay",description:"World-class gameplay mechanics control center.",group:"Modes",keys:"G",onTrigger:()=>Ae("gameplay")},{id:"jump-bottleneck",label:"Jump to bottleneck",description:"Select the slowest step.",group:"Navigation",onTrigger:on},{id:"jump-error",label:"Jump to error",description:"Select the first failed step.",group:"Navigation",onTrigger:rs},{id:"replay-step",label:"Replay from selected step",description:"Branch a Directors Cut.",group:"Tools",onTrigger:()=>F&&yn(F),disabled:!F},{id:"overlay-toggle",label:te?"Hide overlay":"Show overlay",description:"Ghost diff in Cinema/Flow.",group:"Tools",onTrigger:()=>Re(w=>!w),disabled:!z},{id:"safe-export",label:se?"Disable safe export":"Enable safe export",description:"Redact sensitive payloads.",group:"Safety",onTrigger:()=>A(w=>!w)},{id:"reload",label:"Reload traces",description:"Refresh trace data.",group:"Meta",onTrigger:i}],[ri,is,ze,Te,tu,Ae,z,on,rs,F,yn,te,se,i,ye,Re,A,ee,Ye]);return n?f.jsx("div",{className:"loading",children:"Loading trace..."}):!r&&!e&&s.length===0?f.jsxs("div",{className:"error",children:[f.jsx("h2",{children:"No traces yet"}),f.jsx("p",{children:"Ingest your first trace, then reload to begin the Observe  Inspect  Direct workflow."}),f.jsxs("div",{className:"error-actions",children:[f.jsx("button",{className:"primary-button",type:"button",onClick:i,children:"Retry"}),f.jsx("a",{className:"ghost-button",href:"/help.html",target:"_blank",rel:"noreferrer",children:"Open help"})]})]}):r||!e?f.jsxs("div",{className:"error",children:[f.jsx("p",{children:r??"Failed to load trace."}),f.jsxs("div",{className:"error-actions",children:[f.jsx("button",{className:"primary-button",type:"button",onClick:i,children:"Retry"}),f.jsx("a",{className:"ghost-button",href:"/help.html",target:"_blank",rel:"noreferrer",children:"Open help"})]})]}):f.jsxs("div",{className:`app theme-${an} ${ze?"explain-mode":""} ${l==="compare"?"mode-compare":""} ${l==="matrix"?"mode-matrix":""} ${l==="gameplay"?"mode-gameplay":""}`,children:[f.jsx(eA,{trace:e,traces:s,selectedTraceId:a,onSelectTrace:o,onReload:i,onStartTour:()=>Ye(!0),onToggleStory:is,onOpenPalette:()=>qe(!0),onToggleExplain:()=>ye(w=>!w),onShareSession:eM,onThemeChange:Qr,themeMode:an,activeSessions:Hl,shareStatus:BN,explainMode:ze,storyActive:ri}),!Fe&&!ve?f.jsx(FA,{onComplete:()=>ce(!0),onStartTour:()=>{ce(!0),Ye(!0)},onStartStory:ti,persona:fe,onPersonaChange:Yr}):null,Fe&&!Dt?f.jsx(VA,{explainMode:ze,storyActive:ri,onStartTour:()=>{sn(!0),Ye(!0)},onStartStory:()=>{sn(!0),ti()},onToggleExplain:()=>ye(w=>!w),onDismiss:()=>sn(!0)}):null,f.jsx(LA,{steps:mM,open:it,onClose:()=>{Ye(!1),_t(!0)},onComplete:()=>{Ye(!1),_t(!0)}}),f.jsx(OA,{enabled:ze}),f.jsx(BA,{active:ri,label:xM,step:vy,total:bM,onStop:zn,onRestart:ti}),f.jsx(tA,{insights:t,investigation:k,onSelectStep:w=>{le(w),l!=="cinema"&&u("cinema")},onJumpToError:rs,onJumpToBottleneck:on}),f.jsx(AA,{trace:e,mode:l==="matrix"||l==="gameplay"?"cinema":l,playheadMs:me,selectedStepId:F,compareTrace:z,collapsed:Wt,onToggleCollapsed:()=>br(w=>!w),onModeChange:Ae,onSelectStep:w=>{le(w),l!=="cinema"&&u("cinema")},onJumpToBottleneck:on,onReplay:yn,onStartTour:()=>Ye(!0)}),f.jsxs("div",{className:"toolbar","data-help":!0,"data-help-indicator":!0,"data-tour":"toolbar","data-help-title":"Search + filters","data-help-body":"Filter by step type, enable Safe export, and jump between Cinema, Flow, Compare, and Matrix.","data-help-placement":"bottom",children:[f.jsx(rA,{query:c,typeFilter:m,onQueryChange:d,onTypeFilterChange:g}),f.jsxs("div",{className:"toolbar-actions",children:[f.jsx("input",{className:"search-input",value:p,onChange:w=>b(w.target.value),placeholder:"TraceQL (example: type=tool_call and duration_ms>800)","aria-label":"TraceQL query"}),f.jsx("button",{className:"ghost-button",type:"button",onClick:()=>void XN(),children:"Run TraceQL"}),v?f.jsxs("span",{className:"status-badge",children:[v.matchCount," match(es)"]}):null,wM?f.jsx("span",{className:"status-badge",children:"Filtering..."}):null,f.jsxs("span",{className:"status-badge",children:["Hydration ",SM]}),f.jsxs("span",{className:"status-badge",children:["Filter ",UN,"ms"]}),v?f.jsx("button",{className:"ghost-button",type:"button",onClick:()=>{b(""),y(null),_(null)},children:"Clear TraceQL"}):null,x?f.jsx("span",{className:"status-badge warn",children:x}):null,f.jsxs("select",{className:"search-select",value:M,onChange:w=>D(w.target.value),"aria-label":"Extension selector",children:[f.jsx("option",{value:"",children:"Select extension"}),j.map(w=>f.jsx("option",{value:w.id,children:w.name},w.id))]}),f.jsx("button",{className:"ghost-button",type:"button",onClick:()=>void ZN(),disabled:!e||!M||Y,children:Y?"Running extension...":"Run extension"}),f.jsx("button",{className:`ghost-button ${l==="cinema"?"active":""}`,type:"button","aria-pressed":l==="cinema",title:"Timeline playback",onClick:()=>Ae("cinema"),"data-help":!0,"data-help-title":"Cinema mode","data-help-body":"Timeline view with step cards ordered by time.","data-help-placement":"bottom",children:"Cinema"}),f.jsx("button",{className:`ghost-button ${l==="flow"?"active":""}`,type:"button","aria-pressed":l==="flow",title:"Graph view",onClick:()=>Ae("flow"),"data-help":!0,"data-help-title":"Flow mode","data-help-body":"Dependency graph of steps and tool calls.","data-help-placement":"bottom",children:"Flow"}),f.jsx("button",{className:`ghost-button ${l==="compare"?"active":""}`,type:"button","aria-pressed":l==="compare",title:z?"Side-by-side compare":"Run a replay to enable compare",onClick:()=>Ae("compare"),disabled:!z,"data-tour":"compare","data-help":!0,"data-help-title":"Compare mode","data-help-body":"Side-by-side view after a replay. Enabled once you replay.","data-help-placement":"bottom",children:"Compare"}),f.jsx("button",{className:`ghost-button ${l==="matrix"?"active":""}`,type:"button","aria-pressed":l==="matrix",title:"Counterfactual replay matrix",onClick:()=>Ae("matrix"),"data-help":!0,"data-help-title":"Matrix mode","data-help-body":"Run multiple replay scenarios and rank likely causal factors.","data-help-placement":"bottom",children:"Matrix"}),f.jsx("button",{className:`ghost-button ${l==="gameplay"?"active":""}`,type:"button","aria-pressed":l==="gameplay",title:"Gameplay mechanics command center",onClick:()=>Ae("gameplay"),"data-help":!0,"data-help-title":"Gameplay mode","data-help-body":"Command raids, campaign, pvp, time forks, boss runs, economy, and liveops.","data-help-placement":"bottom",children:"Gameplay"}),f.jsxs("label",{className:"toggle",title:"Redact payloads and disable raw views for safe sharing","data-help":!0,"data-help-title":"Safe export","data-help-body":"Redacts secrets and disables raw payload views for safe sharing.","data-help-placement":"bottom",children:[f.jsx("input",{type:"checkbox",checked:se,onChange:()=>A(w=>!w)}),"Safe export"]}),e.steps.length>200||dt?f.jsxs("label",{className:"toggle",title:"Window steps around the playhead for large traces","data-help":!0,"data-help-title":"Windowed mode","data-help-body":"Limits rendering to a playhead window for large traces.","data-help-placement":"bottom",children:[f.jsx("input",{type:"checkbox",checked:dt,onChange:()=>It(w=>!w)}),"Windowed"]}):null,z?f.jsxs("label",{className:"toggle",title:"Show ghost overlay of replay in Cinema/Flow","data-help":!0,"data-help-title":"Overlay replay","data-help-body":"Layer the replay over the base run to spot differences.","data-help-placement":"bottom",children:[f.jsx("input",{type:"checkbox",checked:te,onChange:()=>Re(w=>!w)}),"Overlay"]}):null,f.jsxs("label",{className:"toggle",title:"Follow active collaborator cursor and mode updates",children:[f.jsx("input",{type:"checkbox",checked:I,onChange:()=>U(w=>!w)}),"Sync playback"]})]})]}),R?f.jsxs("div",{className:"inspector-section",children:[f.jsx("div",{className:"inspector-section-title",children:"Extension output"}),f.jsx("pre",{className:"inspector-json",children:JSON.stringify(R,null,2)})]}):null,l==="cinema"?f.jsxs("div",{className:"playback-stack","data-tour":"playback",children:[f.jsx("div",{"data-help":!0,"data-help-title":"Playback controls","data-help-body":"Play, pause, scrub, and adjust speed to feel the rhythm of the run.","data-help-placement":"bottom",children:f.jsx(M0,{playheadMs:me,wallTimeMs:e.metadata.wallTimeMs||1,isPlaying:Te,speed:nt,onToggle:()=>ue(w=>!w),onScrub:w=>xe(w),onSpeedChange:rt})}),f.jsx("div",{"data-help":!0,"data-help-title":"Density map","data-help-body":"Zoom into hotspots and keep long traces readable with windowing.","data-help-placement":"bottom",children:f.jsx(EA,{traceStart:e.startedAt,traceEnd:e.endedAt,steps:e.steps,playheadMs:me,windowRange:my,windowed:dt,spanMs:gn,onSpanChange:Vn,onToggleWindowed:It,onScrub:w=>xe(w),persistenceKey:e.id,laneStrategy:we,visibleLaneGroups:KN,remotePlayheads:YN})})]}):null,l==="compare"&&z?f.jsx("div",{"data-help":!0,"data-help-title":"Compare playback","data-help-body":"Sync both runs to evaluate improvements at identical timestamps.","data-help-placement":"bottom",children:f.jsx(M0,{playheadMs:me,wallTimeMs:Math.max(e.metadata.wallTimeMs||1,z.metadata.wallTimeMs||1),isPlaying:Te,speed:nt,onToggle:()=>ue(w=>!w),onScrub:w=>xe(w),onSpeedChange:rt})}):null,f.jsxs("main",{className:`stage ${l==="compare"?"stage-compare":""} motion-fade-in`,role:"main",children:[f.jsx("div",{className:"main motion-slide-up",ref:Xl,"data-help":!0,"data-help-indicator":!0,"data-tour":"stage","data-help-title":"Trace stage","data-help-body":"Every step becomes a scene. Hover or click to open deep inspection.","data-help-placement":"top",children:f.jsx(BO,{morph:ON,onComplete:vM,children:f.jsxs(S.Suspense,{fallback:f.jsx("div",{className:"loading",children:"Loading view..."}),children:[l==="cinema"?f.jsx(wA,{trace:e,steps:cy,selectedStepId:F,onSelectStep:w=>le(w),playheadMs:me,windowRange:my,timing:t==null?void 0:t.timing,ghostTrace:te?z:null,diff:WN,laneStrategy:we,laneGroupsOrder:ei.order,hiddenLaneGroups:ei.hidden,onLaneStrategyChange:tM,onToggleLaneGroupVisibility:nM,onMoveLaneGroup:rM}):null,l==="flow"?f.jsx(E4,{steps:cy,selectedStepId:F,onSelectStep:w=>le(w),baseTrace:e,compareTrace:z,compareSteps:HN,overlayEnabled:te,onToggleOverlay:()=>Re(w=>!w)}):null,l==="compare"&&z?f.jsx(T4,{baseTrace:e,compareTrace:z,playheadMs:me,safeExport:se,onExit:()=>{u("cinema"),re(null)}}):null,l==="matrix"?f.jsx(ZA,{steps:e.steps,anchorStepId:Bl,onAnchorStepChange:zl,scenarios:qN,onScenarioChange:aM,onDuplicateScenario:cM,onMoveScenario:dM,onAddScenario:lM,onRemoveScenario:uM,onRun:fM,onCancel:hM,onReplaceScenarios:oM,loading:FN,error:VN,job:Zi,matrix:Lt,safeExport:se,onOpenCompare:pM}):null,l==="gameplay"?f.jsx(pI,{state:$N,playheadMs:me,onUpdate:w=>Gl(C=>w(C))}):null]})})}),f.jsx(S.Suspense,{fallback:f.jsx("div",{className:"loading",children:"Loading panel..."}),children:l==="compare"||l==="matrix"||l==="gameplay"?null:fy?f.jsx(j4,{traceId:e.id,step:fy,safeExport:se,onClose:()=>le(null),onReplay:yn}):f.jsx(DA,{trace:e,mode:l,selectedStepId:F,onModeChange:Ae,onSelectStep:w=>le(w),onJumpToBottleneck:on,onReplay:yn,recommendations:ni,persona:fe,annotations:QN,activityFeed:zN,onAddAnnotation:sM,missionProgress:G,missionCompletion:JN,onResetMissions:iM,narrative:ss,onAskDirector:gM,onExportNarrative:yM})})]}),f.jsx($A,{mode:l==="matrix"||l==="gameplay"?"cinema":l,isPlaying:Te,storyActive:ri,explainMode:ze,hidden:l==="compare",open:Qi,onToggleOpen:()=>$n(w=>!w),onTogglePlay:tu,onStartStory:ti,onStopStory:zn,onStartTour:()=>Ye(!0),onOpenPalette:()=>qe(!0),onShowShortcuts:()=>ee(!0),onToggleExplain:()=>ye(w=>!w),onJumpToBottleneck:on}),f.jsx(PA,{open:J,onClose:()=>qe(!1),actions:_M}),f.jsx(jA,{open:O,onClose:()=>ee(!1)})]})}zp.createRoot(document.getElementById("root")).render(f.jsx(FM.StrictMode,{children:f.jsx(I4,{})}));export{FM as R,hA as S,xA as T,v4 as a,g4 as b,Lm as c,xj as d,O4 as e,L4 as f,Sk as g,sq as h,f as j,S as r,sA as s};
