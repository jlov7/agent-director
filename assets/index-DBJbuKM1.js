const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-B570_Gdt.js","assets/index-B5DZHykP.css"])))=>i.map(i=>d[i]);
(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();var Ls=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Pk(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Rk={exports:{}},ol={},Ak={exports:{}},fe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ws=Symbol.for("react.element"),zM=Symbol.for("react.portal"),UM=Symbol.for("react.fragment"),GM=Symbol.for("react.strict_mode"),HM=Symbol.for("react.profiler"),WM=Symbol.for("react.provider"),KM=Symbol.for("react.context"),YM=Symbol.for("react.forward_ref"),QM=Symbol.for("react.suspense"),JM=Symbol.for("react.memo"),XM=Symbol.for("react.lazy"),Cy=Symbol.iterator;function ZM(e){return e===null||typeof e!="object"?null:(e=Cy&&e[Cy]||e["@@iterator"],typeof e=="function"?e:null)}var Ik={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Dk=Object.assign,Ok={};function Wi(e,t,n){this.props=e,this.context=t,this.refs=Ok,this.updater=n||Ik}Wi.prototype.isReactComponent={};Wi.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Wi.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Lk(){}Lk.prototype=Wi.prototype;function dg(e,t,n){this.props=e,this.context=t,this.refs=Ok,this.updater=n||Ik}var fg=dg.prototype=new Lk;fg.constructor=dg;Dk(fg,Wi.prototype);fg.isPureReactComponent=!0;var Ey=Array.isArray,qk=Object.prototype.hasOwnProperty,hg={current:null},Fk={key:!0,ref:!0,__self:!0,__source:!0};function Vk(e,t,n){var r,i={},a=null,s=null;if(t!=null)for(r in t.ref!==void 0&&(s=t.ref),t.key!==void 0&&(a=""+t.key),t)qk.call(t,r)&&!Fk.hasOwnProperty(r)&&(i[r]=t[r]);var o=arguments.length-2;if(o===1)i.children=n;else if(1<o){for(var l=Array(o),u=0;u<o;u++)l[u]=arguments[u+2];i.children=l}if(e&&e.defaultProps)for(r in o=e.defaultProps,o)i[r]===void 0&&(i[r]=o[r]);return{$$typeof:ws,type:e,key:a,ref:s,props:i,_owner:hg.current}}function eP(e,t){return{$$typeof:ws,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function pg(e){return typeof e=="object"&&e!==null&&e.$$typeof===ws}function tP(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var jy=/\/+/g;function uu(e,t){return typeof e=="object"&&e!==null&&e.key!=null?tP(""+e.key):t.toString(36)}function co(e,t,n,r,i){var a=typeof e;(a==="undefined"||a==="boolean")&&(e=null);var s=!1;if(e===null)s=!0;else switch(a){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case ws:case zM:s=!0}}if(s)return s=e,i=i(s),e=r===""?"."+uu(s,0):r,Ey(i)?(n="",e!=null&&(n=e.replace(jy,"$&/")+"/"),co(i,t,n,"",function(u){return u})):i!=null&&(pg(i)&&(i=eP(i,n+(!i.key||s&&s.key===i.key?"":(""+i.key).replace(jy,"$&/")+"/")+e)),t.push(i)),1;if(s=0,r=r===""?".":r+":",Ey(e))for(var o=0;o<e.length;o++){a=e[o];var l=r+uu(a,o);s+=co(a,t,n,l,i)}else if(l=ZM(e),typeof l=="function")for(e=l.call(e),o=0;!(a=e.next()).done;)a=a.value,l=r+uu(a,o++),s+=co(a,t,n,l,i);else if(a==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function qs(e,t,n){if(e==null)return e;var r=[],i=0;return co(e,r,"","",function(a){return t.call(n,a,i++)}),r}function nP(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var gt={current:null},fo={transition:null},rP={ReactCurrentDispatcher:gt,ReactCurrentBatchConfig:fo,ReactCurrentOwner:hg};function $k(){throw Error("act(...) is not supported in production builds of React.")}fe.Children={map:qs,forEach:function(e,t,n){qs(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return qs(e,function(){t++}),t},toArray:function(e){return qs(e,function(t){return t})||[]},only:function(e){if(!pg(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};fe.Component=Wi;fe.Fragment=UM;fe.Profiler=HM;fe.PureComponent=dg;fe.StrictMode=GM;fe.Suspense=QM;fe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=rP;fe.act=$k;fe.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=Dk({},e.props),i=e.key,a=e.ref,s=e._owner;if(t!=null){if(t.ref!==void 0&&(a=t.ref,s=hg.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var o=e.type.defaultProps;for(l in t)qk.call(t,l)&&!Fk.hasOwnProperty(l)&&(r[l]=t[l]===void 0&&o!==void 0?o[l]:t[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){o=Array(l);for(var u=0;u<l;u++)o[u]=arguments[u+2];r.children=o}return{$$typeof:ws,type:e.type,key:i,ref:a,props:r,_owner:s}};fe.createContext=function(e){return e={$$typeof:KM,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:WM,_context:e},e.Consumer=e};fe.createElement=Vk;fe.createFactory=function(e){var t=Vk.bind(null,e);return t.type=e,t};fe.createRef=function(){return{current:null}};fe.forwardRef=function(e){return{$$typeof:YM,render:e}};fe.isValidElement=pg;fe.lazy=function(e){return{$$typeof:XM,_payload:{_status:-1,_result:e},_init:nP}};fe.memo=function(e,t){return{$$typeof:JM,type:e,compare:t===void 0?null:t}};fe.startTransition=function(e){var t=fo.transition;fo.transition={};try{e()}finally{fo.transition=t}};fe.unstable_act=$k;fe.useCallback=function(e,t){return gt.current.useCallback(e,t)};fe.useContext=function(e){return gt.current.useContext(e)};fe.useDebugValue=function(){};fe.useDeferredValue=function(e){return gt.current.useDeferredValue(e)};fe.useEffect=function(e,t){return gt.current.useEffect(e,t)};fe.useId=function(){return gt.current.useId()};fe.useImperativeHandle=function(e,t,n){return gt.current.useImperativeHandle(e,t,n)};fe.useInsertionEffect=function(e,t){return gt.current.useInsertionEffect(e,t)};fe.useLayoutEffect=function(e,t){return gt.current.useLayoutEffect(e,t)};fe.useMemo=function(e,t){return gt.current.useMemo(e,t)};fe.useReducer=function(e,t,n){return gt.current.useReducer(e,t,n)};fe.useRef=function(e){return gt.current.useRef(e)};fe.useState=function(e){return gt.current.useState(e)};fe.useSyncExternalStore=function(e,t,n){return gt.current.useSyncExternalStore(e,t,n)};fe.useTransition=function(){return gt.current.useTransition()};fe.version="18.3.1";Ak.exports=fe;var S=Ak.exports;const iP=Pk(S);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aP=S,sP=Symbol.for("react.element"),oP=Symbol.for("react.fragment"),lP=Object.prototype.hasOwnProperty,uP=aP.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,cP={key:!0,ref:!0,__self:!0,__source:!0};function Bk(e,t,n){var r,i={},a=null,s=null;n!==void 0&&(a=""+n),t.key!==void 0&&(a=""+t.key),t.ref!==void 0&&(s=t.ref);for(r in t)lP.call(t,r)&&!cP.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:sP,type:e,key:a,ref:s,props:i,_owner:uP.current}}ol.Fragment=oP;ol.jsx=Bk;ol.jsxs=Bk;Rk.exports=ol;var d=Rk.exports,Qp={},zk={exports:{}},It={},Uk={exports:{}},Gk={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(D,I){var F=D.length;D.push(I);e:for(;0<F;){var V=F-1>>>1,te=D[V];if(0<i(te,I))D[V]=I,D[F]=te,F=V;else break e}}function n(D){return D.length===0?null:D[0]}function r(D){if(D.length===0)return null;var I=D[0],F=D.pop();if(F!==I){D[0]=F;e:for(var V=0,te=D.length,M=te>>>1;V<M;){var K=2*(V+1)-1,ue=D[K],ye=K+1,Je=D[ye];if(0>i(ue,F))ye<te&&0>i(Je,ue)?(D[V]=Je,D[ye]=F,V=ye):(D[V]=ue,D[K]=F,V=K);else if(ye<te&&0>i(Je,F))D[V]=Je,D[ye]=F,V=ye;else break e}}return I}function i(D,I){var F=D.sortIndex-I.sortIndex;return F!==0?F:D.id-I.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var s=Date,o=s.now();e.unstable_now=function(){return s.now()-o}}var l=[],u=[],c=1,f=null,h=3,m=!1,v=!1,p=!1,x=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(D){for(var I=n(u);I!==null;){if(I.callback===null)r(u);else if(I.startTime<=D)r(u),I.sortIndex=I.expirationTime,t(l,I);else break;I=n(u)}}function _(D){if(p=!1,b(D),!v)if(n(l)!==null)v=!0,le(C);else{var I=n(u);I!==null&&ne(_,I.startTime-D)}}function C(D,I){v=!1,p&&(p=!1,g(T),T=-1),m=!0;var F=h;try{for(b(I),f=n(l);f!==null&&(!(f.expirationTime>I)||D&&!A());){var V=f.callback;if(typeof V=="function"){f.callback=null,h=f.priorityLevel;var te=V(f.expirationTime<=I);I=e.unstable_now(),typeof te=="function"?f.callback=te:f===n(l)&&r(l),b(I)}else r(l);f=n(l)}if(f!==null)var M=!0;else{var K=n(u);K!==null&&ne(_,K.startTime-I),M=!1}return M}finally{f=null,h=F,m=!1}}var E=!1,j=null,T=-1,P=5,O=-1;function A(){return!(e.unstable_now()-O<P)}function W(){if(j!==null){var D=e.unstable_now();O=D;var I=!0;try{I=j(!0,D)}finally{I?J():(E=!1,j=null)}}else E=!1}var J;if(typeof y=="function")J=function(){y(W)};else if(typeof MessageChannel<"u"){var me=new MessageChannel,B=me.port2;me.port1.onmessage=W,J=function(){B.postMessage(null)}}else J=function(){x(W,0)};function le(D){j=D,E||(E=!0,J())}function ne(D,I){T=x(function(){D(e.unstable_now())},I)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(D){D.callback=null},e.unstable_continueExecution=function(){v||m||(v=!0,le(C))},e.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<D?Math.floor(1e3/D):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return n(l)},e.unstable_next=function(D){switch(h){case 1:case 2:case 3:var I=3;break;default:I=h}var F=h;h=I;try{return D()}finally{h=F}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(D,I){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var F=h;h=D;try{return I()}finally{h=F}},e.unstable_scheduleCallback=function(D,I,F){var V=e.unstable_now();switch(typeof F=="object"&&F!==null?(F=F.delay,F=typeof F=="number"&&0<F?V+F:V):F=V,D){case 1:var te=-1;break;case 2:te=250;break;case 5:te=1073741823;break;case 4:te=1e4;break;default:te=5e3}return te=F+te,D={id:c++,callback:I,priorityLevel:D,startTime:F,expirationTime:te,sortIndex:-1},F>V?(D.sortIndex=F,t(u,D),n(l)===null&&D===n(u)&&(p?(g(T),T=-1):p=!0,ne(_,F-V))):(D.sortIndex=te,t(l,D),v||m||(v=!0,le(C))),D},e.unstable_shouldYield=A,e.unstable_wrapCallback=function(D){var I=h;return function(){var F=h;h=I;try{return D.apply(this,arguments)}finally{h=F}}}})(Gk);Uk.exports=Gk;var dP=Uk.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fP=S,Rt=dP;function L(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Hk=new Set,Xa={};function Hr(e,t){Li(e,t),Li(e+"Capture",t)}function Li(e,t){for(Xa[e]=t,e=0;e<t.length;e++)Hk.add(t[e])}var An=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Jp=Object.prototype.hasOwnProperty,hP=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Ty={},Ny={};function pP(e){return Jp.call(Ny,e)?!0:Jp.call(Ty,e)?!1:hP.test(e)?Ny[e]=!0:(Ty[e]=!0,!1)}function mP(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function gP(e,t,n,r){if(t===null||typeof t>"u"||mP(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function vt(e,t,n,r,i,a,s){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=s}var it={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){it[e]=new vt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];it[t]=new vt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){it[e]=new vt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){it[e]=new vt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){it[e]=new vt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){it[e]=new vt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){it[e]=new vt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){it[e]=new vt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){it[e]=new vt(e,5,!1,e.toLowerCase(),null,!1,!1)});var mg=/[\-:]([a-z])/g;function gg(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(mg,gg);it[t]=new vt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(mg,gg);it[t]=new vt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(mg,gg);it[t]=new vt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){it[e]=new vt(e,1,!1,e.toLowerCase(),null,!1,!1)});it.xlinkHref=new vt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){it[e]=new vt(e,1,!1,e.toLowerCase(),null,!0,!0)});function vg(e,t,n,r){var i=it.hasOwnProperty(t)?it[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(gP(t,n,i,r)&&(n=null),r||i===null?pP(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,r=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Fn=fP.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Fs=Symbol.for("react.element"),pi=Symbol.for("react.portal"),mi=Symbol.for("react.fragment"),yg=Symbol.for("react.strict_mode"),Xp=Symbol.for("react.profiler"),Wk=Symbol.for("react.provider"),Kk=Symbol.for("react.context"),bg=Symbol.for("react.forward_ref"),Zp=Symbol.for("react.suspense"),em=Symbol.for("react.suspense_list"),xg=Symbol.for("react.memo"),Jn=Symbol.for("react.lazy"),Yk=Symbol.for("react.offscreen"),My=Symbol.iterator;function pa(e){return e===null||typeof e!="object"?null:(e=My&&e[My]||e["@@iterator"],typeof e=="function"?e:null)}var Re=Object.assign,cu;function Ea(e){if(cu===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);cu=t&&t[1]||""}return`
`+cu+e}var du=!1;function fu(e,t){if(!e||du)return"";du=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),a=r.stack.split(`
`),s=i.length-1,o=a.length-1;1<=s&&0<=o&&i[s]!==a[o];)o--;for(;1<=s&&0<=o;s--,o--)if(i[s]!==a[o]){if(s!==1||o!==1)do if(s--,o--,0>o||i[s]!==a[o]){var l=`
`+i[s].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}while(1<=s&&0<=o);break}}}finally{du=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Ea(e):""}function vP(e){switch(e.tag){case 5:return Ea(e.type);case 16:return Ea("Lazy");case 13:return Ea("Suspense");case 19:return Ea("SuspenseList");case 0:case 2:case 15:return e=fu(e.type,!1),e;case 11:return e=fu(e.type.render,!1),e;case 1:return e=fu(e.type,!0),e;default:return""}}function tm(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case mi:return"Fragment";case pi:return"Portal";case Xp:return"Profiler";case yg:return"StrictMode";case Zp:return"Suspense";case em:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Kk:return(e.displayName||"Context")+".Consumer";case Wk:return(e._context.displayName||"Context")+".Provider";case bg:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case xg:return t=e.displayName||null,t!==null?t:tm(e.type)||"Memo";case Jn:t=e._payload,e=e._init;try{return tm(e(t))}catch{}}return null}function yP(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return tm(t);case 8:return t===yg?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function hr(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Qk(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function bP(e){var t=Qk(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(s){r=""+s,a.call(this,s)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(s){r=""+s},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Vs(e){e._valueTracker||(e._valueTracker=bP(e))}function Jk(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Qk(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Eo(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function nm(e,t){var n=t.checked;return Re({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Py(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=hr(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Xk(e,t){t=t.checked,t!=null&&vg(e,"checked",t,!1)}function rm(e,t){Xk(e,t);var n=hr(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?im(e,t.type,n):t.hasOwnProperty("defaultValue")&&im(e,t.type,hr(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Ry(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function im(e,t,n){(t!=="number"||Eo(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var ja=Array.isArray;function Pi(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+hr(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function am(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(L(91));return Re({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Ay(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(L(92));if(ja(n)){if(1<n.length)throw Error(L(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:hr(n)}}function Zk(e,t){var n=hr(t.value),r=hr(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function Iy(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function eC(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function sm(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?eC(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var $s,tC=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for($s=$s||document.createElement("div"),$s.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=$s.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Za(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Fa={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},xP=["Webkit","ms","Moz","O"];Object.keys(Fa).forEach(function(e){xP.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Fa[t]=Fa[e]})});function nC(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Fa.hasOwnProperty(e)&&Fa[e]?(""+t).trim():t+"px"}function rC(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=nC(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}var wP=Re({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function om(e,t){if(t){if(wP[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(L(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(L(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(L(61))}if(t.style!=null&&typeof t.style!="object")throw Error(L(62))}}function lm(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var um=null;function wg(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var cm=null,Ri=null,Ai=null;function Dy(e){if(e=ks(e)){if(typeof cm!="function")throw Error(L(280));var t=e.stateNode;t&&(t=fl(t),cm(e.stateNode,e.type,t))}}function iC(e){Ri?Ai?Ai.push(e):Ai=[e]:Ri=e}function aC(){if(Ri){var e=Ri,t=Ai;if(Ai=Ri=null,Dy(e),t)for(e=0;e<t.length;e++)Dy(t[e])}}function sC(e,t){return e(t)}function oC(){}var hu=!1;function lC(e,t,n){if(hu)return e(t,n);hu=!0;try{return sC(e,t,n)}finally{hu=!1,(Ri!==null||Ai!==null)&&(oC(),aC())}}function es(e,t){var n=e.stateNode;if(n===null)return null;var r=fl(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(L(231,t,typeof n));return n}var dm=!1;if(An)try{var ma={};Object.defineProperty(ma,"passive",{get:function(){dm=!0}}),window.addEventListener("test",ma,ma),window.removeEventListener("test",ma,ma)}catch{dm=!1}function SP(e,t,n,r,i,a,s,o,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(c){this.onError(c)}}var Va=!1,jo=null,To=!1,fm=null,_P={onError:function(e){Va=!0,jo=e}};function kP(e,t,n,r,i,a,s,o,l){Va=!1,jo=null,SP.apply(_P,arguments)}function CP(e,t,n,r,i,a,s,o,l){if(kP.apply(this,arguments),Va){if(Va){var u=jo;Va=!1,jo=null}else throw Error(L(198));To||(To=!0,fm=u)}}function Wr(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function uC(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Oy(e){if(Wr(e)!==e)throw Error(L(188))}function EP(e){var t=e.alternate;if(!t){if(t=Wr(e),t===null)throw Error(L(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var a=i.alternate;if(a===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return Oy(i),e;if(a===r)return Oy(i),t;a=a.sibling}throw Error(L(188))}if(n.return!==r.return)n=i,r=a;else{for(var s=!1,o=i.child;o;){if(o===n){s=!0,n=i,r=a;break}if(o===r){s=!0,r=i,n=a;break}o=o.sibling}if(!s){for(o=a.child;o;){if(o===n){s=!0,n=a,r=i;break}if(o===r){s=!0,r=a,n=i;break}o=o.sibling}if(!s)throw Error(L(189))}}if(n.alternate!==r)throw Error(L(190))}if(n.tag!==3)throw Error(L(188));return n.stateNode.current===n?e:t}function cC(e){return e=EP(e),e!==null?dC(e):null}function dC(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=dC(e);if(t!==null)return t;e=e.sibling}return null}var fC=Rt.unstable_scheduleCallback,Ly=Rt.unstable_cancelCallback,jP=Rt.unstable_shouldYield,TP=Rt.unstable_requestPaint,Ge=Rt.unstable_now,NP=Rt.unstable_getCurrentPriorityLevel,Sg=Rt.unstable_ImmediatePriority,hC=Rt.unstable_UserBlockingPriority,No=Rt.unstable_NormalPriority,MP=Rt.unstable_LowPriority,pC=Rt.unstable_IdlePriority,ll=null,pn=null;function PP(e){if(pn&&typeof pn.onCommitFiberRoot=="function")try{pn.onCommitFiberRoot(ll,e,void 0,(e.current.flags&128)===128)}catch{}}var tn=Math.clz32?Math.clz32:IP,RP=Math.log,AP=Math.LN2;function IP(e){return e>>>=0,e===0?32:31-(RP(e)/AP|0)|0}var Bs=64,zs=4194304;function Ta(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Mo(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,s=n&268435455;if(s!==0){var o=s&~i;o!==0?r=Ta(o):(a&=s,a!==0&&(r=Ta(a)))}else s=n&~i,s!==0?r=Ta(s):a!==0&&(r=Ta(a));if(r===0)return 0;if(t!==0&&t!==r&&!(t&i)&&(i=r&-r,a=t&-t,i>=a||i===16&&(a&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-tn(t),i=1<<n,r|=e[n],t&=~i;return r}function DP(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function OP(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var s=31-tn(a),o=1<<s,l=i[s];l===-1?(!(o&n)||o&r)&&(i[s]=DP(o,t)):l<=t&&(e.expiredLanes|=o),a&=~o}}function hm(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function mC(){var e=Bs;return Bs<<=1,!(Bs&4194240)&&(Bs=64),e}function pu(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Ss(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-tn(t),e[t]=n}function LP(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-tn(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}function _g(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-tn(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var xe=0;function gC(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var vC,kg,yC,bC,xC,pm=!1,Us=[],ir=null,ar=null,sr=null,ts=new Map,ns=new Map,Zn=[],qP="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function qy(e,t){switch(e){case"focusin":case"focusout":ir=null;break;case"dragenter":case"dragleave":ar=null;break;case"mouseover":case"mouseout":sr=null;break;case"pointerover":case"pointerout":ts.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ns.delete(t.pointerId)}}function ga(e,t,n,r,i,a){return e===null||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},t!==null&&(t=ks(t),t!==null&&kg(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function FP(e,t,n,r,i){switch(t){case"focusin":return ir=ga(ir,e,t,n,r,i),!0;case"dragenter":return ar=ga(ar,e,t,n,r,i),!0;case"mouseover":return sr=ga(sr,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return ts.set(a,ga(ts.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,ns.set(a,ga(ns.get(a)||null,e,t,n,r,i)),!0}return!1}function wC(e){var t=Rr(e.target);if(t!==null){var n=Wr(t);if(n!==null){if(t=n.tag,t===13){if(t=uC(n),t!==null){e.blockedOn=t,xC(e.priority,function(){yC(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ho(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=mm(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);um=r,n.target.dispatchEvent(r),um=null}else return t=ks(n),t!==null&&kg(t),e.blockedOn=n,!1;t.shift()}return!0}function Fy(e,t,n){ho(e)&&n.delete(t)}function VP(){pm=!1,ir!==null&&ho(ir)&&(ir=null),ar!==null&&ho(ar)&&(ar=null),sr!==null&&ho(sr)&&(sr=null),ts.forEach(Fy),ns.forEach(Fy)}function va(e,t){e.blockedOn===t&&(e.blockedOn=null,pm||(pm=!0,Rt.unstable_scheduleCallback(Rt.unstable_NormalPriority,VP)))}function rs(e){function t(i){return va(i,e)}if(0<Us.length){va(Us[0],e);for(var n=1;n<Us.length;n++){var r=Us[n];r.blockedOn===e&&(r.blockedOn=null)}}for(ir!==null&&va(ir,e),ar!==null&&va(ar,e),sr!==null&&va(sr,e),ts.forEach(t),ns.forEach(t),n=0;n<Zn.length;n++)r=Zn[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Zn.length&&(n=Zn[0],n.blockedOn===null);)wC(n),n.blockedOn===null&&Zn.shift()}var Ii=Fn.ReactCurrentBatchConfig,Po=!0;function $P(e,t,n,r){var i=xe,a=Ii.transition;Ii.transition=null;try{xe=1,Cg(e,t,n,r)}finally{xe=i,Ii.transition=a}}function BP(e,t,n,r){var i=xe,a=Ii.transition;Ii.transition=null;try{xe=4,Cg(e,t,n,r)}finally{xe=i,Ii.transition=a}}function Cg(e,t,n,r){if(Po){var i=mm(e,t,n,r);if(i===null)ku(e,t,r,Ro,n),qy(e,r);else if(FP(i,e,t,n,r))r.stopPropagation();else if(qy(e,r),t&4&&-1<qP.indexOf(e)){for(;i!==null;){var a=ks(i);if(a!==null&&vC(a),a=mm(e,t,n,r),a===null&&ku(e,t,r,Ro,n),a===i)break;i=a}i!==null&&r.stopPropagation()}else ku(e,t,r,null,n)}}var Ro=null;function mm(e,t,n,r){if(Ro=null,e=wg(r),e=Rr(e),e!==null)if(t=Wr(e),t===null)e=null;else if(n=t.tag,n===13){if(e=uC(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Ro=e,null}function SC(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(NP()){case Sg:return 1;case hC:return 4;case No:case MP:return 16;case pC:return 536870912;default:return 16}default:return 16}}var nr=null,Eg=null,po=null;function _C(){if(po)return po;var e,t=Eg,n=t.length,r,i="value"in nr?nr.value:nr.textContent,a=i.length;for(e=0;e<n&&t[e]===i[e];e++);var s=n-e;for(r=1;r<=s&&t[n-r]===i[a-r];r++);return po=i.slice(e,1<r?1-r:void 0)}function mo(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Gs(){return!0}function Vy(){return!1}function Dt(e){function t(n,r,i,a,s){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=a,this.target=s,this.currentTarget=null;for(var o in e)e.hasOwnProperty(o)&&(n=e[o],this[o]=n?n(a):a[o]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?Gs:Vy,this.isPropagationStopped=Vy,this}return Re(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Gs)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Gs)},persist:function(){},isPersistent:Gs}),t}var Ki={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},jg=Dt(Ki),_s=Re({},Ki,{view:0,detail:0}),zP=Dt(_s),mu,gu,ya,ul=Re({},_s,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Tg,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ya&&(ya&&e.type==="mousemove"?(mu=e.screenX-ya.screenX,gu=e.screenY-ya.screenY):gu=mu=0,ya=e),mu)},movementY:function(e){return"movementY"in e?e.movementY:gu}}),$y=Dt(ul),UP=Re({},ul,{dataTransfer:0}),GP=Dt(UP),HP=Re({},_s,{relatedTarget:0}),vu=Dt(HP),WP=Re({},Ki,{animationName:0,elapsedTime:0,pseudoElement:0}),KP=Dt(WP),YP=Re({},Ki,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),QP=Dt(YP),JP=Re({},Ki,{data:0}),By=Dt(JP),XP={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ZP={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},eR={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function tR(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=eR[e])?!!t[e]:!1}function Tg(){return tR}var nR=Re({},_s,{key:function(e){if(e.key){var t=XP[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=mo(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?ZP[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Tg,charCode:function(e){return e.type==="keypress"?mo(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?mo(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),rR=Dt(nR),iR=Re({},ul,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),zy=Dt(iR),aR=Re({},_s,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Tg}),sR=Dt(aR),oR=Re({},Ki,{propertyName:0,elapsedTime:0,pseudoElement:0}),lR=Dt(oR),uR=Re({},ul,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),cR=Dt(uR),dR=[9,13,27,32],Ng=An&&"CompositionEvent"in window,$a=null;An&&"documentMode"in document&&($a=document.documentMode);var fR=An&&"TextEvent"in window&&!$a,kC=An&&(!Ng||$a&&8<$a&&11>=$a),Uy=" ",Gy=!1;function CC(e,t){switch(e){case"keyup":return dR.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function EC(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var gi=!1;function hR(e,t){switch(e){case"compositionend":return EC(t);case"keypress":return t.which!==32?null:(Gy=!0,Uy);case"textInput":return e=t.data,e===Uy&&Gy?null:e;default:return null}}function pR(e,t){if(gi)return e==="compositionend"||!Ng&&CC(e,t)?(e=_C(),po=Eg=nr=null,gi=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return kC&&t.locale!=="ko"?null:t.data;default:return null}}var mR={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hy(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!mR[e.type]:t==="textarea"}function jC(e,t,n,r){iC(r),t=Ao(t,"onChange"),0<t.length&&(n=new jg("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Ba=null,is=null;function gR(e){qC(e,0)}function cl(e){var t=bi(e);if(Jk(t))return e}function vR(e,t){if(e==="change")return t}var TC=!1;if(An){var yu;if(An){var bu="oninput"in document;if(!bu){var Wy=document.createElement("div");Wy.setAttribute("oninput","return;"),bu=typeof Wy.oninput=="function"}yu=bu}else yu=!1;TC=yu&&(!document.documentMode||9<document.documentMode)}function Ky(){Ba&&(Ba.detachEvent("onpropertychange",NC),is=Ba=null)}function NC(e){if(e.propertyName==="value"&&cl(is)){var t=[];jC(t,is,e,wg(e)),lC(gR,t)}}function yR(e,t,n){e==="focusin"?(Ky(),Ba=t,is=n,Ba.attachEvent("onpropertychange",NC)):e==="focusout"&&Ky()}function bR(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return cl(is)}function xR(e,t){if(e==="click")return cl(t)}function wR(e,t){if(e==="input"||e==="change")return cl(t)}function SR(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var rn=typeof Object.is=="function"?Object.is:SR;function as(e,t){if(rn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Jp.call(t,i)||!rn(e[i],t[i]))return!1}return!0}function Yy(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Qy(e,t){var n=Yy(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Yy(n)}}function MC(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?MC(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function PC(){for(var e=window,t=Eo();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Eo(e.document)}return t}function Mg(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function _R(e){var t=PC(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&MC(n.ownerDocument.documentElement,n)){if(r!==null&&Mg(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=r.end===void 0?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=Qy(n,a);var s=Qy(n,r);i&&s&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==s.node||e.focusOffset!==s.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(s.node,s.offset)):(t.setEnd(s.node,s.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var kR=An&&"documentMode"in document&&11>=document.documentMode,vi=null,gm=null,za=null,vm=!1;function Jy(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;vm||vi==null||vi!==Eo(r)||(r=vi,"selectionStart"in r&&Mg(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),za&&as(za,r)||(za=r,r=Ao(gm,"onSelect"),0<r.length&&(t=new jg("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=vi)))}function Hs(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var yi={animationend:Hs("Animation","AnimationEnd"),animationiteration:Hs("Animation","AnimationIteration"),animationstart:Hs("Animation","AnimationStart"),transitionend:Hs("Transition","TransitionEnd")},xu={},RC={};An&&(RC=document.createElement("div").style,"AnimationEvent"in window||(delete yi.animationend.animation,delete yi.animationiteration.animation,delete yi.animationstart.animation),"TransitionEvent"in window||delete yi.transitionend.transition);function dl(e){if(xu[e])return xu[e];if(!yi[e])return e;var t=yi[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in RC)return xu[e]=t[n];return e}var AC=dl("animationend"),IC=dl("animationiteration"),DC=dl("animationstart"),OC=dl("transitionend"),LC=new Map,Xy="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function yr(e,t){LC.set(e,t),Hr(t,[e])}for(var wu=0;wu<Xy.length;wu++){var Su=Xy[wu],CR=Su.toLowerCase(),ER=Su[0].toUpperCase()+Su.slice(1);yr(CR,"on"+ER)}yr(AC,"onAnimationEnd");yr(IC,"onAnimationIteration");yr(DC,"onAnimationStart");yr("dblclick","onDoubleClick");yr("focusin","onFocus");yr("focusout","onBlur");yr(OC,"onTransitionEnd");Li("onMouseEnter",["mouseout","mouseover"]);Li("onMouseLeave",["mouseout","mouseover"]);Li("onPointerEnter",["pointerout","pointerover"]);Li("onPointerLeave",["pointerout","pointerover"]);Hr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Hr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Hr("onBeforeInput",["compositionend","keypress","textInput","paste"]);Hr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Hr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Hr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Na="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),jR=new Set("cancel close invalid load scroll toggle".split(" ").concat(Na));function Zy(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,CP(r,t,void 0,e),e.currentTarget=null}function qC(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var s=r.length-1;0<=s;s--){var o=r[s],l=o.instance,u=o.currentTarget;if(o=o.listener,l!==a&&i.isPropagationStopped())break e;Zy(i,o,u),a=l}else for(s=0;s<r.length;s++){if(o=r[s],l=o.instance,u=o.currentTarget,o=o.listener,l!==a&&i.isPropagationStopped())break e;Zy(i,o,u),a=l}}}if(To)throw e=fm,To=!1,fm=null,e}function ke(e,t){var n=t[Sm];n===void 0&&(n=t[Sm]=new Set);var r=e+"__bubble";n.has(r)||(FC(t,e,2,!1),n.add(r))}function _u(e,t,n){var r=0;t&&(r|=4),FC(n,e,r,t)}var Ws="_reactListening"+Math.random().toString(36).slice(2);function ss(e){if(!e[Ws]){e[Ws]=!0,Hk.forEach(function(n){n!=="selectionchange"&&(jR.has(n)||_u(n,!1,e),_u(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Ws]||(t[Ws]=!0,_u("selectionchange",!1,t))}}function FC(e,t,n,r){switch(SC(t)){case 1:var i=$P;break;case 4:i=BP;break;default:i=Cg}n=i.bind(null,t,n,e),i=void 0,!dm||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function ku(e,t,n,r,i){var a=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var s=r.tag;if(s===3||s===4){var o=r.stateNode.containerInfo;if(o===i||o.nodeType===8&&o.parentNode===i)break;if(s===4)for(s=r.return;s!==null;){var l=s.tag;if((l===3||l===4)&&(l=s.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;s=s.return}for(;o!==null;){if(s=Rr(o),s===null)return;if(l=s.tag,l===5||l===6){r=a=s;continue e}o=o.parentNode}}r=r.return}lC(function(){var u=a,c=wg(n),f=[];e:{var h=LC.get(e);if(h!==void 0){var m=jg,v=e;switch(e){case"keypress":if(mo(n)===0)break e;case"keydown":case"keyup":m=rR;break;case"focusin":v="focus",m=vu;break;case"focusout":v="blur",m=vu;break;case"beforeblur":case"afterblur":m=vu;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=$y;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=GP;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=sR;break;case AC:case IC:case DC:m=KP;break;case OC:m=lR;break;case"scroll":m=zP;break;case"wheel":m=cR;break;case"copy":case"cut":case"paste":m=QP;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=zy}var p=(t&4)!==0,x=!p&&e==="scroll",g=p?h!==null?h+"Capture":null:h;p=[];for(var y=u,b;y!==null;){b=y;var _=b.stateNode;if(b.tag===5&&_!==null&&(b=_,g!==null&&(_=es(y,g),_!=null&&p.push(os(y,_,b)))),x)break;y=y.return}0<p.length&&(h=new m(h,v,null,n,c),f.push({event:h,listeners:p}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",m=e==="mouseout"||e==="pointerout",h&&n!==um&&(v=n.relatedTarget||n.fromElement)&&(Rr(v)||v[In]))break e;if((m||h)&&(h=c.window===c?c:(h=c.ownerDocument)?h.defaultView||h.parentWindow:window,m?(v=n.relatedTarget||n.toElement,m=u,v=v?Rr(v):null,v!==null&&(x=Wr(v),v!==x||v.tag!==5&&v.tag!==6)&&(v=null)):(m=null,v=u),m!==v)){if(p=$y,_="onMouseLeave",g="onMouseEnter",y="mouse",(e==="pointerout"||e==="pointerover")&&(p=zy,_="onPointerLeave",g="onPointerEnter",y="pointer"),x=m==null?h:bi(m),b=v==null?h:bi(v),h=new p(_,y+"leave",m,n,c),h.target=x,h.relatedTarget=b,_=null,Rr(c)===u&&(p=new p(g,y+"enter",v,n,c),p.target=b,p.relatedTarget=x,_=p),x=_,m&&v)t:{for(p=m,g=v,y=0,b=p;b;b=di(b))y++;for(b=0,_=g;_;_=di(_))b++;for(;0<y-b;)p=di(p),y--;for(;0<b-y;)g=di(g),b--;for(;y--;){if(p===g||g!==null&&p===g.alternate)break t;p=di(p),g=di(g)}p=null}else p=null;m!==null&&e0(f,h,m,p,!1),v!==null&&x!==null&&e0(f,x,v,p,!0)}}e:{if(h=u?bi(u):window,m=h.nodeName&&h.nodeName.toLowerCase(),m==="select"||m==="input"&&h.type==="file")var C=vR;else if(Hy(h))if(TC)C=wR;else{C=bR;var E=yR}else(m=h.nodeName)&&m.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(C=xR);if(C&&(C=C(e,u))){jC(f,C,n,c);break e}E&&E(e,h,u),e==="focusout"&&(E=h._wrapperState)&&E.controlled&&h.type==="number"&&im(h,"number",h.value)}switch(E=u?bi(u):window,e){case"focusin":(Hy(E)||E.contentEditable==="true")&&(vi=E,gm=u,za=null);break;case"focusout":za=gm=vi=null;break;case"mousedown":vm=!0;break;case"contextmenu":case"mouseup":case"dragend":vm=!1,Jy(f,n,c);break;case"selectionchange":if(kR)break;case"keydown":case"keyup":Jy(f,n,c)}var j;if(Ng)e:{switch(e){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else gi?CC(e,n)&&(T="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(T="onCompositionStart");T&&(kC&&n.locale!=="ko"&&(gi||T!=="onCompositionStart"?T==="onCompositionEnd"&&gi&&(j=_C()):(nr=c,Eg="value"in nr?nr.value:nr.textContent,gi=!0)),E=Ao(u,T),0<E.length&&(T=new By(T,e,null,n,c),f.push({event:T,listeners:E}),j?T.data=j:(j=EC(n),j!==null&&(T.data=j)))),(j=fR?hR(e,n):pR(e,n))&&(u=Ao(u,"onBeforeInput"),0<u.length&&(c=new By("onBeforeInput","beforeinput",null,n,c),f.push({event:c,listeners:u}),c.data=j))}qC(f,t)})}function os(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Ao(e,t){for(var n=t+"Capture",r=[];e!==null;){var i=e,a=i.stateNode;i.tag===5&&a!==null&&(i=a,a=es(e,n),a!=null&&r.unshift(os(e,a,i)),a=es(e,t),a!=null&&r.push(os(e,a,i))),e=e.return}return r}function di(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function e0(e,t,n,r,i){for(var a=t._reactName,s=[];n!==null&&n!==r;){var o=n,l=o.alternate,u=o.stateNode;if(l!==null&&l===r)break;o.tag===5&&u!==null&&(o=u,i?(l=es(n,a),l!=null&&s.unshift(os(n,l,o))):i||(l=es(n,a),l!=null&&s.push(os(n,l,o)))),n=n.return}s.length!==0&&e.push({event:t,listeners:s})}var TR=/\r\n?/g,NR=/\u0000|\uFFFD/g;function t0(e){return(typeof e=="string"?e:""+e).replace(TR,`
`).replace(NR,"")}function Ks(e,t,n){if(t=t0(t),t0(e)!==t&&n)throw Error(L(425))}function Io(){}var ym=null,bm=null;function xm(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var wm=typeof setTimeout=="function"?setTimeout:void 0,MR=typeof clearTimeout=="function"?clearTimeout:void 0,n0=typeof Promise=="function"?Promise:void 0,PR=typeof queueMicrotask=="function"?queueMicrotask:typeof n0<"u"?function(e){return n0.resolve(null).then(e).catch(RR)}:wm;function RR(e){setTimeout(function(){throw e})}function Cu(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){e.removeChild(i),rs(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);rs(t)}function or(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function r0(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Yi=Math.random().toString(36).slice(2),fn="__reactFiber$"+Yi,ls="__reactProps$"+Yi,In="__reactContainer$"+Yi,Sm="__reactEvents$"+Yi,AR="__reactListeners$"+Yi,IR="__reactHandles$"+Yi;function Rr(e){var t=e[fn];if(t)return t;for(var n=e.parentNode;n;){if(t=n[In]||n[fn]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=r0(e);e!==null;){if(n=e[fn])return n;e=r0(e)}return t}e=n,n=e.parentNode}return null}function ks(e){return e=e[fn]||e[In],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function bi(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(L(33))}function fl(e){return e[ls]||null}var _m=[],xi=-1;function br(e){return{current:e}}function Ce(e){0>xi||(e.current=_m[xi],_m[xi]=null,xi--)}function Se(e,t){xi++,_m[xi]=e.current,e.current=t}var pr={},ft=br(pr),wt=br(!1),$r=pr;function qi(e,t){var n=e.type.contextTypes;if(!n)return pr;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},a;for(a in n)i[a]=t[a];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function St(e){return e=e.childContextTypes,e!=null}function Do(){Ce(wt),Ce(ft)}function i0(e,t,n){if(ft.current!==pr)throw Error(L(168));Se(ft,t),Se(wt,n)}function VC(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(L(108,yP(e)||"Unknown",i));return Re({},n,r)}function Oo(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||pr,$r=ft.current,Se(ft,e),Se(wt,wt.current),!0}function a0(e,t,n){var r=e.stateNode;if(!r)throw Error(L(169));n?(e=VC(e,t,$r),r.__reactInternalMemoizedMergedChildContext=e,Ce(wt),Ce(ft),Se(ft,e)):Ce(wt),Se(wt,n)}var kn=null,hl=!1,Eu=!1;function $C(e){kn===null?kn=[e]:kn.push(e)}function DR(e){hl=!0,$C(e)}function xr(){if(!Eu&&kn!==null){Eu=!0;var e=0,t=xe;try{var n=kn;for(xe=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}kn=null,hl=!1}catch(i){throw kn!==null&&(kn=kn.slice(e+1)),fC(Sg,xr),i}finally{xe=t,Eu=!1}}return null}var wi=[],Si=0,Lo=null,qo=0,$t=[],Bt=0,Br=null,En=1,jn="";function Tr(e,t){wi[Si++]=qo,wi[Si++]=Lo,Lo=e,qo=t}function BC(e,t,n){$t[Bt++]=En,$t[Bt++]=jn,$t[Bt++]=Br,Br=e;var r=En;e=jn;var i=32-tn(r)-1;r&=~(1<<i),n+=1;var a=32-tn(t)+i;if(30<a){var s=i-i%5;a=(r&(1<<s)-1).toString(32),r>>=s,i-=s,En=1<<32-tn(t)+i|n<<i|r,jn=a+e}else En=1<<a|n<<i|r,jn=e}function Pg(e){e.return!==null&&(Tr(e,1),BC(e,1,0))}function Rg(e){for(;e===Lo;)Lo=wi[--Si],wi[Si]=null,qo=wi[--Si],wi[Si]=null;for(;e===Br;)Br=$t[--Bt],$t[Bt]=null,jn=$t[--Bt],$t[Bt]=null,En=$t[--Bt],$t[Bt]=null}var Mt=null,Nt=null,je=!1,en=null;function zC(e,t){var n=zt(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function s0(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Mt=e,Nt=or(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Mt=e,Nt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Br!==null?{id:En,overflow:jn}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=zt(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Mt=e,Nt=null,!0):!1;default:return!1}}function km(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Cm(e){if(je){var t=Nt;if(t){var n=t;if(!s0(e,t)){if(km(e))throw Error(L(418));t=or(n.nextSibling);var r=Mt;t&&s0(e,t)?zC(r,n):(e.flags=e.flags&-4097|2,je=!1,Mt=e)}}else{if(km(e))throw Error(L(418));e.flags=e.flags&-4097|2,je=!1,Mt=e}}}function o0(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Mt=e}function Ys(e){if(e!==Mt)return!1;if(!je)return o0(e),je=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!xm(e.type,e.memoizedProps)),t&&(t=Nt)){if(km(e))throw UC(),Error(L(418));for(;t;)zC(e,t),t=or(t.nextSibling)}if(o0(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(L(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Nt=or(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Nt=null}}else Nt=Mt?or(e.stateNode.nextSibling):null;return!0}function UC(){for(var e=Nt;e;)e=or(e.nextSibling)}function Fi(){Nt=Mt=null,je=!1}function Ag(e){en===null?en=[e]:en.push(e)}var OR=Fn.ReactCurrentBatchConfig;function ba(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(L(309));var r=n.stateNode}if(!r)throw Error(L(147,e));var i=r,a=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===a?t.ref:(t=function(s){var o=i.refs;s===null?delete o[a]:o[a]=s},t._stringRef=a,t)}if(typeof e!="string")throw Error(L(284));if(!n._owner)throw Error(L(290,e))}return e}function Qs(e,t){throw e=Object.prototype.toString.call(t),Error(L(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function l0(e){var t=e._init;return t(e._payload)}function GC(e){function t(g,y){if(e){var b=g.deletions;b===null?(g.deletions=[y],g.flags|=16):b.push(y)}}function n(g,y){if(!e)return null;for(;y!==null;)t(g,y),y=y.sibling;return null}function r(g,y){for(g=new Map;y!==null;)y.key!==null?g.set(y.key,y):g.set(y.index,y),y=y.sibling;return g}function i(g,y){return g=dr(g,y),g.index=0,g.sibling=null,g}function a(g,y,b){return g.index=b,e?(b=g.alternate,b!==null?(b=b.index,b<y?(g.flags|=2,y):b):(g.flags|=2,y)):(g.flags|=1048576,y)}function s(g){return e&&g.alternate===null&&(g.flags|=2),g}function o(g,y,b,_){return y===null||y.tag!==6?(y=Au(b,g.mode,_),y.return=g,y):(y=i(y,b),y.return=g,y)}function l(g,y,b,_){var C=b.type;return C===mi?c(g,y,b.props.children,_,b.key):y!==null&&(y.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===Jn&&l0(C)===y.type)?(_=i(y,b.props),_.ref=ba(g,y,b),_.return=g,_):(_=So(b.type,b.key,b.props,null,g.mode,_),_.ref=ba(g,y,b),_.return=g,_)}function u(g,y,b,_){return y===null||y.tag!==4||y.stateNode.containerInfo!==b.containerInfo||y.stateNode.implementation!==b.implementation?(y=Iu(b,g.mode,_),y.return=g,y):(y=i(y,b.children||[]),y.return=g,y)}function c(g,y,b,_,C){return y===null||y.tag!==7?(y=qr(b,g.mode,_,C),y.return=g,y):(y=i(y,b),y.return=g,y)}function f(g,y,b){if(typeof y=="string"&&y!==""||typeof y=="number")return y=Au(""+y,g.mode,b),y.return=g,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Fs:return b=So(y.type,y.key,y.props,null,g.mode,b),b.ref=ba(g,null,y),b.return=g,b;case pi:return y=Iu(y,g.mode,b),y.return=g,y;case Jn:var _=y._init;return f(g,_(y._payload),b)}if(ja(y)||pa(y))return y=qr(y,g.mode,b,null),y.return=g,y;Qs(g,y)}return null}function h(g,y,b,_){var C=y!==null?y.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return C!==null?null:o(g,y,""+b,_);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Fs:return b.key===C?l(g,y,b,_):null;case pi:return b.key===C?u(g,y,b,_):null;case Jn:return C=b._init,h(g,y,C(b._payload),_)}if(ja(b)||pa(b))return C!==null?null:c(g,y,b,_,null);Qs(g,b)}return null}function m(g,y,b,_,C){if(typeof _=="string"&&_!==""||typeof _=="number")return g=g.get(b)||null,o(y,g,""+_,C);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Fs:return g=g.get(_.key===null?b:_.key)||null,l(y,g,_,C);case pi:return g=g.get(_.key===null?b:_.key)||null,u(y,g,_,C);case Jn:var E=_._init;return m(g,y,b,E(_._payload),C)}if(ja(_)||pa(_))return g=g.get(b)||null,c(y,g,_,C,null);Qs(y,_)}return null}function v(g,y,b,_){for(var C=null,E=null,j=y,T=y=0,P=null;j!==null&&T<b.length;T++){j.index>T?(P=j,j=null):P=j.sibling;var O=h(g,j,b[T],_);if(O===null){j===null&&(j=P);break}e&&j&&O.alternate===null&&t(g,j),y=a(O,y,T),E===null?C=O:E.sibling=O,E=O,j=P}if(T===b.length)return n(g,j),je&&Tr(g,T),C;if(j===null){for(;T<b.length;T++)j=f(g,b[T],_),j!==null&&(y=a(j,y,T),E===null?C=j:E.sibling=j,E=j);return je&&Tr(g,T),C}for(j=r(g,j);T<b.length;T++)P=m(j,g,T,b[T],_),P!==null&&(e&&P.alternate!==null&&j.delete(P.key===null?T:P.key),y=a(P,y,T),E===null?C=P:E.sibling=P,E=P);return e&&j.forEach(function(A){return t(g,A)}),je&&Tr(g,T),C}function p(g,y,b,_){var C=pa(b);if(typeof C!="function")throw Error(L(150));if(b=C.call(b),b==null)throw Error(L(151));for(var E=C=null,j=y,T=y=0,P=null,O=b.next();j!==null&&!O.done;T++,O=b.next()){j.index>T?(P=j,j=null):P=j.sibling;var A=h(g,j,O.value,_);if(A===null){j===null&&(j=P);break}e&&j&&A.alternate===null&&t(g,j),y=a(A,y,T),E===null?C=A:E.sibling=A,E=A,j=P}if(O.done)return n(g,j),je&&Tr(g,T),C;if(j===null){for(;!O.done;T++,O=b.next())O=f(g,O.value,_),O!==null&&(y=a(O,y,T),E===null?C=O:E.sibling=O,E=O);return je&&Tr(g,T),C}for(j=r(g,j);!O.done;T++,O=b.next())O=m(j,g,T,O.value,_),O!==null&&(e&&O.alternate!==null&&j.delete(O.key===null?T:O.key),y=a(O,y,T),E===null?C=O:E.sibling=O,E=O);return e&&j.forEach(function(W){return t(g,W)}),je&&Tr(g,T),C}function x(g,y,b,_){if(typeof b=="object"&&b!==null&&b.type===mi&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case Fs:e:{for(var C=b.key,E=y;E!==null;){if(E.key===C){if(C=b.type,C===mi){if(E.tag===7){n(g,E.sibling),y=i(E,b.props.children),y.return=g,g=y;break e}}else if(E.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===Jn&&l0(C)===E.type){n(g,E.sibling),y=i(E,b.props),y.ref=ba(g,E,b),y.return=g,g=y;break e}n(g,E);break}else t(g,E);E=E.sibling}b.type===mi?(y=qr(b.props.children,g.mode,_,b.key),y.return=g,g=y):(_=So(b.type,b.key,b.props,null,g.mode,_),_.ref=ba(g,y,b),_.return=g,g=_)}return s(g);case pi:e:{for(E=b.key;y!==null;){if(y.key===E)if(y.tag===4&&y.stateNode.containerInfo===b.containerInfo&&y.stateNode.implementation===b.implementation){n(g,y.sibling),y=i(y,b.children||[]),y.return=g,g=y;break e}else{n(g,y);break}else t(g,y);y=y.sibling}y=Iu(b,g.mode,_),y.return=g,g=y}return s(g);case Jn:return E=b._init,x(g,y,E(b._payload),_)}if(ja(b))return v(g,y,b,_);if(pa(b))return p(g,y,b,_);Qs(g,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,y!==null&&y.tag===6?(n(g,y.sibling),y=i(y,b),y.return=g,g=y):(n(g,y),y=Au(b,g.mode,_),y.return=g,g=y),s(g)):n(g,y)}return x}var Vi=GC(!0),HC=GC(!1),Fo=br(null),Vo=null,_i=null,Ig=null;function Dg(){Ig=_i=Vo=null}function Og(e){var t=Fo.current;Ce(Fo),e._currentValue=t}function Em(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Di(e,t){Vo=e,Ig=_i=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(xt=!0),e.firstContext=null)}function Gt(e){var t=e._currentValue;if(Ig!==e)if(e={context:e,memoizedValue:t,next:null},_i===null){if(Vo===null)throw Error(L(308));_i=e,Vo.dependencies={lanes:0,firstContext:e}}else _i=_i.next=e;return t}var Ar=null;function Lg(e){Ar===null?Ar=[e]:Ar.push(e)}function WC(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,Lg(t)):(n.next=i.next,i.next=n),t.interleaved=n,Dn(e,r)}function Dn(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Xn=!1;function qg(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function KC(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Mn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function lr(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,pe&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Dn(e,n)}return i=r.interleaved,i===null?(t.next=t,Lg(r)):(t.next=i.next,i.next=t),r.interleaved=t,Dn(e,n)}function go(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,_g(e,n)}}function u0(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,a=null;if(n=n.firstBaseUpdate,n!==null){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};a===null?i=a=s:a=a.next=s,n=n.next}while(n!==null);a===null?i=a=t:a=a.next=t}else i=a=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function $o(e,t,n,r){var i=e.updateQueue;Xn=!1;var a=i.firstBaseUpdate,s=i.lastBaseUpdate,o=i.shared.pending;if(o!==null){i.shared.pending=null;var l=o,u=l.next;l.next=null,s===null?a=u:s.next=u,s=l;var c=e.alternate;c!==null&&(c=c.updateQueue,o=c.lastBaseUpdate,o!==s&&(o===null?c.firstBaseUpdate=u:o.next=u,c.lastBaseUpdate=l))}if(a!==null){var f=i.baseState;s=0,c=u=l=null,o=a;do{var h=o.lane,m=o.eventTime;if((r&h)===h){c!==null&&(c=c.next={eventTime:m,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var v=e,p=o;switch(h=t,m=n,p.tag){case 1:if(v=p.payload,typeof v=="function"){f=v.call(m,f,h);break e}f=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=p.payload,h=typeof v=="function"?v.call(m,f,h):v,h==null)break e;f=Re({},f,h);break e;case 2:Xn=!0}}o.callback!==null&&o.lane!==0&&(e.flags|=64,h=i.effects,h===null?i.effects=[o]:h.push(o))}else m={eventTime:m,lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},c===null?(u=c=m,l=f):c=c.next=m,s|=h;if(o=o.next,o===null){if(o=i.shared.pending,o===null)break;h=o,o=h.next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}while(!0);if(c===null&&(l=f),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,t=i.shared.interleaved,t!==null){i=t;do s|=i.lane,i=i.next;while(i!==t)}else a===null&&(i.shared.lanes=0);Ur|=s,e.lanes=s,e.memoizedState=f}}function c0(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(L(191,i));i.call(r)}}}var Cs={},mn=br(Cs),us=br(Cs),cs=br(Cs);function Ir(e){if(e===Cs)throw Error(L(174));return e}function Fg(e,t){switch(Se(cs,t),Se(us,e),Se(mn,Cs),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:sm(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=sm(t,e)}Ce(mn),Se(mn,t)}function $i(){Ce(mn),Ce(us),Ce(cs)}function YC(e){Ir(cs.current);var t=Ir(mn.current),n=sm(t,e.type);t!==n&&(Se(us,e),Se(mn,n))}function Vg(e){us.current===e&&(Ce(mn),Ce(us))}var Ne=br(0);function Bo(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ju=[];function $g(){for(var e=0;e<ju.length;e++)ju[e]._workInProgressVersionPrimary=null;ju.length=0}var vo=Fn.ReactCurrentDispatcher,Tu=Fn.ReactCurrentBatchConfig,zr=0,Pe=null,Ye=null,Ze=null,zo=!1,Ua=!1,ds=0,LR=0;function ot(){throw Error(L(321))}function Bg(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!rn(e[n],t[n]))return!1;return!0}function zg(e,t,n,r,i,a){if(zr=a,Pe=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,vo.current=e===null||e.memoizedState===null?$R:BR,e=n(r,i),Ua){a=0;do{if(Ua=!1,ds=0,25<=a)throw Error(L(301));a+=1,Ze=Ye=null,t.updateQueue=null,vo.current=zR,e=n(r,i)}while(Ua)}if(vo.current=Uo,t=Ye!==null&&Ye.next!==null,zr=0,Ze=Ye=Pe=null,zo=!1,t)throw Error(L(300));return e}function Ug(){var e=ds!==0;return ds=0,e}function dn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ze===null?Pe.memoizedState=Ze=e:Ze=Ze.next=e,Ze}function Ht(){if(Ye===null){var e=Pe.alternate;e=e!==null?e.memoizedState:null}else e=Ye.next;var t=Ze===null?Pe.memoizedState:Ze.next;if(t!==null)Ze=t,Ye=e;else{if(e===null)throw Error(L(310));Ye=e,e={memoizedState:Ye.memoizedState,baseState:Ye.baseState,baseQueue:Ye.baseQueue,queue:Ye.queue,next:null},Ze===null?Pe.memoizedState=Ze=e:Ze=Ze.next=e}return Ze}function fs(e,t){return typeof t=="function"?t(e):t}function Nu(e){var t=Ht(),n=t.queue;if(n===null)throw Error(L(311));n.lastRenderedReducer=e;var r=Ye,i=r.baseQueue,a=n.pending;if(a!==null){if(i!==null){var s=i.next;i.next=a.next,a.next=s}r.baseQueue=i=a,n.pending=null}if(i!==null){a=i.next,r=r.baseState;var o=s=null,l=null,u=a;do{var c=u.lane;if((zr&c)===c)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var f={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(o=l=f,s=r):l=l.next=f,Pe.lanes|=c,Ur|=c}u=u.next}while(u!==null&&u!==a);l===null?s=r:l.next=o,rn(r,t.memoizedState)||(xt=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=l,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do a=i.lane,Pe.lanes|=a,Ur|=a,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Mu(e){var t=Ht(),n=t.queue;if(n===null)throw Error(L(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,a=t.memoizedState;if(i!==null){n.pending=null;var s=i=i.next;do a=e(a,s.action),s=s.next;while(s!==i);rn(a,t.memoizedState)||(xt=!0),t.memoizedState=a,t.baseQueue===null&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function QC(){}function JC(e,t){var n=Pe,r=Ht(),i=t(),a=!rn(r.memoizedState,i);if(a&&(r.memoizedState=i,xt=!0),r=r.queue,Gg(eE.bind(null,n,r,e),[e]),r.getSnapshot!==t||a||Ze!==null&&Ze.memoizedState.tag&1){if(n.flags|=2048,hs(9,ZC.bind(null,n,r,i,t),void 0,null),et===null)throw Error(L(349));zr&30||XC(n,t,i)}return i}function XC(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Pe.updateQueue,t===null?(t={lastEffect:null,stores:null},Pe.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function ZC(e,t,n,r){t.value=n,t.getSnapshot=r,tE(t)&&nE(e)}function eE(e,t,n){return n(function(){tE(t)&&nE(e)})}function tE(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!rn(e,n)}catch{return!0}}function nE(e){var t=Dn(e,1);t!==null&&nn(t,e,1,-1)}function d0(e){var t=dn();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:fs,lastRenderedState:e},t.queue=e,e=e.dispatch=VR.bind(null,Pe,e),[t.memoizedState,e]}function hs(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Pe.updateQueue,t===null?(t={lastEffect:null,stores:null},Pe.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function rE(){return Ht().memoizedState}function yo(e,t,n,r){var i=dn();Pe.flags|=e,i.memoizedState=hs(1|t,n,void 0,r===void 0?null:r)}function pl(e,t,n,r){var i=Ht();r=r===void 0?null:r;var a=void 0;if(Ye!==null){var s=Ye.memoizedState;if(a=s.destroy,r!==null&&Bg(r,s.deps)){i.memoizedState=hs(t,n,a,r);return}}Pe.flags|=e,i.memoizedState=hs(1|t,n,a,r)}function f0(e,t){return yo(8390656,8,e,t)}function Gg(e,t){return pl(2048,8,e,t)}function iE(e,t){return pl(4,2,e,t)}function aE(e,t){return pl(4,4,e,t)}function sE(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function oE(e,t,n){return n=n!=null?n.concat([e]):null,pl(4,4,sE.bind(null,t,e),n)}function Hg(){}function lE(e,t){var n=Ht();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Bg(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function uE(e,t){var n=Ht();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Bg(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function cE(e,t,n){return zr&21?(rn(n,t)||(n=mC(),Pe.lanes|=n,Ur|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,xt=!0),e.memoizedState=n)}function qR(e,t){var n=xe;xe=n!==0&&4>n?n:4,e(!0);var r=Tu.transition;Tu.transition={};try{e(!1),t()}finally{xe=n,Tu.transition=r}}function dE(){return Ht().memoizedState}function FR(e,t,n){var r=cr(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},fE(e))hE(t,n);else if(n=WC(e,t,n,r),n!==null){var i=mt();nn(n,e,r,i),pE(n,t,r)}}function VR(e,t,n){var r=cr(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(fE(e))hE(t,i);else{var a=e.alternate;if(e.lanes===0&&(a===null||a.lanes===0)&&(a=t.lastRenderedReducer,a!==null))try{var s=t.lastRenderedState,o=a(s,n);if(i.hasEagerState=!0,i.eagerState=o,rn(o,s)){var l=t.interleaved;l===null?(i.next=i,Lg(t)):(i.next=l.next,l.next=i),t.interleaved=i;return}}catch{}finally{}n=WC(e,t,i,r),n!==null&&(i=mt(),nn(n,e,r,i),pE(n,t,r))}}function fE(e){var t=e.alternate;return e===Pe||t!==null&&t===Pe}function hE(e,t){Ua=zo=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function pE(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,_g(e,n)}}var Uo={readContext:Gt,useCallback:ot,useContext:ot,useEffect:ot,useImperativeHandle:ot,useInsertionEffect:ot,useLayoutEffect:ot,useMemo:ot,useReducer:ot,useRef:ot,useState:ot,useDebugValue:ot,useDeferredValue:ot,useTransition:ot,useMutableSource:ot,useSyncExternalStore:ot,useId:ot,unstable_isNewReconciler:!1},$R={readContext:Gt,useCallback:function(e,t){return dn().memoizedState=[e,t===void 0?null:t],e},useContext:Gt,useEffect:f0,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,yo(4194308,4,sE.bind(null,t,e),n)},useLayoutEffect:function(e,t){return yo(4194308,4,e,t)},useInsertionEffect:function(e,t){return yo(4,2,e,t)},useMemo:function(e,t){var n=dn();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=dn();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=FR.bind(null,Pe,e),[r.memoizedState,e]},useRef:function(e){var t=dn();return e={current:e},t.memoizedState=e},useState:d0,useDebugValue:Hg,useDeferredValue:function(e){return dn().memoizedState=e},useTransition:function(){var e=d0(!1),t=e[0];return e=qR.bind(null,e[1]),dn().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Pe,i=dn();if(je){if(n===void 0)throw Error(L(407));n=n()}else{if(n=t(),et===null)throw Error(L(349));zr&30||XC(r,t,n)}i.memoizedState=n;var a={value:n,getSnapshot:t};return i.queue=a,f0(eE.bind(null,r,a,e),[e]),r.flags|=2048,hs(9,ZC.bind(null,r,a,n,t),void 0,null),n},useId:function(){var e=dn(),t=et.identifierPrefix;if(je){var n=jn,r=En;n=(r&~(1<<32-tn(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=ds++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=LR++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},BR={readContext:Gt,useCallback:lE,useContext:Gt,useEffect:Gg,useImperativeHandle:oE,useInsertionEffect:iE,useLayoutEffect:aE,useMemo:uE,useReducer:Nu,useRef:rE,useState:function(){return Nu(fs)},useDebugValue:Hg,useDeferredValue:function(e){var t=Ht();return cE(t,Ye.memoizedState,e)},useTransition:function(){var e=Nu(fs)[0],t=Ht().memoizedState;return[e,t]},useMutableSource:QC,useSyncExternalStore:JC,useId:dE,unstable_isNewReconciler:!1},zR={readContext:Gt,useCallback:lE,useContext:Gt,useEffect:Gg,useImperativeHandle:oE,useInsertionEffect:iE,useLayoutEffect:aE,useMemo:uE,useReducer:Mu,useRef:rE,useState:function(){return Mu(fs)},useDebugValue:Hg,useDeferredValue:function(e){var t=Ht();return Ye===null?t.memoizedState=e:cE(t,Ye.memoizedState,e)},useTransition:function(){var e=Mu(fs)[0],t=Ht().memoizedState;return[e,t]},useMutableSource:QC,useSyncExternalStore:JC,useId:dE,unstable_isNewReconciler:!1};function Xt(e,t){if(e&&e.defaultProps){t=Re({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function jm(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Re({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var ml={isMounted:function(e){return(e=e._reactInternals)?Wr(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=mt(),i=cr(e),a=Mn(r,i);a.payload=t,n!=null&&(a.callback=n),t=lr(e,a,i),t!==null&&(nn(t,e,i,r),go(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=mt(),i=cr(e),a=Mn(r,i);a.tag=1,a.payload=t,n!=null&&(a.callback=n),t=lr(e,a,i),t!==null&&(nn(t,e,i,r),go(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=mt(),r=cr(e),i=Mn(n,r);i.tag=2,t!=null&&(i.callback=t),t=lr(e,i,r),t!==null&&(nn(t,e,r,n),go(t,e,r))}};function h0(e,t,n,r,i,a,s){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,a,s):t.prototype&&t.prototype.isPureReactComponent?!as(n,r)||!as(i,a):!0}function mE(e,t,n){var r=!1,i=pr,a=t.contextType;return typeof a=="object"&&a!==null?a=Gt(a):(i=St(t)?$r:ft.current,r=t.contextTypes,a=(r=r!=null)?qi(e,i):pr),t=new t(n,a),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=ml,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function p0(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ml.enqueueReplaceState(t,t.state,null)}function Tm(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},qg(e);var a=t.contextType;typeof a=="object"&&a!==null?i.context=Gt(a):(a=St(t)?$r:ft.current,i.context=qi(e,a)),i.state=e.memoizedState,a=t.getDerivedStateFromProps,typeof a=="function"&&(jm(e,t,a,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&ml.enqueueReplaceState(i,i.state,null),$o(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function Bi(e,t){try{var n="",r=t;do n+=vP(r),r=r.return;while(r);var i=n}catch(a){i=`
Error generating stack: `+a.message+`
`+a.stack}return{value:e,source:t,stack:i,digest:null}}function Pu(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Nm(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var UR=typeof WeakMap=="function"?WeakMap:Map;function gE(e,t,n){n=Mn(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Ho||(Ho=!0,Fm=r),Nm(e,t)},n}function vE(e,t,n){n=Mn(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){Nm(e,t)}}var a=e.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(n.callback=function(){Nm(e,t),typeof r!="function"&&(ur===null?ur=new Set([this]):ur.add(this));var s=t.stack;this.componentDidCatch(t.value,{componentStack:s!==null?s:""})}),n}function m0(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new UR;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=iA.bind(null,e,t,n),t.then(e,e))}function g0(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function v0(e,t,n,r,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Mn(-1,1),t.tag=2,lr(n,t,1))),n.lanes|=1),e)}var GR=Fn.ReactCurrentOwner,xt=!1;function pt(e,t,n,r){t.child=e===null?HC(t,null,n,r):Vi(t,e.child,n,r)}function y0(e,t,n,r,i){n=n.render;var a=t.ref;return Di(t,i),r=zg(e,t,n,r,a,i),n=Ug(),e!==null&&!xt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,On(e,t,i)):(je&&n&&Pg(t),t.flags|=1,pt(e,t,r,i),t.child)}function b0(e,t,n,r,i){if(e===null){var a=n.type;return typeof a=="function"&&!ev(a)&&a.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=a,yE(e,t,a,r,i)):(e=So(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(a=e.child,!(e.lanes&i)){var s=a.memoizedProps;if(n=n.compare,n=n!==null?n:as,n(s,r)&&e.ref===t.ref)return On(e,t,i)}return t.flags|=1,e=dr(a,r),e.ref=t.ref,e.return=t,t.child=e}function yE(e,t,n,r,i){if(e!==null){var a=e.memoizedProps;if(as(a,r)&&e.ref===t.ref)if(xt=!1,t.pendingProps=r=a,(e.lanes&i)!==0)e.flags&131072&&(xt=!0);else return t.lanes=e.lanes,On(e,t,i)}return Mm(e,t,n,r,i)}function bE(e,t,n){var r=t.pendingProps,i=r.children,a=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Se(Ci,Et),Et|=n;else{if(!(n&1073741824))return e=a!==null?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Se(Ci,Et),Et|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=a!==null?a.baseLanes:n,Se(Ci,Et),Et|=r}else a!==null?(r=a.baseLanes|n,t.memoizedState=null):r=n,Se(Ci,Et),Et|=r;return pt(e,t,i,n),t.child}function xE(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Mm(e,t,n,r,i){var a=St(n)?$r:ft.current;return a=qi(t,a),Di(t,i),n=zg(e,t,n,r,a,i),r=Ug(),e!==null&&!xt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,On(e,t,i)):(je&&r&&Pg(t),t.flags|=1,pt(e,t,n,i),t.child)}function x0(e,t,n,r,i){if(St(n)){var a=!0;Oo(t)}else a=!1;if(Di(t,i),t.stateNode===null)bo(e,t),mE(t,n,r),Tm(t,n,r,i),r=!0;else if(e===null){var s=t.stateNode,o=t.memoizedProps;s.props=o;var l=s.context,u=n.contextType;typeof u=="object"&&u!==null?u=Gt(u):(u=St(n)?$r:ft.current,u=qi(t,u));var c=n.getDerivedStateFromProps,f=typeof c=="function"||typeof s.getSnapshotBeforeUpdate=="function";f||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(o!==r||l!==u)&&p0(t,s,r,u),Xn=!1;var h=t.memoizedState;s.state=h,$o(t,r,s,i),l=t.memoizedState,o!==r||h!==l||wt.current||Xn?(typeof c=="function"&&(jm(t,n,c,r),l=t.memoizedState),(o=Xn||h0(t,n,o,r,h,l,u))?(f||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(t.flags|=4194308)):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),s.props=r,s.state=l,s.context=u,r=o):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{s=t.stateNode,KC(e,t),o=t.memoizedProps,u=t.type===t.elementType?o:Xt(t.type,o),s.props=u,f=t.pendingProps,h=s.context,l=n.contextType,typeof l=="object"&&l!==null?l=Gt(l):(l=St(n)?$r:ft.current,l=qi(t,l));var m=n.getDerivedStateFromProps;(c=typeof m=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(o!==f||h!==l)&&p0(t,s,r,l),Xn=!1,h=t.memoizedState,s.state=h,$o(t,r,s,i);var v=t.memoizedState;o!==f||h!==v||wt.current||Xn?(typeof m=="function"&&(jm(t,n,m,r),v=t.memoizedState),(u=Xn||h0(t,n,u,r,h,v,l)||!1)?(c||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(r,v,l),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(r,v,l)),typeof s.componentDidUpdate=="function"&&(t.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof s.componentDidUpdate!="function"||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=v),s.props=r,s.state=v,s.context=l,r=u):(typeof s.componentDidUpdate!="function"||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Pm(e,t,n,r,a,i)}function Pm(e,t,n,r,i,a){xE(e,t);var s=(t.flags&128)!==0;if(!r&&!s)return i&&a0(t,n,!1),On(e,t,a);r=t.stateNode,GR.current=t;var o=s&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&s?(t.child=Vi(t,e.child,null,a),t.child=Vi(t,null,o,a)):pt(e,t,o,a),t.memoizedState=r.state,i&&a0(t,n,!0),t.child}function wE(e){var t=e.stateNode;t.pendingContext?i0(e,t.pendingContext,t.pendingContext!==t.context):t.context&&i0(e,t.context,!1),Fg(e,t.containerInfo)}function w0(e,t,n,r,i){return Fi(),Ag(i),t.flags|=256,pt(e,t,n,r),t.child}var Rm={dehydrated:null,treeContext:null,retryLane:0};function Am(e){return{baseLanes:e,cachePool:null,transitions:null}}function SE(e,t,n){var r=t.pendingProps,i=Ne.current,a=!1,s=(t.flags&128)!==0,o;if((o=s)||(o=e!==null&&e.memoizedState===null?!1:(i&2)!==0),o?(a=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),Se(Ne,i&1),e===null)return Cm(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(s=r.children,e=r.fallback,a?(r=t.mode,a=t.child,s={mode:"hidden",children:s},!(r&1)&&a!==null?(a.childLanes=0,a.pendingProps=s):a=yl(s,r,0,null),e=qr(e,r,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=Am(n),t.memoizedState=Rm,e):Wg(t,s));if(i=e.memoizedState,i!==null&&(o=i.dehydrated,o!==null))return HR(e,t,s,r,o,i,n);if(a){a=r.fallback,s=t.mode,i=e.child,o=i.sibling;var l={mode:"hidden",children:r.children};return!(s&1)&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=l,t.deletions=null):(r=dr(i,l),r.subtreeFlags=i.subtreeFlags&14680064),o!==null?a=dr(o,a):(a=qr(a,s,n,null),a.flags|=2),a.return=t,r.return=t,r.sibling=a,t.child=r,r=a,a=t.child,s=e.child.memoizedState,s=s===null?Am(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},a.memoizedState=s,a.childLanes=e.childLanes&~n,t.memoizedState=Rm,r}return a=e.child,e=a.sibling,r=dr(a,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Wg(e,t){return t=yl({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Js(e,t,n,r){return r!==null&&Ag(r),Vi(t,e.child,null,n),e=Wg(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function HR(e,t,n,r,i,a,s){if(n)return t.flags&256?(t.flags&=-257,r=Pu(Error(L(422))),Js(e,t,s,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(a=r.fallback,i=t.mode,r=yl({mode:"visible",children:r.children},i,0,null),a=qr(a,i,s,null),a.flags|=2,r.return=t,a.return=t,r.sibling=a,t.child=r,t.mode&1&&Vi(t,e.child,null,s),t.child.memoizedState=Am(s),t.memoizedState=Rm,a);if(!(t.mode&1))return Js(e,t,s,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var o=r.dgst;return r=o,a=Error(L(419)),r=Pu(a,r,void 0),Js(e,t,s,r)}if(o=(s&e.childLanes)!==0,xt||o){if(r=et,r!==null){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|s)?0:i,i!==0&&i!==a.retryLane&&(a.retryLane=i,Dn(e,i),nn(r,e,i,-1))}return Zg(),r=Pu(Error(L(421))),Js(e,t,s,r)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=aA.bind(null,e),i._reactRetry=t,null):(e=a.treeContext,Nt=or(i.nextSibling),Mt=t,je=!0,en=null,e!==null&&($t[Bt++]=En,$t[Bt++]=jn,$t[Bt++]=Br,En=e.id,jn=e.overflow,Br=t),t=Wg(t,r.children),t.flags|=4096,t)}function S0(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Em(e.return,t,n)}function Ru(e,t,n,r,i){var a=e.memoizedState;a===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function _E(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(pt(e,t,r.children,n),r=Ne.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&S0(e,n,t);else if(e.tag===19)S0(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Se(Ne,r),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&Bo(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Ru(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&Bo(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Ru(t,!0,n,null,a);break;case"together":Ru(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function bo(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function On(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Ur|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(L(153));if(t.child!==null){for(e=t.child,n=dr(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=dr(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function WR(e,t,n){switch(t.tag){case 3:wE(t),Fi();break;case 5:YC(t);break;case 1:St(t.type)&&Oo(t);break;case 4:Fg(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Se(Fo,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Se(Ne,Ne.current&1),t.flags|=128,null):n&t.child.childLanes?SE(e,t,n):(Se(Ne,Ne.current&1),e=On(e,t,n),e!==null?e.sibling:null);Se(Ne,Ne.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return _E(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Se(Ne,Ne.current),r)break;return null;case 22:case 23:return t.lanes=0,bE(e,t,n)}return On(e,t,n)}var kE,Im,CE,EE;kE=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Im=function(){};CE=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Ir(mn.current);var a=null;switch(n){case"input":i=nm(e,i),r=nm(e,r),a=[];break;case"select":i=Re({},i,{value:void 0}),r=Re({},r,{value:void 0}),a=[];break;case"textarea":i=am(e,i),r=am(e,r),a=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Io)}om(n,r);var s;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var o=i[u];for(s in o)o.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Xa.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in r){var l=r[u];if(o=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&l!==o&&(l!=null||o!=null))if(u==="style")if(o){for(s in o)!o.hasOwnProperty(s)||l&&l.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in l)l.hasOwnProperty(s)&&o[s]!==l[s]&&(n||(n={}),n[s]=l[s])}else n||(a||(a=[]),a.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,o=o?o.__html:void 0,l!=null&&o!==l&&(a=a||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(a=a||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Xa.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&ke("scroll",e),a||o===l||(a=[])):(a=a||[]).push(u,l))}n&&(a=a||[]).push("style",n);var u=a;(t.updateQueue=u)&&(t.flags|=4)}};EE=function(e,t,n,r){n!==r&&(t.flags|=4)};function xa(e,t){if(!je)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function lt(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function KR(e,t,n){var r=t.pendingProps;switch(Rg(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return lt(t),null;case 1:return St(t.type)&&Do(),lt(t),null;case 3:return r=t.stateNode,$i(),Ce(wt),Ce(ft),$g(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Ys(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,en!==null&&(Bm(en),en=null))),Im(e,t),lt(t),null;case 5:Vg(t);var i=Ir(cs.current);if(n=t.type,e!==null&&t.stateNode!=null)CE(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(L(166));return lt(t),null}if(e=Ir(mn.current),Ys(t)){r=t.stateNode,n=t.type;var a=t.memoizedProps;switch(r[fn]=t,r[ls]=a,e=(t.mode&1)!==0,n){case"dialog":ke("cancel",r),ke("close",r);break;case"iframe":case"object":case"embed":ke("load",r);break;case"video":case"audio":for(i=0;i<Na.length;i++)ke(Na[i],r);break;case"source":ke("error",r);break;case"img":case"image":case"link":ke("error",r),ke("load",r);break;case"details":ke("toggle",r);break;case"input":Py(r,a),ke("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},ke("invalid",r);break;case"textarea":Ay(r,a),ke("invalid",r)}om(n,a),i=null;for(var s in a)if(a.hasOwnProperty(s)){var o=a[s];s==="children"?typeof o=="string"?r.textContent!==o&&(a.suppressHydrationWarning!==!0&&Ks(r.textContent,o,e),i=["children",o]):typeof o=="number"&&r.textContent!==""+o&&(a.suppressHydrationWarning!==!0&&Ks(r.textContent,o,e),i=["children",""+o]):Xa.hasOwnProperty(s)&&o!=null&&s==="onScroll"&&ke("scroll",r)}switch(n){case"input":Vs(r),Ry(r,a,!0);break;case"textarea":Vs(r),Iy(r);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(r.onclick=Io)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{s=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=eC(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=s.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=s.createElement(n,{is:r.is}):(e=s.createElement(n),n==="select"&&(s=e,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):e=s.createElementNS(e,n),e[fn]=t,e[ls]=r,kE(e,t,!1,!1),t.stateNode=e;e:{switch(s=lm(n,r),n){case"dialog":ke("cancel",e),ke("close",e),i=r;break;case"iframe":case"object":case"embed":ke("load",e),i=r;break;case"video":case"audio":for(i=0;i<Na.length;i++)ke(Na[i],e);i=r;break;case"source":ke("error",e),i=r;break;case"img":case"image":case"link":ke("error",e),ke("load",e),i=r;break;case"details":ke("toggle",e),i=r;break;case"input":Py(e,r),i=nm(e,r),ke("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=Re({},r,{value:void 0}),ke("invalid",e);break;case"textarea":Ay(e,r),i=am(e,r),ke("invalid",e);break;default:i=r}om(n,i),o=i;for(a in o)if(o.hasOwnProperty(a)){var l=o[a];a==="style"?rC(e,l):a==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&tC(e,l)):a==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Za(e,l):typeof l=="number"&&Za(e,""+l):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(Xa.hasOwnProperty(a)?l!=null&&a==="onScroll"&&ke("scroll",e):l!=null&&vg(e,a,l,s))}switch(n){case"input":Vs(e),Ry(e,r,!1);break;case"textarea":Vs(e),Iy(e);break;case"option":r.value!=null&&e.setAttribute("value",""+hr(r.value));break;case"select":e.multiple=!!r.multiple,a=r.value,a!=null?Pi(e,!!r.multiple,a,!1):r.defaultValue!=null&&Pi(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=Io)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return lt(t),null;case 6:if(e&&t.stateNode!=null)EE(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(L(166));if(n=Ir(cs.current),Ir(mn.current),Ys(t)){if(r=t.stateNode,n=t.memoizedProps,r[fn]=t,(a=r.nodeValue!==n)&&(e=Mt,e!==null))switch(e.tag){case 3:Ks(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Ks(r.nodeValue,n,(e.mode&1)!==0)}a&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[fn]=t,t.stateNode=r}return lt(t),null;case 13:if(Ce(Ne),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(je&&Nt!==null&&t.mode&1&&!(t.flags&128))UC(),Fi(),t.flags|=98560,a=!1;else if(a=Ys(t),r!==null&&r.dehydrated!==null){if(e===null){if(!a)throw Error(L(318));if(a=t.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(L(317));a[fn]=t}else Fi(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;lt(t),a=!1}else en!==null&&(Bm(en),en=null),a=!0;if(!a)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Ne.current&1?Qe===0&&(Qe=3):Zg())),t.updateQueue!==null&&(t.flags|=4),lt(t),null);case 4:return $i(),Im(e,t),e===null&&ss(t.stateNode.containerInfo),lt(t),null;case 10:return Og(t.type._context),lt(t),null;case 17:return St(t.type)&&Do(),lt(t),null;case 19:if(Ce(Ne),a=t.memoizedState,a===null)return lt(t),null;if(r=(t.flags&128)!==0,s=a.rendering,s===null)if(r)xa(a,!1);else{if(Qe!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(s=Bo(e),s!==null){for(t.flags|=128,xa(a,!1),r=s.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)a=n,e=r,a.flags&=14680066,s=a.alternate,s===null?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=s.childLanes,a.lanes=s.lanes,a.child=s.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=s.memoizedProps,a.memoizedState=s.memoizedState,a.updateQueue=s.updateQueue,a.type=s.type,e=s.dependencies,a.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Se(Ne,Ne.current&1|2),t.child}e=e.sibling}a.tail!==null&&Ge()>zi&&(t.flags|=128,r=!0,xa(a,!1),t.lanes=4194304)}else{if(!r)if(e=Bo(s),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),xa(a,!0),a.tail===null&&a.tailMode==="hidden"&&!s.alternate&&!je)return lt(t),null}else 2*Ge()-a.renderingStartTime>zi&&n!==1073741824&&(t.flags|=128,r=!0,xa(a,!1),t.lanes=4194304);a.isBackwards?(s.sibling=t.child,t.child=s):(n=a.last,n!==null?n.sibling=s:t.child=s,a.last=s)}return a.tail!==null?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=Ge(),t.sibling=null,n=Ne.current,Se(Ne,r?n&1|2:n&1),t):(lt(t),null);case 22:case 23:return Xg(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Et&1073741824&&(lt(t),t.subtreeFlags&6&&(t.flags|=8192)):lt(t),null;case 24:return null;case 25:return null}throw Error(L(156,t.tag))}function YR(e,t){switch(Rg(t),t.tag){case 1:return St(t.type)&&Do(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return $i(),Ce(wt),Ce(ft),$g(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Vg(t),null;case 13:if(Ce(Ne),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(L(340));Fi()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Ce(Ne),null;case 4:return $i(),null;case 10:return Og(t.type._context),null;case 22:case 23:return Xg(),null;case 24:return null;default:return null}}var Xs=!1,ct=!1,QR=typeof WeakSet=="function"?WeakSet:Set,G=null;function ki(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){qe(e,t,r)}else n.current=null}function Dm(e,t,n){try{n()}catch(r){qe(e,t,r)}}var _0=!1;function JR(e,t){if(ym=Po,e=PC(),Mg(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch{n=null;break e}var s=0,o=-1,l=-1,u=0,c=0,f=e,h=null;t:for(;;){for(var m;f!==n||i!==0&&f.nodeType!==3||(o=s+i),f!==a||r!==0&&f.nodeType!==3||(l=s+r),f.nodeType===3&&(s+=f.nodeValue.length),(m=f.firstChild)!==null;)h=f,f=m;for(;;){if(f===e)break t;if(h===n&&++u===i&&(o=s),h===a&&++c===r&&(l=s),(m=f.nextSibling)!==null)break;f=h,h=f.parentNode}f=m}n=o===-1||l===-1?null:{start:o,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(bm={focusedElem:e,selectionRange:n},Po=!1,G=t;G!==null;)if(t=G,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,G=e;else for(;G!==null;){t=G;try{var v=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var p=v.memoizedProps,x=v.memoizedState,g=t.stateNode,y=g.getSnapshotBeforeUpdate(t.elementType===t.type?p:Xt(t.type,p),x);g.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var b=t.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(L(163))}}catch(_){qe(t,t.return,_)}if(e=t.sibling,e!==null){e.return=t.return,G=e;break}G=t.return}return v=_0,_0=!1,v}function Ga(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,a!==void 0&&Dm(t,n,a)}i=i.next}while(i!==r)}}function gl(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function Om(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function jE(e){var t=e.alternate;t!==null&&(e.alternate=null,jE(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[fn],delete t[ls],delete t[Sm],delete t[AR],delete t[IR])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function TE(e){return e.tag===5||e.tag===3||e.tag===4}function k0(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||TE(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Lm(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Io));else if(r!==4&&(e=e.child,e!==null))for(Lm(e,t,n),e=e.sibling;e!==null;)Lm(e,t,n),e=e.sibling}function qm(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(qm(e,t,n),e=e.sibling;e!==null;)qm(e,t,n),e=e.sibling}var tt=null,Zt=!1;function Wn(e,t,n){for(n=n.child;n!==null;)NE(e,t,n),n=n.sibling}function NE(e,t,n){if(pn&&typeof pn.onCommitFiberUnmount=="function")try{pn.onCommitFiberUnmount(ll,n)}catch{}switch(n.tag){case 5:ct||ki(n,t);case 6:var r=tt,i=Zt;tt=null,Wn(e,t,n),tt=r,Zt=i,tt!==null&&(Zt?(e=tt,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):tt.removeChild(n.stateNode));break;case 18:tt!==null&&(Zt?(e=tt,n=n.stateNode,e.nodeType===8?Cu(e.parentNode,n):e.nodeType===1&&Cu(e,n),rs(e)):Cu(tt,n.stateNode));break;case 4:r=tt,i=Zt,tt=n.stateNode.containerInfo,Zt=!0,Wn(e,t,n),tt=r,Zt=i;break;case 0:case 11:case 14:case 15:if(!ct&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var a=i,s=a.destroy;a=a.tag,s!==void 0&&(a&2||a&4)&&Dm(n,t,s),i=i.next}while(i!==r)}Wn(e,t,n);break;case 1:if(!ct&&(ki(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){qe(n,t,o)}Wn(e,t,n);break;case 21:Wn(e,t,n);break;case 22:n.mode&1?(ct=(r=ct)||n.memoizedState!==null,Wn(e,t,n),ct=r):Wn(e,t,n);break;default:Wn(e,t,n)}}function C0(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new QR),t.forEach(function(r){var i=sA.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Qt(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var a=e,s=t,o=s;e:for(;o!==null;){switch(o.tag){case 5:tt=o.stateNode,Zt=!1;break e;case 3:tt=o.stateNode.containerInfo,Zt=!0;break e;case 4:tt=o.stateNode.containerInfo,Zt=!0;break e}o=o.return}if(tt===null)throw Error(L(160));NE(a,s,i),tt=null,Zt=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){qe(i,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)ME(t,e),t=t.sibling}function ME(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Qt(t,e),cn(e),r&4){try{Ga(3,e,e.return),gl(3,e)}catch(p){qe(e,e.return,p)}try{Ga(5,e,e.return)}catch(p){qe(e,e.return,p)}}break;case 1:Qt(t,e),cn(e),r&512&&n!==null&&ki(n,n.return);break;case 5:if(Qt(t,e),cn(e),r&512&&n!==null&&ki(n,n.return),e.flags&32){var i=e.stateNode;try{Za(i,"")}catch(p){qe(e,e.return,p)}}if(r&4&&(i=e.stateNode,i!=null)){var a=e.memoizedProps,s=n!==null?n.memoizedProps:a,o=e.type,l=e.updateQueue;if(e.updateQueue=null,l!==null)try{o==="input"&&a.type==="radio"&&a.name!=null&&Xk(i,a),lm(o,s);var u=lm(o,a);for(s=0;s<l.length;s+=2){var c=l[s],f=l[s+1];c==="style"?rC(i,f):c==="dangerouslySetInnerHTML"?tC(i,f):c==="children"?Za(i,f):vg(i,c,f,u)}switch(o){case"input":rm(i,a);break;case"textarea":Zk(i,a);break;case"select":var h=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var m=a.value;m!=null?Pi(i,!!a.multiple,m,!1):h!==!!a.multiple&&(a.defaultValue!=null?Pi(i,!!a.multiple,a.defaultValue,!0):Pi(i,!!a.multiple,a.multiple?[]:"",!1))}i[ls]=a}catch(p){qe(e,e.return,p)}}break;case 6:if(Qt(t,e),cn(e),r&4){if(e.stateNode===null)throw Error(L(162));i=e.stateNode,a=e.memoizedProps;try{i.nodeValue=a}catch(p){qe(e,e.return,p)}}break;case 3:if(Qt(t,e),cn(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{rs(t.containerInfo)}catch(p){qe(e,e.return,p)}break;case 4:Qt(t,e),cn(e);break;case 13:Qt(t,e),cn(e),i=e.child,i.flags&8192&&(a=i.memoizedState!==null,i.stateNode.isHidden=a,!a||i.alternate!==null&&i.alternate.memoizedState!==null||(Qg=Ge())),r&4&&C0(e);break;case 22:if(c=n!==null&&n.memoizedState!==null,e.mode&1?(ct=(u=ct)||c,Qt(t,e),ct=u):Qt(t,e),cn(e),r&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!c&&e.mode&1)for(G=e,c=e.child;c!==null;){for(f=G=c;G!==null;){switch(h=G,m=h.child,h.tag){case 0:case 11:case 14:case 15:Ga(4,h,h.return);break;case 1:ki(h,h.return);var v=h.stateNode;if(typeof v.componentWillUnmount=="function"){r=h,n=h.return;try{t=r,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(p){qe(r,n,p)}}break;case 5:ki(h,h.return);break;case 22:if(h.memoizedState!==null){j0(f);continue}}m!==null?(m.return=h,G=m):j0(f)}c=c.sibling}e:for(c=null,f=e;;){if(f.tag===5){if(c===null){c=f;try{i=f.stateNode,u?(a=i.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(o=f.stateNode,l=f.memoizedProps.style,s=l!=null&&l.hasOwnProperty("display")?l.display:null,o.style.display=nC("display",s))}catch(p){qe(e,e.return,p)}}}else if(f.tag===6){if(c===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(p){qe(e,e.return,p)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;c===f&&(c=null),f=f.return}c===f&&(c=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Qt(t,e),cn(e),r&4&&C0(e);break;case 21:break;default:Qt(t,e),cn(e)}}function cn(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(TE(n)){var r=n;break e}n=n.return}throw Error(L(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Za(i,""),r.flags&=-33);var a=k0(e);qm(e,a,i);break;case 3:case 4:var s=r.stateNode.containerInfo,o=k0(e);Lm(e,o,s);break;default:throw Error(L(161))}}catch(l){qe(e,e.return,l)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function XR(e,t,n){G=e,PE(e)}function PE(e,t,n){for(var r=(e.mode&1)!==0;G!==null;){var i=G,a=i.child;if(i.tag===22&&r){var s=i.memoizedState!==null||Xs;if(!s){var o=i.alternate,l=o!==null&&o.memoizedState!==null||ct;o=Xs;var u=ct;if(Xs=s,(ct=l)&&!u)for(G=i;G!==null;)s=G,l=s.child,s.tag===22&&s.memoizedState!==null?T0(i):l!==null?(l.return=s,G=l):T0(i);for(;a!==null;)G=a,PE(a),a=a.sibling;G=i,Xs=o,ct=u}E0(e)}else i.subtreeFlags&8772&&a!==null?(a.return=i,G=a):E0(e)}}function E0(e){for(;G!==null;){var t=G;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:ct||gl(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!ct)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:Xt(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;a!==null&&c0(t,a,r);break;case 3:var s=t.updateQueue;if(s!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}c0(t,s,n)}break;case 5:var o=t.stateNode;if(n===null&&t.flags&4){n=o;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var f=c.dehydrated;f!==null&&rs(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(L(163))}ct||t.flags&512&&Om(t)}catch(h){qe(t,t.return,h)}}if(t===e){G=null;break}if(n=t.sibling,n!==null){n.return=t.return,G=n;break}G=t.return}}function j0(e){for(;G!==null;){var t=G;if(t===e){G=null;break}var n=t.sibling;if(n!==null){n.return=t.return,G=n;break}G=t.return}}function T0(e){for(;G!==null;){var t=G;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{gl(4,t)}catch(l){qe(t,n,l)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(l){qe(t,i,l)}}var a=t.return;try{Om(t)}catch(l){qe(t,a,l)}break;case 5:var s=t.return;try{Om(t)}catch(l){qe(t,s,l)}}}catch(l){qe(t,t.return,l)}if(t===e){G=null;break}var o=t.sibling;if(o!==null){o.return=t.return,G=o;break}G=t.return}}var ZR=Math.ceil,Go=Fn.ReactCurrentDispatcher,Kg=Fn.ReactCurrentOwner,Ut=Fn.ReactCurrentBatchConfig,pe=0,et=null,We=null,rt=0,Et=0,Ci=br(0),Qe=0,ps=null,Ur=0,vl=0,Yg=0,Ha=null,bt=null,Qg=0,zi=1/0,_n=null,Ho=!1,Fm=null,ur=null,Zs=!1,rr=null,Wo=0,Wa=0,Vm=null,xo=-1,wo=0;function mt(){return pe&6?Ge():xo!==-1?xo:xo=Ge()}function cr(e){return e.mode&1?pe&2&&rt!==0?rt&-rt:OR.transition!==null?(wo===0&&(wo=mC()),wo):(e=xe,e!==0||(e=window.event,e=e===void 0?16:SC(e.type)),e):1}function nn(e,t,n,r){if(50<Wa)throw Wa=0,Vm=null,Error(L(185));Ss(e,n,r),(!(pe&2)||e!==et)&&(e===et&&(!(pe&2)&&(vl|=n),Qe===4&&er(e,rt)),_t(e,r),n===1&&pe===0&&!(t.mode&1)&&(zi=Ge()+500,hl&&xr()))}function _t(e,t){var n=e.callbackNode;OP(e,t);var r=Mo(e,e===et?rt:0);if(r===0)n!==null&&Ly(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&Ly(n),t===1)e.tag===0?DR(N0.bind(null,e)):$C(N0.bind(null,e)),PR(function(){!(pe&6)&&xr()}),n=null;else{switch(gC(r)){case 1:n=Sg;break;case 4:n=hC;break;case 16:n=No;break;case 536870912:n=pC;break;default:n=No}n=FE(n,RE.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function RE(e,t){if(xo=-1,wo=0,pe&6)throw Error(L(327));var n=e.callbackNode;if(Oi()&&e.callbackNode!==n)return null;var r=Mo(e,e===et?rt:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Ko(e,r);else{t=r;var i=pe;pe|=2;var a=IE();(et!==e||rt!==t)&&(_n=null,zi=Ge()+500,Lr(e,t));do try{nA();break}catch(o){AE(e,o)}while(!0);Dg(),Go.current=a,pe=i,We!==null?t=0:(et=null,rt=0,t=Qe)}if(t!==0){if(t===2&&(i=hm(e),i!==0&&(r=i,t=$m(e,i))),t===1)throw n=ps,Lr(e,0),er(e,r),_t(e,Ge()),n;if(t===6)er(e,r);else{if(i=e.current.alternate,!(r&30)&&!eA(i)&&(t=Ko(e,r),t===2&&(a=hm(e),a!==0&&(r=a,t=$m(e,a))),t===1))throw n=ps,Lr(e,0),er(e,r),_t(e,Ge()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(L(345));case 2:Nr(e,bt,_n);break;case 3:if(er(e,r),(r&130023424)===r&&(t=Qg+500-Ge(),10<t)){if(Mo(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){mt(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=wm(Nr.bind(null,e,bt,_n),t);break}Nr(e,bt,_n);break;case 4:if(er(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var s=31-tn(r);a=1<<s,s=t[s],s>i&&(i=s),r&=~a}if(r=i,r=Ge()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*ZR(r/1960))-r,10<r){e.timeoutHandle=wm(Nr.bind(null,e,bt,_n),r);break}Nr(e,bt,_n);break;case 5:Nr(e,bt,_n);break;default:throw Error(L(329))}}}return _t(e,Ge()),e.callbackNode===n?RE.bind(null,e):null}function $m(e,t){var n=Ha;return e.current.memoizedState.isDehydrated&&(Lr(e,t).flags|=256),e=Ko(e,t),e!==2&&(t=bt,bt=n,t!==null&&Bm(t)),e}function Bm(e){bt===null?bt=e:bt.push.apply(bt,e)}function eA(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!rn(a(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function er(e,t){for(t&=~Yg,t&=~vl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-tn(t),r=1<<n;e[n]=-1,t&=~r}}function N0(e){if(pe&6)throw Error(L(327));Oi();var t=Mo(e,0);if(!(t&1))return _t(e,Ge()),null;var n=Ko(e,t);if(e.tag!==0&&n===2){var r=hm(e);r!==0&&(t=r,n=$m(e,r))}if(n===1)throw n=ps,Lr(e,0),er(e,t),_t(e,Ge()),n;if(n===6)throw Error(L(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Nr(e,bt,_n),_t(e,Ge()),null}function Jg(e,t){var n=pe;pe|=1;try{return e(t)}finally{pe=n,pe===0&&(zi=Ge()+500,hl&&xr())}}function Gr(e){rr!==null&&rr.tag===0&&!(pe&6)&&Oi();var t=pe;pe|=1;var n=Ut.transition,r=xe;try{if(Ut.transition=null,xe=1,e)return e()}finally{xe=r,Ut.transition=n,pe=t,!(pe&6)&&xr()}}function Xg(){Et=Ci.current,Ce(Ci)}function Lr(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,MR(n)),We!==null)for(n=We.return;n!==null;){var r=n;switch(Rg(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Do();break;case 3:$i(),Ce(wt),Ce(ft),$g();break;case 5:Vg(r);break;case 4:$i();break;case 13:Ce(Ne);break;case 19:Ce(Ne);break;case 10:Og(r.type._context);break;case 22:case 23:Xg()}n=n.return}if(et=e,We=e=dr(e.current,null),rt=Et=t,Qe=0,ps=null,Yg=vl=Ur=0,bt=Ha=null,Ar!==null){for(t=0;t<Ar.length;t++)if(n=Ar[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,a=n.pending;if(a!==null){var s=a.next;a.next=i,r.next=s}n.pending=r}Ar=null}return e}function AE(e,t){do{var n=We;try{if(Dg(),vo.current=Uo,zo){for(var r=Pe.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}zo=!1}if(zr=0,Ze=Ye=Pe=null,Ua=!1,ds=0,Kg.current=null,n===null||n.return===null){Qe=1,ps=t,We=null;break}e:{var a=e,s=n.return,o=n,l=t;if(t=rt,o.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,c=o,f=c.tag;if(!(c.mode&1)&&(f===0||f===11||f===15)){var h=c.alternate;h?(c.updateQueue=h.updateQueue,c.memoizedState=h.memoizedState,c.lanes=h.lanes):(c.updateQueue=null,c.memoizedState=null)}var m=g0(s);if(m!==null){m.flags&=-257,v0(m,s,o,a,t),m.mode&1&&m0(a,u,t),t=m,l=u;var v=t.updateQueue;if(v===null){var p=new Set;p.add(l),t.updateQueue=p}else v.add(l);break e}else{if(!(t&1)){m0(a,u,t),Zg();break e}l=Error(L(426))}}else if(je&&o.mode&1){var x=g0(s);if(x!==null){!(x.flags&65536)&&(x.flags|=256),v0(x,s,o,a,t),Ag(Bi(l,o));break e}}a=l=Bi(l,o),Qe!==4&&(Qe=2),Ha===null?Ha=[a]:Ha.push(a),a=s;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t;var g=gE(a,l,t);u0(a,g);break e;case 1:o=l;var y=a.type,b=a.stateNode;if(!(a.flags&128)&&(typeof y.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(ur===null||!ur.has(b)))){a.flags|=65536,t&=-t,a.lanes|=t;var _=vE(a,o,t);u0(a,_);break e}}a=a.return}while(a!==null)}OE(n)}catch(C){t=C,We===n&&n!==null&&(We=n=n.return);continue}break}while(!0)}function IE(){var e=Go.current;return Go.current=Uo,e===null?Uo:e}function Zg(){(Qe===0||Qe===3||Qe===2)&&(Qe=4),et===null||!(Ur&268435455)&&!(vl&268435455)||er(et,rt)}function Ko(e,t){var n=pe;pe|=2;var r=IE();(et!==e||rt!==t)&&(_n=null,Lr(e,t));do try{tA();break}catch(i){AE(e,i)}while(!0);if(Dg(),pe=n,Go.current=r,We!==null)throw Error(L(261));return et=null,rt=0,Qe}function tA(){for(;We!==null;)DE(We)}function nA(){for(;We!==null&&!jP();)DE(We)}function DE(e){var t=qE(e.alternate,e,Et);e.memoizedProps=e.pendingProps,t===null?OE(e):We=t,Kg.current=null}function OE(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=YR(n,t),n!==null){n.flags&=32767,We=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Qe=6,We=null;return}}else if(n=KR(n,t,Et),n!==null){We=n;return}if(t=t.sibling,t!==null){We=t;return}We=t=e}while(t!==null);Qe===0&&(Qe=5)}function Nr(e,t,n){var r=xe,i=Ut.transition;try{Ut.transition=null,xe=1,rA(e,t,n,r)}finally{Ut.transition=i,xe=r}return null}function rA(e,t,n,r){do Oi();while(rr!==null);if(pe&6)throw Error(L(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(L(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(LP(e,a),e===et&&(We=et=null,rt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Zs||(Zs=!0,FE(No,function(){return Oi(),null})),a=(n.flags&15990)!==0,n.subtreeFlags&15990||a){a=Ut.transition,Ut.transition=null;var s=xe;xe=1;var o=pe;pe|=4,Kg.current=null,JR(e,n),ME(n,e),_R(bm),Po=!!ym,bm=ym=null,e.current=n,XR(n),TP(),pe=o,xe=s,Ut.transition=a}else e.current=n;if(Zs&&(Zs=!1,rr=e,Wo=i),a=e.pendingLanes,a===0&&(ur=null),PP(n.stateNode),_t(e,Ge()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Ho)throw Ho=!1,e=Fm,Fm=null,e;return Wo&1&&e.tag!==0&&Oi(),a=e.pendingLanes,a&1?e===Vm?Wa++:(Wa=0,Vm=e):Wa=0,xr(),null}function Oi(){if(rr!==null){var e=gC(Wo),t=Ut.transition,n=xe;try{if(Ut.transition=null,xe=16>e?16:e,rr===null)var r=!1;else{if(e=rr,rr=null,Wo=0,pe&6)throw Error(L(331));var i=pe;for(pe|=4,G=e.current;G!==null;){var a=G,s=a.child;if(G.flags&16){var o=a.deletions;if(o!==null){for(var l=0;l<o.length;l++){var u=o[l];for(G=u;G!==null;){var c=G;switch(c.tag){case 0:case 11:case 15:Ga(8,c,a)}var f=c.child;if(f!==null)f.return=c,G=f;else for(;G!==null;){c=G;var h=c.sibling,m=c.return;if(jE(c),c===u){G=null;break}if(h!==null){h.return=m,G=h;break}G=m}}}var v=a.alternate;if(v!==null){var p=v.child;if(p!==null){v.child=null;do{var x=p.sibling;p.sibling=null,p=x}while(p!==null)}}G=a}}if(a.subtreeFlags&2064&&s!==null)s.return=a,G=s;else e:for(;G!==null;){if(a=G,a.flags&2048)switch(a.tag){case 0:case 11:case 15:Ga(9,a,a.return)}var g=a.sibling;if(g!==null){g.return=a.return,G=g;break e}G=a.return}}var y=e.current;for(G=y;G!==null;){s=G;var b=s.child;if(s.subtreeFlags&2064&&b!==null)b.return=s,G=b;else e:for(s=y;G!==null;){if(o=G,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:gl(9,o)}}catch(C){qe(o,o.return,C)}if(o===s){G=null;break e}var _=o.sibling;if(_!==null){_.return=o.return,G=_;break e}G=o.return}}if(pe=i,xr(),pn&&typeof pn.onPostCommitFiberRoot=="function")try{pn.onPostCommitFiberRoot(ll,e)}catch{}r=!0}return r}finally{xe=n,Ut.transition=t}}return!1}function M0(e,t,n){t=Bi(n,t),t=gE(e,t,1),e=lr(e,t,1),t=mt(),e!==null&&(Ss(e,1,t),_t(e,t))}function qe(e,t,n){if(e.tag===3)M0(e,e,n);else for(;t!==null;){if(t.tag===3){M0(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ur===null||!ur.has(r))){e=Bi(n,e),e=vE(t,e,1),t=lr(t,e,1),e=mt(),t!==null&&(Ss(t,1,e),_t(t,e));break}}t=t.return}}function iA(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=mt(),e.pingedLanes|=e.suspendedLanes&n,et===e&&(rt&n)===n&&(Qe===4||Qe===3&&(rt&130023424)===rt&&500>Ge()-Qg?Lr(e,0):Yg|=n),_t(e,t)}function LE(e,t){t===0&&(e.mode&1?(t=zs,zs<<=1,!(zs&130023424)&&(zs=4194304)):t=1);var n=mt();e=Dn(e,t),e!==null&&(Ss(e,t,n),_t(e,n))}function aA(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),LE(e,n)}function sA(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(L(314))}r!==null&&r.delete(t),LE(e,n)}var qE;qE=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||wt.current)xt=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return xt=!1,WR(e,t,n);xt=!!(e.flags&131072)}else xt=!1,je&&t.flags&1048576&&BC(t,qo,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;bo(e,t),e=t.pendingProps;var i=qi(t,ft.current);Di(t,n),i=zg(null,t,r,e,i,n);var a=Ug();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,St(r)?(a=!0,Oo(t)):a=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,qg(t),i.updater=ml,t.stateNode=i,i._reactInternals=t,Tm(t,r,e,n),t=Pm(null,t,r,!0,a,n)):(t.tag=0,je&&a&&Pg(t),pt(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(bo(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=lA(r),e=Xt(r,e),i){case 0:t=Mm(null,t,r,e,n);break e;case 1:t=x0(null,t,r,e,n);break e;case 11:t=y0(null,t,r,e,n);break e;case 14:t=b0(null,t,r,Xt(r.type,e),n);break e}throw Error(L(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Xt(r,i),Mm(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Xt(r,i),x0(e,t,r,i,n);case 3:e:{if(wE(t),e===null)throw Error(L(387));r=t.pendingProps,a=t.memoizedState,i=a.element,KC(e,t),$o(t,r,null,n);var s=t.memoizedState;if(r=s.element,a.isDehydrated)if(a={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=a,t.memoizedState=a,t.flags&256){i=Bi(Error(L(423)),t),t=w0(e,t,r,n,i);break e}else if(r!==i){i=Bi(Error(L(424)),t),t=w0(e,t,r,n,i);break e}else for(Nt=or(t.stateNode.containerInfo.firstChild),Mt=t,je=!0,en=null,n=HC(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Fi(),r===i){t=On(e,t,n);break e}pt(e,t,r,n)}t=t.child}return t;case 5:return YC(t),e===null&&Cm(t),r=t.type,i=t.pendingProps,a=e!==null?e.memoizedProps:null,s=i.children,xm(r,i)?s=null:a!==null&&xm(r,a)&&(t.flags|=32),xE(e,t),pt(e,t,s,n),t.child;case 6:return e===null&&Cm(t),null;case 13:return SE(e,t,n);case 4:return Fg(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Vi(t,null,r,n):pt(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Xt(r,i),y0(e,t,r,i,n);case 7:return pt(e,t,t.pendingProps,n),t.child;case 8:return pt(e,t,t.pendingProps.children,n),t.child;case 12:return pt(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,a=t.memoizedProps,s=i.value,Se(Fo,r._currentValue),r._currentValue=s,a!==null)if(rn(a.value,s)){if(a.children===i.children&&!wt.current){t=On(e,t,n);break e}}else for(a=t.child,a!==null&&(a.return=t);a!==null;){var o=a.dependencies;if(o!==null){s=a.child;for(var l=o.firstContext;l!==null;){if(l.context===r){if(a.tag===1){l=Mn(-1,n&-n),l.tag=2;var u=a.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}a.lanes|=n,l=a.alternate,l!==null&&(l.lanes|=n),Em(a.return,n,t),o.lanes|=n;break}l=l.next}}else if(a.tag===10)s=a.type===t.type?null:a.child;else if(a.tag===18){if(s=a.return,s===null)throw Error(L(341));s.lanes|=n,o=s.alternate,o!==null&&(o.lanes|=n),Em(s,n,t),s=a.sibling}else s=a.child;if(s!==null)s.return=a;else for(s=a;s!==null;){if(s===t){s=null;break}if(a=s.sibling,a!==null){a.return=s.return,s=a;break}s=s.return}a=s}pt(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Di(t,n),i=Gt(i),r=r(i),t.flags|=1,pt(e,t,r,n),t.child;case 14:return r=t.type,i=Xt(r,t.pendingProps),i=Xt(r.type,i),b0(e,t,r,i,n);case 15:return yE(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Xt(r,i),bo(e,t),t.tag=1,St(r)?(e=!0,Oo(t)):e=!1,Di(t,n),mE(t,r,i),Tm(t,r,i,n),Pm(null,t,r,!0,e,n);case 19:return _E(e,t,n);case 22:return bE(e,t,n)}throw Error(L(156,t.tag))};function FE(e,t){return fC(e,t)}function oA(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function zt(e,t,n,r){return new oA(e,t,n,r)}function ev(e){return e=e.prototype,!(!e||!e.isReactComponent)}function lA(e){if(typeof e=="function")return ev(e)?1:0;if(e!=null){if(e=e.$$typeof,e===bg)return 11;if(e===xg)return 14}return 2}function dr(e,t){var n=e.alternate;return n===null?(n=zt(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function So(e,t,n,r,i,a){var s=2;if(r=e,typeof e=="function")ev(e)&&(s=1);else if(typeof e=="string")s=5;else e:switch(e){case mi:return qr(n.children,i,a,t);case yg:s=8,i|=8;break;case Xp:return e=zt(12,n,t,i|2),e.elementType=Xp,e.lanes=a,e;case Zp:return e=zt(13,n,t,i),e.elementType=Zp,e.lanes=a,e;case em:return e=zt(19,n,t,i),e.elementType=em,e.lanes=a,e;case Yk:return yl(n,i,a,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Wk:s=10;break e;case Kk:s=9;break e;case bg:s=11;break e;case xg:s=14;break e;case Jn:s=16,r=null;break e}throw Error(L(130,e==null?e:typeof e,""))}return t=zt(s,n,t,i),t.elementType=e,t.type=r,t.lanes=a,t}function qr(e,t,n,r){return e=zt(7,e,r,t),e.lanes=n,e}function yl(e,t,n,r){return e=zt(22,e,r,t),e.elementType=Yk,e.lanes=n,e.stateNode={isHidden:!1},e}function Au(e,t,n){return e=zt(6,e,null,t),e.lanes=n,e}function Iu(e,t,n){return t=zt(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function uA(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=pu(0),this.expirationTimes=pu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=pu(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function tv(e,t,n,r,i,a,s,o,l){return e=new uA(e,t,n,o,l),t===1?(t=1,a===!0&&(t|=8)):t=0,a=zt(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},qg(a),e}function cA(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:pi,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function VE(e){if(!e)return pr;e=e._reactInternals;e:{if(Wr(e)!==e||e.tag!==1)throw Error(L(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(St(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(L(171))}if(e.tag===1){var n=e.type;if(St(n))return VC(e,n,t)}return t}function $E(e,t,n,r,i,a,s,o,l){return e=tv(n,r,!0,e,i,a,s,o,l),e.context=VE(null),n=e.current,r=mt(),i=cr(n),a=Mn(r,i),a.callback=t??null,lr(n,a,i),e.current.lanes=i,Ss(e,i,r),_t(e,r),e}function bl(e,t,n,r){var i=t.current,a=mt(),s=cr(i);return n=VE(n),t.context===null?t.context=n:t.pendingContext=n,t=Mn(a,s),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=lr(i,t,s),e!==null&&(nn(e,i,s,a),go(e,i,s)),s}function Yo(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function P0(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function nv(e,t){P0(e,t),(e=e.alternate)&&P0(e,t)}function dA(){return null}var BE=typeof reportError=="function"?reportError:function(e){console.error(e)};function rv(e){this._internalRoot=e}xl.prototype.render=rv.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(L(409));bl(e,t,null,null)};xl.prototype.unmount=rv.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Gr(function(){bl(null,e,null,null)}),t[In]=null}};function xl(e){this._internalRoot=e}xl.prototype.unstable_scheduleHydration=function(e){if(e){var t=bC();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Zn.length&&t!==0&&t<Zn[n].priority;n++);Zn.splice(n,0,e),n===0&&wC(e)}};function iv(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function wl(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function R0(){}function fA(e,t,n,r,i){if(i){if(typeof r=="function"){var a=r;r=function(){var u=Yo(s);a.call(u)}}var s=$E(t,r,e,0,null,!1,!1,"",R0);return e._reactRootContainer=s,e[In]=s.current,ss(e.nodeType===8?e.parentNode:e),Gr(),s}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var o=r;r=function(){var u=Yo(l);o.call(u)}}var l=tv(e,0,!1,null,null,!1,!1,"",R0);return e._reactRootContainer=l,e[In]=l.current,ss(e.nodeType===8?e.parentNode:e),Gr(function(){bl(t,l,n,r)}),l}function Sl(e,t,n,r,i){var a=n._reactRootContainer;if(a){var s=a;if(typeof i=="function"){var o=i;i=function(){var l=Yo(s);o.call(l)}}bl(t,s,e,i)}else s=fA(n,t,e,i,r);return Yo(s)}vC=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Ta(t.pendingLanes);n!==0&&(_g(t,n|1),_t(t,Ge()),!(pe&6)&&(zi=Ge()+500,xr()))}break;case 13:Gr(function(){var r=Dn(e,1);if(r!==null){var i=mt();nn(r,e,1,i)}}),nv(e,1)}};kg=function(e){if(e.tag===13){var t=Dn(e,134217728);if(t!==null){var n=mt();nn(t,e,134217728,n)}nv(e,134217728)}};yC=function(e){if(e.tag===13){var t=cr(e),n=Dn(e,t);if(n!==null){var r=mt();nn(n,e,t,r)}nv(e,t)}};bC=function(){return xe};xC=function(e,t){var n=xe;try{return xe=e,t()}finally{xe=n}};cm=function(e,t,n){switch(t){case"input":if(rm(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=fl(r);if(!i)throw Error(L(90));Jk(r),rm(r,i)}}}break;case"textarea":Zk(e,n);break;case"select":t=n.value,t!=null&&Pi(e,!!n.multiple,t,!1)}};sC=Jg;oC=Gr;var hA={usingClientEntryPoint:!1,Events:[ks,bi,fl,iC,aC,Jg]},wa={findFiberByHostInstance:Rr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},pA={bundleType:wa.bundleType,version:wa.version,rendererPackageName:wa.rendererPackageName,rendererConfig:wa.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Fn.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=cC(e),e===null?null:e.stateNode},findFiberByHostInstance:wa.findFiberByHostInstance||dA,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var eo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!eo.isDisabled&&eo.supportsFiber)try{ll=eo.inject(pA),pn=eo}catch{}}It.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=hA;It.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!iv(t))throw Error(L(200));return cA(e,t,null,n)};It.createRoot=function(e,t){if(!iv(e))throw Error(L(299));var n=!1,r="",i=BE;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=tv(e,1,!1,null,null,n,!1,r,i),e[In]=t.current,ss(e.nodeType===8?e.parentNode:e),new rv(t)};It.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(L(188)):(e=Object.keys(e).join(","),Error(L(268,e)));return e=cC(t),e=e===null?null:e.stateNode,e};It.flushSync=function(e){return Gr(e)};It.hydrate=function(e,t,n){if(!wl(t))throw Error(L(200));return Sl(null,e,t,!0,n)};It.hydrateRoot=function(e,t,n){if(!iv(e))throw Error(L(405));var r=n!=null&&n.hydratedSources||null,i=!1,a="",s=BE;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(a=n.identifierPrefix),n.onRecoverableError!==void 0&&(s=n.onRecoverableError)),t=$E(t,null,e,1,n??null,i,!1,a,s),e[In]=t.current,ss(e),r)for(e=0;e<r.length;e++)n=r[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new xl(t)};It.render=function(e,t,n){if(!wl(t))throw Error(L(200));return Sl(null,e,t,!1,n)};It.unmountComponentAtNode=function(e){if(!wl(e))throw Error(L(40));return e._reactRootContainer?(Gr(function(){Sl(null,null,e,!1,function(){e._reactRootContainer=null,e[In]=null})}),!0):!1};It.unstable_batchedUpdates=Jg;It.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!wl(n))throw Error(L(200));if(e==null||e._reactInternals===void 0)throw Error(L(38));return Sl(e,t,n,!1,r)};It.version="18.3.1-next-f1338f8080-20240426";function zE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(zE)}catch(e){console.error(e)}}zE(),zk.exports=It;var mA=zk.exports,A0=mA;Qp.createRoot=A0.createRoot,Qp.hydrateRoot=A0.hydrateRoot;const gA="modulepreload",vA=function(e){return"/agent-director/"+e},I0={},av=function(t,n,r){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),o=(s==null?void 0:s.nonce)||(s==null?void 0:s.getAttribute("nonce"));i=Promise.allSettled(n.map(l=>{if(l=vA(l),l in I0)return;I0[l]=!0;const u=l.endsWith(".css"),c=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${c}`))return;const f=document.createElement("link");if(f.rel=u?"stylesheet":gA,u||(f.as="script"),f.crossOrigin="",f.href=l,o&&f.setAttribute("nonce",o),document.head.appendChild(f),u)return new Promise((h,m)=>{f.addEventListener("load",h),f.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${l}`)))})}))}function a(s){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s}return i.then(s=>{for(const o of s||[])o.status==="rejected"&&a(o.reason);return t().catch(a)})},yA=()=>d.jsxs("svg",{className:"logo-mark",width:"54",height:"54",viewBox:"0 0 120 120",role:"img","aria-label":"Agent Director logo",children:[d.jsx("rect",{x:"8",y:"8",width:"104",height:"104",rx:"18",className:"logo-frame"}),d.jsx("rect",{x:"24",y:"28",width:"72",height:"16",rx:"6",className:"logo-bar logo-bar-a"}),d.jsx("rect",{x:"24",y:"52",width:"72",height:"16",rx:"6",className:"logo-bar logo-bar-b"}),d.jsx("rect",{x:"24",y:"76",width:"72",height:"16",rx:"6",className:"logo-bar logo-bar-c"}),d.jsx("circle",{cx:"96",cy:"36",r:"6",className:"logo-node logo-node-a"}),d.jsx("circle",{cx:"96",cy:"60",r:"6",className:"logo-node logo-node-b"}),d.jsx("circle",{cx:"96",cy:"84",r:"6",className:"logo-node logo-node-c"})]});function bA({trace:e,traces:t=[],selectedTraceId:n,onSelectTrace:r,onReload:i,onStartTour:a,onToggleStory:s,onOpenPalette:o,onToggleExplain:l,onShareSession:u,onThemeChange:c,themeMode:f="studio",activeSessions:h=1,shareStatus:m=null,explainMode:v=!1,storyActive:p=!1}){return d.jsxs("header",{className:"header","data-help":!0,"data-help-indicator":!0,"data-tour":"header","data-help-title":"Mission control","data-help-body":"Trace identity, status, and live controls live here. Use Story, Guide, or Explain to orient new viewers.","data-help-placement":"bottom",children:[d.jsxs("div",{className:"header-title",children:[d.jsxs("div",{className:"header-logo",children:[d.jsx(yA,{}),d.jsx("span",{children:"Agent Director"})]}),d.jsx("div",{className:"header-tagline",children:"Cinematic trace intelligence for agent runs."}),d.jsxs("div",{className:"header-meta",children:[d.jsxs("span",{className:"header-run",children:["Run: ",(e==null?void 0:e.id)??"loading"]}),t.length>0?d.jsx("select",{className:"trace-select",value:n??(e==null?void 0:e.id)??"","aria-label":"Select trace",onChange:x=>r==null?void 0:r(x.target.value),"data-help":!0,"data-help-title":"Trace selector","data-help-body":"Switch between available runs to compare different sessions.","data-help-placement":"bottom",children:t.map(x=>d.jsxs("option",{value:x.id,children:[x.name," (",x.id,")"]},x.id))}):null,d.jsx("span",{className:`status-pill status-${(e==null?void 0:e.status)??"loading"}`,children:(e==null?void 0:e.status)??"loading"}),e!=null&&e.replay?d.jsxs("span",{className:"header-replay",title:`Replay from ${e.branchPointStepId??"unknown step"}`,children:["Replay: ",e.replay.strategy]}):null,d.jsxs("span",{className:"header-wall",children:["Wall: ",(e==null?void 0:e.metadata.wallTimeMs)??0,"ms"]}),d.jsxs("span",{className:"header-presence","aria-label":"Active sessions",children:["Live: ",h]}),m?d.jsx("span",{className:"header-share-status",children:m}):null]})]}),d.jsxs("div",{className:"header-actions",children:[d.jsxs("label",{className:"theme-picker",children:["Theme",d.jsxs("select",{className:"trace-select",value:f,"aria-label":"Select theme",onChange:x=>c==null?void 0:c(x.target.value),children:[d.jsx("option",{value:"studio",children:"Studio"}),d.jsx("option",{value:"focus",children:"Focus"}),d.jsx("option",{value:"contrast",children:"Contrast"})]})]}),d.jsx("button",{className:`ghost-button ${p?"active":""}`,type:"button",onClick:s,"aria-pressed":p,"aria-label":"Toggle story mode","data-help":!0,"data-help-title":"Story mode","data-help-body":"Auto-runs a cinematic walkthrough for demos.","data-help-placement":"bottom",children:"Story"}),d.jsx("button",{className:"ghost-button",type:"button",onClick:a,"aria-label":"Start guided tour","data-help":!0,"data-help-title":"Guided tour","data-help-body":"Walk through the interface step by step.","data-help-placement":"bottom",children:"Guide"}),d.jsx("button",{className:"ghost-button",type:"button",onClick:o,"aria-label":"Open command palette","data-help":!0,"data-help-title":"Command palette","data-help-body":"Search and trigger any action instantly.","data-help-placement":"bottom",children:"Command"}),d.jsx("button",{className:`ghost-button ${v?"active":""}`,type:"button",onClick:l,"aria-pressed":v,"aria-label":"Toggle explain mode","data-help":!0,"data-help-title":"Explain mode","data-help-body":"Hover any control to see contextual guidance.","data-help-placement":"bottom",children:"Explain"}),d.jsx("button",{className:"ghost-button",onClick:i,type:"button","aria-label":"Refresh traces",title:"Refresh traces","data-help":!0,"data-help-title":"Refresh","data-help-body":"Reload traces from the data store.","data-help-placement":"bottom",children:"Refresh"}),d.jsx("button",{className:"ghost-button",type:"button",onClick:u,"aria-label":"Copy live session link",title:"Copy live session link",children:"Share"}),d.jsx("a",{className:"ghost-button",href:"/help.html",target:"_blank",rel:"noreferrer","data-help":!0,"data-help-title":"Help","data-help-body":"Open quick docs for first run, key flows, troubleshooting, and shortcuts.","data-help-placement":"bottom",children:"Help"}),null]})]})}function xA({insights:e,investigation:t,onSelectStep:n,onJumpToBottleneck:r,onJumpToError:i}){var h,m,v,p,x;if(!e)return null;const a=e.timing,s=e.ioWarnings??[],o=e.concurrency,l=e.retryPatterns,u=e.costByTool??{},c=e.costByModel??{},f=((h=t==null?void 0:t.hypotheses)==null?void 0:h.slice(0,2))??[];return d.jsxs("section",{className:"insight-strip","data-help":!0,"data-help-indicator":!0,"data-tour":"insights","data-help-title":"Run insights","data-help-body":"Fast diagnostics for latency, cost, errors, and concurrency. Click chips to jump into the trace.","data-help-placement":"bottom",children:[d.jsxs("div",{className:"insight-block","data-help":!0,"data-help-title":"Top latency","data-help-body":"Largest steps by duration; jump straight to the slowest.","data-help-placement":"bottom",children:[d.jsx("span",{className:"insight-label",children:"Top latency"}),d.jsxs("div",{className:"insight-items",children:[e.topLatencySteps.map(g=>d.jsxs("button",{className:"insight-chip",type:"button",title:`Jump to ${g.name}`,onClick:()=>n==null?void 0:n(g.stepId),children:[g.name," (",g.durationMs,"ms)"]},g.stepId)),e.topLatencySteps.length>0?d.jsx("button",{className:"insight-chip",type:"button",onClick:r,title:"Jump to longest step",children:"Jump to bottleneck"}):null]})]}),d.jsxs("div",{className:"insight-block","data-help":!0,"data-help-title":"Cost by type","data-help-body":"Aggregated spend by step class.","data-help-placement":"bottom",children:[d.jsx("span",{className:"insight-label",children:"Cost by type"}),d.jsx("div",{className:"insight-items",children:Object.entries(e.costByType).map(([g,y])=>d.jsxs("span",{className:"insight-chip",title:`Total cost for ${g}`,children:[g,": $",y.toFixed(3)]},g))})]}),Object.keys(u).length?d.jsxs("div",{className:"insight-block","data-help":!0,"data-help-title":"Cost by tool","data-help-body":"Top tools by total spend.","data-help-placement":"bottom",children:[d.jsx("span",{className:"insight-label",children:"Cost by tool"}),d.jsx("div",{className:"insight-items",children:Object.entries(u).sort((g,y)=>y[1]-g[1]).slice(0,3).map(([g,y])=>d.jsxs("span",{className:"insight-chip",title:`Total cost for ${g}`,children:[g,": $",y.toFixed(3)]},g))})]}):null,d.jsxs("div",{className:"insight-block","data-help":!0,"data-help-title":"Errors & retries","data-help-body":"Instant visibility into failed or retried steps.","data-help-placement":"bottom",children:[d.jsx("span",{className:"insight-label",children:"Errors / retries"}),d.jsxs("div",{className:"insight-items",children:[d.jsxs("span",{className:"insight-chip",children:["Errors: ",e.errors]}),d.jsxs("span",{className:"insight-chip",children:["Retries: ",e.retries]}),e.errors>0?d.jsx("button",{className:"insight-chip",type:"button",onClick:i,title:"Jump to first error",children:"Jump to first error"}):null,(m=l==null?void 0:l.topRetries)!=null&&m.length?d.jsxs("span",{className:"insight-chip",title:`Retry rate ${(l.retryRate*100).toFixed(1)}%`,children:["Top retries: ",l.topRetries.length]}):null]})]}),d.jsxs("div",{className:"insight-block","data-help":!0,"data-help-title":"Wall vs work","data-help-body":"Wall time vs summed work to show parallelism.","data-help-placement":"bottom",children:[d.jsx("span",{className:"insight-label",children:"Wall vs work"}),d.jsxs("div",{className:"insight-items",children:[d.jsxs("span",{className:"insight-chip",title:"Wall clock duration",children:["Wall: ",e.wallTimeMs,"ms"]}),d.jsxs("span",{className:"insight-chip",title:"Sum of step durations",children:["Work: ",e.workTimeMs,"ms"]}),e.criticalPathMs!=null?d.jsxs("span",{className:"insight-chip",title:"Longest parent-child chain",children:["Critical: ",e.criticalPathMs,"ms"]}):null]})]}),d.jsxs("div",{className:"insight-block","data-help":!0,"data-help-title":"Health","data-help-body":"Timing and I/O anomalies detected in the trace.","data-help-placement":"bottom",children:[d.jsx("span",{className:"insight-label",children:"Health"}),d.jsxs("div",{className:"insight-items",children:[a!=null&&a.degraded?d.jsx("span",{className:"insight-chip insight-warning",title:a.issues.join(" "),children:"Timing degraded"}):d.jsx("span",{className:"insight-chip",children:"Timing OK"}),s.length>0?d.jsxs("span",{className:"insight-chip insight-warning",title:s.map(g=>g.message).join(" "),children:["IO warnings: ",s.length]}):d.jsx("span",{className:"insight-chip",children:"IO OK"})]})]}),f.length?d.jsxs("div",{className:"insight-block","data-help":!0,"data-help-title":"Investigator","data-help-body":"Automated root-cause hypotheses ranked by severity and confidence.","data-help-placement":"bottom",children:[d.jsx("span",{className:"insight-label",children:"Investigator"}),d.jsxs("div",{className:"insight-items",children:[f.map(g=>d.jsxs("span",{className:"insight-chip",title:g.summary,children:[g.title," (",Math.round(g.confidence*100),"%)"]},g.id)),(p=(v=f[0])==null?void 0:v.evidenceStepIds)!=null&&p[0]?d.jsx("button",{className:"insight-chip",type:"button",onClick:()=>n==null?void 0:n(f[0].evidenceStepIds[0]),children:"Jump to evidence"}):null]})]}):null,(x=o==null?void 0:o.buckets)!=null&&x.length?d.jsxs("div",{className:"insight-block","data-help":!0,"data-help-title":"Parallelism","data-help-body":"How many steps ran concurrently over time.","data-help-placement":"bottom",children:[d.jsx("span",{className:"insight-label",children:"Parallelism"}),d.jsx("div",{className:"insight-items",children:d.jsx("div",{className:"insight-heatmap",title:`Peak concurrency: ${o.peak}`,children:o.buckets.map((g,y)=>d.jsx("span",{className:"heatmap-bar",style:{height:`${Math.max(20,g.active/Math.max(1,o.peak)*48)}px`},title:`Bucket ${y+1}: ${g.active} active`},`${g.startMs}-${g.endMs}`))})})]}):null,Object.keys(c).length?d.jsxs("div",{className:"insight-block","data-help":!0,"data-help-title":"Model cost","data-help-body":"Spend by model family.","data-help-placement":"bottom",children:[d.jsx("span",{className:"insight-label",children:"Model cost"}),d.jsx("div",{className:"insight-items",children:Object.entries(c).map(([g,y])=>d.jsxs("span",{className:"insight-chip",title:`Total cost for ${g}`,children:[g,": $",y.toFixed(3)]},g))})]}):null]})}const wA=["all","llm_call","tool_call","decision","handoff","guardrail"];function SA({query:e,typeFilter:t,onQueryChange:n,onTypeFilterChange:r}){return d.jsxs("div",{className:"search-bar",children:[d.jsx("input",{className:"search-input",placeholder:"Search steps, tools, previews...","aria-label":"Search steps",value:e,onChange:i=>n(i.target.value),"data-help":!0,"data-help-title":"Search","data-help-body":"Filter steps by name, tool, or payload preview. Great for fast recall.","data-help-placement":"bottom"}),d.jsx("select",{className:"search-select",value:t,"aria-label":"Filter by step type",onChange:i=>r(i.target.value),"data-help":!0,"data-help-title":"Type filter","data-help-body":"Narrow the timeline to a specific class of steps (LLM, tool, decision, handoff).","data-help-placement":"bottom",children:wA.map(i=>d.jsx("option",{value:i,children:i},i))})]})}function _l(e,t,n){const r=Date.parse(e),i=n.map(c=>Date.parse(c.endedAt??c.startedAt)).filter(c=>Number.isFinite(c)),a=t?Date.parse(t):i.length?Math.max(...i):r,s=Math.max(1,a-r),o=n.map(c=>{const f=Math.max(0,Date.parse(c.startedAt)-r),h=Math.max(f,Date.parse(c.endedAt??c.startedAt)-r);return{stepId:c.id,startMs:f,endMs:h}}).sort((c,f)=>c.startMs-f.startMs||c.endMs-f.endMs),l=[],u=[];for(const c of o){let f=l.findIndex(h=>h<=c.startMs);f===-1?(f=l.length,l.push(c.endMs)):l[f]=c.endMs,u.push({stepId:c.stepId,startMs:c.startMs,endMs:c.endMs,lane:f,xPct:c.startMs/s*100,wPct:Math.max(.75,(c.endMs-c.startMs)/s*100)})}return{wallTimeMs:s,intervals:u,laneCount:l.length}}function _A(e){var v;const n=e.steps.map(p=>({stepId:p.id,name:p.name,durationMs:p.durationMs??0})).sort((p,x)=>x.durationMs-p.durationMs).slice(0,3),r={},i={};for(const p of e.steps)((v=p.metrics)==null?void 0:v.costUsd)!=null&&(r[p.type]=(r[p.type]??0)+p.metrics.costUsd,p.type==="tool_call"&&(i[p.name]=(i[p.name]??0)+p.metrics.costUsd));const a=e.steps.filter(p=>p.status==="failed").length,s=e.steps.filter(p=>!!p.retryOfStepId).length,o=e.metadata.wallTimeMs,l=e.metadata.workTimeMs??e.steps.reduce((p,x)=>p+(x.durationMs??0),0),u=CA(e),c=EA(e.steps),f=jA(e.steps),h=TA(e),m=NA(e.steps);return{topLatencySteps:n,costByType:r,costByTool:i,costByModel:{[e.metadata.modelId]:e.metadata.totalCostUsd??0},errors:a,retries:s,wallTimeMs:o,workTimeMs:l,timing:u,ioWarnings:c,criticalPathMs:f,concurrency:h,retryPatterns:m}}function kA(e){var n;const t=(n=e.metrics)==null?void 0:n.costUsd;return t==null?null:`$${t.toFixed(3)}`}function Cn(e){if(!e)return null;const t=Date.parse(e);return Number.isNaN(t)?null:t}function CA(e){const t=Cn(e.startedAt),n=Cn(e.endedAt??void 0),r=[],i=[],a=[];return t==null&&a.push("Trace start time missing or invalid."),e.steps.forEach(s=>{const o=Cn(s.startedAt),l=Cn(s.endedAt??s.startedAt);if(o==null||l==null){r.push(s.id);return}if(l<o){i.push(s.id);return}t!=null&&o<t&&i.push(s.id),n!=null&&l>n&&i.push(s.id)}),r.length&&a.push(`Missing timestamps on ${r.length} steps.`),i.length&&a.push(`Timestamp skew detected on ${i.length} steps.`),{degraded:!!(r.length||i.length||t==null),issues:a,missingStepIds:r,skewedStepIds:i}}function EA(e){const t=new Map;e.forEach(a=>{a.type==="tool_call"&&a.toolCallId&&t.set(a.toolCallId,a)});const n=new Set,r=new Set,i=[];return e.forEach(a=>{a.type!=="llm_call"||!a.io||((a.io.emittedToolCallIds??[]).forEach(s=>{n.add(s),t.has(s)||i.push({kind:"missing_tool_step",message:`Emitted toolCallId ${s} has no tool step.`,stepId:a.id,toolCallId:s})}),(a.io.consumedToolCallIds??[]).forEach(s=>{r.add(s),t.has(s)||i.push({kind:"missing_tool_step",message:`Consumed toolCallId ${s} has no tool step.`,stepId:a.id,toolCallId:s}),n.has(s)||i.push({kind:"consume_without_emit",message:`Consumed toolCallId ${s} without emission.`,stepId:a.id,toolCallId:s})}))}),t.forEach((a,s)=>{n.has(s)||i.push({kind:"unemitted_tool",message:`Tool step ${a.id} has toolCallId ${s} never emitted.`,stepId:a.id,toolCallId:s}),r.has(s)||i.push({kind:"unconsumed_tool",message:`Tool step ${a.id} has toolCallId ${s} never consumed.`,stepId:a.id,toolCallId:s})}),i}function jA(e){const t=new Map,n=new Map,r=[];e.forEach(s=>{if(t.set(s.id,s.durationMs??0),s.parentStepId){const o=n.get(s.parentStepId)??[];o.push(s.id),n.set(s.parentStepId,o)}else r.push(s.id)});const i=new Map,a=s=>{if(i.has(s))return i.get(s)??0;const l=(n.get(s)??[]).reduce((c,f)=>Math.max(c,a(f)),0),u=(t.get(s)??0)+l;return i.set(s,u),u};return r.length?Math.max(...r.map(s=>a(s))):0}function TA(e){const t=Cn(e.startedAt);if(t==null)return{buckets:[],peak:0};const n=Cn(e.endedAt??void 0)??Math.max(...e.steps.map(l=>Cn(l.endedAt??l.startedAt)??t),t),r=Math.max(1,n-t),i=12,a=Math.max(1,Math.floor(r/i)),s=[];let o=0;for(let l=0;l<i;l+=1){const u=t+l*a,c=u+a;let f=0;e.steps.forEach(h=>{const m=Cn(h.startedAt),v=Cn(h.endedAt??h.startedAt);m==null||v==null||v>=u&&m<=c&&(f+=1)}),o=Math.max(o,f),s.push({startMs:l*a,endMs:(l+1)*a,active:f})}return{buckets:s,peak:o}}function NA(e){const t={};e.forEach(i=>{i.retryOfStepId&&(t[i.retryOfStepId]=(t[i.retryOfStepId]??0)+1)});const n=Object.values(t).reduce((i,a)=>i+a,0),r=Object.entries(t).sort((i,a)=>a[1]-i[1]).slice(0,3);return{totalRetries:n,retryRate:e.length?n/e.length:0,topRetries:r.map(([i,a])=>({stepId:i,count:a}))}}const MA={llm_call:{label:"LLM",icon:"LLM",description:"Model call"},tool_call:{label:"TOOL",icon:"TOOL",description:"Tool call"},decision:{label:"DEC",icon:"DEC",description:"Decision"},handoff:{label:"HAND",icon:"HAND",description:"Handoff"},guardrail:{label:"GUARD",icon:"GUARD",description:"Guardrail"}};function PA(e){return MA[e]}function RA({type:e,size:t="sm",showLabel:n=!1}){const r=PA(e);return d.jsxs("span",{className:`step-badge step-badge-${e} step-badge-${t}`,title:r.description,children:[d.jsx("span",{className:"step-badge-icon",children:r.icon}),n?d.jsx("span",{className:"step-badge-label",children:r.label}):null]})}function UE({step:e,interval:t,playbackState:n,selected:r,onSelect:i,variant:a="base",diffStatus:s,disabled:o=!1,laneHeight:l=140}){var _,C,E,j,T,P;const u=kA(e),c=((_=e.preview)==null?void 0:_.subtitle)??((C=e.preview)==null?void 0:C.title)??"",f=((E=e.preview)==null?void 0:E.outputPreview)??((j=e.preview)==null?void 0:j.inputPreview)??"",h=s?`step-diff-${s}`:"",m=a==="ghost"?"step-ghost":"",v=t.wPct<8?"step-compact":"",p=e.type.replace("_"," ").toUpperCase(),x=((T=e.metrics)==null?void 0:T.tokensTotal)!=null?`${e.metrics.tokensTotal} tokens`:null,g=e.durationMs!=null?`${e.durationMs}ms`:null,y=[x,g,u].filter(Boolean).join("  "),b=`Click to inspect inputs/outputs and replay from this moment.${y?` ${y}.`:""}`;return d.jsxs("button",{type:"button",className:`step-card step-${e.type} step-${n} ${r?"step-selected":""} ${h} ${m} ${v}`,"data-step-id":e.id,"aria-pressed":r,"aria-hidden":a==="ghost",disabled:o,"data-help":!0,"data-help-title":`${e.name}  ${p}`,"data-help-body":b,"data-help-placement":"top",style:{left:`${t.xPct}%`,width:`${t.wPct}%`,top:`${t.lane*l}px`},onClick:()=>{o||i(e.id)},children:[d.jsxs("div",{className:"step-card-header",children:[d.jsxs("div",{className:"step-title-group",children:[d.jsx(RA,{type:e.type}),d.jsx("span",{className:"step-title",children:e.name})]}),d.jsx("span",{className:`status-pill status-${e.status}`,children:e.status})]}),c?d.jsx("div",{className:"step-subtitle",children:c}):null,d.jsxs("div",{className:"step-metrics",children:[((P=e.metrics)==null?void 0:P.tokensTotal)!=null?d.jsxs("span",{children:[e.metrics.tokensTotal," tok"]}):null,e.durationMs!=null?d.jsxs("span",{children:[e.durationMs,"ms"]}):null,u?d.jsx("span",{children:u}):null]}),f?d.jsx("div",{className:"step-preview",children:f}):null]})}function GE(e,t){return t<e.startMs?"future":t>e.endMs?"past":"active"}const Sa={type:{order:[],hidden:[]},status:{order:[],hidden:[]},parent:{order:[],hidden:[]}};function sv(e,t){return t==="type"?e.type:t==="status"?e.status:e.parentStepId??"root"}function AA(e,t){const n=new Set;return e.forEach(r=>n.add(sv(r,t))),Array.from(n).sort((r,i)=>r.localeCompare(i))}function D0(e,t,n){const r=new Set(e),i=[...t.filter(s=>r.has(s))];e.forEach(s=>{i.includes(s)||i.push(s)});const a=Array.from(new Set(n.filter(s=>r.has(s))));return{order:i,hidden:a}}const IA=140,DA=132,OA=96,O0={llm_call:1,tool_call:2,decision:3,handoff:4,guardrail:5};function HE(e){return[...e].sort((t,n)=>(O0[t.type]??9)-(O0[n.type]??9))}function LA(e,t,n,r,i){const a=new Map;t.forEach(h=>{var v;const m=sv(h,n);a.has(m)||a.set(m,[]),(v=a.get(m))==null||v.push(h)});const s=Array.from(a.keys()),o=[...r.filter(h=>s.includes(h))];s.forEach(h=>{o.includes(h)||o.push(h)});const l=o.filter(h=>!i.includes(h)),u=new Map;let c=0,f=0;return l.forEach(h=>{const m=a.get(h)??[],v=_l(e.startedAt,e.endedAt,m);v.intervals.forEach(p=>{u.set(p.stepId,{...p,lane:p.lane+c})}),c+=Math.max(1,v.laneCount)}),f=Math.max(1,c),{intervalsByStepId:u,laneCount:f,visibleGroups:l}}function qA({trace:e,steps:t,selectedStepId:n,onSelectStep:r,playheadPct:i,playheadMs:a,windowRange:s,ghostTrace:o,diff:l,laneStrategy:u="type",laneGroupsOrder:c=[],hiddenLaneGroups:f=[],laneHeight:h=IA,cardHeight:m=DA,compactHeight:v=OA}){const{intervalsByStepId:p,laneCount:x}=LA(e,t,u,c,f),g=Array.from(p.values()),y=new Map(g.map(A=>[A.stepId,A])),b=HE(t),_=e.metadata.wallTimeMs||1,C=new Set((l==null?void 0:l.removedSteps)??[]),E=new Set((l==null?void 0:l.changedSteps)??[]),j=new Set(((l==null?void 0:l.changedPairs)??[]).map(A=>A.rightId)),T=new Set((l==null?void 0:l.addedSteps)??[]);let P=g;if(s){const A=s.endMs-s.startMs,W=Math.max(1e3,A*.15),J=Math.max(0,s.startMs-W),me=s.endMs+W;if(P=g.filter(B=>B.endMs>=J&&B.startMs<=me),n&&!P.some(B=>B.stepId===n)){const B=y.get(n);B&&(P=[...P,B])}}const O=new Set(P.map(A=>A.stepId));return d.jsx("div",{className:"timeline",style:{"--step-card-height":`${m}px`,"--step-compact-height":`${v}px`},children:d.jsxs("div",{className:"timeline-grid",style:{height:`${x*h}px`},"data-help":!0,"data-help-title":"Timeline lanes","data-help-body":"Each lane stacks overlapping steps; width reflects duration.","data-help-placement":"top",children:[d.jsx("div",{className:"playback-cursor",style:{left:`${i}%`}}),b.filter(A=>O.has(A.id)).filter(A=>!f.includes(sv(A,u))).map(A=>{const W=y.get(A.id);if(!W)return null;const J=GE(W,a);return d.jsx(UE,{step:A,interval:W,playbackState:J,selected:n===A.id,diffStatus:C.has(A.id)?"removed":E.has(A.id)?"changed":null,laneHeight:h,onSelect:r},A.id)}),o?d.jsx(FA,{ghostTrace:o,baseWallTimeMs:_,playheadMs:a,windowRange:s,diffAdded:T,diffChanged:j,laneHeight:h}):null]})})}function FA({ghostTrace:e,baseWallTimeMs:t,playheadMs:n,windowRange:r,diffAdded:i,diffChanged:a,laneHeight:s}){const{intervals:o,laneCount:l}=_l(e.startedAt,e.endedAt,e.steps),u=new Map(o.map(p=>[p.stepId,p])),c=e.metadata.wallTimeMs||1,f=n/t*c;let h=o;if(r){const p=r.endMs-r.startMs,x=Math.max(1e3,p*.15),g=c/t,y=Math.max(0,(r.startMs-x)*g),b=Math.min(c,(r.endMs+x)*g);h=o.filter(_=>_.endMs>=y&&_.startMs<=b)}const m=new Set(h.map(p=>p.stepId)),v=HE(e.steps);return d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"ghost-lanes",style:{height:`${l*s}px`}}),v.filter(p=>m.has(p.id)).map(p=>{const x=u.get(p.id);if(!x)return null;const g=GE(x,f),y=i.has(p.id)?"added":a.has(p.id)?"changed":null;return d.jsx(UE,{step:p,interval:x,playbackState:g,selected:!1,diffStatus:y,variant:"ghost",disabled:!0,laneHeight:s,onSelect:()=>{}},`ghost-${p.id}`)})]})}function VA({trace:e,steps:t,selectedStepId:n,onSelectStep:r,playheadMs:i,windowRange:a,timing:s,ghostTrace:o,diff:l,laneStrategy:u,laneGroupsOrder:c,hiddenLaneGroups:f,onLaneStrategyChange:h,onToggleLaneGroupVisibility:m,onMoveLaneGroup:v}){const p=e.metadata.wallTimeMs||1,x=Math.min(100,Math.max(0,i/p*100)),g=c.filter(y=>!f.includes(y)).length;return d.jsxs("section",{className:"cinema-mode","aria-label":"Cinema mode",children:[s!=null&&s.degraded?d.jsxs("div",{className:"timing-banner",title:s.issues.join(" "),children:["Timing degraded: ",s.issues[0]??"Check timestamps."]}):null,d.jsxs("div",{className:"timeline-studio-panel","data-help":!0,"data-help-title":"Timeline studio","data-help-body":"Regroup lanes by type/status/parent, hide noisy groups, and reorder emphasis.",children:[d.jsxs("label",{className:"timeline-studio-strategy",children:["Lane strategy",d.jsxs("select",{value:u,onChange:y=>h(y.target.value),children:[d.jsx("option",{value:"type",children:"Type"}),d.jsx("option",{value:"status",children:"Status"}),d.jsx("option",{value:"parent",children:"Parent branch"})]})]}),d.jsxs("div",{className:"timeline-studio-summary",children:[g,"/",c.length," groups visible"]}),d.jsx("div",{className:"timeline-studio-groups",children:c.map((y,b)=>{const _=f.includes(y);return d.jsxs("div",{className:`timeline-studio-group ${_?"is-hidden":""}`,children:[d.jsx("button",{type:"button",className:"ghost-button",onClick:()=>m(y),children:_?"Show":"Hide"}),d.jsx("span",{className:"timeline-studio-group-name",children:y}),d.jsx("button",{type:"button",className:"ghost-button",onClick:()=>v(y,"up"),disabled:b===0,children:"Up"}),d.jsx("button",{type:"button",className:"ghost-button",onClick:()=>v(y,"down"),disabled:b===c.length-1,children:"Down"})]},y)})})]}),d.jsx(qA,{trace:e,steps:t,selectedStepId:n,onSelectStep:r,playheadPct:x,playheadMs:i,windowRange:a,ghostTrace:o,diff:l,laneStrategy:u,laneGroupsOrder:c,hiddenLaneGroups:f})]})}const $A=[.5,1,1.5,2,4];function L0({playheadMs:e,wallTimeMs:t,isPlaying:n,speed:r,onToggle:i,onScrub:a,onSpeedChange:s}){const o=l=>{a(Number(l.target.value))};return d.jsxs("div",{className:"playback-controls",children:[d.jsx("button",{className:"ghost-button",type:"button",onClick:i,"aria-label":n?"Pause playback":"Play playback","data-help":!0,"data-help-title":"Playhead","data-help-body":"Start or pause the run to experience timing as it unfolded.","data-help-placement":"bottom",children:n?"Pause":"Play"}),d.jsx("input",{className:"playback-slider",type:"range",min:0,max:t,value:e,"aria-label":"Playback position",onChange:o,"data-help":!0,"data-help-title":"Scrub timeline","data-help-body":"Drag to jump to any moment in the run.","data-help-placement":"bottom"}),d.jsx("select",{className:"playback-speed",value:r,"aria-label":"Playback speed",onChange:l=>s(Number(l.target.value)),"data-help":!0,"data-help-title":"Speed","data-help-body":"Slow down to inspect or speed up to skim.","data-help-placement":"bottom",children:$A.map(l=>d.jsxs("option",{value:l,children:[l,"x"]},l))})]})}function BA(e,t,n,r=60){const{wallTimeMs:i,intervals:a}=_l(e,t,n),s=new Array(r).fill(0);if(!i)return{buckets:s,wallTimeMs:0};const o=i/r;return!Number.isFinite(o)||o<=0?{buckets:s,wallTimeMs:i}:(a.forEach(l=>{const u=Math.max(0,Math.floor(l.startMs/o)),c=Math.min(r-1,Math.floor(l.endMs/o));for(let f=u;f<=c;f+=1)s[f]+=1}),{buckets:s,wallTimeMs:i})}function zm(e,t){const n=new Blob([JSON.stringify(t,null,2)],{type:"application/json"}),r=URL.createObjectURL(n),i=document.createElement("a");i.href=r,i.download=e,document.body.appendChild(i),i.click(),i.remove(),URL.revokeObjectURL(r)}function WE(e,t,n="text/plain"){const r=new Blob([t],{type:n}),i=URL.createObjectURL(r),a=document.createElement("a");a.href=i,a.download=e,document.body.appendChild(a),a.click(),a.remove(),URL.revokeObjectURL(i)}const _a=5e3,zA=32;function jt(e,t,n){return Math.min(n,Math.max(t,e))}function hi(e,t){const n=new Set;return e.forEach(r=>{n.add(jt(Math.round(r),0,t))}),Array.from(n).sort((r,i)=>r-i).slice(0,zA)}function UA(e,t){if(!e)return{bookmarksMs:[],clipStartMs:null,clipEndMs:null,segments:[]};try{const n=JSON.parse(e),r=hi(Array.isArray(n.bookmarksMs)?n.bookmarksMs:[],t),i=typeof n.clipStartMs=="number"?jt(n.clipStartMs,0,t):null,a=typeof n.clipEndMs=="number"?jt(n.clipEndMs,0,t):null,s=Array.isArray(n.segments)?n.segments.filter(o=>typeof(o==null?void 0:o.id)=="string"&&typeof(o==null?void 0:o.startMs)=="number"&&typeof(o==null?void 0:o.endMs)=="number"&&typeof(o==null?void 0:o.label)=="string").map(o=>({...o,startMs:jt(o.startMs,0,t),endMs:jt(o.endMs,0,t)})):[];return{bookmarksMs:r,clipStartMs:i,clipEndMs:i!=null&&a!=null&&a<i?i:a,segments:s}}catch{return{bookmarksMs:[],clipStartMs:null,clipEndMs:null,segments:[]}}}function q0(e,t){const n=Date.parse(e);return Number.isNaN(n)?null:new Date(n+t).toISOString()}function GA({traceStart:e,traceEnd:t,steps:n,playheadMs:r,windowRange:i,windowed:a,spanMs:s,onSpanChange:o,onToggleWindowed:l,onScrub:u,persistenceKey:c,laneStrategy:f="type",visibleLaneGroups:h=[],remotePlayheads:m=[]}){const{buckets:v,wallTimeMs:p}=BA(e,t,n,64),x=Math.max(1,...v),g=jt(s,_a,Math.max(_a,p)),y=(i==null?void 0:i.startMs)??0,b=(i==null?void 0:i.endMs)??p,_=S.useMemo(()=>`agentDirector.timelineStudio.${c??e}`,[c,e]),[C,E]=S.useState([]),[j,T]=S.useState(null),[P,O]=S.useState(null),[A,W]=S.useState([]),[J,me]=S.useState("");S.useEffect(()=>{const $=UA(window.localStorage.getItem(_),p);E($.bookmarksMs),T($.clipStartMs),O($.clipEndMs),W($.segments)},[_,p]),S.useEffect(()=>{const $={bookmarksMs:hi(C,p),clipStartMs:j==null?null:jt(j,0,p),clipEndMs:P==null?null:jt(P,0,p),segments:A};window.localStorage.setItem(_,JSON.stringify($))},[C,P,j,A,_,p]);const B=p?y/p*100:0,le=p?(b-y)/p*100:100,ne=p?r/p*100:0,D=j!=null&&P!=null?Math.min(j,P):null,I=j!=null&&P!=null?Math.max(j,P):null,F=D!=null&&I!=null&&p?(I-D)/p*100:0,V=D!=null&&p?D/p*100:0,te=D!=null&&I!=null&&I>D,M=$=>{const ie=$.currentTarget.getBoundingClientRect(),Z=($.clientX-ie.left)/ie.width,Ve=jt(Math.round(Z*p),0,p);u(Ve)},K=$=>{if($.key==="ArrowLeft"){$.preventDefault(),u(jt(r-Math.max(250,Math.round(p*.02)),0,p));return}if($.key==="ArrowRight"){$.preventDefault(),u(jt(r+Math.max(250,Math.round(p*.02)),0,p));return}if($.key==="Home"){$.preventDefault(),u(0);return}if($.key==="End"){$.preventDefault(),u(p);return}($.key===" "||$.key==="Enter")&&($.preventDefault(),u(r))},ue=()=>{E($=>hi([...$,r],p))},ye=$=>{if(C.length===0)return;const ie=hi(C,p);if($==="previous"){const Ve=[...ie].reverse().find(ae=>ae<r)??ie[ie.length-1];u(Ve);return}const Z=ie.find(Ve=>Ve>r)??ie[0];u(Z)},Je=()=>{const $=jt(r,0,p);T($),P!=null&&P<$&&O($)},at=()=>{const $=jt(r,0,p);O($),j!=null&&j>$&&T($)},ht=()=>{T(null),O(null)},Ot=()=>{if(!te||D==null||I==null)return;const $=J.trim()||`Scene ${A.length+1}`,ie=`segment-${Math.random().toString(36).slice(2,9)}`;W(Z=>[...Z,{id:ie,startMs:D,endMs:I,label:$}]),me("")},bn=$=>{W(ie=>ie.filter(Z=>Z.id!==$))},Bn=()=>{if(!te||D==null||I==null)return;const $={type:"agent-director-clip",traceStart:e,traceEnd:t,clip:{startMs:D,endMs:I,startAt:q0(e,D),endAt:q0(e,I)},bookmarksMs:hi(C,p).filter(ie=>ie>=D&&ie<=I),playheadMs:r,laneContext:{strategy:f,visibleGroups:h},segments:A.filter(ie=>ie.endMs>=D&&ie.startMs<=I),exportedAt:new Date().toISOString()};zm(`agent-director-clip-${D}-${I}.json`,$)};return d.jsxs("div",{className:"mini-timeline",children:[d.jsxs("div",{className:"mini-track",onClick:M,role:"slider",tabIndex:0,"aria-label":"Timeline density map","aria-valuemin":0,"aria-valuemax":p,"aria-valuenow":r,"aria-valuetext":`${r} milliseconds`,onKeyDown:K,"data-help":!0,"data-help-title":"Density map","data-help-body":"A compact view of activity density. Click to jump the playhead.","data-help-placement":"top",children:[d.jsx("div",{className:"mini-bars",children:v.map(($,ie)=>d.jsx("span",{className:"mini-bar",style:{height:`${$/x*100}%`}},`bucket-${ie}`))}),d.jsx("div",{className:"mini-window",style:{left:`${B}%`,width:`${le}%`,opacity:a?1:.4}}),te?d.jsx("div",{className:"mini-clip-window",style:{left:`${V}%`,width:`${F}%`}}):null,d.jsx("div",{className:"mini-bookmark-markers","data-testid":"timeline-bookmark-markers","aria-hidden":"true",children:hi(C,p).map($=>{const ie=p?$/p*100:0;return d.jsx("button",{type:"button",className:"mini-bookmark-marker",style:{left:`${ie}%`},onClick:Z=>{Z.stopPropagation(),u($)},title:`Jump to bookmark at ${$}ms`,"aria-label":`Bookmark ${$} milliseconds`},`bookmark-${$}`)})}),d.jsx("div",{className:"mini-remote-markers","aria-hidden":"true",children:m.map(($,ie)=>{const Z=p?$/p*100:0;return d.jsx("span",{className:"mini-remote-marker",style:{left:`${Z}%`}},`remote-${ie}`)})}),d.jsx("div",{className:"mini-segments","aria-hidden":"true",children:A.map($=>{const ie=p?$.startMs/p*100:0,Z=p?($.endMs-$.startMs)/p*100:0;return d.jsx("span",{className:"mini-segment-bar",style:{left:`${ie}%`,width:`${Math.max(1,Z)}%`},title:$.label},$.id)})}),d.jsx("div",{className:"mini-playhead",style:{left:`${ne}%`}})]}),d.jsxs("div",{className:"mini-controls",children:[d.jsx("label",{className:"mini-label",children:"Zoom"}),d.jsx("input",{type:"range",min:_a,max:Math.max(_a,p),value:g,"aria-label":"Timeline zoom",onChange:$=>{l(!0),o(Number($.target.value))},"data-help":!0,"data-help-title":"Zoom window","data-help-body":"Tighten the window to focus on hotspots.","data-help-placement":"top"}),d.jsx("button",{className:"ghost-button",type:"button",onClick:()=>l(!a),title:"Toggle windowed playback",children:a?"Full":"Window"}),d.jsx("button",{className:"ghost-button",type:"button",title:"Reset zoom",onClick:()=>{l(!0),o(Math.min(Math.max(p*.2,_a),6e4))},children:"Reset"}),d.jsx("button",{className:"ghost-button",type:"button",onClick:ue,children:"Add bookmark"}),d.jsx("button",{className:"ghost-button",type:"button",onClick:()=>ye("previous"),children:"Previous bookmark"}),d.jsx("button",{className:"ghost-button",type:"button",onClick:()=>ye("next"),children:"Next bookmark"}),d.jsx("button",{className:"ghost-button",type:"button",onClick:Je,children:"Set clip start"}),d.jsx("button",{className:"ghost-button",type:"button",onClick:at,children:"Set clip end"}),d.jsx("button",{className:"ghost-button",type:"button",onClick:ht,children:"Clear clip"}),d.jsx("input",{className:"search-input mini-segment-input",placeholder:"Segment label",value:J,onChange:$=>me($.target.value),"aria-label":"Segment label"}),d.jsx("button",{className:"ghost-button",type:"button",onClick:Ot,disabled:!te,children:"Add segment"}),d.jsx("button",{className:"ghost-button",type:"button",onClick:Bn,disabled:!te,children:"Export clip"})]}),A.length?d.jsx("div",{className:"mini-segment-list",children:A.map($=>d.jsxs("div",{className:"mini-segment-item",children:[d.jsxs("span",{children:[$.label," (",$.startMs,"ms - ",$.endMs,"ms)"]}),d.jsx("button",{className:"ghost-button",type:"button",onClick:()=>bn($.id),children:"Remove"})]},$.id))}):null]})}const HA=[{keys:"Space",action:"Play / pause"},{keys:" / ",action:"Step boundary back / forward"},{keys:"Shift +  / ",action:"Jump to start / end"},{keys:"F",action:"Toggle Flow mode"},{keys:"I",action:"Toggle Inspector"},{keys:"S",action:"Story mode"},{keys:"E",action:"Explain mode"},{keys:"T",action:"Start tour"},{keys:"Cmd/Ctrl + K",action:"Open command palette"},{keys:"?",action:"Show shortcuts"},{keys:"Esc",action:"Close modal / inspector"}];function WA({open:e,onClose:t}){const n=S.useRef(null);if(S.useEffect(()=>{var i;e&&((i=n.current)==null||i.focus())},[e]),!e)return null;const r=i=>{var l;if(i.key==="Escape"){i.preventDefault(),t();return}if(i.key!=="Tab")return;const a=Array.from(i.currentTarget.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'));if(a.length===0)return;const s=a.indexOf(document.activeElement),o=i.shiftKey?s<=0?a.length-1:s-1:(s+1)%a.length;(l=a[o])==null||l.focus(),i.preventDefault()};return d.jsx("div",{className:"modal-backdrop",role:"dialog","aria-modal":"true","aria-labelledby":"shortcuts-title",onKeyDown:r,children:d.jsxs("div",{className:"modal",tabIndex:-1,children:[d.jsxs("div",{className:"modal-header",children:[d.jsx("div",{className:"modal-title",id:"shortcuts-title",children:"Keyboard Shortcuts"}),d.jsx("button",{className:"ghost-button",type:"button",onClick:t,ref:n,"aria-label":"Close shortcuts",children:"Close"})]}),d.jsx("div",{className:"modal-body",children:HA.map(i=>d.jsxs("div",{className:"modal-row",children:[d.jsx("span",{className:"modal-keys",children:i.keys}),d.jsx("span",{className:"modal-action",children:i.action})]},i.keys))})]})})}const KA=e=>e.trim().toLowerCase();function YA(e){const t=new Map;return e.forEach(n=>{var i;const r=n.group??"General";t.has(r)||t.set(r,[]),(i=t.get(r))==null||i.push(n)}),t}function F0(e,t,n){var i;if(!e.length)return 0;let r=t;for(let a=0;a<e.length;a+=1)if(r=(r+n+e.length)%e.length,!((i=e[r])!=null&&i.disabled))return r;return t}function QA({open:e,onClose:t,actions:n}){var p,x;const[r,i]=S.useState(""),[a,s]=S.useState(0),o=S.useRef(null),l=S.useRef(null),u=S.useMemo(()=>{const g=KA(r);return g?n.filter(y=>[y.label,y.description,y.group,y.keys].filter(Boolean).join(" ").toLowerCase().includes(g)):n},[n,r]),c=S.useMemo(()=>YA(u),[u]);if(S.useEffect(()=>{if(!e)return;i(""),s(0);const g=window.setTimeout(()=>{var y;return(y=o.current)==null?void 0:y.focus()},0);return()=>window.clearTimeout(g)},[e]),S.useEffect(()=>{a>=u.length&&s(0)},[a,u.length]),!e)return null;const f=g=>{g.disabled||(g.onTrigger(),t())},h=g=>{var y,b;if(g.key==="Escape"){g.preventDefault(),t();return}if(g.key==="ArrowDown"){g.preventDefault(),s(_=>F0(u,_,1));return}if(g.key==="ArrowUp"){g.preventDefault(),s(_=>F0(u,_,-1));return}if(g.key==="Enter"){g.preventDefault();const _=u[a];_&&f(_);return}if(g.key==="Tab"){const _=Array.from(((y=l.current)==null?void 0:y.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'))??[]);if(!_.length)return;const C=_.indexOf(document.activeElement),E=g.shiftKey?C<=0?_.length-1:C-1:(C+1)%_.length;(b=_[E])==null||b.focus(),g.preventDefault()}},m=(p=u[a])!=null&&p.id?`palette-option-${(x=u[a])==null?void 0:x.id}`:void 0;let v=-1;return d.jsx("div",{className:"modal-backdrop palette-backdrop",role:"dialog","aria-modal":"true","aria-label":"Command palette",onKeyDown:h,onMouseDown:g=>{g.target===g.currentTarget&&t()},children:d.jsxs("div",{className:"palette",ref:l,children:[d.jsxs("div",{className:"palette-header",children:[d.jsxs("div",{children:[d.jsx("div",{className:"palette-title",children:"Command palette"}),d.jsx("div",{className:"palette-subtitle",children:"Search actions, modes, and playbook steps."})]}),d.jsx("button",{className:"ghost-button",type:"button",onClick:t,"aria-label":"Close command palette",children:"Close"})]}),d.jsx("input",{ref:o,className:"palette-input",value:r,onChange:g=>i(g.target.value),placeholder:"Type to filter actions","aria-label":"Search commands",role:"combobox","aria-expanded":"true","aria-controls":"command-palette-list","aria-activedescendant":m,"aria-autocomplete":"list"}),d.jsxs("div",{className:"palette-list",role:"listbox",id:"command-palette-list",children:[u.length===0?d.jsx("div",{className:"palette-empty",children:"No matching commands."}):null,Array.from(c.entries()).map(([g,y])=>d.jsxs("div",{className:"palette-group",children:[d.jsx("div",{className:"palette-group-title",children:g}),d.jsx("div",{className:"palette-group-list",children:y.map(b=>{v+=1;const _=v===a;return d.jsxs("button",{id:`palette-option-${b.id}`,className:`palette-item ${_?"active":""}`,type:"button",role:"option","aria-selected":_,onMouseEnter:()=>s(v),onClick:()=>f(b),disabled:b.disabled,children:[d.jsxs("div",{className:"palette-item-main",children:[d.jsx("div",{className:"palette-item-title",children:b.label}),b.description?d.jsx("div",{className:"palette-item-description",children:b.description}):null]}),b.keys?d.jsx("div",{className:"palette-item-keys",children:b.keys}):null]},b.id)})})]},g))]})]})})}function JA(e){return e.length?e.reduce((t,n)=>(n.durationMs??0)>(t.durationMs??0)?n:t,e[0]):null}function XA({trace:e,mode:t,playheadMs:n,selectedStepId:r,compareTrace:i,collapsed:a,onToggleCollapsed:s,onModeChange:o,onSelectStep:l,onJumpToBottleneck:u,onReplay:c,onStartTour:f}){var T;const h=e.steps??[],m=JA(h),v=r??(m==null?void 0:m.id)??((T=h[0])==null?void 0:T.id)??null,p=t==="cinema"||n>0,x=!!r,g=!!i,y=[p,x,g].filter(Boolean).length,b=[p,x,g].findIndex(P=>!P),_=b===-1?2:b,C=[0,1,2].map(P=>[p,x,g][P]?"done":P===_?"active":"next"),E=[{id:"observe",title:"Act I: Observe",summary:"Scrub the timeline to feel the pacing, bottlenecks, and tool choreography.",status:C[0],actionLabel:"Enter cinema",action:()=>o("cinema"),tasks:[{label:"Scrub the timeline",done:n>0},{label:"Stay in Cinema mode",done:t==="cinema"}]},{id:"inspect",title:"Act II: Inspect",summary:"Open the most expensive or failed step and read the payload with context.",status:C[1],actionLabel:m?"Jump to bottleneck":"Select first step",action:()=>{if(r){o("cinema");return}if(m){u();return}v&&(l(v),o("cinema"))},disabled:!v,tasks:[{label:"Open the Inspector",done:!!r},{label:"Jump to the bottleneck",done:!!(m&&r===m.id)}]},{id:"direct",title:"Act III: Direct",summary:"Replay from a decisive step, then compare flows and diffs side-by-side.",status:C[2],actionLabel:i?"Open compare":"Replay from step",action:()=>{if(i){o("compare");return}v&&c(v)},disabled:!v,tasks:[{label:"Replay from a step",done:!!i},{label:"Compare runs side-by-side",done:!!(i&&t==="compare")}]}],j=E[_];return a?d.jsxs("section",{className:"journey-panel journey-collapsed","aria-label":"Director journey","data-help":!0,"data-help-indicator":!0,"data-tour":"journey","data-help-title":"Director journey","data-help-body":"A guided path from observation to replay. Use it to show newcomers what to do first.","data-help-placement":"bottom",children:[d.jsxs("div",{className:"journey-collapsed-main",children:[d.jsx("div",{className:"journey-eyebrow",children:"Director journey"}),d.jsx("div",{className:"journey-collapsed-title",children:"From observe to direct"})]}),d.jsxs("div",{className:"journey-collapsed-actions",children:[d.jsxs("span",{className:"journey-progress-text",children:[y,"/3 complete"]}),j?d.jsxs("button",{className:"primary-button journey-next",type:"button",onClick:j.action,disabled:j.disabled,children:["Next: ",j.actionLabel]}):null,f?d.jsx("button",{className:"ghost-button",type:"button",onClick:f,children:"Tour"}):null,d.jsx("button",{className:"primary-button journey-expand",type:"button",onClick:s,children:"Expand"})]})]}):d.jsxs("section",{className:"journey-panel","aria-label":"Director journey","data-help":!0,"data-help-indicator":!0,"data-tour":"journey","data-help-title":"Director journey","data-help-body":"A three-act flow that teaches the story: observe, inspect, direct. Each act jumps to the right place.","data-help-placement":"bottom",children:[d.jsxs("div",{className:"journey-head",children:[d.jsxs("div",{children:[d.jsx("div",{className:"journey-eyebrow",children:"Director journey"}),d.jsx("h2",{className:"journey-title",children:"Cut a perfect take in three acts."}),d.jsx("p",{className:"journey-subtitle",children:"Trace the performance, interrogate the moment, then direct a better run."})]}),d.jsxs("div",{className:"journey-head-actions",children:[f?d.jsx("button",{className:"ghost-button",type:"button",onClick:f,children:"Start tour"}):null,d.jsx("button",{className:"ghost-button",type:"button",onClick:s,children:"Collapse"})]})]}),d.jsx("div",{className:"journey-track",children:E.map((P,O)=>{var A;return d.jsxs("div",{className:"journey-card","data-status":P.status,children:[d.jsxs("div",{className:"journey-card-top",children:[d.jsxs("span",{className:"journey-index",children:["0",O+1]}),d.jsx("span",{className:"journey-status",children:P.status})]}),d.jsx("h3",{className:"journey-card-title",children:P.title}),d.jsx("p",{className:"journey-card-body",children:P.summary}),(A=P.tasks)!=null&&A.length?d.jsx("ul",{className:"journey-tasks",children:P.tasks.map(W=>d.jsxs("li",{className:`journey-task ${W.done?"done":""}`,children:[d.jsx("span",{className:"journey-task-icon","aria-hidden":"true",children:W.done?"":""}),d.jsx("span",{children:W.label})]},W.label))}):null,d.jsx("button",{className:"primary-button journey-action",type:"button",onClick:P.action,disabled:P.disabled,children:P.actionLabel})]},P.id)})}),d.jsxs("div",{className:"journey-footer",children:[d.jsxs("div",{children:[d.jsx("div",{className:"journey-progress-label",children:"Progress"}),d.jsx("div",{className:"journey-progress",children:d.jsx("span",{className:"journey-progress-bar",style:{width:`${y/3*100}%`}})})]}),d.jsx("div",{className:"journey-footnote",children:"Tip: Use Flow to spot fan-out, Compare to validate your changes."})]})]})}function ZA(e){return e.length?e.reduce((t,n)=>(n.durationMs??0)>(t.durationMs??0)?n:t,e[0]):null}function eI({trace:e,mode:t,selectedStepId:n,onModeChange:r,onSelectStep:i,onJumpToBottleneck:a,onReplay:s,recommendations:o=[],persona:l="builder",annotations:u=[],activityFeed:c=[],onAddAnnotation:f,missionProgress:h={},missionCompletion:m,onResetMissions:v,narrative:p="",onAskDirector:x,onExportNarrative:g}){var D;const y=e.steps??[],b=ZA(y),_=n??(b==null?void 0:b.id)??((D=y[0])==null?void 0:D.id)??null,C=e.metadata.wallTimeMs??0,E=l==="executive"?"Executive lens":l==="operator"?"Operator lens":"Builder lens",[j,T]=S.useState(""),[P,O]=S.useState(""),[A,W]=S.useState(""),J=S.useMemo(()=>c.slice(0,6),[c]),me=(m==null?void 0:m.done)??0,B=me>=3||!!h.inspect,le=me>=5||!!h.collaborate||J.length>0,ne=S.useMemo(()=>o.slice(0,3).map((I,F)=>({id:I.id,step:`${F+1}. ${I.actionLabel}  ${I.title}`})),[o]);return d.jsxs("aside",{className:"inspector inspector-empty","data-help":!0,"data-help-indicator":!0,"data-tour":"inspector","data-help-title":"Inspector panel","data-help-body":"Select a step to open detailed payloads, redaction controls, and replay actions.","data-help-placement":"left",children:[d.jsx("div",{className:"inspector-header",children:d.jsxs("div",{children:[d.jsx("div",{className:"inspector-title",children:"Director's notes"}),d.jsxs("div",{className:"inspector-subtitle",children:[E,". Select a step to open deep inspection."]})]})}),d.jsxs("div",{className:"inspector-section",children:[d.jsx("div",{className:"inspector-section-title",children:"Run summary"}),d.jsxs("div",{className:"inspector-row",children:[d.jsx("span",{children:"Steps"}),d.jsx("span",{children:y.length})]}),d.jsxs("div",{className:"inspector-row",children:[d.jsx("span",{children:"Wall time"}),d.jsxs("span",{children:[C,"ms"]})]}),d.jsxs("div",{className:"inspector-row",children:[d.jsx("span",{children:"Status"}),d.jsx("span",{children:e.status})]})]}),d.jsxs("div",{className:"inspector-section",children:[d.jsx("div",{className:"inspector-section-title",children:"Next actions"}),d.jsxs("div",{className:"director-actions",children:[d.jsx("button",{className:"primary-button",type:"button",onClick:()=>r("cinema"),"data-help":!0,"data-help-title":"Open cinema","data-help-body":"Jump straight into the timeline.","data-help-placement":"right",children:"Open cinema"}),d.jsx("button",{className:"ghost-button",type:"button",onClick:()=>r("flow"),"data-help":!0,"data-help-title":"Open flow","data-help-body":"See the dependency graph of the run.","data-help-placement":"right",children:"Switch to flow"}),d.jsx("button",{className:"ghost-button",type:"button",onClick:()=>{if(!n){if(b){a();return}_&&i(_)}},disabled:!_||!!n,"data-help":!0,"data-help-title":"Jump to bottleneck","data-help-body":"Select the slowest step for inspection.","data-help-placement":"right",children:n?"Inspector open":b?"Jump to bottleneck":"Select first step"}),d.jsx("button",{className:"ghost-button",type:"button",onClick:()=>_&&s(_),disabled:!_||!B,title:B?void 0:"Complete core missions to unlock replay guidance.","data-help":!0,"data-help-title":"Replay","data-help-body":"Branch a replay from a decisive step.","data-help-placement":"right",children:"Replay from step"})]})]}),d.jsxs("div",{className:"inspector-section",children:[d.jsx("div",{className:"inspector-section-title",children:"Mode"}),d.jsxs("div",{className:"director-modes",children:[d.jsx("button",{className:`ghost-button ${t==="cinema"?"active":""}`,type:"button",onClick:()=>r("cinema"),"data-help":!0,"data-help-title":"Cinema mode","data-help-body":"Timeline view for pacing and sequence.","data-help-placement":"right",children:"Cinema"}),d.jsx("button",{className:`ghost-button ${t==="flow"?"active":""}`,type:"button",onClick:()=>r("flow"),"data-help":!0,"data-help-title":"Flow mode","data-help-body":"Graph view for dependencies.","data-help-placement":"right",children:"Flow"}),d.jsx("button",{className:"ghost-button",type:"button",disabled:!0,children:"Compare"})]})]}),d.jsxs("div",{className:"inspector-section",children:[d.jsx("div",{className:"inspector-section-title",children:"Adaptive missions"}),d.jsxs("div",{className:"mission-summary",children:[(m==null?void 0:m.done)??0,"/",(m==null?void 0:m.total)??0," complete",d.jsxs("span",{children:[(m==null?void 0:m.pct)??0,"%"]})]}),d.jsxs("div",{className:"mission-stage",children:["Stage: ",le?"Collaboration":B?"Analysis":"Foundation"]}),d.jsx("div",{className:"mission-grid",children:Object.entries(h).map(([I,F])=>d.jsxs("div",{className:`mission-chip ${F?"done":""}`,children:[d.jsx("span",{children:I}),d.jsx("span",{children:F?"Done":"Pending"})]},I))}),d.jsx("button",{className:"ghost-button",type:"button",onClick:v,children:"Reset missions"})]}),B&&o.length?d.jsxs("div",{className:"inspector-section",children:[d.jsx("div",{className:"inspector-section-title",children:"Recommended next moves"}),d.jsx("div",{className:"director-recommendations",children:o.map(I=>d.jsxs("article",{className:`director-recommendation tone-${I.tone}`,children:[d.jsx("div",{className:"director-recommendation-title",children:I.title}),d.jsx("p",{className:"director-recommendation-body",children:I.body}),d.jsx("button",{className:"ghost-button",type:"button",onClick:I.action,children:I.actionLabel})]},I.id))})]}):null,d.jsxs("div",{className:"inspector-section",children:[d.jsx("div",{className:"inspector-section-title",children:"AI director narrative"}),B?d.jsxs(d.Fragment,{children:[d.jsx("p",{className:"director-recommendation-body",children:p}),ne.length?d.jsx("div",{className:"director-guided-plan",children:ne.map(I=>d.jsx("div",{children:I.step},I.id))}):null,d.jsxs("div",{className:"director-ask-row",children:[d.jsx("input",{className:"search-input",value:P,onChange:I=>O(I.target.value),placeholder:"Ask Director (e.g. what is highest risk?)","aria-label":"Ask director question"}),d.jsx("button",{className:"ghost-button",type:"button",onClick:()=>{P.trim()&&W((x==null?void 0:x(P))??"")},children:"Ask"})]}),A?d.jsx("div",{className:"director-answer",children:A}):null,d.jsx("button",{className:"ghost-button",type:"button",onClick:g,children:"Export narrative"})]}):d.jsx("div",{className:"annotation-empty",children:"Complete inspect/flow/replay missions to unlock AI narrative tools."})]}),d.jsxs("div",{className:"inspector-section",children:[d.jsx("div",{className:"inspector-section-title",children:"Shared annotations"}),d.jsx("textarea",{value:j,onChange:I=>T(I.target.value),rows:3,placeholder:n?"Add note for selected step...":"Add trace-level note...","aria-label":"Shared annotation"}),d.jsx("button",{className:"ghost-button",type:"button",onClick:()=>{const I=j.trim();I&&(f==null||f(I,n),T(""))},children:"Add annotation"}),d.jsxs("div",{className:"annotation-list",children:[u.slice(-6).reverse().map(I=>d.jsxs("article",{className:"annotation-item",children:[d.jsxs("div",{className:"annotation-meta",children:[d.jsx("span",{children:I.stepId?`step ${I.stepId}`:"trace"}),d.jsx("span",{children:I.authorSessionId})]}),d.jsx("p",{children:I.body})]},I.id)),u.length===0?d.jsx("div",{className:"annotation-empty",children:"No shared annotations yet."}):null]})]}),d.jsxs("div",{className:"inspector-section",children:[d.jsx("div",{className:"inspector-section-title",children:"Collab activity"}),le?d.jsxs("div",{className:"activity-list",children:[J.map(I=>d.jsxs("div",{className:"activity-item",children:[d.jsx("span",{children:I.message}),d.jsx("span",{children:new Date(I.timestamp).toLocaleTimeString()})]},I.id)),J.length===0?d.jsx("div",{className:"annotation-empty",children:"No activity yet."}):null]}):d.jsx("div",{className:"annotation-empty",children:"Open another live session to unlock collaboration activity feed."})]})]})}const Du=(e,t,n)=>Math.min(n,Math.max(t,e));function tI({steps:e,open:t,onClose:n,onComplete:r}){const[i,a]=S.useState(0),[s,o]=S.useState(null),[l,u]=S.useState(null),c=S.useRef(null),f=S.useRef(null),h=S.useRef(null),m=S.useMemo(()=>e[i],[e,i]),v=S.useCallback(()=>{if(!t)return;const _=document.querySelector(m.target);if(!_){f.current=null,o(null);return}f.current=_;const C=_.getBoundingClientRect();o(C)},[t,m.target]),p=S.useCallback(()=>{if(!s||!c.current){u(null);return}const _=c.current.offsetWidth,C=c.current.offsetHeight,E=16;let j=Du(s.left+s.width/2-_/2,E,window.innerWidth-_-E),T=s.bottom+16;m.placement==="top"&&(T=s.top-C-16),m.placement==="left"&&(j=s.left-_-16,T=s.top+s.height/2-C/2),m.placement==="right"&&(j=s.right+16,T=s.top+s.height/2-C/2),T+C>window.innerHeight-E&&(T=s.top-C-16),T<E&&(T=s.bottom+16),j=Du(j,E,window.innerWidth-_-E),T=Du(T,E,window.innerHeight-C-E),u({top:T,left:j})},[m.placement,s]);if(S.useEffect(()=>{t&&a(0)},[t]),S.useEffect(()=>{var C,E;if(!t){(E=(C=h.current)==null?void 0:C.focus)==null||E.call(C);return}h.current=document.activeElement;const _=window.setTimeout(()=>{var T,P;(P=((T=c.current)==null?void 0:T.querySelector('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'))??c.current)==null||P.focus()},0);return()=>window.clearTimeout(_)},[t]),S.useEffect(()=>{if(!t)return;const _=document.querySelector(m.target);_&&_.scrollIntoView({behavior:"smooth",block:"center",inline:"center"});const C=window.requestAnimationFrame(()=>v());return()=>window.cancelAnimationFrame(C)},[t,m.target,v]),S.useLayoutEffect(()=>{p()},[s,p,m.title]),S.useEffect(()=>{if(!t)return;const _=()=>{v(),p()};return window.addEventListener("resize",_),window.addEventListener("scroll",_,!0),()=>{window.removeEventListener("resize",_),window.removeEventListener("scroll",_,!0)}},[t,v,p]),!t||!m)return null;const x=_=>{var P,O;if(_.key==="Escape"){_.preventDefault(),n();return}if(_.key!=="Tab")return;const C=Array.from(((P=c.current)==null?void 0:P.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'))??[]);if(C.length===0)return;const E=document.activeElement,j=C.indexOf(E),T=_.shiftKey?j<=0?C.length-1:j-1:(j+1)%C.length;(O=C[T])==null||O.focus(),_.preventDefault()},g=`tour-title-${m.id}`,y=`tour-body-${m.id}`,b=s?{top:s.top-6,left:s.left-6,width:s.width+12,height:s.height+12}:void 0;return d.jsxs("div",{className:"tour-overlay",role:"dialog","aria-modal":"true","aria-label":"Guided tour","aria-labelledby":g,"aria-describedby":y,onKeyDown:x,children:[d.jsx("div",{className:"tour-backdrop",onClick:n}),s?d.jsx("div",{className:"tour-spotlight",style:b}):null,d.jsxs("div",{className:`tour-card ${l?"tour-card-anchored":""}`,ref:c,style:l??void 0,tabIndex:-1,children:[d.jsxs("div",{className:"tour-step",children:["Step ",i+1," of ",e.length]}),d.jsx("div",{className:"tour-title",id:g,children:m.title}),d.jsx("p",{className:"tour-body",id:y,children:m.body}),d.jsxs("div",{className:"tour-actions",children:[d.jsx("button",{className:"ghost-button",type:"button",onClick:()=>a(_=>Math.max(0,_-1)),disabled:i===0,children:"Back"}),d.jsx("button",{className:"ghost-button",type:"button",onClick:n,children:"Skip"}),i===e.length-1?d.jsx("button",{className:"primary-button",type:"button",onClick:r,children:"Finish tour"}):d.jsx("button",{className:"primary-button",type:"button",onClick:()=>a(_=>_+1),children:"Next"})]})]})]})}const V0=(e,t,n)=>Math.min(n,Math.max(t,e));function nI({enabled:e}){const[t,n]=S.useState(null),[r,i]=S.useState(null),a=S.useRef(null),s=S.useRef(null),o=S.useCallback(()=>{const u=a.current;if(!u){n(null);return}const c=u.getBoundingClientRect(),f=u.dataset.helpTitle??"Context",h=u.dataset.helpBody??"",m=u.dataset.helpPlacement??"right";n({rect:c,title:f,body:h,placement:m})},[]);S.useEffect(()=>{if(!e){a.current=null,n(null);return}const u=v=>{var x,g;const p=(g=(x=v.target)==null?void 0:x.closest)==null?void 0:g.call(x,"[data-help]");if(!p){a.current||n(null);return}a.current!==p&&(a.current=p,o())},c=v=>{var x,g;const p=(g=(x=v.target)==null?void 0:x.closest)==null?void 0:g.call(x,"[data-help]");p&&(a.current=p,o())},f=v=>{var x;const p=v.relatedTarget;(x=p==null?void 0:p.closest)!=null&&x.call(p,"[data-help]")||(a.current=null,n(null))},h=v=>{var x,g;const p=(g=(x=v.target)==null?void 0:x.closest)==null?void 0:g.call(x,"[data-help]");if(!p){a.current=null,n(null);return}a.current=p,o()},m=()=>{a.current&&o()};return window.addEventListener("mousemove",u),window.addEventListener("focusin",c),window.addEventListener("focusout",f),window.addEventListener("pointerdown",h),window.addEventListener("scroll",m,!0),window.addEventListener("resize",m),()=>{window.removeEventListener("mousemove",u),window.removeEventListener("focusin",c),window.removeEventListener("focusout",f),window.removeEventListener("pointerdown",h),window.removeEventListener("scroll",m,!0),window.removeEventListener("resize",m)}},[e,o]);const l=S.useCallback(()=>{if(!t||!s.current){i(null);return}const u=12,c=s.current.offsetWidth,f=s.current.offsetHeight,{rect:h,placement:m}=t;let v=h.right+16,p=h.top+h.height/2-f/2;m==="left"&&(v=h.left-c-16,p=h.top+h.height/2-f/2),m==="top"&&(v=h.left+h.width/2-c/2,p=h.top-f-16),m==="bottom"&&(v=h.left+h.width/2-c/2,p=h.bottom+16),v=V0(v,u,window.innerWidth-c-u),p=V0(p,u,window.innerHeight-f-u),i({left:v,top:p})},[t]);return S.useLayoutEffect(()=>{l()},[l]),!e||!t?null:d.jsxs("div",{className:"help-overlay","aria-hidden":"true",children:[d.jsx("div",{className:"help-highlight",style:{top:t.rect.top-6,left:t.rect.left-6,width:t.rect.width+12,height:t.rect.height+12}}),d.jsxs("div",{className:"help-bubble",ref:s,style:r??void 0,"data-placement":t.placement,children:[d.jsx("div",{className:"help-title",children:t.title}),d.jsx("div",{className:"help-body",children:t.body})]})]})}const rI=[{id:"builder",label:"Builder lens",body:"Focus on step payloads, execution paths, and replay control."},{id:"executive",label:"Executive lens",body:"Focus on bottlenecks, risk, and outcome-level run quality."},{id:"operator",label:"Operator lens",body:"Focus on failures, retries, and trace reliability posture."}];function iI({onComplete:e,onStartTour:t,onStartStory:n,persona:r="builder",onPersonaChange:i}){const a=()=>{t==null||t(),e()},s=()=>{n==null||n(),e()};return d.jsx("div",{className:"intro-overlay",role:"dialog","aria-modal":"true","aria-label":"Agent Director intro",children:d.jsxs("div",{className:"intro-card",children:[d.jsx("div",{className:"intro-scan"}),d.jsx("div",{className:"intro-title",children:"Agent Director"}),d.jsx("div",{className:"intro-tagline",children:"Watch your agent think. Then direct it."}),d.jsxs("div",{className:"intro-steps",children:[d.jsxs("div",{className:"intro-step",children:[d.jsx("div",{className:"intro-step-label",children:"Observe"}),d.jsx("div",{className:"intro-step-body",children:"Scrub the timeline to feel pacing and parallelism."})]}),d.jsxs("div",{className:"intro-step",children:[d.jsx("div",{className:"intro-step-label",children:"Inspect"}),d.jsx("div",{className:"intro-step-body",children:"Open the bottleneck to read payloads and costs."})]}),d.jsxs("div",{className:"intro-step",children:[d.jsx("div",{className:"intro-step-label",children:"Direct"}),d.jsx("div",{className:"intro-step-body",children:"Replay from a decisive step and compare runs."})]})]}),d.jsx("div",{className:"intro-personas",role:"group","aria-label":"Select onboarding lens",children:rI.map(o=>d.jsxs("button",{type:"button",className:`ghost-button intro-persona ${r===o.id?"active":""}`,onClick:()=>i==null?void 0:i(o.id),"aria-pressed":r===o.id,"aria-label":o.label,children:[d.jsx("span",{className:"intro-persona-label",children:o.label}),d.jsx("span",{className:"intro-persona-body",children:o.body})]},o.id))}),d.jsxs("div",{className:"intro-grid",children:[d.jsx("span",{}),d.jsx("span",{}),d.jsx("span",{}),d.jsx("span",{})]}),d.jsxs("div",{className:"intro-actions",children:[d.jsx("button",{className:"primary-button",type:"button",onClick:a,children:"Start guided tour"}),n?d.jsx("button",{className:"ghost-button",type:"button",onClick:s,children:"Play story mode"}):null,d.jsx("button",{className:"ghost-button",type:"button",onClick:e,children:"Skip intro"})]})]})})}function aI({explainMode:e,storyActive:t,onStartTour:n,onStartStory:r,onToggleExplain:i,onDismiss:a}){return d.jsxs("section",{className:"hero-ribbon","aria-label":"Director briefing","data-help":!0,"data-help-indicator":!0,"data-tour":"hero","data-help-title":"Director briefing","data-help-body":"Start the tour, play story mode, or enable explain to learn the interface instantly.","data-help-placement":"bottom",children:[d.jsxs("div",{className:"hero-ribbon-top",children:[d.jsx("span",{className:"hero-eyebrow",children:"Director briefing"}),d.jsx("button",{className:"ghost-button hero-dismiss",type:"button",onClick:a,children:"Dismiss"})]}),d.jsx("div",{className:"hero-title",children:"Observe. Inspect. Direct."}),d.jsx("div",{className:"hero-subtitle",children:"A cinematic control room for agent traces. See time, read structure, then replay with confidence."}),d.jsxs("div",{className:"hero-pills",children:[d.jsx("span",{className:"hero-pill","data-tone":"observe",children:"Observe"}),d.jsx("span",{className:"hero-pill","data-tone":"inspect",children:"Inspect"}),d.jsx("span",{className:"hero-pill","data-tone":"direct",children:"Direct"})]}),d.jsxs("div",{className:"hero-actions",children:[d.jsx("button",{className:"primary-button",type:"button",onClick:n,children:"Start guided tour"}),d.jsx("button",{className:"ghost-button",type:"button",onClick:r,disabled:t,children:t?"Story running":"Play story mode"}),d.jsxs("button",{className:`ghost-button ${e?"active":""}`,type:"button",onClick:i,"aria-pressed":e,children:["Explain ",e?"On":"Off"]})]})]})}function sI({mode:e,isPlaying:t,storyActive:n,explainMode:r,hidden:i=!1,open:a,onToggleOpen:s,onTogglePlay:o,onStartStory:l,onStopStory:u,onStartTour:c,onOpenPalette:f,onShowShortcuts:h,onToggleExplain:m,onJumpToBottleneck:v}){if(i)return null;const p=t?"Pause":"Play",x=n?"Stop story":"Story mode";return a?d.jsxs("aside",{className:"quick-actions","aria-label":"Quick actions","data-help":!0,"data-help-indicator":!0,"data-tour":"quick-actions","data-help-title":"Quick actions","data-help-body":"Launch story mode, open the command palette, or jump to the bottleneck instantly.","data-help-placement":"left",children:[d.jsxs("div",{className:"quick-actions-header",children:[d.jsxs("div",{children:[d.jsx("div",{className:"quick-actions-title",children:"Quick actions"}),d.jsx("div",{className:"quick-actions-subtitle",children:"Pin demo controls close at hand."})]}),d.jsx("button",{className:"ghost-button",type:"button",onClick:s,"aria-label":"Collapse quick actions",children:"Collapse"})]}),d.jsxs("button",{className:`quick-action ${t?"active":""}`,type:"button",onClick:o,"aria-label":p,"data-help":!0,"data-help-title":"Play or pause","data-help-body":"Start or stop playback from anywhere.","data-help-placement":"left",children:[d.jsx("span",{className:"quick-action-label",children:p}),d.jsx("span",{className:"quick-action-meta",children:e==="flow"?"Cinema":"Space"})]}),d.jsxs("button",{className:`quick-action ${n?"active":""}`,type:"button",onClick:n?u:l,"aria-label":x,"data-help":!0,"data-help-title":"Story mode","data-help-body":"Auto-runs a cinematic walkthrough of the run.","data-help-placement":"left",children:[d.jsx("span",{className:"quick-action-label",children:x}),d.jsx("span",{className:"quick-action-meta",children:"S"})]}),d.jsxs("button",{className:"quick-action",type:"button",onClick:f,"aria-label":"Open command palette","data-help":!0,"data-help-title":"Command palette","data-help-body":"Search every action and jump instantly.","data-help-placement":"left",children:[d.jsx("span",{className:"quick-action-label",children:"Command"}),d.jsx("span",{className:"quick-action-meta",children:"Cmd+K"})]}),d.jsxs("button",{className:"quick-action",type:"button",onClick:c,"aria-label":"Start guided tour","data-help":!0,"data-help-title":"Guided tour","data-help-body":"Walk the interface with a curated tour.","data-help-placement":"left",children:[d.jsx("span",{className:"quick-action-label",children:"Tour"}),d.jsx("span",{className:"quick-action-meta",children:"Guide"})]}),d.jsxs("button",{className:`quick-action ${r?"active":""}`,type:"button",onClick:m,"aria-label":"Toggle explain mode","data-help":!0,"data-help-title":"Explain mode","data-help-body":"Toggle contextual overlays for every control.","data-help-placement":"left",children:[d.jsx("span",{className:"quick-action-label",children:"Explain"}),d.jsx("span",{className:"quick-action-meta",children:r?"On":"Off"})]}),d.jsxs("button",{className:"quick-action",type:"button",onClick:v,"aria-label":"Jump to bottleneck","data-help":!0,"data-help-title":"Bottleneck jump","data-help-body":"Focus instantly on the slowest step.","data-help-placement":"left",children:[d.jsx("span",{className:"quick-action-label",children:"Bottleneck"}),d.jsx("span",{className:"quick-action-meta",children:"Latency"})]}),d.jsxs("button",{className:"quick-action",type:"button",onClick:h,"aria-label":"Show shortcuts","data-help":!0,"data-help-title":"Shortcuts","data-help-body":"See the full keyboard map.","data-help-placement":"left",children:[d.jsx("span",{className:"quick-action-label",children:"Shortcuts"}),d.jsx("span",{className:"quick-action-meta",children:"?"})]})]}):d.jsxs("button",{className:"quick-actions-toggle",type:"button",onClick:s,title:"Open quick actions","aria-expanded":"false","data-help":!0,"data-tour":"quick-actions","data-help-title":"Quick actions","data-help-body":"Open the dock to access demos, shortcuts, and instant actions.","data-help-placement":"left",children:[d.jsx("span",{className:"quick-actions-toggle-label",children:"Actions"}),d.jsx("span",{className:"quick-actions-toggle-meta",children:"Dock"})]})}function oI({active:e,label:t,step:n,total:r,onStop:i,onRestart:a}){if(!e)return null;const s=r>0?(n+1)/r*100:0;return d.jsxs("div",{className:"story-banner",role:"status","aria-live":"polite",children:[d.jsxs("div",{className:"story-banner-main",children:[d.jsx("div",{className:"story-banner-title",children:"Story mode"}),d.jsx("div",{className:"story-banner-step",children:t})]}),d.jsxs("div",{className:"story-banner-actions",children:[d.jsxs("span",{className:"story-banner-count",children:[Math.min(n+1,r),"/",r]}),d.jsx("button",{className:"ghost-button",type:"button",onClick:a,children:"Restart"}),d.jsx("button",{className:"primary-button",type:"button",onClick:i,children:"Stop"})]}),d.jsx("div",{className:"story-banner-progress",children:d.jsx("span",{style:{width:`${s}%`}})})]})}const KE=/token|secret|password|api[_-]?key|authorization|bearer|session|cookie|private|ssh|credentials/i;function ov(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}function lI(e){const t=[],n=new WeakSet,r=(i,a)=>{if(Array.isArray(i)){i.forEach((s,o)=>{r(s,`${a}[${o}]`)});return}ov(i)&&(n.has(i)||(n.add(i),Object.entries(i).forEach(([s,o])=>{const l=a?`${a}.${s}`:s;KE.test(s)&&t.push(l),r(o,l)})))};return r(e,""),t}function YE(e){const t=new WeakMap,n=r=>{if(Array.isArray(r))return r.map(a=>n(a));if(!ov(r))return r;if(t.has(r))return t.get(r);const i={};return t.set(r,i),Object.entries(r).forEach(([a,s])=>{KE.test(a)?i[a]="[REDACTED]":i[a]=n(s)}),i};return n(e)}function lv(e){return ov(e)}function $0(e){return e==null||Number.isNaN(e)?"n/a":e.toString()}function uI(e){return e==null||Number.isNaN(e)?"n/a":e.toFixed(3)}function cI(e,t){return t?YE(e):e}function dI({job:e,matrix:t,safeExport:n,sensitiveKeys:r,anchorStepName:i}){const a=t.rows.map(s=>({scenarioId:s.scenarioId,name:s.name,strategy:s.strategy,status:s.status,replayTraceId:s.replayTraceId,modifications:cI(s.modifications,n),error:s.error??null,changedStepIds:s.changedStepIds,addedStepIds:s.addedStepIds,removedStepIds:s.removedStepIds,metrics:s.metrics}));return{generatedAt:new Date().toISOString(),safeExport:n,redaction:{safeExport:n,sensitiveKeys:r,policy:n?"redacted":"raw"},job:e?{id:e.id,status:e.status,createdAt:e.createdAt,startedAt:e.startedAt??null,endedAt:e.endedAt??null,scenarioCount:e.scenarioCount,completedCount:e.completedCount,failedCount:e.failedCount,canceledCount:e.canceledCount}:null,base:{traceId:t.traceId,stepId:t.stepId,anchorStepName:i??null},rows:a,causalRanking:t.causalRanking}}function fI({job:e,matrix:t,safeExport:n,anchorStepName:r}){const i=[],a=new Date().toISOString();return i.push("# Counterfactual Replay Matrix"),i.push(""),i.push(`Generated: ${a}`),i.push(`Safe export: ${n?"on":"off"}`),i.push(""),i.push("## Base trace"),i.push(`- Trace: ${t.traceId}`),i.push(`- Anchor step: ${r??t.stepId}`),i.push(""),e&&(i.push("## Job status"),i.push(`- Job: ${e.id}`),i.push(`- Status: ${e.status}`),i.push(`- Scenarios: ${e.scenarioCount} (completed ${e.completedCount}, failed ${e.failedCount}, canceled ${e.canceledCount})`),i.push("")),i.push("## Scenario outcomes"),i.push("| Scenario | Status | Wall  (ms) | Cost  (USD) | Errors  | Changed |"),i.push("| --- | --- | --- | --- | --- | --- |"),t.rows.forEach(s=>{i.push(`| ${s.name} | ${s.status} | ${$0(s.metrics.wallTimeDeltaMs)} | ${uI(s.metrics.costDeltaUsd)} | ${$0(s.metrics.errorDelta)} | ${s.metrics.changedSteps} |`)}),i.push(""),i.push("## Causal ranking"),t.causalRanking.length?t.causalRanking.slice(0,10).forEach(s=>{i.push(`- ${s.factor}: score ${s.score.toFixed(3)}, confidence ${(s.confidence*100).toFixed(0)}% (samples ${s.evidence.samples})`)}):i.push("- No causal ranking available."),i.push(""),i.push("## Redaction"),i.push(`Safe export: ${n?"enabled":"disabled"}.`),i.push(""),i.join(`
`)}const B0=["recorded","live","hybrid"],to=25,ka=[{id:"prompt-tighten",label:"Prompt tighten",description:"Shorten or focus the assistant response",name:"Prompt tighter",strategy:"hybrid",modifications:{prompt:"Return concise response"}},{id:"tool-timeout",label:"Tool timeout",description:"Extend tool timeout for flaky calls",name:"Tool timeout 45s",strategy:"live",modifications:{toolTimeoutMs:45e3}},{id:"recorded-baseline",label:"Recorded baseline",description:"Pure recorded replay for determinism",name:"Recorded baseline",strategy:"recorded",modifications:{}}],no=[{id:"latency-sweep",label:"Latency sweep",description:"Evaluate timeout adjustments across three live variants.",scenarios:[{name:"Timeout 15s",strategy:"live",modifications:{toolTimeoutMs:15e3}},{name:"Timeout 30s",strategy:"live",modifications:{toolTimeoutMs:3e4}},{name:"Timeout 45s",strategy:"live",modifications:{toolTimeoutMs:45e3}}]},{id:"prompt-spectrum",label:"Prompt spectrum",description:"Compare concise, balanced, and verbose response shaping.",scenarios:[{name:"Concise prompt",strategy:"hybrid",modifications:{prompt:"Return concise response"}},{name:"Balanced prompt",strategy:"hybrid",modifications:{prompt:"Return balanced detail response"}},{name:"Verbose prompt",strategy:"hybrid",modifications:{prompt:"Return comprehensive detailed response"}}]}];function z0(e){return e??Number.POSITIVE_INFINITY}function Ou(){return`scenario-${Math.random().toString(36).slice(2,9)}`}function Lu(e){const t=e.trim();if(!t)return{value:{}};try{const n=JSON.parse(t);return lv(n)?{value:n}:{error:"Modifications must be a JSON object."}}catch{return{error:"Modifications must be valid JSON."}}}function ms(e,t=""){const n=[];return Object.entries(e).forEach(([r,i])=>{const a=t?`${t}.${r}`:r;if(typeof i=="string"||typeof i=="number"||typeof i=="boolean"||i==null){n.push({path:a,value:i});return}lv(i)&&n.push(...ms(i,a))}),n}function hI(e,t,n){const r=t.split(".").filter(Boolean);if(r.length===0)return e;const i=JSON.parse(JSON.stringify(e));let a=i;for(let s=0;s<r.length-1;s+=1){const o=r[s],l=a[o];lv(l)||(a[o]={}),a=a[o]}return a[r[r.length-1]]=n,i}function pI(e){const t=e.trim();if(t==="true")return!0;if(t==="false")return!1;if(t==="null")return null;const n=Number(t);return!Number.isNaN(n)&&t!==""?n:e}function U0(e,t){const n=new Map(ms(e).map(i=>[i.path,i.value]));return ms(t).filter(i=>n.get(i.path)!==i.value).map(i=>({path:i.path,from:n.get(i.path)??null,to:i.value}))}function mI(e){return e===null?"null":typeof e=="string"?"string":typeof e=="number"?"number":typeof e=="boolean"?"boolean":"unknown"}function gI(e){return`${e.strategy}::${JSON.stringify(e.modifications)}`}function vI(e){const t=new Map;return e.scenarios.forEach(n=>{ms(n.modifications).forEach(r=>{const i=t.get(r.path)??new Set;i.add(mI(r.value)),t.set(r.path,i)})}),Array.from(t.entries()).filter(([,n])=>n.size>1).map(([n])=>n)}function G0(e,t){const n=t.get(e);return n?n.name:e}function yI({steps:e,anchorStepId:t,onAnchorStepChange:n,scenarios:r,onScenarioChange:i,onDuplicateScenario:a,onMoveScenario:s,onAddScenario:o,onRemoveScenario:l,onReplaceScenarios:u,onRun:c,onCancel:f,loading:h,error:m,job:v,matrix:p,safeExport:x,onOpenCompare:g}){var ln,ti,_e,yt;const[y,b]=S.useState("wallTimeDeltaMs"),[_,C]=S.useState(!0),[E,j]=S.useState(null),[T,P]=S.useState(((ln=ka[0])==null?void 0:ln.id)??""),[O,A]=S.useState(((ti=no[0])==null?void 0:ti.id)??""),[W,J]=S.useState(null),[me,B]=S.useState(null),[le,ne]=S.useState({}),[D,I]=S.useState(25),F=S.useRef(null),V=S.useMemo(()=>new Map(e.map(N=>[N.id,N])),[e]),te=S.useMemo(()=>{const N=r.map((H,U)=>H.name.trim()||`Scenario ${U+1}`),z=new Map;return N.forEach(H=>{const U=H.toLowerCase();z.set(U,(z.get(U)??0)+1)}),r.map((H,U)=>{const be=N[U],$e=be.toLowerCase(),he=Lu(H.modificationsText),st=[];he.error&&st.push(he.error),(z.get($e)??0)>1&&st.push(`Duplicate scenario name: ${be}`);const Xe=he.value??{},ce=he.value?lI(he.value):[];return{id:H.id,name:be,parsedModifications:Xe,errors:st,sensitiveKeys:ce}})},[r]),M=te.reduce((N,z)=>N+z.errors.length,0),K=r.length>to?`Scenario limit exceeded (${r.length}/${to}).`:null,ue=M>0||!!K,ye=K||(M>0?"Fix scenario errors before running.":null),Je=!h&&r.length>0&&!ue,at=S.useMemo(()=>{const z=[...(p==null?void 0:p.rows)??[]];return z.sort((H,U)=>{if(y==="name")return _?H.name.localeCompare(U.name):U.name.localeCompare(H.name);if(y==="changedSteps"){const he=H.metrics.changedSteps,st=U.metrics.changedSteps;return _?he-st:st-he}const be=z0(H.metrics[y]),$e=z0(U.metrics[y]);return _?be-$e:$e-be}),z},[p==null?void 0:p.rows,y,_]);S.useEffect(()=>{I(25)},[p==null?void 0:p.jobId,y,_]);const ht=N=>{if(N===y){C(z=>!z);return}b(N),C(!0)},Ot=te.map((N,z)=>{var H;return{name:N.name,strategy:((H=r[z])==null?void 0:H.strategy)??"hybrid",modifications:N.parsedModifications}}),bn=()=>{Je&&c(Ot)},Bn=()=>{const N=ka.find(z=>z.id===T)??ka[0];N&&u([...r,{id:Ou(),name:N.name,strategy:N.strategy,modificationsText:JSON.stringify(N.modifications,null,2)}])},$=()=>{const N=no.find(he=>he.id===O);if(!N){J("Select a valid profile.");return}const z=N.scenarios.map(he=>he.name.toLowerCase());if(new Set(z).size!==z.length){J("Profile has duplicate scenario names.");return}const U=N.scenarios.map(he=>gI(he));if(new Set(U).size!==U.length){J("Profile has duplicate scenario payloads.");return}const be=vI(N);if(be.length>0){J(`Profile has conflicting scalar types: ${be.slice(0,3).join(", ")}`);return}const $e=N.scenarios.map(he=>({id:Ou(),name:he.name,strategy:he.strategy,modificationsText:JSON.stringify(he.modifications,null,2)}));u($e),J(null),c($e.map(he=>({name:he.name,strategy:he.strategy,modifications:Lu(he.modificationsText).value??{}})))},ie=(N,z,H)=>{const U=r.find(he=>he.id===N);if(!U)return;const be=Lu(U.modificationsText);if(!be.value)return;const $e=hI(be.value,z,pI(H));i(N,{modificationsText:JSON.stringify($e,null,2)})},Z=()=>{const N={version:1,anchorStepId:t,scenarios:r.map(z=>({name:z.name,strategy:z.strategy,modificationsText:z.modificationsText}))};zm(`agent-director-scenarios-${t||"matrix"}.json`,N)},Ve=async N=>{var H;const z=(H=N.target.files)==null?void 0:H[0];if(z){N.target.value="";try{const U=await z.text(),be=JSON.parse(U),$e=Array.isArray(be.scenarios)?be.scenarios:Array.isArray(be)?be:null;if(!$e||$e.length===0){B("Scenario file must include a scenarios array.");return}if($e.length>to){B(`Scenario file exceeds ${to} scenarios.`);return}const he=$e.map((st,Xe)=>{if(!st||typeof st!="object")throw new Error("Scenario entries must be objects.");const ce=st,ni=String(ce.name??`Scenario ${Xe+1}`),kr=String(ce.strategy??"hybrid"),ia=B0.includes(kr)?kr:"hybrid",aa=typeof ce.modificationsText=="string"?ce.modificationsText:JSON.stringify(ce.modifications??{},null,2);return{id:Ou(),name:ni,strategy:ia,modificationsText:aa}});typeof be.anchorStepId=="string"&&V.has(be.anchorStepId)&&n(be.anchorStepId),u(he),B(null)}catch(U){B(U instanceof Error?U.message:"Failed to import scenario file.")}}},ae=S.useMemo(()=>{const N=te.flatMap(z=>z.sensitiveKeys);return Array.from(new Set(N))},[te]),Ae=S.useMemo(()=>{const N=(p==null?void 0:p.causalRanking)??[];return N.length===0?1:Math.max(1,...N.map(z=>Math.abs(z.score)))},[p==null?void 0:p.causalRanking]),Yt=((_e=te[0])==null?void 0:_e.parsedModifications)??{},_r=S.useMemo(()=>Object.entries(le).filter(([,z])=>z!==0).reduce((z,[H,U])=>{const be=p==null?void 0:p.causalRanking.find(st=>st.factor===H),$e=(be==null?void 0:be.score)??0,he=U/100;return z.wallTimeMs+=$e*he*1400,z.costUsd+=$e*he*.04,z.errorDelta+=$e*he*.7,z},{wallTimeMs:0,costUsd:0,errorDelta:0}),[p==null?void 0:p.causalRanking,le]),Ct=S.useMemo(()=>{const N=new Map;return((p==null?void 0:p.rows)??[]).forEach(z=>{const H=Math.abs(z.metrics.wallTimeDeltaMs??0)+Math.abs((z.metrics.costDeltaUsd??0)*1e3)+Math.abs(z.metrics.errorDelta??0)*400;z.changedStepIds.forEach(U=>{N.set(U,(N.get(U)??0)+Math.max(1,H))})}),Array.from(N.entries()).sort((z,H)=>H[1]-z[1]).slice(0,10)},[p==null?void 0:p.rows]),He=Math.max(1,...Ct.map(([,N])=>N),1),we=S.useMemo(()=>((p==null?void 0:p.causalRanking)??[]).slice(0,5).map(N=>({id:N.factor,text:`${N.factor} -> ${N.evidence.examples[0]??"observed change"} -> outcome`,confidence:N.confidence})),[p==null?void 0:p.causalRanking]),Lt=at.slice(0,D),on=()=>{var H;if(!p)return;const N=((H=V.get(t))==null?void 0:H.name)??null,z=dI({job:v,matrix:p,safeExport:x,sensitiveKeys:ae,anchorStepName:N});zm(`agent-director-matrix-${p.jobId}.json`,z)},ra=()=>{var H;if(!p)return;const N=((H=V.get(t))==null?void 0:H.name)??null,z=fI({job:v,matrix:p,safeExport:x,anchorStepName:N});WE(`agent-director-matrix-${p.jobId}.md`,z,"text/markdown")},zn=(v==null?void 0:v.status)==="queued"||(v==null?void 0:v.status)==="running",ge=E?((p==null?void 0:p.rows)??[]).find(N=>N.scenarioId===E)??null:null,ei=ge?x?YE(ge.modifications):ge.modifications:null;return d.jsxs("section",{className:"matrix-mode","data-help":!0,"data-help-title":"Matrix mode","data-help-body":"Run multiple replay scenarios from one anchor and compare outcome deltas with causal ranking.","data-help-placement":"top",children:[d.jsxs("div",{className:"matrix-panel",children:[d.jsxs("div",{className:"matrix-panel-header",children:[d.jsx("h2",{children:"Counterfactual Replay Matrix"}),d.jsx("div",{className:"matrix-job-state",children:v?d.jsxs(d.Fragment,{children:[d.jsxs("span",{className:`status-pill status-${v.status}`,children:["Job: ",v.status]}),d.jsxs("span",{children:[v.completedCount,"/",v.scenarioCount," completed"]}),v.failedCount?d.jsxs("span",{children:[v.failedCount," failed"]}):null,v.canceledCount?d.jsxs("span",{children:[v.canceledCount," canceled"]}):null]}):d.jsx("span",{children:"No job yet"})})]}),d.jsxs("div",{className:"matrix-controls",children:[d.jsxs("label",{children:["Anchor step",d.jsx("select",{value:t,onChange:N=>n(N.target.value),children:e.map(N=>d.jsxs("option",{value:N.id,children:[N.name," (",N.id,")"]},N.id))})]}),d.jsxs("label",{children:["Preset",d.jsx("select",{value:T,onChange:N=>P(N.target.value),"data-help":!0,"data-help-title":"Scenario presets","data-help-body":"Insert common experiments like prompt tweaks or recorded baselines.","data-help-placement":"bottom",children:ka.map(N=>d.jsx("option",{value:N.id,children:N.label},N.id))})]}),d.jsxs("label",{children:["Batch profile",d.jsx("select",{value:O,onChange:N=>A(N.target.value),children:no.map(N=>d.jsx("option",{value:N.id,children:N.label},N.id))})]}),d.jsx("button",{type:"button",className:"ghost-button",onClick:Bn,disabled:h,"data-help":!0,"data-help-title":"Add preset","data-help-body":"Append the selected preset as a new scenario.","data-help-placement":"bottom",children:"Add preset"}),d.jsx("button",{type:"button",className:"ghost-button",onClick:$,disabled:h,"data-help":!0,"data-help-title":"Run batch profile","data-help-body":"Loads and executes a predefined scenario orchestration profile.","data-help-placement":"bottom",children:"Run profile"}),d.jsxs("div",{className:"matrix-actions",children:[d.jsx("button",{type:"button",className:"primary-button",onClick:bn,disabled:!Je,"data-help":!0,"data-help-title":"Run matrix","data-help-body":"Execute all scenarios sequentially and gather outcome deltas.","data-help-placement":"bottom",children:h?"Running...":"Run matrix"}),d.jsx("button",{type:"button",className:"ghost-button",onClick:o,disabled:h,children:"Add scenario"}),d.jsx("button",{type:"button",className:"ghost-button",onClick:f,disabled:!zn||h,children:"Cancel job"}),d.jsx("button",{type:"button",className:"ghost-button",onClick:Z,"data-help":!0,"data-help-title":"Export scenarios","data-help-body":"Download the scenario set as JSON for reuse.","data-help-placement":"bottom",children:"Export scenarios"}),d.jsx("button",{type:"button",className:"ghost-button",onClick:()=>{var N;return(N=F.current)==null?void 0:N.click()},"data-help":!0,"data-help-title":"Import scenarios","data-help-body":"Load a scenario JSON file to repopulate the builder.","data-help-placement":"bottom",children:"Import scenarios"}),d.jsx("input",{ref:F,type:"file",accept:"application/json",onChange:Ve,className:"matrix-file-input"}),d.jsx("button",{type:"button",className:"ghost-button",onClick:on,disabled:!p,"data-help":!0,"data-help-title":"Export matrix","data-help-body":"Download the full matrix JSON with redaction metadata.","data-help-placement":"bottom",children:"Export matrix"}),d.jsx("button",{type:"button",className:"ghost-button",onClick:ra,disabled:!p,"data-help":!0,"data-help-title":"Export summary","data-help-body":"Download a markdown summary for sharing.","data-help-placement":"bottom",children:"Export summary"})]})]}),d.jsxs("div",{className:"matrix-presets",children:[ka.map(N=>d.jsxs("div",{className:"matrix-preset",children:[d.jsx("strong",{children:N.label}),d.jsx("span",{children:N.description})]},N.id)),no.filter(N=>N.id===O).map(N=>d.jsxs("div",{className:"matrix-preset profile",children:[d.jsx("strong",{children:N.label}),d.jsx("span",{children:N.description})]},N.id))]}),d.jsx("div",{className:"matrix-scenarios",children:r.map((N,z)=>{const H=te[z];return d.jsxs("article",{className:"matrix-scenario",children:[d.jsxs("div",{className:"matrix-scenario-head",children:[d.jsx("input",{value:N.name,onChange:U=>i(N.id,{name:U.target.value}),placeholder:"Scenario name"}),d.jsx("select",{value:N.strategy,onChange:U=>i(N.id,{strategy:U.target.value}),children:B0.map(U=>d.jsx("option",{value:U,children:U},U))})]}),d.jsx("textarea",{value:N.modificationsText,onChange:U=>i(N.id,{modificationsText:U.target.value}),rows:3,spellCheck:!1,"aria-label":`Scenario ${N.name} modifications`}),H?d.jsxs("div",{className:"matrix-schema-editor",children:[d.jsx("strong",{children:"Schema-aware scalar editor"}),d.jsx("div",{className:"matrix-schema-grid",children:ms(H.parsedModifications).slice(0,8).map(U=>d.jsxs("label",{className:"matrix-schema-field",children:[d.jsx("span",{children:U.path}),d.jsx("input",{value:String(U.value??""),onChange:be=>ie(N.id,U.path,be.target.value)})]},`${N.id}-${U.path}`))})]}):null,d.jsxs("div",{className:"matrix-diff-preview",children:[d.jsx("strong",{children:"Diff vs baseline"}),d.jsxs("div",{className:"matrix-diff-list",children:[U0(Yt,(H==null?void 0:H.parsedModifications)??{}).slice(0,6).map(U=>d.jsxs("div",{className:"matrix-diff-item",children:[d.jsx("span",{children:U.path}),d.jsxs("span",{children:[String(U.from)," ","->"," ",String(U.to)]})]},`${N.id}-${U.path}`)),U0(Yt,(H==null?void 0:H.parsedModifications)??{}).length===0?d.jsx("div",{className:"matrix-diff-item",children:"No scalar changes from baseline."}):null]})]}),H!=null&&H.errors.length?d.jsx("div",{className:"matrix-scenario-error",children:H.errors.map(U=>d.jsx("div",{children:U},U))}):null,H!=null&&H.sensitiveKeys.length?d.jsxs("div",{className:"matrix-scenario-warning",children:["Sensitive keys: ",H.sensitiveKeys.join(", ")]}):null,d.jsxs("div",{className:"matrix-scenario-actions",children:[d.jsx("button",{type:"button",className:"ghost-button",onClick:()=>a(N.id),disabled:h,children:"Duplicate scenario"}),d.jsx("button",{type:"button",className:"ghost-button",onClick:()=>s(N.id,"up"),disabled:h||z===0,children:"Move scenario up"}),d.jsx("button",{type:"button",className:"ghost-button",onClick:()=>s(N.id,"down"),disabled:h||z===r.length-1,children:"Move scenario down"}),d.jsx("button",{type:"button",className:"ghost-button",onClick:()=>l(N.id),disabled:r.length<=1,children:"Remove"})]})]},N.id)})}),ye?d.jsx("div",{className:"error-banner",children:ye}):null,me?d.jsx("div",{className:"error-banner",children:me}):null,W?d.jsx("div",{className:"error-banner",children:W}):null,m?d.jsx("div",{className:"error-banner",children:m}):null]}),d.jsxs("div",{className:"matrix-results",children:[d.jsxs("div",{className:"matrix-table-wrap",children:[d.jsxs("table",{className:"matrix-table",children:[d.jsx("thead",{children:d.jsxs("tr",{children:[d.jsx("th",{children:d.jsx("button",{type:"button",className:"table-sort",onClick:()=>ht("name"),children:"Scenario"})}),d.jsx("th",{children:"Status"}),d.jsx("th",{children:d.jsx("button",{type:"button",className:"table-sort",onClick:()=>ht("wallTimeDeltaMs"),children:"Wall  (ms)"})}),d.jsx("th",{children:d.jsx("button",{type:"button",className:"table-sort",onClick:()=>ht("costDeltaUsd"),children:"Cost  (USD)"})}),d.jsx("th",{children:d.jsx("button",{type:"button",className:"table-sort",onClick:()=>ht("errorDelta"),children:"Errors "})}),d.jsx("th",{children:d.jsx("button",{type:"button",className:"table-sort",onClick:()=>ht("changedSteps"),children:"Changed"})}),d.jsx("th",{children:"Details"}),d.jsx("th",{children:"Compare"})]})}),d.jsx("tbody",{children:at.length===0?d.jsx("tr",{children:d.jsx("td",{colSpan:8,children:"No matrix results yet. Run a job to populate this table."})}):Lt.map(N=>d.jsxs("tr",{children:[d.jsx("td",{children:N.name}),d.jsx("td",{title:N.error??void 0,children:N.status}),d.jsx("td",{children:N.metrics.wallTimeDeltaMs??"n/a"}),d.jsx("td",{children:N.metrics.costDeltaUsd??"n/a"}),d.jsx("td",{children:N.metrics.errorDelta??"n/a"}),d.jsx("td",{children:N.metrics.changedSteps}),d.jsx("td",{children:d.jsx("button",{type:"button",className:"ghost-button",onClick:()=>j(N.scenarioId),children:"Details"})}),d.jsx("td",{children:d.jsx("button",{type:"button",className:"ghost-button",disabled:!N.replayTraceId,onClick:()=>N.replayTraceId&&g(N.replayTraceId),children:"Open"})})]},N.scenarioId))})]}),at.length>Lt.length?d.jsx("div",{className:"matrix-table-more",children:d.jsxs("button",{type:"button",className:"ghost-button",onClick:()=>I(N=>Math.min(at.length,N+25)),children:["Load more rows (",Lt.length,"/",at.length,")"]})}):null]}),d.jsxs("aside",{className:"matrix-causal",children:[d.jsx("h3",{children:"Causal ranking"}),(yt=p==null?void 0:p.causalRanking)!=null&&yt.length?d.jsxs(d.Fragment,{children:[d.jsx("ul",{children:p.causalRanking.slice(0,8).map(N=>d.jsxs("li",{children:[d.jsxs("div",{className:"factor-row",children:[d.jsx("strong",{children:N.factor}),d.jsxs("span",{children:["score ",N.score.toFixed(3)]})]}),d.jsx("div",{className:"factor-bar-track",role:"presentation",children:d.jsx("div",{className:`factor-bar-fill ${N.score>=0?"positive":"negative"}`,style:{width:`${Math.max(6,Math.abs(N.score)/Ae*100)}%`}})}),d.jsxs("div",{className:"factor-meta",children:["confidence ",(N.confidence*100).toFixed(0),"%  samples ",N.evidence.samples]}),d.jsx("input",{type:"range",min:-100,max:100,value:le[N.factor]??0,"aria-label":`Simulate ${N.factor}`,onChange:z=>ne(H=>({...H,[N.factor]:Number(z.target.value)}))}),N.evidence.examples.length?d.jsx("div",{className:"factor-chips",children:N.evidence.examples.map(z=>d.jsx("span",{className:"factor-chip",children:z},z))}):null]},N.factor))}),d.jsxs("div",{className:"matrix-projected",children:[d.jsx("h4",{children:"Projected impact (simulation)"}),d.jsxs("div",{className:"matrix-projected-grid",children:[d.jsxs("span",{children:["Wall  ",_r.wallTimeMs.toFixed(0)," ms"]}),d.jsxs("span",{children:["Cost  ",_r.costUsd.toFixed(3)," USD"]}),d.jsxs("span",{children:["Error  ",_r.errorDelta.toFixed(2)]})]})]}),d.jsxs("div",{className:"matrix-heatmap",children:[d.jsx("h4",{children:"Step influence heatmap"}),Ct.map(([N,z])=>d.jsxs("div",{className:"matrix-heatmap-row",children:[d.jsx("span",{children:G0(N,V)}),d.jsx("span",{className:"matrix-heatmap-bar",style:{width:`${Math.max(5,z/He*100)}%`}})]},N)),Ct.length===0?d.jsx("p",{children:"No influence data yet."}):null]}),d.jsxs("div",{className:"matrix-paths",children:[d.jsx("h4",{children:"Causal path explorer"}),we.map(N=>d.jsxs("div",{className:"matrix-path-item",children:[d.jsx("span",{children:N.text}),d.jsxs("span",{children:[(N.confidence*100).toFixed(0),"%"]})]},N.id)),we.length===0?d.jsx("p",{children:"No paths available."}):null]})]}):d.jsx("p",{children:"No causal ranking yet."})]}),ge?d.jsxs("aside",{className:"matrix-detail",role:"dialog","aria-label":"Scenario details",children:[d.jsxs("div",{className:"matrix-detail-header",children:[d.jsxs("div",{children:[d.jsx("h3",{children:"Scenario details"}),d.jsxs("p",{className:"matrix-detail-subtitle",children:[ge.name,"  ",ge.status]})]}),d.jsx("button",{type:"button",className:"ghost-button",onClick:()=>j(null),children:"Close"})]}),d.jsxs("div",{className:"matrix-detail-grid",children:[d.jsxs("div",{className:"matrix-detail-block",children:[d.jsx("h4",{children:"Modifications"}),x?d.jsx("p",{className:"matrix-detail-note",children:"Safe export enabled: sensitive keys are redacted."}):null,d.jsx("pre",{children:JSON.stringify(ei??{},null,2)})]}),d.jsxs("div",{className:"matrix-detail-block",children:[d.jsx("h4",{children:"Change summary"}),d.jsxs("div",{className:"matrix-detail-metrics",children:[d.jsxs("span",{children:["Changed: ",ge.metrics.changedSteps]}),d.jsxs("span",{children:["Added: ",ge.metrics.addedSteps]}),d.jsxs("span",{children:["Removed: ",ge.metrics.removedSteps]}),d.jsxs("span",{children:["Invalidated: ",ge.metrics.invalidatedStepCount]})]}),d.jsxs("div",{className:"matrix-detail-steps",children:[d.jsx("strong",{children:"Top changed steps"}),d.jsx("div",{className:"matrix-step-chips",children:ge.changedStepIds.length?ge.changedStepIds.slice(0,6).map(N=>d.jsx("span",{className:"matrix-step-chip",title:N,children:G0(N,V)},N)):d.jsx("span",{className:"matrix-step-chip",children:"None"})}),ge.changedStepIds.length>6?d.jsxs("div",{className:"matrix-step-more",children:["+",ge.changedStepIds.length-6," more steps changed"]}):null]}),ge.error?d.jsx("div",{className:"matrix-detail-error",children:ge.error}):null]})]})]}):null]})]})}const ro=["latency storm","cache divergence","tool timeout chain","stale prompt vector","schema mismatch surge"],H0=[{id:"seasonal-incident-sprint",title:"Resolve 3 raid objectives",goal:3,rewardCredits:120},{id:"boss-shutdown",title:"Defeat one boss encounter",goal:1,rewardCredits:200},{id:"guild-push",title:"Complete 2 guild operations",goal:2,rewardCredits:160},{id:"timeline-weaver",title:"Merge 2 timeline forks",goal:2,rewardCredits:150}],bI={stability_patch:{credits:20,materials:12},precision_lens:{credits:28,materials:16},overclock_core:{credits:42,materials:24}};function Fe(e,t,n){return Math.min(n,Math.max(t,e))}function xI(e){let t=0;for(let n=0;n<e.length;n+=1)t=(t*31+e.charCodeAt(n))%1e5;return t}function QE(e,t,n){const r=ro[(e+t)%ro.length],i=ro[(e+t+2)%ro.length];return{id:`mission-${t}-${(e+t)%997}`,title:`Scenario Depth ${t}`,difficulty:Fe(1+Math.floor(t/2),1,10),hazards:[r,i,...n.slice(-1)],rewardCredits:60+t*15}}function wI(){return[{id:"node-alpha",title:"Signal Fracture",body:"Telemetry divergence emerges across parallel tool paths.",choices:[{id:"alpha-risk",label:"Push aggressive branch optimization",nextNodeId:"node-beta",tensionDelta:12,mutator:"risk-surge"},{id:"alpha-safe",label:"Stabilize and preserve deterministic flow",nextNodeId:"node-beta",tensionDelta:-5,mutator:"stability-first"}]},{id:"node-beta",title:"Protocol Fork",body:"The team must choose speed versus interpretability under pressure.",choices:[{id:"beta-speed",label:"Favor speed and absorb uncertainty",nextNodeId:"node-gamma",tensionDelta:8,mutator:"throughput-boost"},{id:"beta-clarity",label:"Favor clarity and route through guardrails",nextNodeId:"node-gamma",tensionDelta:-3,mutator:"clarity-path"}]},{id:"node-gamma",title:"Final Directive",body:"Command has one move left before the run locks in.",choices:[{id:"gamma-strike",label:"Launch decisive strike sequence",nextNodeId:"node-alpha",tensionDelta:10,mutator:"strike-loop"},{id:"gamma-reset",label:"Reset tempo and rebuild confidence",nextNodeId:"node-alpha",tensionDelta:-6,mutator:"tempo-reset"}]}]}function JE(e,t){return{...H0[(e+t)%H0.length],progress:0,completed:!1}}function XE(e,t){const n=[...e,t];return Array.from(new Set(n)).slice(-6)}function Um(e,t,n){return{...e,campaign:{...e.campaign,depth:t,mutators:n,currentMission:QE(e.seed,t,n)}}}function W0(e){const t=xI(e),n=["baseline"];return{seed:t,raid:{party:["director"],roles:{director:"strategist"},objectives:[{id:"obj-root-cause",label:"Identify root cause chain",progress:0,target:100,completed:!1},{id:"obj-recover",label:"Recover operational stability",progress:0,target:100,completed:!1},{id:"obj-harden",label:"Harden replay strategy",progress:0,target:100,completed:!1}],completed:!1},campaign:{depth:1,lives:3,completedMissionIds:[],mutators:n,currentMission:QE(t,1,n)},narrative:{currentNodeId:"node-alpha",nodes:wI(),history:[],tension:35},skills:{points:6,nodes:[{id:"skill-focus",label:"Focus Matrix",cost:2,requires:[],unlocked:!1},{id:"skill-resilience",label:"Resilience Mesh",cost:2,requires:[],unlocked:!1},{id:"skill-surge",label:"Surge Compiler",cost:3,requires:["skill-focus"],unlocked:!1},{id:"skill-echo",label:"Echo Anticipator",cost:3,requires:["skill-resilience"],unlocked:!1}],loadout:{capacity:3,equipped:[]}},pvp:{round:0,stability:72,sabotage:28,fog:40,winner:null},time:{activeForkId:"primary",forks:[{id:"primary",label:"Primary timeline",playheadMs:0,history:[0]}]},boss:{name:"The Causality Hydra",phase:1,hp:320,maxHp:320,enraged:!1},director:{risk:30,hint:"Start with the bottleneck path and branch cautiously.",recommendedModifier:"stability_patch",lastOutcome:"mixed"},economy:{credits:140,materials:90,crafted:[]},guild:{name:"Trace Guild",members:4,operationsScore:0,eventsCompleted:0},cinematic:{queue:[]},liveops:{season:`Season-${2026+t%2}`,week:1,challenge:JE(t,1)}}}function SI(e,t,n){if(!t.trim())return e;const r=e.raid.party.includes(t)?e.raid.party:[...e.raid.party,t];return{...e,raid:{...e.raid,party:r,roles:{...e.raid.roles,[t]:n}}}}function _I(e,t,n){const r=e.raid.objectives.map(s=>{if(s.id!==t)return s;const o=Fe(s.progress+n,0,s.target);return{...s,progress:o,completed:o>=s.target}}),i=r.every(s=>s.completed),a=i&&!e.raid.completed?180:0;return{...e,raid:{...e.raid,objectives:r,completed:i},economy:{...e.economy,credits:e.economy.credits+a}}}function K0(e,t){const n=e.campaign.currentMission;if(t){const a=e.campaign.depth+1,s=Um(e,a,e.campaign.mutators);return{...s,campaign:{...s.campaign,completedMissionIds:[...s.campaign.completedMissionIds,n.id]},economy:{...s.economy,credits:s.economy.credits+n.rewardCredits,materials:s.economy.materials+14},director:{...s.director,lastOutcome:"success"}}}const r=Fe(e.campaign.lives-1,0,3),i=Um(e,e.campaign.depth,XE(e.campaign.mutators,"failure-loop"));return{...i,campaign:{...i.campaign,lives:r},director:{...i.director,lastOutcome:"failure"}}}function kI(e,t){const n=e.narrative.nodes.find(o=>o.id===e.narrative.currentNodeId),r=n==null?void 0:n.choices.find(o=>o.id===t);if(!n||!r)return e;const i=Fe(e.narrative.tension+r.tensionDelta,0,100),a=XE(e.campaign.mutators,r.mutator),s=Um(e,e.campaign.depth,a);return{...s,narrative:{...s.narrative,currentNodeId:r.nextNodeId,history:[...s.narrative.history,{nodeId:n.id,choiceId:r.id}],tension:i}}}function CI(e,t){const n=e.skills.nodes.find(a=>a.id===t);if(!n||n.unlocked)return e;const r=new Set(e.skills.nodes.filter(a=>a.unlocked).map(a=>a.id));return!n.requires.every(a=>r.has(a))||e.skills.points<n.cost?e:{...e,skills:{...e.skills,points:e.skills.points-n.cost,nodes:e.skills.nodes.map(a=>a.id===t?{...a,unlocked:!0}:a)}}}function EI(e,t){const n=e.skills.nodes.find(r=>r.id===t);return!(n!=null&&n.unlocked)||e.skills.loadout.equipped.includes(t)||e.skills.loadout.equipped.length>=e.skills.loadout.capacity?e:{...e,skills:{...e.skills,loadout:{...e.skills.loadout,equipped:[...e.skills.loadout.equipped,t]}}}}function qu(e,t){const n={...e.pvp};return t==="sabotage"?(n.sabotage=Fe(n.sabotage+13,0,100),n.stability=Fe(n.stability-11,0,100),n.fog=Fe(n.fog+9,0,100)):t==="stabilize"?(n.stability=Fe(n.stability+14,0,100),n.sabotage=Fe(n.sabotage-8,0,100),n.fog=Fe(n.fog-6,0,100)):(n.fog=Fe(n.fog-16,0,100),n.stability=Fe(n.stability+3,0,100),n.sabotage=Fe(n.sabotage-4,0,100)),n.round+=1,n.stability<=0?n.winner="saboteur":n.sabotage<=0?n.winner="operator":n.round>=10&&(n.winner=n.stability>=n.sabotage?"operator":"saboteur"),{...e,pvp:n}}function jI(e,t,n){const r=`fork-${e.time.forks.length+1}`,i={id:r,label:t.trim()||r,playheadMs:Fe(n,0,36e5),history:[Fe(n,0,36e5)]};return{...e,time:{...e.time,activeForkId:r,forks:[...e.time.forks,i]}}}function TI(e,t){const n=e.time.activeForkId,r=e.time.forks.map(i=>{if(i.id!==n)return i;const a=Fe(i.playheadMs-Math.abs(t),0,36e5);return{...i,playheadMs:a,history:[...i.history,a]}});return{...e,time:{...e.time,forks:r}}}function NI(e,t){if(t==="primary")return e;const n=e.time.forks.find(a=>a.id===t),r=e.time.forks.find(a=>a.id==="primary");if(!n||!r)return e;const i={...r,playheadMs:n.playheadMs,history:[...r.history,n.playheadMs]};return{...e,time:{activeForkId:"primary",forks:[i,...e.time.forks.filter(a=>a.id!=="primary"&&a.id!==t)]}}}function Fu(e,t){const n=t==="exploit"?42:t==="strike"?24:8,r=Fe(e.boss.hp-n,0,e.boss.maxHp),i=r/e.boss.maxHp,a=i<=.33?3:i<=.66?2:1;return{...e,boss:{...e.boss,hp:r,phase:a,enraged:a===3||r<=e.boss.maxHp*.2}}}function MI(e,t){const n=t.failures*12+t.retries*4+(t.latencyMs>1400?8:0),r=Fe(e.director.risk+n,0,100),i=t.failures>0?"Prioritize failure triage and run a stabilizing replay branch.":t.latencyMs>1400?"Latency pressure detected. Reduce fan-out and tighten tool boundaries.":"Momentum is stable. Push a high-confidence optimization branch.",a=t.failures>1?"stability_patch":t.latencyMs>1400?"precision_lens":"overclock_core",s=t.failures>0?"failure":"success";return{...e,director:{risk:r,hint:i,recommendedModifier:a,lastOutcome:s}}}function Vu(e,t){const n=bI[t];if(!n||e.economy.credits<n.credits||e.economy.materials<n.materials)return e;const r=e.economy.crafted.includes(t)?e.economy.crafted:[...e.economy.crafted,t];let i={...e,economy:{...e.economy,credits:e.economy.credits-n.credits,materials:e.economy.materials-n.materials,crafted:r}};return t==="stability_patch"&&(i={...i,pvp:{...i.pvp,stability:Fe(i.pvp.stability+8,0,100)}}),t==="precision_lens"&&(i={...i,raid:{...i.raid,objectives:i.raid.objectives.map((a,s)=>s===0?{...a,progress:Fe(a.progress+10,0,a.target),completed:Fe(a.progress+10,0,a.target)>=a.target}:a)}}),t==="overclock_core"&&(i={...i,boss:{...i.boss,hp:Fe(i.boss.hp-16,0,i.boss.maxHp)}}),i}function Y0(e,t){const n=Math.round(t);return{...e,guild:{...e.guild,operationsScore:e.guild.operationsScore+n,eventsCompleted:e.guild.eventsCompleted+(n>0?1:0)},economy:{...e.economy,credits:e.economy.credits+Math.max(0,n*3)}}}function Q0(e,t,n,r){const i={id:`event-${e.cinematic.queue.length+1}-${e.seed%1e3}`,type:t,message:n,intensity:r,at:Date.now()};return{...e,cinematic:{queue:[i,...e.cinematic.queue].slice(0,12)}}}function PI(e){const t=e.liveops.week+1,n=JE(e.seed,t);return{...e,liveops:{...e.liveops,week:t,challenge:n}}}function RI(e,t,n){return Math.min(n,Math.max(t,e))}function AI({state:e,playheadMs:t,onUpdate:n,session:r,playerId:i,sessionError:a,onCreateSession:s,onJoinSession:o,onLeaveSession:l,onDispatchAction:u,guild:c,onCreateGuild:f,onJoinGuild:h,onScheduleGuildEvent:m,onCompleteGuildEvent:v}){const[p,x]=S.useState(""),[g,y]=S.useState("strategist"),[b,_]=S.useState("alt path"),[C,E]=S.useState("Night Ops"),[j,T]=S.useState(""),[P,O]=S.useState("operator"),[A,W]=S.useState("guild-night-ops"),[J,me]=S.useState("Night Ops Guild"),[B,le]=S.useState("Weekly Raid Drill"),[ne,D]=S.useState("2026-02-16T20:00:00Z"),I=!!(r!=null&&r.id&&u),F=(M,K,ue)=>{if(I){u==null||u(M,K);return}n(ue)},V=S.useMemo(()=>e.narrative.nodes.find(M=>M.id===e.narrative.currentNodeId),[e.narrative.currentNodeId,e.narrative.nodes]),te=S.useMemo(()=>{var ue;const M=[e.raid.completed,e.campaign.depth>=3,e.narrative.history.length>=2,e.skills.loadout.equipped.length>=2,e.pvp.round>=3||e.pvp.winner!=null,e.time.forks.length>=2||((ue=e.time.forks[0])==null?void 0:ue.history.length)>1,e.boss.hp<e.boss.maxHp,e.director.lastOutcome!=="mixed",e.economy.crafted.length>=1,e.guild.operationsScore>0,e.cinematic.queue.length>=1,e.liveops.week>=2],K=M.filter(Boolean).length;return{done:K,total:M.length,pct:Math.round(K/M.length*100)}},[e]);return d.jsxs("section",{className:"gameplay-mode",children:[d.jsxs("header",{className:"gameplay-header",children:[d.jsxs("div",{children:[d.jsx("h2",{children:"Gameplay Command Center"}),d.jsx("p",{children:"World-class mechanics stack: raids, campaign, narrative, PvP, time control, boss runs, and liveops."}),d.jsxs("div",{className:"gameplay-inline",children:[d.jsx("input",{className:"search-input",value:C,onChange:M=>E(M.target.value),placeholder:"Session name","aria-label":"Session name"}),d.jsx("button",{className:"ghost-button",type:"button",onClick:()=>s==null?void 0:s(C),children:"Create multiplayer session"}),d.jsx("input",{className:"search-input",value:j,onChange:M=>T(M.target.value),placeholder:"Session id","aria-label":"Join session id"}),d.jsxs("select",{value:P,onChange:M=>O(M.target.value),children:[d.jsx("option",{value:"strategist",children:"Strategist"}),d.jsx("option",{value:"operator",children:"Operator"}),d.jsx("option",{value:"analyst",children:"Analyst"}),d.jsx("option",{value:"saboteur",children:"Saboteur"})]}),d.jsx("button",{className:"ghost-button",type:"button",onClick:()=>o==null?void 0:o(j,i??"director",P),children:"Join session"}),r!=null&&r.id?d.jsx("button",{className:"ghost-button",type:"button",onClick:()=>l==null?void 0:l(),children:"Leave session"}):null]}),d.jsxs("p",{children:["Session: ",(r==null?void 0:r.id)??"local-only"," ",i?` Player ${i}`:""," ",r?` Version ${r.version}`:""]}),a?d.jsx("p",{children:a}):null]}),d.jsxs("div",{className:"gameplay-completion","aria-label":"Gameplay completion",children:[d.jsxs("strong",{children:[te.done,"/",te.total]}),d.jsxs("span",{children:[te.pct,"% complete"]})]})]}),d.jsxs("div",{className:"gameplay-grid",children:[d.jsxs("article",{className:"gameplay-card",children:[d.jsx("h3",{children:"1) Co-op Incident Raids"}),d.jsxs("p",{children:["Party: ",e.raid.party.length," members"]}),d.jsxs("div",{className:"gameplay-inline",children:[d.jsx("input",{className:"search-input",value:p,onChange:M=>x(M.target.value),placeholder:"Member name","aria-label":"Raid member name"}),d.jsxs("select",{value:g,onChange:M=>y(M.target.value),children:[d.jsx("option",{value:"strategist",children:"Strategist"}),d.jsx("option",{value:"operator",children:"Operator"}),d.jsx("option",{value:"analyst",children:"Analyst"}),d.jsx("option",{value:"saboteur",children:"Saboteur"})]}),d.jsx("button",{className:"ghost-button",type:"button",onClick:()=>{p.trim()&&(I?o==null||o((r==null?void 0:r.id)??"",p.trim(),g):n(M=>SI(M,p.trim(),g)),x(""))},children:"Add member"})]}),d.jsx("div",{className:"gameplay-objectives",children:e.raid.objectives.map(M=>d.jsxs("div",{className:"gameplay-objective",children:[d.jsx("span",{children:M.label}),d.jsxs("span",{children:[M.progress,"/",M.target]}),d.jsx("button",{className:"ghost-button",type:"button",onClick:()=>F("raid.objective_progress",{objective_id:M.id,delta:25},K=>_I(K,M.id,25)),children:"+25"})]},M.id))})]}),d.jsxs("article",{className:"gameplay-card",children:[d.jsx("h3",{children:"2) Roguelike Scenario Campaign"}),d.jsxs("p",{children:["Depth ",e.campaign.depth,"  Lives ",e.campaign.lives]}),d.jsxs("p",{children:[e.campaign.currentMission.title," (difficulty ",e.campaign.currentMission.difficulty,")"]}),d.jsxs("div",{className:"gameplay-inline",children:[d.jsx("button",{className:"primary-button",type:"button",onClick:()=>F("campaign.resolve_mission",{success:!0},M=>K0(M,!0)),children:"Mission success"}),d.jsx("button",{className:"ghost-button",type:"button",onClick:()=>F("campaign.resolve_mission",{success:!1},M=>K0(M,!1)),children:"Mission fail"})]})]}),d.jsxs("article",{className:"gameplay-card",children:[d.jsx("h3",{children:"3) Branching Narrative Director"}),d.jsx("p",{children:V==null?void 0:V.title}),d.jsxs("p",{children:["Tension ",e.narrative.tension]}),d.jsx("div",{className:"gameplay-list",children:((V==null?void 0:V.choices)??[]).map(M=>d.jsx("button",{className:"ghost-button",type:"button",onClick:()=>F("narrative.choose",{choice_id:M.id},K=>kI(K,M.id)),children:M.label},M.id))})]}),d.jsxs("article",{className:"gameplay-card",children:[d.jsx("h3",{children:"4) Skill Tree + Loadout"}),d.jsxs("p",{children:["Points ",e.skills.points,"  Equipped ",e.skills.loadout.equipped.length,"/",e.skills.loadout.capacity]}),d.jsx("div",{className:"gameplay-list",children:e.skills.nodes.map(M=>d.jsxs("div",{className:"gameplay-node",children:[d.jsxs("span",{children:[M.label," (",M.cost,")"]}),d.jsx("button",{className:"ghost-button",type:"button",onClick:()=>F("skills.unlock",{player_id:i??"director",skill_id:M.id},K=>CI(K,M.id)),children:M.unlocked?"Unlocked":"Unlock"}),d.jsx("button",{className:"ghost-button",type:"button",onClick:()=>F("skills.equip",{player_id:i??"director",skill_id:M.id},K=>EI(K,M.id)),children:"Equip"})]},M.id))})]}),d.jsxs("article",{className:"gameplay-card",children:[d.jsx("h3",{children:"5) Asymmetric PvP"}),d.jsxs("p",{children:["Round ",e.pvp.round,"  Stability ",e.pvp.stability,"  Sabotage ",e.pvp.sabotage]}),d.jsxs("div",{className:"gameplay-inline",children:[d.jsx("button",{className:"ghost-button",type:"button",onClick:()=>F("pvp.act",{action:"sabotage"},M=>qu(M,"sabotage")),children:"Sabotage"}),d.jsx("button",{className:"ghost-button",type:"button",onClick:()=>F("pvp.act",{action:"stabilize"},M=>qu(M,"stabilize")),children:"Stabilize"}),d.jsx("button",{className:"ghost-button",type:"button",onClick:()=>F("pvp.act",{action:"scan"},M=>qu(M,"scan")),children:"Scan"})]})]}),d.jsxs("article",{className:"gameplay-card",children:[d.jsx("h3",{children:"6) Time Manipulation"}),d.jsxs("p",{children:["Active fork: ",e.time.activeForkId]}),d.jsxs("div",{className:"gameplay-inline",children:[d.jsx("input",{className:"search-input",value:b,onChange:M=>_(M.target.value),"aria-label":"Fork label"}),d.jsx("button",{className:"ghost-button",type:"button",onClick:()=>F("time.create_fork",{label:b,playhead_ms:t},M=>jI(M,b,t)),children:"Create fork"}),d.jsx("button",{className:"ghost-button",type:"button",onClick:()=>F("time.rewind",{amount_ms:1e3},M=>TI(M,1e3)),children:"Rewind 1s"}),d.jsx("button",{className:"ghost-button",type:"button",onClick:()=>F("time.merge",{fork_id:e.time.activeForkId},M=>NI(M,M.time.activeForkId)),children:"Merge"})]})]}),d.jsxs("article",{className:"gameplay-card",children:[d.jsx("h3",{children:"7) Boss Encounter Runs"}),d.jsxs("p",{children:[e.boss.name,"  Phase ",e.boss.phase,"  HP ",e.boss.hp,"/",e.boss.maxHp]}),d.jsxs("div",{className:"gameplay-inline",children:[d.jsx("button",{className:"ghost-button",type:"button",onClick:()=>F("boss.act",{action:"strike"},M=>Fu(M,"strike")),children:"Strike"}),d.jsx("button",{className:"ghost-button",type:"button",onClick:()=>F("boss.act",{action:"shield"},M=>Fu(M,"shield")),children:"Shield"}),d.jsx("button",{className:"ghost-button",type:"button",onClick:()=>F("boss.act",{action:"exploit"},M=>Fu(M,"exploit")),children:"Exploit"})]})]}),d.jsxs("article",{className:"gameplay-card",children:[d.jsx("h3",{children:"8) Adaptive AI Dungeon Master"}),d.jsxs("p",{children:["Risk ",e.director.risk,"  Outcome ",e.director.lastOutcome]}),d.jsx("p",{children:e.director.hint}),d.jsx("button",{className:"ghost-button",type:"button",onClick:()=>{var ye;const M=e.pvp.sabotage>e.pvp.stability?2:0,K=Math.floor((((ye=e.raid.objectives[0])==null?void 0:ye.progress)??0)/40),ue=900+e.pvp.fog*10;F("director.evaluate",{failures:M,retries:K,latency_ms:ue},Je=>MI(Je,{failures:M,retries:K,latencyMs:ue}))},children:"Recompute guidance"})]}),d.jsxs("article",{className:"gameplay-card",children:[d.jsx("h3",{children:"9) Mission Economy + Crafting"}),d.jsxs("p",{children:["Credits ",e.economy.credits,"  Materials ",e.economy.materials]}),d.jsxs("div",{className:"gameplay-inline",children:[d.jsx("button",{className:"ghost-button",type:"button",onClick:()=>F("economy.craft",{recipe_id:"stability_patch"},M=>Vu(M,"stability_patch")),children:"Craft stability patch"}),d.jsx("button",{className:"ghost-button",type:"button",onClick:()=>F("economy.craft",{recipe_id:"precision_lens"},M=>Vu(M,"precision_lens")),children:"Craft precision lens"}),d.jsx("button",{className:"ghost-button",type:"button",onClick:()=>F("economy.craft",{recipe_id:"overclock_core"},M=>Vu(M,"overclock_core")),children:"Craft overclock core"})]})]}),d.jsxs("article",{className:"gameplay-card",children:[d.jsx("h3",{children:"10) Guild Operations"}),d.jsxs("p",{children:[e.guild.name,"  Ops score ",e.guild.operationsScore,"  Events ",e.guild.eventsCompleted]}),d.jsxs("div",{className:"gameplay-inline",children:[d.jsx("input",{className:"search-input",value:A,onChange:M=>W(M.target.value),placeholder:"Guild id","aria-label":"Guild id"}),d.jsx("input",{className:"search-input",value:J,onChange:M=>me(M.target.value),placeholder:"Guild name","aria-label":"Guild name"}),d.jsx("button",{className:"ghost-button",type:"button",onClick:()=>f==null?void 0:f(A,J),children:"Create guild"}),d.jsx("button",{className:"ghost-button",type:"button",onClick:()=>h==null?void 0:h(A,p.trim()||i||"director"),children:"Join guild"})]}),d.jsxs("div",{className:"gameplay-inline",children:[d.jsx("input",{className:"search-input",value:B,onChange:M=>le(M.target.value),placeholder:"Event title","aria-label":"Guild event title"}),d.jsx("input",{className:"search-input",value:ne,onChange:M=>D(M.target.value),placeholder:"2026-02-16T20:00:00Z","aria-label":"Guild event schedule"}),d.jsx("button",{className:"ghost-button",type:"button",onClick:()=>m==null?void 0:m(A,B,ne),children:"Schedule event"})]}),c?d.jsxs("div",{className:"gameplay-list",children:[d.jsxs("p",{children:[c.member_count," members  Score ",c.operations_score]}),c.scoreboard.slice(0,4).map(M=>d.jsxs("div",{className:"gameplay-node",children:[d.jsx("span",{children:M.player_id}),d.jsx("span",{children:M.score})]},M.player_id)),c.events.slice(-3).map(M=>d.jsxs("div",{className:"gameplay-node",children:[d.jsx("span",{children:M.title}),d.jsx("button",{className:"ghost-button",type:"button",onClick:()=>v==null?void 0:v(c.id,M.id,10),children:"Complete"})]},M.id))]}):null,d.jsxs("div",{className:"gameplay-inline",children:[d.jsx("button",{className:"ghost-button",type:"button",onClick:()=>F("guild.op",{impact:6},M=>Y0(M,6)),children:"Positive op"}),d.jsx("button",{className:"ghost-button",type:"button",onClick:()=>F("guild.op",{impact:-3},M=>Y0(M,-3)),children:"Risky op"})]})]}),d.jsxs("article",{className:"gameplay-card",children:[d.jsx("h3",{children:"11) Cinematic Event Engine"}),d.jsxs("p",{children:[e.cinematic.queue.length," queued events"]}),d.jsxs("div",{className:"gameplay-inline",children:[d.jsx("button",{className:"ghost-button",type:"button",onClick:()=>F("cinematic.emit",{event_type:"critical",message:"Critical cascade detected",intensity:3},M=>Q0(M,"critical","Critical cascade detected",3)),children:"Critical beat"}),d.jsx("button",{className:"ghost-button",type:"button",onClick:()=>F("cinematic.emit",{event_type:"success",message:"System stabilizing",intensity:2},M=>Q0(M,"success","System stabilizing",2)),children:"Success beat"})]})]}),d.jsxs("article",{className:"gameplay-card",children:[d.jsx("h3",{children:"12) Seasonal LiveOps"}),d.jsxs("p",{children:[e.liveops.season,"  Week ",e.liveops.week]}),d.jsx("p",{children:e.liveops.challenge.title}),d.jsxs("div",{className:"gameplay-inline",children:[d.jsx("button",{className:"ghost-button",type:"button",onClick:()=>F("liveops.advance_week",{},M=>PI(M)),children:"Next week"}),d.jsx("button",{className:"ghost-button",type:"button",onClick:()=>F("liveops.progress",{delta:1},M=>({...M,liveops:{...M.liveops,challenge:{...M.liveops.challenge,progress:RI(M.liveops.challenge.progress+1,0,M.liveops.challenge.goal),completed:M.liveops.challenge.progress+1>=M.liveops.challenge.goal}}})),children:"Progress challenge"})]})]})]})]})}const ZE=S.createContext({});function II(e){const t=S.useRef(null);return t.current===null&&(t.current=e()),t.current}const uv=S.createContext(null),ej=S.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});function DI(e=!0){const t=S.useContext(uv);if(t===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:i}=t,a=S.useId();S.useEffect(()=>{e&&i(a)},[e]);const s=S.useCallback(()=>e&&r&&r(a),[a,r,e]);return!n&&r?[!1,s]:[!0]}const cv=typeof window<"u",OI=cv?S.useLayoutEffect:S.useEffect,Pt=e=>e;let tj=Pt;function dv(e){let t;return()=>(t===void 0&&(t=e()),t)}const Ui=(e,t,n)=>{const r=t-e;return r===0?1:(n-e)/r},Pn=e=>e*1e3,Rn=e=>e/1e3,LI={useManualTiming:!1};function qI(e){let t=new Set,n=new Set,r=!1,i=!1;const a=new WeakSet;let s={delta:0,timestamp:0,isProcessing:!1};function o(u){a.has(u)&&(l.schedule(u),e()),u(s)}const l={schedule:(u,c=!1,f=!1)=>{const m=f&&r?t:n;return c&&a.add(u),m.has(u)||m.add(u),u},cancel:u=>{n.delete(u),a.delete(u)},process:u=>{if(s=u,r){i=!0;return}r=!0,[t,n]=[n,t],t.forEach(o),t.clear(),r=!1,i&&(i=!1,l.process(u))}};return l}const io=["read","resolveKeyframes","update","preRender","render","postRender"],FI=40;function nj(e,t){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},a=()=>n=!0,s=io.reduce((g,y)=>(g[y]=qI(a),g),{}),{read:o,resolveKeyframes:l,update:u,preRender:c,render:f,postRender:h}=s,m=()=>{const g=performance.now();n=!1,i.delta=r?1e3/60:Math.max(Math.min(g-i.timestamp,FI),1),i.timestamp=g,i.isProcessing=!0,o.process(i),l.process(i),u.process(i),c.process(i),f.process(i),h.process(i),i.isProcessing=!1,n&&t&&(r=!1,e(m))},v=()=>{n=!0,r=!0,i.isProcessing||e(m)};return{schedule:io.reduce((g,y)=>{const b=s[y];return g[y]=(_,C=!1,E=!1)=>(n||v(),b.schedule(_,C,E)),g},{}),cancel:g=>{for(let y=0;y<io.length;y++)s[io[y]].cancel(g)},state:i,steps:s}}const{schedule:Ee,cancel:mr,state:nt,steps:$u}=nj(typeof requestAnimationFrame<"u"?requestAnimationFrame:Pt,!0),rj=S.createContext({strict:!1}),J0={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Gi={};for(const e in J0)Gi[e]={isEnabled:t=>J0[e].some(n=>!!t[n])};function VI(e){for(const t in e)Gi[t]={...Gi[t],...e[t]}}const $I=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Qo(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||$I.has(e)}let ij=e=>!Qo(e);function BI(e){e&&(ij=t=>t.startsWith("on")?!Qo(t):e(t))}try{BI(require("@emotion/is-prop-valid").default)}catch{}function zI(e,t,n){const r={};for(const i in e)i==="values"&&typeof e.values=="object"||(ij(i)||n===!0&&Qo(i)||!t&&!Qo(i)||e.draggable&&i.startsWith("onDrag"))&&(r[i]=e[i]);return r}function UI(e){if(typeof Proxy>"u")return e;const t=new Map,n=(...r)=>e(...r);return new Proxy(n,{get:(r,i)=>i==="create"?e:(t.has(i)||t.set(i,e(i)),t.get(i))})}const kl=S.createContext({});function gs(e){return typeof e=="string"||Array.isArray(e)}function Cl(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}const fv=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],hv=["initial",...fv];function El(e){return Cl(e.animate)||hv.some(t=>gs(e[t]))}function aj(e){return!!(El(e)||e.variants)}function GI(e,t){if(El(e)){const{initial:n,animate:r}=e;return{initial:n===!1||gs(n)?n:void 0,animate:gs(r)?r:void 0}}return e.inherit!==!1?t:{}}function HI(e){const{initial:t,animate:n}=GI(e,S.useContext(kl));return S.useMemo(()=>({initial:t,animate:n}),[X0(t),X0(n)])}function X0(e){return Array.isArray(e)?e.join(" "):e}const WI=Symbol.for("motionComponentSymbol");function Ei(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function KI(e,t,n){return S.useCallback(r=>{r&&e.onMount&&e.onMount(r),t&&(r?t.mount(r):t.unmount()),n&&(typeof n=="function"?n(r):Ei(n)&&(n.current=r))},[t])}const pv=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),YI="framerAppearId",sj="data-"+pv(YI),{schedule:mv}=nj(queueMicrotask,!1),oj=S.createContext({});function QI(e,t,n,r,i){var a,s;const{visualElement:o}=S.useContext(kl),l=S.useContext(rj),u=S.useContext(uv),c=S.useContext(ej).reducedMotion,f=S.useRef(null);r=r||l.renderer,!f.current&&r&&(f.current=r(e,{visualState:t,parent:o,props:n,presenceContext:u,blockInitialAnimation:u?u.initial===!1:!1,reducedMotionConfig:c}));const h=f.current,m=S.useContext(oj);h&&!h.projection&&i&&(h.type==="html"||h.type==="svg")&&JI(f.current,n,i,m);const v=S.useRef(!1);S.useInsertionEffect(()=>{h&&v.current&&h.update(n,u)});const p=n[sj],x=S.useRef(!!p&&!(!((a=window.MotionHandoffIsComplete)===null||a===void 0)&&a.call(window,p))&&((s=window.MotionHasOptimisedAnimation)===null||s===void 0?void 0:s.call(window,p)));return OI(()=>{h&&(v.current=!0,window.MotionIsMounted=!0,h.updateFeatures(),mv.render(h.render),x.current&&h.animationState&&h.animationState.animateChanges())}),S.useEffect(()=>{h&&(!x.current&&h.animationState&&h.animationState.animateChanges(),x.current&&(queueMicrotask(()=>{var g;(g=window.MotionHandoffMarkAsComplete)===null||g===void 0||g.call(window,p)}),x.current=!1))}),h}function JI(e,t,n,r){const{layoutId:i,layout:a,drag:s,dragConstraints:o,layoutScroll:l,layoutRoot:u}=t;e.projection=new n(e.latestValues,t["data-framer-portal-id"]?void 0:lj(e.parent)),e.projection.setOptions({layoutId:i,layout:a,alwaysMeasureLayout:!!s||o&&Ei(o),visualElement:e,animationType:typeof a=="string"?a:"both",initialPromotionConfig:r,layoutScroll:l,layoutRoot:u})}function lj(e){if(e)return e.options.allowProjection!==!1?e.projection:lj(e.parent)}function XI({preloadedFeatures:e,createVisualElement:t,useRender:n,useVisualState:r,Component:i}){var a,s;e&&VI(e);function o(u,c){let f;const h={...S.useContext(ej),...u,layoutId:ZI(u)},{isStatic:m}=h,v=HI(u),p=r(u,m);if(!m&&cv){eD();const x=tD(h);f=x.MeasureLayout,v.visualElement=QI(i,p,h,t,x.ProjectionNode)}return d.jsxs(kl.Provider,{value:v,children:[f&&v.visualElement?d.jsx(f,{visualElement:v.visualElement,...h}):null,n(i,u,KI(p,v.visualElement,c),p,m,v.visualElement)]})}o.displayName=`motion.${typeof i=="string"?i:`create(${(s=(a=i.displayName)!==null&&a!==void 0?a:i.name)!==null&&s!==void 0?s:""})`}`;const l=S.forwardRef(o);return l[WI]=i,l}function ZI({layoutId:e}){const t=S.useContext(ZE).id;return t&&e!==void 0?t+"-"+e:e}function eD(e,t){S.useContext(rj).strict}function tD(e){const{drag:t,layout:n}=Gi;if(!t&&!n)return{};const r={...t,...n};return{MeasureLayout:t!=null&&t.isEnabled(e)||n!=null&&n.isEnabled(e)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const nD=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function gv(e){return typeof e!="string"||e.includes("-")?!1:!!(nD.indexOf(e)>-1||/[A-Z]/u.test(e))}function Z0(e){const t=[{},{}];return e==null||e.values.forEach((n,r)=>{t[0][r]=n.get(),t[1][r]=n.getVelocity()}),t}function vv(e,t,n,r){if(typeof t=="function"){const[i,a]=Z0(r);t=t(n!==void 0?n:e.custom,i,a)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[i,a]=Z0(r);t=t(n!==void 0?n:e.custom,i,a)}return t}const Gm=e=>Array.isArray(e),rD=e=>!!(e&&typeof e=="object"&&e.mix&&e.toValue),iD=e=>Gm(e)?e[e.length-1]||0:e,dt=e=>!!(e&&e.getVelocity);function _o(e){const t=dt(e)?e.get():e;return rD(t)?t.toValue():t}function aD({scrapeMotionValuesFromProps:e,createRenderState:t,onUpdate:n},r,i,a){const s={latestValues:sD(r,i,a,e),renderState:t()};return n&&(s.onMount=o=>n({props:r,current:o,...s}),s.onUpdate=o=>n(o)),s}const uj=e=>(t,n)=>{const r=S.useContext(kl),i=S.useContext(uv),a=()=>aD(e,t,r,i);return n?a():II(a)};function sD(e,t,n,r){const i={},a=r(e,{});for(const h in a)i[h]=_o(a[h]);let{initial:s,animate:o}=e;const l=El(e),u=aj(e);t&&u&&!l&&e.inherit!==!1&&(s===void 0&&(s=t.initial),o===void 0&&(o=t.animate));let c=n?n.initial===!1:!1;c=c||s===!1;const f=c?o:s;if(f&&typeof f!="boolean"&&!Cl(f)){const h=Array.isArray(f)?f:[f];for(let m=0;m<h.length;m++){const v=vv(e,h[m]);if(v){const{transitionEnd:p,transition:x,...g}=v;for(const y in g){let b=g[y];if(Array.isArray(b)){const _=c?b.length-1:0;b=b[_]}b!==null&&(i[y]=b)}for(const y in p)i[y]=p[y]}}}return i}const Qi=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Kr=new Set(Qi),cj=e=>t=>typeof t=="string"&&t.startsWith(e),dj=cj("--"),oD=cj("var(--"),yv=e=>oD(e)?lD.test(e.split("/*")[0].trim()):!1,lD=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,fj=(e,t)=>t&&typeof e=="number"?t.transform(e):e,Ln=(e,t,n)=>n>t?t:n<e?e:n,Ji={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},vs={...Ji,transform:e=>Ln(0,1,e)},ao={...Ji,default:1},Es=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),Qn=Es("deg"),gn=Es("%"),Y=Es("px"),uD=Es("vh"),cD=Es("vw"),eb={...gn,parse:e=>gn.parse(e)/100,transform:e=>gn.transform(e*100)},dD={borderWidth:Y,borderTopWidth:Y,borderRightWidth:Y,borderBottomWidth:Y,borderLeftWidth:Y,borderRadius:Y,radius:Y,borderTopLeftRadius:Y,borderTopRightRadius:Y,borderBottomRightRadius:Y,borderBottomLeftRadius:Y,width:Y,maxWidth:Y,height:Y,maxHeight:Y,top:Y,right:Y,bottom:Y,left:Y,padding:Y,paddingTop:Y,paddingRight:Y,paddingBottom:Y,paddingLeft:Y,margin:Y,marginTop:Y,marginRight:Y,marginBottom:Y,marginLeft:Y,backgroundPositionX:Y,backgroundPositionY:Y},fD={rotate:Qn,rotateX:Qn,rotateY:Qn,rotateZ:Qn,scale:ao,scaleX:ao,scaleY:ao,scaleZ:ao,skew:Qn,skewX:Qn,skewY:Qn,distance:Y,translateX:Y,translateY:Y,translateZ:Y,x:Y,y:Y,z:Y,perspective:Y,transformPerspective:Y,opacity:vs,originX:eb,originY:eb,originZ:Y},tb={...Ji,transform:Math.round},bv={...dD,...fD,zIndex:tb,size:Y,fillOpacity:vs,strokeOpacity:vs,numOctaves:tb},hD={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},pD=Qi.length;function mD(e,t,n){let r="",i=!0;for(let a=0;a<pD;a++){const s=Qi[a],o=e[s];if(o===void 0)continue;let l=!0;if(typeof o=="number"?l=o===(s.startsWith("scale")?1:0):l=parseFloat(o)===0,!l||n){const u=fj(o,bv[s]);if(!l){i=!1;const c=hD[s]||s;r+=`${c}(${u}) `}n&&(t[s]=u)}}return r=r.trim(),n?r=n(t,i?"":r):i&&(r="none"),r}function xv(e,t,n){const{style:r,vars:i,transformOrigin:a}=e;let s=!1,o=!1;for(const l in t){const u=t[l];if(Kr.has(l)){s=!0;continue}else if(dj(l)){i[l]=u;continue}else{const c=fj(u,bv[l]);l.startsWith("origin")?(o=!0,a[l]=c):r[l]=c}}if(t.transform||(s||n?r.transform=mD(t,e.transform,n):r.transform&&(r.transform="none")),o){const{originX:l="50%",originY:u="50%",originZ:c=0}=a;r.transformOrigin=`${l} ${u} ${c}`}}const gD={offset:"stroke-dashoffset",array:"stroke-dasharray"},vD={offset:"strokeDashoffset",array:"strokeDasharray"};function yD(e,t,n=1,r=0,i=!0){e.pathLength=1;const a=i?gD:vD;e[a.offset]=Y.transform(-r);const s=Y.transform(t),o=Y.transform(n);e[a.array]=`${s} ${o}`}function nb(e,t,n){return typeof e=="string"?e:Y.transform(t+n*e)}function bD(e,t,n){const r=nb(t,e.x,e.width),i=nb(n,e.y,e.height);return`${r} ${i}`}function wv(e,{attrX:t,attrY:n,attrScale:r,originX:i,originY:a,pathLength:s,pathSpacing:o=1,pathOffset:l=0,...u},c,f){if(xv(e,u,f),c){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:h,style:m,dimensions:v}=e;h.transform&&(v&&(m.transform=h.transform),delete h.transform),v&&(i!==void 0||a!==void 0||m.transform)&&(m.transformOrigin=bD(v,i!==void 0?i:.5,a!==void 0?a:.5)),t!==void 0&&(h.x=t),n!==void 0&&(h.y=n),r!==void 0&&(h.scale=r),s!==void 0&&yD(h,s,o,l,!1)}const Sv=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),hj=()=>({...Sv(),attrs:{}}),_v=e=>typeof e=="string"&&e.toLowerCase()==="svg";function pj(e,{style:t,vars:n},r,i){Object.assign(e.style,t,i&&i.getProjectionStyles(r));for(const a in n)e.style.setProperty(a,n[a])}const mj=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function gj(e,t,n,r){pj(e,t,void 0,r);for(const i in t.attrs)e.setAttribute(mj.has(i)?i:pv(i),t.attrs[i])}const Jo={};function xD(e){Object.assign(Jo,e)}function vj(e,{layout:t,layoutId:n}){return Kr.has(e)||e.startsWith("origin")||(t||n!==void 0)&&(!!Jo[e]||e==="opacity")}function kv(e,t,n){var r;const{style:i}=e,a={};for(const s in i)(dt(i[s])||t.style&&dt(t.style[s])||vj(s,e)||((r=n==null?void 0:n.getValue(s))===null||r===void 0?void 0:r.liveStyle)!==void 0)&&(a[s]=i[s]);return a}function yj(e,t,n){const r=kv(e,t,n);for(const i in e)if(dt(e[i])||dt(t[i])){const a=Qi.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[a]=e[i]}return r}function wD(e,t){try{t.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{t.dimensions={x:0,y:0,width:0,height:0}}}const rb=["x","y","width","height","cx","cy","r"],SD={useVisualState:uj({scrapeMotionValuesFromProps:yj,createRenderState:hj,onUpdate:({props:e,prevProps:t,current:n,renderState:r,latestValues:i})=>{if(!n)return;let a=!!e.drag;if(!a){for(const o in i)if(Kr.has(o)){a=!0;break}}if(!a)return;let s=!t;if(t)for(let o=0;o<rb.length;o++){const l=rb[o];e[l]!==t[l]&&(s=!0)}s&&Ee.read(()=>{wD(n,r),Ee.render(()=>{wv(r,i,_v(n.tagName),e.transformTemplate),gj(n,r)})})}})},_D={useVisualState:uj({scrapeMotionValuesFromProps:kv,createRenderState:Sv})};function bj(e,t,n){for(const r in t)!dt(t[r])&&!vj(r,n)&&(e[r]=t[r])}function kD({transformTemplate:e},t){return S.useMemo(()=>{const n=Sv();return xv(n,t,e),Object.assign({},n.vars,n.style)},[t])}function CD(e,t){const n=e.style||{},r={};return bj(r,n,e),Object.assign(r,kD(e,t)),r}function ED(e,t){const n={},r=CD(e,t);return e.drag&&e.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=r,n}function jD(e,t,n,r){const i=S.useMemo(()=>{const a=hj();return wv(a,t,_v(r),e.transformTemplate),{...a.attrs,style:{...a.style}}},[t]);if(e.style){const a={};bj(a,e.style,e),i.style={...a,...i.style}}return i}function TD(e=!1){return(n,r,i,{latestValues:a},s)=>{const l=(gv(n)?jD:ED)(r,a,s,n),u=zI(r,typeof n=="string",e),c=n!==S.Fragment?{...u,...l,ref:i}:{},{children:f}=r,h=S.useMemo(()=>dt(f)?f.get():f,[f]);return S.createElement(n,{...c,children:h})}}function ND(e,t){return function(r,{forwardMotionProps:i}={forwardMotionProps:!1}){const s={...gv(r)?SD:_D,preloadedFeatures:e,useRender:TD(i),createVisualElement:t,Component:r};return XI(s)}}function xj(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}function jl(e,t,n){const r=e.getProps();return vv(r,t,n!==void 0?n:r.custom,e)}const MD=dv(()=>window.ScrollTimeline!==void 0);class PD{constructor(t){this.stop=()=>this.runAll("stop"),this.animations=t.filter(Boolean)}get finished(){return Promise.all(this.animations.map(t=>"finished"in t?t.finished:t))}getAll(t){return this.animations[0][t]}setAll(t,n){for(let r=0;r<this.animations.length;r++)this.animations[r][t]=n}attachTimeline(t,n){const r=this.animations.map(i=>{if(MD()&&i.attachTimeline)return i.attachTimeline(t);if(typeof n=="function")return n(i)});return()=>{r.forEach((i,a)=>{i&&i(),this.animations[a].stop()})}}get time(){return this.getAll("time")}set time(t){this.setAll("time",t)}get speed(){return this.getAll("speed")}set speed(t){this.setAll("speed",t)}get startTime(){return this.getAll("startTime")}get duration(){let t=0;for(let n=0;n<this.animations.length;n++)t=Math.max(t,this.animations[n].duration);return t}runAll(t){this.animations.forEach(n=>n[t]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class RD extends PD{then(t,n){return Promise.all(this.animations).then(t).catch(n)}}function Cv(e,t){return e?e[t]||e.default||e:void 0}const Hm=2e4;function wj(e){let t=0;const n=50;let r=e.next(t);for(;!r.done&&t<Hm;)t+=n,r=e.next(t);return t>=Hm?1/0:t}function Ev(e){return typeof e=="function"}function ib(e,t){e.timeline=t,e.onfinish=null}const jv=e=>Array.isArray(e)&&typeof e[0]=="number",AD={linearEasing:void 0};function ID(e,t){const n=dv(e);return()=>{var r;return(r=AD[t])!==null&&r!==void 0?r:n()}}const Xo=ID(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Sj=(e,t,n=10)=>{let r="";const i=Math.max(Math.round(t/n),2);for(let a=0;a<i;a++)r+=e(Ui(0,i-1,a))+", ";return`linear(${r.substring(0,r.length-2)})`};function _j(e){return!!(typeof e=="function"&&Xo()||!e||typeof e=="string"&&(e in Wm||Xo())||jv(e)||Array.isArray(e)&&e.every(_j))}const Ma=([e,t,n,r])=>`cubic-bezier(${e}, ${t}, ${n}, ${r})`,Wm={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Ma([0,.65,.55,1]),circOut:Ma([.55,0,1,.45]),backIn:Ma([.31,.01,.66,-.59]),backOut:Ma([.33,1.53,.69,.99])};function kj(e,t){if(e)return typeof e=="function"&&Xo()?Sj(e,t):jv(e)?Ma(e):Array.isArray(e)?e.map(n=>kj(n,t)||Wm.easeOut):Wm[e]}const Jt={x:!1,y:!1};function Cj(){return Jt.x||Jt.y}function DD(e,t,n){var r;if(e instanceof Element)return[e];if(typeof e=="string"){let i=document;const a=(r=void 0)!==null&&r!==void 0?r:i.querySelectorAll(e);return a?Array.from(a):[]}return Array.from(e)}function Ej(e,t){const n=DD(e),r=new AbortController,i={passive:!0,...t,signal:r.signal};return[n,i,()=>r.abort()]}function ab(e){return t=>{t.pointerType==="touch"||Cj()||e(t)}}function OD(e,t,n={}){const[r,i,a]=Ej(e,n),s=ab(o=>{const{target:l}=o,u=t(o);if(typeof u!="function"||!l)return;const c=ab(f=>{u(f),l.removeEventListener("pointerleave",c)});l.addEventListener("pointerleave",c,i)});return r.forEach(o=>{o.addEventListener("pointerenter",s,i)}),a}const jj=(e,t)=>t?e===t?!0:jj(e,t.parentElement):!1,Tv=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1,LD=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function qD(e){return LD.has(e.tagName)||e.tabIndex!==-1}const Pa=new WeakSet;function sb(e){return t=>{t.key==="Enter"&&e(t)}}function Bu(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const FD=(e,t)=>{const n=e.currentTarget;if(!n)return;const r=sb(()=>{if(Pa.has(n))return;Bu(n,"down");const i=sb(()=>{Bu(n,"up")}),a=()=>Bu(n,"cancel");n.addEventListener("keyup",i,t),n.addEventListener("blur",a,t)});n.addEventListener("keydown",r,t),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),t)};function ob(e){return Tv(e)&&!Cj()}function VD(e,t,n={}){const[r,i,a]=Ej(e,n),s=o=>{const l=o.currentTarget;if(!ob(o)||Pa.has(l))return;Pa.add(l);const u=t(o),c=(m,v)=>{window.removeEventListener("pointerup",f),window.removeEventListener("pointercancel",h),!(!ob(m)||!Pa.has(l))&&(Pa.delete(l),typeof u=="function"&&u(m,{success:v}))},f=m=>{c(m,n.useGlobalTarget||jj(l,m.target))},h=m=>{c(m,!1)};window.addEventListener("pointerup",f,i),window.addEventListener("pointercancel",h,i)};return r.forEach(o=>{!qD(o)&&o.getAttribute("tabindex")===null&&(o.tabIndex=0),(n.useGlobalTarget?window:o).addEventListener("pointerdown",s,i),o.addEventListener("focus",u=>FD(u,i),i)}),a}function $D(e){return e==="x"||e==="y"?Jt[e]?null:(Jt[e]=!0,()=>{Jt[e]=!1}):Jt.x||Jt.y?null:(Jt.x=Jt.y=!0,()=>{Jt.x=Jt.y=!1})}const Tj=new Set(["width","height","top","left","right","bottom",...Qi]);let ko;function BD(){ko=void 0}const vn={now:()=>(ko===void 0&&vn.set(nt.isProcessing||LI.useManualTiming?nt.timestamp:performance.now()),ko),set:e=>{ko=e,queueMicrotask(BD)}};function Nv(e,t){e.indexOf(t)===-1&&e.push(t)}function Mv(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}class Pv{constructor(){this.subscriptions=[]}add(t){return Nv(this.subscriptions,t),()=>Mv(this.subscriptions,t)}notify(t,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](t,n,r);else for(let a=0;a<i;a++){const s=this.subscriptions[a];s&&s(t,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function Nj(e,t){return t?e*(1e3/t):0}const lb=30,zD=e=>!isNaN(parseFloat(e));class UD{constructor(t,n={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,i=!0)=>{const a=vn.now();this.updatedAt!==a&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(t),this.owner=n.owner}setCurrent(t){this.current=t,this.updatedAt=vn.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=zD(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,n){this.events[t]||(this.events[t]=new Pv);const r=this.events[t].add(n);return t==="change"?()=>{r(),Ee.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,n){this.passiveEffect=t,this.stopPassiveEffect=n}set(t,n=!0){!n||!this.passiveEffect?this.updateAndNotify(t,n):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-r}jump(t,n=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=vn.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>lb)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,lb);return Nj(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(t){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=t(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function ys(e,t){return new UD(e,t)}function GD(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,ys(n))}function HD(e,t){const n=jl(e,t);let{transitionEnd:r={},transition:i={},...a}=n||{};a={...a,...r};for(const s in a){const o=iD(a[s]);GD(e,s,o)}}function WD(e){return!!(dt(e)&&e.add)}function Km(e,t){const n=e.getValue("willChange");if(WD(n))return n.add(t)}function Mj(e){return e.props[sj]}const Pj=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,KD=1e-7,YD=12;function QD(e,t,n,r,i){let a,s,o=0;do s=t+(n-t)/2,a=Pj(s,r,i)-e,a>0?n=s:t=s;while(Math.abs(a)>KD&&++o<YD);return s}function js(e,t,n,r){if(e===t&&n===r)return Pt;const i=a=>QD(a,0,1,e,n);return a=>a===0||a===1?a:Pj(i(a),t,r)}const Rj=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,Aj=e=>t=>1-e(1-t),Ij=js(.33,1.53,.69,.99),Rv=Aj(Ij),Dj=Rj(Rv),Oj=e=>(e*=2)<1?.5*Rv(e):.5*(2-Math.pow(2,-10*(e-1))),Av=e=>1-Math.sin(Math.acos(e)),Lj=Aj(Av),qj=Rj(Av),Fj=e=>/^0[^.\s]+$/u.test(e);function JD(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||Fj(e):!0}const Ka=e=>Math.round(e*1e5)/1e5,Iv=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function XD(e){return e==null}const ZD=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Dv=(e,t)=>n=>!!(typeof n=="string"&&ZD.test(n)&&n.startsWith(e)||t&&!XD(n)&&Object.prototype.hasOwnProperty.call(n,t)),Vj=(e,t,n)=>r=>{if(typeof r!="string")return r;const[i,a,s,o]=r.match(Iv);return{[e]:parseFloat(i),[t]:parseFloat(a),[n]:parseFloat(s),alpha:o!==void 0?parseFloat(o):1}},e2=e=>Ln(0,255,e),zu={...Ji,transform:e=>Math.round(e2(e))},Dr={test:Dv("rgb","red"),parse:Vj("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:r=1})=>"rgba("+zu.transform(e)+", "+zu.transform(t)+", "+zu.transform(n)+", "+Ka(vs.transform(r))+")"};function t2(e){let t="",n="",r="",i="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),r=e.substring(5,7),i=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),r=e.substring(3,4),i=e.substring(4,5),t+=t,n+=n,r+=r,i+=i),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const Ym={test:Dv("#"),parse:t2,transform:Dr.transform},ji={test:Dv("hsl","hue"),parse:Vj("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:r=1})=>"hsla("+Math.round(e)+", "+gn.transform(Ka(t))+", "+gn.transform(Ka(n))+", "+Ka(vs.transform(r))+")"},ut={test:e=>Dr.test(e)||Ym.test(e)||ji.test(e),parse:e=>Dr.test(e)?Dr.parse(e):ji.test(e)?ji.parse(e):Ym.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?Dr.transform(e):ji.transform(e)},n2=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function r2(e){var t,n;return isNaN(e)&&typeof e=="string"&&(((t=e.match(Iv))===null||t===void 0?void 0:t.length)||0)+(((n=e.match(n2))===null||n===void 0?void 0:n.length)||0)>0}const $j="number",Bj="color",i2="var",a2="var(",ub="${}",s2=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function bs(e){const t=e.toString(),n=[],r={color:[],number:[],var:[]},i=[];let a=0;const o=t.replace(s2,l=>(ut.test(l)?(r.color.push(a),i.push(Bj),n.push(ut.parse(l))):l.startsWith(a2)?(r.var.push(a),i.push(i2),n.push(l)):(r.number.push(a),i.push($j),n.push(parseFloat(l))),++a,ub)).split(ub);return{values:n,split:o,indexes:r,types:i}}function zj(e){return bs(e).values}function Uj(e){const{split:t,types:n}=bs(e),r=t.length;return i=>{let a="";for(let s=0;s<r;s++)if(a+=t[s],i[s]!==void 0){const o=n[s];o===$j?a+=Ka(i[s]):o===Bj?a+=ut.transform(i[s]):a+=i[s]}return a}}const o2=e=>typeof e=="number"?0:e;function l2(e){const t=zj(e);return Uj(e)(t.map(o2))}const gr={test:r2,parse:zj,createTransformer:Uj,getAnimatableNone:l2},u2=new Set(["brightness","contrast","saturate","opacity"]);function c2(e){const[t,n]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[r]=n.match(Iv)||[];if(!r)return e;const i=n.replace(r,"");let a=u2.has(t)?1:0;return r!==n&&(a*=100),t+"("+a+i+")"}const d2=/\b([a-z-]*)\(.*?\)/gu,Qm={...gr,getAnimatableNone:e=>{const t=e.match(d2);return t?t.map(c2).join(" "):e}},f2={...bv,color:ut,backgroundColor:ut,outlineColor:ut,fill:ut,stroke:ut,borderColor:ut,borderTopColor:ut,borderRightColor:ut,borderBottomColor:ut,borderLeftColor:ut,filter:Qm,WebkitFilter:Qm},Ov=e=>f2[e];function Gj(e,t){let n=Ov(e);return n!==Qm&&(n=gr),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const h2=new Set(["auto","none","0"]);function p2(e,t,n){let r=0,i;for(;r<e.length&&!i;){const a=e[r];typeof a=="string"&&!h2.has(a)&&bs(a).values.length&&(i=e[r]),r++}if(i&&n)for(const a of t)e[a]=Gj(n,i)}const cb=e=>e===Ji||e===Y,db=(e,t)=>parseFloat(e.split(", ")[t]),fb=(e,t)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const i=r.match(/^matrix3d\((.+)\)$/u);if(i)return db(i[1],t);{const a=r.match(/^matrix\((.+)\)$/u);return a?db(a[1],e):0}},m2=new Set(["x","y","z"]),g2=Qi.filter(e=>!m2.has(e));function v2(e){const t=[];return g2.forEach(n=>{const r=e.getValue(n);r!==void 0&&(t.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),t}const Hi={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:fb(4,13),y:fb(5,14)};Hi.translateX=Hi.x;Hi.translateY=Hi.y;const Fr=new Set;let Jm=!1,Xm=!1;function Hj(){if(Xm){const e=Array.from(Fr).filter(r=>r.needsMeasurement),t=new Set(e.map(r=>r.element)),n=new Map;t.forEach(r=>{const i=v2(r);i.length&&(n.set(r,i),r.render())}),e.forEach(r=>r.measureInitialState()),t.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([a,s])=>{var o;(o=r.getValue(a))===null||o===void 0||o.set(s)})}),e.forEach(r=>r.measureEndState()),e.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}Xm=!1,Jm=!1,Fr.forEach(e=>e.complete()),Fr.clear()}function Wj(){Fr.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(Xm=!0)})}function y2(){Wj(),Hj()}class Lv{constructor(t,n,r,i,a,s=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...t],this.onComplete=n,this.name=r,this.motionValue=i,this.element=a,this.isAsync=s}scheduleResolve(){this.isScheduled=!0,this.isAsync?(Fr.add(this),Jm||(Jm=!0,Ee.read(Wj),Ee.resolveKeyframes(Hj))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:n,element:r,motionValue:i}=this;for(let a=0;a<t.length;a++)if(t[a]===null)if(a===0){const s=i==null?void 0:i.get(),o=t[t.length-1];if(s!==void 0)t[0]=s;else if(r&&n){const l=r.readValue(n,o);l!=null&&(t[0]=l)}t[0]===void 0&&(t[0]=o),i&&s===void 0&&i.set(t[0])}else t[a]=t[a-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),Fr.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,Fr.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const Kj=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e),b2=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function x2(e){const t=b2.exec(e);if(!t)return[,];const[,n,r,i]=t;return[`--${n??r}`,i]}function Yj(e,t,n=1){const[r,i]=x2(e);if(!r)return;const a=window.getComputedStyle(t).getPropertyValue(r);if(a){const s=a.trim();return Kj(s)?parseFloat(s):s}return yv(i)?Yj(i,t,n+1):i}const Qj=e=>t=>t.test(e),w2={test:e=>e==="auto",parse:e=>e},Jj=[Ji,Y,gn,Qn,cD,uD,w2],hb=e=>Jj.find(Qj(e));class Xj extends Lv{constructor(t,n,r,i,a){super(t,n,r,i,a,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let l=0;l<t.length;l++){let u=t[l];if(typeof u=="string"&&(u=u.trim(),yv(u))){const c=Yj(u,n.current);c!==void 0&&(t[l]=c),l===t.length-1&&(this.finalKeyframe=u)}}if(this.resolveNoneKeyframes(),!Tj.has(r)||t.length!==2)return;const[i,a]=t,s=hb(i),o=hb(a);if(s!==o)if(cb(s)&&cb(o))for(let l=0;l<t.length;l++){const u=t[l];typeof u=="string"&&(t[l]=parseFloat(u))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:n}=this,r=[];for(let i=0;i<t.length;i++)JD(t[i])&&r.push(i);r.length&&p2(t,r,n)}measureInitialState(){const{element:t,unresolvedKeyframes:n,name:r}=this;if(!t||!t.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Hi[r](t.measureViewportBox(),window.getComputedStyle(t.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&t.getValue(r,i).jump(i,!1)}measureEndState(){var t;const{element:n,name:r,unresolvedKeyframes:i}=this;if(!n||!n.current)return;const a=n.getValue(r);a&&a.jump(this.measuredOrigin,!1);const s=i.length-1,o=i[s];i[s]=Hi[r](n.measureViewportBox(),window.getComputedStyle(n.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),!((t=this.removedTransforms)===null||t===void 0)&&t.length&&this.removedTransforms.forEach(([l,u])=>{n.getValue(l).set(u)}),this.resolveNoneKeyframes()}}const pb=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(gr.test(e)||e==="0")&&!e.startsWith("url("));function S2(e){const t=e[0];if(e.length===1)return!0;for(let n=0;n<e.length;n++)if(e[n]!==t)return!0}function _2(e,t,n,r){const i=e[0];if(i===null)return!1;if(t==="display"||t==="visibility")return!0;const a=e[e.length-1],s=pb(i,t),o=pb(a,t);return!s||!o?!1:S2(e)||(n==="spring"||Ev(n))&&r}const k2=e=>e!==null;function Tl(e,{repeat:t,repeatType:n="loop"},r){const i=e.filter(k2),a=t&&n!=="loop"&&t%2===1?0:i.length-1;return!a||r===void 0?i[a]:r}const C2=40;class Zj{constructor({autoplay:t=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:a=0,repeatType:s="loop",...o}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=vn.now(),this.options={autoplay:t,delay:n,type:r,repeat:i,repeatDelay:a,repeatType:s,...o},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>C2?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&y2(),this._resolved}onKeyframesResolved(t,n){this.resolvedAt=vn.now(),this.hasAttemptedResolve=!0;const{name:r,type:i,velocity:a,delay:s,onComplete:o,onUpdate:l,isGenerator:u}=this.options;if(!u&&!_2(t,r,i,a))if(s)this.options.duration=0;else{l&&l(Tl(t,this.options,n)),o&&o(),this.resolveFinishedPromise();return}const c=this.initPlayback(t,n);c!==!1&&(this._resolved={keyframes:t,finalKeyframe:n,...c},this.onPostResolved())}onPostResolved(){}then(t,n){return this.currentFinishedPromise.then(t,n)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(t=>{this.resolveFinishedPromise=t})}}const Me=(e,t,n)=>e+(t-e)*n;function Uu(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function E2({hue:e,saturation:t,lightness:n,alpha:r}){e/=360,t/=100,n/=100;let i=0,a=0,s=0;if(!t)i=a=s=n;else{const o=n<.5?n*(1+t):n+t-n*t,l=2*n-o;i=Uu(l,o,e+1/3),a=Uu(l,o,e),s=Uu(l,o,e-1/3)}return{red:Math.round(i*255),green:Math.round(a*255),blue:Math.round(s*255),alpha:r}}function Zo(e,t){return n=>n>0?t:e}const Gu=(e,t,n)=>{const r=e*e,i=n*(t*t-r)+r;return i<0?0:Math.sqrt(i)},j2=[Ym,Dr,ji],T2=e=>j2.find(t=>t.test(e));function mb(e){const t=T2(e);if(!t)return!1;let n=t.parse(e);return t===ji&&(n=E2(n)),n}const gb=(e,t)=>{const n=mb(e),r=mb(t);if(!n||!r)return Zo(e,t);const i={...n};return a=>(i.red=Gu(n.red,r.red,a),i.green=Gu(n.green,r.green,a),i.blue=Gu(n.blue,r.blue,a),i.alpha=Me(n.alpha,r.alpha,a),Dr.transform(i))},N2=(e,t)=>n=>t(e(n)),Ts=(...e)=>e.reduce(N2),Zm=new Set(["none","hidden"]);function M2(e,t){return Zm.has(e)?n=>n<=0?e:t:n=>n>=1?t:e}function P2(e,t){return n=>Me(e,t,n)}function qv(e){return typeof e=="number"?P2:typeof e=="string"?yv(e)?Zo:ut.test(e)?gb:I2:Array.isArray(e)?eT:typeof e=="object"?ut.test(e)?gb:R2:Zo}function eT(e,t){const n=[...e],r=n.length,i=e.map((a,s)=>qv(a)(a,t[s]));return a=>{for(let s=0;s<r;s++)n[s]=i[s](a);return n}}function R2(e,t){const n={...e,...t},r={};for(const i in n)e[i]!==void 0&&t[i]!==void 0&&(r[i]=qv(e[i])(e[i],t[i]));return i=>{for(const a in r)n[a]=r[a](i);return n}}function A2(e,t){var n;const r=[],i={color:0,var:0,number:0};for(let a=0;a<t.values.length;a++){const s=t.types[a],o=e.indexes[s][i[s]],l=(n=e.values[o])!==null&&n!==void 0?n:0;r[a]=l,i[s]++}return r}const I2=(e,t)=>{const n=gr.createTransformer(t),r=bs(e),i=bs(t);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?Zm.has(e)&&!i.values.length||Zm.has(t)&&!r.values.length?M2(e,t):Ts(eT(A2(r,i),i.values),n):Zo(e,t)};function tT(e,t,n){return typeof e=="number"&&typeof t=="number"&&typeof n=="number"?Me(e,t,n):qv(e)(e,t)}const D2=5;function nT(e,t,n){const r=Math.max(t-D2,0);return Nj(n-e(r),t-r)}const Le={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Hu=.001;function O2({duration:e=Le.duration,bounce:t=Le.bounce,velocity:n=Le.velocity,mass:r=Le.mass}){let i,a,s=1-t;s=Ln(Le.minDamping,Le.maxDamping,s),e=Ln(Le.minDuration,Le.maxDuration,Rn(e)),s<1?(i=u=>{const c=u*s,f=c*e,h=c-n,m=eg(u,s),v=Math.exp(-f);return Hu-h/m*v},a=u=>{const f=u*s*e,h=f*n+n,m=Math.pow(s,2)*Math.pow(u,2)*e,v=Math.exp(-f),p=eg(Math.pow(u,2),s);return(-i(u)+Hu>0?-1:1)*((h-m)*v)/p}):(i=u=>{const c=Math.exp(-u*e),f=(u-n)*e+1;return-Hu+c*f},a=u=>{const c=Math.exp(-u*e),f=(n-u)*(e*e);return c*f});const o=5/e,l=q2(i,a,o);if(e=Pn(e),isNaN(l))return{stiffness:Le.stiffness,damping:Le.damping,duration:e};{const u=Math.pow(l,2)*r;return{stiffness:u,damping:s*2*Math.sqrt(r*u),duration:e}}}const L2=12;function q2(e,t,n){let r=n;for(let i=1;i<L2;i++)r=r-e(r)/t(r);return r}function eg(e,t){return e*Math.sqrt(1-t*t)}const F2=["duration","bounce"],V2=["stiffness","damping","mass"];function vb(e,t){return t.some(n=>e[n]!==void 0)}function $2(e){let t={velocity:Le.velocity,stiffness:Le.stiffness,damping:Le.damping,mass:Le.mass,isResolvedFromDuration:!1,...e};if(!vb(e,V2)&&vb(e,F2))if(e.visualDuration){const n=e.visualDuration,r=2*Math.PI/(n*1.2),i=r*r,a=2*Ln(.05,1,1-(e.bounce||0))*Math.sqrt(i);t={...t,mass:Le.mass,stiffness:i,damping:a}}else{const n=O2(e);t={...t,...n,mass:Le.mass},t.isResolvedFromDuration=!0}return t}function rT(e=Le.visualDuration,t=Le.bounce){const n=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:r,restDelta:i}=n;const a=n.keyframes[0],s=n.keyframes[n.keyframes.length-1],o={done:!1,value:a},{stiffness:l,damping:u,mass:c,duration:f,velocity:h,isResolvedFromDuration:m}=$2({...n,velocity:-Rn(n.velocity||0)}),v=h||0,p=u/(2*Math.sqrt(l*c)),x=s-a,g=Rn(Math.sqrt(l/c)),y=Math.abs(x)<5;r||(r=y?Le.restSpeed.granular:Le.restSpeed.default),i||(i=y?Le.restDelta.granular:Le.restDelta.default);let b;if(p<1){const C=eg(g,p);b=E=>{const j=Math.exp(-p*g*E);return s-j*((v+p*g*x)/C*Math.sin(C*E)+x*Math.cos(C*E))}}else if(p===1)b=C=>s-Math.exp(-g*C)*(x+(v+g*x)*C);else{const C=g*Math.sqrt(p*p-1);b=E=>{const j=Math.exp(-p*g*E),T=Math.min(C*E,300);return s-j*((v+p*g*x)*Math.sinh(T)+C*x*Math.cosh(T))/C}}const _={calculatedDuration:m&&f||null,next:C=>{const E=b(C);if(m)o.done=C>=f;else{let j=0;p<1&&(j=C===0?Pn(v):nT(b,C,E));const T=Math.abs(j)<=r,P=Math.abs(s-E)<=i;o.done=T&&P}return o.value=o.done?s:E,o},toString:()=>{const C=Math.min(wj(_),Hm),E=Sj(j=>_.next(C*j).value,C,30);return C+"ms "+E}};return _}function yb({keyframes:e,velocity:t=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:a=500,modifyTarget:s,min:o,max:l,restDelta:u=.5,restSpeed:c}){const f=e[0],h={done:!1,value:f},m=T=>o!==void 0&&T<o||l!==void 0&&T>l,v=T=>o===void 0?l:l===void 0||Math.abs(o-T)<Math.abs(l-T)?o:l;let p=n*t;const x=f+p,g=s===void 0?x:s(x);g!==x&&(p=g-f);const y=T=>-p*Math.exp(-T/r),b=T=>g+y(T),_=T=>{const P=y(T),O=b(T);h.done=Math.abs(P)<=u,h.value=h.done?g:O};let C,E;const j=T=>{m(h.value)&&(C=T,E=rT({keyframes:[h.value,v(h.value)],velocity:nT(b,T,h.value),damping:i,stiffness:a,restDelta:u,restSpeed:c}))};return j(0),{calculatedDuration:null,next:T=>{let P=!1;return!E&&C===void 0&&(P=!0,_(T),j(T)),C!==void 0&&T>=C?E.next(T-C):(!P&&_(T),h)}}}const B2=js(.42,0,1,1),z2=js(0,0,.58,1),iT=js(.42,0,.58,1),U2=e=>Array.isArray(e)&&typeof e[0]!="number",G2={linear:Pt,easeIn:B2,easeInOut:iT,easeOut:z2,circIn:Av,circInOut:qj,circOut:Lj,backIn:Rv,backInOut:Dj,backOut:Ij,anticipate:Oj},bb=e=>{if(jv(e)){tj(e.length===4);const[t,n,r,i]=e;return js(t,n,r,i)}else if(typeof e=="string")return G2[e];return e};function H2(e,t,n){const r=[],i=n||tT,a=e.length-1;for(let s=0;s<a;s++){let o=i(e[s],e[s+1]);if(t){const l=Array.isArray(t)?t[s]||Pt:t;o=Ts(l,o)}r.push(o)}return r}function W2(e,t,{clamp:n=!0,ease:r,mixer:i}={}){const a=e.length;if(tj(a===t.length),a===1)return()=>t[0];if(a===2&&t[0]===t[1])return()=>t[1];const s=e[0]===e[1];e[0]>e[a-1]&&(e=[...e].reverse(),t=[...t].reverse());const o=H2(t,r,i),l=o.length,u=c=>{if(s&&c<e[0])return t[0];let f=0;if(l>1)for(;f<e.length-2&&!(c<e[f+1]);f++);const h=Ui(e[f],e[f+1],c);return o[f](h)};return n?c=>u(Ln(e[0],e[a-1],c)):u}function K2(e,t){const n=e[e.length-1];for(let r=1;r<=t;r++){const i=Ui(0,t,r);e.push(Me(n,1,i))}}function Y2(e){const t=[0];return K2(t,e.length-1),t}function Q2(e,t){return e.map(n=>n*t)}function J2(e,t){return e.map(()=>t||iT).splice(0,e.length-1)}function el({duration:e=300,keyframes:t,times:n,ease:r="easeInOut"}){const i=U2(r)?r.map(bb):bb(r),a={done:!1,value:t[0]},s=Q2(n&&n.length===t.length?n:Y2(t),e),o=W2(s,t,{ease:Array.isArray(i)?i:J2(t,i)});return{calculatedDuration:e,next:l=>(a.value=o(l),a.done=l>=e,a)}}const X2=e=>{const t=({timestamp:n})=>e(n);return{start:()=>Ee.update(t,!0),stop:()=>mr(t),now:()=>nt.isProcessing?nt.timestamp:vn.now()}},Z2={decay:yb,inertia:yb,tween:el,keyframes:el,spring:rT},eO=e=>e/100;class Fv extends Zj{constructor(t){super(t),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:l}=this.options;l&&l()};const{name:n,motionValue:r,element:i,keyframes:a}=this.options,s=(i==null?void 0:i.KeyframeResolver)||Lv,o=(l,u)=>this.onKeyframesResolved(l,u);this.resolver=new s(a,o,n,r,i),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(t){const{type:n="keyframes",repeat:r=0,repeatDelay:i=0,repeatType:a,velocity:s=0}=this.options,o=Ev(n)?n:Z2[n]||el;let l,u;o!==el&&typeof t[0]!="number"&&(l=Ts(eO,tT(t[0],t[1])),t=[0,100]);const c=o({...this.options,keyframes:t});a==="mirror"&&(u=o({...this.options,keyframes:[...t].reverse(),velocity:-s})),c.calculatedDuration===null&&(c.calculatedDuration=wj(c));const{calculatedDuration:f}=c,h=f+i,m=h*(r+1)-i;return{generator:c,mirroredGenerator:u,mapPercentToKeyframes:l,calculatedDuration:f,resolvedDuration:h,totalDuration:m}}onPostResolved(){const{autoplay:t=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!t?this.pause():this.state=this.pendingPlayState}tick(t,n=!1){const{resolved:r}=this;if(!r){const{keyframes:T}=this.options;return{done:!0,value:T[T.length-1]}}const{finalKeyframe:i,generator:a,mirroredGenerator:s,mapPercentToKeyframes:o,keyframes:l,calculatedDuration:u,totalDuration:c,resolvedDuration:f}=r;if(this.startTime===null)return a.next(0);const{delay:h,repeat:m,repeatType:v,repeatDelay:p,onUpdate:x}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-c/this.speed,this.startTime)),n?this.currentTime=t:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(t-this.startTime)*this.speed;const g=this.currentTime-h*(this.speed>=0?1:-1),y=this.speed>=0?g<0:g>c;this.currentTime=Math.max(g,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=c);let b=this.currentTime,_=a;if(m){const T=Math.min(this.currentTime,c)/f;let P=Math.floor(T),O=T%1;!O&&T>=1&&(O=1),O===1&&P--,P=Math.min(P,m+1),!!(P%2)&&(v==="reverse"?(O=1-O,p&&(O-=p/f)):v==="mirror"&&(_=s)),b=Ln(0,1,O)*f}const C=y?{done:!1,value:l[0]}:_.next(b);o&&(C.value=o(C.value));let{done:E}=C;!y&&u!==null&&(E=this.speed>=0?this.currentTime>=c:this.currentTime<=0);const j=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&E);return j&&i!==void 0&&(C.value=Tl(l,this.options,i)),x&&x(C.value),j&&this.finish(),C}get duration(){const{resolved:t}=this;return t?Rn(t.calculatedDuration):0}get time(){return Rn(this.currentTime)}set time(t){t=Pn(t),this.currentTime=t,this.holdTime!==null||this.speed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.speed)}get speed(){return this.playbackSpeed}set speed(t){const n=this.playbackSpeed!==t;this.playbackSpeed=t,n&&(this.time=Rn(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:t=X2,onPlay:n,startTime:r}=this.options;this.driver||(this.driver=t(a=>this.tick(a))),n&&n();const i=this.driver.now();this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=i):this.startTime=r??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var t;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(t=this.currentTime)!==null&&t!==void 0?t:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:t}=this.options;t&&t()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}}const tO=new Set(["opacity","clipPath","filter","transform"]);function nO(e,t,n,{delay:r=0,duration:i=300,repeat:a=0,repeatType:s="loop",ease:o="easeInOut",times:l}={}){const u={[t]:n};l&&(u.offset=l);const c=kj(o,i);return Array.isArray(c)&&(u.easing=c),e.animate(u,{delay:r,duration:i,easing:Array.isArray(c)?"linear":c,fill:"both",iterations:a+1,direction:s==="reverse"?"alternate":"normal"})}const rO=dv(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),tl=10,iO=2e4;function aO(e){return Ev(e.type)||e.type==="spring"||!_j(e.ease)}function sO(e,t){const n=new Fv({...t,keyframes:e,repeat:0,delay:0,isGenerator:!0});let r={done:!1,value:e[0]};const i=[];let a=0;for(;!r.done&&a<iO;)r=n.sample(a),i.push(r.value),a+=tl;return{times:void 0,keyframes:i,duration:a-tl,ease:"linear"}}const aT={anticipate:Oj,backInOut:Dj,circInOut:qj};function oO(e){return e in aT}class xb extends Zj{constructor(t){super(t);const{name:n,motionValue:r,element:i,keyframes:a}=this.options;this.resolver=new Xj(a,(s,o)=>this.onKeyframesResolved(s,o),n,r,i),this.resolver.scheduleResolve()}initPlayback(t,n){let{duration:r=300,times:i,ease:a,type:s,motionValue:o,name:l,startTime:u}=this.options;if(!o.owner||!o.owner.current)return!1;if(typeof a=="string"&&Xo()&&oO(a)&&(a=aT[a]),aO(this.options)){const{onComplete:f,onUpdate:h,motionValue:m,element:v,...p}=this.options,x=sO(t,p);t=x.keyframes,t.length===1&&(t[1]=t[0]),r=x.duration,i=x.times,a=x.ease,s="keyframes"}const c=nO(o.owner.current,l,t,{...this.options,duration:r,times:i,ease:a});return c.startTime=u??this.calcStartTime(),this.pendingTimeline?(ib(c,this.pendingTimeline),this.pendingTimeline=void 0):c.onfinish=()=>{const{onComplete:f}=this.options;o.set(Tl(t,this.options,n)),f&&f(),this.cancel(),this.resolveFinishedPromise()},{animation:c,duration:r,times:i,type:s,ease:a,keyframes:t}}get duration(){const{resolved:t}=this;if(!t)return 0;const{duration:n}=t;return Rn(n)}get time(){const{resolved:t}=this;if(!t)return 0;const{animation:n}=t;return Rn(n.currentTime||0)}set time(t){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.currentTime=Pn(t)}get speed(){const{resolved:t}=this;if(!t)return 1;const{animation:n}=t;return n.playbackRate}set speed(t){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.playbackRate=t}get state(){const{resolved:t}=this;if(!t)return"idle";const{animation:n}=t;return n.playState}get startTime(){const{resolved:t}=this;if(!t)return null;const{animation:n}=t;return n.startTime}attachTimeline(t){if(!this._resolved)this.pendingTimeline=t;else{const{resolved:n}=this;if(!n)return Pt;const{animation:r}=n;ib(r,t)}return Pt}play(){if(this.isStopped)return;const{resolved:t}=this;if(!t)return;const{animation:n}=t;n.playState==="finished"&&this.updateFinishedPromise(),n.play()}pause(){const{resolved:t}=this;if(!t)return;const{animation:n}=t;n.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:t}=this;if(!t)return;const{animation:n,keyframes:r,duration:i,type:a,ease:s,times:o}=t;if(n.playState==="idle"||n.playState==="finished")return;if(this.time){const{motionValue:u,onUpdate:c,onComplete:f,element:h,...m}=this.options,v=new Fv({...m,keyframes:r,duration:i,type:a,ease:s,times:o,isGenerator:!0}),p=Pn(this.time);u.setWithVelocity(v.sample(p-tl).value,v.sample(p).value,tl)}const{onStop:l}=this.options;l&&l(),this.cancel()}complete(){const{resolved:t}=this;t&&t.animation.finish()}cancel(){const{resolved:t}=this;t&&t.animation.cancel()}static supports(t){const{motionValue:n,name:r,repeatDelay:i,repeatType:a,damping:s,type:o}=t;if(!n||!n.owner||!(n.owner.current instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:u}=n.owner.getProps();return rO()&&r&&tO.has(r)&&!l&&!u&&!i&&a!=="mirror"&&s!==0&&o!=="inertia"}}const lO={type:"spring",stiffness:500,damping:25,restSpeed:10},uO=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),cO={type:"keyframes",duration:.8},dO={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},fO=(e,{keyframes:t})=>t.length>2?cO:Kr.has(e)?e.startsWith("scale")?uO(t[1]):lO:dO;function hO({when:e,delay:t,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:a,repeatType:s,repeatDelay:o,from:l,elapsed:u,...c}){return!!Object.keys(c).length}const Vv=(e,t,n,r={},i,a)=>s=>{const o=Cv(r,e)||{},l=o.delay||r.delay||0;let{elapsed:u=0}=r;u=u-Pn(l);let c={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:t.getVelocity(),...o,delay:-u,onUpdate:h=>{t.set(h),o.onUpdate&&o.onUpdate(h)},onComplete:()=>{s(),o.onComplete&&o.onComplete()},name:e,motionValue:t,element:a?void 0:i};hO(o)||(c={...c,...fO(e,c)}),c.duration&&(c.duration=Pn(c.duration)),c.repeatDelay&&(c.repeatDelay=Pn(c.repeatDelay)),c.from!==void 0&&(c.keyframes[0]=c.from);let f=!1;if((c.type===!1||c.duration===0&&!c.repeatDelay)&&(c.duration=0,c.delay===0&&(f=!0)),f&&!a&&t.get()!==void 0){const h=Tl(c.keyframes,o);if(h!==void 0)return Ee.update(()=>{c.onUpdate(h),c.onComplete()}),new RD([])}return!a&&xb.supports(c)?new xb(c):new Fv(c)};function pO({protectedKeys:e,needsAnimating:t},n){const r=e.hasOwnProperty(n)&&t[n]!==!0;return t[n]=!1,r}function sT(e,t,{delay:n=0,transitionOverride:r,type:i}={}){var a;let{transition:s=e.getDefaultTransition(),transitionEnd:o,...l}=t;r&&(s=r);const u=[],c=i&&e.animationState&&e.animationState.getState()[i];for(const f in l){const h=e.getValue(f,(a=e.latestValues[f])!==null&&a!==void 0?a:null),m=l[f];if(m===void 0||c&&pO(c,f))continue;const v={delay:n,...Cv(s||{},f)};let p=!1;if(window.MotionHandoffAnimation){const g=Mj(e);if(g){const y=window.MotionHandoffAnimation(g,f,Ee);y!==null&&(v.startTime=y,p=!0)}}Km(e,f),h.start(Vv(f,h,m,e.shouldReduceMotion&&Tj.has(f)?{type:!1}:v,e,p));const x=h.animation;x&&u.push(x)}return o&&Promise.all(u).then(()=>{Ee.update(()=>{o&&HD(e,o)})}),u}function tg(e,t,n={}){var r;const i=jl(e,t,n.type==="exit"?(r=e.presenceContext)===null||r===void 0?void 0:r.custom:void 0);let{transition:a=e.getDefaultTransition()||{}}=i||{};n.transitionOverride&&(a=n.transitionOverride);const s=i?()=>Promise.all(sT(e,i,n)):()=>Promise.resolve(),o=e.variantChildren&&e.variantChildren.size?(u=0)=>{const{delayChildren:c=0,staggerChildren:f,staggerDirection:h}=a;return mO(e,t,c+u,f,h,n)}:()=>Promise.resolve(),{when:l}=a;if(l){const[u,c]=l==="beforeChildren"?[s,o]:[o,s];return u().then(()=>c())}else return Promise.all([s(),o(n.delay)])}function mO(e,t,n=0,r=0,i=1,a){const s=[],o=(e.variantChildren.size-1)*r,l=i===1?(u=0)=>u*r:(u=0)=>o-u*r;return Array.from(e.variantChildren).sort(gO).forEach((u,c)=>{u.notify("AnimationStart",t),s.push(tg(u,t,{...a,delay:n+l(c)}).then(()=>u.notify("AnimationComplete",t)))}),Promise.all(s)}function gO(e,t){return e.sortNodePosition(t)}function vO(e,t,n={}){e.notify("AnimationStart",t);let r;if(Array.isArray(t)){const i=t.map(a=>tg(e,a,n));r=Promise.all(i)}else if(typeof t=="string")r=tg(e,t,n);else{const i=typeof t=="function"?jl(e,t,n.custom):t;r=Promise.all(sT(e,i,n))}return r.then(()=>{e.notify("AnimationComplete",t)})}const yO=hv.length;function oT(e){if(!e)return;if(!e.isControllingVariants){const n=e.parent?oT(e.parent)||{}:{};return e.props.initial!==void 0&&(n.initial=e.props.initial),n}const t={};for(let n=0;n<yO;n++){const r=hv[n],i=e.props[r];(gs(i)||i===!1)&&(t[r]=i)}return t}const bO=[...fv].reverse(),xO=fv.length;function wO(e){return t=>Promise.all(t.map(({animation:n,options:r})=>vO(e,n,r)))}function SO(e){let t=wO(e),n=wb(),r=!0;const i=l=>(u,c)=>{var f;const h=jl(e,c,l==="exit"?(f=e.presenceContext)===null||f===void 0?void 0:f.custom:void 0);if(h){const{transition:m,transitionEnd:v,...p}=h;u={...u,...p,...v}}return u};function a(l){t=l(e)}function s(l){const{props:u}=e,c=oT(e.parent)||{},f=[],h=new Set;let m={},v=1/0;for(let x=0;x<xO;x++){const g=bO[x],y=n[g],b=u[g]!==void 0?u[g]:c[g],_=gs(b),C=g===l?y.isActive:null;C===!1&&(v=x);let E=b===c[g]&&b!==u[g]&&_;if(E&&r&&e.manuallyAnimateOnMount&&(E=!1),y.protectedKeys={...m},!y.isActive&&C===null||!b&&!y.prevProp||Cl(b)||typeof b=="boolean")continue;const j=_O(y.prevProp,b);let T=j||g===l&&y.isActive&&!E&&_||x>v&&_,P=!1;const O=Array.isArray(b)?b:[b];let A=O.reduce(i(g),{});C===!1&&(A={});const{prevResolvedValues:W={}}=y,J={...W,...A},me=ne=>{T=!0,h.has(ne)&&(P=!0,h.delete(ne)),y.needsAnimating[ne]=!0;const D=e.getValue(ne);D&&(D.liveStyle=!1)};for(const ne in J){const D=A[ne],I=W[ne];if(m.hasOwnProperty(ne))continue;let F=!1;Gm(D)&&Gm(I)?F=!xj(D,I):F=D!==I,F?D!=null?me(ne):h.add(ne):D!==void 0&&h.has(ne)?me(ne):y.protectedKeys[ne]=!0}y.prevProp=b,y.prevResolvedValues=A,y.isActive&&(m={...m,...A}),r&&e.blockInitialAnimation&&(T=!1),T&&(!(E&&j)||P)&&f.push(...O.map(ne=>({animation:ne,options:{type:g}})))}if(h.size){const x={};h.forEach(g=>{const y=e.getBaseTarget(g),b=e.getValue(g);b&&(b.liveStyle=!0),x[g]=y??null}),f.push({animation:x})}let p=!!f.length;return r&&(u.initial===!1||u.initial===u.animate)&&!e.manuallyAnimateOnMount&&(p=!1),r=!1,p?t(f):Promise.resolve()}function o(l,u){var c;if(n[l].isActive===u)return Promise.resolve();(c=e.variantChildren)===null||c===void 0||c.forEach(h=>{var m;return(m=h.animationState)===null||m===void 0?void 0:m.setActive(l,u)}),n[l].isActive=u;const f=s(l);for(const h in n)n[h].protectedKeys={};return f}return{animateChanges:s,setActive:o,setAnimateFunction:a,getState:()=>n,reset:()=>{n=wb(),r=!0}}}function _O(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!xj(t,e):!1}function jr(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function wb(){return{animate:jr(!0),whileInView:jr(),whileHover:jr(),whileTap:jr(),whileDrag:jr(),whileFocus:jr(),exit:jr()}}class wr{constructor(t){this.isMounted=!1,this.node=t}update(){}}class kO extends wr{constructor(t){super(t),t.animationState||(t.animationState=SO(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();Cl(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:n}=this.node.prevProps||{};t!==n&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)===null||t===void 0||t.call(this)}}let CO=0;class EO extends wr{constructor(){super(...arguments),this.id=CO++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===r)return;const i=this.node.animationState.setActive("exit",!t);n&&!t&&i.then(()=>n(this.id))}mount(){const{register:t}=this.node.presenceContext||{};t&&(this.unmount=t(this.id))}unmount(){}}const jO={animation:{Feature:kO},exit:{Feature:EO}};function xs(e,t,n,r={passive:!0}){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n)}function Ns(e){return{point:{x:e.pageX,y:e.pageY}}}const TO=e=>t=>Tv(t)&&e(t,Ns(t));function Ya(e,t,n,r){return xs(e,t,TO(n),r)}const Sb=(e,t)=>Math.abs(e-t);function NO(e,t){const n=Sb(e.x,t.x),r=Sb(e.y,t.y);return Math.sqrt(n**2+r**2)}class lT{constructor(t,n,{transformPagePoint:r,contextWindow:i,dragSnapToOrigin:a=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const f=Ku(this.lastMoveEventInfo,this.history),h=this.startEvent!==null,m=NO(f.offset,{x:0,y:0})>=3;if(!h&&!m)return;const{point:v}=f,{timestamp:p}=nt;this.history.push({...v,timestamp:p});const{onStart:x,onMove:g}=this.handlers;h||(x&&x(this.lastMoveEvent,f),this.startEvent=this.lastMoveEvent),g&&g(this.lastMoveEvent,f)},this.handlePointerMove=(f,h)=>{this.lastMoveEvent=f,this.lastMoveEventInfo=Wu(h,this.transformPagePoint),Ee.update(this.updatePoint,!0)},this.handlePointerUp=(f,h)=>{this.end();const{onEnd:m,onSessionEnd:v,resumeAnimation:p}=this.handlers;if(this.dragSnapToOrigin&&p&&p(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const x=Ku(f.type==="pointercancel"?this.lastMoveEventInfo:Wu(h,this.transformPagePoint),this.history);this.startEvent&&m&&m(f,x),v&&v(f,x)},!Tv(t))return;this.dragSnapToOrigin=a,this.handlers=n,this.transformPagePoint=r,this.contextWindow=i||window;const s=Ns(t),o=Wu(s,this.transformPagePoint),{point:l}=o,{timestamp:u}=nt;this.history=[{...l,timestamp:u}];const{onSessionStart:c}=n;c&&c(t,Ku(o,this.history)),this.removeListeners=Ts(Ya(this.contextWindow,"pointermove",this.handlePointerMove),Ya(this.contextWindow,"pointerup",this.handlePointerUp),Ya(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),mr(this.updatePoint)}}function Wu(e,t){return t?{point:t(e.point)}:e}function _b(e,t){return{x:e.x-t.x,y:e.y-t.y}}function Ku({point:e},t){return{point:e,delta:_b(e,uT(t)),offset:_b(e,MO(t)),velocity:PO(t,.1)}}function MO(e){return e[0]}function uT(e){return e[e.length-1]}function PO(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,r=null;const i=uT(e);for(;n>=0&&(r=e[n],!(i.timestamp-r.timestamp>Pn(t)));)n--;if(!r)return{x:0,y:0};const a=Rn(i.timestamp-r.timestamp);if(a===0)return{x:0,y:0};const s={x:(i.x-r.x)/a,y:(i.y-r.y)/a};return s.x===1/0&&(s.x=0),s.y===1/0&&(s.y=0),s}const cT=1e-4,RO=1-cT,AO=1+cT,dT=.01,IO=0-dT,DO=0+dT;function At(e){return e.max-e.min}function OO(e,t,n){return Math.abs(e-t)<=n}function kb(e,t,n,r=.5){e.origin=r,e.originPoint=Me(t.min,t.max,e.origin),e.scale=At(n)/At(t),e.translate=Me(n.min,n.max,e.origin)-e.originPoint,(e.scale>=RO&&e.scale<=AO||isNaN(e.scale))&&(e.scale=1),(e.translate>=IO&&e.translate<=DO||isNaN(e.translate))&&(e.translate=0)}function Qa(e,t,n,r){kb(e.x,t.x,n.x,r?r.originX:void 0),kb(e.y,t.y,n.y,r?r.originY:void 0)}function Cb(e,t,n){e.min=n.min+t.min,e.max=e.min+At(t)}function LO(e,t,n){Cb(e.x,t.x,n.x),Cb(e.y,t.y,n.y)}function Eb(e,t,n){e.min=t.min-n.min,e.max=e.min+At(t)}function Ja(e,t,n){Eb(e.x,t.x,n.x),Eb(e.y,t.y,n.y)}function qO(e,{min:t,max:n},r){return t!==void 0&&e<t?e=r?Me(t,e,r.min):Math.max(e,t):n!==void 0&&e>n&&(e=r?Me(n,e,r.max):Math.min(e,n)),e}function jb(e,t,n){return{min:t!==void 0?e.min+t:void 0,max:n!==void 0?e.max+n-(e.max-e.min):void 0}}function FO(e,{top:t,left:n,bottom:r,right:i}){return{x:jb(e.x,n,i),y:jb(e.y,t,r)}}function Tb(e,t){let n=t.min-e.min,r=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,r]=[r,n]),{min:n,max:r}}function VO(e,t){return{x:Tb(e.x,t.x),y:Tb(e.y,t.y)}}function $O(e,t){let n=.5;const r=At(e),i=At(t);return i>r?n=Ui(t.min,t.max-r,e.min):r>i&&(n=Ui(e.min,e.max-i,t.min)),Ln(0,1,n)}function BO(e,t){const n={};return t.min!==void 0&&(n.min=t.min-e.min),t.max!==void 0&&(n.max=t.max-e.min),n}const ng=.35;function zO(e=ng){return e===!1?e=0:e===!0&&(e=ng),{x:Nb(e,"left","right"),y:Nb(e,"top","bottom")}}function Nb(e,t,n){return{min:Mb(e,t),max:Mb(e,n)}}function Mb(e,t){return typeof e=="number"?e:e[t]||0}const Pb=()=>({translate:0,scale:1,origin:0,originPoint:0}),Ti=()=>({x:Pb(),y:Pb()}),Rb=()=>({min:0,max:0}),Ue=()=>({x:Rb(),y:Rb()});function Vt(e){return[e("x"),e("y")]}function fT({top:e,left:t,right:n,bottom:r}){return{x:{min:t,max:n},y:{min:e,max:r}}}function UO({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function GO(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),r=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function Yu(e){return e===void 0||e===1}function rg({scale:e,scaleX:t,scaleY:n}){return!Yu(e)||!Yu(t)||!Yu(n)}function Mr(e){return rg(e)||hT(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function hT(e){return Ab(e.x)||Ab(e.y)}function Ab(e){return e&&e!=="0%"}function nl(e,t,n){const r=e-n,i=t*r;return n+i}function Ib(e,t,n,r,i){return i!==void 0&&(e=nl(e,i,r)),nl(e,n,r)+t}function ig(e,t=0,n=1,r,i){e.min=Ib(e.min,t,n,r,i),e.max=Ib(e.max,t,n,r,i)}function pT(e,{x:t,y:n}){ig(e.x,t.translate,t.scale,t.originPoint),ig(e.y,n.translate,n.scale,n.originPoint)}const Db=.999999999999,Ob=1.0000000000001;function HO(e,t,n,r=!1){const i=n.length;if(!i)return;t.x=t.y=1;let a,s;for(let o=0;o<i;o++){a=n[o],s=a.projectionDelta;const{visualElement:l}=a.options;l&&l.props.style&&l.props.style.display==="contents"||(r&&a.options.layoutScroll&&a.scroll&&a!==a.root&&Mi(e,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),s&&(t.x*=s.x.scale,t.y*=s.y.scale,pT(e,s)),r&&Mr(a.latestValues)&&Mi(e,a.latestValues))}t.x<Ob&&t.x>Db&&(t.x=1),t.y<Ob&&t.y>Db&&(t.y=1)}function Ni(e,t){e.min=e.min+t,e.max=e.max+t}function Lb(e,t,n,r,i=.5){const a=Me(e.min,e.max,i);ig(e,t,n,a,r)}function Mi(e,t){Lb(e.x,t.x,t.scaleX,t.scale,t.originX),Lb(e.y,t.y,t.scaleY,t.scale,t.originY)}function mT(e,t){return fT(GO(e.getBoundingClientRect(),t))}function WO(e,t,n){const r=mT(e,n),{scroll:i}=t;return i&&(Ni(r.x,i.offset.x),Ni(r.y,i.offset.y)),r}const gT=({current:e})=>e?e.ownerDocument.defaultView:null,KO=new WeakMap;class YO{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Ue(),this.visualElement=t}start(t,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const i=c=>{const{dragSnapToOrigin:f}=this.getProps();f?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Ns(c).point)},a=(c,f)=>{const{drag:h,dragPropagation:m,onDragStart:v}=this.getProps();if(h&&!m&&(this.openDragLock&&this.openDragLock(),this.openDragLock=$D(h),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Vt(x=>{let g=this.getAxisMotionValue(x).get()||0;if(gn.test(g)){const{projection:y}=this.visualElement;if(y&&y.layout){const b=y.layout.layoutBox[x];b&&(g=At(b)*(parseFloat(g)/100))}}this.originPoint[x]=g}),v&&Ee.postRender(()=>v(c,f)),Km(this.visualElement,"transform");const{animationState:p}=this.visualElement;p&&p.setActive("whileDrag",!0)},s=(c,f)=>{const{dragPropagation:h,dragDirectionLock:m,onDirectionLock:v,onDrag:p}=this.getProps();if(!h&&!this.openDragLock)return;const{offset:x}=f;if(m&&this.currentDirection===null){this.currentDirection=QO(x),this.currentDirection!==null&&v&&v(this.currentDirection);return}this.updateAxis("x",f.point,x),this.updateAxis("y",f.point,x),this.visualElement.render(),p&&p(c,f)},o=(c,f)=>this.stop(c,f),l=()=>Vt(c=>{var f;return this.getAnimationState(c)==="paused"&&((f=this.getAxisMotionValue(c).animation)===null||f===void 0?void 0:f.play())}),{dragSnapToOrigin:u}=this.getProps();this.panSession=new lT(t,{onSessionStart:i,onStart:a,onMove:s,onSessionEnd:o,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,contextWindow:gT(this.visualElement)})}stop(t,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:i}=n;this.startAnimation(i);const{onDragEnd:a}=this.getProps();a&&Ee.postRender(()=>a(t,n))}cancel(){this.isDragging=!1;const{projection:t,animationState:n}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(t,n,r){const{drag:i}=this.getProps();if(!r||!so(t,i,this.currentDirection))return;const a=this.getAxisMotionValue(t);let s=this.originPoint[t]+r[t];this.constraints&&this.constraints[t]&&(s=qO(s,this.constraints[t],this.elastic[t])),a.set(s)}resolveConstraints(){var t;const{dragConstraints:n,dragElastic:r}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(t=this.visualElement.projection)===null||t===void 0?void 0:t.layout,a=this.constraints;n&&Ei(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&i?this.constraints=FO(i.layoutBox,n):this.constraints=!1,this.elastic=zO(r),a!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&Vt(s=>{this.constraints!==!1&&this.getAxisMotionValue(s)&&(this.constraints[s]=BO(i.layoutBox[s],this.constraints[s]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:n}=this.getProps();if(!t||!Ei(t))return!1;const r=t.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const a=WO(r,i.root,this.visualElement.getTransformPagePoint());let s=VO(i.layout.layoutBox,a);if(n){const o=n(UO(s));this.hasMutatedConstraints=!!o,o&&(s=fT(o))}return s}startAnimation(t){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:a,dragSnapToOrigin:s,onDragTransitionEnd:o}=this.getProps(),l=this.constraints||{},u=Vt(c=>{if(!so(c,n,this.currentDirection))return;let f=l&&l[c]||{};s&&(f={min:0,max:0});const h=i?200:1e6,m=i?40:1e7,v={type:"inertia",velocity:r?t[c]:0,bounceStiffness:h,bounceDamping:m,timeConstant:750,restDelta:1,restSpeed:10,...a,...f};return this.startAxisValueAnimation(c,v)});return Promise.all(u).then(o)}startAxisValueAnimation(t,n){const r=this.getAxisMotionValue(t);return Km(this.visualElement,t),r.start(Vv(t,r,0,n,this.visualElement,!1))}stopAnimation(){Vt(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){Vt(t=>{var n;return(n=this.getAxisMotionValue(t).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(t){var n;return(n=this.getAxisMotionValue(t).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(t){const n=`_drag${t.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(t,(r.initial?r.initial[t]:void 0)||0)}snapToCursor(t){Vt(n=>{const{drag:r}=this.getProps();if(!so(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,a=this.getAxisMotionValue(n);if(i&&i.layout){const{min:s,max:o}=i.layout.layoutBox[n];a.set(t[n]-Me(s,o,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!Ei(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};Vt(s=>{const o=this.getAxisMotionValue(s);if(o&&this.constraints!==!1){const l=o.get();i[s]=$O({min:l,max:l},this.constraints[s])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Vt(s=>{if(!so(s,t,null))return;const o=this.getAxisMotionValue(s),{min:l,max:u}=this.constraints[s];o.set(Me(l,u,i[s]))})}addListeners(){if(!this.visualElement.current)return;KO.set(this.visualElement,this);const t=this.visualElement.current,n=Ya(t,"pointerdown",l=>{const{drag:u,dragListener:c=!0}=this.getProps();u&&c&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();Ei(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,a=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),Ee.read(r);const s=xs(window,"resize",()=>this.scalePositionWithinConstraints()),o=i.addEventListener("didUpdate",({delta:l,hasLayoutChanged:u})=>{this.isDragging&&u&&(Vt(c=>{const f=this.getAxisMotionValue(c);f&&(this.originPoint[c]+=l[c].translate,f.set(f.get()+l[c].translate))}),this.visualElement.render())});return()=>{s(),n(),a(),o&&o()}}getProps(){const t=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:a=!1,dragElastic:s=ng,dragMomentum:o=!0}=t;return{...t,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:a,dragElastic:s,dragMomentum:o}}}function so(e,t,n){return(t===!0||t===e)&&(n===null||n===e)}function QO(e,t=10){let n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}class JO extends wr{constructor(t){super(t),this.removeGroupControls=Pt,this.removeListeners=Pt,this.controls=new YO(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Pt}unmount(){this.removeGroupControls(),this.removeListeners()}}const qb=e=>(t,n)=>{e&&Ee.postRender(()=>e(t,n))};class XO extends wr{constructor(){super(...arguments),this.removePointerDownListener=Pt}onPointerDown(t){this.session=new lT(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:gT(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:qb(t),onStart:qb(n),onMove:r,onEnd:(a,s)=>{delete this.session,i&&Ee.postRender(()=>i(a,s))}}}mount(){this.removePointerDownListener=Ya(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Co={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Fb(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const Ca={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(Y.test(e))e=parseFloat(e);else return e;const n=Fb(e,t.target.x),r=Fb(e,t.target.y);return`${n}% ${r}%`}},ZO={correct:(e,{treeScale:t,projectionDelta:n})=>{const r=e,i=gr.parse(e);if(i.length>5)return r;const a=gr.createTransformer(e),s=typeof i[0]!="number"?1:0,o=n.x.scale*t.x,l=n.y.scale*t.y;i[0+s]/=o,i[1+s]/=l;const u=Me(o,l,.5);return typeof i[2+s]=="number"&&(i[2+s]/=u),typeof i[3+s]=="number"&&(i[3+s]/=u),a(i)}};class eL extends S.Component{componentDidMount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:a}=t;xD(tL),a&&(n.group&&n.group.add(a),r&&r.register&&i&&r.register(a),a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,onExitComplete:()=>this.safeToRemove()})),Co.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:n,visualElement:r,drag:i,isPresent:a}=this.props,s=r.projection;return s&&(s.isPresent=a,i||t.layoutDependency!==n||n===void 0?s.willUpdate():this.safeToRemove(),t.isPresent!==a&&(a?s.promote():s.relegate()||Ee.postRender(()=>{const o=s.getStack();(!o||!o.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),mv.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=t;i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function vT(e){const[t,n]=DI(),r=S.useContext(ZE);return d.jsx(eL,{...e,layoutGroup:r,switchLayoutGroup:S.useContext(oj),isPresent:t,safeToRemove:n})}const tL={borderRadius:{...Ca,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Ca,borderTopRightRadius:Ca,borderBottomLeftRadius:Ca,borderBottomRightRadius:Ca,boxShadow:ZO};function nL(e,t,n){const r=dt(e)?e:ys(e);return r.start(Vv("",r,t,n)),r.animation}function rL(e){return e instanceof SVGElement&&e.tagName!=="svg"}const iL=(e,t)=>e.depth-t.depth;class aL{constructor(){this.children=[],this.isDirty=!1}add(t){Nv(this.children,t),this.isDirty=!0}remove(t){Mv(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(iL),this.isDirty=!1,this.children.forEach(t)}}function sL(e,t){const n=vn.now(),r=({timestamp:i})=>{const a=i-n;a>=t&&(mr(r),e(a-t))};return Ee.read(r,!0),()=>mr(r)}const yT=["TopLeft","TopRight","BottomLeft","BottomRight"],oL=yT.length,Vb=e=>typeof e=="string"?parseFloat(e):e,$b=e=>typeof e=="number"||Y.test(e);function lL(e,t,n,r,i,a){i?(e.opacity=Me(0,n.opacity!==void 0?n.opacity:1,uL(r)),e.opacityExit=Me(t.opacity!==void 0?t.opacity:1,0,cL(r))):a&&(e.opacity=Me(t.opacity!==void 0?t.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let s=0;s<oL;s++){const o=`border${yT[s]}Radius`;let l=Bb(t,o),u=Bb(n,o);if(l===void 0&&u===void 0)continue;l||(l=0),u||(u=0),l===0||u===0||$b(l)===$b(u)?(e[o]=Math.max(Me(Vb(l),Vb(u),r),0),(gn.test(u)||gn.test(l))&&(e[o]+="%")):e[o]=u}(t.rotate||n.rotate)&&(e.rotate=Me(t.rotate||0,n.rotate||0,r))}function Bb(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const uL=bT(0,.5,Lj),cL=bT(.5,.95,Pt);function bT(e,t,n){return r=>r<e?0:r>t?1:n(Ui(e,t,r))}function zb(e,t){e.min=t.min,e.max=t.max}function Ft(e,t){zb(e.x,t.x),zb(e.y,t.y)}function Ub(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function Gb(e,t,n,r,i){return e-=t,e=nl(e,1/n,r),i!==void 0&&(e=nl(e,1/i,r)),e}function dL(e,t=0,n=1,r=.5,i,a=e,s=e){if(gn.test(t)&&(t=parseFloat(t),t=Me(s.min,s.max,t/100)-s.min),typeof t!="number")return;let o=Me(a.min,a.max,r);e===a&&(o-=t),e.min=Gb(e.min,t,n,o,i),e.max=Gb(e.max,t,n,o,i)}function Hb(e,t,[n,r,i],a,s){dL(e,t[n],t[r],t[i],t.scale,a,s)}const fL=["x","scaleX","originX"],hL=["y","scaleY","originY"];function Wb(e,t,n,r){Hb(e.x,t,fL,n?n.x:void 0,r?r.x:void 0),Hb(e.y,t,hL,n?n.y:void 0,r?r.y:void 0)}function Kb(e){return e.translate===0&&e.scale===1}function xT(e){return Kb(e.x)&&Kb(e.y)}function Yb(e,t){return e.min===t.min&&e.max===t.max}function pL(e,t){return Yb(e.x,t.x)&&Yb(e.y,t.y)}function Qb(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function wT(e,t){return Qb(e.x,t.x)&&Qb(e.y,t.y)}function Jb(e){return At(e.x)/At(e.y)}function Xb(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class mL{constructor(){this.members=[]}add(t){Nv(this.members,t),t.scheduleRender()}remove(t){if(Mv(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(t){const n=this.members.findIndex(i=>t===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const a=this.members[i];if(a.isPresent!==!1){r=a;break}}return r?(this.promote(r),!0):!1}promote(t,n){const r=this.lead;if(t!==r&&(this.prevLead=r,this.lead=t,t.show(),r)){r.instance&&r.scheduleRender(),t.scheduleRender(),t.resumeFrom=r,n&&(t.resumeFrom.preserveOpacity=!0),r.snapshot&&(t.snapshot=r.snapshot,t.snapshot.latestValues=r.animationValues||r.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:i}=t.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:n,resumingFrom:r}=t;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function gL(e,t,n){let r="";const i=e.x.translate/t.x,a=e.y.translate/t.y,s=(n==null?void 0:n.z)||0;if((i||a||s)&&(r=`translate3d(${i}px, ${a}px, ${s}px) `),(t.x!==1||t.y!==1)&&(r+=`scale(${1/t.x}, ${1/t.y}) `),n){const{transformPerspective:u,rotate:c,rotateX:f,rotateY:h,skewX:m,skewY:v}=n;u&&(r=`perspective(${u}px) ${r}`),c&&(r+=`rotate(${c}deg) `),f&&(r+=`rotateX(${f}deg) `),h&&(r+=`rotateY(${h}deg) `),m&&(r+=`skewX(${m}deg) `),v&&(r+=`skewY(${v}deg) `)}const o=e.x.scale*t.x,l=e.y.scale*t.y;return(o!==1||l!==1)&&(r+=`scale(${o}, ${l})`),r||"none"}const Pr={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},Ra=typeof window<"u"&&window.MotionDebug!==void 0,Qu=["","X","Y","Z"],vL={visibility:"hidden"},Zb=1e3;let yL=0;function Ju(e,t,n,r){const{latestValues:i}=t;i[e]&&(n[e]=i[e],t.setStaticValue(e,0),r&&(r[e]=0))}function ST(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const n=Mj(t);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:a}=e.options;window.MotionCancelOptimisedAnimation(n,"transform",Ee,!(i||a))}const{parent:r}=e;r&&!r.hasCheckedOptimisedAppear&&ST(r)}function _T({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(s={},o=t==null?void 0:t()){this.id=yL++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Ra&&(Pr.totalNodes=Pr.resolvedTargetDeltas=Pr.recalculatedProjection=0),this.nodes.forEach(wL),this.nodes.forEach(EL),this.nodes.forEach(jL),this.nodes.forEach(SL),Ra&&window.MotionDebug.record(Pr)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=s,this.root=o?o.root||o:this,this.path=o?[...o.path,o]:[],this.parent=o,this.depth=o?o.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new aL)}addEventListener(s,o){return this.eventHandlers.has(s)||this.eventHandlers.set(s,new Pv),this.eventHandlers.get(s).add(o)}notifyListeners(s,...o){const l=this.eventHandlers.get(s);l&&l.notify(...o)}hasListeners(s){return this.eventHandlers.has(s)}mount(s,o=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=rL(s),this.instance=s;const{layoutId:l,layout:u,visualElement:c}=this.options;if(c&&!c.current&&c.mount(s),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),o&&(u||l)&&(this.isLayoutDirty=!0),e){let f;const h=()=>this.root.updateBlockedByResize=!1;e(s,()=>{this.root.updateBlockedByResize=!0,f&&f(),f=sL(h,250),Co.hasAnimatedSinceResize&&(Co.hasAnimatedSinceResize=!1,this.nodes.forEach(tx))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&c&&(l||u)&&this.addEventListener("didUpdate",({delta:f,hasLayoutChanged:h,hasRelativeTargetChanged:m,layout:v})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const p=this.options.transition||c.getDefaultTransition()||RL,{onLayoutAnimationStart:x,onLayoutAnimationComplete:g}=c.getProps(),y=!this.targetLayout||!wT(this.targetLayout,v)||m,b=!h&&m;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||b||h&&(y||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(f,b);const _={...Cv(p,"layout"),onPlay:x,onComplete:g};(c.shouldReduceMotion||this.options.layoutRoot)&&(_.delay=0,_.type=!1),this.startAnimation(_)}else h||tx(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=v})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const s=this.getStack();s&&s.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,mr(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(TL),this.animationId++)}getTransformTemplate(){const{visualElement:s}=this.options;return s&&s.getProps().transformTemplate}willUpdate(s=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&ST(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let c=0;c<this.path.length;c++){const f=this.path[c];f.shouldResetTransform=!0,f.updateScroll("snapshot"),f.options.layoutRoot&&f.willUpdate(!1)}const{layoutId:o,layout:l}=this.options;if(o===void 0&&!l)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),s&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(ex);return}this.isUpdating||this.nodes.forEach(kL),this.isUpdating=!1,this.nodes.forEach(CL),this.nodes.forEach(bL),this.nodes.forEach(xL),this.clearAllSnapshots();const o=vn.now();nt.delta=Ln(0,1e3/60,o-nt.timestamp),nt.timestamp=o,nt.isProcessing=!0,$u.update.process(nt),$u.preRender.process(nt),$u.render.process(nt),nt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,mv.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(_L),this.sharedNodes.forEach(NL)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Ee.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Ee.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const s=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Ue(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:o}=this.options;o&&o.notify("LayoutMeasure",this.layout.layoutBox,s?s.layoutBox:void 0)}updateScroll(s="measure"){let o=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===s&&(o=!1),o){const l=r(this.instance);this.scroll={animationId:this.root.animationId,phase:s,isRoot:l,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!i)return;const s=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,o=this.projectionDelta&&!xT(this.projectionDelta),l=this.getTransformTemplate(),u=l?l(this.latestValues,""):void 0,c=u!==this.prevTransformTemplateValue;s&&(o||Mr(this.latestValues)||c)&&(i(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(s=!0){const o=this.measurePageBox();let l=this.removeElementScroll(o);return s&&(l=this.removeTransform(l)),AL(l),{animationId:this.root.animationId,measuredBox:o,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var s;const{visualElement:o}=this.options;if(!o)return Ue();const l=o.measureViewportBox();if(!(((s=this.scroll)===null||s===void 0?void 0:s.wasRoot)||this.path.some(IL))){const{scroll:c}=this.root;c&&(Ni(l.x,c.offset.x),Ni(l.y,c.offset.y))}return l}removeElementScroll(s){var o;const l=Ue();if(Ft(l,s),!((o=this.scroll)===null||o===void 0)&&o.wasRoot)return l;for(let u=0;u<this.path.length;u++){const c=this.path[u],{scroll:f,options:h}=c;c!==this.root&&f&&h.layoutScroll&&(f.wasRoot&&Ft(l,s),Ni(l.x,f.offset.x),Ni(l.y,f.offset.y))}return l}applyTransform(s,o=!1){const l=Ue();Ft(l,s);for(let u=0;u<this.path.length;u++){const c=this.path[u];!o&&c.options.layoutScroll&&c.scroll&&c!==c.root&&Mi(l,{x:-c.scroll.offset.x,y:-c.scroll.offset.y}),Mr(c.latestValues)&&Mi(l,c.latestValues)}return Mr(this.latestValues)&&Mi(l,this.latestValues),l}removeTransform(s){const o=Ue();Ft(o,s);for(let l=0;l<this.path.length;l++){const u=this.path[l];if(!u.instance||!Mr(u.latestValues))continue;rg(u.latestValues)&&u.updateSnapshot();const c=Ue(),f=u.measurePageBox();Ft(c,f),Wb(o,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,c)}return Mr(this.latestValues)&&Wb(o,this.latestValues),o}setTargetDelta(s){this.targetDelta=s,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(s){this.options={...this.options,...s,crossfade:s.crossfade!==void 0?s.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==nt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(s=!1){var o;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==l;if(!(s||u&&this.isSharedProjectionDirty||this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:f,layoutId:h}=this.options;if(!(!this.layout||!(f||h))){if(this.resolvedRelativeTargetAt=nt.timestamp,!this.targetDelta&&!this.relativeTarget){const m=this.getClosestProjectingParent();m&&m.layout&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ue(),this.relativeTargetOrigin=Ue(),Ja(this.relativeTargetOrigin,this.layout.layoutBox,m.layout.layoutBox),Ft(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=Ue(),this.targetWithTransforms=Ue()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),LO(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Ft(this.target,this.layout.layoutBox),pT(this.target,this.targetDelta)):Ft(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const m=this.getClosestProjectingParent();m&&!!m.resumingFrom==!!this.resumingFrom&&!m.options.layoutScroll&&m.target&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ue(),this.relativeTargetOrigin=Ue(),Ja(this.relativeTargetOrigin,this.target,m.target),Ft(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Ra&&Pr.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||rg(this.parent.latestValues)||hT(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var s;const o=this.getLead(),l=!!this.resumingFrom||this!==o;let u=!0;if((this.isProjectionDirty||!((s=this.parent)===null||s===void 0)&&s.isProjectionDirty)&&(u=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===nt.timestamp&&(u=!1),u)return;const{layout:c,layoutId:f}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(c||f))return;Ft(this.layoutCorrected,this.layout.layoutBox);const h=this.treeScale.x,m=this.treeScale.y;HO(this.layoutCorrected,this.treeScale,this.path,l),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=Ue());const{target:v}=o;if(!v){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(Ub(this.prevProjectionDelta.x,this.projectionDelta.x),Ub(this.prevProjectionDelta.y,this.projectionDelta.y)),Qa(this.projectionDelta,this.layoutCorrected,v,this.latestValues),(this.treeScale.x!==h||this.treeScale.y!==m||!Xb(this.projectionDelta.x,this.prevProjectionDelta.x)||!Xb(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",v)),Ra&&Pr.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(s=!0){var o;if((o=this.options.visualElement)===null||o===void 0||o.scheduleRender(),s){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Ti(),this.projectionDelta=Ti(),this.projectionDeltaWithTransform=Ti()}setAnimationOrigin(s,o=!1){const l=this.snapshot,u=l?l.latestValues:{},c={...this.latestValues},f=Ti();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!o;const h=Ue(),m=l?l.source:void 0,v=this.layout?this.layout.source:void 0,p=m!==v,x=this.getStack(),g=!x||x.members.length<=1,y=!!(p&&!g&&this.options.crossfade===!0&&!this.path.some(PL));this.animationProgress=0;let b;this.mixTargetDelta=_=>{const C=_/1e3;nx(f.x,s.x,C),nx(f.y,s.y,C),this.setTargetDelta(f),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Ja(h,this.layout.layoutBox,this.relativeParent.layout.layoutBox),ML(this.relativeTarget,this.relativeTargetOrigin,h,C),b&&pL(this.relativeTarget,b)&&(this.isProjectionDirty=!1),b||(b=Ue()),Ft(b,this.relativeTarget)),p&&(this.animationValues=c,lL(c,u,this.latestValues,C,y,g)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=C},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(s){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(mr(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Ee.update(()=>{Co.hasAnimatedSinceResize=!0,this.currentAnimation=nL(0,Zb,{...s,onUpdate:o=>{this.mixTargetDelta(o),s.onUpdate&&s.onUpdate(o)},onComplete:()=>{s.onComplete&&s.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const s=this.getStack();s&&s.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Zb),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const s=this.getLead();let{targetWithTransforms:o,target:l,layout:u,latestValues:c}=s;if(!(!o||!l||!u)){if(this!==s&&this.layout&&u&&kT(this.options.animationType,this.layout.layoutBox,u.layoutBox)){l=this.target||Ue();const f=At(this.layout.layoutBox.x);l.x.min=s.target.x.min,l.x.max=l.x.min+f;const h=At(this.layout.layoutBox.y);l.y.min=s.target.y.min,l.y.max=l.y.min+h}Ft(o,l),Mi(o,c),Qa(this.projectionDeltaWithTransform,this.layoutCorrected,o,c)}}registerSharedNode(s,o){this.sharedNodes.has(s)||this.sharedNodes.set(s,new mL),this.sharedNodes.get(s).add(o);const u=o.options.initialPromotionConfig;o.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(o):void 0})}isLead(){const s=this.getStack();return s?s.lead===this:!0}getLead(){var s;const{layoutId:o}=this.options;return o?((s=this.getStack())===null||s===void 0?void 0:s.lead)||this:this}getPrevLead(){var s;const{layoutId:o}=this.options;return o?(s=this.getStack())===null||s===void 0?void 0:s.prevLead:void 0}getStack(){const{layoutId:s}=this.options;if(s)return this.root.sharedNodes.get(s)}promote({needsReset:s,transition:o,preserveFollowOpacity:l}={}){const u=this.getStack();u&&u.promote(this,l),s&&(this.projectionDelta=void 0,this.needsReset=!0),o&&this.setOptions({transition:o})}relegate(){const s=this.getStack();return s?s.relegate(this):!1}resetSkewAndRotation(){const{visualElement:s}=this.options;if(!s)return;let o=!1;const{latestValues:l}=s;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(o=!0),!o)return;const u={};l.z&&Ju("z",s,u,this.animationValues);for(let c=0;c<Qu.length;c++)Ju(`rotate${Qu[c]}`,s,u,this.animationValues),Ju(`skew${Qu[c]}`,s,u,this.animationValues);s.render();for(const c in u)s.setStaticValue(c,u[c]),this.animationValues&&(this.animationValues[c]=u[c]);s.scheduleRender()}getProjectionStyles(s){var o,l;if(!this.instance||this.isSVG)return;if(!this.isVisible)return vL;const u={visibility:""},c=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,u.opacity="",u.pointerEvents=_o(s==null?void 0:s.pointerEvents)||"",u.transform=c?c(this.latestValues,""):"none",u;const f=this.getLead();if(!this.projectionDelta||!this.layout||!f.target){const p={};return this.options.layoutId&&(p.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,p.pointerEvents=_o(s==null?void 0:s.pointerEvents)||""),this.hasProjected&&!Mr(this.latestValues)&&(p.transform=c?c({},""):"none",this.hasProjected=!1),p}const h=f.animationValues||f.latestValues;this.applyTransformsToTarget(),u.transform=gL(this.projectionDeltaWithTransform,this.treeScale,h),c&&(u.transform=c(h,u.transform));const{x:m,y:v}=this.projectionDelta;u.transformOrigin=`${m.origin*100}% ${v.origin*100}% 0`,f.animationValues?u.opacity=f===this?(l=(o=h.opacity)!==null&&o!==void 0?o:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:h.opacityExit:u.opacity=f===this?h.opacity!==void 0?h.opacity:"":h.opacityExit!==void 0?h.opacityExit:0;for(const p in Jo){if(h[p]===void 0)continue;const{correct:x,applyTo:g}=Jo[p],y=u.transform==="none"?h[p]:x(h[p],f);if(g){const b=g.length;for(let _=0;_<b;_++)u[g[_]]=y}else u[p]=y}return this.options.layoutId&&(u.pointerEvents=f===this?_o(s==null?void 0:s.pointerEvents)||"":"none"),u}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(s=>{var o;return(o=s.currentAnimation)===null||o===void 0?void 0:o.stop()}),this.root.nodes.forEach(ex),this.root.sharedNodes.clear()}}}function bL(e){e.updateLayout()}function xL(e){var t;const n=((t=e.resumeFrom)===null||t===void 0?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&n&&e.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=e.layout,{animationType:a}=e.options,s=n.source!==e.layout.source;a==="size"?Vt(f=>{const h=s?n.measuredBox[f]:n.layoutBox[f],m=At(h);h.min=r[f].min,h.max=h.min+m}):kT(a,n.layoutBox,r)&&Vt(f=>{const h=s?n.measuredBox[f]:n.layoutBox[f],m=At(r[f]);h.max=h.min+m,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[f].max=e.relativeTarget[f].min+m)});const o=Ti();Qa(o,r,n.layoutBox);const l=Ti();s?Qa(l,e.applyTransform(i,!0),n.measuredBox):Qa(l,r,n.layoutBox);const u=!xT(o);let c=!1;if(!e.resumeFrom){const f=e.getClosestProjectingParent();if(f&&!f.resumeFrom){const{snapshot:h,layout:m}=f;if(h&&m){const v=Ue();Ja(v,n.layoutBox,h.layoutBox);const p=Ue();Ja(p,r,m.layoutBox),wT(v,p)||(c=!0),f.options.layoutRoot&&(e.relativeTarget=p,e.relativeTargetOrigin=v,e.relativeParent=f)}}}e.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:l,layoutDelta:o,hasLayoutChanged:u,hasRelativeTargetChanged:c})}else if(e.isLead()){const{onExitComplete:r}=e.options;r&&r()}e.options.transition=void 0}function wL(e){Ra&&Pr.totalNodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function SL(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function _L(e){e.clearSnapshot()}function ex(e){e.clearMeasurements()}function kL(e){e.isLayoutDirty=!1}function CL(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function tx(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function EL(e){e.resolveTargetDelta()}function jL(e){e.calcProjection()}function TL(e){e.resetSkewAndRotation()}function NL(e){e.removeLeadSnapshot()}function nx(e,t,n){e.translate=Me(t.translate,0,n),e.scale=Me(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function rx(e,t,n,r){e.min=Me(t.min,n.min,r),e.max=Me(t.max,n.max,r)}function ML(e,t,n,r){rx(e.x,t.x,n.x,r),rx(e.y,t.y,n.y,r)}function PL(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const RL={duration:.45,ease:[.4,0,.1,1]},ix=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),ax=ix("applewebkit/")&&!ix("chrome/")?Math.round:Pt;function sx(e){e.min=ax(e.min),e.max=ax(e.max)}function AL(e){sx(e.x),sx(e.y)}function kT(e,t,n){return e==="position"||e==="preserve-aspect"&&!OO(Jb(t),Jb(n),.2)}function IL(e){var t;return e!==e.root&&((t=e.scroll)===null||t===void 0?void 0:t.wasRoot)}const DL=_T({attachResizeListener:(e,t)=>xs(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Xu={current:void 0},CT=_T({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!Xu.current){const e=new DL({});e.mount(window),e.setOptions({layoutScroll:!0}),Xu.current=e}return Xu.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),OL={pan:{Feature:XO},drag:{Feature:JO,ProjectionNode:CT,MeasureLayout:vT}};function ox(e,t,n){const{props:r}=e;e.animationState&&r.whileHover&&e.animationState.setActive("whileHover",n==="Start");const i="onHover"+n,a=r[i];a&&Ee.postRender(()=>a(t,Ns(t)))}class LL extends wr{mount(){const{current:t}=this.node;t&&(this.unmount=OD(t,n=>(ox(this.node,n,"Start"),r=>ox(this.node,r,"End"))))}unmount(){}}class qL extends wr{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Ts(xs(this.node.current,"focus",()=>this.onFocus()),xs(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function lx(e,t,n){const{props:r}=e;e.animationState&&r.whileTap&&e.animationState.setActive("whileTap",n==="Start");const i="onTap"+(n==="End"?"":n),a=r[i];a&&Ee.postRender(()=>a(t,Ns(t)))}class FL extends wr{mount(){const{current:t}=this.node;t&&(this.unmount=VD(t,n=>(lx(this.node,n,"Start"),(r,{success:i})=>lx(this.node,r,i?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const ag=new WeakMap,Zu=new WeakMap,VL=e=>{const t=ag.get(e.target);t&&t(e)},$L=e=>{e.forEach(VL)};function BL({root:e,...t}){const n=e||document;Zu.has(n)||Zu.set(n,{});const r=Zu.get(n),i=JSON.stringify(t);return r[i]||(r[i]=new IntersectionObserver($L,{root:e,...t})),r[i]}function zL(e,t,n){const r=BL(t);return ag.set(e,n),r.observe(e),()=>{ag.delete(e),r.unobserve(e)}}const UL={some:0,all:1};class GL extends wr{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:a}=t,s={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:UL[i]},o=l=>{const{isIntersecting:u}=l;if(this.isInView===u||(this.isInView=u,a&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:c,onViewportLeave:f}=this.node.getProps(),h=u?c:f;h&&h(l)};return zL(this.node.current,s,o)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:n}=this.node;["amount","margin","root"].some(HL(t,n))&&this.startObserver()}unmount(){}}function HL({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}const WL={inView:{Feature:GL},tap:{Feature:FL},focus:{Feature:qL},hover:{Feature:LL}},KL={layout:{ProjectionNode:CT,MeasureLayout:vT}},sg={current:null},ET={current:!1};function YL(){if(ET.current=!0,!!cv)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>sg.current=e.matches;e.addListener(t),t()}else sg.current=!1}const QL=[...Jj,ut,gr],JL=e=>QL.find(Qj(e)),ux=new WeakMap;function XL(e,t,n){for(const r in t){const i=t[r],a=n[r];if(dt(i))e.addValue(r,i);else if(dt(a))e.addValue(r,ys(i,{owner:e}));else if(a!==i)if(e.hasValue(r)){const s=e.getValue(r);s.liveStyle===!0?s.jump(i):s.hasAnimated||s.set(i)}else{const s=e.getStaticValue(r);e.addValue(r,ys(s!==void 0?s:i,{owner:e}))}}for(const r in n)t[r]===void 0&&e.removeValue(r);return t}const cx=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class ZL{scrapeMotionValuesFromProps(t,n,r){return{}}constructor({parent:t,props:n,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:a,visualState:s},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Lv,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const m=vn.now();this.renderScheduledAt<m&&(this.renderScheduledAt=m,Ee.render(this.render,!1,!0))};const{latestValues:l,renderState:u,onUpdate:c}=s;this.onUpdate=c,this.latestValues=l,this.baseTarget={...l},this.initialValues=n.initial?{...l}:{},this.renderState=u,this.parent=t,this.props=n,this.presenceContext=r,this.depth=t?t.depth+1:0,this.reducedMotionConfig=i,this.options=o,this.blockInitialAnimation=!!a,this.isControllingVariants=El(n),this.isVariantNode=aj(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:f,...h}=this.scrapeMotionValuesFromProps(n,{},this);for(const m in h){const v=h[m];l[m]!==void 0&&dt(v)&&v.set(l[m],!1)}}mount(t){this.current=t,ux.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),ET.current||YL(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:sg.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){ux.delete(this.current),this.projection&&this.projection.unmount(),mr(this.notifyUpdate),mr(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const n=this.features[t];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(t,n){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const r=Kr.has(t),i=n.on("change",o=>{this.latestValues[t]=o,this.props.onUpdate&&Ee.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),a=n.on("renderRequest",this.scheduleRender);let s;window.MotionCheckAppearSync&&(s=window.MotionCheckAppearSync(this,t,n)),this.valueSubscriptions.set(t,()=>{i(),a(),s&&s(),n.owner&&n.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in Gi){const n=Gi[t];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[t]&&i&&r(this.props)&&(this.features[t]=new i(this)),this.features[t]){const a=this.features[t];a.isMounted?a.update():(a.mount(),a.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Ue()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,n){this.latestValues[t]=n}update(t,n){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<cx.length;r++){const i=cx[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const a="on"+i,s=t[a];s&&(this.propEventSubscriptions[i]=this.on(i,s))}this.prevMotionValues=XL(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(t),()=>n.variantChildren.delete(t)}addValue(t,n){const r=this.values.get(t);n!==r&&(r&&this.removeValue(t),this.bindToMotionValue(t,n),this.values.set(t,n),this.latestValues[t]=n.get())}removeValue(t){this.values.delete(t);const n=this.valueSubscriptions.get(t);n&&(n(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,n){if(this.props.values&&this.props.values[t])return this.props.values[t];let r=this.values.get(t);return r===void 0&&n!==void 0&&(r=ys(n===null?void 0:n,{owner:this}),this.addValue(t,r)),r}readValue(t,n){var r;let i=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:(r=this.getBaseTargetFromProps(this.props,t))!==null&&r!==void 0?r:this.readValueFromInstance(this.current,t,this.options);return i!=null&&(typeof i=="string"&&(Kj(i)||Fj(i))?i=parseFloat(i):!JL(i)&&gr.test(n)&&(i=Gj(t,n)),this.setBaseTarget(t,dt(i)?i.get():i)),dt(i)?i.get():i}setBaseTarget(t,n){this.baseTarget[t]=n}getBaseTarget(t){var n;const{initial:r}=this.props;let i;if(typeof r=="string"||typeof r=="object"){const s=vv(this.props,r,(n=this.presenceContext)===null||n===void 0?void 0:n.custom);s&&(i=s[t])}if(r&&i!==void 0)return i;const a=this.getBaseTargetFromProps(this.props,t);return a!==void 0&&!dt(a)?a:this.initialValues[t]!==void 0&&i===void 0?void 0:this.baseTarget[t]}on(t,n){return this.events[t]||(this.events[t]=new Pv),this.events[t].add(n)}notify(t,...n){this.events[t]&&this.events[t].notify(...n)}}class jT extends ZL{constructor(){super(...arguments),this.KeyframeResolver=Xj}sortInstanceNodePosition(t,n){return t.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(t,n){return t.style?t.style[n]:void 0}removeValueFromRenderState(t,{vars:n,style:r}){delete n[t],delete r[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;dt(t)&&(this.childSubscription=t.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function eq(e){return window.getComputedStyle(e)}class tq extends jT{constructor(){super(...arguments),this.type="html",this.renderInstance=pj}readValueFromInstance(t,n){if(Kr.has(n)){const r=Ov(n);return r&&r.default||0}else{const r=eq(t),i=(dj(n)?r.getPropertyValue(n):r[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(t,{transformPagePoint:n}){return mT(t,n)}build(t,n,r){xv(t,n,r.transformTemplate)}scrapeMotionValuesFromProps(t,n,r){return kv(t,n,r)}}class nq extends jT{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Ue}getBaseTargetFromProps(t,n){return t[n]}readValueFromInstance(t,n){if(Kr.has(n)){const r=Ov(n);return r&&r.default||0}return n=mj.has(n)?n:pv(n),t.getAttribute(n)}scrapeMotionValuesFromProps(t,n,r){return yj(t,n,r)}build(t,n,r){wv(t,n,this.isSVGTag,r.transformTemplate)}renderInstance(t,n,r,i){gj(t,n,r,i)}mount(t){this.isSVGTag=_v(t.tagName),super.mount(t)}}const rq=(e,t)=>gv(e)?new nq(t):new tq(t,{allowProjection:e!==S.Fragment}),iq=ND({...jO,...WL,...OL,...KL},rq),aq=UI(iq);function sq({steps:e,fromRects:t,toRects:n,onComplete:r}){return S.useEffect(()=>{const i=window.setTimeout(r,550);return()=>window.clearTimeout(i)},[r]),d.jsx("div",{className:"morph-layer",children:e.map(i=>{var o;const a=t[i.id],s=n[i.id];return!a||!s?null:d.jsxs(aq.div,{className:`morph-card step-${i.type}`,initial:{left:a.left,top:a.top,width:a.width,height:a.height},animate:{left:s.left,top:s.top,width:s.width,height:s.height},transition:{duration:.5,ease:"easeInOut"},children:[d.jsx("div",{className:"morph-card-title",children:i.name}),d.jsx("div",{className:"morph-card-subtitle",children:((o=i.preview)==null?void 0:o.title)??i.type})]},i.id)})})}function oq({morph:e,onComplete:t,children:n}){return d.jsxs("div",{className:"morph-orchestrator",children:[n,e?d.jsx(sq,{steps:e.steps,fromRects:e.fromRects,toRects:e.toRects,onComplete:t}):null]})}const lq="demo-trace-overlap-001",uq="Overlap + ToolCallId Demo",cq="2026-01-27T10:00:00.000Z",dq="2026-01-27T10:00:05.000Z",fq="completed",hq={source:"openai_agents",agentName:"DemoAgent",modelId:"gpt-4o-2024-11-20",wallTimeMs:5e3,workTimeMs:7200,totalTokens:1400,totalCostUsd:.018},pq=[{id:"s1",index:0,type:"llm_call",name:"plan",startedAt:"2026-01-27T10:00:00.000Z",endedAt:"2026-01-27T10:00:01.000Z",durationMs:1e3,childStepIds:[],metrics:{tokensTotal:300,costUsd:.004},preview:{title:"LLM: plan",subtitle:"gpt-4o",outputPreview:"I'll fetch two sources..."},status:"completed"},{id:"s2",index:1,type:"llm_call",name:"call_tools",startedAt:"2026-01-27T10:00:01.000Z",endedAt:"2026-01-27T10:00:01.200Z",durationMs:200,childStepIds:[],metrics:{tokensTotal:120,costUsd:.002},preview:{title:"LLM: call tools",outputPreview:"Calling web_search + database_query"},io:{emittedToolCallIds:["tc-001","tc-002"]},status:"completed"},{id:"s3",index:2,type:"tool_call",name:"web_search",toolCallId:"tc-001",startedAt:"2026-01-27T10:00:01.200Z",endedAt:"2026-01-27T10:00:03.200Z",durationMs:2e3,childStepIds:[],metrics:{costUsd:0},preview:{title:"Tool: web_search",inputPreview:'{"q":"EU AI Act"}',outputPreview:"[3 results...]"},status:"completed"},{id:"s4",index:3,type:"tool_call",name:"database_query",toolCallId:"tc-002",startedAt:"2026-01-27T10:00:01.500Z",endedAt:"2026-01-27T10:00:02.700Z",durationMs:1200,childStepIds:[],preview:{title:"Tool: database_query",inputPreview:'{"sql":"SELECT..."}',outputPreview:'{"rows":42}'},status:"completed"},{id:"s5",index:4,type:"llm_call",name:"analyze",startedAt:"2026-01-27T10:00:03.200Z",endedAt:"2026-01-27T10:00:04.600Z",durationMs:1400,childStepIds:[],metrics:{tokensTotal:700,costUsd:.012},preview:{title:"LLM: analyze",outputPreview:"Synthesis based on tool outputs..."},io:{consumedToolCallIds:["tc-001","tc-002"]},status:"completed"}],Nl={id:lq,name:uq,startedAt:cq,endedAt:dq,status:fq,metadata:hq,steps:pq};function TT(e,t){const n=mq(e,t),r=new Set(n.map(f=>f.leftId)),i=new Set(n.map(f=>f.rightId)),a=t.steps.filter(f=>!i.has(f.id)).map(f=>f.id),s=e.steps.filter(f=>!r.has(f.id)).map(f=>f.id),o=n.filter(f=>{const h=e.steps.find(v=>v.id===f.leftId),m=t.steps.find(v=>v.id===f.rightId);return!h||!m?!1:dx(h)!==dx(m)}),l=o.map(f=>f.leftId),u=(t.metadata.totalCostUsd??0)-(e.metadata.totalCostUsd??0),c=t.metadata.wallTimeMs-e.metadata.wallTimeMs;return{addedSteps:a,removedSteps:s,changedSteps:l,changedPairs:o,alignedSteps:n,costDeltaUsd:u,wallTimeDeltaMs:c}}function mq(e,t){const n=[],r=new Set(e.steps.map(c=>c.id)),i=new Set(t.steps.map(c=>c.id));Array.from(r).forEach(c=>{i.has(c)&&(n.push({leftId:c,rightId:c}),r.delete(c),i.delete(c))});const a=new Map;t.steps.forEach(c=>{c.toolCallId&&a.set(c.toolCallId,c.id)}),e.steps.forEach(c=>{if(!c.toolCallId)return;const f=a.get(c.toolCallId);f&&i.has(f)&&(n.push({leftId:c.id,rightId:f}),r.delete(c.id),i.delete(f))});const s=px(e),o=px(t),l=gq(e,t),u={};return i.forEach(c=>{const f=o.get(c);if(!f)return;const h=fx(f.step);h&&(u[h]||(u[h]=[]),u[h].push(c))}),Object.values(u).forEach(c=>{c.sort((f,h)=>{var m,v;return(((m=o.get(f))==null?void 0:m.startMs)??0)-(((v=o.get(h))==null?void 0:v.startMs)??0)})}),Array.from(r).forEach(c=>{var v;const f=s.get(c);if(!f)return;const h=fx(f.step);if(!h||!((v=u[h])!=null&&v.length))return;const m=vq(f,u[h],o,l);m&&(n.push({leftId:c,rightId:m}),r.delete(c),i.delete(m),u[h]=u[h].filter(p=>p!==m))}),n}function dx(e){var r,i;const t=((r=e.preview)==null?void 0:r.outputPreview)??null,n=((i=e.metrics)==null?void 0:i.costUsd)??null;return`${e.status}|${t??""}|${n??""}`}function fx(e){return e.type?`${e.type}:${e.name??""}`:null}function hx(e){if(!e)return null;const t=Date.parse(e);return Number.isNaN(t)?null:t}function px(e){const t=hx(e.startedAt),n=new Map;return e.steps.forEach(r=>{const i=hx(r.startedAt),a=t!=null&&i!=null?i-t:null;n.set(r.id,{step:r,startMs:a})}),n}function gq(e,t){const n=Math.max(e.metadata.wallTimeMs,t.metadata.wallTimeMs,1);return Math.max(1e3,Math.min(5e3,Math.round(n*.1)))}function vq(e,t,n,r){const i=e.startMs;if(i==null)return null;let a=null,s=r+1;return t.forEach(o=>{const l=n.get(o);if(!l||l.startMs==null)return;const u=Math.abs(l.startMs-i);u<s&&(s=u,a=o)}),s<=r?a:null}const yq=new Map,bq=new Map,Vr=new Map;async function xq(){return[Nl]}async function NT(e){return{trace:Nl}}const wq={s1:{role:"assistant",content:"I'll analyze the user's request and create a plan to fetch information from two sources: a web search for current EU AI Act updates and a database query for historical compliance data.",model:"gpt-4o-2024-11-20",usage:{prompt_tokens:150,completion_tokens:150,total_tokens:300},reasoning:"The user wants comprehensive information about AI regulations. I'll use parallel tool calls to maximize efficiency."},s2:{role:"assistant",content:null,tool_calls:[{id:"tc-001",type:"function",function:{name:"web_search",arguments:'{"q":"EU AI Act latest updates 2026"}'}},{id:"tc-002",type:"function",function:{name:"database_query",arguments:`{"sql":"SELECT * FROM compliance_records WHERE region='EU' ORDER BY date DESC LIMIT 10"}`}}],model:"gpt-4o-2024-11-20",usage:{prompt_tokens:80,completion_tokens:40,total_tokens:120}},s3:{tool_call_id:"tc-001",tool_name:"web_search",input:{q:"EU AI Act latest updates 2026"},output:{results:[{title:"EU AI Act Implementation Timeline",url:"https://example.com/ai-act",snippet:"The EU AI Act enters full force in 2026..."},{title:"High-Risk AI Systems Classification",url:"https://example.com/classification",snippet:"New guidance on high-risk categorization..."},{title:"Compliance Deadlines Approaching",url:"https://example.com/deadlines",snippet:"Organizations must comply by August 2026..."}],total_results:3,search_time_ms:1850},status:"success"},s4:{tool_call_id:"tc-002",tool_name:"database_query",input:{sql:"SELECT * FROM compliance_records WHERE region='EU' ORDER BY date DESC LIMIT 10"},output:{rows:[{id:1,company:"TechCorp",status:"compliant",date:"2026-01-15"},{id:2,company:"AIStartup",status:"in_progress",date:"2026-01-10"},{id:3,company:"DataCo",status:"compliant",date:"2026-01-05"}],row_count:42,query_time_ms:1100},status:"success"},s5:{role:"assistant",content:`Based on my analysis of the web search results and database records:

**Key Findings:**
1. The EU AI Act is now in full effect as of 2026
2. High-risk AI systems require specific compliance measures
3. 42 organizations in our database have compliance records

**Recommendations:**
- Review classification of AI systems
- Ensure documentation is complete
- Schedule compliance audit before August deadline`,model:"gpt-4o-2024-11-20",usage:{prompt_tokens:450,completion_tokens:250,total_tokens:700},reasoning:"Synthesized information from both the web search (3 relevant articles) and database query (42 compliance records) to provide actionable insights."}};function Sq(e,t){const n=Nl.steps.find(a=>a.id===e);if(!n)return null;const r=wq[e];if(!r)return null;const i=t?_q(r):r;return{...n,data:i}}function _q(e){var n,r;const t=JSON.parse(JSON.stringify(e));return(n=t.input)!=null&&n.sql&&(t.input.sql="[REDACTED]"),(r=t.output)!=null&&r.rows&&(t.output.rows=t.output.rows.map(i=>({...i,company:"[REDACTED]"}))),t.tool_calls&&(t.tool_calls=t.tool_calls.map(i=>({...i,function:{...i.function,arguments:"[REDACTED]"}}))),t}async function kq(e,t,n,r=[],i=!1){return await new Promise(a=>setTimeout(a,150)),Sq(t,i)}async function Cq(e,t,n){await kq(e,t,"redacted",[],n)}function Eq(e,t){return()=>{}}function jq(){yq.clear(),bq.clear()}async function Tq(e,t){return null}async function Nq(e){return null}async function dz(e,t){return[]}async function fz(e,t,n,r,i){return null}async function Mq(){return[]}async function Pq(e,t){return null}async function Rq(e,t,n,r,i){return i?MT(i,t,n,r):null}function MT(e,t,n,r){var v;const i=JSON.parse(JSON.stringify(e)),a=6e4,s=Date.parse("2024-01-01T00:00:00.000Z"),o=Date.parse(e.endedAt??e.startedAt??""),u=(Number.isNaN(o)?s:o)+a,c=new Date(u);i.id=`${e.id}-replay-${u}`,i.parentTraceId=e.id,i.branchPointStepId=t,i.replay={strategy:n,modifiedStepId:t,modifications:r,createdAt:c.toISOString()};const f=p=>{if(!p)return p;const x=Date.parse(p);return Number.isNaN(x)?p:new Date(x+a).toISOString()};i.startedAt=f(i.startedAt)??i.startedAt,i.endedAt=f(i.endedAt);const h=new Set,m=((v=i.steps.find(p=>p.id===t))==null?void 0:v.index)??-1;return n==="live"?i.steps.forEach(p=>{p.index>m&&h.add(p.id)}):n==="hybrid"&&i.steps.forEach(p=>{p.index>m&&h.add(p.id)}),i.steps=i.steps.map(p=>{var g;const x={...p};if(x.startedAt=f(p.startedAt)??p.startedAt,x.endedAt=f(p.endedAt),p.id===t){const y=((g=p.preview)==null?void 0:g.outputPreview)??"";x.preview={...p.preview,outputPreview:`${y} (modified)`.trim()}}return h.has(p.id)&&(x.status="pending",x.endedAt=null,x.durationMs=void 0,x.metrics=void 0,x.preview={...p.preview,outputPreview:"[invalidated for replay]"}),x}),i}async function Aq(e){return Oq(e)}async function Iq(e){var t;return((t=Vr.get(e))==null?void 0:t.job)??null}async function mx(e){var t;return((t=Vr.get(e))==null?void 0:t.matrix)??null}async function Dq(e){{const t=Vr.get(e);if(!t)return null;const n={...t.job,status:"canceled",scenarios:t.job.scenarios.map(r=>({...r,status:"canceled",endedAt:r.endedAt??new Date().toISOString()}))};return Vr.set(e,{...t,job:n}),n}}function Oq(e){const t=`demo-job-${Date.now()}-${Math.random().toString(36).slice(2,6)}`,n=Nl,r=new Date().toISOString(),i=e.scenarios.map((l,u)=>({id:`demo-scn-${u+1}`,name:l.name,strategy:l.strategy,modifications:l.modifications,status:"running",startedAt:r,endedAt:null,replayTraceId:`${t}-replay-${u+1}`})),a={id:t,traceId:e.traceId,stepId:e.stepId,status:"running",createdAt:r,startedAt:r,endedAt:null,scenarioCount:i.length,completedCount:0,failedCount:0,canceledCount:0,scenarios:i},s=i.map(l=>{const u=MT(n,e.stepId,l.strategy,l.modifications);u.id=l.replayTraceId;const c=TT(n,u),f=n.metadata.totalCostUsd??0,h=u.metadata.totalCostUsd??f,m=n.metadata.errorCount??0,v=u.metadata.errorCount??m,p=n.metadata.retryCount??0,x=u.metadata.retryCount??p,g=u.steps.filter(y=>y.status==="pending").length;return{scenarioId:l.id,name:l.name,strategy:l.strategy,status:"completed",replayTraceId:l.replayTraceId,modifications:l.modifications,error:null,changedStepIds:c.changedSteps,addedStepIds:c.addedSteps,removedStepIds:c.removedSteps,metrics:{costDeltaUsd:h-f,wallTimeDeltaMs:(u.metadata.wallTimeMs??0)-(n.metadata.wallTimeMs??0),errorDelta:v-m,retryDelta:x-p,changedSteps:c.changedSteps.length,addedSteps:c.addedSteps.length,removedSteps:c.removedSteps.length,invalidatedStepCount:g}}}),o={jobId:t,traceId:e.traceId,stepId:e.stepId,rows:s,causalRanking:[]};return Vr.set(t,{job:a,matrix:o}),window.setTimeout(()=>{const l=Vr.get(t);if(!l)return;const u=new Date().toISOString(),c=l.job.scenarios.map(m=>({...m,status:"completed",endedAt:u})),f={...l.job,status:"completed",endedAt:u,completedCount:c.length,scenarios:c},h={...l.matrix,rows:l.matrix.rows.map(m=>({...m,status:"completed"}))};Vr.set(t,{job:f,matrix:h})},600),a}async function Lq(e){return null}async function gx(e){return null}async function qq(e){return null}async function Fq(e){return null}async function vx(e){return{session:null,conflict:!1,error:null}}async function Vq(e){return null}async function $q(e){return null}async function Bq(e,t){return null}async function zq(e){return null}async function Uq(e,t,n){return null}function Gq(e,t,n){return()=>{}}function Hq(){const[e,t]=S.useState(null),[n,r]=S.useState(null),[i,a]=S.useState(!0),[s,o]=S.useState(null),[l,u]=S.useState([]),[c,f]=S.useState(null),h=S.useCallback(async v=>{const p=await NT(),x=(p==null?void 0:p.trace)??null;t(x),r(x?(p==null?void 0:p.insights)??_A(x):null)},[t,r]),m=S.useCallback(async()=>{var v;a(!0),o(null);try{const p=await xq();u(p);const x=((v=p[p.length-1])==null?void 0:v.id)??null,g=c??x;if(!g){t(null),r(null);return}if(!c||c!==g){f(g);return}await h(g)}catch(p){o(p instanceof Error?p.message:"Failed to load trace")}finally{a(!1)}},[c,h]);return S.useEffect(()=>{m()},[m]),S.useEffect(()=>{c&&(a(!0),h(c).catch(v=>{o(v instanceof Error?v.message:"Failed to load trace")}).finally(()=>a(!1)))},[c,h]),S.useEffect(()=>Eq(),[c,f]),{trace:e,insights:n,loading:i,error:s,reload:m,traces:l,selectedTraceId:c,setSelectedTraceId:f}}function ze(e,t){const[n,r]=S.useState(()=>{if(typeof window>"u")return t;try{const i=window.localStorage.getItem(e);return i==null?t:JSON.parse(i)}catch{return t}});return S.useEffect(()=>{try{window.localStorage.setItem(e,JSON.stringify(n))}catch{}},[e,n]),[n,r]}function $v(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var ec,yx;function Wq(){if(yx)return ec;yx=1;function e(){this.__data__=[],this.size=0}return ec=e,ec}var tc,bx;function Xi(){if(bx)return tc;bx=1;function e(t,n){return t===n||t!==t&&n!==n}return tc=e,tc}var nc,xx;function Ml(){if(xx)return nc;xx=1;var e=Xi();function t(n,r){for(var i=n.length;i--;)if(e(n[i][0],r))return i;return-1}return nc=t,nc}var rc,wx;function Kq(){if(wx)return rc;wx=1;var e=Ml(),t=Array.prototype,n=t.splice;function r(i){var a=this.__data__,s=e(a,i);if(s<0)return!1;var o=a.length-1;return s==o?a.pop():n.call(a,s,1),--this.size,!0}return rc=r,rc}var ic,Sx;function Yq(){if(Sx)return ic;Sx=1;var e=Ml();function t(n){var r=this.__data__,i=e(r,n);return i<0?void 0:r[i][1]}return ic=t,ic}var ac,_x;function Qq(){if(_x)return ac;_x=1;var e=Ml();function t(n){return e(this.__data__,n)>-1}return ac=t,ac}var sc,kx;function Jq(){if(kx)return sc;kx=1;var e=Ml();function t(n,r){var i=this.__data__,a=e(i,n);return a<0?(++this.size,i.push([n,r])):i[a][1]=r,this}return sc=t,sc}var oc,Cx;function Pl(){if(Cx)return oc;Cx=1;var e=Wq(),t=Kq(),n=Yq(),r=Qq(),i=Jq();function a(s){var o=-1,l=s==null?0:s.length;for(this.clear();++o<l;){var u=s[o];this.set(u[0],u[1])}}return a.prototype.clear=e,a.prototype.delete=t,a.prototype.get=n,a.prototype.has=r,a.prototype.set=i,oc=a,oc}var lc,Ex;function Xq(){if(Ex)return lc;Ex=1;var e=Pl();function t(){this.__data__=new e,this.size=0}return lc=t,lc}var uc,jx;function Zq(){if(jx)return uc;jx=1;function e(t){var n=this.__data__,r=n.delete(t);return this.size=n.size,r}return uc=e,uc}var cc,Tx;function eF(){if(Tx)return cc;Tx=1;function e(t){return this.__data__.get(t)}return cc=e,cc}var dc,Nx;function tF(){if(Nx)return dc;Nx=1;function e(t){return this.__data__.has(t)}return dc=e,dc}var fc,Mx;function PT(){if(Mx)return fc;Mx=1;var e=typeof Ls=="object"&&Ls&&Ls.Object===Object&&Ls;return fc=e,fc}var hc,Px;function an(){if(Px)return hc;Px=1;var e=PT(),t=typeof self=="object"&&self&&self.Object===Object&&self,n=e||t||Function("return this")();return hc=n,hc}var pc,Rx;function Zi(){if(Rx)return pc;Rx=1;var e=an(),t=e.Symbol;return pc=t,pc}var mc,Ax;function nF(){if(Ax)return mc;Ax=1;var e=Zi(),t=Object.prototype,n=t.hasOwnProperty,r=t.toString,i=e?e.toStringTag:void 0;function a(s){var o=n.call(s,i),l=s[i];try{s[i]=void 0;var u=!0}catch{}var c=r.call(s);return u&&(o?s[i]=l:delete s[i]),c}return mc=a,mc}var gc,Ix;function rF(){if(Ix)return gc;Ix=1;var e=Object.prototype,t=e.toString;function n(r){return t.call(r)}return gc=n,gc}var vc,Dx;function Yr(){if(Dx)return vc;Dx=1;var e=Zi(),t=nF(),n=rF(),r="[object Null]",i="[object Undefined]",a=e?e.toStringTag:void 0;function s(o){return o==null?o===void 0?i:r:a&&a in Object(o)?t(o):n(o)}return vc=s,vc}var yc,Ox;function Wt(){if(Ox)return yc;Ox=1;function e(t){var n=typeof t;return t!=null&&(n=="object"||n=="function")}return yc=e,yc}var bc,Lx;function Ms(){if(Lx)return bc;Lx=1;var e=Yr(),t=Wt(),n="[object AsyncFunction]",r="[object Function]",i="[object GeneratorFunction]",a="[object Proxy]";function s(o){if(!t(o))return!1;var l=e(o);return l==r||l==i||l==n||l==a}return bc=s,bc}var xc,qx;function iF(){if(qx)return xc;qx=1;var e=an(),t=e["__core-js_shared__"];return xc=t,xc}var wc,Fx;function aF(){if(Fx)return wc;Fx=1;var e=iF(),t=function(){var r=/[^.]+$/.exec(e&&e.keys&&e.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}();function n(r){return!!t&&t in r}return wc=n,wc}var Sc,Vx;function RT(){if(Vx)return Sc;Vx=1;var e=Function.prototype,t=e.toString;function n(r){if(r!=null){try{return t.call(r)}catch{}try{return r+""}catch{}}return""}return Sc=n,Sc}var _c,$x;function sF(){if($x)return _c;$x=1;var e=Ms(),t=aF(),n=Wt(),r=RT(),i=/[\\^$.*+?()[\]{}|]/g,a=/^\[object .+?Constructor\]$/,s=Function.prototype,o=Object.prototype,l=s.toString,u=o.hasOwnProperty,c=RegExp("^"+l.call(u).replace(i,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function f(h){if(!n(h)||t(h))return!1;var m=e(h)?c:a;return m.test(r(h))}return _c=f,_c}var kc,Bx;function oF(){if(Bx)return kc;Bx=1;function e(t,n){return t==null?void 0:t[n]}return kc=e,kc}var Cc,zx;function Qr(){if(zx)return Cc;zx=1;var e=sF(),t=oF();function n(r,i){var a=t(r,i);return e(a)?a:void 0}return Cc=n,Cc}var Ec,Ux;function Bv(){if(Ux)return Ec;Ux=1;var e=Qr(),t=an(),n=e(t,"Map");return Ec=n,Ec}var jc,Gx;function Rl(){if(Gx)return jc;Gx=1;var e=Qr(),t=e(Object,"create");return jc=t,jc}var Tc,Hx;function lF(){if(Hx)return Tc;Hx=1;var e=Rl();function t(){this.__data__=e?e(null):{},this.size=0}return Tc=t,Tc}var Nc,Wx;function uF(){if(Wx)return Nc;Wx=1;function e(t){var n=this.has(t)&&delete this.__data__[t];return this.size-=n?1:0,n}return Nc=e,Nc}var Mc,Kx;function cF(){if(Kx)return Mc;Kx=1;var e=Rl(),t="__lodash_hash_undefined__",n=Object.prototype,r=n.hasOwnProperty;function i(a){var s=this.__data__;if(e){var o=s[a];return o===t?void 0:o}return r.call(s,a)?s[a]:void 0}return Mc=i,Mc}var Pc,Yx;function dF(){if(Yx)return Pc;Yx=1;var e=Rl(),t=Object.prototype,n=t.hasOwnProperty;function r(i){var a=this.__data__;return e?a[i]!==void 0:n.call(a,i)}return Pc=r,Pc}var Rc,Qx;function fF(){if(Qx)return Rc;Qx=1;var e=Rl(),t="__lodash_hash_undefined__";function n(r,i){var a=this.__data__;return this.size+=this.has(r)?0:1,a[r]=e&&i===void 0?t:i,this}return Rc=n,Rc}var Ac,Jx;function hF(){if(Jx)return Ac;Jx=1;var e=lF(),t=uF(),n=cF(),r=dF(),i=fF();function a(s){var o=-1,l=s==null?0:s.length;for(this.clear();++o<l;){var u=s[o];this.set(u[0],u[1])}}return a.prototype.clear=e,a.prototype.delete=t,a.prototype.get=n,a.prototype.has=r,a.prototype.set=i,Ac=a,Ac}var Ic,Xx;function pF(){if(Xx)return Ic;Xx=1;var e=hF(),t=Pl(),n=Bv();function r(){this.size=0,this.__data__={hash:new e,map:new(n||t),string:new e}}return Ic=r,Ic}var Dc,Zx;function mF(){if(Zx)return Dc;Zx=1;function e(t){var n=typeof t;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?t!=="__proto__":t===null}return Dc=e,Dc}var Oc,ew;function Al(){if(ew)return Oc;ew=1;var e=mF();function t(n,r){var i=n.__data__;return e(r)?i[typeof r=="string"?"string":"hash"]:i.map}return Oc=t,Oc}var Lc,tw;function gF(){if(tw)return Lc;tw=1;var e=Al();function t(n){var r=e(this,n).delete(n);return this.size-=r?1:0,r}return Lc=t,Lc}var qc,nw;function vF(){if(nw)return qc;nw=1;var e=Al();function t(n){return e(this,n).get(n)}return qc=t,qc}var Fc,rw;function yF(){if(rw)return Fc;rw=1;var e=Al();function t(n){return e(this,n).has(n)}return Fc=t,Fc}var Vc,iw;function bF(){if(iw)return Vc;iw=1;var e=Al();function t(n,r){var i=e(this,n),a=i.size;return i.set(n,r),this.size+=i.size==a?0:1,this}return Vc=t,Vc}var $c,aw;function zv(){if(aw)return $c;aw=1;var e=pF(),t=gF(),n=vF(),r=yF(),i=bF();function a(s){var o=-1,l=s==null?0:s.length;for(this.clear();++o<l;){var u=s[o];this.set(u[0],u[1])}}return a.prototype.clear=e,a.prototype.delete=t,a.prototype.get=n,a.prototype.has=r,a.prototype.set=i,$c=a,$c}var Bc,sw;function xF(){if(sw)return Bc;sw=1;var e=Pl(),t=Bv(),n=zv(),r=200;function i(a,s){var o=this.__data__;if(o instanceof e){var l=o.__data__;if(!t||l.length<r-1)return l.push([a,s]),this.size=++o.size,this;o=this.__data__=new n(l)}return o.set(a,s),this.size=o.size,this}return Bc=i,Bc}var zc,ow;function Il(){if(ow)return zc;ow=1;var e=Pl(),t=Xq(),n=Zq(),r=eF(),i=tF(),a=xF();function s(o){var l=this.__data__=new e(o);this.size=l.size}return s.prototype.clear=t,s.prototype.delete=n,s.prototype.get=r,s.prototype.has=i,s.prototype.set=a,zc=s,zc}var Uc,lw;function Uv(){if(lw)return Uc;lw=1;function e(t,n){for(var r=-1,i=t==null?0:t.length;++r<i&&n(t[r],r,t)!==!1;);return t}return Uc=e,Uc}var Gc,uw;function AT(){if(uw)return Gc;uw=1;var e=Qr(),t=function(){try{var n=e(Object,"defineProperty");return n({},"",{}),n}catch{}}();return Gc=t,Gc}var Hc,cw;function Dl(){if(cw)return Hc;cw=1;var e=AT();function t(n,r,i){r=="__proto__"&&e?e(n,r,{configurable:!0,enumerable:!0,value:i,writable:!0}):n[r]=i}return Hc=t,Hc}var Wc,dw;function Ol(){if(dw)return Wc;dw=1;var e=Dl(),t=Xi(),n=Object.prototype,r=n.hasOwnProperty;function i(a,s,o){var l=a[s];(!(r.call(a,s)&&t(l,o))||o===void 0&&!(s in a))&&e(a,s,o)}return Wc=i,Wc}var Kc,fw;function Ps(){if(fw)return Kc;fw=1;var e=Ol(),t=Dl();function n(r,i,a,s){var o=!a;a||(a={});for(var l=-1,u=i.length;++l<u;){var c=i[l],f=s?s(a[c],r[c],c,a,r):void 0;f===void 0&&(f=r[c]),o?t(a,c,f):e(a,c,f)}return a}return Kc=n,Kc}var Yc,hw;function wF(){if(hw)return Yc;hw=1;function e(t,n){for(var r=-1,i=Array(t);++r<t;)i[r]=n(r);return i}return Yc=e,Yc}var Qc,pw;function yn(){if(pw)return Qc;pw=1;function e(t){return t!=null&&typeof t=="object"}return Qc=e,Qc}var Jc,mw;function SF(){if(mw)return Jc;mw=1;var e=Yr(),t=yn(),n="[object Arguments]";function r(i){return t(i)&&e(i)==n}return Jc=r,Jc}var Xc,gw;function Rs(){if(gw)return Xc;gw=1;var e=SF(),t=yn(),n=Object.prototype,r=n.hasOwnProperty,i=n.propertyIsEnumerable,a=e(function(){return arguments}())?e:function(s){return t(s)&&r.call(s,"callee")&&!i.call(s,"callee")};return Xc=a,Xc}var Zc,vw;function Ke(){if(vw)return Zc;vw=1;var e=Array.isArray;return Zc=e,Zc}var Aa={exports:{}},ed,yw;function _F(){if(yw)return ed;yw=1;function e(){return!1}return ed=e,ed}Aa.exports;var bw;function ea(){return bw||(bw=1,function(e,t){var n=an(),r=_F(),i=t&&!t.nodeType&&t,a=i&&!0&&e&&!e.nodeType&&e,s=a&&a.exports===i,o=s?n.Buffer:void 0,l=o?o.isBuffer:void 0,u=l||r;e.exports=u}(Aa,Aa.exports)),Aa.exports}var td,xw;function Ll(){if(xw)return td;xw=1;var e=9007199254740991,t=/^(?:0|[1-9]\d*)$/;function n(r,i){var a=typeof r;return i=i??e,!!i&&(a=="number"||a!="symbol"&&t.test(r))&&r>-1&&r%1==0&&r<i}return td=n,td}var nd,ww;function Gv(){if(ww)return nd;ww=1;var e=9007199254740991;function t(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=e}return nd=t,nd}var rd,Sw;function kF(){if(Sw)return rd;Sw=1;var e=Yr(),t=Gv(),n=yn(),r="[object Arguments]",i="[object Array]",a="[object Boolean]",s="[object Date]",o="[object Error]",l="[object Function]",u="[object Map]",c="[object Number]",f="[object Object]",h="[object RegExp]",m="[object Set]",v="[object String]",p="[object WeakMap]",x="[object ArrayBuffer]",g="[object DataView]",y="[object Float32Array]",b="[object Float64Array]",_="[object Int8Array]",C="[object Int16Array]",E="[object Int32Array]",j="[object Uint8Array]",T="[object Uint8ClampedArray]",P="[object Uint16Array]",O="[object Uint32Array]",A={};A[y]=A[b]=A[_]=A[C]=A[E]=A[j]=A[T]=A[P]=A[O]=!0,A[r]=A[i]=A[x]=A[a]=A[g]=A[s]=A[o]=A[l]=A[u]=A[c]=A[f]=A[h]=A[m]=A[v]=A[p]=!1;function W(J){return n(J)&&t(J.length)&&!!A[e(J)]}return rd=W,rd}var id,_w;function ql(){if(_w)return id;_w=1;function e(t){return function(n){return t(n)}}return id=e,id}var Ia={exports:{}};Ia.exports;var kw;function Hv(){return kw||(kw=1,function(e,t){var n=PT(),r=t&&!t.nodeType&&t,i=r&&!0&&e&&!e.nodeType&&e,a=i&&i.exports===r,s=a&&n.process,o=function(){try{var l=i&&i.require&&i.require("util").types;return l||s&&s.binding&&s.binding("util")}catch{}}();e.exports=o}(Ia,Ia.exports)),Ia.exports}var ad,Cw;function As(){if(Cw)return ad;Cw=1;var e=kF(),t=ql(),n=Hv(),r=n&&n.isTypedArray,i=r?t(r):e;return ad=i,ad}var sd,Ew;function IT(){if(Ew)return sd;Ew=1;var e=wF(),t=Rs(),n=Ke(),r=ea(),i=Ll(),a=As(),s=Object.prototype,o=s.hasOwnProperty;function l(u,c){var f=n(u),h=!f&&t(u),m=!f&&!h&&r(u),v=!f&&!h&&!m&&a(u),p=f||h||m||v,x=p?e(u.length,String):[],g=x.length;for(var y in u)(c||o.call(u,y))&&!(p&&(y=="length"||m&&(y=="offset"||y=="parent")||v&&(y=="buffer"||y=="byteLength"||y=="byteOffset")||i(y,g)))&&x.push(y);return x}return sd=l,sd}var od,jw;function Fl(){if(jw)return od;jw=1;var e=Object.prototype;function t(n){var r=n&&n.constructor,i=typeof r=="function"&&r.prototype||e;return n===i}return od=t,od}var ld,Tw;function DT(){if(Tw)return ld;Tw=1;function e(t,n){return function(r){return t(n(r))}}return ld=e,ld}var ud,Nw;function CF(){if(Nw)return ud;Nw=1;var e=DT(),t=e(Object.keys,Object);return ud=t,ud}var cd,Mw;function Wv(){if(Mw)return cd;Mw=1;var e=Fl(),t=CF(),n=Object.prototype,r=n.hasOwnProperty;function i(a){if(!e(a))return t(a);var s=[];for(var o in Object(a))r.call(a,o)&&o!="constructor"&&s.push(o);return s}return cd=i,cd}var dd,Pw;function Vn(){if(Pw)return dd;Pw=1;var e=Ms(),t=Gv();function n(r){return r!=null&&t(r.length)&&!e(r)}return dd=n,dd}var fd,Rw;function Sr(){if(Rw)return fd;Rw=1;var e=IT(),t=Wv(),n=Vn();function r(i){return n(i)?e(i):t(i)}return fd=r,fd}var hd,Aw;function EF(){if(Aw)return hd;Aw=1;var e=Ps(),t=Sr();function n(r,i){return r&&e(i,t(i),r)}return hd=n,hd}var pd,Iw;function jF(){if(Iw)return pd;Iw=1;function e(t){var n=[];if(t!=null)for(var r in Object(t))n.push(r);return n}return pd=e,pd}var md,Dw;function TF(){if(Dw)return md;Dw=1;var e=Wt(),t=Fl(),n=jF(),r=Object.prototype,i=r.hasOwnProperty;function a(s){if(!e(s))return n(s);var o=t(s),l=[];for(var u in s)u=="constructor"&&(o||!i.call(s,u))||l.push(u);return l}return md=a,md}var gd,Ow;function Jr(){if(Ow)return gd;Ow=1;var e=IT(),t=TF(),n=Vn();function r(i){return n(i)?e(i,!0):t(i)}return gd=r,gd}var vd,Lw;function NF(){if(Lw)return vd;Lw=1;var e=Ps(),t=Jr();function n(r,i){return r&&e(i,t(i),r)}return vd=n,vd}var Da={exports:{}};Da.exports;var qw;function OT(){return qw||(qw=1,function(e,t){var n=an(),r=t&&!t.nodeType&&t,i=r&&!0&&e&&!e.nodeType&&e,a=i&&i.exports===r,s=a?n.Buffer:void 0,o=s?s.allocUnsafe:void 0;function l(u,c){if(c)return u.slice();var f=u.length,h=o?o(f):new u.constructor(f);return u.copy(h),h}e.exports=l}(Da,Da.exports)),Da.exports}var yd,Fw;function LT(){if(Fw)return yd;Fw=1;function e(t,n){var r=-1,i=t.length;for(n||(n=Array(i));++r<i;)n[r]=t[r];return n}return yd=e,yd}var bd,Vw;function qT(){if(Vw)return bd;Vw=1;function e(t,n){for(var r=-1,i=t==null?0:t.length,a=0,s=[];++r<i;){var o=t[r];n(o,r,t)&&(s[a++]=o)}return s}return bd=e,bd}var xd,$w;function FT(){if($w)return xd;$w=1;function e(){return[]}return xd=e,xd}var wd,Bw;function Kv(){if(Bw)return wd;Bw=1;var e=qT(),t=FT(),n=Object.prototype,r=n.propertyIsEnumerable,i=Object.getOwnPropertySymbols,a=i?function(s){return s==null?[]:(s=Object(s),e(i(s),function(o){return r.call(s,o)}))}:t;return wd=a,wd}var Sd,zw;function MF(){if(zw)return Sd;zw=1;var e=Ps(),t=Kv();function n(r,i){return e(r,t(r),i)}return Sd=n,Sd}var _d,Uw;function Yv(){if(Uw)return _d;Uw=1;function e(t,n){for(var r=-1,i=n.length,a=t.length;++r<i;)t[a+r]=n[r];return t}return _d=e,_d}var kd,Gw;function Vl(){if(Gw)return kd;Gw=1;var e=DT(),t=e(Object.getPrototypeOf,Object);return kd=t,kd}var Cd,Hw;function VT(){if(Hw)return Cd;Hw=1;var e=Yv(),t=Vl(),n=Kv(),r=FT(),i=Object.getOwnPropertySymbols,a=i?function(s){for(var o=[];s;)e(o,n(s)),s=t(s);return o}:r;return Cd=a,Cd}var Ed,Ww;function PF(){if(Ww)return Ed;Ww=1;var e=Ps(),t=VT();function n(r,i){return e(r,t(r),i)}return Ed=n,Ed}var jd,Kw;function $T(){if(Kw)return jd;Kw=1;var e=Yv(),t=Ke();function n(r,i,a){var s=i(r);return t(r)?s:e(s,a(r))}return jd=n,jd}var Td,Yw;function BT(){if(Yw)return Td;Yw=1;var e=$T(),t=Kv(),n=Sr();function r(i){return e(i,n,t)}return Td=r,Td}var Nd,Qw;function RF(){if(Qw)return Nd;Qw=1;var e=$T(),t=VT(),n=Jr();function r(i){return e(i,n,t)}return Nd=r,Nd}var Md,Jw;function AF(){if(Jw)return Md;Jw=1;var e=Qr(),t=an(),n=e(t,"DataView");return Md=n,Md}var Pd,Xw;function IF(){if(Xw)return Pd;Xw=1;var e=Qr(),t=an(),n=e(t,"Promise");return Pd=n,Pd}var Rd,Zw;function zT(){if(Zw)return Rd;Zw=1;var e=Qr(),t=an(),n=e(t,"Set");return Rd=n,Rd}var Ad,e1;function DF(){if(e1)return Ad;e1=1;var e=Qr(),t=an(),n=e(t,"WeakMap");return Ad=n,Ad}var Id,t1;function ta(){if(t1)return Id;t1=1;var e=AF(),t=Bv(),n=IF(),r=zT(),i=DF(),a=Yr(),s=RT(),o="[object Map]",l="[object Object]",u="[object Promise]",c="[object Set]",f="[object WeakMap]",h="[object DataView]",m=s(e),v=s(t),p=s(n),x=s(r),g=s(i),y=a;return(e&&y(new e(new ArrayBuffer(1)))!=h||t&&y(new t)!=o||n&&y(n.resolve())!=u||r&&y(new r)!=c||i&&y(new i)!=f)&&(y=function(b){var _=a(b),C=_==l?b.constructor:void 0,E=C?s(C):"";if(E)switch(E){case m:return h;case v:return o;case p:return u;case x:return c;case g:return f}return _}),Id=y,Id}var Dd,n1;function OF(){if(n1)return Dd;n1=1;var e=Object.prototype,t=e.hasOwnProperty;function n(r){var i=r.length,a=new r.constructor(i);return i&&typeof r[0]=="string"&&t.call(r,"index")&&(a.index=r.index,a.input=r.input),a}return Dd=n,Dd}var Od,r1;function UT(){if(r1)return Od;r1=1;var e=an(),t=e.Uint8Array;return Od=t,Od}var Ld,i1;function Qv(){if(i1)return Ld;i1=1;var e=UT();function t(n){var r=new n.constructor(n.byteLength);return new e(r).set(new e(n)),r}return Ld=t,Ld}var qd,a1;function LF(){if(a1)return qd;a1=1;var e=Qv();function t(n,r){var i=r?e(n.buffer):n.buffer;return new n.constructor(i,n.byteOffset,n.byteLength)}return qd=t,qd}var Fd,s1;function qF(){if(s1)return Fd;s1=1;var e=/\w*$/;function t(n){var r=new n.constructor(n.source,e.exec(n));return r.lastIndex=n.lastIndex,r}return Fd=t,Fd}var Vd,o1;function FF(){if(o1)return Vd;o1=1;var e=Zi(),t=e?e.prototype:void 0,n=t?t.valueOf:void 0;function r(i){return n?Object(n.call(i)):{}}return Vd=r,Vd}var $d,l1;function GT(){if(l1)return $d;l1=1;var e=Qv();function t(n,r){var i=r?e(n.buffer):n.buffer;return new n.constructor(i,n.byteOffset,n.length)}return $d=t,$d}var Bd,u1;function VF(){if(u1)return Bd;u1=1;var e=Qv(),t=LF(),n=qF(),r=FF(),i=GT(),a="[object Boolean]",s="[object Date]",o="[object Map]",l="[object Number]",u="[object RegExp]",c="[object Set]",f="[object String]",h="[object Symbol]",m="[object ArrayBuffer]",v="[object DataView]",p="[object Float32Array]",x="[object Float64Array]",g="[object Int8Array]",y="[object Int16Array]",b="[object Int32Array]",_="[object Uint8Array]",C="[object Uint8ClampedArray]",E="[object Uint16Array]",j="[object Uint32Array]";function T(P,O,A){var W=P.constructor;switch(O){case m:return e(P);case a:case s:return new W(+P);case v:return t(P,A);case p:case x:case g:case y:case b:case _:case C:case E:case j:return i(P,A);case o:return new W;case l:case f:return new W(P);case u:return n(P);case c:return new W;case h:return r(P)}}return Bd=T,Bd}var zd,c1;function HT(){if(c1)return zd;c1=1;var e=Wt(),t=Object.create,n=function(){function r(){}return function(i){if(!e(i))return{};if(t)return t(i);r.prototype=i;var a=new r;return r.prototype=void 0,a}}();return zd=n,zd}var Ud,d1;function WT(){if(d1)return Ud;d1=1;var e=HT(),t=Vl(),n=Fl();function r(i){return typeof i.constructor=="function"&&!n(i)?e(t(i)):{}}return Ud=r,Ud}var Gd,f1;function $F(){if(f1)return Gd;f1=1;var e=ta(),t=yn(),n="[object Map]";function r(i){return t(i)&&e(i)==n}return Gd=r,Gd}var Hd,h1;function BF(){if(h1)return Hd;h1=1;var e=$F(),t=ql(),n=Hv(),r=n&&n.isMap,i=r?t(r):e;return Hd=i,Hd}var Wd,p1;function zF(){if(p1)return Wd;p1=1;var e=ta(),t=yn(),n="[object Set]";function r(i){return t(i)&&e(i)==n}return Wd=r,Wd}var Kd,m1;function UF(){if(m1)return Kd;m1=1;var e=zF(),t=ql(),n=Hv(),r=n&&n.isSet,i=r?t(r):e;return Kd=i,Kd}var Yd,g1;function KT(){if(g1)return Yd;g1=1;var e=Il(),t=Uv(),n=Ol(),r=EF(),i=NF(),a=OT(),s=LT(),o=MF(),l=PF(),u=BT(),c=RF(),f=ta(),h=OF(),m=VF(),v=WT(),p=Ke(),x=ea(),g=BF(),y=Wt(),b=UF(),_=Sr(),C=Jr(),E=1,j=2,T=4,P="[object Arguments]",O="[object Array]",A="[object Boolean]",W="[object Date]",J="[object Error]",me="[object Function]",B="[object GeneratorFunction]",le="[object Map]",ne="[object Number]",D="[object Object]",I="[object RegExp]",F="[object Set]",V="[object String]",te="[object Symbol]",M="[object WeakMap]",K="[object ArrayBuffer]",ue="[object DataView]",ye="[object Float32Array]",Je="[object Float64Array]",at="[object Int8Array]",ht="[object Int16Array]",Ot="[object Int32Array]",bn="[object Uint8Array]",Bn="[object Uint8ClampedArray]",$="[object Uint16Array]",ie="[object Uint32Array]",Z={};Z[P]=Z[O]=Z[K]=Z[ue]=Z[A]=Z[W]=Z[ye]=Z[Je]=Z[at]=Z[ht]=Z[Ot]=Z[le]=Z[ne]=Z[D]=Z[I]=Z[F]=Z[V]=Z[te]=Z[bn]=Z[Bn]=Z[$]=Z[ie]=!0,Z[J]=Z[me]=Z[M]=!1;function Ve(ae,Ae,Yt,_r,Ct,He){var we,Lt=Ae&E,on=Ae&j,ra=Ae&T;if(Yt&&(we=Ct?Yt(ae,_r,Ct,He):Yt(ae)),we!==void 0)return we;if(!y(ae))return ae;var zn=p(ae);if(zn){if(we=h(ae),!Lt)return s(ae,we)}else{var ge=f(ae),ei=ge==me||ge==B;if(x(ae))return a(ae,Lt);if(ge==D||ge==P||ei&&!Ct){if(we=on||ei?{}:v(ae),!Lt)return on?l(ae,i(we,ae)):o(ae,r(we,ae))}else{if(!Z[ge])return Ct?ae:{};we=m(ae,ge,Lt)}}He||(He=new e);var ln=He.get(ae);if(ln)return ln;He.set(ae,we),b(ae)?ae.forEach(function(yt){we.add(Ve(yt,Ae,Yt,yt,ae,He))}):g(ae)&&ae.forEach(function(yt,N){we.set(N,Ve(yt,Ae,Yt,N,ae,He))});var ti=ra?on?c:u:on?C:_,_e=zn?void 0:ti(ae);return t(_e||ae,function(yt,N){_e&&(N=yt,yt=ae[N]),n(we,N,Ve(yt,Ae,Yt,N,ae,He))}),we}return Yd=Ve,Yd}var Qd,v1;function GF(){if(v1)return Qd;v1=1;var e=KT(),t=4;function n(r){return e(r,t)}return Qd=n,Qd}var Jd,y1;function Jv(){if(y1)return Jd;y1=1;function e(t){return function(){return t}}return Jd=e,Jd}var Xd,b1;function HF(){if(b1)return Xd;b1=1;function e(t){return function(n,r,i){for(var a=-1,s=Object(n),o=i(n),l=o.length;l--;){var u=o[t?l:++a];if(r(s[u],u,s)===!1)break}return n}}return Xd=e,Xd}var Zd,x1;function Xv(){if(x1)return Zd;x1=1;var e=HF(),t=e();return Zd=t,Zd}var ef,w1;function Zv(){if(w1)return ef;w1=1;var e=Xv(),t=Sr();function n(r,i){return r&&e(r,i,t)}return ef=n,ef}var tf,S1;function WF(){if(S1)return tf;S1=1;var e=Vn();function t(n,r){return function(i,a){if(i==null)return i;if(!e(i))return n(i,a);for(var s=i.length,o=r?s:-1,l=Object(i);(r?o--:++o<s)&&a(l[o],o,l)!==!1;);return i}}return tf=t,tf}var nf,_1;function $l(){if(_1)return nf;_1=1;var e=Zv(),t=WF(),n=t(e);return nf=n,nf}var rf,k1;function Xr(){if(k1)return rf;k1=1;function e(t){return t}return rf=e,rf}var af,C1;function YT(){if(C1)return af;C1=1;var e=Xr();function t(n){return typeof n=="function"?n:e}return af=t,af}var sf,E1;function QT(){if(E1)return sf;E1=1;var e=Uv(),t=$l(),n=YT(),r=Ke();function i(a,s){var o=r(a)?e:t;return o(a,n(s))}return sf=i,sf}var of,j1;function JT(){return j1||(j1=1,of=QT()),of}var lf,T1;function KF(){if(T1)return lf;T1=1;var e=$l();function t(n,r){var i=[];return e(n,function(a,s,o){r(a,s,o)&&i.push(a)}),i}return lf=t,lf}var uf,N1;function YF(){if(N1)return uf;N1=1;var e="__lodash_hash_undefined__";function t(n){return this.__data__.set(n,e),this}return uf=t,uf}var cf,M1;function QF(){if(M1)return cf;M1=1;function e(t){return this.__data__.has(t)}return cf=e,cf}var df,P1;function XT(){if(P1)return df;P1=1;var e=zv(),t=YF(),n=QF();function r(i){var a=-1,s=i==null?0:i.length;for(this.__data__=new e;++a<s;)this.add(i[a])}return r.prototype.add=r.prototype.push=t,r.prototype.has=n,df=r,df}var ff,R1;function JF(){if(R1)return ff;R1=1;function e(t,n){for(var r=-1,i=t==null?0:t.length;++r<i;)if(n(t[r],r,t))return!0;return!1}return ff=e,ff}var hf,A1;function ZT(){if(A1)return hf;A1=1;function e(t,n){return t.has(n)}return hf=e,hf}var pf,I1;function eN(){if(I1)return pf;I1=1;var e=XT(),t=JF(),n=ZT(),r=1,i=2;function a(s,o,l,u,c,f){var h=l&r,m=s.length,v=o.length;if(m!=v&&!(h&&v>m))return!1;var p=f.get(s),x=f.get(o);if(p&&x)return p==o&&x==s;var g=-1,y=!0,b=l&i?new e:void 0;for(f.set(s,o),f.set(o,s);++g<m;){var _=s[g],C=o[g];if(u)var E=h?u(C,_,g,o,s,f):u(_,C,g,s,o,f);if(E!==void 0){if(E)continue;y=!1;break}if(b){if(!t(o,function(j,T){if(!n(b,T)&&(_===j||c(_,j,l,u,f)))return b.push(T)})){y=!1;break}}else if(!(_===C||c(_,C,l,u,f))){y=!1;break}}return f.delete(s),f.delete(o),y}return pf=a,pf}var mf,D1;function XF(){if(D1)return mf;D1=1;function e(t){var n=-1,r=Array(t.size);return t.forEach(function(i,a){r[++n]=[a,i]}),r}return mf=e,mf}var gf,O1;function ey(){if(O1)return gf;O1=1;function e(t){var n=-1,r=Array(t.size);return t.forEach(function(i){r[++n]=i}),r}return gf=e,gf}var vf,L1;function ZF(){if(L1)return vf;L1=1;var e=Zi(),t=UT(),n=Xi(),r=eN(),i=XF(),a=ey(),s=1,o=2,l="[object Boolean]",u="[object Date]",c="[object Error]",f="[object Map]",h="[object Number]",m="[object RegExp]",v="[object Set]",p="[object String]",x="[object Symbol]",g="[object ArrayBuffer]",y="[object DataView]",b=e?e.prototype:void 0,_=b?b.valueOf:void 0;function C(E,j,T,P,O,A,W){switch(T){case y:if(E.byteLength!=j.byteLength||E.byteOffset!=j.byteOffset)return!1;E=E.buffer,j=j.buffer;case g:return!(E.byteLength!=j.byteLength||!A(new t(E),new t(j)));case l:case u:case h:return n(+E,+j);case c:return E.name==j.name&&E.message==j.message;case m:case p:return E==j+"";case f:var J=i;case v:var me=P&s;if(J||(J=a),E.size!=j.size&&!me)return!1;var B=W.get(E);if(B)return B==j;P|=o,W.set(E,j);var le=r(J(E),J(j),P,O,A,W);return W.delete(E),le;case x:if(_)return _.call(E)==_.call(j)}return!1}return vf=C,vf}var yf,q1;function e3(){if(q1)return yf;q1=1;var e=BT(),t=1,n=Object.prototype,r=n.hasOwnProperty;function i(a,s,o,l,u,c){var f=o&t,h=e(a),m=h.length,v=e(s),p=v.length;if(m!=p&&!f)return!1;for(var x=m;x--;){var g=h[x];if(!(f?g in s:r.call(s,g)))return!1}var y=c.get(a),b=c.get(s);if(y&&b)return y==s&&b==a;var _=!0;c.set(a,s),c.set(s,a);for(var C=f;++x<m;){g=h[x];var E=a[g],j=s[g];if(l)var T=f?l(j,E,g,s,a,c):l(E,j,g,a,s,c);if(!(T===void 0?E===j||u(E,j,o,l,c):T)){_=!1;break}C||(C=g=="constructor")}if(_&&!C){var P=a.constructor,O=s.constructor;P!=O&&"constructor"in a&&"constructor"in s&&!(typeof P=="function"&&P instanceof P&&typeof O=="function"&&O instanceof O)&&(_=!1)}return c.delete(a),c.delete(s),_}return yf=i,yf}var bf,F1;function t3(){if(F1)return bf;F1=1;var e=Il(),t=eN(),n=ZF(),r=e3(),i=ta(),a=Ke(),s=ea(),o=As(),l=1,u="[object Arguments]",c="[object Array]",f="[object Object]",h=Object.prototype,m=h.hasOwnProperty;function v(p,x,g,y,b,_){var C=a(p),E=a(x),j=C?c:i(p),T=E?c:i(x);j=j==u?f:j,T=T==u?f:T;var P=j==f,O=T==f,A=j==T;if(A&&s(p)){if(!s(x))return!1;C=!0,P=!1}if(A&&!P)return _||(_=new e),C||o(p)?t(p,x,g,y,b,_):n(p,x,j,g,y,b,_);if(!(g&l)){var W=P&&m.call(p,"__wrapped__"),J=O&&m.call(x,"__wrapped__");if(W||J){var me=W?p.value():p,B=J?x.value():x;return _||(_=new e),b(me,B,g,y,_)}}return A?(_||(_=new e),r(p,x,g,y,b,_)):!1}return bf=v,bf}var xf,V1;function tN(){if(V1)return xf;V1=1;var e=t3(),t=yn();function n(r,i,a,s,o){return r===i?!0:r==null||i==null||!t(r)&&!t(i)?r!==r&&i!==i:e(r,i,a,s,n,o)}return xf=n,xf}var wf,$1;function n3(){if($1)return wf;$1=1;var e=Il(),t=tN(),n=1,r=2;function i(a,s,o,l){var u=o.length,c=u,f=!l;if(a==null)return!c;for(a=Object(a);u--;){var h=o[u];if(f&&h[2]?h[1]!==a[h[0]]:!(h[0]in a))return!1}for(;++u<c;){h=o[u];var m=h[0],v=a[m],p=h[1];if(f&&h[2]){if(v===void 0&&!(m in a))return!1}else{var x=new e;if(l)var g=l(v,p,m,a,s,x);if(!(g===void 0?t(p,v,n|r,l,x):g))return!1}}return!0}return wf=i,wf}var Sf,B1;function nN(){if(B1)return Sf;B1=1;var e=Wt();function t(n){return n===n&&!e(n)}return Sf=t,Sf}var _f,z1;function r3(){if(z1)return _f;z1=1;var e=nN(),t=Sr();function n(r){for(var i=t(r),a=i.length;a--;){var s=i[a],o=r[s];i[a]=[s,o,e(o)]}return i}return _f=n,_f}var kf,U1;function rN(){if(U1)return kf;U1=1;function e(t,n){return function(r){return r==null?!1:r[t]===n&&(n!==void 0||t in Object(r))}}return kf=e,kf}var Cf,G1;function i3(){if(G1)return Cf;G1=1;var e=n3(),t=r3(),n=rN();function r(i){var a=t(i);return a.length==1&&a[0][2]?n(a[0][0],a[0][1]):function(s){return s===i||e(s,i,a)}}return Cf=r,Cf}var Ef,H1;function na(){if(H1)return Ef;H1=1;var e=Yr(),t=yn(),n="[object Symbol]";function r(i){return typeof i=="symbol"||t(i)&&e(i)==n}return Ef=r,Ef}var jf,W1;function ty(){if(W1)return jf;W1=1;var e=Ke(),t=na(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function i(a,s){if(e(a))return!1;var o=typeof a;return o=="number"||o=="symbol"||o=="boolean"||a==null||t(a)?!0:r.test(a)||!n.test(a)||s!=null&&a in Object(s)}return jf=i,jf}var Tf,K1;function a3(){if(K1)return Tf;K1=1;var e=zv(),t="Expected a function";function n(r,i){if(typeof r!="function"||i!=null&&typeof i!="function")throw new TypeError(t);var a=function(){var s=arguments,o=i?i.apply(this,s):s[0],l=a.cache;if(l.has(o))return l.get(o);var u=r.apply(this,s);return a.cache=l.set(o,u)||l,u};return a.cache=new(n.Cache||e),a}return n.Cache=e,Tf=n,Tf}var Nf,Y1;function s3(){if(Y1)return Nf;Y1=1;var e=a3(),t=500;function n(r){var i=e(r,function(s){return a.size===t&&a.clear(),s}),a=i.cache;return i}return Nf=n,Nf}var Mf,Q1;function o3(){if(Q1)return Mf;Q1=1;var e=s3(),t=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,n=/\\(\\)?/g,r=e(function(i){var a=[];return i.charCodeAt(0)===46&&a.push(""),i.replace(t,function(s,o,l,u){a.push(l?u.replace(n,"$1"):o||s)}),a});return Mf=r,Mf}var Pf,J1;function Bl(){if(J1)return Pf;J1=1;function e(t,n){for(var r=-1,i=t==null?0:t.length,a=Array(i);++r<i;)a[r]=n(t[r],r,t);return a}return Pf=e,Pf}var Rf,X1;function l3(){if(X1)return Rf;X1=1;var e=Zi(),t=Bl(),n=Ke(),r=na(),i=e?e.prototype:void 0,a=i?i.toString:void 0;function s(o){if(typeof o=="string")return o;if(n(o))return t(o,s)+"";if(r(o))return a?a.call(o):"";var l=o+"";return l=="0"&&1/o==-1/0?"-0":l}return Rf=s,Rf}var Af,Z1;function iN(){if(Z1)return Af;Z1=1;var e=l3();function t(n){return n==null?"":e(n)}return Af=t,Af}var If,eS;function zl(){if(eS)return If;eS=1;var e=Ke(),t=ty(),n=o3(),r=iN();function i(a,s){return e(a)?a:t(a,s)?[a]:n(r(a))}return If=i,If}var Df,tS;function Is(){if(tS)return Df;tS=1;var e=na();function t(n){if(typeof n=="string"||e(n))return n;var r=n+"";return r=="0"&&1/n==-1/0?"-0":r}return Df=t,Df}var Of,nS;function Ul(){if(nS)return Of;nS=1;var e=zl(),t=Is();function n(r,i){i=e(i,r);for(var a=0,s=i.length;r!=null&&a<s;)r=r[t(i[a++])];return a&&a==s?r:void 0}return Of=n,Of}var Lf,rS;function u3(){if(rS)return Lf;rS=1;var e=Ul();function t(n,r,i){var a=n==null?void 0:e(n,r);return a===void 0?i:a}return Lf=t,Lf}var qf,iS;function c3(){if(iS)return qf;iS=1;function e(t,n){return t!=null&&n in Object(t)}return qf=e,qf}var Ff,aS;function aN(){if(aS)return Ff;aS=1;var e=zl(),t=Rs(),n=Ke(),r=Ll(),i=Gv(),a=Is();function s(o,l,u){l=e(l,o);for(var c=-1,f=l.length,h=!1;++c<f;){var m=a(l[c]);if(!(h=o!=null&&u(o,m)))break;o=o[m]}return h||++c!=f?h:(f=o==null?0:o.length,!!f&&i(f)&&r(m,f)&&(n(o)||t(o)))}return Ff=s,Ff}var Vf,sS;function sN(){if(sS)return Vf;sS=1;var e=c3(),t=aN();function n(r,i){return r!=null&&t(r,i,e)}return Vf=n,Vf}var $f,oS;function d3(){if(oS)return $f;oS=1;var e=tN(),t=u3(),n=sN(),r=ty(),i=nN(),a=rN(),s=Is(),o=1,l=2;function u(c,f){return r(c)&&i(f)?a(s(c),f):function(h){var m=t(h,c);return m===void 0&&m===f?n(h,c):e(f,m,o|l)}}return $f=u,$f}var Bf,lS;function oN(){if(lS)return Bf;lS=1;function e(t){return function(n){return n==null?void 0:n[t]}}return Bf=e,Bf}var zf,uS;function f3(){if(uS)return zf;uS=1;var e=Ul();function t(n){return function(r){return e(r,n)}}return zf=t,zf}var Uf,cS;function h3(){if(cS)return Uf;cS=1;var e=oN(),t=f3(),n=ty(),r=Is();function i(a){return n(a)?e(r(a)):t(a)}return Uf=i,Uf}var Gf,dS;function $n(){if(dS)return Gf;dS=1;var e=i3(),t=d3(),n=Xr(),r=Ke(),i=h3();function a(s){return typeof s=="function"?s:s==null?n:typeof s=="object"?r(s)?t(s[0],s[1]):e(s):i(s)}return Gf=a,Gf}var Hf,fS;function lN(){if(fS)return Hf;fS=1;var e=qT(),t=KF(),n=$n(),r=Ke();function i(a,s){var o=r(a)?e:t;return o(a,n(s,3))}return Hf=i,Hf}var Wf,hS;function p3(){if(hS)return Wf;hS=1;var e=Object.prototype,t=e.hasOwnProperty;function n(r,i){return r!=null&&t.call(r,i)}return Wf=n,Wf}var Kf,pS;function uN(){if(pS)return Kf;pS=1;var e=p3(),t=aN();function n(r,i){return r!=null&&t(r,i,e)}return Kf=n,Kf}var Yf,mS;function m3(){if(mS)return Yf;mS=1;var e=Wv(),t=ta(),n=Rs(),r=Ke(),i=Vn(),a=ea(),s=Fl(),o=As(),l="[object Map]",u="[object Set]",c=Object.prototype,f=c.hasOwnProperty;function h(m){if(m==null)return!0;if(i(m)&&(r(m)||typeof m=="string"||typeof m.splice=="function"||a(m)||o(m)||n(m)))return!m.length;var v=t(m);if(v==l||v==u)return!m.size;if(s(m))return!e(m).length;for(var p in m)if(f.call(m,p))return!1;return!0}return Yf=h,Yf}var Qf,gS;function cN(){if(gS)return Qf;gS=1;function e(t){return t===void 0}return Qf=e,Qf}var Jf,vS;function dN(){if(vS)return Jf;vS=1;var e=$l(),t=Vn();function n(r,i){var a=-1,s=t(r)?Array(r.length):[];return e(r,function(o,l,u){s[++a]=i(o,l,u)}),s}return Jf=n,Jf}var Xf,yS;function fN(){if(yS)return Xf;yS=1;var e=Bl(),t=$n(),n=dN(),r=Ke();function i(a,s){var o=r(a)?e:n;return o(a,t(s,3))}return Xf=i,Xf}var Zf,bS;function g3(){if(bS)return Zf;bS=1;function e(t,n,r,i){var a=-1,s=t==null?0:t.length;for(i&&s&&(r=t[++a]);++a<s;)r=n(r,t[a],a,t);return r}return Zf=e,Zf}var eh,xS;function v3(){if(xS)return eh;xS=1;function e(t,n,r,i,a){return a(t,function(s,o,l){r=i?(i=!1,s):n(r,s,o,l)}),r}return eh=e,eh}var th,wS;function hN(){if(wS)return th;wS=1;var e=g3(),t=$l(),n=$n(),r=v3(),i=Ke();function a(s,o,l){var u=i(s)?e:r,c=arguments.length<3;return u(s,n(o,4),l,c,t)}return th=a,th}var nh,SS;function y3(){if(SS)return nh;SS=1;var e=Yr(),t=Ke(),n=yn(),r="[object String]";function i(a){return typeof a=="string"||!t(a)&&n(a)&&e(a)==r}return nh=i,nh}var rh,_S;function b3(){if(_S)return rh;_S=1;var e=oN(),t=e("length");return rh=t,rh}var ih,kS;function x3(){if(kS)return ih;kS=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",i=t+n+r,a="\\ufe0e\\ufe0f",s="\\u200d",o=RegExp("["+s+e+i+a+"]");function l(u){return o.test(u)}return ih=l,ih}var ah,CS;function w3(){if(CS)return ah;CS=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",i=t+n+r,a="\\ufe0e\\ufe0f",s="["+e+"]",o="["+i+"]",l="\\ud83c[\\udffb-\\udfff]",u="(?:"+o+"|"+l+")",c="[^"+e+"]",f="(?:\\ud83c[\\udde6-\\uddff]){2}",h="[\\ud800-\\udbff][\\udc00-\\udfff]",m="\\u200d",v=u+"?",p="["+a+"]?",x="(?:"+m+"(?:"+[c,f,h].join("|")+")"+p+v+")*",g=p+v+x,y="(?:"+[c+o+"?",o,f,h,s].join("|")+")",b=RegExp(l+"(?="+l+")|"+y+g,"g");function _(C){for(var E=b.lastIndex=0;b.test(C);)++E;return E}return ah=_,ah}var sh,ES;function S3(){if(ES)return sh;ES=1;var e=b3(),t=x3(),n=w3();function r(i){return t(i)?n(i):e(i)}return sh=r,sh}var oh,jS;function _3(){if(jS)return oh;jS=1;var e=Wv(),t=ta(),n=Vn(),r=y3(),i=S3(),a="[object Map]",s="[object Set]";function o(l){if(l==null)return 0;if(n(l))return r(l)?i(l):l.length;var u=t(l);return u==a||u==s?l.size:e(l).length}return oh=o,oh}var lh,TS;function k3(){if(TS)return lh;TS=1;var e=Uv(),t=HT(),n=Zv(),r=$n(),i=Vl(),a=Ke(),s=ea(),o=Ms(),l=Wt(),u=As();function c(f,h,m){var v=a(f),p=v||s(f)||u(f);if(h=r(h,4),m==null){var x=f&&f.constructor;p?m=v?new x:[]:l(f)?m=o(x)?t(i(f)):{}:m={}}return(p?e:n)(f,function(g,y,b){return h(m,g,y,b)}),m}return lh=c,lh}var uh,NS;function C3(){if(NS)return uh;NS=1;var e=Zi(),t=Rs(),n=Ke(),r=e?e.isConcatSpreadable:void 0;function i(a){return n(a)||t(a)||!!(r&&a&&a[r])}return uh=i,uh}var ch,MS;function ny(){if(MS)return ch;MS=1;var e=Yv(),t=C3();function n(r,i,a,s,o){var l=-1,u=r.length;for(a||(a=t),o||(o=[]);++l<u;){var c=r[l];i>0&&a(c)?i>1?n(c,i-1,a,s,o):e(o,c):s||(o[o.length]=c)}return o}return ch=n,ch}var dh,PS;function E3(){if(PS)return dh;PS=1;function e(t,n,r){switch(r.length){case 0:return t.call(n);case 1:return t.call(n,r[0]);case 2:return t.call(n,r[0],r[1]);case 3:return t.call(n,r[0],r[1],r[2])}return t.apply(n,r)}return dh=e,dh}var fh,RS;function pN(){if(RS)return fh;RS=1;var e=E3(),t=Math.max;function n(r,i,a){return i=t(i===void 0?r.length-1:i,0),function(){for(var s=arguments,o=-1,l=t(s.length-i,0),u=Array(l);++o<l;)u[o]=s[i+o];o=-1;for(var c=Array(i+1);++o<i;)c[o]=s[o];return c[i]=a(u),e(r,this,c)}}return fh=n,fh}var hh,AS;function j3(){if(AS)return hh;AS=1;var e=Jv(),t=AT(),n=Xr(),r=t?function(i,a){return t(i,"toString",{configurable:!0,enumerable:!1,value:e(a),writable:!0})}:n;return hh=r,hh}var ph,IS;function T3(){if(IS)return ph;IS=1;var e=800,t=16,n=Date.now;function r(i){var a=0,s=0;return function(){var o=n(),l=t-(o-s);if(s=o,l>0){if(++a>=e)return arguments[0]}else a=0;return i.apply(void 0,arguments)}}return ph=r,ph}var mh,DS;function mN(){if(DS)return mh;DS=1;var e=j3(),t=T3(),n=t(e);return mh=n,mh}var gh,OS;function Gl(){if(OS)return gh;OS=1;var e=Xr(),t=pN(),n=mN();function r(i,a){return n(t(i,a,e),i+"")}return gh=r,gh}var vh,LS;function gN(){if(LS)return vh;LS=1;function e(t,n,r,i){for(var a=t.length,s=r+(i?1:-1);i?s--:++s<a;)if(n(t[s],s,t))return s;return-1}return vh=e,vh}var yh,qS;function N3(){if(qS)return yh;qS=1;function e(t){return t!==t}return yh=e,yh}var bh,FS;function M3(){if(FS)return bh;FS=1;function e(t,n,r){for(var i=r-1,a=t.length;++i<a;)if(t[i]===n)return i;return-1}return bh=e,bh}var xh,VS;function P3(){if(VS)return xh;VS=1;var e=gN(),t=N3(),n=M3();function r(i,a,s){return a===a?n(i,a,s):e(i,t,s)}return xh=r,xh}var wh,$S;function R3(){if($S)return wh;$S=1;var e=P3();function t(n,r){var i=n==null?0:n.length;return!!i&&e(n,r,0)>-1}return wh=t,wh}var Sh,BS;function A3(){if(BS)return Sh;BS=1;function e(t,n,r){for(var i=-1,a=t==null?0:t.length;++i<a;)if(r(n,t[i]))return!0;return!1}return Sh=e,Sh}var _h,zS;function I3(){if(zS)return _h;zS=1;function e(){}return _h=e,_h}var kh,US;function D3(){if(US)return kh;US=1;var e=zT(),t=I3(),n=ey(),r=1/0,i=e&&1/n(new e([,-0]))[1]==r?function(a){return new e(a)}:t;return kh=i,kh}var Ch,GS;function O3(){if(GS)return Ch;GS=1;var e=XT(),t=R3(),n=A3(),r=ZT(),i=D3(),a=ey(),s=200;function o(l,u,c){var f=-1,h=t,m=l.length,v=!0,p=[],x=p;if(c)v=!1,h=n;else if(m>=s){var g=u?null:i(l);if(g)return a(g);v=!1,h=r,x=new e}else x=u?[]:p;e:for(;++f<m;){var y=l[f],b=u?u(y):y;if(y=c||y!==0?y:0,v&&b===b){for(var _=x.length;_--;)if(x[_]===b)continue e;u&&x.push(b),p.push(y)}else h(x,b,c)||(x!==p&&x.push(b),p.push(y))}return p}return Ch=o,Ch}var Eh,HS;function vN(){if(HS)return Eh;HS=1;var e=Vn(),t=yn();function n(r){return t(r)&&e(r)}return Eh=n,Eh}var jh,WS;function L3(){if(WS)return jh;WS=1;var e=ny(),t=Gl(),n=O3(),r=vN(),i=t(function(a){return n(e(a,1,r,!0))});return jh=i,jh}var Th,KS;function q3(){if(KS)return Th;KS=1;var e=Bl();function t(n,r){return e(r,function(i){return n[i]})}return Th=t,Th}var Nh,YS;function yN(){if(YS)return Nh;YS=1;var e=q3(),t=Sr();function n(r){return r==null?[]:e(r,t(r))}return Nh=n,Nh}var Mh,QS;function Kt(){if(QS)return Mh;QS=1;var e;if(typeof $v=="function")try{e={clone:GF(),constant:Jv(),each:JT(),filter:lN(),has:uN(),isArray:Ke(),isEmpty:m3(),isFunction:Ms(),isUndefined:cN(),keys:Sr(),map:fN(),reduce:hN(),size:_3(),transform:k3(),union:L3(),values:yN()}}catch{}return e||(e=window._),Mh=e,Mh}var Ph,JS;function ry(){if(JS)return Ph;JS=1;var e=Kt();Ph=i;var t="\0",n="\0",r="";function i(c){this._isDirected=e.has(c,"directed")?c.directed:!0,this._isMultigraph=e.has(c,"multigraph")?c.multigraph:!1,this._isCompound=e.has(c,"compound")?c.compound:!1,this._label=void 0,this._defaultNodeLabelFn=e.constant(void 0),this._defaultEdgeLabelFn=e.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[n]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}i.prototype._nodeCount=0,i.prototype._edgeCount=0,i.prototype.isDirected=function(){return this._isDirected},i.prototype.isMultigraph=function(){return this._isMultigraph},i.prototype.isCompound=function(){return this._isCompound},i.prototype.setGraph=function(c){return this._label=c,this},i.prototype.graph=function(){return this._label},i.prototype.setDefaultNodeLabel=function(c){return e.isFunction(c)||(c=e.constant(c)),this._defaultNodeLabelFn=c,this},i.prototype.nodeCount=function(){return this._nodeCount},i.prototype.nodes=function(){return e.keys(this._nodes)},i.prototype.sources=function(){var c=this;return e.filter(this.nodes(),function(f){return e.isEmpty(c._in[f])})},i.prototype.sinks=function(){var c=this;return e.filter(this.nodes(),function(f){return e.isEmpty(c._out[f])})},i.prototype.setNodes=function(c,f){var h=arguments,m=this;return e.each(c,function(v){h.length>1?m.setNode(v,f):m.setNode(v)}),this},i.prototype.setNode=function(c,f){return e.has(this._nodes,c)?(arguments.length>1&&(this._nodes[c]=f),this):(this._nodes[c]=arguments.length>1?f:this._defaultNodeLabelFn(c),this._isCompound&&(this._parent[c]=n,this._children[c]={},this._children[n][c]=!0),this._in[c]={},this._preds[c]={},this._out[c]={},this._sucs[c]={},++this._nodeCount,this)},i.prototype.node=function(c){return this._nodes[c]},i.prototype.hasNode=function(c){return e.has(this._nodes,c)},i.prototype.removeNode=function(c){var f=this;if(e.has(this._nodes,c)){var h=function(m){f.removeEdge(f._edgeObjs[m])};delete this._nodes[c],this._isCompound&&(this._removeFromParentsChildList(c),delete this._parent[c],e.each(this.children(c),function(m){f.setParent(m)}),delete this._children[c]),e.each(e.keys(this._in[c]),h),delete this._in[c],delete this._preds[c],e.each(e.keys(this._out[c]),h),delete this._out[c],delete this._sucs[c],--this._nodeCount}return this},i.prototype.setParent=function(c,f){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(e.isUndefined(f))f=n;else{f+="";for(var h=f;!e.isUndefined(h);h=this.parent(h))if(h===c)throw new Error("Setting "+f+" as parent of "+c+" would create a cycle");this.setNode(f)}return this.setNode(c),this._removeFromParentsChildList(c),this._parent[c]=f,this._children[f][c]=!0,this},i.prototype._removeFromParentsChildList=function(c){delete this._children[this._parent[c]][c]},i.prototype.parent=function(c){if(this._isCompound){var f=this._parent[c];if(f!==n)return f}},i.prototype.children=function(c){if(e.isUndefined(c)&&(c=n),this._isCompound){var f=this._children[c];if(f)return e.keys(f)}else{if(c===n)return this.nodes();if(this.hasNode(c))return[]}},i.prototype.predecessors=function(c){var f=this._preds[c];if(f)return e.keys(f)},i.prototype.successors=function(c){var f=this._sucs[c];if(f)return e.keys(f)},i.prototype.neighbors=function(c){var f=this.predecessors(c);if(f)return e.union(f,this.successors(c))},i.prototype.isLeaf=function(c){var f;return this.isDirected()?f=this.successors(c):f=this.neighbors(c),f.length===0},i.prototype.filterNodes=function(c){var f=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});f.setGraph(this.graph());var h=this;e.each(this._nodes,function(p,x){c(x)&&f.setNode(x,p)}),e.each(this._edgeObjs,function(p){f.hasNode(p.v)&&f.hasNode(p.w)&&f.setEdge(p,h.edge(p))});var m={};function v(p){var x=h.parent(p);return x===void 0||f.hasNode(x)?(m[p]=x,x):x in m?m[x]:v(x)}return this._isCompound&&e.each(f.nodes(),function(p){f.setParent(p,v(p))}),f},i.prototype.setDefaultEdgeLabel=function(c){return e.isFunction(c)||(c=e.constant(c)),this._defaultEdgeLabelFn=c,this},i.prototype.edgeCount=function(){return this._edgeCount},i.prototype.edges=function(){return e.values(this._edgeObjs)},i.prototype.setPath=function(c,f){var h=this,m=arguments;return e.reduce(c,function(v,p){return m.length>1?h.setEdge(v,p,f):h.setEdge(v,p),p}),this},i.prototype.setEdge=function(){var c,f,h,m,v=!1,p=arguments[0];typeof p=="object"&&p!==null&&"v"in p?(c=p.v,f=p.w,h=p.name,arguments.length===2&&(m=arguments[1],v=!0)):(c=p,f=arguments[1],h=arguments[3],arguments.length>2&&(m=arguments[2],v=!0)),c=""+c,f=""+f,e.isUndefined(h)||(h=""+h);var x=o(this._isDirected,c,f,h);if(e.has(this._edgeLabels,x))return v&&(this._edgeLabels[x]=m),this;if(!e.isUndefined(h)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(c),this.setNode(f),this._edgeLabels[x]=v?m:this._defaultEdgeLabelFn(c,f,h);var g=l(this._isDirected,c,f,h);return c=g.v,f=g.w,Object.freeze(g),this._edgeObjs[x]=g,a(this._preds[f],c),a(this._sucs[c],f),this._in[f][x]=g,this._out[c][x]=g,this._edgeCount++,this},i.prototype.edge=function(c,f,h){var m=arguments.length===1?u(this._isDirected,arguments[0]):o(this._isDirected,c,f,h);return this._edgeLabels[m]},i.prototype.hasEdge=function(c,f,h){var m=arguments.length===1?u(this._isDirected,arguments[0]):o(this._isDirected,c,f,h);return e.has(this._edgeLabels,m)},i.prototype.removeEdge=function(c,f,h){var m=arguments.length===1?u(this._isDirected,arguments[0]):o(this._isDirected,c,f,h),v=this._edgeObjs[m];return v&&(c=v.v,f=v.w,delete this._edgeLabels[m],delete this._edgeObjs[m],s(this._preds[f],c),s(this._sucs[c],f),delete this._in[f][m],delete this._out[c][m],this._edgeCount--),this},i.prototype.inEdges=function(c,f){var h=this._in[c];if(h){var m=e.values(h);return f?e.filter(m,function(v){return v.v===f}):m}},i.prototype.outEdges=function(c,f){var h=this._out[c];if(h){var m=e.values(h);return f?e.filter(m,function(v){return v.w===f}):m}},i.prototype.nodeEdges=function(c,f){var h=this.inEdges(c,f);if(h)return h.concat(this.outEdges(c,f))};function a(c,f){c[f]?c[f]++:c[f]=1}function s(c,f){--c[f]||delete c[f]}function o(c,f,h,m){var v=""+f,p=""+h;if(!c&&v>p){var x=v;v=p,p=x}return v+r+p+r+(e.isUndefined(m)?t:m)}function l(c,f,h,m){var v=""+f,p=""+h;if(!c&&v>p){var x=v;v=p,p=x}var g={v,w:p};return m&&(g.name=m),g}function u(c,f){return o(c,f.v,f.w,f.name)}return Ph}var Rh,XS;function F3(){return XS||(XS=1,Rh="2.1.8"),Rh}var Ah,ZS;function V3(){return ZS||(ZS=1,Ah={Graph:ry(),version:F3()}),Ah}var Ih,e_;function $3(){if(e_)return Ih;e_=1;var e=Kt(),t=ry();Ih={write:n,read:a};function n(s){var o={options:{directed:s.isDirected(),multigraph:s.isMultigraph(),compound:s.isCompound()},nodes:r(s),edges:i(s)};return e.isUndefined(s.graph())||(o.value=e.clone(s.graph())),o}function r(s){return e.map(s.nodes(),function(o){var l=s.node(o),u=s.parent(o),c={v:o};return e.isUndefined(l)||(c.value=l),e.isUndefined(u)||(c.parent=u),c})}function i(s){return e.map(s.edges(),function(o){var l=s.edge(o),u={v:o.v,w:o.w};return e.isUndefined(o.name)||(u.name=o.name),e.isUndefined(l)||(u.value=l),u})}function a(s){var o=new t(s.options).setGraph(s.value);return e.each(s.nodes,function(l){o.setNode(l.v,l.value),l.parent&&o.setParent(l.v,l.parent)}),e.each(s.edges,function(l){o.setEdge({v:l.v,w:l.w,name:l.name},l.value)}),o}return Ih}var Dh,t_;function B3(){if(t_)return Dh;t_=1;var e=Kt();Dh=t;function t(n){var r={},i=[],a;function s(o){e.has(r,o)||(r[o]=!0,a.push(o),e.each(n.successors(o),s),e.each(n.predecessors(o),s))}return e.each(n.nodes(),function(o){a=[],s(o),a.length&&i.push(a)}),i}return Dh}var Oh,n_;function bN(){if(n_)return Oh;n_=1;var e=Kt();Oh=t;function t(){this._arr=[],this._keyIndices={}}return t.prototype.size=function(){return this._arr.length},t.prototype.keys=function(){return this._arr.map(function(n){return n.key})},t.prototype.has=function(n){return e.has(this._keyIndices,n)},t.prototype.priority=function(n){var r=this._keyIndices[n];if(r!==void 0)return this._arr[r].priority},t.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key},t.prototype.add=function(n,r){var i=this._keyIndices;if(n=String(n),!e.has(i,n)){var a=this._arr,s=a.length;return i[n]=s,a.push({key:n,priority:r}),this._decrease(s),!0}return!1},t.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var n=this._arr.pop();return delete this._keyIndices[n.key],this._heapify(0),n.key},t.prototype.decrease=function(n,r){var i=this._keyIndices[n];if(r>this._arr[i].priority)throw new Error("New priority is greater than current priority. Key: "+n+" Old: "+this._arr[i].priority+" New: "+r);this._arr[i].priority=r,this._decrease(i)},t.prototype._heapify=function(n){var r=this._arr,i=2*n,a=i+1,s=n;i<r.length&&(s=r[i].priority<r[s].priority?i:s,a<r.length&&(s=r[a].priority<r[s].priority?a:s),s!==n&&(this._swap(n,s),this._heapify(s)))},t.prototype._decrease=function(n){for(var r=this._arr,i=r[n].priority,a;n!==0&&(a=n>>1,!(r[a].priority<i));)this._swap(n,a),n=a},t.prototype._swap=function(n,r){var i=this._arr,a=this._keyIndices,s=i[n],o=i[r];i[n]=o,i[r]=s,a[o.key]=n,a[s.key]=r},Oh}var Lh,r_;function xN(){if(r_)return Lh;r_=1;var e=Kt(),t=bN();Lh=r;var n=e.constant(1);function r(a,s,o,l){return i(a,String(s),o||n,l||function(u){return a.outEdges(u)})}function i(a,s,o,l){var u={},c=new t,f,h,m=function(v){var p=v.v!==f?v.v:v.w,x=u[p],g=o(v),y=h.distance+g;if(g<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+v+" Weight: "+g);y<x.distance&&(x.distance=y,x.predecessor=f,c.decrease(p,y))};for(a.nodes().forEach(function(v){var p=v===s?0:Number.POSITIVE_INFINITY;u[v]={distance:p},c.add(v,p)});c.size()>0&&(f=c.removeMin(),h=u[f],h.distance!==Number.POSITIVE_INFINITY);)l(f).forEach(m);return u}return Lh}var qh,i_;function z3(){if(i_)return qh;i_=1;var e=xN(),t=Kt();qh=n;function n(r,i,a){return t.transform(r.nodes(),function(s,o){s[o]=e(r,o,i,a)},{})}return qh}var Fh,a_;function wN(){if(a_)return Fh;a_=1;var e=Kt();Fh=t;function t(n){var r=0,i=[],a={},s=[];function o(l){var u=a[l]={onStack:!0,lowlink:r,index:r++};if(i.push(l),n.successors(l).forEach(function(h){e.has(a,h)?a[h].onStack&&(u.lowlink=Math.min(u.lowlink,a[h].index)):(o(h),u.lowlink=Math.min(u.lowlink,a[h].lowlink))}),u.lowlink===u.index){var c=[],f;do f=i.pop(),a[f].onStack=!1,c.push(f);while(l!==f);s.push(c)}}return n.nodes().forEach(function(l){e.has(a,l)||o(l)}),s}return Fh}var Vh,s_;function U3(){if(s_)return Vh;s_=1;var e=Kt(),t=wN();Vh=n;function n(r){return e.filter(t(r),function(i){return i.length>1||i.length===1&&r.hasEdge(i[0],i[0])})}return Vh}var $h,o_;function G3(){if(o_)return $h;o_=1;var e=Kt();$h=n;var t=e.constant(1);function n(i,a,s){return r(i,a||t,s||function(o){return i.outEdges(o)})}function r(i,a,s){var o={},l=i.nodes();return l.forEach(function(u){o[u]={},o[u][u]={distance:0},l.forEach(function(c){u!==c&&(o[u][c]={distance:Number.POSITIVE_INFINITY})}),s(u).forEach(function(c){var f=c.v===u?c.w:c.v,h=a(c);o[u][f]={distance:h,predecessor:u}})}),l.forEach(function(u){var c=o[u];l.forEach(function(f){var h=o[f];l.forEach(function(m){var v=h[u],p=c[m],x=h[m],g=v.distance+p.distance;g<x.distance&&(x.distance=g,x.predecessor=p.predecessor)})})}),o}return $h}var Bh,l_;function SN(){if(l_)return Bh;l_=1;var e=Kt();Bh=t,t.CycleException=n;function t(r){var i={},a={},s=[];function o(l){if(e.has(a,l))throw new n;e.has(i,l)||(a[l]=!0,i[l]=!0,e.each(r.predecessors(l),o),delete a[l],s.push(l))}if(e.each(r.sinks(),o),e.size(i)!==r.nodeCount())throw new n;return s}function n(){}return n.prototype=new Error,Bh}var zh,u_;function H3(){if(u_)return zh;u_=1;var e=SN();zh=t;function t(n){try{e(n)}catch(r){if(r instanceof e.CycleException)return!1;throw r}return!0}return zh}var Uh,c_;function _N(){if(c_)return Uh;c_=1;var e=Kt();Uh=t;function t(r,i,a){e.isArray(i)||(i=[i]);var s=(r.isDirected()?r.successors:r.neighbors).bind(r),o=[],l={};return e.each(i,function(u){if(!r.hasNode(u))throw new Error("Graph does not have node: "+u);n(r,u,a==="post",l,s,o)}),o}function n(r,i,a,s,o,l){e.has(s,i)||(s[i]=!0,a||l.push(i),e.each(o(i),function(u){n(r,u,a,s,o,l)}),a&&l.push(i))}return Uh}var Gh,d_;function W3(){if(d_)return Gh;d_=1;var e=_N();Gh=t;function t(n,r){return e(n,r,"post")}return Gh}var Hh,f_;function K3(){if(f_)return Hh;f_=1;var e=_N();Hh=t;function t(n,r){return e(n,r,"pre")}return Hh}var Wh,h_;function Y3(){if(h_)return Wh;h_=1;var e=Kt(),t=ry(),n=bN();Wh=r;function r(i,a){var s=new t,o={},l=new n,u;function c(h){var m=h.v===u?h.w:h.v,v=l.priority(m);if(v!==void 0){var p=a(h);p<v&&(o[m]=u,l.decrease(m,p))}}if(i.nodeCount()===0)return s;e.each(i.nodes(),function(h){l.add(h,Number.POSITIVE_INFINITY),s.setNode(h)}),l.decrease(i.nodes()[0],0);for(var f=!1;l.size()>0;){if(u=l.removeMin(),e.has(o,u))s.setEdge(u,o[u]);else{if(f)throw new Error("Input graph is not connected: "+i);f=!0}i.nodeEdges(u).forEach(c)}return s}return Wh}var Kh,p_;function Q3(){return p_||(p_=1,Kh={components:B3(),dijkstra:xN(),dijkstraAll:z3(),findCycles:U3(),floydWarshall:G3(),isAcyclic:H3(),postorder:W3(),preorder:K3(),prim:Y3(),tarjan:wN(),topsort:SN()}),Kh}var Yh,m_;function J3(){if(m_)return Yh;m_=1;var e=V3();return Yh={Graph:e.Graph,json:$3(),alg:Q3(),version:e.version},Yh}var rl;if(typeof $v=="function")try{rl=J3()}catch{}rl||(rl=window.graphlib);var sn=rl,Qh,g_;function X3(){if(g_)return Qh;g_=1;var e=KT(),t=1,n=4;function r(i){return e(i,t|n)}return Qh=r,Qh}var Jh,v_;function Hl(){if(v_)return Jh;v_=1;var e=Xi(),t=Vn(),n=Ll(),r=Wt();function i(a,s,o){if(!r(o))return!1;var l=typeof s;return(l=="number"?t(o)&&n(s,o.length):l=="string"&&s in o)?e(o[s],a):!1}return Jh=i,Jh}var Xh,y_;function Z3(){if(y_)return Xh;y_=1;var e=Gl(),t=Xi(),n=Hl(),r=Jr(),i=Object.prototype,a=i.hasOwnProperty,s=e(function(o,l){o=Object(o);var u=-1,c=l.length,f=c>2?l[2]:void 0;for(f&&n(l[0],l[1],f)&&(c=1);++u<c;)for(var h=l[u],m=r(h),v=-1,p=m.length;++v<p;){var x=m[v],g=o[x];(g===void 0||t(g,i[x])&&!a.call(o,x))&&(o[x]=h[x])}return o});return Xh=s,Xh}var Zh,b_;function eV(){if(b_)return Zh;b_=1;var e=$n(),t=Vn(),n=Sr();function r(i){return function(a,s,o){var l=Object(a);if(!t(a)){var u=e(s,3);a=n(a),s=function(f){return u(l[f],f,l)}}var c=i(a,s,o);return c>-1?l[u?a[c]:c]:void 0}}return Zh=r,Zh}var ep,x_;function tV(){if(x_)return ep;x_=1;var e=/\s/;function t(n){for(var r=n.length;r--&&e.test(n.charAt(r)););return r}return ep=t,ep}var tp,w_;function nV(){if(w_)return tp;w_=1;var e=tV(),t=/^\s+/;function n(r){return r&&r.slice(0,e(r)+1).replace(t,"")}return tp=n,tp}var np,S_;function rV(){if(S_)return np;S_=1;var e=nV(),t=Wt(),n=na(),r=NaN,i=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,s=/^0o[0-7]+$/i,o=parseInt;function l(u){if(typeof u=="number")return u;if(n(u))return r;if(t(u)){var c=typeof u.valueOf=="function"?u.valueOf():u;u=t(c)?c+"":c}if(typeof u!="string")return u===0?u:+u;u=e(u);var f=a.test(u);return f||s.test(u)?o(u.slice(2),f?2:8):i.test(u)?r:+u}return np=l,np}var rp,__;function kN(){if(__)return rp;__=1;var e=rV(),t=1/0,n=17976931348623157e292;function r(i){if(!i)return i===0?i:0;if(i=e(i),i===t||i===-t){var a=i<0?-1:1;return a*n}return i===i?i:0}return rp=r,rp}var ip,k_;function iV(){if(k_)return ip;k_=1;var e=kN();function t(n){var r=e(n),i=r%1;return r===r?i?r-i:r:0}return ip=t,ip}var ap,C_;function aV(){if(C_)return ap;C_=1;var e=gN(),t=$n(),n=iV(),r=Math.max;function i(a,s,o){var l=a==null?0:a.length;if(!l)return-1;var u=o==null?0:n(o);return u<0&&(u=r(l+u,0)),e(a,t(s,3),u)}return ap=i,ap}var sp,E_;function sV(){if(E_)return sp;E_=1;var e=eV(),t=aV(),n=e(t);return sp=n,sp}var op,j_;function CN(){if(j_)return op;j_=1;var e=ny();function t(n){var r=n==null?0:n.length;return r?e(n,1):[]}return op=t,op}var lp,T_;function oV(){if(T_)return lp;T_=1;var e=Xv(),t=YT(),n=Jr();function r(i,a){return i==null?i:e(i,t(a),n)}return lp=r,lp}var up,N_;function lV(){if(N_)return up;N_=1;function e(t){var n=t==null?0:t.length;return n?t[n-1]:void 0}return up=e,up}var cp,M_;function uV(){if(M_)return cp;M_=1;var e=Dl(),t=Zv(),n=$n();function r(i,a){var s={};return a=n(a,3),t(i,function(o,l,u){e(s,l,a(o,l,u))}),s}return cp=r,cp}var dp,P_;function iy(){if(P_)return dp;P_=1;var e=na();function t(n,r,i){for(var a=-1,s=n.length;++a<s;){var o=n[a],l=r(o);if(l!=null&&(u===void 0?l===l&&!e(l):i(l,u)))var u=l,c=o}return c}return dp=t,dp}var fp,R_;function cV(){if(R_)return fp;R_=1;function e(t,n){return t>n}return fp=e,fp}var hp,A_;function dV(){if(A_)return hp;A_=1;var e=iy(),t=cV(),n=Xr();function r(i){return i&&i.length?e(i,n,t):void 0}return hp=r,hp}var pp,I_;function EN(){if(I_)return pp;I_=1;var e=Dl(),t=Xi();function n(r,i,a){(a!==void 0&&!t(r[i],a)||a===void 0&&!(i in r))&&e(r,i,a)}return pp=n,pp}var mp,D_;function fV(){if(D_)return mp;D_=1;var e=Yr(),t=Vl(),n=yn(),r="[object Object]",i=Function.prototype,a=Object.prototype,s=i.toString,o=a.hasOwnProperty,l=s.call(Object);function u(c){if(!n(c)||e(c)!=r)return!1;var f=t(c);if(f===null)return!0;var h=o.call(f,"constructor")&&f.constructor;return typeof h=="function"&&h instanceof h&&s.call(h)==l}return mp=u,mp}var gp,O_;function jN(){if(O_)return gp;O_=1;function e(t,n){if(!(n==="constructor"&&typeof t[n]=="function")&&n!="__proto__")return t[n]}return gp=e,gp}var vp,L_;function hV(){if(L_)return vp;L_=1;var e=Ps(),t=Jr();function n(r){return e(r,t(r))}return vp=n,vp}var yp,q_;function pV(){if(q_)return yp;q_=1;var e=EN(),t=OT(),n=GT(),r=LT(),i=WT(),a=Rs(),s=Ke(),o=vN(),l=ea(),u=Ms(),c=Wt(),f=fV(),h=As(),m=jN(),v=hV();function p(x,g,y,b,_,C,E){var j=m(x,y),T=m(g,y),P=E.get(T);if(P){e(x,y,P);return}var O=C?C(j,T,y+"",x,g,E):void 0,A=O===void 0;if(A){var W=s(T),J=!W&&l(T),me=!W&&!J&&h(T);O=T,W||J||me?s(j)?O=j:o(j)?O=r(j):J?(A=!1,O=t(T,!0)):me?(A=!1,O=n(T,!0)):O=[]:f(T)||a(T)?(O=j,a(j)?O=v(j):(!c(j)||u(j))&&(O=i(T))):A=!1}A&&(E.set(T,O),_(O,T,b,C,E),E.delete(T)),e(x,y,O)}return yp=p,yp}var bp,F_;function mV(){if(F_)return bp;F_=1;var e=Il(),t=EN(),n=Xv(),r=pV(),i=Wt(),a=Jr(),s=jN();function o(l,u,c,f,h){l!==u&&n(u,function(m,v){if(h||(h=new e),i(m))r(l,u,v,c,o,f,h);else{var p=f?f(s(l,v),m,v+"",l,u,h):void 0;p===void 0&&(p=m),t(l,v,p)}},a)}return bp=o,bp}var xp,V_;function gV(){if(V_)return xp;V_=1;var e=Gl(),t=Hl();function n(r){return e(function(i,a){var s=-1,o=a.length,l=o>1?a[o-1]:void 0,u=o>2?a[2]:void 0;for(l=r.length>3&&typeof l=="function"?(o--,l):void 0,u&&t(a[0],a[1],u)&&(l=o<3?void 0:l,o=1),i=Object(i);++s<o;){var c=a[s];c&&r(i,c,s,l)}return i})}return xp=n,xp}var wp,$_;function vV(){if($_)return wp;$_=1;var e=mV(),t=gV(),n=t(function(r,i,a){e(r,i,a)});return wp=n,wp}var Sp,B_;function TN(){if(B_)return Sp;B_=1;function e(t,n){return t<n}return Sp=e,Sp}var _p,z_;function yV(){if(z_)return _p;z_=1;var e=iy(),t=TN(),n=Xr();function r(i){return i&&i.length?e(i,n,t):void 0}return _p=r,_p}var kp,U_;function bV(){if(U_)return kp;U_=1;var e=iy(),t=$n(),n=TN();function r(i,a){return i&&i.length?e(i,t(a,2),n):void 0}return kp=r,kp}var Cp,G_;function xV(){if(G_)return Cp;G_=1;var e=an(),t=function(){return e.Date.now()};return Cp=t,Cp}var Ep,H_;function wV(){if(H_)return Ep;H_=1;var e=Ol(),t=zl(),n=Ll(),r=Wt(),i=Is();function a(s,o,l,u){if(!r(s))return s;o=t(o,s);for(var c=-1,f=o.length,h=f-1,m=s;m!=null&&++c<f;){var v=i(o[c]),p=l;if(v==="__proto__"||v==="constructor"||v==="prototype")return s;if(c!=h){var x=m[v];p=u?u(x,v,m):void 0,p===void 0&&(p=r(x)?x:n(o[c+1])?[]:{})}e(m,v,p),m=m[v]}return s}return Ep=a,Ep}var jp,W_;function SV(){if(W_)return jp;W_=1;var e=Ul(),t=wV(),n=zl();function r(i,a,s){for(var o=-1,l=a.length,u={};++o<l;){var c=a[o],f=e(i,c);s(f,c)&&t(u,n(c,i),f)}return u}return jp=r,jp}var Tp,K_;function _V(){if(K_)return Tp;K_=1;var e=SV(),t=sN();function n(r,i){return e(r,i,function(a,s){return t(r,s)})}return Tp=n,Tp}var Np,Y_;function kV(){if(Y_)return Np;Y_=1;var e=CN(),t=pN(),n=mN();function r(i){return n(t(i,void 0,e),i+"")}return Np=r,Np}var Mp,Q_;function CV(){if(Q_)return Mp;Q_=1;var e=_V(),t=kV(),n=t(function(r,i){return r==null?{}:e(r,i)});return Mp=n,Mp}var Pp,J_;function EV(){if(J_)return Pp;J_=1;var e=Math.ceil,t=Math.max;function n(r,i,a,s){for(var o=-1,l=t(e((i-r)/(a||1)),0),u=Array(l);l--;)u[s?l:++o]=r,r+=a;return u}return Pp=n,Pp}var Rp,X_;function jV(){if(X_)return Rp;X_=1;var e=EV(),t=Hl(),n=kN();function r(i){return function(a,s,o){return o&&typeof o!="number"&&t(a,s,o)&&(s=o=void 0),a=n(a),s===void 0?(s=a,a=0):s=n(s),o=o===void 0?a<s?1:-1:n(o),e(a,s,o,i)}}return Rp=r,Rp}var Ap,Z_;function TV(){if(Z_)return Ap;Z_=1;var e=jV(),t=e();return Ap=t,Ap}var Ip,ek;function NV(){if(ek)return Ip;ek=1;function e(t,n){var r=t.length;for(t.sort(n);r--;)t[r]=t[r].value;return t}return Ip=e,Ip}var Dp,tk;function MV(){if(tk)return Dp;tk=1;var e=na();function t(n,r){if(n!==r){var i=n!==void 0,a=n===null,s=n===n,o=e(n),l=r!==void 0,u=r===null,c=r===r,f=e(r);if(!u&&!f&&!o&&n>r||o&&l&&c&&!u&&!f||a&&l&&c||!i&&c||!s)return 1;if(!a&&!o&&!f&&n<r||f&&i&&s&&!a&&!o||u&&i&&s||!l&&s||!c)return-1}return 0}return Dp=t,Dp}var Op,nk;function PV(){if(nk)return Op;nk=1;var e=MV();function t(n,r,i){for(var a=-1,s=n.criteria,o=r.criteria,l=s.length,u=i.length;++a<l;){var c=e(s[a],o[a]);if(c){if(a>=u)return c;var f=i[a];return c*(f=="desc"?-1:1)}}return n.index-r.index}return Op=t,Op}var Lp,rk;function RV(){if(rk)return Lp;rk=1;var e=Bl(),t=Ul(),n=$n(),r=dN(),i=NV(),a=ql(),s=PV(),o=Xr(),l=Ke();function u(c,f,h){f.length?f=e(f,function(p){return l(p)?function(x){return t(x,p.length===1?p[0]:p)}:p}):f=[o];var m=-1;f=e(f,a(n));var v=r(c,function(p,x,g){var y=e(f,function(b){return b(p)});return{criteria:y,index:++m,value:p}});return i(v,function(p,x){return s(p,x,h)})}return Lp=u,Lp}var qp,ik;function AV(){if(ik)return qp;ik=1;var e=ny(),t=RV(),n=Gl(),r=Hl(),i=n(function(a,s){if(a==null)return[];var o=s.length;return o>1&&r(a,s[0],s[1])?s=[]:o>2&&r(s[0],s[1],s[2])&&(s=[s[0]]),t(a,e(s,1),[])});return qp=i,qp}var Fp,ak;function IV(){if(ak)return Fp;ak=1;var e=iN(),t=0;function n(r){var i=++t;return e(r)+i}return Fp=n,Fp}var Vp,sk;function DV(){if(sk)return Vp;sk=1;function e(t,n,r){for(var i=-1,a=t.length,s=n.length,o={};++i<a;){var l=i<s?n[i]:void 0;r(o,t[i],l)}return o}return Vp=e,Vp}var $p,ok;function OV(){if(ok)return $p;ok=1;var e=Ol(),t=DV();function n(r,i){return t(r||[],i||[],e)}return $p=n,$p}var il;if(typeof $v=="function")try{il={cloneDeep:X3(),constant:Jv(),defaults:Z3(),each:JT(),filter:lN(),find:sV(),flatten:CN(),forEach:QT(),forIn:oV(),has:uN(),isUndefined:cN(),last:lV(),map:fN(),mapValues:uV(),max:dV(),merge:vV(),min:yV(),minBy:bV(),now:xV(),pick:CV(),range:TV(),reduce:hN(),sortBy:AV(),uniqueId:IV(),values:yN(),zipObject:OV()}}catch{}il||(il=window._);var Te=il,LV=Wl;function Wl(){var e={};e._next=e._prev=e,this._sentinel=e}Wl.prototype.dequeue=function(){var e=this._sentinel,t=e._prev;if(t!==e)return NN(t),t};Wl.prototype.enqueue=function(e){var t=this._sentinel;e._prev&&e._next&&NN(e),e._next=t._next,t._next._prev=e,t._next=e,e._prev=t};Wl.prototype.toString=function(){for(var e=[],t=this._sentinel,n=t._prev;n!==t;)e.push(JSON.stringify(n,qV)),n=n._prev;return"["+e.join(", ")+"]"};function NN(e){e._prev._next=e._next,e._next._prev=e._prev,delete e._next,delete e._prev}function qV(e,t){if(e!=="_next"&&e!=="_prev")return t}var Tn=Te,FV=sn.Graph,VV=LV,$V=zV,BV=Tn.constant(1);function zV(e,t){if(e.nodeCount()<=1)return[];var n=GV(e,t||BV),r=UV(n.graph,n.buckets,n.zeroIdx);return Tn.flatten(Tn.map(r,function(i){return e.outEdges(i.v,i.w)}),!0)}function UV(e,t,n){for(var r=[],i=t[t.length-1],a=t[0],s;e.nodeCount();){for(;s=a.dequeue();)Bp(e,t,n,s);for(;s=i.dequeue();)Bp(e,t,n,s);if(e.nodeCount()){for(var o=t.length-2;o>0;--o)if(s=t[o].dequeue(),s){r=r.concat(Bp(e,t,n,s,!0));break}}}return r}function Bp(e,t,n,r,i){var a=i?[]:void 0;return Tn.forEach(e.inEdges(r.v),function(s){var o=e.edge(s),l=e.node(s.v);i&&a.push({v:s.v,w:s.w}),l.out-=o,og(t,n,l)}),Tn.forEach(e.outEdges(r.v),function(s){var o=e.edge(s),l=s.w,u=e.node(l);u.in-=o,og(t,n,u)}),e.removeNode(r.v),a}function GV(e,t){var n=new FV,r=0,i=0;Tn.forEach(e.nodes(),function(o){n.setNode(o,{v:o,in:0,out:0})}),Tn.forEach(e.edges(),function(o){var l=n.edge(o.v,o.w)||0,u=t(o),c=l+u;n.setEdge(o.v,o.w,c),i=Math.max(i,n.node(o.v).out+=u),r=Math.max(r,n.node(o.w).in+=u)});var a=Tn.range(i+r+3).map(function(){return new VV}),s=r+1;return Tn.forEach(n.nodes(),function(o){og(a,s,n.node(o))}),{graph:n,buckets:a,zeroIdx:s}}function og(e,t,n){n.out?n.in?e[n.out-n.in+t].enqueue(n):e[e.length-1].enqueue(n):e[0].enqueue(n)}var Or=Te,HV=$V,WV={run:KV,undo:QV};function KV(e){var t=e.graph().acyclicer==="greedy"?HV(e,n(e)):YV(e);Or.forEach(t,function(r){var i=e.edge(r);e.removeEdge(r),i.forwardName=r.name,i.reversed=!0,e.setEdge(r.w,r.v,i,Or.uniqueId("rev"))});function n(r){return function(i){return r.edge(i).weight}}}function YV(e){var t=[],n={},r={};function i(a){Or.has(r,a)||(r[a]=!0,n[a]=!0,Or.forEach(e.outEdges(a),function(s){Or.has(n,s.w)?t.push(s):i(s.w)}),delete n[a])}return Or.forEach(e.nodes(),i),t}function QV(e){Or.forEach(e.edges(),function(t){var n=e.edge(t);if(n.reversed){e.removeEdge(t);var r=n.forwardName;delete n.reversed,delete n.forwardName,e.setEdge(t.w,t.v,n,r)}})}var ve=Te,MN=sn.Graph,kt={addDummyNode:PN,simplify:JV,asNonCompoundGraph:XV,successorWeights:ZV,predecessorWeights:e$,intersectRect:t$,buildLayerMatrix:n$,normalizeRanks:r$,removeEmptyRanks:i$,addBorderNode:a$,maxRank:RN,partition:s$,time:o$,notime:l$};function PN(e,t,n,r){var i;do i=ve.uniqueId(r);while(e.hasNode(i));return n.dummy=t,e.setNode(i,n),i}function JV(e){var t=new MN().setGraph(e.graph());return ve.forEach(e.nodes(),function(n){t.setNode(n,e.node(n))}),ve.forEach(e.edges(),function(n){var r=t.edge(n.v,n.w)||{weight:0,minlen:1},i=e.edge(n);t.setEdge(n.v,n.w,{weight:r.weight+i.weight,minlen:Math.max(r.minlen,i.minlen)})}),t}function XV(e){var t=new MN({multigraph:e.isMultigraph()}).setGraph(e.graph());return ve.forEach(e.nodes(),function(n){e.children(n).length||t.setNode(n,e.node(n))}),ve.forEach(e.edges(),function(n){t.setEdge(n,e.edge(n))}),t}function ZV(e){var t=ve.map(e.nodes(),function(n){var r={};return ve.forEach(e.outEdges(n),function(i){r[i.w]=(r[i.w]||0)+e.edge(i).weight}),r});return ve.zipObject(e.nodes(),t)}function e$(e){var t=ve.map(e.nodes(),function(n){var r={};return ve.forEach(e.inEdges(n),function(i){r[i.v]=(r[i.v]||0)+e.edge(i).weight}),r});return ve.zipObject(e.nodes(),t)}function t$(e,t){var n=e.x,r=e.y,i=t.x-n,a=t.y-r,s=e.width/2,o=e.height/2;if(!i&&!a)throw new Error("Not possible to find intersection inside of the rectangle");var l,u;return Math.abs(a)*s>Math.abs(i)*o?(a<0&&(o=-o),l=o*i/a,u=o):(i<0&&(s=-s),l=s,u=s*a/i),{x:n+l,y:r+u}}function n$(e){var t=ve.map(ve.range(RN(e)+1),function(){return[]});return ve.forEach(e.nodes(),function(n){var r=e.node(n),i=r.rank;ve.isUndefined(i)||(t[i][r.order]=n)}),t}function r$(e){var t=ve.min(ve.map(e.nodes(),function(n){return e.node(n).rank}));ve.forEach(e.nodes(),function(n){var r=e.node(n);ve.has(r,"rank")&&(r.rank-=t)})}function i$(e){var t=ve.min(ve.map(e.nodes(),function(a){return e.node(a).rank})),n=[];ve.forEach(e.nodes(),function(a){var s=e.node(a).rank-t;n[s]||(n[s]=[]),n[s].push(a)});var r=0,i=e.graph().nodeRankFactor;ve.forEach(n,function(a,s){ve.isUndefined(a)&&s%i!==0?--r:r&&ve.forEach(a,function(o){e.node(o).rank+=r})})}function a$(e,t,n,r){var i={width:0,height:0};return arguments.length>=4&&(i.rank=n,i.order=r),PN(e,"border",i,t)}function RN(e){return ve.max(ve.map(e.nodes(),function(t){var n=e.node(t).rank;if(!ve.isUndefined(n))return n}))}function s$(e,t){var n={lhs:[],rhs:[]};return ve.forEach(e,function(r){t(r)?n.lhs.push(r):n.rhs.push(r)}),n}function o$(e,t){var n=ve.now();try{return t()}finally{console.log(e+" time: "+(ve.now()-n)+"ms")}}function l$(e,t){return t()}var AN=Te,u$=kt,c$={run:d$,undo:h$};function d$(e){e.graph().dummyChains=[],AN.forEach(e.edges(),function(t){f$(e,t)})}function f$(e,t){var n=t.v,r=e.node(n).rank,i=t.w,a=e.node(i).rank,s=t.name,o=e.edge(t),l=o.labelRank;if(a!==r+1){e.removeEdge(t);var u,c,f;for(f=0,++r;r<a;++f,++r)o.points=[],c={width:0,height:0,edgeLabel:o,edgeObj:t,rank:r},u=u$.addDummyNode(e,"edge",c,"_d"),r===l&&(c.width=o.width,c.height=o.height,c.dummy="edge-label",c.labelpos=o.labelpos),e.setEdge(n,u,{weight:o.weight},s),f===0&&e.graph().dummyChains.push(u),n=u;e.setEdge(n,i,{weight:o.weight},s)}}function h$(e){AN.forEach(e.graph().dummyChains,function(t){var n=e.node(t),r=n.edgeLabel,i;for(e.setEdge(n.edgeObj,r);n.dummy;)i=e.successors(t)[0],e.removeNode(t),r.points.push({x:n.x,y:n.y}),n.dummy==="edge-label"&&(r.x=n.x,r.y=n.y,r.width=n.width,r.height=n.height),t=i,n=e.node(t)})}var oo=Te,Kl={longestPath:p$,slack:m$};function p$(e){var t={};function n(r){var i=e.node(r);if(oo.has(t,r))return i.rank;t[r]=!0;var a=oo.min(oo.map(e.outEdges(r),function(s){return n(s.w)-e.edge(s).minlen}));return(a===Number.POSITIVE_INFINITY||a===void 0||a===null)&&(a=0),i.rank=a}oo.forEach(e.sources(),n)}function m$(e,t){return e.node(t.w).rank-e.node(t.v).rank-e.edge(t).minlen}var al=Te,g$=sn.Graph,sl=Kl.slack,IN=v$;function v$(e){var t=new g$({directed:!1}),n=e.nodes()[0],r=e.nodeCount();t.setNode(n,{});for(var i,a;y$(t,e)<r;)i=b$(t,e),a=t.hasNode(i.v)?sl(e,i):-sl(e,i),x$(t,e,a);return t}function y$(e,t){function n(r){al.forEach(t.nodeEdges(r),function(i){var a=i.v,s=r===a?i.w:a;!e.hasNode(s)&&!sl(t,i)&&(e.setNode(s,{}),e.setEdge(r,s,{}),n(s))})}return al.forEach(e.nodes(),n),e.nodeCount()}function b$(e,t){return al.minBy(t.edges(),function(n){if(e.hasNode(n.v)!==e.hasNode(n.w))return sl(t,n)})}function x$(e,t,n){al.forEach(e.nodes(),function(r){t.node(r).rank+=n})}var qn=Te,w$=IN,S$=Kl.slack,_$=Kl.longestPath,k$=sn.alg.preorder,C$=sn.alg.postorder,E$=kt.simplify,j$=Zr;Zr.initLowLimValues=sy;Zr.initCutValues=ay;Zr.calcCutValue=DN;Zr.leaveEdge=LN;Zr.enterEdge=qN;Zr.exchangeEdges=FN;function Zr(e){e=E$(e),_$(e);var t=w$(e);sy(t),ay(t,e);for(var n,r;n=LN(t);)r=qN(t,e,n),FN(t,e,n,r)}function ay(e,t){var n=C$(e,e.nodes());n=n.slice(0,n.length-1),qn.forEach(n,function(r){T$(e,t,r)})}function T$(e,t,n){var r=e.node(n),i=r.parent;e.edge(n,i).cutvalue=DN(e,t,n)}function DN(e,t,n){var r=e.node(n),i=r.parent,a=!0,s=t.edge(n,i),o=0;return s||(a=!1,s=t.edge(i,n)),o=s.weight,qn.forEach(t.nodeEdges(n),function(l){var u=l.v===n,c=u?l.w:l.v;if(c!==i){var f=u===a,h=t.edge(l).weight;if(o+=f?h:-h,M$(e,n,c)){var m=e.edge(n,c).cutvalue;o+=f?-m:m}}}),o}function sy(e,t){arguments.length<2&&(t=e.nodes()[0]),ON(e,{},1,t)}function ON(e,t,n,r,i){var a=n,s=e.node(r);return t[r]=!0,qn.forEach(e.neighbors(r),function(o){qn.has(t,o)||(n=ON(e,t,n,o,r))}),s.low=a,s.lim=n++,i?s.parent=i:delete s.parent,n}function LN(e){return qn.find(e.edges(),function(t){return e.edge(t).cutvalue<0})}function qN(e,t,n){var r=n.v,i=n.w;t.hasEdge(r,i)||(r=n.w,i=n.v);var a=e.node(r),s=e.node(i),o=a,l=!1;a.lim>s.lim&&(o=s,l=!0);var u=qn.filter(t.edges(),function(c){return l===lk(e,e.node(c.v),o)&&l!==lk(e,e.node(c.w),o)});return qn.minBy(u,function(c){return S$(t,c)})}function FN(e,t,n,r){var i=n.v,a=n.w;e.removeEdge(i,a),e.setEdge(r.v,r.w,{}),sy(e),ay(e,t),N$(e,t)}function N$(e,t){var n=qn.find(e.nodes(),function(i){return!t.node(i).parent}),r=k$(e,n);r=r.slice(1),qn.forEach(r,function(i){var a=e.node(i).parent,s=t.edge(i,a),o=!1;s||(s=t.edge(a,i),o=!0),t.node(i).rank=t.node(a).rank+(o?s.minlen:-s.minlen)})}function M$(e,t,n){return e.hasEdge(t,n)}function lk(e,t,n){return n.low<=t.lim&&t.lim<=n.lim}var P$=Kl,VN=P$.longestPath,R$=IN,A$=j$,I$=D$;function D$(e){switch(e.graph().ranker){case"network-simplex":uk(e);break;case"tight-tree":L$(e);break;case"longest-path":O$(e);break;default:uk(e)}}var O$=VN;function L$(e){VN(e),R$(e)}function uk(e){A$(e)}var lg=Te,q$=F$;function F$(e){var t=$$(e);lg.forEach(e.graph().dummyChains,function(n){for(var r=e.node(n),i=r.edgeObj,a=V$(e,t,i.v,i.w),s=a.path,o=a.lca,l=0,u=s[l],c=!0;n!==i.w;){if(r=e.node(n),c){for(;(u=s[l])!==o&&e.node(u).maxRank<r.rank;)l++;u===o&&(c=!1)}if(!c){for(;l<s.length-1&&e.node(u=s[l+1]).minRank<=r.rank;)l++;u=s[l]}e.setParent(n,u),n=e.successors(n)[0]}})}function V$(e,t,n,r){var i=[],a=[],s=Math.min(t[n].low,t[r].low),o=Math.max(t[n].lim,t[r].lim),l,u;l=n;do l=e.parent(l),i.push(l);while(l&&(t[l].low>s||o>t[l].lim));for(u=l,l=r;(l=e.parent(l))!==u;)a.push(l);return{path:i.concat(a.reverse()),lca:u}}function $$(e){var t={},n=0;function r(i){var a=n;lg.forEach(e.children(i),r),t[i]={low:a,lim:n++}}return lg.forEach(e.children(),r),t}var Nn=Te,ug=kt,B$={run:z$,cleanup:H$};function z$(e){var t=ug.addDummyNode(e,"root",{},"_root"),n=U$(e),r=Nn.max(Nn.values(n))-1,i=2*r+1;e.graph().nestingRoot=t,Nn.forEach(e.edges(),function(s){e.edge(s).minlen*=i});var a=G$(e)+1;Nn.forEach(e.children(),function(s){$N(e,t,i,a,r,n,s)}),e.graph().nodeRankFactor=i}function $N(e,t,n,r,i,a,s){var o=e.children(s);if(!o.length){s!==t&&e.setEdge(t,s,{weight:0,minlen:n});return}var l=ug.addBorderNode(e,"_bt"),u=ug.addBorderNode(e,"_bb"),c=e.node(s);e.setParent(l,s),c.borderTop=l,e.setParent(u,s),c.borderBottom=u,Nn.forEach(o,function(f){$N(e,t,n,r,i,a,f);var h=e.node(f),m=h.borderTop?h.borderTop:f,v=h.borderBottom?h.borderBottom:f,p=h.borderTop?r:2*r,x=m!==v?1:i-a[s]+1;e.setEdge(l,m,{weight:p,minlen:x,nestingEdge:!0}),e.setEdge(v,u,{weight:p,minlen:x,nestingEdge:!0})}),e.parent(s)||e.setEdge(t,l,{weight:0,minlen:i+a[s]})}function U$(e){var t={};function n(r,i){var a=e.children(r);a&&a.length&&Nn.forEach(a,function(s){n(s,i+1)}),t[r]=i}return Nn.forEach(e.children(),function(r){n(r,1)}),t}function G$(e){return Nn.reduce(e.edges(),function(t,n){return t+e.edge(n).weight},0)}function H$(e){var t=e.graph();e.removeNode(t.nestingRoot),delete t.nestingRoot,Nn.forEach(e.edges(),function(n){var r=e.edge(n);r.nestingEdge&&e.removeEdge(n)})}var zp=Te,W$=kt,K$=Y$;function Y$(e){function t(n){var r=e.children(n),i=e.node(n);if(r.length&&zp.forEach(r,t),zp.has(i,"minRank")){i.borderLeft=[],i.borderRight=[];for(var a=i.minRank,s=i.maxRank+1;a<s;++a)ck(e,"borderLeft","_bl",n,i,a),ck(e,"borderRight","_br",n,i,a)}}zp.forEach(e.children(),t)}function ck(e,t,n,r,i,a){var s={width:0,height:0,rank:a,borderType:t},o=i[t][a-1],l=W$.addDummyNode(e,"border",s,n);i[t][a]=l,e.setParent(l,r),o&&e.setEdge(o,l,{weight:1})}var hn=Te,Q$={adjust:J$,undo:X$};function J$(e){var t=e.graph().rankdir.toLowerCase();(t==="lr"||t==="rl")&&BN(e)}function X$(e){var t=e.graph().rankdir.toLowerCase();(t==="bt"||t==="rl")&&Z$(e),(t==="lr"||t==="rl")&&(eB(e),BN(e))}function BN(e){hn.forEach(e.nodes(),function(t){dk(e.node(t))}),hn.forEach(e.edges(),function(t){dk(e.edge(t))})}function dk(e){var t=e.width;e.width=e.height,e.height=t}function Z$(e){hn.forEach(e.nodes(),function(t){Up(e.node(t))}),hn.forEach(e.edges(),function(t){var n=e.edge(t);hn.forEach(n.points,Up),hn.has(n,"y")&&Up(n)})}function Up(e){e.y=-e.y}function eB(e){hn.forEach(e.nodes(),function(t){Gp(e.node(t))}),hn.forEach(e.edges(),function(t){var n=e.edge(t);hn.forEach(n.points,Gp),hn.has(n,"x")&&Gp(n)})}function Gp(e){var t=e.x;e.x=e.y,e.y=t}var Sn=Te,tB=nB;function nB(e){var t={},n=Sn.filter(e.nodes(),function(o){return!e.children(o).length}),r=Sn.max(Sn.map(n,function(o){return e.node(o).rank})),i=Sn.map(Sn.range(r+1),function(){return[]});function a(o){if(!Sn.has(t,o)){t[o]=!0;var l=e.node(o);i[l.rank].push(o),Sn.forEach(e.successors(o),a)}}var s=Sn.sortBy(n,function(o){return e.node(o).rank});return Sn.forEach(s,a),i}var Kn=Te,rB=iB;function iB(e,t){for(var n=0,r=1;r<t.length;++r)n+=aB(e,t[r-1],t[r]);return n}function aB(e,t,n){for(var r=Kn.zipObject(n,Kn.map(n,function(u,c){return c})),i=Kn.flatten(Kn.map(t,function(u){return Kn.sortBy(Kn.map(e.outEdges(u),function(c){return{pos:r[c.w],weight:e.edge(c).weight}}),"pos")}),!0),a=1;a<n.length;)a<<=1;var s=2*a-1;a-=1;var o=Kn.map(new Array(s),function(){return 0}),l=0;return Kn.forEach(i.forEach(function(u){var c=u.pos+a;o[c]+=u.weight;for(var f=0;c>0;)c%2&&(f+=o[c+1]),c=c-1>>1,o[c]+=u.weight;l+=u.weight*f})),l}var fk=Te,sB=oB;function oB(e,t){return fk.map(t,function(n){var r=e.inEdges(n);if(r.length){var i=fk.reduce(r,function(a,s){var o=e.edge(s),l=e.node(s.v);return{sum:a.sum+o.weight*l.order,weight:a.weight+o.weight}},{sum:0,weight:0});return{v:n,barycenter:i.sum/i.weight,weight:i.weight}}else return{v:n}})}var Tt=Te,lB=uB;function uB(e,t){var n={};Tt.forEach(e,function(i,a){var s=n[i.v]={indegree:0,in:[],out:[],vs:[i.v],i:a};Tt.isUndefined(i.barycenter)||(s.barycenter=i.barycenter,s.weight=i.weight)}),Tt.forEach(t.edges(),function(i){var a=n[i.v],s=n[i.w];!Tt.isUndefined(a)&&!Tt.isUndefined(s)&&(s.indegree++,a.out.push(n[i.w]))});var r=Tt.filter(n,function(i){return!i.indegree});return cB(r)}function cB(e){var t=[];function n(a){return function(s){s.merged||(Tt.isUndefined(s.barycenter)||Tt.isUndefined(a.barycenter)||s.barycenter>=a.barycenter)&&dB(a,s)}}function r(a){return function(s){s.in.push(a),--s.indegree===0&&e.push(s)}}for(;e.length;){var i=e.pop();t.push(i),Tt.forEach(i.in.reverse(),n(i)),Tt.forEach(i.out,r(i))}return Tt.map(Tt.filter(t,function(a){return!a.merged}),function(a){return Tt.pick(a,["vs","i","barycenter","weight"])})}function dB(e,t){var n=0,r=0;e.weight&&(n+=e.barycenter*e.weight,r+=e.weight),t.weight&&(n+=t.barycenter*t.weight,r+=t.weight),e.vs=t.vs.concat(e.vs),e.barycenter=n/r,e.weight=r,e.i=Math.min(t.i,e.i),t.merged=!0}var Oa=Te,fB=kt,hB=pB;function pB(e,t){var n=fB.partition(e,function(c){return Oa.has(c,"barycenter")}),r=n.lhs,i=Oa.sortBy(n.rhs,function(c){return-c.i}),a=[],s=0,o=0,l=0;r.sort(mB(!!t)),l=hk(a,i,l),Oa.forEach(r,function(c){l+=c.vs.length,a.push(c.vs),s+=c.barycenter*c.weight,o+=c.weight,l=hk(a,i,l)});var u={vs:Oa.flatten(a,!0)};return o&&(u.barycenter=s/o,u.weight=o),u}function hk(e,t,n){for(var r;t.length&&(r=Oa.last(t)).i<=n;)t.pop(),e.push(r.vs),n++;return n}function mB(e){return function(t,n){return t.barycenter<n.barycenter?-1:t.barycenter>n.barycenter?1:e?n.i-t.i:t.i-n.i}}var tr=Te,gB=sB,vB=lB,yB=hB,bB=zN;function zN(e,t,n,r){var i=e.children(t),a=e.node(t),s=a?a.borderLeft:void 0,o=a?a.borderRight:void 0,l={};s&&(i=tr.filter(i,function(v){return v!==s&&v!==o}));var u=gB(e,i);tr.forEach(u,function(v){if(e.children(v.v).length){var p=zN(e,v.v,n,r);l[v.v]=p,tr.has(p,"barycenter")&&wB(v,p)}});var c=vB(u,n);xB(c,l);var f=yB(c,r);if(s&&(f.vs=tr.flatten([s,f.vs,o],!0),e.predecessors(s).length)){var h=e.node(e.predecessors(s)[0]),m=e.node(e.predecessors(o)[0]);tr.has(f,"barycenter")||(f.barycenter=0,f.weight=0),f.barycenter=(f.barycenter*f.weight+h.order+m.order)/(f.weight+2),f.weight+=2}return f}function xB(e,t){tr.forEach(e,function(n){n.vs=tr.flatten(n.vs.map(function(r){return t[r]?t[r].vs:r}),!0)})}function wB(e,t){tr.isUndefined(e.barycenter)?(e.barycenter=t.barycenter,e.weight=t.weight):(e.barycenter=(e.barycenter*e.weight+t.barycenter*t.weight)/(e.weight+t.weight),e.weight+=t.weight)}var La=Te,SB=sn.Graph,_B=kB;function kB(e,t,n){var r=CB(e),i=new SB({compound:!0}).setGraph({root:r}).setDefaultNodeLabel(function(a){return e.node(a)});return La.forEach(e.nodes(),function(a){var s=e.node(a),o=e.parent(a);(s.rank===t||s.minRank<=t&&t<=s.maxRank)&&(i.setNode(a),i.setParent(a,o||r),La.forEach(e[n](a),function(l){var u=l.v===a?l.w:l.v,c=i.edge(u,a),f=La.isUndefined(c)?0:c.weight;i.setEdge(u,a,{weight:e.edge(l).weight+f})}),La.has(s,"minRank")&&i.setNode(a,{borderLeft:s.borderLeft[t],borderRight:s.borderRight[t]}))}),i}function CB(e){for(var t;e.hasNode(t=La.uniqueId("_root")););return t}var EB=Te,jB=TB;function TB(e,t,n){var r={},i;EB.forEach(n,function(a){for(var s=e.parent(a),o,l;s;){if(o=e.parent(s),o?(l=r[o],r[o]=s):(l=i,i=s),l&&l!==s){t.setEdge(l,s);return}s=o}})}var fr=Te,NB=tB,MB=rB,PB=bB,RB=_B,AB=jB,IB=sn.Graph,pk=kt,DB=OB;function OB(e){var t=pk.maxRank(e),n=mk(e,fr.range(1,t+1),"inEdges"),r=mk(e,fr.range(t-1,-1,-1),"outEdges"),i=NB(e);gk(e,i);for(var a=Number.POSITIVE_INFINITY,s,o=0,l=0;l<4;++o,++l){LB(o%2?n:r,o%4>=2),i=pk.buildLayerMatrix(e);var u=MB(e,i);u<a&&(l=0,s=fr.cloneDeep(i),a=u)}gk(e,s)}function mk(e,t,n){return fr.map(t,function(r){return RB(e,r,n)})}function LB(e,t){var n=new IB;fr.forEach(e,function(r){var i=r.graph().root,a=PB(r,i,n,t);fr.forEach(a.vs,function(s,o){r.node(s).order=o}),AB(r,n,a.vs)})}function gk(e,t){fr.forEach(t,function(n){fr.forEach(n,function(r,i){e.node(r).order=i})})}var ee=Te,qB=sn.Graph,FB=kt,VB={positionX:JB};function $B(e,t){var n={};function r(i,a){var s=0,o=0,l=i.length,u=ee.last(a);return ee.forEach(a,function(c,f){var h=zB(e,c),m=h?e.node(h).order:l;(h||c===u)&&(ee.forEach(a.slice(o,f+1),function(v){ee.forEach(e.predecessors(v),function(p){var x=e.node(p),g=x.order;(g<s||m<g)&&!(x.dummy&&e.node(v).dummy)&&UN(n,p,v)})}),o=f+1,s=m)}),a}return ee.reduce(t,r),n}function BB(e,t){var n={};function r(a,s,o,l,u){var c;ee.forEach(ee.range(s,o),function(f){c=a[f],e.node(c).dummy&&ee.forEach(e.predecessors(c),function(h){var m=e.node(h);m.dummy&&(m.order<l||m.order>u)&&UN(n,h,c)})})}function i(a,s){var o=-1,l,u=0;return ee.forEach(s,function(c,f){if(e.node(c).dummy==="border"){var h=e.predecessors(c);h.length&&(l=e.node(h[0]).order,r(s,u,f,o,l),u=f,o=l)}r(s,u,s.length,l,a.length)}),s}return ee.reduce(t,i),n}function zB(e,t){if(e.node(t).dummy)return ee.find(e.predecessors(t),function(n){return e.node(n).dummy})}function UN(e,t,n){if(t>n){var r=t;t=n,n=r}var i=e[t];i||(e[t]=i={}),i[n]=!0}function UB(e,t,n){if(t>n){var r=t;t=n,n=r}return ee.has(e[t],n)}function GB(e,t,n,r){var i={},a={},s={};return ee.forEach(t,function(o){ee.forEach(o,function(l,u){i[l]=l,a[l]=l,s[l]=u})}),ee.forEach(t,function(o){var l=-1;ee.forEach(o,function(u){var c=r(u);if(c.length){c=ee.sortBy(c,function(p){return s[p]});for(var f=(c.length-1)/2,h=Math.floor(f),m=Math.ceil(f);h<=m;++h){var v=c[h];a[u]===u&&l<s[v]&&!UB(n,u,v)&&(a[v]=u,a[u]=i[u]=i[v],l=s[v])}}})}),{root:i,align:a}}function HB(e,t,n,r,i){var a={},s=WB(e,t,n,i),o=i?"borderLeft":"borderRight";function l(f,h){for(var m=s.nodes(),v=m.pop(),p={};v;)p[v]?f(v):(p[v]=!0,m.push(v),m=m.concat(h(v))),v=m.pop()}function u(f){a[f]=s.inEdges(f).reduce(function(h,m){return Math.max(h,a[m.v]+s.edge(m))},0)}function c(f){var h=s.outEdges(f).reduce(function(v,p){return Math.min(v,a[p.w]-s.edge(p))},Number.POSITIVE_INFINITY),m=e.node(f);h!==Number.POSITIVE_INFINITY&&m.borderType!==o&&(a[f]=Math.max(a[f],h))}return l(u,s.predecessors.bind(s)),l(c,s.successors.bind(s)),ee.forEach(r,function(f){a[f]=a[n[f]]}),a}function WB(e,t,n,r){var i=new qB,a=e.graph(),s=XB(a.nodesep,a.edgesep,r);return ee.forEach(t,function(o){var l;ee.forEach(o,function(u){var c=n[u];if(i.setNode(c),l){var f=n[l],h=i.edge(f,c);i.setEdge(f,c,Math.max(s(e,u,l),h||0))}l=u})}),i}function KB(e,t){return ee.minBy(ee.values(t),function(n){var r=Number.NEGATIVE_INFINITY,i=Number.POSITIVE_INFINITY;return ee.forIn(n,function(a,s){var o=ZB(e,s)/2;r=Math.max(a+o,r),i=Math.min(a-o,i)}),r-i})}function YB(e,t){var n=ee.values(t),r=ee.min(n),i=ee.max(n);ee.forEach(["u","d"],function(a){ee.forEach(["l","r"],function(s){var o=a+s,l=e[o],u;if(l!==t){var c=ee.values(l);u=s==="l"?r-ee.min(c):i-ee.max(c),u&&(e[o]=ee.mapValues(l,function(f){return f+u}))}})})}function QB(e,t){return ee.mapValues(e.ul,function(n,r){if(t)return e[t.toLowerCase()][r];var i=ee.sortBy(ee.map(e,r));return(i[1]+i[2])/2})}function JB(e){var t=FB.buildLayerMatrix(e),n=ee.merge($B(e,t),BB(e,t)),r={},i;ee.forEach(["u","d"],function(s){i=s==="u"?t:ee.values(t).reverse(),ee.forEach(["l","r"],function(o){o==="r"&&(i=ee.map(i,function(f){return ee.values(f).reverse()}));var l=(s==="u"?e.predecessors:e.successors).bind(e),u=GB(e,i,n,l),c=HB(e,i,u.root,u.align,o==="r");o==="r"&&(c=ee.mapValues(c,function(f){return-f})),r[s+o]=c})});var a=KB(e,r);return YB(r,a),QB(r,e.graph().align)}function XB(e,t,n){return function(r,i,a){var s=r.node(i),o=r.node(a),l=0,u;if(l+=s.width/2,ee.has(s,"labelpos"))switch(s.labelpos.toLowerCase()){case"l":u=-s.width/2;break;case"r":u=s.width/2;break}if(u&&(l+=n?u:-u),u=0,l+=(s.dummy?t:e)/2,l+=(o.dummy?t:e)/2,l+=o.width/2,ee.has(o,"labelpos"))switch(o.labelpos.toLowerCase()){case"l":u=o.width/2;break;case"r":u=-o.width/2;break}return u&&(l+=n?u:-u),u=0,l}}function ZB(e,t){return e.node(t).width}var qa=Te,GN=kt,e4=VB.positionX,t4=n4;function n4(e){e=GN.asNonCompoundGraph(e),r4(e),qa.forEach(e4(e),function(t,n){e.node(n).x=t})}function r4(e){var t=GN.buildLayerMatrix(e),n=e.graph().ranksep,r=0;qa.forEach(t,function(i){var a=qa.max(qa.map(i,function(s){return e.node(s).height}));qa.forEach(i,function(s){e.node(s).y=r+a/2}),r+=a+n})}var se=Te,vk=WV,yk=c$,i4=I$,a4=kt.normalizeRanks,s4=q$,o4=kt.removeEmptyRanks,bk=B$,l4=K$,xk=Q$,u4=DB,c4=t4,vr=kt,d4=sn.Graph,f4=h4;function h4(e,t){var n=t&&t.debugTiming?vr.time:vr.notime;n("layout",function(){var r=n("  buildLayoutGraph",function(){return k4(e)});n("  runLayout",function(){p4(r,n)}),n("  updateInputGraph",function(){m4(e,r)})})}function p4(e,t){t("    makeSpaceForEdgeLabels",function(){C4(e)}),t("    removeSelfEdges",function(){I4(e)}),t("    acyclic",function(){vk.run(e)}),t("    nestingGraph.run",function(){bk.run(e)}),t("    rank",function(){i4(vr.asNonCompoundGraph(e))}),t("    injectEdgeLabelProxies",function(){E4(e)}),t("    removeEmptyRanks",function(){o4(e)}),t("    nestingGraph.cleanup",function(){bk.cleanup(e)}),t("    normalizeRanks",function(){a4(e)}),t("    assignRankMinMax",function(){j4(e)}),t("    removeEdgeLabelProxies",function(){T4(e)}),t("    normalize.run",function(){yk.run(e)}),t("    parentDummyChains",function(){s4(e)}),t("    addBorderSegments",function(){l4(e)}),t("    order",function(){u4(e)}),t("    insertSelfEdges",function(){D4(e)}),t("    adjustCoordinateSystem",function(){xk.adjust(e)}),t("    position",function(){c4(e)}),t("    positionSelfEdges",function(){O4(e)}),t("    removeBorderNodes",function(){A4(e)}),t("    normalize.undo",function(){yk.undo(e)}),t("    fixupEdgeLabelCoords",function(){P4(e)}),t("    undoCoordinateSystem",function(){xk.undo(e)}),t("    translateGraph",function(){N4(e)}),t("    assignNodeIntersects",function(){M4(e)}),t("    reversePoints",function(){R4(e)}),t("    acyclic.undo",function(){vk.undo(e)})}function m4(e,t){se.forEach(e.nodes(),function(n){var r=e.node(n),i=t.node(n);r&&(r.x=i.x,r.y=i.y,t.children(n).length&&(r.width=i.width,r.height=i.height))}),se.forEach(e.edges(),function(n){var r=e.edge(n),i=t.edge(n);r.points=i.points,se.has(i,"x")&&(r.x=i.x,r.y=i.y)}),e.graph().width=t.graph().width,e.graph().height=t.graph().height}var g4=["nodesep","edgesep","ranksep","marginx","marginy"],v4={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},y4=["acyclicer","ranker","rankdir","align"],b4=["width","height"],x4={width:0,height:0},w4=["minlen","weight","width","height","labeloffset"],S4={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},_4=["labelpos"];function k4(e){var t=new d4({multigraph:!0,compound:!0}),n=Wp(e.graph());return t.setGraph(se.merge({},v4,Hp(n,g4),se.pick(n,y4))),se.forEach(e.nodes(),function(r){var i=Wp(e.node(r));t.setNode(r,se.defaults(Hp(i,b4),x4)),t.setParent(r,e.parent(r))}),se.forEach(e.edges(),function(r){var i=Wp(e.edge(r));t.setEdge(r,se.merge({},S4,Hp(i,w4),se.pick(i,_4)))}),t}function C4(e){var t=e.graph();t.ranksep/=2,se.forEach(e.edges(),function(n){var r=e.edge(n);r.minlen*=2,r.labelpos.toLowerCase()!=="c"&&(t.rankdir==="TB"||t.rankdir==="BT"?r.width+=r.labeloffset:r.height+=r.labeloffset)})}function E4(e){se.forEach(e.edges(),function(t){var n=e.edge(t);if(n.width&&n.height){var r=e.node(t.v),i=e.node(t.w),a={rank:(i.rank-r.rank)/2+r.rank,e:t};vr.addDummyNode(e,"edge-proxy",a,"_ep")}})}function j4(e){var t=0;se.forEach(e.nodes(),function(n){var r=e.node(n);r.borderTop&&(r.minRank=e.node(r.borderTop).rank,r.maxRank=e.node(r.borderBottom).rank,t=se.max(t,r.maxRank))}),e.graph().maxRank=t}function T4(e){se.forEach(e.nodes(),function(t){var n=e.node(t);n.dummy==="edge-proxy"&&(e.edge(n.e).labelRank=n.rank,e.removeNode(t))})}function N4(e){var t=Number.POSITIVE_INFINITY,n=0,r=Number.POSITIVE_INFINITY,i=0,a=e.graph(),s=a.marginx||0,o=a.marginy||0;function l(u){var c=u.x,f=u.y,h=u.width,m=u.height;t=Math.min(t,c-h/2),n=Math.max(n,c+h/2),r=Math.min(r,f-m/2),i=Math.max(i,f+m/2)}se.forEach(e.nodes(),function(u){l(e.node(u))}),se.forEach(e.edges(),function(u){var c=e.edge(u);se.has(c,"x")&&l(c)}),t-=s,r-=o,se.forEach(e.nodes(),function(u){var c=e.node(u);c.x-=t,c.y-=r}),se.forEach(e.edges(),function(u){var c=e.edge(u);se.forEach(c.points,function(f){f.x-=t,f.y-=r}),se.has(c,"x")&&(c.x-=t),se.has(c,"y")&&(c.y-=r)}),a.width=n-t+s,a.height=i-r+o}function M4(e){se.forEach(e.edges(),function(t){var n=e.edge(t),r=e.node(t.v),i=e.node(t.w),a,s;n.points?(a=n.points[0],s=n.points[n.points.length-1]):(n.points=[],a=i,s=r),n.points.unshift(vr.intersectRect(r,a)),n.points.push(vr.intersectRect(i,s))})}function P4(e){se.forEach(e.edges(),function(t){var n=e.edge(t);if(se.has(n,"x"))switch((n.labelpos==="l"||n.labelpos==="r")&&(n.width-=n.labeloffset),n.labelpos){case"l":n.x-=n.width/2+n.labeloffset;break;case"r":n.x+=n.width/2+n.labeloffset;break}})}function R4(e){se.forEach(e.edges(),function(t){var n=e.edge(t);n.reversed&&n.points.reverse()})}function A4(e){se.forEach(e.nodes(),function(t){if(e.children(t).length){var n=e.node(t),r=e.node(n.borderTop),i=e.node(n.borderBottom),a=e.node(se.last(n.borderLeft)),s=e.node(se.last(n.borderRight));n.width=Math.abs(s.x-a.x),n.height=Math.abs(i.y-r.y),n.x=a.x+n.width/2,n.y=r.y+n.height/2}}),se.forEach(e.nodes(),function(t){e.node(t).dummy==="border"&&e.removeNode(t)})}function I4(e){se.forEach(e.edges(),function(t){if(t.v===t.w){var n=e.node(t.v);n.selfEdges||(n.selfEdges=[]),n.selfEdges.push({e:t,label:e.edge(t)}),e.removeEdge(t)}})}function D4(e){var t=vr.buildLayerMatrix(e);se.forEach(t,function(n){var r=0;se.forEach(n,function(i,a){var s=e.node(i);s.order=a+r,se.forEach(s.selfEdges,function(o){vr.addDummyNode(e,"selfedge",{width:o.label.width,height:o.label.height,rank:s.rank,order:a+ ++r,e:o.e,label:o.label},"_se")}),delete s.selfEdges})})}function O4(e){se.forEach(e.nodes(),function(t){var n=e.node(t);if(n.dummy==="selfedge"){var r=e.node(n.e.v),i=r.x+r.width/2,a=r.y,s=n.x-i,o=r.height/2;e.setEdge(n.e,n.label),e.removeNode(t),n.label.points=[{x:i+2*s/3,y:a-o},{x:i+5*s/6,y:a-o},{x:i+s,y:a},{x:i+5*s/6,y:a+o},{x:i+2*s/3,y:a+o}],n.label.x=n.x,n.label.y=n.y}})}function Hp(e,t){return se.mapValues(se.pick(e,t),Number)}function Wp(e){var t={};return se.forEach(e,function(n,r){t[r.toLowerCase()]=n}),t}var lo=Te,L4=kt,q4=sn.Graph,F4={debugOrdering:V4};function V4(e){var t=L4.buildLayerMatrix(e),n=new q4({compound:!0,multigraph:!0}).setGraph({});return lo.forEach(e.nodes(),function(r){n.setNode(r,{label:r}),n.setParent(r,"layer"+e.node(r).rank)}),lo.forEach(e.edges(),function(r){n.setEdge(r.v,r.w,{},r.name)}),lo.forEach(t,function(r,i){var a="layer"+i;n.setNode(a,{rank:"same"}),lo.reduce(r,function(s,o){return n.setEdge(s,o,{style:"invis"}),o})}),n}var $4="0.8.5",B4={graphlib:sn,layout:f4,debug:F4,util:{time:kt.time,notime:kt.notime},version:$4};const wk=Pk(B4),Sk=new Map;function z4(e,t){const n=e.map(i=>i.id).join("|"),r=t.map(i=>`${i.source}->${i.target}`).join("|");return`${e.length}:${t.length}:${n}:${r}`}function U4(e,t,n){if(n){const r=z4(e,t),i=Sk.get(n);if(i&&i.signature===r)return i.layout;const a=_k(e,t);return Sk.set(n,{signature:r,layout:a}),a}return _k(e,t)}function _k(e,t){if(e.length>2500){const r=Math.ceil(Math.sqrt(e.length));return e.map((i,a)=>{const s=Math.floor(a/r),o=a%r;return{id:i.id,position:{x:o*260,y:s*160}}})}const n=new wk.graphlib.Graph;return n.setGraph({rankdir:"LR",nodesep:48,ranksep:80}),n.setDefaultEdgeLabel(()=>({})),e.forEach(r=>{n.setNode(r.id,{width:220,height:120})}),t.forEach(r=>{n.setEdge(r.source,r.target)}),wk.layout(n),e.map(r=>{const i=n.node(r.id);return{id:r.id,position:{x:i.x-i.width/2,y:i.y-i.height/2}}})}function G4(e){const t=new Map;for(const r of e)r.type==="tool_call"&&r.toolCallId&&t.set(r.toolCallId,r.id);const n=[];for(const r of e)if(!(r.type!=="llm_call"||!r.io)){for(const i of r.io.emittedToolCallIds??[]){const a=t.get(i);a&&n.push({id:`io_emit_${r.id}_${a}`,source:r.id,target:a,kind:"io",toolCallId:i})}for(const i of r.io.consumedToolCallIds??[]){const a=t.get(i);a&&n.push({id:`io_consume_${a}_${r.id}`,source:a,target:r.id,kind:"io",toolCallId:i})}}return n}function H4(e,t,n){const{intervals:r}=_l(e,t,n),i=new Set;return r.forEach(a=>{i.add(a.startMs),i.add(a.endMs)}),Array.from(i).sort((a,s)=>a-s)}function W4(e,t,n){if(!e.length)return null;if(n===1){for(const r of e)if(r>t+1)return r;return e[e.length-1]}for(let r=e.length-1;r>=0;r-=1){const i=e[r];if(i<t-1)return i}return e[0]}const K4=300,Y4=2e3,Q4=1.5;function J4(e){const t=K4*Math.pow(Q4,Math.max(0,e));return Math.min(Y4,Math.round(t))}function Yn(e,t){if(!e)return t;try{return JSON.parse(e)}catch{return t}}function kk(e,t){const n=new Map;return[...e,...t].forEach(r=>{const i=n.get(r.id);(!i||r.updatedAt>=i.updatedAt)&&n.set(r.id,r)}),Array.from(n.values()).sort((r,i)=>r.createdAt-i.createdAt)}function Ck(e,t=50){return[...e].sort((n,r)=>r.timestamp-n.timestamp).slice(0,t)}const Ek=220,jk=120,cg="agentDirector.presence.v1",X4=2e4,Z4=5e3,fi="agentDirector.collab.cursors.v1",Kp="agentDirector.collab.annotations.v1",Yp="agentDirector.collab.activity.v1",ez=S.lazy(()=>av(()=>import("./index-B570_Gdt.js"),__vite__mapDeps([0,1]))),tz=S.lazy(()=>av(()=>import("./index-KDQRPFkZ.js"),[])),nz=S.lazy(()=>av(()=>import("./index-Du-_6BRc.js"),[]));function uo(){return`scenario-${Math.random().toString(36).slice(2,9)}`}function rz(e){return e.filter(t=>t.parentStepId).map(t=>({source:t.parentStepId,target:t.id}))}function iz(e){const t=[...e].sort((n,r)=>n.index-r.index);return t.slice(1).map((n,r)=>({source:t[r].id,target:n.id}))}function az(e){const t={},n=e.getBoundingClientRect();return e.querySelectorAll(".step-card").forEach(i=>{const a=i.dataset.stepId;if(!a)return;const s=i.getBoundingClientRect();t[a]={left:s.left-n.left,top:s.top-n.top,width:s.width,height:s.height}}),t}function sz(e,t,n){const r=[...rz(e),...iz(e),...G4(e).map(v=>({source:v.source,target:v.target}))],i=U4(e,r,n),a=t.getBoundingClientRect(),s=Math.min(...i.map(v=>v.position.x)),o=Math.min(...i.map(v=>v.position.y)),l=Math.max(...i.map(v=>v.position.x)),u=Math.max(...i.map(v=>v.position.y)),c=l-s+Ek,f=u-o+jk,h=Math.max(32,(a.width-c)/2),m=Math.max(24,(a.height-f)/2);return i.reduce((v,p)=>(v[p.id]={left:p.position.x-s+h,top:p.position.y-o+m,width:Ek,height:jk},v),{})}function Tk(e,t,n){const r=t.trim().toLowerCase();return e.filter(i=>{var s,o,l;return n!=="all"&&i.type!==n?!1:r?[i.name,(s=i.preview)==null?void 0:s.title,(o=i.preview)==null?void 0:o.outputPreview,(l=i.preview)==null?void 0:l.inputPreview].filter(Boolean).join(" ").toLowerCase().includes(r):!0})}function oz(e,t,n){var u;const r=e.profiles[t]??e.profiles[((u=e.players[0])==null?void 0:u.player_id)??""]??Object.values(e.profiles)[0],i=e.players.reduce((c,f)=>(c[f.player_id]=f.role,c),{}),a=Object.entries(e.narrative.nodes).map(([c,f])=>({id:c,title:f.title,body:f.title,choices:f.choices.map(h=>({id:h.id,label:h.id,nextNodeId:h.next,tensionDelta:h.tension,mutator:h.modifier}))})),s=e.pvp.winner??null,l=e.telemetry.failures>0?"failure":s?"success":"mixed";return{seed:e.seed,raid:{party:e.players.map(c=>c.player_id),roles:i,objectives:e.raid.objectives.map(c=>({id:c.id,label:c.label,progress:c.progress,target:c.target,completed:c.completed})),completed:e.raid.completed},campaign:{depth:e.campaign.depth,lives:e.campaign.lives,currentMission:{id:e.campaign.current_mission.id,title:e.campaign.current_mission.title,difficulty:e.campaign.current_mission.difficulty,hazards:e.campaign.current_mission.hazards,rewardCredits:e.campaign.current_mission.reward_tokens},completedMissionIds:e.campaign.completed_missions,mutators:[...e.campaign.modifiers,...e.campaign.unlocked_modifiers]},narrative:{currentNodeId:e.narrative.current_node_id,nodes:a.length>0?a:n.narrative.nodes,history:e.narrative.history.map(c=>({nodeId:c.node_id,choiceId:c.choice_id})),tension:e.narrative.tension},skills:{points:(r==null?void 0:r.skill_points)??n.skills.points,nodes:n.skills.nodes.map(c=>({...c,unlocked:!!(r!=null&&r.unlocked_skills.includes(c.id))})),loadout:{capacity:(r==null?void 0:r.loadout_capacity)??n.skills.loadout.capacity,equipped:(r==null?void 0:r.loadout)??[]}},pvp:{round:e.pvp.round,stability:e.pvp.operator_stability,sabotage:e.pvp.sabotage_pressure,fog:e.pvp.fog,winner:s},time:{activeForkId:e.time.active_fork_id,forks:e.time.forks.map(c=>({id:c.id,label:c.label,playheadMs:c.playhead_ms,history:c.history}))},boss:{name:e.boss.name,phase:e.boss.phase,hp:e.boss.hp,maxHp:e.boss.max_hp,enraged:e.boss.enraged},director:{risk:e.director.risk,hint:e.director.hint,recommendedModifier:e.director.hazard_bias,lastOutcome:l},economy:{credits:e.economy.tokens,materials:e.economy.materials,crafted:e.economy.crafted},guild:{name:e.guild.guild_id??"Trace Guild",members:e.players.length,operationsScore:e.guild.operations_score,eventsCompleted:e.guild.events_completed},cinematic:{queue:e.cinematic.events.map(c=>({id:c.id,type:c.type==="critical"||c.type==="success"||c.type==="warning"||c.type==="twist"?c.type:"warning",message:c.message,intensity:c.intensity||1,at:Date.parse(c.at)||Date.now()}))},liveops:{season:e.liveops.season,week:e.liveops.week,challenge:{id:e.liveops.challenge.id,title:e.liveops.challenge.title,goal:e.liveops.challenge.goal,progress:e.liveops.challenge.progress,rewardCredits:e.liveops.challenge.reward,completed:e.liveops.challenge.completed}}}}function lz(){const e=window.sessionStorage.getItem("agentDirector.sessionId");if(e)return e;const t=`session-${Math.random().toString(36).slice(2,10)}`;return window.sessionStorage.setItem("agentDirector.sessionId",t),t}function Nk(){try{const e=window.localStorage.getItem(cg);if(!e)return{};const t=JSON.parse(e),n={};return Object.entries(t).forEach(([r,i])=>{typeof i=="number"&&(n[r]=i)}),n}catch{return{}}}function Mk(e,t=Date.now()){return Object.fromEntries(Object.entries(e).filter(([,n])=>t-n<X4))}function uz(){var ky;const{trace:e,insights:t,loading:n,error:r,reload:i,traces:a,selectedTraceId:s,setSelectedTraceId:o}=Hq(),[l,u]=ze("agentDirector.mode","cinema"),[c,f]=S.useState(""),h=S.useDeferredValue(c),[m,v]=S.useState("all"),[p,x]=S.useState(""),[g,y]=S.useState(null),[b,_]=S.useState(null),[C,E]=S.useState(null),[j,T]=S.useState([]),[P,O]=S.useState(""),[A,W]=S.useState(null),[J,me]=S.useState(!1),[B,le]=S.useState(null),[ne,D]=ze("agentDirector.safeExport",!1),[I,F]=ze("agentDirector.syncPlayback",!0),[V,te]=S.useState(null),[M,K]=S.useState(!1),[ue,ye]=S.useState(0),[Je,at]=ze("agentDirector.speed",1),[ht,Ot]=ze("agentDirector.windowed",!1),[bn,Bn]=S.useState(2e4),[$,ie]=S.useState(!1),[Z,Ve]=S.useState(!1),[ae,Ae]=ze("agentDirector.overlayEnabled",!1),[Yt,_r]=ze("agentDirector.onboarded",!1),[,Ct]=ze("agentDirector.tourCompleted",!1),[He,we]=ze("agentDirector.explainMode",!0),[Lt,on]=ze("agentDirector.heroDismissed",!1),[ra,zn]=ze("agentDirector.dockOpen",!1),[ge,ei]=ze("agentDirector.introPersona","builder"),[ln,ti]=ze("agentDirector.themeMode","studio"),[_e,yt]=ze("agentDirector.timelineLaneStrategy","type"),[N,z]=ze("agentDirector.timelineStudioConfig",Sa),[H,U]=ze("agentDirector.missions",{playback:!1,flow:!1,inspect:!1,matrix:!1,replay:!1,annotate:!1,collaborate:!1}),be=!1,[$e,he]=ze("agentDirector.introDismissed",be),[st,Xe]=S.useState(!1),[ce,ni]=S.useState(null),[kr,ia]=S.useState([]),[aa,Yl]=S.useState(null),[HN,oy]=S.useState(null),[Ql,Jl]=S.useState(""),[WN,ri]=S.useState([{id:uo(),name:"Prompt tighter",strategy:"hybrid",modificationsText:'{"prompt":"Return concise response"}'},{id:uo(),name:"Recorded baseline",strategy:"recorded",modificationsText:"{}"}]),[sa,Xl]=S.useState(null),[qt,ly]=S.useState(null),[KN,Ds]=S.useState(!1),[YN,oa]=S.useState(null),[QN,la]=ze("agentDirector.gameplayState.v1",W0("bootstrap")),[uy,cy]=ze("agentDirector.gameplayTraceId.v1",""),[Cr]=ze("agentDirector.gameplayPlayerId.v1",`player-${Math.random().toString(36).slice(2,8)}`),[Er,ii]=ze("agentDirector.gameplaySessionId.v1",""),[Be,Un]=S.useState(null),[JN,Ie]=S.useState(null),[XN,ai]=S.useState(null),[Zl,dy]=S.useState(1),[ZN,eu]=S.useState(null),[fy,tu]=S.useState({}),[hy,nu]=S.useState([]),[eM,ru]=S.useState([]),[ua,iu]=S.useState(800),[tM,nM]=S.useState(0),au=S.useRef(null),py=S.useRef(null),si=S.useRef(lz()),my=S.useRef(0),gy=S.useRef(0),su=S.useRef(!1),Gn=S.useMemo(()=>{if(!e)return[];const w=performance.now(),k=Tk(e.steps,h,m);return gy.current=performance.now()-w,k},[e,h,m]),ou=S.useMemo(()=>Gn.slice(0,Math.min(Gn.length,ua)),[ua,Gn]),vy=S.useMemo(()=>{if(!g)return ou;const w=new Set(g.matchedStepIds);return ou.filter(k=>w.has(k.id))},[ou,g]),rM=S.useMemo(()=>V?Tk(V.steps,h,m).slice(0,Math.min(V.steps.length,ua)):[],[V,h,m,ua]),yy=S.useMemo(()=>e?H4(e.startedAt,e.endedAt,e.steps):[],[e]),iM=S.useMemo(()=>!e||!V?null:TT(e,V),[e,V]),by=S.useMemo(()=>e?e.steps.find(w=>w.id===B)??null:null,[e,B]),ca=S.useMemo(()=>e?AA(e.steps,_e):[],[e,_e]),oi=S.useMemo(()=>{const w=N[_e]??Sa[_e];return D0(ca,w.order,w.hidden)},[ca,_e,N]),aM=S.useMemo(()=>oi.order.filter(w=>!oi.hidden.includes(w)),[oi.hidden,oi.order]),Os=S.useMemo(()=>{const w=si.current;return Object.values(fy).filter(k=>k.sessionId!==w).filter(k=>k.traceId===((e==null?void 0:e.id)??"none")).sort((k,R)=>R.updatedAt-k.updatedAt)},[fy,e==null?void 0:e.id]),sM=S.useMemo(()=>Os.map(w=>w.playheadMs),[Os]),oM=S.useMemo(()=>hy.filter(w=>w.traceId===(e==null?void 0:e.id)),[hy,e==null?void 0:e.id]),lM=S.useMemo(()=>{const w=Object.keys(H).length,k=Object.values(H).filter(Boolean).length;return{done:k,total:w,pct:w>0?Math.round(k/w*100):0}},[H]);S.useEffect(()=>{e&&e.id!==uy&&(la(W0(e.id)),cy(e.id))},[uy,la,cy,e]),S.useEffect(()=>{let w=!1;if(!Er){Un(null);return}return gx().then(k=>{w||(Un(k),k||Ie("Gameplay session not found."))}),()=>{w=!0}},[Er]),S.useEffect(()=>{if(!Er)return;const w=Gq();return()=>w()},[Er]),S.useEffect(()=>{Be&&la(w=>oz(Be,Cr,w))},[Cr,Be,la]),S.useEffect(()=>{let w=!1;if(!(Be==null?void 0:Be.guild.guild_id)){ai(null);return}return $q().then(R=>{w||ai(R)}),()=>{w=!0}},[Be==null?void 0:Be.guild.guild_id]),S.useEffect(()=>{y(null),_(null)},[e==null?void 0:e.id]),S.useEffect(()=>{nM(Math.round(gy.current))},[Gn]),S.useEffect(()=>{if(!e)return;const w=Gn.length;if(w<=1200){iu(w);return}iu(800);const k=window.setInterval(()=>{iu(R=>R>=w?(window.clearInterval(k),w):Math.min(w,R+1e3))},70);return()=>window.clearInterval(k)},[Gn.length,e]),S.useEffect(()=>{let w=!1;if(!(e!=null&&e.id)){E(null);return}return Nq(e.id).then(k=>{w||E(k)}),()=>{w=!0}},[e==null?void 0:e.id]),S.useEffect(()=>{let w=!1;return Mq().then(k=>{w||(T(k),!P&&k.length>0&&O(k[0].id))}),()=>{w=!0}},[P]),S.useEffect(()=>{py.current=V},[V]),S.useEffect(()=>(document.body.dataset.theme=ln,()=>{delete document.body.dataset.theme}),[ln]),S.useEffect(()=>{const w=si.current,k=(re=!1)=>{const Oe=Date.now(),wn=Mk(Nk(),Oe);re?delete wn[w]:wn[w]=Oe,window.localStorage.setItem(cg,JSON.stringify(wn)),dy(Math.max(1,Object.keys(wn).length))},R=()=>{const re=Mk(Nk(),Date.now());dy(Math.max(1,Object.keys(re).length))};k();const q=window.setInterval(()=>k(),Z4),Q=re=>{re.key===cg&&R()},X=()=>{document.visibilityState==="visible"&&k()},oe=()=>k(!0);return window.addEventListener("storage",Q),document.addEventListener("visibilitychange",X),window.addEventListener("beforeunload",oe),()=>{window.clearInterval(q),k(!0),window.removeEventListener("storage",Q),document.removeEventListener("visibilitychange",X),window.removeEventListener("beforeunload",oe)}},[]),S.useEffect(()=>{l==="compare"&&zn(!1)},[l,zn]),S.useEffect(()=>{ca.length!==0&&z(w=>{const k=w[_e]??Sa[_e],R=D0(ca,k.order,k.hidden);return R.order.join("|")===k.order.join("|")&&R.hidden.join("|")===k.hidden.join("|")?w:{...w,[_e]:R}})},[ca,_e,z]),S.useEffect(()=>{tu(Yn(window.localStorage.getItem(fi),{})),nu(Yn(window.localStorage.getItem(Kp),[])),ru(Yn(window.localStorage.getItem(Yp),[]))},[]),S.useEffect(()=>{const w=Date.now();if(w-my.current<120&&M)return;my.current=w;const k=si.current,R={sessionId:k,traceId:(e==null?void 0:e.id)??"none",mode:l,playheadMs:Math.round(ue),selectedStepId:B,updatedAt:w},Q={...Yn(window.localStorage.getItem(fi),{}),[k]:R};window.localStorage.setItem(fi,JSON.stringify(Q)),tu(Q)},[M,l,ue,B,e==null?void 0:e.id]),S.useEffect(()=>{const w=si.current;return()=>{const k=Yn(window.localStorage.getItem(fi),{});if(!k[w])return;const R={...k};delete R[w],window.localStorage.setItem(fi,JSON.stringify(R))}},[]),S.useEffect(()=>{const w=k=>{if(k.key===fi&&tu(Yn(k.newValue,{})),k.key===Kp){const R=Yn(k.newValue,[]);nu(q=>kk(q,R))}k.key===Yp&&ru(Ck(Yn(k.newValue,[])))};return window.addEventListener("storage",w),()=>window.removeEventListener("storage",w)},[]);const de=S.useCallback(w=>{const k={id:`activity-${Math.random().toString(36).slice(2,9)}`,sessionId:si.current,message:w,timestamp:Date.now()};ru(R=>{const q=Ck([k,...R]);return window.localStorage.setItem(Yp,JSON.stringify(q)),q})},[]),xn=S.useCallback(async w=>{if(!e)return;const k=await Rq(e.id,w,"hybrid",{note:"UI replay"},e);k&&(te(k),Ae(!0),u("flow"),U(R=>R.replay?R:{...R,replay:!0}),de(`Created replay from ${w}`))},[de,U,e,te,u,Ae]),uM=S.useCallback(async()=>{if(!e)return;if(!p.trim()){y(null),_(null);return}const w=await Tq(e.id,p.trim());if(!w){_("TraceQL query failed"),y(null);return}y(w),_(null);const k=w.matchedStepIds[0];k&&(le(k),l!=="cinema"&&u("cinema"))},[l,u,e,p]),cM=S.useCallback(async()=>{if(!e||!P)return;me(!0);const w=await Pq(P,e.id);me(!1),w&&W(w.result)},[P,e]),un=S.useCallback(()=>{if(!e)return;const w=[...e.steps].sort((k,R)=>(R.durationMs??0)-(k.durationMs??0))[0];w&&(le(w.id),u("cinema"))},[e,u]),xy=S.useCallback(()=>{if(!e||e.steps.length===0)return null;const w=[...e.steps].sort((k,R)=>(R.durationMs??0)-(k.durationMs??0))[0];return(w==null?void 0:w.id)??null},[e]),da=S.useCallback(()=>{if(!e)return;const w=e.steps.find(k=>k.status==="failed");w&&(le(w.id),u("cinema"))},[e,u]),dM=S.useCallback(async()=>{if(!e)return;const w=new URL(window.location.href);w.searchParams.set("trace",s??e.id),w.searchParams.set("mode",l),B?w.searchParams.set("step",B):w.searchParams.delete("step");try{await navigator.clipboard.writeText(w.toString()),eu("Live link copied")}catch{window.prompt("Copy live session link",w.toString()),eu("Live link ready")}window.setTimeout(()=>eu(null),1800)},[l,B,s,e]),fM=S.useCallback(w=>{yt(w),de(`Switched lane strategy to ${w}`)},[de,yt]),hM=S.useCallback(w=>{z(k=>{const R=k[_e]??Sa[_e],q=R.hidden.includes(w)?R.hidden.filter(Q=>Q!==w):[...R.hidden,w];return{...k,[_e]:{...R,hidden:q}}}),de(`Toggled lane visibility for ${w}`)},[de,_e,z]),pM=S.useCallback(async w=>{if(!e)return;const k=await Lq({traceId:e.id,name:w.trim()||"Night Ops"});if(!k){Ie("Failed to create gameplay session.");return}Un(k),ii(k.id),Ie(null),de(`Created gameplay session ${k.id}`)},[de,Cr,ii,e]),mM=S.useCallback(async(w,k,R)=>{if(!w.trim()){Ie("Session id is required.");return}const q=await qq({sessionId:w.trim(),playerId:k.trim()});if(!q){Ie("Failed to join gameplay session.");return}Un(q),ii(q.id),Ie(null),de(`Joined gameplay session ${q.id} as ${k}`)},[de,ii]),gM=S.useCallback(async()=>{if(!Er)return;if(!await Fq()){Ie("Failed to leave gameplay session.");return}Un(null),ii(""),Ie(null),de(`Left gameplay session ${Er}`)},[de,Cr,Er,ii]),vM=S.useCallback(async(w,k)=>{if(!(Be!=null&&Be.id))return;const R=await vx({sessionId:Be.id,expectedVersion:Be.version});if(R.session){Un(R.session),Ie(null),de(`Gameplay action: ${w}`);return}if(R.conflict){const q=await gx(Be.id);q&&Un(q),Ie("Session changed by another player. Synced latest state.");return}Ie(R.error??"Gameplay action failed.")},[de,Cr,Be]),yM=S.useCallback(async(w,k)=>{if(!w.trim()||!k.trim()){Ie("Guild id and name are required.");return}const R=await Vq({guildId:w.trim(),name:k.trim()});if(!R){Ie("Failed to create guild.");return}if(ai(R),Be){const q=await vx({sessionId:Be.id,payload:{guild_id:R.id},expectedVersion:Be.version});q.session&&Un(q.session)}Ie(null),de(`Created guild ${R.id}`)},[de,Cr,Be]),bM=S.useCallback(async(w,k)=>{if(!w.trim()||!k.trim()){Ie("Guild id and player id are required.");return}const R=await Bq(w.trim(),k.trim());if(!R){Ie("Failed to join guild.");return}ai(R),Ie(null),de(`Joined guild ${R.id} as ${k}`)},[de]),xM=S.useCallback(async(w,k,R)=>{if(!w.trim()||!k.trim()||!R.trim()){Ie("Guild id, title, and schedule are required.");return}const q=await zq({guildId:w.trim(),title:k.trim(),scheduledAt:R.trim()});if(!q){Ie("Failed to schedule guild event.");return}ai(q.guild),Ie(null),de(`Scheduled guild event ${q.event.id}`)},[de]),wM=S.useCallback(async(w,k,R)=>{const q=await Uq();if(!q){Ie("Failed to complete guild event.");return}ai(q),Ie(null),de(`Completed guild event ${k}`)},[de]),SM=S.useCallback((w,k)=>{z(R=>{const q=R[_e]??Sa[_e],Q=[...q.order],X=Q.indexOf(w);if(X===-1)return R;const oe=k==="up"?X-1:X+1;if(oe<0||oe>=Q.length)return R;const[re]=Q.splice(X,1);return Q.splice(oe,0,re),{...R,[_e]:{...q,order:Q}}}),de(`Moved lane group ${w} ${k}`)},[de,_e,z]),_M=S.useCallback(()=>{U({playback:!1,flow:!1,inspect:!1,matrix:!1,replay:!1,annotate:!1,collaborate:!1}),de("Reset onboarding missions")},[de,U]),kM=S.useCallback((w,k)=>{if(!e||!w.trim())return;const R=Date.now(),q={id:`annotation-${Math.random().toString(36).slice(2,9)}`,traceId:e.id,stepId:k,body:w.trim(),authorSessionId:si.current,createdAt:R,updatedAt:R};nu(Q=>{const X=kk(Q,[q]);return window.localStorage.setItem(Kp,JSON.stringify(X)),X}),U(Q=>Q.annotate?Q:{...Q,annotate:!0}),de(k?`Added annotation on step ${k}`:"Added trace annotation")},[de,U,e]),CM=S.useCallback((w,k)=>{ri(R=>R.map(q=>q.id===w?{...q,...k}:q))},[]),EM=S.useCallback(w=>{ri(w)},[]),jM=S.useCallback(()=>{ri(w=>[...w,{id:uo(),name:`Scenario ${w.length+1}`,strategy:"hybrid",modificationsText:"{}"}])},[]),TM=S.useCallback(w=>{ri(k=>k.length<=1?k:k.filter(R=>R.id!==w))},[]),NM=S.useCallback(w=>{ri(k=>{const R=k.findIndex(oe=>oe.id===w);if(R===-1)return k;const q=k[R],Q={...q,id:uo(),name:`${q.name} copy`},X=[...k];return X.splice(R+1,0,Q),X})},[]),MM=S.useCallback((w,k)=>{ri(R=>{const q=R.findIndex(re=>re.id===w);if(q===-1)return R;const Q=k==="up"?q-1:q+1;if(Q<0||Q>=R.length)return R;const X=[...R],[oe]=X.splice(q,1);return X.splice(Q,0,oe),X})},[]),PM=S.useCallback(async w=>{var R;if(!e)return;const k=Ql||B||((R=e.steps[0])==null?void 0:R.id);if(!k){oa("Select an anchor step before running the matrix.");return}try{Ds(!0),oa(null);const q=await Aq({traceId:e.id,stepId:k,scenarios:w});if(!q)throw new Error("Failed to create replay job.");Xl(q);let Q=q;for(let oe=0;oe<30&&!(Q.status!=="queued"&&Q.status!=="running");oe+=1){const re=J4(oe);await new Promise(wn=>window.setTimeout(wn,re));const Oe=await Iq(q.id);if(!Oe)break;Q=Oe,Xl(Oe)}const X=await mx(q.id);if(!X)throw new Error("Replay job finished but matrix summary is unavailable.");ly(X),u("matrix"),de(`Ran matrix with ${w.length} scenario(s) from ${k}`)}catch(q){oa(q instanceof Error?q.message:"Failed to run replay matrix.")}finally{Ds(!1)}},[de,Ql,B,e,u]),RM=S.useCallback(async()=>{if(sa){Ds(!0);try{const w=await Dq(sa.id);if(!w){oa("Failed to cancel replay job.");return}Xl(w);const k=await mx(w.id);k&&ly(k),de(`Canceled matrix job ${sa.id}`)}finally{Ds(!1)}}},[de,sa]),AM=S.useCallback(async w=>{const k=await NT();if(!(k!=null&&k.trace)){oa("Could not load replay trace for compare view.");return}te(k.trace),Ae(!0),u("compare"),de(`Opened matrix compare trace ${w}`)},[de,u,Ae]),De=S.useCallback(w=>{if(!(w===l||!e)){if((w==="flow"||w==="matrix"||w==="gameplay")&&K(!1),w==="flow"&&l==="cinema"&&au.current){const k=au.current,R=az(k),q=sz(e.steps,k,e.id);oy({steps:e.steps,fromRects:R,toRects:q}),de("Morphed cinema to flow");return}u(w),de(`Switched mode to ${w}`)}},[de,l,e,K,u]),lu=S.useCallback(()=>{l==="flow"&&De("cinema"),K(w=>!w)},[l,De]),Hn=S.useCallback(()=>{ni(null),ia([]),Yl(null),K(!1)},[K]),wy=S.useCallback(w=>[{id:"setup",label:"Opening the reel",duration:1100,action:()=>{we(!0),K(!1),ye(0),le(null),Ae(!1),at(1),e&&e.steps.length<500&&Ot(!1),De("cinema")}},{id:"pace",label:"Pacing the timeline",duration:2200,action:()=>{De("cinema"),K(!0),at(1.1)}},{id:"bottleneck",label:"Freeze on the bottleneck",duration:1600,action:()=>{K(!1),un()}},{id:"inspect",label:"Inspect the moment",duration:1600,action:()=>{w&&le(w)}},{id:"flow",label:"Morph into flow",duration:2100,action:()=>{De("flow")}},{id:"replay",label:"Directors Cut replay",duration:2200,action:async()=>{if(!e)return;!py.current&&w&&await xn(w),Ae(!0),u("compare")}},{id:"compare",label:"Compare the cut",duration:2e3,action:()=>{K(!0),at(1)}},{id:"finale",label:"Final frame",duration:1100,action:()=>{K(!1)}}],[De,xn,un,we,K,u,Ae,ye,le,at,Ot,e]),li=S.useCallback(()=>{var k;if(!e)return;const w=B??xy()??((k=e.steps[0])==null?void 0:k.id)??null;ia(wy(w)),ni({active:!0,step:0}),Yl(e.id),Xe(!1),ie(!1),Ve(!1)},[wy,xy,B,e,Ve,ie,ia,ni,Yl,Xe]),fa=S.useCallback(()=>{if(ce!=null&&ce.active){Hn();return}li()},[li,Hn,ce==null?void 0:ce.active]),IM=S.useMemo(()=>{const k=[{id:"header",title:"Mission control",body:`Confirm run status and metadata. ${{builder:"Focus on payload flow, tool-call sequencing, and replay-ready steps.",executive:"Focus on bottlenecks, risk signals, and run-level outcome changes.",operator:"Focus on failure patterns, retries, and runtime reliability posture."}[ge]}`,target:'[data-tour="header"]',placement:"bottom"}];return Lt||k.push({id:"hero",title:"Director briefing",body:"Choose Tour, Story mode, or Explain to ramp up quickly.",target:'[data-tour="hero"]',placement:"bottom"}),k.push({id:"insights",title:"Fast diagnosis",body:ge==="executive"?"Jump straight to bottlenecks and high-cost segments for fast executive readouts.":ge==="operator"?"Jump to failures and retries first, then inspect impacted steps.":"Jump straight to bottlenecks, errors, and high-cost steps with one click.",target:'[data-tour="insights"]',placement:"bottom"},{id:"journey",title:"Director journey",body:"A narrative path that teaches how to watch, inspect, and direct a better run.",target:'[data-tour="journey"]',placement:"bottom"},{id:"toolbar",title:"Filters + modes",body:"Search, filter, and switch between Cinema, Flow, and Compare as the story evolves.",target:'[data-tour="toolbar"]',placement:"bottom"},{id:"quick-actions",title:"Quick actions",body:"Launch Story Mode, open the command palette, or jump to bottlenecks instantly.",target:'[data-tour="quick-actions"]',placement:"left"},{id:"stage",title:"Cinema stage",body:"The timeline shows every step as a scene. Scrub to see pacing and concurrency.",target:'[data-tour="stage"]',placement:"top"},{id:"inspector",title:"Inspector",body:ge==="executive"?"Open key moments to validate outcome impact and communication-ready summaries.":"Open any step to read payloads, apply redaction, and replay from that moment.",target:'[data-tour="inspector"]',placement:"left"},{id:"compare",title:"Compare runs",body:V?"Compare is live. Review deltas in cost, steps, and wall time side by side.":"Replay from a step to unlock compare mode and validate improvements.",target:'[data-tour="compare"]',placement:"top"}),k},[V,Lt,ge]),DM=S.useCallback(()=>{oy(null),u("flow")},[u]),ui=S.useMemo(()=>{var q,Q,X,oe;if(!e)return[];const w=[],k=[...e.steps].sort((re,Oe)=>(Oe.durationMs??0)-(re.durationMs??0))[0],R=e.steps.find(re=>re.status==="failed");if(R&&B!==R.id&&w.push({id:"jump-error",title:"Investigate first failure",body:`${R.name} failed and should be inspected before optimization work.`,actionLabel:"Open failed step",tone:"warning",action:da}),k&&B!==k.id&&w.push({id:"jump-bottleneck",title:"Tackle latency bottleneck",body:`${k.name} is the slowest scene in this run and the best optimization target.`,actionLabel:"Open bottleneck",tone:"priority",action:un}),(q=C==null?void 0:C.hypotheses)!=null&&q[0]){const re=C.hypotheses[0];w.push({id:"investigate-hypothesis",title:re.title,body:re.summary,actionLabel:"Inspect evidence",tone:"info",action:()=>{const Oe=re.evidenceStepIds[0];Oe&&(le(Oe),l!=="cinema"&&u("cinema"))}})}if(l!=="matrix"&&w.push({id:"matrix-experiment",title:"Run scenario matrix",body:"Compare prompt and strategy alternatives from one anchor step to rank causal impact.",actionLabel:"Open matrix",tone:"info",action:()=>{var re;Jl(B??((re=e.steps[0])==null?void 0:re.id)??""),u("matrix")}}),!V&&(B||(Q=e.steps[0])!=null&&Q.id)){const re=B??((X=e.steps[0])==null?void 0:X.id)??null;re&&w.push({id:"run-replay",title:"Create director replay",body:"Branch a replay trace and validate whether your change improves the run.",actionLabel:"Replay from step",tone:"info",action:()=>{xn(re)}})}if((oe=qt==null?void 0:qt.causalRanking)!=null&&oe.length){const re=qt.causalRanking[0];w.push({id:"causal-factor",title:`Top causal factor: ${re.factor}`,body:`Confidence ${(re.confidence*100).toFixed(0)}% across ${re.evidence.samples} sample(s).`,actionLabel:"View matrix",tone:"priority",action:()=>u("matrix")})}return w.slice(0,4)},[V,xn,C,un,da,l,qt,B,e,u]),ha=S.useMemo(()=>{var X,oe;if(!e)return"No trace loaded.";const w=[...e.steps].sort((re,Oe)=>(Oe.durationMs??0)-(re.durationMs??0))[0],k=e.steps.filter(re=>re.status==="failed").length,R=(X=C==null?void 0:C.hypotheses)==null?void 0:X[0],q=(oe=qt==null?void 0:qt.causalRanking)==null?void 0:oe[0];return[`Run ${e.id} completed with ${e.steps.length} steps across ${e.metadata.wallTimeMs}ms.`,w?`Primary latency driver: ${w.name} (${w.durationMs??0}ms).`:null,k>0?`Observed ${k} failed step(s), indicating reliability risk.`:"No failed steps observed.",R?`Top investigation hypothesis: ${R.title} (${R.severity}).`:null,q?`Highest ranked causal factor from matrix: ${q.factor} (${(q.confidence*100).toFixed(0)}% confidence).`:null,"Recommended plan: inspect bottleneck evidence, validate with replay matrix, and lock in mitigations."].filter(Boolean).join(" ")},[C,qt==null?void 0:qt.causalRanking,e]),OM=S.useCallback(w=>{var R,q;const k=w.toLowerCase();if(!e)return"No trace is loaded yet.";if(k.includes("bottleneck")||k.includes("slow")){const Q=[...e.steps].sort((X,oe)=>(oe.durationMs??0)-(X.durationMs??0))[0];return Q?`The primary bottleneck is ${Q.name} at ${Q.durationMs??0}ms. Prioritize this step for optimization and replay validation.`:"No bottleneck could be determined from current trace data."}if(k.includes("risk")||k.includes("failure")||k.includes("error")){const Q=e.steps.filter(X=>X.status==="failed");return Q.length?`Risk is concentrated in ${Q.length} failed step(s), starting at ${((R=Q[0])==null?void 0:R.name)??"unknown"}.`:"Failure risk appears low for this run; no failed steps were observed."}return k.includes("cost")?`Recorded run cost is ${(e.metadata.totalCostUsd??0).toFixed(4)} USD. Use matrix scenarios to evaluate cheaper prompt/strategy options.`:k.includes("next")||k.includes("action")?ui.length?`Next action: ${((q=ui[0])==null?void 0:q.title)??"Open matrix"}.`:"Next action: open Cinema mode, inspect bottleneck, then run the matrix.":ha},[ha,ui,e]),LM=S.useCallback(()=>{if(!e)return;const w=`# Director Narrative

${ha}

## Recommended Actions
${ui.map(k=>`- ${k.title}: ${k.body}`).join(`
`)}`;WE(`agent-director-narrative-${e.id}.md`,w,"text/markdown")},[ha,ui,e]);S.useEffect(()=>{var R;if(!e)return;jq(),ye(0),K(!1);const w=Math.min(Math.max((e.metadata.wallTimeMs||1)*.2,5e3),6e4);Bn(w),e.steps.length>500&&Ot(!0),V||Ae(!1),l==="compare"&&!V&&u("cinema");const k=B&&e.steps.some(q=>q.id===B)?B:((R=e.steps[0])==null?void 0:R.id)??"";Jl(q=>q&&e.steps.some(Q=>Q.id===q)?q:k)},[e,V,l,B,u,Ot,Ae]),S.useEffect(()=>(document.body.classList.toggle("explain-mode",He),()=>{document.body.classList.remove("explain-mode")}),[He]),S.useEffect(()=>(document.body.classList.toggle("story-mode",!!(ce!=null&&ce.active)),()=>{document.body.classList.remove("story-mode")}),[ce==null?void 0:ce.active]),S.useEffect(()=>{if(!(ce!=null&&ce.active))return;const w=kr[ce.step];if(!w){Hn();return}Promise.resolve(w.action());const k=window.setTimeout(()=>{ni(R=>R&&R.active?{...R,step:R.step+1}:R)},w.duration);return()=>window.clearTimeout(k)},[kr,Hn,ce]),S.useEffect(()=>{ce!=null&&ce.active&&(!e||!aa||e.id!==aa&&Hn())},[ce==null?void 0:ce.active,e,aa,Hn]),S.useEffect(()=>{ue>0&&U(w=>w.playback?w:{...w,playback:!0})},[ue,U]),S.useEffect(()=>{l==="flow"&&U(w=>w.flow?w:{...w,flow:!0}),l==="matrix"&&U(w=>w.matrix?w:{...w,matrix:!0})},[l,U]),S.useEffect(()=>{B&&U(w=>w.inspect?w:{...w,inspect:!0})},[B,U]),S.useEffect(()=>{Zl>1&&U(w=>w.collaborate?w:{...w,collaborate:!0})},[Zl,U]),S.useEffect(()=>{if(!I||M||su.current)return;const w=Os[0];if(!w||w.traceId!==(e==null?void 0:e.id))return;const k=Math.abs(w.playheadMs-ue),R=w.mode!==l,q=(w.selectedStepId??null)!==(B??null);k<600&&!R&&!q||(su.current=!0,ye(w.playheadMs),(w.mode==="cinema"||w.mode==="flow"||w.mode==="compare"||w.mode==="matrix"||w.mode==="gameplay")&&u(w.mode),le(w.selectedStepId??null),window.setTimeout(()=>{su.current=!1},180))},[M,l,ue,Os,B,u,I,e==null?void 0:e.id]),S.useEffect(()=>{if(!e)return;const k=Date.parse(e.startedAt)+ue;let R=0,q=Number.POSITIVE_INFINITY;e.steps.forEach((X,oe)=>{const re=Date.parse(X.startedAt),Oe=Date.parse(X.endedAt??X.startedAt);if(k>=re&&k<=Oe){R=oe,q=0;return}const wn=Math.min(Math.abs(k-re),Math.abs(k-Oe));wn<q&&(q=wn,R=oe)}),[R,R-1,R+1].filter(X=>X>=0&&X<e.steps.length).forEach(X=>{const oe=e.steps[X];oe&&Cq(e.id,oe.id,ne)})},[e,ue,ne]),S.useEffect(()=>{if(!e||!M||l!=="cinema"&&l!=="compare")return;const w=(V==null?void 0:V.metadata.wallTimeMs)??0,k=l==="compare"?Math.max(e.metadata.wallTimeMs||1,w||1):e.metadata.wallTimeMs||1;let R=0,q=performance.now();const Q=X=>{const oe=(X-q)*Je;q=X,ye(re=>{const Oe=re+oe;return Oe>=k?(K(!1),k):Oe}),R=requestAnimationFrame(Q)};return R=requestAnimationFrame(Q),()=>cancelAnimationFrame(R)},[e,V,M,Je,l]),S.useEffect(()=>{const w=k=>{var X;const R=k.target,q=(X=R==null?void 0:R.tagName)==null?void 0:X.toLowerCase();if(!(q==="input"||q==="textarea"||q==="select"||R!=null&&R.isContentEditable)){if((k.metaKey||k.ctrlKey)&&k.key.toLowerCase()==="k"){k.preventDefault(),Ve(oe=>!oe);return}if(k.key==="?"||k.key==="/"&&k.shiftKey){k.preventDefault(),ie(!0);return}if(k.key.toLowerCase()==="s"){k.preventDefault(),fa();return}if(k.key.toLowerCase()==="e"){k.preventDefault(),we(oe=>!oe);return}if(k.key.toLowerCase()==="t"){k.preventDefault(),Xe(!0);return}if(k.key==="Escape"){if(st){Xe(!1),Ct(!0);return}ie(!1),Ve(!1),le(null);return}if(k.key===" "){k.preventDefault(),(l==="cinema"||l==="compare")&&K(oe=>!oe);return}if(k.key.toLowerCase()==="f"){k.preventDefault(),l==="flow"?u("cinema"):l==="cinema"&&De("flow");return}if(k.key.toLowerCase()==="c"){k.preventDefault(),l!=="cinema"&&u("cinema");return}if(k.key.toLowerCase()==="g"){k.preventDefault(),De("gameplay");return}if(k.key.toLowerCase()==="i"){k.preventDefault(),B?le(null):e!=null&&e.steps.length&&le(e.steps[0].id);return}if(k.key==="ArrowLeft"||k.key==="ArrowRight"){if(k.preventDefault(),!e)return;const oe=e.metadata.wallTimeMs||1;if(k.shiftKey){ye(k.key==="ArrowLeft"?0:oe),K(!1),u("cinema");return}const re=k.key==="ArrowRight"?1:-1,Oe=W4(yy,ue,re);Oe!=null&&(ye(Oe),K(!1),u("cinema"))}}};return window.addEventListener("keydown",w),()=>window.removeEventListener("keydown",w)},[l,B,e,ue,yy,De,u,we,Ve,Xe,Ct,st,fa]);const Sy=S.useMemo(()=>{if(!e||!ht||c)return null;const w=e.metadata.wallTimeMs||1,k=Math.min(Math.max(bn,5e3),w);let R=Math.max(0,ue-k/2);const q=Math.min(w,R+k);return q-R<k&&(R=Math.max(0,q-k)),{startMs:R,endMs:q}},[e,ht,ue,c,bn]),ci=!!(ce!=null&&ce.active),_y=(ce==null?void 0:ce.step)??0,qM=((ky=kr[_y])==null?void 0:ky.label)??"Wrapping up",FM=kr.length,VM=c!==h,$M=`${Math.min(Gn.length,ua)}/${Gn.length}`,BM=S.useMemo(()=>[{id:"story-toggle",label:ci?"Stop story mode":"Start story mode",description:"Auto-runs a cinematic walkthrough.",group:"Story",keys:"S",onTrigger:fa},{id:"tour-start",label:"Start guided tour",description:"Walk the interface step by step.",group:"Onboarding",keys:"T",onTrigger:()=>Xe(!0)},{id:"explain-toggle",label:He?"Disable explain mode":"Enable explain mode",description:"Toggle contextual overlays.",group:"Onboarding",keys:"E",onTrigger:()=>we(w=>!w)},{id:"shortcuts",label:"Show shortcuts",description:"Open the keyboard map.",group:"Onboarding",keys:"?",onTrigger:()=>ie(!0)},{id:"playback-toggle",label:M?"Pause playback":"Play playback",description:"Start or stop the run.",group:"Playback",keys:"Space",onTrigger:lu},{id:"mode-cinema",label:"Switch to Cinema",description:"Timeline playback view.",group:"Modes",keys:"C",onTrigger:()=>De("cinema")},{id:"mode-flow",label:"Switch to Flow",description:"Graph dependency view.",group:"Modes",keys:"F",onTrigger:()=>De("flow")},{id:"mode-compare",label:"Open Compare",description:"Side-by-side diff view.",group:"Modes",onTrigger:()=>De("compare"),disabled:!V},{id:"mode-matrix",label:"Open Matrix",description:"Counterfactual replay matrix view.",group:"Modes",onTrigger:()=>De("matrix")},{id:"mode-gameplay",label:"Open Gameplay",description:"World-class gameplay mechanics control center.",group:"Modes",keys:"G",onTrigger:()=>De("gameplay")},{id:"jump-bottleneck",label:"Jump to bottleneck",description:"Select the slowest step.",group:"Navigation",onTrigger:un},{id:"jump-error",label:"Jump to error",description:"Select the first failed step.",group:"Navigation",onTrigger:da},{id:"replay-step",label:"Replay from selected step",description:"Branch a Directors Cut.",group:"Tools",onTrigger:()=>B&&xn(B),disabled:!B},{id:"overlay-toggle",label:ae?"Hide overlay":"Show overlay",description:"Ghost diff in Cinema/Flow.",group:"Tools",onTrigger:()=>Ae(w=>!w),disabled:!V},{id:"safe-export",label:ne?"Disable safe export":"Enable safe export",description:"Redact sensitive payloads.",group:"Safety",onTrigger:()=>D(w=>!w)},{id:"reload",label:"Reload traces",description:"Refresh trace data.",group:"Meta",onTrigger:i}],[ci,fa,He,M,lu,De,V,un,da,B,xn,ae,ne,i,we,Ae,D,ie,Xe]);return n?d.jsx("div",{className:"loading",children:"Loading trace..."}):!r&&!e&&a.length===0?d.jsxs("div",{className:"error",children:[d.jsx("h2",{children:"No traces yet"}),d.jsx("p",{children:"Ingest your first trace, then reload to begin the Observe  Inspect  Direct workflow."}),d.jsxs("div",{className:"error-actions",children:[d.jsx("button",{className:"primary-button",type:"button",onClick:i,children:"Retry"}),d.jsx("a",{className:"ghost-button",href:"/help.html",target:"_blank",rel:"noreferrer",children:"Open help"})]})]}):r||!e?d.jsxs("div",{className:"error",children:[d.jsx("p",{children:r??"Failed to load trace."}),d.jsxs("div",{className:"error-actions",children:[d.jsx("button",{className:"primary-button",type:"button",onClick:i,children:"Retry"}),d.jsx("a",{className:"ghost-button",href:"/help.html",target:"_blank",rel:"noreferrer",children:"Open help"})]})]}):d.jsxs("div",{className:`app theme-${ln} ${He?"explain-mode":""} ${l==="compare"?"mode-compare":""} ${l==="matrix"?"mode-matrix":""} ${l==="gameplay"?"mode-gameplay":""}`,children:[d.jsx(bA,{trace:e,traces:a,selectedTraceId:s,onSelectTrace:o,onReload:i,onStartTour:()=>Xe(!0),onToggleStory:fa,onOpenPalette:()=>Ve(!0),onToggleExplain:()=>we(w=>!w),onShareSession:dM,onThemeChange:ti,themeMode:ln,activeSessions:Zl,shareStatus:ZN,explainMode:He,storyActive:ci}),!$e&&!be?d.jsx(iI,{onComplete:()=>he(!0),onStartTour:()=>{he(!0),Xe(!0)},onStartStory:li,persona:ge,onPersonaChange:ei}):null,$e&&!Lt?d.jsx(aI,{explainMode:He,storyActive:ci,onStartTour:()=>{on(!0),Xe(!0)},onStartStory:()=>{on(!0),li()},onToggleExplain:()=>we(w=>!w),onDismiss:()=>on(!0)}):null,d.jsx(tI,{steps:IM,open:st,onClose:()=>{Xe(!1),Ct(!0)},onComplete:()=>{Xe(!1),Ct(!0)}}),d.jsx(nI,{enabled:He}),d.jsx(oI,{active:ci,label:qM,step:_y,total:FM,onStop:Hn,onRestart:li}),d.jsx(xA,{insights:t,investigation:C,onSelectStep:w=>{le(w),l!=="cinema"&&u("cinema")},onJumpToError:da,onJumpToBottleneck:un}),d.jsx(XA,{trace:e,mode:l==="matrix"||l==="gameplay"?"cinema":l,playheadMs:ue,selectedStepId:B,compareTrace:V,collapsed:Yt,onToggleCollapsed:()=>_r(w=>!w),onModeChange:De,onSelectStep:w=>{le(w),l!=="cinema"&&u("cinema")},onJumpToBottleneck:un,onReplay:xn,onStartTour:()=>Xe(!0)}),d.jsxs("div",{className:"toolbar","data-help":!0,"data-help-indicator":!0,"data-tour":"toolbar","data-help-title":"Search + filters","data-help-body":"Filter by step type, enable Safe export, and jump between Cinema, Flow, Compare, and Matrix.","data-help-placement":"bottom",children:[d.jsx(SA,{query:c,typeFilter:m,onQueryChange:f,onTypeFilterChange:v}),d.jsxs("div",{className:"toolbar-actions",children:[d.jsx("input",{className:"search-input",value:p,onChange:w=>x(w.target.value),placeholder:"TraceQL (example: type=tool_call and duration_ms>800)","aria-label":"TraceQL query"}),d.jsx("button",{className:"ghost-button",type:"button",onClick:()=>void uM(),children:"Run TraceQL"}),g?d.jsxs("span",{className:"status-badge",children:[g.matchCount," match(es)"]}):null,VM?d.jsx("span",{className:"status-badge",children:"Filtering..."}):null,d.jsxs("span",{className:"status-badge",children:["Hydration ",$M]}),d.jsxs("span",{className:"status-badge",children:["Filter ",tM,"ms"]}),g?d.jsx("button",{className:"ghost-button",type:"button",onClick:()=>{x(""),y(null),_(null)},children:"Clear TraceQL"}):null,b?d.jsx("span",{className:"status-badge warn",children:b}):null,d.jsxs("select",{className:"search-select",value:P,onChange:w=>O(w.target.value),"aria-label":"Extension selector",children:[d.jsx("option",{value:"",children:"Select extension"}),j.map(w=>d.jsx("option",{value:w.id,children:w.name},w.id))]}),d.jsx("button",{className:"ghost-button",type:"button",onClick:()=>void cM(),disabled:!e||!P||J,children:J?"Running extension...":"Run extension"}),d.jsx("button",{className:`ghost-button ${l==="cinema"?"active":""}`,type:"button","aria-pressed":l==="cinema",title:"Timeline playback",onClick:()=>De("cinema"),"data-help":!0,"data-help-title":"Cinema mode","data-help-body":"Timeline view with step cards ordered by time.","data-help-placement":"bottom",children:"Cinema"}),d.jsx("button",{className:`ghost-button ${l==="flow"?"active":""}`,type:"button","aria-pressed":l==="flow",title:"Graph view",onClick:()=>De("flow"),"data-help":!0,"data-help-title":"Flow mode","data-help-body":"Dependency graph of steps and tool calls.","data-help-placement":"bottom",children:"Flow"}),d.jsx("button",{className:`ghost-button ${l==="compare"?"active":""}`,type:"button","aria-pressed":l==="compare",title:V?"Side-by-side compare":"Run a replay to enable compare",onClick:()=>De("compare"),disabled:!V,"data-tour":"compare","data-help":!0,"data-help-title":"Compare mode","data-help-body":"Side-by-side view after a replay. Enabled once you replay.","data-help-placement":"bottom",children:"Compare"}),d.jsx("button",{className:`ghost-button ${l==="matrix"?"active":""}`,type:"button","aria-pressed":l==="matrix",title:"Counterfactual replay matrix",onClick:()=>De("matrix"),"data-help":!0,"data-help-title":"Matrix mode","data-help-body":"Run multiple replay scenarios and rank likely causal factors.","data-help-placement":"bottom",children:"Matrix"}),d.jsx("button",{className:`ghost-button ${l==="gameplay"?"active":""}`,type:"button","aria-pressed":l==="gameplay",title:"Gameplay mechanics command center",onClick:()=>De("gameplay"),"data-help":!0,"data-help-title":"Gameplay mode","data-help-body":"Command raids, campaign, pvp, time forks, boss runs, economy, and liveops.","data-help-placement":"bottom",children:"Gameplay"}),d.jsxs("label",{className:"toggle",title:"Redact payloads and disable raw views for safe sharing","data-help":!0,"data-help-title":"Safe export","data-help-body":"Redacts secrets and disables raw payload views for safe sharing.","data-help-placement":"bottom",children:[d.jsx("input",{type:"checkbox",checked:ne,onChange:()=>D(w=>!w)}),"Safe export"]}),e.steps.length>200||ht?d.jsxs("label",{className:"toggle",title:"Window steps around the playhead for large traces","data-help":!0,"data-help-title":"Windowed mode","data-help-body":"Limits rendering to a playhead window for large traces.","data-help-placement":"bottom",children:[d.jsx("input",{type:"checkbox",checked:ht,onChange:()=>Ot(w=>!w)}),"Windowed"]}):null,V?d.jsxs("label",{className:"toggle",title:"Show ghost overlay of replay in Cinema/Flow","data-help":!0,"data-help-title":"Overlay replay","data-help-body":"Layer the replay over the base run to spot differences.","data-help-placement":"bottom",children:[d.jsx("input",{type:"checkbox",checked:ae,onChange:()=>Ae(w=>!w)}),"Overlay"]}):null,d.jsxs("label",{className:"toggle",title:"Follow active collaborator cursor and mode updates",children:[d.jsx("input",{type:"checkbox",checked:I,onChange:()=>F(w=>!w)}),"Sync playback"]})]})]}),A?d.jsxs("div",{className:"inspector-section",children:[d.jsx("div",{className:"inspector-section-title",children:"Extension output"}),d.jsx("pre",{className:"inspector-json",children:JSON.stringify(A,null,2)})]}):null,l==="cinema"?d.jsxs("div",{className:"playback-stack","data-tour":"playback",children:[d.jsx("div",{"data-help":!0,"data-help-title":"Playback controls","data-help-body":"Play, pause, scrub, and adjust speed to feel the rhythm of the run.","data-help-placement":"bottom",children:d.jsx(L0,{playheadMs:ue,wallTimeMs:e.metadata.wallTimeMs||1,isPlaying:M,speed:Je,onToggle:()=>K(w=>!w),onScrub:w=>ye(w),onSpeedChange:at})}),d.jsx("div",{"data-help":!0,"data-help-title":"Density map","data-help-body":"Zoom into hotspots and keep long traces readable with windowing.","data-help-placement":"bottom",children:d.jsx(GA,{traceStart:e.startedAt,traceEnd:e.endedAt,steps:e.steps,playheadMs:ue,windowRange:Sy,windowed:ht,spanMs:bn,onSpanChange:Bn,onToggleWindowed:Ot,onScrub:w=>ye(w),persistenceKey:e.id,laneStrategy:_e,visibleLaneGroups:aM,remotePlayheads:sM})})]}):null,l==="compare"&&V?d.jsx("div",{"data-help":!0,"data-help-title":"Compare playback","data-help-body":"Sync both runs to evaluate improvements at identical timestamps.","data-help-placement":"bottom",children:d.jsx(L0,{playheadMs:ue,wallTimeMs:Math.max(e.metadata.wallTimeMs||1,V.metadata.wallTimeMs||1),isPlaying:M,speed:Je,onToggle:()=>K(w=>!w),onScrub:w=>ye(w),onSpeedChange:at})}):null,d.jsxs("main",{className:`stage ${l==="compare"?"stage-compare":""} motion-fade-in`,role:"main",children:[d.jsx("div",{className:"main motion-slide-up",ref:au,"data-help":!0,"data-help-indicator":!0,"data-tour":"stage","data-help-title":"Trace stage","data-help-body":"Every step becomes a scene. Hover or click to open deep inspection.","data-help-placement":"top",children:d.jsx(oq,{morph:HN,onComplete:DM,children:d.jsxs(S.Suspense,{fallback:d.jsx("div",{className:"loading",children:"Loading view..."}),children:[l==="cinema"?d.jsx(VA,{trace:e,steps:vy,selectedStepId:B,onSelectStep:w=>le(w),playheadMs:ue,windowRange:Sy,timing:t==null?void 0:t.timing,ghostTrace:ae?V:null,diff:iM,laneStrategy:_e,laneGroupsOrder:oi.order,hiddenLaneGroups:oi.hidden,onLaneStrategyChange:fM,onToggleLaneGroupVisibility:hM,onMoveLaneGroup:SM}):null,l==="flow"?d.jsx(ez,{steps:vy,selectedStepId:B,onSelectStep:w=>le(w),baseTrace:e,compareTrace:V,compareSteps:rM,overlayEnabled:ae,onToggleOverlay:()=>Ae(w=>!w)}):null,l==="compare"&&V?d.jsx(tz,{baseTrace:e,compareTrace:V,playheadMs:ue,safeExport:ne,onExit:()=>{u("cinema"),te(null)}}):null,l==="matrix"?d.jsx(yI,{steps:e.steps,anchorStepId:Ql,onAnchorStepChange:Jl,scenarios:WN,onScenarioChange:CM,onDuplicateScenario:NM,onMoveScenario:MM,onAddScenario:jM,onRemoveScenario:TM,onRun:PM,onCancel:RM,onReplaceScenarios:EM,loading:KN,error:YN,job:sa,matrix:qt,safeExport:ne,onOpenCompare:AM}):null,l==="gameplay"?d.jsx(AI,{state:QN,playheadMs:ue,onUpdate:w=>la(k=>w(k)),session:Be,playerId:Cr,sessionError:JN,onCreateSession:pM,onJoinSession:mM,onLeaveSession:gM,onDispatchAction:vM,guild:XN,onCreateGuild:yM,onJoinGuild:bM,onScheduleGuildEvent:xM,onCompleteGuildEvent:wM}):null]})})}),d.jsx(S.Suspense,{fallback:d.jsx("div",{className:"loading",children:"Loading panel..."}),children:l==="compare"||l==="matrix"||l==="gameplay"?null:by?d.jsx(nz,{traceId:e.id,step:by,safeExport:ne,onClose:()=>le(null),onReplay:xn}):d.jsx(eI,{trace:e,mode:l,selectedStepId:B,onModeChange:De,onSelectStep:w=>le(w),onJumpToBottleneck:un,onReplay:xn,recommendations:ui,persona:ge,annotations:oM,activityFeed:eM,onAddAnnotation:kM,missionProgress:H,missionCompletion:lM,onResetMissions:_M,narrative:ha,onAskDirector:OM,onExportNarrative:LM})})]}),d.jsx(sI,{mode:l==="matrix"||l==="gameplay"?"cinema":l,isPlaying:M,storyActive:ci,explainMode:He,hidden:l==="compare",open:ra,onToggleOpen:()=>zn(w=>!w),onTogglePlay:lu,onStartStory:li,onStopStory:Hn,onStartTour:()=>Xe(!0),onOpenPalette:()=>Ve(!0),onShowShortcuts:()=>ie(!0),onToggleExplain:()=>we(w=>!w),onJumpToBottleneck:un}),d.jsx(QA,{open:Z,onClose:()=>Ve(!1),actions:BM}),d.jsx(WA,{open:$,onClose:()=>ie(!1)})]})}Qp.createRoot(document.getElementById("root")).render(d.jsx(iP.StrictMode,{children:d.jsx(uz,{})}));export{iP as R,RA as S,qA as T,U4 as a,G4 as b,zm as c,TT as d,fz as e,dz as f,Pk as g,kq as h,d as j,S as r,kA as s};
